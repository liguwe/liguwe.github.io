
---

#算法

## 一、综述

1. 数据结构和算法解决是  “如何让计算机更快时间、更省空间的解决问题”。
2. 因此需从`执行时间`和`占用空间`两个维度来评估数据结构和算法的性能。
3. 分别用`时间复杂度`和 `空间复杂度` 两个概念来描述性能问题，二者统称为`复杂度`。
4. 复杂度描述的是算法`执行时间`（或`占用空间`）与 `数据规模`的  `增长趋势` 关系。

## 二、时间复杂度

### （一）什么是时间复杂度

统计的是 算法运行时间随着数据量变大时的  `增长趋势` ，而不是 `具体运行时间`

下面函数展示了随着 `n` 的增加，算法的 `时间的复杂度`

```javascript
// 算法 A 时间复杂度：常数阶
function algorithm_A(n) {
    console.log(0);
}
// 算法 B 时间复杂度：线性阶
function algorithm_B(n) {
    for (let i = 0; i < n; i++) {
        console.log(0);
    }
}
// 算法 C 时间复杂度：常数阶
function algorithm_C(n) {
    for (let i = 0; i < 1000000; i++) {
        console.log(0);
    }
}
```

上面代码的的**增长趋势**如下图：

![image.png|480](https://od-1310531898.cos.ap-beijing.myqcloud.com/202307280924424.png)

时间复杂度由多项式 `T(n)` 中最高阶的项来决定。这是因为在趋于无穷大时，最高阶的项将发挥主导作用，其他项的影响都可以被忽略。即 **“系数无法撼动阶数”** ， 当趋于无穷大时，这些常数变得无足轻重，如下图：

![image.png|315](https://od-1310531898.cos.ap-beijing.myqcloud.com/202307270939486.png)


### （二）如何计算时间复杂度

```javascript
function aFun() {
    console.log("Hello, World!");      //  需要执行 1 次
    return 0;       // 需要执行 1 次
}

// 需要执行 2 次运算
function bFun(n) {
    for(let i = 0; i < n; i++) {         // 需要执行 (n + 1) 次
        console.log("Hello, World!");      // 需要执行 n 次
    }
    return 0;       // 需要执行 1 次
}
// 需要执行 ( n + 1 + n + 1 ) = 2n +2 次运算

 function cal(n) {
   let sum = 0; // 1 次
   let i = 1; // 1 次
   let j = 1; // 1 次
   for (; i <= n; ++i) {  // n 次
     j = 1;  // n 次
     for (; j <= n; ++j) {  // n * n ，也即是  n平方次
       sum = sum +  i * j;  // n * n ，也即是  n平方次
     }
   }
 }
// 那么这个方法需要执行 ( n^2 + n^2 + n + n + 1 + 1 +1 ) = 2n^2 +2n + 3 
```

如下图：

![image.png|585](https://od-1310531898.cos.ap-beijing.myqcloud.com/202307300928803.png)


### （三）几个时间复杂度的分析原则

- 只关注 `循环执行次数最多`的一段代码，即 **“系数无法撼动阶数”** 
- 加法法则：总复杂度  等于  **量级最大** 的那段代码的复杂度
- 乘法法则：嵌套代码的复杂度等于 **嵌套内外代码复杂度的乘积** 
- 多个规模求加法：`O(m+n)`
- 多个规模求乘法：`O(m*n)`

### （四）常见的算法时间复杂度

#### 1、常数阶：O(1)

```javascript
/* 常数阶 */
function constant(n) {
    let count = 0;
    const size = 100000; // size 是固定的
    for (let i = 0; i < size; i++) count++;
    return count;
}
```

#### 2、线性阶：O(n)

通常出现在单层循环中，`遍历数组和遍历链表`等操作的时间复杂度均为 `O(n)` 

#### 3、平方阶：O(n^2)

通常出现在 `嵌套循环` 中，如冒泡排序。

> [!info]
> ![image.png|600](https://od-1310531898.cos.ap-beijing.myqcloud.com/202307300904669.png)


#### 4、指数阶：O(2^n)

- 实际场景，**细胞分裂**：初始状态为 `1` 个细胞，分裂一轮后变为 `2` 个，分裂`两轮`后变个`4` 细胞 ... 

![image.png|465](https://od-1310531898.cos.ap-beijing.myqcloud.com/202307300850887.png)

- `指数阶`常出现于`递归函数` 中，如下代码：

```javascript
/* 指数阶（递归实现） */
function expRecur(n) {
    if (n == 1) return 1;
    return expRecur(n - 1) + expRecur(n - 1) + 1;
}
```

#### 5、对数阶：O(log n)

- 与`指数阶`相反，对数阶反映了  **“每轮缩减到一半的情况”**
- 常出于「二分查找」和「分治算法」中
- `每轮缩减到一半`的代码示例及图例如下：
```javascript
/* 对数阶（循环实现） */
function logarithmic(n) {
    let count = 0;
    while (n > 1) {
        n = n / 2;
        count++;
    }
    return count;
}
```

![image.png|480](https://od-1310531898.cos.ap-beijing.myqcloud.com/202307300857430.png)

- 与 `指数阶` 一样，对数阶也常出于 `递归函数` 中，如下代码

```javascript
/* 对数阶（递归实现） */
function logRecur(n) {
    if (n <= 1) return 0;
    return logRecur(n / 2) + 1;
}
```

#### 6、线性对数阶：`O(n*log n)`

如主流排序算法 快速排序、归并排序、堆排序等

![image.png|600](https://od-1310531898.cos.ap-beijing.myqcloud.com/202307300906973.png)

#### 7、阶乘阶：O(n!)

即 `「全排列」` 问题

![image.png|360](https://od-1310531898.cos.ap-beijing.myqcloud.com/202307300908035.png)

> [!question]
> 画出一张 `阶乘阶` 的 分裂图？

### （五）最差、最佳、平均时间复杂度


- `「最差时间复杂度」`更为实用，因为它给出了一个 **“效率安全值”**
- 至于其他，如 `平均情况时间复杂度`  等忽略吧

## 三、空间复杂度

「空间复杂度 Space Complexity」用于衡量算法使用**内存空间随着数据量变大时的增长趋势**

### （一）算法相关 `空间`

- **「输入空间」** 用于存储算法的输入数据。
- **「暂存空间」** 用于存储算法运行过程中的变量、对象、函数上下文等数据。
	- 「暂存数据」用于保存算法运行过程中的各种常量、变量、对象等。
	- 「栈帧空间」用于保存调用函数的上下文数据。
		- 系统在每次调用函数时都会在栈顶部`创建`一个栈帧，
		- 函数返回后，栈帧空间会被`释放`。
	- 「指令空间」用于保存编译后的程序指令，在实际统计中`通常忽略不计`。
- **「输出空间」** 用于存储算法的输出数据。

![image.png|600](https://od-1310531898.cos.ap-beijing.myqcloud.com/202307300938727.png)

```javascript
/* 类 */
class Node {
    val;
    next;
    constructor(val) {
        this.val = val === undefined ? 0 : val; // 节点值
        this.next = null;                       // 指向下一节点的引用
    }
}

/* 函数 */
function constFunc() {
    // do something
    return 0;
}

function algorithm(n) {       // 输入数据: 输入空间，即函数
    const a = 0;              // 暂存数据（常量）
    let b = 0;                // 暂存数据（变量）
    const node = new Node(0); // 暂存数据（对象）
    const c = constFunc();    // 栈帧空间（调用函数）
    return a + b + c;         // 输出数据：返回数据，即 return
}

```

### （二）如何推算空间复杂度

通常只关注 `最差空间复杂度` , 看下面代码就懂了，因为我们必须要有 足够的内存空间预留，所以：

- 以`最差`输入数据为准
- 以算法运行过程中的`峰值内存`为准

```javascript
function algorithm(n) {
    const a = 0;                   // O(1)
    const b = new Array(10000);    // O(1)
    if (n > 10) {
        const nums = new Array(n); // O(n)
    }
}
```

以下代码的空间复杂度分析：

```javascript
function constFunc() {
    // do something
    return 0;
}
/* 循环 O(1) */
// 因为每轮循环后，调用的函数都会 释放了栈帧空间，所以空间复杂度为 O(1)
function loop(n) {
    for (let i = 0; i < n; i++) {
        constFunc();
    }
}
/* 递归 O(n) */
// 递归函数 recur() 在运行过程中会同时存在 个未返回的 recur()
// 所以，会有 O(n) 的栈帧空间
function recur(n) {
    if (n === 1) return;
    return recur(n - 1);
}

```

### （三）常见的空间复杂度类型

#### 1、常数阶：O(1)

常数阶常见于 **数量与输入数据大小 n 无关的常量、变量、对象**
 
```javascript
/* 常数阶 */
function constant(n) {
    // 常量、变量、对象占用 O(1) 空间
    const a = 0;
    const b = 0;
    const nums = new Array(10000);
    const node = new ListNode(0);
    // 循环中的变量占用 O(1) 空间
    for (let i = 0; i < n; i++) {
        const c = 0;
    }
    // 循环中的函数占用 O(1) 空间
    for (let i = 0; i < n; i++) {
        constFunc();
    }
}
```

> [!tip]
> 需要注意的是，在循环中初始化变量或调用函数而占用的内存，在进入下一循环后就会被释放，即不会累积占用空间，空间复杂度仍为`O(1)`

#### 2、线性阶：O(n)

线性阶常见于 **元素数量与 输入数据大小 `n` 成正比的数组、链表、栈、队列等。**

```javascript
/* 线性阶 */
function linear(n) {
    // 长度为 n 的数组占用 O(n) 空间
    const nums = new Array(n);
    // 长度为 n 的列表占用 O(n) 空间
    const nodes = [];
    for (let i = 0; i < n; i++) {
        nodes.push(new ListNode(i));
    }
    // 长度为 n 的哈希表占用 O(n) 空间
    const map = new Map();
    for (let i = 0; i < n; i++) {
        map.set(i, i.toString());
    }
}
```

 
以下递归函数会同时存在 `n` 个未返回的 `algorithm()` 函数， 会占用 `O(n)`大小的栈帧空间：

```javascript
/* 线性阶（递归实现） */
function linearRecur(n) {
    console.log(`递归 n = ${n}`);
    if (n === 1) return;
    linearRecur(n - 1);
}
```

如下图：

![image.png|465](https://od-1310531898.cos.ap-beijing.myqcloud.com/202307301008360.png)


#### 3、平方阶：O(n^2)

平方阶常见于**矩阵 和 图** ，如下代码：

```javascript
/* 平方阶 */
function quadratic(n) {
    // 矩阵占用 O(n^2) 空间
    const numMatrix = Array(n)
        .fill(null)
        .map(() => Array(n).fill(null));
    
    // 二维列表占用 O(n^2) 空间
    const numList = [];
    for (let i = 0; i < n; i++) {
        const tmp = [];
        for (let j = 0; j < n; j++) {
            tmp.push(0);
        }
        numList.push(tmp);
    }
}
```

看看递归的场景：注意，需要关注 `nums` 的长度。

```javascript
/* 平方阶（递归实现） */
function quadraticRecur(n) {
    if (n <= 0) return 0;
    const nums = new Array(n);
    console.log(`递归 n = ${n} 中的 nums 长度 = ${nums.length}`);
    return quadraticRecur(n - 1);
}

```

![image.png|525](https://od-1310531898.cos.ap-beijing.myqcloud.com/202307301012731.png)

#### 4、指数阶：O(2^n)

常见与构造二叉树，且关注最终的 `节点个数`，即占用的空间。

![image.png|510](https://od-1310531898.cos.ap-beijing.myqcloud.com/202307301014153.png)

![image.png|810](https://od-1310531898.cos.ap-beijing.myqcloud.com/202307301016322.png)

#### 5、对数阶：O(log n)

![image.png|600](https://od-1310531898.cos.ap-beijing.myqcloud.com/202307301019346.png)

> [!question]
>  最后，数字转成字符串的表述，其实没太理解。

## 四、其他

- 理论上，尾递归函数的空间复杂度可以被优化为 `O(1)` ，但跟编程语言有关系
- 当前的计算机系统，以空间换时间场景较多

## 参考

https://www.hello-algo.com/chapter_computational_complexity/time_complexity/#222

---
<div class="liguwe-doc-footer">
            <div class="liguwe-doc-footer-edit-link">
                <p class="liguwe-doc-footer-p">
                    <svg t="1687912573060" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1498">
                        <path d="M854.6 370.6c-9.9-39.4 9.9-102.2 73.4-124.4l-67.9-3.6s-25.7-90-143.6-98c-117.8-8.1-194.9-3-195-3 0.1 0 87.4 55.6 52.4 154.7-25.6 52.5-65.8 95.6-108.8 144.7-1.3 1.3-2.5 2.6-3.5 3.7C319.4 605 96 860 96 860c245.9 64.4 410.7-6.3 508.2-91.1 20.5-0.2 35.9-0.3 46.3-0.3 135.8 0 250.6-117.6 245.9-248.4-3.2-89.9-31.9-110.2-41.8-149.6z m-204.1 334c-10.6 0-26.2 0.1-46.8 0.3l-23.6 0.2-17.8 15.5c-47.1 41-104.4 71.5-171.4 87.6-52.5 12.6-110 16.2-172.7 9.6 18-20.5 36.5-41.6 55.4-63.1 92-104.6 173.8-197.5 236.9-268.5l1.4-1.4 1.3-1.5c4.1-4.6 20.6-23.3 24.7-28.1 9.7-11.1 17.3-19.9 24.5-28.6 30.7-36.7 52.2-67.8 69-102.2l1.6-3.3 1.2-3.4c13.7-38.8 15.4-76.9 6.2-112.8 22.5 0.7 46.5 1.9 71.7 3.6 33.3 2.3 55.5 12.9 71.1 29.2 5.8 6 10.2 12.5 13.4 18.7 1 2 1.7 3.6 2.3 5l5 17.7c-15.7 34.5-19.9 73.3-11.4 107.2 3 11.8 6.9 22.4 12.3 34.4 2.1 4.7 9.5 20.1 11 23.3 10.3 22.7 15.4 43 16.7 78.7 3.3 94.6-82.7 181.9-182 181.9z"
                              p-id="1499" fill="#10b981"></path>
                    </svg>
                    <a href="https://www.yuque.com/liguwe/post/0088" target="_blank" class="liguwe-doc-footer-edit-link-a">
                        View this page on Yuque
                    </a>
                </p>
                <p class="liguwe-doc-footer-p">
                    <svg t="1687927073703" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1464"><path d="M512 96l480 832H32z" p-id="1465" fill="#10b981"></path></svg>
                    <a href="https://liguwe.vercel.app/post/0088.html" target="_blank" class="liguwe-doc-footer-edit-link-a">
                        View this page on Vercel
                    </a>
                </p>
                <p class="liguwe-doc-footer-p">
                    <svg t="1687913054251" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5173"><path d="M853.333333 501.333333c-17.066667 0-32 14.933333-32 32v320c0 6.4-4.266667 10.666667-10.666666 10.666667H170.666667c-6.4 0-10.666667-4.266667-10.666667-10.666667V213.333333c0-6.4 4.266667-10.666667 10.666667-10.666666h320c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32H170.666667c-40.533333 0-74.666667 34.133333-74.666667 74.666666v640c0 40.533333 34.133333 74.666667 74.666667 74.666667h640c40.533333 0 74.666667-34.133333 74.666666-74.666667V533.333333c0-17.066667-14.933333-32-32-32z" fill="#10b981" p-id="5174"></path><path d="M405.333333 484.266667l-32 125.866666c-2.133333 10.666667 0 23.466667 8.533334 29.866667 6.4 6.4 14.933333 8.533333 23.466666 8.533333h8.533334l125.866666-32c6.4-2.133333 10.666667-4.266667 14.933334-8.533333l300.8-300.8c38.4-38.4 38.4-102.4 0-140.8-38.4-38.4-102.4-38.4-140.8 0L413.866667 469.333333c-4.266667 4.266667-6.4 8.533333-8.533334 14.933334z m59.733334 23.466666L761.6 213.333333c12.8-12.8 36.266667-12.8 49.066667 0 12.8 12.8 12.8 36.266667 0 49.066667L516.266667 558.933333l-66.133334 17.066667 14.933334-68.266667z" fill="#10b981" p-id="5175"></path></svg>
                    <a href="https://github.com/liguwe/liguwe.github.io/blob/master/docs/0088.md" target="_blank" class="liguwe-doc-footer-edit-link-a">Edit this page on Github</a>
                </p>
                 <p class="liguwe-doc-footer-p">
                     <svg t="1687912510038" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                             p-id="2280">
                            <path d="M746.666667 106.666667a192 192 0 0 1 192 192v373.333333a192 192 0 0 1-192 192h-107.925334l-97.749333 90.496a42.666667 42.666667 0 0 1-57.984 0L385.28 864H277.333333a192 192 0 0 1-192-192V298.666667a192 192 0 0 1 192-192h469.333334z m0 64H277.333333a128 128 0 0 0-128 128v373.333333a128 128 0 0 0 128 128h107.925334a64 64 0 0 1 43.477333 17.045333L512 894.122667l83.264-77.077334a64 64 0 0 1 43.477333-17.045333H746.666667a128 128 0 0 0 128-128V298.666667a128 128 0 0 0-128-128zM512 426.666667a54.677333 54.677333 0 0 1 54.634667 54.698666A54.677333 54.677333 0 0 1 512 536.064a54.677333 54.677333 0 0 1-54.634667-54.698667A54.677333 54.677333 0 0 1 512 426.666667z m-196.693333 0a54.677333 54.677333 0 0 1 54.634666 54.698666 54.677333 54.677333 0 0 1-54.613333 54.698667 54.677333 54.677333 0 0 1-54.634667-54.698667A54.677333 54.677333 0 0 1 315.306667 426.666667z m393.386666 0a54.677333 54.677333 0 0 1 54.613334 54.698666 54.677333 54.677333 0 0 1-54.613334 54.698667 54.677333 54.677333 0 0 1-54.634666-54.698667A54.677333 54.677333 0 0 1 708.672 426.666667z"
                                  fill="#10b981" p-id="2281"></path>
                        </svg>
                     <a href="https://github.com/liguwe/liguwe.github.io/issues/new?title=0088.%E7%AE%97%E6%B3%95%E7%9A%84%E5%A4%8D%E6%9D%82%E5%BA%A6%E8%AF%84%E4%BC%B0@%E7%AE%97%E6%B3%95&labels=liguwe.site"
                       target="_blank" class="liguwe-doc-footer-edit-link-a">
                        Comment this page on GitHub Issues
                    </a>
                </p>
                 <p class="liguwe-doc-footer-p">
                     <svg t="1687912510038" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                             p-id="2280">
                            <path d="M746.666667 106.666667a192 192 0 0 1 192 192v373.333333a192 192 0 0 1-192 192h-107.925334l-97.749333 90.496a42.666667 42.666667 0 0 1-57.984 0L385.28 864H277.333333a192 192 0 0 1-192-192V298.666667a192 192 0 0 1 192-192h469.333334z m0 64H277.333333a128 128 0 0 0-128 128v373.333333a128 128 0 0 0 128 128h107.925334a64 64 0 0 1 43.477333 17.045333L512 894.122667l83.264-77.077334a64 64 0 0 1 43.477333-17.045333H746.666667a128 128 0 0 0 128-128V298.666667a128 128 0 0 0-128-128zM512 426.666667a54.677333 54.677333 0 0 1 54.634667 54.698666A54.677333 54.677333 0 0 1 512 536.064a54.677333 54.677333 0 0 1-54.634667-54.698667A54.677333 54.677333 0 0 1 512 426.666667z m-196.693333 0a54.677333 54.677333 0 0 1 54.634666 54.698666 54.677333 54.677333 0 0 1-54.613333 54.698667 54.677333 54.677333 0 0 1-54.634667-54.698667A54.677333 54.677333 0 0 1 315.306667 426.666667z m393.386666 0a54.677333 54.677333 0 0 1 54.613334 54.698666 54.677333 54.677333 0 0 1-54.613334 54.698667 54.677333 54.677333 0 0 1-54.634666-54.698667A54.677333 54.677333 0 0 1 708.672 426.666667z"
                                  fill="#10b981" p-id="2281"></path>
                        </svg>
                     <a href="https://github.com/liguwe/liguwe.github.io/discussions/new?category=general&labels=liguwe.site&title=0088.%E7%AE%97%E6%B3%95%E7%9A%84%E5%A4%8D%E6%9D%82%E5%BA%A6%E8%AF%84%E4%BC%B0@%E7%AE%97%E6%B3%95"
                       target="_blank" class="liguwe-doc-footer-edit-link-a">
                        Discuss this page on GitHub Discussions
                    </a>
                </p>
            </div>
            <p class="liguwe-doc-footer-update-time"><i>Last updated：2023.07.27</i></p>
            <div id="liguwe-comment"></div>
        </div>