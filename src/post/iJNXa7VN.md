
# CSRF：跨站请求伪造

`#前端安全` 

![图片&文件](./files/20241023-2.png)


## 目录
<!-- toc -->
 ## 1. 一个示例 

![图片&文件](./files/20241023-3.png)

## 2. 特点

![图片&文件](./files/20241023-4.png)

## 3. 如何规避

- 严格的同源策略，两种策略 **strict 和 Lax** 
	- 示例：`Set-Cookie: session=abc123; SameSite=Strict; Secure`
	- ![图片&文件](./files/20241023-6.png)
- **较短的会话时间**可以减少 CSRF 攻击的窗口期
- 双重 cookie
	- ![图片&文件](./files/20241023-5.png)
- **重要操作进行二次验证**，比如重新输入密码
- 使用 CSRF Token
	- 服务器为每个用户会话生成一个唯一的令牌，并在每个表单中包含这个令牌
	- ![图片&文件](./files/20241023-7.png)
- 重要操作，需要验证码提示
- 对于 AJAX 请求，可以添加自定义头
	- 相等于重要入口必须通过特定的自己的 js 发起Ajax，直接访问不行
- **避免 get 请求**，至少避免直接通过 a 跨域访问了
- CSP ，限制可以加载资源的来源
- 风险安全提示：当前用户打开其他用户填写的链接时，需告知风险（**知乎跳转外链**，等等都会告知风险）

## 4. 与 XSS 的区别

![图片&文件](./files/20241023-8.png)
