
# æ¥é›¨æ°´


`#leetcode`   `#2024/07/31`  `#ç®—æ³•/åŒæŒ‡é’ˆ` `#ç®—æ³•/å¤‡å¿˜å½•`   


## ç›®å½•
<!-- toc -->
 ## 1. é¢˜ç›®åŠç†è§£ 

![image.png600|600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407310906405.png?imageSlim)

## 2. è§£é¢˜æ€è·¯

ğŸŒ§ æœ€å¤šèƒ½å¤Ÿè£…å¤šå°‘æ°´  =  æ¯ä¸ªæŸ±å­ä¸Šèƒ½å¤Ÿè£…å¤šå°‘æ°´  = `æ¯ä¸ªæŸ±å­å·¦è¾¹å’Œå³è¾¹æœ€é«˜æŸ±å­çš„æœ€çŸ®çš„é‚£ä¸ª - è¯¥æŸ±å­çš„é«˜åº¦` ï¼Œå¦‚ä¸‹ä»£ç 

```python
water[i] = min(
    # å·¦è¾¹æœ€é«˜çš„æŸ±å­
    max(height[0..i]),  
    # å³è¾¹æœ€é«˜çš„æŸ±å­
    max(height[i..end]) 
) - height[i]
```

å¦‚ä¸‹å›¾ï¼š

![image.png600|536](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407310915725.png?imageSlim)

## 3. ä»£ç å®ç°

### 3.1. è§£æ³•ä¸€ï¼šæš´åŠ›éå†

æŒ‰ç…§ä¸Šé¢çš„æ€è·¯ï¼Œç›´æ¥==æš´åŠ›éå†==å³å¯ï¼Œå¤æ‚åº¦æ˜¯Â `O(N^2)`ï¼Œç©ºé—´å¤æ‚åº¦ `O(1)`

```javascript
var trap = function(height) {
    var n = height.length;
    var res = 0;
    for (var i = 1; i < n - 1; i++) {
        var l_max = 0, r_max = 0;
        // æ‰¾å³è¾¹æœ€é«˜çš„æŸ±å­
        for (var j = i; j < n; j++)
            r_max = Math.max(r_max, height[j]);
        // æ‰¾å·¦è¾¹æœ€é«˜çš„æŸ±å­
        for (var j = i; j >= 0; j--)
            l_max = Math.max(l_max, height[j]);
        // å¦‚æœè‡ªå·±å°±æ˜¯æœ€é«˜çš„è¯ï¼Œ
        // l_max == r_max == height[i]
        res += Math.min(l_max, r_max) - height[i];
    }
    return res;
};
```

### 3.2. è§£æ³•äºŒï¼šå¤‡å¿˜å½•ä¼˜åŒ–

å¯¹äºè§£æ³•ä¸€ï¼Œå¯ä»¥ä½¿ç”¨å¤‡å¿˜å½•ä¼˜åŒ–ï¼š

- å®šä¹‰ä¸¤ä¸ªæ•°ç»„Â `r_max`Â å’ŒÂ `l_max`Â å……å½“å¤‡å¿˜å½•ï¼Œé¢„å…ˆæŠŠè¿™ä¸¤ä¸ªæ•°ç»„è®¡ç®—å¥½ï¼Œé¿å…é‡å¤è®¡ç®—
	- `l_max[i]`Â è¡¨ç¤ºä½ç½®Â `i`Â å·¦è¾¹æœ€é«˜çš„æŸ±å­é«˜åº¦
	- `r_max[i]`Â è¡¨ç¤ºä½ç½®Â `i`Â å³è¾¹æœ€é«˜çš„æŸ±å­é«˜åº¦

### 3.3. è§£æ³•ä¸‰ï¼šåŒæŒ‡é’ˆ

æ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ï¼Œç©ºé—´å¤æ‚åº¦ä¸º `O(1)`

```javascript
water[i] = min(
    # å·¦è¾¹æœ€é«˜çš„æŸ±å­
    max(height[0..i]),  
    # å³è¾¹æœ€é«˜çš„æŸ±å­
    max(height[i..end]) 
) - height[i]
/**  
 * @param {number[]} height  
 * @return {number}  
 */  
var trap = function (height) {  
  
    // åŒæŒ‡é’ˆ  
    let left = 0;  
    let right = height.length - 1;  
  
    // å½“å‰éå†çš„å…ƒç´ çš„ å·¦è¾¹çš„æœ€å¤§å€¼  
    let leftMax = 0;  
    // å½“å‰éå†çš„å…ƒç´ çš„ å³è¾¹çš„æœ€å¤§å€¼  
    let rightMax = 0;  
    // ç»“æœ  
    let res = 0;  
  
    // éå†, åŒå‘éå†ï¼Œä»ä¸¤è¾¹å‘ä¸­é—´é æ‹¢  
    while (left < right) {  
        // æ›´æ–°å·¦è¾¹çš„æœ€å¤§å€¼  
        leftMax = Math.max(leftMax, height[left]);  
        // æ›´æ–°å³è¾¹çš„æœ€å¤§å€¼  
        rightMax = Math.max(rightMax, height[right]);  
  
        // è¯´æ˜æœ€å°å€¼åœ¨å·¦è¾¹ï¼Œå½“å‰å…ƒç´ çš„æ°´é‡ = å·¦è¾¹æœ€å¤§å€¼ - å½“å‰å…ƒç´ çš„é«˜åº¦  
        if (leftMax < rightMax) {  
            // æ›´æ–°ç»“æœ  
            res += leftMax - height[left];  
            // å·¦æŒ‡é’ˆå‘å³ç§»åŠ¨  
            left++;  
            // è¯´æ˜æœ€å°å€¼åœ¨å³è¾¹ï¼Œå½“å‰å…ƒç´ çš„æ°´é‡ = å³è¾¹æœ€å¤§å€¼ - å½“å‰å…ƒç´ çš„é«˜åº¦  
        } else {  
            // æ›´æ–°ç»“æœ  
            res += rightMax - height[right];  
            // å³æŒ‡é’ˆå‘å·¦ç§»åŠ¨  
            right--;  
        }  
    }  
  
    // è¿”å›ç»“æœ  
    return res;  
  
};
```

