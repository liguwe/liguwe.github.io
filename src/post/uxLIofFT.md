
# å¸¸è§é¢è¯•é¢˜ï¼šç¯‡äºŒ

`#å‰ç«¯é¢è¯•` 


## ç›®å½•
<!-- toc -->
 ## 1. `??` ä¸ `||` çš„åŒºåˆ«ï¼Ÿ 

- `||`Â è¿ç®—ç¬¦åœ¨å·¦ä¾§ä¸ºä»»ä½• `false` å€¼æ—¶éƒ½ä¼šè¿”å›å³ä¾§çš„å€¼ã€‚
- `??`Â è¿ç®—ç¬¦åªåœ¨å·¦ä¾§ä¸º **null æˆ– undefinedæ—¶**æ‰ä¼šè¿”å›å³ä¾§çš„å€¼ã€‚
	- ä¸º null
	- æˆ–è€… undefined

```javascript hl:2,5,8
console.log(0 || 42);     // è¾“å‡º: 42
console.log(0 ?? 42);     // è¾“å‡º: 0

console.log('' || 'default');  // è¾“å‡º: "default"
console.log('' ?? 'default');  // è¾“å‡º: ""

console.log(false || true);    // è¾“å‡º: true
console.log(false ?? true);    // è¾“å‡º: false
```

## 2. ä¸‹é¢ä»£ç çš„è¾“å‡ºæ˜¯ï¼Ÿ

```javascript
console.log(typeof typeof typeof null);

console.log(typeof console.log(1));
```

```javascript hl:5,10
// åˆ†æ
// 1. typeof null è¿”å›çš„æ˜¯ "object"
// 2. typeof typeof nullï¼šå³ typeof "object" è¿”å›çš„æ˜¯ "string"
// 3. typeof typeof typeof nullï¼šå³ typeof "string" è¿”å›çš„ "string"
console.log(typeof typeof typeof null);  // string

// åˆ†æï¼š
// 1. console.log(1) è¿”å›çš„æ˜¯ undefined
// 2. typeof undefined è¿”å›çš„æ˜¯ "undefined"
console.log(typeof console.log(1)); // undefined

// æ‰€ä»¥ output:
// string
// 1  å› ä¸º console.log(1) ä¼šæ‰§è¡Œçš„ï¼Œè¾“å‡º 1ï¼Œç„¶åè¿”å› undefined
// undefined

```

## 3. ä¸‹é¢ä»£ç çš„æ‰§è¡Œé¡ºåº

- ç«‹å³æ‰§è¡Œå‡½æ•°çš„å˜é‡**åªåœ¨å‡½æ•°å†…éƒ¨æœ‰æ•ˆ**

```javascript hl:12,1,9
var a = 3;
function c() {
  alert(a);
}

(function () {
  // ç«‹å³æ‰§è¡Œå‡½æ•°çš„å˜é‡åªåœ¨å‡½æ•°å†…éƒ¨æœ‰æ•ˆ
  // è¿™é‡Œçš„ a æ˜¯å±€éƒ¨å˜é‡
  // ä½†æ˜¯ c å‡½æ•°ä¸­çš„ a æ˜¯å…¨å±€å˜é‡
  // æ‰€ä»¥ c å‡½æ•°ä¸­çš„ a ä»å…¨å±€å˜é‡ä¸­å–å€¼
  var a = 4;
  c(); // 3
})();
```

## 4. æµè§ˆå™¨ç¼“å­˜çš„ä¼˜å…ˆçº§

- â†’ sw 
- â†’ å¼ºåˆ¶ç¼“å­˜ï¼ˆç¼“å­˜æ²¡æœ‰è¿‡æœŸï¼Œä¸å‘è¯·æ±‚ï¼‰
-  â†’ åå•†ç¼“å­˜ï¼ˆæœ¬åœ°æœªå‘½ä¸­ï¼Œå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè¿”å› 304 Not Modifiedï¼Œå‘Šè¯‰æµè§ˆå™¨ä½¿ç”¨ç¼“å­˜ï¼‰
- â†’ ç¬¬ 4 ä¸ªè¡¨è¿°æœ‰é—®é¢˜ï¼Œç¦»çº¿å¯ä½¿ç”¨ manifest 

--- 

![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-45.png)

## 5. generator å‡½æ•°æ˜¯å¦‚ä½•åšåˆ°ä¸­æ–­å’Œæ¢å¤æ‰§è¡Œçš„ï¼Ÿ

### 5.1. åŸºæœ¬åŸç†

Generator å‡½æ•°çš„æ ¸å¿ƒæœºåˆ¶åŒ…æ‹¬ï¼š

- **å‡½æ•°çŠ¶æ€ä¿å­˜**ï¼š
	- Generator å‡½æ•°å¯ä»¥ä¿å­˜å…¶å†…éƒ¨çŠ¶æ€ã€‚
- **yield å…³é”®å­—**ï¼š
	- ç”¨äºæš‚åœå‡½æ•°æ‰§è¡Œå¹¶å¯èƒ½è¿”å›ä¸€ä¸ªå€¼
- **è¿­ä»£å™¨å¯¹è±¡**ï¼š
	- Generator å‡½æ•°è¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œç”¨äºæ§åˆ¶å‡½æ•°çš„æ‰§è¡Œã€‚

### 5.2. è¯¦ç»†å®ç°æœºåˆ¶

#### 5.2.1. å‡½æ•°å¯¹è±¡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡

å½“å®šä¹‰ä¸€ä¸ª Generator å‡½æ•°æ—¶ï¼ŒJavaScript å¼•æ“ä¼šåˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡åŒ…å«ï¼š

- å‡½æ•°ä½“ä»£ç 
- é—­åŒ…å˜é‡
- ä¸€ä¸ª**å†…éƒ¨æŒ‡é’ˆ**ï¼ŒæŒ‡å‘å½“å‰çš„æ‰§è¡Œä½ç½®

#### 5.2.2. yield è¯­å¥çš„ä½œç”¨

`yield` è¯­å¥åœ¨ Generator å‡½æ•°ä¸­èµ·åˆ°å…³é”®ä½œç”¨ï¼š

- å®ƒæ ‡è®°äº†å‡½æ•°çš„æš‚åœç‚¹
- å¯ä»¥è¿”å›ä¸€ä¸ªå€¼ç»™è°ƒç”¨è€…
- ä¿å­˜å½“å‰çš„æ‰§è¡ŒçŠ¶æ€ï¼ŒåŒ…æ‹¬å±€éƒ¨å˜é‡å’Œè¡¨è¾¾å¼çš„å€¼

#### 5.2.3. è¿­ä»£å™¨å¯¹è±¡

å½“è°ƒç”¨ Generator å‡½æ•°æ—¶ï¼Œå®ƒä¸ä¼šç«‹å³æ‰§è¡Œå‡½æ•°ä½“ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ª `next()` æ–¹æ³•ï¼Œç”¨äºæ§åˆ¶ Generator çš„æ‰§è¡Œï¼š

```javascript
function* exampleGenerator() {
    yield 1;
    yield 2;
    return 3;
}

const gen = exampleGenerator();
console.log(gen.next()); // { value: 1, done: false }
console.log(gen.next()); // { value: 2, done: false }
console.log(gen.next()); // { value: 3, done: true }
```

#### 5.2.4. æ‰§è¡Œè¿‡ç¨‹

1. **åˆå§‹åŒ–**ï¼šè°ƒç”¨ `Generator å‡½æ•°`åˆ›å»ºè¿­ä»£å™¨å¯¹è±¡ï¼Œä½†ä¸æ‰§è¡Œå‡½æ•°ä½“ã€‚
2. **æ‰§è¡Œ**ï¼šæ¯æ¬¡è°ƒç”¨ `next()` æ–¹æ³•ï¼Œå‡½æ•°ä»å½“å‰ä½ç½®æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ª `yield` è¯­å¥ã€‚
3. **æš‚åœ**ï¼šé‡åˆ° `yield` æ—¶ï¼Œå‡½æ•°æ‰§è¡Œæš‚åœï¼Œä¿å­˜å½“å‰çŠ¶æ€ï¼Œå¹¶è¿”å› `yield` åçš„è¡¨è¾¾å¼å€¼ã€‚
4. **æ¢å¤**ï¼šä¸‹ä¸€æ¬¡è°ƒç”¨ `next()` æ—¶ï¼Œä»ä¸Šæ¬¡æš‚åœçš„ä½ç½®ç»§ç»­æ‰§è¡Œã€‚

### 5.3. å†…éƒ¨å®ç°ç»†èŠ‚

è™½ç„¶å…·ä½“å®ç°å¯èƒ½å›  JavaScript å¼•æ“è€Œå¼‚ï¼Œä½†åŸºæœ¬åŸç†å¦‚ä¸‹ï¼š

#### 5.3.1. çŠ¶æ€æœº

Generator å‡½æ•°å†…éƒ¨å®é™…ä¸Šæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œæ¯ä¸ª `yield` è¯­å¥å¯¹åº”ä¸€ä¸ªçŠ¶æ€ï¼š

```javascript hl:7
function* generatorFunction() {
    yield 1;
    yield 2;
    yield 3;
}

// å¯ä»¥è¢«æ¦‚å¿µåŒ–ä¸ºï¼š
function generatorFunction() {
    let state = 0;
    return {
        next() {
            switch (state) {
                case 0:
                    state = 1;
                    return { value: 1, done: false };
                case 1:
                    state = 2;
                    return { value: 2, done: false };
                case 2:
                    state = 3;
                    return { value: 3, done: false };
                case 3:
                    return { value: undefined, done: true };
            }
        }
    };
}
```

#### 5.3.2. é—­åŒ…å’Œä¸Šä¸‹æ–‡ä¿å­˜

Generator ä½¿ç”¨é—­åŒ…æ¥ä¿å­˜å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬å±€éƒ¨å˜é‡å’Œæ‰§è¡Œä½ç½®ï¼š

```javascript hl:3
function* counter() {
    let count = 0;
    while (true) {
        yield ++count;
    }
}

// å¯ä»¥è¢«æ¦‚å¿µåŒ–ä¸ºï¼š
function counter() {
    let count = 0;
    return {
        next() {
            count++;
            return { value: count, done: false };
        }
    };
}
```

#### 5.3.3. å¼‚æ­¥æ“ä½œå¤„ç†

Generator ç‰¹åˆ«é€‚åˆå¤„ç†å¼‚æ­¥æ“ä½œï¼Œé€šè¿‡ä¸ Promise ç»“åˆä½¿ç”¨ï¼š

```javascript hl:17
function* fetchData() {
    try {
        const response = yield fetch('https://api.example.com/data');
        const data = yield response.json();
        console.log(data);
    } catch (error) {
        console.error('Error:', error);
    }
}

function runGenerator(genFn) {
    const gen = genFn();
    function step(result) {
        if (result.done) return result.value;
        return Promise.resolve(result.value).then(
            value => step(gen.next(value)),
            error => step(gen.throw(error))
        );
    }
    return step(gen.next());
}

runGenerator(fetchData);
```

### 5.4. æ€§èƒ½è€ƒè™‘

- Generator å‡½æ•°çš„ä¸­æ–­å’Œæ¢å¤æ“ä½œæ¯”æ™®é€šå‡½æ•°è°ƒç”¨è¦æ…¢ä¸€äº›ã€‚
- ä½†åœ¨å¤„ç†å¤§é‡æ•°æ®æˆ–å¤æ‚å¼‚æ­¥æµç¨‹æ—¶ï¼Œ`Generator` å¯ä»¥æä¾›æ›´å¥½çš„å†…å­˜æ•ˆç‡å’Œä»£ç ç»„ç»‡ã€‚

### 5.5. æ€»ç»“

- Generator å‡½æ•°**é€šè¿‡å·§å¦™çš„çŠ¶æ€ç®¡ç†å’Œé—­åŒ…æœºåˆ¶ï¼Œå®ç°äº†å‡½æ•°æ‰§è¡Œçš„ä¸­æ–­å’Œæ¢å¤**ã€‚
- è¿™ç§æœºåˆ¶ä¸ºå¤„ç†å¤æ‚çš„åŒæ­¥å’Œå¼‚æ­¥æµç¨‹æä¾›äº†å¼ºå¤§è€Œçµæ´»çš„å·¥å…·ï¼Œå°½ç®¡åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šå¸¦æ¥è½»å¾®çš„æ€§èƒ½å¼€é”€ã€‚

ç†è§£ Generator çš„å·¥ä½œåŸç†æœ‰åŠ©äºæ›´å¥½åœ°åˆ©ç”¨è¿™ä¸€å¼ºå¤§ç‰¹æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¼‚æ­¥æ“ä½œå’Œå¤æ‚æ•°æ®æµæ—¶ã€‚

## 6. åˆ—ä¸¾æµè§ˆå™¨çš„å‡ ä¸ªå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡

- **dom äº‹ä»¶**
	- çš„å›è°ƒ
- **script æ ‡ç­¾çš„åŠ è½½ä¸æ‰§è¡Œ**
- Ajax çš„å›è°ƒ
- fetch çš„å›è°ƒ

![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-48.png)

> ä½†==å®ä»»åŠ¡ä¹Ÿæœ‰ä¸åŒçš„ä¼˜å…ˆçº§ï¼Œæ¯”å¦‚ä¼˜å…ˆçº§æœ€é«˜çš„æ˜¯ input è¡¨å•äº‹ä»¶==

## 7. è¯´è¯´ toPrimitive çš„ç†è§£

`toPrimitive` æ˜¯ JavaScript ä¸­ä¸€ä¸ªé‡è¦çš„å†…éƒ¨æ“ä½œï¼Œç”¨äº**å°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼**

### 7.1. åŸºæœ¬æ¦‚å¿µ

`Symbol.toPrimitive` æ˜¯ä¸€ä¸ªå†…ç½®çš„ Symbol å€¼ï¼Œå®ƒæŒ‡å®šäº†ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼ã€‚å½“éœ€è¦å°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼æ—¶ï¼ŒJavaScript å¼•æ“ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚

### 7.2. è½¬æ¢è§„åˆ™

å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼æ—¶æœ‰ä¸‰ç§æ¨¡å¼ï¼ˆ`hint`ï¼‰ï¼š

1. **"number"** - æœŸæœ›å¾—åˆ°ä¸€ä¸ªæ•°å­—
2. **"string"** - æœŸæœ›å¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²
3. **"default"** - æ²¡æœ‰æ˜ç¡®æœŸæœ›ï¼Œç”±å¯¹è±¡è‡ªè¡Œå†³å®š

å¦‚ä¸‹ä»£ç ï¼š

```javascript hl:3
// è‡ªå®šä¹‰å¯¹è±¡çš„ toPrimitive è¡Œä¸º
const obj = {
    [Symbol.toPrimitive](hint) {
        switch (hint) {
            case 'number':
                return 42;
            case 'string':
                return 'hello';
            case 'default':
                return 'default';
            default:
                throw new Error('Invalid hint');
        }
    }
};

// æµ‹è¯•ä¸åŒè½¬æ¢åœºæ™¯
console.log(+obj);          // 42 (number hint)
console.log(`${obj}`);      // "hello" (string hint)
console.log(obj + '');      // "default" (default hint)
```

### 7.3. é»˜è®¤è½¬æ¢è¿‡ç¨‹

å¦‚æœæ²¡æœ‰å®ç° `Symbol.toPrimitive`ï¼ŒJavaScript ä¼šæŒ‰ç…§ä»¥ä¸‹é¡ºåºå°è¯•è½¬æ¢ï¼š

#### 7.3.1. å¯¹äº hint "string"

1. å…ˆè°ƒç”¨ `toString()`
2. å¦‚æœè¿”å›çš„ä¸æ˜¯åŸå§‹å€¼ï¼Œåˆ™è°ƒç”¨ `valueOf()`
3. å¦‚æœè¿˜ä¸æ˜¯åŸå§‹å€¼ï¼Œåˆ™æŠ›å‡º `TypeError`

```javascript
const obj = {
    toString() {
        return "Custom String";
    },
    valueOf() {
        return 100;
    }
};

console.log(String(obj)); // "Custom String"
```

#### 7.3.2. å¯¹äº hint "number" æˆ– "default"

1. å…ˆè°ƒç”¨ `valueOf()`
2. å¦‚æœè¿”å›çš„ä¸æ˜¯åŸå§‹å€¼ï¼Œåˆ™è°ƒç”¨ `toString()`
3. å¦‚æœè¿˜ä¸æ˜¯åŸå§‹å€¼ï¼Œåˆ™æŠ›å‡º `TypeError`

```javascript
const obj = {
    toString() {
        return "Custom String";
    },
    valueOf() {
        return 100;
    }
};

console.log(Number(obj)); // 100
```

### 7.4. å¸¸è§ä½¿ç”¨åœºæ™¯

#### 7.4.1. æ•°å­¦è¿ç®—

```javascript
const obj = {
    value: 42,
    [Symbol.toPrimitive](hint) {
        if (hint === 'number') {
            return this.value;
        }
        return null;
    }
};

console.log(obj * 2); // 84
```

#### 7.4.2. å­—ç¬¦ä¸²æ‹¼æ¥

```javascript
const obj = {
    firstName: 'John',
    lastName: 'Doe',
    [Symbol.toPrimitive](hint) {
        if (hint === 'string') {
            return `${this.firstName} ${this.lastName}`;
        }
        return null;
    }
};

console.log(`Name: ${obj}`); // "Name: John Doe"
```

### 7.5. æ—¥æœŸå¯¹è±¡ç¤ºä¾‹

Date å¯¹è±¡æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å†…ç½® `toPrimitive` å®ç°ç¤ºä¾‹ï¼š==å› ä¸ºä¸‰ç§ `hint` éƒ½æœ‰==

```javascript
const date = new Date();

// string hint
console.log(String(date)); // å½“å‰æ—¥æœŸçš„å­—ç¬¦ä¸²è¡¨ç¤º

// number hint
console.log(+date); // æ—¶é—´æˆ³

// default hint
console.log(date + ''); // å½“å‰æ—¥æœŸçš„å­—ç¬¦ä¸²è¡¨ç¤º
```

### 7.6. æ€»ç»“

![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-49.png)

## 8. ä¸‹é¢å‡½æ•°çš„æ‰§è¡Œæƒ…å†µ

åœ¨å…·åå‡½æ•°è¡¨è¾¾å¼ä¸­ï¼Œ**å‡½æ•°åæ ‡è¯†ç¬¦åœ¨å‡½æ•°å†…éƒ¨æ˜¯åªè¯»çš„**ï¼ˆread-onlyï¼‰

```javascript hl:3
var b = 10;
(function b() {
  // åœ¨å…·åå‡½æ•°è¡¨è¾¾å¼ä¸­ï¼Œå‡½æ•°åæ ‡è¯†ç¬¦åœ¨å‡½æ•°å†…éƒ¨æ˜¯åªè¯»çš„ï¼ˆread-onlyï¼‰
  // ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™ // TypeError: Assignment to constant variable
  // æ‰€ä»¥è¿™é‡Œä¿®æ”¹ b çš„å€¼æ˜¯æ— æ•ˆçš„
  b = 20;
  console.log(b);
});

console.log(b); // 10
```

![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-52.png)

### 8.1. ä¸¥æ ¼æ¨¡å¼ä¸‹çš„è¡Œä¸º

åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå°è¯•ä¿®æ”¹åªè¯»æ ‡è¯†ç¬¦ä¼šæŠ›å‡ºé”™è¯¯ï¼š

```javascript
var b = 10;
(function b() {
    'use strict';
    b = 20;  // TypeError: Assignment to constant variable
    console.log(b);
})();
```

### 8.2. ä½¿ç”¨ä¸åŒçš„å˜é‡å

```javascript
var b = 10;
(function c() {
    b = 20;
    console.log(b);  // è¾“å‡º 20
})();
console.log(b);  // è¾“å‡º 20
```

### 8.3. åœ¨å‡½æ•°å†…éƒ¨å£°æ˜åŒåå˜é‡

```javascript hl:3
var b = 10;
(function b() {
    var b = 20;  // åˆ›å»ºæ–°çš„å±€éƒ¨å˜é‡
    console.log(b);  // è¾“å‡º 20
})();
console.log(b);  // è¾“å‡º 10
```

## 9. è¯·ç®€è¿° Reflect ä½œç”¨

`Reflect` æ˜¯ ES6 (ECMAScript 2015) å¼•å…¥çš„ä¸€ä¸ªæ–°çš„å…¨å±€å¯¹è±¡ï¼Œå®ƒæä¾›äº†ä¸€ç»„æ–¹æ³•æ¥æ“ä½œå¯¹è±¡ã€‚Reflect çš„ä¸»è¦ä½œç”¨å¯ä»¥æ¦‚æ‹¬å¦‚ä¸‹ï¼š

### 9.1. ç»Ÿä¸€æ“ä½œå¯¹è±¡çš„ API

Reflect æä¾›äº†**ä¸€å¥—ç»Ÿä¸€çš„æ–¹æ³•**æ¥æ‰§è¡Œ JavaScript å¯¹è±¡çš„å¸¸è§æ“ä½œï¼Œ
- å¦‚å±æ€§çš„è¯»å–ã€è®¾ç½®ã€åˆ é™¤ç­‰ã€‚
- è¿™äº›æ–¹æ³•ä¸å¯¹åº”çš„ **Object æ–¹æ³•** ç›¸ä¼¼ï¼Œä½†æ›´åŠ è§„èŒƒåŒ–å’ŒåŠŸèƒ½ç»Ÿä¸€ã€‚

### 9.2. ç®€åŒ–ä»£ç†ï¼ˆProxyï¼‰çš„åˆ›å»º

Reflect çš„æ–¹æ³•ä¸ `Proxy` çš„å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰æ–¹æ³•**ä¸€ä¸€å¯¹åº”**
- ä½¿å¾—åœ¨å®ç°ä»£ç†æ—¶æ›´åŠ æ–¹ä¾¿å’Œç›´è§‚ã€‚

### 9.3. æä¾›å‡½æ•°å¼ç¼–ç¨‹é£æ ¼çš„å¯¹è±¡æ“ä½œ

Reflect çš„æ–¹æ³•éƒ½æ˜¯å‡½æ•°ï¼Œå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œæœ‰åˆ©äºå‡½æ•°å¼ç¼–ç¨‹ã€‚

### 9.4. æ›¿ä»£ä¸€äº› Object çš„æ–¹æ³•

æŸäº› Object ä¸Šçš„æ–¹æ³•åœ¨ Reflect ä¸­æœ‰å¯¹åº”çš„ã€æ›´åˆç†çš„å®ç°ã€‚

### 9.5. è¿”å›æ›´åˆç†çš„ç»“æœ

æŸäº›æ“ä½œï¼ˆå¦‚ definePropertyï¼‰åœ¨ `Reflect` ä¸­ä¼šè¿”å›å¸ƒå°”å€¼è¡¨ç¤ºæˆåŠŸä¸å¦ï¼Œè€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸ã€‚

### 9.6. è®©æˆ‘ä»¬é€šè¿‡ä¸€äº›ä¾‹å­æ¥å…·ä½“è¯´æ˜ Reflect çš„ä½œç”¨ï¼š

```javascript
// 1. è·å–å±æ€§
const obj = { x: 1, y: 2 };
console.log(Reflect.get(obj, 'x')); // 1

// 2. è®¾ç½®å±æ€§
Reflect.set(obj, 'z', 3);
console.log(obj); // { x: 1, y: 2, z: 3 }

// 3. åˆ é™¤å±æ€§
Reflect.deleteProperty(obj, 'y');
console.log(obj); // { x: 1, z: 3 }

// 4. æ£€æŸ¥å¯¹è±¡æ˜¯å¦æœ‰æŸä¸ªå±æ€§
console.log(Reflect.has(obj, 'x')); // true

// 5. è·å–å¯¹è±¡çš„æ‰€æœ‰å±æ€§
console.log(Reflect.ownKeys(obj)); // ['x', 'z']

// 6. åˆ›å»ºæ–°å¯¹è±¡
const newObj = Reflect.construct(function(a, b) {
  this.sum = a + b;
}, [1, 2]);
console.log(newObj.sum); // 3

// 7. è°ƒç”¨å‡½æ•°å¹¶æŒ‡å®š this
function greet() {
  return `Hello, ${this.name}!`;
}
console.log(Reflect.apply(greet, { name: 'Alice' }, [])); // "Hello, Alice!"

// 8. å®šä¹‰æ–°å±æ€§
Reflect.defineProperty(obj, 'w', {
  value: 4,
  writable: true,
  enumerable: true,
  configurable: true
});
console.log(obj.w); // 4
```

### 9.7. å…¶ä»–

1. **Reflect ä¸»è¦ç”¨äºæ“ä½œæ™®é€šå¯¹è±¡ï¼Œä¸ç›´æ¥æ”¯æŒ Mapã€Set ç­‰é›†åˆç±»å‹**
2. Map ç­‰é›†åˆç±»å‹æœ‰è‡ªå·±çš„å®ä¾‹æ–¹æ³•è¿›è¡Œæ“ä½œ
3. å¦‚æœéœ€è¦ä½¿ç”¨ Reflect æ“ä½œ Mapï¼Œå¯ä»¥ï¼š
    - é€šè¿‡ Reflect.apply è°ƒç”¨ `Map çš„åŸå‹æ–¹æ³•`
    - ä½¿ç”¨ `Proxy` ä»£ç† Map çš„æ“ä½œ

## 10. ä»£ç æ‰§è¡Œ

```javascript hl:11
Promise.reject(1)
  .then(
    (res) => {
      console.log(2, res);
    },
    (err) => {
      console.log(3, err);
    },
  )
  .catch((err) => {
    // è¿™é‡Œä¸ä¼šæ‰§è¡Œï¼Œå› ä¸ºå‰é¢å·²ç»æœ‰äº†é”™è¯¯å¤„ç†
    console.log(4, err);
  });

```

## 11. å¦‚ä½•æŠŠä¸€ä¸ªå¯¹è±¡å˜æˆå¯è¿­ä»£å¯¹è±¡

éƒ¨ç½² `[Symbol.iterator]` æ¥å£

![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-7.png)

## 12. åœ¨ JavaScript ä¸­è·å–å­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦ï¼Œå°¤å…¶æ˜¯è¦æ”¯æŒè¡¨æƒ…ç¬¦å·ï¼ˆemojiï¼‰

### 12.1. ä½¿ç”¨ Blob å¯¹è±¡ï¼ˆæœ€ç®€å•æ¨èçš„æ–¹å¼ï¼‰

```javascript hl:3,2
function getByteLength(str) {
    // åˆ›å»ºä¸€ä¸ª Blob å¯¹è±¡ï¼Œå¹¶æŒ‡å®šç¼–ç ä¸º UTF-8
    const blob = new Blob([str], { type: 'text/plain' });
    return blob.size;
}

// æµ‹è¯•
console.log(getByteLength('hello')); // 5
console.log(getByteLength('ä½ å¥½')); // 6
console.log(getByteLength('ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦')); // 25
console.log(getByteLength('ğŸŒ')); // 4
```

### 12.2. ä½¿ç”¨ `TextEncoder`ï¼ˆç°ä»£æµè§ˆå™¨æ¨èï¼‰

```javascript hl:2
function getByteLength(str) {
    return new TextEncoder().encode(str).length;
}

// æµ‹è¯•
console.log(getByteLength('hello')); // 5
console.log(getByteLength('ä½ å¥½')); // 6
console.log(getByteLength('ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦')); // 25
console.log(getByteLength('ğŸŒ')); // 4
```

### 12.3. æ‰‹åŠ¨è®¡ç®—ï¼ˆå…¼å®¹æ€§æœ€å¥½ï¼Œä½†ä¸æ¨èï¼‰

```javascript
function getByteLength(str) {
    let length = 0;
    for (let i = 0; i < str.length; i++) {
        const code = str.charCodeAt(i);
        if (code <= 0x7f) {
            length += 1;
        } else if (code <= 0x7ff) {
            length += 2;
        } else if (code <= 0xffff) {
            length += 3;
        } else {
            length += 4;
        }
    }
    return length;
}

// æ³¨æ„ï¼šè¿™ç§æ–¹æ³•å¯¹äºæŸäº›ç‰¹æ®Šçš„emojiå¯èƒ½ä¸å¤Ÿå‡†ç¡®
```

### 12.4. å®Œæ•´çš„æµ‹è¯•ç¤ºä¾‹

```javascript
function compareByteLength() {
    const testStrings = [
        'hello',                    // æ™®é€šè‹±æ–‡
        'ä½ å¥½',                     // ä¸­æ–‡
        'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',                      // å¤æ‚emojiï¼ˆå®¶åº­ï¼‰
        'ğŸŒ',                       // ç®€å•emoji
        'ä½ å¥½ğŸ‘‹world',              // æ··åˆå­—ç¬¦ä¸²
        'â¤ï¸',                       // ç‰¹æ®Šemoji
        'ğŸ³ï¸â€ğŸŒˆ'                     // å½©è™¹æ——emoji
    ];

    const methods = {
        'Blobæ–¹æ³•': str => new Blob([str]).size,
        'TextEncoderæ–¹æ³•': str => new TextEncoder().encode(str).length
    };

    console.log('å­—ç¬¦ä¸²\t\tå­—ç¬¦é•¿åº¦\tBlobå­—èŠ‚\tEncoderå­—èŠ‚');
    console.log('----------------------------------------');

    testStrings.forEach(str => {
        console.log(
            `${str}\t\t` +
            `${str.length}\t\t` +
            `${methods['Blobæ–¹æ³•'](str)}\t\t` +
            `${methods['TextEncoderæ–¹æ³•'](str)}`
        );
    });
}

compareByteLength();
```

### 12.5. é‡è¦è¯´æ˜

#### 12.5.1. **ç¼–ç è¯´æ˜**

   - ä»¥ä¸Šæ–¹æ³•éƒ½æ˜¯åŸºäº `UTF-8` ç¼–ç è®¡ç®—å­—èŠ‚é•¿åº¦
   - UTF-8 æ˜¯ä¸€ç§å˜é•¿ç¼–ç ï¼š
     - ASCII å­—ç¬¦å  1 å­—èŠ‚
     - ä¸­æ–‡å­—ç¬¦**é€šå¸¸å  3 å­—èŠ‚**
     - `emoji` å¯èƒ½**å  4 å­—èŠ‚æˆ–æ›´å¤š**

#### 12.5.2. **æ–¹æ³•é€‰æ‹©å»ºè®®**

   - ä¼˜å…ˆä½¿ç”¨ `TextEncoder`ï¼Œå®ƒæ˜¯ä¸“é—¨ç”¨äºå¤„ç†æ–‡æœ¬ç¼–ç çš„æ ‡å‡† API
   - å¦‚æœéœ€è¦è€ƒè™‘å…¼å®¹æ€§ï¼Œå¯ä»¥ä½¿ç”¨ `Blob` æ–¹æ³•
   - é¿å…ä½¿ç”¨æ‰‹åŠ¨è®¡ç®—çš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒå¯èƒ½åœ¨å¤„ç†æŸäº›ç‰¹æ®Šå­—ç¬¦æ—¶ä¸å¤Ÿå‡†ç¡®

#### 12.5.3. **æ³¨æ„äº‹é¡¹**

   - æŸäº›å¤æ‚çš„ emojiï¼ˆå¦‚å®¶åº­ emojiï¼‰å®é™…ä¸Šæ˜¯å¤šä¸ª emoji ç»„åˆè€Œæˆçš„
   - æŸäº› emoji å¯èƒ½åŒ…å«å˜ä½“é€‰æ‹©ç¬¦ï¼ˆVS16ï¼‰ç­‰ç‰¹æ®Šå­—ç¬¦
   - åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»ºè®®æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ³•å¹¶è¿›è¡Œå……åˆ†æµ‹è¯•

#### 12.5.4. **æµè§ˆå™¨å…¼å®¹æ€§**

   - `TextEncoder`: ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒ
   - `Blob`: IE10+ éƒ½æ”¯æŒ
   - æ‰‹åŠ¨è®¡ç®—æ–¹æ³•: æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒï¼Œä½†å‡†ç¡®æ€§å¯èƒ½æœ‰é™

## 13. Mapã€WeakMapã€Object çš„åŒºåˆ«

![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-9.png)

## 14. å¦‚ä½•åˆ¤æ–­æ˜¯ PC è¿˜æ˜¯ç§»åŠ¨ç«¯

- ua
- touch äº‹ä»¶æ˜¯å¦åœ¨ documentä¸­
- æ¨ªç«–å±å¹•
- ç‰¹å®šå±æ€§ï¼Œæ¯”å¦‚é€šè¿‡ js åˆ¤æ–­åª’ä½“æŸ¥è¯¢æ˜¯å¦ç”Ÿæ•ˆ
- æœ€å¥½è¿˜æ˜¯ä½¿ç”¨ä¸‰æ–¹å·¥å…·åŒ…
- ç­‰ç­‰

## 15. js å¦‚ä½•åŠ¨æ€ç”Ÿæˆæµ·æŠ¥

- dom - canvas - image
- dom - svg - canvas - image
- nodejs è°ƒç”¨ pupper **æ— å¤´æµè§ˆå™¨**
	- å³é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼ï¼Œæ“ä½œ Chrome æµè§ˆå™¨
		- æ¯”å¦‚è°ƒç”¨ print pdf 
		- æ¯”å¦‚è°ƒå–æµè§ˆå™¨çš„æˆªå±

## 16. `["1", "2", "3"].map(parseInt)`

- æ²¡æœ‰**ä¸€è¿›åˆ¶**
- 3 ä¸æ˜¯**äºŒè¿›åˆ¶**

### 16.1. åˆ†æ

```javascript hl:8,14,15
["1", "2", "3"].map(parseInt); // ==> 1, NaN, NaN


// parseInt() å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯è¦è¢«è§£æçš„å­—ç¬¦ä¸²ï¼Œç¬¬äºŒä¸ªæ˜¯è¿›åˆ¶æ•°ã€‚
// map() æ–¹æ³•ä¼šç»™å›è°ƒå‡½æ•°ä¼ é€’ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ ã€å½“å‰ç´¢å¼•ã€æ•´ä¸ªæ•°ç»„ã€‚

// parseInt("1", 0, ["1", "2", "3"]); // 1 ï¼Œ 0è¿›åˆ¶ï¼Œè‡ªåŠ¨åˆ¤æ–­
// // ç¬¬äºŒä¸ªå‚æ•°ä¼  0 çš„è§„åˆ™ï¼š
// 1. å¦‚æœå­—ç¬¦ä¸²ä»¥ "0x" æˆ– "0X" å¼€å¤´ï¼ŒæŒ‰ 16 è¿›åˆ¶è§£æ
// 2. åœ¨ç°ä»£ JavaScriptï¼ˆES5+ï¼‰ä¸­ï¼Œå…¶ä»–æƒ…å†µä¸€å¾‹æŒ‰ 10 è¿›åˆ¶è§£æ
// 3. åœ¨è€ç‰ˆæœ¬ JavaScript ä¸­ï¼Œå¦‚æœå­—ç¬¦ä¸²ä»¥ "0" å¼€å¤´ï¼Œä¼šæŒ‰ 8 è¿›åˆ¶è§£æ
// 4. å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œä¼šæŒ‰ 10 è¿›åˆ¶è§£æï¼Œå’Œä¸ä¼ ç¬¬äºŒä¸ªå‚æ•°ä¸€æ ·

// parseInt("2", 1, ["1", "2", "3"]); // NaN, æ²¡æœ‰1è¿›åˆ¶ï¼Œå¿…é¡»å–å€¼èŒƒå›´åœ¨2-36ä¹‹é—´
// parseInt("3", 2, ["1", "2", "3"]); // NaN ï¼Œ3ä¸æ˜¯2è¿›åˆ¶æ•°

```

### 16.2. å…³äº parseInt çš„ç¬¬äºŒä¸ªå‚æ•°

```javascript hl:1,13
// è¿›åˆ¶å¿…é¡»åœ¨ 2-36 ä¹‹é—´
console.log(parseInt("123", 1));    // NaN
console.log(parseInt("123", 37));   // NaN

// ä¸åŒè¿›åˆ¶çš„è§£æ
console.log(parseInt("100", 2)); // 4 (äºŒè¿›åˆ¶)
console.log(parseInt("100", 8)); // 64 (å…«è¿›åˆ¶)
console.log(parseInt("100", 10)); // 100 (åè¿›åˆ¶)
console.log(parseInt("100", 16)); // 256 (åå…­è¿›åˆ¶)

// ä¸åŒè¿›åˆ¶ä¸‹çš„ç›¸åŒå­—ç¬¦ä¸²å¯èƒ½å¾—åˆ°ä¸åŒç»“æœ
console.log(parseInt("19", 10)); // 19 (åè¿›åˆ¶)
console.log(parseInt("19", 8)); // 1 (å…«è¿›åˆ¶ï¼Œ9ä¸æ˜¯æœ‰æ•ˆçš„å…«è¿›åˆ¶æ•°å­—)
```

## 17. å‡½æ•°ä½¿ç”¨ `bind`è¿ç»­ç»‘å®šå¤šæ¬¡ï¼Œåé¢ç»‘å®šçš„éƒ½æ— æ•ˆ

![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-12.png)

## 18. new fn ä¸ new fn() çš„åŒºåˆ«

![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-13.png)

> ä¸»è¦è¿˜æ˜¯**è¡¨è¾¾å¼çš„ä¼˜å…ˆçº§ç»„åˆé—®é¢˜**

## 19. ajax fetch axios

- ajax
	- åŸºäº **XHR å¯¹è±¡**
- fetch 
	- ==æ²¡æœ‰åŸºäº XHR==ï¼Œ**ä¸æ˜¯å¯¹ XHR çš„è¿›ä¸€æ­¥å°è£…**
	- ä½¿ç”¨çš„**åŸç”Ÿçš„ js** 
	- åŸºäº `Promise`
- axios
	- æµè§ˆå™¨ï¼šåŸºäº XHR
	- nodejsï¼šåŸºäº **http æ¨¡å—**
	- å…¶ä»–çš„åŒ…è£…
		- æ¯”å¦‚ promise
	- å®‰å…¨æœºåˆ¶

## 20. ç»™ä¸€ä¸ª DOM å…ƒç´ ç»‘å®šå¤šæ¬¡ clickï¼Œä¸€ä¸ªæ•è·ï¼Œä¸€ä¸ªå†’æ³¡ï¼Œå¦‚ä½•æ‰§è¡Œï¼Ÿ

- ç»‘å®šå¤šå°‘æ¬¡å°±æ‰§è¡Œå¤šå°‘æ¬¡
- å…ˆæ•è·ï¼Œåå†’æ³¡

## 21. å¦‚ä½•è·å–ä¸€ä¸ªå¯¹è±¡çš„åŸå‹å¯¹è±¡

- `æ„é€ å‡½æ•°.prototype`
- `å®ä¾‹å¯¹è±¡.__proto__`
- `Object.getProtoTypeof(å¯¹è±¡å®ä¾‹)`

- ==æ„é€ å‡½æ•°==çš„ prototype
- ==å®ä¾‹å¯¹è±¡==çš„ `__proto__`
- å¯¹è±¡å®ä¾‹çš„ Object.getProtoTypeof 
	- å½“ç„¶ ä¹Ÿå¯ä»¥ä½¿ç”¨ Reflect 


> [!danger]
> æ³¨æ„ 
> - æ˜¯ ==æ„é€ å‡½æ•°==çš„ `prototype`  
> - ==å®ä¾‹å¯¹è±¡==çš„ `__proto__`

## 22. ç§»åŠ¨ç«¯é€‚é…åŸç†

æ¯”å¦‚ `flexible.js` ä¸å±•å¼€äº†ï¼Œå’Œ rem ä¸€ä¸ªé“ç†

éœ€è¦æ³¨æ„çš„äº‹ï¼Œå¦‚ä½•åˆ¤æ–­æ˜¯å¦ `0.5`
- å¾ˆç®€å• `dpr >= 2` å³å¯

## 23. å¦‚ä½•å®ç° repeat å®ç°å­—ç¬¦ä¸²æ‹¼æ¥

```javascript hl:2,5,10
// æœ€ç®€å•ç›´æ¥çš„æ–¹æ³•
const str1 = "abc".repeat(3); // "abcabcabc"

const str2 = Array(4).join("abc"); // "abcabcabc"
// è§£é‡Šï¼šåˆ›å»ºé•¿åº¦ä¸º4çš„æ•°ç»„ï¼Œjoinä¼šæ‰§è¡Œ3æ¬¡ï¼Œæ‰€ä»¥é‡å¤3æ¬¡
// Array(4) åˆ›å»º [empty Ã— 4]
// join("abc") ä¼šåœ¨æ•°ç»„å…ƒç´ ä¹‹é—´æ’å…¥"abc"

const str3 = Array(3).fill("abc").join(""); // "abcabcabc"
// æˆ–è€…
const str3_2 = new Array(3).fill("abc").join("");

```

## 24. PCç«¯é€šè¿‡äºŒç»´ç æ‰«æç™»å½•

- pc å±•ç¤ºå±•ç¤ºäºŒç»´ç åï¼Œä¼šä¸€ç›´**è½®è¯¢**ï¼Œè¯·æ±‚äºŒç»´ç æ‰«æçš„çŠ¶æ€

## 25. `toFixed()` å’Œ `toPrecision()` çš„åŒºåˆ«

> è®°ä½ï¼šéƒ½ä¼šå››èˆäº”å…¥

### 25.1. toFixed()

`toFixed()` æ–¹æ³•ç”¨äºæŒ‡å®šå°æ•°ç‚¹åçš„ä½æ•°ã€‚

ç‰¹ç‚¹ï¼š
- è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²
- å‚æ•°æŒ‡å®šå°æ•°ç‚¹åçš„ä½æ•°
- ä¼šè¿›è¡Œå››èˆäº”å…¥
- å¦‚æœå¿…è¦ï¼Œä¼šç”¨0å¡«å……å°æ•°éƒ¨åˆ†

ç¤ºä¾‹ï¼š
```javascript
let num = 12.3456;

console.log(num.toFixed(2));  // "12.35"
console.log(num.toFixed(0));  // "12"
console.log(num.toFixed(6));  // "12.345600"

let bigNum = 1234.5;
console.log(bigNum.toFixed(2));  // "1234.50"
```

### 25.2. toPrecision()

`toPrecision()` æ–¹æ³•ç”¨äºæŒ‡å®šæ•°å­—çš„æ€»ä½æ•°ï¼ˆåŒ…æ‹¬æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†ï¼‰ã€‚

ç‰¹ç‚¹ï¼š
- è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²
- å‚æ•°æŒ‡å®šæ•°å­—çš„æ€»ä½æ•°ï¼ˆç²¾åº¦ï¼‰
- ä¼šè¿›è¡Œå››èˆäº”å…¥
- å¯èƒ½ä¼šä½¿ç”¨ç§‘å­¦è®°æ•°æ³•è¡¨ç¤ºç»“æœ

ç¤ºä¾‹ï¼š
```javascript
let num = 12.3456;

console.log(num.toPrecision(2));  // "12"
console.log(num.toPrecision(3));  // "12.3"
console.log(num.toPrecision(6));  // "12.3456"

let bigNum = 1234.5;
console.log(bigNum.toPrecision(2));  // "1.2e+3"
console.log(bigNum.toPrecision(4));  // "1235"
```

### 25.3. ä¸»è¦åŒºåˆ«

1. ç²¾åº¦èŒƒå›´ï¼š
   - `toFixed()` åªå¤„ç†**å°æ•°éƒ¨åˆ†**
   - `toPrecision()` è€ƒè™‘**æ•´ä¸ªæ•°å­—çš„ä½æ•°**
2. ç»“æœæ ¼å¼ï¼š
   - `toFixed()` å§‹ç»ˆè¿”å›å›ºå®šå°æ•°ç‚¹æ ¼å¼
   - `toPrecision()` å¯èƒ½è¿”å›**ç§‘å­¦è®°æ•°æ³•**æ ¼å¼
3. å‚æ•°å«ä¹‰ï¼š
   - `toFixed(n)` ä¸­çš„ n è¡¨ç¤ºå°æ•°ç‚¹åçš„ä½æ•°
   - `toPrecision(n)` ä¸­çš„ n è¡¨ç¤ºæ€»çš„æœ‰æ•ˆæ•°å­—ä½æ•°
4. å¯¹æ•´æ•°çš„å¤„ç†ï¼š
   - `toFixed()` ä¼šåœ¨æ•´æ•°åæ·»åŠ å°æ•°ç‚¹å’ŒæŒ‡å®šæ•°é‡çš„é›¶
   - `toPrecision()` å¯èƒ½ä¼šå°†æ•´æ•°è½¬æ¢ä¸ºç§‘å­¦è®°æ•°æ³•
5. å¤§æ•°å¤„ç†ï¼š
   - `toFixed()` å¯¹äºéå¸¸å¤§çš„æ•°å­—å¯èƒ½ä¼šè¿”å›æŒ‡æ•°å½¢å¼
   - `toPrecision()` æ›´å®¹æ˜“å¯¹å¤§æ•°ä½¿ç”¨ç§‘å­¦è®°æ•°æ³•

ç¤ºä¾‹æ¯”è¾ƒï¼š
```javascript
let num = 123.456;

console.log(num.toFixed(2));       // "123.46"
console.log(num.toPrecision(2));   // "1.2e+2"

console.log(num.toFixed(5));       // "123.45600"
console.log(num.toPrecision(5));   // "123.46"

let smallNum = 0.000123;
console.log(smallNum.toFixed(5));       // "0.00012"
console.log(smallNum.toPrecision(5));   // "0.00012300"

let bigNum = 1234567.89;
console.log(bigNum.toFixed(2));       // "1234567.89"
console.log(bigNum.toPrecision(2));   // "1.2e+6"
```

ä½¿ç”¨å»ºè®®ï¼š
- å½“ä½ éœ€è¦æ§åˆ¶å°æ•°ç‚¹åçš„ä½æ•°æ—¶ï¼Œä½¿ç”¨ `toFixed()`
- å½“ä½ éœ€è¦æ§åˆ¶æ•°å­—çš„æ€»ä½“ç²¾åº¦æ—¶ï¼Œä½¿ç”¨ `toPrecision()`
- å¯¹äºè´§å¸è®¡ç®—ï¼Œé€šå¸¸ä½¿ç”¨ `toFixed()`
- å¯¹äºç§‘å­¦è®¡ç®—æˆ–éœ€è¦æ§åˆ¶æœ‰æ•ˆæ•°å­—çš„åœºæ™¯ï¼Œä½¿ç”¨ `toPrecision()`

æ³¨æ„äº‹é¡¹ï¼š
1. ä¸¤ç§æ–¹æ³•éƒ½å¯èƒ½å› ä¸º**å››èˆäº”å…¥**å¯¼è‡´ç²¾åº¦æŸå¤±ã€‚
2. **è¿”å›çš„éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå¦‚æœéœ€è¦è¿›è¡Œæ•°å­¦è¿ç®—ï¼Œè¦å…ˆè½¬æ¢å›æ•°å­—**ã€‚
3. åœ¨å¤„ç†é‡‘èæ•°æ®æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„ JavaScript çš„**æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜**ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ä¸“é—¨çš„åº“æ¥å¤„ç†é«˜ç²¾åº¦è®¡ç®—ã€‚


> [!danger]
> è¿”å›çš„éƒ½æ˜¯å­—ç¬¦ä¸²

## 26. JS å¦‚ä½•ç»„é˜»æ­¢äº‹ä»¶å†’æ³¡

- `return false`
	- ä»£è¡¨åŒæ—¶è°ƒç”¨äº† `e.stopPropagation` å’Œ `e.preventDefault`
 - `e.stopImmediatePropagation();` ï¼š
	 - ==åªé˜»æ­¢å…ƒç´ çš„åŒä¸€äº‹ä»¶ç±»å‹çš„åç»­å¤„ç†å™¨æ‰§è¡Œï¼Œä¸ä¼šå½±å“å…¶ä»–ç±»å‹çš„äº‹ä»¶==
		 1. é˜»æ­¢äº‹ä»¶å†’æ³¡
		 2. é˜»æ­¢å½“å‰å…ƒç´ **åŒä¸€äº‹ä»¶çš„å…¶ä»–äº‹ä»¶å¤„ç†å™¨** 
		 3. ä¸é˜»æ­¢é»˜è®¤è¡Œä¸º

```javascript
const button = document.querySelector('button');

// åŒä¸€ä¸ªäº‹ä»¶ç±»å‹ï¼ˆclickï¼‰çš„å¤šä¸ªå¤„ç†å™¨
button.addEventListener('click', function(event) {
    console.log('ç¬¬ä¸€ä¸ª click å¤„ç†å™¨');
    event.stopImmediatePropagation();
});

button.addEventListener('click', function(event) {
    console.log('ç¬¬äºŒä¸ª click å¤„ç†å™¨'); // ä¸ä¼šæ‰§è¡Œ
});

button.addEventListener('click', function(event) {
    console.log('ç¬¬ä¸‰ä¸ª click å¤„ç†å™¨'); // ä¸ä¼šæ‰§è¡Œ
});

// ç‚¹å‡»æŒ‰é’®æ—¶åªä¼šè¾“å‡ºï¼š
// "ç¬¬ä¸€ä¸ª click å¤„ç†å™¨"



const button = document.querySelector('button');

button.addEventListener('click', function(event) {
    console.log('click å¤„ç†å™¨');
    event.stopImmediatePropagation();
});

button.addEventListener('mousedown', function(event) {
    console.log('mousedown å¤„ç†å™¨'); // ä¼šæ­£å¸¸æ‰§è¡Œ
});

button.addEventListener('mouseup', function(event) {
    console.log('mouseup å¤„ç†å™¨');   // ä¼šæ­£å¸¸æ‰§è¡Œ
});

// ç‚¹å‡»æŒ‰é’®æ—¶ä¼šä¾æ¬¡è¾“å‡ºï¼š
// "mousedown å¤„ç†å™¨"
// "click å¤„ç†å™¨"
// "mouseup å¤„ç†å™¨"

```

- **return false ä½¿ç”¨åœºæ™¯**ï¼š
    - ç®€å•çš„å†…è”äº‹ä»¶å¤„ç†ï¼ˆè™½ç„¶ä¸æ¨èï¼‰
    - jQuery äº‹ä»¶å¤„ç†ï¼ˆå†å²åŸå› ï¼‰
    - è¡¨å•æäº¤æ§åˆ¶
    - é“¾æ¥ç‚¹å‡»é˜»æ­¢

## 27. `123['toString'].length + 123` çš„è¾“å‡ºå€¼ä¸ºå¤šå°‘ï¼Ÿï¼šå½¢å‚

- `123['toString'] ` æ˜¯ä¸ª **toString å‡½æ•°**
- fn.length ä»£è¡¨`ç¬¬ä¸€ä¸ªå…·æœ‰é»˜è®¤å€¼ä¹‹å‰`çš„å‚æ•°ä¸ªæ•°
	- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-20.png)
	- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-21.png)

![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-22.png)

è¯´æ˜ `toString` æ–¹æ³•çš„**å½¢å‚ä¸ªæ•°ä¸º 1** 

## 28. å¦‚ä½•å»¶è¿Ÿè„šæœ¬æ‰§è¡Œ

- deferï¼š
	- js ä¸‹è½½å’Œæ–‡æ¡£è§£æåŒæ­¥ï¼Œ**æ–‡æ¡£è§£æå¥½äº†åå†æ‰§è¡Œè„šæœ¬**
	- defer å³å»¶è¿Ÿçš„æ„æ€ï¼Œ**ç­‰æ–‡æ¡£è§£æå¥½åæ‰§è¡Œ**ï¼Œä½†ä¸å»¶è¿Ÿä¸‹è½½
- asyncï¼š
	- å¼‚æ­¥ä¸‹è½½è„šæœ¬ï¼Œä¸é˜»å¡æ–‡æ¡£è§£æï¼Œ**ä½†è„šæœ¬ä¸‹è½½å¥½äº†åï¼Œå…ˆæš‚åœè§£ææ–‡æ¡£ï¼Œæ‰§è¡Œè„šæœ¬**
- åŠ¨æ€ DOM æ’å…¥è„šæœ¬
- setTimeout
- è„šæœ¬æ”¾æœ€å

## 29. æ„é€ å‡½æ•°å±æ€§

![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-23.png)

## 30. å†è¯´è¯´ Reflect 

![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-24.png)

## 31. å°¾é€’å½’ä¼˜åŒ–

- ç©ºé—´å¤æ‚åº¦èƒ½å¤Ÿå‹ç¼©åˆ°ï¼šå¸¸æ•°çº§åˆ«

![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-25.png)

## 32. ç®€è¿° Iterator

![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-26.png)

è¦ç‚¹ï¼š
- next()
	- {done,value}
- for-of


## 34. ç®­å¤´å‡½æ•°

- ä¸èƒ½ç”¨ä½œ `generator` å‡½æ•°ï¼Œä¸ç”¨ä½¿ç”¨ yield `å…³é”®å­—`
- æ²¡æœ‰åŸå‹
- æ²¡æœ‰ `arguments` å¯¹è±¡
	- å¦‚æœæœ‰ï¼ŒæŒ‡å‘å½“å‰å¤–å±‚å‡½æ•°
- ä¸èƒ½ä½¿ç”¨`æ„é€ å‡½æ•°`ä½¿ç”¨
- ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ `this`

## 35. å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯ç©ºå¯¹è±¡

- `keys`
- JSON è§£æçš„æ–¹å¼

## 36. Object.is ä¸ == ã€=== çš„åŒºåˆ«

- Object.is ç‰¹ç‚¹ï¼š
    - NaN ç­‰äº NaN
    - +0 ä¸ç­‰äº -0
    - **å…¶ä»–æƒ…å†µä¸ === ç›¸åŒ**
    - ä½¿ç”¨åœºæ™¯ï¼š
        - éœ€è¦åŒºåˆ† +0 å’Œ -0 æ—¶
        - éœ€è¦æ­£ç¡®å¤„ç† NaN æ¯”è¾ƒæ—¶
        - éœ€è¦æœ€ä¸¥æ ¼çš„ç›¸ç­‰æ€§æ£€æŸ¥æ—¶

## 37.  `0.1+ 0.2 !== 0.3` 

åœ¨è®¡ç®—æœºä¸­ï¼Œæ•°å­—éƒ½æ˜¯ä»¥**äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨çš„ã€‚æŸäº›åè¿›åˆ¶å°æ•°åœ¨è½¬æ¢æˆäºŒè¿›åˆ¶æ—¶ä¼šäº§ç”Ÿæ— é™å¾ªç¯å°æ•°**ã€‚

ç”±äºå­˜å‚¨ä½æ•°æœ‰é™ï¼Œ**è¿™äº›æ— é™å¾ªç¯çš„äºŒè¿›åˆ¶æ•°å¿…é¡»åœ¨æŸä¸ªä½ç½®æˆªæ–­**ï¼Œè¿™å°±å¯¼è‡´äº†**ç²¾åº¦æŸå¤±**ã€‚

```javascript
0.1 + 0.2 = 0.30000000000000004
```

### 37.1. è§£å†³æ–¹æ¡ˆ

#### 37.1.1. ä½¿ç”¨ toFixed() è¿›è¡Œæ˜¾ç¤º

```javascript
(0.1 + 0.2).toFixed(1) === '0.3' // true
```

#### 37.1.2. ä½¿ç”¨ä¸€ä¸ªæå°çš„è¯¯å·®èŒƒå›´ï¼ˆepsilonï¼‰æ¥æ¯”è¾ƒ

```javascript
const epsilon = 0.00000000001;
Math.abs((0.1 + 0.2) - 0.3) < epsilon // true
```

#### 37.1.3. ä½¿ç”¨ä¸“é—¨çš„åº“

- decimal.js
- big.js
- bignumber.js

## 38. mouseenter ä¸ mouseover çš„åŒºåˆ«

æ€»ç»“ï¼š
- **è¿›å…¥** `enter` , ä¸ä¼šå†’æ³¡
- å¯¹åº”çš„ä½ å¼€å§‹æ—¶é—´æ˜¯ `leave` **ç¦»å¼€**
- over å¯¹åº” out

### 38.1. äº‹ä»¶å†’æ³¡è¡Œä¸º

   - mouseoverï¼š
	   - ä¼šå†’æ³¡
   - mouseenterï¼š
	   - **ä¸ä¼šå†’æ³¡**ã€‚å®ƒåªåœ¨é¼ æ ‡æŒ‡é’ˆè¿›å…¥ç»‘å®šäº‹ä»¶çš„å…ƒç´ æ—¶è§¦å‘ï¼Œä¸ä¼šåœ¨è¿›å…¥å…¶å­å…ƒç´ æ—¶é‡å¤è§¦å‘ã€‚

### 38.2. è§¦å‘é¢‘ç‡

   - `mouseover`ï¼šå½“é¼ æ ‡ç§»åŠ¨åˆ°å…ƒç´ æˆ–å…¶å­å…ƒç´ ä¸Šæ—¶éƒ½ä¼šè§¦å‘ã€‚
	   - è¿™æ„å‘³ç€ï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ æœ‰å­å…ƒç´ ï¼Œç§»åŠ¨åˆ°å­å…ƒç´ ä¸Šä¹Ÿä¼šè§¦å‘çˆ¶å…ƒç´ çš„ mouseover äº‹ä»¶ã€‚
   - `mouseenter`ï¼š
	   - åªæœ‰å½“é¼ æ ‡ä»å…ƒç´ å¤–éƒ¨é¦–æ¬¡è¿›å…¥å…ƒç´ æ—¶æ‰ä¼šè§¦å‘ã€‚
	   - ç§»åŠ¨åˆ°å…¶å­å…ƒç´ ä¸Šä¸ä¼šé‡å¤è§¦å‘è¯¥äº‹ä»¶ï¼Œ**å› ä¸ºå­å…ƒç´ ä¸Šä¸ä¼šå†å†’æ³¡äº†**

### 38.3. ç›¸åº”çš„ç¦»å¼€äº‹ä»¶

   - `mouseover` å¯¹åº”çš„ç¦»å¼€äº‹ä»¶æ˜¯ `mouseout`
   - `mouseenter` å¯¹åº”çš„ç¦»å¼€äº‹ä»¶æ˜¯ `mouseleave`

### 38.4. æ€§èƒ½å½±å“

   - mouseoverï¼š
	   - ç”±äºå…¶å†’æ³¡ç‰¹æ€§å’Œé¢‘ç¹è§¦å‘çš„æ€§è´¨ï¼Œåœ¨å¤æ‚çš„ DOM ç»“æ„ä¸­å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚
   - mouseenterï¼š
	   - é€šå¸¸å…·æœ‰æ›´å¥½çš„æ€§èƒ½ï¼Œå› ä¸ºå®ƒä¸ä¼šåœ¨å­å…ƒç´ é—´ç§»åŠ¨æ—¶é‡å¤è§¦å‘ã€‚

### 38.5. ä½¿ç”¨åœºæ™¯

   - mouseoverï¼š
	   - é€‚ç”¨äº**éœ€è¦ç²¾ç¡®è·Ÿè¸ªé¼ æ ‡åœ¨å…ƒç´ å†…éƒ¨ç§»åŠ¨çš„æƒ…å†µ**
	   - æˆ–è€…å½“ä½ éœ€è¦åˆ©ç”¨äº‹ä»¶å†’æ³¡æ¥å¤„ç†å¤§é‡å…ƒç´ çš„æƒ…å†µ
   - mouseenterï¼š
	   - é€‚ç”¨äºåªéœ€è¦çŸ¥é“é¼ æ ‡æ˜¯å¦è¿›å…¥äº†æ•´ä¸ªå…ƒç´ åŒºåŸŸçš„æƒ…å†µï¼Œè€Œä¸å…³å¿ƒå†…éƒ¨çš„ç§»åŠ¨ã€‚

## 39. å¦‚ä½•ä½¿å¾—`var [a,b] = {a:1,b:2}` è§£æ„æˆåŠŸ

éœ€è¦éƒ¨ç½² `Symbol.iterator`

![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-14.png)

## 40. new æ“ä½œå…·ä½“å¹²äº†ä»€ä¹ˆ

å¦‚ä¸‹å›¾ï¼šå‘ç”Ÿäº† 4 ä»¶äº‹æƒ…

![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-20.png)

## 41. try-catch ä¸èƒ½æ•è·å¼‚æ­¥é”™è¯¯

>  ä¸èƒ½ï¼Œå½“æ—¶å¯ä»¥åœ¨ window ä¸Šæœ‰ä¸ªç±»ä¼¼äº `uncatchpromiseReject` çš„é”™è¯¯

![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-22.png)

## 42. e.target å’Œ e.currentTarget çš„åŒºåˆ«ï¼Ÿ

éœ€è¦ï¼Œåè¿‡æ¥ç†è§£çš„
- æ­£åœ¨å¤„ç†çš„å†’æ³¡æˆ–è€…æ•è·ï¼Œæ˜¯ `target`
- source targetï¼š`currentTarget`  
	- å…¶å®æ›´åº”è¯¥å«åš `sourceTarget`

![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-24.png)

## 43. å¦‚ä½•ç¡®ä¿ä½ çš„æ„é€ å‡½æ•°åªèƒ½è¢« `new` è°ƒç”¨

![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-25.png)

```javascript hl:2,10,18
function Person(name) {
  if (!new.target) {
    throw new Error("å¿…é¡»ä½¿ç”¨ new å…³é”®å­—è°ƒç”¨");
  }
  this.name = name;
}


function Person(name) {
  if (!(this instanceof Person)) {
    throw new Error('å¿…é¡»ä½¿ç”¨ new å…³é”®å­—è°ƒç”¨');
  }
  this.name = name;
}
// or ç›´æ¥åˆ›å»º
function Person(name) {
  if (!(this instanceof Person)) {
    return new Person(name);
  }
  this.name = name;
}


// æœ€ä½³æ–¹å¼
class Person {
  constructor(name) {
    this.name = name;
  }
}
```