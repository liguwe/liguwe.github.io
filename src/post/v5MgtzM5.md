
# ä¸‘æ•°é—®é¢˜


| LeetCode                                                                   | åŠ›æ‰£                                                            | éš¾åº¦  |
| -------------------------------------------------------------------------- | ------------------------------------------------------------- | --- |
| [313. Super Ugly Number](https://leetcode.com/problems/super-ugly-number/) | [313. è¶…çº§ä¸‘æ•°](https://leetcode.cn/problems/super-ugly-number/)  | ğŸŸ   |
| [264. Ugly Number II](https://leetcode.com/problems/ugly-number-ii/)       | [264. ä¸‘æ•° II](https://leetcode.cn/problems/ugly-number-ii/)    | ğŸŸ   |
| [1201. Ugly Number III](https://leetcode.com/problems/ugly-number-iii/)    | [1201. ä¸‘æ•° III](https://leetcode.cn/problems/ugly-number-iii/) | ğŸŸ   |
| [263. Ugly Number](https://leetcode.com/problems/ugly-number/)             | [263. ä¸‘æ•°](https://leetcode.cn/problems/ugly-number/)          | ğŸŸ¢  |


## ç›®å½•
<!-- toc -->
 ## 1. ç¬¬ 263 é¢˜ã€Œ[ä¸‘æ•°](https://leetcode.cn/problems/ugly-number)ã€ 

æ‰€è°“ã€Œä¸‘æ•°ã€ï¼Œå°±æ˜¯åªåŒ…å«è´¨å› æ•°Â `2`ã€`3`Â å’ŒÂ `5`Â çš„æ­£æ•´æ•°

```javascript
var isUgly = function (n) {
  if (n <= 0) return false;
  // å¦‚æœ n æ˜¯ä¸‘æ•°ï¼Œåˆ†è§£å› å­åº”è¯¥åªæœ‰ 2, 3, 5
  while (n % 2 == 0) n /= 2;
  while (n % 3 == 0) n /= 3;
  while (n % 5 == 0) n /= 5;
  // å¦‚æœèƒ½å¤ŸæˆåŠŸåˆ†è§£ï¼Œè¯´æ˜æ˜¯ä¸‘æ•°
  return n == 1;
};
```

## 2. ç¬¬ 264 é¢˜ã€Œ[ä¸‘æ•° II](https://leetcode.cn/problems/ugly-number-ii)ã€

é¢˜ç›®ï¼šç»™ä½ è¾“å…¥ä¸€ä¸ªÂ `n`ï¼Œè®©ä½ è®¡ç®—ç¬¬Â `n`Â ä¸ªä¸‘æ•°æ˜¯å¤šå°‘

æ€è·¯ï¼š
- æŠ½è±¡å‡ºä¸‰æ¡æœ‰åºçš„ä¸‘æ•°é“¾è¡¨ï¼Œåˆå¹¶è¿™ä¸‰æ¡æœ‰åºé“¾è¡¨å¾—åˆ°çš„ç»“æœå°±æ˜¯ä¸‘æ•°åºåˆ—ï¼Œå…¶ä¸­ç¬¬Â `n`Â ä¸ªä¸‘æ•°å°±æ˜¯é¢˜ç›®æƒ³è¦çš„ç­”æ¡ˆ
- æˆ‘ä»¬ç”¨Â `p2, p3, p5`Â åˆ†åˆ«ä»£è¡¨ä¸‰æ¡ä¸‘æ•°é“¾è¡¨ä¸Šçš„æŒ‡é’ˆï¼Œç”¨Â `product2, product3, product5`Â ä»£è¡¨ä¸‘æ•°é“¾è¡¨ä¸ŠèŠ‚ç‚¹çš„å€¼ï¼Œç”¨Â `ugly`Â æ•°ç»„è®°å½•æœ‰åºé“¾è¡¨åˆå¹¶ä¹‹åçš„ç»“æœã€‚

```javascript
var nthUglyNumber = function (n) {
  // å¯ä»¥ç†è§£ä¸ºä¸‰ä¸ªæŒ‡å‘æœ‰åºé“¾è¡¨å¤´ç»“ç‚¹çš„æŒ‡é’ˆ
  let p2 = 1,
    p3 = 1,
    p5 = 1;
  // å¯ä»¥ç†è§£ä¸ºä¸‰ä¸ªæœ‰åºé“¾è¡¨çš„å¤´èŠ‚ç‚¹çš„å€¼
  let product2 = 1,
    product3 = 1,
    product5 = 1;
  // å¯ä»¥ç†è§£ä¸ºæœ€ç»ˆåˆå¹¶çš„æœ‰åºé“¾è¡¨ï¼ˆç»“æœé“¾è¡¨ï¼‰
  let ugly = new Array(n + 1);
  // å¯ä»¥ç†è§£ä¸ºç»“æœé“¾è¡¨ä¸Šçš„æŒ‡é’ˆ
  let p = 1;

  // å¼€å§‹åˆå¹¶ä¸‰ä¸ªæœ‰åºé“¾è¡¨ï¼Œæ‰¾åˆ°ç¬¬ n ä¸ªä¸‘æ•°æ—¶ç»“æŸ
  while (p <= n) {
    // å–ä¸‰ä¸ªé“¾è¡¨çš„æœ€å°ç»“ç‚¹
    let min = Math.min(Math.min(product2, product3), product5);
    // å°†æœ€å°èŠ‚ç‚¹æ¥åˆ°ç»“æœé“¾è¡¨ä¸Š
    ugly[p] = min;
    p++;
    // å‰è¿›å¯¹åº”æœ‰åºé“¾è¡¨ä¸Šçš„æŒ‡é’ˆ
    if (min == product2) {
      product2 = 2 * ugly[p2];
      p2++;
    }
    if (min == product3) {
      product3 = 3 * ugly[p3];
      p3++;
    }
    if (min == product5) {
      product5 = 5 * ugly[p5];
      p5++;
    }
  }

  // è¿”å›ç¬¬ n ä¸ªä¸‘æ•°
  return ugly[n];
};
```

## 3. ç¬¬ 313 é¢˜ã€Œ[è¶…çº§ä¸‘æ•°](https://leetcode.cn/problems/super-ugly-number)ã€

è¾“å…¥ä¸€ä¸ªè´¨æ•°åˆ—è¡¨Â `primes`Â å’Œä¸€ä¸ªæ­£æ•´æ•°Â `n`ï¼Œè¯·ä½ è®¡ç®—ç¬¬Â `n`Â ä¸ªã€Œè¶…çº§ä¸‘æ•°ã€

æ‰€è°“è¶…çº§ä¸‘æ•°æ˜¯ä¸€ä¸ª**æ‰€æœ‰è´¨å› æ•°**éƒ½å‡ºç°åœ¨Â `primes`Â ä¸­çš„æ­£æ•´æ•°

### 3.1. ç¤ºä¾‹

![å›¾ç‰‡](https://832-1310531898.cos.ap-beijing.myqcloud.com/999.%20Obsidian@832/files/20241120.png)

å¦‚æœè®©Â `primes = [2, 3, 5]`Â å°±æ˜¯ä¸Šé“é¢˜ï¼šç¬¬ 263 é¢˜ã€Œ[ä¸‘æ•°](https://leetcode.cn/problems/ugly-number)ã€ï¼Œä½†æˆ‘ä»¬ä¸èƒ½ç”¨Â `min`Â å‡½æ•°è®¡ç®—æœ€å°å¤´ç»“ç‚¹äº†ï¼Œè€Œæ˜¯è¦ç”¨**ä¼˜å…ˆçº§é˜Ÿåˆ—**æ¥è®¡ç®—**æœ€å°å¤´ç»“ç‚¹**ï¼ŒåŒæ—¶ä¾ç„¶è¦**ç»´æŠ¤é“¾è¡¨æŒ‡é’ˆ**ã€**æŒ‡é’ˆæ‰€æŒ‡èŠ‚ç‚¹çš„å€¼**ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ª**ä¸‰å…ƒç»„** æ¥ä¿å­˜è¿™äº›ä¿¡æ¯

çœ‹ä»£ç 

```javascript
var nthSuperUglyNumber = function (n, primes) {
  // ä¼˜å…ˆé˜Ÿåˆ—ä¸­è£…ä¸‰å…ƒç»„ï¼š{ product, prime, pi}
  // å…¶ä¸­ product ä»£è¡¨é“¾è¡¨èŠ‚ç‚¹çš„å€¼ï¼Œprime æ˜¯è®¡ç®—ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ‰€éœ€çš„è´¨æ•°å› å­ï¼Œ pi ä»£è¡¨é“¾è¡¨ä¸Šçš„æŒ‡é’ˆ
  let pq = new MinPriorityQueue({ priority: (pair) => pair[0] });

  for (let prime of primes) {
    pq.enqueue([1, prime, 1]);
  }

  // å¯ä»¥ç†è§£ä¸ºæœ€ç»ˆåˆå¹¶çš„æœ‰åºé“¾è¡¨ï¼ˆç»“æœé“¾è¡¨ï¼‰
  let ugly = new Array(n + 1);
  // å¯ä»¥ç†è§£ä¸ºç»“æœé“¾è¡¨ä¸Šçš„æŒ‡é’ˆ
  let p = 1;

  while (p <= n) {
    // å–ä¸‰ä¸ªé“¾è¡¨çš„æœ€å°ç»“ç‚¹
    let pair = pq.dequeue().element;
    let product = pair[0];
    let prime = pair[1];
    let index = pair[2];

    // é¿å…ç»“æœé“¾è¡¨å‡ºç°é‡å¤å…ƒç´ 
    if (product != ugly[p - 1]) {
      // æ¥åˆ°ç»“æœé“¾è¡¨ä¸Š
      ugly[p] = product;
      p++;
    }

    // ç”Ÿæˆä¸‹ä¸€ä¸ªèŠ‚ç‚¹åŠ å…¥ä¼˜å…ˆçº§é˜Ÿåˆ—
    pq.enqueue([ugly[index] * prime, prime, index + 1]);
  }
  return ugly[n];
};
```

## 4. ç¬¬ 1201 é¢˜ã€Œ[ä¸‘æ•° III](https://leetcode.cn/problems/ugly-number-iii)ã€

### 4.1. é¢˜ç›®

ç»™ä½ å››ä¸ªæ•´æ•°ï¼š`n, a, b, c`ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥æ‰¾å‡ºç¬¬Â `n`Â ä¸ªä¸‘æ•°ã€‚å…¶ä¸­ä¸‘æ•°æ˜¯å¯ä»¥è¢«Â `a`Â **æˆ–**Â `b`Â **æˆ–**Â `c`Â æ•´é™¤çš„æ­£æ•´æ•°ã€‚

è¿™é“é¢˜å’Œä¹‹å‰é¢˜ç›®çš„ä¸åŒä¹‹å¤„åœ¨äºå®ƒ**æ”¹å˜äº†ä¸‘æ•°çš„å®šä¹‰**ï¼Œåªè¦ä¸€ä¸ªæ­£æ•´æ•°Â `x`Â å­˜åœ¨Â `a, b, c`Â ä¸­çš„ä»»ä½•ä¸€ä¸ªå› å­ï¼Œé‚£ä¹ˆÂ `x`Â å°±æ˜¯ä¸‘æ•°ã€‚

æ¯”å¦‚è¾“å…¥Â `n = 7, a = 3, b = 4, c = 5`ï¼Œé‚£ä¹ˆç®—æ³•è¾“å‡º `10`ï¼Œå› ä¸ºç¬¦åˆæ¡ä»¶çš„ä¸‘æ•°åºåˆ—ä¸ºÂ `3, 4, 5, 6, 8, 9, 10, ...`ï¼Œå…¶ä¸­ç¬¬ 7 ä¸ªæ•°å­—æ˜¯ 10ã€‚

æœ‰äº†ä¹‹å‰å‡ é“é¢˜çš„é“ºå«ï¼Œä½ è‚¯å®šå¯ä»¥æƒ³åˆ°æŠŠÂ `a, b, c`Â çš„å€æ•°æŠ½è±¡æˆä¸‰æ¡æœ‰åºé“¾è¡¨ï¼š

```js
1*3 -> 2*3 -> 3*3 -> 4*3 -> 5*3 -> 6*3 -> 7*3 ->...
1*4 -> 2*4 -> 3*4 -> 4*4 -> 5*4 -> 6*4 -> 7*4 ->...
1*5 -> 2*5 -> 3*5 -> 4*5 -> 5*5 -> 6*5 -> 7*5 ->...
```

ç„¶åå°†è¿™ä¸‰æ¡é“¾è¡¨åˆå¹¶æˆä¸€æ¡æœ‰åºé“¾è¡¨å¹¶å»é™¤é‡å¤å…ƒç´ ï¼Œè¿™æ ·åˆå¹¶åçš„é“¾è¡¨å…ƒç´ å°±æ˜¯ä¸‘æ•°åºåˆ—ï¼Œæˆ‘ä»¬ä»ä¸­æ‰¾åˆ°ç¬¬Â `n`Â ä¸ªå…ƒç´ å³å¯ï¼š

```js
1*3 -> 1*4 -> 1*5 -> 2*3 -> 2*4 -> 3*3 -> 2*5 ->...
```


å†™å‡ºä»£ç 

### 4.2. ä»£ç ï¼šè¶…æ—¶


```javascript
var nthUglyNumber = function (n, a, b, c) {
  // å¯ä»¥ç†è§£ä¸ºä¸‰ä¸ªæœ‰åºé“¾è¡¨çš„å¤´ç»“ç‚¹çš„å€¼
  let productA = a,
    productB = b,
    productC = c;
  // å¯ä»¥ç†è§£ä¸ºåˆå¹¶ä¹‹åçš„æœ‰åºé“¾è¡¨ä¸Šçš„æŒ‡é’ˆ
  let p = 1;

  let minProduct = -666;

  // å¼€å§‹åˆå¹¶ä¸‰ä¸ªæœ‰åºé“¾è¡¨ï¼Œè·å–ç¬¬ n ä¸ªèŠ‚ç‚¹çš„å€¼
  while (p <= n) {
    // å–ä¸‰ä¸ªé“¾è¡¨çš„æœ€å°ç»“ç‚¹
    minProduct = Math.min(productA, productB, productC);
    p++;
    // å‰è¿›æœ€å°ç»“ç‚¹å¯¹åº”é“¾è¡¨çš„æŒ‡é’ˆ
    if (minProduct == productA) {
      productA += a;
    }
    if (minProduct == productB) {
      productB += b;
    }
    if (minProduct == productC) {
      productC += c;
    }
  }
  return minProduct;
};

```

æ³¨æ„é¢˜ç›®ç»™çš„æ•°æ®èŒƒå›´éå¸¸å¤§ï¼Œ`a, b, c, n`Â çš„å¤§å°å¯ä»¥è¾¾åˆ° `10^9`ï¼Œæ‰€ä»¥å³ä¾¿ä¸Šè¿°ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯Â `O(n)`ï¼Œä¹Ÿæ˜¯ç›¸å¯¹æ¯”è¾ƒè€—æ—¶çš„ï¼Œåº”è¯¥æœ‰æ›´å¥½çš„æ€è·¯èƒ½å¤Ÿè¿›ä¸€æ­¥é™ä½æ—¶é—´å¤æ‚åº¦ã€‚

### 4.3. è§£å†³æ€è·¯

å®šä¹‰ä¸€ä¸ª**å•è°ƒé€’å¢**çš„å‡½æ•°Â `f`ï¼š
- `f(num, a, b, c)`Â è®¡ç®—Â `[1..num]`Â ä¸­ï¼Œèƒ½å¤Ÿæ•´é™¤Â `a`Â æˆ–Â `b`Â æˆ–Â `c`Â çš„æ•°å­—çš„ä¸ªæ•°
	- æ˜¾ç„¶å‡½æ•°Â `f`Â çš„è¿”å›å€¼æ˜¯éšç€Â `num`Â çš„å¢åŠ è€Œå¢åŠ çš„ï¼ˆå•è°ƒé€’å¢ï¼‰
- é¢˜ç›®è®©æˆ‘ä»¬æ±‚ç¬¬Â `n`Â ä¸ªèƒ½å¤Ÿæ•´é™¤Â `a`Â æˆ–Â `b`Â æˆ–Â `c`Â çš„æ•°å­—æ˜¯ä»€ä¹ˆï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è¦æ‰¾åˆ°ä¸€ä¸ªæœ€å°çš„Â `num`ï¼Œä½¿å¾—Â `f(num, a, b, c) == n`ã€‚

```javascript
var nthUglyNumber = function (n, a, b, c) {
  // é¢˜ç›®è¯´æœ¬é¢˜ç»“æœåœ¨ [1, 2 * 10^9] èŒƒå›´å†…ï¼Œ
  // æ‰€ä»¥å°±æŒ‰ç…§è¿™ä¸ªèŒƒå›´åˆå§‹åŒ–ä¸¤ç«¯éƒ½é—­çš„æœç´¢åŒºé—´
  let left = 1,
    right = 2 * 10 ** 9;
  // æœç´¢å·¦ä¾§è¾¹ç•Œçš„äºŒåˆ†æœç´¢
  while (left <= right) {
    let mid = left + Math.floor((right - left) / 2);
    if (f(mid, a, b, c) < n) {
      // [1..mid] ä¸­ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ä¸ªæ•°ä¸è¶³ nï¼Œæ‰€ä»¥ç›®æ ‡åœ¨å³åŠè¾¹
      left = mid + 1;
    } else {
      // [1..mid] ä¸­ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ä¸ªæ•°å¤§äº nï¼Œæ‰€ä»¥ç›®æ ‡åœ¨å·¦åŠè¾¹
      right = mid - 1;
    }
  }
  return left;
};

// è®¡ç®—æœ€å¤§å…¬å› æ•°ï¼ˆè¾—è½¬ç›¸é™¤/æ¬§å‡ é‡Œå¾—ç®—æ³•ï¼‰
var gcd = function (a, b) {
  if (a < b) {
    // ä¿è¯ a > b
    return gcd(b, a);
  }
  if (b === 0) {
    return a;
  }
  return gcd(b, a % b);
};

// æœ€å°å…¬å€æ•°
var lcm = function (a, b) {
  // æœ€å°å…¬å€æ•°å°±æ˜¯ä¹˜ç§¯é™¤ä»¥æœ€å¤§å…¬å› æ•°
  return (a * b) / gcd(a, b);
};

// è®¡ç®— [1..num] ä¹‹é—´æœ‰å¤šå°‘ä¸ªèƒ½å¤Ÿè¢« a æˆ– b æˆ– c æ•´é™¤çš„æ•°å­—
var f = function (num, a, b, c) {
  let setA = Math.floor(num / a),
    setB = Math.floor(num / b),
    setC = Math.floor(num / c);
  let setAB = Math.floor(num / lcm(a, b));
  let setAC = Math.floor(num / lcm(a, c));
  let setBC = Math.floor(num / lcm(b, c));
  let setABC = Math.floor(num / lcm(lcm(a, b), c));
  // é›†åˆè®ºå®šç†ï¼šA + B + C - A âˆ© B - A âˆ© C - B âˆ© C + A âˆ© B âˆ© C
  return setA + setB + setC - setAB - setAC - setBC + setABC;
};

```


