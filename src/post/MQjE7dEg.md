
# åˆ†å‰²æ•°ç»„ä¸ºè¿ç»­å­åºåˆ—ï¼šæ–—åœ°ä¸»çš„é¡ºå­



## ç›®å½•
<!-- toc -->
 ## é¢˜ç›® 

| LeetCode                                                                                                                   | åŠ›æ‰£                                                                                         | éš¾åº¦  |
| -------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------ | --- |
| [659. Split Array into Consecutive Subsequences](https://leetcode.com/problems/split-array-into-consecutive-subsequences/) | [659. åˆ†å‰²æ•°ç»„ä¸ºè¿ç»­å­åºåˆ—](https://leetcode.cn/problems/split-array-into-consecutive-subsequences/) | ğŸŸ   |

![å›¾ç‰‡&æ–‡ä»¶](./files/20241119-9.png)

> ä½†æ–—åœ°ä¸»é‡Œé¢é¡ºå­è‡³å°‘è¦ 5 å¼ è¿ç»­çš„ç‰Œï¼Œå’Œè¿™ä¸ªé¢˜å”¯ä¸€çš„å·®åˆ«äº†å°±æ˜¯è¿™ä¸ªäº†

è¦ç‚¹ï¼š
- ç»™å®šä¸€ä¸ªæŒ‰**å‡åºæ’åº**çš„æ•´æ•°æ•°ç»„ numsï¼Œåˆ¤æ–­èƒ½å¦å°†å®ƒåˆ†å‰²æˆ**ä¸€ä¸ªæˆ–å¤šä¸ª**  `é•¿åº¦è‡³å°‘ä¸º 3` çš„è¿ç»­å­åºåˆ—ã€‚
æ¯”å¦‚é¢˜ç›®ä¸¾çš„ä¾‹å­
- è¾“å…¥Â `nums = [1,2,3,3,4,4,5,5]`ï¼Œç®—æ³•è¿”å› trueã€‚å› ä¸ºÂ `nums`Â å¯ä»¥è¢«åˆ†å‰²æˆÂ `[1,2,3,4,5]`Â å’ŒÂ `[3,4,5]`Â ä¸¤ä¸ªåŒ…å«è¿ç»­æ•´æ•°å­åºåˆ—ã€‚
- ä½†å¦‚æœè¾“å…¥Â `nums = [1,2,3,4,4,5]`ï¼Œç®—æ³•è¿”å› falseï¼Œå› ä¸ºæ— æ³•åˆ†å‰²æˆ**ä¸¤ä¸ªé•¿åº¦è‡³å°‘ä¸º 3** çš„è¿ç»­å­åºåˆ—ã€‚

## æ€è·¯

1. ä½¿ç”¨è´ªå¿ƒç®—æ³•
    - ä¼˜å…ˆå°†æ•°å­—åŠ å…¥åˆ°å·²æœ‰çš„åºåˆ—ä¸­
    - å¦‚æœä¸èƒ½åŠ å…¥å·²æœ‰åºåˆ—ï¼Œæ‰å°è¯•æ–°å»ºåºåˆ—
3. éœ€è¦ä¸¤ä¸ªå“ˆå¸Œè¡¨ï¼š
    - countMapï¼šç»Ÿè®¡`æ¯ä¸ªæ•°å­—çš„å‰©ä½™æ¬¡æ•°`
    - endMapï¼šç»Ÿè®¡`ä»¥æŸä¸ªæ•°å­—ç»“å°¾`çš„è¿ç»­å­åºåˆ—çš„ä¸ªæ•°

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @return {boolean}
 */
var isPossible = function (nums) {
  // ç»Ÿè®¡æ¯ä¸ªæ•°å­—çš„å‡ºç°æ¬¡æ•°
  const countMap = new Map();
  // ç»Ÿè®¡ä»¥æŸä¸ªæ•°å­—ç»“å°¾çš„è¿ç»­å­åºåˆ—çš„ä¸ªæ•°
  const endMap = new Map();

  // åˆå§‹åŒ– countMap
  for (const num of nums) {
    countMap.set(num, (countMap.get(num) || 0) + 1);
  }

  // éå†æ•°ç»„
  for (const num of nums) {
    const count = countMap.get(num);
    if (count === 0) {
      // å½“å‰æ•°å­—å·²ç»è¢«ä½¿ç”¨å®Œ
      continue;
    }

    // å…ˆåˆ¤æ–­æ˜¯å¦å¯ä»¥åŠ å…¥åˆ°å·²æœ‰çš„å­åºåˆ—åé¢
    if (endMap.get(num - 1) > 0) {
      // å¯ä»¥æ¥åœ¨å‰ä¸€ä¸ªæ•°å­—ç»“å°¾çš„å­åºåˆ—åé¢
      countMap.set(num, count - 1);
      endMap.set(num - 1, endMap.get(num - 1) - 1);
      endMap.set(num, (endMap.get(num) || 0) + 1);
    } else {
      // éœ€è¦æ–°å»ºä¸€ä¸ªå­åºåˆ—ï¼Œæ£€æŸ¥åç»­ä¸¤ä¸ªæ•°å­—æ˜¯å¦å¯ç”¨
      const count1 = countMap.get(num + 1) || 0;
      const count2 = countMap.get(num + 2) || 0;

      if (count1 > 0 && count2 > 0) {
        // å¯ä»¥å½¢æˆæ–°çš„é•¿åº¦ä¸º3çš„å­åºåˆ—
        countMap.set(num, count - 1);
        countMap.set(num + 1, count1 - 1);
        countMap.set(num + 2, count2 - 1);
        endMap.set(num + 2, (endMap.get(num + 2) || 0) + 1);
      } else {
        // æ— æ³•å½¢æˆé•¿åº¦ä¸º3çš„å­åºåˆ—
        return false;
      }
    }
  }

  return true;
};

```