
# 面试题 12




## 目录
<!-- toc -->
 ## 1. 下面函数的执行情况 

```javascript hl:3
var b = 10;
(function b() {
  // 在具名函数表达式中，函数名标识符在函数内部是只读的（read-only）
  // 严格模式下会报错 // TypeError: Assignment to constant variable
  // 所以这里修改 b 的值是无效的
  b = 20;
  console.log(b);
});

console.log(b); // 10
```

![图片&文件](./files/20241111-52.png)

### 1.1. 严格模式下的行为

在严格模式下，尝试修改只读标识符会抛出错误：

```javascript
var b = 10;
(function b() {
    'use strict';
    b = 20;  // TypeError: Assignment to constant variable
    console.log(b);
})();
```

### 1.2. 使用不同的变量名

```javascript
var b = 10;
(function c() {
    b = 20;
    console.log(b);  // 输出 20
})();
console.log(b);  // 输出 20
```

### 1.3. 在函数内部声明同名变量

```javascript hl:3
var b = 10;
(function b() {
    var b = 20;  // 创建新的局部变量
    console.log(b);  // 输出 20
})();
console.log(b);  // 输出 10
```


## 请简述 Reflect 作用

Reflect 是 ES6 (ECMAScript 2015) 引入的一个新的全局对象，它提供了一组方法来操作对象。Reflect 的主要作用可以概括如下：

### 1. 统一操作对象的 API

Reflect 提供了一套统一的方法来执行 JavaScript 对象的常见操作，如属性的读取、设置、删除等。这些方法与对应的 Object 方法相似，但更加规范化和功能统一。

### 2. 简化代理（Proxy）的创建

Reflect 的方法与 Proxy 的处理程序（handler）方法一一对应，使得在实现代理时更加方便和直观。

### 3. 提供函数式编程风格的对象操作
Reflect 的方法都是函数，可以作为参数传递，有利于函数式编程。

### 4. 替代一些 Object 的方法

某些 Object 上的方法在 Reflect 中有对应的、更合理的实现。

### 5. 返回更合理的结果
某些操作（如 defineProperty）在 Reflect 中会返回布尔值表示成功与否，而不是抛出异常。

让我们通过一些例子来具体说明 Reflect 的作用：

```javascript
// 1. 获取属性
const obj = { x: 1, y: 2 };
console.log(Reflect.get(obj, 'x')); // 1

// 2. 设置属性
Reflect.set(obj, 'z', 3);
console.log(obj); // { x: 1, y: 2, z: 3 }

// 3. 删除属性
Reflect.deleteProperty(obj, 'y');
console.log(obj); // { x: 1, z: 3 }

// 4. 检查对象是否有某个属性
console.log(Reflect.has(obj, 'x')); // true

// 5. 获取对象的所有属性
console.log(Reflect.ownKeys(obj)); // ['x', 'z']

// 6. 创建新对象
const newObj = Reflect.construct(function(a, b) {
  this.sum = a + b;
}, [1, 2]);
console.log(newObj.sum); // 3

// 7. 调用函数并指定 this
function greet() {
  return `Hello, ${this.name}!`;
}
console.log(Reflect.apply(greet, { name: 'Alice' }, [])); // "Hello, Alice!"

// 8. 定义新属性
Reflect.defineProperty(obj, 'w', {
  value: 4,
  writable: true,
  enumerable: true,
  configurable: true
});
console.log(obj.w); // 4
```

### 其他

1. Reflect 主要用于操作普通对象，不直接支持 Map、Set 等集合类型
2. Map 等集合类型有自己的实例方法进行操作
3. 如果需要使用 Reflect 操作 Map，可以：
    - 通过 Reflect.apply 调用 `Map 的原型方法`
    - 使用 `Proxy` 代理 Map 的操作

