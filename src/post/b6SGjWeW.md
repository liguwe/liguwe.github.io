
# äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡ä¸€ï¼šäºŒå‰æ ‘çš„ç‰¹æ€§ï¼‰


`#BST` `#leetcode`  `#äºŒå‰æ ‘/äºŒå‰æœç´¢æ ‘`   `#2024/09/08`


## ç›®å½•
<!-- toc -->
 ## 1. äºŒå‰æœç´¢æ ‘çš„ç‰¹æ€§ 

- å·¦å°å³å¤§
	- å› ä¸ºè¿™ä¸ªç‰¹æ€§ï¼Œå®ƒå¯ä»¥æä¾› `logN` çº§åˆ«çš„å¢åˆ æŸ¥æ”¹æ•ˆç‡
	- ç›´æ¥åŸºäº BST çš„æ•°æ®ç»“æ„æœ‰ AVL æ ‘ï¼Œçº¢é»‘æ ‘ç­‰
- å®ƒçš„æ¯ä¸ªå­èŠ‚ç‚¹çš„å·¦ä¾§å­æ ‘å’Œå³ä¾§å­æ ‘**éƒ½æ˜¯ BST**
- BST çš„**ä¸­åº**éå†ç»“æœæ˜¯**å‡åº**çš„

## 2. äºŒå‰æœç´¢æ ‘ä¸­ç¬¬Kå°çš„å…ƒç´ 

### 2.1. é¢˜æ„

![cos-blog-832-34-20241012|552](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908112644.png)

### 2.2. ä»£ç å®ç°

```javascript
var kthSmallest = function (root, k) {
  let res = 0;
  function traverse(node) {
    if (!node) return;

    traverse(node.left);
    /*********************************
     ********** ä¸­åºä½ç½® **************
     **********************************/
    k--;
    // k === 0 æ—¶ï¼Œè¡¨ç¤ºå·²ç»æ‰¾åˆ°ç¬¬ k å°çš„å…ƒç´ 
    if (k === 0) {
      res = node.val;
      return;
    }
    traverse(node.right);
  }

  traverse(root);

  return res;
};
```

### 2.3. å¤æ‚åº¦åˆ†æ

æ—¶é—´å¤æ‚åº¦ï¼š
1. æœ€ä½³æƒ…å†µï¼š`O(k)`
   - å¦‚æœç¬¬ k å°çš„å…ƒç´ åœ¨æ ‘çš„å·¦ä¾§è¾ƒæµ…çš„ä½ç½®ï¼Œæˆ‘ä»¬å¯èƒ½åªéœ€è¦è®¿é—® k ä¸ªèŠ‚ç‚¹å°±èƒ½æ‰¾åˆ°å®ƒã€‚
2. æœ€åæƒ…å†µï¼š`O(n)`
   - å¦‚æœ k ç­‰äºèŠ‚ç‚¹æ€»æ•°ï¼Œæˆ–è€…ç¬¬ k å°çš„å…ƒç´ åœ¨æ ‘çš„å³ä¾§è¾ƒæ·±çš„ä½ç½®ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦éå†æ•´æ£µæ ‘ã€‚
   - n æ˜¯æ ‘ä¸­èŠ‚ç‚¹çš„æ€»æ•°ã€‚
3. å¹³å‡æƒ…å†µï¼š`O(n)`
   - åœ¨å¹³å‡æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦éå†å¤§éƒ¨åˆ†èŠ‚ç‚¹æ‰èƒ½æ‰¾åˆ°ç¬¬ k å°çš„å…ƒç´ ã€‚

ç©ºé—´å¤æ‚åº¦ï¼š`O(h)`ï¼Œå…¶ä¸­ h æ˜¯**æ ‘çš„é«˜åº¦**
1. ä¸»è¦çš„ç©ºé—´æ¶ˆè€—æ¥è‡ªäºé€’å½’è°ƒç”¨æ ˆã€‚
2. åœ¨æœ€åæƒ…å†µä¸‹ï¼ˆæ ‘å®Œå…¨ä¸å¹³è¡¡ï¼Œå‘ˆç°ä¸ºä¸€æ¡é“¾ï¼‰ï¼Œé«˜åº¦ h å¯èƒ½ç­‰äºèŠ‚ç‚¹æ•° nï¼Œæ­¤æ—¶ç©ºé—´å¤æ‚åº¦ä¸º O(n)ã€‚
3. åœ¨æœ€ä½³æƒ…å†µä¸‹ï¼ˆå®Œå…¨å¹³è¡¡äºŒå‰æ ‘ï¼‰ï¼Œé«˜åº¦ h çº¦ç­‰äº log(n)ï¼Œæ­¤æ—¶ç©ºé—´å¤æ‚åº¦ä¸º `O(log n)`ã€‚

é¢å¤–è¯´æ˜ï¼š
- è¿™ä¸ªè§£æ³•æ²¡æœ‰ä½¿ç”¨ä»»ä½•é¢å¤–çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨èŠ‚ç‚¹ï¼Œè¿™æœ‰åŠ©äºä¿æŒè¾ƒä½çš„ç©ºé—´å¤æ‚åº¦ã€‚
- è™½ç„¶æˆ‘ä»¬å®šä¹‰äº†å‡ ä¸ªå˜é‡ï¼ˆcount, resultï¼‰ï¼Œä½†å®ƒä»¬å ç”¨çš„ç©ºé—´æ˜¯å¸¸æ•°çº§çš„ï¼Œä¸éšè¾“å…¥è§„æ¨¡å˜åŒ–ï¼Œå› æ­¤åœ¨åˆ†æç©ºé—´å¤æ‚åº¦æ—¶å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚

æ€»ç»“ï¼š
- æ—¶é—´å¤æ‚åº¦ï¼š
	- æœ€ä½³ `O(k)`
	- æœ€åå’Œå¹³å‡ `O(n)`
- ç©ºé—´å¤æ‚åº¦ï¼š`O(h)`ï¼Œå…¶ä¸­ h æ˜¯æ ‘çš„é«˜åº¦ï¼Œæœ€åæƒ…å†µä¸‹å¯èƒ½è¾¾åˆ° `O(n)`

è¿™ä¸ªè§£æ³•åœ¨æ—¶é—´å’Œç©ºé—´æ•ˆç‡ä¸Šéƒ½æ˜¯ç›¸å½“ä¸é”™çš„ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œå®ƒçš„æ€§èƒ½è¡¨ç°ä¼šæ›´å¥½ã€‚

### 2.4. ä¼˜åŒ–ï¼šä¸­åºéå† + æ•°ç»„ç¼“å­˜

è¿™ç§æ–¹æ³•é€‚ç”¨äºæ ‘ä¸ç»å¸¸å˜åŠ¨ï¼Œä½†é¢‘ç¹æŸ¥è¯¢ä¸åŒ k å€¼çš„æƒ…å†µ

## 3. æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘

### 3.1. é¢˜ç›®

![cos-blog-832-34-20241012|592](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908115150.png)

```javascript
/**
 * @description äºŒå‰æœç´¢æ ‘è½¬ç´¯åŠ æ ‘
 * @param {TreeNode} root
 * @return {TreeNode}
 */
var convertBST = function (root) {
  var sum = 0;

  var traverse = function (root) {
    if (root == null) {
      return;
    }
    // éœ€è¦ååºä¸­åºéå†
    // å…ˆè¿›å…¥å³å­æ ‘ï¼Œå†è®¿é—®æ ¹èŠ‚ç‚¹ï¼Œæœ€åå·¦å­æ ‘
    // æ‰€ä»¥ä¸­åºéå†çš„é€†åºæ˜¯ï¼šå³ -> æ ¹ -> å·¦
    // è®¡ç®—ç´¯åŠ å’Œæ—¶ï¼Œéœ€è¦å…ˆéå†å³å­æ ‘ï¼Œå†ç´¯åŠ æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œæœ€åéå†å·¦å­æ ‘
    traverse(root.right);
    /*****************
     * ä¸­åºéå†ä½ç½®
     ****************/
    // ç»´æŠ¤ç´¯åŠ å’Œ
    sum += root.val;
    // å°† BST è½¬åŒ–æˆç´¯åŠ æ ‘
    root.val = sum;
    traverse(root.left);
  };

  traverse(root);

  // è¿”å›æ ¹èŠ‚ç‚¹
  return root;
};
```

### 3.2. æ³¨æ„ç‚¹

- éœ€è¦å…ˆéå†**å³èŠ‚ç‚¹**   ï¼Œ è¿™æ ·åœ¨ä¸­åºä½ç½®çš„ä»£ç å°±æ˜¯ **å³ â†’ æ ¹èŠ‚ç‚¹** â†’  å·¦
	- `sum = æ‰€æœ‰å³èŠ‚ç‚¹ + æ ¹èŠ‚ç‚¹çš„å€¼`

## 4. å‚è€ƒ

https://labuladong.online/algo/data-structure/bst-part1/

## 5. ç›¸å…³é¢˜ç›®

| LeetCode                                                                                                              | åŠ›æ‰£                                                                                        | éš¾åº¦  |
| --------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------- | --- |
| [1038. Binary Search Tree to Greater Sum Tree](https://leetcode.com/problems/binary-search-tree-to-greater-sum-tree/) | [1038. ä»äºŒå‰æœç´¢æ ‘åˆ°æ›´å¤§å’Œæ ‘](https://leetcode.cn/problems/binary-search-tree-to-greater-sum-tree/) | ğŸŸ   |
| [230. Kth Smallest Element in a BST](https://leetcode.com/problems/kth-smallest-element-in-a-bst/)                    | [230. äºŒå‰æœç´¢æ ‘ä¸­ç¬¬Kå°çš„å…ƒç´ ](https://leetcode.cn/problems/kth-smallest-element-in-a-bst/)          | ğŸŸ   |
| [538. Convert BST to Greater Tree](https://leetcode.com/problems/convert-bst-to-greater-tree/)                        | [538. æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘](https://leetcode.cn/problems/convert-bst-to-greater-tree/)            | ğŸŸ   |
| -                                                                                                                     | [å‰‘æŒ‡ Offer II 054. æ‰€æœ‰å¤§äºç­‰äºèŠ‚ç‚¹çš„å€¼ä¹‹å’Œ](https://leetcode.cn/problems/w6cpku/)                     | ğŸŸ   |

