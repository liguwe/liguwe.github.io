
# å¿«é€Ÿæ’åºç®—æ³•çš„åŸç†åŠè¿ç”¨

`#ç®—æ³•/å¿«æ’` `#2024/09/16`  `#ç®—æ³•/æ’åº`


## ç›®å½•
<!-- toc -->
 ## 1. å¿«æ’ç®—æ³• 
### 1.1. ä¸€å¥è¯æ€»ç»“å¿«æ’ç®—æ³•

å¿«é€Ÿæ’åºæ˜¯**å…ˆå°†**ä¸€ä¸ªå…ƒç´ æ’å¥½åºï¼Œç„¶åå†å°†**å‰©ä¸‹çš„å…ƒç´ **æ’å¥½åº

![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240916104326.png)

> è¿™å°±åƒæ˜¯åœ¨æ•´ç†ä¸€å¤§å †æ‚ä¹±çš„ç‰©å“ï¼Œæˆ‘ä»¬å…ˆé€‰ä¸€ä¸ªæ ‡å‡†ï¼ŒæŠŠç‰©å“åˆ†æˆä¸¤å †ï¼Œç„¶åå†åˆ†åˆ«æ•´ç†è¿™ä¸¤å †ï¼Œå¦‚æ­¤åå¤ï¼Œæœ€ç»ˆå°±èƒ½å¾—åˆ°ä¸€ä¸ªäº•ç„¶æœ‰åºçš„ç»“æœã€‚
### 1.2. å¿«æ’å°±æ˜¯æ„é€  BST çš„è¿‡ç¨‹

![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/å¿«é€Ÿæ’åº.gif|432)


![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240916104516.png)

--- 

ä¸€ç§æç«¯åœºæ™¯ï¼šä½ ä¸å¯èƒ½æ¯æ¬¡éƒ½é€‰ä¸­äº†**åˆé€‚çš„åˆ‡åˆ†ç‚¹**å§ï¼Œæ¯”å¦‚ä¸Šå›¾ä¸­çš„ `4` ï¼Œæ‰€ä»¥å¦‚æœæœ‰ä¸€è¾¹çš„å…ƒç´ ç‰¹åˆ«å°‘çš„è¯ï¼Œä¼šå¯¼è‡´äºŒå‰æ ‘ç”Ÿé•¿ä¸å¹³è¡¡ï¼Œå¦‚ä¸‹å›¾ï¼š

![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240917105205.png)

æ‰€ä»¥éœ€è¦**éšæœºæ€§**ï¼Œä¸¤ç§æ–¹æ³•
- æ´—ç‰Œæ•°ç»„
- éšæœºé€‰ä¸­**åˆ‡åˆ†ç‚¹**

> ç»è¿‡éšæœºåŒ–çš„Â `partition`Â å‡½æ•°å¾ˆéš¾å‡ºç°æç«¯æƒ…å†µ

### 1.3. å¿«æ’ä¸äºŒå‰æ ‘çš„éå†çš„å…³ç³»

![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240917132719.png)

### 1.4. ä»£ç å®ç°ä¸€ï¼šç®€å•å®ç°

```javascript
var quickSort = function (nums) {
  if (nums.length <= 1) {
    return nums;
  }

  let midIndex = Math.floor(nums.length / 2);

  let left = [];
  let right = [];
  let mid = [];

  let midValue = nums[midIndex];
  // ä»æ•°ç»„ä¸­åˆ é™¤ä¸­é—´å€¼
  nums.splice(midIndex, 1);
  for (let i = 0; i < nums.length; i++) {
    if (nums[i] < midValue) {
      left.push(nums[i]);
    } else if (nums[i] > midValue) {
      right.push(nums[i]);
    } else {
      mid.push(nums[i]);
    }
  }

  //**********************
  //  å‰åºä½ç½®
  //**********************
  let sortLeft = quickSort(left);
  let sortRight = quickSort(right);

  return [...sortLeft, ...mid, ...sortRight];
};

/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number}
 */
var findKthLargest = function (nums, k) {
  let sorted = quickSort(nums);
  return sorted[sorted.length - k];
};

```

#### 1.4.1. å¤æ‚åº¦åˆ†æ

1. æ—¶é—´å¤æ‚åº¦ï¼š
	- å¿«é€Ÿæ’åºçš„å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ O(n log n)ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚
	- æœ€åæƒ…å†µä¸‹ï¼ˆå½“æ•°ç»„å·²ç»æ’åºæˆ–è€…æ¥è¿‘æ’åºæ—¶ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦å¯èƒ½é€€åŒ–åˆ° O(n^2)ã€‚
	- æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ï¼šO(n^2)
	- æ€»çš„å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n log n)
2. ç©ºé—´å¤æ‚åº¦ï¼š
   - å¿«é€Ÿæ’åºçš„ç©ºé—´å¤æ‚åº¦ä¸»è¦æ¥è‡ª**é€’å½’è°ƒç”¨æ ˆ**å’Œåˆ›å»ºçš„æ–°æ•°ç»„ã€‚
   - å¹³å‡æƒ…å†µä¸‹ï¼Œé€’å½’æ·±åº¦ä¸º O(log n)ã€‚
   - æ¯æ¬¡é€’å½’éƒ½åˆ›å»ºäº†æ–°çš„ leftã€right å’Œ mid æ•°ç»„ï¼Œæœ€åæƒ…å†µä¸‹å¯èƒ½éœ€è¦ `O(n)` çš„é¢å¤–ç©ºé—´ã€‚
   - æ€»çš„ç©ºé—´å¤æ‚åº¦ï¼šO(n log n)
   - æœ€åæƒ…å†µç©ºé—´å¤æ‚åº¦ï¼šO(n^2)
3. é¢å¤–è¯´æ˜ï¼š
   - è¿™ä¸ªå®ç°ä½¿ç”¨äº†é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œè€Œ**ä¸æ˜¯åŸåœ°æ’åº**ï¼Œè¿™å¢åŠ äº†ç©ºé—´å¤æ‚åº¦ã€‚
   - å¯¹äºæ‰¾ç¬¬kå¤§å…ƒç´ çš„é—®é¢˜ï¼Œå…¶å®ä¸éœ€è¦å®Œå…¨æ’åºæ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨å¿«é€Ÿé€‰æ‹©ç®—æ³•ï¼ˆQuickSelectï¼‰æ¥ä¼˜åŒ–ï¼Œä½¿å¹³å‡æ—¶é—´å¤æ‚åº¦é™ä½åˆ° O(n)ã€‚
4. ä¼˜åŒ–å»ºè®®ï¼š
   - å¯ä»¥è€ƒè™‘ä½¿ç”¨åŸåœ°å¿«é€Ÿæ’åºæ¥å‡å°‘ç©ºé—´ä½¿ç”¨ã€‚

### 1.5. ä»£ç å®ç°äºŒï¼šåŸåœ°æ’åº

> [!danger]
> è¯´å®è¯ï¼Œå®Œå…¨å†™å‡ºæ¥è¿˜æ˜¯æŒºéš¾çš„ï¼ŒæŒæ¡åŸç†å°±è¡Œäº†ï¼Œèƒ½å¤Ÿå†™å‡ºæ¥æˆæœ¬æ”¶ç›Šåˆå¦‚ä½•å‘¢ï¼Ÿ

```javascript
var quickSort = function (nums) {
  // ä¸ºäº†é¿å…å‡ºç°è€—æ—¶çš„æç«¯æƒ…å†µï¼Œå…ˆéšæœºæ‰“ä¹±
  shuffle(nums);
  // æ’åºæ•´ä¸ªæ•°ç»„ï¼ˆåŸåœ°ä¿®æ”¹ï¼‰
  sort(nums, 0, nums.length - 1);
};

// æ´—ç‰Œç®—æ³•ï¼Œå°†è¾“å…¥çš„æ•°ç»„éšæœºæ‰“ä¹±
var shuffle = function (nums) {
  for (let i = nums.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    // ES6 çš„è§£æ„èµ‹å€¼
    [nums[i], nums[j]] = [nums[j], nums[i]];
  }
};

var sort = function (nums, lo, hi) {
  // é€’å½’çš„ç»ˆæ­¢æ¡ä»¶, lo >= hi æ—¶è¿”å›
  if (lo >= hi) {
    return;
  }
  // å¯¹ nums[lo..hi] è¿›è¡Œåˆ‡åˆ†
  // ä½¿å¾— nums[lo..p-1] <= nums[p] < nums[p+1..hi]
  var p = partition(nums, lo, hi);
  sort(nums, lo, p - 1);
  sort(nums, p + 1, hi);
};

/**
 *@description å¯¹æ•°ç»„ nums çš„å­åŒºé—´ [lo, hi] è¿›è¡Œåˆ‡åˆ†æ“ä½œ
 *   ä»[lo,hi]ä¸­xé€‰æ‹© pivot = nums[lo] ä½œä¸ºåˆ‡åˆ†ç‚¹
 *      å°†å°äº pivot çš„å…ƒç´ æ”¾åœ¨å·¦ä¾§ï¼Œå¤§äº pivot çš„å…ƒç´ æ”¾åœ¨å³ä¾§
 *@param {number[]} nums å¾…åˆ‡åˆ†çš„æ•°ç»„
 *@param {number} lo åˆ‡åˆ†çš„å·¦è¾¹ç•Œ
 *@param {number} hi åˆ‡åˆ†çš„å³è¾¹ç•Œ
 *@return {number} è¿”å› p, ä½¿å¾— nums[lo..p-1] <= nums[p] < nums[p+1..hi]
 */
var partition = function (nums, lo, hi) {
  var pivot = nums[lo];
  var i = lo + 1, // i ä» lo + 1 å¼€å§‹ï¼Œé€æ¸å‘å³é€¼è¿‘
    j = hi; // j ä» hi å¼€å§‹,é€æ¸å‘å·¦é€¼è¿‘
  // å½“ i > j æ—¶ç»“æŸå¾ªç¯ï¼Œä»¥ä¿è¯åŒºé—´ [lo, hi] éƒ½è¢«è¦†ç›–
  while (i <= j) {
    while (i < hi && nums[i] <= pivot) {
      i++;
      // æ­¤ while ç»“æŸæ—¶æ°å¥½ nums[i] > pivot
    }
    while (j > lo && nums[j] > pivot) {
      j--;
      // æ­¤ while ç»“æŸæ—¶æ°å¥½ nums[j] <= pivot
    }

    // è¿™ä¸ªæ—¶å€™å¯ä»¥è‡ªå·±è·³å‡ºå¾ªç¯äº†
    if (i >= j) {
      break;
    }
    // æ­¤æ—¶ [lo, i) <= pivot && (j, hi] > pivot
    // äº¤æ¢ nums[j] å’Œ nums[i]
    [nums[i], nums[j]] = [nums[j], nums[i]];
    // æ­¤æ—¶ [lo, i] <= pivot && [j, hi] > pivot
  }
  // æœ€åå°† pivot æ”¾åˆ°åˆé€‚çš„ä½ç½®ï¼Œå³ pivot å·¦è¾¹å…ƒç´ è¾ƒå°ï¼Œå³è¾¹å…ƒç´ è¾ƒå¤§
  [nums[lo], nums[j]] = [nums[j], nums[lo]];

  return j;
};

```

## 2. å¿«é€Ÿé€‰æ‹©ç®—æ³•

å¿«é€Ÿé€‰æ‹©ç®—æ³•æ˜¯ä¸€ç§ç”¨äº**æ‰¾åˆ°æ•°ç»„ä¸­ç¬¬kå°ï¼ˆæˆ–ç¬¬kå¤§ï¼‰å…ƒç´ **çš„é«˜æ•ˆç®—æ³•ã€‚å®ƒçš„æ€æƒ³æºè‡ªäºå¿«é€Ÿæ’åºç®—æ³•ï¼Œä½†é€šå¸¸æ¯”å®Œæ•´çš„æ’åºæ›´å¿«ï¼Œå› ä¸ºå®ƒåªéœ€è¦éƒ¨åˆ†æ’åºæ•°ç»„ã€‚

è®©æˆ‘ä»¬æ·±å…¥äº†è§£å¿«é€Ÿé€‰æ‹©ç®—æ³•ï¼š

1. ç®—æ³•æ¦‚è¿°ï¼š
   å¿«é€Ÿé€‰æ‹©çš„ä¸»è¦æ€æƒ³æ˜¯ä½¿ç”¨ç±»ä¼¼å¿«é€Ÿæ’åºçš„åˆ†åŒºç­–ç•¥ï¼Œä½†åªé€’å½’åœ°æœç´¢åŒ…å«ç¬¬kå°å…ƒç´ çš„é‚£ä¸€éƒ¨åˆ†ã€‚
2. ç®—æ³•æ­¥éª¤ï¼š
   a. é€‰æ‹©ä¸€ä¸ªåŸºå‡†å…ƒç´ ï¼ˆpivotï¼‰
   b. å°†æ•°ç»„åˆ†åŒºï¼Œä½¿å¾—å°äºåŸºå‡†çš„å…ƒç´ åœ¨å·¦è¾¹ï¼Œå¤§äºåŸºå‡†çš„å…ƒç´ åœ¨å³è¾¹
   c. æ ¹æ®åˆ†åŒºä½ç½®å’Œkçš„å…³ç³»ï¼Œå†³å®šæ˜¯è¿”å›ç»“æœï¼Œè¿˜æ˜¯ç»§ç»­åœ¨å·¦è¾¹æˆ–å³è¾¹é€’å½’æŸ¥æ‰¾
3. JavaScript å®ç°ï¼š

```javascript
function quickSelect(arr, k) {
    // kåº”è¯¥åœ¨1åˆ°arr.lengthä¹‹é—´
    if (k < 1 || k > arr.length) {
        return null;
    }
    return select(arr, 0, arr.length - 1, k);
}

function select(arr, left, right, k) {
    // å¦‚æœå·¦å³æŒ‡é’ˆç›¸é‡ï¼Œè¯´æ˜æ‰¾åˆ°äº†ç¬¬kå°çš„å…ƒç´ 
    if (left === right) {
        return arr[left];
    }
    
    // é€‰æ‹©åŸºå‡†å¹¶åˆ†åŒº
    let pivotIndex = partition(arr, left, right);
    
    // è®¡ç®—åŸºå‡†çš„ç§©ï¼ˆå³å®ƒæ˜¯ç¬¬å‡ å°çš„å…ƒç´ ï¼‰
    let rank = pivotIndex - left + 1;
    
    if (k === rank) {
        // å¦‚æœåŸºå‡†çš„ç§©æ­£å¥½æ˜¯kï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ç¬¬kå°çš„å…ƒç´ 
        return arr[pivotIndex];
    } else if (k < rank) {
        // å¦‚æœkå°äºrankï¼Œåœ¨å·¦åŠéƒ¨åˆ†ç»§ç»­æŸ¥æ‰¾
        return select(arr, left, pivotIndex - 1, k);
    } else {
        // å¦‚æœkå¤§äºrankï¼Œåœ¨å³åŠéƒ¨åˆ†ç»§ç»­æŸ¥æ‰¾
        return select(arr, pivotIndex + 1, right, k - rank);
    }
}

function partition(arr, left, right) {
    let pivot = arr[right]; // é€‰æ‹©æœ€å³è¾¹çš„å…ƒç´ ä½œä¸ºåŸºå‡†
    let i = left - 1;
    
    for (let j = left; j < right; j++) {
        if (arr[j] <= pivot) {
            i++;
            [arr[i], arr[j]] = [arr[j], arr[i]]; // äº¤æ¢å…ƒç´ 
        }
    }
    
    [arr[i + 1], arr[right]] = [arr[right], arr[i + 1]]; // å°†åŸºå‡†æ”¾åˆ°æ­£ç¡®çš„ä½ç½®
    return i + 1;
}

// ä½¿ç”¨ç¤ºä¾‹
let arr = [3, 2, 1, 5, 6, 4];
console.log(quickSelect(arr, 2)); // è¾“å‡ºï¼š2ï¼ˆç¬¬2å°çš„å…ƒç´ ï¼‰
console.log(quickSelect(arr, 4)); // è¾“å‡ºï¼š4ï¼ˆç¬¬4å°çš„å…ƒç´ ï¼‰
```

4. ç®—æ³•åˆ†æï¼š
   - æ—¶é—´å¤æ‚åº¦ï¼š
     * å¹³å‡æƒ…å†µï¼šO(n)
     * æœ€åæƒ…å†µï¼šO(nÂ²)ï¼ˆä½†è¿™ç§æƒ…å†µå¾ˆå°‘å‘ç”Ÿï¼Œå°¤å…¶æ˜¯å¦‚æœæˆ‘ä»¬éšæœºé€‰æ‹©åŸºå‡†ï¼‰
   - ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œå› ä¸ºå®ƒæ˜¯åŸåœ°æ“ä½œçš„
5. ä¼˜ç‚¹ï¼š
   - åœ¨å¹³å‡æƒ…å†µä¸‹ï¼Œå®ƒæ¯”æ’åºæ•´ä¸ªæ•°ç»„ç„¶åé€‰æ‹©ç¬¬kä¸ªå…ƒç´ è¦å¿«å¾—å¤š
   - å®ƒæ˜¯ä¸€ä¸ªåŸåœ°ç®—æ³•ï¼Œä¸éœ€è¦é¢å¤–çš„ç©ºé—´
   - å¯¹äºå¤§å‹æ•°æ®é›†å¯»æ‰¾ä¸­ä½æ•°æˆ–è€…å…¶ä»–ç™¾åˆ†ä½æ•°éå¸¸æœ‰æ•ˆ
6. åº”ç”¨åœºæ™¯ï¼š
   - å¯»æ‰¾æ•°ç»„ä¸­çš„ä¸­ä½æ•°
   - å¯»æ‰¾ç¬¬kå¤§ï¼ˆæˆ–ç¬¬kå°ï¼‰çš„å…ƒç´ 
   - è§£å†³ Top K é—®é¢˜
   - åœ¨æŸäº›æ•°æ®æµç®—æ³•ä¸­ç”¨äºç»´æŠ¤è¿è¡Œæ—¶çš„ç»Ÿè®¡ä¿¡æ¯
7. ä¼˜åŒ–ï¼š
   - ä½¿ç”¨éšæœºé€‰æ‹©åŸºå‡†å¯ä»¥è¿›ä¸€æ­¥æ”¹å–„æœ€åæƒ…å†µçš„æ€§èƒ½
   - å¯¹äºå°è§„æ¨¡å­æ•°ç»„ï¼Œå¯ä»¥åˆ‡æ¢åˆ°æ’å…¥æ’åºç­‰ç®€å•ç®—æ³•æ¥æé«˜æ•ˆç‡

å¿«é€Ÿé€‰æ‹©ç®—æ³•æ˜¯ä¸€ä¸ªå¼ºå¤§è€Œä¼˜é›…çš„ç®—æ³•ï¼Œå®ƒå±•ç¤ºäº†å¦‚ä½•é€šè¿‡åªè§£å†³é—®é¢˜çš„ä¸€éƒ¨åˆ†æ¥é«˜æ•ˆåœ°å¾—åˆ°ç­”æ¡ˆã€‚ç†è§£å’ŒæŒæ¡è¿™ä¸ªç®—æ³•ä¸ä»…èƒ½å¸®åŠ©è§£å†³ç‰¹å®šçš„é—®é¢˜ï¼Œè¿˜èƒ½æä¾›ä¸€ç§è§£å†³æ›´å¹¿æ³›é—®é¢˜çš„æ€è·¯ã€‚

## 3. ç›¸å…³é¢˜ç›®

|LeetCode|åŠ›æ‰£|éš¾åº¦|
|---|---|---|
|[215. Kth Largest Element in an Array](https://leetcode.com/problems/kth-largest-element-in-an-array/)|[215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ ](https://leetcode.cn/problems/kth-largest-element-in-an-array/)|ğŸŸ |
|[912. Sort an Array](https://leetcode.com/problems/sort-an-array/)|[912. æ’åºæ•°ç»„](https://leetcode.cn/problems/sort-an-array/)|ğŸŸ |
|-|[å‰‘æŒ‡ Offer II 076. æ•°ç»„ä¸­çš„ç¬¬ k å¤§çš„æ•°å­—](https://leetcode.cn/problems/xx4gT2/)|ğŸŸ |

## 4. å‚è€ƒ

https://labuladong.online/algo/practice-in-action/quick-sort/
