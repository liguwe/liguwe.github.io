
# å­åºåˆ—ï¼š åŠ¨æ€è§„åˆ’ä¹‹å­åºåˆ—é—®é¢˜è§£é¢˜æ¨¡æ¿ï¼ˆæœ€é•¿å›æ–‡å­åºåˆ—ï¼‰


| LeetCode                                                                                                                                        | åŠ›æ‰£                                                                                                          | éš¾åº¦  |
| ----------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------- | --- |
| [1312. Minimum Insertion Steps to Make a String Palindrome](https://leetcode.com/problems/minimum-insertion-steps-to-make-a-string-palindrome/) | [1312. è®©å­—ç¬¦ä¸²æˆä¸ºå›æ–‡ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°](https://leetcode.cn/problems/minimum-insertion-steps-to-make-a-string-palindrome/) | ğŸ”´  |
| [516. Longest Palindromic Subsequence](https://leetcode.com/problems/longest-palindromic-subsequence/)                                          | [516. æœ€é•¿å›æ–‡å­åºåˆ—](https://leetcode.cn/problems/longest-palindromic-subsequence/)                               | ğŸŸ   |

## ç›®å½•
<!-- toc -->
 ## 1. å­åºåˆ—ä¸å¥½è§£å†³ 

- å­åºåˆ—é—®é¢˜æœ¬èº«å°±ç›¸å¯¹å­ä¸²ã€å­æ•°ç»„æ›´å›°éš¾ä¸€äº›
	- å› ä¸ºåºå­åºåˆ—æ˜¯ä¸è¿ç»­çš„

## 2. ä¸¤ç§è§£é¢˜æ¨¡æ¿

### 2.1. ä¸€ç»´ dp æ•°ç»„

å®šä¹‰ï¼šåœ¨å­æ•°ç»„Â `arr[0..i]`Â ä¸­ï¼Œä»¥Â `arr[i]`Â **ç»“å°¾**çš„å­åºåˆ—çš„é•¿åº¦æ˜¯Â `dp[i]`

è¿™æ ·ç¬¦åˆ**å½’çº³æ³•**ï¼Œå¯ä»¥æ‰¾åˆ°**çŠ¶æ€è½¬ç§»**çš„å…³ç³»

```javascript hl:5
int n = array.length;
int[] dp = new int[n];

for (int i = 1; i < n; i++) {
    for (int j = 0; j < i; j++) {
        dp[i] = æœ€å€¼(dp[i], dp[j] + ...)
    }
}
```

> æ³¨æ„æ˜¯ä¸Šé¢æ ‡æ³¨çš„ `j < i`

### 2.2. äºŒç»´çš„Â `dp`Â æ•°ç»„

è¿™ç§æ€è·¯è¿ç”¨ç›¸å¯¹æ›´å¤šä¸€äº›
- å°¤å…¶æ˜¯æ¶‰åŠ**ä¸¤ä¸ªå­—ç¬¦ä¸²/æ•°ç»„çš„å­åºåˆ—**æ—¶
	- åœ¨å­æ•°ç»„Â `arr1[0..i]`Â å’Œå­æ•°ç»„Â `arr2[0..j]`Â ä¸­ï¼Œæˆ‘ä»¬è¦æ±‚çš„å­åºåˆ—é•¿åº¦ä¸ºÂ `dp[i][j]`
		- æ³¨æ„ä¸Šé¢çš„ `i å’Œ j` åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Ÿ
- ä¹Ÿå¯ä»¥ç”¨äºåªæ¶‰åŠ**ä¸€ä¸ªå­—ç¬¦ä¸²/æ•°ç»„**çš„æƒ…æ™¯ï¼Œæ¯”å¦‚å›æ–‡å­åºåˆ—é—®é¢˜
	- åœ¨å­æ•°ç»„Â `array[i..j]`Â ä¸­ï¼Œæˆ‘ä»¬è¦æ±‚çš„å­åºåˆ—çš„é•¿åº¦ä¸ºÂ `dp[i][j]`
		- æ³¨æ„ä¸Šé¢çš„ `i å’Œ j` åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Ÿ

## 3. æœ€é•¿å›æ–‡å­åºåˆ—

![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-10.png)

æ¯”å¦‚è¯´è¾“å…¥Â `s = "aecda"`ï¼Œç®—æ³•è¿”å› 3ï¼Œå› ä¸ºæœ€é•¿å›æ–‡å­åºåˆ—æ˜¯Â `"aca"`ï¼Œé•¿åº¦ä¸º 3ã€‚
### 3.1. dp æ•°ç»„å®šä¹‰

Â `dp`Â æ•°ç»„çš„å®šä¹‰æ˜¯ï¼š
Â - åœ¨å­ä¸²Â `s[i..j]`Â ä¸­ï¼Œæœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦ä¸ºÂ `dp[i][j]`

```javascript
if (s[i] == s[j])
    // å®ƒä¿©ä¸€å®šåœ¨æœ€é•¿å›æ–‡å­åºåˆ—ä¸­
    dp[i][j] = dp[i + 1][j - 1] + 2;
else
    // s[i+1..j] å’Œ s[i..j-1] è°çš„å›æ–‡å­åºåˆ—æ›´é•¿ï¼Ÿ
    dp[i][j] = max(
	    dp[i + 1][j], 
	    dp[i][j - 1]
    );
```

### 3.2. ä¸ºä»€ä¹ˆæ˜¯ `dp[i][j] = dp[i + 1][j - 1]` 

![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-13.png)

å¦‚ä¸Šå›¾ï¼Œå¦‚æœ `i=j` ï¼Œé‚£ä¹ˆå°±å¯ä»¥
- i æŒ‡é’ˆå‘å³ç§»åŠ¨ï¼Œi + 1
- j æŒ‡é’ˆå‘å·¦ç§»åŠ¨ï¼Œj - 1

### 3.3. éå†é¡ºåº

![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-11.png)
### 3.4. æœ€ç»ˆä»£ç 

```javascript
var longestPalindromeSubseq = function (s) {
  var n = s.length;
  // dp æ•°ç»„å…¨éƒ¨åˆå§‹åŒ–ä¸º 0
  var dp = Array.from({ length: n }, () => Array(n).fill(0));
  // base caseï¼ši å’Œ j ç›¸ç­‰çš„è¯ dp[i][j] å¿…ç„¶ç­‰äº 1
  // ä¸ºä»€ä¹ˆï¼šå› ä¸ºæ­¤æ—¶ s[i..j] åªæœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œé‚£å°±æ˜¯å®ƒè‡ªå·±
  for (var i = 0; i < n; i++) {
    dp[i][i] = 1;
  }
  // åç€éå†ä¿è¯æ­£ç¡®çš„çŠ¶æ€è½¬ç§»
  // å› ä¸º dp[i][j] ä¾èµ– dp[i + 1][j - 1]ï¼Œéœ€è¦çŸ¥é“ dp[i + 1][j - 1] æ‰èƒ½ç®—å‡º dp[i][j]
  for (var i = n - 1; i >= 0; i--) {
    // j ä» i + 1 å¼€å§‹,å› ä¸º dp[i][j] æ˜¯ä» dp[i + 1][j - 1] è½¬ç§»è¿‡æ¥çš„
    for (var j = i + 1; j < n; j++) {
      // çŠ¶æ€è½¬ç§»æ–¹ç¨‹
      if (s.charAt(i) == s.charAt(j)) {
        // s[i] å’Œ s[j] å¿…ç„¶åœ¨æœ€é•¿å›æ–‡å­åºåˆ—ä¸­ï¼Œç›´æ¥ +2
        dp[i][j] = dp[i + 1][j - 1] + 2;
      } else {
        dp[i][j] = Math.max(
          dp[i + 1][j], // s[i] ä¸åœ¨æœ€é•¿å›æ–‡å­åºåˆ—ä¸­
          dp[i][j - 1], // s[j] ä¸åœ¨æœ€é•¿å›æ–‡å­åºåˆ—ä¸­
        );
      }
    }
  }
  // æ•´ä¸ª s çš„æœ€é•¿å›æ–‡å­ä¸²é•¿åº¦
  return dp[0][n - 1];
};
```

## 4. è®©å­—ç¬¦ä¸²æˆä¸ºå›æ–‡ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°

![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-12.png)

- æ¯”å¦‚è¯´è¾“å…¥Â `s = "abcea"`ï¼Œç®—æ³•è¿”å› 2ï¼Œå› ä¸ºå¯ä»¥ç»™Â `s`Â æ’å…¥ 2 ä¸ªå­—ç¬¦ `ba` å˜æˆå›æ–‡ä¸²Â `"abeceba"`Â æˆ–è€…Â `"aebcbea"`ã€‚
- å¦‚æœè¾“å…¥Â `s = "aba"`ï¼Œåˆ™ç®—æ³•è¿”å› 0ï¼Œå› ä¸ºÂ `s`Â å·²ç»æ˜¯å›æ–‡ä¸²ï¼Œä¸ç”¨æ’å…¥ä»»ä½•å­—ç¬¦

### 4.1. dp å®šä¹‰

å¯¹å­—ç¬¦ä¸²Â `s[i..j]`ï¼Œæœ€å°‘éœ€è¦è¿›è¡ŒÂ `dp[i][j]`Â æ¬¡æ’å…¥æ‰èƒ½å˜æˆå›æ–‡ä¸²

```javascript hl:3
if (s[i] == s[j]) {
    // ä¸éœ€è¦æ’å…¥ä»»ä½•å­—ç¬¦
    dp[i][j] = dp[i + 1][j - 1];
} else {
    // æŠŠ s[i+1..j] å’Œ s[i..j-1] å˜æˆå›æ–‡ä¸²ï¼Œé€‰æ’å…¥æ¬¡æ•°è¾ƒå°‘çš„
    // ç„¶åè¿˜è¦å†æ’å…¥ä¸€ä¸ª s[i] æˆ– s[j]ï¼Œä½¿ s[i..j] é…æˆå›æ–‡ä¸²
    dp[i][j] = min(
	    dp[i + 1][j],  // å†æ’å…¥ä¸€ä¸ª s[i]
	    dp[i][j - 1]   // å†æ’å…¥ä¸€ä¸ª s[j]
	) + 1;
}
```

### 4.2. æœ€ç»ˆä»£ç 

```javascript
var minInsertions = function (s) {
  var n = s.length;
  // dp[i][j] è¡¨ç¤ºæŠŠå­—ç¬¦ä¸² s[i..j] å˜æˆå›æ–‡ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°
  // dp æ•°ç»„å…¨éƒ¨åˆå§‹åŒ–ä¸º 0
  var dp = Array.from(Array(n), () => Array(n).fill(0));
  // åç€éå†ä¿è¯æ­£ç¡®çš„çŠ¶æ€è½¬ç§»
  for (var i = n - 1; i >= 0; i--) {
    for (var j = i + 1; j < n; j++) {
      // çŠ¶æ€è½¬ç§»æ–¹ç¨‹
      // å¦‚æœ s[i] == s[j]ï¼Œè¯´æ˜ä¸ç”¨æ’å…¥ï¼Œdp[i][j] = dp[i + 1][j - 1]
      if (s.charAt(i) === s.charAt(j)) {
        dp[i][j] = dp[i + 1][j - 1];
      } else {
        dp[i][j] =
          Math.min(
            dp[i + 1][j], // æ’å…¥ s[i]ï¼Œä½¿å¾— s[i,j] å˜æˆå›æ–‡ä¸²
            dp[i][j - 1], // æ’å…¥ s[j]ï¼Œä½¿å¾— s[i,j] å˜æˆå›æ–‡ä¸²
          ) + 1;
      }
    }
  }
  // æ•´ä¸ª s çš„æœ€å°‘æ’å…¥æ¬¡æ•°
  return dp[0][n - 1];
};

```

### 4.3. å¤ç”¨æœ€é•¿å›æ–‡å­åºåˆ—çš„ä»£ç 

```javascript hl:2
var minInsertions = function(s) {
    return s.length - longestPalindromeSubseq(s);
};

// è®¡ç®— s ä¸­çš„æœ€é•¿å›æ–‡å­åºåˆ—é•¿åº¦
var longestPalindromeSubseq = function(s) {
    // è§ä¸Šæ–‡
};
```

