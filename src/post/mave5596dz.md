
# åŠ¨æ€è§„åˆ’è§£é¢˜å¥—è·¯æ¡†æ¶ï¼šä»¥æœ€å°é›¶é’±ä¸ºä¾‹è¯´æ˜

`#ç®—æ³•/åŠ¨æ€è§„åˆ’` 

>  å¦å¤–è§ [322. é›¶é’±å…‘æ¢ï¼šéœ€è¦çš„æœ€å°ç¡¬å¸æ•°](/post/kmlztozey9.html)



## ç›®å½•
<!-- toc -->
 ## 1. æ€»ç»“ 

### 1.1. dp æ•°ç»„æ–¹æ³•ï¼š `dp[i] ä»£è¡¨å‡‘è¶³ i å…ƒæ‰€éœ€è¦çš„æœ€å°ç¡¬å¸æ•°é‡`

æ³¨æ„ç‚¹ï¼š
- æœ€å¤§å€¼ä¸å¥½æ‹¼å†™ Infinity ï¼Œé‚£å°±çœ‹é¢˜è®¾ä¸­ç»™çš„æœ€å¤§å€¼ï¼Œæˆ–è€…ä½¿ç”¨ `Math.min`
	- æ³¨æ„å®šä¹‰**å¸¸é‡** `const`
- æ³¨æ„é•¿åº¦ï¼Œä» 0 å¼€å§‹ï¼Œé•¿åº¦ä¸º `amount + 1`
- åˆ«æƒ³ç€éœ€è¦ä½¿ç”¨**å¤šå°‘ä¸ªç¡¬å¸**
	- å› ä¸ºè¿™æ˜¯ä» `0` å¼€å§‹æ¨å¯¼çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦å…³ç³»éœ€è¦å¤šå°‘ä¸ªç¡¬å¸ï¼Œè¿™æ˜¯æ•°å­¦çš„åé—ç—‡å§ï¼Ÿ

```javascript
var coinChange = function (coins, amount) {
  // é”™è¯¯
  // const MAX = 10 ** 4 ;
  const MAX = 10 ** 4 + 1;
  // const MAX = Math.min();
  // const MAX = Infinity;
  //  åˆå§‹åŒ– dp æ•°ç»„
  //  dp[i] ä»£è¡¨å‡‘è¶³ i å…ƒæ‰€éœ€è¦çš„æœ€å°ç¡¬å¸æ•°é‡
  let dp = new Array(amount + 1).fill(MAX);

  // base case
  dp[0] = 0;

  for (let i = 1; i <= amount; i++) {
    // é€‰æ‹©ï¼šé€‰æ‹©æ¯ç§é¢å€¼çš„ç¡¬å¸
    for (let coin of coins) {
      //  é‡‘é¢ - é¢å€¼ < 0 ,è¯´æ˜ä¸èƒ½é€‰æ‹©ï¼Œç›´æ¥ continue
      if (i - coin < 0) continue;
      // é€‰æ‹© é¢å€¼ä¸º coin çš„ç¡¬å¸
      dp[i] = Math.min(dp[i], dp[i - coin] + 1);
    }
  }

  return dp[amount] === MAX ? -1 : dp[amount];
};
```


### 1.2. é€’å½’è§£æ³•

- dp å‡½æ•°å®šä¹‰åœ¨å‡½æ•°ä½“é‡Œé¢ï¼Œè¿™æ ·å¯ä»¥å°‘ä¼ å‡ ä¸ªå‚æ•°
- é€’å½’å‡å°‘çš„å˜é‡æ˜¯ï¼š`let sub = dp(n - coin);`
- **res å†™åˆ°`dp` é‡Œé¢å»** 
- éœ€è¦åŠ ä¸Šå¤‡å¿˜å½•ï¼Œæ‰èƒ½é€šè¿‡æ‰€æœ‰ç”¨ä¾‹ï¼šåˆå§‹åŒ– `-666`

```javascript hl:2
var coinChange = function (coins, amount) {
  const MAX_VAL = 10 ** 4 + 1;

  let memo = new Array(amount + 1).fill(-666);
  function dp(n) {
    if (n === 0) return 0;
    if (n < 0) return -1;

    if (memo[n] !== -666) return memo[n];
    let res = MAX_VAL;
    for (let coin of coins) {
      let sub = dp(n - coin);
      if (sub === -1) continue;

      res = Math.min(sub + 1, res);
    }

    memo[n] = res === MAX_VAL ? -1 : res;

    return memo[n];
  }

  return dp(amount);
};

```

## 2. é¢˜ç›®

| LeetCode                                                                 | åŠ›æ‰£                                                           | éš¾åº¦  |
| ------------------------------------------------------------------------ | ------------------------------------------------------------ | --- |
| [322. Coin Change](https://leetcode.com/problems/coin-change/)           | [322. é›¶é’±å…‘æ¢](https://leetcode.cn/problems/coin-change/)       | ğŸŸ   |

![|624](https://od-1310531898.cos.ap-beijing.myqcloud.com/202303181621816.png)

## 3. åŠ¨æ€è§„åˆ’çš„ `è¦ç‚¹`

è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œå› ä¸ºå®ƒå…·æœ‰`ã€Œæœ€ä¼˜å­ç»“æ„ã€`çš„ã€‚å³å­é—®é¢˜é—´ `äº’ç›¸ç‹¬ç«‹`

+ åŠ¨æ€è§„åˆ’é—®é¢˜çš„ä¸€èˆ¬å½¢å¼å°±æ˜¯ `æ±‚æœ€å€¼`
+ æ±‚è§£åŠ¨æ€è§„åˆ’çš„**æ ¸å¿ƒé—®**é¢˜æ˜¯ `ç©·ä¸¾`
+ å…·å¤‡ã€Œæœ€ä¼˜å­ç»“æ„ã€ï¼Œå³æ˜¯å¦èƒ½å¤Ÿé€šè¿‡å­é—®é¢˜çš„æœ€å€¼å¾—åˆ°åŸé—®é¢˜çš„æœ€å€¼
+ æ˜¯å¦å­˜åœ¨`ã€Œé‡å å­é—®é¢˜ã€`ï¼Œå¦‚æœå­˜åœ¨éœ€è¦ ä½¿ç”¨`ã€Œå¤‡å¿˜å½•ã€`æˆ–è€… `ã€ŒDP tableã€` æ¥ä¼˜åŒ–ç©·ä¸¾è¿‡ç¨‹
+ `é‡å å­é—®é¢˜`ã€`æœ€ä¼˜å­ç»“æ„`ã€`çŠ¶æ€è½¬ç§»æ–¹ç¨‹`å°±æ˜¯ **åŠ¨æ€è§„åˆ’ä¸‰è¦ç´ **

## 4. å¦‚ä½•åˆ—å‡º `çŠ¶æ€è½¬ç§»æ–¹ç¨‹`

dp å‡½æ•°ï¼š`dp(n)` è¡¨ç¤ºï¼Œè¾“å…¥ä¸€ä¸ªç›®æ ‡é‡‘é¢ `n`ï¼Œè¿”å›å‡‘å‡ºç›®æ ‡é‡‘é¢ `n` æ‰€éœ€çš„æœ€å°‘ç¡¬å¸æ•°é‡

![|592](https://od-1310531898.cos.ap-beijing.myqcloud.com/202303170806731.png)

### 4.1. ç¬¬ä¸€æ­¥ã€ç¡®å®š `base case` Â 

æ¯”å¦‚éœ€è¦æ‰¾é›¶ Â `0å…ƒ` ï¼Œé‚£ä¹ˆæœ€å°çš„ç¡¬å¸æ•°å°±ä¸º `0`

### 4.2. ç¬¬äºŒæ­¥ã€ç¡®å®š`çŠ¶æ€` ä¸ `é€‰æ‹©`

+ çŠ¶æ€ 
	+ å³`åŸé—®é¢˜ å’Œ å­é—®é¢˜`ä¸­ä¼šå˜åŒ–çš„å˜é‡ Â 
		+ æ‰€ä»¥ï¼Œè¯¥é—®é¢˜çš„çŠ¶æ€ ä¸º `æ‰¾é›¶å¤šå°‘é’±`
+ **é€‰æ‹©** Â 
    - å³  å¯¼è‡´çŠ¶æ€å˜åŒ–çš„**è¡Œä¸º** 
    - å³ `éœ€è¦æ‰¾é›¶å¤šå°‘é’±` ä¼šå˜åŒ–å‘¢ï¼Ÿ
        - å› ä¸ºæ¯æ¬¡é€‰æ‹©äº†ä¸€æšç¡¬å¸ï¼Œæ¯”å¦‚ä¼šå¯¼è‡´ `çŠ¶æ€`çš„å˜åŒ–

### 4.3. ç¬¬ä¸‰æ­¥ã€æ˜ç¡® `dp å‡½æ•°` æˆ– `dp æ•°ç»„` 

+ dpå‡½æ•°
    - è‡ªé¡¶å‘ä¸‹ `é€’å½’` çš„åŠ¨æ€è§„åˆ’è§£æ³• ï¼Œçœ‹ä¸‹é¢æ¨¡æ¿
+ dpæ•°ç»„ 
    -  è‡ªåº•å‘ä¸Š`è¿­ä»£`çš„åŠ¨æ€è§„åˆ’ï¼Œçœ‹ä¸‹é¢æ¨¡æ¿

## 5. è‡ªé¡¶å‘ä¸‹çš„`é€’å½’`è§£æ³•

### 5.1. æ¨¡æ¿ä»£ç 

```javascript hl:3,11
// æ¨¡æ¿
function dp('æ‰€æœ‰å¯èƒ½çš„é€‰æ‹©', 'çŠ¶æ€ 1','çŠ¶æ€ 2 ...'){
    // ::::base case
    if('çŠ¶æ€' === 1) return 'xxx'
    if('çŠ¶æ€' === 1) return 'xxx'
    
    // ::::éœ€è¦è¿”å›çš„æœ€å€¼
    let res = ''
    for (let 'é€‰æ‹©' of 'æ‰€æœ‰å¯èƒ½çš„é€‰æ‹©'){
        // # æ­¤æ—¶çš„çŠ¶æ€å·²ç»å› ä¸ºåšäº†é€‰æ‹©è€Œæ”¹å˜
        res =  dp('æ‰€æœ‰å¯èƒ½çš„é€‰æ‹©', 'çŠ¶æ€ 1','çŠ¶æ€ 2 ...')
    }
    return res;
}
```

### 5.2. å®é™…ä»£ç 

```javascript hl:18
// å‚æ•°ä¸€ï¼šæ‰€æœ‰å¯èƒ½çš„é€‰æ‹© coins
// å‚æ•°äºŒï¼šçŠ¶æ€ï¼Œä¼šå˜çš„ä¸œè¥¿
function dp (coins, amount) {
    // base case
    if (amount === 0) {
        return 0;
    }
    if (amount < 0) {
        return -1
    }
    // ::::resä¸ºæœ€ç»ˆè¿”å›çš„ç»“æœï¼Œå³æœ€å°‘å‡ æšç¡¬å¸
    let res = Infinity;
    for (let coin of coins) {
        // è®¡ç®—å­é—®é¢˜çš„ç»“æœ
        let subProblem = dp(coins, amount - coin);
        // å­é—®é¢˜æ— è§£åˆ™è·³è¿‡
        if (subProblem === -1) continue;
        // èƒ½åˆ°è¿™å„¿ï¼Œè¯´æ˜èƒ½å¤Ÿç»§ç»­
        // åœ¨å­é—®é¢˜ä¸­é€‰æ‹©æœ€ä¼˜è§£ï¼Œç„¶ååŠ ä¸€
        res = Math.min(res, subProblem + 1);
    }
    return res === Infinity ? -1 : res;
};
```

### 5.3. åˆ†æä¸€ä¸‹`æ—¶é—´å¤æ‚åº¦`

![|584](https://od-1310531898.cos.ap-beijing.myqcloud.com/202303181714402.png)

ä¸‹é¢çœ‹çœ‹`ç®—æ³•å¤æ‚åº¦`ï¼š

+ `å­é—®é¢˜`æ€»æ•°ä¸º `é€’å½’æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°`ï¼Œä½†æ˜¯å¦‚ä½•`å‰ªæ` ä¾èµ–äº ç¡¬å¸çš„`åé¢`ï¼Œç®—å‡ºæœ‰å¤šå°‘å­é—®é¢˜æ¯”è¾ƒå›°éš¾ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±æŒ‰ç…§`æœ€åæƒ…å†µ`æ¥ä¼°è®¡å¤æ‚åº¦ï¼Œ`æœ€åæƒ…å†µ`æ˜¯`å…¨ç”¨é¢é¢ä¸º 1 çš„ç¡¬å¸` 
    - ç±»æ¯” `fib æ•°åˆ—` ï¼Œå¦‚ä½•`å‰ªæ` å°±æ¯”è¾ƒæ–¹ä¾¿ï¼Œ å³ `fib(n-1) + fib(n-2)` , Â å¯å‚è€ƒ [æ–æ³¢é‚£å¥‘æ•°åˆ—](https://www.yuque.com/liguwe/agorithms/lqm69gi8zhp789mf) é‡Œçš„ `é€’å½’æ ‘`
+ å‡è®¾ç›®æ ‡é‡‘é¢ä¸º `n`ï¼Œç»™å®šçš„ç¡¬å¸ä¸ªæ•°ä¸º `k`ï¼Œé‚£ä¹ˆ`é€’å½’æ ‘`æœ€åæƒ…å†µä¸‹é«˜åº¦ä¸º `n`ï¼ˆå…¨ç”¨é¢é¢ä¸º 1 çš„ç¡¬å¸ï¼‰ å³ `æœ€ç»ˆé€’å½’å®Œæˆéœ€è¦åˆ°æ ‘çš„æœ€åº•éƒ¨`ï¼Œ ç„¶åå†å‡è®¾è¿™æ˜¯ ä¸€æ£µæ»¡kå‰æ ‘ ï¼Œåˆ™èŠ‚ç‚¹çš„æ€»æ•°åœ¨ `k^n` è¿™ä¸ªæ•°é‡çº§ã€‚
+ æ¥ä¸‹æ¥çœ‹`æ¯ä¸ªå­é—®é¢˜çš„å¤æ‚åº¦`ï¼Œç”±äºæ¯æ¬¡é€’å½’åŒ…å«ä¸€ä¸ª for å¾ªç¯ï¼Œå¤æ‚åº¦ä¸º `O(k)`ï¼Œç›¸ä¹˜å¾—åˆ°æ€»æ—¶é—´å¤æ‚åº¦ä¸º `O(k*k^n) ===> O(k^n)`

ç®€å•æ€»ç»“å°±æ˜¯ï¼š `å¤æ‚åº¦ç­‰äºå­é—®é¢˜ä¸ªæ•° * æ¯ä¸ªå­é—®é¢˜çš„å¤æ‚åº¦`  
æ‰€ä»¥ï¼Œå› ä¸ºè¿™ä¸ªé—®é¢˜çš„`å­é—®é¢˜ä¸ªæ•°`å°±æ˜¯`æŒ‡æ•°çº§åˆ«`ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯æŒ‡æ•°çº§åˆ«çš„å¤æ‚åº¦

>  å…¶å®ï¼ŒçŸ¥é“`æ¨¡æ¿ä»£ç `åï¼Œåªéœ€è¦é€‰ `çŠ¶æ€` ä¸ `é€‰æ‹©`

## 6. è‡ªé¡¶å‘ä¸‹çš„`é€’å½’`è§£æ³•ï¼šå¸¦å¤‡å¿˜å½•

### 6.1. å…·ä½“ä»£ç å®ç°

```javascript hl:11
// å…·ä½“å®ç°
function fn(coins, amount) {
    const memo = new Array(amount+1).fill(-999);
    function dp(coins, amount) {
        // :::: base case
        if (amount === 0) return 0;
        if (amount < 0) return -1;
        // ::::å·²ç»è¢«å­˜å‚¨è¿‡äº†ï¼Œå°±æ”¾åœ¨è¿™å„¿
        if (memo[amount] !== -999) return memo[amount];
        // ::::resä¸ºæœ€ç»ˆè¿”å›çš„ç»“æœï¼Œå³æœ€å°‘å‡ æšç¡¬å¸
        let res = Infinity;
        for (let coin of coins) {
            let subProblem = dp(coins, amount - coin);
            if (subProblem === -1) continue;
            res = Math.min(res, subProblem + 1);
        }
        memo[amount] = (res === Infinity ? -1 : res);
        return memo[amount];
    }
    return dp(coins, amount);
}

console.log(fn([1, 2, 5], 10));  // 2
console.log(fn([1, 24, 100], 200));  //  2
console.log(fn([5, 10, 20, 50], 201)); // -1
```

### 6.2. å¤æ‚åº¦åˆ†æ

å¾ˆæ˜¾ç„¶ã€Œå¤‡å¿˜å½•ã€å¤§å¤§å‡å°äº†`å­é—®é¢˜æ•°ç›®`ï¼Œå®Œå…¨æ¶ˆé™¤äº†`å­é—®é¢˜çš„å†—ä½™`ï¼Œæ‰€ä»¥å­é—®é¢˜æ€»æ•°ä¸ä¼šè¶…è¿‡é‡‘é¢æ•° `n`ï¼Œå³å­é—®é¢˜æ•°ç›®ä¸º `O(n)`ã€‚å¤„ç†ä¸€ä¸ªå­é—®é¢˜çš„æ—¶é—´ä¸å˜ï¼Œä»æ˜¯ `O(k)`ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(kn)`

## 7. è‡ªåº•å‘ä¸Šçš„ `dpæ•°ç»„` çš„è¿­ä»£è§£æ³•

+ `dp å‡½æ•°` ä½“ç°åœ¨ `å‡½æ•°å‚æ•°`
+ `dp æ•°ç»„` ä½“ç°åœ¨ `æ•°ç»„ç´¢å¼•`

### 7.1. æ˜ç¡® `dp æ•°ç»„`çš„å®šä¹‰

å½“ç›®æ ‡é‡‘é¢ä¸º `i` æ—¶ï¼Œè‡³å°‘éœ€è¦ `dp[i]` æšç¡¬å¸å‡‘å‡º

### 7.2. æ¨¡æ¿ä»£ç 

```javascript
# è‡ªåº•å‘ä¸Šè¿­ä»£çš„åŠ¨æ€è§„åˆ’

# åˆå§‹åŒ– base case
dp[0][0][...] = base case

# è¿›è¡ŒçŠ¶æ€è½¬ç§»
for çŠ¶æ€1 in çŠ¶æ€1çš„æ‰€æœ‰å–å€¼ï¼š
    for çŠ¶æ€2 in çŠ¶æ€2çš„æ‰€æœ‰å–å€¼ï¼š
        for ...
            dp[çŠ¶æ€1][çŠ¶æ€2][...] = æ±‚æœ€å€¼(é€‰æ‹©1ï¼Œé€‰æ‹©2...)
```

### 7.3. å…·ä½“ä»£ç 

```javascript hl:22,30
/**
 * @description æœ€å°ç¡¬å¸æ•°
 * @url https://leetcode-cn.com/problems/coin-change/
 * */
/**
 * @param {number[]} coins
 * @param {number} amount
 * @return {number}
 */
var coinChange = function(coins, amount) {

    // ::::åˆå§‹åŒ– dp æ•°ç»„
    // ::::dp[i] ä»£è¡¨éœ€è¦æ‰¾é›¶é‡‘é¢ä¸º i æ—¶ï¼Œéœ€è¦æœ€å°çš„ç¡¬å¸æ•°
    const dp = [];
    for (let i = 0; i <= amount; i++) {
        dp[i] = Infinity;
    }

    // ::::base case
    dp[0] = 0;

    // ::::æ ¹æ®çŠ¶æ€ä¸ªæ•°ï¼Œå†³å®šåµŒå¥—å±‚æ•°ï¼Œ
    // ::::è¿™é‡Œçš„çŠ¶æ€ä¸ªæ•°æ˜¯é‡‘é¢æ•°ï¼Œæ‰€ä»¥æ˜¯ amount
    for (let i = 0; i <= amount; i++) {
        // :::: é€‰æ‹©ï¼šå»éå†æ‰€æœ‰çš„ç¡¬å¸ï¼Œç„¶ååšé€‰æ‹©
        for (let coin of coins) {
            // ::::é€‰æ‹©çš„ç¡¬å¸é‡‘é¢ä¸º coin, è€Œéœ€è¦æ‰¾é›¶é‡‘é¢ä¸º i ï¼Œæ‰€ä»¥ i - coin ä»£è¡¨å‰©ä½™é‡‘é¢

            // ::::å¦‚æœå‰©ä½™é‡‘é¢å°äº0ï¼Œè¯´æ˜è¿™ä¸ªç¡¬å¸ä¸èƒ½ç”¨,ç»§ç»­
            if (i - coin < 0) continue;

            // è¯´æ˜è¿™ä¸ªç¡¬å¸å¯ä»¥ç”¨ï¼Œæ‰€ä»¥éœ€è¦æ‰¾é›¶é‡‘é¢ä¸º i æ—¶ï¼Œéœ€è¦æœ€å°çš„ç¡¬å¸æ•°ä¸º 1 + dp[i - coin]
            // æ‰€ä»¥æœ€ç»ˆéœ€è¦å–æœ€å°å€¼ï¼Œæ‰€ä»¥æ˜¯ Math.min(dp[i], 1 + dp[i - coin])
            dp[i] = Math.min(dp[i], 1 + dp[i - coin]);
        }
    }


    // :::::è¿”å›ç»“æœ
    return dp[amount] === Infinity ? -1 : dp[amount];
};

```

### 7.4. å¤æ‚åº¦åˆ†æ

+ æ—¶é—´å¤æ‚åº¦çœ‹`å‡ å±‚éå†`ï¼Œ æ‰€ä»¥æ˜¯ Â `O(kn)`ï¼ˆå‡è®¾ `k` ä¸º ç¡¬å¸æ•°ï¼Œ`n` ä¸ºæ‰¾é›¶å¤šå°‘é’±ï¼‰
+ ç©ºé—´å¤æ‚åº¦ `O(n)`

## 8. æ€»ç»“

+ åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œå°±ä¸¤ç§è§£å†³æ€è·¯
    - `dp é€’å½’å‡½æ•° - å¤‡å¿˜å½•`	
    - `dp æ•°ç»„è¿­ä»£
+  åœ¨è¿½æ±‚â€œ`å¦‚ä½•èªæ˜åœ°ç©·ä¸¾`â€ã€‚`ç”¨ç©ºé—´æ¢æ—¶é—´`çš„æ€è·¯ï¼Œæ˜¯é™ä½æ—¶é—´å¤æ‚åº¦çš„ä¸äºŒæ³•é—¨
+ é…åˆ [æ–æ³¢é‚£å¥‘æ•°åˆ—](https://www.yuque.com/liguwe/agorithms/lqm69gi8zhp789mf) å¤šç†è§£ï¼Œå¤šåŠ¨æ‰‹
+ `è‡ªé¡¶å‘ä¸‹`å’Œ`è‡ªåº•å‘ä¸Š` 
    - `è‡ªé¡¶å‘ä¸‹` ï¼Œæœ¬è´¨æ˜¯é€’å½’ï¼Œå³"`é¡¶`"é—®é¢˜ï¼Œæ‹†è§£ä¸º"å­é—®é¢˜" å»è§£å†³ï¼Œå¤æ‚åº¦ä¾èµ–äº `å­é—®é¢˜ä¸ªæ•°`
    - `è‡ªåº•å‘ä¸Š` ï¼Œæœ¬è´¨æ˜¯æ•°ç»„è¿­ä»£ï¼Œå¤æ‚åº¦ä¾èµ–äº`å‡ é‡è¿­ä»£`
+ åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œæ ¸å¿ƒçš„æ˜¯å†™å‡º `æš´åŠ›è§£æ³•` ï¼Œç„¶åæ‰æ˜¯ `ç©ºé—´æ¢æ—¶é—´` çš„ä¼˜åŒ–æ€è·¯

