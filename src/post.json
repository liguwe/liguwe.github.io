{"2eb2f6f5459358b1825d1af5f4f9b1cd":"\n# å‰è¨€\n\n\n\n> ä¸ªäººåšå®¢&æ’­å®¢ã€çŸ¥è¯†åº“ã€ç”µå­ä¹¦ã€å¼€æºä½œå“åˆé›†\n\n\n## ç›®å½•\n<!-- toc -->\n ## ğŸ“• å‰ç«¯ \n\n> è¯¦è§ã€Šå‰ç«¯ã€‹\n\nç»“åˆä»¥å¾€çš„ç¬”è®°ï¼Œåˆ©ç”¨ GPT å·¥å…·ï¼Œæ¢³ç†ä¸ªäººæ‰€çŸ¥é“çš„å…³äºå¤§å‰ç«¯çš„ä¸€åˆ‡ï¼Œä½“ç³»åŒ–å¤§å‰ç«¯æŠ€æœ¯çŸ¥è¯†\n\n## ğŸ“— ç®—æ³•\n\nç»“åˆä»¥å¾€æ•°æ®ç»“æ„ä¸ç®—æ³•ç¬”è®°å’Œ LeetCode åˆ·é¢˜ç¬”è®°ï¼Œåˆ©ç”¨ GPT å·¥å…·ï¼Œä½“ç³»åŒ–æ•°æ®ç»“æ„ä¸ç®—æ³•çŸ¥è¯† \n\n## ğŸ§  AGI\n\n- é€šå¾€ AGI ä¹‹è·¯\n- å¦‚ä½•ä½¿ç”¨ AGI æ¥æ­¦è£…è‡ªå·±ï¼Œå»ºç«‹ AGI çŸ¥è¯†ä½“ç³»\n\n","2d268e4a1df35904b881dc25abac5ead":"\n# æ›´æ–°æ—¥å¿—\n\n`#æ›´æ–°æ—¥å¿—`  `#changelog`  `#ä¸ªäººæ›´æ–°æ—¥å¿—`  `#ä¸ªäººäº§å“åŒ–`  `#ä¸ªäººè¿­ä»£æ—¥å¿—`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 2024-10 \n\n###  2024-10-25 æ˜ŸæœŸäº”\n\n- å‰ç«¯é¢è¯•é¢˜ç›¸å…³\n\t-  [1.  å¸¸è§é¢è¯•é¢˜ä¸€](/post/be60ea0d4e295634b6a911cfdf0ab8e5.html)\n\t- [2. å¸¸è§é¢è¯•é¢˜äºŒ](/post/9422d96feaf353ac972b49e37dd3f1eb.html)\n\t- [3. å¸¸è§é¢è¯•é¢˜ä¸‰](/post/d574a7d46ec85579858a99f880a8064b.html)\n\t- [4. å¸¸è§é¢è¯•é¢˜å››](/post/1093cf1c5d02559986afbf6a24b9a36e.html)\n\t- [5. JavaScript å¯¹è±¡](/post/3fa46ad951945172839034a2279d2dcf.html)\n\t- [6. å¼‚æ­¥ç¼–ç¨‹](/post/0f16e63d7fbc53dcb8b0c58293099f11.html)\n\t- [7. æ¸²æŸ“ã€æ€§èƒ½ã€ç½‘ç»œ](/post/f5c1b385a49c5336b17d8f1e570cfe0a.html)\n\t- [1. Nodejs ç¯‡ï¼ˆç¯‡ä¸€ï¼‰](/post/eb26d0d3bd8e538ea252230895d96328.html)\n\t- [10. å‰ç«¯å·¥ç¨‹åŠæ¶æ„ï¼ˆç¯‡ä¸€ï¼‰](/post/58a22f48143d5a22af28addc7c5ab8bc.html)\n\t- [6.  React åŸç†ç¯‡ï¼ˆä¸€ï¼‰](/post/f083a7fafd2f5b58adefd5d4ccabc56a.html)\n\t- [13. é¢è¯•é¢˜](/post/2a7025614abe56c5b8b5a181dfa2a7ad.html)\n\n###  2024-10-23 æ˜ŸæœŸä¸‰\n\n- æ›´æ–°å›¾åºŠè‡³è…¾è®¯cosï¼Œä¸åœ¨æœ¬åœ°ç»´æŠ¤\n\n## 2024-09\n\n###  2024-09-22 æ˜ŸæœŸæ—¥\n\n- ç®—æ³•\n\t- æ•°æ®ç»“æ„ç¯‡\n\t\t- æ•°ç»„ä¸é“¾è¡¨ç¯‡ï¼Œå®Œç»“ï¼Œè¯¦è§ [0. æ•°ç»„ä¸é“¾è¡¨](/post/df4743711d965511b921e51805fabd48.html)\n\t\t- æ ˆä¸åˆ—é˜Ÿç¯‡ï¼Œå®Œç»“ï¼Œè¯¦è§ [0. æ ˆä¸åˆ—é˜Ÿ](/post/14c2c57868e25214afc9c2147322197b.html)\n\t\t- å“ˆå¸Œè¡¨ç¯‡ï¼Œå®Œç»“ï¼Œè¯¦è§ [0. å“ˆå¸Œè¡¨](/post/9bd905d134c354a981178fbf43a7dded.html)\n\t\t- æ ‘å½¢ç»“æ„ç¯‡ï¼Œè¯¦è§  [0. æ ‘çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µ](/post/91a3a0af8968555c922316c1697a4df0.html)\n\n\n###  2024-09-19 æ˜ŸæœŸå››\n\n- ç®—æ³•\n\t- [1.  æ•°ç»„ï¼šPython æè¿°](/post/d64d83c1d19d542ca411b9a392b996d2.html)\n\n###  2024-09-18 æ˜ŸæœŸä¸‰\n\n- [x] ç®—æ³•\n\t- [x] [1. å›¾çš„åŸºæœ¬æ¦‚å¿µ](/post/1264de7ecdfb5513a750e7879af106ff.html)\n\t- [x] [1.  äºŒå‰å †](/post/70d073a14810524b8e2c7a1849917b08.html)\n\t- [x] [3.  æ•°æ®ç»“æ„ä¸­çš„å †å’Œå†…å­˜ä¸­çš„å †çš„åŒºåˆ«](/post/0302e0a977705c9a9b616657b8063252.html)\n\t- [x] [4. å †å†…å­˜å’Œæ ˆå†…å­˜çš„åŒºåˆ«](/post/0d52eb9c7a155308a47b8bc69d3c8384.html)\n\n### 2024-09-17 æ˜ŸæœŸäºŒ\n\n- [x] ç®—æ³•\n\t- [x] [2. å¿«é€Ÿæ’åºç®—æ³•çš„åŸç†åŠè¿ç”¨](/post/4f1cdfa1d77955d0b54e550ef8b7546c.html)\n\t- [x] [49.  æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ ](/post/ff7cf9f1bcb05b18a46ae85421076f31.html)\n- [x] è®¡ç®—æœºç§‘å­¦\n\t- [x] [2. Python å‡½æ•°ä¸æ¨¡å—](/post/e0abc9a5b128589a95b1da5a9c72fafb.html)\n\t- [x] [3. Python ç±»](/post/b35fb3cd5f3c535bb191db5687c23d92.html)\n\t- [x] [4. Python æ–‡ä»¶ä¸å¼‚å¸¸å¤„ç†](/post/27114d670b6e57f880be232ceac34467.html)\n### 2024-09-16 æ˜ŸæœŸä¸€\n\n- [x] AGI\n\t- [ ] [41. LangChain æ¦‚è¿°](/post/904d3675c6b55528acd9dcb0baf833d0.html)\n- [x] ç®—æ³•\n\t- [x] [47.  è¿·å®«ä¸­ç¦»å…¥å£æœ€è¿‘çš„å‡ºå£](/post/e388bed47b275ede90a1f96e90fdd915.html)\n\t- [x] [48.  è…çƒ‚çš„æ©˜å­](/post/ec545669d5525fc0acaaa8c8250706c5.html)\n\t- [ ] [2. å¿«é€Ÿæ’åºç®—æ³•çš„åŸç†åŠè¿ç”¨](/post/4f1cdfa1d77955d0b54e550ef8b7546c.html)\n- [x] å‰ç«¯\n\t- [x] [4. JavaScript å¼‚æ­¥ç¼–ç¨‹](/post/f162d2d3d4b15dc1b068617c3c05c4a3.html)\n- [x] è®¡ç®—æœºç§‘å­¦\n\t- [x] [1.  Python è¯­è¨€åŸºç¡€](/post/f243cdf92657516ea7bb60c541b3eb61.html)\n\n### 2024-09-15 æ˜ŸæœŸæ—¥\n\n- [ ] AGI\n- [x] ç®—æ³•\n\t- [x] [2. å›¾çš„å®ç°ï¼šJavaScript æè¿°](/post/35d0db45e9795e11a5e99a3b161dd68c.html)\n\t- [x] [3. å›¾çš„ä¸¤ç§éå†æ–¹å¼ï¼šDFS å’Œ BFS](/post/33128d40026658129416f6541f206235.html)\n- [x] å‰ç«¯\n\t- [ ] [4. JavaScript å¼‚æ­¥ç¼–ç¨‹](/post/f162d2d3d4b15dc1b068617c3c05c4a3.html)\n\n\n\n### 2024-09-14 æ˜ŸæœŸå…­\n\n- [x] AGI\n\t- [ ] [41. LangChain æ¦‚è¿°](/post/904d3675c6b55528acd9dcb0baf833d0.html)  \n- [x] ç®—æ³•\n\t- [x] [46.  é™¤æ³•æ±‚å€¼](/post/877c02d41b9f5467b73e927c0198c0e8.html) \n- [x] å‰ç«¯\n\t- [ ] [4. JavaScript å¼‚æ­¥ç¼–ç¨‹](/post/f162d2d3d4b15dc1b068617c3c05c4a3.html)\n\n### 2024-09-13 æ˜ŸæœŸäº”\n\n- [x] AGI\n\t- [x] [41. LangChain æ¦‚è¿°](/post/904d3675c6b55528acd9dcb0baf833d0.html)\n- [x] ç®—æ³•\n\t- [x] [45. é‡æ–°è§„åˆ’è·¯çº¿](/post/984c5a27d97d5fe9ac42c809244eeac3.html)\n\n### 2024-09-12 æ˜ŸæœŸå››\n\n- [x] ç®—æ³•\n\t- [x] [44. çœä»½æ•°é‡](/post/42b33a20f6655548a6eaba60e8b57896.html)\n- [x] å‰ç«¯\n\t- [ ] [4. JavaScript å¼‚æ­¥ç¼–ç¨‹](/post/f162d2d3d4b15dc1b068617c3c05c4a3.html)\n\n\n### 2024-09-11 æ˜ŸæœŸä¸‰\n\n- [x] ç®—æ³•\n\t- [x] [43. é’¥åŒ™å’Œæˆ¿é—´](/post/af8c8fabafb754e68e0ee1172b3d61c0.html)\n- [x] å‰ç«¯\n\t- [ ] [4. JavaScript å¼‚æ­¥ç¼–ç¨‹](/post/f162d2d3d4b15dc1b068617c3c05c4a3.html)\n\n\n### 2024-09-10 æ˜ŸæœŸäºŒ\n\n- ç®—æ³•\n\t- [5.  äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡å››ï¼šBST çš„ååºä½ç½®ï¼‰](/post/053994e32b075cb3b23b2a61f000c1a5.html)\n\n\n### 2024-09-09 æ˜ŸæœŸä¸€\n\n- 832 ä¹‹ä¹¦\n\t- æ›´æ–°ç›®å½•ç»“æ„ï¼Œæ·»åŠ ã€ŠæœˆæŠ¥å·ã€‹å’Œåšå®¢&åšå®¢å·\n\t- æ·»åŠ ç›®å½•ç« èŠ‚\n\n### 2024-09-08 æ˜ŸæœŸæ—¥\n\n- AGI\n\t- [3. å¤§æ¨¡å‹æ˜¯å¦‚ä½•è®­ç»ƒçš„ï¼Ÿ](/post/0c13957ba5d45456a0ebdd1cdbdd68cd.html)\n\t- [40.  LangChainï¼ˆç¯‡ä¸€ï¼šåŸºç¡€å…¥é—¨ç¯‡ï¼‰](/post/1c6cfe60763157ff950d8b3f82fcf888.html)\n- ç®—æ³•\n\t- [39.  äºŒå‰æ ‘çš„å³è§†å›¾](/post/f5e8bf7bcd9e5642a7a11cbc55f899d8.html)\n\t- [41.  äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢](/post/2ba99692d39d5826917c9e111304995b.html)\n\t- [42.  åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹](/post/e8306a02939e56668f4a2ff731644bb7.html)\n\t- [40. æœ€å¤§å±‚å†…å…ƒç´ å’Œ](/post/fb501e5156955ab48e493fa08c12e25d.html)\n\t- [2. äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡ä¸€ï¼šäºŒå‰æ ‘çš„ç‰¹æ€§ï¼‰](/post/8b375e37b5b654c48fdd006d0e0b42cd.html)\n\t- [3. äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡äºŒï¼šBST çš„å¢åˆ æ”¹æŸ¥ï¼‰](/post/eb2a51163c135d64bfeb5db226109f57.html)\n\t- [4. äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡ä¸‰ï¼šBST çš„æ„é€ ï¼‰](/post/31a97da95819505698744295d29ad425.html)\n\n### 2024-09-07 æ˜ŸæœŸå…­\n\n- AGI\n\t- [1. chatGPT æ˜¯ä»€ä¹ˆï¼ˆç¯‡ä¸€ï¼‰](/post/7cc8aba4d1985027a7c915ac90a6a0da.html)\n\t- [2. chatGPT æ˜¯ä»€ä¹ˆï¼ˆç¯‡äºŒï¼‰](/post/f6bce78ff73058a3b4068acfdbccaed0.html)\n- ç®—æ³•\n\t- [1. ä¸€ä¸ªæ–¹æ³•ç§’æ€ 5 é“æœ€è¿‘å…¬å…±ç¥–å…ˆé—®é¢˜](/post/f4571bccb6165932a501e4d651e48308.html)\n\t- [38.  äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](/post/a37074a6675e5902b04c6ac20990ee78.html)\n\n### 2024-09-06 æ˜ŸæœŸäº”\n\n- ç®—æ³•\n\t- [37.  äºŒå‰æ ‘ä¸­çš„æœ€é•¿äº¤é”™è·¯å¾„](/post/4b0c5cc1bb4b5b6cbd74604b99406f3a.html)\n\n## 2024-08\n\n### 2024-08-26 æ˜ŸæœŸä¸€\n\n- ç®—æ³•\n\t- [16.  çŸ©é˜µç½®é›¶](/post/17f7cf806e895e5cb22de7736161bb1f.html)\n\n### 2024-08-25 æ˜ŸæœŸæ—¥\n\n- AGI\n\t- æ›´æ–° AGI çŸ¥è¯†åº“ç›®å½•\n\t- [30.  Agent æ˜¯ä»€ä¹ˆï¼Ÿ](/post/495d2cf04314531380177f37eecfbdee.html)\n\t- [31.  Agent å·¥ç¨‹æ¶æ„å›¾](/post/1f7b1803199a51ffab7b54cfd99eb5cf.html)\n\t- [33. Agent çš„è¿›åŒ–ä¹‹è·¯](/post/53c17c0fc3f25d6999aca637219b5e53.html)\n- ç®—æ³•\n\t- [15.  ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°](/post/1f0a1c02064d5934a0a796e73759b1e6.html)\n\t- [14.  é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯](/post/f502e5dda0145ba893e47ed8c5df69da.html)\n\t- [13. è½®è½¬æ•°ç»„](/post/cc3465a6ef9c576c979ded33cd91a4d8.html)\n\n### 2024-08-19 æ˜ŸæœŸä¸€\n\n- ç®—æ³•\n\t- leetcode 1 é¢˜ï¼šH æŒ‡æ•°\n\t- leetcode 2 é¢˜ï¼šå¸¸æ•°æ—¶é—´åˆ é™¤ã€æŸ¥æ‰¾æ•°ç»„ä¸­çš„ä»»æ„å…ƒç´ \n- å‰ç«¯\n### 2024-08-18 æ˜ŸæœŸæ—¥\n\n- ç®—æ³•\n\t- leetcode 1 é¢˜ï¼šæœ€å¤§å­æ•°ç»„å’Œ\n\t- leetcode 3 é¢˜ï¼š åŒºé—´ç›¸å…³çš„æ‰€æœ‰é—®é¢˜\n- å‰ç«¯\n\t- æ›´æ–°å‰ç«¯ vue åŸºç¡€ç« èŠ‚\n\n### 2024-08-17 æ˜ŸæœŸå…­\n\n- ç®—æ³•\n\t- leetcode åˆ·é¢˜ç¬”è®°\n- å‰ç«¯\n\t- å‰ç«¯ vue3 åŸç†ç¯‡ç« èŠ‚æ›´æ–°\n\n### 2024-08-11 æ˜ŸæœŸæ—¥\n\n- ç®—æ³•\n\t- ç®—æ³•ï¼šå•è°ƒåˆ—é˜Ÿ\n\t- leetcode åˆ·é¢˜\n\t- ç›®å½•ç»“æ„æ•´ç†\n- å‰ç«¯\n\t- ç›®å½•ç»“æ„æ•´ç†\n\n### 2024-08-10 æ˜ŸæœŸå…­\n\n- ç®—æ³•\n\t- leetcode 5 é¢˜\n- å‰ç«¯\n\t- æ·»åŠ å‰ç«¯æ¡†æ¶åŸç†ç¯‡\n\n### 2024-08-07 æ˜ŸæœŸä¸‰\n\n- ç®—æ³•\n\t- leetcode 1 é¢˜\n\n### 2024-08-05 æ˜ŸæœŸä¸€\n\n- ç®—æ³•\n\t- leetcode 2 é¢˜\n\n## 2024-07\n\n### 2024-07-31 æ˜ŸæœŸä¸‰\n\n- ç®—æ³•\n\t- ã€ŠLeetCode çƒ­é¢˜ 100 é¢˜ã€‹2 é¢˜\n\n### 2024-07-30 æ˜ŸæœŸäºŒ\n\n- ç®—æ³•\n\t- leetcode 75 2 é¢˜\n- å‰ç«¯\n\t- è½¬ç§»åˆ° obsidian ä¸Šå†™ä½œ\n\t- æ›´æ–°ç›®å½•ï¼Œå†…å®¹æ ¼å¼æ•´ç†\n\n### 2024-07-28 å‘¨å¤©\n\n- ç®—æ³•\n\t- æ•´åˆä¹‹å‰çš„å†…å®¹\n\n### 2024-07-17 å‘¨ä¸‰\n\n- å‰ç«¯\n\t-  å°†ç°ä»£ Web æŠ€æœ¯æ¦‚è¿°ã€ HTMLã€CSS ä¸‰ä¸ªç« èŠ‚æ”¹æˆé—®ç­”çš„å½¢å¼\n\n### 2024-07-16 å‘¨äºŒ\n\n- å‰ç«¯\n\t- å‘ç°è¿˜æ˜¯éœ€è¦èšç„¦ä¸€äº›ï¼Œå€ŸåŠ© AIï¼Œé€šè¿‡é—®ç­”çš„æ–¹å¼å±•å¼€æ­¤ä¹¦\n\t- ä¹Ÿå¾—ç›Šäºæ’­å®¢çš„ä¸€äº›å¯å‘ï¼Œæƒ³é€šè¿‡ AI çš„æ–¹å¼å±•å¼€æ­¤ä¹¦\n\n### 2024-07-14 å‘¨å¤©\n\n- å‰ç«¯\n\t- [ ] ~~HTML ç« èŠ‚å®Œæˆ~~\n\t- [ ] ~~CSS ç« èŠ‚å®Œæˆ~~\n\t- [ ] ~~Javascript ç« èŠ‚å®Œæˆ~~\n\t- [ ] ~~Typescript ç« èŠ‚å®Œæˆ~~\n\t- [ ] ~~æ•´åˆä¹‹å‰æ•´ç†çš„é¢è¯•é¢˜ç¬”è®°~~\n\n### 2024-07-12 å‘¨äº”\n\n- å‰ç«¯\n\t- Javascript å¤§çº²æ•´ç†å¥½\n\n### 2024-07-11 å‘¨å››\n\n- å‰ç«¯\n\t- [x] æ·»åŠ  HTML ç« èŠ‚\n\t- [x] æ·»åŠ  CSS ç« èŠ‚\n\n### 2024-07-10 å‘¨ä¸‰\n\n- å‰ç«¯\n\t- [x] æ·»åŠ ç°ä»£ Web æŠ€æœ¯æ¦‚è¿°ç« èŠ‚\n\n### 2024-07-07 å‘¨å¤©\n\n- å‰ç«¯\n\t- [x] ä¹¦ç±ç›®å½•å¤§çº²æ¢³ç†\n\t- [x] æ­å»ºç”µå­ä¹¦ç«™ç‚¹ã€æµæ°´çº¿å®Œæˆ\n- ç®—æ³•\n\t- ä¹¦ç±ç›®å½•å¤§çº²æ¢³ç†\n\t- æ­å»ºç”µå­ä¹¦ç«™ç‚¹ã€æµæ°´çº¿å®Œæˆ\n","923eccb881c559c98e2fa78fcd663636":"\n# ç›®å½•\n\n\n- AGI\n\t- [5. AGI/3. Agent ç¯‡/0. å‰è¨€|Agent ç¯‡](/post/923eccb881c559c98e2fa78fcd663636.html#5-AGI/3-Agent-ç¯‡/0-å‰è¨€|Agent-ç¯‡)\n- å‰ç«¯\n\t- [6. å‰ç«¯/2. å‰ç«¯æ¡†æ¶ç¯‡/1. å‰ç«¯æ¡†æ¶åŸç†ç¯‡/0. å‰ç«¯æ¡†æ¶åŸç†ç¯‡|0. å‰ç«¯æ¡†æ¶åŸç†ç¯‡](/post/923eccb881c559c98e2fa78fcd663636.html#6-å‰ç«¯/2-å‰ç«¯æ¡†æ¶ç¯‡/1-å‰ç«¯æ¡†æ¶åŸç†ç¯‡/0-å‰ç«¯æ¡†æ¶åŸç†ç¯‡|0-å‰ç«¯æ¡†æ¶åŸç†ç¯‡)\n- ç®—æ³•\n\t- [7. ç®—æ³•/10. æ•°æ®ç»“æ„ç¯‡/0. æ•°æ®ç»“æ„ç¯‡|0. æ•°æ®ç»“æ„ç¯‡](/post/923eccb881c559c98e2fa78fcd663636.html#7-ç®—æ³•/10-æ•°æ®ç»“æ„ç¯‡/0-æ•°æ®ç»“æ„ç¯‡|0-æ•°æ®ç»“æ„ç¯‡)","bd6d40a5791d56f980e1a862975f08cb":"\n# Python ç¼–ç¨‹è¯­è¨€\n\n\n`#python` \n\n- [1.  Python è¯­è¨€åŸºç¡€](/post/f243cdf92657516ea7bb60c541b3eb61.html)\n- [2. Python å‡½æ•°ä¸æ¨¡å—](/post/e0abc9a5b128589a95b1da5a9c72fafb.html)\n- [3. Python ç±»](/post/b35fb3cd5f3c535bb191db5687c23d92.html)\n- [4. Python æ–‡ä»¶ä¸å¼‚å¸¸å¤„ç†](/post/27114d670b6e57f880be232ceac34467.html)\n\n","f243cdf92657516ea7bb60c541b3eb61":"\n# Python è¯­è¨€åŸºç¡€\n\n`#python`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å˜é‡ã€å­—ç¬¦ã€æ•°å­—ã€æ³¨é‡Š \n\n```python\n############################################\n####### å­—ç¬¦ä¸²çš„å¸¸ç”¨æ–¹æ³•\n################# ##########################\nname = \"hello world\";\n# æ³¨æ„ï¼šé¦–å­—æ¯å¤§å†™\nprint(name.title()); # Hello World\nprint(name.upper()); # HELLO WORLD\nprint(name.lower()); # hello world\n\n############################################\n####### f çš„ç”¨æ³•\n################# ##########################\nfirstName = \"ada\";\nlastName = \"lovelace\";\n# fä»£è¡¨formatï¼Œå°†å˜é‡çš„å€¼æ’å…¥åˆ°å­—ç¬¦ä¸²ä¸­\nfullName = f\"{firstName} {lastName}\";\nfullName2 = f\"{firstName.upper()} {lastName.title()}\";\nprint(fullName); # ada lovelace\nprint(fullName2); # ADA Lovelace\n\n\n############################################\n####### æ‰“å°æ¢è¡Œã€åˆ¶è¡¨ç¬¦ç­‰\n############################################\nprint(\"Languages:\\n\\tPython\\n\\tC\\n\\tJavaScript\")\n\n\n############################################\n####### åˆ é™¤ç©ºç™½\n############################################\nfavorite_language = ' python ';\nprint(favorite_language); # ' python '\nprint(favorite_language.rstrip()); # ' python'\nprint(favorite_language.lstrip()); # 'python '\nprint(favorite_language.strip()); # 'python'\n\n\n############################################\n########  åˆ é™¤å‰ç¼€å’Œåç¼€\n############################################\nurl = \"https://www.baidu.com\";\nprint(url.removeprefix('https://')) # 'www.baidu.com'\nprint(url.removesuffix('.com')) # 'https://www.baidu'\n\n############################################\n########  ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”æ•°å­—\n############################################\nlargeNum = 14_000_000_000;\nlargeNum1 = 14_00_0_000_0_00;\nprint(largeNum); # 14000000000\nprint(largeNum1); # 14000000000\n\n############################################\n########  å¤šä¸ªèµ‹å€¼\n############################################\nx, y, z = 0, 0, 0;\n\n\n############################################\n########  å¸¸é‡\n############################################\nMAX_NUM = 1000;\n\n\n############################################\n########  æ³¨é‡Š\n############################################\n# This is a comment\n# This is another comment\n# å¤šè¡Œæ³¨é‡Š\n\n\"\"\"\nè¿™æ˜¯å¤šè¡Œæ³¨é‡Š 1\nè¿™æ˜¯å¤šè¡Œæ³¨é‡Š 2\nè¿™æ˜¯å¤šè¡Œæ³¨é‡Š 3\n\"\"\"\n\n'''\nè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¤šè¡Œæ³¨é‡Šã€‚\nåŒæ ·å¯ä»¥è·¨è¶Šå¤šè¡Œã€‚\n'''\n\n\ndef greet(name):\n    \"\"\"\n    è¿™ä¸ªå‡½æ•°ç”¨äºæ‰“æ‹›å‘¼ã€‚\n    å‚æ•°:\n    name (str): è¦é—®å€™çš„äººçš„åå­—\n    è¿”å›:\n    str: åŒ…å«é—®å€™è¯­çš„å­—ç¬¦ä¸²\n    \"\"\"\n    return f\"Hello, {name}!\"\n\n```\n\n## 2. åˆ—è¡¨ã€rangeã€å…ƒç»„\n\n```python\n############################################\n####### åˆ—è¡¨çš„åŸºæœ¬æ“ä½œ\n###########################################\n\narr = [1, 2, 3, 4, 5];\nprint(arr); # [1, 2, 3, 4, 5]\nprint(len(arr)) # 5, è·å–åˆ—è¡¨é•¿åº¦\n\n# åˆ—è¡¨çš„ä¿®æ”¹\n# ä¿®æ”¹ç´¢å¼• 2 çš„å…ƒç´ \narr[2] = 3;\n\n# åˆ—è¡¨çš„è¿½åŠ \narr.append(6);\n\n# pop æ–¹æ³•ç”¨äºåˆ é™¤åˆ—è¡¨ä¸­çš„å…ƒç´ \narr.pop(); # åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ \narr.pop(0); # åˆ é™¤ç´¢å¼• 0 çš„å…ƒç´ \n\n# remove æ–¹æ³•ç”¨äºåˆ é™¤åˆ—è¡¨ä¸­çš„å…ƒç´ \narr.remove(2);\n\n# åˆ—è¡¨çš„æ’å…¥\n# åœ¨ç´¢å¼• 2 çš„ä½ç½®æ’å…¥ 7\narr.insert(2, 7);\n\n# åˆ—è¡¨çš„åˆ é™¤\n# åˆ é™¤ç´¢å¼• 2 çš„å…ƒç´ \ndel arr[2];\n\n# åˆ—è¡¨çš„æ›´æ–°\n# æ›´æ–°ç´¢å¼• 2 çš„å…ƒç´ \narr[2] = 8;\n\n# åˆ—è¡¨çš„æ‹¼æ¥\narr2 = [9, 10, 11];\narr3 = arr + arr2;\n\n############################################\n####### åˆ—è¡¨çš„æ’åºã€åè½¬\n###########################################\n\n# åˆ—è¡¨çš„æ°¸ä¹…æ’åº\narr.sort() # é»˜è®¤å‡åº\narr.sort(reverse=True); # å‡åº\narr.sort(reverse=False) # é™åº\n\n# åˆ—è¡¨çš„ä¸´æ—¶æ’åº\nsorted(arr); # é»˜è®¤å‡åº\n\n# åˆ—è¡¨çš„åè½¬\narr.reverse();\n\n############################################\n####### åˆ—è¡¨çš„éå†\n###########################################\n\n# åˆ—è¡¨çš„éå†\nfor i in arr:\n    print(i);\n\n############################################\n####### range å‡½æ•°\n###########################################\nfor i in range(0, 10):\n    print(i);\n\n# ä½¿ç”¨ list å‡½æ•°å°† range è½¬æ¢ä¸ºåˆ—è¡¨\nlist1 = list(range(0, 10));\n\n############################################\n####### åˆ—è¡¨çš„ç»Ÿè®¡\n###########################################\n\nmax(arr); # è·å–åˆ—è¡¨ä¸­çš„æœ€å¤§å€¼\nmin(arr); # è·å–åˆ—è¡¨ä¸­çš„æœ€å°å€¼\nsum(arr); # è·å–åˆ—è¡¨ä¸­çš„å’Œ\n\n############################################\n####### åˆ—è¡¨çš„æ¨å¯¼å¼\n###########################################\n\nsquares = [value ** 2 for value in range(1, 11)];\n\nprint(squares); # [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]\n\n############################################\n####### åˆ—è¡¨çš„åˆ‡ç‰‡\n###########################################\n# åˆ—è¡¨çš„åˆ‡ç‰‡\narr[0:2]; # è¡¨ç¤ºä»ç´¢å¼• 0 å¼€å§‹ï¼Œåˆ°ç´¢å¼• 2 ç»“æŸï¼Œä½†ä¸åŒ…æ‹¬ç´¢å¼• 2\narr[:2]; # å¦‚æœçœç•¥ç¬¬ä¸€ä¸ªç´¢å¼•ï¼ŒPython å°†ä»åˆ—è¡¨å¼€å¤´å¼€å§‹\narr[2:] # å¦‚æœçœç•¥ç¬¬äºŒä¸ªç´¢å¼•ï¼ŒPython å°†ä»ç¬¬ä¸€ä¸ªç´¢å¼•å¼€å§‹ï¼Œåˆ°åˆ—è¡¨æœ«å°¾ç»“æŸ\n\n############################################\n####### å¤åˆ¶åˆ—è¡¨\n###########################################\n\n# å¤åˆ¶åˆ—è¡¨\n# é€šè¿‡åˆ‡ç‰‡çš„æ–¹å¼å¤åˆ¶åˆ—è¡¨\narr1 = arr[:];\n\narr2 = arr; # è¿™ç§æ–¹å¼ä¸æ˜¯å¤åˆ¶åˆ—è¡¨ï¼Œè€Œæ˜¯å°† arr2 æŒ‡å‘ arr çš„å†…å­˜åœ°å€\n\n############################################\n####### å…ƒç»„\n###########################################\n\n# å…ƒç»„æ˜¯ä¸å¯å˜çš„åˆ—è¡¨\n# å…ƒç»„ä½¿ç”¨åœ†æ‹¬å·\n# å…ƒç»„çš„å…ƒç´ ä¸å¯ä¿®æ”¹\n# å…ƒç»„çš„å…ƒç´ ä¸å¯åˆ é™¤\n# å…ƒç»„çš„å…ƒç´ ä¸å¯æ·»åŠ \ndimestion = (200, 50);\nprint(dimestion[0]);\nprint(dimestion[1]);\n\n# éå†å…ƒç»„\nfor i in dimestion:\n    print(i);\n\n```\n\n## 3. æ¡ä»¶åˆ¤æ–­ã€å¸ƒå°”ã€é€»è¾‘\n\n```python\n############################################\n####### if else statement\n###########################################\n\n# True and False\n# ==, !=, >, <, >=, <=\n# and, or, not\n# if, elif, else è®°å¾—åé¢è¦åŠ å†’å·\n\n```\n\n## 4. å­—å…¸\n\n```python\n############################################\n####### å­—å…¸\n###########################################\n\n# å­—å…¸æ˜¯ä¸€ç§å¯å˜å®¹å™¨æ¨¡å‹ï¼Œä¸”å¯å­˜å‚¨ä»»æ„ç±»å‹å¯¹è±¡ã€‚\nfavorite = {\n    'name': 'zhangsan',\n    'age': 18,\n}\n# åˆ é™¤å­—å…¸ ä½¿ç”¨ delete \n\n# éå†å­—å…¸\nfor key, value in favorite.items():\n    print(key, value)\n\n# éå†å­—å…¸çš„é”®\nfor key in favorite.keys():\n    print(key)\n\n# éå†å­—å…¸çš„å€¼\nfor value in favorite.values():\n    print(value)\n\n# å­—å…¸åµŒå¥—\n# å­—å…¸ä¸­çš„å€¼ä¹Ÿå¯ä»¥æ˜¯å­—å…¸\n# å­—å…¸ä¸­çš„å€¼ä¹Ÿå¯ä»¥æ˜¯åˆ—è¡¨\n# å­—å…¸ä¸­çš„å€¼ä¹Ÿå¯ä»¥æ˜¯å…ƒç»„\n# å­—å…¸ä¸­çš„å€¼ä¹Ÿå¯ä»¥æ˜¯é›†åˆ\n# å­—å…¸ä¸­çš„å€¼ä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²\n# ... ä»»æ„ç±»å‹\n\n```\n\n## 5. ç”¨æˆ·è¾“å…¥\n\n```python\n############################################\n####### ç”¨æˆ·è¾“å…¥\n###########################################\n\n# input()å‡½æ•°æ¥å—ä¸€ä¸ªæ ‡å‡†è¾“å…¥æ•°æ®ï¼Œè¿”å›ä¸º string ç±»å‹ã€‚\n\nmessage = input(\"è¯·è¾“å…¥ä½ è¦ç¿»è¯‘çš„å†…å®¹ï¼š\")\nprint(\"ä½ è¾“å…¥çš„å†…å®¹æ˜¯ï¼š\", message)\n```\n\n## 6. while å¾ªç¯\n\n```python\n############################################\n####### while å¾ªç¯\n###########################################\n\nn = 1;\nwhile n <= 5:\n    n = n + 1\n    print(\"n:\",n)\n\n# è¾“å‡ºç»“æœ: 2 3 4 5 6\n\nprint(\"===========================\");\n\n# ä½¿ç”¨ break è¯­å¥é€€å‡ºå¾ªç¯\n\nm = 1;\nwhile m <= 5:\n    if m == 3:\n        break\n    m += 1\n    print(\"m:\",m)\n\n# ä½¿ç”¨ continue è¯­å¥è·³è¿‡å½“å‰å¾ªç¯ï¼Œç»§ç»­ä¸‹ä¸€æ¬¡å¾ªç¯\n\nj = 1;\nwhile j <= 5:\n    if j == 3:\n        j += 1\n        continue\n    j = j + 1\n\n# ä½¿ç”¨ while ç§»é™¤åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ \narr = [1,2,3,4,5]\nwhile arr: # å½“ arr ä¸ä¸ºç©ºæ—¶, å¾ªç¯ç»§ç»­\n    cur = arr.pop()\n    print(\"cur:\",cur)\n\n# è¾“å‡ºç»“æœ: 5 4 3 2 1\n\n```","e0abc9a5b128589a95b1da5a9c72fafb":"\n# Python å‡½æ•°ä¸æ¨¡å—\n\n`#python` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨ \n\n```python\n############################################\n####### å‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨ ####################\n###########################################\n\n# å‡½æ•°çš„å®šä¹‰\n# def å‡½æ•°å(å‚æ•°åˆ—è¡¨):\n    # å‡½æ•°ä½“\n\n# å®šä¹‰\ndef my_print():\n    print(\"hello world\")\n\n# å‡½æ•°çš„è°ƒç”¨\nmy_print()\n\ndef my_print2(name):\n    print(\"hello\", name)\n\nmy_print2(\"world\")\nmy_print2(name=\"world\")\n\n```\n\n## 2. å‡½æ•°çš„å‚æ•°é»˜è®¤å€¼\n\n```python\n############################################\n####### å‡½æ•°çš„å‚æ•°é»˜è®¤å€¼ ####################\n###########################################\n\n# é»˜è®¤å€¼: å¦‚æœè°ƒç”¨å‡½æ•°æ—¶æ²¡æœ‰ä¼ å…¥å‚æ•°ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨é»˜è®¤å€¼\n# å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æœ‰é»˜è®¤å€¼ï¼Œé‚£ä¹ˆåé¢çš„å‚æ•°ä¹Ÿå¿…é¡»æœ‰é»˜è®¤å€¼\ndef my_print3(name = \"liguwe\", age = 18):\n    print(\"hello\", name, age)\n\n# é»˜è®¤å€¼\n# å¦‚æœè°ƒç”¨å‡½æ•°æ—¶æ²¡æœ‰ä¼ å…¥å‚æ•°ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨é»˜è®¤å€¼\ndef my_print4(name, age = 18):\n    print(\"hello\", name, age)\n```\n\n\n## 3. å‡½æ•°çš„è¿”å›å€¼\n\n\n```python\n############################################\n####### å‡½æ•°çš„è¿”å›å€¼ ####################\n###########################################\n\ndef get_fromatted_name(first_name, last_name):\n    full_name = first_name + \" \" + last_name\n    return full_name.title()\n\nname = get_fromatted_name(\"li\", \"guangwei\") # Li Guangwei\n\n# è¿”å›å­—å…¸\ndef build_person(first_name, last_name, age=None):\n    person = {\n        \"first\": first_name,\n        \"last\": last_name\n    }\n    if age:\n        person[\"age\"] = age\n    return person\n\n```\n\n\n## 4. ä¼ é€’åˆ—è¡¨å‚æ•°\n\n```python\n############################################\n####### ä¼ é€’åˆ—è¡¨ ####################\n###########################################\n\n# ä¼ é€’åˆ—è¡¨\ndef greet_users(names):\n    for name in names:\n        name = name + \"!\"\n        msg = \"hello, \" + name\n        print(msg)\n\nusernames = [\"li\", \"guangwei\", \"zhang\", \"san\"]\n\n# output: hello, li! hello, guangwei! hello, zhang! hello, san!\ngreet_users(usernames)\n\n# ä¼ é€’åˆ—è¡¨,é¿å…ä¿®æ”¹åŸåˆ—è¡¨\nusernames2 = [\"li\", \"guangwei\", \"zhang\", \"san\"]\ngreet_users(usernames2[:])\n```\n\n## 5. ä¼ é€’ä»»æ„æ•°é‡çš„å®å‚\n\n```python\n############################################\n####### ä¼ é€’ä»»æ„æ•°é‡çš„å®å‚ ####################\n###########################################\n\n# ä¼ é€’ä»»æ„æ•°é‡çš„å®å‚\n# *args: ä¼šåˆ›å»ºä¸€ä¸ªå…ƒç»„\n# **kwargs: ä¼šåˆ›å»ºä¸€ä¸ªå­—å…¸\n\ndef make_pizza(*toppings):\n    print(toppings)\n\n# ('pepperoni',)\nmake_pizza(\"pepperoni\");\n# ('mushrooms', 'green peppers', 'extra cheese')\nmake_pizza(\"mushrooms\", \"green peppers\", \"extra cheese\");\n\n# ç»“åˆä½¿ç”¨ã€ä½ç½®å®å‚ã€‘å’Œã€ä»»æ„æ•°é‡å®å‚ã€‘\ndef make_pizza1(size,*toppings):\n    print(size)\n    print(toppings)\n\nmake_pizza1(12, \"pepperoni\");\nmake_pizza1(16, \"mushrooms\", \"green peppers\", \"extra cheese\");\n```\n\n\n## 6. æ¨¡å—\n\n```python\n############################################\n####### å¯¼å…¥æ¨¡å— ####################\n###########################################\n\n# å¯¼å…¥æ¨¡å—\n# import module_name\n\n# å¯¼å…¥æ¨¡å—ï¼Œå¹¶æŒ‡å®šåˆ«å\n# import module_name as mn\n\n# # å¯¼å…¥æ¨¡å—ä¸­çš„æŸä¸ªå‡½æ•°\n# from module_name import function_name\n\n# å¯¼å…¥æ¨¡å—ä¸­çš„å‡½æ•°ï¼Œå¹¶æŒ‡å®šåˆ«å\n# from module_name import function_name as fn\n\n# å¯¼å‡ºæ¨¡å—ä¸­çš„æ‰€æœ‰å‡½æ•°\n# from module_name import *\n\n# å¯¼å…¥æ¨¡å—ä¸­çš„ç‰¹å®šå‡½æ•°\n# from module_name import function_0, function_1, function_2\n\n```","b35fb3cd5f3c535bb191db5687c23d92":"\n# Python ç±»\n\n`#python`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å®šä¹‰ç±»ã€è®¿é—®å±æ€§ã€è°ƒç”¨æ–¹æ³• \n\n```python\n\n# åˆ›å»ºç±»\n# class ç±»å:\n    # ç±»ä½“\n    # ç±»ä½“ä¸­å¯ä»¥å®šä¹‰å˜é‡å’Œå‡½æ•°\n    # ç±»ä½“ä¸­çš„å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯self\n    # selfä»£è¡¨ç±»çš„å®ä¾‹å¯¹è±¡\n    # ç±»ä½“ä¸­çš„å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯self\n\n# example åˆ›å»º \u001ePerson ç±»\nclass Person:\n    # ç±»ä½“\n    def __init__(self, name, age):\n        self.name = name\n        self.age = age\n    # æ–¹æ³• 1\n    def say_hi(self):\n        print('Hello, how are you?')\n    # æ–¹æ³• 2\n    def say_name(self):\n        print(f'Hello, my name is {self.name}')\n    # æ–¹æ³• 3\n    def say_age(self):\n        print(f'Hello, my age is {self.age}')\n\nperson = Person('Alice', 25)\n# è®¿é—®å±æ€§\nprint(person.name)\nprint(person.age)\n# è°ƒç”¨æ–¹æ³•\nperson.say_hi()\nperson.say_name()\nperson.say_age()\n\n```\n\n## 2. ç»§æ‰¿\n\n```python\n########################################################\n##### ç»§æ‰¿\n########################################################\n\nclass Animal:\n    def __init__(self, name, age):\n        print(\"Animal\")\n\n    def eat(self):\n        print(\"eat\")\n\n    def drink(self):\n        print(\"drink\")\n\n# ä¼ å…¥çˆ¶ç±»å‚æ•°\n\nclass Dog(Animal):\n\n    def __init__(self, name, age):\n        # è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°\n        super().__init__(name, age)\n        print(\"Dog\")\n\n    def bark(self):\n        print(\"bark\")\n\n    def eat(self):\n        print(\"Dog eat\")\n\n```\n\n## 3. å¯¼å‡ºç±»æ¨¡å—\n```python\n########################################################\n##### å¯¼å‡ºç±»æ¨¡å—\n########################################################\n\n# car.py\nclass Animal:\n    def __init__(self, name, age):\n        print(\"Animal\")\n\n    def eat(self):\n        print(\"eat\")\n\n    def drink(self):\n        print(\"drink\")\n\nclass Dog(Animal):\n\n    def __init__(self, name, age):\n        # è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°\n        super().__init__(name, age)\n        print(\"Dog\")\n\n    def bark(self):\n        print(\"bark\")\n\n    def eat(self):\n        print(\"Dog eat\")\n\n# å¯¼å…¥ç±»æ¨¡å—\nfrom animal import Animal, Dog\n\n# å¯¼å…¥æ•´ä¸ªæ¨¡å—\nimport animal\n\n# å¯¼å‡ºæ‰€æœ‰ç±»\nimport animal import *\n\n```\n\n## 4. ä»£ç é£æ ¼\n\n**\n- ç±»ä½¿ç”¨å¤§é©¼å³°\n- å‡½æ•°ä½¿ç”¨_åˆ†å‰²","27114d670b6e57f880be232ceac34467":"\n# Python æ–‡ä»¶ä¸å¼‚å¸¸å¤„ç†\n\n`#python` \n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä½¿ç”¨ pathlib è¯»å–æ–‡ä»¶å†…å®¹ \n\n```python\n# pathlib æ¨¡å—: ç”¨äºå¤„ç†æ–‡ä»¶è·¯å¾„\nfrom pathlib import Path\n\npath = Path(\"main.py\")\n\n# è¯»å– main.py æ–‡ä»¶çš„å†…å®¹\ncontent = path.read_text()\n\nprint(content)\n\n```\n\n## 2. å†™å…¥æ–‡ä»¶\n\n```python\n# pathlib æ¨¡å—: ç”¨äºå¤„ç†æ–‡ä»¶è·¯å¾„\nfrom pathlib import Path\n\npath = Path(\"programing.txt\")\n\npath.write_text(\"Hello, world!\")\n\n```\n\n\n## 3. ä½¿ç”¨ try-except é¿å…æŠ¥é”™\n\n### 3.1. ZeroDivisionError\n\n```python\ntry:\n    print(1/0)\nexcept ZeroDivisionError as e:\n    print(e)\n    print('error')\n\n```\n\n### 3.2. FileNotFoundError\n\n```python\nfrom pathlib import Path\n\npath = Path(\"no_exist.txt\")\n\ntry:\n    content = path.read_text()\nexcept FileNotFoundError:\n    print(\"File not found\")\n\n```\n\n\n### 3.3. é™é»˜å¤±è´¥\n\n```python\n# é™é»˜å¤±è´¥\n# é€šè¿‡æ•è·å¼‚å¸¸ï¼Œä½¿å¾—ç¨‹åºä¸ä¼šå› ä¸ºå¼‚å¸¸è€Œç»ˆæ­¢\n# example\ndef divide(x, y):\n    try:\n        result = x / y\n    except ZeroDivisionError:\n        print(\"division by zero!\")\n        pass # é™é»˜å¤±è´¥\n    else:\n        print(\"result is\", result)\n    finally:\n        print(\"executing finally clause\")\n```\n\n### 3.4. json.dumpsï¼šå°† Python å¯¹è±¡ç¼–ç æˆ JSON å­—ç¬¦ä¸²\n\n```python\nfrom pathlib import Path\nimport json\n\nnumbers = [1, 2, 3, 4, 5]\n\npath = Path(\"numbers.json\")\n\n# json.dumps() æ–¹æ³•å°† Python å¯¹è±¡ç¼–ç æˆ JSON å­—ç¬¦ä¸²\ncontents = json.dumps(numbers)\n\n# å°† JSON å­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶\npath.write_text(contents)\n\n```\n\n### 3.5. json.loadsï¼šJSON å­—ç¬¦ä¸²è½¬æ¢ä¸º Python å¯¹è±¡\n\n```python\nfrom pathlib import Path\nimport json\n\npath = Path(\"numbers.json\")\n\ncontent =  path.read_text()\n\n# ä½¿ç”¨ json.loads() å‡½æ•°å°† JSON å­—ç¬¦ä¸²è½¬æ¢ä¸º Python å¯¹è±¡\ncontents = json.loads(content)\n\nprint(contents)\n\n```\n\n\n","4d0f984f93e957d2b86297dc21cc6e65":"\n# æœ€å¸¸è§çš„å¼€æºåè®®\n\n\nè®©æˆ‘ä¸ºæ‚¨è¯¦ç»†ä»‹ç»å‡ ä¸ªæœ€å¸¸è§çš„å¼€æºåè®®ï¼š\n\n1. GPL (GNU General Public License)\n   - æœ€è‘—åçš„å¼€æºåè®®ä¹‹ä¸€\n   - è¦æ±‚ä»»ä½•ä¿®æ”¹åçš„ä»£ç æˆ–è¡ç”Ÿä»£ç ä¹Ÿå¿…é¡»ä½¿ç”¨GPLåè®®å¼€æº\n   - åˆ†ä¸ºGPL v2å’ŒGPL v3ç‰ˆæœ¬\n   - å…·æœ‰ä¼ æŸ“æ€§ï¼Œå³å¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨äº†GPLåè®®çš„ä»£ç ï¼Œæ•´ä¸ªé¡¹ç›®éƒ½å¿…é¡»ä½¿ç”¨GPLåè®®\n\n2. AGPL (GNU Affero General Public License)\n   - æ˜¯GPLçš„ä¸€ä¸ªå˜ä½“ï¼Œä¸»è¦é’ˆå¯¹ç½‘ç»œæœåŠ¡\n   - æ¯”GPLæ›´ä¸¥æ ¼\n   - è¦æ±‚é€šè¿‡ç½‘ç»œæä¾›æœåŠ¡çš„è½¯ä»¶ä¹Ÿå¿…é¡»å¼€æº\n   - å¦‚æœæ‚¨ä¿®æ”¹äº†AGPLè½¯ä»¶å¹¶åœ¨ç½‘ç»œä¸Šè¿è¡Œï¼Œå¿…é¡»å¼€æ”¾æºä»£ç \n   - å¸¸ç”¨äºé˜²æ­¢äº‘æœåŠ¡å•†åˆ©ç”¨å¼€æºè½¯ä»¶ä½†ä¸å›é¦ˆç¤¾åŒº\n\n3. LGPL (GNU Lesser General Public License)\n   - GPLçš„å®½æ¾ç‰ˆæœ¬\n   - å…è®¸å°†LGPLè½¯ä»¶ä½œä¸ºåº“é“¾æ¥åˆ°ç§æœ‰è½¯ä»¶ä¸­\n   - ä¿®æ”¹LGPLè½¯ä»¶åº“æœ¬èº«çš„ä»£ç æ—¶éœ€è¦å¼€æº\n   - é€‚ç”¨äºç±»åº“æˆ–æ¡†æ¶\n\n4. MIT License\n   - æœ€å®½æ¾çš„å¼€æºåè®®ä¹‹ä¸€\n   - åªè¦ä¿ç•™ç‰ˆæƒå£°æ˜ï¼Œå¯ä»¥è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹ã€åˆ†å‘\n   - å¯ä»¥ç”¨äºå•†ä¸šè½¯ä»¶\n   - ä¸è¦æ±‚ä¿®æ”¹åçš„ä»£ç å¿…é¡»å¼€æº\n   - è¢«å¹¿æ³›ä½¿ç”¨ï¼Œå¦‚jQueryã€Node.jsç­‰\n\n5. Apache License 2.0\n   - æ¯”MITç¨ä¸¥æ ¼ï¼Œä½†ä»ç„¶ç›¸å¯¹å®½æ¾\n   - éœ€è¦ä¿ç•™ç‰ˆæƒå£°æ˜\n   - éœ€è¦å£°æ˜ä¿®æ”¹\n   - å«æœ‰ä¸“åˆ©æˆæƒæ¡æ¬¾\n   - å¯ä»¥ç”¨äºå•†ä¸šè½¯ä»¶\n\n6. BSD License\n   - åˆ†ä¸ºBSD 2-Clauseå’ŒBSD 3-Clause\n   - ç±»ä¼¼MITï¼Œéå¸¸å®½æ¾\n   - ä¸»è¦åŒºåˆ«åœ¨äºå…è´£å£°æ˜çš„ç»†èŠ‚\n   - å¯ä»¥ç”¨äºå•†ä¸šè½¯ä»¶\n\n7. Mozilla Public License (MPL)\n   - ä»‹äºGPLå’Œå®½æ¾åè®®ä¹‹é—´\n   - æ–‡ä»¶çº§åˆ«çš„copyleft\n   - å…è®¸ä¸å…¶ä»–åè®®çš„ä»£ç æ··åˆä½¿ç”¨\n   - ä¿®æ”¹MPLæ–‡ä»¶éœ€è¦å¼€æºï¼Œä½†å¯ä»¥ä¸ç§æœ‰ä»£ç ä¸€èµ·å‘å¸ƒ\n\nåè®®é€‰æ‹©å»ºè®®ï¼š\n1. å¦‚æœå¸Œæœ›ä»£ç å®Œå…¨è‡ªç”±åˆ†å‘ï¼Œé€‰æ‹©MIT\n2. å¦‚æœå¸Œæœ›ä¿®æ”¹åçš„ä»£ç å¿…é¡»å¼€æºï¼Œé€‰æ‹©GPL\n3. å¦‚æœæ˜¯ç½‘ç»œæœåŠ¡ä¸”å¸Œæœ›ä¿®æ”¹å¿…é¡»å¼€æºï¼Œé€‰æ‹©AGPL\n4. å¦‚æœæ˜¯ç±»åº“ï¼Œè€ƒè™‘LGPL\n5. å¦‚æœè€ƒè™‘ä¸“åˆ©ä¿æŠ¤ï¼Œé€‰æ‹©Apache 2.0\n\néœ€è¦æ³¨æ„çš„äº‹é¡¹ï¼š\n1. åœ¨é€‰æ‹©å¼€æºåè®®æ—¶è¦è€ƒè™‘é¡¹ç›®çš„å…·ä½“éœ€æ±‚\n2. æ³¨æ„ä¸åŒåè®®çš„å…¼å®¹æ€§\n3. å•†ä¸šä½¿ç”¨æ—¶è¦ç‰¹åˆ«æ³¨æ„GPLå’ŒAGPLçš„é™åˆ¶\n4. å»ºè®®åœ¨é¡¹ç›®åˆå§‹å°±é€‰æ‹©åˆé€‚çš„å¼€æºåè®®\n5. å¦‚æœä½¿ç”¨ä»–äººçš„å¼€æºä»£ç ï¼Œå¿…é¡»éµå®ˆåŸåè®®è¦æ±‚\n\nè¿™äº›æ˜¯ç›®å‰æœ€å¸¸è§çš„å¼€æºåè®®ï¼Œæ¯ç§åè®®éƒ½æœ‰å…¶ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚é€‰æ‹©æ—¶è¦æ ¹æ®è‡ªå·±çš„é¡¹ç›®éœ€æ±‚å’Œæœªæ¥å‘å±•è§„åˆ’æ¥å†³å®šã€‚å¦‚æœæ˜¯å•†ä¸šé¡¹ç›®ï¼Œå»ºè®®ä»”ç»†è¯„ä¼°ä½¿ç”¨GPLæˆ–AGPLçš„å½±å“ã€‚","7e793931fd2a505d86fb24a497e79762":"\n# ç½‘ç»œç¯‡\n\nï¼ˆHTTPã€TCP/IPã€DNSã€UDPã€websocketç­‰è®¡ç®—æœºç½‘ç»œçŸ¥è¯†ï¼‰\n","527865b9523b5c0ca7b9d7e2bb62d83e":"\n# ç›®å½•\n\n\n>  æºäºå¥½æ–‡åˆ†äº«ã€å¥½æ–‡ç¿»è¯‘ã€æœ‰å¯å‘çš„æ’­å®¢ã€ä¸ªäººåšå®¢ç­‰\n\n\nç›®å½•\n- [1. æ’­å®¢ï¼šAI æ—¶ä»£çš„é¢‘ç‡è·ƒè¿èƒŒæ™¯ä¸‹ä¸ªäººçš„é€‰æ‹©-é«˜é¢‘çš„å·æˆ–ä½é¢‘çš„å®š](/post/55caa7de71a5500dbd3f8bde08edabe2.html)\n- [2. æ’­å®¢ï¼šå¼ äº‘å¸†çš„èŠ’æ ¼ä¹‹é“](/post/9c95a83ff9d35e63a4fbf5bc63b09150.html)\n- [3. æ’­å®¢ï¼šäººç”Ÿå±æœºä¸æ˜¯å´©æºƒè€Œæ˜¯ç“¦è§£](/post/0ce7df2311685137ae3cb14fd01f0977.html)\n- [4. ä¸ªäººå¸¸ç”¨å·¥å…·åŠæŠ€å·§åˆ†äº«](/post/2bb0ee2016255bc396603b6ef264ad2e.html)","55caa7de71a5500dbd3f8bde08edabe2":"\n# æ’­å®¢ï¼šAI æ—¶ä»£çš„é¢‘ç‡è·ƒè¿èƒŒæ™¯ä¸‹ä¸ªäººçš„é€‰æ‹©-é«˜é¢‘çš„å·æˆ–ä½é¢‘çš„å®š\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ¯ä¸€æ¬¡ç§‘æŠ€é©å‘½æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€æ¬¡é¢‘ç‡çš„è·ƒè¿  \n\n> \n> åœ¨å¼ æ´¥å‰‘çœ‹æ¥ï¼Œæ¯æ¬¡ç§‘æŠ€é©å‘½æœ¬è´¨ä¸Šéƒ½æ˜¯é¢‘ç‡çš„è·ƒè¿ï¼Œè€Œ AI å°†æŠŠä¸–ç•Œçš„é¢‘ç‡å†æå‡ä¸€ä¸ªé‡çº§ï¼Œä»è€Œè®©ä¸–ç•Œè¿›å…¥ä¸€ä¸ªâ€œå›°éš¾æ¨¡å¼â€ã€‚**ä»–è®¤ä¸ºï¼Œå½“å‰ä¸–ç•Œå˜å¾—æ›´åŠ å¤æ‚å’Œå›°éš¾ï¼Œå°¤å…¶åœ¨åˆ›ä¸šé¢†åŸŸ**ã€‚ç°ä»£åˆ›ä¸šè€…ï¼Œç‰¹åˆ«æ˜¯95åï¼Œæ•´ä½“ç´ è´¨æ˜¾è‘—æå‡ï¼Œä»–ä»¬åœ¨å­¦è¯†ã€èƒ½åŠ›ä»¥åŠå¯¹å…¨çƒåŒ–çš„ä¿¡å¿ƒæ–¹é¢è¿œè¶…å‰è¾ˆï¼Œè¿™ä½¿å¾—åœ¨ç«äº‰ä¸­è„±é¢–è€Œå‡ºå˜å¾—æ›´åŠ è‰°éš¾ã€‚\n> \n> å¯¹æ¯”2012å¹´å’Œ2024å¹´çš„å¸‚åœºæœºä¼šï¼Œ2012å¹´çš„ä¸­å›½å¸‚åœºå……æ»¡äº†å„ç§å¯èƒ½æ€§ï¼Œå„è¡Œå„ä¸šéƒ½å¯ä»¥é‡æ–°å¼€åˆ›ã€‚å½“æ—¶çš„O2Oå¤§æ½®ä¸­ï¼Œä¸ä»…æœ‰å¤–å–å’Œæ‰“è½¦æœåŠ¡ï¼Œè¿˜æœ‰ä¸Šé—¨æ´—è½¦ã€æ´—ç‹—ç­‰å„ç§åˆ›æ–°æœåŠ¡ã€‚ç”šè‡³æœ‰å…¬å¸åšä¸Šé—¨ç¾ç”²ï¼Œä¼°å€¼é«˜è¾¾10äº¿ç¾å…ƒï¼Œè¿™ç§æƒ…æ™¯åœ¨ä»Šå¤©å·²éš¾ä»¥æƒ³è±¡ã€‚é‚£æ—¶çš„å¸‚åœºç¯å¢ƒå…è®¸å„ç§å¤§èƒ†çš„å°è¯•å’Œå·¨é¢èèµ„ï¼Œè€Œå¦‚ä»Šçš„å¸‚åœºç¯å¢ƒæ›´åŠ ä¸¥å³»ï¼Œåˆ›ä¸šè€…é¢ä¸´çš„æŒ‘æˆ˜æ›´å¤§ï¼Œæœºä¼šä¹Ÿæ›´åŠ ç¨€ç¼ºã€‚\n> \n> è¿‡å»12å¹´ï¼Œä¸­å›½çš„åˆ›ä¸šç¯å¢ƒå‘ç”Ÿäº†å·¨å¤§å˜åŒ–ã€‚**ä¿¡æ¯æµåŠ é€Ÿå’Œç”Ÿæ´»èŠ‚å¥çš„åŠ å¿«ä½¿å¾—äººä»¬çš„æ³¨æ„åŠ›æ›´åŠ ç¢ç‰‡åŒ–**ï¼Œç³»ç»Ÿå˜å¾—æ›´åŠ è„†å¼±ï¼Œäººä»¬è¶Šæ¥è¶Šæ„Ÿåˆ°åŠ›ä¸ä»å¿ƒã€‚é¢å¯¹è¿™ç§é«˜é¢‘æ—¶ä»£çš„æŒ‘æˆ˜ï¼Œå¼ æ´¥å‰‘**å»ºè®®å…³æ³¨é•¿æœŸè¶‹åŠ¿å’Œä½é¢‘ä¿¡å·ï¼Œä¿æŒå†…å¿ƒçš„å®šåŠ›å’Œç”Ÿå‘½åŠ›ã€‚è¿™æ„å‘³ç€åœ¨é¢å¯¹å¿«é€Ÿå˜åŒ–å’Œå¤æ‚ç¯å¢ƒæ—¶ï¼Œéœ€è¦æœ‰è€å¿ƒå’Œåšå®šçš„ä¿¡å¿µï¼Œä¸è¢«çŸ­æœŸæ³¢åŠ¨å’Œé«˜é¢‘ä¿¡æ¯æ‰€å¹²æ‰°ã€‚**\n> \n> æ€»ä¹‹ï¼Œå¼ æ´¥å‰‘è®¤ä¸ºï¼Œåœ¨è¿™ä¸ªAIæ¨åŠ¨çš„é«˜é¢‘æ—¶ä»£ï¼Œè¦æƒ³æˆåŠŸï¼Œéœ€è¦æ›´é«˜çš„ç´ è´¨ã€æ›´å¼ºçš„å®šåŠ›ä»¥åŠå¯¹é•¿æœŸè¶‹åŠ¿çš„æ•é”æ´å¯ŸåŠ›ã€‚åªæœ‰è¿™æ ·ï¼Œæ‰èƒ½åœ¨æ¿€çƒˆçš„ç«äº‰ä¸­æ‰¾åˆ°è‡ªå·±çš„ä½ç½®ï¼Œå¹¶åº”å¯¹æ—¥ç›Šå¤æ‚çš„æŒ‘æˆ˜ã€‚\n\n## 2. ç¬¬ä¸€ï¼Œä¸–ç•Œå˜éš¾äº†\n\n### 2.1. åˆ›ä¸šè€…è´¨é‡\n\n`**é¦–å…ˆæ˜¯åˆ›ä¸šè€…çš„è´¨é‡ï¼Œè¿™æ³¢åˆ›ä¸šè€…ç´ è´¨æ¯”è¿‡å¾€è¦å¼ºå¾ˆå¤š**`ï¼Œç‰¹åˆ«æ˜¯å¾ˆå¤š 95 å¹´å·¦å³çš„å¹´è½»åˆ›ä¸šè€…ï¼Œæ— è®ºæ˜¯ä»–ä»¬çš„å­¦è¯†ã€èƒ½åŠ›ï¼Œè¿˜æ˜¯åº•å±‚çš„å®‰å…¨æ„Ÿå’Œå¯¹å…¨çƒåŒ–çš„ä¿¡å¿ƒï¼Œéƒ½æ¯” 10 å¹´åˆé‡è§çš„åˆ›ä¸šè€…é«˜å‡ºå¾ˆå¤šï¼Œè¿™å¯èƒ½æ˜¯ä»–ä»¬çš„æˆé•¿ç¯å¢ƒå¡‘é€ çš„ï¼Œ**è¦ä»è¿™æ‰¹äººä¸­è„±é¢–è€Œå‡ºå˜å¾—è¶Šæ¥è¶Šéš¾**ã€‚\n\n### 2.2. ä¸ 2012 çš„å¸‚åœºæœºä¼šå¯¹æ¯”\n\n2012 å¹´çš„ä¸­å›½ï¼Œæ¡æ¡å¤§è·¯é€šç½—é©¬ï¼Œæ‰€æœ‰è¡Œä¸šçš†å¯é‡åšä¸€éã€‚ O2O å¤§æ½®é‡Œï¼Œé™¤äº†æˆ‘ä»¬è€³ç†Ÿèƒ½è¯¦çš„å¤–å–ã€æ‰“è½¦ä¹‹å¤–ï¼Œ**è¿˜æœ‰ä¸Šé—¨æ´—è½¦ã€æ´—ç‹—ï¼Œæ²¡æœ‰ä¸èƒ½ä¸Šçš„é—¨ï¼Œåªæœ‰ä¸æ•¢æƒ³çš„å¿ƒ**ã€‚è®°å¾—å½“å¹´æœ‰ä¸€å®¶å…¬å¸åšä¸Šé—¨ç¾ç”²ï¼Œä¼°å€¼é«˜è¾¾ 10 äº¿ç¾é‡‘ï¼Œè€Œä¸”è¿™ä¸ªèµ›é“ä¸æ­¢è¿™ä¸€å®¶ï¼Œè¿˜æœ‰ä¸‰å·¨å¤´åœ¨èèµ„å¤§æˆ˜ï¼ŒåŠ¨è¾„èèµ„ä¸Šäº¿ç¾é‡‘ã€‚è¿™ç§æƒ…æ™¯åœ¨ä»Šå¤©ä¸å¯æƒ³è±¡ï¼Œä½†åœ¨å½“å¹´æ˜¯å´æ˜¯å¸¸æ€ã€‚\n\nä¸ä»…å¦‚æ­¤ï¼Œè¿‡å»è¿™ 12 å¹´ä¸­ï¼Œä¼´éšç€ä¸­å›½åˆ›ä¸šè€…çš„ä¸æ–­å‡ºç°ã€æˆé•¿å’Œæˆå°±ï¼Œç•™ç»™æ–°è¿›å…¥åˆ›ä¸šè€…çš„æœºä¼šä¹Ÿåœ¨å˜å°‘ã€‚\n\n![image.jpg600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407251811998.png?imageSlim)\n\n## 3. ç¬¬äºŒï¼Œæ—¶é—´å˜å¿«äº†\n\n2020 å¹´ Covid-19 ä¹‹åï¼Œ**ä¸–ç•Œä¼¼ä¹å˜å¿«äº†**ã€‚\n\n### 3.1. å˜å¿«äº†ï¼Œæç«¯ç°è±¡å˜å¤šäº†\n\næ—¶é—´åŠ é€Ÿåï¼Œ`**æç«¯ç°è±¡**`ä¹Ÿåœ¨å˜å¤šã€‚è¿‡å»é‚£äº›ä¸‰å¹´ã€äº”å¹´æ‰ä¼šå‘ç”Ÿçš„äº‹æƒ…ï¼Œä»Šå¤©åœ¨ä»¥å¹´ä¸ºå•ä½å‘ç”Ÿï¼š\n1) å»å¹´ä¸€å¹´ï¼Œè‹±ä¼Ÿè¾¾çš„è‚¡ä»·æ¶¨äº† 3 å€ã€‚è¿™æ˜¯å†å²ä¸Šç¬¬ä¸€æ¬¡ï¼Œä¹Ÿæ˜¯å”¯ä¸€ä¸€æ¬¡ï¼Œä¸€å®¶ä¸¤ä¸‡äº¿äººæ°‘å¸ä¼°å€¼çš„å…¬å¸åœ¨ä¸€å¹´å†…ç¿»äº† 3 å€ã€‚\n2) è¿‡å»ä¸€å¹´ï¼Œæ—¥ç»æŒ‡æ•°ä¸Šæ¶¨äº† 30%ï¼Œæ˜¯è¿‡å» 10 å¹´å¹´å‡å¢é•¿ç‡çš„ 5 å€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ—¥æœ¬è‚¡ç¥¨çš„æ•´ä½“æ³¢åŠ¨ï¼Œå·²ç»å’Œæ¯”ç‰¹å¸çš„æ³¢åŠ¨ä¸ç›¸ä¸Šä¸‹äº†ã€‚\n3) åœ¨ç»´æŒäº†å¤šå¹´ä½åˆ©ç‡åï¼Œç¾å›½å›½å€ºåˆ©ç‡åœ¨å»å¹´ä¸€å¹´å†…æ¶¨åˆ°äº† 5.3%ï¼Œä»¥è‡³äºå»å¹´å¹´åˆå¼•å‘äº† SVB é“¶è¡Œçˆ†é›·ç­‰ä¸€ç³»åˆ—äº‹ä»¶ã€‚\n![image.jpg600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407251811999.png?imageSlim)\n\n### 3.2. ä¸ºä»€ä¹ˆå˜å¿«äº†ï¼Ÿ\né‚£ä¹ˆï¼Œè¿™èƒŒåçš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä»Šå¤©çš„ä¸–ç•Œå˜éš¾äº†ã€å˜å¿«äº†ï¼Ÿ\n\n**æˆ‘ä»¬å¯èƒ½é¦–å…ˆè¦æ˜ç¡®ä¸€ä¸ªé—®é¢˜ï¼šå½“æˆ‘ä»¬åœ¨è°ˆè®ºã€Œä¸–ç•Œã€çš„æ—¶å€™ï¼Œæˆ‘ä»¬åˆ°åº•åœ¨è°ˆè®ºä»€ä¹ˆã€‚**\n\nè¯•æƒ³ä¸‰ä¸ªåœºæ™¯ï¼ŒåŒæ ·çš„ä¸€å¤©ï¼ŒåŒæ ·çš„åœ°ç‚¹ï¼š\n\n- ä¸€ä¸ªä½ æ‰“å¼€çŸ­è§†é¢‘ï¼›\n- ä¸€ä¸ªä½ é™é™å‘å‘†ï¼›\n- ä¸€ä¸ªä½ æ‰“å¼€å…¬å¸é‚®ç®±ï¼Œå¤„ç†å·¥ä½œã€‚\n\nåŒæ ·çš„ä½ ï¼Œå¿ƒæƒ…æ˜¯ä¸€æ ·çš„å—ï¼Ÿå¦‚æœä¸ä¸€æ ·ï¼Œé‚£ä¸ºä»€ä¹ˆåŒæ ·çš„æ—¶é—´åœ°ç‚¹ä¸‹ï¼Œä½ ä¼šæœ‰ä¸‰ç§å®Œå…¨ä¸åŒçš„ä½“ä¼šå‘¢ï¼Ÿå› ä¸ºåŒæ ·çš„ä½ ï¼Œè¿›å…¥äº†ä¸åŒçš„ä¿¡æ¯æµä¸­ï¼Œè€Œæˆ‘ä»¬çš„ä¸–ç•Œæ­£æ˜¯è¿™äº›ä¿¡æ¯æµæ„å»ºçš„ï¼Œ**ç›¸åŒåœºæ™¯ä¸‹ï¼Œä¿¡æ¯ä¸åŒï¼Œæˆ‘ä»¬çš„ã€Œä¸–ç•Œã€å°±ä¸åŒã€‚**\n\n**æˆ‘æœ‰ä¸ªæœ‹å‹ï¼Œä»–é€šå‹¤çš„æ—¶å€™è¦å¬æ’­å®¢ï¼Œç¡å‰è¦åˆ·å…¬ä¼—å·æ–‡ç« ï¼Œéšæ—¶éšåœ°è¦å›å¾®ä¿¡ã€æ‰“ç”µè¯ï¼Œæ¯å¤©éƒ½åœ¨æºæºä¸æ–­åœ°è·å–ä¿¡æ¯ã€‚æˆ‘æƒ³è¿™æ˜¯æˆ‘ä»¬è¿™ä»£äººçš„ä¸€ä¸ªå†™ç…§ã€‚**\n\næˆ‘ä»¬ä»¥ä¸ºæˆ‘ä»¬æ´»åœ¨ç”Ÿæ´»ä¸­ï¼Œå…¶å®æˆ‘ä»¬æ´»åœ¨ç”Ÿæ´»çš„ä¿¡æ¯æµä¸­ã€‚æˆ‘ä»¬åœ¨`ä¸»åŠ¨åœ°`è§‚å¯Ÿä¸–ç•Œï¼Œä¹Ÿåœ¨`è¢«åŠ¨åœ°`è¢«ä¿¡æ¯æ‰€çŒè¾“ã€‚ä¸–ç•Œé€šè¿‡ä¿¡æ¯çš„æ–¹å¼è¿›å…¥åˆ°äº†æˆ‘ä»¬æ‰€æœ‰çš„ä¼ æ„Ÿå™¨é‡Œï¼Œæ„å»ºäº†æˆ‘ä»¬å½“ä¸‹çš„æ‰€æ€ã€æ‰€æƒ³ã€æ‰€æ„Ÿã€‚è¿™å°±æ˜¯æˆ‘ä»¬æ¯å¤©çš„äººç”Ÿï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è°ˆè®ºçš„ã€Œä¸–ç•Œã€ã€‚\n\nç„¶è€Œ `**æˆ‘ä»¬å¯¹ä¿¡æ¯çš„ç†è§£éå¸¸å±€é™ã€‚æˆ‘ä»¬å¾€å¾€è‡ªå¸¦ã€Œæ»¤æ³¢å™¨ã€ï¼Œé»˜è®¤è¿‡æ»¤æ‰æˆ‘ä»¬ä¸å–œæ¬¢çš„ä¿¡æ¯**`ã€‚æ‰€ä»¥åŒæ ·ä¸€ä¸ªåœºæ™¯ï¼Œä¸åŒå‚ä¸è€…å›é¡¾å‘ç”Ÿè¿‡çš„äº‹æƒ…ï¼Œè¯´è¿‡çš„è¯å¾€å¾€éƒ½æ˜¯ä¸ä¸€æ ·ç”šè‡³æ˜¯å†²çªçš„ã€‚å³ä½¿ä¸€äº›ä¿¡æ¯è¿›å…¥äº†æˆ‘ä»¬çš„ä¼ æ„Ÿå™¨ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šå¯¹ä¿¡æ¯å†…å®¹çš„å˜åŒ–æ›´åŠ æ•æ„Ÿï¼Œè€Œéè¿™ç§å˜åŒ–çš„é¢‘ç‡ã€‚\n\n#### 3.2.1. é¢‘ç‡ ä¸ è€—èƒ½çš„å…³ç³»\n\nä¸¾ä¸ªä¾‹å­ï¼Œä¸‹å›¾æ˜¯ä¸¤ä¸ªåˆä¼™äººï¼Œä»–ä»¬éƒ½æœ‰æƒ…ç»ªå‘¨æœŸï¼Œéƒ½ä¼šä¸€æ®µæ—¶é—´ç§¯æè¿›å–ä¸€æ®µæ—¶é—´æ¶ˆæå¯¹æŠ—ã€‚ä½œä¸ºåˆ›ä¸šè€…ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šæ›´å…³æ³¨åˆ°ä»–ä»¬çŠ¶æ€çš„å˜åŒ–è€Œéé¢‘ç‡çš„å˜åŒ–ã€‚\n\n![image.jpg600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407251811000.png?imageSlim)\n\nåœ¨é€‰æ‹©åˆä½œä¼™ä¼´çš„æ—¶å€™ï¼Œä¸€äº›åˆ›ä¸šè€…ä¼šè®¤ä¸ºè¿™ä¸¤ä¸ªäººæ˜¯å·®ä¸å¤šçš„ï¼Œå› ä¸ºä»–ä»¬éƒ½æœ‰å‘¨æœŸã€‚**ä½†åœ¨å®é™…å·¥ä½œç”Ÿæ´»ä¸­ï¼Œé‚£äº›æ¶ˆè€—æˆ‘ä»¬çš„ï¼Œæ°æ°æ˜¯é¢‘ç‡**ã€‚\n\n- å°±åƒä¸€ä¸ªåˆä¼™äººå¦‚æœä¸€èµ·æˆ˜æ–— 3 å¹´ä¹‹åï¼Œä»–è¯´æœ‰ç‚¹ç´¯äº†éœ€è¦ä¼‘æ¯ï¼Œä½ æ˜¯å¯ä»¥ç†è§£å’Œæ¥å—çš„ï¼Œä¹Ÿä¼šå¸®åŠ©ä»–åº¦è¿‡æ¶ˆææœŸã€‚\n- ä½†æ˜¯å¦‚æœä»–æ¯å‘¨æ¥ä¸€è½®ï¼Œä¸€å¹´æ¥ 50 è½®ï¼Œå¿ƒåŠ›å†å¼ºçš„åˆ›å§‹äººä¹Ÿå—ä¸äº†å§ã€‚\n\nä»ä¿¡å·å­¦çš„è§’åº¦æ¥çœ‹ï¼Œ`**é¢‘ç‡ä»£è¡¨èƒ½é‡ï¼Œé¢‘ç‡è¶Šé«˜è€—èƒ½èƒ½é‡è¶Šé«˜**`ï¼Œæ‰€ä»¥ä¸€ä¸ªé«˜é¢‘å˜åŒ–çš„äº‹ç‰©éœ€è¦æ›´é«˜çš„èƒ½é‡æ¥ç»´æŒï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä½“éªŒåˆ°çš„æ›´åŠ æ¶ˆè€—ã€‚\n\næ‰€ä»¥åŒæ ·ä¸€ä¸ªåˆä½œä¼™ä¼´ï¼Œä½ ä»¬ 3 å¹´å…³ç³»å¥½ï¼Œ3 å¹´å…³ç³»å·®ï¼Œä¸ä¼šæœ‰å¤ªå¤§é—®é¢˜ï¼›ä½†æ˜¯ååå¤å¤ï¼Œå°±éå¸¸æ¶ˆè€—ï¼›\n\n**åŒæ ·çœ‹ 2h è§†é¢‘ï¼Œå¦‚æœæ˜¯ä¸€éƒ¨çºªå½•ç‰‡ï¼Œçœ‹å®Œéå¸¸æ²»æ„ˆï¼Œä½†å¦‚æœæ˜¯åˆ· 15s çŸ­è§†é¢‘ï¼Œå¯èƒ½è®©äººç­‹ç–²åŠ›ç«­ï¼›**\n\nåŒæ ·åšå†…å®¹è¾“å‡ºï¼Œæƒ³èµ¶ä¸Šæ¯ä¸€æ³¢æµé‡çƒ­ç‚¹ï¼Œéå¸¸å¿ƒç´¯ï¼Œä½†å»è®²ä¸€ä¸ªä½ é•¿æœŸè®¤å¯çš„ä¸œè¥¿ï¼Œå¯èƒ½åè€Œæ˜¯ä¸€ç§æ»‹å…»ã€‚å°±åƒå·´è²ç‰¹èƒ½æŠŠè‡ªå·±çš„ç†å¿µè®²å‡ åå¹´ä¸€æ ·ï¼Œä»–å¯èƒ½æ˜¯å—åˆ°æ»‹å…»çš„ä¸€æ–¹ï¼Œä½†å¦‚æœå·´è²ç‰¹å¤©å¤©å‡ºæ¥è¯„è®ºå¸‚åœºçƒ­ç‚¹ï¼Œææ€•ä»–æ—©å°±èµ°äº†ã€‚\n\næ‰€ä»¥å›åˆ°å¼€å§‹ï¼Œ**æˆ‘ä»¬çš„ä¸–ç•Œï¼Œæ˜¯ç”±ä¿¡æ¯æ„å»ºçš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸–ç•Œçš„é¢‘ç‡ï¼Œæ˜¯ç”±ä¿¡æ¯çš„é¢‘ç‡å†³å®šçš„ã€‚ä¿¡æ¯é¢‘ç‡è¶Šé«˜ï¼Œä¸–ç•Œçš„é¢‘ç‡ä¹Ÿå°±è¶Šé«˜**ã€‚\n\nä¸‹é¢è¿™å¼ å›¾æ˜¾ç¤ºäº†ç”µæŠ¥æ—¶ä»£ã€é‚®ä»¶æ—¶ä»£å’Œå¾®ä¿¡æ—¶ä»£ä¸–ç•Œæ—¥å‡ä¿¡æ¯é‡çš„å˜åŒ–æƒ…å†µ (é¢‘ç‡å›¾æ²¡æœ‰å®Œå…¨æŒ‰ç…§æ¯”ä¾‹æ¥ç”»ï¼Œå› ä¸ºæ¯æ¬¡ç§‘æŠ€é©å‘½éƒ½æ˜¯å¸¦æ¥é¢‘ç‡ç™¾å€çº§åˆ«çš„è·ƒè¿)ã€‚\n\n![image.jpg600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407251811001.jpeg?imageSlim)\n\nè¿‡å»ï¼Œå®¶ä¹¦æŠµä¸‡é‡‘ï¼Œ**ä»Šå¤©ï¼Œæˆ‘ä»¬æ‰“å¼€å¾®ä¿¡ï¼Œæ¯å¤©å›å¤çš„ä¿¡æ¯æ˜¯å¤ä»£ä¸€ç”Ÿçš„æ€»å’Œã€‚**\n\nè¿‡å»ï¼Œä¸€ä¸ªå®˜å‘˜ä»åŒ—äº¬è´¬åˆ°å—äº¬ï¼Œè¡Œè½¦åå§è¦ 3 ä¸ªæœˆï¼Œè€Œä»Šå¤©ï¼Œç”šè‡³ä¸ç”¨ 3 å°æ—¶ã€‚\n\n**æ¯æ¬¡ç§‘æŠ€é©å‘½ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯ä¿¡æ¯é¢‘ç‡çš„è·ƒè¿ï¼Œéƒ½åœ¨è®©æ—¶é—´å’Œç©ºé—´é‡æ–°åŠ é€Ÿæµè½¬ã€‚**\n\nå½“é¢‘ç‡è·ƒè¿ä¹‹åï¼Œæˆ‘ä»¬å¯¹å¾ˆå¤šäº‹ç‰©çš„æ„Ÿå—ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ã€‚äº”ä¸€æœŸé—´ï¼Œæˆ‘æœ‹å‹ç»™æˆ‘æ‹äº†ä¸€æ®µè§†é¢‘ï¼Œä¸€ä¸ªå®¶åº­èšä¼šä¸Šï¼Œä»–æˆ´ç€ Vision Proï¼Œä¸€è¾¹å¸¦å­©å­ï¼Œä¸€è¾¹çœ‹æ¯”èµ›ã€‚ä»–å¯¹è¿™ä¸ªåœºæ™¯ç‰¹åˆ«éª„å‚²ï¼Œä½†æˆ‘çœ‹äº†ç‰¹åˆ«éš¾è¿‡ï¼Œå› ä¸ºé‚£ä¸€åˆ»ï¼Œä»–çœ‹ä¼¼æ˜¯åœ¨é™ªå­©å­ï¼Œä½†ä»–çš„å¿ƒæ˜¯ä¸åœ¨ç°åœºçš„ã€‚æˆ‘ä»¬å¸¸æœ‰è¿™æ ·çš„ç»å†ï¼Œå½“ä½ åœ¨è·Ÿä¸€ä¸ªäººäº¤æµçš„æ—¶å€™ï¼ŒæŸä¸€åˆ»ä½ ä¼šæ„Ÿè§‰ä»– â€œä¸åœ¨è¿™å„¿â€ ã€‚ä»–å¯èƒ½äººåœ¨è¿™å„¿ï¼Œä½†æ˜¯å¿ƒä¸åœ¨è¿™å„¿ã€‚æœ‰äº›çˆ¶æ¯ç¾å…¶åæ›°é™ªäº†å­©å­ä¸€å¤©ï¼Œå…¶å®ä¸€ç›´åœ¨å›æ¶ˆæ¯ç©æ‰‹æœºï¼Œæ³¨æ„åŠ›æ²¡æœ‰åœ¨å­©å­èº«ä¸Šï¼Œå¿ƒä¹Ÿå°±æ²¡æœ‰åœ¨å­©å­èº«ä¸Šã€‚\n\nè€Œç§‘æŠ€å¸¦æ¥çš„é¢‘ç‡è·ƒè¿ï¼Œè®©æˆ‘ä»¬çš„ **æ³¨æ„åŠ›è¶Šæ¥è¶Šéš¾é›†ä¸­**ï¼Œå¦‚æœè¯´è¿‡å»çš„ä¸€ä»½æ³¨æ„åŠ›æ˜¯ä¸¤å°æ—¶ï¼Œä»Šå¤©çš„ä¸€ä»½æ³¨æ„åŠ›å¯èƒ½åªæœ‰ä¸¤ç§’é’Ÿã€‚ä¸–ç•Œçš„èŠ‚å¥è¶Šæ¥è¶Šå¿«ï¼Œè€Œæˆ‘ä»¬çš„æ³¨æ„åŠ›è¶Šæ¥è¶Šç¨€ç¼ºï¼Œåœ¨åœºæ„Ÿè¶Šæ¥è¶Šå¼±ã€‚\n\nä»¥å‰ä¸€ä¸ªäººåªè¦ç¦»å¼€ç”µè„‘ï¼Œä»–çš„é¢‘ç‡å°±é™ä¸‹æ¥äº†ï¼Œå› ä¸ºä»–çš„ä¿¡æ¯é¢‘ç‡é™ä¸‹æ¥äº†ï¼›\n\nç°åœ¨ä¸€ä¸ªäººå¾—æŠŠæ‰‹æœºæ”¾åˆ°ä¸€è¾¹ï¼Œä»–çš„é¢‘ç‡æ‰èƒ½é™ä¸‹æ¥ã€‚è€Œè¿™ä¸¤å¹´æˆ‘ä»¬æ­£åœ¨é¢ä¸´åˆä¸€æ¬¡å¤§å¹…çš„é¢‘ç‡è·ƒè¿ã€‚\n\nAI ä¼šæŠŠè¿™ä¸ªä¸–ç•Œçš„é¢‘ç‡å†æ‹‰é«˜ä¸€ä¸ªé‡çº§ï¼Œç­‰åˆ°æœªæ¥ï¼Œä½ çš„ agent ä¼šå®æ—¶è·Ÿåœ¨ä½ èº«è¾¹ï¼Œå’Œä½ äº¤æµã€å¯¹è¯ã€åé¦ˆå·¥ä½œï¼Œä½ æ—¶æ—¶åˆ»åˆ»éƒ½åœ¨ä¿¡æ¯æµä¸­ï¼Œæ´»åœ¨ä¸æ–­åŠ é€Ÿçš„é«˜é¢‘ä¸–ç•Œä¸­ã€‚\n\næˆ‘ä»¬åšå¥½å‡†å¤‡äº†å—ï¼Ÿ\n\nå·¥ä¸šé©å‘½å‡ºç°çš„æ—¶å€™ï¼Œæ‰€æœ‰äººéƒ½è®¤ä¸ºå·¥ä¸šé©å‘½ä¼šè§£æ”¾äººç±»çš„åŠ³åŠ¨ï¼Œä½†å®é™…ä¸Šäººç±»æ¯”å½“å¹´å†œå¥´çš„å·¥ä½œæ—¶é—´é•¿å¤šäº†ã€‚æœªæ¥ 10 å¹´ï¼Œæˆ‘ä»¬çš„æ³¨æ„åŠ›ä¼šè¢«åˆ‡å¾—æ›´ç¢ï¼Œå·¥ä½œå’Œç”Ÿæ´»ä¼šå¼¥åˆå¾—æ›´ç´§ã€‚\n\n#### 3.2.2. ä¸–ç•Œçš„é«˜é¢‘åŒ–è¿˜ä¼šå¸¦æ¥å¾ˆå¤šç°è±¡\n\nï¼ˆ1ï¼‰ç³»ç»Ÿå˜è„†å¼±ã€‚è¿™å‡ å¹´ï¼Œå¤§å®¶è¶Šæ¥è¶Šæ˜æ˜¾åœ°æ„Ÿè§‰ï¼Œä¸–ç•Œä¼¼ä¹æ˜¯ä¸€ä¸ªå·¨å¤§çš„è‰å°ç­å­ã€‚å› ä¸ºå½“ä¸€ä¸ªç³»ç»Ÿé¢‘ç‡è¶Šæ¥è¶Šé«˜çš„æ—¶å€™ï¼Œè¿™ä¸ªç³»ç»Ÿä¼šæ…¢æ…¢å¤±å»é²æ£’æ€§ï¼Œå°±åƒä¸€è‰˜å¤§èˆ¹ï¼Œæ™ƒå¾—è¶Šæ¥è¶Šå‰å®³çš„æ—¶å€™ï¼Œé—®é¢˜ä¼šè¶Šæ¥è¶Šå‡¸æ˜¾ã€‚\n\nï¼ˆ2ï¼‰åŠ›ä¸ä»å¿ƒçš„ä½“éªŒå˜å¤šã€‚ä»¥å‰æœ‰å¿ƒåŠ›åšå¾ˆå¤šäº‹ï¼Œç°åœ¨æ›´å®¹æ˜“è§‰å¾—ç´¯ï¼Œå¿ƒç¥æ›´å®¹æ˜“æ•£ã€‚å› ä¸ºåœ¨ç¤¾ä¼šé¢‘ç‡å˜é«˜åï¼Œæ¯å¤©çš„è€—èƒ½å˜é«˜äº†ï¼Œä½ éœ€è¦æ¶ˆè€—ä¸‰å€ã€äº”å€äºè¿‡å»çš„èƒ½é‡ï¼Œåšå®Œä¸€å¤©çš„äº‹æƒ…ã€‚\n\nï¼ˆ3ï¼‰åˆºæ¿€å˜å¾—æ›´å¤šã€‚æ„Ÿåˆ°æ¶ˆè€—åï¼Œ**å¤šæ•°äººåº”å¯¹æ¶ˆè€—çš„æ–¹æ³•ä¸æ˜¯è®©è‡ªå·±å®‰é™ä¸‹æ¥ï¼Œè€Œæ˜¯é€šè¿‡æš´é¥®æš´é£Ÿç­‰åˆºæ¿€è®©è‡ªå·±éº»æœ¨ã€‚**\n\n- çˆ†ç‚’ã€çˆ†çƒ¤ï¼Œç«é”…ç±»çš„è¿é”é¤é¥®è¶Šæ¥è¶Šå¤š\n- å¯†å®¤ã€é¬¼å±‹è¿™ç±»åˆºæ¿€æ€§çš„å¨±ä¹è¶Šæ¥è¶Šå¤šã€‚\n- å¾ˆå¤šäººé€šè¿‡å¼ºåˆºæ¿€ï¼Œä»¥æ­¤æ‰¾å›ç”Ÿè€Œä¸ºäººçš„æ„Ÿè§‰ã€‚æˆ‘å»ä¸œå—äºšï¼Œé‚£é‡Œæ ‡å‡†å¥¶èŒ¶çš„ç³–ç²¾å«é‡æ˜¯ä¸­å›½çš„ä¸¤å€ï¼Œæˆ‘ä»¬è§‰å¾—å¤ªç”œäº†ï¼Œä»–ä»¬è§‰å¾—åˆšåˆšå¥½ï¼Œè¿™æ˜¯ä¸€ä¸ªè¶‹åŠ¿çš„ç¼©å½±ã€‚\n\nï¼ˆ4ï¼‰è¡Œä¸š/åœ°åŸŸçš„å¤§æµåŠ¨ã€‚å½“ä¸€ä¸ªäººæ— æ³•é€‚åº”è¿™ä¸ªé«˜é¢‘çš„ç¯å¢ƒæ—¶ï¼Œä»–ä¼šé€šè¿‡å„ç§æ–¹å¼`é™å›åˆ°ä»å‰ç†Ÿæ‚‰çš„é¢‘ç‡ä¸­å»`ã€‚æœ‰äººé€‰æ‹©è¡Œä¸šé™é¢‘ï¼Œæ¯”å¦‚æ”¾å¼ƒäº’è”ç½‘ï¼Œé€‰æ‹©è€ƒç¼–è€ƒå…¬ï¼›æœ‰äººé€‰æ‹©åœ°åŸŸé™é¢‘ï¼Œæ¯”å¦‚é€ƒç¦»åŒ—ä¸Šå¹¿ï¼Œå›è€å®¶å®‰å±…ã€‚å»å¹´ï¼Œä¸œä¸‰çœäººå£å‡€æµå…¥äº†ï¼Œå›å»çš„ä¸æ˜¯è€äººï¼Œå›å»çš„æ˜¯ä¸€å¤§æ‰¹å·ç´¯äº†çš„å¹´è½»äººã€‚ä»–ä»¬ä¸æ˜¯èººå¹³äº†ï¼Œä»–ä»¬åªæ˜¯æƒ³å›åˆ°ç†Ÿæ‚‰çš„é¢‘ç‡ä¸­ï¼Œæ¥ä¸‹æ¥çš„ä¸‰åˆ°äº”å¹´ï¼Œè¿™ä¸ªè¶‹åŠ¿è¿˜ä¼šåŠ å‰§ã€‚\n\n#### 3.2.3. ä¸ºä½•å·èµ·æ¥äº† ï¼Ÿ\n\næˆ‘ä»¬å†çœ‹ä¸‹é¢è¿™å¼ å›¾ï¼Œå·¦ä¸Šè§’æ˜¯è¿‡å»çš„ç¤¾ä¼šå˜åŒ–ï¼Œè¿™ä¸ªå˜åŒ–åœ¨é¢‘è°±ä¸Šæ˜¯ä¸€æ ¹ç›´çº¿ï¼Œä»£è¡¨äº†é¢‘ç‡ä¸å˜ã€‚åˆ›ä¸šè€… A åœ¨é¢‘è°±å¯¹åº”çš„ä½ç½®é‡Œ `æ•æ‰åˆ°` äº†æœºä¼šï¼Œå¹¶åŸºäºæ­¤æ„å»ºäº†è‡ªå·±çš„äº§ä¸šï¼Œå°±æ˜¯å³ä¸Šè§’é‚£ä¸ªå°é»‘æ¡†ã€‚\n\néšç€æ—¶ä»£ä»å·¦ä¸Šè§’å‘å±•åˆ°å·¦ä¸‹è§’ï¼Œå˜åŒ–è¶Šæ¥è¶Šå¿«ï¼Œé¢‘ç‡è¶Šæ¥è¶Šé«˜ï¼Œè¿™ä¸ªå˜åŒ–åœ¨é¢‘è°±ä¸Šçš„æœºä¼šä»åŸæ¥çš„ä½ç½®å‘å³ç§»åŠ¨äº†ä¸€æ®µè·ç¦»ã€‚\n\n![image.jpg600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407251811002.png?imageSlim)\n\næ­¤æ—¶è¿™ä¸ªåˆ›ä¸šè€…å‘ç°ï¼Œæ›¾ç»çš„æœºä¼šæ²¡æœ‰äº†ã€‚**ä»¥å‰ä¸€ä¸ªæœˆä¸€ä¸ªçƒ­ç‚¹ï¼Œç°åœ¨å¾®åšä¸€å¤©åä¸ªçƒ­ç‚¹ï¼Œäºæ˜¯ä»–å¼€å§‹åŠªåŠ›ä¼´éšç€ç¤¾ä¼šå˜åŒ–å¾€å³ç§»ï¼Œè®©å›¢é˜Ÿè¶Šæ¥è¶Šæ‹¼ã€è¶Šæ¥è¶Šå¿«ã€è¶Šæ¥è¶Šæ“…é•¿å¤„ç†çº·ç¹çš„ä¿¡æ¯ï¼Œè¿™æ ·ä»–ä»¬èƒ½ç»§ç»­å’Œè¿™ä¸ªæœºä¼šå¾…åœ¨ä¸€èµ·ã€‚è¿™æ˜¯ä»Šå¤©ç»å¤§å¤šæ•°äººçš„é€‰æ‹©ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ã€Œå·ã€ã€‚**\n\nä½†ï¼Œåªæœ‰ã€Œå·ã€è¿™ä¸€æ¡è·¯å—ï¼Ÿ\n\n#### 3.2.4. æˆ‘ä»¬è¯¥å¦‚ä½•åº”å¯¹è¿™ç§ é¢‘ç‡çš„è·ƒè¿ï¼Ÿ  â†’  ã€Œå‚…é‡Œå¶å˜æ¢ã€çš„æ€è€ƒæ–¹å¼\n\nä¿¡å·ä¸ç³»ç»Ÿé¢†åŸŸå­˜åœ¨ä¸€ä¸ªå…¬å¼å«ã€Œå‚…é‡Œå¶å˜æ¢ã€ï¼Œå¤§è‡´çš„æ¶µä¹‰æ˜¯ï¼Œä¸–ç•Œä¸Šæ‰€æœ‰çš„å‡½æ•°éƒ½å¯ä»¥æ‹†è§£ä¸ºä¸åŒå‘¨æœŸå‡½æ•°çš„å åŠ ã€‚ç®€å•çš„è¯´ï¼Œä¸‡ç‰©çš†æœ‰éŸµå¾‹ï¼Œè¿™ä¸ªéŸµå¾‹æ˜¯ä¸åŒé¢‘ç‡å‘¨æœŸçš„å åŠ ã€‚ä¹‹æ‰€ä»¥ä½ æ²¡æœ‰çœ‹å‡ºéŸµå¾‹ï¼Œæ˜¯å› ä¸ºä½ æ²¡èƒ½æ‹†è§£å‡ºèƒŒåå¯¹åº”çš„å‘¨æœŸæ€§è§„å¾‹ã€‚æ¯”å¦‚ï¼Œä¸‹å›¾è¿™æ¡ç»¿è‰²çš„æ›²çº¿çœ‹ä¼¼å¤æ‚ï¼Œä½†è¿›è¡Œä¸€ä¸ªå‚…é‡Œå¶å˜æ¢åï¼Œä½ ä¼šå‘ç°å®ƒå…¶å®æ˜¯ä¸€ä¸ªé«˜é¢‘è§„å¾‹å’Œä¸€ä¸ªä½é¢‘è§„å¾‹çš„ç®€å•å åŠ ã€‚\n\n![image.jpg600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407251811003.jpeg?imageSlim)\n\nè¿™ä¸ªæ¦‚å¿µè¦æ€ä¹ˆæ˜ å°„åˆ°ç°å®ä¸–ç•Œï¼Ÿå‡è®¾æˆ‘æ˜¯ä¸€ä¸ªå¥¶èŒ¶åº—çš„è€æ¿ï¼Œè¿™æ¡ç»¿çº¿æ˜¯æ•´ä½“çš„ç”Ÿæ„èµ°åŠ¿ã€‚è¿›ä¸€æ­¥æ‹†è§£åï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå½±å“ç”Ÿæ„çš„è¦ç´ æ‹†åˆ†æˆä¸¤ä¸ªå‡½æ•°ã€‚é«˜é¢‘å‡½æ•°ç›¸å½“äºæ¯å‘¨çš„è¿è¥ç­–ç•¥å’Œç®¡ç†ç­–ç•¥ï¼Œä½é¢‘å‡½æ•°ç›¸å½“äºäº§å“å®šä½ï¼Œæˆ–è€…æ˜¯äººç¾¤ç”»åƒã€‚æˆ‘ä»¬å¯¹ä¸–ç•Œçš„è§‚å¯Ÿéƒ½æ˜¯ä¸åŒè¶‹åŠ¿çš„å åŠ ï¼Œè¿™äº›è¶‹åŠ¿æœ‰é•¿æœ‰çŸ­ï¼Œæœ‰å¿«æœ‰æ…¢ï¼Œä½ åœ¨ä»€ä¹ˆé¢‘ç‡ä¸Šæ€è€ƒé—®é¢˜ï¼Œå†³å®šäº†ä½ åœ¨ç©ä¸€ä¸ªä»€ä¹ˆæ¨¡å¼çš„æ¸¸æˆã€‚\n\nè€Œè¿™ä¸ªä¿¡å·æœ‰æ„æ€çš„åœ°æ–¹åœ¨äºï¼Œå› ä¸ºæ³¢é•¿å’Œé¢‘ç‡çš„ä¹˜ç§¯æ˜¯ä¸€ä¸ªå¸¸æ•°ã€‚æ‰€ä»¥é¢‘ç‡è¶Šä½ï¼Œæ³¢é•¿è¶Šé•¿ï¼Œä¼ æ’­è·ç¦»è¶Šè¿œã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåŸå¸‚ç”µè§†å¡”è¦ä¿®å¾ˆé«˜çš„åŸå› ï¼Œå› ä¸ºç”µè§†å¡”çš„é«˜åº¦å’Œæ³¢é•¿æˆæ­£æ¯”ï¼Œå¡”è¶Šé«˜ï¼Œæ³¢é•¿è¶Šé•¿ï¼Œèƒ½è¦†ç›–çš„åŸå¸‚é¢ç§¯è¶Šå¤§ã€‚\n\næ‰€ä»¥ `**è¶Šæ˜¯ä½é¢‘çš„ä¿¡å·ï¼Œè¶Šæ˜¯æœ´å®æ— åï¼Œè¶Šæ˜¯ç©¿è¶Šå‘¨æœŸ**`**ã€‚**\n\nå¦‚æœæˆ‘ä»¬å†çœ‹ä¹‹å‰è¿™å¼ å›¾ï¼Œé¢å¯¹ä¸æ–­åŠ é€Ÿçš„ä¸–ç•Œï¼Œæˆ‘ä»¬ä¾¿æœ‰äº†å¦ä¸€ç§è§£æ³•ï¼Œå°±æ˜¯é€šè¿‡ã€Œå‚…é‡Œå¶å˜æ¢ã€çš„æ€è€ƒæ–¹å¼ï¼Œå°†å˜åŒ–åˆ†è§£ä¸ºé«˜é¢‘å’Œä½é¢‘ä¿¡å·çš„å åŠ ï¼Œç„¶åæˆ‘ä»¬å°†è‡ªå·±ä¸“æ³¨åœ¨ä½é¢‘ä¿¡å·ä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºã€Œå®šã€ã€‚\n\n![image.jpg600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407251811004.png?imageSlim)\n\næ­¤æ—¶è¿™ä¸ªåˆ›ä¸šè€…å‘ç°ï¼Œå…¬å¸é‡è¦çš„ä¸æ˜¯èƒ½å¦è·Ÿä¸Šæ¯å¤©çš„ 10 ä¸ªçƒ­ç‚¹ï¼Œæˆ–è€…æ¯æ—¥æ•°æ®çš„ç²¾ç¡®æ§åˆ¶ã€‚è€Œæ˜¯æŠŠç²¾åŠ›ä¸“æ³¨åœ¨äº†è¿™ä¸ªæ›´åŠ ä½é¢‘å˜åŒ–çš„é•¿æœŸè¶‹åŠ¿ä¸­ï¼Œè¿™ä¸ªè¶‹åŠ¿å¯¹å¤–å¯èƒ½æ˜¯æ„¿æ™¯ï¼Œå¯¹å†…å¯èƒ½æ˜¯åˆå¿ƒã€‚\n\næ‰€ä»¥æ¯ä¸€ä¸ªå½“ä¸‹æˆ‘ä»¬éƒ½å¯ä»¥æœ‰ä¸¤ç§é€‰æ‹©ã€‚\n\n- ä¸€ä¸ªé€‰æ‹©æ˜¯ ã€Œå·ã€ï¼Œä¸æ–­æé«˜è‡ªå·±çš„é¢‘ç‡ï¼Œåº”å¯¹ç¤¾ä¼šå˜åŒ–ã€‚\n- å¦ä¸€ä¸ªæ–¹å‘æ˜¯ ã€Œå®šã€ï¼Œå›åˆ°æœ€åº•å±‚æœ€æœ¬è´¨çš„è¶‹åŠ¿ä¸Šå»ï¼Œå»æƒ³ä¸€æƒ³ï¼Œä½ æ‰€å¤„çš„è¿™ä¸ªè¡Œä¸šçš„å…³é”®é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿä½ ä¸ªäººçš„æ ¸å¿ƒèƒ½åŠ›æ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœæœªæ¥æˆ‘æ‰€åœ¨çš„äº§ä¸šåªä¼šç•™ä¸‹ä¸€ä¸ªäººï¼Œæˆ‘æ€ä¹ˆé…å¾—ä¸Šåšè¿™ä¸€ä¸ªäººï¼ŸAI èƒ½å¦‚ä½•æ”¾å¤§æˆ‘çš„èƒ½åŠ›ï¼Œå¼¥è¡¥æˆ‘çš„çŸ­æ¿ï¼Ÿ\n\nè¿‡å»ä¸€å¹´ï¼Œæˆ‘ä»¬çœ‹äº†å¾ˆå¤š AI å…¬å¸ï¼Œè§äº†å¾ˆå¤šå¤§ç‰›ï¼Œåšäº†å¾ˆå¤šè®¿è°ˆï¼Œå„ä¸ªåŒäº‹æ¯å¤©éƒ½åœ¨å¸‚åœºä¸Šæ‰¾äººèŠå¤©ã€‚ä½†æˆ‘å’Œä¸€ä¸ªå¹´è½»åŒäº‹è¯´ï¼Œä½ ä¸è¦ç®¡é‚£äº›ï¼Œä½ å°±è®¤è®¤çœŸçœŸ`è¯»è®ºæ–‡`å°±å¥½ã€‚ å°åŠå¹´ä¹‹åï¼Œæœ‰ä¸€å¤©ï¼Œæˆ‘çœ‹ä»–å’Œä¸€ç¾¤èµ„å†æ›´æ·±çš„åŒäº‹ä¸€èµ·å¼€ä¼šï¼Œæˆ‘å‘ç°ä»–é—®å‡ºæ¥çš„é—®é¢˜æ˜¯æ›´å°–é”ï¼Œæ›´æœ‰æ·±åº¦çš„ã€‚`è¿™å°±æ˜¯å·å’Œå®šçš„åŒºåˆ«`ã€‚\n\næœªæ¥çš„ä¸–ç•Œæ¯”çš„æ˜¯å®šåŠ›ï¼Œå› ä¸ºå·æ˜¯æ²¡æœ‰ç©·å°½ï¼Œ\n\n- `å·`æ˜¯å‘ç€æ— ç©·å¤§ä¼˜åŒ–ï¼Œ\n- è€Œ`å®š`æ˜¯å‘ç€é›¶ä¼˜åŒ–ã€‚\n\næ‰€ä»¥å·æ˜¯æ²¡æœ‰ä¸Šé™çš„ï¼Œè€Œå®šæ˜¯æœ‰ä¸‹é™çš„ã€‚ä¸€ä¸ªäººä»Šå¤©èƒ½è·‘ä¿¡æ¯ï¼Œèƒ½è¿½çƒ­ç‚¹ï¼Œèƒ½æ¯å¤©è§ 10 ä¸ªäººï¼Œä½†ä»¥åçš„ä¸–ç•Œéƒ½æ˜¯ agent å’Œ agent ä¹‹é—´äº¤æµï¼Œ**æˆ‘ä»¬èƒ½å·å¾—è¿‡ä¸€ä¸ª agent å—**ï¼Ÿ\n\nè¶Šåœ¨é«˜é¢‘çš„æ—¶ä»£ï¼Œè¶Šæ˜¯å¿™å¾—åƒçƒ­é”…ä¸Šçš„èš‚èšæ—¶ï¼Œè¶Šè¦å®šä¸‹æ¥ï¼Œçœ‹é•¿æœŸã€‚é•¿æœŸçš„äº‹æƒ…ä¹‹æ‰€ä»¥éš¾åšï¼Œæ˜¯å› ä¸ºå®ƒå¾€å¾€çœ‹ä¸åˆ°çŸ­æœŸçš„æ”¶ç›Šã€‚ä½†ä¹Ÿå› æ­¤ï¼Œä½ å¯ä»¥æ‰“è´¥å¾ˆå¤šå¿ƒæ€¥çš„äººã€‚å› ä¸ºé¢‘ç‡å˜é«˜ï¼Œä¸€æ—¦å…±è¯†ç¡®è®¤ï¼Œå¸‚åœºç»™ä½ çš„åé¦ˆä¹Ÿä¼šæ›´å¤§ã€æ›´å¿«ã€‚å¦‚æœè¯´ä»¥å‰çš„ä¸–ç•Œæ˜¯äºšé©¬é€Šçš„è‚¡ç¥¨ï¼Œä¸€æ­¥ä¸€æ­¥ï¼Œç¨³å®šåœ°æ¶¨åˆ°ä»Šå¤©ï¼Œé‚£ç°åœ¨çš„ä¸–ç•Œæ›´åƒè‹±ä¼Ÿè¾¾çš„è‚¡ç¥¨ï¼Œè™½ç„¶æ•°å¹´ä¸æ¶¨ï¼Œä½†å¯ä»¥çªç„¶ä¸€å¹´æ¶¨åå¹´çš„é’±ã€‚\n\n**æ‰€ä»¥ï¼Œæ‰¾åˆ°æ ¹æœ¬çš„å¤§åŠ¿ï¼Œä¹‹åä¾¿ä½†è¡Œå¥½äº‹ï¼Œé™ç­‰é£æ¥ã€‚**\n\n## 4. å†…å¿ƒçš„ä½é¢‘ä¿¡å· - ç”Ÿå‘½åŠ›\n\næœ€åï¼Œé™¤äº†å¤–éƒ¨çš„è¶‹åŠ¿å’Œæ–¹å‘ï¼Œæˆ‘è¿˜å¸Œæœ›å¤§å®¶éƒ½èƒ½æ‰¾åˆ°è‡ªå·±å†…å¿ƒçš„ä½é¢‘ä¿¡å·ã€‚\n\nå¯¹æˆ‘æ¥è¯´ï¼Œæˆ‘äººç”Ÿä¸­æœ€é‡è¦çš„ä½é¢‘ä¿¡å·æ˜¯`**ã€Œç”Ÿå‘½åŠ›ã€**`ä¸‰ä¸ªå­—ã€‚æˆ‘æ˜¯ 2012 å¹´å…¥çš„è¡Œï¼Œè¿™åå‡ å¹´é—´ï¼Œè§‚å¯Ÿäº†å¾ˆå¤šåˆ›å§‹äººçš„èµ·èµ·è½è½ã€‚æœ€åæˆ‘å‘ç°ï¼ŒçœŸæ­£é€ å°±æˆåŠŸçš„ä¸æ˜¯ä¸€ä¸ªäººçš„èµ„æºã€ç»éªŒã€èƒ½åŠ›ï¼Œè€Œæ˜¯å›°å¢ƒä¹‹ä¸­çš„åšéŸ§ï¼Œå’Œå–å¾—æˆå°±ä¹‹åçš„è‡ªæˆ‘çªç ´ã€‚**å…¶å®äººç”Ÿå¾ˆå¤šé‡å¤§å†³ç­–ï¼Œå¾€å¾€ä¸æ˜¯åŸºäºé€»è¾‘ã€‚è€Œæ˜¯å½“ä½ å®‰é™ä¸‹æ¥æ—¶ï¼Œä½ çš„å†…å¿ƒæ·±å¤„å°±å‡èµ·äº†ä¸€è‚¡åŠ›é‡ï¼Œå®ƒç»™ä½ ä¸€æ¡æš–æµï¼Œè€Œè¿™æ¡æš–æµä¼šä¸€ç›´æŒ‡å¼•ä½ å‰è¿›çš„æ–¹å‘ã€‚è¿™ç§å†…å¿ƒæœ€æœ¬çœŸçš„åŠ›é‡ï¼Œç»¿æ´²æŠŠå®ƒå½’ç»“ä¸ºã€Œç”Ÿå‘½åŠ›ã€ï¼Œå¸Œæœ›å¤§å®¶å»ä½“ä¼šå®ƒã€å›åº”å®ƒã€ç‚¹äº®å®ƒ**ã€‚\n\né‚£ä»€ä¹ˆæ˜¯ä¸€ä¸ªæœ‰ã€Œç”Ÿå‘½åŠ›ã€çš„äººå‘¢ï¼Ÿæˆ‘ä»¬è§‚å¯Ÿäº†å¾ˆå¤šåˆ›å§‹äººï¼Œå‘ç°ç”Ÿå‘½åŠ›å¼ºçš„åˆ›å§‹äººä¼šæœ‰ä¸¤ä¸ªå…±åŒç‚¹ï¼š\n\n**ä¸€ã€å®äº‹æ±‚æ˜¯**\n\nå¯¹äº‹å®æ±‚æ˜¯çš„äººè€Œè¨€ï¼Œä½ å¤¸ä»–ä¹Ÿå¥½ï¼Œéª‚ä»–ä¹Ÿå¥½ï¼Œè¯´ä»–æƒ³å¬çš„ä¹Ÿå¥½ï¼Œè¯´ä»–ä¸æƒ³å¬çš„ä¹Ÿå¥½ï¼Œä»–éƒ½ä¸ä¼šä»£å…¥ã€Œæˆ‘ã€å»è¡¡é‡è‡ªå·±çš„æ„Ÿå—ã€‚ä»–çš„ååº”ä¼šæ˜¯ï¼Œä½ è¯´å¾—å¯¹ï¼Œæˆ‘ä»¬é©¬ä¸Šæ”¹ï¼›ä½ æŒ‡å‡ºäº†å¾ˆå…³é”®çš„é—®é¢˜ï¼Œæ˜¯æˆ‘ç–å¿½äº†ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥è§£å†³ã€‚ä»–ä»¬åƒæœºå™¨äººä¸€æ ·ï¼Œä¸ä¼šå…³æ³¨æ„Ÿå—ï¼Œåªæ˜¯å…³æ³¨è¿™ä¸ªä¿¡æ¯åé¢çš„å¯å‘å’Œè¡ŒåŠ¨ã€‚\n\n**äºŒã€æ— æ¡ä»¶åœ°ã€å…¨ç„¶åœ°çˆ±è‡ªå·±ã€‚**\n\nä½ ä¼šå‘ç°é‚£äº›ä¼˜ç§€çš„åˆ›å§‹äººå¤§å¤šéƒ½æŒºçˆ±è‡ªå·±çš„ã€‚æˆ‘è§è¿‡ä¸€ä¸ªä¼ä¸šå®¶ï¼Œå½“æ—¶å…¬å¸é‡åˆ°å¾ˆå¤§çš„æŒ«æŠ˜ï¼Œæˆ‘å¬è¯´åï¼Œé—®ä»–æ™šä¸Šåœ¨å“ªå„¿ï¼Œä»–è¯´ä»–è‡ªå·±ä¸€ä¸ªäººåœ¨åƒç«é”…ã€‚æˆ‘å°±å¾ˆå¥‡æ€ªï¼Œé‡åˆ°è¿™ä¹ˆå¤§çš„äº‹ï¼Œä½ æ€ä¹ˆå»åƒç«é”…äº†å‘¢ã€‚ä»–å›æˆ‘è¯´ï¼Œä»Šå¤©æ„Ÿè§‰æœ‰ç‚¹æ²®ä¸§ï¼Œåƒä¸ªç«é”…è®©è‡ªå·±å¼€å¿ƒä¸€ä¸‹ã€‚èµ·åˆçš„ä¸‰å¹´åˆ›ä¸šä¸­ï¼Œä»–èµ°è¿‡ä¸€äº›å¼¯è·¯ï¼Œä¸€ä¸ªä¸çˆ±è‡ªå·±çš„äººå¯èƒ½ä¼šæƒ³ï¼Œå”‰ï¼Œæˆ‘å¤ªå‚»äº†ï¼Œä¸èµ°å¼¯è·¯æˆ‘æ—©å°±èµ·é£äº†ã€‚ä½†ä¸€ä¸ªçˆ±è‡ªå·±çš„äººä¼šæƒ³ï¼ŒæŒºå¥½ï¼Œæœ‰ç‚¹æ„æ€ï¼Œä¸èµ°è¿™äº›å¼¯è·¯ä»¥åå†™ä¹¦éƒ½ä¸çŸ¥é“æ€ä¹ˆå†™ã€‚\n\næ‰€ä»¥ä¸€ä¸ªæœ‰ç”Ÿå‘½åŠ›çš„äººå¯¹å¤–ä¼šå®äº‹æ±‚æ˜¯ï¼Œå› ä¸ºåªæœ‰å®äº‹æ±‚æ˜¯æ‰èƒ½è§£å†³é—®é¢˜ã€‚ä½†å®äº‹æ±‚æ˜¯éœ€è¦å‹‡æ•¢çš„ï¼Œæ˜¯éœ€è¦å…‹æœææƒ§çš„ï¼Œæ‰€ä»¥ä¸€ä¸ªå®äº‹æ±‚æ˜¯çš„äººå›åˆ°å†…å¿ƒåˆæ˜¯çˆ±è‡ªå·±çš„ã€‚\n\næœ€åçš„æœ€åï¼Œå¸Œæœ›å¤§å®¶åœ¨è¿™ä¸ªé¢‘ç‡è·ƒè¿çš„ä¸–ç•Œä¸­ï¼Œåšä¸€ä¸ªæœ‰ç”Ÿå‘½åŠ›çš„ï¼Œæœ‰å®šåŠ›çš„äººã€‚æ€è€ƒäº‹ç‰©æœ¬è´¨ï¼Œå›åˆ°æœ´å®çš„ç”Ÿæ´»é‡Œã€‚\n\n> æ¥è‡ª: [å¼ æ´¥å‰‘ï¼šæŠ•èµ„ä¸­çš„é«˜é¢‘ä¸ä½é¢‘ | 42ç« ç»](https://mp.weixin.qq.com/s/oVGx54MEIAahpgY8QYcd-Q)\n\n","9c95a83ff9d35e63a4fbf5bc63b09150":"\n# æ’­å®¢ï¼šå¼ äº‘å¸†çš„èŠ’æ ¼ä¹‹é“\n\n\n`#èŠ’æ ¼` `#çŸ¥è¡Œåˆä¸€`  `#æ’­å®¢` `#2023/12/23` \n\n\n## ç›®å½•\n<!-- toc -->\n ## æ€»ç»“ \n\n- çœŸæ­£çš„çŸ¥è¡Œåˆä¸€æ˜¯å†…åŒ–ï¼Œæ˜¯æ¶ˆåŒ–\n- å…·æœ‰ã€Œ**æ—¶ç©ºæŒ¤å æ€§**ã€çš„ä¸œè¥¿éƒ½ä¸€å®šè¦æ…é‡\n- å¿«ä¹çš„ç§‘å­¦\n\t- å†…å•¡è‚½\n\t\t- è·‘æ­¥\n\t\t- åƒè¾£\n\t\t- è§£å‡ºä¸€é“å¾ˆéš¾çš„æ•°å­¦é¢˜\n\t- è¡€æ¸…ç´ \n\t\t- æ‹¥æŠ±\n\t\t- äº²å¯†å…³ç³»\n- æ‹¼å›¾ä¸–ç•Œè§‚\n\t- å†å²å“²å­¦é€šç”¨å­¦ç§‘ï¼Œæ‹¼å›¾çš„ä¸­å¿ƒï¼Œå¾ˆå®¹æ˜“å’Œå…¶ä»–å­¦ç§‘èåœ¨ä¸€èµ·\n\t- è®¡ç®—æœºã€åŒ»å­¦ç­‰ç›¸å¯¹ä¸“ä¸š\n- ä¹ æƒ¯\n\t- å½“ä½ æ‹¥æœ‰ä¸€ä¸ªä¹ æƒ¯ï¼Œä½ ä¼šå¿˜äº†è¿™ç§ä¹ æƒ¯\n\t- è·‘æ­¥èƒ½å¤Ÿå˜æˆä¹ æƒ¯å—ï¼Ÿ\n\t- æ€è€ƒèƒ½å¤Ÿå˜æˆä¹ æƒ¯å—ï¼Ÿ\n- é‡å˜ä¸ä¼šå¼•èµ·è´¨å˜\n\t- å…³å¿ƒè´¨é‡ï¼Œè€Œéæ•°é‡\n\t- çœŸä¼ ä¸€å¥è¯ï¼Œå‡ä¼ ä¸‡å·ä¹¦\n- æˆåŠŸæœ‰å¶ç„¶æ€§ï¼Œå¤±è´¥æœ‰å¿…ç„¶æ€§ï¼Œæ‰€ä»¥å»ç ”ç©¶å¤±è´¥\n\n## ä¸€ã€çŸ¥è¡Œåˆä¸€\n\n- äººç”Ÿçš„ç»ˆæå“²å­¦æ˜¯èŠ’æ ¼æ‰€è¯´ã€Œ**çŸ¥è¡Œåˆä¸€**ã€ ï¼šä¸ä»…èƒ½æŠŠäº‹æƒ…åšæˆï¼Œäººç”Ÿä¹Ÿæ˜¯**è‡ªæ°**çš„\n- å¯¹çŸ¥è¯†è¯šå®ï¼ŒçŸ¥é“å°±æ˜¯çŸ¥é“ï¼Œä¸çŸ¥é“å°±æ˜¯ä¸çŸ¥é“ã€‚**çŸ¥ä¹‹ä¸ºçŸ¥ä¹‹ï¼Œä¸çŸ¥ä¸ºä¸çŸ¥**\n- è¯»ä¹¦ä¸ä¼šå¸¦æ¥æ”¹å˜ï¼Œæ€è€ƒä¸ä¼šå¸¦æ¥æ”¹å˜ï¼Œåªæœ‰è¯»ä¹¦åçš„æ€è€ƒè€Œå¸¦æ¥çš„è¡ŒåŠ¨æ‰ä¼šå¯¹ç”Ÿæ´»æœ‰æ”¹å˜ï¼ˆå³**çŸ¥è¡Œåˆä¸€**ï¼‰\n- å¯¹æ¬²æœ›**è¯šå®**ï¼Œå¯¹çŸ¥è¯†æ˜¯å¦æŒæ¡è¦**è¯šå®**\n- äººåªèƒ½æ´»ä¸€æ¬¡ï¼Œä½ è¦æƒ³å¥½æ€ä¹ˆæ´»\n\n- ã€Œ**çŸ¥**ã€æœ‰ä¸€äº›çŸ¥è¯†å’Œæ–¹æ³•è®ºï¼Œ**å†…åŒ–**ä¸ºè‡ªå·±çš„ã€‚  \n- ã€Œ**è¡Œ**ã€å¯¹çŸ¥é“çš„ä¿æŒ**è¯šå®**ï¼Œè¡ŒåŠ¨ä¸Šï¼Œåšåˆ°å®ƒã€‚  \n- ã€Œ**åˆ**ã€æ—¶é—´ç®¡ç†ã€‚é¢—ç²’åº¦è¦ç»†ï¼Œåœ¨æ—¶é—´è¿™ä¸€çº¿æ€§ç»´åº¦ä¸Šç»„åˆçŸ¥ä¸è¡Œã€‚  \n- ã€Œ**ä¸€**ã€åœ¨æ‰€è¿½æ±‚çš„ä¸€ä¸ªäº‹ä¸šæˆ–ä¸€ä¸ªç›®æ ‡ä¸Šï¼ŒåšæŒä¸‹å»ï¼Œä¹Ÿè®¸**3åˆ°5å¹´**å°±å¤Ÿï¼Œä¸€å®šèƒ½è·å¾—ä½ æƒ³è¦çš„â€œæˆåŠŸâ€ã€‚\n\n## äºŒã€å†…åŒ–\n\n- é“ç†ä¸åº”è¯¥åœåœ¨ã€Œ**è·å¾—å³æ»¡è¶³**ã€çš„é˜¶æ®µï¼Œè¿˜è¦ç”¨è‡ªå·±çš„äººç”Ÿä½“éªŒå°†å®ƒä»¬**å†…åŒ–**ã€‚å³çœŸæ­£**æ¶ˆåŒ–**å®ƒã€‚\n- ä»»ä½•é“ç†ã€é‡‘å¥ä¸ç»**å†…åŒ–**ï¼Œâ€œ**è·å¾—**â€æœ¬èº«å°±æ¯«æ— æ„ä¹‰ã€‚\n\t- æˆ–è€…å¦‚è®¸çŸ¥è¿œæ‰€è¯´ï¼Œå˜æˆé—ªé—ªå‘å…‰ä½†åªæ˜¯è´´åœ¨çš®è‚¤ä¸Šçš„å¡‘æ–™ç‰‡ã€‚\n\näººåº”è¯¥å»ºç«‹ä¸€ä¸ª**é€»è¾‘åº•å±‚**ï¼Œå»ç›¸ä¿¡ä¸€äº›æœ‰é€»è¾‘åˆç†çš„ä¸œè¥¿ï¼Œç„¶åä½ æ‰èƒ½åœ¨é‡Œé¢æ‰¾åˆ°æºå¤´å’Œæ–¹æ³•ï¼Œç†è§£åŸç†ï¼Œäºæ˜¯å°±å¯ä»¥**å†…åŒ–**æˆè‡ªå·±çš„ä¸œè¥¿ï¼Œå¹¶ä¸”å¯ä»¥åšå¾—éå¸¸æ£’ã€‚æ¯”å¦‚ï¼Œç†è§£**å†…å•¡è‚½**ç”Ÿæˆçš„åŸç†ï¼Œå°±å¯ä»¥é©±åŠ¨è‡ªå·±æˆ–ä»–äººå»åšæˆæŸä»¶äº‹çš„åŒæ—¶è¿˜èƒ½è·å¾—å¿«ä¹ã€‚\n\n## ä¸‰ã€å¹¸ç¦ = é¢„æœŸ - èƒ½åŠ›\n\nå¹¸ç¦çš„å…³é”®åœ¨äº**é¢„æœŸä¸èƒ½åŠ›**çš„åŒ¹é…\n\n- äººåªèƒ½æ´»ä¸€æ¬¡ï¼Œä¸€å®šè¦æƒ³å¥½æ€ä¹ˆæ´»ï¼Œå…·æœ‰ã€Œ**æ—¶ç©ºæŒ¤å æ€§**ã€çš„ä¸œè¥¿éƒ½ä¸€å®šè¦æ…é‡\n- å¦‚ä½•çœ‹å¾…æˆåŠŸä¸ç‰©æ¬²ï¼Ÿäººç”Ÿçš„ **1/12 åŸåˆ™**ã€‚ç‚«å¯Œå¹¶ä¸èƒ½ç»™ä½ å¸¦æ¥çœŸçš„è®¤åŒã€‚\n- **è´§å¸**å¯ä»¥**é‡åŒ–**ä¸–é—´ä¸‡ç‰©\n- **é‡‘é’±çš„è¾¹é™…æ•ˆåº”é€’å‡** å’Œ **æ—¶ç©ºæŒ¤å æ€§**\n- å¤§å¤šæ•°äººéƒ½æ˜¯åªæ˜¯æƒ³ï¼Œä¸æ–­æ‹”é«˜æ¬²æœ›ã€‚ä½†ä¸åšä»»ä½•è¡ŒåŠ¨\n- **å³å¾—æ€§æ»¡è¶³**ï¼Œåœ¨è·å¾—çš„é‚£ä¸€åˆ»å°±æ»¡è¶³äº†ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—¶è·å–ä¹è¶£ã€‚å¾ˆå¤šæ—¶å€™å¤§éƒ¨åˆ†éœ€æ±‚éƒ½æ˜¯**ä¼ªéœ€æ±‚**\n\n> ä½ ä»€ä¹ˆéƒ½ä¸åšï¼Œä¸æå‡è‡ªå·±çš„ä»»ä½•èƒ½åŠ›ï¼Œæ¬²æœ›è¿˜å¤§çš„ä¸å¾—äº†\n\n### æ‰©å¤§èƒ½åŠ›åœˆ\n\nä¸æ–­æ‰©å¤§èƒ½åŠ›åœˆï¼Œè€Œä¸æ˜¯åœ¨è‡ªå·±çš„èƒ½åŠ›åœˆé‡Œå¯»æ±‚çªç ´ã€‚\n\n## å››ã€å¿«ä¹çš„ç§‘å­¦æœ¬è´¨\n\nã€Œå¿«ä¹ã€çš„ç§‘å­¦æœ¬è´¨ï¼Œæ€æ ·æ‰èƒ½è·å¾—æ›´é•¿ä¹…çš„å¤šé‡å¿«ä¹ï¼Ÿ\n\nä»ç§‘å­¦è§’åº¦è€Œè¨€ï¼Œèƒ½çœŸæ­£è®©ä½ å¹¸ç¦çš„æ˜¯ **è®¤çœŸåŠªåŠ›è·å¾—çš„å¥–èµå’Œäº²å¯†å…³ç³»ä¹Ÿå°±æ˜¯å†…å•¡è‚½å’Œè¡€æ¸…ç´ **\n\næœ‰ä¸€ä¸ªæ¯”è¾ƒç›´ç™½çš„ä¾‹å­æˆ‘è§‰å¾—å˜‰å®¾åˆ†äº«çš„å¾ˆå¥½ï¼Œä»–è¯´ä»–è®©å¥³å„¿å»åšä¸€ä»¶äº‹ï¼Œå¥³å„¿å®Œæˆä¸€ä»¶äº‹ä¼šå¾—åˆ°å†…å•¡è‚½ï¼Œè€Œå¥³å„¿å¸®åŠ©çˆ¸çˆ¸åšäº†ä¸€ä»¶äº‹è·å¾—çˆ¸çˆ¸èµç¾å¾—åˆ°äº†ã€Œè¡€æ¸…ç´ ã€ã€‚\n\nçˆ¸çˆ¸ç»™å¥³å„¿å·§å…‹åŠ›å¥–åŠ±ï¼Œè€Œå·§å…‹åŠ›äº§ç”Ÿçš„ç³–å¯ä»¥ç©¿è¿‡å¤§è„‘å±éšœä¸ºèº«ä½“åŠŸèƒ½ï¼ŒåŒæ—¶è·å¾—ã€Œå¤šå·´èƒºã€ï¼Œå› æ­¤åªæ˜¯ç®€å•å®Œæˆä¸€ä»¶äº‹ï¼ŒèƒŒåèƒ½æ‹†è§£çš„å¹¸ç¦æ„Ÿè·å¾—å°±éå¸¸å¤šã€‚\n\nè€Œä»–æŠŠè¿™å¥—æœºåˆ¶åªè¦è®¾è®¡å¥½ï¼Œå°±å¯ä»¥åœ¨ä»»ä½•åœºåˆå»è¿ç”¨ã€‚åŒæ—¶ï¼Œä»–æåˆ°ä¸ºä»€ä¹ˆé«˜åƒ§æ‰“åèƒ½å¹¸ç¦ï¼Œå› ä¸ºå¾ˆå¤šçš„æ€è€ƒéƒ½åœ¨å¤§è„‘ä¸­åœ¨ä¸æ–­æ¼”ç»ƒï¼Œç±»ä¼¼**å¤§è„‘ä½“æ“**ï¼Œç®€è€Œè¨€ä¹‹ï¼Œæ˜¯æ™ºæ…§å¾—åˆ°çš„å¿«ä¹ã€‚\n\n**å†¥æƒ³**ä¸ºä»€ä¹ˆå¸¦æ¥å¿«ä¹ï¼Ÿæˆ–è®¸ã€Œ**å¤´è„‘ä½“æ“**ã€ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†\n\n**èººå¹³**è™½ç„¶ä¸èƒ½åˆ†æ³Œå†…å•¡è‚½æˆ–è¡€æ¸…ç´ ï¼Œä½†æ˜¯å¯ä»¥æ’é™¤è´Ÿé¢å½±å“ï¼Œå±äºä¸€ç§**éº»é†‰çŠ¶æ€** ï¼Œå…¶å®è·Ÿ**é…’ç²¾**è¿˜æŒºç±»ä¼¼ã€‚\n\n### å¤šå·´èƒº\n\n- åƒåˆ°**ç¾é£Ÿ**ç¬é—´åˆ†æ³Œçš„å¤šå·´èƒºæˆ–è€…çœ‹åˆ°**æ¼‚äº®çš„äºº**\n- çƒŸæ°‘ï¼Œé…’é¬¼å’Œç˜¾å›å­ç»Ÿç»Ÿä¸å¤šå·´èƒºæ•°é‡æœ‰å…³ï¼Œå—å¤šå·´èƒºæ§åˆ¶ã€‚\n- è´­ç‰©\n- çˆ±æƒ…ï¼Œæ¿€æƒ…ï¼Œå¤§è„‘çš„å¤šå·´èƒºä¼šæŒç»­ 3ã€4å¹´ï¼Œè€Œä¸æ˜¯ä¸ƒå¹´ä¹‹ç—’\n- å¤ªå¤šçš„è„‚è‚ªä¼šé˜»æ­¢å¤šå·´èƒºçš„åˆ†æ³Œ\n\n### å†…å•¡è‚½\n\n- åšæ¯”è¾ƒç—›è‹¦çš„äº‹è·å¾—æˆå°±ï¼Œæ¯”å¦‚è¿åŠ¨å¥èº«ï¼Œæ¯”å¦‚è§£å‡ºä¸€é“å¾ˆéš¾çš„æ•°å­¦é¢˜ã€‚\n- è·‘æ­¥è€…çš„æ„‰æ‚¦æ„Ÿï¼ˆ runner's highï¼‰ã€‚æ˜¯æŒ‡ å½“è¿åŠ¨é‡è¶…è¿‡æŸä¸€é˜¶æ®µæ—¶ï¼Œä½“å†…ä¾¿ä¼šåˆ†æ³Œè„‘å†…å•¡ï¼Œ40 åˆ†é’Ÿå·¦å³æ‰ä¼šåˆ†æ³Œ\n- è¿™å°±æ˜¯**ä¸ºä»€ä¹ˆè¿åŠ¨æ˜¯ç»å¯¹èƒ½å¤Ÿè§£å†³ç„¦è™‘çš„**\n- **åƒè¾£**çš„å¿«æ„Ÿä¹Ÿä¼šä¿ƒè¿›åˆ†æ³Œï¼Œä½“å†…åˆ†æ³Œå†…å•¡è‚½ï¼Œæ¶ˆé™¤èˆŒä¸Šç—›è‹¦\n- å”±å˜¹äº®çš„æ­Œæ›² ä¹Ÿæœ‰åŠ©äºå†…å•¡è‚½çš„äº§ç”Ÿ\n\n### è‚¾ä¸Šè…ºç´ \n\n- æé™è¿åŠ¨ï¼Œèƒ½å¿«é€Ÿç»™ä½ ç¬é—´åé¦ˆï¼Œå› æ­¤ç©æé™çš„äººé˜ˆå€¼å¾€å¾€æ¯”è¾ƒé«˜ã€‚\n\n### è¡€æ¸…ç´ \n\n- è·Ÿä½ äº²å¯†çš„äººï¼ˆå®¶äººã€æœ‹å‹ã€æ‹äººï¼‰ä¸€ä¸ªæ‹¥æŠ±å°±èƒ½åˆ†æ³Œã€‚\n- ã€Œæ‹¥æŠ±ã€ï¼Œè¿™ä»¶äº‹çš„æˆæœ¬æä½ï¼Œä½†æ˜¯æ”¶ç›Šæé«˜\n- å¿§éƒç—‡\n\n### å‚¬äº§ç´ \n\n- å¥³æ€§åœ¨æ€€å­•æœŸé—´åˆ†æ³Œçš„å‚¬äº§ç´ æœ‰åˆ©äºå¢å¼ºå¥¹ä»¬ä¸å©´å„¿ä¹‹é—´çš„è”ç³»ã€‚\n- ç”·æ€§ä¹Ÿä¼šåˆ†æ³Œï¼Œå‚¬äº§ç´ æ˜¯ä¿ƒè¿›æƒ…ä¾£å¿ è¯šçš„â€œå‚¬åŒ–å‰‚â€ï¼Œæ¯”å¦‚å¯¹ç¾å¥³ç…§ç‰‡çš„ååº”ä¸Šæ˜æ˜¾è¿Ÿé’äº†å¾ˆå¤š\n\näººç”Ÿçš„ä¸‰ç§çŠ¶æ€ä¸­ï¼Œã€Œæƒ³æ¸…æ¥šã€å’Œã€Œæ²¡å¾—é€‰ã€åè€Œæ›´å®¹æ˜“æˆåŠŸ\n\n## å››ã€æ‹¼å›¾ä¸–ç•Œè§‚\n\n- æ±‚çŸ¥å¯¹äºæˆ‘æ¥è¯´æ˜¯ä¸ªæœ‰é™å®‡å®™çš„æ‹¼å›¾æ¸¸æˆ\n- å†å²å“²å­¦ç›¸å…³çš„ï¼Œå…¶å®æ›´å±äºæ‹¼å›¾çš„ä¸­é—´æ¿å—ï¼Œå¾ˆå®¹æ˜“å’Œå…¶ä»–å­¦ç§‘æˆ–çŸ¥è¯†äº§ç”Ÿè”ç³»ï¼›\n- ä½†ä¸“ä¸šé¢†åŸŸæ¯”å¦‚åŒ»å­¦æˆ–è€…å…¶ä»–ä¸“ä¸šé¢†åŸŸæ›´å±äºæ‹¼å›¾çš„è¾¹ç•Œ\n- ä»¥å‰çš„ä¸­åŒ»ï¼Œå’Œè¥¿åŒ»éƒ½æ˜¯å½’çº³æ³•\n- è¥¿åŒ»è®¤ä¸ºæ˜¯**äººæ˜¯æ¶²ä½“**\n- ç°ä»£åŒ»å­¦æ˜¯æ¼”ç»æ³•\n- æ˜¾å¾®é•œçš„å‘æ˜ï¼Œæ˜¾å¾®é•œçš„å‘æ˜æºäº**ç»ç’ƒ**çš„é¢—ç²’åº¦\n- ç»ç’ƒã€ç†”ç‚‰ã€å¤§èˆªæµ·æ—¶ä»£ï¼Œé‚£ä¹ˆå¦‚æœä½ ä»äº‹åŒ»å­¦ï¼Œå…·å¤‡æ›´å®å¤§çš„è®¤çŸ¥ä½“ç³»\n- ä½ å¯ä»¥ä»å·¥ä¸šï¼Œåˆ°å†å²åˆ°æ–‡æ˜çš„æ¼”å˜ï¼Œä½ æ›´èƒ½ç†è§£åŒ»å­¦çš„äº§ç”Ÿå’Œå˜åŒ–ã€‚\n- åŸå­å¼¹ä½ æˆ‘é€ ä¸å‡ºæ¥ï¼Œä½†ä¸å¦¨ç¢æˆ‘ä»¬å»ææ‡‚åŸç†\n- ä¸è¦åªåœ¨èƒ½åŠ›åœˆé‡Œå¯»æ‰¾æœ€å¤§æ”¶ç›Šã€‚è€Œè¦ä¸æ–­æ‰©å¤§è‡ªå·±çš„èƒ½åŠ›åœˆ\n- äººç”Ÿé€‰æ‹©ä¸­æ°¸è¿œâ€œ**ä»¥é’±ä¸ºæ ‡å‡†**â€åšå‡ºé€‰æ‹©ï¼Œåœ¨ã€Œèƒ½åŠ›åœˆå†…å¯»æ‰¾æœ€å¤§åŒ–æ”¶ç›Šã€ï¼Œè€Œä¸æ˜¯è¸å‡ºèˆ’é€‚åŒºï¼Œä¸»åŠ¨å¯»æ±‚å­¦ä¹ æ”¹å˜ä¸çªç ´ã€‚**è‡ªå·±ä¸å°±è¿™ç§å…¸å‹æ¡ˆä¾‹å—**\n- å†™ä½œåœ¨æˆ‘çœ‹æ¥æ˜¯ä¸€ç§çµæ„Ÿåˆ›é€ ä¸æ€è€ƒè®°å½•çš„æ´»åŠ¨\n- äººéœ€è¦å»ºç«‹é€»è¾‘åº•å±‚ï¼Œå†æ‰¾åˆ°æ–¹æ³•ã€‚\n\nä»ä¸­ä»–æåˆ°äº†æ˜¾å¾®é•œçš„å‘æ˜ï¼Œé€šè¿‡æ˜¾å¾®é•œå‘æ˜åˆè®²è¿°äº†ç»ç’ƒã€ç†”ç‚‰ã€å¤§èˆªæµ·æ—¶ä»£ï¼Œé‚£ä¹ˆå¦‚æœä½ ä»äº‹åŒ»å­¦ï¼Œå…·å¤‡æ›´å®å¤§çš„è®¤çŸ¥ä½“ç³»ï¼Œä½ å¯ä»¥ä»å·¥ä¸šï¼Œåˆ°å†å²åˆ°æ–‡æ˜çš„æ¼”å˜ï¼Œä½ æ›´èƒ½ç†è§£åŒ»å­¦çš„äº§ç”Ÿå’Œå˜åŒ–ã€‚\n\n## äº”ã€All in?\n\n- å…¨åŠ›ä»¥èµ´ä¸ all inï¼šå­¦è´¹æ˜¯è¦äº¤çš„ï¼Œä½†ä¸è¦æŠŠäº¤å­¦è´¹å˜æˆèµŒèº«å®¶\n- èƒ½åŠ›çš„ä¹ å¾—ä¸æ˜¯å» All in è‡ªå·±çš„ç­¹ç ï¼Œè€Œæ˜¯æ‹¿å‡ºéƒ¨åˆ†æˆæœ¬å»è¯•é”™å­¦ä¹ ï¼Œå½“å­¦è´¹è€Œä¸æ˜¯èµŒèº«å®¶ã€‚\n- çœŸæ­£æˆåŠŸçš„äººï¼Œä»æ¥æ²¡æœ‰ All in\n\n## å…­ã€è¿ç»­æˆåŠŸè€…çš„ç§˜è¯€æ˜¯ä»€ä¹ˆï¼Ÿ\n\nå°±ä¸¤æ¡ï¼š\n- æ—¶ä»£çš„çº¢åˆ©\n- ä¸ªäººåŠªåŠ›ä¸æ–¹æ³•è®ºã€å‹¤å¥‹\n\nå»ºç«‹è‡ªå·±çš„ä¸–ç•Œè§‚ï¼Œåšèƒ½åŠ›èŒƒå›´çš„äº‹ï¼Œè¿½æ±‚ä¸ªäººå¹¸ç¦ï¼Œæ¸…æ¥šæˆåŠŸèƒŒåæœ‰å·¨å¤§çš„æ—¶ä»£çº¢åˆ©èµ‹èƒ½ï¼Œæœ‰è‡ªå·±çš„ä¸€å¥—æ–¹æ³•è®ºä¸”å‹¤å¥‹ã€‚\n\n## ä¸ƒã€æ—¶é—´ç®¡ç†\n\n- åšå¥½æ—¶é—´ç®¡ç†ï¼Œè¿™ä¸ªä¸–ç•Œæ˜¯å› æœå¾ªç¯ã€‚\n- é›·å†›çš„é«˜æ•ˆå·¥ä½œä¸**é«˜é¢—ç²’åº¦**çš„æ—¶é—´ç®¡ç†\n- ä¸–ä¿—æˆåŠŸçš„æœ€é‡è¦è¦ç´ â€”â€”æ²¡æœ‰ä¹‹ä¸€â€”â€”æ—¶é—´ç®¡ç†\n- æ™®é€šäººå®Œå…¨æ²¡æœ‰æ—¶é—´ç®¡ç†æ¦‚å¿µ\n\n## å…«ã€ä¹ æƒ¯\n\n- å½“ä½ æ‹¥æœ‰ä¸€ä¸ªä¹ æƒ¯ï¼Œä½ ä¼šå¿˜äº†è¿™ç§ä¹ æƒ¯\n- è·‘æ­¥èƒ½å¤Ÿå˜æˆä¹ æƒ¯å—ï¼Ÿ\n- æ€è€ƒèƒ½å¤Ÿå˜æˆä¹ æƒ¯å—ï¼Ÿ\n\n## ä¹ã€é‡å˜ä¸ä¼šå¼•èµ·è´¨å˜\n\n- é‡ä¸ä¼šå¸¦æ¥æœ¬è´¨çš„ä¸åŒ\n- ç ”ç©¶å¤±è´¥ï¼Œè€Œéæ€»ç»“æˆåŠŸï¼Œå› ä¸º**æˆåŠŸæœ‰å¶ç„¶æ€§ï¼Œå¤±è´¥æœ‰å¿…ç„¶æ€§**ã€‚\n- ã€ŒçœŸä¼ ä¸€å¥è¯ï¼Œå‡ä¼ ä¸‡å·ä¹¦ã€ï¼Œ**æ•°é‡è¿œæ²¡æœ‰è´¨é‡é‡è¦**\n- è¯»ä¹¦ä¸æ˜¯å†™ç¬”è®°å°±å¤Ÿï¼Œä¹Ÿä¸å–å†³äºæ•°é‡ï¼Œè€Œåœ¨äºä½ æ˜¯å¦åšåˆ°äº†â€œå†…åŒ–â€ã€‚\n- å¦‚æœä½ åªæ˜¯ä¸ºäº†åšäº‹ï¼Œé‚£ä¹ˆä½ å…³æ³¨çš„åœ¨äºæ·±åº¦å’Œå†…åŒ–ï¼Œè€Œä¸æ˜¯é˜…è¯»æ•°é‡å †ç§¯ã€‚\n- è®¤çœŸæ€è€ƒï¼Œå»ºç«‹è‡ªå·±è¡Œä¸ºå‡†åˆ™çš„æ–¹æ³•ä¸æ•°é‡æ²¡æœ‰å¿…ç„¶æ€§ã€‚","0ce7df2311685137ae3cb14fd01f0977":"\n# æ’­å®¢ï¼šäººç”Ÿå±æœºä¸æ˜¯å´©æºƒè€Œæ˜¯ç“¦è§£\n\n\n`#æ’­å®¢`   `#å“²å­¦` `#ç”Ÿæ´»å“²å­¦`   `#2023/12/04` \n\n\n## ç›®å½•\n<!-- toc -->\n ## ä¸€ã€è‡ªå·±çš„å“²å­¦2023 \n\n- å¦‚æœä¸€ä¸ªäººåœ¨ 30 å¤šå²çš„å¹´çºªï¼Œä»–**åªåšäº‹è€Œæ²¡æœ‰è‡ªå·±çš„å“²å­¦**ï¼Œé‚£è¿™æ ·çš„è¯ä»–æ²¡æœ‰æ–¹å‘\n- æˆ‘è®°å¾—æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ¯”å–»å«å“²å­¦ï¼Œæ˜¯**äººç±»çµé­‚çš„ API æ–‡æ¡£**ï¼Œ\n\n## äºŒã€å»ºç«‹è‡ªå·±çš„ Data\n\n- å¬åŒä¸€é¦–æ­Œï¼Œä½ ç†è§£ä¸äº†è¿™é¦–æ­Œåé¢çš„ä¸œè¥¿ï¼Œæ‰€ä»¥æ— æ³•äº§ç”Ÿå…±é¸£\n   - å› ä¸ºä½ æ²¡æœ‰åŠæ³•å¤åˆ¶ä»–ä»¬å½“æ—¶çš„ç»å†ï¼Œç„¶åä½ è¿‡å¾€çš„ç»å†å’Œä»–ä»¬ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä½ ä¹Ÿæ²¡æœ‰åŠæ³•é‡ç°ä»–ä»¬å½“æ—¶çš„æ„Ÿå—ã€‚å¯¹ã€‚\n- ä½ çš„ç»å†å…¶å®æ˜¯ä½ çš„ `data`ã€‚å—¯ï¼Œä½ çš„`ç®—æ³•`å†å¥½ï¼Œä½ æ€»éœ€è¦æœ‰ data å§ï¼Ÿå°±æœ‰äº†æ•°æ®ï¼Œä½ éœ€è¦æ¥çº ç¼–ä½ çš„è¿™ç§ç®—æ³•åˆç†ä¸åˆç†ï¼Ÿå°±ç®—ä½ å¾ˆèªæ˜ï¼Œä½ çš„ CPU å†å¿«ä¸€ç‚¹ï¼Œä½ éƒ½æ— æ³•è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä½ éœ€è¦æœ‰æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®æ˜¯å…³äºä½ çš„æ•°æ®ï¼Œé‚£ä½ åªèƒ½å»ç»å†ã€‚\n   - æ‰€ä»¥ï¼Œå¤§éƒ¨åˆ†äººç¼ºä¹çš„ä¸æ˜¯è®¤çŸ¥ï¼Œè€Œæ˜¯ä¿¡æ¯ã€‚\n   - ä½†å¾ˆå¤šæ—¶å€™ä¿¡æ¯æ˜¯æ²¡ç”¨çš„ï¼Œå¾ˆå¤šæ—¶å€™ä¿¡æ¯æ˜¯å™ªéŸ³ã€‚\n   - é—®é¢˜æ˜¯å°±ç®—ä½ ç©·å°½äº†æ¯ä¸€ç§’ï¼Œä½ ä¹Ÿæ— æ³•ä½“éªŒåˆ°æ‰€æœ‰ï¼Œè€Œä¸”åˆ«äººå‘Šè¯‰ä½ çš„ä½“éªŒï¼Œä½ ä¸ºå•¥è¦ä½“éªŒï¼Ÿ\n- 20 å¤šå²æ—¶å€™æ€»æœ‰ä¸€ç§å†²åŠ¨å«åš**è·Ÿè¿‡å»å‰²å¸­**ã€‚ä»æ˜å¤©èµ·æˆ‘è¦å¦‚ä½•å¦‚ä½•ï¼Œç”šè‡³å¯ä»¥å‰Šå‘æ˜å¿—ï¼ˆæ¢ä¸ªå‘å‹ï¼‰\n  äº‹å®ä¸Šä½ ä¼šå‘ç°ä½ æ˜¯ä¸€æ¡æ²³æµï¼Œå°±ä½ çš„ç”Ÿå‘½æ˜¯ä¸€æ¡æ²³æµï¼Œä½ ä¸èƒ½æŠŠè¿™æ¡æ²³æµç»™æ–©æ–­ã€‚ä½ ä¸å¯èƒ½æ–©æ–­ï¼Œä½ å¯ä»¥è®©å®ƒè½¬å‘ï¼Œä½ å¯ä»¥è®©å®ƒå˜å®½å¹¿æˆ–è€…å˜çª„ï¼Œä½ å¯ä»¥è®©å®ƒæœ‰å¾ˆå¤šåˆ†æµï¼Œä½†æ˜¯ä½ ä¸å¯èƒ½æŠŠå®ƒæ–©æ–­ã€‚å¯¹ï¼Œæ²¡æœ‰ä»»ä½•äººå¯ä»¥è·Ÿè¿‡å»say bye ï¼Œç”šè‡³ä½ åœ¨ç½‘ä¸Šä¸Šè¯‰ï¼Œä½ æ— æ³•è·Ÿä½ çš„çˆ¶æ¯å‰²å¸­ã€‚å—¯ï¼Œä»–æœ‰å¤ªå¤šå¤ªå¤šï¼Œæ— æ•°å¾®å°çš„å½±å“å·²ç»æ¸—é€åœ¨ä½ çš„éª¨å­é‡Œï¼Œç”šè‡³å¯èƒ½ä½ çš„çˆ·çˆ·å¥¶å¥¶éƒ½å¯¹ä½ æœ‰å½±å“ã€‚\n- æ‰€ä»¥ï¼Œåˆ«è€æƒ³ç€ï¼Œé€ƒé¿ï¼›é‡æ–°å¼€å§‹ï¼Œä½ ä¸å¯èƒ½é‡æ–°å¼€å§‹çš„ï¼Œä½ éƒ½æ˜¯åœ¨ä»¥å‰çš„ data é‡Œåšæ–°çš„ Dataï¼Œæ–°çš„å†³ç­–\n   - ä¸è¦å¦å®šè‡ªå·±çš„è¿‡å»\n- ç„¶åä¿¡æ¯æ˜¯ç”¨æ¥æ¶ˆé™¤ä¸ç¡®å®šæ€§çš„\n\n## ä¸‰ã€ä¸­å¹´ä¸æ˜¯å´©æºƒï¼Œè€Œæ˜¯ç“¦è§£\n\n- å› ä¸ºå®ƒå·²ç»åµŒåœ¨ä½ çš„è‚‰é‡Œäº†ï¼Œä½ æ¯æ’•æ‰ä¸€å—çš„è¯ï¼Œå®ƒå°±ä¼šéå¸¸éå¸¸ç—›è‹¦\n- åˆ° 30 å¤šå²çš„æ—¶å€™ï¼Œç»ˆäºå¥½åƒæœ‰ä¸€ç‚¹ç‚¹èµ„æœ¬ï¼Œæœ‰ä¸€ç‚¹ç‚¹åŠ›é‡ï¼Œè¯•å›¾èƒ½è·Ÿä¸–ç•Œè¾ƒä¸€ç‚¹ç‚¹åŠ²ï¼Œä½ ä¼šè¢«åˆ«äººè´´äº†ä¸€å †æ ‡ç­¾ï¼ŒæŸä¸€ä¸ªè‡ªå·±å„¿æ—¶çš„ç†æƒ³è¢«åˆ«äººå®ç°çš„é‚£ä¸€åˆ¹é‚£ï¼Œä½ ä¼šæœ‰æ‰€è§¦åŠ¨\n- æˆ‘æƒ³å» do something åšç‚¹äº‹æƒ…ï¼Œä½†å®é™…ä¸Šä¸€ç›´æ²¡æœ‰æœºä¼šå»åšï¼Œä½†é—®é¢˜**åˆæ²¡äººæ†ç€ä½ çš„æ‰‹å’Œè„š**ï¼Œå¯¹ï¼Œä½ å°±ä¼šå‘ç°è¯´æˆ‘ä»¬å¾ˆå®¹æ˜“ç»™**è‡ªå·±ä¸€å¥—å™äº‹**ï¼Œç„¶åå°±æŠŠè‡ªå·±ç»™ç»•è¿›å»äº†\n\n## å››ã€æ¨¡ä»¿æ¬²æœ›\n\n- æˆ‘ä»¬æ‰€æœ‰çš„æ¬²æœ›éƒ½æ˜¯ä»åˆ«äººèº«ä¸Šæ¨¡ä»¿å‡ºæ¥çš„ã€‚\n   - ä½ å»çœ‹å°å­©ï¼Œå°å­©ç»å¸¸æ˜¯é‚£ç§ï¼›ä»–è¯´å°æœ‹å‹åœ¨å°çš„æ—¶å€™å¤§å®¶çš„ç†æƒ³éƒ½æ˜¯æˆ‘è¦æˆä¸ºç§‘å­¦å®¶ï¼Œæˆ‘è¦æˆä¸ºå®‡èˆªå‘˜ï¼Œæ²¡æœ‰äººçš„ç†æƒ³æ˜¯æˆ‘è¦ä¹°è±ªè½¦ï¼Œæˆ‘è¦ä½å¤§å¹³å±‚ã€‚ç¡®å®è¿™äº›æ¬²æœ›å¾ˆå¤šæ—¶å€™å°±æ˜¯ä½ åœ¨æˆé•¿è¿‡ç¨‹ä¸­ä»åˆ«äººèº«ä¸Šä¹ å¾—ã€‚\n- ä½ çœŸæ­£çš„æ¬²æœ›å’Œå†…å¿ƒï¼Ÿ\n   - å»å¤§å‚ç©é›¶å’Œæ¸¸æˆæˆ–è€…åœ°ä½æ¸¸æˆ\n- å¹¶ä¸”è¦ç°å®\n   - æ‰€æœ‰çš„å“²å­¦åˆ°æœ€åä½ éƒ½åº”è¯¥è½åœ¨ç²—ç³™çš„ç°å®åœ°è¡¨ä¸Š\n- æ­£å¼è‡ªå·±çš„æ¬²æœ›\n   - æˆ‘æ˜¯ä¸ªäººï¼Œæˆ‘æ€ä¹ˆå¯èƒ½æ²¡æ¬²æœ›ï¼Ÿé‚£æ¿€ç´ å°±å¯¼è‡´æˆ‘æ˜¯è¿™ä¸ªæ ·å­ï¼Œæˆ‘æ²¡åŠæ³•çš„\n\n## äº”ã€å»ºç«‹ç»å¯¹åæ ‡ç³»\nä½ æŠŠä½ çš„åæ ‡ç³»ä»**ç›¸å¯¹åæ ‡ç³»**æ‹‰åˆ°**ç»å¯¹åæ ‡ç³»**\n\n- æ¯”å¦‚æˆ‘æœ‰ 12345 è¿™äº‹é“ç†æˆ‘æ‡‚äº†ï¼Œè¿™äº”ä¸ªåŸºçŸ³ä½ å¾ˆéš¾æ’¼åŠ¨å®ƒï¼Œä½ æ€ä¹ˆè¯´æˆ‘éƒ½ä¸ä¼šåŠ¨çš„ã€‚æ²¡å…³ç³»ï¼Œä½ éšä¾¿è¯´ï¼Œå°±è¿™ä¸ªåœ°æ–¹æˆ‘ç›´æ¥å°±æŠŠä½ å±è”½æ‰äº†ã€‚æœ‰ç‚¹ç±»ä¼¼äº **åŸåˆ™** ã€‚\n- è€Œ**ç›¸å¯¹åæ ‡ç³»**ï¼Œæ˜¯ä¸ç¨³å®šçš„ï¼Œåˆ«äººä¸€åŠ¨ä½ å°±ä¼šåŠ¨\n\n## å…­ã€å»ºç«‹æ·±å…¥çš„è¿æ¥\n\n- æˆ‘ä»¬æ‰€æœ‰çš„å¹¸ç¦çš„æ„Ÿè§‰éƒ½æ¥è‡ªäºæ·±å…¥çš„è¿æ¥ï¼Œè€Œä¸æ˜¯å¹¿çš„è¿æ¥ã€‚å¹¿å¾ˆç´¯çš„ï¼Œå¹¿çš„è¿æ¥å®ƒä¸ä»…å¾ˆæµªè´¹ä½ çš„æ—¶é—´å’Œç²¾åŠ›ï¼Œå®ƒå…¶å®ä¼šä¹Ÿä¼šè®©ä½ æ„Ÿåˆ°æ›´å¤šçš„ä¸å¹¸ç¦ã€‚\n- æ‰€ä»¥ï¼Œè¯¥**ä¿®å¤å¹¶ä¿æŒå·²æ‹¥æœ‰çš„ä¸œè¥¿**ï¼Œæ¯”å¦‚äº²å¯†å…³ç³»ï¼Œæ¯”å¦‚äº²æƒ…ï¼Œå»å»ºç«‹æ·±å…¥çš„è¿æ¥ã€‚\n   - **æ­£è§†ç‰©å“æ­£ç¡®çš„å±æ€§**ï¼Œåªæ˜¯è§‰å¾—è¯´ï¼Œå”‰ï¼Œæˆ‘ç»™çš„é’±ï¼Œæˆ‘æŠŠå®ƒä¹°å›å®¶å°±å®Œäº†ï¼Œè¿™å°±å®Œäº†ï¼Ÿ\n      - ç»´æŠ¤å’Œä¿å…»ç‰©å“æ›´é‡è¦\n      - ä½ ä»¥ä¸ºä½ ç»™çš„é’±å°±æ˜¯ä½ ä»˜å‡ºçš„å…¨éƒ¨æˆæœ¬ï¼Œå…¶å®é‚£åªæ˜¯ä¸€åŠï¼Œå¦ä¸€åŠçš„æˆæœ¬æ˜¯ä½ è¦ç»´æŠ¤å®ƒçš„æˆæœ¬ã€‚\n- å†æ¯”å¦‚ï¼Œé¢‘ç¹çš„æ¢èµ›é“ï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼Œä½ çš„ç§¯ç´¯å°±æ²¡äº†ï¼Œæˆ–è€…è¯´ä½ é‚£æ¡æ²³æµå°±çªç„¶è½¬å‘äº†ï¼Ÿ\n- æ­£è§†ä½ å·²ç»æ‹¥æœ‰çš„ä¸œè¥¿ï¼Œ**ä¿®å¤å¹¶ä¿æŒä¹‹**\n   - ä¿®å¤å…³ç³»çš„æˆæœ¬è¦å¤šéš¾ï¼Ÿä½ **ä¸¤ä¸ªå¥½æœ‹å‹**çªç„¶é—´å› ä¸ºä¸€ä»¶äº‹å†³è£‚äº†\n   - ç‰¹åˆ«æ˜¯å¤«å¦»ä¹‹é—´ï¼Œäº²å¯†å…³ç³»\n\n## å…«ã€30 å²ä»¥å‰æœ‰æ•…äº‹ã€ä¸‰åå²ä»¥ååªæœ‰å¹²æ´»\n\n- 30 å²ä»¥å‰æœ‰æ•…äº‹ï¼Œå°±æ˜¯æˆ‘æœ‰æ¢¦æƒ³ï¼Œæˆ‘åœ¨æˆ‘çš„æƒ³æ³•æ˜¯ä¸åˆ‡å®é™…çš„ï¼Œæˆ‘æ²¡è§è¿‡ï¼Œæˆ‘æ²¡ç»å†è¿‡ï¼Œæˆ‘è‡ªç„¶æ˜¯é£˜åœ¨å¤©ä¸Šçš„ï¼Œå°±åº”è¯¥åœ¨äº‘ç«¯ï¼Œå°±åº”è¯¥æ˜¯æœ‰å¾ˆç‹‚é‡çš„ï¼Œå¾ˆå¥”æ”¾çš„ä¸œè¥¿\n- ä½†æ˜¯å¦‚æœåˆ°è¿™ä¸ªå¹´å²è¿˜åœ¨è°ˆè®ºè¿™ä¹ˆå¥”æ”¾è¿™ä¹ˆä¸è½åœ°çš„äº‹æƒ…ï¼Œå¤§å®¶ä¼šè§‰å¾—è¯´ä½ è¿™äººå°±æ˜¯ä¸ªå°±æ˜¯æ¢¦æƒ³å®¶ï¼Œæˆ–è€…å¤©å¤©åšç™½æ—¥æ¢¦ï¼Œé‚£ä½ æ€ä¹ˆè®©ä½ çš„ç™½æ—¥æ¢¦å®ç°å‘¢ï¼Ÿé‚£ä¸å¯ä¸å°±æ˜¯ä¸€ä»¶åšäº‹å—ï¼Ÿ\n- ä» 30 å²åšåˆ° 60 å²ï¼Œåšåˆ° 80 å²\n   - å°±å‰ä¸¤å¤©ä½ çœ‹å®«å´éªé‚£ä¸ªæ–°ä½œä¸ä¹Ÿä¸Šæ˜ äº†å—ï¼Ÿå¯¹ï¼Œå¯¹å§ï¼Ÿä½ æƒ³æ´»å‡ºæ€æ ·çš„äººç”Ÿï¼Ÿé‚£åŠ¨ç”»æ€ä¹ˆæ¥çš„ï¼Ÿé‚£ä¸å°±æ˜¯**ä¸€å¼ ä¸€å¼ ç”»å‡ºæ¥**çš„å—ï¼Ÿä»–**æ²¡æœ‰ä»€ä¹ˆæŠ€å·§ï¼Œæˆ–è€…è¯´å…¨æ˜¯æŠ€å·§**ï¼Œå°±æ˜¯ä¸€å¼ ä¸€å¼ ç”»å‡ºæ¥ã€‚\n   - è¿™ä¸­é—´æœ‰ä»€ä¹ˆ**æ•…äº‹**å—ï¼Ÿ**æ²¡æœ‰ä»€ä¹ˆæ•…äº‹ï¼Œå°±æ˜¯ä¸€å¤©ä¸€å¤©çš„å‘ç”Ÿ**\n      - æˆ‘æƒ³è¡¨è¾¾çš„æ˜¯ï¼Œä»–å°±æ˜¯ä¸€ä¸ªå¾ˆé•¿æœŸçš„ï¼Œæ²¡æœ‰é‚£ä¹ˆè®©äººè§‰å¾—é‚£ä¹ˆæœ‰æ¿€æƒ…çš„ï¼Œè¦è¿ç»­ä¸æ–­åœ°å»åšçš„äº‹æƒ…ã€‚ä½ ä¸­é—´ä¸èƒ½è¯´æˆ‘æŠŠå®ƒå…¨éƒ¨æ€ç¿»æ‰éƒ½ä¸åšï¼Œç»•ä¸ªå¼¯ï¼Œæˆ–è€…è¯´æˆ‘å°±ååœ¨é‚£ç­‰ç€ä»–è‡ªå·±å®Œæˆï¼Œéƒ½ä¸å¯èƒ½çš„ï¼Œä»–å°±æ˜¯**ä¸€ä»¶ä¸€ä»¶**çš„ã€‚\n- ä½•ä¸ºè‰¯å¥½ç”Ÿæ´»: è¡Œä¹‹äºé€”è€Œåº”äºå¿ƒ --- é™ˆå˜‰æ˜ çš„ä¹¦ç±\n   - è¿™ä¸ªè¿‡ç¨‹ä¸­ä½ ä¼šå‘ç°ä½ åšçš„äº‹æƒ…è¶Šå¤šï¼Œä½ çš„åŸºçŸ³å°±è¶Šæ·±ï¼Œå› ä¸ºä½ æ¯ä¸€æ­¥éƒ½æ˜¯è½åœ¨ç²—ç³™çš„åœ°è¡¨ä¸Šï¼Œæ‰€ä»¥ä½ çš„åæ ‡ç³»å°±è½åœ¨äº†åœ°ä¸Šï¼Œä½ åœ¨å»ºç«‹ä¸€åº§è‡ªå·±çš„åŸå ¡ï¼Œè‡ªå·±çš„ç‹å›½ï¼Œè‡ªå·±çš„å†…æ ¸ï¼Œè€Œåœ¨è¿™ä¸ªæ—¶å€™ï¼Œåˆ«äººå†æ€ä¹ˆçœ‹ä½ ï¼Œä½ å°±ä¸ care äº†ã€‚\n   - **é‡‘å­—å¡”**æ˜¯è¯´åº•åº§å¤¯å®äº†ï¼Œå†å°ä¸€åœˆï¼Œæˆ‘è¦æƒ³å†å¾€ä¸Šä¸€å±‚ï¼Œæˆ‘è¦ä»åº•åº§å†å¾€ä¸Šåˆ·ä¸€å±‚ï¼Œå®ƒå¾ˆæ…¢ï¼Œä½†å®ƒå¾ˆç»“å®ã€‚\n- ç†æƒ³ä¹Ÿæ˜¯æ˜¯æ…¢æ…¢é•¿å‡ºæ¥çš„\n- åˆæ¯”å¦‚ï¼Œä½ æƒ³å†™ä¸€æœ¬ä¹¦ï¼Œå…¶å®æœ€å è½å®ä¸ºå…·ä½“çš„**ä¸€å¤©ä¸€å¤©çš„å†™**\n\næœ€åï¼Œå› ä¸ºæ˜¯ä¸€å¤©ä¸€å¤©çš„ï¼Œæ‰€ä»¥å°±ä¼šæœ‰**ç—›è‹¦**ï¼ŒåŸåˆ™ä¸­æ‰€è°“çš„**ç—›è‹¦**\n\n## ä¹ã€å¯¹é¥è¿œçš„äº‹ç‰©æ±‚çœŸ\n\n- å¯¥å¯¥æ•°è¯­ï¼Œæˆ‘ä»¬å°±ä¼šå¯¹ä¸€ä¸ªé¥è¿œçš„äº‹ç‰©ä¸‹å‡ºåˆ¤æ–­\n   - æ¯”å¦‚è¯„è®ºï¼šå¯¹ç»™äººå®¶çš„å©šå§»å…³ç³»åˆ¤äº†æ­»åˆ‘ã€‚\n- æˆ‘ä»¬å…¶å®è¦å®Œæˆä¸€ä»¶äº‹æƒ…ï¼Œæ˜¯æœ‰æ— æ•°å¤šçš„å°äº‹æ‰€ç»„æˆçš„\n- å»ºç­‘å­¦é‡Œçš„æ‰€æœ‰çš„å»ºç­‘éƒ½æ˜¯é¢„æµ‹\n   - ä½†æ˜¯æœ‰ä¸€ä»¶äº‹æ˜¯å¯ä»¥åšçš„ï¼Œå°±æ˜¯å…ˆä¼°ç®—è‡ªå·±çš„èƒ½åŠ›å’Œæ§åˆ¶ä¸€ä¸‹è‡ªå·±æ¬²æœ›\n\nå¯¹åº”ã€ŠåŸåˆ™ã€‹é‡Œçš„ **äº‹å®æ˜¯ä»€ä¹ˆï¼Ÿ**\n\n- å…³å¿ƒäº‹å®ï¼Œå…³å¿ƒçœŸç†ï¼Œå…¶å®ä»–å°±æ˜¯ç»å¯¹åæ ‡ç³»\n- æˆ‘ä»¬ç–äºèƒ½åŠ›çš„å»ºè®¾ï¼Œå°±æ˜¯ä¸å»å¯¹é¥è¿œçš„äº‹ç‰©æ±‚çœŸã€‚\n   - æ‰€æœ‰çš„æ€æƒ³éƒ½æ˜¯æ—§çš„ï¼Œæ˜¨å¤©çš„æ€æƒ³å¾ˆéš¾çŸ¥é“æ˜å¤©å‘ç”Ÿçš„äº‹æƒ…å½“ç„¶æœ‰å¾ˆå¤šè§„å¾‹\n   - æ ¼å¼åŒ–è‡ªå·±ï¼Ÿ\n\nåˆæ¯”å¦‚ï¼Œä½ æƒ³è¿‡ä½ æƒ³æˆä¸ºçš„ä»–ï¼ŒèƒŒåçš„ä»£ä»·æ˜¯ä»€ä¹ˆå—ï¼Ÿ\n\n## åã€æŒæ§è‚‰èº«\n\n- å¥èº«èƒ½å¤Ÿè®©æˆ‘å¢å¼ºå¯¹æœ¬äººè¿™ä¸ªè‚‰èº«çš„æŒæ§æ„Ÿï¼Œç„¶åä½ çš„æ„ŸçŸ¥åŠ›ä¼šå˜å¾—æ›´å¥½ï¼Œä½ ä¼šæ„Ÿè§‰è‡ªå·±çš„ç”Ÿå‘½åŠ›åœ¨æå‡ã€‚\n- æœ‰äº†æ–¹å‘æ„Ÿä¹‹åï¼Œç„¶ååˆä¸€ä»¶ä»Šå¤©æŠŠäº‹åšå¥½ï¼Œä½ çš„ç”Ÿå‘½åŠ›å…¶å®è‡ªç„¶å°±æ¥äº†ï¼Œè€Œä½ æ²¡æœ‰æ–¹å‘ï¼Œä½ ä¸€ç›´ä½ åšçš„äº‹è¶Šå¤šï¼Œä½ å°±æ˜¯åœ¨è€—æŸè‡ªå·±ã€‚\n- ä½†æˆ‘ä»¬å¾ˆå®¹æ˜“æŠŠç†è§£è‡ªå·±å˜æˆäº†æ‰¾åˆ°ç¼ºé™·ï¼Œä¼˜åŒ–å‡çº§ï¼Œè®©è‡ªå·±å˜å¾—æ›´å·\n- å…³ä¹å†…å¿ƒï¼Œæ¯”å¦‚ä¸€ä¸ªæ‚–è®º\n   - ä¸€æ–¹é¢æˆ‘ä»¬å¸Œæœ›è‡ªå·±æˆä¸ºæ›´å¥½çš„è‡ªå·±ï¼Œæˆ‘ä»¬è¯´æˆ‘ä»¬ä¸è¦æ”¾å¼ƒè‡ªæˆ‘æå‡ï¼Œè‡ªæˆ‘è¿›æ­¥ã€‚\n   - å¦ä¸€æ–¹é¢æˆ‘ä»¬åˆåœ¨å€¡å¯¼è¯´è¦æ¥çº³è‡ªå·±\n\n## åä¸€ã€deadline æ˜¯ç¬¬ä¸€ç”Ÿäº§åŠ›äº†\n \n - ä»»ä½• case éƒ½è¦ç»™å®ƒè®¾ä¸ªdeadlineã€‚ä½ è®¾ä¸‰å¹´åéƒ½è¡Œ\n- ç›®æ ‡æ˜¯ä¸€ä¸ªæœ‰æˆªæ­¢æ—¥æœŸçš„æ¢¦æƒ³ï¼Œå°±å¦‚æœå®ƒæ²¡æœ‰æˆªæ­¢æ—¥æœŸï¼Œå®ƒå°±åªæ˜¯ä¸€ä¸ªç©ºæƒ³\n\n## åäºŒã€ç”Ÿæ´»å°±æ˜¯å…·ä½“çš„ä¸€è¿ä¸²çš„äº‹ä»¶\n\n- **æ”¶å…¥**æ˜¯ä¸€è¿ä¸²çš„äº‹ä»¶ï¼Œ_å‡ºäºæŸæœ¬ä¹¦_\n   - å…¶å®æˆ‘ä»¬çš„ç”Ÿæ´»ä¹Ÿæ˜¯ä¸€è¿ä¸²çš„äº‹ä»¶ï¼Œç”Ÿæ´»æ²¡æœ‰æŸä¸ªé™æ­¢çš„çŠ¶æ€ï¼›\n- ä¸€ç³»åˆ—çš„**é€‰æ‹©**å¡‘é€ äº†æˆ‘ç°åœ¨çš„ä»Šå¤©çš„è¿™ä¸ªçŠ¶æ€\n- ç”Ÿæ´»å°±æ˜¯å…·ä½“çš„ä¸€è¿ä¸²äº‹ä»¶ã€‚\n   - æ¯å¤©çš„ç”Ÿæ´»éƒ½æ˜¯å¤æ‚ä¸”å…·ä½“çš„ï¼Œæˆ‘ä»¬æ¯ä¸ªäººæ¯æ—¶æ¯åˆ»éƒ½ç”Ÿæ´»åœ¨éå¸¸å¤šå¤æ‚çš„å…³ç³»ä¸­ï¼Œæˆ‘ä»¬å’Œçˆ¶æ¯ä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘ä»¬å’Œæœ‹å‹ä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘ä»¬å’Œçˆ±äººä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘ä»¬å’Œå­å¥³ä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘ä»¬å’ŒåŒäº‹ä¹‹é—´æœ‹å‹ä¹‹é—´çš„å…³ç³»ï¼Œä½ æ¯æ—¶æ¯åˆ»éƒ½æ˜¯å›´ç»•åœ¨è¿™äº›å…³ç³»é‡Œè¾¹ã€‚æ‰€ä»¥ä¸è¦è¿‡åº¦ç®€åŒ–è‡ªå·±çš„ç”Ÿæ´»ï¼Œä¹Ÿä¸è¦è¿‡åº¦ç›¸ä¿¡æˆ–è€…æ˜¯è¿·æ‹ç½‘ä¸Šé‚£äº›æœ‰è¯±æƒ‘åŠ›çš„æç«¯çš„æ–¹æ³•è®ºæˆ–è€…æ˜¯é¸¡æ±¤ã€‚\n\n## åä¸‰ã€æœ€å\n\n> [!tip]\n 30 å²ä»¥å‰æœ‰æ•…äº‹ï¼Œ 30 å²ä»¥ååªæœ‰å¹²æ´»\n\n## æ›´å¤š\n\n- ã€Šä½•ä¸ºè‰¯å¥½ç”Ÿæ´»ã€‹\n- æ’­å®¢æºæ–‡ä»¶ [https://www.xiaoyuzhoufm.com/episode/64f17cd43fa4090b74db279d](https://www.xiaoyuzhoufm.com/episode/64f17cd43fa4090b74db279d)\n\n---\n\n","2bb0ee2016255bc396603b6ef264ad2e":"\n# ä¸ªäººå¸¸ç”¨å·¥å…·åŠæŠ€å·§åˆ†äº«\n\n`#2022/12`  `#å¸¸ç”¨å·¥å…·` \n\n\n## ç›®å½•\n<!-- toc -->\n ## Github Copilot ä½¿ç”¨æŠ€å·§æ€»ç»“ \n\n- æ¥å—å»ºè®®ï¼Œè¯·æŒ‰ `Tab`ã€‚è‹¥è¦æ‹’ç»æ‰€æœ‰å»ºè®®ï¼Œè¯·æŒ‰  `Esc`\n- æŸ¥çœ‹ä¸‹ä¸€ä¸ªæˆ–è€…ä¸Šä¸€ä¸ªå»ºè®®ï¼Œè¯·æŒ‰ `Alt ]` æˆ–è€… `Alt ]`\n- å®‰è£… **GitHub Copilot CLI**\n\t- ç›®æµ‹å®ç”¨æ€§ä¸å¤§\n\n## Manico  APP\n\nä¸€æ¬¾ç”¨äº†å¥½å¤šå¹´ mac å¿«é€Ÿåˆ‡æ¢ APP çš„è½¯ä»¶\n\næ•´ç†çš„å¿«æ·é”®å¦‚ä¸‹\n- **æœ€ä¸Šé¢ä¸€æ’ï¼šå¸¸ç”¨æµè§ˆå™¨**ï¼Œå·¦ä¸Šä½ç½®\n\t- Arc   ` 1 `\n\t\t- ä¸»æµæµè§ˆå™¨ï¼ŒæŸ¥é˜…å„ç±»èµ„æ–™\n\t- Chrome æ­£å¼ç‰ˆï¼š   `2`\n\t\t- ä¸»åŠ›å¼€å‘æµè§ˆå™¨\n\t- Edge  `3`\n\t\t- å¼€å‘ä½¿ç”¨\n\t- Safari `4`\n\t\t- å¼€å‘ä½¿ç”¨\n- **ç¬¬äºŒæ’ï¼šå¸¸ç”¨å¼€å‘å·¥å…·**\n- å‘½ä»¤è¡Œå·¥å…·Wrapï¼š`~`\n\t- æœ€å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå…¶å®å’Œå‘½ä»¤è¡Œå·¥å…·è¿˜æŒºé€‚åº”\n- å¾®ä¿¡ ï¼š`Q`\n\t- å¾®ä¿¡ï¼Œæºäº **QQ**\n- Webstormï¼š`W`\n\t- æœ€å¸¸ç”¨ç¼–è¾‘å™¨\n- Githubï¼š`E`\n\t- Git diff å¯¹æ¯”å·¥å…·\n- **å­¦ä¹ &ç¬”è®°å·¥å…·ç›¸å…³**\n\t- OBï¼š`A`\n\t- Flomoï¼š`X`\n\t- è¯­é›€ï¼š`Y`\n\t- é£ä¹¦ï¼š`Z`\n\t- Figjamï¼š`F`\n\t- Things : `S`\n\n## Obsidian å¿«æ·é”®\n\nä¸ªäººæœ€å¸¸ç”¨çš„ç¬”è®°è½¯ä»¶ï¼ŒèŠ±äº†ä¸å°‘æ—¶é—´æ•´ç†ï¼Œå®Œå…¨è‡ªå®šä¹‰äº†å¿«æ·é”®ï¼ŒåŸºäºå®ƒæ¥å®ç°`ä¸ªäººwiki` \n\n### OB å¿«æ·é”®å‚è€ƒ\n\n- å°½é‡å‚è€ƒ[è¯­é›€å¿«æ·é”®](https://www.yuque.com/yuque/gpvawt/shortcut) çš„å®ç°\n- å‚è€ƒ `webstorm` çš„å¿«æ·é”®æ–¹å¼\n\n### çª—å£ã€æ–‡ä»¶\n\n#### é¢æ¿\n\n> [!tip]\n> **F1~F12**  \n\n- å±•å¼€/æŠ˜å å³ä¾§é¢æ¿ï¼š`f1`\n- æ‰“å¼€å·¦ä¾§æ–‡ä»¶é¢æ¿ï¼š`f2`\n- æ‰“å¼€æ ‡ç­¾é¢æ¿ï¼š`f3`\n- æ‰“å¼€ä¹¦ç­¾é¢æ¿ï¼š`f4`\n- å…¨å±€æœç´¢ + æ‰“å¼€å·¦ä¾§æœç´¢é¢æ¿ï¼š`cmd + shift + f`\n- `å¤åˆ¶æ–‡ä»¶`ï¼š`f5`\n- `ä¿®æ”¹`æ–‡ä»¶ï¼š`f6`\n- å·¦å³åˆ†å±ï¼š`f7` ï¼Œ*åˆšå¥½æœ€ä¸­é—´*\n- ç»™å½“å‰`æ–‡ä»¶`æ·»åŠ ä¹¦ç­¾ï¼š`f8`\n- ç»™å½“å‰å…‰æ ‡ä½ç½®çš„ `æ ‡é¢˜` æ·»åŠ ä¹¦ç­¾ï¼š`f9`\n- ç»™å½“å‰å…‰æ ‡ä½ç½®çš„ `ä½ç½®` æ·»åŠ ä¹¦ç­¾ï¼š`f10`\n- ç»™å½“å‰å…‰æ ‡ä½ç½®çš„ `è¡Œ`  æ·»åŠ ä¹¦ç­¾ï¼š`f10`\n- æ¼”ç¤ºæ¨¡å¼ï¼š`f11`\n- å±•å¼€å³ä¾§é¢æ¿ï¼š`f12`\n\n### æ ‡ç­¾é¡µ\n\n> [!info]\n>  è®°ä½éƒ½æ˜¯**å’ŒChrome ä¿æŒä¸€è‡´** \n\n- ç¬¬ 1 åˆ° 9 ä¸ªï¼š`cmd 1~8`\n- æœ€åä¸€ä¸ªæ ‡ç­¾é¡µï¼š`cmd + 9`\n- ä¸‹ä¸€ä¸ªæ ‡ç­¾é¡µï¼š`cmd + ]\n- ä¸Šä¸€ä¸ªæ ‡ç­¾é¡µï¼š`cmd + [`\n- å½“å‰æ ‡ç­¾é¡µçš„**å†å²è®°å½•**ï¼Œå‰è¿›æˆ–è€…åé€€ï¼š`cmd + alt + [ `   å’Œ  `cmd + alt + ]`\n- çª—å£æ”¾å¤§ã€ç¼©å°ç­‰ï¼šå’Œ ==æµè§ˆå™¨ä¸€æ ·==\n\n### ç¼–è¾‘\n\n> [!info]\n> é™¤äº†ä¸Šä¸‹è¡Œäº’æ¢ï¼Œä½¿ç”¨çš„ **cmd + alt** ï¼Œå…¶ä»–éƒ½æ˜¯ **cmd + shift** æˆ–è€… **cmd**\n\n- `è¡Œå†…ä»£ç `ï¼š `cmd + E`\n- æ’å…¥`ä»£ç å—` ï¼šÂ é€šè¿‡ Â `cmd + /` Â å¿«é€Ÿè°ƒèµ·æ¨¡æ¿ï¼Œè¾“å…¥ç›¸å…³çš„ä»£ç æ ¼å¼ï¼Œæ¯”å¦‚ `js` `c` `yaml` ç­‰æ–¹å¼æ’å…¥\n- æ–‡ä¸­å±‚çº§å…³ç³»\n\t- H1-H6ï¼š`cmd + alt + 1~6`\n\t- æ— åºåˆ—è¡¨ï¼š`cmd + alt + 7` \n\t- æœ‰åºåˆ—è¡¨ï¼š`cmd + alt + 8` \n\t- å¾…åŠäº‹é¡¹ï¼š`cmd + alt + 9` \n\t- æ™®é€šæ–‡æœ¬ï¼š`cmd + alt + 0`  \n- åŠ ç²—ï¼š`cmd + b`\n- æ–œä½“ï¼š `cmd + i`\n- åˆ é™¤çº¿ï¼š `cmd + shift + x`   \n- é«˜äº®å’Œä¸‹åˆ’çº¿ï¼š`cmd + h`  æˆ–è€… `cmd + u`  ï¼Œ ä¸€ä¸ªæ ·å¼æ•ˆæœ\n- å±•å¼€æ‰€æœ‰ï¼š `cmd + shift + =`\n- æŠ˜å æ‰€æœ‰ï¼š`cmd + shift + -`\n- ä¸Šä¸‹æ®µè½äº’æ¢ï¼š`cmd + alt + â†‘ `  æˆ–è€…  `cmd + alt + â†“ \n- åˆ é™¤æ®µè½ï¼š `cmd + d `\n- æ’å…¥\n\t- æ’å…¥æ ‡æ³¨ `Mark`ï¼š\n\t\t- ä½¿ç”¨æ¨¡æ¿çš„æ–¹å¼ï¼Œè¾“å…¥ `m.` æ¥é€‰æ‹©ï¼Œ å…·ä½“æ›´å¤šå‚è€ƒï¼š[å®˜æ–¹æ–‡æ¡£](https://help.obsidian.md/Editing+and+formatting/Callouts)\n\t\t- æˆ–è€… `cmd + m`\n\t- æ’å…¥æœ¬åœ°é“¾æ¥ï¼š`cmd + k`\n\t- æ’å…¥å¤–é“¾ï¼š `cmd + shift + k`  \n\t- æ’å…¥é™„ä»¶ï¼š `cmd + shift + a`   , ==é™„ä»¶==çš„æ„æ€\n\t- å¼•ç”¨ï¼š`cmd + shift + .`\n- æŠ˜å å½“å‰è¡Œï¼š`cmd + [`\n- å±•å¼€å½“å‰è¡Œï¼š`cmd + ]`\n- å³åµŒå…¥å†…å®¹ï¼š`cmd  + L`  ï¼Œ `link` æœ¬åœ°å†…å®¹çš„çš„æ„æ€\n- æœç´¢ï¼š`cmd + f`\n- æ›¿æ¢ï¼š`cmd + r`\n- é‡å‘½åå½“å‰å°æ ‡é¢˜ï¼š`shift + f6`\n- ç§»åŠ¨æ–‡ä»¶åˆ°æŸä¸ªæ–‡ä»¶å¤¹ï¼š`cmd + shift + m`\n\n## Raycast ä½¿ç”¨æŠ€å·§æ€»ç»“\n\n- æ”¯æŒæ¨¡ç³Šæœç´¢\n\t- å¦‚è¾“å…¥ `vs code` å¯ä»¥æ‰¾åˆ° Visual Studio Code åº”ç”¨ç¨‹åº\n\t- å¯ä»¥è®¾ç½® æ¨¡ç³Šæœç´¢ `çµæ•åº¦`\n- è®¾ç½®åˆ«å Aliases\n\t- æ¯”å¦‚ï¼Œè®¾ç½® `é£` å¸¦åˆ« `é£ä¹¦`\n- å…¨å±€å¿«æ·é”® Hotkeys\n\t- å¯ä»¥å•ç‹¬è®¾ç½®æŸä¸ªå…·ä½“æ“ä½œçš„å…¨å±€å¿«æ·é”®\n- Action Panel å‘½ä»¤é¢æ¿\n\t- `âŒ˜ K` ç”¨äºå±•ç¤ºæ›´å¤šå‘½ä»¤\n\t- `âŒ˜ â†µ` ç”¨äºæäº¤è¡¨å•\n\t-  `â†µ`  ç”¨äºæ‰§è¡Œæ“ä½œ\n- ä»£ç ç‰‡æ®µ\n\t- å¯ä»¥è®¾ç½®å¸¸ç”¨çš„ç‰‡æ®µï¼Œå¦‚ä»£ç ã€å¸¸ç”¨çš„è¾“å…¥æ–‡æœ¬\n\t- æ¯”å¦‚è¾“å…¥ï¼Œemail æ˜¾ç¤º `liguwe`\n- Script Commands è„šæœ¬å‘½ä»¤\n\t- å¯å®ç°ä»»ä½•çš„è„šæœ¬å‘½ä»¤æ§åˆ¶ç”µè„‘","84cc60078c855f12b8bd87aca181f7c2":"\n# å‰è¨€\n\n`#2023/08/25`  \n\nå…³äº AGI çš„ä¸€åˆ‡\n","4f6b1e1d630f5c1987fc7e392f9829bb":"\n# å‰è¨€\n\n\nAGI å…¥é—¨æ‰«ç›²ç¯‡\n\n","7cc8aba4d1985027a7c915ac90a6a0da":"\n# chatGPT æ˜¯ä»€ä¹ˆï¼ˆç¯‡ä¸€ï¼‰\n\n`#AI`  `#chatGPT`  `#agi`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. chatGPTæ˜¯å¦‚ä½•å›ç­”é—®é¢˜çš„ï¼Ÿ   \n\n### 1.1. è‡ªå›å½’ç”Ÿæˆ\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907111029.png)\n\nä¸¾ä¸ªä¾‹å­ï¼šè¾“å…¥`æˆ‘`ï¼Œæœ€ç»ˆè¿”å› `æˆ‘æ˜¯ä¸€å­—å°å°é¸Ÿ` ï¼Œçœ‹çœ‹å¤§æ¨¡å‹çš„ç”Ÿæˆè¿‡ç¨‹ï¼š\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907111319.png)\n\n- ç¬¬ä¸€æ¬¡\n\t- è¾“å…¥ï¼šæˆ‘\n\t- è¾“å‡ºï¼šæˆ‘æ˜¯\n- ç¬¬äºŒæ¬¡\n\t- è¾“å…¥ï¼šæˆ‘æ˜¯\n\t- è¾“å‡ºï¼šæˆ‘æ˜¯ä¸€\n- ç¬¬ä¸‰æ¬¡\n\t- è¾“å…¥ï¼šæˆ‘æ˜¯ä¸€\n\t- è¾“å‡ºï¼šæˆ‘æ˜¯ä¸€åª\n\n### 1.2. ä¸åŒçš„æ¨¡å‹å½±å“\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907111829.png)\n\n### 1.3. ä¸¤ä¸ªé¹¦é¹‰ğŸ¦œæ¨¡å‹\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907112012.png)\n\n### 1.4. å­¦ä¹ ææ–™çš„å½±å“\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907112215.png)\n\n### 1.5. GPT çš„å­¦ä¹ èƒ½åŠ›ï¼ˆæ³›åŒ–èƒ½åŠ›ï¼‰\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907114018.png)\n\n### 1.6. å¤§æ¨¡å‹ä¸æ•°æ®åº“çš„å¯¹æ¯”\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907114833.png)\n\n## 2. GPT çš„ä¸‰ä¸ªè®­ç»ƒé˜¶æ®µ\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907120358.png)\n\n### 2.1. æ— ç›‘ç£å­¦ä¹ ï¼šå¼€å·æœ‰ç›Š\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907120518.png)\n\n### 2.2. ç›‘ç£å­¦ä¹ ï¼šæ¨¡æ¿è§„èŒƒ\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907120656.png)\n\n### 2.3. æ„å¤–æ”¶è·ï¼ˆæ¶Œç°ï¼‰\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907121049.png)\n\næœ‰äº†ç†è§£èƒ½åŠ›ï¼Œæ¯”å¦‚ï¼ŒçŸ¥é“**äº‹åè¯¸è‘›äº®**äº†\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907121454.png)\n\n### 2.4. å¼ºåŒ–å­¦ä¹ ï¼šåˆ›æ„å¼•å¯¼\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907121342.png)\n\n## 3. æ€»ç»“ï¼šGPT çš„åŸºç¡€åŸç†\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907121705.png)\n","f6bce78ff73058a3b4068acfdbccaed0":"\n# chatGPT æ˜¯ä»€ä¹ˆï¼ˆç¯‡äºŒï¼‰\n\n`#AI`  `#chatGPT`  `#agi`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å¦‚ä½•ç”¨è®¡ç®—æœºæè¿°çœŸå®çš„ä¸–ç•Œï¼Ÿ \n\n> ä¸€åˆ‡éƒ½æ˜¯äºŒè¿›åˆ¶\n\n- å­—æ¯\n- æ–‡æœ¬\n- å›¾ç‰‡æœ€ç»ˆå­˜åœ¨è®¡ç®—æœºå†…ä¹Ÿæ˜¯äºŒè¿›åˆ¶\n\t- å³ `rgba()`\n- è§†é¢‘\n- å…¶ä»–ç­‰ç­‰\n\nè®¡ç®—æœºå¦‚ä½•æŠŠæ•°å­—ï¼ˆäºŒè¿›åˆ¶ï¼‰å’ŒçœŸå®çš„ä¸–ç•Œå»ºç«‹è”ç³»å‘¢ï¼Ÿéœ€è¦ä¸¤æ­¥ï¼Œå¦‚ä¸‹\n\n## 2. ç¬¬ä¸€æ­¥ï¼šå‘é‡åŒ–\n\nä¸ºä»€ä¹ˆè¦å‘é‡åŒ–ï¼Œä¸¤ä¸ªåŸå› ï¼š\n- æ–¹ä¾¿ç”µè„‘å¤„ç†\n- æ–¹ä¾¿å¯»æ‰¾è§„å¾‹\n\n### 2.1. æ–¹ä¾¿ç”µè„‘å¤„ç†\n\næ¯”å¦‚ï¼Œå¦‚ä½•æè¿°ä¸€ä¸ªäººç°å®ä¸­çš„äººäº†ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907160925.png)\n\n### 2.2. æ–¹ä¾¿å¯»æ‰¾è§„å¾‹\n\næ¯”å¦‚çœ‹ä¸¤ä¸ªäººçš„ç›¸ä¼¼åº¦ï¼Œå¦‚ä¸‹å›¾\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907161243.png)\n\n### 2.3. æ›´é«˜ç»´åº¦\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907161423.png)\n\n### 2.4. åˆå§‹åŒ–ç»´åº¦\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907161549.png)\n\n### 2.5. å¦‚ä½•è®­ç»ƒä¿®æ”¹ç»´åº¦å€¼å‘¢ï¼Ÿ\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907162001.png)\n\n### 2.6. å¤§é‡è¯­æ–™è®­ç»ƒè¾“å…¥ï¼Œä¿®æ”¹ç»´åº¦å€¼\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907161749.png)\n\n## 3. ç¬¬äºŒæ­¥ï¼šä¿¡æ¯å‹ç¼©å’Œç‰¹å¾æå–\n\nè¿™ä¸€æ­¥ï¼Œå°±æ˜¯ä¸ºäº†æ€»ç»“å‡º**æ­£ç¡®çš„è§„å¾‹**ï¼Œè®¡ç®—å‡º**æ­£ç¡®çš„å‘é‡å€¼**\n\n### 3.1. CNN\n\nç°åœ¨å›¾åƒè¯†åˆ«ä¹‹æ‰€ä»¥æˆç†Ÿï¼Œæ˜¯å› ä¸ºæ‰¾åˆ°äº†æå–å›¾åƒç‰¹å¾çš„æ–¹æ³•ï¼Œå³ CNN \n\n### 3.2. RNN\n\nä¸»è¦é—®é¢˜æ˜¯ä¼šå¿˜è®°å‰é¢è¯´äº†å•¥ï¼Ÿå¦‚ä¸‹å›¾\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907162735.png)\n\n### 3.3. TransFormer\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907163023.png)\n\nä½¿ç”¨è¿™ç§æœºåˆ¶è®­ç»ƒï¼Œå¯ä»¥è®©ç”µè„‘**æˆåŠŸå‘é‡åŒ–**\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907163214.png)\n\nå„è‡ªå‘å±•è·¯çº¿å›¾\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907163711.png)\n\n### 3.4. OpenAIçš„é€‰æ‹©\n\n#### 3.4.1. ç”Ÿæˆ\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907164539.png)\n\n#### 3.4.2. å¢åŠ å‚æ•°\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907163806.png)\n\n## 4. æ¶Œç°\n\né€‰æ‹©äºŒä¹‹åï¼Œå¤§åŠ›å‡ºå¥‡è¿¹\n\n","0c13957ba5d45456a0ebdd1cdbdd68cd":"\n# å¤§æ¨¡å‹æ˜¯å¦‚ä½•è®­ç»ƒçš„ï¼Ÿ\n\n`#AI`  `#chatGPT`  `#agi`   `#å¤§æ¨¡å‹`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å…ˆçœ‹çœ‹å¤§æ¨¡å‹è‡ªå·±çš„å›ç­” ï¼ˆsonnetï¼‰ \n\nå¤§æ¨¡å‹çš„è®­ç»ƒæ˜¯ä¸€ä¸ªå¤æ‚è€Œèµ„æºå¯†é›†çš„è¿‡ç¨‹ã€‚ä»¥ä¸‹æ˜¯å¤§æ¨¡å‹è®­ç»ƒçš„ä¸»è¦æ­¥éª¤å’Œå…³é”®ç‚¹:\n\n1. æ•°æ®å‡†å¤‡\n\t- æ”¶é›†æµ·é‡é«˜è´¨é‡æ–‡æœ¬æ•°æ®,é€šå¸¸æ˜¯**æ•°ç™¾GBåˆ°TBçº§åˆ«**\n\t- å¯¹æ•°æ®è¿›è¡Œæ¸…æ´—ã€æ ‡å‡†åŒ–å’Œé¢„å¤„ç†\n\t- æ„å»ºè¯è¡¨,å°†æ–‡æœ¬è½¬æ¢ä¸ºæ¨¡å‹å¯å¤„ç†çš„æ•°å­—åºåˆ—\n2. æ¨¡å‹è®¾è®¡  \n\t- é€‰æ‹©åˆé€‚çš„**æ¨¡å‹æ¶æ„**,å¦‚Transformer\n\t- ç¡®å®šæ¨¡å‹è§„æ¨¡,åŒ…æ‹¬å±‚æ•°ã€éšè—å•å…ƒæ•°ç­‰è¶…å‚æ•°\n\t- è®¾è®¡è®­ç»ƒç›®æ ‡,å¦‚è¯­è¨€æ¨¡å‹ã€æ©ç è¯­è¨€æ¨¡å‹ç­‰\n3. åˆ†å¸ƒå¼è®­ç»ƒ\n\t- ä½¿ç”¨**å¤§è§„æ¨¡GPU/TPUé›†ç¾¤**è¿›è¡Œå¹¶è¡Œè®­ç»ƒ\n\t- é‡‡ç”¨**æ•°æ®å¹¶è¡Œ**ã€**æ¨¡å‹å¹¶è¡Œ**ç­‰æŠ€æœ¯æé«˜è®­ç»ƒæ•ˆç‡\n\t- ä½¿ç”¨æ··åˆç²¾åº¦è®­ç»ƒã€æ¢¯åº¦ç´¯ç§¯ç­‰æ–¹æ³•èŠ‚çœæ˜¾å­˜\n4. ä¼˜åŒ–ç­–ç•¥\n\t- é€‰æ‹©åˆé€‚çš„ä¼˜åŒ–å™¨,å¦‚Adam\n\t- è®¾è®¡å­¦ä¹ ç‡è°ƒåº¦ç­–ç•¥\n\t- ä½¿ç”¨æ¢¯åº¦è£å‰ªç­‰æŠ€æœ¯ç¨³å®šè®­ç»ƒ\n5. è®­ç»ƒè¿‡ç¨‹\n\t- è¿­ä»£è®­ç»ƒæ•°ç™¾ä¸‡åˆ°æ•°åäº¿æ­¥\n\t- ç›‘æ§æŸå¤±ã€å›°æƒ‘åº¦ç­‰æŒ‡æ ‡\n\t- å®šæœŸä¿å­˜æ£€æŸ¥ç‚¹,ä»¥ä¾¿æ¢å¤è®­ç»ƒ\n6. è¯„ä¼°ä¸æ”¹è¿›\n\t- åœ¨éªŒè¯é›†ä¸Šè¯„ä¼°æ¨¡å‹æ€§èƒ½\n\t- åˆ†ææ¨¡å‹è¾“å‡º,æ‰¾å‡ºä¸è¶³ä¹‹å¤„\n\t- è°ƒæ•´è¶…å‚æ•°ã€æ•°æ®æˆ–æ¨¡å‹ç»“æ„è¿›è¡Œä¼˜åŒ–\n7. éƒ¨ç½²ä¸åº”ç”¨\n\t- æ¨¡å‹å‹ç¼©å’Œé‡åŒ–\n\t- éƒ¨ç½²åˆ°æ¨ç†æœåŠ¡å™¨\n\t- é’ˆå¯¹ä¸‹æ¸¸ä»»åŠ¡è¿›è¡Œå¾®è°ƒ\n\næ•´ä¸ªè¿‡ç¨‹éœ€è¦å¤§é‡çš„è®¡ç®—èµ„æºã€ä¸“ä¸šçŸ¥è¯†å’Œåå¤å®éªŒã€‚è®­ç»ƒä¸€ä¸ªå¤§è§„æ¨¡è¯­è¨€æ¨¡å‹å¯èƒ½éœ€è¦\n- æ•°å‘¨åˆ°æ•°æœˆçš„**æ—¶é—´**\n- **æˆæœ¬**å¯è¾¾æ•°ç™¾ä¸‡ç¾å…ƒã€‚\n\n## 2. ä¸ºä»€ä¹ˆè¦èŠ±è¿™ä¹ˆå¤§çš„æˆæœ¬è®­ç»ƒï¼Ÿ\n\nå› ä¸ºï¼š\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908214209.png)\n\n## 3. å…ˆåœ¨å•æœºä¸Šè®­ç»ƒï¼Ÿ\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908214440.png)\n\nè¿™å¾—å¤šå¥½å•æœºæ€§èƒ½ï¼Œå®Œå…¨æä¸å®šå•Š\n\n## 4. å¤šæœºå™¨è®­ç»ƒ\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908214659.png)\n\n## 5. è®­ç»ƒå¤§æ¨¡å‹éœ€è¦è€ƒè™‘å“ªäº›å·¥ç¨‹å®ç°æ–¹é¢çš„æŒ‘æˆ˜?\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908215117.png)\n\n> B ç«™ä¸Šçœ‹çš„ä¸€ä¸ªè§†é¢‘å…¶å®åªæ˜¯å†°å±±ä¸€è§’ï¼Œéœ€è¦è€ƒè™‘çš„ä¸œè¥¿é‚£å¤ªå¤šäº†\n\nè®­ç»ƒå¤§æ¨¡å‹ç¡®å®é¢ä¸´è®¸å¤šå·¥ç¨‹å®ç°æ–¹é¢çš„æŒ‘æˆ˜ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸»è¦éœ€è¦è€ƒè™‘çš„æ–¹é¢:\n\n1. è®¡ç®—èµ„æºç®¡ç†\n\t- é«˜æ•ˆè°ƒåº¦å’Œåˆ©ç”¨å¤§è§„æ¨¡GPU/TPUé›†ç¾¤\n\t- å¤„ç†ç¡¬ä»¶æ•…éšœå’ŒèŠ‚ç‚¹å¤±æ•ˆ\n\t- ä¼˜åŒ–è®¡ç®—å’Œé€šä¿¡çš„å¹³è¡¡\n2. å†…å­˜å’Œå­˜å‚¨ä¼˜åŒ–\n\t- ç®¡ç†å·¨å¤§çš„æ¨¡å‹**å‚æ•°å’Œä¸­é—´çŠ¶æ€**\n\t- ä¼˜åŒ–æ•°æ®åŠ è½½å’Œé¢„å¤„ç†æµç¨‹\n\t- å¤„ç†æ£€æŸ¥ç‚¹ä¿å­˜å’Œæ¢å¤\n3. ç½‘ç»œé€šä¿¡\n\t- ä¼˜åŒ–è®¾å¤‡é—´çš„æ•°æ®ä¼ è¾“\n\t- å¤„ç†ç½‘ç»œå»¶è¿Ÿå’Œå¸¦å®½é™åˆ¶\n\t- å®ç°é«˜æ•ˆçš„é›†åˆé€šä¿¡åŸè¯­\n4. åˆ†å¸ƒå¼è®­ç»ƒæ¡†æ¶\n\t- é€‰æ‹©å’Œé…ç½®åˆé€‚çš„åˆ†å¸ƒå¼è®­ç»ƒæ¡†æ¶(å¦‚PyTorch DDP, DeepSpeedç­‰)\n\t- å®ç°è‡ªå®šä¹‰çš„åˆ†å¸ƒå¼è®­ç»ƒç­–ç•¥\n\t- ç¡®ä¿ä¸åŒ**è®¾å¤‡é—´çš„åŒæ­¥å’Œä¸€è‡´æ€§**\n5. æ•°æ®ç®¡ç†\n\t- é«˜æ•ˆå¤„ç†å’Œå­˜å‚¨TBçº§åˆ«çš„è®­ç»ƒæ•°æ®\n\t- å®ç°åŠ¨æ€æ•°æ®åŠ è½½å’Œé¢„å¤„ç†\n\t- ç¡®ä¿æ•°æ®çš„è´¨é‡å’Œå¤šæ ·æ€§\n6. ç›‘æ§å’Œè°ƒè¯•\n\t- å®æ—¶ç›‘æ§è®­ç»ƒè¿›åº¦å’Œç¡¬ä»¶çŠ¶æ€\n\t- è¯Šæ–­å’Œè§£å†³åˆ†å¸ƒå¼ç¯å¢ƒä¸­çš„é—®é¢˜\n\t- æ”¶é›†å’Œåˆ†æå¤§è§„æ¨¡è®­ç»ƒæ—¥å¿—\n7. æ¨¡å‹è¯„ä¼°å’Œåˆ†æ\n\t- è®¾è®¡å’Œå®ç°å¤§è§„æ¨¡æ¨¡å‹çš„è¯„ä¼°æµç¨‹\n\t- åˆ†ææ¨¡å‹æ€§èƒ½å’Œè¡Œä¸º\n\t- å¯è§†åŒ–å’Œè§£é‡Šæ¨¡å‹è¾“å‡º\n8. ç‰ˆæœ¬æ§åˆ¶å’Œå®éªŒç®¡ç†\n\t- ç®¡ç†å¤æ‚çš„ä»£ç åº“å’Œé…ç½®\n\t- è¿½è¸ªå’Œå¤ç°å®éªŒç»“æœ\n\t- åè°ƒå¤šäººåä½œçš„å¼€å‘è¿‡ç¨‹\n9. éƒ¨ç½²å’ŒæœåŠ¡\n\t- å°†è®­ç»ƒå¥½çš„å¤§æ¨¡å‹é«˜æ•ˆéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ\n\t- ä¼˜åŒ–æ¨ç†æ€§èƒ½å’Œå»¶è¿Ÿ\n\t- å®ç°æ¨¡å‹æ›´æ–°å’Œç‰ˆæœ¬æ§åˆ¶\n10. å®‰å…¨æ€§å’Œéšç§\n\t- ä¿æŠ¤è®­ç»ƒæ•°æ®å’Œæ¨¡å‹å‚æ•°çš„å®‰å…¨\n\t- å®ç°è”é‚¦å­¦ä¹ ç­‰éšç§ä¿æŠ¤æŠ€æœ¯\n\t- é˜²èŒƒå¯¹æŠ—æ€§æ”»å‡»å’Œæ¨¡å‹çªƒå–\n11. æˆæœ¬æ§åˆ¶\n\t- ä¼˜åŒ–è®¡ç®—èµ„æºä½¿ç”¨,é™ä½è®­ç»ƒæˆæœ¬\n\t- è¯„ä¼°ä¸åŒè®­ç»ƒç­–ç•¥çš„æˆæœ¬æ•ˆç›Š\n\t- ç®¡ç†äº‘æœåŠ¡å’Œç¡¬ä»¶èµ„æºçš„é¢„ç®—\n12. å¯æ‰©å±•æ€§è®¾è®¡\n\t- è®¾è®¡èƒ½å¤Ÿé€‚åº”ä¸åŒè§„æ¨¡æ¨¡å‹çš„è®­ç»ƒç³»ç»Ÿ\n\t- å®ç°æ¨¡å—åŒ–å’Œå¯é…ç½®çš„è®­ç»ƒæµç¨‹\n\t- ä¸ºæœªæ¥æ›´å¤§è§„æ¨¡çš„æ¨¡å‹åšå‡†å¤‡\n\n- è¿™äº›æŒ‘æˆ˜éœ€è¦**æ·±åšçš„ç³»ç»Ÿå·¥ç¨‹çŸ¥è¯†ã€åˆ†å¸ƒå¼è®¡ç®—ç»éªŒä»¥åŠå¯¹æœºå™¨å­¦ä¹ çš„æ·±å…¥ç†è§£**ã€‚\n- æˆåŠŸè®­ç»ƒå¤§æ¨¡å‹é€šå¸¸éœ€è¦ä¸€ä¸ªå¤šå­¦ç§‘å›¢é˜Ÿçš„ç´§å¯†åˆä½œ,åŒ…æ‹¬æœºå™¨å­¦ä¹ ç ”ç©¶è€…ã€ç³»ç»Ÿå·¥ç¨‹å¸ˆã€ç¡¬ä»¶ä¸“å®¶ç­‰ã€‚\n- éšç€æ¨¡å‹è§„æ¨¡çš„ä¸æ–­å¢é•¿,è¿™äº›æŒ‘æˆ˜ä¹Ÿåœ¨ä¸æ–­æ¼”å˜,æ¨åŠ¨ç€ç›¸å…³æŠ€æœ¯çš„æŒç»­åˆ›æ–°ã€‚\n\n","495d2cf04314531380177f37eecfbdee":"\n# Agent æ˜¯ä»€ä¹ˆï¼Ÿ\n\n\n`#ai/agent`  `#2024/08/25`  `#agi/bot` `#agi/agent` \n\n\n## ç›®å½•\n<!-- toc -->\n ## Agent çš„èµ·æº \n\n- **AutoGPT** ç­‰å¼€æºé¡¹ç›®çš„å‘å¸ƒï¼Œè¿™æ˜¯ç¬¬ä¸€æ‰¹**åŸºäºè‡ªç„¶è¯­è¨€çš„ AI è‡ªåŠ¨åŒ–å®è·µ**\n\t- ä½ å‘Šè¯‰å®ƒä¸€ä¸ªä»»åŠ¡ï¼Œå®ƒå°±ä¼šé€šè¿‡è‡ªç„¶è¯­è¨€çš„è‡ªæˆ‘å¯¹è¯ï¼Œå°†è¿™ä¸ªä»»åŠ¡è¿›è¡Œæ‹†åˆ†ã€è§„åˆ’å¹¶å®ç°ã€‚\n- ç»™äºˆä¸åŒçš„ Bot ä»¥ä¸åŒçš„äººæ ¼ï¼Œæ­é…è®°å¿†çª—å£ï¼Œè®©å®ƒä»¬ä¹‹é—´ç›¸äº’å¯¹è¯ã€‚\n- å¤§æ¨¡å‹ä»åŸæ¥çš„â€œ**æ€æƒ³å®¶**â€ï¼Œé€šè¿‡å¯¹å¤–éƒ¨å·¥å…·çš„ä½¿ç”¨ï¼Œå˜æˆäº†**å®å¹²å®¶**ã€‚\n\n## ä»€ä¹ˆæ˜¯ Agent\n\n- ä¸€ä¸ªå¸¸è§çš„è§‚ç‚¹æ˜¯ï¼Œ**Agent æ˜¯ä¸€ç§è®© AI ä»¥ç±»ä¼¼äººçš„å·¥ä½œå’Œæ€è€ƒæ–¹å¼ï¼Œæ¥å®Œæˆä¸€ç³»åˆ—çš„ä»»åŠ¡**\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825191527.png)\n\n## Agent çš„å†³ç­–æµç¨‹\n\n### åŸºæœ¬å†³ç­–æµç¨‹\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825193026.png)\n\n### ä¸¾ä¸ªä¾‹å­\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825193142.png)\n\n## Agent çš„ç»„æˆ\n\nåŒ…æ‹¬ 4 ä¸ªéƒ¨åˆ†\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825193325.png)\n\n### â‘  å¤§è„‘ï¼ˆLLMï¼‰ \n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825193426.png)\n\n### â‘¡ è§„åˆ’ ï¼ˆPlanningï¼‰\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825193517.png)\n\n### â‘¢ è®°å¿†ï¼ˆmemoryï¼‰\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825193652.png)\n\n### â‘£ å·¥å…·ä½¿ç”¨ï¼ˆuse Toolï¼‰\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825193721.png)\n\n## Agent ä¸ Bot çš„å…³ç³» \n\n### å®šä¹‰\n\n- AI Agentï¼ˆAIä»£ç†ï¼‰\n\t- AI Agent æ˜¯ä¸€ä¸ªå…·æœ‰è‡ªä¸»å†³ç­–èƒ½åŠ›ã€å¯ä»¥æ„ŸçŸ¥ç¯å¢ƒã€å­¦ä¹ é€‚åº”å¹¶è¿½æ±‚ç‰¹å®šç›®æ ‡çš„æ™ºèƒ½ç³»ç»Ÿã€‚\n- AI Botï¼ˆAIæœºå™¨äººï¼‰\n\t- AI Bot æ˜¯ä¸€ä¸ªä¸“æ³¨äºæ‰§è¡Œç‰¹å®šä»»åŠ¡ã€é€šå¸¸åŸºäºé¢„å®šè§„åˆ™è¿ä½œçš„è‡ªåŠ¨åŒ–ç¨‹åºã€‚\n\n### æ¼”å˜ä¸èåˆ\n\n- **é‡å **ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒBot å¯ä»¥è¢«è§†ä¸º Agent çš„ä¸€ç§ã€‚\n\t- ä¾‹å¦‚ï¼Œä¸€ä¸ªèŠå¤©æœºå™¨äººï¼ˆChatbotï¼‰å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ª Agentï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿä¸ç”¨æˆ·è¿›è¡Œäº¤äº’å¹¶æä¾›ä¿¡æ¯æˆ–æœåŠ¡ã€‚\n- **ç›¸äº’å½±å“**ï¼šéšç€æŠ€æœ¯çš„å‘å±•ï¼Œè®¸å¤š Bot å¼€å§‹å…·å¤‡æ›´å¤šçš„ Agent ç‰¹æ€§ï¼Œä¾‹å¦‚é€šè¿‡æœºå™¨å­¦ä¹ å®ç°çš„è‡ªä¸»å†³ç­–èƒ½åŠ›ã€‚\n- ä¸€ä¸ª Agent å¯ä»¥æ˜¯**ä¸€ä¸ª Bot**ï¼Œä¹Ÿå¯ä»¥æ˜¯**å¤šä¸ª Bot çš„ååŒ**\n\t- å°±åƒæ˜¯èŒåœºé‡Œï¼Œç®€å•çš„å·¥ä½œç‹¬ç«‹å®Œæˆï¼Œå¤æ‚çš„å·¥ä½œåä½œå®Œæˆä¸€æ ·\n\n### å®ç°çš„æŠ€æœ¯æ ˆå¯¹æ¯”\n\n- AgentæŠ€æœ¯æ ˆï¼š\n    - æ·±åº¦å­¦ä¹ \n    - å¼ºåŒ–å­¦ä¹ \n    - è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰\n    - è®¡ç®—æœºè§†è§‰\n    - çŸ¥è¯†å›¾è°±\n    - å¤šæ¨¡æ€AI\n- BotæŠ€æœ¯æ ˆï¼š\n    - è§„åˆ™å¼•æ“\n    - ç®€å•çš„æœºå™¨å­¦ä¹ æ¨¡å‹\n    - åŸºæœ¬çš„NLPï¼ˆå¦‚å…³é”®è¯åŒ¹é…ï¼‰\n    - APIé›†æˆ\n    - å·¥ä½œæµè‡ªåŠ¨åŒ–\n\n### ä» AI åº”ç”¨çš„è§’åº¦çœ‹\n\n- Agent ä»£è¡¨äº†æ›´é«˜çº§ã€æ›´å¤æ‚çš„AIç³»ç»Ÿ\n- è€ŒBotåˆ™æ˜¯æ›´ä¸“é—¨åŒ–ã€ä»»åŠ¡å¯¼å‘çš„AIå·¥å…·\n\néšç€æŠ€æœ¯çš„å‘å±•ï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µä¹‹é—´çš„ç•Œé™æ­£åœ¨é€æ¸æ¨¡ç³Šï¼Œæˆ‘ä»¬çœ‹åˆ°äº†æ›´å¤šçš„æ··åˆç³»ç»Ÿï¼Œç»“åˆäº†**Botçš„æ•ˆç‡**å’Œ**Agentçš„æ™ºèƒ½**ã€‚\n\n## Bot çš„ç»„æˆ\n\nå¯¹äºæ¯ä¸ª Bot æ¥è¯´ï¼Œå¯èƒ½ä¼šåŒ…æ‹¬ï¼š\n- **ä¸€ä¸ªå¤§è„‘**ï¼šåˆ¤æ–­å’Œè§„åˆ’è¡Œä¸ºï¼Œè¿™é‡Œé€šå¸¸ç”¨ GPT-4 æˆ– åŒæ°´å¹³çš„ **LLM**ï¼›\n- **çœ¼ç›å’Œæ‰‹**ï¼šç¡®è®¤ä¿¡æ¯å’Œä½¿ç”¨å¤–éƒ¨å·¥å…·ï¼Œä¸€èˆ¬æ˜¯**å„ç§æ’ä»¶/action/api**ï¼›\n- **å·¥ä½œçºªè¦**ï¼šå‚¨å­˜å·²ç»å‘ç”Ÿçš„äº‹\n\t- é€šå¸¸çš„åª’ä»‹æ˜¯ä¸Šä¸‹æ–‡çª—å£\n\t- æˆ–è€…æ•°æ®åº“ï¼›  \n- **è¡Œä¸ºSOP**ï¼šæ˜ç¡®è¿™ä¸ª Agent çš„èº«ä»½ã€ä»»åŠ¡ã€ç›®æ ‡å’Œæœºåˆ¶ã€‚\n\t- è¿™ä¸ª SOP å¯èƒ½æ˜¯ç”¨æˆ·ç»™çš„\n\t- ä¹Ÿå¯èƒ½æ˜¯ç”±å…¶å®ƒ Bot ç»™å‡ºçš„ã€‚\n\nå†å…·è±¡ä¸€ç‚¹ï¼Œè¿™é‡Œæˆ‘ä» GPTs é‡Œæˆªäº†ä¸ªå›¾ï¼š\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825194356.png)\n\n## OpenAI çš„ Agent æ¼”è¿›\n\n### å¼€å‘æ–‡æ¡£ä¸­çš„ Fuction Call \n\n OpenAI ç»™å¼€å‘è€…å‘é€çš„æŒ‡å¼•ä¸­ï¼Œç»™äº†è¿™æ ·çš„ Todo\n- **ç¬¬ä¸€æ­¥**ï¼šå¼€å‘æ¥å£ï¼Œæ¥å®šä¹‰ ChatGPT å¯ä»¥è°ƒç”¨çš„åŠŸèƒ½\n\t- æ¥å£å¯ä»¥æ˜¯æ–°å¼€å‘çš„\n\t- ä¹Ÿå¯ä»¥æ˜¯æ”¹é€ ç°æœ‰çš„\n- **ç¬¬äºŒæ­¥**ï¼šå†™ä¸€ä»½æ–‡æ¡£ï¼Œ**ç»™ ChatGPT æ¥çœ‹ï¼Œè®©å®ƒçŸ¥é“ä»€ä¹ˆæ—¶å€™å»è°ƒç”¨æ¥å£**ã€‚\n\t- å½“ç„¶ï¼Œè¿™é‡Œè¦éµå¾ªä¸€å®šçš„æ ¼å¼ï¼Œç„¶åç”¨è‡ªç„¶è¯­è¨€æ¥å†™ã€‚\n\nå¦‚æœä½ åšè¿‡ OpenAI API çš„å¼€å‘ï¼Œå¯èƒ½ä¼šè§‰å¾—è¿™ä¸ªæ–‡æ¡£æœ‰äº›ç†Ÿæ‚‰ï¼Œè¿™ä¸å°±æ˜¯ Fuction Call å—ï¼Ÿè¯¦è§ä¸‹æ–‡ [#AI å’Œ LLM ä¸Šä¸‹æ–‡ä¸­çš„ Function Call](/post/495d2cf04314531380177f37eecfbdee.html#AI-å’Œ-LLM-ä¸Šä¸‹æ–‡ä¸­çš„-Function-Call)\n\næ²¡é”™ï¼Œåœ¨ 2023 å¹´ 6 æœˆ 13 æ—¥ï¼ŒOpenAI å‘å¸ƒäº† Function Call æ¨¡å¼ï¼Œè®©å¤§æ¨¡å‹å¯ä»¥æ¥è°ƒç”¨å¤–éƒ¨å·¥å…·ï¼Œç”¨çš„å°±æ˜¯éå¸¸ç±»ä¼¼çš„æ–¹æ¡ˆã€‚\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825202454.png)\n\n#### ä¼ ç»Ÿç¼–ç¨‹ä¸­çš„ Function Call\n\nåœ¨ä¼ ç»Ÿçš„ç¼–ç¨‹ä¸­ï¼ŒFunction Call æŒ‡çš„æ˜¯è°ƒç”¨ï¼ˆæ‰§è¡Œï¼‰ä¸€ä¸ªé¢„å®šä¹‰çš„å‡½æ•°æˆ–æ–¹æ³•çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬ï¼š\n- å°†æ§åˆ¶æƒè½¬ç§»åˆ°è¢«è°ƒç”¨çš„å‡½æ•°\n- å¯èƒ½ä¼ é€’å‚æ•°ç»™å‡½æ•°\n- æ‰§è¡Œå‡½æ•°å†…çš„ä»£ç \n- å¯èƒ½è¿”å›ä¸€ä¸ªå€¼\n- å°†æ§åˆ¶æƒè¿”å›ç»™è°ƒç”¨è€…\n\n#### AI å’Œ LLM ä¸Šä¸‹æ–‡ä¸­çš„ Function Call\n\nåœ¨ AI å’Œå¤§å‹è¯­è¨€æ¨¡å‹çš„èƒŒæ™¯ä¸‹ï¼ŒFunction Call æœ‰äº†æ›´å¹¿æ³›çš„å«ä¹‰ã€‚å®ƒé€šå¸¸æŒ‡çš„æ˜¯æ¨¡å‹èƒ½å¤Ÿè¯†åˆ«ä½•æ—¶éœ€è¦è°ƒç”¨å¤–éƒ¨å‡½æ•°æˆ– API æ¥å®Œæˆç‰¹å®šä»»åŠ¡çš„èƒ½åŠ›ã€‚è¿™ä¸ªæ¦‚å¿µç‰¹åˆ«é€‚ç”¨äºåƒ GPT-3.5 å’Œ GPT-4 è¿™æ ·çš„è¯­è¨€æ¨¡å‹ã€‚\n\nåœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­ï¼ŒFunction Call æ¶‰åŠï¼š\n- æ¨¡å‹ç†è§£ç”¨æˆ·çš„è¯·æ±‚\n- è¯†åˆ«éœ€è¦å¤–éƒ¨æ•°æ®æˆ–åŠŸèƒ½çš„æƒ…å†µ\n- ç”Ÿæˆè°ƒç”¨ç‰¹å®šå‡½æ•°çš„è¯·æ±‚\n- **è§£é‡Šå‡½æ•°è¿”å›çš„ç»“æœå¹¶å°†å…¶æ•´åˆåˆ°å“åº”ä¸­**\n\nç¤ºä¾‹åº”ç”¨ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825200333.png)\n\n### GPTS  Store çš„æ¨å‡º\n\nä¹‹åï¼ŒChatGPT æ¨å‡ºäº† All Tools åŠŸèƒ½ã€‚**ä¹Ÿå°±æ˜¯å›ç­”ç”¨æˆ·é—®é¢˜æ—¶ï¼Œä¸å†éœ€è¦ç”¨æˆ·è‡ªä¸»çš„æ¥é€‰æ‹©å·¥å…·**ï¼Œè¿™å¯ä»¥è§†ä½œæ˜¯â€œ**è‡ªåŠ¨ç‰ˆçš„Plugin**â€ï¼Œè¦†ç›–äº†ä¸‰æ¬¾å®˜æ–¹å·¥å…·Browsingï¼ŒAdvanced Data Analysis ï¼ŒDALLÂ·Eï¼Œå¦‚ä¸‹å›¾\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825200846.png)\n\næ—¶é—´æ¨ç§»ï¼Œåœ¨2023 å¹´ 11 æœˆ 6 æ—¥çš„æ—¶å€™ï¼Œåœ¨ OpenAI å¼€å‘è€…å¤§ä¼šä¸Šï¼ŒSam Altman å®£å¸ƒäº† **GPTs**ï¼Œè¿™é€šå¸¸è¢«è®¤ä¸ºæ˜¯ OpenAI æ¨å‡ºäº†å…¶ç¬¬ä¸€ä¸ªæ­£å¼ç‰ˆçš„ AI Agentã€‚åœ¨æœ€åˆçš„ç‰ˆæœ¬ä¸­ï¼ŒåŒ…æ‹¬ä»¥ä¸‹åŠŸèƒ½\n\n- å…è®¸ç”¨æˆ·åˆ›å»ºå¤šä¸ª Botï¼Œè‡ªå®šä¹‰å®ƒä»¬çš„èº«ä»½å’Œå›ç­”é£æ ¼ã€‚å¹¶ä¸”è¿™äº› Bot å¯ä»¥åˆ†äº«\n- Bot å¯ä»¥è‡ªæœ‰ä½¿ç”¨ä¸‰æ¬¾å®˜æ–¹å·¥å…·ï¼šBrowsing, Advanced Data Analysis å’Œ DALLÂ·E\n- Bot ä¹Ÿå¯ä»¥é€šè¿‡ Action çš„æ–¹å¼ï¼ˆç±»ä¼¼ API çš„ä¸œè¥¿ï¼‰ï¼Œå»è°ƒç”¨ä»»ä½•çš„å¤–éƒ¨èƒ½åŠ›\n- Bot å¯ä»¥æœ‰è‡ªå·±çš„æ•°æ®ç©ºé—´ï¼Œå…è®¸ç”¨æˆ·å¯¹è¿™äº›æ•°æ®è¿›è¡Œ QA\n\t- æ¯”å¦‚ï¼Œæˆ‘ä¸Šä¼ äº† OpenAI çš„å¼€å‘æ–‡æ¡£ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿç”Ÿæˆ OpenAI çš„è°ƒç”¨ä»£ç \n\nåŒæ—¶ï¼Œåœ¨11æœˆ06æ—¥çš„æ—¶å€™ï¼ŒOpenAI ä¹Ÿæ›´æ–°äº†å‡ ä¸ªå½±å“æ·±è¿œçš„æ¥å£ï¼š\n\n- **Function Calling**ï¼šæ›´æ–°å¤šå‚æ•°ç”ŸæˆåŠŸèƒ½ï¼Œå¯ä»¥è®©ä¸€è½®å¯¹è¯å®Œæˆå¤šé¡¹ä»»åŠ¡\n- **JSON Mode**ï¼šè®© API é€šè¿‡ JSONï¼Œè€Œéæ–‡å­—ï¼Œæ¥åšå‡ºå›åº”\n- **Seed**ï¼šè®¾å®šéšæœºå€¼ï¼Œæé«˜ä¸€è‡´æ€§\n- **Assistants API &Â Code Interpreter**ï¼šå¯ä»¥ç†è§£ä¸ºæŠŠ ChatGPT çš„ Botï¼Œæ¬åˆ°äº† API é‡Œ\n- **Retrieval**ï¼šç®€æ˜“åŒ–çŸ¥è¯†åº“æ„å»º\n\nåœ¨æœ€è¿‘ GPTs Â ä½“ç³»ä¸Šçº¿äº† GPT Storeï¼Œæœ‰äº›åª’ä½“ç§°å…¶ä¸º OpenAI çš„ App Store æ—¶åˆ»ï¼Œä½†å…¶å®å¹¶ä¸ç›¸åŒã€‚åœ¨ GPT Store é‡Œï¼Œç”¨æˆ·å¯ä»¥æœç´¢å’Œä½¿ç”¨ä¸ºå„é¡¹ä»»åŠ¡æ‰€å¼€å‘çš„ GPTsã€‚\n\n### @GPTs åŠŸèƒ½\n\nç´§éš GPT Store ä¸Šçº¿çš„ï¼Œè¿˜æœ‰ `@GPTs åŠŸèƒ½`ï¼Œä¹Ÿå°±æ˜¯åœ¨ä»»ä½•çš„å¯¹è¯ä¸­ï¼Œä½ éƒ½å¯ä»¥æ‰‹åŠ¨çš„è®©æŸä¸ª GPTs æ¥ç®¡è¿™ä¸ªå¯¹è¯å†…å®¹ï¼Œåšå‡ºæ›´å¥½çš„è¾“å‡ºã€‚\n\n## å…¶å®ƒÂ Agent å¹³å°\n\nä¹‹å‰å’Œ OpenAI çš„ç›¸å…³è´Ÿè´£äººèŠè¿‡ï¼ŒChatGPT çš„ä¸»è¦å®šä½æ˜¯â€œå¼€ç®±å³ç”¨çš„æ¶ˆè´¹çº§äº§å“â€ã€‚é‚£è¿™é‡Œï¼Œè‡ªç„¶ç»™â€œè¾ƒä¸ºå¤æ‚çš„ç”Ÿäº§çº§äº§å“â€ç•™ä¸‹äº†ç”Ÿæ€ç©ºé—´ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬ä¹Ÿæ¥æ¢è®¨ä¸‹è¿™ç±»äº§å“ã€‚\n\nä¸»è¦çš„ AI ç©å®¶éƒ½ä¼šå¯¹è¿™æ–¹é¢æœ‰æ‰€æ¶‰è¶³ï¼Œä¹Ÿå„æœ‰ä¾§é‡ã€‚æ¯”å¦‚\n- ä¼ ç»Ÿå¤§å‚è‡ªå­—èŠ‚æ‰£å­/coze\n- ç™¾åº¦çš„çµå¢ƒçŸ©é˜µ\n- ä¹Ÿæ¯”å¦‚æ¥è‡ª AI åˆåˆ›å…¬å¸çš„ Dify ç­‰ç­‰ã€‚\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825202340.png)\n\nä»¥æ‰£å­ä¸ºä¾‹ï¼Œå¯¹æ¯”ä¸ GPTs Storeï¼Œä¸»è¦çš„ä½“æ„ŸåŒºåˆ«åŒ…æ‹¬ï¼š\n\n- å…è´¹ï¼Œè‡³å°‘ç›®å‰æ˜¯å®Œå…¨å…è´¹çš„\n- æœ‰æ•°åä¸ªå®˜æ–¹æ’ä»¶ï¼Œå¯¹æ¯”ä¸Â GPTs é‡Œåªæœ‰3ä¸ª\n- å¯ä»¥ç”¨ç±»ä¼¼ä½ä»£ç çš„æ–¹å¼ï¼Œæ„å»º Workflowï¼Œå¹¶è¢« Bot è°ƒç”¨  \n- å¯ä»¥å°†æå¥½çš„ Bot å‘å¸ƒåˆ°å…¶å®ƒå¹³å°ï¼ˆæ¯”å¦‚é£ä¹¦ï¼Œå…¬ä¼—å·ï¼‰ï¼ŒåŒæ—¶æ”¯æŒ API\n\n**å…¶ä¸­åä¸¤æ¡æä¸ºæ ¸å¿ƒ**ã€‚  \n\n## Agent çš„å®æˆ˜\n\nä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„ Agent å¯ä»¥æä¾›æå¤§çš„ç”Ÿäº§åŠ›ï¼Œå¹¶åˆ›é€ æé«˜çš„ä»·å€¼ã€‚\n\nå‰å‡ å¤©å¤§ç«çš„ **Devin**ï¼Œè¢«ç§°ä¸ºâ€œç¬¬ä¸€ä½ç”± AI æ‹…ä»»çš„è½¯ä»¶å·¥ç¨‹å¸ˆâ€ï¼Œå®ƒå¯ä»¥è‡ªä¸»çš„å»å­¦ä¼šå¦‚ä½•ä½¿ç”¨ä¸ç†Ÿæ‚‰çš„æŠ€æœ¯ï¼Œè‡ªä¸»çš„ç”Ÿæˆä»£ç ã€è°ƒè¯•bugå’Œéƒ¨ç½²åº”ç”¨ã€‚\n\nAgent ä¹Ÿå¯ä»¥æ›¿ä»£ç°æœ‰çš„å¾ˆå¤šè½¯ä»¶å·¥å…·ï¼Œå»å®Œæˆå·¥ä½œä¸­ç¹ççš„ä»»åŠ¡ã€‚\n\n> **æ˜¯å¦å¯ä»¥æŠŠå†™è¿™ç¯‡æ–‡ç« çš„è¿‡ç¨‹ï¼ŒæŸ¥é˜…ä»€ä¹ˆèµ„æ–™ï¼Œå¦‚ä½•æ’ç‰ˆï¼Œå¦‚ä½•å‘å¸ƒï¼Œç›´æ¥ææˆä¸ª Agentï¼Œæ¥å¸®æˆ‘å®Œæˆè¿™äº›äº‹æƒ…ï¼Œå…¶å®å·²ç»æ˜¯å¯ä»¥çš„äº†ã€‚**\n\n## Agent çš„é—®é¢˜\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825192813.png)\n\nåœ¨ AGI æ¥ä¹‹å‰ï¼ŒAgent æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„æ›¿ä»£æ–¹æ¡ˆã€‚ä¸è¿‡ç°åœ¨è¿˜æœ‰ä¿©ä¸»è¦æ¯›ç—…ï¼š\n1. ä¸å¤Ÿç¨³å®šï¼›\n2. ç®—åŠ›æœ‰ç‚¹è´µ\n\næ‰€ä»¥ï¼Œè¿™å°±éœ€è¦ **Agent å·¥ç¨‹**æ¥è§£å†³è¿™ä¸ªé—®é¢˜\n\n## å‚è€ƒ\n\n- https://mp.weixin.qq.com/s/xQPmiEfFOOp8R5zgTcYHDA\n- https://www.yuque.com/r/note/1cec57e4-386c-49f2-982a-4e531b875a5d\n","1f7b1803199a51ffab7b54cfd99eb5cf":"\n# Agent å·¥ç¨‹æ¶æ„å›¾\n\n\n`#agi/agent`   `#2024/08/25`  `#ai`   \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. Agent çš„å·¥ç¨‹æ¶æ„å›¾ï¼ˆåŸºç¡€ï¼‰ \n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825204007.png)\n\n### 1.1. è§£é‡Š â‘ ï¼šRPA \n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825205021.png)\n\n#### 1.1.1. å…³é”®æŠ€æœ¯\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825205210.png)\n\n### 1.2. è§£é‡Š â‘¡ ï¼š RAG\n\nRAGï¼ˆRetrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æ˜¯ä¸€ç§å…ˆè¿›çš„è‡ªç„¶è¯­è¨€å¤„ç†æŠ€æœ¯ï¼Œå®ƒç»“åˆäº†ä¿¡æ¯æ£€ç´¢å’Œæ–‡æœ¬ç”Ÿæˆçš„ä¼˜åŠ¿ã€‚\n#### 1.2.1. å®šä¹‰\n\nRAGæ˜¯ä¸€ç§æ··åˆæ–¹æ³•ï¼Œå®ƒå°†**å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„ç”Ÿæˆèƒ½åŠ›**ä¸**å¤–éƒ¨çŸ¥è¯†åº“çš„æ£€ç´¢åŠŸèƒ½**ç›¸ç»“åˆã€‚è¿™ç§æ–¹æ³•å…è®¸AIç³»ç»Ÿåœ¨ç”Ÿæˆå“åº”æ—¶ï¼Œä¸ä»…ä¾èµ–äºå…¶é¢„è®­ç»ƒçš„çŸ¥è¯†ï¼Œè¿˜èƒ½åˆ©ç”¨æœ€æ–°çš„ã€ç‰¹å®šé¢†åŸŸçš„ä¿¡æ¯ã€‚\n\n> é€šè¿‡åœ¨ç”Ÿæˆæ–‡æœ¬æ—¶åˆ©ç”¨å¤–éƒ¨çŸ¥è¯†åº“æˆ–æ–‡æ¡£æ¥å¢å¼ºç”Ÿæˆæ¨¡å‹çš„æ€§èƒ½\n\n#### 1.2.2. å·¥ä½œåŸç†ï¼ˆä¸‰ä¸ªé˜¶æ®µï¼‰\n\n- æ£€ç´¢é˜¶æ®µï¼šç³»ç»Ÿä»å¤–éƒ¨çŸ¥è¯†åº“ä¸­æ£€ç´¢ä¸ç”¨æˆ·æŸ¥è¯¢ç›¸å…³çš„ä¿¡æ¯ã€‚\n- å¢å¼ºé˜¶æ®µï¼šå°†æ£€ç´¢åˆ°çš„ä¿¡æ¯ä¸åŸå§‹æŸ¥è¯¢ç»“åˆã€‚\n- ç”Ÿæˆé˜¶æ®µï¼šåˆ©ç”¨å¢å¼ºåçš„ä¿¡æ¯ï¼Œç”Ÿæˆæœ€ç»ˆçš„å“åº”ã€‚\n\n#### 1.2.3. åº”ç”¨åœºæ™¯\n\n- èŠå¤©æœºå™¨äººå’Œå®¢æˆ·æœåŠ¡ï¼šæä¾›æ›´å‡†ç¡®ã€æœ€æ–°çš„ä¿¡æ¯ã€‚\n- å†…å®¹åˆ›ä½œï¼šè¾…åŠ©å†™ä½œï¼Œæä¾›ç›¸å…³èƒŒæ™¯ä¿¡æ¯ã€‚\n- çŸ¥è¯†ç®¡ç†ç³»ç»Ÿï¼šæ•´åˆå’Œåˆ©ç”¨ä¼ä¸šå†…éƒ¨çŸ¥è¯†ã€‚\n- æ•™è‚²å’ŒåŸ¹è®­ï¼šä¸ªæ€§åŒ–å­¦ä¹ ä½“éªŒã€‚\n- åŒ»ç–—ä¿å¥ï¼šæä¾›æœ€æ–°çš„åŒ»å­¦ä¿¡æ¯å’Œè¯Šæ–­æ”¯æŒã€‚\n\n#### 1.2.4. RAGçš„ä¼˜åŠ¿\n\n- æé«˜å‡†ç¡®æ€§ï¼šé€šè¿‡è®¿é—®å¤–éƒ¨çŸ¥è¯†åº“ï¼Œ**å‡å°‘\"å¹»è§‰\"ï¼ˆç”Ÿæˆè™šå‡ä¿¡æ¯ï¼‰çš„å¯èƒ½æ€§**ã€‚\n- å®æ—¶æ›´æ–°ï¼šèƒ½å¤Ÿåˆ©ç”¨æœ€æ–°ä¿¡æ¯ï¼Œä¸å—æ¨¡å‹è®­ç»ƒæ—¶é—´çš„é™åˆ¶ã€‚\n- å¯è§£é‡Šæ€§ï¼šå¯ä»¥è¿½è¸ªç”Ÿæˆå†…å®¹çš„æ¥æºï¼Œå¢åŠ é€æ˜åº¦ã€‚\n- å®šåˆ¶åŒ–ï¼šå¯ä»¥æ ¹æ®ç‰¹å®šé¢†åŸŸæˆ–ç»„ç»‡çš„éœ€æ±‚å®šåˆ¶çŸ¥è¯†åº“ã€‚\n- é™ä½æˆæœ¬ï¼šç›¸æ¯”å®Œå…¨é‡æ–°è®­ç»ƒå¤§å‹æ¨¡å‹ï¼ŒRAGæä¾›äº†ä¸€ç§æ›´ç»æµçš„æ–¹å¼æ¥æ‰©å±•AIç³»ç»Ÿçš„çŸ¥è¯†\n\n#### 1.2.5. å®ç°RAGçš„æŠ€æœ¯è¦æ±‚\n\n- å‘é‡æ•°æ®åº“ï¼šç”¨äºé«˜æ•ˆå­˜å‚¨å’Œæ£€ç´¢ä¿¡æ¯ã€‚\n- åµŒå…¥æ¨¡å‹ï¼šå°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡è¡¨ç¤ºã€‚\n- å¤§å‹è¯­è¨€æ¨¡å‹ï¼šç”¨äºç”Ÿæˆæœ€ç»ˆå“åº”ã€‚\n- æ£€ç´¢ç®—æ³•ï¼šå¦‚è¯­ä¹‰æœç´¢ï¼Œç”¨äºæ‰¾åˆ°æœ€ç›¸å…³çš„ä¿¡æ¯\n- **ä¿¡æ¯æ£€ç´¢çš„æ•ˆç‡**ï¼šéœ€è¦å¿«é€Ÿæ£€ç´¢å¤§é‡æ–‡æ¡£ä»¥ä¿æŒç³»ç»Ÿçš„å®æ—¶æ€§ã€‚\n- **ä¿¡æ¯è´¨é‡å’Œå¯é æ€§**ï¼šç¡®ä¿æ£€ç´¢åˆ°çš„ä¿¡æ¯æ˜¯å‡†ç¡®å’Œå¯ä¿¡çš„ã€‚\n#### 1.2.6. æŒ‘æˆ˜å’Œæœªæ¥è¶‹åŠ¿\n\n- ä¿¡æ¯è´¨é‡æ§åˆ¶ï¼šç¡®ä¿æ£€ç´¢çš„ä¿¡æ¯å‡†ç¡®å¯é ã€‚\n- å®æ—¶æ€§èƒ½ä¼˜åŒ–ï¼šåœ¨å¤§è§„æ¨¡åº”ç”¨ä¸­ä¿æŒå¿«é€Ÿå“åº”ã€‚\n- å¤šæ¨¡æ€RAGï¼šæ•´åˆæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰å¤šç§ç±»å‹çš„ä¿¡æ¯ã€‚\n- ä¸å…¶ä»–AIæŠ€æœ¯çš„èåˆï¼šå¦‚å¼ºåŒ–å­¦ä¹ ã€å› æœæ¨ç†ç­‰ã€‚\n\nRAGæŠ€æœ¯é€šè¿‡ç»“åˆæ£€ç´¢å’Œç”Ÿæˆï¼Œæä¾›äº†ä¸€ç§å¼ºå¤§çš„æ–¹æ³•æ¥æå‡è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡çš„æ€§èƒ½ï¼Œ**å°¤å…¶æ˜¯åœ¨éœ€è¦åŠ¨æ€çŸ¥è¯†æ›´æ–°çš„åº”ç”¨ä¸­**\n\n### 1.3. è§£é‡Š â‘¢ï¼šAgent å¥—å¨ƒ\n\n#### 1.3.1. å®šä¹‰\n\n\"å¥—å¨ƒ\"è¿™ä¸ªæ¯”å–»å¯èƒ½æŒ‡çš„æ˜¯å¤šå±‚åµŒå¥—æˆ–é€’å½’çš„Agentç»“æ„ã€‚åœ¨è¿™ç§ç»“æ„ä¸­ï¼Œä¸€ä¸ªAgentå¯èƒ½åŒ…å«æˆ–è°ƒç”¨å…¶ä»–Agentï¼Œå½¢æˆä¸€ä¸ªå±‚çº§ç»“æ„ï¼Œç±»ä¼¼äºä¿„ç½—æ–¯å¥—å¨ƒç©å…·\n\nåœ¨åº”ç”¨åœ¨AIä¸­ï¼Œå¥—å¨ƒè¿™ä¸ªæ¦‚å¿µå¯ä»¥ç”¨æ¥æè¿°ä¸€ç§ç³»ç»Ÿæ¶æ„ï¼Œå…¶ä¸­ä¸€ä¸ª**æ™ºèƒ½ä»£ç†ï¼ˆAgentï¼‰** åŒ…å«æˆ–ç®¡ç†å…¶ä»–**å­ä»£ç†ï¼ˆSub-agentsï¼‰**ï¼Œå½¢æˆä¸€ä¸ªåµŒå¥—çš„ã€å±‚çº§åŒ–çš„ç»“æ„ã€‚\n\n**ä¸¾ä¸ªä¾‹å­**\n\nåœ¨ä¸€ä¸ªæ™ºèƒ½å®¶å±…ç³»ç»Ÿä¸­ï¼Œ\"**ç®¡ç†å®¶åº­èƒ½æº**\"è¿™ä¸ªç›®æ ‡å¯ä»¥åˆ†è§£æˆå¤šä¸ª**å­ä»»åŠ¡**ï¼š\n- **ç›‘æ§èƒ½æºä½¿ç”¨æƒ…å†µ:**Â ç”±ä¸€ä¸ªä¸“é—¨çš„Agentè´Ÿè´£æ”¶é›†å’Œåˆ†æå®¶åº­ç”¨ç”µæ•°æ®ã€‚\n- **è‡ªåŠ¨è°ƒèŠ‚ç”µå™¨ï¼š**Â æ ¹æ®ç”¨ç”µæƒ…å†µå’Œç”¨æˆ·ä¹ æƒ¯ï¼Œè‡ªåŠ¨å¼€å…³ç©ºè°ƒã€è°ƒèŠ‚ç¯å…‰äº®åº¦ç­‰ã€‚\n- **ä¸ç”¨æˆ·äº¤äº’ï¼š**Â é€šè¿‡è¯­éŸ³åŠ©æ‰‹æˆ–æ‰‹æœºAppï¼Œè®©ç”¨æˆ·äº†è§£å®¶åº­èƒ½æºä½¿ç”¨æƒ…å†µï¼Œå¹¶æä¾›èŠ‚èƒ½å»ºè®®ã€‚\n\næ¯ä¸ªå­ä»»åŠ¡éƒ½å¯ä»¥ç”±ä¸€ä¸ªç‹¬ç«‹çš„Agentæ¥å®Œæˆï¼Œå®ƒä»¬ç›¸äº’é…åˆï¼Œå…±åŒå®ç°\"ç®¡ç†å®¶åº­èƒ½æº\"è¿™ä¸ªæ€»ç›®æ ‡ã€‚\n\n#### 1.3.2. Agentå¥—å¨ƒçš„åŸç†\n\n- å±‚çº§ç»“æ„ï¼šä¸€ä¸ªé«˜çº§Agentå¯èƒ½ç®¡ç†å’Œåè°ƒå¤šä¸ªå­Agentã€‚\n- ä»»åŠ¡åˆ†è§£ï¼šå¤æ‚ä»»åŠ¡è¢«åˆ†è§£æˆæ›´å°çš„å­ä»»åŠ¡ï¼Œç”±ä¸åŒçš„ä¸“é—¨Agentå¤„ç†ã€‚\n- ä¿¡æ¯ä¼ é€’ï¼šAgentä¹‹é—´é€šè¿‡æ¶ˆæ¯ä¼ é€’è¿›è¡Œé€šä¿¡å’Œåä½œ\n\n#### 1.3.3. åº”ç”¨åœºæ™¯\n\n- å¤æ‚é—®é¢˜è§£å†³ï¼šé€šè¿‡å¤šä¸ªä¸“é—¨Agentçš„åä½œæ¥è§£å†³å¤æ‚é—®é¢˜ã€‚\n- çŸ¥è¯†æ•´åˆï¼šä¸åŒé¢†åŸŸçš„Agentå¯ä»¥ç»“åˆå„è‡ªçš„ä¸“ä¸šçŸ¥è¯†ã€‚\n- çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼šå¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ æˆ–ç§»é™¤Agentã€‚\n\n#### 1.3.4. æŠ€æœ¯å®ç°\n\n- LangChain ç­‰æ¡†æ¶å¯ç”¨äºæ„å»ºå’Œç®¡ç†å¤šAgentç³»ç»Ÿã€‚\n- ReActï¼ˆReasoning and Actingï¼‰æœºåˆ¶è¢«ç”¨äºå¢å¼ºAgentçš„æ¨ç†å’Œè¡ŒåŠ¨èƒ½åŠ›\n#### 1.3.5. ä¼˜åŠ¿\n\n- æ¨¡å—åŒ–ï¼šæ¯ä¸ªAgentå¯ä»¥ä¸“æ³¨äºç‰¹å®šä»»åŠ¡ã€‚\n- å¯æ‰©å±•æ€§ï¼šæ˜“äºæ·»åŠ æ–°åŠŸèƒ½æˆ–çŸ¥è¯†é¢†åŸŸã€‚\n- é²æ£’æ€§ï¼šå•ä¸ªAgentå¤±æ•ˆä¸ä¼šå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒã€‚\n#### 1.3.6. æŠ€æœ¯æŒ‘æˆ˜\n\n- åè°ƒ**å¤æ‚æ€§**ï¼šç®¡ç†å¤šä¸ªAgentä¹‹é—´çš„äº¤äº’å¯èƒ½å˜å¾—å¤æ‚ã€‚\n- **ä¸€è‡´æ€§**ç»´æŠ¤ï¼šç¡®ä¿ä¸åŒAgentä¹‹é—´çš„ä¿¡æ¯å’Œè¡ŒåŠ¨ä¿æŒä¸€è‡´ã€‚\n\t- **é€šä¿¡å¼€é”€**ï¼š Agent ä¹‹é—´çš„é€šä¿¡å¯èƒ½å¢åŠ ç³»ç»Ÿçš„è´Ÿæ‹…\n- **æ€§èƒ½**å¼€é”€ï¼šå¤šå±‚Agentå¯èƒ½å¢åŠ ç³»ç»Ÿçš„å“åº”æ—¶é—´å’Œèµ„æºæ¶ˆè€—ã€‚\n\n> å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒOpenAIæ¨å‡ºçš„ **GPTs** è™½ç„¶è¢«ä¸€äº›äººè§†ä¸ºAgentï¼Œä½†å®ƒä»¬ä¸ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„AI Agentæœ‰æ‰€ä¸åŒã€‚**GPTsæ›´åƒæ˜¯é¢„é…ç½®çš„å¤§è¯­è¨€æ¨¡å‹ï¼Œè€Œä¸æ˜¯å®Œå…¨è‡ªä¸»çš„Agent**\n\n## 2. Agent ä¸å…¶ä»–æ¨¡å—çš„å…³ç³»å›¾\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825211647.png)\n\n### 2.1. æ›´å¤š botï¼ˆagentï¼‰ååŒå…³ç³»å›¾\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825211817.png)\n\nå¦‚ä¸Šå›¾ï¼Œè¿™å°±å½¢æˆäº†ä¸Šæ–‡ä¸­ï¼ˆ[#è§£é‡Š â‘¢ï¼šAgent å¥—å¨ƒ](/post/1f7b1803199a51ffab7b54cfd99eb5cf.html#è§£é‡Š-â‘¢Agent-å¥—å¨ƒ)ï¼‰çš„**å¥—å¨ƒ**\n\n## 3. Agent çš„è¿­ä»£èŒƒå¼\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825211502.png)\n\n## 4. å‚è€ƒ\n\n- https://waytoagi.feishu.cn/wiki/QSVJwSkMfijmeZkcUSnckVXhnnd\n\n","53c17c0fc3f25d6999aca637219b5e53":"\n# Agent çš„è¿›åŒ–ä¹‹è·¯\n\n`#2024/08/25` `#ai/agent`  `#agi/agent`  `#ai` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. AI çš„èŒä¸šå‘å±•è§„åˆ’ \n\nAI çš„ **æ™‹å‡èŒçº§** ä¹‹è·¯ ï¼ˆL1~L5 ï¼‰\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825213157.png)\n\n- â‘  ç°åœ¨ç”¨çš„ `github copilot`  åªæ˜¯ç¬¬ L3ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„**åŠ©æ‰‹ï¼ˆCopilotï¼‰**\n- â‘¡ è‡ªå·±æ…¢æ…¢éœ€è¦å­¦ä¼š Agent å·¥ç¨‹å¼€å‘ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ **Agentï¼ˆæ™ºèƒ½ä½“ï¼‰**\n- â‘¢ åˆ°è¿™ä¸ªèŒçº§ï¼Œè¿˜æ—©å—ï¼Ÿ é€šç”¨äººå·¥æ™ºèƒ½\n\n## 2. Copilotï¼ˆL3ï¼‰ å’Œ Agentï¼ˆL4ï¼‰ çš„åŒºåˆ«\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825213742.png)\n\n> ç°åœ¨è‡ªå·±ç®—ä¸ªå¤§å­¦ç”Ÿæ¯•ä¸šå§ï¼Œå½“å‰èŒçº§æ˜¯ L3 ï¼Œå¹²å§ï¼Œå…ˆæ™‹å‡åˆ° L4ï¼Œæ‰æœ‰æ´»è·¯\n\n## 3. ä½œä¸ºç å†œçš„ä½ ï¼Œå¦‚ä½•è¿›åŒ–ï¼Œä¸è¢«æ·˜æ±°ï¼Ÿ\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825212810.png)\n\n> [!warning]\n> æ˜¯çš„å¥½å¥½å­¦ä¹  Agent å·¥ç¨‹ï¼Œå®ç° AGI ä¹‹å‰ï¼Œå¥½å¥½å­¦ä¹ å¼€å‘ Agent å·¥ç¨‹å§\n\n## 4. å‚è€ƒ\n\n- https://waytoagi.feishu.cn/wiki/QSVJwSkMfijmeZkcUSnckVXhnnd\n\n","1c6cfe60763157ff950d8b3f82fcf888":"\n# LangChainï¼ˆç¯‡ä¸€ï¼šåŸºç¡€å…¥é—¨ç¯‡ï¼‰\n\n`#langchain` `#ai/agent`  `#2024/09/08` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ç®€ä»‹ \n\n**LangChain**Â æ˜¯ä¸€ä¸ªåŸºäºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å¼€å‘åº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚\n- æä¾›äº†ä»å¼€å‘åˆ°éƒ¨ç½²çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸæ”¯æŒï¼ŒåŒ…æ‹¬æ¨¡å‹ I/Oã€èŠå¤©ã€å‡½æ•°å›è°ƒã€æ¶ˆæ¯ç±»å‹ã€è¾“å‡ºè§£æç­‰æ ¸å¿ƒæ¨¡å—ã€‚\n- å®ƒé€šè¿‡**å¼€æºåº“å’Œç¬¬ä¸‰æ–¹é›†æˆ**ç®€åŒ–äº†åº”ç”¨ç¨‹åºçš„æ„å»ºå’Œç”Ÿäº§åŒ–è¿‡ç¨‹ã€‚\n- LangChain è¿˜æä¾›äº†å¼ºå¤§çš„**å·¥å…·å’Œç»„ä»¶**ï¼Œå¦‚ LangSmithã€LangGraph å’Œ LangServeï¼Œç”¨äºè°ƒè¯•ã€æµ‹è¯•ã€è¯„ä¼°å’Œéƒ¨ç½²åº”ç”¨ç¨‹åº\n\n## 2. LangChain çš„æ•´ä½“æ¶æ„å›¾\n\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908213145.png)\n\n## 3. æ ¸å¿ƒæ¨¡å—å’Œå·¥å…·ç®€ä»‹\n\n1. æ¨¡å‹ I/Oï¼ˆModel I/Oï¼‰ï¼š\n   - åŠŸèƒ½ï¼šå¤„ç†ä¸è¯­è¨€æ¨¡å‹çš„è¾“å…¥å’Œè¾“å‡ºã€‚\n   - ç»„ä»¶ï¼š\n     - æç¤ºæ¨¡æ¿ï¼ˆPrompt templatesï¼‰ï¼šç”¨äºç»“æ„åŒ–è¾“å…¥åˆ°è¯­è¨€æ¨¡å‹ã€‚\n     - è¯­è¨€æ¨¡å‹ï¼ˆLanguage modelsï¼‰ï¼šåŒ…æ‹¬å¯¹å„ç§ **LLM æä¾›å•†**çš„é›†æˆã€‚\n     - è¾“å‡ºè§£æå™¨ï¼ˆOutput parsersï¼‰ï¼šå°†æ¨¡å‹è¾“å‡ºè½¬æ¢ä¸ºç»“æ„åŒ–æ ¼å¼ã€‚\n2. æ•°æ®è¿æ¥ï¼ˆData Connectionï¼‰ï¼š\n   - åŠŸèƒ½ï¼šç®¡ç†å’Œæ“ä½œåº”ç”¨ç¨‹åºä½¿ç”¨çš„æ•°æ®\n   - ç»„ä»¶ï¼š\n     - æ–‡æ¡£åŠ è½½å™¨ï¼ˆDocument loadersï¼‰ï¼šä»å„ç§æºåŠ è½½æ–‡æ¡£ã€‚\n     - æ–‡æ¡£è½¬æ¢å™¨ï¼ˆDocument transformersï¼‰ï¼šå¤„ç†å’Œè½¬æ¢æ–‡æ¡£ã€‚\n     - æ–‡æœ¬åµŒå…¥æ¨¡å‹ï¼ˆText embedding modelsï¼‰ï¼šå°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡è¡¨ç¤ºã€‚\n     - å‘é‡å­˜å‚¨ï¼ˆVector storesï¼‰ï¼šå­˜å‚¨å’Œæ£€ç´¢å‘é‡åŒ–æ–‡æœ¬ã€‚\n3. è®°å¿†ï¼ˆMemoryï¼‰ï¼š\n   - åŠŸèƒ½ï¼šç®¡ç†å¯¹è¯å†å²å’Œä¸Šä¸‹æ–‡ã€‚\n   - ç±»å‹ï¼š\n     - å¯¹è¯ç¼“å†²è®°å¿†ï¼ˆConversation buffer memoryï¼‰\n     - æ‘˜è¦è®°å¿†ï¼ˆSummary memoryï¼‰\n     - é•¿æœŸè®°å¿†ï¼ˆLong-term memoryï¼‰\n4. é“¾ï¼ˆChainsï¼‰ï¼š\n   - åŠŸèƒ½ï¼šç»„åˆå¤šä¸ªç»„ä»¶ä»¥å®Œæˆå¤æ‚ä»»åŠ¡ã€‚\n   - ç¤ºä¾‹ï¼š\n     - LLMé“¾ï¼ˆLLM Chainï¼‰ï¼šå°†æç¤ºæ¨¡æ¿ä¸è¯­è¨€æ¨¡å‹ç»“åˆã€‚\n     - æ£€ç´¢QAé“¾ï¼ˆRetrieval QA Chainï¼‰ï¼šç»“åˆæ£€ç´¢å’Œé—®ç­”åŠŸèƒ½ã€‚\n5. ä»£ç†ï¼ˆAgentsï¼‰ï¼š\n   - åŠŸèƒ½ï¼šå®ç°åŠ¨æ€å†³ç­–å’Œå·¥å…·ä½¿ç”¨ã€‚\n   - ç±»å‹ï¼š\n     - ReAct ä»£ç†ï¼šç»“åˆæ¨ç†å’Œè¡ŒåŠ¨ã€‚\n     - è‡ªæˆ‘æé—®ä»£ç†ï¼ˆSelf-ask agentï¼‰ï¼šèƒ½å¤Ÿæå‡ºå’Œå›ç­”è‡ªå·±çš„é—®é¢˜ã€‚\n     - è®¡åˆ’å’Œæ‰§è¡Œä»£ç†ï¼ˆPlan and execute agentï¼‰ï¼šåˆ¶å®šè®¡åˆ’å¹¶æ‰§è¡Œä»»åŠ¡ã€‚\n6. å›è°ƒï¼ˆCallbacksï¼‰ï¼š\n   - åŠŸèƒ½ï¼šæä¾›é’©å­ä»¥åœ¨é“¾å’Œä»£ç†æ‰§è¡ŒæœŸé—´è¿è¡Œè‡ªå®šä¹‰ä»£ç ã€‚\n   - ç”¨é€”ï¼šæ—¥å¿—è®°å½•ã€ç›‘æ§ã€è°ƒè¯•ç­‰ã€‚\n7. ç´¢å¼•ï¼ˆIndexesï¼‰ï¼š\n   - åŠŸèƒ½ï¼šç»„ç»‡å’Œæ£€ç´¢å¤§é‡æ–‡æœ¬æ•°æ®ã€‚\n   - ç±»å‹ï¼š\n     - å‘é‡ç´¢å¼•ï¼ˆVector indexï¼‰\n     - æ ‘ç´¢å¼•ï¼ˆTree indexï¼‰\n8. æ£€ç´¢å™¨ï¼ˆRetrieversï¼‰ï¼š\n   - åŠŸèƒ½ï¼šä»å„ç§æ•°æ®æºæ£€ç´¢ç›¸å…³ä¿¡æ¯ã€‚\n   - ç¤ºä¾‹ï¼šå‘é‡å­˜å‚¨æ£€ç´¢å™¨ã€ç½‘ç»œæ£€ç´¢å™¨ã€‚\n9. LangChain è¡¨è¾¾å¼è¯­è¨€ï¼ˆLCELï¼‰ï¼š\n   - åŠŸèƒ½ï¼šæä¾›å£°æ˜å¼æ–¹æ³•æ¥ç»„åˆ LangChain ç»„ä»¶ã€‚\n   - ä¼˜åŠ¿ï¼šç®€åŒ–å¤æ‚åº”ç”¨çš„æ„å»ºï¼Œæé«˜å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚\n10. å·¥å…·å’Œé›†æˆï¼š\n    - åŠŸèƒ½ï¼šæä¾›ä¸å„ç§å¤–éƒ¨æœåŠ¡å’Œ API çš„é›†æˆã€‚\n    - ç¤ºä¾‹ï¼šæœç´¢å¼•æ“ã€è®¡ç®—å™¨ã€å¤©æ°” API ç­‰ã€‚\n11. LangSmithï¼š\n    - åŠŸèƒ½ï¼šç”¨äºè°ƒè¯•ã€æµ‹è¯•ã€è¯„ä¼°å’Œç›‘æ§ LLM åº”ç”¨ã€‚\n    - ç‰¹ç‚¹ï¼šæä¾›å¯è§†åŒ–ç•Œé¢ã€æ€§èƒ½åˆ†æã€ç‰ˆæœ¬æ§åˆ¶ç­‰ã€‚\n12. LangServeï¼š\n    - åŠŸèƒ½ï¼šå°† LangChain åº”ç”¨éƒ¨ç½²ä¸º **REST API**ã€‚\n    - ä¼˜åŠ¿ï¼šç®€åŒ–éƒ¨ç½²è¿‡ç¨‹ï¼Œæä¾›æ ‡å‡†åŒ–çš„æ¥å£ã€‚\n13. LangGraphï¼š\n    - åŠŸèƒ½ï¼šç”¨äºæ„å»ºå’Œç®¡ç†å¤æ‚çš„**å¤šä»£ç†ç³»ç»Ÿ**ã€‚\n    - ç”¨é€”ï¼šåˆ›å»ºæ›´å¤æ‚ã€äº¤äº’å¼çš„ AI åº”ç”¨ã€‚\n\nè¿™äº›æ ¸å¿ƒæ¨¡å—å’Œå·¥å…·å…±åŒæ„æˆäº† LangChain çš„å¼ºå¤§ç”Ÿæ€ç³»ç»Ÿï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿæ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²å¤æ‚çš„ LLM åº”ç”¨ã€‚å®ƒä»¬æä¾›äº†ä»æ•°æ®å¤„ç†ã€æ¨¡å‹äº¤äº’åˆ°åº”ç”¨éƒ¨ç½²çš„å…¨é¢è§£å†³æ–¹æ¡ˆï¼Œå¤§å¤§ç®€åŒ–äº† AI åº”ç”¨å¼€å‘çš„å¤æ‚æ€§ã€‚\n\né€šè¿‡è¿™äº›æ¨¡å—å’Œå·¥å…·ï¼Œå¼€å‘è€…å¯ä»¥ï¼š\n- è½»æ¾ç®¡ç†ä¸ LLM çš„äº¤äº’\n- é«˜æ•ˆå¤„ç†å’Œæ£€ç´¢å¤§é‡æ•°æ®\n- æ„å»ºå…·æœ‰è®°å¿†å’Œä¸Šä¸‹æ–‡ç†è§£èƒ½åŠ›çš„åº”ç”¨\n- åˆ›å»ºèƒ½åŠ¨æ€å†³ç­–å’Œä½¿ç”¨å·¥å…·çš„æ™ºèƒ½ä»£ç†\n- éƒ¨ç½²å’Œç›‘æ§ç”Ÿäº§çº§ AI åº”ç”¨\n\nLangChain çš„æ¨¡å—åŒ–è®¾è®¡å…è®¸å¼€å‘è€…æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©å’Œç»„åˆä¸åŒçš„ç»„ä»¶ï¼Œä»è€Œæ„å»ºå‡ºçµæ´»ä¸”å¼ºå¤§çš„ AI åº”ç”¨ã€‚\n\n## 4. å¼€å‘æ—¶çš„è¯­è¨€é€‰æ‹©å»ºè®®\n\n- å¦‚æœä½ çš„é¡¹ç›®ä¸»è¦æ¶‰åŠæ•°æ®å¤„ç†ã€å¤æ‚çš„ AI æ¨¡å‹é›†æˆæˆ–åç«¯æœåŠ¡ï¼Œé€‰æ‹© Python ç‰ˆæœ¬å¯èƒ½æ›´åˆé€‚ã€‚\n- å¦‚æœä½ æ­£åœ¨æ„å»º Web åº”ç”¨ã€éœ€è¦å‰ç«¯é›†æˆæˆ–å¸Œæœ›åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ LLM åº”ç”¨ï¼ŒJavaScript ç‰ˆæœ¬å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚\n- å¯¹äºå…¨æ ˆåº”ç”¨ï¼Œä½ ç”šè‡³å¯ä»¥è€ƒè™‘åœ¨åç«¯ä½¿ç”¨ Python ç‰ˆæœ¬ï¼Œå‰ç«¯ä½¿ç”¨ JavaScript ç‰ˆæœ¬ï¼Œä»¥å……åˆ†åˆ©ç”¨ä¸¤è€…çš„ä¼˜åŠ¿\n\n","904d3675c6b55528acd9dcb0baf833d0":"\n# LangChain æ¦‚è¿°\n\n`#2024/09/13` `#langchain`  `#agi/langchain`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‰ç½®çŸ¥è¯†ç‚¹  \n\n- åŸºæœ¬æ¥è¯´ï¼Œå„å¤§å‚å¤§æ¨¡å‹å‘å¸ƒçš„æ—¶é—´ï¼Œéƒ½åœ¨ 2023 å¹´ä¸ŠåŠå¹´\n\t- è…¾è®¯ï¼šæ··å…ƒ\n- ChatGPT éœ€è¦åˆ†æˆä¸¤éƒ¨åˆ†\n\t- GPT\n\t- Chat æ˜¯ä¸€ç§å¯¹è¯çš„æ–¹å¼ï¼Œå³é’ˆå¯¹å¯¹è¯åº”ç”¨\n- é€šç”¨çš„**æç¤ºè¯æ¨¡æ¿**ï¼š\n\t- å®šä¹‰è§’è‰² +  èƒŒæ™¯ä¿¡æ¯ + ä»»åŠ¡ç›®æ ‡ + è¾“å‡ºè¦æ±‚\n- Token\n\t- ç±»ä¼¼äºå­—ç¬¦æ˜¯ç¼–ç¨‹è¯­è¨€çš„æœ€å°å•ä½\n\t- Token å¤§æ¨¡å‹çš„åŸºæœ¬å•ä½\n\t\t- è‹±è¯­ä¸­çš„ä¸€ä¸ªç®€å•å¥å­å¯èƒ½ä¼šè¢«æ‹†åˆ†æˆå¤šä¸ªæ ‡è®°\n\t\t- è€Œä¸­æ–‡ç”±äºå­—ç¬¦çš„ç‰¹æ€§ï¼Œé€šå¸¸ä¸€ä¸ªå­—ç¬¦å°±æ˜¯ä¸€ä¸ªæ ‡è®°\n- æ¨¡å‹æ”¯æŒçš„ä¸Šä¸‹æ–‡é•¿åº¦\n\t- 8kï¼š8000 ä¸ªæ ‡è®°ï¼ˆtokenï¼‰ Ã— 0.75 â‰ˆ 6000 ä¸ªè‹±æ–‡å•è¯\n\t\t- æ³¨æ„ï¼šæ ‡ç‚¹ç¬¦å·ã€ç‰¹æ®Šç¬¦å·ï¼Œæ•°å­—ç­‰ç­‰éƒ½ä¼šå½±å“ token æ•°é‡\n\t-  GPT-4 Turboï¼šæ”¯æŒæœ€å¤š 128,000 ä¸ª token\n\t- GPT-4ï¼šæœ‰ä¸¤ä¸ªç‰ˆæœ¬\n\t    - 8K ç‰ˆæœ¬ï¼šæ”¯æŒæœ€å¤š 8,192 ä¸ª token\n\t    - 32K ç‰ˆæœ¬ï¼šæ”¯æŒæœ€å¤š 32,768 ä¸ª token\n- å¤§æ¨¡å‹å¹»è§‰\n\t- å¤§æ¨¡å‹çš„â€œå¹»è§‰â€æ˜¯æŒ‡å®ƒä»¬åœ¨ç¼ºä¹ç†è§£èƒ½åŠ›çš„æƒ…å†µä¸‹ç”Ÿæˆä¸å‡†ç¡®æˆ–è™šå‡çš„ä¿¡æ¯ã€‚\n\t- æœ¬è´¨æºäºå…¶åŸºäºç»Ÿè®¡å­¦ä¹ çš„ç”Ÿæˆæœºåˆ¶ï¼Œç¼ºä¹äº‹å®éªŒè¯å’ŒçœŸæ­£çš„ç†è§£èƒ½åŠ›\n- å¤§æ¨¡å‹é¢„è®­ç»ƒä¸å¾®è°ƒ\n\t- **é¢„è®­ç»ƒ**ï¼šåœ¨å¤§è§„æ¨¡é€šç”¨æ•°æ®é›†ä¸Šè®­ç»ƒæ¨¡å‹ï¼Œå­¦ä¹ è¯­è¨€çš„å¹¿æ³›æ¨¡å¼å’Œç»“æ„ã€‚\n\t- **å¾®è°ƒ**ï¼šåœ¨ç‰¹å®šä»»åŠ¡çš„æ•°æ®ä¸Šè¿›ä¸€æ­¥è®­ç»ƒï¼Œä»¥é€‚åº”ç‰¹å®šåº”ç”¨éœ€æ±‚ã€‚\n\n## 2. LangChain ç®€ä»‹\n\n- å®šä¹‰ï¼šæ˜¯å¤§æ¨¡å‹çš„**ç¼–ç¨‹æ¡†æ¶**\n\t- è¿æ¥ å¼€å‘è€… å’Œå¤æ‚çš„ LLM åº”ç”¨\n- LangChain æä¾›å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸€åºåˆ—å·¥å…·ï¼ˆç™¾å®ç®±ï¼‰ï¼Œæ¯”å¦‚\n\t- **SQLæç¤ºè¯æ¨¡æ¿**ï¼Œæ–¹ä¾¿æŸ¥è¯¢\n- ç»„ä»¶ä¸é“¾\n\t- ç»„ä»¶ï¼šå…·æœ‰æ˜ç¡®åŠŸèƒ½å’Œç”¨é€”çš„å•å…ƒ\n\t- é“¾ï¼šé“¾å®šä¹‰äº†**ç»„ä»¶çš„è°ƒç”¨åºåˆ—** \n\t- ä¾‹å­ï¼šé—®â€œä»Šå¤©å¤©æ°”å¦‚ä½•ï¼ŸåŒäº‹å‘Šè¯‰æˆ‘é‡å­åŠ›å­¦æ˜¯ä»€ä¹ˆï¼Ÿâ€\n\t\t- `é“¾`ä¼š**ç¡®ä¿**è°ƒç”¨ `æœç´¢å·¥å…·ç»„ä»¶` å’Œ `ç»´åŸºç™¾ç§‘ç»„ä»¶` \n- Langchain çš„åº”ç”¨åœºæ™¯\n\t- æ•°æ®æŸ¥è¯¢å’Œåˆ†æï¼šLangChain å¯ä»¥ä¸æ•°æ®åº“é›†æˆï¼Œå…è®¸ç”¨**è‡ªç„¶è¯­è¨€**è¿›è¡Œå¤æ‚çš„æ•°æ®æŸ¥è¯¢å’Œåˆ†æ\n\t- ä»£ç ç”Ÿæˆç†è§£\n\t- è‡ªåŠ¨é—®ç­”æœºå™¨äºº\n\n\n## LangChain çš„ 6 å¤§æ¨¡å—\n\n- æ¨¡å‹ I/O\n\t- ä¸æä¾›å¤§æ¨¡å‹ï¼Œè€Œæ˜¯æä¾›å„å¤§æ¨¡å‹çš„ç»Ÿä¸€æ¥å£\n- æ•°æ®å¢å¼ºï¼š\n\t- èƒ½å¤Ÿæœ‰æ•ˆåœ°è¡¥å……LLMçš„çŸ¥è¯†åº“ï¼Œè§£å†³å…¶çŸ¥è¯†æ›´æ–°æ»åçš„é—®é¢˜ \n\t- LangChain çš„æ•°æ®å¢å¼ºæ¨¡å—ä¹Ÿè¢«ç§°ä¸º LEDVR å·¥ä½œæµï¼Œè¿™æ˜¯ä¸€ä¸ªå¤šåŠŸèƒ½çš„æ•°æ®å¢å¼ºé›†æˆå·¥å…·ã€‚LEDVR ä»£è¡¨ï¼š\n\t\t- L: Loader (åŠ è½½å™¨)\n\t\t- E: Text Embedding Model (åµŒå…¥æ¨¡å‹åŒ…è£…å™¨)\n\t\t- D: Document Transformer (æ–‡æ¡£è½¬æ¢å™¨)\n\t\t- V: Vector Store (å‘é‡å­˜å‚¨)\n\t\t- R: Retriever (æ£€ç´¢å™¨)\n- é“¾\n\t- å¤šä¸ª LLM æ¨¡å‹å’Œå…¶ä»–å¤šä¸ªç»„ä»¶è¿›è¡Œè¿æ¥\n- è®°å¿†\n\t- é“¾ä¼šè¯»å–å’Œå†™å…¥æ•°æ®åˆ°è®°å¿†ä¸­\n\t- åˆåˆ†ä¸ºçŸ­æœŸè®°å¿†å’Œé•¿æœŸè®°å¿†\n\t\t- çŸ­æœŸè®°å¿†ä¸»è¦ç”¨äºå¤„ç†æœ€è¿‘çš„å¯¹è¯\n\t\t- è€Œé•¿æœŸè®°å¿†åˆ™å¸®åŠ©ç³»ç»Ÿä»å†å²è®°å½•ä¸­æå–æœ‰ç”¨çš„ä¿¡æ¯ï¼Œä»¥ä¾¿åœ¨å¯¹è¯ä¸­æä¾›æ›´ä¸°å¯Œçš„ä¸Šä¸‹æ–‡æ”¯\n- ä»£ç†ï¼ˆAgentsï¼‰ï¼šå¼ºè°ƒåŠ¨æ€ã€æ™ºèƒ½\n\t- åŠŸèƒ½ï¼šå®ç°åŠ¨æ€å†³ç­–å’Œå·¥å…·ä½¿ç”¨ã€‚\n\t- ç±»å‹ï¼š\n\t\t- è‡ªæˆ‘æé—®ä»£ç†ï¼ˆSelf-ask agentï¼‰ï¼šèƒ½å¤Ÿæå‡ºå’Œå›ç­”è‡ªå·±çš„é—®é¢˜ã€‚\n\t\t- è®¡åˆ’å’Œæ‰§è¡Œä»£ç†ï¼ˆPlan and execute agentï¼‰ï¼šåˆ¶å®šè®¡åˆ’å¹¶æ‰§è¡Œä»»åŠ¡ã€‚\n\t\t- **ReAct** ä»£ç†ï¼šç»“åˆæ¨ç†å’Œè¡ŒåŠ¨ã€‚\n- å›è°ƒå¤„ç†å™¨ï¼ˆCallbackï¼‰\n\t- å¯¹å„ä¸ªé˜¶æ®µå¹²é¢„\n\n## LangChain çš„å¼€å‘æµç¨‹\n\n###  è·å– open ai key\n\n- æ·˜å®ä¹°å§ï¼Œä½¿ç”¨ `gpt-4o-mini`  æœ€ç»æµå®æƒ \n- ç§˜é’¥ä¿å­˜ï¼Œè®°å¾—åˆ«æäº¤äº†\n\n### ç¬¬ä¸€ä¸ªç¨‹åºï¼šè®© OpenAI å¸®å¿™ç¿»è¯‘\n\n```python\n# å¯¼å…¥ os æ¨¡å—, ç”¨äºè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œä½†å·²ç»å°†ç¯å¢ƒå˜é‡è®¾ç½®åˆ°äº† .zshrc ä¸­äº†\n# æ‰€ä»¥è¿™é‡Œä¸éœ€è¦å¯¼å…¥ os æ¨¡å—\n# import os\n\n# ä» langchain_openai æ¨¡å—ä¸­å¯¼å…¥ ChatOpenAI\nfrom langchain_openai import ChatOpenAI\nfrom langchain_text_splitters import python\nmodel = ChatOpenAI(model='gpt-4o-mini')\n\n# å¯¼å…¥ç”¨äºæ„å»ºå¯¹è¯æ¶ˆæ¯çš„\nfrom langchain_core.messages import HumanMessage, SystemMessage\nmessages = [\n    # è®¾ç½®ç³»ç»ŸæŒ‡ä»¤ï¼Œè¦æ±‚æ¨¡å‹å°†è‹±è¯­ç¿»è¯‘æˆæ„å¤§åˆ©è¯­\n    SystemMessage(content=\"Translate the following from English into chinese\"),\n    # è®¾ç½®äººç±»æ¶ˆæ¯ï¼Œå†…å®¹ä¸º \"hi!\"\n    HumanMessage(content=\"hi!\"),\n]\n\n# ä½¿ç”¨ä¹‹å‰åˆ›å»ºçš„æ¨¡å‹å®ä¾‹ï¼Œè°ƒç”¨ invoke æ–¹æ³•ï¼Œä¼ å…¥æ¶ˆæ¯åˆ—è¡¨\nres = model.invoke(messages)\n\nprint(res);\n\n# è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n\"\"\"\n{\n    \"content\": \"ä½ å¥½ï¼\",\n    \"additional_kwargs\": {\n        \"refusal\": None\n    },\n    \"response_metadata\": {\n        \"token_usage\": {\n            \"completion_tokens\": 2,\n            \"prompt_tokens\": 20,\n            \"total_tokens\": 22,\n            \"completion_tokens_details\": {\n                \"reasoning_tokens\": 0\n            }\n        },\n        \"model_name\": \"gpt-4o-mini-2024-07-18\",\n        \"system_fingerprint\": \"fp_483d39d857\",\n        \"finish_reason\": \"stop\",\n        \"logprobs\": None\n    },\n    \"id\": \"run-a72df3a8-7229-44cc-86c7-3c555f40ef20-0\",\n    \"usage_metadata\": {\n        \"input_tokens\": 20,\n        \"output_tokens\": 2,\n        \"total_tokens\": 22\n    }\n}\n\"\"\"\n\n```\n\n\n## 3. å‚è€ƒ\n\n- ã€ŠLangChain  å…¥é—¨æŒ‡å— Â· æ„å»ºé«˜å¯å¤ç”¨ã€å¯æ‰©å±•çš„ LLM åº”ç”¨ç¨‹åºã€‹","1f6561dd937251dbac9192314d4ee686":"\n# Dify notes\n\n\n- langChain ä¸ Dify çš„åŒºåˆ«ï¼š\n\t- å¯ä»¥æŠŠ LangChain è¿™ç±»çš„å¼€å‘åº“ï¼ˆLibraryï¼‰æƒ³è±¡ä¸ºæœ‰ç€é”¤å­ã€é’‰å­çš„å·¥å…·ç®±ã€‚\n\t- ä¸ä¹‹ç›¸æ¯”ï¼ŒDify æä¾›äº†æ›´æ¥è¿‘ç”Ÿäº§éœ€è¦çš„å®Œæ•´æ–¹æ¡ˆï¼ŒDify å¥½æ¯”æ˜¯ä¸€å¥—è„šæ‰‹æ¶ï¼Œå¹¶ä¸”ç»è¿‡äº†ç²¾è‰¯çš„å·¥ç¨‹è®¾è®¡å’Œè½¯ä»¶æµ‹è¯•\n- åªè¦æœ‰ä¼˜ç§€çš„æ–‡æ¡£ï¼Œæ‰€æœ‰å…¬å¸éƒ½å¯ä»¥æ‰“é€ å‡ºä¸“ç”¨å‹é—®ç­”æœºå™¨äººã€‚\n- Dify æ˜¯ä¸€ä¸ªå¼€æºçš„ LLMOpsï¼ˆå¤§å‹è¯­è¨€æ¨¡å‹è¿ç»´ï¼‰å¹³å°\n\n\n\n","6466503f6b6f53fb89850c4a8a001103":"\n# å‰è¨€\n\n`#å‰ç«¯` \n\nè¿™ä¸æ˜¯ä¸€æœ¬å…¥é—¨çš„ä¹¦ï¼Œå†™è¿™ä¹¦çš„**ä¸»è¦ç›®çš„**æ˜¯æ²‰æ·€æ„å»ºè‡ªå·±çš„å‰ç«¯çŸ¥è¯†ä½“ç³»ï¼Œä¸»è¦å—ä¼—æ˜¯æˆ‘è‡ªå·±ã€‚\n\nå‰ç«¯åå¹´ï¼Œæ­£èµ¶ä¸Šäº† AGI æ—¶ä»£ï¼Œå’Œ AGI å¥½å¥½æ¢è®¨å‰ç«¯çŸ¥è¯†ï¼Œæ•…æ­¤ä¹¦å¤§éƒ¨åˆ†å†…å®¹ä¼šä»¥é—®ç­”çš„å½¢å¼å±•å¼€\n\n> AGI æ—¶ä»£å­¦ä¹ å’Œæ•™è‚²çš„æ–¹å¼å°†è¢«é¢ è¦† ! \n\n","cfa6fd6d85b659e19637c62d08e66c86":"\n# å‰è¨€\n\n\n`#å‰ç«¯` \n\n- ç°ä»£ Web æŠ€æœ¯éƒ½æœ‰å“ªäº›ï¼Ÿ\n- å‰ç«¯æŠ€æœ¯éƒ½æœ‰å“ªäº›å…³é”®è¯ï¼Ÿ\n\n","61d73388bfb357e390e52cb5570db042":"\n# ä»€ä¹ˆæ˜¯äº’è”ç½‘ï¼Ÿ\n\n\n`#å‰ç«¯` `#äº’è”ç½‘` \n\n- è§£é‡Šä¸€ï¼šäº’è”ç½‘ï¼ˆInternetï¼‰æ˜¯ä¸€ä¸ªå…¨çƒæ€§çš„è®¡ç®—æœºç½‘ç»œç³»ç»Ÿï¼Œé€šè¿‡ä¸€ç³»åˆ—`æ ‡å‡†åŒ–çš„é€šä¿¡åè®®ï¼ˆå¦‚ TCP/IPï¼‰`å°†ä¸–ç•Œå„åœ°çš„è®¡ç®—è®¾å¤‡è¿æ¥åœ¨ä¸€èµ·ã€‚å®ƒå…è®¸ç”¨æˆ·åœ¨å…¨çƒèŒƒå›´å†…å…±äº«å’Œè®¿é—®ä¿¡æ¯ã€èµ„æºå’ŒæœåŠ¡ã€‚\n- è§£é‡ŠäºŒï¼šäº’è”ç½‘æ˜¯ä¸€ä¸ªé€šè¿‡`æ ‡å‡†åŒ–é€šä¿¡åè®®`å°†å…¨çƒè®¡ç®—è®¾å¤‡è¿æ¥åœ¨ä¸€èµ·çš„ç½‘ç»œç³»ç»Ÿï¼Œå…·æœ‰ä¿¡æ¯å…±äº«ã€ç”µå­é‚®ä»¶ã€åœ¨çº¿æœç´¢ã€ç¤¾äº¤åª’ä½“ã€ç”µå­å•†åŠ¡å’Œäº‘è®¡ç®—ç­‰å¤šç§åŠŸèƒ½\n","a47c36cd99d551ad81255349711f3797":"\n# ä»€ä¹ˆæ˜¯ä¸‡ç»´ç½‘ï¼ˆWorld Wide Webï¼‰ï¼Ÿ\n\n\n`#å‰ç«¯` `#äº’è”ç½‘` \n\n- ä¸€èˆ¬ç§°å…¶ä¸º `WWW`ã€`W3` æˆ– `the Web` æˆ– `Web` \n- æ˜¯ä¸€ä¸ªåŸºäº`è¶…æ–‡æœ¬å’Œå¤šåª’ä½“æŠ€æœ¯`çš„å…¨çƒä¿¡æ¯ç©ºé—´ã€‚å®ƒå…è®¸ç”¨æˆ·é€šè¿‡äº’è”ç½‘è®¿é—®å’Œå…±äº«æ–‡æœ¬ã€å›¾åƒã€è§†é¢‘å’Œå…¶ä»–å½¢å¼çš„ä¿¡æ¯\n- å®ƒç»å†ä»¥ä¸‹ä¸‰ä¸ªé˜¶æ®µ\n   - Web 1.0ï¼šæ—©æœŸçš„é™æ€ç½‘é¡µï¼Œä¸»è¦ç”¨äºä¿¡æ¯å±•ç¤ºã€‚\n   - Web 2.0ï¼šå¼•å…¥ç”¨æˆ·ç”Ÿæˆå†…å®¹å’Œäº¤äº’åŠŸèƒ½ï¼Œå¦‚åšå®¢ã€ç¤¾äº¤åª’ä½“ã€ç»´åŸºç­‰ã€‚\n   - Web 3.0ï¼šä¹Ÿç§°ä¸ºè¯­ä¹‰ç½‘ï¼Œæ—¨åœ¨é€šè¿‡æœºå™¨å­¦ä¹ å’Œäººå·¥æ™ºèƒ½æé«˜ä¿¡æ¯çš„å…³è”æ€§å’Œå¯ç”¨æ€§\n\n> Web ä¸äº’è”ç½‘ä¸ä¸€æ ·ï¼šWeb æ˜¯å»ºç«‹åœ¨äº’è”ç½‘ä¹‹ä¸Šçš„è®¸å¤šåº”ç”¨ç¨‹åºä¹‹ä¸€\n\n","3a6285ef26a75a19a08341d179f73e2a":"\n# ä»€ä¹ˆæ˜¯ Web åº”ç”¨ï¼ˆWeb Applicationï¼‰ï¼Ÿ\n\n\n`#å‰ç«¯` \n\næ˜¯ä¸€ç§é€šè¿‡ `web æµè§ˆå™¨`è®¿é—®çš„åº”ç”¨ç¨‹åºã€‚å®ƒåˆ©ç”¨ `Web æŠ€æœ¯`å’Œæ ‡å‡†æ¥æ‰§è¡Œä»»åŠ¡ï¼Œé€šå¸¸åŒ…æ‹¬ä¸ç”¨æˆ·äº¤äº’ã€æ•°æ®å¤„ç†å’Œå­˜å‚¨ç­‰åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œæ— éœ€ä¸‹è½½æˆ–å®‰è£…ã€‚å®ƒé€šå¸¸é‡‡ç”¨`å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰-æœåŠ¡å™¨æ¶æ„ï¼ˆå³B/Sæ¶æ„ï¼‰`ï¼Œå®¢æˆ·ç«¯æ˜¯ç”¨æˆ·çš„æµè§ˆå™¨ï¼ŒæœåŠ¡å™¨æ˜¯æä¾›åº”ç”¨é€»è¾‘å’Œæ•°æ®å­˜å‚¨çš„è¿œç¨‹è®¡ç®—æœºã€‚\n\n**ç‰¹ç‚¹ï¼š**\n\n- æµè§ˆå™¨è®¿é—®ï¼Œæ— éœ€é¢å¤–ä¸‹è½½æˆ–å®‰è£…è½¯ä»¶\n- åŠ¨æ€å†…å®¹ï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥å¯æ˜¾ç¤ºä¸åŒå†…å®¹\n- äº¤äº’æ€§ï¼šjavascript æ¥æ”¯æŒ\n- è·¨å¹³å°ï¼šå› ä¸ºæµè§ˆå™¨è€Œè·¨å¹³å°ï¼Œæ”¯æŒä¸åŒæ“ä½œç³»ç»Ÿå’Œè®¾å¤‡ï¼ˆå¦‚ PCã€æ‰‹æœºã€å¹³æ¿ï¼‰\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/34cffa574854ba3eac6cd1e59a715885.png)\n","a0c8cd6ad9f554dda90f6e33108a0215":"\n# å‰ç«¯æŠ€æœ¯å…³é”®è¯è§£é‡Š\n\n\n`#å‰ç«¯` \n\n> ä»¥ä¸‹æ˜¯ä¸€äº›`ç›¸å¯¹ä¸è¿‡æ—¶çš„å‰ç«¯æŠ€æœ¯å…³é”®è¯`åŠå…¶ç®€è¦ä»‹ç»\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. React å’Œ React Hooks \n\n- **React**ï¼šä¸€ä¸ªç”± Facebook å¼€å‘çš„ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚å®ƒçš„è™šæ‹Ÿ DOM å’Œç»„ä»¶åŒ–è®¾è®¡ä½¿å…¶éå¸¸å—æ¬¢è¿ã€‚\n- **React Hooks**ï¼šReact 16.8 å¼•å…¥çš„ä¸€ç»„æ–°ç‰¹æ€§ï¼Œå…è®¸åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨çŠ¶æ€å’Œå…¶ä»– React ç‰¹æ€§ï¼Œå¦‚ `useState`ã€`useEffect` ç­‰ã€‚\n\n## 2. Vue 3\n\n- **Vue.js**ï¼šä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼ JavaScript æ¡†æ¶ã€‚Vue 3 å¼•å…¥äº† Composition APIã€æ€§èƒ½æ”¹è¿›å’Œæ›´å¥½çš„ TypeScript æ”¯æŒã€‚\n\n## 3. Svelte å’Œ SvelteKit\n\n- `**Svelte**`ï¼šä¸€ä¸ªæ–°çš„å‰ç«¯æ¡†æ¶ï¼Œä¸ä¼ ç»Ÿæ¡†æ¶ä¸åŒï¼Œ**Svelte åœ¨ç¼–è¯‘æ—¶å°†ç»„ä»¶è½¬æ¢ä¸ºé«˜æ•ˆçš„å‘½ä»¤å¼ä»£ç ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶è§£é‡Šä»£ç **ã€‚\n   - Svelte æ˜¯ä¸€ç§å…¨æ–°çš„æ„å»ºç”¨æˆ·ç•Œé¢çš„æ–¹æ³•ã€‚ä¼ ç»Ÿæ¡†æ¶å¦‚ React å’Œ Vue åœ¨æµè§ˆå™¨ä¸­éœ€è¦åšå¤§é‡çš„å·¥ä½œï¼Œè€Œ Svelte å°†è¿™äº›å·¥ä½œæ”¾åˆ°æ„å»ºåº”ç”¨ç¨‹åºçš„ç¼–è¯‘é˜¶æ®µæ¥å¤„ç†ã€‚\n   - Svelte åœ¨ `æ„å»º/ç¼–è¯‘é˜¶æ®µ` å°†ä½ çš„åº”ç”¨ç¨‹åºè½¬æ¢ä¸ºç†æƒ³çš„ JavaScript åº”ç”¨ï¼Œè€Œä¸æ˜¯åœ¨`è¿è¡Œé˜¶æ®µ` è§£é‡Šåº”ç”¨ç¨‹åºçš„ä»£ç ã€‚è¿™æ„å‘³ç€ä½ ä¸éœ€è¦ä¸ºæ¡†æ¶æ‰€æ¶ˆè€—çš„æ€§èƒ½ä»˜å‡ºæˆæœ¬ï¼Œå¹¶ä¸”åœ¨åº”ç”¨ç¨‹åºé¦–æ¬¡åŠ è½½æ—¶æ²¡æœ‰é¢å¤–æŸå¤±ã€‚\n- `**SvelteKit**`ï¼šä¸€ä¸ªç”¨äºæ„å»º Svelte åº”ç”¨çš„å…¨æ ˆæ¡†æ¶ï¼Œæ”¯æŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ã€é™æ€ç«™ç‚¹ç”Ÿæˆç­‰åŠŸèƒ½ã€‚\n\n## 4. Next.js å’Œ Nuxt.js\n\n- **Next.js**ï¼šä¸€ä¸ªåŸºäº `React` çš„æ¡†æ¶ï¼Œæ”¯æŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ã€é™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆSSGï¼‰å’Œå¢é‡é™æ€å†ç”Ÿï¼ˆISRï¼‰ã€‚\n- **Nuxt.js**ï¼šä¸€ä¸ªåŸºäº `Vue.js` çš„æ¡†æ¶ï¼Œæä¾›ç±»ä¼¼çš„åŠŸèƒ½ï¼Œå¦‚ SSR å’Œ SSGã€‚\n\n## 5. JAMstack\n\n- **JAMstack**ï¼šä¸€ç§ç°ä»£ Web å¼€å‘æ¶æ„ï¼Œå¼ºè°ƒä½¿ç”¨ JavaScriptã€API å’Œ Markupã€‚å¸¸ç”¨å·¥å…·åŒ…æ‹¬é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼ˆå¦‚ Gatsbyã€Next.jsï¼‰å’Œæ— æœåŠ¡å™¨å‡½æ•°ï¼ˆå¦‚ Netlify Functionsï¼‰ã€‚\n\n> åæ–‡ä¼šè¯¦ç»†è¯´æ˜\n\n## 6. WebAssembly (Wasm)\n\n- **WebAssembly**ï¼šä¸€ç§æ–°çš„äºŒè¿›åˆ¶æŒ‡ä»¤æ ¼å¼ï¼Œè®¾è®¡ç”¨äºåœ¨æµè§ˆå™¨ä¸­å®ç°é«˜æ€§èƒ½åº”ç”¨ã€‚å®ƒå…è®¸å¼€å‘è€…ä½¿ç”¨å¤šç§ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚ Cã€C++ã€Rustï¼‰ç¼–å†™ä»£ç ï¼Œå¹¶åœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚\n\n## 7. TypeScript\n\n- **TypeScript**ï¼šå¾®è½¯å¼€å‘çš„ä¸€ç§ JavaScript çš„è¶…é›†ï¼Œå¢åŠ äº†ç±»å‹æ£€æŸ¥å’Œå…¶ä»–ç‰¹æ€§\n\t- TypeScript è¿‘å¹´æ¥åœ¨å‰ç«¯å¼€å‘ä¸­å˜å¾—éå¸¸æµè¡Œï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹é¡¹ç›®ä¸­ã€‚\n\n## 8. GraphQL\n\n- **GraphQL**ï¼šç”± Facebook å¼€å‘çš„ä¸€ç§ç”¨äº API çš„æŸ¥è¯¢è¯­è¨€ï¼Œå…è®¸å®¢æˆ·ç«¯æŒ‡å®šæ‰€éœ€çš„æ•°æ®ç»“æ„ã€‚ä¸ä¼ ç»Ÿçš„ REST API ç›¸æ¯”ï¼ŒGraphQL æä¾›äº†æ›´é«˜æ•ˆçš„æ•°æ®è·å–æ–¹å¼ã€‚\n\n## 9. Tailwind CSS\n\n- **Tailwind CSS**ï¼šä¸€ä¸ªå®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶ï¼Œå…è®¸å¼€å‘è€…ç›´æ¥åœ¨ HTML ä¸­ä½¿ç”¨ç±»åæ¥åº”ç”¨æ ·å¼ã€‚å®ƒçš„çµæ´»æ€§å’Œå¯å®šåˆ¶æ€§ä½¿å…¶åœ¨å‰ç«¯å¼€å‘ä¸­è¶Šæ¥è¶Šå—æ¬¢è¿ã€‚\n\n> æœ‰ç‚¹ç±»ä¼¼äºä¹‹å‰çš„ `bootstrap`\n\n## 10. Headless CMS\n\n- **Headless CMS**ï¼šä¸€ç§å†…å®¹ç®¡ç†ç³»ç»Ÿï¼Œåªæä¾›å†…å®¹ç®¡ç†çš„åå°ï¼Œé€šè¿‡ API æä¾›å†…å®¹ï¼Œè€Œä¸è´Ÿè´£å‰ç«¯å±•ç¤ºã€‚å¸¸è§çš„ Headless CMS æœ‰ Contentfulã€Strapi å’Œ Sanityã€‚\n\n## 11. Progressive Web Apps (PWA)\n\n- **PWA**ï¼šæ¸è¿›å¼ Web åº”ç”¨ï¼Œé€šè¿‡ä½¿ç”¨ç°ä»£ Web æŠ€æœ¯ï¼ˆå¦‚ `Service Worker` å’Œ `Web App Manifest`ï¼‰æä¾›ç±»ä¼¼æœ¬åœ°åº”ç”¨çš„ä½“éªŒï¼ŒåŒ…æ‹¬`ç¦»çº¿è®¿é—®`å’Œ`æ¨é€é€šçŸ¥`\n\n## 12. å¾®å‰ç«¯ï¼šMicro Frontends \n\n- **Micro Frontends**ï¼šä¸€ç§å°†å‰ç«¯åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªå°å‹ã€ç‹¬ç«‹çš„æ¨¡å—çš„æ¶æ„ï¼Œæ¯ä¸ªæ¨¡å—å¯ä»¥ç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²å’Œè¿è¡Œã€‚\n\n## 13. Web Components\n\n- **Web Components**ï¼šä¸€ç»„æ ‡å‡†æŠ€æœ¯ï¼Œå…è®¸å¼€å‘è€…åˆ›å»ºå¯é‡ç”¨çš„è‡ªå®šä¹‰ HTML å…ƒç´ ã€‚åŒ…æ‹¬ Custom Elementsã€Shadow DOM å’Œ HTML Templatesã€‚\n\n## 14. Server-side Rendering (SSR) å’Œ Static Site Generation (SSG)\n\n- **SSR** å’Œ **SSG**ï¼šé€šè¿‡åœ¨æœåŠ¡å™¨ç«¯ç”Ÿæˆ HTMLï¼Œæé«˜äº†é¡µé¢åŠ è½½é€Ÿåº¦å’Œ SEO æ€§èƒ½ã€‚Next.js å’Œ Nuxt.js éƒ½æ”¯æŒè¿™äº›åŠŸèƒ½ã€‚\n\n## 15. Modern Build Tools\n\n- **Webpack**ã€**Rollup**ã€**Parcel** å’Œ **Vite**ï¼šç°ä»£ JavaScript æ„å»ºå·¥å…·ï¼Œæä¾›ä»£ç æ‰“åŒ…ã€æ¨¡å—åŒ–å’Œæ€§èƒ½ä¼˜åŒ–ç­‰åŠŸèƒ½ã€‚\n\n## 16. WebRTC\n\n- **WebRTC**ï¼šä¸€ç§æ”¯æŒæµè§ˆå™¨å’Œç§»åŠ¨åº”ç”¨è¿›è¡Œå®æ—¶é€šä¿¡ï¼ˆå¦‚è§†é¢‘ã€éŸ³é¢‘ã€æ•°æ®ä¼ è¾“ï¼‰çš„æŠ€æœ¯ã€‚å®ƒä½¿å¾—å¼€å‘è€…å¯ä»¥æ„å»ºè§†é¢‘ä¼šè®®ã€å®æ—¶èŠå¤©å’Œ P2P æ–‡ä»¶å…±äº«ç­‰åº”ç”¨ã€‚\n\n## 17. WebSockets\n\n- **WebSockets**ï¼šä¸€ç§åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹æŒä¹…è¿æ¥çš„åè®®ï¼Œå…è®¸åŒå‘é€šä¿¡ã€‚é€‚ç”¨äºå®æ—¶åº”ç”¨ï¼Œå¦‚åœ¨çº¿æ¸¸æˆã€å®æ—¶èŠå¤©å’Œå®æ—¶æ›´æ–°çš„ä»ªè¡¨ç›˜ã€‚\n\n## 18. Service Workers\n\n- **Service Workers**ï¼šä¸€ç§åœ¨åå°è¿è¡Œçš„è„šæœ¬ï¼Œèƒ½å¤Ÿæ‹¦æˆªå’Œå¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œæä¾›ç¦»çº¿æ”¯æŒã€ç¼“å­˜ç®¡ç†å’Œæ¨é€é€šçŸ¥ç­‰åŠŸèƒ½ï¼Œæ˜¯ PWA çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ã€‚\n\n## 19. Single Page Applications (SPA)\n\n- **SPA**ï¼šå•é¡µåº”ç”¨ï¼Œé€šè¿‡åŠ¨æ€åŠ è½½å†…å®¹å’Œæ›´æ–° URL å®ç°ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„ç”¨æˆ·ä½“éªŒã€‚å¸¸ç”¨æ¡†æ¶åŒ…æ‹¬ Reactã€Vue.js å’Œ Angularã€‚\n\n## 20. Microservices Architectureï¼šå¾®æœåŠ¡æ¶æ„\n\n- **Microservices**ï¼šå°†åº”ç”¨æ‹†åˆ†ä¸ºä¸€ç»„å°çš„ã€ç‹¬ç«‹éƒ¨ç½²çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡è´Ÿè´£ç‰¹å®šçš„ä¸šåŠ¡åŠŸèƒ½ã€‚å‰ç«¯å¯ä»¥é€šè¿‡ API ç½‘å…³æˆ–æœåŠ¡ç¼–æ’ä¸è¿™äº›å¾®æœåŠ¡è¿›è¡Œäº¤äº’ã€‚\n\n## 21. APIs and Backend for Frontend (BFF)\n\n- **BFF**ï¼šä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œä¸ºæ¯ä¸ªå‰ç«¯åº”ç”¨ï¼ˆå¦‚ Webã€ç§»åŠ¨ï¼‰åˆ›å»ºä¸“é—¨çš„åç«¯æœåŠ¡ï¼Œä¼˜åŒ– API è°ƒç”¨å’Œæ•°æ®å¤„ç†ã€‚\n\n## 22. çŠ¶æ€ç®¡ç†åº“ï¼šState Management Libraries\nç”¨äºæ•°æ®æµç®¡ç†çš„ï¼\n\n- **Redux**ï¼šä¸€ä¸ªæµè¡Œçš„ JavaScript çŠ¶æ€ç®¡ç†åº“ï¼Œå¸¸ä¸ React ä¸€èµ·ä½¿ç”¨ã€‚\n- **MobX**ï¼šå¦ä¸€ç§çŠ¶æ€ç®¡ç†åº“ï¼ŒåŸºäºå“åº”å¼ç¼–ç¨‹ï¼Œé€‚ç”¨äºéœ€è¦æ›´çµæ´»çŠ¶æ€ç®¡ç†çš„åº”ç”¨ã€‚\n- **Recoil**ï¼šFacebook å¼€å‘çš„çŠ¶æ€ç®¡ç†åº“ï¼Œä¸“ä¸º React è®¾è®¡ï¼Œæä¾›æ›´å¥½çš„æ€§èƒ½å’Œå¼€å‘ä½“éªŒã€‚\n- vuex\n- pinia\n- umi/dva\n\n## 23. Component Libraries and Design Systemsï¼šç»„ä»¶åº“&è®¾è®¡ç³»ç»Ÿ\n\n- **Material-UI**ï¼šåŸºäº Google çš„ Material Design è§„èŒƒçš„ React ç»„ä»¶åº“ã€‚\n- **Ant Design**ï¼šä¸€ä¸ªä¼ä¸šçº§çš„ UI è®¾è®¡è¯­è¨€å’Œ React ç»„ä»¶åº“ã€‚\n- **Chakra UI**ï¼šä¸€ä¸ªç®€å•ã€æ¨¡å—åŒ–ä¸”å¯è®¿é—®çš„ React ç»„ä»¶åº“ã€‚\n\n## 24. Serverless Architecture\n\n- **Serverless**ï¼šä¸€ç§äº‘è®¡ç®—æ¨¡å‹ï¼Œå¼€å‘è€…åªéœ€ç¼–å†™ä»£ç è€Œæ— éœ€ç®¡ç†æœåŠ¡å™¨ã€‚å¸¸ç”¨çš„æœåŠ¡åŒ…æ‹¬ AWS Lambdaã€Azure Functions å’Œ Google Cloud Functionsã€‚\n- å›½å†…å„ä¸ªäº‘å•†ä¹Ÿéƒ½æœ‰æä¾›\n\n## 25. Static Site Generators (SSG)\n\n- **Gatsby**ï¼šåŸºäº React çš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œæ”¯æŒ GraphQL æ•°æ®å±‚ã€‚\n- **Hugo**ï¼šä¸€ä¸ªç”¨ Go è¯­è¨€ç¼–å†™çš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œæ„å»ºé€Ÿåº¦éå¸¸å¿«ã€‚\n- **Eleventy**ï¼šä¸€ä¸ªç®€å•çµæ´»çš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œæ”¯æŒå¤šç§æ¨¡æ¿è¯­è¨€ã€‚\n\n## 26. CSS-in-JS\n\n- **Styled Components**ï¼šä¸€ç§å°† CSS ç›´æ¥å†™åœ¨ JavaScript ä¸­çš„æŠ€æœ¯ï¼Œæä¾›ç»„ä»¶çº§çš„æ ·å¼éš”ç¦»ã€‚\n- **Emotion**ï¼šä¸€ä¸ªé«˜æ€§èƒ½çš„ CSS-in-JS åº“ï¼Œæ”¯æŒæ ‡ç­¾æ¨¡æ¿å’Œå¯¹è±¡æ ·å¼ã€‚\n\n## 27. Modern CSS Features\n\n- **CSS Grid**ï¼šä¸€ç§ç”¨äºåˆ›å»ºäºŒç»´å¸ƒå±€çš„ CSS å¸ƒå±€ç³»ç»Ÿã€‚\n- **CSS Variables**ï¼šä¹Ÿç§°ä¸ºè‡ªå®šä¹‰å±æ€§ï¼Œå…è®¸å®šä¹‰å¯é‡ç”¨çš„å€¼ã€‚\n- **Flexbox**ï¼šä¸€ç§ç”¨äºåˆ›å»ºä¸€ç»´å¸ƒå±€çš„ CSS å¸ƒå±€ç³»ç»Ÿã€‚\n\n## 28. Web Animations API\n\n- **Web Animations API**ï¼šä¸€ç§ç”¨äºåœ¨ Web ä¸Šåˆ›å»ºé«˜æ€§èƒ½åŠ¨ç”»çš„ APIï¼Œæä¾›äº†å¯¹åŠ¨ç”»çš„ç²¾ç»†æ§åˆ¶ã€‚\n\n## 29. Web Components \n\n- **LitElement**ï¼šä¸€ä¸ªç”¨äºæ„å»º Web Components çš„è½»é‡çº§åº“ï¼Œç®€åŒ–äº†è‡ªå®šä¹‰å…ƒç´ çš„åˆ›å»ºã€‚\n- **Stencil**ï¼šä¸€ä¸ªç”¨äºæ„å»ºé«˜æ€§èƒ½ Web Components çš„ç¼–è¯‘å™¨ï¼Œæ”¯æŒ TypeScript å’Œ JSXã€‚\n\n## 30. Testing Frameworks and Tools\n\n- **Jest**ï¼šä¸€ä¸ªç”± Facebook å¼€å‘çš„ JavaScript æµ‹è¯•æ¡†æ¶ï¼Œæ”¯æŒå¿«ç…§æµ‹è¯•å’Œå¹¶è¡Œæµ‹è¯•ã€‚\n- **Cypress**ï¼šä¸€ä¸ªç”¨äºç«¯åˆ°ç«¯æµ‹è¯•çš„ç°ä»£ JavaScript æµ‹è¯•æ¡†æ¶ï¼Œæä¾›äº†ç›´è§‚çš„ API å’Œå¼ºå¤§çš„è°ƒè¯•åŠŸèƒ½ã€‚\n- **Playwright**ï¼šä¸€ä¸ªç”¨äºç«¯åˆ°ç«¯æµ‹è¯•çš„å·¥å…·ï¼Œç”± Microsoft å¼€å‘ï¼Œæ”¯æŒå¤šç§æµè§ˆå™¨ã€‚\n\n## 31. Web Vitals\n\n- **Web Vitals**ï¼šä¸€ç»„ç”± Google å®šä¹‰çš„æŒ‡æ ‡ï¼Œç”¨äºè¡¡é‡å’Œä¼˜åŒ– Web æ€§èƒ½ï¼ŒåŒ…æ‹¬ Largest Contentful Paint (LCP)ã€First Input Delay (FID) å’Œ Cumulative Layout Shift (CLS)ã€‚\n\n## 32. è¾¹ç¼˜è®¡ç®—ï¼šEdge Computing\n\n- **Edge Computing**ï¼šä¸€ç§åœ¨`é è¿‘æ•°æ®æºçš„åœ°æ–¹`è¿›è¡Œè®¡ç®—å’Œæ•°æ®å¤„ç†çš„æŠ€æœ¯ï¼Œå‡å°‘äº†å»¶è¿Ÿï¼Œæé«˜äº†æ€§èƒ½ã€‚å¸¸è§çš„æœåŠ¡åŒ…æ‹¬ Cloudflare Workers å’Œ AWS Lambda@Edgeã€‚\n\n## 33. Low-Code/No-Code Platforms\n\n- **Low-Code/No-Code**ï¼šä¸€ç§é€šè¿‡å›¾å½¢åŒ–ç•Œé¢å’Œæ‹–æ”¾ç»„ä»¶æ¥æ„å»ºåº”ç”¨çš„å¼€å‘æ–¹å¼ï¼Œé™ä½äº†å¼€å‘é—¨æ§›ã€‚å¸¸è§å¹³å°åŒ…æ‹¬ OutSystemsã€Mendix å’Œ Webflowã€‚\n\n## 34. Remote Procedure Calls (RPC)\n\n- RPCï¼šé€šè¿‡ç½‘ç»œè°ƒç”¨è¿œç¨‹æœåŠ¡çš„æ–¹æ³•ï¼Œå¸¸è§å®ç°æœ‰ `gRPC`ï¼Œé€‚ç”¨äºé«˜æ€§èƒ½çš„å‰åç«¯é€šä¿¡ã€‚\n\n## 35. Module Federationï¼šæ¨¡å—è”é‚¦\nModule Federationï¼šWebpack 5 çš„æ–°ç‰¹æ€§ï¼Œæ”¯æŒåœ¨ä¸åŒåº”ç”¨ä¹‹é—´åŠ¨æ€åŠ è½½æ¨¡å—ï¼Œé€‚ç”¨äºå¾®å‰ç«¯æ¶æ„ã€‚\n\n## 36. å¢é‡é™æ€å†ç”Ÿï¼ˆIncremental Static Regeneration, ISRï¼‰\n\nå¢é‡é™æ€å†ç”Ÿï¼ˆIncremental Static Regeneration, ISRï¼‰æ˜¯ Next.js æä¾›çš„ä¸€ç§åŠŸèƒ½ï¼Œç»“åˆäº†é™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆStatic Site Generation, SSGï¼‰å’ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆServer-Side Rendering, SSRï¼‰çš„ä¼˜ç‚¹ã€‚å®ƒå…è®¸å¼€å‘è€…åœ¨æ„å»ºæ—¶ç”Ÿæˆé™æ€é¡µé¢ï¼Œå¹¶åœ¨è¿è¡Œæ—¶æŒ‰éœ€æ›´æ–°è¿™äº›é¡µé¢ï¼Œä»è€Œå®ç°é«˜æ€§èƒ½å’Œæœ€æ–°æ•°æ®çš„å¹³è¡¡ã€‚\n\n> éšç€æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼Œå‰ç«¯å¼€å‘é¢†åŸŸå°†ç»§ç»­æ¶Œç°å‡ºæ›´å¤šçš„ä¸œè¥¿\n\n## 37. Storybook\n\n- ä»‹ç»ï¼šç”¨äºå¼€å‘å’Œæµ‹è¯•UIç»„ä»¶çš„å·¥å…·ã€‚\n- ç‰¹ç‚¹ï¼šç‹¬ç«‹ç¯å¢ƒã€ç»„ä»¶æ–‡æ¡£ã€äº¤äº’æµ‹è¯•ã€‚\n\n## 38. å‚è€ƒ\n\n- [GPT-4o](https://chatgpt.com/)\n- [Claude 3.5 Sonnet](https://www.anthropic.com/news/claude-3-5-sonnet?locale=zh_CN)\n- [web å…¥é—¨ - å­¦ä¹  Web å¼€å‘ | MDN](https://developer.mozilla.org/zh-CN/docs/Learn/Getting_started_with_the_web)\n- [Web å’Œ Web æ ‡å‡† - å­¦ä¹  Web å¼€å‘ | MDN](https://developer.mozilla.org/zh-CN/docs/Learn/Getting_started_with_the_web/The_web_and_web_standards)\n- [ä¸‡ç»´ç½‘ - MDN Web æ–‡æ¡£æœ¯è¯­è¡¨ï¼šWeb ç›¸å…³æœ¯è¯­çš„å®šä¹‰ | MDN](https://developer.mozilla.org/zh-CN/docs/Glossary/World_Wide_Web)\n- [ä¸‡ç»´ç½‘æ˜¯å¦‚ä½•å·¥ä½œçš„ - å­¦ä¹  Web å¼€å‘ | MDN](https://developer.mozilla.org/zh-CN/docs/Learn/Getting_started_with_the_web/How_the_Web_works)\n- [ä»€ä¹ˆæ˜¯ JAMstackï¼Ÿ](https://www.cloudflare.com/zh-cn/learning/performance/what-is-jamstack/)\n- [ä»€ä¹ˆæ˜¯JAMStackå‰ç«¯æ¶æ„](https://juejin.cn/post/6999897855695683614)\n- [å‰ç«¯çŸ¥è¯†å›¾è°±](https://f2e.tech/mindmap?)\n\n","b7ce1bdac61f562399254d97bc49005d":"\n# ç°ä»£ Web æŠ€æœ¯æœ‰å“ªäº›å˜åŒ–å’Œè¶‹åŠ¿ï¼Ÿ\n\n\n`#å‰ç«¯` \n\nç°ä»£ Web æŠ€æœ¯æ­£åœ¨ä¸æ–­å‘å±•ï¼Œä»¥é€‚åº”ç”¨æˆ·éœ€æ±‚å’ŒæŠ€æœ¯è¿›æ­¥ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸»è¦çš„å˜åŒ–å’Œè¶‹åŠ¿ï¼š\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‰ç«¯æŠ€æœ¯çš„æ¼”å˜ \n\n1. **å•é¡µåº”ç”¨ï¼ˆSPAï¼‰**ï¼š\n   - å•é¡µåº”ç”¨é€šè¿‡åŠ¨æ€åŠ è½½å†…å®¹ï¼Œä½¿ç”¨æˆ·ä½“éªŒæ›´åŠ æµç•…ã€‚å¸¸ç”¨æ¡†æ¶æœ‰ Reactã€Angular å’Œ Vue.jsã€‚\n   - ä½¿ç”¨`**è™šæ‹Ÿ DOM æŠ€æœ¯**`ï¼Œæé«˜äº†æ€§èƒ½å’Œå“åº”é€Ÿåº¦ã€‚\n2. **æ¸è¿›å¼ Web åº”ç”¨ï¼ˆPWAï¼‰**ï¼š\n   - **PWA** ç»“åˆäº† Web åº”ç”¨å’Œæœ¬åœ°åº”ç”¨çš„ä¼˜ç‚¹ï¼Œæä¾›ç¦»çº¿è®¿é—®ã€æ¨é€é€šçŸ¥å’Œå®‰è£…åˆ°ä¸»å±å¹•ç­‰åŠŸèƒ½ï¼Œä½¿ Web åº”ç”¨å…·æœ‰æ›´å¥½çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚\n   - é€šè¿‡` Service Worker` å®ç°ç¦»çº¿ç¼“å­˜å’Œåå°åŒæ­¥ã€‚\n3. **Web ç»„ä»¶**ï¼š\n   - Web ç»„ä»¶æ˜¯ä¸€ç§å°è£… HTMLã€CSS å’Œ JavaScript çš„æŠ€æœ¯ï¼Œå…è®¸å¼€å‘è€…åˆ›å»º`**å¯é‡ç”¨çš„è‡ªå®šä¹‰å…ƒç´ **`ã€‚\n   - æ ‡å‡†æŠ€æœ¯åŒ…æ‹¬ `Custom Elements`ã€`Shadow DOM` å’Œ `HTML Templates`ã€‚\n4. **CSS-in-JS**ï¼š\n   - å°† CSS æ ·å¼ç›´æ¥å†™åœ¨ JavaScript ä¸­ï¼Œæ–¹ä¾¿æ ·å¼çš„åŠ¨æ€ç”Ÿæˆå’Œç®¡ç†ã€‚\n   - å¸¸ç”¨åº“æœ‰ `styled-components` å’Œ `Emotion`ã€‚\n\n## 2. åç«¯æŠ€æœ¯çš„æ¼”å˜\n\n1. **æ— æœåŠ¡å™¨æ¶æ„ï¼ˆServerless Architectureï¼‰**ï¼š\n   - å¼€å‘è€…å¯ä»¥å°†ä»£ç éƒ¨ç½²åˆ°äº‘æœåŠ¡æä¾›å•†ï¼ˆå¦‚ AWS Lambdaã€Azure Functionsï¼‰ï¼Œæ— éœ€ç®¡ç†æœåŠ¡å™¨ã€‚\n   - æŒ‰éœ€æ”¶è´¹ï¼Œè‡ªåŠ¨æ‰©å±•ï¼Œé€‚åˆäº‹ä»¶é©±åŠ¨çš„åº”ç”¨ç¨‹åºã€‚\n2. **å¾®æœåŠ¡æ¶æ„**ï¼š\n   - å°†å¤§å‹åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªå°å‹ã€ç‹¬ç«‹çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡è´Ÿè´£å•ä¸€åŠŸèƒ½ã€‚\n   - æé«˜äº†åº”ç”¨çš„å¯æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ï¼Œå¸¸ç”¨æŠ€æœ¯åŒ…æ‹¬ Docker å’Œ Kubernetesã€‚\n3. **GraphQL**ï¼š\n   - ç”± Facebook å¼€å‘çš„ä¸€ç§æŸ¥è¯¢è¯­è¨€ï¼Œå…è®¸å®¢æˆ·ç«¯æŒ‡å®šæ‰€éœ€çš„æ•°æ®ç»“æ„ã€‚\n   - å‡å°‘äº†å†—ä½™æ•°æ®ä¼ è¾“ï¼Œæé«˜äº†æ•°æ®è·å–çš„çµæ´»æ€§å’Œæ•ˆç‡ã€‚\n\n## 3. DevOps å’Œ CI/CD\n\n1. **æŒç»­é›†æˆå’ŒæŒç»­éƒ¨ç½²ï¼ˆCI/CDï¼‰**ï¼š\n   - è‡ªåŠ¨åŒ–ä»£ç æµ‹è¯•ã€æ„å»ºå’Œéƒ¨ç½²æµç¨‹ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚\n   - å¸¸ç”¨å·¥å…·æœ‰` Jenkins`ã€`GitHub Actions`ã€`GitLab CI/CD`ã€‚\n2. **å®¹å™¨åŒ–å’Œç¼–æ’**ï¼š\n   - ä½¿ç”¨ Docker å°†åº”ç”¨æ‰“åŒ…æˆç‹¬ç«‹çš„å®¹å™¨ï¼Œç¡®ä¿åœ¨ä¸åŒç¯å¢ƒä¸­çš„ä¸€è‡´æ€§ã€‚\n   - ä½¿ç”¨ `Kubernetes` ç®¡ç†å’Œç¼–æ’å®¹å™¨ï¼Œæä¾›è‡ªåŠ¨æ‰©å±•ã€è´Ÿè½½å‡è¡¡å’Œæ•…éšœæ¢å¤ã€‚\n\n## 4. å®‰å…¨å’Œæ€§èƒ½ä¼˜åŒ–\n\n1. **å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰**ï¼š\n   - é€šè¿‡è®¾ç½® HTTP å¤´ï¼Œé˜²æ­¢è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰å’Œæ•°æ®æ³¨å…¥æ”»å‡»ã€‚\n   - é™åˆ¶èµ„æºåŠ è½½çš„æ¥æºï¼Œæé«˜åº”ç”¨çš„å®‰å…¨æ€§ã€‚\n2. **HTTP/2 å’Œ HTTP/3**ï¼š\n   - HTTP/2 æä¾›å¤šè·¯å¤ç”¨ã€å¤´éƒ¨å‹ç¼©å’ŒæœåŠ¡å™¨æ¨é€ï¼Œæ˜¾è‘—æé«˜äº† Web æ€§èƒ½ã€‚\n   - HTTP/3 åŸºäº `QUIC åè®®`ï¼Œè¿›ä¸€æ­¥å‡å°‘äº†å»¶è¿Ÿå’Œæé«˜äº†ä¼ è¾“æ•ˆç‡ã€‚\n3. **Web æ€§èƒ½ä¼˜åŒ–**ï¼š\n   - ä½¿ç”¨æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰å’Œä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰å‡å°‘åˆå§‹åŠ è½½æ—¶é—´ã€‚\n   - é€šè¿‡ä½¿ç”¨ CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰åŠ é€Ÿèµ„æºä¼ è¾“ã€‚\n\n## 5. æ–°å…´æŠ€æœ¯å’Œæ ‡å‡†\n\n1. **WebAssembly (Wasm)**ï¼š\n   - ä¸€ç§æ–°çš„äºŒè¿›åˆ¶æŒ‡ä»¤æ ¼å¼ï¼Œå…è®¸å¼€å‘è€…ç”¨ Cã€C++ã€Rust ç­‰è¯­è¨€ç¼–å†™é«˜æ€§èƒ½çš„ Web åº”ç”¨ã€‚\n   - æé«˜äº† Web åº”ç”¨çš„è®¡ç®—æ€§èƒ½ï¼Œé€‚ç”¨äºæ¸¸æˆã€å›¾åƒå¤„ç†ç­‰é«˜æ€§èƒ½éœ€æ±‚çš„åº”ç”¨ã€‚\n2. **WebXR**ï¼š\n   - ç”¨äºæ„å»ºè™šæ‹Ÿç°å®ï¼ˆVRï¼‰å’Œå¢å¼ºç°å®ï¼ˆARï¼‰åº”ç”¨çš„æ ‡å‡† APIã€‚\n   - æä¾›äº†åœ¨ Web æµè§ˆå™¨ä¸­ä½“éªŒæ²‰æµ¸å¼å†…å®¹çš„èƒ½åŠ›ã€‚\n3. **æœºå™¨å­¦ä¹ å’Œ AI**ï¼š\n   - `TensorFlow.js` å’Œ `ml5.js` ç­‰åº“ä½¿å¾—åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œæœºå™¨å­¦ä¹ å’Œäººå·¥æ™ºèƒ½åº”ç”¨æˆä¸ºå¯èƒ½ã€‚\n   - å®ç°å›¾åƒè¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰åŠŸèƒ½ï¼Œå¢å¼ºç”¨æˆ·ä½“éªŒã€‚\n\n> ä¸‹æ–‡è¿˜æœ‰è¯¦ç»†ä»‹ç»\n\n## 6. ç”¨æˆ·ä½“éªŒå’Œè®¾è®¡\n\n1. **å“åº”å¼è®¾è®¡**ï¼š\n   - ä½¿ç”¨åª’ä½“æŸ¥è¯¢å’Œå¼¹æ€§å¸ƒå±€ï¼Œä½¿ç½‘é¡µåœ¨ä¸åŒè®¾å¤‡ä¸Šéƒ½æœ‰è‰¯å¥½çš„æ˜¾ç¤ºæ•ˆæœã€‚\n   - æé«˜äº†ç§»åŠ¨è®¾å¤‡ç”¨æˆ·çš„ä½“éªŒã€‚\n2. **æ— éšœç¢è®¾è®¡**ï¼š\n   - ç¡®ä¿ Web åº”ç”¨å¯¹æ‰€æœ‰ç”¨æˆ·ï¼ŒåŒ…æ‹¬æ®‹éšœäººå£«ï¼Œéƒ½å…·æœ‰å¯è®¿é—®æ€§ã€‚\n   - éµå¾ª WAI-ARIA æ ‡å‡†ï¼Œæä¾›è¯­ä¹‰åŒ–çš„ HTML æ ‡ç­¾å’Œè¾…åŠ©åŠŸèƒ½ã€‚\n\nç»¼ä¸Šæ‰€è¿°ï¼Œç°ä»£ Web æŠ€æœ¯åœ¨å‰ç«¯ã€åç«¯ã€DevOpsã€å®‰å…¨ã€æ€§èƒ½ä¼˜åŒ–ã€æ–°å…´æŠ€æœ¯å’Œç”¨æˆ·ä½“éªŒç­‰æ–¹é¢éƒ½å‘ç”Ÿäº†æ˜¾è‘—å˜åŒ–ã€‚è¿™äº›æŠ€æœ¯çš„è¿›æ­¥ä¸ä»…æå‡äº† Web åº”ç”¨çš„åŠŸèƒ½å’Œæ€§èƒ½ï¼Œè¿˜å¤§å¤§æ”¹å–„äº†å¼€å‘è€…çš„å·¥ä½œæµç¨‹å’Œç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒã€‚\n","61205bc6a1f5520eb4353fddc171a7aa":"\n# Web æŠ€æœ¯éƒ½æœ‰å“ªäº›ï¼Ÿ\n\n\n`#å‰ç«¯` \n\n`Web æŠ€æœ¯`æ˜¯ç”¨äºåˆ›å»ºå’Œç»´æŠ¤ Web åº”ç”¨ã€ç½‘ç«™å’Œ Web æœåŠ¡çš„ä¸€ç»„æŠ€æœ¯å’Œæ ‡å‡†ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸»è¦çš„ Web æŠ€æœ¯åŠå…¶ç›¸å…³æ¦‚å¿µï¼š\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‰ç«¯æŠ€æœ¯ \n\nå‰ç«¯æŠ€æœ¯ä¸»è¦ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢å’Œç”¨æˆ·ä½“éªŒï¼Œæ¶‰åŠåˆ°ç½‘é¡µçš„ç»“æ„ã€æ ·å¼å’Œäº¤äº’åŠŸèƒ½ã€‚\n\n1. **HTML (HyperText Markup Language)**ï¼š\n   - ç”¨äºå®šä¹‰ç½‘é¡µçš„ç»“æ„å’Œå†…å®¹ã€‚\n   - HTML æ ‡ç­¾ç”¨äºæ ‡è®°æ–‡æœ¬ã€å›¾åƒã€é“¾æ¥ç­‰å…ƒç´ ã€‚\n2. **CSS (Cascading Style Sheets)**ï¼š\n   - ç”¨äºæ§åˆ¶ç½‘é¡µçš„å¤–è§‚å’Œå¸ƒå±€ã€‚\n   - é€šè¿‡æ ·å¼è§„åˆ™å®šä¹‰å…ƒç´ çš„é¢œè‰²ã€å­—ä½“ã€æ’ç‰ˆç­‰ã€‚\n3. **JavaScript**ï¼š\n   - ä¸€ç§è„šæœ¬è¯­è¨€ï¼Œç”¨äºå®ç°ç½‘é¡µçš„åŠ¨æ€åŠŸèƒ½å’Œäº¤äº’æ•ˆæœã€‚\n   - å¯ä»¥æ“ä½œ HTML å’Œ CSSï¼Œå®ç°åŠ¨ç”»ã€è¡¨å•éªŒè¯ã€åŠ¨æ€å†…å®¹åŠ è½½ç­‰åŠŸèƒ½ã€‚\n4. **å‰ç«¯æ¡†æ¶å’Œåº“**ï¼š\n   - **React**ï¼šç”± Facebook å¼€å‘çš„ JavaScript åº“ï¼Œç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢ã€‚\n   - **Angular**ï¼šç”± Google å¼€å‘çš„å‰ç«¯æ¡†æ¶ï¼Œç”¨äºæ„å»ºå¤æ‚çš„å•é¡µåº”ç”¨ã€‚\n   - **Vue.js**ï¼šä¸€ä¸ªæ¸è¿›å¼ JavaScript æ¡†æ¶ï¼Œæ˜“äºé›†æˆå’Œä½¿ç”¨ã€‚\n5. **AJAX (Asynchronous JavaScript and XML)**ï¼š\n   - ç”¨äºåœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ä¸æœåŠ¡å™¨è¿›è¡Œå¼‚æ­¥æ•°æ®äº¤æ¢ã€‚\n   - å¸¸ç”¨äºåŠ¨æ€å†…å®¹æ›´æ–°å’Œåå°æ•°æ®åŠ è½½ã€‚\n\n> åé¢ç« èŠ‚éƒ½ä¼šå±•å¼€\n\n## 2. åç«¯æŠ€æœ¯\n\nåç«¯æŠ€æœ¯ä¸»è¦ç”¨äºå¤„ç†ä¸šåŠ¡é€»è¾‘ã€æ•°æ®å­˜å‚¨å’ŒæœåŠ¡å™¨ç«¯çš„æ“ä½œã€‚\n\n1. **æœåŠ¡å™¨ç«¯ç¼–ç¨‹è¯­è¨€**ï¼š\n   - **Node.js**ï¼šåŸºäº JavaScript çš„æœåŠ¡å™¨ç«¯è¿è¡Œç¯å¢ƒï¼Œé€‚ç”¨äºæ„å»ºé«˜æ€§èƒ½ç½‘ç»œåº”ç”¨ã€‚\n   - **Python**ï¼šå¸¸ç”¨äº Web å¼€å‘çš„è¯­è¨€ï¼Œæ¡†æ¶å¦‚ Django å’Œ Flaskã€‚\n   - **Ruby**ï¼šç”¨äº Web å¼€å‘çš„è¯­è¨€ï¼Œæ¡†æ¶å¦‚ Ruby on Railsã€‚\n   - **PHP**ï¼šå¹¿æ³›åº”ç”¨äº Web å¼€å‘çš„è¯­è¨€ï¼Œç‰¹åˆ«æ˜¯å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆå¦‚ WordPressï¼‰ã€‚\n   - Java\n   - Golang \n   - ç­‰\n2. **æ•°æ®åº“**ï¼š\n   - **å…³ç³»å‹æ•°æ®åº“**ï¼šå¦‚ MySQLã€PostgreSQLï¼Œä½¿ç”¨ SQL è¿›è¡Œæ•°æ®æŸ¥è¯¢å’Œæ“ä½œã€‚\n   - **NoSQL æ•°æ®åº“**ï¼šå¦‚ MongoDBã€Cassandraï¼Œé€‚ç”¨äºå¤„ç†å¤§è§„æ¨¡å’Œéç»“æ„åŒ–æ•°æ®ã€‚\n3. **Web æ¡†æ¶**ï¼š\n   - æä¾›ç»“æ„åŒ–çš„å¼€å‘ç¯å¢ƒå’Œå·¥å…·ï¼Œç®€åŒ– Web åº”ç”¨çš„å¼€å‘è¿‡ç¨‹ã€‚\n   - å¸¸è§çš„æ¡†æ¶å¦‚ Express (Node.js)ã€Django (Python)ã€Rails (Ruby)ã€‚\n4. **API (Application Programming Interface)**ï¼š\n   - ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®äº¤æ¢ã€‚\n   - å¸¸è§çš„ API å½¢å¼æœ‰ RESTful API å’Œ GraphQLã€‚\n\n## 3. åè®®å’Œæ ‡å‡†\n\n1. **HTTP/HTTPS (HyperText Transfer Protocol / Secure)**ï¼š\n   - ç”¨äºåœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚\n   - HTTPS æ˜¯ HTTP çš„å®‰å…¨ç‰ˆæœ¬ï¼Œä½¿ç”¨ SSL/TLS åŠ å¯†æ•°æ®ä¼ è¾“ã€‚\n2. **WebSocket**ï¼š\n   - ä¸€ç§å…¨åŒå·¥é€šä¿¡åè®®ï¼Œå…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„å®æ—¶æ•°æ®äº¤æ¢ã€‚\n   - å¸¸ç”¨äºå®æ—¶èŠå¤©ã€åœ¨çº¿æ¸¸æˆç­‰åº”ç”¨ã€‚\n3. **REST (Representational State Transfer)**ï¼š\n   - ä¸€ç§æ¶æ„é£æ ¼ï¼Œç”¨äºè®¾è®¡ç½‘ç»œåº”ç”¨çš„ APIã€‚\n   - åŸºäº HTTP åè®®ï¼Œä½¿ç”¨æ ‡å‡†çš„ HTTP æ–¹æ³•ï¼ˆå¦‚ GETã€POSTã€PUTã€DELETEï¼‰ã€‚\n4. **GraphQL**ï¼š\n   - ç”± Facebook å¼€å‘çš„ä¸€ç§æŸ¥è¯¢è¯­è¨€ï¼Œç”¨äº API æ•°æ®æŸ¥è¯¢ã€‚\n   - å…è®¸å®¢æˆ·ç«¯æŒ‡å®šæ‰€éœ€çš„æ•°æ®ç»“æ„ï¼Œå‡å°‘å†—ä½™æ•°æ®ä¼ è¾“ã€‚\n\n## 4. å¼€å‘å·¥å…·å¥—ä»¶å’Œç¯å¢ƒ\n\n1. **ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ**ï¼š\n   - **Git**ï¼šç”¨äºè·Ÿè¸ªä»£ç å˜æ›´å’Œåä½œå¼€å‘çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚\n   - **GitHub/GitLab**ï¼šåŸºäº Git çš„ä»£ç æ‰˜ç®¡å¹³å°ï¼Œæä¾›åä½œå’Œé¡¹ç›®ç®¡ç†å·¥å…·ã€‚\n2. **é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰å’Œä»£ç ç¼–è¾‘å™¨**ï¼š\n   - **Visual Studio Code**ï¼šæµè¡Œçš„ä»£ç ç¼–è¾‘å™¨ï¼Œæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€å’Œæ‰©å±•ã€‚\n   - **WebStorm**ï¼šä¸“ä¸º Web å¼€å‘è®¾è®¡çš„ IDEï¼Œæä¾›å¼ºå¤§çš„ä»£ç ç¼–è¾‘å’Œè°ƒè¯•åŠŸèƒ½ã€‚\n3. **æ„å»ºå·¥å…·å’ŒåŒ…ç®¡ç†å™¨**ï¼š\n   - **Webpack**ï¼šç”¨äºæ‰“åŒ… JavaScript æ¨¡å—å’Œèµ„æºçš„æ„å»ºå·¥å…·ã€‚\n   - **npm/yarn**ï¼šJavaScript åŒ…ç®¡ç†å™¨ï¼Œç”¨äºç®¡ç†é¡¹ç›®ä¾èµ–ã€‚\n\nç»¼ä¸Šæ‰€è¿°ï¼ŒWeb æŠ€æœ¯æ¶µç›–äº†ä»å‰ç«¯åˆ°åç«¯ã€ä»åè®®åˆ°å·¥å…·çš„å¹¿æ³›é¢†åŸŸï¼Œæ”¯æŒæ„å»ºåŠŸèƒ½ä¸°å¯Œã€æ€§èƒ½ä¼˜å¼‚çš„ Web åº”ç”¨ã€‚\n","e7c9394560475f28b2ee24c14e753db1":"\n# Web æŠ€æœ¯æ–°å…´æŠ€æœ¯å’Œæ ‡å‡†\n\n\n`#å‰ç«¯` \n\nç°ä»£ Web æŠ€æœ¯ä¸­ï¼Œæ–°å…´æŠ€æœ¯å’Œæ ‡å‡†æ­£åœ¨æ¨åŠ¨ Web å¼€å‘é¢†åŸŸçš„åˆ›æ–°å’Œè¿›æ­¥ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸»è¦çš„æ–°å…´æŠ€æœ¯å’Œæ ‡å‡†çš„è¯¦ç»†ä»‹ç»ï¼š\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. WebAssembly (Wasm) \n\n### 1.1. å®šä¹‰\n\nWebAssembly æ˜¯ä¸€ç§æ–°çš„äºŒè¿›åˆ¶æŒ‡ä»¤æ ¼å¼ï¼Œè®¾è®¡ç”¨äºæµè§ˆå™¨ä¸­çš„é«˜æ€§èƒ½æ‰§è¡Œã€‚å®ƒæ˜¯ä¸€ç§ä½çº§ã€ç±»ä¼¼äºæ±‡ç¼–è¯­è¨€çš„æ ¼å¼ï¼Œå¯ä»¥ä¸ JavaScript ä¸€èµ·ä½¿ç”¨ã€‚\n\n### 1.2. ç‰¹ç‚¹\n\n- **é«˜æ€§èƒ½**ï¼šæ¥è¿‘åŸç”Ÿä»£ç çš„æ‰§è¡Œé€Ÿåº¦ï¼Œé€‚ç”¨äºéœ€è¦é«˜è®¡ç®—æ€§èƒ½çš„åº”ç”¨ã€‚\n- **è·¨å¹³å°**ï¼šåœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œè®¾å¤‡ä¸Šè¿è¡Œä¸€è‡´ã€‚\n- **è¯­è¨€æ— å…³**ï¼šæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚ Cã€C++ã€Rust ç­‰ã€‚\n\n### 1.3. åº”ç”¨åœºæ™¯\n\n- **æ¸¸æˆå¼€å‘**ï¼šé«˜æ€§èƒ½çš„å›¾å½¢æ¸²æŸ“å’Œè®¡ç®—ã€‚\n- **å›¾åƒå’Œè§†é¢‘å¤„ç†**ï¼šå®æ—¶çš„å›¾åƒç¼–è¾‘å’Œè§†é¢‘ç¼–ç ã€‚\n- **ç§‘å­¦è®¡ç®—**ï¼šå¤æ‚çš„æ•°å­¦è¿ç®—å’Œæ¨¡æ‹Ÿã€‚\n\n## 2. WebXR\n\n### 2.1. å®šä¹‰\n\nWebXR æ˜¯ä¸€ç§ç”¨äºæ„å»ºè™šæ‹Ÿç°å®ï¼ˆVRï¼‰å’Œå¢å¼ºç°å®ï¼ˆARï¼‰ä½“éªŒçš„æ ‡å‡† APIã€‚å®ƒæ˜¯ WebVR çš„æ‰©å±•ï¼Œæä¾›äº†æ›´å¹¿æ³›çš„åŠŸèƒ½å’Œæ›´å¥½çš„æ€§èƒ½ã€‚\n\n### 2.2. ç‰¹ç‚¹\n\n- **è·¨è®¾å¤‡æ”¯æŒ**ï¼šæ”¯æŒå¤šç§ VR å’Œ AR è®¾å¤‡ï¼Œå¦‚ Oculus Riftã€HTC Viveã€Microsoft HoloLens ç­‰ã€‚\n- **é«˜æ€§èƒ½**ï¼šä¼˜åŒ–äº†æ¸²æŸ“å’Œäº¤äº’çš„æ€§èƒ½ï¼Œæä¾›æ²‰æµ¸å¼ä½“éªŒã€‚\n- **æ˜“äºé›†æˆ**ï¼šä¸ç°æœ‰çš„ Web æŠ€æœ¯ï¼ˆå¦‚ WebGLï¼‰æ— ç¼é›†æˆã€‚\n\n### 2.3. åº”ç”¨åœºæ™¯\n\n- **æ¸¸æˆå’Œå¨±ä¹**ï¼šæ²‰æµ¸å¼æ¸¸æˆå’Œè™šæ‹Ÿæ—…æ¸¸ã€‚\n- **æ•™è‚²å’ŒåŸ¹è®­**ï¼šè™šæ‹Ÿå®éªŒå®¤å’Œæ¨¡æ‹Ÿè®­ç»ƒã€‚\n- **ç”µå•†å’Œè¥é”€**ï¼šè™šæ‹Ÿè¯•è¡£é—´å’Œäº§å“å±•ç¤ºã€‚\n\n## 3. æœºå™¨å­¦ä¹ å’Œ AI \n\n### 3.1. TensorFlow.js å’Œ ml5.js\n\n- **TensorFlow.js**ï¼šä¸€ä¸ªç”¨äºåœ¨æµè§ˆå™¨ä¸­è¿è¡Œæœºå™¨å­¦ä¹ æ¨¡å‹çš„åº“ã€‚æ”¯æŒè®­ç»ƒå’Œæ¨ç†ï¼Œå…è®¸å¼€å‘è€…ç›´æ¥åœ¨å®¢æˆ·ç«¯è¿›è¡Œæœºå™¨å­¦ä¹ æ“ä½œã€‚\n- **ml5.js**ï¼šåŸºäº TensorFlow.js çš„é«˜çº§åº“ï¼Œæä¾›äº†ç®€å•æ˜“ç”¨çš„ APIï¼Œç”¨äºå®ç°å¸¸è§çš„æœºå™¨å­¦ä¹ ä»»åŠ¡ã€‚\n\n### 3.2. ç‰¹ç‚¹\n\n- **å®æ—¶å¤„ç†**ï¼šåœ¨æµè§ˆå™¨ä¸­å®æ—¶è¿è¡Œæœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œæ— éœ€æœåŠ¡å™¨ç«¯å¤„ç†ã€‚` ===> ç«¯ä¾§æ¨¡å‹`\n- **éšç§ä¿æŠ¤**ï¼šæ•°æ®åœ¨æœ¬åœ°å¤„ç†ï¼Œå‡å°‘äº†éšç§æ³„éœ²çš„é£é™©ã€‚\n- **æ˜“äºä½¿ç”¨**ï¼šæä¾›äº†ä¸°å¯Œçš„é¢„è®­ç»ƒæ¨¡å‹å’Œç®€åŒ–çš„ APIï¼Œé™ä½äº†æœºå™¨å­¦ä¹ çš„å…¥é—¨é—¨æ§›ã€‚\n\n### 3.3. åº”ç”¨åœºæ™¯\n\n- **å›¾åƒè¯†åˆ«**ï¼šå®æ—¶çš„å›¾åƒåˆ†ç±»å’Œå¯¹è±¡æ£€æµ‹ã€‚\n- **è‡ªç„¶è¯­è¨€å¤„ç†**ï¼šæ–‡æœ¬åˆ†ç±»ã€æƒ…æ„Ÿåˆ†æå’Œç¿»è¯‘ã€‚\n- **æ¨èç³»ç»Ÿ**ï¼šä¸ªæ€§åŒ–æ¨èå’Œå†…å®¹è¿‡æ»¤ã€‚\n\n## 4. HTTP/3\n\n### 4.1. å®šä¹‰\nHTTP/3 æ˜¯ HTTP åè®®çš„æœ€æ–°ç‰ˆæœ¬ï¼ŒåŸºäº QUIC åè®®ï¼ˆQuick UDP Internet Connectionsï¼‰ã€‚å®ƒæ—¨åœ¨æé«˜ Web çš„ä¼ è¾“æ•ˆç‡å’Œå¯é æ€§ã€‚\n\n### 4.2. ç‰¹ç‚¹\n\n- **åŸºäº UDP**ï¼šä½¿ç”¨ `UDP` ä»£æ›¿ TCPï¼Œå‡å°‘äº†è¿æ¥å»ºç«‹çš„å»¶è¿Ÿã€‚\n- **å¤šè·¯å¤ç”¨**ï¼šåœ¨ä¸€ä¸ªè¿æ¥ä¸­åŒæ—¶ä¼ è¾“å¤šä¸ªæ•°æ®æµï¼Œé¿å…äº†â€œé˜Ÿå¤´é˜»å¡â€é—®é¢˜ã€‚\n- **å†…ç½®åŠ å¯†**ï¼šé»˜è®¤ä½¿ç”¨ TLS 1.3 æä¾›å®‰å…¨ä¼ è¾“ã€‚\n\n### 4.3. ä¼˜åŠ¿\n\n- **æ›´å¿«çš„è¿æ¥å»ºç«‹**ï¼šå‡å°‘äº†æ¡æ‰‹æ—¶é—´ï¼Œæé«˜äº†é¡µé¢åŠ è½½é€Ÿåº¦ã€‚\n- **æ›´å¥½çš„æ€§èƒ½**ï¼šåœ¨é«˜å»¶è¿Ÿå’Œä¸¢åŒ…ç¯å¢ƒä¸‹è¡¨ç°æ›´å¥½ã€‚\n- **å¢å¼ºçš„å®‰å…¨æ€§**ï¼šå†…ç½®åŠ å¯†æä¾›äº†æ›´å¼ºçš„å®‰å…¨ä¿éšœã€‚\n\n> HTTP ç« èŠ‚ä¼šå±•å¼€èŠ\n\n## 5. WebRTC\n\n### 5.1. å®šä¹‰\n\nWebRTCï¼ˆWeb Real-Time Communicationï¼‰æ˜¯ä¸€ä¸ªæ”¯æŒæµè§ˆå™¨å’Œç§»åŠ¨åº”ç”¨è¿›è¡Œå®æ—¶é€šä¿¡çš„å¼€æºé¡¹ç›®ã€‚å®ƒ**å…è®¸éŸ³é¢‘ã€è§†é¢‘å’Œæ•°æ®çš„ç›´æ¥ä¼ è¾“ï¼Œæ— éœ€ä¸­ä»‹æœåŠ¡å™¨ã€‚**\n\n### 5.2. ç‰¹ç‚¹\n\n- **ç‚¹å¯¹ç‚¹é€šä¿¡**ï¼š**ç›´æ¥åœ¨å®¢æˆ·ç«¯ä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œå‡å°‘äº†å»¶è¿Ÿ**ã€‚\n- **è·¨å¹³å°æ”¯æŒ**ï¼šåœ¨ä¸åŒæµè§ˆå™¨å’Œè®¾å¤‡ä¸Šè¿è¡Œä¸€è‡´ã€‚\n- **é«˜è´¨é‡ä¼ è¾“**ï¼šæ”¯æŒé«˜è´¨é‡çš„éŸ³é¢‘å’Œè§†é¢‘ä¼ è¾“ã€‚\n\n### 5.3. åº”ç”¨åœºæ™¯\n\n- **è§†é¢‘ä¼šè®®**ï¼šå®æ—¶çš„è§†é¢‘é€šè¯å’Œä¼šè®®ã€‚\n- **åœ¨çº¿æ•™è‚²**ï¼šå®æ—¶çš„æ•™å­¦å’Œäº’åŠ¨ã€‚\n- **æ¸¸æˆå’Œå¨±ä¹**ï¼šå®æ—¶çš„å¤šäººæ¸¸æˆå’Œäº’åŠ¨ä½“éªŒã€‚\n\n## 6. Progressive Web Apps (PWA)\n\n### 6.1. å®šä¹‰\n\næ¸è¿›å¼ Web åº”ç”¨ï¼ˆPWAï¼‰æ˜¯ä¸€ç§ç»“åˆäº† Web å’Œæœ¬åœ°åº”ç”¨ä¼˜ç‚¹çš„æ–°å‹åº”ç”¨å½¢å¼ã€‚PWA ä½¿ç”¨ç°ä»£ Web æŠ€æœ¯æä¾›ç±»ä¼¼æœ¬åœ°åº”ç”¨çš„ç”¨æˆ·ä½“éªŒã€‚\n\n### 6.2. ç‰¹ç‚¹\n\n- **ç¦»çº¿è®¿é—®**ï¼šé€šè¿‡ `Service Worker` å®ç°ç¦»çº¿ç¼“å­˜ã€‚\n- **æ¨é€é€šçŸ¥**ï¼šæ”¯æŒæ¨é€é€šçŸ¥ï¼Œä¿æŒç”¨æˆ·äº’åŠ¨ã€‚\n- **å®‰è£…åˆ°ä¸»å±å¹•**ï¼šç”¨æˆ·å¯ä»¥å°† PWA å®‰è£…åˆ°ä¸»å±å¹•ï¼Œåƒæœ¬åœ°åº”ç”¨ä¸€æ ·ä½¿ç”¨ã€‚\n\n### 6.3. ä¼˜åŠ¿\n\n- **è·¨å¹³å°**ï¼šåœ¨ä¸åŒæ“ä½œç³»ç»Ÿå’Œè®¾å¤‡ä¸Šè¿è¡Œä¸€è‡´ã€‚\n- **æ— éœ€å®‰è£…**ï¼šç”¨æˆ·é€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œæ— éœ€ä¸‹è½½å’Œå®‰è£…ã€‚\n- **è‡ªåŠ¨æ›´æ–°**ï¼šåº”ç”¨æ›´æ–°è‡ªåŠ¨æ¨é€åˆ°ç”¨æˆ·ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚\n\n## 7. JAM stack æ¶æ„\n\n> ä¸‹æ–‡æœ‰è¯¦ç»†ä»‹ç»\n\n### 7.1. å®šä¹‰\n\nJAM ä»£è¡¨ JavaScriptã€APIsã€Markupã€‚\n\n- JavaScript æ˜¯ç½‘ç»œåº”ç”¨ç¨‹åºä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€\n- APIï¼ˆåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼‰æ˜¯ä¸€ç§ä»åˆ«äººçš„ç¨‹åºæˆ–åº”ç”¨ç¨‹åºä¸­è¯·æ±‚æ•°æ®çš„æ–¹å¼\n- Markup æ˜¯å‘æµè§ˆå™¨æä¾›æ ¼å¼åŒ–æŒ‡ç¤ºçš„ä»£ç ï¼ˆHTML å’Œ CSSï¼‰ã€‚\n\nJAMstack æ˜¯ä¸€ç§ç°ä»£ Web å¼€å‘æ¶æ„ï¼Œå¼ºè°ƒå®¢æˆ·ç«¯ JavaScriptã€å¯é‡ç”¨ API å’Œé¢„æ„å»ºæ ‡è®°ï¼ˆMarkupï¼‰ã€‚å®ƒæ—¨åœ¨æé«˜ Web åº”ç”¨çš„æ€§èƒ½ã€å®‰å…¨æ€§å’Œå¯æ‰©å±•æ€§ã€‚\n\n### 7.2. ç‰¹ç‚¹\n\n- **é™æ€ç”Ÿæˆ**ï¼šä½¿ç”¨é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼ˆå¦‚ Gatsbyã€Next.jsï¼‰é¢„æ„å»ºé¡µé¢ï¼Œæé«˜åŠ è½½é€Ÿåº¦ã€‚\n- **æ— æœåŠ¡å™¨**ï¼šé€šè¿‡ API è°ƒç”¨å®ç°åŠ¨æ€åŠŸèƒ½ï¼Œå‡å°‘æœåŠ¡å™¨ç®¡ç†ã€‚\n- **åˆ†ç¦»å…³æ³¨ç‚¹**ï¼šå‰ç«¯å’Œåç«¯åˆ†ç¦»ï¼Œå‰ç«¯é€šè¿‡ API è·å–æ•°æ®ã€‚\n\n### 7.3. ä¼˜åŠ¿\n\n- **é«˜æ€§èƒ½**ï¼šé™æ€é¡µé¢åŠ è½½é€Ÿåº¦å¿«ï¼Œç”¨æˆ·ä½“éªŒå¥½ã€‚\n   - å› ä¸ºï¼š**JAMstack åº”ç”¨ç¨‹åºä¸­çš„å‡ ä¹æ‰€æœ‰å†…å®¹éƒ½ç”±ä» CDN æä¾›çš„é™æ€ HTML æ–‡ä»¶ç»„æˆ**\n- **é«˜å®‰å…¨æ€§**ï¼šå‡å°‘äº†æœåŠ¡å™¨æ”»å‡»é¢ï¼Œæé«˜äº†å®‰å…¨æ€§ã€‚\n- **æ˜“äºæ‰©å±•**ï¼šé€šè¿‡ API æ‰©å±•åŠŸèƒ½ï¼Œçµæ´»æ€§é«˜ã€‚\n   - ç”±äº JAMstack å‰ç«¯é€Ÿåº¦å¿«ä¸”åç«¯è½»é‡åŒ–ï¼Œå› æ­¤ JAMstack åº”ç”¨ç¨‹åºé€šå¸¸å…·æœ‰æå¼ºçš„å¯æ‰©å±•æ€§ã€‚\n\nè¿™äº›æ–°å…´æŠ€æœ¯å’Œæ ‡å‡†æ­£åœ¨æ¨åŠ¨ Web å¼€å‘çš„ä¸æ–­è¿›æ­¥ï¼Œæä¾›äº†æ›´é«˜çš„æ€§èƒ½ã€æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’Œæ›´å¼ºçš„å¼€å‘çµæ´»æ€§ã€‚äº†è§£å’ŒæŒæ¡è¿™äº›æŠ€æœ¯å¯¹äºç°ä»£ Web å¼€å‘è€…æ¥è¯´è‡³å…³é‡è¦ã€‚\n","7f0fc35e63305eb19c0326db6f4f832e":"\n# JAMstack æ¶æ„æ¦‚è¿°\n\n`#å‰ç«¯` \n\n## ç›®å½•\n<!-- toc -->\n ## å®šä¹‰ \n\nJAMstack æ˜¯ä¸€ç§ç°ä»£ Web å¼€å‘æ¶æ„ï¼Œå¼ºè°ƒä½¿ç”¨ JavaScriptã€API å’Œ Markupï¼ˆæ ‡è®°ï¼‰æ¥æ„å»ºé«˜æ€§èƒ½å’Œé«˜å®‰å…¨æ€§çš„ Web åº”ç”¨ã€‚\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/ff6bf70189d55690f74889441c4f9ca2.png)\n\n## äº§ç”ŸèƒŒæ™¯\n\n> **ä¼ ç»Ÿçš„ç½‘ç«™æ¶æ„ ï¼š æ— è®ºå¦‚ä½•éƒ½éœ€è¦ä¸€ä¸ªå®æ—¶çš„åœ¨çº¿æœåŠ¡ï¼Œå®ƒåœ¨å¤„ç†è¿™äº›ä¸æ€ä¹ˆå˜åŠ¨çš„å†…å®¹æ—¶ï¼Œå¾ˆé¸¡è‚‹ï¼šè®¡ç®—é‡å¾ˆå°ï¼Œä½†æ˜¯ä¾æ—§éœ€è¦å¤§é‡åç«¯å’Œè¿ç»´äººå‘˜ç»´æŠ¤ç½‘ç«™çš„å®‰å…¨æ€§ã€ç¨³å®šæ€§ã€å¯ä¼¸ç¼©æ€§â€¦â€¦**\n\n## JAMstack çš„æ ¸å¿ƒæ¦‚å¿µ\n\n### JavaScript\n\n- ç”¨äºå¤„ç†å‰ç«¯é€»è¾‘å’Œäº¤äº’ã€‚å¯ä»¥ä½¿ç”¨å„ç§ JavaScript æ¡†æ¶å’Œåº“ï¼Œå¦‚ Reactã€Vue.jsã€Angular ç­‰ã€‚\n- JavaScript ä»£ç é€šå¸¸åœ¨å®¢æˆ·ç«¯æ‰§è¡Œï¼Œå‡å°‘äº†æœåŠ¡å™¨è´Ÿæ‹…ã€‚\n\n### API\n\n- é€šè¿‡ API è°ƒç”¨æ¥è·å–åŠ¨æ€æ•°æ®å’Œæ‰§è¡ŒæœåŠ¡å™¨ç«¯æ“ä½œã€‚\n- å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡ï¼ˆå¦‚ Auth0ã€Stripeã€Firebaseç­‰ï¼‰æˆ– è‡ªå»ºçš„ APIï¼ˆå¦‚ RESTful APIã€GraphQLï¼‰ã€‚\n- API é€šå¸¸æ˜¯æ— çŠ¶æ€çš„ï¼Œæä¾›äº†è‰¯å¥½çš„å¯æ‰©å±•æ€§å’Œçµæ´»æ€§ã€‚\n\n### Markupï¼ˆæ ‡è®°ï¼‰\n\n- ä½¿ç”¨é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼ˆå¦‚ Gatsbyã€Next.jsã€Hugoã€vitepress ç­‰ï¼‰é¢„ç”Ÿæˆ HTML é¡µé¢ã€‚\n- è¿™äº›é¡µé¢åœ¨æ„å»ºæ—¶ç”Ÿæˆï¼Œå¯ä»¥ç›´æ¥éƒ¨ç½²åˆ° CDNï¼Œæé«˜åŠ è½½é€Ÿåº¦å’Œæ€§èƒ½ã€‚\n\n## JAMstack çš„ä¼˜åŠ¿\n\n### é«˜æ€§èƒ½\n\n   - é¢„ç”Ÿæˆçš„é™æ€é¡µé¢å¯ä»¥é€šè¿‡ CDN å¿«é€Ÿåˆ†å‘ï¼Œå‡å°‘äº†æœåŠ¡å™¨å“åº”æ—¶é—´ã€‚\n   - é™æ€èµ„æºé€šå¸¸æ¯”åŠ¨æ€å†…å®¹åŠ è½½æ›´å¿«ï¼Œæé«˜äº†ç”¨æˆ·ä½“éªŒã€‚\n\n### é«˜å®‰å…¨æ€§\n\n   - å‡å°‘äº†æœåŠ¡å™¨ç«¯ä»£ç çš„æ‰§è¡Œï¼Œé™ä½äº†æ”»å‡»é¢ã€‚\n   - é™æ€æ–‡ä»¶ä¸å®¹æ˜“å—åˆ°ä¼ ç»Ÿçš„æœåŠ¡å™¨æ”»å‡»ï¼ˆå¦‚ SQL æ³¨å…¥ï¼‰ã€‚\n\n### å¯æ‰©å±•æ€§\n\n   - é™æ€ç«™ç‚¹å¯ä»¥è½»æ¾æ‰©å±•ï¼Œé€šè¿‡å¢åŠ æ–°çš„é™æ€æ–‡ä»¶å’Œ API è°ƒç”¨æ¥å®ç°æ›´å¤šåŠŸèƒ½ã€‚\n   - API è°ƒç”¨å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œæ‰©å±•å’Œä¿®æ”¹ï¼Œè€Œä¸å½±å“å‰ç«¯ä»£ç ã€‚\n\n### å¼€å‘æ•ˆç‡\n\n   - å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºå‰ç«¯ä»£ç å’Œç”¨æˆ·ä½“éªŒï¼Œè€Œä¸éœ€è¦å¤„ç†å¤æ‚çš„æœåŠ¡å™¨ç«¯é€»è¾‘ã€‚\n   - ä½¿ç”¨ç°ä»£å‰ç«¯æ¡†æ¶å’Œå·¥å…·é“¾ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚\n\n## JAMstack çš„åŠ£åŠ¿\n\n**ä¸šåŠ¡åœºæ™¯éå¸¸ç‹­å°ï¼Œåªèƒ½ç”¨äºå†…å®¹æ›´æ–°ä¸å¤§é¢‘ç¹çš„ CMS ç«™ç‚¹**ã€‚å›½å¤–ä¹Ÿæœ‰æ— å¤´ç”µå•†ï¼ˆHeadless Commerceï¼‰çš„å•†ä¸šå®è·µï¼Œä½†æ˜¯å‰æ™¯å¹¶ä¸æ˜æœ—ã€‚\n\n## å¸¸è§çš„ JAMstack å·¥å…·å’Œæ¡†æ¶\n\n### é™æ€ç«™ç‚¹ç”Ÿæˆå™¨\n\n- **Gatsby**ï¼šåŸºäº React çš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œæ”¯æŒ GraphQL æ•°æ®æŸ¥è¯¢ã€‚\n- **Next.js**ï¼šæä¾›é™æ€ç”Ÿæˆå’ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰çš„æ··åˆæ¨¡å¼ï¼Œé€‚ç”¨äºå¤æ‚çš„ Web åº”ç”¨ã€‚\n- **Hugo**ï¼šä¸€ä¸ªå¿«é€Ÿã€çµæ´»çš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œä½¿ç”¨ `Go è¯­è¨€`ç¼–å†™ã€‚\n- Jekyll\n- Nuxt.js\n   - åŸºäºVue.jsçš„æ¡†æ¶ï¼Œæ”¯æŒé™æ€ç”Ÿæˆå’ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ã€‚\n   - é€‚ç”¨äºæ„å»ºå¤æ‚çš„Vue.jsåº”ç”¨ã€‚\n\n### API æœåŠ¡\n\n- **Headless CMS**ï¼šå¦‚ Contentfulã€Sanityã€Strapiï¼Œæä¾›å†…å®¹ç®¡ç†å’Œ API æ¥å£ã€‚\n- **æœåŠ¡å™¨ç«¯åŠŸèƒ½**ï¼šå¦‚ AWS Lambdaã€Netlify Functionsï¼Œç”¨äºå®ç°æ— æœåŠ¡å™¨è®¡ç®—ã€‚\n   - **æ­£å¸¸äº‘æœåŠ¡å‚å•†éƒ½æœ‰æä¾›ï¼Œæ¯”å¦‚ç”¨è¿‡è…¾è®¯äº‘æä¾›serverlessæœåŠ¡**\n- **ç¬¬ä¸‰æ–¹ API**ï¼šå¦‚ Auth0ï¼ˆèº«ä»½éªŒè¯ï¼‰ã€Stripeï¼ˆæ”¯ä»˜ï¼‰ã€Algoliaï¼ˆæœç´¢ï¼‰ã€‚\n\n### éƒ¨ç½²å’Œæ‰˜ç®¡\n\n- **Netlify**ï¼šæä¾›é™æ€ç«™ç‚¹æ‰˜ç®¡ã€æ— æœåŠ¡å™¨å‡½æ•°å’ŒæŒç»­é›†æˆï¼ˆCI/CDï¼‰æœåŠ¡ã€‚\n- **Vercel**ï¼šæ”¯æŒ` Next.js` å’Œå…¶ä»–é™æ€ç«™ç‚¹çš„æ‰˜ç®¡ï¼Œæä¾›æ— æœåŠ¡å™¨å‡½æ•°å’Œè‡ªåŠ¨éƒ¨ç½²ã€‚\n- **GitHub Pages**ï¼šé€‚ç”¨äºç®€å•çš„é™æ€ç«™ç‚¹æ‰˜ç®¡ï¼Œé›†æˆäº† GitHub ä»“åº“ã€‚\n- **æ­£å¸¸äº‘æœåŠ¡äº§å•†éƒ½æœ‰æä¾›è¿™ä¸ªèƒ½åŠ›ï¼Œæ¯”å¦‚ Amazonã€é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰**\n\n## JAMstack çš„å·¥ä½œæµç¨‹\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/20b4de6008f7cfc8c07f1d11772e1573.png)\n\n> å…¶å®å¾ˆç±»ä¼¼ [https://elog.1874.cool/notion/vy55q9xwlqlsfrvk](https://elog.1874.cool/notion/vy55q9xwlqlsfrvk) çš„æ€è·¯\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/fd45c197b1ed7399ddf97db551d64af0.png)\n\n### å¼€å‘é˜¶æ®µ\n\n- ä½¿ç”¨é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼ˆå¦‚ Gatsbyã€Next.jsï¼‰ç¼–å†™å‰ç«¯ä»£ç å’Œæ¨¡æ¿ã€‚\n- **é€šè¿‡ API è·å–åŠ¨æ€æ•°æ®ï¼Œå¹¶å°†å…¶åµŒå…¥åˆ°é™æ€é¡µé¢ä¸­**ã€‚\n- ä½¿ç”¨ JavaScript å®ç°å‰ç«¯äº¤äº’å’ŒåŠ¨æ€åŠŸèƒ½ã€‚\n\n### æ„å»ºé˜¶æ®µ\n\n- è¿è¡Œæ„å»ºå·¥å…·ï¼Œç”Ÿæˆé™æ€ HTMLã€CSS å’Œ JavaScript æ–‡ä»¶ã€‚\n- é¢„ç”Ÿæˆçš„é¡µé¢æ–‡ä»¶å¯ä»¥ç›´æ¥éƒ¨ç½²åˆ° CDN æˆ–é™æ€æ‰˜ç®¡æœåŠ¡ã€‚\n\n### éƒ¨ç½²é˜¶æ®µ\n\n- å°†é™æ€æ–‡ä»¶ä¸Šä¼ åˆ°æ‰˜ç®¡å¹³å°ï¼ˆå¦‚ Netlifyã€Vercelï¼‰ã€‚\n- é…ç½® CDN åˆ†å‘ï¼Œç¡®ä¿å…¨çƒç”¨æˆ·éƒ½èƒ½å¿«é€Ÿè®¿é—®ã€‚\n\n### è¿è¡Œæ—¶\n\n- ç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶ï¼ŒCDN ä¼šæä¾›é¢„ç”Ÿæˆçš„é™æ€é¡µé¢ï¼Œç¡®ä¿å¿«é€ŸåŠ è½½ã€‚\n- å‰ç«¯ JavaScript ä»£ç åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œï¼Œè°ƒç”¨ API è·å–å’Œæ›´æ–°æ•°æ®ã€‚\n- æ— æœåŠ¡å™¨å‡½æ•°å¤„ç†ç‰¹å®šçš„æœåŠ¡å™¨ç«¯ä»»åŠ¡ï¼Œå¦‚è¡¨å•æäº¤ã€èº«ä»½éªŒè¯ç­‰ã€‚\n\n## ä½¿ç”¨ JAMstack çš„åœºæ™¯\n\n### åšå®¢å’Œå†…å®¹ç½‘ç«™\n\n   - ä½¿ç”¨ Headless CMS ç®¡ç†å†…å®¹ï¼Œé€šè¿‡é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ç”Ÿæˆ HTML é¡µé¢ã€‚\n   - é¢„ç”Ÿæˆçš„é¡µé¢é€šè¿‡ CDN åˆ†å‘ï¼Œæä¾›å¿«é€Ÿçš„é˜…è¯»ä½“éªŒã€‚\n\n### ç”µå•†ç½‘ç«™\n\n   - äº§å“ä¿¡æ¯å’Œåº“å­˜é€šè¿‡ API è·å–ï¼Œå‰ç«¯ä½¿ç”¨ JavaScript å®ç°è´­ç‰©è½¦å’Œç»“è´¦åŠŸèƒ½ã€‚\n   - é™æ€é¡µé¢å±•ç¤ºäº§å“åˆ—è¡¨å’Œè¯¦æƒ…ï¼Œæé«˜é¡µé¢åŠ è½½é€Ÿåº¦ã€‚\n\n### ä¼ä¸šå®˜ç½‘\n\n   - é™æ€é¡µé¢å±•ç¤ºå…¬å¸ä¿¡æ¯ã€æœåŠ¡å’Œæ¡ˆä¾‹ï¼Œå‡å°‘æœåŠ¡å™¨è´Ÿæ‹…ã€‚\n   - è¡¨å•æäº¤å’Œç”¨æˆ·äº¤äº’é€šè¿‡æ— æœåŠ¡å™¨å‡½æ•°å¤„ç†ã€‚\n\n## æ€»ç»“\n\nJAMstack é€šè¿‡å°† JavaScriptã€API å’Œ Markup ç»“åˆèµ·æ¥ï¼Œæä¾›äº†ä¸€ç§é«˜æ•ˆã€å®‰å…¨å’Œå¯æ‰©å±•çš„ Web å¼€å‘æ¶æ„ã€‚å®ƒé€‚ç”¨äºå„ç§ç±»å‹çš„ Web åº”ç”¨ï¼Œä»ç®€å•çš„åšå®¢åˆ°å¤æ‚çš„ç”µå•†ç½‘ç«™ã€‚é€šè¿‡ä½¿ç”¨ç°ä»£å·¥å…·å’Œæ¡†æ¶ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿæ„å»ºå’Œéƒ¨ç½²é«˜æ€§èƒ½çš„ Web åº”ç”¨ï¼Œæä¾›å“è¶Šçš„ç”¨æˆ·ä½“éªŒã€‚\n","f564cf89c90c5db9b902499186e8a907":"\n# å‰è¨€\n\n\n- å‰ç«¯æ¡†æ¶ç¯‡\n\t- å…¶ä»–å‰ç«¯æ¡†æ¶ï¼šé Vue å’Œé React çš„æ–‡ç« æ±‡æ€»\n\t- å‰ç«¯é€šç”¨æ¡†æ¶è®¾è®¡çŸ¥è¯†\n\t- å‰ç«¯æ¡†æ¶è¶‹åŠ¿","09e17fda609f5b56b02d0be1c8fdcd2f":"\n# å‰ç«¯æ¡†æ¶è®¾è®¡çš„å‰ç½®çŸ¥è¯†ç‚¹\n\n\n`#2024/08/10`  `#å‰ç«¯/å‰ç«¯æ¡†æ¶`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä½•ä¸ºå‰ç«¯æ¡†æ¶ \n\n- umi ç®—æ˜¯æ¡†æ¶ï¼Œå†…ç½®äº†è·¯ç”±ã€æ„å»ºã€æµæ°´çº¿éƒ¨ç½²ç­‰\n- Angular æ˜¯æ¡†æ¶\n- Next.js ï¼šåŸºäº React çš„ï¼Œæ”¯æŒ SSRã€SSGçš„`æœåŠ¡ç«¯æ¡†æ¶`\n- Nuxt.js \n- Modern.js ç­‰\n\n## 2. å‰ç«¯åº“ä¸å‰ç«¯æ¡†æ¶çš„åŒºåˆ«ï¼Ÿ\n\n- æ¡†æ¶ï¼šReactï¼ˆè™½ç„¶æœ‰æ—¶è¢«ç§°ä¸ºåº“ï¼Œä½†å› å…¶ç”Ÿæ€ç³»ç»Ÿæ›´åƒæ¡†æ¶ï¼‰ã€Angular ã€Vue.js \n- åº“ï¼š\n\t- æä¾›ç‰¹å®šåŠŸèƒ½çš„å·¥å…·é›†ï¼Œæ¯”å¦‚ jQueryã€Lodashã€Moment.js\n\n> ä¸¥æ ¼è¯´ï¼ŒReact å’Œ Vue éƒ½ä¸ç®—æ˜¯**æ¡†æ¶**ï¼Œè€Œç®—æ˜¯**åº“**\n\n## 3. ç°ä»£å‰ç«¯æ¡†æ¶çš„å®ç°åŸç†\n\nç°ä»£å‰ç«¯æ¡†æ¶çš„**æ ¸å¿ƒå®ç°åŸç†**æ˜¯é€šè¿‡ç»„ä»¶åŒ–ã€è™šæ‹ŸDOMå’Œå“åº”å¼ç³»ç»Ÿç­‰ï¼Œå®ç°**é«˜æ•ˆçš„å£°æ˜å¼UIæ¸²æŸ“å’ŒçŠ¶æ€ç®¡ç†**ã€‚\n- å…¶å®å°±æ˜¯å›´ç»• `UI = f(state)`  å±•å¼€çš„\n\t- `UI` ä¾èµ–ä¸å®¿ä¸»ç¯å¢ƒçš„`æ¸²æŸ“å¼•æ“`\n\t- `f` æ˜¯æ¡†æ¶æœ¬èº«çš„`è¿è¡Œæœºåˆ¶`\n\t- `state` å½“å‰è§†å›¾çš„`çŠ¶æ€/æ•°æ®`\n- è‡³äºç»„ä»¶åŒ–ã€VDomã€å“åº”å¼ç­‰éƒ½æ˜¯`æ‰‹æ®µ`å’Œä¸€äº›`å…³é”®æ¨¡å—`\n\n## 4. ç°ä»£å‰ç«¯æ¡†æ¶çš„æ ¸å¿ƒæ¨¡å—ç»„æˆæœ‰å“ªäº›ï¼Ÿ\n\n1. **ç»„ä»¶åŒ–**ï¼š\n\t- å‰ç«¯æ¡†æ¶é€šå¸¸ä»¥ç»„ä»¶ä¸ºåŸºç¡€æ„å»ºåº”ç”¨ç¨‹åºã€‚ç»„ä»¶æ˜¯å°è£…äº† UI å’Œé€»è¾‘çš„ç‹¬ç«‹å•å…ƒï¼Œå¯ä»¥é‡å¤ä½¿ç”¨\n2. **è™šæ‹Ÿ DOM**ï¼š\n    - è™šæ‹Ÿ DOM æ˜¯å†…å­˜ä¸­çš„ä¸€ä¸ªè½»é‡çº§è¡¨ç¤ºï¼Œç”¨äºä¼˜åŒ–å®é™… DOM æ“ä½œã€‚\n3. **å“åº”å¼ç³»ç»Ÿ**ï¼š\n    - ç°ä»£æ¡†æ¶æä¾›è‡ªåŠ¨åŒ–çš„å“åº”å¼æ•°æ®ç»‘å®šï¼Œç¡®ä¿å½“åº”ç”¨çŠ¶æ€å˜åŒ–æ—¶ï¼ŒUI ä¼šè‡ªåŠ¨æ›´æ–°ã€‚\n    - å®ç°ï¼š\n        - Vueï¼šä½¿ç”¨Â `Proxy`Â å’ŒÂ `Object.defineProperty`Â æ¥æ£€æµ‹æ•°æ®å˜æ›´ã€‚\n        - Reactï¼šé€šè¿‡çŠ¶æ€ï¼ˆstateï¼‰ç®¡ç†ç³»ç»Ÿæ›´æ–°ï¼Œé€šå¸¸ç»“åˆÂ `setState`Â æˆ– `hooks`ã€‚\n4. **å•å‘æ•°æ®æµ**ï¼š\n    - é€šè¿‡å•å‘æ•°æ®æµæ¥ç®¡ç†ç»„ä»¶ä¹‹é—´çš„æ•°æ®ä¼ é€’ï¼Œä»¥ç¡®ä¿åº”ç”¨çš„æ•°æ®æµåŠ¨æ–¹å‘æ˜ç¡®ï¼Œæ˜“äºè·Ÿè¸ªå’Œè°ƒè¯•ã€‚\n    - å®ç°ï¼šé€šå¸¸é‡‡ç”¨çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚ Reduxã€Vuexï¼‰ï¼Œç®¡ç†å…¨å±€åº”ç”¨çŠ¶æ€ï¼Œå¹¶é€šè¿‡ä¸¥æ ¼çš„æ“ä½œæ­¥éª¤æ¥æ›´æ–°çŠ¶æ€ã€‚\n5. **æ¨¡æ¿å’Œå£°æ˜å¼æ¸²æŸ“**ï¼š\n    - ä½¿ç”¨æ¨¡æ¿æ¥æè¿° UIï¼Œæä¾›å£°æ˜å¼çš„è§†å›¾å®šä¹‰ã€‚\n    - å®ç°ï¼šæ¨¡æ¿è¯­æ³•è¢«ç¼–è¯‘ä¸ºæ¸²æŸ“å‡½æ•°ï¼Œå°†æ•°æ®æ˜ å°„åˆ° UI ç»„ä»¶ã€‚\n6. **è·¯ç”±ç®¡ç†**ï¼š\n    - å®ç°å•é¡µåº”ç”¨ï¼ˆSPAï¼‰çš„è§†å›¾åˆ‡æ¢ï¼Œæ–¹ä¾¿åœ¨ä¸åŒé¡µé¢ä¹‹é—´å¯¼èˆªã€‚\n    - å®ç°ï¼šæ¡†æ¶æä¾›è·¯ç”±åŠŸèƒ½ï¼ˆå¦‚ React Routerã€Vue Routerï¼‰ï¼ŒåŒ¹é…è·¯å¾„å¹¶æ¸²æŸ“ç›¸åº”ç»„ä»¶ã€‚\n7. **ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼š\n    - æä¾›é’©å­å‡½æ•°ï¼Œå…è®¸å¼€å‘è€…åœ¨ç»„ä»¶ç‰¹å®šçš„ç”Ÿå‘½å‘¨æœŸé˜¶æ®µæ‰§è¡Œä»£ç ã€‚\n    - å®ç°ï¼šé€šè¿‡ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆReact çš„ componentDidMountã€useEffectï¼ŒVue çš„ createdã€mounted ç­‰ï¼‰æ¥è·å–ä¸ªæ€§åŒ–æ§åˆ¶ã€‚\n8. **æ€§èƒ½ä¼˜åŒ–**ï¼š\n    - ç°ä»£æ¡†æ¶é€šè¿‡å¤šç§æŠ€æœ¯ä¼˜åŒ–æ€§èƒ½ï¼Œå¦‚æ‡’åŠ è½½ã€ä»£ç åˆ†å‰²ç­‰ã€‚\n    - å®ç°ï¼šæ¡†æ¶æä¾›å†…ç½®çš„å·¥å…·å’Œçº¦å®šï¼Œä»¥å‡å°‘åˆå§‹åŠ è½½æ—¶é—´å’Œä¼˜åŒ–æ›´æ–°æ€§èƒ½ã€‚\n9. **è·¨å¹³å°æ¸²æŸ“**ï¼š æ”¯æŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ã€é™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆSSGï¼‰ã€ä»¥åŠä¸ç§»åŠ¨å’Œæ¡Œé¢å¹³å°ï¼ˆå¦‚ React Nativeï¼‰é›†æˆã€‚ æŠ½è±¡å‡ºæ¸²æŸ“å±‚ï¼Œå¹¶æä¾›å¤šå¹³å°å…¼å®¹çš„å®ç°\n10. **äº‹ä»¶å¤„ç†**\n    - ç®¡ç†å’Œä¼˜åŒ–äº‹ä»¶ç»‘å®š\n    - å®ç°: \n        - äº‹ä»¶å§”æ‰˜ï¼Œç»Ÿä¸€ç®¡ç†äº‹ä»¶ç›‘å¬\n\n## 5. å¦‚ä½•æè¿° UI\n\n### 5.1. æ–¹å¼ä¸€ï¼šå£°æ˜å¼æè¿° UI  -  æ¨¡æ¿\n\nä¸»æµå…¶å®éƒ½æ˜¯**æ¨¡æ¿**æ¥æè¿°ï¼Œæ— è®ºæ˜¯ jsx æˆ–è€…æ¨¡æ¿å¼•æ“éƒ½æ˜¯**æ¨¡æ¿**\n\n- JSX ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ¨¡æ¿ï¼Œå…¼é¡¾ä»¥ä¸‹ä¸¤ä¸ªç‰¹æ€§ï¼ˆå…³äº JSXï¼Œæ›´å¤šè§ [9. æ·±å…¥ç†è§£ JSX](/post/dbea03314cf85f43a62d42582fe17492.html)ï¼‰\n\t- å¼ºé€»è¾‘è¡¨è¾¾\n\t- UI æè¿°ä¸°å¯Œæ€§\n- æ¨¡æ¿ï¼Œå³å£°æ˜å¼æè¿° UI  \n\t- ä»£è¡¨ \n\t\t- HTML\n\t\t- php smarty\n\t\t- jsp ç­‰ç­‰\n\t\t- ejs\n\t- ä¸»è¦é—®é¢˜æ˜¯é€»è¾‘è¡¨è¾¾æ€§å¼±äº†äº›\n\nä¸¾ä¾‹ï¼š`å£°æ˜å¼æè¿° UI`\n- æ¯”å¦‚ `<div class='btn' id='test' @click=\"handle\"> button </div>`ï¼Œ åŒ…å«ä¿¡æ¯ tagåï¼Œå±æ€§ï¼Œäº‹ä»¶ï¼Œå±‚çº§å…³ç³»  \n\n### 5.2. æ–¹å¼äºŒï¼šJavaScript å¯¹è±¡  \n\n ä½¿ç”¨ `JavaScriptå¯¹è±¡ ` æ¥æè¿° UIï¼Œå¦‚ä¸‹ä»£ç   \n\n```javascript  \nconst title = {\n    tag: 'h1', // tag åç§°\n    props:{\n\t    // å±æ€§ä¸äº‹ä»¶\n\t    onClick:handler\n\t}\n\tchildren:[\n      // å­èŠ‚ç‚¹\n      {tag: 'span'}\n  ]\n}\n```  \n\n#### 5.2.1. V-DOM\n\n`è™šæ‹Ÿ DOM` æè¿° UIï¼Œæ¯”å¦‚ vue ä¸­çš„ `æ¸²æŸ“å‡½æ•° - h` ï¼Œå¦‚ä¸‹ä»£ç ï¼š  \n\n```javascript  \nimport {h} from \"vue\";\nexport default{\n    render(){\n    \n        // è™šæ‹Ÿ DOM\n        return h('h1',{ onClick: fn }); \n        \n        // æˆ–è€…ç›´æ¥è¿”å› js å¯¹çš„\n        return {\n            tag: 'h1', // tag åç§°\n            props:{ // å±æ€§ä¸äº‹ä»¶\n                onClick:handler\n            }\n            children:[ // å­èŠ‚ç‚¹\n                {tag: 'span'}\n            ]\n        }\n    }\n}\n```  \n\n`h` è¿”å›çš„å…¶å®å°±æ˜¯ `js å¯¹è±¡`ï¼Œ `h å‡½æ•°`å°±æ˜¯è¾…åŠ©åˆ›å»ºè™šæ‹Ÿ DOM çš„å·¥å…·å‡½æ•°è€Œå·²ï¼Œ**æ‰€ä»¥ä»–ä¿©å…¶å®æ˜¯ä¸€ä¸ªä¸œè¥¿**  \n\n### 5.3. ä¸¤ç§æ–¹å¼çš„å¯¹æ¯”\n\n- å“ªç§æ–¹å¼**æ›´çµæ´»**å‘¢ï¼Ÿ  \n  - ç­”æ¡ˆæ˜¯ï¼š`JavaScript å¯¹è±¡`ï¼ˆæˆ–`è™šæ‹Ÿ DOM` ï¼‰ çš„æ–¹å¼ï¼Œ  \n     - æ¯”å¦‚è¡¨ç° `H1-H6` ï¼Œä½¿ç”¨ `tag:H${index}` å³å¯  \n     - åˆæ¯”å¦‚è¯´ï¼Œ`jsx`çš„æ–¹å¼å®ç° `é€’å½’æ ‘`ï¼Œæ›´æ–¹ä¾¿  \n- é‚£ç§æ–¹å¼**æ›´ç›´è§‚**å‘¢ï¼Ÿå½“ç„¶æ˜¯ `æ¨¡æ¿`\n\n## 6. æ•°æ® ä¸ UI \n\nç®€å•è¯´ï¼Œå‰ç«¯æ¡†æ¶éœ€è¦`æ•°æ®é©±åŠ¨ UI æ¸²æŸ“`ï¼Œå³æ•°æ®å˜åŒ–äº†ï¼ŒUI è§†å›¾è·Ÿç€ä¸€èµ·å˜åŒ–\n\n## 7. ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨\n\næŒ‡çš„æ˜¯åœ¨ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œé‚£äº›ä¼šå½±å“åˆ°**ç»„ä»¶ä¹‹å¤–**çš„å…¶ä»–éƒ¨åˆ†çš„æ“ä½œï¼Œæ¯”å¦‚\n\n- å‘èµ·ç½‘ç»œè¯·æ±‚ï¼ˆå¦‚ API è°ƒç”¨ï¼‰\n- ä¿®æ”¹ DOMï¼ˆç›´æ¥æ“ä½œï¼Œè€Œéé€šè¿‡æ¡†æ¶çš„æ¸²æŸ“æœºåˆ¶ï¼‰\n- è®¾ç½®å®šæ—¶å™¨æˆ–é—´éš”å™¨ï¼Œå¦‚Â `setTimeout`Â æˆ–Â `setInterval`\n- è®¢é˜…å¤–éƒ¨äº‹ä»¶\n- ä¿®æ”¹å…¨å±€å˜é‡\n- å†™å…¥æœ¬åœ°å­˜å‚¨ï¼Œå¦‚ä¿®æ”¹Â `localStorage`Â æˆ–Â `sessionStorage`\n- æ—¥å¿—è®°å½•ç­‰\n\næ¯”å¦‚ï¼šè®¿é—®/ä¿®æ”¹ localStorageï¼ˆå‰¯ä½œç”¨ï¼‰\n\n```jsx\n// è¿™ä¸ªç»„ä»¶å°†ç”¨æˆ·åå­˜å‚¨åœ¨æµè§ˆå™¨çš„ localStorage ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªå½±å“å¤–éƒ¨ç¯å¢ƒçš„æ“ä½œã€‚\nfunction RememberMe({ username }) {\n \n useEffect(() => {\n   localStorage.setItem('username', username);\n }, [username]);\n \n return <div>Remembering {username}</div>;\n}\n```\n\nç›¸å¯¹æ¯”çš„ï¼Œ**çº¯å‡½æ•°**æˆ–è€…æ²¡æœ‰å‰¯ä½œç”¨ä»£è¡¨ä¸ä¼šå½±å“åˆ°å®ƒæœ¬èº«ä»¥å¤–çš„ä»»ä½•ä¸œè¥¿ï¼Œæ¯”å¦‚\n\n```jsx\n// è¿™ä¸ªç»„ä»¶åªæ˜¯å•çº¯åœ°æ¸²æŸ“æ–‡æœ¬ï¼Œä¸ä¼šå½±å“å…¶ä»–ä»»ä½•ä¸œè¥¿ã€‚\nfunction Welcome(props) {\n return <h1>Hello, {props.name}</h1>;\n}\n```\n   \nå‰¯ä½œç”¨ä¸æ˜¯ç®€å•çš„æ¸²æŸ“æ“ä½œï¼Œè€Œæ˜¯ä¼šå½±å“ç»„ä»¶å¤–éƒ¨çŠ¶æ€æˆ–ç¯å¢ƒçš„æ“ä½œã€‚\n\n>  åœ¨ç°ä»£å‰ç«¯æ¡†æ¶ä¸­ï¼Œå¦¥å–„ç®¡ç†è¿™äº›`å‰¯ä½œç”¨`æ˜¯ä¿è¯åº”ç”¨ç¨³å®šæ€§å’Œæ€§èƒ½çš„å…³é”®ã€‚\n\n## 8. è¯´è¯´å‰é¢æçš„ Vue çš„ `h å‡½æ•°` ï¼šæ¸²æŸ“å‡½æ•°\n\n`hå‡½æ•°` æ˜¯**ç”¨äºåˆ›å»ºè™šæ‹Ÿ DOM èŠ‚ç‚¹**çš„ä¸€ä¸ªå‡½æ•°ï¼Œé€šå¸¸**åœ¨æ¸²æŸ“å‡½æ•°ä¸­ä½¿ç”¨**ã€‚\n\n`h å‡½æ•°`æœ¬è´¨ä¸Šæ˜¯**ä¸€ä¸ªåˆ›å»ºè™šæ‹Ÿ DOM èŠ‚ç‚¹çš„å·¥å‚å‡½æ•°**ã€‚å®ƒçš„ä½œç”¨å¯ä»¥ç±»æ¯”ä¸º`ç”¨ JavaScript æ¥å†™ HTML`ã€‚\n\nç®€å•æ¥è¯´ï¼š\n\n- ä½œç”¨ï¼šåˆ›å»ºè™šæ‹Ÿ DOM èŠ‚ç‚¹\n- ä½¿ç”¨åœºæ™¯ï¼šå½“ä½ éœ€è¦ç”¨ JavaScript æ¥ç²¾ç¡®æ§åˆ¶æ¸²æŸ“å†…å®¹æ—¶\n- åŸºæœ¬è¯­æ³•ï¼š`h(æ ‡ç­¾æˆ–ç»„ä»¶, å±æ€§å¯¹è±¡, å­èŠ‚ç‚¹)`\n\nä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\n\n```javascript\n// HTML: <div class=\"greeting\">Hello, World!</div>\nh('div', { class: 'greeting' }, 'Hello, World!')\n\n// HTML: <button onClick=\"alert('Hi')\">Click me</button>\nh('button', { onClick: () => alert('Hi') }, 'Click me')\n\n// åµŒå¥—ä½¿ç”¨\nh('div', [\n  h('h1', 'Title'),\n  h('p', 'Paragraph')\n])\n```\n\n### 8.1. ä¸»è¦ç”¨é€”\n\n1. **åˆ›å»ºè™šæ‹Ÿ DOM**:\n\t- `h` å‡½æ•°é€šè¿‡ JavaScript å¯¹è±¡æ¥æè¿° DOM ç»“æ„ï¼Œè¿™å¯¹äºåŠ¨æ€åˆ›å»ºç»„ä»¶ç»“æ„ã€è¿›è¡Œå¤æ‚çš„æ¡ä»¶æ¸²æŸ“ç­‰åœºæ™¯ååˆ†æœ‰ç”¨ã€‚\n2. **æ¸²æŸ“å‡½æ•°ä¸­ä½¿ç”¨**:\n\t- åœ¨éœ€è¦å®Œå…¨æ§åˆ¶æ¸²æŸ“é€»è¾‘æ—¶ï¼Œ`h` å‡½æ•°å¯ä»¥ä¸æ¸²æŸ“å‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼Œä»¥æ„å»ºç»„ä»¶çš„è™šæ‹Ÿ DOM æ ‘ã€‚\n3. **æ”¯æŒ JSX è¯­æ³•**:\n\t- åœ¨ä½¿ç”¨ JSX è¯­æ³•æ—¶ï¼Œ**JSX ä¼šè¢«ç¼–è¯‘æˆ `h` å‡½æ•°è°ƒç”¨**ã€‚\n\n### 8.2. å¸¸è§çš„ `h` å‡½æ•°å‚æ•°\n\n- **ç¬¬ä¸€ä¸ªå‚æ•°**ï¼šæ ‡ç­¾åç§°ã€ç»„ä»¶ç±»å‹æˆ–å¼‚æ­¥ç»„ä»¶ï¼ˆå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–ç»„ä»¶å˜é‡ï¼‰ã€‚\n- **ç¬¬äºŒä¸ªå‚æ•°**ï¼ˆå¯é€‰ï¼‰ï¼šä¸€ä¸ªæ•°æ®å¯¹è±¡ï¼ŒåŒ…æ‹¬å±æ€§ã€classã€äº‹ä»¶ç­‰ã€‚\n- **ç¬¬ä¸‰ä¸ªå‚æ•°**ï¼ˆå¯é€‰ï¼‰ï¼šå­èŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•°ç»„æˆ–æ›´å¤š `h` å‡½æ•°è°ƒç”¨ã€‚\n\n### 8.3. ç¤ºä¾‹\n\n```javascript\nimport { h } from 'vue';\n\nexport default {\n  render() {\n    return h('div', { class: 'container' }, [\n      h('h1', 'Hello World'),\n      h('p', 'This is a paragraph.'),\n      h(MyButton, { onClick: this.handleClick }, 'Click Me')\n    ]);\n  },\n  methods: {\n    handleClick() {\n      alert('Button clicked!');\n    }\n  }\n}\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`h` å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ª `div` åŒ…å«ä¸€ä¸ªæ ‡é¢˜ã€ä¸€ä¸ªæ®µè½å’Œä¸€ä¸ªè‡ªå®šä¹‰æŒ‰é’®ç»„ä»¶ã€‚è¿™ç§æ–¹å¼æä¾›äº†éå¸¸çµæ´»çš„ç•Œé¢æ¸²æŸ“èƒ½åŠ›ï¼Œå¯ä»¥åœ¨ä¸ä¾èµ–æ¨¡æ¿çš„æƒ…å†µä¸‹ï¼Œç›´æ¥ä½¿ç”¨ JavaScript è¡¨è¾¾ä¸šåŠ¡é€»è¾‘ã€‚\n\n## 9. èŠèŠå‰ç«¯æ¡†æ¶ä¸­çš„ä¸€äº›ç¼–è¯‘æŠ€æœ¯æˆ–ç¼–è¯‘ç­–ç•¥\n\nä»£ç ç¼–è¯‘æŠ€æœ¯æˆ–è€…ç­–ç•¥ï¼Œå¯¹**åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œå¼€å‘ä½“éªŒ**æœ‰é‡è¦å½±å“ï¼Œè¿˜ç›´æ¥å½±å“å¼€å‘æ•ˆç‡å’Œè°ƒè¯•èƒ½åŠ›ã€‚é€‰æ‹©åˆé€‚çš„ç¼–è¯‘ç­–ç•¥é€šå¸¸éœ€è¦æƒè¡¡å¼€å‘ä½“éªŒã€åº”ç”¨æ€§èƒ½å’Œéƒ¨ç½²ç¯å¢ƒç­‰å¤šä¸ªå› ç´ ã€‚\n\n### 9.1. JITï¼ˆJust-in-Timeï¼‰ç¼–è¯‘ï¼šå³æ—¶ç¼–è¯‘ã€è¿è¡Œæ—¶ç¼–è¯‘\n\n**JIT ç¼–è¯‘**æ˜¯åœ¨**è¿è¡Œæ—¶**è¿›è¡Œçš„ç¼–è¯‘ã€‚ä»£ç åœ¨æ‰§è¡Œæ—¶è¢«åŠ¨æ€ç¼–è¯‘ä¸ºæœºå™¨ç ã€‚\n\nç‰¹ç‚¹ï¼š\n- çµæ´»æ€§é«˜ï¼šå¯ä»¥æ ¹æ®è¿è¡Œæ—¶çš„æƒ…å†µè¿›è¡Œä¼˜åŒ–ã€‚\n- å¯åŠ¨æ—¶é—´è¾ƒé•¿ï¼šå› ä¸ºéœ€è¦åœ¨è¿è¡Œæ—¶ç¼–è¯‘ã€‚\n- å†…å­˜å ç”¨è¾ƒå¤§ï¼šéœ€è¦ä¿å­˜åŸå§‹ä»£ç å’Œç¼–è¯‘åçš„ä»£ç ã€‚\n\nåº”ç”¨ï¼š\n- åœ¨æµè§ˆå™¨ä¸­å¹¿æ³›ä½¿ç”¨ï¼Œå¦‚ V8 å¼•æ“ï¼ˆChromeï¼‰ã€‚\n- Angular çš„**å¼€å‘æ—¶æ¨¡å¼**é»˜è®¤ä½¿ç”¨ JITã€‚\n\nä¼˜åŠ¿ï¼š\n- å¼€å‘è¿‡ç¨‹ä¸­æ›´å¿«çš„æ„å»ºæ—¶é—´ã€‚\n- æ˜“äºè°ƒè¯•ï¼Œå› ä¸ºæºä»£ç å’Œè¿è¡Œä»£ç ä¹‹é—´æœ‰ç›´æ¥å¯¹åº”å…³ç³»ã€‚\n\n### 9.2. AOTï¼ˆAhead-of-Timeï¼‰ï¼šé¢„ç¼–è¯‘\n\n**AOT ç¼–è¯‘**æ˜¯åœ¨**æ„å»ºé˜¶æ®µ**å°±å°†ä»£ç ç¼–è¯‘ä¸ºæœºå™¨ç æˆ–æ›´ä½çº§çš„ä»£ç ã€‚\n\nç‰¹ç‚¹ï¼š\n- æ›´å¿«çš„å¯åŠ¨æ—¶é—´ï¼šå› ä¸ºä»£ç å·²ç»é¢„å…ˆç¼–è¯‘ã€‚\n- æ›´å°çš„åŒ…ä½“ç§¯ï¼šä¸éœ€è¦åŒ…å«ç¼–è¯‘å™¨ã€‚\n- æ›´å¥½çš„å®‰å…¨æ€§ï¼šæºä»£ç ä¸æš´éœ²åœ¨å®¢æˆ·ç«¯ã€‚\n\nåº”ç”¨ï¼š\n- **Angular ç”Ÿäº§æ¨¡å¼**é»˜è®¤ä½¿ç”¨ AOTã€‚\n- React çš„ `Prepack` æ˜¯ä¸€ç§ AOT ä¼˜åŒ–å·¥å…·ã€‚\n\nä¼˜åŠ¿ï¼š\n- æ›´å¿«çš„é¦–æ¬¡åŠ è½½å’Œæ¸²æŸ“é€Ÿåº¦ã€‚\n- åœ¨æ„å»ºæ—¶å°±èƒ½å‘ç°æŸäº›ç±»å‹çš„é”™è¯¯ã€‚\n\n### 9.3. å¢é‡ç¼–è¯‘ï¼ˆIncremental Compilationï¼‰\n\nåªé‡æ–°ç¼–è¯‘**å‘ç”Ÿå˜åŒ–çš„éƒ¨åˆ†ï¼ˆå¢é‡éƒ¨åˆ†ï¼‰**ï¼Œè€Œä¸æ˜¯æ•´ä¸ªåº”ç”¨ã€‚\n\nç‰¹ç‚¹ï¼š\n- åŠ å¿«å¼€å‘ä¸­çš„ç¼–è¯‘é€Ÿåº¦ã€‚\n- åœ¨å¤§å‹é¡¹ç›®ä¸­ç‰¹åˆ«æœ‰æ•ˆã€‚\n\nåº”ç”¨ï¼š\n- TypeScript å’Œè®¸å¤šç°ä»£æ„å»ºå·¥å…·æ”¯æŒå¢é‡ç¼–è¯‘ã€‚\n\n### 9.4. æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰\n\n- ä¸æ˜¯çš„ç¼–è¯‘æŠ€æœ¯ï¼Œæ˜¯ä¸€ç§ç¼–è¯‘ç­–ç•¥\n- å®šä¹‰\n\t- æŒ‰éœ€åŠ è½½ä»£ç å—ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§åŠ è½½æ•´ä¸ªåº”ç”¨\n- ç‰¹ç‚¹ï¼š\n\t- æ”¹å–„åˆå§‹åŠ è½½æ—¶é—´ã€‚\n\t- å‡å°‘ä¸å¿…è¦çš„ç½‘ç»œä¼ è¾“ã€‚\n- åº”ç”¨ï¼š\n\t- Angularã€React Router ç­‰éƒ½æ”¯æŒè·¯ç”±çº§åˆ«çš„æ‡’åŠ è½½\n\n### 9.5. Tree Shaking\n\n- å®šä¹‰ï¼šç§»é™¤æœªä½¿ç”¨çš„ä»£ç ï¼ˆæ­»ä»£ç æ¶ˆé™¤ï¼‰ã€‚\n- ç‰¹ç‚¹ï¼š\n\t- å‡å°æœ€ç»ˆçš„åŒ…å¤§å°ã€‚\n\t- é€šå¸¸ä¸ ES6 æ¨¡å—å’Œ AOT ç¼–è¯‘ç»“åˆä½¿ç”¨ã€‚\n- åº”ç”¨ï¼š\n\t- Webpackã€Rollup ç­‰æ„å»ºå·¥å…·æ”¯æŒ Tree Shakingã€‚\n\n### 9.6. æºç æ˜ å°„ï¼ˆSource Mappingï¼‰\n\n- å®šä¹‰ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å°†å‹ç¼©å’Œè½¬æ¢åçš„ä»£ç æ˜ å°„å›åŸå§‹æºä»£ç ã€‚\n- ç‰¹ç‚¹ï¼š\n\t- ä¾¿äºåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿›è¡Œè°ƒè¯•ã€‚\n\t- é€šå¸¸ä¸ AOT ç¼–è¯‘ç»“åˆä½¿ç”¨ã€‚\n\n### 9.7. é€‰æ‹©\n\n- **å¼€å‘æœŸé—´**ï¼Œå¿«é€Ÿè¿­ä»£å’Œè°ƒè¯•éœ€æ±‚å¾€å¾€è®© `JIT` æ›´å—é’çã€‚\n- **ç”Ÿäº§ç¯å¢ƒ**ï¼Œå¯åŠ¨æ€§èƒ½å’Œå®‰å…¨æ€§é€šå¸¸ä½¿ `ï¼ˆAOTï¼ˆAhead-of-Timeï¼‰` æˆä¸ºæ›´å¥½çš„é€‰æ‹©\n\n","f3b55818e1db563b98470a98f2860b08":"\n# å‰ç«¯æ¡†æ¶è®¾è®¡é‡Œçš„\"æƒè¡¡\" ä¸\"é€‰æ‹©\"\n\n\n`#vue` `#å‰ç«¯æ¶æ„` Â `#2023/03/17`  `#å‰ç«¯/å‰ç«¯æ¡†æ¶`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‘½ä»¤å¼æ¡†æ¶ä¸å£°æ˜å¼æ¡†æ¶   \n  \n- `Jquery` å°±æ˜¯å…¸å‹çš„ **å‘½ä»¤å¼æ¡†æ¶**ï¼Œå…³æ³¨`è¿‡ç¨‹`  \n- Vue æš´éœ²ç»™ç”¨æˆ·ä½¿ç”¨çš„æ˜¯ `å£°æ˜å¼` ï¼Œä½†åº•å±‚å†…éƒ¨å®ç°è‚¯å®šä¹Ÿæ˜¯ `å‘½ä»¤å¼` ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼šé¢å‘ç”¨æˆ·çš„æ˜¯å£°æ˜å¼çš„  \n  \n```vue  \n<template>  \n  <div @click=\"hello()\"></div>  \n</template>  \n```  \n  \nä½†é—®é¢˜æ˜¯ï¼Œ**å£°æ˜å¼çš„ä»£ç æ€§èƒ½**`ä¸ä¼šé«˜äº` `å‘½ä»¤å¼ä»£ç çš„æ€§èƒ½` ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ª`é€‰æ‹©` æˆ–è€… `æƒè¡¡`\n\n## 2. æ€§èƒ½ ä¸ ç»´æŠ¤æ€§ çš„å¹³è¡¡  \n  \n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240810211402.png)\n## 3. è¿è¡Œæ—¶ ä¸ ç¼–è¯‘æ—¶  \n\n### 3.1. çº¯è¿è¡Œæ—¶ï¼Œå³ç›´æ¥`Render`å³å¯  \n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240810211504.png)\n\n### 3.2. è¿è¡Œæ—¶ + ç¼–è¯‘æ—¶  \n  \nå¦‚ä¸‹å›¾ï¼Œå¸¸ç”¨çš„ Vue/Angular/React éƒ½å±äºè¿™ç±»æ¡†æ¶ \n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240810211529.png)\n\n### 3.3. çº¯ç¼–è¯‘æ—¶æ¡†æ¶ï¼Œä»£è¡¨`Svelte`  \n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240810211619.png)\n\n## 4. åŸç”Ÿ JS æ“ä½œ DOMã€InnerHTML ä¸ è™šæ‹Ÿ DOM å¿«æ…¢å¯¹æ¯”  \n  \nå¯ä»ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢æ¥åº¦é‡  \n  \n- ç†è§£æˆæœ¬ä¸Šï¼Œ**åŸç”Ÿ JS æ“ä½œ DOM > InnerHTML > è™šæ‹Ÿ DOM**  \n- ç»´æŠ¤æ€§ä¸Šï¼Œ**åŸç”Ÿ JS æ“ä½œ DOM ã€ InnerHTML < è™šæ‹Ÿ DOM**  \n- æ€§èƒ½ä¸Šï¼Œå–å†³äº`é¡µé¢å¤§å°`ï¼Œ`é¡µé¢å˜æ›´å¤§å°ï¼Œ`æ˜¯`æ–°å»ºé¡µé¢` è¿˜æ˜¯`æ›´æ–°é¡µ`é¢ ç”šè‡³æ˜¯`æ›´æ–°ç­–ç•¥`ç­‰ï¼Œéƒ½æœ‰å…³ç³»ï¼Œä¸åŒåœºæ™¯ä¸‹æœ‰ä¸åŒç»“è®ºã€‚  \n\n## 5. æœ€å  \n  \næ— è®ºæ˜¯`å‘½ä»¤å¼`è¿˜`æ˜¯å£°æ˜å¼`ï¼Œæˆ–è€…æ¡†æ¶éœ€è¦è®¾è®¡æˆ`è¿è¡Œæ—¶`ã€`ç¼–è¯‘æ—¶`æˆ–`è¿è¡Œæ—¶+ç¼–è¯‘æ—¶`ï¼Œéƒ½éœ€è¦ç»“åˆ `æ€§èƒ½`ã€`ç†è§£æˆæœ¬`ã€`ç»´æŠ¤æ€§`ä¸Šåšæƒè¡¡é€‰æ‹©ã€‚  \n\n## 6. å‚è€ƒ\n\n- ã€ŠVue.js è®¾è®¡ä¸å®ç°ã€‹\n","789ffd93147b5a1c842412b88146e171":"\n# å‰ç«¯æ¡†æ¶è®¾è®¡æ—¶éœ€è¦è€ƒè™‘çš„ç‚¹\n\n`#å‰ç«¯` `#å‰ç«¯æ¡†æ¶` Â `#vue`\n\nå¯¹äºå¼€å‘ä¸€ä¸ªå‰ç«¯æ¡†æ¶æ¥è¯´ï¼Œæœ‰å“ªäº›`æ ¸å¿ƒè¦ç´ `å‘¢ï¼Ÿ å¦‚ä¸‹ï¼š\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å¼€å‘ä½“éªŒ \n\n- **æŠ¥é”™è­¦å‘Šæç¤ºï¼Œæ˜¯å¦èƒ½å¤Ÿè®©å¼€å‘è€…ç«‹é©¬å®šä½åˆ°é—®é¢˜**\n\t- æ¯”å¦‚ å¦‚ä½•æç¤º `App.mount('#app')` ä¸­ `#app` èŠ‚ç‚¹ ä¸å­˜åœ¨\n- **å¼€å‘è°ƒè¯•æ˜¯å¦ç›´è§‚ï¼Ÿ**\n\t- æ¯”å¦‚`const obj = ref()` ï¼Œæ¯æ¬¡éƒ½æ˜¯æ‰“å° `obj`çš„å€¼éƒ½éœ€è¦ `obj.value` ? Â \n\t\t- æ¡†æ¶å±‚é¢è‚¯å®šéœ€è¦æä¾›å¥½çš„ log æ–¹å¼\n\t\t\t- `DevTools` æä¾› `custom formmaters` \n\t\t\t- æ¡†æ¶å±‚é¢ä¼šæä¾› `initCustomFormatter` çš„å®šä¹‰\n\n## 2. æ§åˆ¶æ¡†æ¶ä»£ç ä½“ç§¯\n\nå¦‚ä½•åšåˆ°å¼€å‘ç¯å¢ƒä¸‹æ›´å¤šæç¤ºï¼Œè€Œä¸å¢åŠ ä»£ç ä½“ç§¯å‘¢ï¼Ÿ\n- éœ€è¦ä½¿ç”¨ `roolup æ’ä»¶` æˆ–è€… `webpack æ’ä»¶` çš„ `__DEV__å¸¸é‡` Â æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œç”Ÿæˆç¯å¢ƒä¸‹å½¢æˆ Â `dead code` , åœ¨ä½¿ç”¨æ‰“åŒ…å·¥å…· `tree-shaking` çš„èƒ½åŠ›ï¼Œè¿›è¡Œç§»é™¤\n\n> [!info]\n`dead code` å³ æ°¸è¿œä¸ä¼šæ‰§è¡Œçš„ä»£ç ï¼Œå¦‚ `if(true)` æˆ–è€… `import åæ²¡ä½¿ç”¨çš„æ¨¡å—`ç­‰\n\n## 3. è‰¯å¥½çš„ `tree-shaking` æœºåˆ¶\n\n- ä¸Šé¢è¯´çš„`dead code` å¾ˆå®¹æ˜“è¢« `tree-shaking`æ‰ï¼Œä½†æ˜¯`å‰¯ä½œç”¨` å‘¢ï¼Œå› ä¸º `proxy` èƒ½åŠ›`åªè¯»æ¯ä¸ªå±æ€§`ä¹Ÿå¯èƒ½å¼•èµ·`å‰¯ä½œç”¨`ã€‚\n\t- ç­”æ¡ˆæ˜¯ï¼š`/*#__PURE__*/` Â  \n\t\t- `rollup` å’Œ `webpack` ã€`terser` éƒ½å¯ä»¥è¯†åˆ«å®ƒ ï¼Œå®ƒå‘Šè¯‰æ‰“åŒ…å·¥å…·ï¼Œ`æ”¾å¿ƒ tree-shaking æ‰å§`\n\n## 4. å¤šç§ç¯å¢ƒä¸‹çš„æ„å»ºäº§ç‰©ä¸ä¸€æ ·\n\næ¯”å¦‚ï¼š\n- `rollup` ä¸‹ï¼Œè®¾ç½® `format` ä¸º `iife` ç»™ `script` æ ‡ç­¾ç›´æ¥ä½¿ç”¨\n- `rollup` ä¸‹ï¼Œè®¾ç½® `format` ä¸º `esm` ç»™ `<script type=\"module\">` ç›´æ¥ä½¿ç”¨\n- `rollup` ä¸‹ï¼Œè®¾ç½® `format` ä¸º `cjs` ç»™ nodejs ç¯å¢ƒä½¿ç”¨ ï¼Œä¸ºäº† SSR\n\nå¦å¤–ï¼Œå¦‚ä½•æ‰“åŒ…ç»™ `rollup` æˆ–è€… `webpack` å·¥å…·ä½¿ç”¨å‘¢ï¼Ÿ\n- ç­”æ¡ˆæ˜¯ `esm` , ä½†åˆå¦‚ä½• ä¸ Â  `<script type=\"module\">` åŒºåˆ«å‘¢ï¼Ÿ\n-  çœ‹ package.json Â , å¦‚ä¸‹ `ä»£ç ` å’Œ `å›¾ç‰‡`\n\n```json\n{\n\t\"main\":\"index.js\",\n\t\"module\":\"dist/vue.runtime.esm-bundler.js\",\n}\n```\n\n![](https://od-1310531898.cos.ap-beijing.myqcloud.com/202303191018366.png)\n\n## 5. æ”¯æŒç‰¹æ€§å¼€å…³\n\n  æ¯”å¦‚ vue3 çš„ `ç»„åˆå¼ API` å’Œ `é€‰é¡¹å¼ API`ï¼Œ å¦‚æœç”¨æˆ·ç¡®å®šåªéœ€è¦ä½¿ç”¨ `ç»„åˆå¼ API` ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡è®¾ç½® `__VUE_OPTIONS_API__` é¢„å®šäºå¸¸é‡æ¥å¼€å¯æˆ–è€…å…³é—­.\n\n## 6. é”™è¯¯å¤„ç†æœºåˆ¶\n\næ¯”å¦‚ä¸€ä¸ªå·¥å…·åº“æä¾›ä¸€ä¸ª `fetch` æ–¹æ³• ï¼Œä½†ä½¿ç”¨çš„æ–¹å¼å¿…é¡»ä¼ å…¥å›è°ƒ `fetch(callback)`ï¼Œæ€ä¹ˆå®¹é”™å‘¢ï¼Ÿä¸‰ç§\n1. ç”¨æˆ·è‡ªå·± `try catch`ï¼Œä½†æ˜¯å¦‚æœæœ‰å¾ˆå¤šæ–¹æ³•ï¼Œéœ€è¦æ¯ä¸ªéƒ½ `try catch` å—\n2. ç”¨æˆ·è‡ªå·±å®ç°ä¸€ä¸ª `handleError` æ–¹æ³•\n3. å·¥å…·åº“æä¸€ä¸ª `utils.registerErrorHandler` é™æ€æ–¹æ³•, ç”¨æˆ·ä½¿ç”¨å®ƒæ³¨å†Œé”™è¯¯å¤„ç†ç¨‹åºã€‚\n\t- ç¬¬ 3 ç§ï¼Œå°±æ˜¯ Vue çš„å¤„ç†æ–¹å¼ï¼Œ`app.config.errorHandler` Â , ä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„æ¡†æ¶å±‚é¢çš„å¥å£®æ€§ã€‚\n\n## 7. Typescript æ”¯æŒ\n\nå®Œå–„ Typescript æ”¯æŒï¼Œå¯èƒ½æ¯”æ¡†æ¶æœ¬èº«è¿˜è¦èŠ±ç²¾åŠ›å’Œæ—¶é—´\n\n## 8. å‚è€ƒ\n\n- ã€ŠVue.js è®¾è®¡ä¸å®ç°ã€‹","734e2db787dc5859895127dcf14a4360":"\n# å¦‚ä½•ç†è§£å…ƒæ¡†æ¶ï¼ˆMeta Frameworkï¼‰\n\n`#å‰ç«¯æ¡†æ¶` \n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä»€ä¹ˆæ˜¯å…ƒæ¡†æ¶ \n\nå…ƒæ¡†æ¶æ˜¯å»ºç«‹åœ¨`åŸºç¡€æ¡†æ¶`ä¹‹ä¸Šçš„æ›´é«˜çº§åˆ«æ¡†æ¶ï¼Œæä¾›äº†ä¸€å¥—å®Œæ•´çš„å¼€å‘è§£å†³æ–¹æ¡ˆã€‚ä¸»è¦ç‰¹ç‚¹ï¼š\n\n- åŸºäºç°æœ‰æ¡†æ¶æ‰©å±•ï¼ˆå¦‚Reactã€Vueï¼‰\n- æä¾›æ›´å®Œæ•´çš„é¡¹ç›®æ¶æ„\n- å†…ç½®å¤šç§æ¸²æŸ“æ¨¡å¼\n\t- æœåŠ¡å™¨ç«¯æ¸²æŸ“ (SSR)\n\t- é™æ€ç«™ç‚¹ç”Ÿæˆ (SSG)\n\t- å®¢æˆ·ç«¯æ¸²æŸ“ (CSR)\n\t- å¢é‡é™æ€å†ç”Ÿæˆ (ISR)\n- æä¾›æ›´å¤šå¼€ç®±å³ç”¨çš„åŠŸèƒ½\n\t- æ–‡ä»¶ç³»ç»Ÿè·¯ç”±\n\t- APIè·¯ç”±å¤„ç†\n\t- è‡ªåŠ¨ä»£ç åˆ†å‰²\n\t- å›¾ç‰‡ä¼˜åŒ–\n\t- å¼€å‘ç¯å¢ƒä¼˜åŒ–\n\t- SEOæ”¯æŒ\n\n## 2. ä¸»æµå…ƒæ¡†æ¶ä¸¾ä¾‹\n\n### 2.1. å›½å†…ï¼š2.1. Umiï¼ˆReact/Vueï¼‰ \n\n### 2.2. å›½å†…ï¼šModern.js\n\n### 2.3. Next.jsï¼ˆåŸºäºReactï¼‰\n\n- ç”± Vercel å¼€å‘ç»´æŠ¤\n- æ”¯æŒ SSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ï¼‰\n- æ”¯æŒ SSGï¼ˆé™æ€ç«™ç‚¹ç”Ÿæˆï¼‰\n- è‡ªåŠ¨ä»£ç åˆ†å‰²\n- æ–‡ä»¶ç³»ç»Ÿè·¯ç”±\n- APIè·¯ç”±åŠŸèƒ½\n- å†…ç½®å›¾ç‰‡ä¼˜åŒ–\n\n### 2.4. Nuxt.jsï¼ˆåŸºäºVueï¼‰\n\n- Vue.jsçš„é€šç”¨æ¡†æ¶\n- è‡ªåŠ¨è·¯ç”±é…ç½®\n- æ”¯æŒ  SSRå’ŒSSG\n- æ¨¡å—åŒ–æ¶æ„\n- SEO ä¼˜åŒ–\n- é™æ€ç«™ç‚¹ç”Ÿæˆ\n- æœåŠ¡ç«¯ä¸­é—´ä»¶\n\n### 2.5. Remixï¼ˆåŸºäºReactï¼‰\n\n- `å…¨æ ˆ Web` æ¡†æ¶\n- åµŒå¥—è·¯ç”±\n- æ•°æ®åŠ è½½\n- é”™è¯¯å¤„ç†\n- æœåŠ¡ç«¯æ¸²æŸ“\n- ä¼˜ç§€çš„ç¼“å­˜ç­–ç•¥\n\n### 2.6. Astro (æ”¯æŒå¤šæ¡†æ¶)\n\n- Astro æ˜¯ä¸€ä¸ªéå¸¸ç°ä»£åŒ–çš„`é™æ€ç«™ç‚¹ç”Ÿæˆå™¨`ï¼Œç‰¹åˆ«é€‚åˆæ„å»ºä»¥å†…å®¹ä¸ºä¸­å¿ƒçš„ç½‘ç«™ã€‚\n- å®ƒçš„é›¶JavaScripté»˜è®¤ç­–ç•¥å’Œéƒ¨åˆ†æ°´åˆç‰¹æ€§ä½¿å¾—å®ƒåœ¨æ€§èƒ½æ–¹é¢è¡¨ç°å‡ºè‰²ã€‚\n- åŒæ—¶ï¼Œå®ƒæ”¯æŒå¤šæ¡†æ¶ç»„ä»¶çš„ä½¿ç”¨ï¼Œè¿™ä½¿å¾—å›¢é˜Ÿå¯ä»¥å……åˆ†åˆ©ç”¨ç°æœ‰çš„æŠ€æœ¯æ ˆå’Œç»„ä»¶åº“ã€‚å¯¹äºéœ€è¦æ„å»ºå¿«é€Ÿã€è½»é‡çº§ç½‘ç«™çš„å¼€å‘è€…æ¥è¯´ï¼ŒAstro æ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—è€ƒè™‘çš„é€‰æ‹©ã€‚\n\n### 2.7. SvelteKit (åŸºäºSvelte)\n\n- å®˜æ–¹å…¨æ ˆæ¡†æ¶\n- æ–‡ä»¶ç³»ç»Ÿè·¯ç”±\n- SSR/SSG æ”¯æŒ\n- API è·¯ç”±\n- é€‚é…å™¨ç³»ç»Ÿ\n\n## 3. ä¸ºä»€ä¹ˆå…ƒæ¡†æ¶ä¼šå…´èµ·\n\n### 3.1. æŠ€æœ¯éœ€æ±‚\n\n- ç°ä»£Webåº”ç”¨æ›´å¤æ‚\n- SEOè¦æ±‚æé«˜\n- æ€§èƒ½ä¼˜åŒ–éœ€æ±‚å¢åŠ \n- å¼€å‘æ•ˆç‡è¦æ±‚æå‡\n\n### 3.2. å…¨æ ˆèƒ½åŠ›\n\n- æœåŠ¡ç«¯APIé›†æˆ\n- æ•°æ®åº“è¿æ¥\n- èº«ä»½è®¤è¯\n- éƒ¨ç½²é›†æˆ\n\n### 3.3. è§£å†³çš„é—®é¢˜\n\n- æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰é…ç½®å¤æ‚\n- è·¯ç”±ç®¡ç†ç¹ç\n- æ„å»ºä¼˜åŒ–å›°éš¾\n- éƒ¨ç½²æµç¨‹å¤æ‚\n\n## 4. å…ƒæ¡†æ¶çš„æ ¸å¿ƒä¼˜åŠ¿\n\n> æœ€ä½³å®è·µé›†åˆä¸å·¥ç¨‹ä½“ç°\n\n### 4.1. å¼€å‘ä½“éªŒ\n\n- çº¦å®šå¤§äºé…ç½®\n- è‡ªåŠ¨åŒ–çš„å·¥å…·é“¾\n- ç»Ÿä¸€çš„é¡¹ç›®ç»“æ„\n- æ¸…æ™°çš„æœ€ä½³å®è·µ\n\n### 4.2. æ€§èƒ½ä¼˜åŒ–\n\n- è‡ªåŠ¨ä»£ç åˆ†å‰²\n- æ™ºèƒ½é¢„åŠ è½½\n- å›¾ç‰‡è‡ªåŠ¨ä¼˜åŒ–\n- é™æ€èµ„æºå¤„ç†\n\n### 4.3. éƒ¨ç½²ä¾¿åˆ©\n\n- é™æ€å¯¼å‡º\n- æœåŠ¡ç«¯éƒ¨ç½²\n- CDNé›†æˆ\n- è‡ªåŠ¨åŒ–éƒ¨ç½²\n- è¾¹ç¼˜è®¡ç®—æ”¯æŒ\n\n## 5. é€‰æ‹©å»ºè®®\n\næ ¹æ®é¡¹ç›®éœ€æ±‚ï¼š\n\n- éœ€è¦SSR/SSG â†’ Next.js/Nuxt.js\n- å…¨æ ˆåº”ç”¨ â†’ Remix\n- é™æ€ç½‘ç«™ â†’ Astro\n- æ–‡æ¡£ç«™ç‚¹ â†’ VitePress/Docusaurus\n\næ ¹æ®æŠ€æœ¯æ ˆï¼š\n- Reactç”Ÿæ€ â†’ Next.js/Remix\n- Vueç”Ÿæ€ â†’ Nuxt.js\n- æ€§èƒ½ä¼˜å…ˆ â†’ Astro\n\n","631b94eb60125b71b439c0a06a43d836":"\n# èŠèŠå‰ç«¯æ¡†æ¶ä¸ AI å¤§æ¨¡å‹çš„é›†æˆ\n\n\n`#ai` `#å‰ç«¯æ¡†æ¶` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å¼€å‘é˜¶æ®µé›†æˆ \n\n### 1.1. ä»£ç æ™ºèƒ½è¡¥å…¨ä¸ç”Ÿæˆ\n\n```typescript\n// GitHub Copilot é›†æˆç¤ºä¾‹\nfunction calculateTotal(items: CartItem[]) {\n  // Copilot ä¼šæ ¹æ®ä¸Šä¸‹æ–‡æä¾›æ™ºèƒ½è¡¥å…¨\n  return items.reduce((total, item) => {\n    return total + item.price * item.quantity;\n  }, 0);\n}\n\n// TypeChat ç±»å‹æ¨å¯¼ç¤ºä¾‹\ninterface CartItem {\n  name: string;\n  price: number;\n  quantity: number;\n}\n\n// AI ä¼šç†è§£å¹¶ç”Ÿæˆç¬¦åˆç±»å‹çš„ä»£ç \nconst processOrder = (items: CartItem[]) => {\n  // AI ç”Ÿæˆçš„ä»£ç ä¼šç¬¦åˆç±»å‹å®šä¹‰\n}\n```\n\n### 1.2. ç»„ä»¶ç”Ÿæˆ\n\n```typescript\n// AI è¾…åŠ©ç”Ÿæˆç»„ä»¶\ninterface ProductCard {\n  title: string;\n  price: number;\n  image: string;\n  rating: number;\n}\n\n// AI å¯ä»¥æ ¹æ®æ¥å£å®šä¹‰ç”Ÿæˆå®Œæ•´çš„ç»„ä»¶\nconst ProductCard = ({ title, price, image, rating }: ProductCard) => {\n  return (\n    <div className=\"product-card\">\n      <img src={image} alt={title} />\n      <h3>{title}</h3>\n      <div className=\"price\">${price}</div>\n      <div className=\"rating\">{rating} stars</div>\n    </div>\n  );\n}\n````\n\n## 2. è¿è¡Œæ—¶ AI é›†æˆ\n\n- 1. AI é©±åŠ¨çš„æœç´¢å’Œè¿‡æ»¤\n\t- ä½¿ç”¨ AI è¿›è¡Œ`è¯­ä¹‰`æœç´¢\n\t- ä½¿ç”¨ AI è¿›è¡Œ`è¯­éŸ³`æœç´¢\n- 2. æ™ºèƒ½è¡¨å•éªŒè¯\n\n```typescript hl:1,26\n// 1. AI é©±åŠ¨çš„æœç´¢å’Œè¿‡æ»¤\nconst SearchComponent = () => {\n  const [query, setQuery] = useState('');\n  \n  const searchProducts = async (query: string) => {\n    // ä½¿ç”¨ AI è¿›è¡Œè¯­ä¹‰æœç´¢\n    const response = await fetch('/api/ai-search', {\n      method: 'POST',\n      body: JSON.stringify({ query })\n    });\n    return response.json();\n  };\n  \n  return (\n    <div>\n      <input \n        value={query}\n        onChange={(e) => setQuery(e.target.value)}\n        placeholder=\"ä½¿ç”¨è‡ªç„¶è¯­è¨€æœç´¢...\"\n      />\n      <SearchResults query={query} />\n    </div>\n  );\n};\n\n// 2. æ™ºèƒ½è¡¨å•éªŒè¯\nconst AIFormValidation = () => {\n  const validateWithAI = async (formData: FormData) => {\n    const response = await fetch('/api/validate', {\n      method: 'POST',\n      body: formData\n    });\n    return response.json();\n  };\n  \n  return (\n    <form onSubmit={handleSubmit}>\n      {/* è¡¨å•å­—æ®µ */}\n    </form>\n  );\n};\n```\n\n## 3. å®é™…åº”ç”¨åœºæ™¯\n\n### 3.1. å¼€å‘è¾…åŠ©\n\n```typescript hl:1,10\n// 1. ä»£ç é‡æ„å»ºè®®\n// AI å¯ä»¥åˆ†æä»£ç å¹¶æä¾›é‡æ„å»ºè®®\nconst refactorSuggestions = await aiService.analyzeCode(`\n  // åŸä»£ç \n  function handleUserData(data) {\n    // å¤æ‚çš„æ•°æ®å¤„ç†é€»è¾‘\n  }\n`);\n\n// 2. æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ\n// AI è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹\nconst generateTests = async (componentCode: string) => {\n  const tests = await aiService.generateTests(componentCode);\n  return tests;\n};\n```\n\n### 3.2. ç”¨æˆ·ä½“éªŒå¢å¼º\n\n```typescript hl:1,18\n// 1. æ™ºèƒ½å®¢æœé›†æˆ\nconst AICustomerService = () => {\n  const [messages, setMessages] = useState([]);\n  \n  const handleUserMessage = async (message: string) => {\n    // è°ƒç”¨ AI æœåŠ¡å¤„ç†ç”¨æˆ·æ¶ˆæ¯\n    const response = await aiService.processMessage(message);\n    setMessages(prev => [...prev, response]);\n  };\n  \n  return (\n    <div className=\"chat-interface\">\n      {/* èŠå¤©ç•Œé¢ */}\n    </div>\n  );\n};\n\n// 2. å†…å®¹ä¸ªæ€§åŒ–\nconst PersonalizedContent = () => {\n  const userPreferences = useUserPreferences();\n  \n  const getPersonalizedContent = async () => {\n    const content = await aiService.getPersonalizedContent(userPreferences);\n    return content;\n  };\n};\n```\n\n## 4. æˆç†Ÿæ¡ˆä¾‹åˆ†æï¼šAI é›†æˆæ¡ˆä¾‹\n### 4.1. GitHub Copilot X\n\n- é›†æˆæ–¹å¼ï¼šIDE æ’ä»¶\n- åŠŸèƒ½ç‰¹ç‚¹ï¼š\n\t- å®æ—¶ä»£ç è¡¥å…¨\n\t- æ–‡æ¡£ç”Ÿæˆ\n\t- ä»£ç è§£é‡Š\n\t- æµ‹è¯•ç”Ÿæˆ\n- åº”ç”¨åœºæ™¯ï¼š\n\t- æ—¥å¸¸å¼€å‘\n\t- ä»£ç å®¡æŸ¥\n\t- æ–‡æ¡£ç¼–å†™\n\n### 4.2. Vercel AI SDK\n\n- é›†æˆæ–¹å¼ï¼šæ¡†æ¶çº§åˆ«\n- åŠŸèƒ½ç‰¹ç‚¹ï¼š\n\t- æµå¼å“åº”\n\t- AI ç»„ä»¶\n\t- æç¤ºå·¥ç¨‹\n- åº”ç”¨åœºæ™¯ï¼š\n\t- èŠå¤©æœºå™¨äºº\n\t- å†…å®¹ç”Ÿæˆ\n\t- ä»£ç ç”Ÿæˆ\n\n### 4.3. Builder.io AI\n\n- Builder.io æ˜¯ä¸€ä¸ªå¼ºå¤§çš„**å¯è§†åŒ–å¼€å‘å¹³å°**ï¼Œæ—¨åœ¨åŠ é€Ÿæ•°å­—å›¢é˜Ÿçš„å·¥ä½œæµç¨‹ã€‚å®ƒç»“åˆäº† AI é©±åŠ¨çš„è®¾è®¡åˆ°ä»£ç è½¬æ¢ã€å¯è§†åŒ–ç¼–è¾‘å™¨å’Œä¼ä¸šå†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰ï¼Œä½¿å¾—ç”¨æˆ·èƒ½å¤Ÿè½»æ¾åˆ›å»ºã€ç®¡ç†å’Œå‘å¸ƒç½‘ç«™å†…å®¹\n- æ€»çš„æ¥è¯´ï¼ŒBuilder.io æ˜¯ä¸€ä¸ªåˆ›æ–°çš„å·¥å…·ï¼Œç»“åˆäº†ç°ä»£è®¾è®¡ç†å¿µå’Œå¼ºå¤§çš„æŠ€æœ¯æ”¯æŒï¼Œé€‚åˆå¸Œæœ›æé«˜å·¥ä½œæ•ˆç‡å’Œç®€åŒ–å¼€å‘æµç¨‹çš„å›¢é˜Ÿã€‚é€šè¿‡å…¶ AI åŠŸèƒ½ã€Figma æ’ä»¶å’Œå¯è§†åŒ–ç¼–è¾‘å™¨ï¼ŒBuilder.io ä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªå…¨é¢çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥æ»¡è¶³å½“ä»Šå¿«é€Ÿå˜åŒ–çš„æ•°å­—ç¯å¢ƒçš„éœ€æ±‚\n\n- é›†æˆæ–¹å¼ï¼šå¯è§†åŒ–ç¼–è¾‘å™¨\n- åŠŸèƒ½ç‰¹ç‚¹ï¼š\n\t- 1. å¯è§†åŒ–ç¼–è¾‘\n\t\t- æ‹–æ‹½ç•Œé¢æ„å»º\n\t\t- å®æ—¶é¢„è§ˆ\n\t\t- å“åº”å¼è®¾è®¡\n\t\t- ç»„ä»¶å¤ç”¨\n\t- å¤šæ¡†æ¶æ”¯æŒ\n\t\t- React\n\t\t- Vue\n\t\t- Angular\n\t\t- Next.js\n\t\t- Nuxt\n\t\t- **Qwikï¼ˆBuilder.io å¼€å‘ï¼‰**\n\t- å†…å®¹ç®¡ç†\n\t\t- é¡µé¢ç®¡ç†\n\t\t- A/B æµ‹è¯•\n\t\t- åŠ¨æ€å†…å®¹\n\t\t- ä¸ªæ€§åŒ–æŠ•æ”¾\n- AI ç”Ÿæˆé¡µé¢\n- ç»„ä»¶ä¼˜åŒ–\n- æ€§èƒ½å»ºè®®\n- åº”ç”¨åœºæ™¯ï¼š\n\t- é¡µé¢æ„å»º\n\t- ç»„ä»¶å¼€å‘\n\t- æ€§èƒ½ä¼˜åŒ–\n\n## 5. æœªæ¥å‘å±•æ–¹å‘\n\n- æ¡†æ¶å±‚é¢ï¼š\n\t- AI é©±åŠ¨çš„æ€§èƒ½ä¼˜åŒ–\n\t- æ™ºèƒ½ä»£ç åˆ†å‰²\n\t- è‡ªåŠ¨åŒ–æµ‹è¯•ç”Ÿæˆ\n\t- æ™ºèƒ½é”™è¯¯å¤„ç†\n- å¼€å‘å·¥å…·ï¼š\n\t- æ›´æ™ºèƒ½çš„ä»£ç è¡¥å…¨\n\t- è‡ªåŠ¨åŒ–æ–‡æ¡£ç”Ÿæˆ\n\t- ä»£ç è´¨é‡å»ºè®®\n\t- æ€§èƒ½ç“¶é¢ˆæ£€æµ‹\n- è¿è¡Œæ—¶èƒ½åŠ›ï¼š\n\t- æ™ºèƒ½ç¼“å­˜é¢„æµ‹\n\t- ç”¨æˆ·è¡Œä¸ºåˆ†æ\n\t- è‡ªé€‚åº”æ¸²æŸ“\n\t- æ™ºèƒ½é”™è¯¯æ¢å¤\n\n## 6. å®æ–½å»ºè®®\n\n```typescript\n// 1. æ¸è¿›å¼é›†æˆ\nconst AIFeatureFlag = {\n  codeCompletion: true,\n  smartSearch: true,\n  autoTest: false\n};\n\n// 2. æ€§èƒ½ç›‘æ§\nconst AIPerformanceMonitor = () => {\n  useEffect(() => {\n    // ç›‘æ§ AI åŠŸèƒ½å¯¹æ€§èƒ½çš„å½±å“\n    performanceMonitor.track('ai-features');\n  }, []);\n};\n\n// 3. é”™è¯¯å¤„ç†\nconst AIErrorBoundary = ({ children }) => {\n  const [error, setError] = useState(null);\n  \n  if (error) {\n    return <FallbackComponent error={error} />;\n  }\n  \n  return children;\n};\n```\n\n## 7. æ³¨æ„äº‹é¡¹\n\n- æ•°æ®éšç§ä¿æŠ¤\n- æ€§èƒ½å¼€é”€æ§åˆ¶\n- é™çº§ç­–ç•¥å‡†å¤‡\n- æˆæœ¬æ•ˆç›Šè¯„ä¼°\n- ç”¨æˆ·ä½“éªŒå¹³è¡¡\n\n## 8. é›†æˆå»ºè®®\n\n```typescript\n// 1. é…ç½®ç®¡ç†\nconst aiConfig = {\n  apiKey: process.env.AI_API_KEY,\n  modelVersion: 'gpt-4',\n  maxTokens: 1000,\n  temperature: 0.7\n};\n\n// 2. é”™è¯¯å¤„ç†\nconst handleAIError = async (error: Error) => {\n  if (error.name === 'AIServiceError') {\n    // é™çº§åˆ°ä¼ ç»Ÿå¤„ç†æ–¹å¼\n    return fallbackService.process();\n  }\n  throw error;\n};\n\n// 3. æ€§èƒ½ç›‘æ§\nconst AIPerformanceTracker = () => {\n  const trackAIUsage = async (feature: string) => {\n    const metrics = await performanceMonitor.collect();\n    analytics.track('ai-feature-usage', {\n      feature,\n      metrics\n    });\n  };\n};\n```\n\n","9fe39f35cb525c72a8d7860c08948933":"\n# ç¼–è¯‘æ—¶æ¡†æ¶ vs è¿è¡Œæ—¶æ¡†æ¶\n\n`#å‰ç«¯æ¡†æ¶` \n\n## ç›®å½•\n<!-- toc -->\n ## 1. å®šä¹‰ \n\n- ç¼–è¯‘æ—¶æ¡†æ¶ï¼ˆCompile-time Frameworkï¼‰ï¼š\n\t- åœ¨`æ„å»ºé˜¶æ®µ`å®Œæˆå¤§éƒ¨åˆ†å·¥ä½œ\n\t- å°†æ¡†æ¶ä»£ç è½¬æ¢ä¸ºä¼˜åŒ–åçš„åŸç”Ÿ JavaScript\n\t- æœ€å°åŒ–è¿è¡Œæ—¶å¼€é”€\n\t- ä»£è¡¨æ¡†æ¶ï¼šSvelteã€Solid\n- è¿è¡Œæ—¶æ¡†æ¶ï¼ˆRuntime Frameworkï¼‰ï¼š\n\t- åœ¨æµè§ˆå™¨ä¸­éœ€è¦å®Œæ•´çš„æ¡†æ¶è¿è¡Œæ—¶\n\t- ä½¿ç”¨`è™šæ‹Ÿ DOM` è¿›è¡Œå·®å¼‚åŒ–æ›´æ–°\n\t- è¿è¡Œæ—¶è¿›è¡Œç»„ä»¶æ¸²æŸ“å’ŒçŠ¶æ€ç®¡ç†\n\t- ä»£è¡¨æ¡†æ¶ï¼šReactã€Vueã€Angular\n\n## 2. ä¸»æµæ¡†æ¶å¯¹æ¯”åˆ†æ\n\n### 2.1. Reactï¼ˆè¿è¡Œæ—¶æ¡†æ¶ï¼‰\n\n```javascript\n// React ç¤ºä¾‹\nfunction Counter() {\n  const [count, setCount] = useState(0);\n  return (\n    <div>\n      <p>{count}</p>\n      <button onClick={() => setCount(count + 1)}>+</button>\n    </div>\n  );\n}\n```\n\n#### 2.1.1. ç‰¹ç‚¹\n\n- éœ€è¦å®Œæ•´çš„ React è¿è¡Œæ—¶\n- ä½¿ç”¨è™šæ‹Ÿ DOM è¿›è¡Œå·®å¼‚åŒ–æ›´æ–°\n- çŠ¶æ€æ›´æ–°è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“\n- æ‰“åŒ…ååŒ…å«æ¡†æ¶ä»£ç \n\n### 2.2. Svelteï¼ˆç¼–è¯‘æ—¶æ¡†æ¶ï¼‰\n\n```javascript\n// Svelte ç¤ºä¾‹\n<script>\n  let count = 0;\n</script>\n\n<div>\n  <p>{count}</p>\n  <button on:click={() => count++}>+</button>\n</div>\n```\n\n#### 2.2.1. ç‰¹ç‚¹\n\n- ç¼–è¯‘åç”ŸæˆåŸç”Ÿ JavaScript\n- æ— è™šæ‹Ÿ DOM\n- ç²¾ç¡®æ›´æ–° DOM\n- æœ€å°åŒ–è¿è¡Œæ—¶ä»£ç \n\n### 2.3. Vueï¼ˆæ··åˆæ¨¡å¼ï¼‰\n\n```javascript\n// Vue ç¤ºä¾‹\n<template>\n  <div>\n    <p>{{ count }}</p>\n    <button @click=\"count++\">+</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      count: 0\n    }\n  }\n}\n</script>\n```\n\n#### 2.3.1. ç‰¹ç‚¹\n\n- åŒ…å«è¿è¡Œæ—¶ä½†ç›¸å¯¹è½»é‡\n- ä½¿ç”¨è™šæ‹Ÿ DOM\n- å“åº”å¼ç³»ç»Ÿ\n- ç¼–è¯‘ä¼˜åŒ–æ¨¡æ¿\n\n## 3. æ€§èƒ½å¯¹æ¯”\n\n### 3.1. ç¼–è¯‘æ—¶ä¼˜åŠ¿\n\n- æ›´å°çš„åŒ…ä½“ç§¯\n- æ›´å¿«çš„é¦–æ¬¡åŠ è½½\n- æ›´å°‘çš„å†…å­˜å ç”¨\n- æ›´ç›´æ¥çš„ DOM æ“ä½œ\n\n### 3.2. è¿è¡Œæ—¶ä¼˜åŠ¿\n\n- åŠ¨æ€æ€§æ›´å¼º\n- æ›´çµæ´»çš„ç»„ä»¶å¤ç”¨\n- æ›´æˆç†Ÿçš„ç”Ÿæ€ç³»ç»Ÿ\n- å¼€å‘å·¥å…·æ”¯æŒæ›´å¥½\n\n## 4. æ„å»ºäº§ç‰©å¯¹æ¯”ï¼ˆReact ä¸ Svelteï¼‰\n\nè®©æˆ‘ä»¬é€šè¿‡ä»£ç ç¤ºä¾‹æ¥çœ‹ä¸€ä¸ªç®€å•è®¡æ•°å™¨åœ¨ä¸åŒæ¡†æ¶ä¸‹çš„æ„å»ºäº§ç‰©å·®å¼‚ï¼š\n\n```javascript hl:2,13,8,16\n\n// React æ„å»ºäº§ç‰©ï¼ˆç®€åŒ–ç¤ºæ„ï¼‰\nimport { useState } from 'react';\n// React è¿è¡Œæ—¶ä»£ç ...\nfunction Counter() {\n  const [count, setCount] = useState(0);\n  return React.createElement('div', null,\n    React.createElement('p', null, count),\n    React.createElement('button', { onClick: () => setCount(count + 1) }, '+')\n  );\n}\n\n// Svelte æ„å»ºäº§ç‰©ï¼ˆç®€åŒ–ç¤ºæ„ï¼‰\nlet count = 0;\nconst p = document.createElement('p');\nconst button = document.createElement('button');\np.textContent = count;\nbutton.textContent = '+';\nbutton.addEventListener('click', () => {\n    count++;\n    p.textContent = count;\n});\n```\n\n## 5. ä½¿ç”¨åœºæ™¯å»ºè®®\n\n### 5.1. ç¼–è¯‘æ—¶æ¡†æ¶ï¼ˆå¦‚ Svelteï¼‰é€‚åˆ\n\n- æ€§èƒ½æ•æ„Ÿçš„åº”ç”¨\n- åŒ…ä½“ç§¯è¦æ±‚ä¸¥æ ¼\n- é™æ€å†…å®¹ä¸ºä¸»\n- å°å‹åˆ°ä¸­å‹é¡¹ç›®\n\n### 5.2. è¿è¡Œæ—¶æ¡†æ¶ï¼ˆå¦‚ Reactï¼‰é€‚åˆ\n\n- å¤§å‹å¤æ‚åº”ç”¨\n- éœ€è¦å¼ºå¤§ç”Ÿæ€æ”¯æŒ\n- å›¢é˜Ÿç†Ÿæ‚‰åº¦é«˜\n- åŠ¨æ€å†…å®¹ä¸ºä¸»\n\n## 6. å¼€å‘ä½“éªŒå¯¹æ¯”\n\n### 6.1. ç¼–è¯‘æ—¶æ¡†æ¶\n\n- æ›´æ¥è¿‘åŸç”Ÿ JavaScript\n- æ›´å°‘çš„æ¨¡æ¿ä»£ç \n- æ›´ç›´è§‚çš„çŠ¶æ€ç®¡ç†\n- æ„å»ºæ—¶æŠ¥é”™æç¤º\n\n### 6.2. è¿è¡Œæ—¶æ¡†æ¶\n\n- æ›´æˆç†Ÿçš„å¼€å‘å·¥å…·\n- æ›´ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ\n- æ›´å¤šçš„ç¤¾åŒºèµ„æº\n- æ›´å¥½çš„è°ƒè¯•ä½“éªŒ\n\n## 7. æœªæ¥è¶‹åŠ¿\n\n- æ··åˆæ–¹æ¡ˆçš„å…´èµ·ï¼šç»“åˆç¼–è¯‘æ—¶ä¼˜åŒ–å’Œè¿è¡Œæ—¶çµæ´»æ€§\n- æ›´æ™ºèƒ½çš„ç¼–è¯‘ä¼˜åŒ–\n- æ›´å°çš„è¿è¡Œæ—¶\n- æ›´å¥½çš„å¼€å‘ä½“éªŒ\n- æ›´å¼ºçš„ç±»å‹æ”¯æŒ\n\n## 8. é€‰æ‹©å»ºè®®\n\n1. å¦‚æœé¡¹ç›®å¯¹æ€§èƒ½å’ŒåŒ…ä½“ç§¯æœ‰ä¸¥æ ¼è¦æ±‚ï¼Œè€ƒè™‘ç¼–è¯‘æ—¶æ¡†æ¶\n2. å¦‚æœéœ€è¦å¤§é‡ç¬¬ä¸‰æ–¹åº“æ”¯æŒï¼Œé€‰æ‹©ä¸»æµè¿è¡Œæ—¶æ¡†æ¶\n3. å¦‚æœæ˜¯æ–°é¡¹ç›®ï¼Œå¯ä»¥è€ƒè™‘æ··åˆæ–¹æ¡ˆ\n4. éœ€è¦æƒè¡¡å›¢é˜Ÿå­¦ä¹ æˆæœ¬å’Œé¡¹ç›®éœ€æ±‚","4d086c3f2667538da5deb250ad6da061":"\n# å‰ç«¯æ¡†æ¶æœªæ¥è¶‹åŠ¿åˆ†æ\n\n`#å‰ç«¯æ¡†æ¶` \n\n## ç›®å½•\n<!-- toc -->\n ## 1. å½“å‰ä¸»æµå‰ç«¯æ¡†æ¶æ¦‚å†µ \n\n- React\n- Vue\n- Svelte\n\t- æ–°å…´çš„ç¼–è¯‘æ—¶æ¡†æ¶\n\t- æ— è™šæ‹ŸDOMï¼Œç›´æ¥ç¼–è¯‘ä¸ºåŸç”ŸJavaScript\n\t- æ€§èƒ½ä¼˜ç§€ï¼ŒåŒ…ä½“ç§¯å°\n\n## 2. æœªæ¥è¶‹åŠ¿\n\n### 2.1. ç¼–è¯‘æ—¶ä¼˜åŒ–\n\n- Svelte å¸¦åŠ¨çš„ç¼–è¯‘æ—¶ä¼˜åŒ–è¶‹åŠ¿\n- æ›´å¤šæ¡†æ¶å¼€å§‹`å…³æ³¨æ„å»ºæ—¶çš„ä¼˜åŒ–`\n- å‡å°‘è¿è¡Œæ—¶å¼€é”€æˆä¸ºä¸»è¦æ–¹å‘ \n\n### 2.2. æœåŠ¡å™¨ç»„ä»¶å’ŒåŒæ„æ¸²æŸ“\n\n- React Server Components çš„æ¨å¹¿\n- æœåŠ¡ç«¯æ¸²æŸ“(SSR)å’Œé™æ€ç”Ÿæˆ(SSG)çš„è¿›ä¸€æ­¥èåˆ\n- æ›´å¥½çš„æ€§èƒ½å’ŒSEOæ”¯æŒ \n\n### 2.3. å…ƒæ¡†æ¶å…´èµ·\n\n- Next.js(React)ã€Nuxt(Vue)ã€umi(React) ç­‰æˆä¸ºæ ‡é…\n- åŒæ—¶æ”¯æŒSSRã€SSGç­‰å¤šç§æ¸²æŸ“æ¨¡å¼\n- å¼€ç®±å³ç”¨çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ\n\n### 2.4. å» JavaScript åŒ–\n\nå…¶ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯Â `Islands Architecture`Â (å²›å±¿æ¶æ„)å’ŒÂ `React Server Component`(RSC, React æœåŠ¡ç«¯ç»„ä»¶)\n\n## 3. é€‰æ‹©å»ºè®®\n\n- å¤§å‹ä¼ä¸šé¡¹ç›®ï¼šè€ƒè™‘Angular æˆ– React\n- ä¸­å°å‹é¡¹ç›®ï¼šVue.js æ˜¯å¾ˆå¥½çš„é€‰æ‹©\n- æ€§èƒ½æ•æ„Ÿé¡¹ç›®ï¼šå¯ä»¥è€ƒè™‘ Svelte\n- å¿«é€Ÿå¼€å‘ï¼š\n\t- Next.jsæˆ–Nuxt.jsç­‰å…ƒæ¡†æ¶\n- æ€§èƒ½æ•æ„Ÿ\n\t- Svelte\n\t- Solid\n- åŸç”Ÿ Web Components\n\n","01ea3717e03f51b8a2bfe7174cf2f750":"\n# å‰ç«¯æ¡†æ¶åé¢çš„é‡‘ä¸»åŠç”Ÿæ€æƒ…å†µ\n\n`#å‰ç«¯æ¡†æ¶` \n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ¡†æ¶å¯¹æ¯” \n\n| æ¡†æ¶/å·¥å…·    | ä¸»è¦æ”¯æŒæ–¹           | ç‰¹ç‚¹                                           | ç”Ÿæ€ç³»ç»Ÿ                              | å•†ä¸šæ”¯æŒ                   | Stars | å…¸å‹åº”ç”¨æ¡ˆä¾‹                                 | å‘å¸ƒå¹´ä»½ |\n| -------- | --------------- | -------------------------------------------- | --------------------------------- | ---------------------- | ----- | -------------------------------------- | ---- |\n| React    | Meta (Facebook) | â€¢ è™šæ‹ŸDOM<br>â€¢ JSXè¯­æ³•<br>â€¢ ç»„ä»¶åŒ–<br>â€¢ å•å‘æ•°æ®æµ       | â€¢ æœ€å¤§çš„npmç”Ÿæ€<br>â€¢ å¤§é‡UIåº“<br>â€¢ å®Œå–„çš„å·¥å…·é“¾ | â€¢ Metaå…¨èŒå›¢é˜Ÿ<br>â€¢ ä¼ä¸šçº§æ”¯æŒ  | 215k+ | â€¢ Facebook<br>â€¢ Instagram<br>â€¢ Netflix | 2013 |\n| Vue      | å°¤é›¨æºªå›¢é˜Ÿ           | â€¢ å“åº”å¼ç³»ç»Ÿ<br>â€¢ æ¨¡æ¿è¯­æ³•<br>â€¢ åŒå‘ç»‘å®š<br>â€¢ ç»„ä»¶åŒ–         | â€¢ å®˜æ–¹æ ¸å¿ƒåº“ç”Ÿæ€<br>â€¢ ä¸­æ–‡ç¤¾åŒºæ´»è·ƒ             | â€¢ å¼€æºèµåŠ©<br>â€¢ ä»˜è´¹å’¨è¯¢       | 205k+ | â€¢ GitLab<br>â€¢ é˜¿é‡Œå·´å·´<br>â€¢ å­—èŠ‚è·³åŠ¨           | 2014 |\n| Angular  | Google          | â€¢ TypeScript<br>â€¢ ä¾èµ–æ³¨å…¥<br>â€¢ å®Œæ•´æ¡†æ¶<br>â€¢ RxJSé›†æˆ | â€¢ ä¼ä¸šçº§å·¥å…·é“¾<br>â€¢ Googleæ”¯æŒ            | â€¢ Googleå›¢é˜Ÿ<br>â€¢ ä¼ä¸šæœåŠ¡   | 90k+  | â€¢ Google<br>â€¢ Microsoft<br>â€¢ Samsung   | 2016 |\n| Svelte   | Vercel          | â€¢ ç¼–è¯‘æ—¶æ¡†æ¶<br>â€¢ é›¶è¿è¡Œæ—¶<br>â€¢ ç®€æ´è¯­æ³•                  | â€¢ å¿«é€Ÿæˆé•¿<br>â€¢ è½»é‡çº§ç”Ÿæ€                 | â€¢ Vercelæ”¯æŒ<br>â€¢ ç¤¾åŒºé©±åŠ¨   | 73k+  | â€¢ Apple<br>â€¢ Spotify<br>â€¢ The NY Times | 2016 |\n| Solid.js | Core Team       | â€¢ ç»†ç²’åº¦æ›´æ–°<br>â€¢ æ— è™šæ‹ŸDOM<br>â€¢ ç±»Reactè¯­æ³•            | â€¢ æ–°å…´ç”Ÿæ€<br>â€¢ é«˜æ€§èƒ½æ–¹æ¡ˆ                 | â€¢ å¼€æºèµåŠ©<br>â€¢ ç¤¾åŒºæ”¯æŒ       | 30k+  | â€¢ Cloudflare<br>â€¢ DataStax             | 2018 |\n| Qwik     | Builder.io      | â€¢ å³æ—¶åŠ è½½<br>â€¢ é›¶æ°´åˆ<br>â€¢ å¯æ¢å¤æ€§                    | â€¢ æ–°å…´ç”Ÿæ€<br>â€¢ Builder.ioæ”¯æŒ          | â€¢ Builder.io<br>â€¢ ä¼ä¸šæ”¯æŒ | 20k+  | â€¢ Builder.io<br>â€¢ Netlify              | 2022 |\n| Preact   | ç¤¾åŒºé©±åŠ¨            | â€¢ Reactå…¼å®¹<br>â€¢ è½»é‡çº§<br>â€¢ é«˜æ€§èƒ½                  | â€¢ Reactç”Ÿæ€å…¼å®¹<br>â€¢ ç‹¬ç«‹ç”Ÿæ€             | â€¢ å¼€æºèµåŠ©<br>â€¢ ç¤¾åŒºç»´æŠ¤       | 35k+  | â€¢ Uber<br>â€¢ Tencent                    | 2015 |\n|          |                 |                                              |                                   |                        |       |                                        |      |\n\n## 2. å…ƒæ¡†æ¶å¯¹æ¯”\n\n| å…ƒæ¡†æ¶         | åŸºç¡€æ¡†æ¶     | ä¸»è¦æ”¯æŒæ–¹         | ç‰¹ç‚¹                            | é€‚ç”¨åœºæ™¯               | Stars | å…¸å‹æ¡ˆä¾‹                             |\n| ----------- | -------- | ------------- | ----------------------------- | ------------------ | ----- | -------------------------------- |\n| Next.js     | React    | Vercel        | â€¢ SSR/SSG<br>â€¢ æ–‡ä»¶è·¯ç”±<br>â€¢ å›¾ç‰‡ä¼˜åŒ– | â€¢ ä¼ä¸šåº”ç”¨<br>â€¢ ç”µå•†ç½‘ç«™   | 115k+ | â€¢ TikTok<br>â€¢ Nike               |\n| Nuxt        | Vue      | NuxtLabs      | â€¢ è‡ªåŠ¨è·¯ç”±<br>â€¢ SEOå‹å¥½<br>â€¢ æ¨¡å—åŒ–    | â€¢ å†…å®¹ç½‘ç«™<br>â€¢ åº”ç”¨ç¨‹åº   | 47k+  | â€¢ NASA<br>â€¢ GitLab               |\n| SvelteKit   | Svelte   | Vercel        | â€¢ é€‚é…ç³»ç»Ÿ<br>â€¢ æ–‡ä»¶è·¯ç”±<br>â€¢ SSRæ”¯æŒ   | â€¢ ç°ä»£ç½‘ç«™<br>â€¢ WebApp | 16k+  | â€¢ NY Times<br>â€¢ Reuters          |\n| Astro       | å¤šæ¡†æ¶      | Astro Company | â€¢ é›¶JSé»˜è®¤<br>â€¢ å¤šæ¡†æ¶æ”¯æŒ<br>â€¢ å†…å®¹é›†åˆ  | â€¢ å†…å®¹ç½‘ç«™<br>â€¢ æ–‡æ¡£ç«™    | 35k+  | â€¢ Chrome Docs<br>â€¢ Firebase Docs |\n| Remix       | React    | Shopify       | â€¢ åµŒå¥—è·¯ç”±<br>â€¢ æ•°æ®åŠ è½½<br>â€¢ é”™è¯¯è¾¹ç•Œ    | â€¢ Webåº”ç”¨<br>â€¢ ç”µå•†å¹³å°  | 25k+  | â€¢ Shopify<br>â€¢ Microsoft         |\n| Solid Start | Solid.js | Core Team     | â€¢ å…ƒæ¡†æ¶<br>â€¢ SSRæ”¯æŒ<br>â€¢ æ–‡ä»¶è·¯ç”±    | â€¢ ç°ä»£åº”ç”¨<br>â€¢ SPA    | 3k+   | â€¢ ç¤¾åŒºé¡¹ç›®                           |\n|             |          |               |                               |                    |       |                                  |\n\n## 3. è¡¥å……è¯´æ˜\n\n1. æ€§èƒ½ç‰¹ç‚¹å¯¹æ¯”ï¼š\n\t- React: è™šæ‹ŸDOMä¼˜åŒ–\n\t- Vue: å“åº”å¼ç³»ç»Ÿ\n\t- Svelte: ç¼–è¯‘æ—¶ä¼˜åŒ–\n\t- Solid: ç»†ç²’åº¦å“åº”\n\t- Qwik: å»¶è¿ŸåŠ è½½\n\t- Preact: è½»é‡çº§è™šæ‹ŸDOM\n2. å­¦ä¹ æ›²çº¿ï¼š\n\t- ç®€å•ï¼šVue, Svelte\n\t- ä¸­ç­‰ï¼šReact, Preact\n\t- è¾ƒé™¡ï¼šAngular, Solid.js\n\t- åˆ›æ–°æ¦‚å¿µï¼šQwik\n3. å¼€å‘å·¥å…·æ”¯æŒï¼š\n\t- æœ€å®Œå–„ï¼šReact, Vue, Angular\n\t- è‰¯å¥½ï¼šSvelte, Preact\n\t- å‘å±•ä¸­ï¼šSolid.js, Qwik\n4. æ„å»ºå·¥å…·é›†æˆï¼š\n\t- Vite: Vue, Svelte, Solid.js\n\t- webpack: React, Angular\n\t- esbuild: Qwik\n\t- å¤šæ”¯æŒ: Preact\n5. 2024å¹´å‘å±•è¶‹åŠ¿ï¼š\n\t- æ€§èƒ½ä¼˜åŒ–æŒç»­æ·±åŒ–\n\t- å¼€å‘ä½“éªŒä¸æ–­æå‡\n\t- æ„å»ºå·¥å…·é“¾ä¼˜åŒ–\n\t- è·¨æ¡†æ¶è§£å†³æ–¹æ¡ˆå¢å¤š\n\t- AIé›†æˆåŠ å¼º\n6. ä¼ä¸šé€‰æ‹©è€ƒè™‘å› ç´ ï¼š\n\t- å›¢é˜ŸæŠ€æœ¯æ ˆ\n\t- æ€§èƒ½éœ€æ±‚\n\t- ç”Ÿæ€ç³»ç»Ÿ\n\t- å­¦ä¹ æˆæœ¬\n\t- é•¿æœŸç»´æŠ¤\n\t- å•†ä¸šæ”¯æŒ\n\n## 4. å›½å†…ï¼šä¼ä¸šçº§æ¡†æ¶è§£å†³æ–¹æ¡ˆ\n\n| æ¡†æ¶/å·¥å…· | ä¸»è¦æ”¯æŒæ–¹ | åŸºç¡€æ¡†æ¶ | ç‰¹ç‚¹ | ç”Ÿæ€ç³»ç»Ÿ | ä½¿ç”¨æ¡ˆä¾‹ | Stars | å‘å¸ƒå¹´ä»½ |\n|----------|------------|---------|------|----------|----------|-------|----------|\n| UmiJS | èš‚èšé›†å›¢ | React | â€¢ æ’ä»¶åŒ–<br>â€¢ çº¦å®šå¼è·¯ç”±<br>â€¢ ä¼ä¸šçº§ç‰¹æ€§<br>â€¢ å¼€ç®±å³ç”¨ | â€¢ antd ç”Ÿæ€<br>â€¢ dumi æ–‡æ¡£<br>â€¢ å¤§é‡æ’ä»¶ | â€¢ æ”¯ä»˜å®<br>â€¢ ç½‘å•†é“¶è¡Œ<br>â€¢ æ•°å­—å†œä¸š | 14k+ | 2018 |\n| Ice/é£å†° | é˜¿é‡Œå·´å·´ | React | â€¢ ç‰©æ–™ä½“ç³»<br>â€¢ å¾®å‰ç«¯<br>â€¢ ä½ä»£ç èƒ½åŠ›<br>â€¢ æ¨¡æ¿ä¸°å¯Œ | â€¢ fusionç”Ÿæ€<br>â€¢ ç‰©æ–™å¸‚åœº<br>â€¢ å¼€å‘è€…å·¥å…· | â€¢ æ·˜å®<br>â€¢ å¤©çŒ«<br>â€¢ é˜¿é‡Œäº‘ | 17k+ | 2018 |\n| Taro | äº¬ä¸œ | React/Vue | â€¢ è·¨ç«¯å¼€å‘<br>â€¢ å¤šæ¡†æ¶æ”¯æŒ<br>â€¢ ç»Ÿä¸€æ¥å£<br>â€¢ å°ç¨‹åºæ”¯æŒ | â€¢ ç»„ä»¶åº“<br>â€¢ APIé€‚é…<br>â€¢ ç«¯èƒ½åŠ› | â€¢ äº¬ä¸œ<br>â€¢ è…¾è®¯<br>â€¢ å­—èŠ‚è·³åŠ¨ | 33k+ | 2018 |\n| Midway | é˜¿é‡Œå·´å·´ | TypeScript | â€¢ å…¨æ ˆæ¡†æ¶<br>â€¢ äº‘åŸç”Ÿ<br>â€¢ Serverless<br>â€¢ å¾®æœåŠ¡ | â€¢ ä¼ä¸šçº§ç”Ÿæ€<br>â€¢ é˜¿é‡Œäº‘é›†æˆ<br>â€¢ å¼€å‘å·¥å…· | â€¢ æ·˜å®<br>â€¢ æ”¯ä»˜å®<br>â€¢ é’‰é’‰ | 8k+ | 2013 |\n\n## 5. å›½å†…ï¼šUI ç»„ä»¶åº“\n\n| ç»„ä»¶åº“          | æ”¯æŒæ–¹  | æ¡†æ¶æ”¯æŒ          | ç‰¹ç‚¹                                    | ç”Ÿæ€                            | å…¸å‹æ¡ˆä¾‹                    | Stars | ç»´æŠ¤çŠ¶æ€ |\n| ------------ | ---- | ------------- | ------------------------------------- | ----------------------------- | ----------------------- | ----- | ---- |\n| Ant Design   | èš‚èšé›†å›¢ | React         | â€¢ ä¼ä¸šçº§è®¾è®¡<br>â€¢ å®Œæ•´ç»„ä»¶<br>â€¢ ä¸»é¢˜å®šåˆ¶<br>â€¢ å›½é™…åŒ–  | â€¢ Proç»„ä»¶<br>â€¢ Charts<br>â€¢ æ¨¡æ¿å¸‚åœº | â€¢ æ”¯ä»˜å®<br>â€¢ é˜¿é‡Œäº‘<br>â€¢ è…¾è®¯äº‘ | 87k+  | æ´»è·ƒ   |\n| Arco Design  | å­—èŠ‚è·³åŠ¨ | React/Vue     | â€¢ ç°ä»£è®¾è®¡<br>â€¢ æ€§èƒ½ä¼˜åŒ–<br>â€¢ å¯å®šåˆ¶æ€§<br>â€¢ è·¨æ¡†æ¶   | â€¢ ç‰©æ–™å¹³å°<br>â€¢ è®¾è®¡ç³»ç»Ÿ<br>â€¢ ä¸»é¢˜å·¥å…·    | â€¢ é£ä¹¦<br>â€¢ æŠ–éŸ³<br>â€¢ ä»Šæ—¥å¤´æ¡  | 10k+  | æ´»è·ƒ   |\n| Element Plus | é¥¿äº†ä¹ˆ  | Vue 3         | â€¢ æ¸…æ™°è®¾è®¡<br>â€¢ Vue3æ”¯æŒ<br>â€¢ ä¸»é¢˜å®šåˆ¶<br>â€¢ è½»é‡çº§ | â€¢ ç»„ä»¶å¸‚åœº<br>â€¢ ä¸»é¢˜å·¥å…·<br>â€¢ å¼€å‘å·¥å…·    | â€¢ é¥¿äº†ä¹ˆ<br>â€¢ Bç«™<br>â€¢ çŸ¥ä¹   | 21k+  | æ´»è·ƒ   |\n| TDesign      | è…¾è®¯   | React/Vue/å°ç¨‹åº | â€¢ å¤šç«¯æ”¯æŒ<br>â€¢ ä¸šåŠ¡ç»„ä»¶<br>â€¢ è®¾è®¡ç³»ç»Ÿ<br>â€¢ æ— éšœç¢   | â€¢ å¤šæ¡†æ¶å®ç°<br>â€¢ è®¾è®¡èµ„æº<br>â€¢ ä¸»é¢˜å·¥å…·   | â€¢ è…¾è®¯äº‘<br>â€¢ å¾®ä¿¡<br>â€¢ QQ   | 4k+   | æ´»è·ƒ   |\n\n## 6. å›½å†…ï¼šå¼€å‘å·¥å…·é“¾\n\n| å·¥å…·            | æ”¯æŒæ–¹  | ç±»å‹   | ç‰¹ç‚¹                               | ç”Ÿæ€é›†æˆ                          | åº”ç”¨åœºæ™¯              | Stars | çŠ¶æ€  |\n| ------------- | ---- | ---- | -------------------------------- | ----------------------------- | ----------------- | ----- | --- |\n| **Modern.js** | å­—èŠ‚è·²åŠ¨ | å¼€å‘æ¡†æ¶ | â€¢ ä¸€ä½“åŒ–æ–¹æ¡ˆ<br>â€¢ æ¨¡å—è”é‚¦<br>â€¢ æ„å»ºä¼˜åŒ–      | â€¢ BFFæ”¯æŒ<br>â€¢ å¾®å‰ç«¯<br>â€¢ å¼€å‘å·¥å…·    | â€¢ æŠ–éŸ³<br>â€¢ ä»Šæ—¥å¤´æ¡    | 4k+   | æ´»è·ƒ  |\n| Rax           | é˜¿é‡Œå·´å·´ | è·¨ç«¯æ¡†æ¶ | â€¢ å¤šç«¯ç»Ÿä¸€<br>â€¢ è½»é‡çº§<br>â€¢ é«˜æ€§èƒ½         | â€¢ ç»„ä»¶åº“<br>â€¢ å¼€å‘å·¥å…·<br>â€¢ è¿è¡Œæ—¶      | â€¢ æ·˜å®<br>â€¢ å¤©çŒ«      | 7k+   | æ´»è·ƒ  |\n| father        | èš‚èšé›†å›¢ | æ„å»ºå·¥å…· | â€¢ åº“æ‰“åŒ…<br>â€¢ TypeScript<br>â€¢ å¤šæ ¼å¼è¾“å‡º | â€¢ dumié›†æˆ<br>â€¢ npmå‘å¸ƒ<br>â€¢ æµ‹è¯•é›†æˆ | â€¢ antd<br>â€¢ proç³»åˆ— | 1k+   | æ´»è·ƒ  |\n\n## 7. å›½å†…ï¼šä½ä»£ç å¹³å°\n\n| å¹³å°            | å…¬å¸   | ç‰¹ç‚¹                            | æŠ€æœ¯æ ˆ                     | åº”ç”¨åœºæ™¯              | å•†ä¸šæ¨¡å¼ | çŠ¶æ€  |\n| ------------- | ---- | ----------------------------- | ----------------------- | ----------------- | ---- | --- |\n| LowCodeEngine | é˜¿é‡Œå·´å·´ | â€¢ ç”Ÿæ€å¼€æ”¾<br>â€¢ æ‰©å±•æ€§å¼º<br>â€¢ ä¼ä¸šçº§     | â€¢ React<br>â€¢ TypeScript | â€¢ ä¸­åå°<br>â€¢ è¡¨å•ç³»ç»Ÿ   | å¼€æº   | æ´»è·ƒ  |\n| å®œæ­            | é˜¿é‡Œå·´å·´ | â€¢ å¯è§†åŒ–æ­å»º<br>â€¢ ä¸šåŠ¡æ¨¡æ¿<br>â€¢ é›†æˆé’‰é’‰   | â€¢ ç§æœ‰æŠ€æœ¯æ ˆ                 | â€¢ ä¼ä¸šåº”ç”¨<br>â€¢ æµç¨‹ç®¡ç†  | å•†ä¸šäº§å“ | å•†ç”¨  |\n| amis          | ç™¾åº¦   | â€¢ é…ç½®ç”Ÿæˆå™¨<br>â€¢ JSONé©±åŠ¨<br>â€¢ ç»„ä»¶ä¸°å¯Œ | â€¢ React                 | â€¢ ç®¡ç†ç³»ç»Ÿ<br>â€¢ æ•°æ®å¯è§†åŒ– | å¼€æº   | æ´»è·ƒ  |\n|               |      |                               |                         |                   |      |     |\n\n","76a7d080d9cb55d7ab5c095d7e48b3e1":"\n# å‰ç«¯æ¡†æ¶çš„å²›å±¿æ¶æ„ï¼ˆIsland Architectureï¼‰\n\n`#å‰ç«¯æ¶æ„` \n\nå‰ç«¯æ¡†æ¶çš„å²›å±¿æ¶æ„ï¼ˆIsland Architectureï¼‰ï¼Œæ—¨åœ¨æé«˜ç½‘é¡µæ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚è®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹è¿™ç§æ¶æ„çš„æ¦‚å¿µã€ä¼˜åŠ¿ä»¥åŠä¸€äº›å®ç°å®ƒçš„æ¡†æ¶ã€‚\n\n\n## ç›®å½•\n<!-- toc -->\n ## å²›å±¿æ¶æ„çš„æ ¸å¿ƒæ¦‚å¿µï¼š \n\n1. é™æ€å†…å®¹å’ŒåŠ¨æ€å†…å®¹åˆ†ç¦»\n2. æŒ‰éœ€åŠ è½½äº¤äº’æ€§ç»„ä»¶\n3. æœ€å°åŒ– JavaScript çš„åˆå§‹åŠ è½½\n\n\n## 1. å²›å±¿æ¶æ„çš„å®šä¹‰\n\nå²›å±¿æ¶æ„å°†é¡µé¢è§†ä¸ºä¸€ç‰‡\"æµ·æ´‹\"ï¼Œå…¶ä¸­åŒ…å«å¤šä¸ªç‹¬ç«‹çš„\"å²›å±¿\"ã€‚\n- è¿™é‡Œçš„\"æµ·æ´‹\"ä»£è¡¨é™æ€çš„ã€éäº¤äº’å¼çš„å†…å®¹ï¼Œ\n- è€Œ\"å²›å±¿\"åˆ™æ˜¯åŠ¨æ€çš„ã€äº¤äº’å¼çš„ç»„ä»¶ã€‚\n\n## 2. å·¥ä½œåŸç†\n\n- æœåŠ¡å™¨é¦–å…ˆæ¸²æŸ“é™æ€ HTML å†…å®¹\n- è¯†åˆ«é¡µé¢ä¸­éœ€è¦äº¤äº’çš„åŒºåŸŸï¼ˆå²›å±¿ï¼‰\n- ä¸ºæ¯ä¸ªå²›å±¿å•ç‹¬åŠ è½½å¿…è¦çš„ JavaScript\n- å…¶ä½™éƒ¨åˆ†ä¿æŒä¸ºé™æ€ HTML\n\n## 3. ä¼˜åŠ¿\n\n- æ›´å¿«çš„åˆå§‹é¡µé¢åŠ è½½ï¼šå¤§éƒ¨åˆ†å†…å®¹ä»¥é™æ€ HTML å‘ˆç°\n- æ›´å¥½çš„æ€§èƒ½ï¼šåªåœ¨éœ€è¦çš„åœ°æ–¹åŠ è½½ JavaScript\n- æ”¹å–„æ ¸å¿ƒ Web æŒ‡æ ‡ï¼šå¦‚ First Contentful Paint (FCP) å’Œ Time to Interactive (TTI)\n- æ›´å¥½çš„ SEOï¼šæœç´¢å¼•æ“å¯ä»¥è½»æ¾æŠ“å–é™æ€å†…å®¹\n\n## 4. ä¸å…¶ä»–æ¶æ„çš„å¯¹æ¯”\n\nä¸ºäº†æ›´å¥½åœ°ç†è§£å²›å±¿æ¶æ„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä¸å…¶ä»–å¸¸è§çš„æ¶æ„è¿›è¡Œå¯¹æ¯”ï¼š\n\n| æ¶æ„ç±»å‹ | åˆå§‹åŠ è½½ | JavaScript ä½¿ç”¨ | SEO å‹å¥½åº¦ | äº¤äº’æ€§ |\n|---------|---------|----------------|-----------|--------|\n| å•é¡µåº”ç”¨ (SPA) | æ…¢ | å¤§é‡ | ä½ | é«˜ |\n| æœåŠ¡å™¨ç«¯æ¸²æŸ“ (SSR) | å¿« | ä¸­ç­‰ | é«˜ | ä¸­ç­‰ |\n| é™æ€ç«™ç‚¹ç”Ÿæˆ (SSG) | éå¸¸å¿« | å°‘é‡ | éå¸¸é«˜ | ä½ |\n| å²›å±¿æ¶æ„ | å¿« | æŒ‰éœ€åŠ è½½ | é«˜ | é«˜ |\n\n\n## 5. å®ç°å²›å±¿æ¶æ„çš„æ¡†æ¶\n\nç›®å‰ï¼Œæœ‰å‡ ä¸ªæ¡†æ¶å’Œåº“æ”¯æŒæˆ–å®ç°äº†å²›å±¿æ¶æ„ï¼š\n### React Server Component:\n\n-  åˆ’åˆ†æœåŠ¡ç«¯ç»„ä»¶å’Œå®¢æˆ·ç«¯ç»„ä»¶ï¼ŒæœåŠ¡ç«¯ç»„ä»¶ä»…åœ¨æœåŠ¡ç«¯è¿è¡Œï¼Œå®¢æˆ·ç«¯åªä¼šçœ‹åˆ°å®ƒçš„æ¸²æŸ“ç»“æœï¼ŒJavaScript æ‰§è¡Œä»£ç è‡ªç„¶ä¹Ÿä»…å­˜äºæœåŠ¡ç«¯ã€‚\n### Astro\n\nAstro æ˜¯æœ€æ—©å®ç°å²›å±¿æ¶æ„çš„æ¡†æ¶ä¹‹ä¸€ã€‚\n\nç¤ºä¾‹ï¼š\n\n```vue\n---\nimport MyReactComponent from './MyReactComponent.jsx';\n---\n<html>\n  <body>\n    <h1>Welcome to my page</h1>\n    <p>This is static content</p>\n    <MyReactComponent client:load />\n  </body>\n</html>\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`<MyReactComponent>` å°±æ˜¯ä¸€ä¸ª\"å²›å±¿\"ï¼Œåªæœ‰è¿™éƒ¨åˆ†ä¼šåŠ è½½å¿…è¦çš„ JavaScriptã€‚\n\n### Qwik\n\nQwik æ˜¯å¦ä¸€ä¸ªé‡‡ç”¨ç±»ä¼¼ç†å¿µçš„æ¡†æ¶ï¼Œå®ƒä½¿ç”¨ç»†ç²’åº¦çš„æ‡’åŠ è½½æ¥å®ç°ç±»ä¼¼çš„æ•ˆæœã€‚\n\n### Fresh\n\nFresh æ˜¯ä¸€ä¸ªåŸºäº Deno çš„ web æ¡†æ¶ï¼Œä¹Ÿé‡‡ç”¨äº†å²›å±¿æ¶æ„çš„ç†å¿µã€‚\n\nç¤ºä¾‹ï¼š\n\n```jsx\nimport { useState } from \"preact/hooks\";\n\nexport default function Counter() {\n  const [count, setCount] = useState(0);\n  return (\n    <div>\n      <p>{count}</p>\n      <button onClick={() => setCount(count + 1)}>Add</button>\n    </div>\n  );\n}\n```\n\nåœ¨ Fresh ä¸­ï¼Œè¿™ä¸ªç»„ä»¶ä¼šè¢«å½“ä½œä¸€ä¸ª\"å²›å±¿\"ï¼Œåªåœ¨éœ€è¦æ—¶æ‰åŠ è½½å’Œæ¿€æ´»ã€‚\n\n### å®ç°å²›å±¿æ¶æ„çš„æŒ‘æˆ˜\n\n- ç»„ä»¶åˆ’åˆ†ï¼šéœ€è¦ä»”ç»†è€ƒè™‘å“ªäº›éƒ¨åˆ†åº”è¯¥æ˜¯\"å²›å±¿\"\n- çŠ¶æ€ç®¡ç†ï¼šå²›å±¿ä¹‹é—´çš„çŠ¶æ€å…±äº«å¯èƒ½ä¼šå˜å¾—å¤æ‚\n- å¼€å‘å¤æ‚æ€§ï¼šå¯èƒ½éœ€è¦æ›´å¤šçš„è§„åˆ’å’Œæ¶æ„è®¾è®¡\n\n","f7b9d848a72a5a6686709dcdae97a36c":"\n# å‰è¨€\n\n\nå‰ç«¯å·¥ç¨‹å¸ˆèŒä¸šç›¸å…³","f98db6cef8e6532f9bf4a71f78609917":"\n# ä»â€œå…¨å¹²â€å·¥ç¨‹å¸ˆçš„å‘å±•è·¯å¾„çœ‹å‰ç«¯çš„å®šä½ä¸ä»·å€¼\n\n\n## ç›®å½•\n<!-- toc -->\n ## æŠ€æœ¯ vs ç®¡ç†   \n\n\n## å‰ç«¯çš„å®šä½ä¸ä»·å€¼\n## å°ç¨‹åºå¹³å°å»ºè®¾  \n## å¤§å‹æ´»åŠ¨å»ºè®¾  \n## å›¢é˜Ÿå»ºè®¾ä¸æœªæ¥å‘å±•","11980a8ed5f150da8d4360e645760dfa":"\n# å‰è¨€\n\n","c29ec391a9b95c51b7f3c1e7a4e9bd27":"\n# å‰ç«¯å›¢é˜Ÿå¯æ²‰æ·€çš„å‰ç«¯èµ„äº§éƒ½æœ‰å“ªäº›ï¼Ÿ\n\n\nç³»ç»Ÿåœ°æ¢³ç†ä¸€ä¸‹å‰ç«¯å›¢é˜Ÿ/å…¬å¸çš„æ ¸å¿ƒèµ„äº§ï¼š\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æŠ€æœ¯åŸºå»ºèµ„äº§ \n\n### 1.1. **ç»„ä»¶åº“ç”Ÿæ€**\n\n- åŸºç¡€ç»„ä»¶\n\t- UIç»„ä»¶åº“\n- ä¸šåŠ¡ç»„ä»¶åº“\n- å‡½æ•°ç»„ä»¶\n- å¾®å‰ç«¯ç»„ä»¶\n\n````js\n// 1. åŸºç¡€ç»„ä»¶åº“\n@company/basic-components\nâ”œâ”€â”€ Button\nâ”œâ”€â”€ Input\nâ”œâ”€â”€ Form\nâ””â”€â”€ ...\n\n// 2. ä¸šåŠ¡ç»„ä»¶åº“\n@company/business-components\nâ”œâ”€â”€ UserCard\nâ”œâ”€â”€ OrderFlow\nâ”œâ”€â”€ PaymentForm\nâ””â”€â”€ ...\n\n// 3. åŒºå—ç»„ä»¶\n@company/blocks\nâ”œâ”€â”€ HeaderBlock\nâ”œâ”€â”€ FooterBlock\nâ”œâ”€â”€ SidebarBlock\nâ””â”€â”€ ...\n\n// 4. å¸ƒå±€ç»„ä»¶\n@company/layouts\nâ”œâ”€â”€ DashboardLayout\nâ”œâ”€â”€ PortalLayout\nâ””â”€â”€ ...\n\n\n````\n\n### 1.2. **å·¥å…·åº“é›†åˆ**\n\n```typescript\n// å·¥å…·å‡½æ•°åº“\n@company/utils\nâ”œâ”€â”€ date           // æ—¥æœŸå¤„ç†\nâ”œâ”€â”€ validator      // æ•°æ®æ ¡éªŒ\nâ”œâ”€â”€ formatter      // æ ¼å¼åŒ–\nâ””â”€â”€ security       // å®‰å…¨ç›¸å…³\n\n// è¯·æ±‚åº“å°è£…\n@company/request\nâ”œâ”€â”€ interceptors   // æ‹¦æˆªå™¨\nâ”œâ”€â”€ cache         // ç¼“å­˜ç­–ç•¥\nâ””â”€â”€ retry         // é‡è¯•æœºåˆ¶\n```\n\n```javascript\n// ç¤ºä¾‹ï¼šé€šç”¨å·¥å…·åº“ç»“æ„\nexport {\n  // æ•°æ®å¤„ç†\n  formatData,\n  transformTree,\n  \n  // æ—¶é—´å¤„ç†\n  formatDate,\n  calculateDuration,\n  \n  // éªŒè¯å·¥å…·\n  validators,\n  \n  // ä¸šåŠ¡å·¥å…·\n  businessHelpers\n}\n\n```\n### 1.3. **è„šæ‰‹æ¶å·¥å…·**\n\nåŒ…æ‹¬ï¼š\n- é¡¹ç›®åˆå§‹åŒ–æ¨¡æ¿\n- é¡µé¢æ¨¡æ¿\n- ç»„ä»¶æ¨¡æ¿\n- CI/CDæ¨¡æ¿\n\n```bash\n# é¡¹ç›®è„šæ‰‹æ¶\n@company/create-app\nâ”œâ”€â”€ templates/     # é¡¹ç›®æ¨¡æ¿\nâ”‚   â”œâ”€â”€ react-ts   \nâ”‚   â”œâ”€â”€ vue-ts\nâ”‚   â””â”€â”€ mobile\nâ”œâ”€â”€ generators/    # ä»£ç ç”Ÿæˆå™¨\nâ””â”€â”€ scripts/       # å·¥å…·è„šæœ¬\n\n# å¼€å‘å·¥å…·é›†\n@company/cli\nâ”œâ”€â”€ dev           # æœ¬åœ°å¼€å‘\nâ”œâ”€â”€ build         # æ„å»ºæ‰“åŒ…\nâ”œâ”€â”€ deploy        # éƒ¨ç½²å·¥å…·\nâ””â”€â”€ analyze       # åˆ†æå·¥å…·\n```\n\n## 2. è§„èŒƒä¸æ–‡æ¡£èµ„äº§\n\n### 2.1. **æŠ€æœ¯è§„èŒƒæ–‡æ¡£**\n\n#### 2.1.1. æŠ€æœ¯æ–‡æ¡£ä¸­å¿ƒ&æŠ€æœ¯æ–‡æ¡£ä½“ç³»\n\n- å¼€å‘è§„èŒƒ\n\t- ç¼–ç è§„èŒƒ\n\t- Gitæäº¤è§„èŒƒ\n\t- é¡¹ç›®ç›®å½•ç»“æ„è§„èŒƒ\n\t- å‘½åè§„èŒƒ\n\t- æ³¨é‡Šè§„èŒƒ\n\t- APIæ¥å£è§„èŒƒ\n- æœ€ä½³å®è·µ\n\t- Reactæœ€ä½³å®è·µ\n\t- æ€§èƒ½ä¼˜åŒ–æŒ‡å—\n\t- å®‰å…¨å¼€å‘æŒ‡å—\n\t- æµ‹è¯•ç¼–å†™æŒ‡å—\n- æ¶æ„è®¾è®¡åŠè§„èŒƒ\n\t- å¾®å‰ç«¯æ¶æ„\n\t- çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ\n\t- æ„å»ºéƒ¨ç½²æµç¨‹\n\t- ç›‘æ§å‘Šè­¦ä½“ç³»\n\t- åº”ç”¨åˆ†å±‚è§„èŒƒ\n\t- çŠ¶æ€ç®¡ç†è§„èŒƒ\n\t- APIè°ƒç”¨è§„èŒƒ\n\t- é”™è¯¯å¤„ç†è§„èŒƒ\n- æ€§èƒ½è§„èŒƒ\n\t- åŠ è½½æ€§èƒ½æ ‡å‡†\n\t- è¿è¡Œæ—¶æ€§èƒ½è¦æ±‚\n\t- å†…å­˜ä½¿ç”¨é™åˆ¶\n\t- æ‰“åŒ…ä½“ç§¯æ§åˆ¶\n- å®‰å…¨è§„èŒƒ\n\t- æ•°æ®å®‰å…¨å¤„ç†\n\t- ç”¨æˆ·ä¿¡æ¯ä¿æŠ¤\n\t- XSSé˜²æŠ¤æªæ–½\n\t- CSRFé˜²æŠ¤æªæ–½\n\n### 2.2. å›¢é˜ŸçŸ¥è¯†åº“\n\n```bash\n# å›¢é˜ŸçŸ¥è¯†åº“ç»“æ„\næŠ€æœ¯ç™¾ç§‘/\nâ”œâ”€â”€ æ¶æ„è®¾è®¡/\nâ”‚   â”œâ”€â”€ ç³»ç»Ÿè®¾è®¡æ–¹æ¡ˆ\nâ”‚   â””â”€â”€ æŠ€æœ¯é€‰å‹å†³ç­–\nâ”œâ”€â”€ è¸©å‘æŒ‡å—/\nâ”‚   â”œâ”€â”€ å¸¸è§é—®é¢˜è§£å†³\nâ”‚   â””â”€â”€ æ€§èƒ½ä¼˜åŒ–æ¡ˆä¾‹\nâ”œâ”€â”€ æŠ€æœ¯åˆ†äº«/\nâ”‚   â”œâ”€â”€ å‘¨ä¼šåˆ†äº«\nâ”‚   â””â”€â”€ æŠ€æœ¯æ²™é¾™\nâ””â”€â”€ æ–°äººæŒ‡å—/\n    â”œâ”€â”€ å…¥èŒåŸ¹è®­\n    â””â”€â”€ å¼€å‘ç¯å¢ƒæ­å»º\n```\n\n### 2.3. **è®¾è®¡è§„èŒƒ**\n\n- è§†è§‰è®¾è®¡è§„èŒƒ\n- äº¤äº’è®¾è®¡è§„èŒƒ\n- **åŠ¨æ•ˆ**è§„èŒƒ\n- æ— éšœç¢è®¾è®¡è§„èŒƒ\n\n### 2.4. åŸ¹è®­èµ„æ–™\n\n```javascript\n/training\n  /basic\n    - javascript-fundamentals.md\n    - typescript-guide.md\n    - react-best-practices.md\n  /advanced\n    - performance-optimization.md\n    - security-guidelines.md\n  /business\n    - domain-knowledge.md\n    - business-flows.md\n\n```\n\n## 3. å·¥ç¨‹åŒ–èµ„äº§&åŸºç¡€è®¾æ–½èµ„äº§\n### 3.1. **å¼€å‘ç¯å¢ƒ**\n    \n- æœ¬åœ°å¼€å‘ç¯å¢ƒé…ç½®\n- æµ‹è¯•ç¯å¢ƒ\n- é¢„å‘å¸ƒç¯å¢ƒ\n- ç”Ÿäº§ç¯å¢ƒ\n\n### 3.2. å·¥å…·é“¾\n\n```yaml\ndevTools:\n  - name: \"ä»£ç ç¼–è¾‘å™¨é…ç½®\"\n    includes:\n      - VS Code settings\n      - ESLint rules\n      - Prettier config\n  \n  - name: \"æ„å»ºå·¥å…·\"\n    includes:\n      - Webpack/Viteé…ç½®\n      - Babelè®¾ç½®\n      - PostCSSé…ç½®\n\n```\n\n### 3.3. **CI/CD é…ç½®**\n\n````artifact\nid: ci-config\nname: CI/CDé…ç½®ç¤ºä¾‹\ntype: code.yaml\ncontent: |-\n  # Jenkins Pipeline\n  pipeline:\n    stages:\n      - lint:\n          script: npm run lint\n      - test:\n          script: npm run test\n      - build:\n          script: npm run build\n      - deploy:\n          script: npm run deploy\n          \n  # è‡ªåŠ¨åŒ–æµ‹è¯•\n  test:\n    unit:\n      - jest\n      - enzyme\n    e2e:\n      - cypress\n      - playwright\n    \n  # ç›‘æ§é…ç½®\n  monitor:\n    performance:\n      - lighthouse\n      - web-vitals\n    error:\n      - sentry\n      - logging\n````\n\n### 3.4. **æ„å»ºé…ç½®æ¨¡æ¿**\n\n```javascript\n// webpacké…ç½®æ¨¡æ¿\nmodule.exports = {\n  // åŸºç¡€é…ç½®\n  base: {\n    // ...\n  },\n  // å¼€å‘ç¯å¢ƒ\n  development: {\n    // ...\n  },\n  // ç”Ÿäº§ç¯å¢ƒ\n  production: {\n    // ...\n  }\n};\n\n// babelé…ç½®æ¨¡æ¿\nmodule.exports = {\n  presets: [\n    // ...\n  ],\n  plugins: [\n    // ...\n  ]\n};\n```\n\n## 4. ä¸šåŠ¡èµ„äº§\n\n### 4.1. **ä¸šåŠ¡ç»„ä»¶**\n\n- ä¸šåŠ¡è¡¨å•\n- ä¸šåŠ¡åˆ—è¡¨\n- ä¸šåŠ¡å›¾è¡¨\n- ç‰¹å®šé¢†åŸŸç»„ä»¶\n\n### 4.2. **ä¸šåŠ¡æ¨¡å‹**\n\n```typescript\n// ç”¨æˆ·æ¨¡å‹\ninterface User {\n  id: string;\n  name: string;\n  permissions: Permission[];\n  department: Department;\n}\n\n// è®¢å•æ¨¡å‹\ninterface Order {\n  orderId: string;\n  customer: Customer;\n  products: Product[];\n  status: OrderStatus;\n  payment: Payment;\n}\n\n// ä¸šåŠ¡æµç¨‹æ¨¡å‹\ninterface BusinessFlow {\n  steps: FlowStep[];\n  rules: BusinessRule[];\n  validators: FlowValidator[];\n}\n```\n## 5. è´¨é‡ä¿éšœèµ„äº§\n\n### 5.1. **æµ‹è¯•èµ„äº§**\n\n````artifact\nid: test-assets\nname: æµ‹è¯•èµ„äº§ä½“ç³»\ntype: code.typescript\ncontent: |-\n  // 1. æµ‹è¯•ç”¨ä¾‹åº“\n  @company/test-cases\n  â”œâ”€â”€ unit/\n  â”‚   â”œâ”€â”€ components/\n  â”‚   â””â”€â”€ utils/\n  â”œâ”€â”€ integration/\n  â”‚   â”œâ”€â”€ flows/\n  â”‚   â””â”€â”€ pages/\n  â””â”€â”€ e2e/\n      â”œâ”€â”€ scenarios/\n      â””â”€â”€ fixtures/\n\n  // 2. Mockæ•°æ®åº“\n  @company/mock-data\n  â”œâ”€â”€ api/\n  â”œâ”€â”€ user/\n  â””â”€â”€ business/\n\n  // 3. æµ‹è¯•å·¥å…·é›†\n  @company/test-utils\n  â”œâ”€â”€ generators/    // æµ‹è¯•æ•°æ®ç”Ÿæˆ\n  â”œâ”€â”€ matchers/     // è‡ªå®šä¹‰åŒ¹é…å™¨\n  â””â”€â”€ helpers/      // è¾…åŠ©å‡½æ•°\n````\n\n### 5.2. **æ€§èƒ½ç›‘æ§ä½“ç³»**\n\n**ç›‘æ§ç³»ç»Ÿ**\n- æ€§èƒ½ç›‘æ§\n- é”™è¯¯ç›‘æ§\n- ç”¨æˆ·è¡Œä¸ºç›‘æ§\n- ä¸šåŠ¡ç›‘æ§\n\n```typescript\n// æ€§èƒ½ç›‘æ§é…ç½®\nconst performanceMonitor = {\n  metrics: {\n    FCP: true,      // First Contentful Paint\n    LCP: true,      // Largest Contentful Paint\n    FID: true,      // First Input Delay\n    CLS: true       // Cumulative Layout Shift\n  },\n  errorTracking: {\n    // é”™è¯¯ç›‘æ§é…ç½®\n  },\n  resourceTracking: {\n    // èµ„æºç›‘æ§é…ç½®\n  }\n};\n```\n### 5.3. **è¿ç»´å·¥å…·**\n\n```typescript\n// è¿ç»´å·¥å…·ç¤ºä¾‹\nconst devOpsTools = {\n  // æ—¥å¿—åˆ†æ\n  logAnalyzer: {\n    collect: () => {},\n    analyze: () => {},\n    alert: () => {}\n  },\n  \n  // æ€§èƒ½åˆ†æ\n  performanceAnalyzer: {\n    metrics: [],\n    analyze: () => {},\n    report: () => {}\n  },\n  \n  // å‘å¸ƒå·¥å…·\n  deployment: {\n    verify: () => {},\n    deploy: () => {},\n    rollback: () => {}\n  }\n}\n\n```\n\n## 6. å®‰å…¨èµ„äº§\n\n### 6.1. å®‰å…¨é…ç½®\n\n- CSPé…ç½®\n- å®‰å…¨å¤´é…ç½®\n- åŠ å¯†ç®—æ³•\n- å®‰å…¨ç­–ç•¥\n\n```javascript\n// å®‰å…¨é…ç½®\nmodule.exports = {\n  // CSPé…ç½®\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      scriptSrc: [\"'self'\", \"'unsafe-inline'\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n      imgSrc: [\"'self'\", \"data:\", \"https:\"],\n    }\n  },\n  // XSSé˜²æŠ¤\n  xssProtection: true,\n  // CSRFé…ç½®\n  csrfProtection: {\n    enabled: true,\n    cookieName: 'csrf-token'\n  }\n};\n```\n\n### 6.2. å®‰å…¨å·¥å…·\n\n- æ¼æ´æ‰«æå·¥å…·\n- ä¾èµ–æ£€æŸ¥å·¥å…·\n- ä»£ç å®‰å…¨å®¡è®¡å·¥å…·\n- å®‰å…¨æµ‹è¯•å¥—ä»¶\n\n## 7. è®¾è®¡èµ„äº§\n\n### 7.1. **è®¾è®¡ç³»ç»Ÿ**\n\n````artifact\nid: design-system\nname: è®¾è®¡ç³»ç»Ÿç»“æ„\ntype: markdown\ncontent: |-\n  # è®¾è®¡ç³»ç»Ÿ\n\n  ## åŸºç¡€\n  - è‰²å½©ç³»ç»Ÿ\n  - å­—ä½“ç³»ç»Ÿ\n  - é—´è·ç³»ç»Ÿ\n  - åŠ¨ç”»ç³»ç»Ÿ\n\n  ## ç»„ä»¶è®¾è®¡\n  - ç»„ä»¶å˜é‡\n  - ä¸»é¢˜é…ç½®\n  - æ ·å¼æŒ‡å—\n\n  ## è®¾è®¡èµ„æº\n  - Sketch ç»„ä»¶åº“\n  - Figma ç»„ä»¶åº“\n  - å›¾æ ‡èµ„æº\n  - æ’ç”»èµ„æº\n````\n\n## 8. æ•°æ®èµ„äº§\n\n1. **æ•°æ®åˆ†æä½“ç³»**\n```typescript\n// æ•°æ®é‡‡é›†é…ç½®\nconst analytics = {\n  // ç”¨æˆ·è¡Œä¸ºè·Ÿè¸ª\n  behavior: {\n    click: true,\n    scroll: true,\n    duration: true\n  },\n  // ä¸šåŠ¡æ•°æ®é‡‡é›†\n  business: {\n    conversion: true,\n    engagement: true\n  },\n  // æ€§èƒ½æ•°æ®\n  performance: {\n    timing: true,\n    resources: true\n  }\n};\n```\n\n## 9. æµç¨‹èµ„äº§\n\n### 9.1. **å¼€å‘æµç¨‹æ¨¡æ¿**\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-5.png)\n````mermaid\n  graph TD\n    A[éœ€æ±‚åˆ†æ] --> B[æŠ€æœ¯æ–¹æ¡ˆ]\n    B --> C[å¼€å‘å®ç°]\n    C --> D[ä»£ç å®¡æŸ¥]\n    D --> E[æµ‹è¯•éªŒè¯]\n    E --> F[éƒ¨ç½²ä¸Šçº¿]\n    F --> G[ç›‘æ§è¿ç»´]\n````\n\n### 9.2. è´¨é‡ä¿éšœæµç¨‹\n\n- ä»£ç å®¡æŸ¥æµç¨‹\n- æµ‹è¯•æµç¨‹\n- å‘å¸ƒæµç¨‹\n- **äº‹æ•…å¤„ç†**æµç¨‹\n\n### 9.3. **é¡¹ç›®ç®¡ç†æ¨¡æ¿**\n```markdown\n# é¡¹ç›®æ¨¡æ¿åº“\n\n- é¡¹ç›®å¯åŠ¨æ–‡æ¡£æ¨¡æ¿\n- æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£æ¨¡æ¿\n- è¯„å®¡ä¼šè®®è®°å½•æ¨¡æ¿\n- ä¸Šçº¿æ£€æŸ¥æ¸…å•\n- å¤ç›˜æŠ¥å‘Šæ¨¡æ¿\n```\n\n## 10. åŸ¹è®­èµ„äº§\n\n### 10.1. **åŸ¹è®­ä½“ç³»**\n```markdown\n# åŸ¹è®­èµ„æ–™åº“\n\n## æ–°äººåŸ¹è®­\n- å¼€å‘ç¯å¢ƒæ­å»º\n- åŸºç¡€æŠ€æœ¯æ ˆåŸ¹è®­\n- å·¥ç¨‹è§„èŒƒåŸ¹è®­\n- å·¥å…·ä½¿ç”¨æŒ‡å—\n\n## è¿›é˜¶åŸ¹è®­\n- æ€§èƒ½ä¼˜åŒ–ä¸“é¢˜\n- å®‰å…¨å¼€å‘å®è·µ\n- æ¶æ„è®¾è®¡æ€è·¯\n- æºç åˆ†ææ–¹æ³•\n```\n\n## 11. å…¶ä»–å»ºè®®\n\n- **èµ„äº§ç®¡ç†**\n\t- å»ºç«‹ç»Ÿä¸€çš„**èµ„äº§ç®¡ç†å¹³å°**\n\t\t- å»ºç«‹èµ„äº§ç›®å½•\n\t\t- ç‰ˆæœ¬ç®¡ç†\n\t\t- ä½¿ç”¨ç»Ÿè®¡\n\t\t- æƒé™æ§åˆ¶\n\t- ç‰ˆæœ¬æ§åˆ¶å’Œå˜æ›´è¿½è¸ª\n\t- å®šæœŸè¯„ä¼°å’Œæ›´æ–°\n\t- ä½¿ç”¨é¢‘ç‡ç»Ÿè®¡\n\t- ç»´æŠ¤æˆæœ¬è¯„ä¼°\n\t- ä»·å€¼è¯„ä¼°\n\t- æ›´æ–°æœºåˆ¶\n- **èµ„äº§è¿è¥**\n\t- å®Œå–„æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—\n\t- å»ºç«‹åé¦ˆæœºåˆ¶\n\t- æŒç»­ä¼˜åŒ–å’Œè¿­ä»£\n\t- **èµ„äº§åº¦é‡**\n\t\t- ä½¿ç”¨æƒ…å†µç»Ÿè®¡\n\t\t- é—®é¢˜åé¦ˆç»Ÿè®¡\n\t\t- ç»´æŠ¤æˆæœ¬ç»Ÿè®¡\n\t-  å†…éƒ¨æ¨å¹¿\n\t- ä½¿ç”¨åŸ¹è®­\n\t- åé¦ˆæ”¶é›†\n\t- æŒç»­ä¼˜åŒ–\n- **èµ„äº§æ²»ç†**\n\t- åˆ¶å®šèµ„äº§ç®¡ç†è§„èŒƒ\n\t- å»ºç«‹è¯„å®¡æœºåˆ¶\n\t- å®šæœŸè¿›è¡Œèµ„äº§æ¸…ç†\n\né€šè¿‡ç³»ç»ŸåŒ–ç®¡ç†è¿™äº›èµ„äº§ï¼Œå¯ä»¥ï¼š\n- æé«˜å›¢é˜Ÿå¼€å‘æ•ˆç‡\n- ä¿è¯æŠ€æœ¯æ ‡å‡†ç»Ÿä¸€\n- é™ä½ç»´æŠ¤æˆæœ¬\n- åŠ é€Ÿæ–°äººèå…¥\n- ä¿è¯ä»£ç è´¨é‡ï¼Œæå‡äº§å“è´¨é‡\n- æ²‰æ·€å›¢é˜Ÿèƒ½åŠ›\n\nè¿™äº›èµ„äº§çš„ç§¯ç´¯æ˜¯ä¸€ä¸ª**æŒç»­**çš„è¿‡ç¨‹ï¼Œéœ€è¦å›¢é˜Ÿå…±åŒç»´æŠ¤å’Œè´¡çŒ®ã€‚\n","02260e437042521f83516b7cac24bf78":"\n# Webpack 5 çš„ Module Federationï¼ˆæ¨¡å—è”é‚¦ï¼‰\n\n`#webpack` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. Module Federation åŸºæœ¬æ¦‚å¿µ \n\nModule Federation å…è®¸ä¸€ä¸ª JavaScript åº”ç”¨åŠ¨æ€åœ°åŠ è½½å¦ä¸€ä¸ªåº”ç”¨çš„ä»£ç å’Œä¾èµ–ã€‚å®ƒæ˜¯å®ç°å¾®å‰ç«¯çš„ä¸€ç§æ–¹å¼ï¼Œä½¿å¾—ä¸åŒçš„æ„å»ºå¯ä»¥åœ¨è¿è¡Œæ—¶å…±äº«ä»£ç ã€‚\n\n## 2. ä½¿ç”¨ç¤ºä¾‹\n\n### 2.1. ä¸»åº”ç”¨é…ç½®\n\n```javascript hl:6,9,13,18\n// webpack.config.js - ä¸»åº”ç”¨é…ç½®ç¤ºä¾‹\nconst ModuleFederationPlugin = require('webpack/lib/container/ModuleFederationPlugin');\n\nmodule.exports = {\n  plugins: [\n    new ModuleFederationPlugin({\n      name: 'host',              // å½“å‰åº”ç”¨åç§°\n      filename: 'remoteEntry.js', // æš´éœ²çš„æ–‡ä»¶åç§°\n      remotes: {                 // å£°æ˜éœ€è¦ä½¿ç”¨çš„è¿œç¨‹åº”ç”¨\n        app1: 'app1@http://localhost:3001/remoteEntry.js',\n        app2: 'app2@http://localhost:3002/remoteEntry.js'\n      },\n      // æš´éœ²ç»™å…¶ä»–åº”ç”¨çš„æ¨¡å—\n      exposes: {                \n        './Header': './src/components/Header',\n        './Footer': './src/components/Footer'\n      },\n      // å…±äº«ä¾èµ–\n      shared: {                 \n        react: { \n          singleton: true,      // ç¡®ä¿åªåŠ è½½ä¸€ä¸ªç‰ˆæœ¬\n          requiredVersion: '^17.0.2'\n        },\n        'react-dom': {\n          singleton: true,\n          requiredVersion: '^17.0.2'\n        }\n      }\n    })\n  ]\n};\n```\n\n### 2.2. å­åº”ç”¨é…ç½®\n\n```javascript\n// webpack.config.js - å­åº”ç”¨é…ç½®ç¤ºä¾‹\nmodule.exports = {\n  plugins: [\n    new ModuleFederationPlugin({\n      name: 'app1',\n      filename: 'remoteEntry.js',\n      exposes: {\n        './Button': './src/components/Button',\n        './Card': './src/components/Card'\n      },\n      shared: {\n        react: { singleton: true },\n        'react-dom': { singleton: true }\n      }\n    })\n  ]\n};\n```\n\n### 2.3. ä½¿ç”¨ç¤ºä¾‹ï¼šä¸»åº”ç”¨ä¸­åŠ è½½è¿œç¨‹ç»„ä»¶\n\n```javascript hl:6\n// ä¸»åº”ç”¨ä¸­åŠ è½½è¿œç¨‹ç»„ä»¶\n// App.js\nimport React, { Suspense } from 'react';\n\n// ä½¿ç”¨åŠ¨æ€å¯¼å…¥åŠ è½½è¿œç¨‹ç»„ä»¶\n// éœ€è¦å­åº”ç”¨é…ç½®ï¼Œå¹¶ä¸”expose\nconst RemoteButton = React.lazy(() => import('app1/Button'));\nconst RemoteCard = React.lazy(() => import('app1/Card'));\n\nfunction App() {\n  return (\n    <div>\n      <h1>ä¸»åº”ç”¨</h1>\n      <Suspense fallback=\"Loading Button...\">\n        <RemoteButton />\n      </Suspense>\n      <Suspense fallback=\"Loading Card...\">\n        <RemoteCard />\n      </Suspense>\n    </div>\n  );\n}\n\n// å…¥å£æ–‡ä»¶ index.js\nimport('./bootstrap').catch(err => console.error(err));\n```\n\næˆ‘æ¥ç»™æ‚¨å±•ç¤ºå‡ ä¸ª Webpack 5 Module Federation çš„å®é™…åº”ç”¨åœºæ™¯å’Œç¤ºä¾‹ã€‚\n\n## 3. åŸºç¡€ç¤ºä¾‹ï¼šä¸»åº”ç”¨å’Œè¿œç¨‹ç»„ä»¶\n\n### 3.1. Host Application (ä¸»åº”ç”¨)\n\n```javascript hl:14,26\n// webpack.config.js (ä¸»åº”ç”¨)\nconst ModuleFederationPlugin = require(\"webpack/lib/container/ModuleFederationPlugin\");\n\nmodule.exports = {\n  entry: \"./src/index\",\n  mode: \"development\",\n  devServer: {\n    port: 3000,\n  },\n  plugins: [\n    new ModuleFederationPlugin({\n      name: \"host\",\n      remotes: {\n        remote: \"remote@http://localhost:3001/remoteEntry.js\",\n      },\n      shared: {\n        react: { singleton: true },\n        \"react-dom\": { singleton: true }\n      }\n    }),\n  ],\n};\n\n// src/App.js (ä¸»åº”ç”¨)\nimport React, { Suspense } from \"react\";\nconst RemoteButton = React.lazy(() => import(\"remote/Button\"));\n\nfunction App() {\n  return (\n    <div>\n      <h1>ä¸»åº”ç”¨</h1>\n      <Suspense fallback=\"Loading Button...\">\n        <RemoteButton />\n      </Suspense>\n    </div>\n  );\n}\n```\n\n### 3.2. Remote Application (è¿œç¨‹åº”ç”¨) çš„ Button ç»„ä»¶\n\n```javascript hl:14\n// webpack.config.js (è¿œç¨‹åº”ç”¨)\nconst ModuleFederationPlugin = require(\"webpack/lib/container/ModuleFederationPlugin\");\n\nmodule.exports = {\n  entry: \"./src/index\",\n  mode: \"development\",\n  devServer: {\n    port: 3001,\n  },\n  plugins: [\n    new ModuleFederationPlugin({\n      name: \"remote\",\n      filename: \"remoteEntry.js\",\n      exposes: {\n        \"./Button\": \"./src/Button\",\n      },\n      shared: {\n        react: { singleton: true },\n        \"react-dom\": { singleton: true }\n      }\n    }),\n  ],\n};\n\n// src/Button.js (è¿œç¨‹åº”ç”¨) ç»„ä»¶\nimport React from \"react\";\n\nconst Button = () => (\n  <button onClick={() => alert(\"Hello from Remote!\")}>\n    Remote Button\n  </button>\n);\n\nexport default Button;\n```\n\n## 4. åŠ¨æ€è¿œç¨‹åŠ è½½ç¤ºä¾‹\n\n```javascript hl:10\n// webpack.config.js (ä¸»åº”ç”¨)\nconst ModuleFederationPlugin = require(\"webpack/lib/container/ModuleFederationPlugin\");\n\nmodule.exports = {\n  plugins: [\n    new ModuleFederationPlugin({\n      name: \"host\",\n      remotes: {\n        // åŠ¨æ€è¿œç¨‹é…ç½®\n        remote: `promise new Promise(resolve => {\n          const remoteUrl = window.location.hostname === 'localhost'\n            ? 'http://localhost:3001'\n            : 'https://production.com';\n          const script = document.createElement('script');\n          script.src = '${remoteUrl}/remoteEntry.js';\n          script.onload = () => {\n            resolve(window.remote);\n          };\n          document.head.appendChild(script);\n        })`,\n      },\n      shared: { react: { singleton: true } }\n    }),\n  ],\n};\n\n// App.js\nconst loadComponent = async () => {\n  const component = await import('remote/Component');\n  return component.default;\n};\n```\n\n## 5. å…±äº«çŠ¶æ€ç®¡ç†ç¤ºä¾‹\n\n```javascript hl:7\n/// store-app/webpack.config.js\nmodule.exports = {\n  plugins: [\n    new ModuleFederationPlugin({\n      name: 'store',\n      filename: 'remoteEntry.js',\n      exposes: {\n        './store': './src/store',\n        './StoreProvider': './src/StoreProvider'\n      },\n      shared: {\n        react: { singleton: true },\n        'react-redux': { singleton: true },\n        '@reduxjs/toolkit': { singleton: true }\n      }\n    })\n  ]\n};\n\n// consumer-app/webpack.config.js\nmodule.exports = {\n  plugins: [\n    new ModuleFederationPlugin({\n      name: 'consumer',\n      remotes: {\n        store: 'store@http://localhost:3002/remoteEntry.js'\n      },\n      shared: {\n        react: { singleton: true },\n        'react-redux': { singleton: true },\n        '@reduxjs/toolkit': { singleton: true }\n      }\n    })\n  ]\n};\n\n// store-app/src/store.js\nimport { configureStore } from '@reduxjs/toolkit';\n\nexport const store = configureStore({\n  reducer: {\n    // reducers\n  }\n});\n\n// consumer-app/src/App.js\nimport { Provider } from 'react-redux';\nimport { store } from 'store/store';\n\nexport default function App() {\n  return (\n    <Provider store={store}>\n      {/* åº”ç”¨å†…å®¹ */}\n    </Provider>\n  );\n}\n\n```\n\n## 6. è·¯ç”±é›†æˆç¤ºä¾‹ï¼ˆReact Routerï¼‰\n\n- å¤šä¸ªè¿œç¨‹åº”ç”¨\n\n```javascript hl:5,6\n// webpack.config.js (ä¸»åº”ç”¨)\nnew ModuleFederationPlugin({\n  name: \"host\",\n  remotes: {\n    remote1: \"remote1@http://localhost:3001/remoteEntry.js\",\n    remote2: \"remote2@http://localhost:3002/remoteEntry.js\",\n  },\n  shared: {\n    react: { singleton: true },\n    \"react-router-dom\": { singleton: true },\n  },\n});\n\n// App.js (ä¸»åº”ç”¨)\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\n\nconst RemoteApp1 = React.lazy(() => import(\"remote1/App\"));\nconst RemoteApp2 = React.lazy(() => import(\"remote2/App\"));\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Suspense fallback=\"Loading...\">\n        <Routes>\n          <Route path=\"/app1/*\" element={<RemoteApp1 />} />\n          <Route path=\"/app2/*\" element={<RemoteApp2 />} />\n        </Routes>\n      </Suspense>\n    </BrowserRouter>\n  );\n}\n```\n\n## 7. å¸¦ç‰ˆæœ¬æ§åˆ¶çš„å…±äº«ä¾èµ–ç¤ºä¾‹\n\n```javascript hl:10\n// webpack.config.js\nnew ModuleFederationPlugin({\n  name: \"host\",\n  remotes: {\n    remote: \"remote@http://localhost:3001/remoteEntry.js\",\n  },\n  shared: {\n    react: {\n      singleton: true,\n      requiredVersion: \"^18.0.0\",\n    },\n    \"react-dom\": {\n      singleton: true,\n      requiredVersion: \"^18.0.0\",\n    },\n    \"@material-ui/core\": {\n      singleton: true,\n      requiredVersion: \"^4.12.0\",\n    },\n  },\n});\n```\n\n## 8. é”™è¯¯è¾¹ç•Œå¤„ç†ç¤ºä¾‹ä¸€\n\n```javascript\n// ä¸»åº”ç”¨é…ç½®\nmodule.exports = {\n  plugins: [\n    new ModuleFederationPlugin({\n      name: 'host',\n      remotes: {\n        remoteApp: `promise new Promise((resolve, reject) => {\n          const remoteUrl = 'http://localhost:3001/remoteEntry.js';\n          const script = document.createElement('script');\n          script.src = remoteUrl;\n          script.onerror = () => {\n            console.error('Failed to load remote app');\n            resolve({\n              get: (request) => {\n                return Promise.resolve(() => {\n                  return () => {\n                    return <div>Failed to load remote component</div>;\n                  };\n                });\n              },\n              init: () => {}\n            });\n          };\n          script.onload = () => {\n            resolve(window.remoteApp);\n          };\n          document.head.appendChild(script);\n        })`\n      }\n    })\n  ]\n};\n\n// ä½¿ç”¨å¸¦é”™è¯¯å¤„ç†çš„è¿œç¨‹ç»„ä»¶\nconst RemoteComponent = React.lazy(() => {\n  return import('remoteApp/Component')\n    .catch(err => {\n      console.error('Failed to load remote component:', err);\n      return { default: () => <div>Fallback UI</div> };\n    });\n});\n\n```\n## 9. é”™è¯¯è¾¹ç•Œå¤„ç†ç¤ºä¾‹äºŒ\n\n```javascript\n// ErrorBoundary.js\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>è¿œç¨‹ç»„ä»¶åŠ è½½å¤±è´¥</h1>;\n    }\n    return this.props.children;\n  }\n}\n\n// App.js\nconst RemoteComponent = React.lazy(() => import(\"remote/Component\"));\n\nfunction App() {\n  return (\n    <ErrorBoundary>\n      <Suspense fallback=\"Loading...\">\n        <RemoteComponent />\n      </Suspense>\n    </ErrorBoundary>\n  );\n}\n```\n\n## 10. å¸¦è®¤è¯çš„æ¨¡å—è”é‚¦ç¤ºä¾‹\n\n```javascript hl:9\n// webpack.config.js\nnew ModuleFederationPlugin({\n  name: \"host\",\n  remotes: {\n    remote: `promise new Promise(resolve => {\n      const script = document.createElement('script');\n      script.src = 'http://localhost:3001/remoteEntry.js';\n      \n      // æ·»åŠ è®¤è¯token\n      script.crossOrigin = 'anonymous';\n      const token = localStorage.getItem('auth_token');\n      if (token) {\n        script.setAttribute('data-auth', token);\n      }\n      \n      script.onload = () => {\n        resolve(window.remote);\n      };\n      document.head.appendChild(script);\n    })`,\n  },\n});\n```\n\n","287e706d7e3d518b915e27d1499ff26c":"\n# ä¼˜åŒ– webpack çš„æ€§èƒ½çš„æ‰‹æ®µ\n\n`#webpack` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ \n\n### 1.1. ä½¿ç”¨ `include/exclude` ç¼©å°æ–‡ä»¶æœç´¢èŒƒå›´\n\n```javascript\nmodule: {\n  rules: [\n    {\n      test: /\\.js$/,\n      loader: 'babel-loader',\n      include: path.resolve(__dirname, 'src'), // åªå¤„ç† src ç›®å½•\n      exclude: /node_modules/  // æ’é™¤ node_modules\n    }\n  ]\n}\n```\n\n### 1.2. ä½¿ç”¨ cache-loader\n\n- åœ¨ä¸€äº›æ€§èƒ½å¼€é”€è¾ƒå¤§çš„ loader ä¹‹å‰æ·»åŠ  cache-loaderï¼Œå°†ç»“æœç¼“å­˜åˆ°ç£ç›˜é‡Œ\n\n```javascript\nmodule: {\n  rules: [\n    {\n      test: /\\.js$/,\n      use: ['cache-loader', 'babel-loader']\n    }\n  ]\n}\n```\n\n### 1.3. ä½¿ç”¨Â `hard-source-webpack-plugin`Â ä¸ºæ¨¡å—æä¾›ä¸­é—´ç¼“å­˜\n\n### 1.4. å¼€å¯å¤šè¿›ç¨‹æ‰“åŒ…\n\n- ä½¿ç”¨ thread-loader æˆ– parallel-webpack å®ç°å¤šè¿›ç¨‹æ‰“åŒ…\n\n```javascript\nmodule: {\n  rules: [\n    {\n      test: /\\.js$/,\n      use: ['thread-loader', 'babel-loader']\n    }\n  ]\n}\n```\n\n### 1.5. å…¶ä»–\n\n- é…ç½®Â `resolve.alias`Â ç®€åŒ–å¼•ç”¨è·¯å¾„\n- ä½¿ç”¨Â `resolve.modules`Â æŒ‡å®šæ¨¡å—æœç´¢ç›®å½•\n- ä½¿ç”¨Â `noParse`Â è·³è¿‡å¯¹å·²çŸ¥æ— ä¾èµ–æ¨¡å—çš„è§£æ\n- åˆç†ä½¿ç”¨Â `externals`Â å¤–éƒ¨åŒ–ä¸€äº›å¤§å‹åº“\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-74.png)\n\n## 2. ä¼˜åŒ–æ‰“åŒ…ä½“ç§¯\n\n### 2.1. ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰\n\n```javascript hl:2\noptimization: {\n  splitChunks: {\n    chunks: 'all',\n    minSize: 30000,\n    minChunks: 1,\n    cacheGroups: {\n      vendors: {\n        test: /[\\\\/]node_modules[\\\\/]/,\n        priority: -10\n      },\n      default: {\n        minChunks: 2,\n        priority: -20,\n        reuseExistingChunk: true\n      }\n    }\n  }\n}\n```\n\n#### 2.1.1. Tree Shaking\n\n- åœ¨ package.json ä¸­è®¾ç½® \"sideEffects\": false\n- ä½¿ç”¨ ES6 æ¨¡å—è¯­æ³•ï¼ˆimport/exportï¼‰\n- å¯ç”¨ç”Ÿäº§æ¨¡å¼ï¼ˆproduction modeï¼‰\n\n#### 2.1.2. å‹ç¼©ä»£ç \n\n```javascript\noptimization: {\n  minimize: true,\n  minimizer: [\n    new TerserPlugin({\n      parallel: true // å¼€å¯å¤šè¿›ç¨‹å‹ç¼©\n    })\n  ]\n}\n```\n\n## 3. ä¼˜åŒ–è¿è¡Œæ—¶æ€§èƒ½\n\n### 3.1. å¯ç”¨æŒä¹…åŒ–ç¼“å­˜\n\n```javascript\noptimization: {\n  runtimeChunk: 'single',\n  moduleIds: 'deterministic'\n}\n```\n\n### 3.2. æ‡’åŠ è½½\n\n```javascript\n// ä½¿ç”¨åŠ¨æ€ import å®ç°æ‡’åŠ è½½\nconst Home = () => import('./pages/Home');\n```\n\n## 4. åˆ†æå’Œç›‘æ§\n\n### 4.1. ä½¿ç”¨åˆ†æå·¥å…·\n\n- webpack-bundle-analyzerï¼šå¯è§†åŒ–åˆ†ææ‰“åŒ…ç»“æœ\n```javascript\nconst BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;\n\nmodule.exports = {\n  plugins: [\n    new BundleAnalyzerPlugin()\n  ]\n}\n```\n\n### 4.2. é€Ÿåº¦åˆ†æ\n\n- speed-measure-webpack-pluginï¼šåˆ†æå„ä¸ª loader å’Œ plugin çš„æ‰§è¡Œæ—¶é—´\n\n## 5. DLL åŠ¨æ€é“¾æ¥åº“\n\n```javascript\n// webpack.dll.config.js\nnew webpack.DllPlugin({\n  path: path.join(__dirname, 'dist', '[name]-manifest.json'),\n  name: '[name]_library'\n})\n\n// webpack.config.js\nnew webpack.DllReferencePlugin({\n  manifest: require('./dist/vendor-manifest.json')\n})\n```\n\n## 6. å…¶ä»–ä¼˜åŒ–æªæ–½\n\n### 6.1. åˆç†ä½¿ç”¨ sourceMap\n\n- å¼€å‘ç¯å¢ƒä½¿ç”¨ eval-cheap-module-source-map\n- ç”Ÿäº§ç¯å¢ƒå¯ä»¥é€‰æ‹©ä¸ä½¿ç”¨æˆ–ä½¿ç”¨ nosources-source-map\n\n### 6.2. ä¼˜åŒ–è§£æé…ç½®\n\n```javascript\nresolve: {\n  extensions: ['.js', '.jsx'], // æŒ‡å®šä¼˜å…ˆçº§\n  alias: {\n    '@': path.resolve(__dirname, 'src') // è®¾ç½®åˆ«å\n  }\n}\n```\n\n","1bc6047ae29d5194bc31c6a1c56ccdc3":"\n# å½“å‰ä¸»æµçš„å‰ç«¯æ„å»ºå·¥å…·\n\n`#webpack` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. Vite \n\n1. å¼€å‘ç¯å¢ƒä½¿ç”¨åŸç”Ÿ ESMï¼Œå¯åŠ¨é€Ÿåº¦å¿«\n2. ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ Rollup æ„å»º\n3. å†…ç½®å¯¹ TypeScriptã€JSXã€CSS ç­‰çš„æ”¯æŒ\n4. ä¼˜ç§€çš„ HMR æ€§èƒ½\n\n### 1.1. ä¸ºä»€ä¹ˆ vite HMR æ€§èƒ½æ¯”è¾ƒå¥½\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-33.png)\n## 2. Turbopack (Next.js 13 çš„æ„å»ºå·¥å…·)\n\nTurbopack æ˜¯ Vercel æ¨å‡ºçš„æ–°ä¸€ä»£æ‰“åŒ…å·¥å…·ï¼Œä½¿ç”¨ Rust ç¼–å†™ã€‚\n\n```javascript\n// next.config.js\nmodule.exports = {\n  experimental: {\n    turbo: {\n      loaders: {\n        // è‡ªå®šä¹‰åŠ è½½å™¨é…ç½®\n        '.png': ['file-loader'],\n        '.svg': ['@svgr/webpack']\n      },\n      resolveAlias: {\n        '@': path.resolve(__dirname, 'src')\n      }\n    }\n  }\n}\n```\n\nä¸»è¦ç‰¹ç‚¹ï¼š\n\n1. æå¿«çš„æ„å»ºé€Ÿåº¦ï¼ˆå£°ç§°æ¯” Vite å¿« 10 å€ï¼‰\n2. å¢é‡è®¡ç®—\n3. ä¸ Next.js æ·±åº¦é›†æˆ\n4. å†…å­˜ç¼“å­˜ä¼˜åŒ–\n\n## 3. esbuild\n\nè¶…å¿«çš„ JavaScript æ‰“åŒ…å™¨ï¼Œç”¨ Go è¯­è¨€ç¼–å†™ã€‚\n\nä¸»è¦ç‰¹ç‚¹ï¼š\n1. æè‡´çš„æ„å»ºé€Ÿåº¦\n2. æ”¯æŒ TypeScript å’Œ JSX\n3. ä½“ç§¯å°ï¼Œæ— ä¾èµ–\n4. API ç®€å•ç›´è§‚\n\n## 4. Rollup\n\né¢å‘ ESM çš„ä¸“ä¸šæ‰“åŒ…å·¥å…·ã€‚\n\nä¸»è¦ç‰¹ç‚¹ï¼š\n1. ä¼˜ç§€çš„ Tree-shaking\n2. æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼\n3. æ’ä»¶ç”Ÿæ€ä¸°å¯Œ\n4. é€‚åˆåº“çš„æ‰“åŒ…\n\n## 5. Webpack 5\n\nä»ç„¶æ˜¯æœ€æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆã€‚\n\nä¸»è¦ç‰¹ç‚¹ï¼š\n1. åŠŸèƒ½æœ€å®Œæ•´\n2. ç”Ÿæ€ç³»ç»Ÿæœ€å¤§\n3. é…ç½®çµæ´»\n4. æ”¯æŒæ¨¡å—è”é‚¦\n\n## 6. Parcel\n\né›¶é…ç½®çš„æ„å»ºå·¥å…·ã€‚\n\n```javascript\n// package.json\n{\n  \"source\": \"src/index.html\",\n  \"scripts\": {\n    \"start\": \"parcel\",\n    \"build\": \"parcel build\"\n  }\n}\n\n// å¯é€‰çš„ .parcelrc é…ç½®\n{\n  \"extends\": \"@parcel/config-default\",\n  \"transformers\": {\n    \"*.{ts,tsx}\": [\"@parcel/transformer-typescript-tsc\"]\n  }\n}\n```\n\nä¸»è¦ç‰¹ç‚¹ï¼š\n1. é›¶é…ç½®\n2. è‡ªåŠ¨å®‰è£…ä¾èµ–\n3. å¤šæ ¸å¹¶è¡Œå¤„ç†\n4. å†…ç½®ä¼˜åŒ–åŠŸèƒ½\n\n## 7. SWC (Speedy Web Compiler)\n\nç”¨ Rust ç¼–å†™çš„è¶…å¿«çš„ TypeScript/JavaScript ç¼–è¯‘å™¨ã€‚\n\n```javascript\n// .swcrc\n{\n  \"jsc\": {\n    \"parser\": {\n      \"syntax\": \"typescript\",\n      \"tsx\": true\n    },\n    \"transform\": {\n      \"react\": {\n        \"runtime\": \"automatic\"\n      }\n    },\n    \"target\": \"es2015\"\n  },\n  \"minify\": true\n}\n```\n\nä¸»è¦ç‰¹ç‚¹ï¼š\n1. æ¯” Babel å¿« 20 å€\n2. å¯ä½œä¸ºå…¶ä»–æ„å»ºå·¥å…·çš„ç¼–è¯‘å™¨\n3. æ”¯æŒ TypeScript å’Œ JSX\n4. æä¾›ç‹¬ç«‹çš„ CLI å·¥å…·\n\n## 8. æ„å»ºå·¥å…·å¯¹æ¯”\n\n| å·¥å…· | å¼€å‘ä½“éªŒ | æ„å»ºé€Ÿåº¦ | é…ç½®å¤æ‚åº¦ | ç”Ÿæ€ç³»ç»Ÿ | é€‚ç”¨åœºæ™¯ |\n|------|----------|----------|------------|----------|----------|\n| Vite | æä½³ | å¿« | ä½ | è‰¯å¥½ | ç°ä»£Webåº”ç”¨ |\n| Turbopack | æä½³ | æå¿« | ä¸­ | å‘å±•ä¸­ | Next.jsé¡¹ç›® |\n| esbuild | å¥½ | æå¿« | ä½ | ä¸€èˆ¬ | ç®€å•é¡¹ç›®/å·¥å…·åº“ |\n| Rollup | å¥½ | ä¸­ç­‰ | ä¸­ | ä¸°å¯Œ | åº“å¼€å‘ |\n| Webpack | å¥½ | ä¸­ç­‰ | é«˜ | æœ€ä¸°å¯Œ | å¤æ‚åº”ç”¨ |\n| Parcel | æä½³ | å¿« | æä½ | ä¸€èˆ¬ | å°å‹é¡¹ç›® |\n| SWC | å¥½ | æå¿« | ä½ | å‘å±•ä¸­ | ç¼–è¯‘å™¨/å·¥å…·é“¾ |\n\n","9e9b7c72335355ac94a813f65b132484":"\n# vite ä¸­å¦‚ä½•ä½¿ç”¨ Module Federationï¼ˆæ¨¡å—è”é‚¦ï¼‰\n\n\nåœ¨ Vite ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `@originjs/vite-plugin-federation` æ’ä»¶æ¥å®ç°æ¨¡å—è”é‚¦åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„ä½¿ç”¨æ­¥éª¤å’Œç¤ºä¾‹ï¼š\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åŸºæœ¬é…ç½®ç¤ºä¾‹ \n\n### 1.1. ä¸»åº”ç”¨ï¼ˆHostï¼‰é…ç½®\n\n```typescript\n// vite.config.ts\nimport { defineConfig } from 'vite'\nimport federation from '@originjs/vite-plugin-federation'\n\nexport default defineConfig({\n  plugins: [\n    federation({\n      name: 'host-app',\n      remotes: {\n        remoteApp: {\n          external: 'http://localhost:5001/assets/remoteEntry.js',\n          format: 'esm'\n        }\n      },\n      shared: ['vue', 'pinia'] // å…±äº«ä¾èµ–\n    })\n  ]\n})\n```\n\n### 1.2. è¿œç¨‹åº”ç”¨ï¼ˆRemoteï¼‰é…ç½®\n\n```typescript hl:10\n// vite.config.ts\nimport { defineConfig } from 'vite'\nimport federation from '@originjs/vite-plugin-federation'\n\nexport default defineConfig({\n  plugins: [\n    federation({\n      name: 'remote-app',\n      filename: 'remoteEntry.js',\n      exposes: {\n        './Button': './src/components/Button.vue',\n        './Header': './src/components/Header.vue'\n      },\n      shared: ['vue', 'pinia']\n    })\n  ],\n  build: {\n    target: 'esnext'\n  }\n})\n```\n\n## 2. ä½¿ç”¨è¿œç¨‹ç»„ä»¶\n\n```vue hl:15\n<!-- ä¸»åº”ç”¨ä¸­ä½¿ç”¨è¿œç¨‹ç»„ä»¶ -->\n<template>\n  <div>\n    <h1>Host Application</h1>\n    <Suspense>\n      <RemoteButton />\n    </Suspense>\n  </div>\n</template>\n\n<script setup>\nimport { defineAsyncComponent } from 'vue'\n\nconst RemoteButton = defineAsyncComponent(() => \n  import('remoteApp/Button')\n)\n</script>\n```\n\n## 3. å¸¦ç‰ˆæœ¬æ§åˆ¶çš„å…±äº«ä¾èµ–\n\n```typescript hl:15\n// vite.config.ts\nexport default defineConfig({\n  plugins: [\n    federation({\n      name: 'host-app',\n      remotes: {\n        remoteApp: 'http://localhost:5001/assets/remoteEntry.js'\n      },\n      shared: {\n        vue: { \n          requiredVersion: '^3.2.0',\n          singleton: true \n        },\n        'vue-router': {\n          requiredVersion: '^4.0.0',\n          singleton: true\n        }\n      }\n    })\n  ]\n})\n```\n\n## 4. åŠ¨æ€è¿œç¨‹åŠ è½½\n\n```typescript hl:8\n// vite.config.ts\nexport default defineConfig({\n  plugins: [\n    federation({\n      name: 'host-app',\n      remotes: {\n        remoteApp: {\n          external: `Promise.resolve('http://localhost:5001/assets/remoteEntry.js')`,\n          format: 'esm'\n        }\n      }\n    })\n  ]\n})\n```\n\n## 5. å¼€å‘æ¨¡å¼é…ç½®\n\n```typescript\n// vite.config.ts\nexport default defineConfig({\n  plugins: [\n    federation({\n      name: 'remote-app',\n      filename: 'remoteEntry.js',\n      exposes: {\n        './components': './src/components/index.ts'\n      },\n      shared: ['vue']\n    })\n  ],\n  build: {\n    target: 'esnext',\n    minify: false,\n    cssCodeSplit: false,\n    sourcemap: true\n  }\n})\n```\n\n## 6. é”™è¯¯å¤„ç†å’Œé™çº§ç­–ç•¥\n\nä¸‹é¢æ˜¯ä¸€ä¸ªåŒ…è£…åçš„ `RemoteComponent` ç»„ä»¶\n\n```vue\n<template>\n  <Suspense>\n    <template `#default>`\n      <RemoteComponent />\n    </template>\n    <template `#fallback>`\n      <div>Loading remote component...</div>\n    </template>\n  </Suspense>\n</template>\n\n<script setup>\nimport { defineAsyncComponent, h } from 'vue'\n\nconst RemoteComponent = defineAsyncComponent({\n  loader: () => import('remoteApp/Component'),\n  loadingComponent: () => h('div', 'Loading...'),\n  errorComponent: () => h('div', 'Failed to load component'),\n  delay: 200,\n  timeout: 3000\n})\n</script>\n```\n\n## 7. ç¤ºä¾‹ï¼šå¦‚ä½•åœ¨ Vite çš„ Module Federation ä¸­å…±äº« Pinia çŠ¶æ€\n\n### 7.1. é¦–å…ˆéœ€è¦åœ¨`ä¸»åº”ç”¨å’Œè¿œç¨‹åº”ç”¨`ä¸­éƒ½é…ç½® Pinia ä½œä¸ºå…±äº«ä¾èµ–\n\n```typescript\n// vite.config.ts (ä¸»åº”ç”¨å’Œè¿œç¨‹åº”ç”¨éƒ½éœ€è¦é…ç½®)\nimport { defineConfig } from 'vite'\nimport federation from '@originjs/vite-plugin-federation'\n\nexport default defineConfig({\n  plugins: [\n    federation({\n      // ... å…¶ä»–é…ç½®\n      shared: {\n        vue: {\n          singleton: true,\n          requiredVersion: '^3.0.0'\n        },\n        pinia: {\n          singleton: true,\n          requiredVersion: '^2.0.0'\n        }\n      }\n    })\n  ]\n})\n```\n\nåˆ›å»ºå…±äº« Store\n\n### 7.2. `è¿œç¨‹åº”ç”¨`ä¸­å®šä¹‰ Store ï¼Œå¹¶æš´éœ² Store\n\n#### 7.2.1. å®šä¹‰ Store \n\n```typescript\n// remote-app/src/stores/counter.ts\nimport { defineStore } from 'pinia'\n\nexport const useCounterStore = defineStore('counter', {\n  state: () => ({\n    count: 0,\n    message: 'Hello from Remote App'\n  }),\n  \n  actions: {\n    increment() {\n      this.count++\n    },\n    decrement() {\n      this.count--\n    },\n    setMessage(msg: string) {\n      this.message = msg\n    }\n  },\n  \n  getters: {\n    doubleCount(): number {\n      return this.count * 2\n    }\n  }\n})\n\n// å¯¼å‡º store å®šä¹‰\nexport type CounterStore = ReturnType<typeof useCounterStore>\n```\n\n#### 7.2.2. æš´éœ² Store\n\n```typescript\n// remote-app/src/stores/index.ts\nexport { useCounterStore } from './counter'\n\n// vite.config.ts (è¿œç¨‹åº”ç”¨)\nexport default defineConfig({\n  plugins: [\n    federation({\n      name: 'remote-app',\n      filename: 'remoteEntry.js',\n      exposes: {\n        './stores': './src/stores/index.ts'\n      },\n      shared: {\n        vue: { singleton: true },\n        pinia: { singleton: true }\n      }\n    })\n  ]\n})\n```\n\n### 7.3. ä¸»åº”ç”¨åˆ›å»º Pinia å®ä¾‹ï¼Œå¹¶ä½¿ç”¨è¿œç¨‹ Store\n\n#### 7.3.1. ä¸»åº”ç”¨ä¸­åˆ›å»º Pinia å®ä¾‹\n\n```typescript\n// host-app/src/main.ts\nimport { createApp } from 'vue'\nimport { createPinia } from 'pinia'\nimport App from './App.vue'\n\nconst app = createApp(App)\nconst pinia = createPinia()\n\napp.use(pinia)\napp.mount('#app')\n```\n\n#### 7.3.2. ä¸»åº”ç”¨ä¸­ä½¿ç”¨è¿œç¨‹ Store\n\n```typescript hl:17\n// host-app/src/components/Counter.vue\n<template>\n  <div>\n    <h2>Counter from Remote Store</h2>\n    <p>Count: {{ counter.count }}</p>\n    <p>Double Count: {{ counter.doubleCount }}</p>\n    <p>Message: {{ counter.message }}</p>\n    \n    <button @click=\"counter.increment()\">Increment</button>\n    <button @click=\"counter.decrement()\">Decrement</button>\n    <button @click=\"updateMessage\">Update Message</button>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted } from 'vue'\nimport { useCounterStore } from 'remoteApp/stores'\n\nconst counter = useCounterStore()\n\nconst updateMessage = () => {\n  counter.setMessage('Updated from Host App')\n}\n\nonMounted(() => {\n  // åˆå§‹åŒ–æ“ä½œ\n  console.log('Store mounted in host app')\n})\n</script>\n```\n\n#### 7.3.3. åœ¨ä¸»åº”ç”¨ä¸­æ‰©å±•è¿œç¨‹ Store\n\n```typescript\n// host-app/src/stores/enhancedCounter.ts\nimport { defineStore } from 'pinia'\nimport { useCounterStore } from 'remoteApp/stores'\n\nexport const useEnhancedCounterStore = defineStore('enhancedCounter', {\n  state: () => ({\n    localData: 'Host App Data'\n  }),\n  \n  actions: {\n    async complexAction() {\n      const remoteCounter = useCounterStore()\n      remoteCounter.increment()\n      this.localData = `Updated after remote count: ${remoteCounter.count}`\n    }\n  },\n  \n  getters: {\n    combinedInfo(): string {\n      const remoteCounter = useCounterStore()\n      return `${this.localData} - Remote Count: ${remoteCounter.count}`\n    }\n  }\n})\n```\n\n## 8. æ³¨æ„äº‹é¡¹\n\n- ç¡®ä¿å°†æ„å»ºç›®æ ‡è®¾ç½®ä¸º 'esnext'ï¼Œä»¥æ”¯æŒåŠ¨æ€å¯¼å…¥\n- åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è€ƒè™‘å¯ç”¨ä»£ç åˆ†å‰²å’Œå‹ç¼©\n- å¼€å‘æ—¶å»ºè®®ç¦ç”¨ä»£ç å‹ç¼©ï¼Œä¾¿äºè°ƒè¯•ï¼Œå¹¶å¯åŠ¨ sourcemap\n- ä½¿ç”¨ `singleton` æ¨¡å¼é¿å…å¤šä¸ªç‰ˆæœ¬å…±å­˜\n- æ˜ç¡®æŒ‡å®šå…±äº«ä¾èµ–çš„ç‰ˆæœ¬è¦æ±‚\n- å®ç°åˆé€‚çš„åŠ è½½çŠ¶æ€å’Œé”™è¯¯æç¤ºåŠé™çº§æ–¹æ¡ˆ\n\n","ae6194feba05522bab4e7a1dda1a7808":"\n# å‰ç«¯æ„å»ºæé€Ÿçš„ä½“ç³»åŒ–æ€è·¯\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ„å»ºç›¸å…³ 5 ä¸ªæ—¶ä»£ \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-34.png)\n\n### 1.1. æ–‡ä»¶å³scripæ—¶ä»£\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-35.png)\n\n### 1.2. å¤§æ–‡ä»¶æ—¶ä»£ï¼šgrunt/gulp/iife\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-36.png)\n\n### 1.3. AMD å’Œ CMD æ—¶ä»£\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-37.png)\n\nä¸‰ä¸ªé—®é¢˜éƒ½è§£å†³äº†\n\n### 1.4. webpack æ—¶ä»£\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-38.png)\n\nè™½ç„¶ä¸‰ä¸ªé—®é¢˜éƒ½è§£å†³äº†ï¼Œä½†æ–°çš„é—®é¢˜åˆå‡ºç°äº†\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-39.png)\n\nä¸¾ä¸ªä¾‹å­\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-41.png)\n\nä¸åŒçš„æ…¢æœ‰ä¸åŒçš„è§£\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-42.png)\n\n### 1.5. esm å¹´ä»£\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-43.png)\n\n> åé¢è¯´\n\n## 2. æ„å»ºæé€Ÿçš„ä½“ç³»åŒ–æ€è·¯\n\n### 2.1. æ„å»ºæ¯ä¸ªé˜¶æ®µéƒ½è€—æ—¶\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-44.png)\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-45.png)\n\n### 2.2. æé€Ÿçš„ä¸‰ä¸ªæ€è·¯\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-46.png)\n\n#### 2.2.1. ç¼“å­˜\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-47.png)\n\n#### 2.2.2. å»¶è¿Ÿå¤„ç†\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-48.png)\n\n#### 2.2.3. native code\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-49.png)\n\n#### 2.2.4. æé€Ÿæ–¹æ¡ˆä¸‰ä¸ªæ€è·¯çš„åº”ç”¨ï¼šæ³¨æ„é¢œè‰²\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-51.png)\n\n### 2.3. ä¼ ç»Ÿæé€Ÿæ–¹æ¡ˆï¼šexternals\n\n- `externals`ï¼šç”¨äºæ ‡è®°ä¸ç”¨æ‰“åŒ…çš„åº“æ¨¡å—ï¼Œå¦‚`JQueryã€react-dom`ç­‰ã€‚å¯ä»¥ç›´æ¥é€šè¿‡scriptçš„æ–¹å¼åŠ è½½\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-54.png)\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-55.png)\n\nå¯ç”¨`auto externals`æ¥è§£å†³é…ç½®å¤æ‚é—®é¢˜\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-56.png)\n\n### 2.4. ä¼ ç»Ÿæé€Ÿæ–¹æ¡ˆï¼šdll\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-57.png)\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-58.png)\n\n### 2.5. ä¼ ç»Ÿæé€Ÿæ–¹æ¡ˆï¼šæŒ‰éœ€ç¼–è¯‘\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-61.png)\n\n### 2.6. ä¼ ç»Ÿç”Ÿäº§ä¼˜åŒ–æ€è·¯\n\n#### 2.6.1. 1ã€webpackæ„å»ºä¸­tree shaking\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-59.png)\n\n#### 2.6.2. 2ã€æ— ç”¨æŠ¹é™¤\n\nå¯ä»¥å¯¹js/æˆ–è€…cssåšæ— ç”¨æŠ¹é™¤ï¼Œcsséœ€è¦å¼•å…¥åŒ…`npm i purgecss-webpack-plugin -D`\n\n#### 2.6.3. webpackæ„å»ºä¸­ scope Hoisting\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-60.png)\n\n### 2.7. å½“ä»£æé€Ÿæ€è·¯\n\n#### 2.7.1. umi\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-62.png)\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-63.png)\n\n#### 2.7.2. vite\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-64.png)\n\n#### 2.7.3. umi çš„ mfsu\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-65.png)\n\nä½¿ç”¨ Module Federation ï¼ˆäº‘ç»„ä»¶ï¼‰äº†\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-66.png)\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-67.png)\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-68.png)\n\n### 2.8. ESM CDN â½…æ¡ˆ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-69.png)\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-70.png)\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-71.png)\n\n## 3. æ€»ç»“\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-72.png)\n\n","57702019a2f757f48290de3bdc0ec7e1":"\n# vite çš„æ¶æ„è®¾è®¡\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## ä¾èµ–çš„æ„å»ºå·¥å…· \n\n- Rollupï¼ˆç”Ÿäº§æ„å»ºï¼‰\n- ESBuildï¼ˆå¼€å‘æ—¶è½¬æ¢ï¼‰\n- PostCSSï¼ˆCSS å¤„ç†ï¼‰\n\n","2ece6231766a5199bf9d8dd6e036543e":"\n# Babel  çš„åŸç†ï¼ˆç¯‡ä¸€ï¼‰\n\n\n`#babel` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. Babel çš„æ•´ä½“å·¥ä½œæµç¨‹å›¾ \n\n````mermaid\n\n    graph TB\n    A[æºä»£ç ] --> B[Parseè§£æ]\n    B --> C[è¯æ³•åˆ†æ<br>Tokenizer]\n    C --> D[è¯­æ³•åˆ†æ<br>Parser]\n    D --> E[AST<br>æŠ½è±¡è¯­æ³•æ ‘]\n    E --> F[Transformè½¬æ¢]\n    F --> G[éå†<br>Traverse]\n    G --> H[è®¿é—®<br>Visitor]\n    H --> I[ä¿®æ”¹AST]\n    I --> J[Generateç”Ÿæˆ]\n    J --> K[ç›®æ ‡ä»£ç ]\n````\n\n## 2. è§£æï¼ˆParseï¼‰\n\n   - è¯æ³•åˆ†æï¼ˆTokenizerï¼‰ï¼šå°†æºä»£ç è½¬æ¢æˆä»¤ç‰Œï¼ˆTokenï¼‰æµ\n   - è¯­æ³•åˆ†æï¼ˆParserï¼‰ï¼šå°†ä»¤ç‰Œæµè½¬æ¢æˆ AST\n   \nè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼š\n\n```javascript\n// æºä»£ç \nconst sum = (a, b) => a + b;\n\n// è¯æ³•åˆ†æåçš„ Tokensï¼ˆç®€åŒ–è¡¨ç¤ºï¼‰\n[\n  { type: \"keyword\", value: \"const\" },\n  { type: \"identifier\", value: \"sum\" },\n  { type: \"operator\", value: \"=\" },\n  { type: \"punctuator\", value: \"(\" },\n  { type: \"identifier\", value: \"a\" },\n  { type: \"punctuator\", value: \",\" },\n  { type: \"identifier\", value: \"b\" },\n  { type: \"punctuator\", value: \")\" },\n  { type: \"operator\", value: \"=>\" },\n  { type: \"identifier\", value: \"a\" },\n  { type: \"operator\", value: \"+\" },\n  { type: \"identifier\", value: \"b\" }\n]\n```\n\n## 3. è½¬æ¢ï¼ˆTransformï¼‰\n\n   - éå†ï¼ˆTraverseï¼‰ï¼šæ·±åº¦ä¼˜å…ˆéå† AST\n   - è®¿é—®ï¼ˆVisitorï¼‰ï¼šå¯¹ AST èŠ‚ç‚¹è¿›è¡Œå¢åˆ æ”¹\n   - åº”ç”¨æ’ä»¶ï¼šä½¿ç”¨å„ç§ Babel æ’ä»¶è½¬æ¢ä»£ç \n\nè¿™æ˜¯ AST çš„ç®€åŒ–ç¤ºä¾‹ï¼š\n\n```javascript\n{\n  type: \"Program\",\n  body: [{\n    type: \"VariableDeclaration\",\n    declarations: [{\n      type: \"VariableDeclarator\",\n      id: {\n        type: \"Identifier\",\n        name: \"sum\"\n      },\n      init: {\n        type: \"ArrowFunctionExpression\",\n        params: [\n          {\n            type: \"Identifier\",\n            name: \"a\"\n          },\n          {\n            type: \"Identifier\",\n            name: \"b\"\n          }\n        ],\n        body: {\n          type: \"BinaryExpression\",\n          operator: \"+\",\n          left: {\n            type: \"Identifier\",\n            name: \"a\"\n          },\n          right: {\n            type: \"Identifier\",\n            name: \"b\"\n          }\n        }\n      }\n    }]\n  }]\n}\n```\n\n## 4. ç”Ÿæˆï¼ˆGenerateï¼‰\n\n   - æ ¹æ®è½¬æ¢åçš„ AST ç”Ÿæˆæ–°çš„ä»£ç \n   - å¤„ç†æ ¼å¼åŒ–ã€ç©ºç™½å’Œæ³¨é‡Š\n\nè½¬æ¢åçš„ä»£ç å¯èƒ½å¦‚ä¸‹ï¼š\n\n```javascript\n\"use strict\";\n\nvar sum = function sum(a, b) {\n  return a + b;\n};\n```\n\n## 5. Babel æ’ä»¶ç³»ç»Ÿ\n\nBabel çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå…¶æ’ä»¶ç³»ç»Ÿï¼š\n\n### 5.1. è¯­æ³•æ’ä»¶ï¼ˆSyntax Pluginsï¼‰\n\n- ç”¨äºè§£æç‰¹å®šè¯­æ³•\n- ä¾‹å¦‚ï¼š@babel/plugin-syntax-jsx\n\n### 5.2. è½¬æ¢æ’ä»¶ï¼ˆTransform Pluginsï¼‰\n\n- ç”¨äºè½¬æ¢ç‰¹å®šè¯­æ³•\n- ä¾‹å¦‚ï¼š@babel/plugin-transform-arrow-functions\n\n### 5.3. é¢„è®¾ï¼ˆPresetsï¼‰\n\n- æ’ä»¶é›†åˆ\n- å¸¸ç”¨é¢„è®¾ï¼š@babel/preset-env, @babel/preset-react\n\né…ç½®ç¤ºä¾‹\n\n```javascript\n// babel.config.js\nmodule.exports = {\n  presets: [\n    [\"@babel/preset-env\", {\n      targets: {\n        browsers: [\"> 1%\", \"last 2 versions\"]\n      }\n    }]\n  ],\n  plugins: [\n    \"@babel/plugin-transform-arrow-functions\",\n    \"@babel/plugin-transform-runtime\"\n  ]\n}\n```\n\n## 6. å¸¸ç”¨åŒ…\n\n### 6.1. @babel/parser\n\nè¿™ä¸ª API ç”¨äºå°†æºä»£ç è§£ææˆ ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ã€‚\n\n```javascript\nconst parser = require('@babel/parser');\n\nconst code = 'const square = (x) => x * x;';\nconst ast = parser.parse(code, {\n  sourceType: 'module',\n  plugins: ['jsx']\n});\n\nconsole.log(ast);\n```\n\n### 6.2. @babel/traverse\n\nè¿™ä¸ª API ç”¨äºéå†å’Œä¿®æ”¹ ASTã€‚\n\n```javascript\nconst parser = require('@babel/parser');\nconst traverse = require('@babel/traverse').default;\n\nconst code = 'const square = (x) => x * x;';\nconst ast = parser.parse(code);\n\ntraverse(ast, {\n  ArrowFunctionExpression(path) {\n    console.log('Found an arrow function');\n  },\n  Identifier(path) {\n    console.log(`Found identifier: ${path.node.name}`);\n  }\n});\n```\n\n### 6.3. @babel/types\n\nè¿™ä¸ª API æä¾›äº†ç”¨äº AST èŠ‚ç‚¹çš„ç±»å‹æ£€æŸ¥å’ŒèŠ‚ç‚¹åˆ›å»ºçš„æ–¹æ³•ã€‚\n\n```javascript\nconst t = require('@babel/types');\n\n// åˆ›å»ºä¸€ä¸ªæ ‡è¯†ç¬¦èŠ‚ç‚¹\nconst identifier = t.identifier('x');\n\n// åˆ›å»ºä¸€ä¸ªäºŒå…ƒè¡¨è¾¾å¼èŠ‚ç‚¹\nconst binaryExpression = t.binaryExpression('*', identifier, identifier);\n\n// åˆ›å»ºä¸€ä¸ªç®­å¤´å‡½æ•°è¡¨è¾¾å¼èŠ‚ç‚¹\nconst arrowFunction = t.arrowFunctionExpression(\n  [identifier],\n  binaryExpression\n);\n\nconsole.log(arrowFunction);\n```\n\n### 6.4. @babel/generator\n\nè¿™ä¸ª API ç”¨äºä» AST ç”Ÿæˆä»£ç ã€‚\n\n```javascript\nconst parser = require('@babel/parser');\nconst generate = require('@babel/generator').default;\n\nconst code = 'const square = (x) => x * x;';\nconst ast = parser.parse(code);\n\nconst output = generate(ast, {}, code);\nconsole.log(output.code);\n```\n\n### 6.5. @babel/core\n\nè¿™æ˜¯ Babel çš„æ ¸å¿ƒ APIï¼Œå®ƒç»“åˆäº†è§£æã€è½¬æ¢å’Œç”Ÿæˆçš„åŠŸèƒ½ã€‚\n\n```javascript\nconst babel = require('@babel/core');\n\nconst code = 'const square = (x) => x * x;';\n\nbabel.transform(code, {\n  plugins: ['@babel/plugin-transform-arrow-functions']\n}, (err, result) => {\n  if (err) {\n    console.error(err);\n  } else {\n    console.log(result.code);\n  }\n});\n```\n\n### 6.6. æ›´å¤æ‚çš„ä¾‹å­\n\nç¤ºå¦‚ä½•ä½¿ç”¨è¿™äº› API æ¥åˆ›å»ºä¸€ä¸ªç®€å•çš„ Babel æ’ä»¶ï¼š\n\nè¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªç®€å•çš„ Babel æ’ä»¶ï¼Œå°†å­—ç¬¦ä¸²è¿æ¥æ“ä½œ (`+`) è½¬æ¢ä¸º `String.concat()` æ–¹æ³•è°ƒç”¨ã€‚\n\n````js\n  const parser = require('@babel/parser');\n  const traverse = require('@babel/traverse').default;\n  const generate = require('@babel/generator').default;\n  const t = require('@babel/types');\n\n  // æºä»£ç \n  const code = `\n  function greet(name) {\n    console.log('Hello, ' + name + '!');\n  }\n  `;\n\n  // è§£æä»£ç ä¸º AST\n  const ast = parser.parse(code);\n\n  // éå† AST å¹¶ä¿®æ”¹\n  traverse(ast, {\n    BinaryExpression(path) {\n      if (path.node.operator === '+') {\n        path.replaceWith(\n          t.callExpression(\n            t.memberExpression(t.identifier('String'), t.identifier('concat')),\n            path.node.left.type === 'StringLiteral' \n              ? [path.node.left, path.node.right]\n              : [path.node.right, path.node.left]\n          )\n        );\n      }\n    }\n  });\n\n  // ç”Ÿæˆæ–°çš„ä»£ç \n  const output = generate(ast, {}, code);\n\n  console.log('è½¬æ¢åçš„ä»£ç :');\n  console.log(output.code);\n````\n\n","c24659bb7ca1589d9177fec52b074a77":"\n# Babel  çš„åŸç†ï¼ˆç¯‡äºŒï¼‰\n\n`#babel` \n\n\n## ç›®å½•\n<!-- toc -->\n ## console.log(\"hello world\") ä¸ºä¾‹ \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-22.png)\n\n## Babel æ¶æ„\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-23.png)\n\n- @babel/core\n\t-  åŠ è½½å’Œå¤„ç†é…ç½®(config)\n\t- åŠ è½½æ’ä»¶\n\t- è°ƒç”¨Â `Parser`Â è¿›è¡Œè¯­æ³•è§£æï¼Œç”ŸæˆÂ `AST`\n\t- è°ƒç”¨Â `Traverser`Â éå†ASTï¼Œå¹¶ä½¿ç”¨`è®¿é—®è€…æ¨¡å¼`åº”ç”¨â€™æ’ä»¶â€™å¯¹ AST è¿›è¡Œè½¬æ¢\n\t- ç”Ÿæˆä»£ç ï¼ŒåŒ…æ‹¬SourceMapè½¬æ¢å’Œæºä»£ç ç”Ÿæˆ\n- **Parser(`@babel/parser`)**ï¼š å°†æºä»£ç è§£æä¸º AST å°±é å®ƒäº†ã€‚ å®ƒå·²ç»å†…ç½®æ”¯æŒå¾ˆå¤šè¯­æ³•. ä¾‹å¦‚ JSXã€Typescriptã€Flowã€ä»¥åŠæœ€æ–°çš„ECMAScriptè§„èŒƒã€‚ç›®å‰ä¸ºäº†æ‰§è¡Œæ•ˆç‡ï¼Œparseræ˜¯[ä¸æ”¯æŒæ‰©å±•çš„](https://babeljs.io/docs/en/babel-parser#faq)ï¼Œç”±å®˜æ–¹è¿›è¡Œç»´æŠ¤ã€‚å¦‚æœä½ è¦æ”¯æŒè‡ªå®šä¹‰è¯­æ³•ï¼Œå¯ä»¥ fork å®ƒï¼Œä¸è¿‡è¿™ç§åœºæ™¯éå¸¸å°‘ã€‚\n- **Traverser(`@babel/traverse`)**ï¼š å®ç°äº†`è®¿é—®è€…æ¨¡å¼`ï¼Œå¯¹ AST è¿›è¡Œéå†ï¼Œ`è½¬æ¢æ’ä»¶`ä¼šé€šè¿‡å®ƒè·å–æ„Ÿå…´è¶£çš„ASTèŠ‚ç‚¹ï¼Œå¯¹èŠ‚ç‚¹ç»§ç»­æ“ä½œ, ä¸‹æ–‡ä¼šè¯¦ç»†ä»‹ç»`è®¿é—®å™¨æ¨¡å¼`ã€‚\n- **Generator(`@babel/generator`)**ï¼š å°† AST è½¬æ¢ä¸ºæºä»£ç ï¼Œæ”¯æŒ SourceMap\n\n## è®¿é—®è€…æ¨¡å¼ä¸ä¸Šä¸‹æ–‡\n\næœ¬è´¨æ˜¯æ·±åº¦éå†ï¼Œéœ€è¦æ³¨æ„åœ¨è¿›å…¥èŠ‚ç‚¹æˆ–è€…ç¦»å¼€èŠ‚ç‚¹æ—¶è°ƒç”¨ç›¸åº”çš„é’©å­ï¼Œä¸ºäº†èƒ½å¤Ÿæ‹¿åˆ°å…¶ä»–èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œæ‰€ä»¥ä¼šå•ç‹¬ç»´æŠ¤ `context`\n\n\n","86a8734afe2d58ffb05b801afc2a3e72":"\n# èŠèŠä½ å¯¹å‰ç«¯å·¥ç¨‹åŒ–çš„ç†è§£\n\n`#å‰ç«¯å·¥ç¨‹åŒ–` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å·¥ç¨‹åŒ–çš„æœ¬è´¨ \n\nå‰ç«¯å·¥ç¨‹åŒ–çš„æœ¬è´¨æ˜¯é€šè¿‡å·¥ç¨‹æ‰‹æ®µè§£å†³**å‰ç«¯å¼€å‘ä¸­çš„æ•ˆç‡ã€è§„èŒƒã€è´¨é‡ã€æ€§èƒ½ç­‰é—®é¢˜**ã€‚å®ƒä¸ä»…ä»…æ˜¯å·¥å…·çš„å †ç Œï¼Œè€Œæ˜¯ä¸€å¥—å®Œæ•´çš„**ç³»ç»Ÿå·¥ç¨‹æ–¹æ³•è®º**\n\nå®ƒæ¶‰åŠå¼€å‘ã€æ„å»ºã€éƒ¨ç½²ã€è¿ç»´ç­‰å¤šä¸ªç¯èŠ‚\n\n## 2. æ ¸å¿ƒç›®æ ‡\n\næ ¸å¿ƒç›®çš„æ˜¯ï¼š**æ›´å¥½é«˜æ•ˆçš„çš„äº¤ä»˜ä¸šåŠ¡** \n\n### 2.1. **æå‡å¼€å‘æ•ˆç‡**\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-6.png)\n\n### 2.2. **ä¿è¯é¡¹ç›®è´¨é‡**\n\n```typescript\n// è´¨é‡ä¿è¯ä½“ç³»ç¤ºä¾‹\ninterface QualitySystem {\n  static: {\n    eslint: ESLintConfig;\n    typescript: TSConfig;\n    prettier: PrettierConfig;\n  };\n  runtime: {\n    errorBoundary: ErrorBoundaryConfig;\n    monitoring: MonitoringConfig;\n    testing: TestingStrategy;\n  };\n  process: {\n    review: CodeReviewProcess;\n    ci: ContinuousIntegration;\n    deployment: DeploymentStrategy;\n  }\n}\n```\n\n### 2.3. **ä¼˜åŒ–å¼€å‘ä½“éªŒ**\n\n   - å¼€å‘å·¥å…·é“¾é›†æˆ\n   - å³æ—¶åé¦ˆæœºåˆ¶\n   - å¼€å‘ç¯å¢ƒæ ‡å‡†åŒ–\n   - è°ƒè¯•å·¥å…·å®Œå–„\n\n## 3. å·¥ç¨‹åŒ–æ¶æ„è®¾è®¡\n\n### 3.1. **åŸºç¡€è®¾æ–½å±‚**\n\n````ts\ninterface Infrastructure {\n  // æ„å»ºç³»ç»Ÿ\n  build: {\n    dev: () => void;      // å¼€å‘ç¯å¢ƒæ„å»º\n    prod: () => void;     // ç”Ÿäº§ç¯å¢ƒæ„å»º\n    analyze: () => void;  // æ„å»ºåˆ†æ\n  };\n  \n  // å¼€å‘å·¥å…·\n  devTools: {\n    lint: () => void;     // ä»£ç æ£€æŸ¥\n    format: () => void;   // ä»£ç æ ¼å¼åŒ–\n    debug: () => void;    // è°ƒè¯•å·¥å…·\n  };\n  \n  // æŒç»­é›†æˆ\n  ci: {\n    test: () => void;     // è‡ªåŠ¨åŒ–æµ‹è¯•\n    build: () => void;    // è‡ªåŠ¨åŒ–æ„å»º\n    deploy: () => void;   // è‡ªåŠ¨åŒ–éƒ¨ç½²\n  };\n  \n  // ç›‘æ§ç³»ç»Ÿ\n  monitoring: {\n    performance: () => void; // æ€§èƒ½ç›‘æ§\n    error: () => void;      // é”™è¯¯ç›‘æ§\n    business: () => void;   // ä¸šåŠ¡ç›‘æ§\n  };\n}\n````\n\n### 3.2. è§„èŒƒæ ‡å‡†å±‚ï¼ˆæ ‡å‡†åŒ–ï¼‰\n\nä¸»è¦åŒ…æ‹¬ï¼š\n- ä»£ç è§„èŒƒæ ‡å‡†åŒ–\n- å·¥ç¨‹ç»“æ„æ ‡å‡†åŒ–\n- å¼€å‘æµç¨‹æ ‡å‡†åŒ–\n\n```yaml\nstandards:\n  code:\n    - JavaScript/TypeScriptè§„èŒƒ\n    - CSS/Sassè§„èŒƒ\n    - ç›®å½•ç»“æ„è§„èŒƒ\n    \n  development:\n    - Gitå·¥ä½œæµè§„èŒƒ\n    - å¼€å‘æµç¨‹è§„èŒƒ\n    - æµ‹è¯•è§„èŒƒ\n    \n  architecture:\n    - é¡¹ç›®æ¶æ„è§„èŒƒ\n    - ç»„ä»¶è®¾è®¡è§„èŒƒ\n    - APIè®¾è®¡è§„èŒƒ\n```\n\n### 3.3. **å·¥å…·æ”¯æŒå±‚**\n\n   - è„šæ‰‹æ¶å·¥å…·\n   - æ„å»ºå·¥å…·ï¼ˆWebpack/Viteï¼‰\n   - æµ‹è¯•å·¥å…·ï¼ˆJest/Cypressï¼‰\n   - éƒ¨ç½²å·¥å…·\n\n## 4. å·¥ç¨‹åŒ–å®è·µè¦ç´ \n\n### 4.1. **æ¨¡å—åŒ–è®¾è®¡**\n\n- ç»„ä»¶æ¨¡å—åŒ–\n- çŠ¶æ€æ•°æ®æ¨¡å—åŒ–\n- æœåŠ¡æ¨¡å—åŒ–\n\t- APIæœåŠ¡å°è£…\n\t- å·¥å…·æœåŠ¡å°è£…\n\t- ä¸šåŠ¡é€»è¾‘æœåŠ¡å°è£…\n\n````ts\n  // ä¸šåŠ¡æ¨¡å—è®¾è®¡\n  interface ModuleStructure {\n    // è§†å›¾å±‚\n    views: {\n      components: React.Component[];\n      layouts: Layout[];\n      pages: Page[];\n    };\n    \n    // æ•°æ®å±‚\n    models: {\n      states: State[];\n      actions: Action[];\n      reducers: Reducer[];\n    };\n    \n    // æœåŠ¡å±‚\n    services: {\n      api: APIService;\n      utils: Utilities;\n      helpers: Helpers;\n    };\n    \n    // é…ç½®å±‚\n    configs: {\n      routes: Route[];\n      constants: Constants;\n      settings: Settings;\n    };\n  }\n````\n\n### 4.2. **ç»„ä»¶åŒ–å¼€å‘**\n\n```typescript\n// ç»„ä»¶åˆ†å±‚ç¤ºä¾‹\ninterface ComponentLayers {\n  // åŸºç¡€ç»„ä»¶å±‚\n  basic: {\n    Button: ButtonComponent;\n    Input: InputComponent;\n    // ...\n  };\n  \n  // ä¸šåŠ¡ç»„ä»¶å±‚\n  business: {\n    UserCard: UserCardComponent;\n    OrderList: OrderListComponent;\n    // ...\n  };\n  \n  // é¡µé¢ç»„ä»¶å±‚\n  pages: {\n    UserCenter: UserCenterPage;\n    OrderManagement: OrderManagementPage;\n    // ...\n  };\n}\n```\n\n### 4.3. **è‡ªåŠ¨åŒ–æµç¨‹**\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-7.png)\n\n- æ„å»ºè‡ªåŠ¨åŒ–\n- æµ‹è¯•è‡ªåŠ¨åŒ–\n- éƒ¨ç½²è‡ªåŠ¨åŒ–\n\t- CI/CDæµç¨‹\n\t- è‡ªåŠ¨åŒ–æµ‹è¯•\n\t- è‡ªåŠ¨åŒ–éƒ¨ç½²\n- ç›‘æ§å‘Šè­¦è‡ªåŠ¨åŒ–\n\n## 5. è´¨é‡ä¿è¯ä½“ç³»\n\n### 5.1. **æµ‹è¯•ä½“ç³»**\n\n```typescript\n// æµ‹è¯•ç­–ç•¥\ninterface TestingStrategy {\n  unit: {\n    framework: 'Jest';\n    coverage: {\n      statements: 80;\n      branches: 70;\n      functions: 80;\n      lines: 80;\n    };\n  };\n  \n  integration: {\n    framework: 'Cypress';\n    scope: ['API', 'UI'];\n  };\n  \n  e2e: {\n    framework: 'Playwright';\n    scenarios: ['å…³é”®è·¯å¾„', 'ä¸šåŠ¡æµç¨‹'];\n  };\n}\n```\n\n### 5.2. **ä»£ç è´¨é‡æ§åˆ¶**\n\n   - ESLint é…ç½®\n   - TypeScript ç±»å‹æ£€æŸ¥\n   - Prettier æ ¼å¼åŒ–\n   - Code Review æœºåˆ¶\n\n## 6. æ€§èƒ½ä¼˜åŒ–ä½“ç³»\n\n### 6.1. **æ€§èƒ½æŒ‡æ ‡**\n\næ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡\n\nåŠ è½½æ€§èƒ½\n  - FCP (First Contentful Paint) < 1.8s\n  - LCP (Largest Contentful Paint) < 2.5s\n  - TTI (Time to Interactive) < 3.8s\näº¤äº’æ€§èƒ½\n  - FID (First Input Delay) < 100ms\n  - TBT (Total Blocking Time) < 200ms\n  - CLS (Cumulative Layout Shift) < 0.1\n### 6.2. èµ„æºæ€§èƒ½\n  - é¦–å±JSèµ„æº < 300KB\n  - é¦–å±CSSèµ„æº < 100KB\n  - å›¾ç‰‡èµ„æºä¼˜åŒ–ç‡ > 70%\n\n### 6.3. **ä¼˜åŒ–ç­–ç•¥**\n\n- æ„å»ºå±‚é¢ä¼˜åŒ–\n\t- ä»£ç åˆ†å‰²\n\t- æ ‘æ‘‡ä¼˜åŒ–\n\t- èµ„æºå‹ç¼©\n\t- ç¼“å­˜ç­–ç•¥\n- è¿è¡Œæ—¶ä¼˜åŒ–\n\t- æ¸²æŸ“ä¼˜åŒ–\n- èµ„æºåŠ è½½ä¼˜åŒ–\n\t- æ‡’åŠ è½½\n\t- é¢„åŠ è½½\n\t- å¹¶è¡ŒåŠ è½½\n\t- èµ„æºåˆå¹¶\n\n## 7. å®‰å…¨ä¿éšœä½“ç³»\n\n### 7.1. **å®‰å…¨ç­–ç•¥**\n\n```typescript\ninterface SecurityStrategy {\n  // XSSé˜²æŠ¤\n  xss: {\n    contentSecurityPolicy: CSPConfig;\n    sanitization: SanitizeConfig;\n  };\n  \n  // CSRFé˜²æŠ¤\n  csrf: {\n    tokenValidation: TokenConfig;\n    headerChecks: HeaderConfig;\n  };\n  \n  // æ•°æ®å®‰å…¨\n  data: {\n    encryption: EncryptionConfig;\n    storage: StorageConfig;\n  };\n}\n```\n\n### 7.2. **å®‰å…¨å®è·µ**\n\n   - è¾“å…¥éªŒè¯\n   - æƒé™æ§åˆ¶\n   - æ•æ„Ÿæ•°æ®å¤„ç†\n   - å®‰å…¨å®¡è®¡\n\n## 8. æŒç»­ä¼˜åŒ–\n\n### 8.1. **ç›‘æ§ä½“ç³»**\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-9.png)\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-8.png)\n\n### 8.2. æ—¥å¿—ç³»ç»Ÿ\n### 8.3. **åé¦ˆæœºåˆ¶**\n\n   - æ€§èƒ½ç›‘æ§\n   - é”™è¯¯è¿½è¸ª\n   - ç”¨æˆ·åé¦ˆ\n   - ç³»ç»Ÿæ—¥å¿—\n\n## 9. å¼€å‘è€…ä½“éªŒ\n\nè‰¯å¥½çš„å¼€å‘ä½“éªŒå¯ä»¥æé«˜å›¢é˜Ÿæ•ˆç‡ï¼š\n- **å¼€å‘å·¥å…·é“¾**\n\t- IDEé…ç½®\n\t- è°ƒè¯•å·¥å…·\n\t- å¼€å‘æœåŠ¡å™¨\n\t- MockæœåŠ¡\n- æ–‡æ¡£å·¥å…·ç­‰\n- å‰ç«¯ç ”å‘å¹³å°\n\n## 10. å·¥ç¨‹åŒ–æˆç†Ÿåº¦è¯„ä¼°\n\n### 10.1. **è¯„ä¼°ç»´åº¦**\n\n```typescript\ninterface MaturityAssessment {\n  process: {\n    automation: number;  // è‡ªåŠ¨åŒ–ç¨‹åº¦\n    standardization: number;  // è§„èŒƒåŒ–ç¨‹åº¦\n    efficiency: number;  // æ•ˆç‡æå‡\n  };\n  \n  quality: {\n    codeQuality: number;  // ä»£ç è´¨é‡\n    testCoverage: number;  // æµ‹è¯•è¦†ç›–\n    performance: number;  // æ€§èƒ½æŒ‡æ ‡\n  };\n  \n  maintenance: {\n    documentation: number;  // æ–‡æ¡£å®Œæ•´æ€§\n    codeReusability: number;  // ä»£ç å¤ç”¨æ€§\n    scalability: number;  // å¯æ‰©å±•æ€§\n  };\n}\n```\n\n### 10.2. **ä¼˜åŒ–æ–¹å‘**\n\n   - å·¥å…·é“¾ä¼˜åŒ–\n   - æµç¨‹ä¼˜åŒ–\n   - è§„èŒƒå®Œå–„\n   - æŠ€æœ¯å‡çº§\n\n## 11. æ€»ç»“\n\næ€»çš„æ¥è¯´ï¼Œå‰ç«¯å·¥ç¨‹åŒ–æ˜¯ä¸€ä¸ªæŒç»­æ¼”è¿›çš„è¿‡ç¨‹ï¼Œéœ€è¦æ ¹æ®å›¢é˜Ÿå’Œé¡¹ç›®çš„å®é™…æƒ…å†µï¼Œé€‰æ‹©åˆé€‚çš„å·¥ç¨‹åŒ–ç­–ç•¥å’Œå·¥å…·ã€‚å¥½çš„å·¥ç¨‹åŒ–ä½“ç³»åº”è¯¥æ˜¯èƒ½å¤Ÿæ”¯æ’‘ä¸šåŠ¡å¿«é€Ÿå‘å±•ï¼Œæé«˜å›¢é˜Ÿå¼€å‘æ•ˆç‡ï¼Œä¿è¯é¡¹ç›®è´¨é‡çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚\n\nä½œä¸ºå‰ç«¯æ¶æ„å¸ˆï¼Œéœ€è¦æŒç»­å…³æ³¨å·¥ç¨‹åŒ–é¢†åŸŸçš„æ–°æŠ€æœ¯å’Œæœ€ä½³å®è·µï¼Œä¸æ–­å®Œå–„å’Œä¼˜åŒ–å·¥ç¨‹åŒ–ä½“ç³»ï¼Œä¸ºå›¢é˜Ÿæä¾›æ›´å¥½çš„å¼€å‘æ”¯æŒã€‚åŒæ—¶ï¼Œä¹Ÿè¦æ³¨æ„**å¹³è¡¡å·¥ç¨‹åŒ–æŠ•å…¥ä¸æ”¶ç›Š**ï¼Œé¿å…è¿‡åº¦å·¥ç¨‹åŒ–å¸¦æ¥çš„è´Ÿæ‹…ã€‚\n\n","a57577ff991c5e71b0018829e3e1d8f8":"\n# èŠèŠå‰ç«¯å·¥ç¨‹é‡æ„çš„æ—¶æœº\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‡ ä¸ªå…³é”®çš„é‡æ„æ—¶æœº \n\n1. `æŠ€æœ¯å€ºåŠ¡`ç§¯ç´¯åˆ°**ä¸´ç•Œç‚¹**\n\t- ä»£ç é‡å¤åº¦è¿‡é«˜ï¼ˆç›¸ä¼¼ä»£ç è¶…è¿‡3å¤„ï¼‰\n\t- ä»£ç `å¯ç»´æŠ¤æ€§`ä¸¥é‡ä¸‹é™\n\t- Bugä¿®å¤æˆæœ¬æ˜¾è‘—ä¸Šå‡\n\t- å¼€å‘æ•ˆç‡æ˜æ˜¾é™ä½\n\t- æ–°åŠŸèƒ½å¼€å‘ç»å¸¸éœ€è¦å¤§é‡ä¿®æ”¹ç°æœ‰ä»£ç \n2. **æ€§èƒ½é—®é¢˜å‡¸æ˜¾**\n\t- é¡µé¢åŠ è½½æ—¶é—´è¶…è¿‡ä¸šç•Œæ ‡å‡†ï¼ˆé¦–å±>3ç§’ï¼‰\n\t- è¿è¡Œæ—¶å†…å­˜å ç”¨è¿‡é«˜\n\t- é¡µé¢äº¤äº’å¡é¡¿\n\t- èµ„æºåŠ è½½æ•ˆç‡ä½ä¸‹\n3. æŠ€æœ¯æ ˆè½ååŠç»´æŠ¤æˆæœ¬å¤ªå¤§\n\t- æ ¸å¿ƒæ¡†æ¶/åº“ç‰ˆæœ¬è¿‡ä½ï¼Œå­˜åœ¨å®‰å…¨éšæ‚£\n\t- æ–°ç‰ˆæœ¬ç‰¹æ€§èƒ½æ˜¾è‘—æå‡å¼€å‘æ•ˆç‡\n\t- ç°æœ‰æŠ€æœ¯æ ˆéš¾ä»¥æ»¡è¶³æ–°çš„ä¸šåŠ¡éœ€æ±‚\n\t- ä¸»æµæŠ€æœ¯ç”Ÿæ€è½¬å‘ï¼ˆå¦‚ä»jQueryåˆ°MVVMæ¡†æ¶ï¼‰\n4. **ä¸šåŠ¡è½¬å‹**èŠ‚ç‚¹ï¼ˆä¸šåŠ¡å‘å±•åŸå› ï¼‰\n\t- äº§å“æ–¹å‘å‘ç”Ÿé‡å¤§è°ƒæ•´\n\t- ä¸šåŠ¡è§„æ¨¡æ‰©å¼ å¯¼è‡´æ¶æ„ä¸é€‚é…\n\t- éœ€è¦`æ”¯æŒæ–°çš„ç»ˆç«¯è®¾å¤‡æˆ–å¹³å°`\n\t- ç”¨æˆ·ä½“éªŒéœ€è¦å…¨é¢å‡çº§\n5. å›¢é˜Ÿå‘å±•éœ€è¦\n\t- æ–°æˆå‘˜éš¾ä»¥å¿«é€Ÿä¸Šæ‰‹ç°æœ‰ä»£ç \n\t- å¼€å‘è§„èŒƒéœ€è¦ç»Ÿä¸€\n\t- å·¥ç¨‹åŒ–ä½“ç³»éœ€è¦å‡çº§\n\t- åä½œæ•ˆç‡éœ€è¦æå‡\n\n## 2. é‡æ„å»ºè®®\n\n### 2.1. å¾ªåºæ¸è¿›\n\n- é‡‡ç”¨æ¸è¿›å¼é‡æ„ç­–ç•¥\n- åˆ’åˆ†ä¼˜å…ˆçº§ï¼Œåˆ†æ­¥å®æ–½\n- ä¿è¯ä¸šåŠ¡åŠŸèƒ½ä¸å—å½±å“\n- è®¾ç½®åˆç†çš„é‡Œç¨‹ç¢‘\n\n### 2.2. åˆ¶å®šæ˜ç¡®æ ‡å‡†ï¼šå‰ç«¯é‡æ„æ ‡å‡†\n\n````markdown\n\n## é‡æ„è¯„ä¼°æŒ‡æ ‡\n\n### ä»£ç è´¨é‡\n- åœˆå¤æ‚åº¦ â‰¤ 10\n- å‡½æ•°è¡Œæ•° â‰¤ 30è¡Œ\n- æ–‡ä»¶è¡Œæ•° â‰¤ 300è¡Œ\n- é‡å¤ä»£ç ç‡ â‰¤ 5%\n\n### æ€§èƒ½æŒ‡æ ‡\n- é¦–å±åŠ è½½ â‰¤ 2s\n- TTI(Time to Interactive) â‰¤ 3s\n- ä»£ç è¦†ç›–ç‡ â‰¥ 80%\n\n### å·¥ç¨‹æ•ˆç‡\n- æ„å»ºæ—¶é—´ â‰¤ 1min\n- çƒ­æ›´æ–°æ—¶é—´ â‰¤ 3s\n\n### å¯ç»´æŠ¤æ€§\n- ä»£ç æ³¨é‡Šç‡ â‰¥ 20%\n- ESLint è§„åˆ™éµå®ˆç‡ 100%\n- TypeScript ç±»å‹è¦†ç›–ç‡ â‰¥ 90%\n````\n\n### 2.3. ä¿éšœæªæ–½\n\n- æ˜ç¡®çš„é‡æ„è®¡åˆ’\n- å……åˆ†çš„æŠ€æœ¯è¯„ä¼°\n- å®Œå–„çš„æµ‹è¯•è¦†ç›–\n- ç°åº¦å‘å¸ƒç­–ç•¥\n- å›æ»šæœºåˆ¶\n- ç›‘æ§å‘Šè­¦ä½“ç³»\n\n### 2.4. æŠ€æœ¯é€‰å‹åŸåˆ™\n\n- ç”Ÿæ€å®Œå–„\n- ç¤¾åŒºæ´»è·ƒ\n- å­¦ä¹ æˆæœ¬é€‚ä¸­\n- æ€§èƒ½è¡¨ç°ä¼˜å¼‚\n- å‘åå…¼å®¹æ€§å¥½\n\n### 2.5. æ³¨æ„äº‹é¡¹\n\n- é‡æ„ä¸æ˜¯é‡å†™\n- ä¿æŒåŠŸèƒ½ç¨³å®šæ€§\n\t- ä¿æŒå‘åå…¼å®¹\n- æ³¨é‡å¼€å‘ä½“éªŒ\n- è€ƒè™‘é•¿æœŸç»´æŠ¤æˆæœ¬\n- åšå¥½å›¢é˜Ÿæ²Ÿé€š\n- åšå¥½ç›‘æ§å’Œ`åº¦é‡`\n\n## 3. æœ€å\n\né‡æ„æ—¶æœºçš„æŠŠæ¡éœ€è¦ç»¼åˆè€ƒè™‘æŠ€æœ¯ã€ä¸šåŠ¡ã€å›¢é˜Ÿç­‰å¤šä¸ªç»´åº¦ï¼Œå…³é”®æ˜¯è¦**åœ¨é€‚å½“çš„æ—¶å€™é‡‡å–è¡ŒåŠ¨**ï¼Œæ—¢ä¸èƒ½è¿‡æ—©å¯¼è‡´èµ„æºæµªè´¹ï¼Œä¹Ÿä¸èƒ½è¿‡æ™šå¯¼è‡´æˆæœ¬è¿‡é«˜ã€‚åŒæ—¶ï¼Œé‡æ„æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œéœ€è¦åœ¨æ—¥å¸¸å¼€å‘ä¸­ä¿æŒè‰¯å¥½çš„å·¥ç¨‹å®è·µï¼Œé™ä½é‡æ„çš„éš¾åº¦å’Œé£é™©ã€‚","5415831c0faa5a0e83063b4cc8e7b968":"\n# å¦‚ä½•æ²»ç†ç«¯ä¾§æ€§èƒ½\n\n\n`#è·¨ç«¯`  `#ç§»åŠ¨ç«¯` `#react-native` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. PRPL æ¨¡å¼ \n\n- `Preload` é¢„åŠ è½½æœ€é‡è¦çš„èµ„æº\n- `Render` å°½å¿«æ¸²æŸ“åˆå§‹å†…å®¹\n- `Pre-cache` é¢„ç¼“å­˜å…¶ä»–èµ„æº\n- `Lazy load` æ‡’åŠ è½½å…¶ä»–è·¯ç”±å’Œéå…³é”®èµ„æº\n\nå®ƒå¯¹åšæ€§èƒ½ä¼˜åŒ–æœ‰æŒ‡å¯¼æ„ä¹‰\n\n## 2. ç«¯ä¾§åšæ€§èƒ½ä¼˜åŒ–æ—¶çš„æ³¨æ„ç‚¹\n\n- çœŸå®åœºæ™¯\n- ä½ç«¯æœºå™¨\n- `webp ios14` åä¹Ÿæ”¯æŒäº†\n\n## 3. å¦‚ä½•å‡å°‘å¸ƒå±€åç§»\n\n- `éª¨æ¶ç‰‡`\n- ä¸ºåŠ¨æ€å…ƒç´ `é¢„ç•™é™æ€`ç©ºé—´\n- `å›¾ç‰‡å®½é«˜`å°ºå¯¸å›ºå®š\n\n## 4. æ€§èƒ½ç›‘æ§ä½“ç³»\n\n- å¸§ç‡ç›‘æ§\n- å†…å­˜ä½¿ç”¨\n\n## 5. React-native æ‹†åŒ…åŸç†\n\nReact Native (RN) çš„æ‹†åŒ…åŸç†æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¼˜åŒ–è¯é¢˜ï¼Œè®©æˆ‘ç³»ç»Ÿåœ°åˆ†æä¸€ä¸‹ï¼š\n\n### 5.1. åŸºç¡€æ¦‚å¿µ\n\nRN çš„æ‰“åŒ…é»˜è®¤ä¼šå°†æ‰€æœ‰ JS ä»£ç æ‰“åŒ…æˆä¸€ä¸ª bundle æ–‡ä»¶ï¼š\n\n```\né¡¹ç›®ä»£ç \n   â†“\næ‰“åŒ…å·¥å…·(Metro)\n   â†“\nå•ä¸€ bundle.js\n```\n\nè¿™ç§æ–¹å¼å­˜åœ¨çš„é—®é¢˜ï¼š\n- é¦–æ¬¡åŠ è½½æ—¶é—´é•¿\n- èµ„æºåˆ©ç”¨æ•ˆç‡ä½\n- æ›´æ–°æˆæœ¬é«˜\n- å†…å­˜å ç”¨å¤§\n\n### 5.2. æ‹†åŒ…æ ¸å¿ƒåŸç†\n\nåŸºæœ¬æ€è·¯æ˜¯å°†ä»£ç åˆ†æˆä¸åŒçš„åŒ…ï¼š\n\n```\nCommon(åŸºç¡€åŒ…)\n   â†“\nä¸šåŠ¡åŒ…A  ä¸šåŠ¡åŒ…B  ä¸šåŠ¡åŒ…C\n```\n\næ‹†åˆ†ç­–ç•¥ï¼š\n\n```javascript\n// åŸºç¡€åŒ…ï¼ˆcommon.bundleï¼‰\n- React Core\n- React Native æ¡†æ¶ä»£ç \n- å…¬å…±ç»„ä»¶\n- å·¥å…·å‡½æ•°\n\n// ä¸šåŠ¡åŒ…ï¼ˆbusiness.bundleï¼‰\n- ä¸šåŠ¡é€»è¾‘ä»£ç \n- é¡µé¢ç»„ä»¶\n- ä¸šåŠ¡ç›¸å…³èµ„æº\n```\n\n### 5.3. å®ç°æ–¹å¼\n\nMetro é…ç½®ç¤ºä¾‹ï¼š\n```javascript\n// metro.config.js\nmodule.exports = {\n  transformer: {\n    getTransformOptions: async () => ({\n      transform: {\n        experimentalImportSupport: false,\n        inlineRequires: true,\n      },\n    }),\n  },\n  serializer: {\n    createModuleIdFactory() {\n      // è‡ªå®šä¹‰æ¨¡å— ID ç”Ÿæˆ\n      return (path) => {\n        // æ ¹æ®è·¯å¾„ç”Ÿæˆå”¯ä¸€ID\n      };\n    },\n    processModuleFilter(module) {\n      // æ¨¡å—è¿‡æ»¤è§„åˆ™\n      return true;\n    },\n  }\n};\n```\n\n### 5.4. æ‹†åŒ…ç­–ç•¥\n\nå¸¸è§çš„æ‹†åˆ†ç»´åº¦ï¼š\n\n#### 5.4.1. a. åŸºäºè·¯ç”±æ‹†åˆ†\n\n```javascript\n// æŒ‰è·¯ç”±åŠ è½½ä¸åŒçš„åŒ…\nconst loadBundle = async (bundleName) => {\n  await RNBundleLoader.load(`${bundleName}.bundle`);\n};\n\n// è·¯ç”±é…ç½®\nconst routes = {\n  Home: {\n    screen: HomeScreen,\n    bundle: 'home'\n  },\n  Profile: {\n    screen: ProfileScreen,\n    bundle: 'profile'\n  }\n};\n```\n\n#### 5.4.2. b. åŸºäºåŠŸèƒ½æ¨¡å—æ‹†åˆ†\n\n```javascript\n// åŠŸèƒ½æ¨¡å—æ‹†åˆ†\n- æ ¸å¿ƒæ¨¡å—ï¼ˆcore.bundleï¼‰\n- æ”¯ä»˜æ¨¡å—ï¼ˆpayment.bundleï¼‰\n- ç¤¾äº¤æ¨¡å—ï¼ˆsocial.bundleï¼‰\n- ç›´æ’­æ¨¡å—ï¼ˆlive.bundleï¼‰\n```\n\n### 5.5. åŠ è½½æœºåˆ¶\n\nåŠ¨æ€åŠ è½½å®ç°ï¼š\n\n```javascript\n// åŠ¨æ€åŠ è½½bundle\nasync function loadBusinessBundle(bundleName) {\n  try {\n    // æ£€æŸ¥æ˜¯å¦å·²åŠ è½½\n    if (!isBundleLoaded(bundleName)) {\n      // åŠ è½½bundle\n      await globalLoader.loadBundle(`${bundleName}.bundle`);\n      // æ›´æ–°åŠ è½½çŠ¶æ€\n      markBundleAsLoaded(bundleName);\n    }\n    // æ‰§è¡Œä¸šåŠ¡ä»£ç \n    return requireModule(bundleName);\n  } catch (error) {\n    console.error('Bundle load failed:', error);\n  }\n}\n```\n\n### 5.6. ä¼˜åŒ–ç­–ç•¥\n\n#### 5.6.1. a. é¢„åŠ è½½ä¼˜åŒ–\n\n```javascript\n// é¢„åŠ è½½å…³é”®bundle\nclass BundlePreloader {\n  static async preloadCriticalBundles() {\n    const criticalBundles = ['home', 'feed'];\n    return Promise.all(\n      criticalBundles.map(bundle => loadBusinessBundle(bundle))\n    );\n  }\n}\n```\n\n#### 5.6.2. b. ç¼“å­˜ç­–ç•¥\n\n```javascript\n// bundleç¼“å­˜ç®¡ç†\nclass BundleCache {\n  static async saveBundle(bundleName, content) {\n    await AsyncStorage.setItem(`bundle_${bundleName}`, content);\n  }\n\n  static async loadFromCache(bundleName) {\n    return await AsyncStorage.getItem(`bundle_${bundleName}`);\n  }\n}\n```\n\n### 5.7. æ³¨æ„äº‹é¡¹\n\nç‰ˆæœ¬ç®¡ç†ï¼š\n```javascript\n// bundleç‰ˆæœ¬æ§åˆ¶\nconst BUNDLE_VERSION = {\n  common: '1.0.0',\n  business: '1.0.0'\n};\n\n// ç‰ˆæœ¬æ£€æŸ¥\nasync function checkBundleVersion() {\n  const serverVersions = await fetchServerVersions();\n  return compareBundleVersions(BUNDLE_VERSION, serverVersions);\n}\n```\n\nä¾èµ–ç®¡ç†ï¼š\n- é¿å…å¾ªç¯ä¾èµ–\n- åˆç†åˆ’åˆ†å…¬å…±ä¾èµ–\n- æ§åˆ¶åŒ…å¤§å°\n\n### 5.8. æ€§èƒ½ä¼˜åŒ–\n\n#### 5.8.1. åŠ è½½ä¼˜åŒ–\n\n```javascript\n// å¹¶è¡ŒåŠ è½½ä¼˜åŒ–\nasync function parallelBundleLoad(bundles) {\n  const loadTasks = bundles.map(bundle => ({\n    name: bundle,\n    task: loadBusinessBundle(bundle)\n  }));\n  \n  return Promise.all(loadTasks.map(({ task }) => task));\n}\n```\n\nå†…å­˜ä¼˜åŒ–ï¼š\n- åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„ bundle\n- å®ç° bundle å¸è½½æœºåˆ¶\n- ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ\n\n### 5.9. è°ƒè¯•ä¸ç›‘æ§\n\nç›‘æ§ç³»ç»Ÿï¼š\n\n```javascript\nclass BundleMonitor {\n  static trackBundleLoad(bundleName, startTime) {\n    const loadTime = Date.now() - startTime;\n    // ä¸ŠæŠ¥åŠ è½½æ—¶é—´\n    Analytics.track('bundle_load', {\n      bundle: bundleName,\n      time: loadTime\n    });\n  }\n}\n```\n\nè¿™äº›å°±æ˜¯ RN æ‹†åŒ…çš„ä¸»è¦åŸç†å’Œå®ç°æ–¹å¼ã€‚å¥½çš„æ‹†åŒ…ç­–ç•¥å¯ä»¥æ˜¾è‘—æå‡åº”ç”¨æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼Œä½†éœ€è¦æ ¹æ®å…·ä½“é¡¹ç›®ç‰¹ç‚¹æ¥åˆ¶å®šåˆé€‚çš„æ‹†åŒ…æ–¹æ¡ˆã€‚åŒæ—¶è¦æ³¨æ„ç»´æŠ¤æˆæœ¬å’Œç‰ˆæœ¬ç®¡ç†çš„é—®é¢˜ã€‚\n\n## 6. CRN (Ctrip React Native) æ–¹æ¡ˆ\n\næºç¨‹ React-native CRB æ–¹æ¡ˆï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-10.png)\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-11.png)\n\nå¥½çš„ï¼Œç®€è¦æ€»ç»“æºç¨‹ CRN (Ctrip React Native) æ–¹æ¡ˆçš„æ ¸å¿ƒç‰¹ç‚¹ï¼š\n\n### 6.1. æ¶æ„è®¾è®¡\n\n```\nAppå±‚\nCRN Framework (ç»Ÿä¸€æ¥å£å±‚)\nå¹³å°é€‚é…å±‚ (Android/iOS)\nåŸç”Ÿå¹³å°\n```\n\n### 6.2. æ ¸å¿ƒç‰¹æ€§\n\n- ç»Ÿä¸€ç»„ä»¶ä½“ç³»\n- è‡ªç ”ç¦»çº¿åŒ…æ–¹æ¡ˆ\n- åŠ¨æ€åŒ–èƒ½åŠ›\n- å¤šä¸šåŠ¡éš”ç¦»\n\n### 6.3. æ€§èƒ½ä¼˜åŒ–\n\n```javascript\n// æ ¸å¿ƒä¼˜åŒ–ç‚¹\n- é¢„åŠ è½½æœºåˆ¶\n- é¦–å±åŠ è½½ä¼˜åŒ–\n- ç¦»çº¿åŒ…æ›´æ–°\n- å¢é‡çƒ­æ›´æ–°\n```\n\n### 6.4. å·¥ç¨‹èƒ½åŠ›\n\n- ç»Ÿä¸€æ„å»ºç³»ç»Ÿ\n- ç‰ˆæœ¬ç®¡ç†\n- ç°åº¦å‘å¸ƒ\n- ç›‘æ§ä½“ç³»\n\n### 6.5. ä¸šåŠ¡æ”¯æŒ\n\n```javascript\n// ç»Ÿä¸€è·¯ç”±\nconst routes = {\n  'hotel_detail': {\n    path: '/hotel/detail/:id',\n    preload: true,\n    offline: true\n  }\n}\n\n// ä¸šåŠ¡éš”ç¦»\nclass BusinessContainer {\n  static load(bizId) {\n    // åŠ è½½ç‹¬ç«‹ä¸šåŠ¡æ¨¡å—\n  }\n}\n```\n\n### 6.6. ä¸»è¦ä¼˜åŠ¿\n\n- å®Œæ•´çš„å·¥ç¨‹åŒ–ä½“ç³»\n- å¼ºå¤§çš„æ€§èƒ½ä¼˜åŒ–\n- è‰¯å¥½çš„æ‰©å±•æ€§\n- ä¼ä¸šçº§ç›‘æ§å’Œå®¹é”™\n- æˆç†Ÿçš„å¤šä¸šåŠ¡æ”¯æŒ\n\nè¿™æ˜¯ä¸€ä¸ªç»è¿‡å®æˆ˜æ£€éªŒçš„ä¼ä¸šçº§ RN è§£å†³æ–¹æ¡ˆï¼Œå¯¹å¤§å‹ App çš„ RN æ”¹é€ å…·æœ‰å¾ˆå¥½çš„å‚è€ƒä»·å€¼ã€‚\n\n## 7. å¸¸è§çš„ å››ä¸ªjsæ¸²æŸ“å¼•æ“\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-12.png)\n\nç«¯ä¾§æ€§èƒ½ä¼˜åŒ–ä¸€ä¸ªæ€è·¯æ˜¯ï¼Œç›´æ¥åŸºäº js æ¸²æŸ“å¼•æ“åšå®šåˆ¶\n\n","547f1cb48bfe54b899e8da7b0d2efe19":"\n# è·¨ç«¯çš„æ ¸å¿ƒæŠ€æœ¯ç‚¹\n\n`#è·¨ç«¯` \n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‰ç«¯æœ¬è´¨åªå¹²ä¸‰ä»¶äº‹ \n\n- fetch dataï¼ˆæ•°æ®è·å–ï¼‰\n\t- HTTP1.xã€HTTP2.0ã€HTTP3.0 ã€SSEã€WS\n- manage stateï¼ˆçŠ¶æ€ç®¡ç†ï¼‰\n\t- Fluxç­‰ï¼Œè¿›è€Œå½±å“ Flutterã€SwiftUI ç­‰\n- render pageï¼ˆé¡µé¢æ¸²æŸ“ï¼‰\n\t- HTMLã€CSS\n\t- Canvas\n\t- éŸ³è§†é¢‘\n\n## 2. å¾€ä¸‰ä¸ªæ–¹å‘çš„å·\n\n- fetch dataï¼Œæ²¡æ³•æï¼Œä½ ä¸èƒ½æŠŠç½‘ç»œåè®®å®ç°ä¸€éå§\n- render pageï¼Œæœ¬è´¨æ˜¯è®¡ç®—æœºå›¾å½¢å­¦ï¼Œå‰ç«¯å¾ˆéš¾å·åˆ°åº•å±‚ï¼ˆOpenGLã€metal ...ï¼‰ï¼Œæ‰€ä»¥è¿™æ´»æ­¢äº `æ¸²æŸ“å¼•æ“`\n- manage state\n\t- ç°åœ¨ä¸»æµçš„åšæ³•å†æŠ½è±¡ä¸€å±‚`è™šæ‹Ÿ`çš„ä¸œè¥¿ï¼ˆè™šæ‹Ÿæœºæˆ–è™šæ‹Ÿ DOMï¼‰\n\næ‰€ä»¥ï¼Œèƒ½å·çš„æ–¹å‘æ˜¯ï¼š\n- æ¸²æŸ“å¼•æ“\n- è™šæ‹Ÿå±‚\n\n## 3. ç½‘é¡µï¼šJS Engine + WebKit\n\nå¤©ç”Ÿçš„è·¨ç«¯\n\n## 4. ç½‘é¡µ PLUSï¼šJS Engine + WebKit + Native èƒ½åŠ›\n\nH5 å®¹å™¨åŒ–ï¼Œhybidrd æ–¹æ¡ˆ\n\nJavaScript Bridge\n- **é¢„çƒ­**ï¼šé¢„åŠ è½½\n- **ç¼“å­˜**ï¼šH5 ç¦»çº¿åŒ…\n- **åŠ«æŒ**ï¼šWeb å¯¹ç½‘ç»œåŠ è½½çš„æ§åˆ¶åŠ›æ¯”è¾ƒå¼±ï¼Œäº¤ç»™ Native åš\n- **æ›¿æ¢**\n\t- ä½¿ç”¨åŸç”Ÿæ§ä»¶\n\n## 5. å°ç¨‹åºï¼šJS Engine + WebKit\n\n- æœ¬è´¨ä¸Šå°±æ˜¯é˜‰å‰²ç‰ˆçš„ç½‘é¡µ\n- å°é—­ï¼ŒæŠ€æœ¯åŠè¡°æœŸæ®µ\n\n## 6. React Nativeï¼šJS Engine + Native RenderPipeLine\n\n- JavaScrip å¼•æ“ï¼šHermes\n- Vdomï¼š å¤©ç„¶çš„è·¨ç«¯\n- ä¸€æ—¦åšæ·±äº†ï¼Œè¦æ±‚åŸç”Ÿèƒ½åŠ›\n\n## 7. Flutter: Dart VM + Flutter RnderPipeLine\n\n- æ›´è¿›ä¸€æ­¥ï¼Œè‡ªå·±çš„æ¸²æŸ“å¼•æ“\n\n","4dfedd91db225ffe8f415612f16a89a2":"\n# å†èŠèŠè·¨ç«¯ï¼ˆPCã€ç§»åŠ¨ç«¯ã€å°ç¨‹åºã€Web ç­‰ï¼‰\n\n`#è·¨ç«¯` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ç«¯åœºæ™¯ \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-2.png)\n\n## 2. å½“å‰å¸‚é¢ä¸Šè·¨ç«¯æŠ€æœ¯\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-3.png)\n\n## 3. PC è·¨ç«¯\n\n### 3.1. åŸºäº Web æŠ€æœ¯çš„è·¨ç«¯æ–¹æ¡ˆ\n\n#### 3.1.1. Electron\n\n>  å®ƒçš„çš„æ€§èƒ½ä¸Šé™æ˜¯ `vscode`\n\n æœ€æˆç†Ÿå’Œå¹¿æ³›ä½¿ç”¨çš„è·¨ç«¯æ¡†æ¶\n \n- ä¼˜ç‚¹ï¼š\n\t- å¼€å‘ä½“éªŒå¥½ï¼Œå¯ç›´æ¥ä½¿ç”¨ Web æŠ€æœ¯æ ˆ\n\t- ç”Ÿæ€ç³»ç»Ÿæˆç†Ÿï¼Œå¤§é‡ç°æˆè§£å†³æ–¹æ¡ˆ\n\t- è·¨å¹³å°æ”¯æŒå®Œå–„\n- ç¼ºç‚¹ï¼š\n\t- åº”ç”¨ä½“ç§¯è¾ƒå¤§\n\t- å†…å­˜å ç”¨é«˜\n\t- æ€§èƒ½ç›¸å¯¹è¾ƒå·®\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-5.png)\n\n#### 3.1.2. Tauri\n\n- æ–°ä¸€ä»£è·¨ç«¯æ¡†æ¶\n- ä¼˜ç‚¹ï¼š\n\t- æ€§èƒ½æ›´å¥½ï¼Œå†…å­˜å ç”¨æ›´ä½\n\t- åº”ç”¨ä½“ç§¯å°ï¼ˆé€šå¸¸æ¯” **Electron å° 10-20 å€**ï¼‰\n\t- å®‰å…¨æ€§æ›´é«˜ï¼Œé»˜è®¤é‡‡ç”¨æ›´ä¸¥æ ¼çš„å®‰å…¨ç­–ç•¥\n- ç¼ºç‚¹ï¼š\n\t- ç”Ÿæ€ç›¸å¯¹ä¸å¤Ÿæˆç†Ÿ\n\t- å­¦ä¹ æ›²çº¿è¾ƒé™¡ï¼ˆéœ€è¦äº†è§£ Rustï¼‰\n\t- æŸäº›ç‰¹æ€§çš„å®ç°ç›¸å¯¹å¤æ‚\n\n#### 3.1.3. Tauri ä¸ºä»€ä¹ˆèƒ½å¤Ÿæ¯” Electron å°è¿™ä¹ˆå¤š\n\n- Electron\n\t- æ¯ä¸ª Electron åº”ç”¨éƒ½ä¼šæ‰“åŒ…**å®Œæ•´çš„ Chromium å¼•æ“ï¼ˆçº¦ 150MB+ï¼‰**\n\t- åŒ…å«å®Œæ•´çš„ Node.js è¿è¡Œæ—¶\n\t\t- æ¯”å¦‚ npm ä¾èµ–åŒ… å°±å¾ˆå¤§å•Š\n\t- æ‰€æœ‰ä¾èµ–éƒ½éœ€è¦æ‰“åŒ…è¿›åº”ç”¨ä¸­\n- tauri\n\t- ä½¿ç”¨ç³»ç»ŸåŸç”Ÿçš„ WebView\n\t    - Windowsï¼šä½¿ç”¨ Edge WebView2\n\t    - macOSï¼šä½¿ç”¨ WebKit\n\t    - Linuxï¼šä½¿ç”¨ WebKitGTK\n\t- æ ¸å¿ƒä½¿ç”¨ Rust ç¼–å†™ï¼Œä½“ç§¯å°ä¸”é«˜æ•ˆ\n\t- ä¸åŒ…å«é¢å¤–çš„è¿è¡Œæ—¶ç¯å¢ƒ\n\t- æ‰€ä»¥\n\t\t- 1. ä¸éœ€è¦æ‰“åŒ… Chromiumï¼ˆèŠ‚çœçº¦ 150MBï¼‰\n\t\t- ä¸éœ€è¦ Node.js è¿è¡Œæ—¶ï¼ˆèŠ‚çœçº¦ 20MBï¼‰\n\t\t- æ›´é«˜æ•ˆçš„èµ„æºæ‰“åŒ…æ–¹å¼ï¼ˆèŠ‚çœçº¦ 5-10MBï¼‰\n\n### 3.2. åŸç”Ÿè·¨å¹³å°æ¡†æ¶\n\n#### 3.2.1. Flutter Desktop\n\n- Google æ¨å‡ºçš„å…¨å¹³å°æ¡†æ¶\n- ç‰¹ç‚¹ï¼š\n\t- å•ä¸€ä»£ç åº“æ”¯æŒæ‰€æœ‰å¹³å°\n\t- é«˜æ€§èƒ½æ¸²æŸ“å¼•æ“\n\t- ä¸°å¯Œçš„ UI ç»„ä»¶åº“\n\t- çƒ­é‡è½½æ”¯æŒ\n- é€‚ç”¨åœºæ™¯ï¼šéœ€è¦é«˜æ€§èƒ½å’Œä¸€è‡´ UI ä½“éªŒçš„åº”ç”¨ \n\n#### 3.2.2. .NET MAUI\n\n- å¾®è½¯çš„è·¨å¹³å°æ¡†æ¶\n- ç‰¹ç‚¹ï¼š\n\t- æ”¯æŒ Windowsã€macOS\n\t- ä¸ .NET ç”Ÿæ€æ·±åº¦é›†æˆ\n\t- åŸç”Ÿæ€§èƒ½\n\t- XAML å¸ƒå±€ç³»ç»Ÿ\n- é€‚ç”¨åœºæ™¯ï¼šä¼ä¸šçº§åº”ç”¨å¼€å‘ï¼Œç‰¹åˆ«æ˜¯å·²æœ‰ `.NET` æŠ€æœ¯æ ˆçš„å›¢é˜Ÿ \n\n### 3.3. æ··åˆå¼€å‘æ¡†æ¶\n\n#### 3.3.1. Qt\n\n- ä¼ ç»Ÿä¸”å¼ºå¤§çš„è·¨å¹³å°æ¡†æ¶\n- ç‰¹ç‚¹ï¼š\n\t- é«˜æ€§èƒ½\n\t- åŸç”Ÿå¤–è§‚\n\t- å®Œå–„çš„å·¥å…·é“¾\n\t- æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€\n- é€‚ç”¨åœºæ™¯ï¼šå¯¹æ€§èƒ½è¦æ±‚é«˜çš„ä¸“ä¸šè½¯ä»¶ \n\n### 3.4. å„æ¡†æ¶å¯¹æ¯”\n\n#### 3.4.1. æ€§èƒ½å¯¹æ¯”\n\n```\næ€§èƒ½æ’åï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š\n1. Qt/åŸç”Ÿåº”ç”¨\n2. Tauri\n3. Flutter Desktop\n4. Electron\n```\n\n#### 3.4.2. å¼€å‘æ•ˆç‡å¯¹æ¯”\n\n```\nå¼€å‘æ•ˆç‡ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š\n1. Electron\n2. Flutter\n3. Tauri\n4. Qt\n```\n\n### 3.5. åº”ç”¨åœºæ™¯é€‰æ‹©\n\n- **Web æŠ€æœ¯æ ˆå›¢é˜Ÿ**ï¼š\n\t- è½»é‡çº§åº”ç”¨ï¼šé€‰æ‹© Tauri\n\t- å¤æ‚åº”ç”¨ï¼šé€‰æ‹© Electron \n- **æ€§èƒ½æ•æ„Ÿåœºæ™¯**ï¼š\n\t- ä¸“ä¸šè½¯ä»¶ï¼šé€‰æ‹© Qt\n\t- é€šç”¨åº”ç”¨ï¼šé€‰æ‹© Tauri æˆ– Flutter\n- **.NET æŠ€æœ¯æ ˆ**ï¼š\n\t- ä¼ä¸šåº”ç”¨ï¼šé€‰æ‹© .NET MAUI\n\t- è·¨å¹³å°éœ€æ±‚ï¼šè€ƒè™‘ Avalonia\n\n#### 3.5.1. é€‰æ‹©å»ºè®®\n\n- **å¦‚æœä½ æ˜¯ Web å¼€å‘è€…**ï¼š\n\t- å°å‹åº”ç”¨æ¨è Tauri\n\t- å¤§å‹åº”ç”¨æˆ–éœ€è¦å¤§é‡ç¬¬ä¸‰æ–¹åº“æ”¯æŒæ—¶æ¨è Electron\n- **å¦‚æœä½ éœ€è¦æœ€å¥½çš„æ€§èƒ½**ï¼š\n\t- è€ƒè™‘ Qt æˆ– Tauri\n- **å¦‚æœä½ éœ€è¦æ¼‚äº®çš„ UI å’Œè‰¯å¥½çš„å¼€å‘ä½“éªŒ**ï¼š\n\t- è€ƒè™‘ Flutter Desktop\n- **å¦‚æœä½ æ˜¯ .NET å¼€å‘è€…**ï¼š\n\t- è€ƒè™‘ .NET MAUI æˆ– Avalonia\n\n## 4. ç§»åŠ¨ç«¯è·¨ç«¯\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-4.png)\n\n### 4.1. è´å£³çš„ Flutter å®è·µåˆ†äº«\n\n#### 4.1.1. æ¥å…¥æ–¹æ¡ˆ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-6.png)\n\n- ä¸¤ä¸ªç©ºé—´\n\t- flutter ç©ºé—´\n\t- åŸç”Ÿç©ºé—´\n\n#### 4.1.2. å¼€å‘æ¨¡å¼ï¼šä¸šåŠ¡ç©ºé—´\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-7.png)\n\n#### 4.1.3. å·¥ç¨‹ç»„ç»‡\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-8.png)\n\n#### 4.1.4. æ¥å…¥ç‰¹ç‚¹\n\n- ä¸šåŠ¡åˆ†ç¦»\n- å¹³å°åˆ†ç¦»ï¼šåªéœ€è¦ä¼š dart å’Œ flutter  api\n- æ”¯æŒçƒ­é‡è½½\n- é›†æˆæ— æ„Ÿ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-9.png)\n\n#### 4.1.5. Flutter H5 åº”ç”¨\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-10.png)\n\n### 4.2. å°ç¨‹åº\n\n#### 4.2.1. èƒ½åšä»€ä¹ˆ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-11.png)\n\n#### 4.2.2. æ€§ä»·æ¯”æœ€é«˜ \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-12.png)\n\n### 4.3. å°ç¨‹åºè§£å†³æ–¹æ¡ˆ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-13.png)\n\n- taro \n- uni-app\n\n## 5. è·¨ç«¯æŠ€æœ¯æ¼”è¿›\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-14.png)\n\n## 6. æ¼”è¿›å¹³è¡¡ç‚¹ï¼š`æ€§èƒ½ä½“éªŒ`ä¸`ç ”å‘æ•ˆç‡/åŠ¨æ€æ€§` çš„å¹³è¡¡\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-15.png)\n\n## 7. å‰ç«¯èƒ½è¿›å…¥çš„åœº\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-16.png)\n\n","cc20a4dd5cf75ee5af48521ada53c507":"\n# å‰ç«¯ç ”å‘å·¥ä½œå°çš„è®¾è®¡å’Œå®ç°\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åŸºæœ¬ä»‹ç» \n\n### 1.1. æ ¸å¿ƒå®šä½å’Œç›®æ ‡\n\n- æä¾›`ä¸€ç«™å¼`çš„å‰ç«¯å¼€å‘ç¯å¢ƒå’Œå·¥å…·é›†æˆ\n- æå‡å¼€å‘æ•ˆç‡ï¼Œè§„èŒƒå¼€å‘æµç¨‹\n- é™ä½å¼€å‘é—¨æ§›ï¼Œæ”¯æŒä½ä»£ç åˆ°å…¨ä»£ç çš„å¼€å‘æ¨¡å¼\n- ç¡®ä¿ä»£ç è´¨é‡å’Œæœ€ä½³å®è·µçš„è½åœ°\n\n### 1.2. ä¸»è¦åŠŸèƒ½æ¨¡å—\n\n#### 1.2.1. å·¥ç¨‹é¡¹ç›®ç®¡ç†\n\n- é¡¹ç›®æ¨¡æ¿ç®¡ç†\n- é¡¹ç›®åˆå§‹åŒ–\n- é…ç½®ç®¡ç†\n- ä¾èµ–ç®¡ç†\n- æ„å»ºéƒ¨ç½²é…ç½®\n\n#### 1.2.2. å¼€å‘å·¥å…·é›†æˆ\n\n- å¯è§†åŒ–é¡µé¢ç¼–è¾‘å™¨\n- ç»„ä»¶åº“ç®¡ç†\n- ä»£ç ç”Ÿæˆå™¨\n- è°ƒè¯•å·¥å…·\n- API ç®¡ç†å·¥å…·\n\n#### 1.2.3. è´¨é‡ä¿è¯\n\n- ä»£ç è§„èŒƒæ£€æŸ¥\n- å•å…ƒæµ‹è¯•å·¥å…·\n- æ€§èƒ½ç›‘æ§\n- é”™è¯¯è¿½è¸ª\n- ä»£ç å®¡æŸ¥å·¥å…·\n\n#### 1.2.4. åä½œåŠŸèƒ½\n\n- å›¢é˜Ÿåä½œ\n- æ–‡æ¡£ç®¡ç†\n- ç‰ˆæœ¬æ§åˆ¶\n- ä»»åŠ¡ç®¡ç†\n- ä»£ç å…±äº« \n\n### 1.3. æŠ€æœ¯æ¶æ„è®¾è®¡\n\n#### 1.3.1. æ ¸å¿ƒå±‚\n\n- æ’ä»¶ç³»ç»Ÿ\n- å·¥å…·é“¾é›†æˆ\n- æ•°æ®æŒä¹…åŒ–\n- é€šä¿¡æœºåˆ¶\n\n#### 1.3.2. åŠŸèƒ½å±‚\n\n- é¡¹ç›®è„šæ‰‹æ¶\n- æ„å»ºç³»ç»Ÿ\n- å¼€å‘æœåŠ¡å™¨\n- è°ƒè¯•å·¥å…·\n- API ä»£ç†\n\n#### 1.3.3. ç•Œé¢å±‚\n\n- å¯è§†åŒ–ç¼–è¾‘å™¨\n- é…ç½®é¢æ¿\n- é¢„è§ˆå™¨\n- æ§åˆ¶å° \n\n### 1.4. æœ€ä½³å®è·µå»ºè®®\n\n#### 1.4.1. å¼€å‘æµç¨‹æ ‡å‡†åŒ–\n\n- ç»Ÿä¸€çš„é¡¹ç›®ç»“æ„\n- è§„èŒƒçš„ä»£ç é£æ ¼\n- æ ‡å‡†åŒ–çš„æäº¤æµç¨‹\n- è‡ªåŠ¨åŒ–çš„éƒ¨ç½²æµç¨‹\n\n#### 1.4.2. ç»„ä»¶åŒ–å¼€å‘\n\n- ç»„ä»¶åº“ç®¡ç†\n- ç»„ä»¶æ–‡æ¡£\n- ç»„ä»¶æµ‹è¯•\n- ç»„ä»¶å¤ç”¨\n\n#### 1.4.3. æ€§èƒ½ä¼˜åŒ–\n\n- æ„å»ºä¼˜åŒ–\n- ä»£ç åˆ†å‰²\n- ç¼“å­˜ç­–ç•¥\n- åŠ è½½ä¼˜åŒ–\n\n### 1.5. æ‰©å±•æ€§è€ƒè™‘\n\n#### 1.5.1. æ’ä»¶ç³»ç»Ÿ\n\n- è‡ªå®šä¹‰æ’ä»¶å¼€å‘\n- æ’ä»¶å¸‚åœº\n- æ’ä»¶é…ç½®\n- æ’ä»¶çƒ­æ›´æ–°\n\n#### 1.5.2. å®šåˆ¶åŒ–èƒ½åŠ›\n\n- ä¸»é¢˜å®šåˆ¶\n- å·¥ä½œæµå®šåˆ¶\n- æ¨¡æ¿å®šåˆ¶\n- è§„åˆ™å®šåˆ¶\n\n### 1.6. å…³é”®ç‰¹æ€§\n\n#### 1.6.1. ä½ä»£ç æ”¯æŒ\n\n- å¯è§†åŒ–é¡µé¢æ­å»º\n- è¡¨å•é…ç½®\n- ä¸šåŠ¡æ¨¡æ¿\n- å¿«é€ŸåŸå‹\n\n#### 1.6.2. æ™ºèƒ½åŒ–åŠŸèƒ½\n\n- ä»£ç è¡¥å…¨\n- æ™ºèƒ½æç¤º\n- é”™è¯¯æ£€æµ‹\n- é‡æ„å»ºè®®\n\n#### 1.6.3. é›†æˆèƒ½åŠ›\n\n- ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ\n- CI/CD é›†æˆ\n- ç›‘æ§ç³»ç»Ÿé›†æˆ\n- æµ‹è¯•ç³»ç»Ÿé›†æˆ\n\n### 1.7. å®æ–½å»ºè®®\n\n#### 1.7.1. é˜¶æ®µæ€§æ¨è¿›\n\n1. åŸºç¡€å·¥å…·é›†æˆ\n2. æ ¸å¿ƒåŠŸèƒ½å¼€å‘\n3. æ’ä»¶ä½“ç³»å»ºè®¾\n4. ç”Ÿæ€å®Œå–„\n\n#### 1.7.2. é‡ç‚¹å…³æ³¨\n\n- å¼€å‘ä½“éªŒ\n- ç¨³å®šæ€§\n- æ€§èƒ½\n- å¯æ‰©å±•æ€§\n- å®‰å…¨æ€§\n\nå®ç°ä¸€ä¸ªå®Œæ•´çš„å‰ç«¯ç ”å‘å·¥ä½œå°æ˜¯ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿå·¥ç¨‹ï¼Œéœ€è¦è€ƒè™‘åˆ°å›¢é˜Ÿçš„å®é™…éœ€æ±‚å’ŒæŠ€æœ¯æ ˆï¼Œåœ¨å®ç°è¿‡ç¨‹ä¸­è¦æ³¨æ„ï¼š\n\n1. å¾ªåºæ¸è¿›ï¼Œå…ˆè§£å†³æœ€ç—›ç‚¹çš„é—®é¢˜\n2. ä¿æŒè‰¯å¥½çš„æ‰©å±•æ€§ï¼Œæ–¹ä¾¿åç»­åŠŸèƒ½æ·»åŠ \n3. æ³¨é‡å¼€å‘ä½“éªŒï¼Œæä¾›å®Œå–„çš„æ–‡æ¡£\n4. å»ºç«‹åé¦ˆæœºåˆ¶ï¼ŒæŒç»­ä¼˜åŒ–æ”¹è¿›\n5. é‡è§†å®‰å…¨æ€§ï¼Œåšå¥½æƒé™æ§åˆ¶\n\n### 1.8. æ•ˆæœè¯„ä¼°\n\n- å¼€å‘æ•ˆç‡æå‡\n- ä»£ç è´¨é‡æ”¹å–„\n- å›¢é˜Ÿåä½œä¼˜åŒ–\n- ç»´æŠ¤æˆæœ¬é™ä½\n\n## 2. å®ç°ç»†èŠ‚ä¸€\n\n### 2.1. ç³»ç»Ÿæ¶æ„è®¾è®¡\n\n#### 2.1.1. å¾®å†…æ ¸æ¶æ„\n\n```javascript\n// æ ¸å¿ƒç®¡ç†å™¨\nclass CoreManager {\n  private plugins: Map<string, Plugin>;\n  private events: EventEmitter;\n  \n  constructor() {\n    this.plugins = new Map();\n    this.events = new EventEmitter();\n  }\n\n  // æ³¨å†Œæ’ä»¶\n  registerPlugin(plugin: Plugin) {\n    this.plugins.set(plugin.name, plugin);\n    plugin.init(this.events);\n  }\n\n  // è·å–æ’ä»¶å®ä¾‹\n  getPlugin(name: string) {\n    return this.plugins.get(name);\n  }\n}\n```\n\n#### 2.1.2. æ’ä»¶ç³»ç»Ÿ\n\n```typescript\ninterface Plugin {\n  name: string;\n  version: string;\n  dependencies?: string[];\n  init: (events: EventEmitter) => void;\n  destroy?: () => void;\n}\n\n// æ’ä»¶ç¤ºä¾‹ï¼šé¡¹ç›®ç®¡ç†æ’ä»¶\nclass ProjectManager implements Plugin {\n  name = 'project-manager';\n  version = '1.0.0';\n\n  init(events: EventEmitter) {\n    // æ³¨å†Œé¡¹ç›®ç›¸å…³å‘½ä»¤\n    events.on('project:create', this.createProject);\n    events.on('project:build', this.buildProject);\n  }\n\n  async createProject(options: ProjectOptions) {\n    // é¡¹ç›®åˆ›å»ºé€»è¾‘\n  }\n\n  async buildProject(config: BuildConfig) {\n    // é¡¹ç›®æ„å»ºé€»è¾‘\n  }\n}\n```\n\n### 2.2. æ ¸å¿ƒåŠŸèƒ½å®ç°\n\n#### 2.2.1. é¡¹ç›®è„šæ‰‹æ¶\n```typescript\nclass ScaffoldService {\n  private templates: Map<string, Template>;\n\n  // æ³¨å†Œé¡¹ç›®æ¨¡æ¿\n  registerTemplate(template: Template) {\n    this.templates.set(template.name, template);\n  }\n\n  // åˆ›å»ºæ–°é¡¹ç›®\n  async createProject(options: CreateProjectOptions) {\n    const template = this.templates.get(options.template);\n    if (!template) {\n      throw new Error('Template not found');\n    }\n\n    // 1. åˆ›å»ºé¡¹ç›®ç›®å½•\n    await this.createProjectDirectory(options.path);\n\n    // 2. å¤åˆ¶æ¨¡æ¿æ–‡ä»¶\n    await this.copyTemplateFiles(template, options);\n\n    // 3. å¤„ç†æ¨¡æ¿å˜é‡\n    await this.processTemplateVariables(options);\n\n    // 4. å®‰è£…ä¾èµ–\n    await this.installDependencies(options);\n  }\n}\n```\n\n#### 2.2.2. æ„å»ºç³»ç»Ÿ\n\n```typescript\nclass BuildService {\n  private builders: Map<string, Builder>;\n  private plugins: BuildPlugin[];\n\n  async build(config: BuildConfig) {\n    // 1. åŠ è½½æ„å»ºé…ç½®\n    const buildConfig = await this.loadConfig(config);\n\n    // 2. æ‰§è¡Œå‰ç½®é’©å­\n    await this.runHooks('beforeBuild', buildConfig);\n\n    // 3. æ‰§è¡Œæ„å»º\n    const builder = this.builders.get(buildConfig.builder);\n    const result = await builder.build(buildConfig);\n\n    // 4. æ‰§è¡Œåç½®é’©å­\n    await this.runHooks('afterBuild', result);\n\n    return result;\n  }\n}\n```\n\n### 2.3. å¼€å‘å·¥å…·é›†æˆ\n\n#### 2.3.1. å¯è§†åŒ–ç¼–è¾‘å™¨\n\n```typescript\nclass VisualEditor {\n  private components: ComponentRegistry;\n  private canvas: Canvas;\n  private propertyPanel: PropertyPanel;\n\n  // æ³¨å†Œç»„ä»¶\n  registerComponent(component: Component) {\n    this.components.add(component);\n  }\n\n  // æ‹–æ”¾å¤„ç†\n  handleDrop(event: DragEvent) {\n    const componentData = JSON.parse(event.dataTransfer.getData('component'));\n    const component = this.components.create(componentData);\n    this.canvas.addComponent(component);\n  }\n\n  // å±æ€§æ›´æ–°\n  updateComponentProperty(id: string, key: string, value: any) {\n    const component = this.canvas.getComponent(id);\n    component.setProperty(key, value);\n    this.canvas.render();\n  }\n}\n```\n\n#### 2.3.2. è°ƒè¯•å·¥å…·\n\n```typescript\nclass DebugService {\n  private debugger: Debugger;\n  private console: Console;\n  private network: NetworkPanel;\n\n  // åˆå§‹åŒ–è°ƒè¯•ç¯å¢ƒ\n  async initDebugEnvironment() {\n    await this.debugger.connect();\n    this.console.init();\n    this.network.startCapturing();\n  }\n\n  // æ–­ç‚¹ç®¡ç†\n  async setBreakpoint(location: SourceLocation) {\n    await this.debugger.setBreakpoint(location);\n  }\n\n  // ç½‘ç»œè¯·æ±‚ç›‘æ§\n  monitorNetworkRequest(request: Request) {\n    this.network.addRequest(request);\n  }\n}\n```\n\n### 2.4. ä»£ç è´¨é‡ç®¡ç†\n\n#### 2.4.1. ä»£ç æ£€æŸ¥æœåŠ¡\n\n```typescript\nclass CodeLintService {\n  private linters: Map<string, Linter>;\n  private rules: Map<string, Rule[]>;\n\n  // æ‰§è¡Œä»£ç æ£€æŸ¥\n  async lint(files: string[]) {\n    const results = new Map<string, LintResult>();\n\n    for (const file of files) {\n      const ext = path.extname(file);\n      const linter = this.linters.get(ext);\n      if (linter) {\n        const rules = this.rules.get(ext) || [];\n        results.set(file, await linter.lint(file, rules));\n      }\n    }\n\n    return results;\n  }\n\n  // è‡ªåŠ¨ä¿®å¤\n  async autoFix(file: string, problems: Problem[]) {\n    const linter = this.getLinterForFile(file);\n    return await linter.fix(file, problems);\n  }\n}\n```\n\n### 2.5. æ•°æ®ç®¡ç†\n\n#### 2.5.1. çŠ¶æ€ç®¡ç†\n\n```typescript\nclass WorkbenchStore {\n  private state: State;\n  private subscribers: Set<Subscriber>;\n\n  // æ›´æ–°çŠ¶æ€\n  dispatch(action: Action) {\n    const nextState = this.reducer(this.state, action);\n    this.state = nextState;\n    this.notifySubscribers();\n  }\n\n  // è®¢é˜…çŠ¶æ€å˜åŒ–\n  subscribe(subscriber: Subscriber) {\n    this.subscribers.add(subscriber);\n    return () => this.subscribers.delete(subscriber);\n  }\n}\n```\n\n#### 2.5.2. é…ç½®ç®¡ç†\n\n```typescript\nclass ConfigManager {\n  private configs: Map<string, any>;\n  private storage: Storage;\n\n  // åŠ è½½é…ç½®\n  async loadConfig(namespace: string) {\n    const config = await this.storage.get(namespace);\n    this.configs.set(namespace, config);\n    return config;\n  }\n\n  // ä¿å­˜é…ç½®\n  async saveConfig(namespace: string, config: any) {\n    await this.storage.set(namespace, config);\n    this.configs.set(namespace, config);\n  }\n}\n```\n\n### 2.6. å·¥ä½œæµç®¡ç†\n\n```typescript\nclass WorkflowEngine {\n  private workflows: Map<string, Workflow>;\n  private tasks: Map<string, Task>;\n\n  // æ³¨å†Œå·¥ä½œæµ\n  registerWorkflow(workflow: Workflow) {\n    this.workflows.set(workflow.name, workflow);\n  }\n\n  // æ‰§è¡Œå·¥ä½œæµ\n  async executeWorkflow(name: string, context: Context) {\n    const workflow = this.workflows.get(name);\n    if (!workflow) {\n      throw new Error(`Workflow ${name} not found`);\n    }\n\n    const tasks = workflow.getTasks();\n    for (const task of tasks) {\n      await this.executeTask(task, context);\n    }\n  }\n\n  // æ‰§è¡Œä»»åŠ¡\n  private async executeTask(task: Task, context: Context) {\n    try {\n      await task.execute(context);\n    } catch (error) {\n      await this.handleTaskError(task, error, context);\n    }\n  }\n}\n```\n\n#### 2.6.1. æ¥å£ç®¡ç†\n\n```typescript\nclass APIManager {\n  private apis: Map<string, APIDefinition>;\n  private client: HTTPClient;\n\n  // æ³¨å†ŒAPI\n  registerAPI(api: APIDefinition) {\n    this.apis.set(api.name, api);\n  }\n\n  // è°ƒç”¨API\n  async callAPI(name: string, params: any) {\n    const api = this.apis.get(name);\n    if (!api) {\n      throw new Error(`API ${name} not found`);\n    }\n\n    const request = this.buildRequest(api, params);\n    return await this.client.send(request);\n  }\n\n  // ç”ŸæˆAPIæ–‡æ¡£\n  generateDocs() {\n    const docs = [];\n    for (const [name, api] of this.apis) {\n      docs.push(this.generateAPIDoc(api));\n    }\n    return docs;\n  }\n}\n```\n\n### 2.7. æ€§èƒ½ä¼˜åŒ–\n\n```typescript\nclass PerformanceOptimizer {\n  private metrics: PerformanceMetrics;\n  private cache: Cache;\n\n  // ä»£ç åˆ†å‰²\n  async splitChunks(config: BuildConfig) {\n    // åˆ†æä¾èµ–\n    const dependencies = await this.analyzeDependencies();\n    \n    // ç”Ÿæˆåˆ†å‰²ç­–ç•¥\n    const strategy = this.generateSplitStrategy(dependencies);\n    \n    // æ‰§è¡Œåˆ†å‰²\n    return await this.executeChunkSplit(strategy);\n  }\n\n  // èµ„æºä¼˜åŒ–\n  async optimizeAssets(assets: Asset[]) {\n    const optimizedAssets = [];\n    for (const asset of assets) {\n      const optimized = await this.optimizeAsset(asset);\n      optimizedAssets.push(optimized);\n    }\n    return optimizedAssets;\n  }\n}\n```\n\n### 2.8. å®ç°å»ºè®®\n\n- æ¨¡å—åŒ–è®¾è®¡\n\t- é‡‡ç”¨å¾®å†…æ ¸æ¶æ„ï¼Œä¿æŒæ ¸å¿ƒç²¾ç®€\n\t- é€šè¿‡æ’ä»¶ç³»ç»Ÿæ‰©å±•åŠŸèƒ½\n\t- ä½¿ç”¨ä¾èµ–æ³¨å…¥ç®¡ç†æ¨¡å—å…³ç³»\n- æ€§èƒ½è€ƒè™‘\n\t- å®ç°èµ„æºæŒ‰éœ€åŠ è½½\n\t- ä½¿ç”¨ç¼“å­˜ä¼˜åŒ–é¢‘ç¹æ“ä½œ\n\t- é‡‡ç”¨å·¥ä½œçº¿ç¨‹å¤„ç†è€—æ—¶ä»»åŠ¡\n- å¯æ‰©å±•æ€§\n\t- æä¾›æ ‡å‡†çš„æ’ä»¶æ¥å£\n\t- æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜å’Œå¸ƒå±€\n\t- å…è®¸æ‰©å±•æ ¸å¿ƒåŠŸèƒ½\n- ç”¨æˆ·ä½“éªŒ\n\t- æä¾›ç›´è§‚çš„ç•Œé¢æ“ä½œ\n\t- å®ç°å¿«é€Ÿå“åº”çš„äº¤äº’\n\t- æ·»åŠ åˆé€‚çš„é”™è¯¯å¤„ç†\n- å®‰å…¨æ€§\n\t- å®ç°å®Œå–„çš„æƒé™æ§åˆ¶\n\t- ä¿æŠ¤æ•æ„Ÿæ•°æ®\n\t- é˜²èŒƒå¸¸è§å®‰å…¨å¨èƒ\n- å¯ç»´æŠ¤æ€§\n\t- ç¼–å†™å®Œå–„çš„æ–‡æ¡£\n\t- æ·»åŠ è¯¦ç»†çš„æ³¨é‡Š\n\t- å®ç°è‡ªåŠ¨åŒ–æµ‹è¯•\n\n## 3. å®ç°ç»†èŠ‚äºŒ\n\nè®©æˆ‘ä»¬æ·±å…¥åˆ†æå‰ç«¯ç ”å‘å·¥ä½œå°çš„è®¾è®¡å’Œå®ç°ï¼š\n\n### 3.1. æ•´ä½“æ¶æ„è®¾è®¡\n\n#### 3.1.1. åˆ†å±‚æ¶æ„\n\n- åŸºç¡€è®¾æ–½å±‚ï¼šæä¾›æ ¸å¿ƒæœåŠ¡å’ŒåŸºç¡€åŠŸèƒ½\n- ä¸šåŠ¡ä¸­å°å±‚ï¼šå°è£…é€šç”¨ä¸šåŠ¡ç»„ä»¶å’ŒæœåŠ¡\n- åº”ç”¨å±‚ï¼šé¢å‘å…·ä½“ä¸šåŠ¡åœºæ™¯çš„åº”ç”¨å®ç°\n- å·¥å…·é“¾å±‚ï¼šå¼€å‘å·¥å…·å’Œæ•ˆç‡å·¥å…·é›†æˆ \n\n#### 3.1.2. å¾®å‰ç«¯æ¶æ„\n\n- ç‹¬ç«‹éƒ¨ç½²ï¼šå„ä¸ªæ¨¡å—å¯ä»¥ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²\n- æŠ€æœ¯æ ˆæ— å…³ï¼šæ”¯æŒä¸åŒå›¢é˜Ÿä½¿ç”¨ä¸åŒçš„æŠ€æœ¯æ ˆ\n- æ²™ç®±éš”ç¦»ï¼šç¡®ä¿å„æ¨¡å—ä¹‹é—´ä¸ä¼šç›¸äº’å½±å“\n- ç»Ÿä¸€ç®¡ç†ï¼šæä¾›ç»Ÿä¸€çš„ç®¡ç†å’Œé…ç½®ç•Œé¢\n\n### 3.2. æ ¸å¿ƒåŠŸèƒ½æ¨¡å—è®¾è®¡\n\n#### 3.2.1. å·¥ç¨‹é¡¹ç›®ç®¡ç†æ¨¡å—\n\n```typescript hl:3\ninterface ProjectConfig {\n  name: string;\n  type: 'web' | 'mobile' | 'desktop';\n  framework: string;\n  dependencies: Record<string, string>;\n  scripts: Record<string, string>;\n}\n\nclass ProjectManager {\n  // åˆ›å»ºé¡¹ç›®\n  async createProject(config: ProjectConfig): Promise<void>;\n  // ç®¡ç†ä¾èµ–\n  async manageDependencies(): Promise<void>;\n  // æ„å»ºé¡¹ç›®\n  async buildProject(options: BuildOptions): Promise<void>;\n}\n```\n\n#### 3.2.2. ç»„ä»¶å¼€å‘æ¨¡å—\n\n```typescript\ninterface ComponentMeta {\n  name: string;\n  version: string;\n  dependencies: string[];\n  props: PropDefinition[];\n  events: EventDefinition[];\n}\n\nclass ComponentDevelopment {\n  // ç»„ä»¶æ³¨å†Œ\n  registerComponent(meta: ComponentMeta): void;\n  // ç»„ä»¶é¢„è§ˆ\n  previewComponent(id: string): void;\n  // ç»„ä»¶æµ‹è¯•\n  testComponent(id: string): Promise<TestResult>;\n}\n```\n\n### 3.3. å·¥ç¨‹åŒ–å®è·µ\n\n#### 3.3.1. è‡ªåŠ¨åŒ–æ„å»ºæµç¨‹\n\n```typescript\ninterface BuildPipeline {\n  // ä»£ç æ£€æŸ¥\n  lint(): Promise<void>;\n  // å•å…ƒæµ‹è¯•\n  test(): Promise<void>;\n  // æ„å»º\n  build(): Promise<void>;\n  // éƒ¨ç½²\n  deploy(): Promise<void>;\n}\n```\n\n#### 3.3.2. å¼€å‘è§„èŒƒç®¡ç†\n\n```typescript\ninterface CodeStandard {\n  // ESLinté…ç½®\n  eslintConfig: ESLintConfig;\n  // Prettieré…ç½®\n  prettierConfig: PrettierConfig;\n  // TypeScripté…ç½®\n  tsConfig: TSConfig;\n  // æäº¤è§„èŒƒ\n  commitlintConfig: CommitlintConfig;\n}\n```\n\n### 3.4. ç»„ä»¶åŒ–è®¾è®¡\n\n#### 3.4.1. åŸºç¡€ç»„ä»¶ç³»ç»Ÿ\n\n```typescript\ninterface ComponentSystem {\n  // ç»„ä»¶æ³¨å†Œä¸­å¿ƒ\n  registry: ComponentRegistry;\n  // ç»„ä»¶åŠ è½½å™¨\n  loader: ComponentLoader;\n  // ç»„ä»¶é€šä¿¡\n  eventBus: EventBus;\n  // ç»„ä»¶çŠ¶æ€ç®¡ç†\n  store: Store;\n}\n```\n\n#### 3.4.2. ä¸šåŠ¡ç»„ä»¶å°è£…\n\n```typescript\ninterface BusinessComponent {\n  // ä¸šåŠ¡é…ç½®\n  config: BusinessConfig;\n  // æ•°æ®æ¨¡å‹\n  model: DataModel;\n  // ä¸šåŠ¡é€»è¾‘\n  service: BusinessService;\n  // UIæ¸²æŸ“\n  render(): ReactNode;\n}\n```\n\n#### 3.4.3. æ’ä»¶ç³»ç»Ÿè®¾è®¡\n\n```typescript\ninterface PluginSystem {\n  // æ’ä»¶æ¥å£å®šä¹‰\n  interface Plugin {\n    name: string;\n    version: string;\n    activate(): void;\n    deactivate(): void;\n  }\n\n  // æ’ä»¶ç®¡ç†å™¨\n  class PluginManager {\n    install(plugin: Plugin): void;\n    uninstall(pluginName: string): void;\n    enable(pluginName: string): void;\n    disable(pluginName: string): void;\n  }\n}\n```\n\n### 3.5. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥\n\n#### 3.5.1. æ„å»ºä¼˜åŒ–\n```typescript\ninterface BuildOptimization {\n  // ä»£ç åˆ†å‰²\n  splitChunks: SplitChunksConfig;\n  // æ ‘æ‘‡ä¼˜åŒ–\n  treeShaking: boolean;\n  // æ‡’åŠ è½½é…ç½®\n  lazyLoading: LazyLoadConfig;\n  // ç¼“å­˜ç­–ç•¥\n  cacheStrategy: CacheConfig;\n}\n```\n\n#### 3.5.2. è¿è¡Œæ—¶ä¼˜åŒ–\n\n```typescript\ninterface RuntimeOptimization {\n  // è™šæ‹Ÿåˆ—è¡¨\n  virtualList: VirtualListConfig;\n  // å›¾ç‰‡æ‡’åŠ è½½\n  lazyImage: LazyImageConfig;\n  // é¢„åŠ è½½ç­–ç•¥\n  preload: PreloadStrategy;\n}\n```\n\n### 3.6. æ•°æ®æµè®¾è®¡\n\n```typescript\ninterface DataFlow {\n  // çŠ¶æ€ç®¡ç†\n  store: {\n    state: State;\n    actions: Actions;\n    mutations: Mutations;\n  };\n  \n  // APIç®¡ç†\n  api: {\n    request: RequestConfig;\n    response: ResponseConfig;\n    interceptors: Interceptors;\n  };\n  \n  // ç¼“å­˜ç­–ç•¥\n  cache: {\n    storage: Storage;\n    policy: CachePolicy;\n  };\n}\n```\n\n### 3.7. å®‰å…¨æ€§è€ƒè™‘\n\n```typescript\ninterface Security {\n  // æƒé™æ§åˆ¶\n  auth: {\n    login(): Promise<void>;\n    logout(): Promise<void>;\n    checkPermission(resource: string): boolean;\n  };\n  \n  // XSSé˜²æŠ¤\n  xss: {\n    sanitize(input: string): string;\n    validate(content: string): boolean;\n  };\n  \n  // CSRFé˜²æŠ¤\n  csrf: {\n    getToken(): string;\n    validateToken(token: string): boolean;\n  };\n}\n```\n\n### 3.8. å®ç°å»ºè®®\n\n- é‡‡ç”¨æ¸è¿›å¼å¼€å‘ç­–ç•¥\n\t- å…ˆæ­å»ºæ ¸å¿ƒæ¡†æ¶\n\t- é€æ­¥æ·»åŠ åŠŸèƒ½æ¨¡å—\n\t- æŒç»­ä¼˜åŒ–å’Œæ”¹è¿›\n\t- æ”¶é›†ç”¨æˆ·åé¦ˆ\n- æ³¨é‡å¯æ‰©å±•æ€§\n\t- ä½¿ç”¨æ’ä»¶æ¶æ„\n\t- å®šä¹‰æ¸…æ™°çš„æ¥å£\n\t- æ”¯æŒè‡ªå®šä¹‰é…ç½®\n\t- é¢„ç•™æ‰©å±•ç‚¹\n- å…³æ³¨å¼€å‘ä½“éªŒ\n\t- å®Œå–„çš„æ–‡æ¡£\n\t- å‹å¥½çš„é”™è¯¯æç¤º\n\t- ä¾¿æ·çš„è°ƒè¯•å·¥å…·\n\t- å¿«é€Ÿçš„åé¦ˆå¾ªç¯\n- ä¿è¯ä»£ç è´¨é‡\n\t- å•å…ƒæµ‹è¯•è¦†ç›–\n\t- é›†æˆæµ‹è¯•\n\t- æ€§èƒ½æµ‹è¯•\n\t- ä»£ç å®¡æŸ¥\n\n## æ¡ˆä¾‹\n\nhttps://tech.meituan.com/2023/08/03/meituan-rome-practice.html\n\n\n### æ‰“åˆ†ï¼š5 ä¸ªç»´åº¦\n\n- æœ€ä½³å®è·µï¼š åˆ†æå½“å‰å·¥ç¨‹ç‰¹å¾ä¸å¯¹åº”å·¥ç¨‹æœ€ä½³å®è·µ\n- å®‰å…¨å®è·µï¼š æ‰«ç ä»£ç æ£€æµ‹å·¥ç¨‹ä¸­å¯èƒ½å­˜åœ¨çš„å®‰å…¨é£é™©ï¼ŒåŒ…å« url ã€æ•æ„Ÿæˆè¯ã€æ˜æ–‡è´¦å¯†ä¿¡æ¯åŠ npm åŒ…è¯ä¹¦æ£€æµ‹ï¼Œé™ä½é¡¹ç›®å®‰å…¨é£é™©ï¼Œå®ˆå«é¡¹ç›®å®‰å…¨ã€‚\n- ä»£ç è§„èŒƒï¼š è¿™ä¸€ç»´åº¦ä¸»è¦åé¦ˆå¼€å‘äººå‘˜å¯¹äº `eslint` å¼€å‘è§„çº¦çš„éµå®ˆç¨‹åº¦\n- å¯ç»´æŠ¤åº¦ï¼š é€šè¿‡ `typhonjs-escomplex` å¯¹æ–‡ä»¶è¿›è¡Œæ‰«ç ï¼Œå¾—å‡ºæ¯ä¸ªæ–‡ä»¶çš„å¯ç»´æŠ¤åº¦ï¼Œå¯è¯»æ€§åŠå¤æ‚åº¦è¯„åˆ†ã€‚é’ˆå¯¹å¾—åˆ†è¾ƒå·®çš„æ–‡ä»¶å¯ä»¥è¿›è¡Œæ·±åº¦åˆ†æå¸®åŠ©å¼€å‘è€…æ›´å¥½çš„é‡æ„å¤æ‚ä»£ç ã€‚\n- é‡å¤åº¦ï¼š é€šè¿‡ `jscpd` è®¡ç®—é‡å¤å‡ºç°çš„ä»£ç åŒºå—å æ¯”\n\næ ¹æ®ä¸Šè¿° 5 ä¸ªç»´åº¦é€šè¿‡åŠ æƒå¹³å‡çš„æ–¹å¼è®¡ç®—é¡¹ç›®è´¨é‡åˆ†ï¼Œå¹¶æ ¹æ®æœ¨æ¡¶æ•ˆåº”ï¼Œåœ¨è®¡ç®—å¾—åˆ†çš„è¿‡ç¨‹ä¸­åŠ å¤§äº†æœ€ä½åˆ†çš„æƒé‡ï¼Œå¾—å‡ºæœ€ç»ˆé¡¹ç›®è´¨é‡è¯„åˆ†ã€‚\n\n\n### å‰ç«¯ç ”å‘æ¡†æ¶\n\n- å¼€ç®±å³ç”¨çš„ç ”å‘æ¡†æ¶ï¼Œå†…ç½®`å·¥ç¨‹é…ç½®`ã€`çŠ¶æ€ç®¡ç†`ã€`æ•°æ®è¯·æ±‚`ã€`æƒé™ç®¡ç†`ä»¥åŠ`åç«¯åº”ç”¨é›†æˆ` ç­‰æœ€ä½³å®è·µï¼Œè®©å¼€å‘è€…å¯ä»¥`æ›´åŠ ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘`\n- ç ”å‘æµç¨‹æ ‡å‡†åŒ–\n\t- eslint/stylelint\n\t- git flowè§„èŒƒ\n\t- code review è§„èŒƒ\n\t- npmåŒ…çº¦å®šï¼Œå†™æ­»ç‰ˆæœ¬\n\t- ci/cdè§„èŒƒç­‰\n- ä¼˜å…ˆè€ƒè™‘å›¢é˜Ÿï¼Œå›¢é˜Ÿå·²æœ‰çš„æ²‰æ·€æˆ–è€…ç†Ÿæ‚‰çš„æŠ€æœ¯æ ˆ\n- ç ”å‘ä½“éªŒåŠå·¥å…·\n\t- dev\n\t- UI / UI æ ¡å¯¹å·¥å…·\n- è”è°ƒå¹³å°\n- å›¾ç‰‡é‡å¤åº¦\n- ä¸ºäº†è®©è¿™äº›è§„åˆ™ä¸åƒ eslint å¯ä»¥åœ¨æœ¬åœ°è½»æ˜“è·³è¿‡ï¼Œé‡‡å–äº†`æœåŠ¡å™¨ä¸‹å‘`çš„æ–¹å¼\n\t- æ¯”å¦‚ä¸èƒ½ä½¿ç”¨é™¤ dvaã€use model ä¹‹å¤–çš„æ•°æ®æµæ–¹æ¡ˆ\n\t- ä¸èƒ½æ— ç†ç”±ä½¿ç”¨ evalã€new Function\n\t- ä¸èƒ½æ··ç”¨ cjs å’Œ esm æ¨¡å—è§„èŒƒï¼Œ\n\t- ç»„ä»¶ä»£ç ä¸èƒ½è¶…è¿‡ 600 è¡Œ\n\t- ä¸èƒ½ä½¿ç”¨ resolution é”å®šä¸€æ–¹åº“å’ŒäºŒæ–¹åº“ç‰ˆæœ¬\n- å‰ç«¯ç ”å‘å·¥ä½œå°\n\t- é›†æˆå¼€å‘ç¯å¢ƒï¼ŒåŒ…æ‹¬Nodeç‰ˆæœ¬ç®¡ç†ã€Gité…ç½®ã€ç»´æŠ¤çš„å·¥ç¨‹ç›®å½•ï¼ŒåŠå¸¸ç”¨çš„å¯é…ç½®çš„å¯¼èˆªåŠŸèƒ½\n\t- **å‰ç«¯å¼€å‘å·¥å…·ç®±**\n\t\t- é™æ€èµ„æºä¸Šä¼ CDNåŠŸèƒ½ , `unpkg`åŠŸèƒ½ ï¼Œ å‰ç«¯ç‰©æ–™æ‰˜ç®¡å¹³å°\n\t\t- å¸¸ç”¨CDNåœ°å€ï¼Œé¿å…æ‰“åŒ…\n\t\t- å›¾ç‰‡å‹ç¼©åŠŸèƒ½\n\t\t- å–è‰²å™¨\n\t\t- ä»£ç ç”Ÿæˆå™¨\n\t\t- base64è½¬ç \n\t\t- URLç¼–è§£ç \n\t\t- `typescript`ã€`es`è¿è¡Œç¯å¢ƒç­‰\n\t- **VS Codeæ’ä»¶é›†åˆ**\n\t\t- æ ·æ¿ä»£ç ä¸€é”®ç”Ÿæˆ\n\t\t- å·¥ç¨‹ä»£ç é…ç½®\n\t\t- é›†æˆä»£ç æäº¤\n\t\t- ä»£ç ç‰‡æ®µ\n\t- ä»£ç è´¨é‡åˆ†ï¼šé•¿æ–‡ä»¶ã€å¤§æ–‡ä»¶ã€å›¾ç‰‡å‹ç¼©ç­‰ç­‰ç­‰\n\t- æ•´åˆç‰©æ–™åº“ã€UIåº“åŠä¸šåŠ¡ç»„ä»¶åº“\n\t- å›¢é˜ŸåŠä¸ªäººå¤§ç›˜ï¼ˆæäº¤ä»£ç å¤šå°‘ï¼Œä»£ç è´¨é‡å¦‚ä½•ï¼‰\n\t- å…¬å¸ç³»ç»Ÿé›†æˆç­‰ç­‰\n- å‰ç«¯ä¸šåŠ¡çš„äº¤ä»˜è´¨é‡å’Œæ•ˆç‡\n- äº§å“å·¥ç¨‹è´¨é‡\n- æŒç»­ä¼˜åŒ–é¡¹ç›®ï¼Œåšå·¥ç¨‹æ²»ç†\n- è§£å†³å¼€å‘æµç¨‹ä¸­çš„å„ç§ç—›ç‚¹\n\n\n","0b067bec2813539993337fdda3aa566e":"\n# è°ˆä¸€è°ˆè„šæ‰‹æ¶\n\n\nè„šæ‰‹æ¶å¯ä»¥è®©æˆ‘ä»¬å¿«é€Ÿå¯åŠ¨é¡¹ç›®ï¼Œå¯¹äºå•ä¸€çš„é¡¹ç›®å¤Ÿç”¨ï¼Œä½†å¯¹äºå›¢é˜Ÿè€Œè¨€å´ä¸å¤Ÿã€‚å› ä¸ºä½¿ç”¨è„šæ‰‹æ¶åƒ**æ³¼å‡ºå»çš„æ°´**ï¼Œä¸€æ—¦å¯åŠ¨ï¼Œæ— æ³•è¿­ä»£ã€‚åŒæ—¶è„šæ‰‹æ¶æ‰€èƒ½åšçš„å°è£…å’ŒæŠ½è±¡éƒ½éå¸¸æœ‰é™ã€‚\n\n","a8a21b1d6fa3589ebc390dafd13d533f":"\n# å¾®å‰ç«¯æ ¸å¿ƒåŸç†åŠå¸¸è§çš„å¾®å‰ç«¯æ–¹æ¡ˆ\n\n\n`#å¾®å‰ç«¯`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å¾®å‰ç«¯çš„æ ¸å¿ƒåŸç† \n\n- åº”ç”¨éš”ç¦»ï¼šç¡®ä¿å„ä¸ªå­åº”ç”¨ä¹‹é—´çš„ JavaScriptã€CSSã€DOM äº’ä¸å¹²æ‰°\n\t- JavaScript æ²™ç®±ï¼šç¡®ä¿å„ä¸ªå­åº”ç”¨çš„ JS è¿è¡Œç¯å¢ƒç›¸äº’éš”ç¦»\n\t- CSS éš”ç¦»ï¼šé˜²æ­¢æ ·å¼å†²çª\n\t- å…¨å±€å˜é‡éš”ç¦»ï¼šé¿å…å…¨å±€å˜é‡æ±¡æŸ“\n- ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šä¸»åº”ç”¨ç»Ÿä¸€ç®¡ç†å„ä¸ªå­åº”ç”¨çš„åŠ è½½ã€æŒ‚è½½ã€å¸è½½ç­‰ç”Ÿå‘½å‘¨æœŸ\n\t- åŠ è½½ï¼ˆbootstrapï¼‰\n\t- æŒ‚è½½ï¼ˆmountï¼‰\n\t- å¸è½½ï¼ˆunmountï¼‰\n\t- æ›´æ–°ï¼ˆupdateï¼‰\n- é€šä¿¡æœºåˆ¶ï¼šåœ¨ä¸»åº”ç”¨å’Œå­åº”ç”¨ä¹‹é—´å»ºç«‹é€šä¿¡æ¸ é“\n\t- åŸºäºäº‹ä»¶æ€»çº¿\n\t- åŸºäº Props ä¼ é€’\n\t- åŸºäºå…¨å±€çŠ¶æ€ç®¡ç†\n\t- åŸºäºè‡ªå®šä¹‰äº‹ä»¶\n- è·¯ç”±åˆ†å‘ï¼šç»Ÿä¸€çš„è·¯ç”±ç®¡ç†ï¼Œå°†ä¸åŒè·¯ç”±åˆ†å‘åˆ°å¯¹åº”çš„å­åº”ç”¨\n\n## 2. å¸¸è§çš„ JavaScript æ²™ç®±å®ç°æ–¹æ¡ˆåŠå…¶ä»£ç å®ç°\n\n### 2.1. å¿«ç…§æ²™ç®± (Snapshot Sandbox)\n\nå¿«ç…§æ²™ç®±çš„æ ¸å¿ƒæ€æƒ³æ˜¯åœ¨æ²™ç®±`å¯åŠ¨æ—¶`è®°å½•å…¨å±€çŠ¶æ€ï¼Œåœ¨æ²™ç®±`å…³é—­æ—¶`æ¢å¤å…¨å±€çŠ¶æ€ã€‚\n- æ¯”å¦‚ï¼Œè¿›å…¥ä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨å¯åŠ¨ï¼Œå¦åˆ™å…³é—­\n\n```javascript\nclass SnapshotSandbox {\n  constructor() {\n    this.snapshot = {}; // å­˜å‚¨å¿«ç…§\n    this.modifyPropsMap = {}; // å­˜å‚¨è¢«ä¿®æ”¹çš„å±æ€§\n  }\n\n  // æ¿€æ´»æ²™ç®±\n  active() {\n    // 1. è®°å½•å½“å‰windowå¯¹è±¡çš„å¿«ç…§\n    for (const prop in window) {\n      this.snapshot[prop] = window[prop];\n    }\n\n    // 2. æ¢å¤ä¹‹å‰è¢«ä¿®æ”¹çš„å±æ€§\n    Object.keys(this.modifyPropsMap).forEach(prop => {\n      window[prop] = this.modifyPropsMap[prop];\n    });\n  }\n\n  // å…³é—­æ²™ç®±\n  inactive() {\n    // 1. è®°å½•è¢«ä¿®æ”¹çš„å±æ€§\n    for (const prop in window) {\n      if (window[prop] !== this.snapshot[prop]) {\n        this.modifyPropsMap[prop] = window[prop];\n        // 2. æ¢å¤åŸæ¥çš„å±æ€§å€¼\n        window[prop] = this.snapshot[prop];\n      }\n    }\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst sandbox = new SnapshotSandbox();\nsandbox.active();   // æ¿€æ´»æ²™ç®±\n// åœ¨æ²™ç®±ä¸­è¿è¡Œä»£ç \nwindow.newVar = \"test\";\nsandbox.inactive(); // å…³é—­æ²™ç®±\nconsole.log(window.newVar); // undefined\n```\n\n### 2.2. ä»£ç†æ²™ç®± (Proxy Sandbox)\n\nä½¿ç”¨ Proxy ä»£ç†å¯¹è±¡æ¥å®ç°æ²™ç®±ï¼Œå¯ä»¥ç²¾ç¡®æ§åˆ¶å¯¹å…¨å±€å¯¹è±¡çš„è®¿é—®å’Œä¿®æ”¹ã€‚\n\n```javascript\nclass ProxySandbox {\n  constructor() {\n    this.running = false;\n    this.proxyWindow = {};\n    \n    const fakeWindow = Object.create(null);\n    const proxy = new Proxy(fakeWindow, {\n      set: (target, prop, value) => {\n        if (this.running) {\n          target[prop] = value;\n          return true;\n        }\n        return false;\n      },\n      \n      get: (target, prop) => {\n        // ä¼˜å…ˆä»ä»£ç†å¯¹è±¡ä¸­å–å€¼\n        if (prop in target) {\n          return target[prop];\n        }\n        // å¦åˆ™ä»çœŸå®windowå¯¹è±¡ä¸­å–å€¼\n        const value = window[prop];\n        return typeof value === 'function' \n          ? value.bind(window) \n          : value;\n      },\n\n      has: (target, prop) => {\n        return prop in target || prop in window;\n      }\n    });\n\n    this.proxy = proxy;\n  }\n\n  active() {\n    this.running = true;\n  }\n\n  inactive() {\n    this.running = false;\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst sandbox = new ProxySandbox();\nsandbox.active();\nsandbox.proxy.newVar = \"test\";\nconsole.log(window.newVar); // undefined\nconsole.log(sandbox.proxy.newVar); // \"test\"\n```\n\n### 2.3. Legacy æ²™ç®± (åŸºäº with + eval)\n\nä½¿ç”¨ `with è¯­å¥`å’Œ `eval` æ¥å®ç°ç®€å•çš„æ²™ç®±éš”ç¦»ã€‚\n\n```javascript\nclass LegacySandbox {\n  constructor(context = {}) {\n    this.context = context;\n  }\n\n  run(code) {\n    const contextStr = Object.keys(this.context)\n      .map(key => `let ${key} = this.context.${key}`)\n      .join(';');\n    \n    return new Function(`\n      with (this.context) {\n        ${contextStr};\n        return eval(\\`${code}\\`);\n      }\n    `).call(this);\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst sandbox = new LegacySandbox({\n  name: 'test',\n  log: console.log\n});\n\nsandbox.run(`\n  log(name);  // è¾“å‡º: test\n  log(window); // window æ˜¯æœªå®šä¹‰çš„\n`);\n```\n\n### 2.4. iframe æ²™ç®±\n\nåˆ©ç”¨ iframe çš„å¤©ç„¶éš”ç¦»ç‰¹æ€§å®ç°æ²™ç®±ã€‚\n\n```javascript\nclass IframeSandbox {\n  constructor() {\n    this.iframe = document.createElement('iframe');\n    this.iframe.style.display = 'none';\n    document.body.appendChild(this.iframe);\n    \n    this.global = this.iframe.contentWindow;\n  }\n\n  run(code) {\n    // æ³¨å…¥ä»£ç åˆ° iframe ç¯å¢ƒä¸­æ‰§è¡Œ\n    const script = this.iframe.contentDocument.createElement('script');\n    script.text = code;\n    this.iframe.contentDocument.body.appendChild(script);\n  }\n\n  destroy() {\n    document.body.removeChild(this.iframe);\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst sandbox = new IframeSandbox();\nsandbox.run(`\n  window.testVar = \"hello\";\n  console.log(window.testVar);\n`);\nconsole.log(window.testVar); // undefined\n```\n\n### 2.5. VM æ²™ç®± (åŸºäº vm2)\n\nä½¿ç”¨ Node.js çš„ `vm2 æ¨¡å—`å®ç°æ›´å®‰å…¨çš„æ²™ç®±ï¼ˆä»…åœ¨ Node.js ç¯å¢ƒä¸­å¯ç”¨ï¼‰ã€‚\n\n```javascript\nconst { VM } = require('vm2');\n\nclass VMSandbox {\n  constructor(context = {}) {\n    this.vm = new VM({\n      timeout: 1000,\n      sandbox: context\n    });\n  }\n\n  run(code) {\n    return this.vm.run(code);\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst sandbox = new VMSandbox({\n  name: 'test',\n  console: console\n});\n\nsandbox.run(`\n  console.log(name); // è¾“å‡º: test\n  // ä»¥ä¸‹ä»£ç å°†æŠ›å‡ºé”™è¯¯ï¼Œå› ä¸ºprocessæ˜¯æœªå®šä¹‰çš„\n  // console.log(process.env);\n`);\n```\n\n### 2.6. ç»„åˆæ²™ç®± (Composite Sandbox)\n\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ç»„åˆå¤šç§æ²™ç®±æŠ€æœ¯æ¥å®ç°æ›´å®Œå–„çš„éš”ç¦»ã€‚\n\n```javascript\nclass CompositeSandbox {\n  constructor() {\n    this.proxySandbox = new ProxySandbox();\n    this.snapshotSandbox = new SnapshotSandbox();\n    this.running = false;\n  }\n\n  active() {\n    if (!this.running) {\n      this.snapshotSandbox.active();\n      this.proxySandbox.active();\n      this.running = true;\n    }\n  }\n\n  inactive() {\n    if (this.running) {\n      this.snapshotSandbox.inactive();\n      this.proxySandbox.inactive();\n      this.running = false;\n    }\n  }\n\n  // è·å–ä»£ç†å¯¹è±¡\n  get proxyWindow() {\n    return this.proxySandbox.proxy;\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst sandbox = new CompositeSandbox();\nsandbox.active();\n\nconst proxyWindow = sandbox.proxyWindow;\nproxyWindow.newVar = \"test\";\n\nconsole.log(window.newVar); // undefined\nconsole.log(proxyWindow.newVar); // \"test\"\n\nsandbox.inactive();\n```\n\n## 3. æ ·å¼éš”ç¦»æ–¹æ¡ˆ\n### 3.1. Â Shadow DOM éš”ç¦»\n\n- å®Œå…¨éš”ç¦»ï¼Œæœ€å½»åº•çš„æ–¹æ¡ˆ\n- æµè§ˆå™¨åŸç”Ÿæ”¯æŒ\n- å¼¹çª—ç±»ç»„ä»¶éœ€è¦ç‰¹æ®Šå¤„ç†\n### 3.2. åŠ¨æ€æ ·å¼è¡¨åˆ‡æ¢\n\nåœ¨åº”ç”¨åˆ‡æ¢æ—¶åŠ¨æ€åˆ‡æ¢æ ·å¼è¡¨ï¼Œå¸¸ç”¨äº qiankun ç­‰æ–¹æ¡ˆä¸­ï¼Œ æ€§èƒ½å¼€é”€è¾ƒå¤§ï¼Œå¯èƒ½å‡ºç°æ ·å¼é—ªçƒ\n\n### 3.3. CSS Modules æ–¹æ¡ˆ\n\n- ä¼˜ç‚¹\n\t- ç¼–è¯‘æ—¶å¤„ç†ï¼Œè¿è¡Œæ—¶é›¶å¼€é”€\n\t- å±€éƒ¨ä½œç”¨åŸŸï¼Œé¿å…å†²çª\n- ç¼ºç‚¹\n\t- éœ€è¦ä¿®æ”¹æ„å»ºé…ç½®\n\t- æ‰€æœ‰æ ·å¼éœ€è¦æ¨¡å—åŒ–å¤„ç†\n\n### 3.4. BEM å‘½åçº¦å®šã€css-Inâ€”jsã€å­åº”ç”¨æ·»åŠ å”¯ä¸€å‰ç¼€ ç­‰\n\né€šè¿‡è§„èŒƒçš„å‘½åçº¦å®šæ¥é¿å…æ ·å¼å†²çª\n\n## 4. å¸¸è§çš„å¾®å‰ç«¯æ–¹æ¡ˆåŠå¯¹æ¯”\n\n| ç‰¹æ€§      | æ— ç•Œ(wujie)             | qiankun                        | micro-app          | single-spa | iframe      | Module Federation |\n| ------- | --------------------- | ------------------------------ | ------------------ | ---------- | ----------- | ----------------- |\n| åŸºç¡€å®ç°    | WebComponent + iframe | single-spa + import-html-entry | WebComponent       | è·¯ç”±åŠ«æŒ       | åŸç”Ÿ iframe   | Webpack 5 æ¨¡å—è”é‚¦    |\n| éš”ç¦»æ–¹æ¡ˆ    | CSS/JS å®Œå…¨éš”ç¦»           | å¿«ç…§æ²™ç®±/ä»£ç†æ²™ç®±                      | Shadow DOM         | æ—           | å¤©ç„¶éš”ç¦»        | æ—                  |\n| æ€§èƒ½      | ä¼˜ç§€                    | ä¸€èˆ¬                             | è¾ƒå¥½                 | è¾ƒå¥½         | ä¸€èˆ¬          | ä¼˜ç§€                |\n| é¢„åŠ è½½     | æ”¯æŒ                    | æ”¯æŒ                             | æ”¯æŒ                 | ä¸æ”¯æŒ        | ä¸æ”¯æŒ         | æ”¯æŒ                |\n| é€šä¿¡æ–¹å¼    | props + å‘å¸ƒè®¢é˜…          | props + å‘å¸ƒè®¢é˜…                   | CustomEvent + æ•°æ®å±æ€§ | å‘å¸ƒè®¢é˜…       | postMessage | æ¨¡å—å¯¼å…¥å¯¼å‡º            |\n| å­åº”ç”¨æ”¹é€    | æå°‘                    | ä¸­ç­‰                             | è¾ƒå°‘                 | è¾ƒå¤š         | æ—            | ä¸­ç­‰                |\n| ä¸»åº”ç”¨æ”¹é€    | è¾ƒå°‘                    | ä¸­ç­‰                             | è¾ƒå°‘                 | è¾ƒå¤š         | æ—            | ä¸­ç­‰                |\n| æŠ€æœ¯æ ˆé™åˆ¶   | æ—                      | æ—                               | æ—                   | æ—           | æ—            | éœ€ä½¿ç”¨ Webpack 5     |\n| å­åº”ç”¨å…±äº«ä¾èµ– | æ”¯æŒ                    | æ”¯æŒ                             | ä¸æ”¯æŒ                | æ”¯æŒ         | ä¸æ”¯æŒ         | åŸç”Ÿæ”¯æŒ              |\n| æ ·å¼éš”ç¦»    | å®Œå…¨éš”ç¦»                  | åŠ¨æ€æ ·å¼è¡¨åˆ‡æ¢                        | Shadow DOM         | æ—           | å®Œå…¨éš”ç¦»        | æ—                  |\n| JS æ²™ç®±   | iframe + Proxy        | Proxy/Snapshot                 | iframe Proxy       | æ—           | å¤©ç„¶éš”ç¦»        | æ—                  |\n| CSP ç­–ç•¥  | å‹å¥½                    | ä¸å‹å¥½                            | è¾ƒå‹å¥½                | å‹å¥½         | å‹å¥½          | å‹å¥½                |\n| å­åº”ç”¨è°ƒè¯•   | ä¾¿æ·                    | ä¸€èˆ¬                             | ä¾¿æ·                 | ä¸€èˆ¬         | ä¾¿æ·          | ä¾¿æ·                |\n\n## 5. å®ç°ä¸€ä¸ªä¸»åº”ç”¨å’Œå­åº”ç”¨ä¹‹é—´çš„é€šä¿¡ç³»ç»Ÿ\n\nè¿™ä¸ª`é€šä¿¡ç³»ç»Ÿ`æä¾›äº†ä¸‰ç§ä¸»è¦çš„é€šä¿¡æ–¹å¼ï¼š\n\n1. **äº‹ä»¶æ€»çº¿**ï¼šç”¨äºå‘å¸ƒ-è®¢é˜…æ¨¡å¼çš„äº‹ä»¶é€šä¿¡\n2. **çŠ¶æ€ç®¡ç†**ï¼šç”¨äºå…±äº«æ•°æ®å’ŒçŠ¶æ€\n3. **ç›´æ¥è°ƒç”¨**ï¼šç”¨äºç›´æ¥è°ƒç”¨å…¶ä»–åº”ç”¨æä¾›çš„æ–¹æ³•\n\nä¸»è¦ç‰¹ç‚¹ï¼š\n- æ”¯æŒå¤šç§é€šä¿¡æ–¹å¼\n- ç±»å‹å®‰å…¨\n- ç»Ÿä¸€çš„API\n- æ”¯æŒäº‹ä»¶è§£ç»‘å’ŒçŠ¶æ€å–æ¶ˆè®¢é˜…\n- é”™è¯¯å¤„ç†\n- æ”¯æŒæ‰€æœ‰æ¡†æ¶ï¼ˆæ¡†æ¶æ— å…³ï¼‰\nåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„é€šä¿¡æ–¹å¼ï¼Œå¹¶å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•åŠŸèƒ½ï¼Œå¦‚ï¼š\n- æ·»åŠ é€šä¿¡æ—¥å¿—\n- å®ç°é€šä¿¡åŠ å¯†\n- æ·»åŠ æƒé™æ§åˆ¶\n- å®ç°é€šä¿¡è¶…æ—¶å¤„ç†\n- æ·»åŠ æ¶ˆæ¯é˜Ÿåˆ—\n- å®ç°é€šä¿¡é‡è¯•æœºåˆ¶\n\n```typescript\n// äº‹ä»¶ç±»å‹å®šä¹‰\ntype EventHandler = (...args: any[]) => void;\n\n// äº‹ä»¶æ€»çº¿ç±»\nclass EventBus {\n  private events: Map<string, Set<EventHandler>>;\n\n  constructor() {\n    this.events = new Map();\n  }\n\n  // è®¢é˜…äº‹ä»¶\n  on(event: string, handler: EventHandler) {\n    if (!this.events.has(event)) {\n      this.events.set(event, new Set());\n    }\n    this.events.get(event)!.add(handler);\n  }\n\n  // å–æ¶ˆè®¢é˜…\n  off(event: string, handler: EventHandler) {\n    if (this.events.has(event)) {\n      this.events.get(event)!.delete(handler);\n    }\n  }\n\n  // å‘é€äº‹ä»¶\n  emit(event: string, ...args: any[]) {\n    if (this.events.has(event)) {\n      this.events.get(event)!.forEach(handler => {\n        try {\n          handler(...args);\n        } catch (error) {\n          console.error(`Error in event handler for ${event}:`, error);\n        }\n      });\n    }\n  }\n\n  // åªè®¢é˜…ä¸€æ¬¡\n  once(event: string, handler: EventHandler) {\n    const wrapper = (...args: any[]) => {\n      handler(...args);\n      this.off(event, wrapper);\n    };\n    this.on(event, wrapper);\n  }\n}\n\n// å…±äº«çŠ¶æ€ç®¡ç†\nclass StateManager {\n  private state: Record<string, any>;\n  private subscribers: Map<string, Set<(value: any) => void>>;\n\n  constructor() {\n    this.state = {};\n    this.subscribers = new Map();\n  }\n\n  // è®¾ç½®çŠ¶æ€\n  setState(key: string, value: any) {\n    this.state[key] = value;\n    if (this.subscribers.has(key)) {\n      this.subscribers.get(key)!.forEach(callback => callback(value));\n    }\n  }\n\n  // è·å–çŠ¶æ€\n  getState(key: string) {\n    return this.state[key];\n  }\n\n  // ç›‘å¬çŠ¶æ€å˜åŒ–\n  subscribe(key: string, callback: (value: any) => void) {\n    if (!this.subscribers.has(key)) {\n      this.subscribers.set(key, new Set());\n    }\n    this.subscribers.get(key)!.add(callback);\n\n    // è¿”å›å–æ¶ˆè®¢é˜…å‡½æ•°\n    return () => {\n      this.subscribers.get(key)?.delete(callback);\n    };\n  }\n}\n\n// é€šä¿¡ç®¡ç†ç±»\nclass CommunicationManager {\n  private eventBus: EventBus;\n  private stateManager: StateManager;\n  private apps: Map<string, any>;\n\n  constructor() {\n    this.eventBus = new EventBus();\n    this.stateManager = new StateManager();\n    this.apps = new Map();\n  }\n\n  // æ³¨å†Œåº”ç”¨\n  registerApp(appName: string, appInstance: any) {\n    this.apps.set(appName, appInstance);\n  }\n\n  // è·å–åº”ç”¨å®ä¾‹\n  getApp(appName: string) {\n    return this.apps.get(appName);\n  }\n\n  // è·å–äº‹ä»¶æ€»çº¿\n  getEventBus() {\n    return this.eventBus;\n  }\n\n  // è·å–çŠ¶æ€ç®¡ç†å™¨\n  getStateManager() {\n    return this.stateManager;\n  }\n\n  // ç›´æ¥è°ƒç”¨å­åº”ç”¨æ–¹æ³•\n  invokeMethod(appName: string, methodName: string, ...args: any[]) {\n    const app = this.apps.get(appName);\n    if (app && typeof app[methodName] === 'function') {\n      return app[methodName](...args);\n    }\n    throw new Error(`Method ${methodName} not found in app ${appName}`);\n  }\n}\n\n// åˆ›å»ºå…¨å±€é€šä¿¡ç®¡ç†å™¨å®ä¾‹\nconst communicationManager = new CommunicationManager();\n\n// å¯¼å‡ºé€šä¿¡å®ä¾‹\nexport const communication = {\n  eventBus: communicationManager.getEventBus(),\n  stateManager: communicationManager.getStateManager(),\n  registerApp: (appName: string, instance: any) => communicationManager.registerApp(appName, instance),\n  getApp: (appName: string) => communicationManager.getApp(appName),\n  invokeMethod: (appName: string, methodName: string, ...args: any[]) => \n    communicationManager.invokeMethod(appName, methodName, ...args)\n};\n```\n\n### 5.1. ä¸»åº”ç”¨ä¸­çš„ä½¿ç”¨\n\n```typescript\n// main-app.ts\nimport { communication } from './communication';\n\n// ç›‘å¬å­åº”ç”¨å‘é€çš„äº‹ä»¶\ncommunication.eventBus.on('subAppEvent', (data) => {\n  console.log('Received from sub app:', data);\n});\n\n// è®¾ç½®å…±äº«çŠ¶æ€\ncommunication.stateManager.setState('globalConfig', {\n  theme: 'dark',\n  language: 'zh-CN'\n});\n\n// å‘å­åº”ç”¨å‘é€äº‹ä»¶\nfunction notifySubApp() {\n  communication.eventBus.emit('mainAppEvent', {\n    type: 'update',\n    data: { message: 'Hello from main app' }\n  });\n}\n\n// æ³¨å†Œä¸»åº”ç”¨APIä¾›å­åº”ç”¨è°ƒç”¨\nconst mainAppAPI = {\n  showDialog(message: string) {\n    alert(message);\n  }\n};\n\ncommunication.registerApp('mainApp', mainAppAPI);\n```\n\n### 5.2. å­åº”ç”¨ä¸­çš„ä½¿ç”¨\n\n```typescript\n// sub-app.ts\nimport { communication } from './communication';\n\n// ç›‘å¬ä¸»åº”ç”¨äº‹ä»¶\ncommunication.eventBus.on('mainAppEvent', (data) => {\n  console.log('Received from main app:', data);\n});\n\n// è®¢é˜…å…±äº«çŠ¶æ€å˜åŒ–\ncommunication.stateManager.subscribe('globalConfig', (config) => {\n  console.log('Global config updated:', config);\n  updateTheme(config.theme);\n});\n\n// å‘ä¸»åº”ç”¨å‘é€äº‹ä»¶\nfunction sendMessageToMain() {\n  communication.eventBus.emit('subAppEvent', {\n    type: 'message',\n    data: { message: 'Hello from sub app' }\n  });\n}\n\n// è°ƒç”¨ä¸»åº”ç”¨æ–¹æ³•\nfunction showMainDialog() {\n  communication.invokeMethod('mainApp', 'showDialog', 'Message from sub app');\n}\n\n// æ³¨å†Œå­åº”ç”¨API\nconst subAppAPI = {\n  refreshData() {\n    // åˆ·æ–°å­åº”ç”¨æ•°æ®\n  }\n};\n\ncommunication.registerApp('subApp', subAppAPI);\n```\n\n### 5.3. ä½¿ç”¨ç¤ºä¾‹ - Vueå­åº”ç”¨\n\n```vue\n<!-- SubApp.vue -->\n<template>\n  <div>\n    <button @click=\"sendMessage\">å‘é€æ¶ˆæ¯åˆ°ä¸»åº”ç”¨</button>\n    <button @click=\"updateState\">æ›´æ–°å…±äº«çŠ¶æ€</button>\n  </div>\n</template>\n\n<script>\nimport { communication } from './communication';\n\nexport default {\n  name: 'SubApp',\n  created() {\n    // ç›‘å¬ä¸»åº”ç”¨äº‹ä»¶\n    communication.eventBus.on('mainAppEvent', this.handleMainEvent);\n    \n    // ç›‘å¬å…±äº«çŠ¶æ€\n    this.unsubscribe = communication.stateManager.subscribe(\n      'globalConfig',\n      this.handleConfigChange\n    );\n  },\n  beforeDestroy() {\n    // æ¸…ç†äº‹ä»¶ç›‘å¬\n    communication.eventBus.off('mainAppEvent', this.handleMainEvent);\n    this.unsubscribe && this.unsubscribe();\n  },\n  methods: {\n    handleMainEvent(data) {\n      console.log('Received event from main:', data);\n    },\n    handleConfigChange(config) {\n      console.log('Global config changed:', config);\n    },\n    sendMessage() {\n      communication.eventBus.emit('subAppEvent', {\n        message: 'Hello from Vue sub app'\n      });\n    },\n    updateState() {\n      const currentTheme = communication.stateManager.getState('globalConfig')?.theme;\n      communication.stateManager.setState('globalConfig', {\n        theme: currentTheme === 'dark' ? 'light' : 'dark'\n      });\n    }\n  }\n};\n</script>\n```\n\n### 5.4. ä½¿ç”¨ç¤ºä¾‹ - Reactå­åº”ç”¨\n\n```jsx\n// SubApp.jsx\nimport React, { useEffect } from 'react';\nimport { communication } from './communication';\n\nfunction SubApp() {\n  useEffect(() => {\n    const handleMainEvent = (data) => {\n      console.log('Received event from main:', data);\n    };\n\n    // ç›‘å¬ä¸»åº”ç”¨äº‹ä»¶\n    communication.eventBus.on('mainAppEvent', handleMainEvent);\n\n    // ç›‘å¬å…±äº«çŠ¶æ€\n    const unsubscribe = communication.stateManager.subscribe(\n      'globalConfig',\n      (config) => {\n        console.log('Global config changed:', config);\n      }\n    );\n\n    // æ¸…ç†å‡½æ•°\n    return () => {\n      communication.eventBus.off('mainAppEvent', handleMainEvent);\n      unsubscribe();\n    };\n  }, []);\n\n  const sendMessage = () => {\n    communication.eventBus.emit('subAppEvent', {\n      message: 'Hello from React sub app'\n    });\n  };\n\n  const updateState = () => {\n    const currentTheme = communication.stateManager.getState('globalConfig')?.theme;\n    communication.stateManager.setState('globalConfig', {\n      theme: currentTheme === 'dark' ? 'light' : 'dark'\n    });\n  };\n\n  return (\n    <div>\n      <button onClick={sendMessage}>å‘é€æ¶ˆæ¯åˆ°ä¸»åº”ç”¨</button>\n      <button onClick={updateState}>æ›´æ–°å…±äº«çŠ¶æ€</button>\n    </div>\n  );\n}\n\nexport default SubApp;\n```\n\n## 6. qiankun çš„å®ç°åŸç†\n\n>  çœ‹ [figjam](https://www.figma.com/board/9ykLrmg5xwkZvY8cxFinog/0022.%E5%B8%B8%E8%A7%81%E7%9A%84%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%96%B9%E6%A1%88%E5%8F%8A%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90?node-id=0-1&node-type=canvas&t=4hrfzhAvEhnaDpVF-0)\n\nåŸºåº§åº”ç”¨ï¼Œéœ€è¦åšä»¥ä¸‹äº‹æƒ…\n- â‘  **è´Ÿè´£æ³¨å†Œå­åº”ç”¨**ï¼Œç¤ºä¾‹å¦‚ä¸‹\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-32.png)\n- â‘¡ **åŸºåº§é‡Œï¼Œéœ€è¦ç›‘å¬å…¨å±€è·¯ç”±ï¼Œç„¶åæ‰¾åˆ°åŒ¹é…å­åº”ç”¨ï¼Œç„¶ååŠ è½½å­åº”ç”¨ï¼Œå†ç„¶åå¸è½½æˆ–åˆ‡æ¢ç­‰**\n\t- fetch å­åº”ç”¨çš„å…¥å£æ–‡ä»¶ `index.html` ï¼Œç„¶åéœ€è¦æŠ½å– js , eval æ‰§è¡Œå®ƒ\n\t- æ‰€ä»¥ï¼Œéœ€è¦å¤„ç†æˆå…¼å®¹çš„ umd æ ¼å¼ï¼Œæ•…éœ€è¦ä¿®æ”¹ webpack\n\t- fetch æ‰€ä»¥è¦æ±‚åŒåŸŸ\n\t- æ‰§è¡Œå®Œå­åº”ç”¨çš„è„šæœ¬åï¼Œéœ€è¦æŒ‚è½½ `#app` ä¸Šï¼Œä½†å¯èƒ½ä¼šç›´æ¥è¦†ç›–ä¸¢ä¸»åº”ç”¨ï¼›æ‰€ä»¥æ‰ä¼šè¦æ±‚å­åº”ç”¨æœ‰ è‡ªå·±çš„ `container` å±æ€§ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå»ºè®®å­åº”ç”¨ name/id å”¯ä¸€ï¼›\n\t- å›¾ç‰‡è·¯å¾„å¯èƒ½ 404ï¼Œæ‰€ä»¥éœ€è¦æ³¨å…¥æ­£ç¡®çš„å­åº”ç”¨ public path\n\t- ä¸¤ä¸ªå­åº”ç”¨ç›¸äº’è·³è½¬æ—¶ï¼Œå¦‚æœä¸åŠæ—¶å¸è½½ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸¤ä¸ªå­åº”ç”¨**åŒæ—¶å±•ç¤º**çš„æƒ…å†µ\n\t- å…³äº**æ ·å¼éš”ç¦»**ï¼Œä¸¤ç§æ–¹æ¡ˆ\n\t\t- å‘½åç©ºé—´ï¼Œç±»ä¼¼äºvue style scopt\n\t\t- webcomponet æ–¹æ¡ˆ\n\n## 7. è·¯ç”±åˆ†å‘åŸç†\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-30.png)\n\n## 8. æ›´å¤š\n\n>  å†æŠŠä¹‹å‰æ•´ç†çš„è‰ç¨¿æµç¨‹å›¾çœ‹çœ‹ï¼Œè¯¦è§ [figjam](https://www.figma.com/board/9ykLrmg5xwkZvY8cxFinog/0022.%E5%B8%B8%E8%A7%81%E7%9A%84%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%96%B9%E6%A1%88%E5%8F%8A%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90?node-id=0-1&node-type=canvas&t=4hrfzhAvEhnaDpVF-0)\n\n","6772b59df93f51828b6f593d40b3cc76":"\n# å‰è¨€\n\n\n","303b5abd5ddd5f529a7a30903ad2465d":"\n# ä»äººæœºäº¤äº’ç€æ‰‹ï¼Œå¦‚ä½•è§£å†³å‰ç«¯æ€§èƒ½é—®é¢˜\n\n\nä»äººæœºäº¤äº’ï¼ˆHCI - Human-Computer Interactionï¼‰è§’åº¦æ¥ä¼˜åŒ–å‰ç«¯æ€§èƒ½ï¼Œä¸»è¦å…³æ³¨ç”¨æˆ·ä½“éªŒå’Œäº¤äº’æ•ˆç‡ã€‚\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. äº¤äº’åé¦ˆä¼˜åŒ– \n\n### 1.1 å³æ—¶åé¦ˆæœºåˆ¶\n\n- ä½¿ç”¨éª¨æ¶å±æä¾›å³æ—¶åé¦ˆ\n- loading æ•ˆæœ\n\n### 1.2 è¿›åº¦æŒ‡ç¤º\n\n- æ–‡ä»¶ä¸Šä¼ è¿›åº¦ç¤ºä¾‹\n\n## 2. äº¤äº’æµç•…æ€§ä¼˜åŒ–\n\n### 2.1 é˜²æŠ–ä¸èŠ‚æµ\n\n## 3. æ‰‹åŠ¿äº¤äº’ä¼˜åŒ–\n\n### 3.1 è§¦æ‘¸äº‹ä»¶ä¼˜åŒ–\n\n## 4. è§†è§‰åé¦ˆä¼˜åŒ–\n\n### 4.1 åŠ¨ç”»è¿‡æ¸¡\n\n## 5. å¯è®¿é—®æ€§ä¼˜åŒ–\n\n### 5.1 é”®ç›˜å¯¼èˆª\n\n## 6. é”™è¯¯å¤„ç†ä¸æ¢å¤\n\n### 6.1 ä¼˜é›…é™çº§\n\n- é”™è¯¯æç¤º\n- é‡è¯•\n\n## 7. æ€§èƒ½æ„ŸçŸ¥ä¼˜åŒ–\n\n### 7.1 è™šæ‹Ÿæ»šåŠ¨\n\n## 8. çŠ¶æ€ç®¡ç†ä¼˜åŒ–\n\n### 8.1 ç”¨æˆ·æ“ä½œçŠ¶æ€ç®¡ç†\n\n- ä½¿ç”¨çŠ¶æ€æœºç®¡ç† `xstate` å¤æ‚äº¤äº’","e9d05be919375e3789ea47518109c59f":"\n# å¦‚ä½•åº¦é‡å‰ç«¯æ€§èƒ½\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä½•ä¸ºå‰ç«¯æ€§èƒ½ \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-8.png)\n\n## 2. å¦‚ä½•åº¦é‡æ€§èƒ½\n\n### 2.1. ä¸»è§‚æ„Ÿå—\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-9.png)\n\n### 2.2. æ¯”å¦‚ï¼šå¦‚ä½•åº¦é‡ç™½å±æ—¶é—´\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-10.png)\n\nä½¿ç”¨`æ€§èƒ½ API`\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-11.png)\n\n## 3. web performance api\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-12.png)\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-13.png)\n\n## 4. ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ€§èƒ½æŒ‡æ ‡\n\n![520](#)ã€\n\n## 5. ç”¨æˆ·ä½“éªŒæ ¸å¿ƒæŒ‡æ ‡\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-15.png)\n\n## 6. Web Vitals\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-16.png)\n\n## 7. æ€§èƒ½æŒ‡æ ‡æ€»ç»“\n\n![600](#)","1ad483abf6515f02aabdedb27700c69c":"\n# æ€§èƒ½ä¼˜åŒ–çš„æ€è·¯\n\n`#å‰ç«¯æ€§èƒ½`  \n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ€§èƒ½ä¼˜åŒ–ä¸‰æ¿æ–§ \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-18.png)\n\n## 2. ç¼“å­˜\n\n### 2.1. web ç¼“å­˜æŠ€æœ¯\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-19.png)\n\n### 2.2. å¸¸è§çš„ç¼“å­˜æŠ€æœ¯\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-20.png)\n\n## 3. é¢„åŠ è½½\n\n### 3.1. èµ„æºé¢„åŠ è½½\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-21.png)\n\n### 3.2. æ•°æ®é¢„æ•°æ®\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-22.png)\n\n## 4. æ¸²æŸ“\n\n### 4.1. æ¸²æŸ“åˆ†ç±»\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-23.png)\n\n### 4.2. csr â†’ ssr\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-24.png)\n\n### 4.3. é¢„æ¸²æŸ“çš„æ¡ˆä¾‹\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-25.png)\n### 4.4. å…¶ä»–è¿è¡Œæ—¶ä¼˜åŒ–æ€è·¯\n\n- é¿å…å¼ºåˆ¶å¸ƒå±€\n- æ‰¹é‡åŒ–æ“ä½œ\n- é•¿åˆ—è¡¨\n- ä»»åŠ¡æ‹†è§£\n- å¹¶è¡Œï¼šworker\n- css å–„ç”¨åˆæˆ\n\n## 5. ä¸€äº›å¯å‘\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-26.png)\n","85520fcccabd5937b0ef451f76f44493":"\n# é•¿åˆ—è¡¨æˆ–å¤§æ•°æ®æ¸²æŸ“ä¼˜åŒ–çš„ä¸€äº›æ€è·¯\n\n\n`#å‰ç«¯`  `#å‰ç«¯æ€§èƒ½`  `#2023/03/17`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å…ˆè¯´å¯¼è‡´é•¿åˆ—è¡¨æ€§èƒ½åŠä½“ç°ä¸ä½³çš„åŸå›  \néœ€è¦ `æ¸²æŸ“å¤§é‡çš„DOMèŠ‚ç‚¹` åŠ `é¢‘ç¹çš„DOMæ“ä½œ` ï¼Œ\n\n- å±•å¼€è¯´å°±æ˜¯æ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦æµè§ˆå™¨è¿›è¡Œ`è®¡ç®—`ã€`å¸ƒå±€`å’Œ`ç»˜åˆ¶` ç­‰ã€‚ å¦‚æœæ€»ç»“ï¼Œé‚£ä¹ˆå…¶å®å°±æ˜¯ æ‰€è°“çš„ **CPUçš„ç“¶é¢ˆ**\n\nå¦å¤–ï¼Œå°±æ˜¯ä¸€äº›ç½‘ç»œåŸå› äº†ï¼Œæ¯•ç«Ÿè¯·æ±‚æ€»æ˜¯éœ€è¦è€—è´¹æ—¶é—´çš„ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ **IOçš„ç“¶é¢ˆ** ï¼ˆè¿™é‡Œä¸»è¦æŒ‡`ç½‘ç»œIO`ï¼‰ \n\n## 2. ä¸€äº›å¸¸è§çš„ä¼˜åŒ–æ€è·¯\n\n### 2.1. åˆ†é¡µ\næœ€ç®€å•ä¸”è§æ•ˆçš„æ–¹æ³•ï¼Œä½†éœ€è¦ä¸ `ç”¨æˆ·ä½“éªŒ` åšå¹³è¡¡\n\n### 2.2. è™šæ‹Ÿæ»šåŠ¨ã€è™šæ‹Ÿåˆ—è¡¨\næ¯”è¾ƒå¸¸è§ä¸”å¤§è§„æ¨¡åº”ç”¨çš„æ€è·¯ï¼Œå…·ä½“çš„ä¸€äº›`è¦ç‚¹`ï¼š\n\n- `å¯è§†åŒºåŸŸ`ï¼š åš`ç»å¯¹å®šä½`ï¼Œleftã€rightã€top è®¾ç½®ä¸º 0\n- `æ»šåŠ¨åŒºåŸŸ`ï¼šç”¨äº`å½¢æˆæ»šåŠ¨æ¡`ï¼Œåšç»å¯¹å®šä½ï¼Œ`leftã€rightã€top` è®¾ç½®ä¸º 0ï¼Œ`z-index:-1`\n- `çœŸå®æ¸²æŸ“åŒºåŸŸ`ï¼šæ»šåŠ¨æ—¶ä½¿ç”¨`translate3d(x,y,z)`\n\nå…·ä½“æ­¥éª¤ï¼š\n\n1. è®¡ç®—å½“å‰å¯è§åŒºåŸŸèµ·å§‹æ•°æ®çš„ `startIndex`\n2. è®¡ç®—å½“å‰å¯è§åŒºåŸŸç»“æŸæ•°æ®çš„ `endIndex`\n3. è®¡ç®—å½“å‰å¯è§åŒºåŸŸçš„æ•°æ®ï¼Œå¹¶æ¸²æŸ“åˆ°é¡µé¢ä¸­\n4. è®¡ç®— `startIndex` å¯¹åº”çš„æ•°æ®åœ¨æ•´ä¸ªåˆ—è¡¨ä¸­çš„åç§»ä½ç½® `startOffset`ï¼Œå¹¶è®¾ç½®åˆ°åˆ—è¡¨ä¸Š\n5. åœ¨æ»šåŠ¨çš„æ—¶å€™ï¼Œä¿®æ”¹`çœŸå®æ¸²æŸ“åŒºåŸŸ`çš„ `transform: translate3d(0, y, 0)`\n\nä¸‹é¢æ˜¯ä¸€æ®µç¤ºä¾‹ä»£ç ï¼š\n```javascript\nupdateVisibleData(scrollTop) {\n  scrollTop = scrollTop || 0;\n  // å–å¾—å¯è§åŒºåŸŸçš„å¯è§åˆ—è¡¨é¡¹æ•°é‡\n  const visibleCount = Math.ceil(this.$el.clientHeight / this.itemHeight); \n  // å–å¾—å¯è§åŒºåŸŸçš„èµ·å§‹æ•°æ®ç´¢å¼•\n  const start = Math.floor(scrollTop / this.itemHeight); \n  // å–å¾—å¯è§åŒºåŸŸçš„ç»“æŸæ•°æ®ç´¢å¼•\n  const end = start + visibleCount; \n  // è®¡ç®—å‡ºå¯è§åŒºåŸŸå¯¹åº”çš„æ•°æ®ï¼Œè®© Vue.js æ›´æ–°\n  this.visibleData = this.data.slice(start, end); \n  // æŠŠå¯è§åŒºåŸŸçš„ top è®¾ç½®ä¸ºèµ·å§‹å…ƒç´ åœ¨æ•´ä¸ªåˆ—è¡¨ä¸­çš„ä½ç½®ï¼ˆä½¿ç”¨ transform æ˜¯ä¸ºäº†æ›´å¥½çš„æ€§èƒ½ï¼‰\n  this.$refs.content.style.webkitTransform = `translate3d(0, ${ start * this.itemHeight }px, 0)`; \n}\n```\n\n`åŠ¨æ€é«˜åº¦`çš„åœºæ™¯ï¼šéœ€è¦åœ¨æ¸²æŸ“æ—¶`åŠ¨æ€è®¡ç®—`æ¯ä¸ªåˆ—è¡¨é¡¹çš„é«˜åº¦ï¼Œå¹¶æ ¹æ®`å®é™…é«˜åº¦`è¿›è¡Œæ¸²æŸ“ï¼Œä¸‹é¢æ˜¯`updateVisibleData` çš„ä¸€ä¸ªæ€è·¯ã€‚\n```javascript\nupdateVisibleData(scrollTop) {\n  scrollTop = scrollTop || 0;\n  const start = this.findNearestItemIndex(scrollTop);\n  const end = this.findNearestItemIndex(scrollTop + this.$el.clientHeight);\n  this.visibleData = this.data.slice(start, Math.min(end + 1, this.data.length));\n  // é€šè¿‡å…·ä½“æ–¹æ³•æ¥è®¾è®¡\n  this.$refs.content.style.webkitTransform = `translate3d(0, ${    this.getItemSizeAndOffset(start).offset }px, 0)`; \n}\n```\n\nä¸€ä¸ªç»†èŠ‚ï¼Œ`ios` æ²¡æ³•å®æ—¶ è§¦å‘ `scroll` çš„é—®é¢˜ï¼Ÿ\n\n- ä½¿ç”¨ `iscroll` æˆ–è€…   `better-scroll` ç­‰æˆç†Ÿçš„ç¬¬ä¸‰æ–¹åº“\n- `ontouchmove` æ¥å…¼å®¹ä¸‹\n- `-webkit-overflow-scrolling:touch` è®¾ç½®æœ‰`å›å¼¹æ•ˆæœ`\n   - `auto`: ä½¿ç”¨æ™®é€šæ»šåŠ¨, å½“æ‰‹æŒ‡ä»è§¦æ‘¸å±ä¸Šç§»å¼€ï¼Œæ»šåŠ¨ä¼šç«‹å³åœæ­¢ã€‚\n   - `touch` , æœ‰å›å¼¹æ•ˆæœ\n\n### 2.3. å…¶ä»–çš„ä¸€äº›ç»†èŠ‚ä¼˜åŒ–ç‚¹\n\n- ä½¿ç”¨`éª¨æ¶ç‰‡`ä¼˜åŒ–ç™½å±\n- ä½¿ç”¨æ–°çš„APIï¼Œæé«˜æ€§èƒ½\n   - `scroll` æ—¶ï¼Œä½¿ç”¨ `requestAnimationFrame` æ¥åŒ…è£…å›è°ƒ\n   - æˆ–è€…åšä¸‹`èŠ‚æµ`\n- ä½¿ç”¨`ç¼“å­˜`ï¼Œéœ€è¦æŠŠ`å°ºå¯¸ã€åç§»`ç­‰ä¿¡æ¯è¿›è¡Œä¸€ä¸ª`ç¼“å­˜` \n- å›¾ç‰‡`æ‡’åŠ è½½`\n\n## 3. å…¶ä»–çš„æ€è·¯\n\n- ä½¿ç”¨`ç¼“å­˜` ï¼ŒåŒ…æ‹¬æ•°æ®ç¼“å­˜ï¼Œä¹ŸåŒ…æ‹¬é‡å¤åˆ©ç”¨èŠ‚ç‚¹ç­‰\n- `æ‡’åŠ è½½` ä¸ `é¢„åŠ è½½`\n- å‡å°‘DOMæ“ä½œ ï¼Œç²¾ç®€ DOM ç»“æ„\n- ä½¿ç”¨`Web Worker`  å°†é¡µé¢çš„`æ¸²æŸ“`å’Œ`è®¡ç®—é€»è¾‘`åˆ†ç¦»å¼€æ¥\n- æœåŠ¡å™¨ç«¯æ¸²æŸ“ ï¼Œ `SSR` \n- CSSå¸ƒå±€ä¼˜åŒ–ï¼Œå‡å°‘`å›æµ`ç­‰ \n- CSS3ç¡¬ä»¶åŠ é€Ÿ\n- ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½ï¼Œæ¯”å¦‚`CSSæ ·å¼ä¼˜åŒ–`å’Œ `JSæ€§èƒ½ä¼˜åŒ–`\n- å›¾ç‰‡ä¼˜åŒ– ï¼Œ `æ‡’åŠ è½½`å’Œ`é¢„åŠ è½½` åŠ `å‹ç¼©` ï¼Œ`ç¼©ç•¥å›¾` ï¼Œ å›¾ç‰‡æ ¼å¼æ¯”å¦‚ `WebP` æ›´å°ï¼Œ`jpg` æ›´å¿«æ¸²æŸ“ç­‰\n- ä½¿ç”¨æ¸è¿›å¼æ¸²æŸ“ ï¼Œå…ˆæ¸²æŸ“å…³é”®å†…å®¹\n- æ–° API ä½¿ç”¨ï¼Œæ¯”å¦‚ `requestIdleCallback` ç©ºé—²æ—¶é—´å†æ‰§è¡Œ\n- `HTTP`è¯·æ±‚ä¼˜åŒ–ç­‰\n\n> [!tip]\n  JPEG æ ¼å¼ä¸æ”¯æŒé€æ˜åº¦è®¾ç½®\n\n## 4. æœ€å\nè¿˜æ˜¯éœ€è¦æ ¹æ®`å®é™…æƒ…å†µ` é€‰æ‹© `ROI` æœ€å¤§çš„æ–¹æ¡ˆï¼Œæ‰¾ ä¸»è¦çŸ›ç›¾ã€‚\n\n---\n\n## 5. é˜…è¯»åŸæ–‡\n\n- [https://liguwe.github.io/post/4214e1f9-529d-5201-b575-248082694fd6](https://liguwe.github.io/post/4214e1f9-529d-5201-b575-248082694fd6)\n","fc299d2c272f5751a9c54c336092ccdc":"\n# HTML ç¯‡\n\n`#å‰ç«¯` `#HTML` \n\n\n## ç›®å½•\n<!-- toc -->\n ## å‚è€ƒ \n\n- [GPT-4o](https://chatgpt.com/)\n- [Claude 3.5 Sonnet](https://www.anthropic.com/news/claude-3-5-sonnet?locale=zh_CN)\n- [web.dev](https://web.dev/learn/html/welcome?continue=https%3A%2F%2Fweb.dev%2Flearn%2Fhtml&hl=zh-cn#article-https://web.dev/learn/html/welcome&hl=zh-cn)\n- [HTML è¯­è¨€ç®€ä»‹](https://wangdoc.com/html/intro#%E6%A0%87%E7%AD%BE)\n- [HTML ç®€ä»‹ - å­¦ä¹  Web å¼€å‘ | MDN](https://developer.mozilla.org/zh-CN/docs/Learn/HTML/Introduction_to_HTML)\n- [https://whatwg-cn.github.io/html/](https://whatwg-cn.github.io/html/)\n- [https://whatwg.org/?locale=zh_CN](https://whatwg.org/?locale=zh_CN)\n- [https://html.spec.whatwg.org/?locale=zh_CN](https://html.spec.whatwg.org/?locale=zh_CN)\n- [ARIA - æ— éšœç¢ | MDN](https://developer.mozilla.org/zh-CN/docs/Web/Accessibility/ARIA)\n","c9d41c3af117571bab1d2565a55eb80d":"\n# HTML æ¦‚è¿°\n\n\n`#å‰ç«¯` `#HTML` \n\n\n## ç›®å½•\n<!-- toc -->\n ## ä»€ä¹ˆæ˜¯ HTMLï¼Ÿ \n\n- HTML çš„å…¨åæ˜¯â€œè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€â€ï¼ˆHyperText Markup Languageï¼‰ï¼Œå¯ä»¥è¯´æœ‰äº†å®ƒï¼Œæ‰æœ‰äº’è”ç½‘çš„**å†…å®¹**ã€‚\n- å®ƒæ˜¯ç”¨äºæ„å»ºç½‘é¡µçš„åŸºæœ¬è¯­è¨€ï¼Œç”¨äºå®šä¹‰ç½‘é¡µçš„ç»“æ„å’Œå†…å®¹\n- ä»»ä½•ç½‘ç«™çš„è¯·æ±‚ï¼Œç¬¬ä¸€ä¸ªè¯·æ±‚å›æ¥çš„èµ„æºå°±æ˜¯`.html` æ–‡ä»¶ã€‚\n\n## HTML å…ƒç´ åŸºæœ¬æ ¼å¼\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/5807dd04c7c94cbf0070e1ea5ec7d024.png)\n\n## HTML åŸºæœ¬ç»“æ„\n\n```html\n<!DOCTYPE html>\n<html>\n  <head>\n    <title>é¡µé¢æ ‡é¢˜</title>\n  </head>\n  <body>\n    <h1>æ¬¢è¿</h1>\n    <p>è¿™æ˜¯ä¸€ä¸ªæ®µè½ã€‚</p>\n  </body>\n</html>\n```\n\n","e5a2678efbb05335811bbe4e33805587":"\n# HTML æ ‡ç­¾ä¸ HTML å±æ€§\n\n\n`#å‰ç«¯` `#HTML` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. è¯´è¯´ `<meta>` æ ‡ç­¾çš„ç”¨å¤„ï¼Ÿ \n\nä½¿ç”¨ `<meta>` æ ‡è®° Metadata \n> æ›´å¤šå‚è€ƒï¼š[https://web.dev/learn/html/metadata?hl=zh-cn](https://web.dev/learn/html/metadata?hl=zh-cn)\n\n## 2. æ ‡ç­¾è¯­ä¹‰åŒ–æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ\n\næ¯ä¸ªæ ‡ç­¾éƒ½æœ‰è¯­ä¹‰ï¼Œéœ€è¦æ³¨æ„ä½¿ç”¨åœºæ™¯ï¼Œæ¯”å¦‚ä¸‹å›¾ï¼š\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/acc28644f26ef7363764d208cbc08ba3.png)\n\n## 3. åˆ—ä¸¾ä¸€äº›ä¸å¸¸ç”¨ä½†ç‰¹åˆ«æœ‰ç”¨çš„æ ‡ç­¾\n\n### 3.1. abbrï¼šç¼©å†™ abbreviation\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/dd23fcc1f51d799987d70f160ed51031.png)\n\n### 3.2. å±•ç¤ºè®¡ç®—æœºä»£ç \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/3949d49f5800384366ecff6d88bc091b.png)\n\n> æ‰€ä»¥ä¸åªæœ‰`pre/code` ï¼Œä½†å…¶ä»–ç¡®å®ä¸å¤ªå¸¸ç”¨\n\n### 3.3. å¯¹è¯æ¡†\n\n```html\n<dialog open>\n  <p>Greetings, one and all!</p>\n  <form method=\"dialog\">\n    <button>OK</button>\n  </form>\n</dialog>\n```\n\n### 3.4. å…¶ä»–ï¼šHTML å…ƒç´ ï¼Œå¤šçœ‹ MDN\n\n> **è¿™é‡Œåªæ˜¯å¼ºè°ƒæ‚¨å¯èƒ½è¿˜æœ‰å¾ˆå¤šæ ‡ç­¾å…ƒç´ æ²¡æœ‰ä½¿ç”¨è¿‡ï¼Œå»ºè®®å¤šå¤šå‚è€ƒæ–‡æ¡£**\n\n> æ›´å¤šå‚è€ƒï¼š https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/a\n\n## 4. è¯´è¯´ HTML å±æ€§æœ‰å“ªäº›ç±»å‹ï¼Ÿ\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/e5d1702720265eaec8f3a3af0dce9349.png)\n\nåˆåˆ†`å¸ƒå°”å±æ€§`ã€`æšä¸¾å±æ€§`ã€`å…¨å±€å±æ€§`åŠ`è‡ªå®šä¹‰å±æ€§`ï¼Œå¯è§ä¸‹é¢ä»£ç ç¤ºä¾‹\n\n```html\n<input required>\n<section id=\"reg\"/>\n<blockquote data-machine-learning=\"workshop\"></blockquote>\n```\n\n> æ›´å¤šå¯å‚è€ƒï¼š[ç½‘é¡µå…ƒç´ çš„å±æ€§](https://wangdoc.com/html/attribute)\n\n## 5. åˆ—ä¸¾å¤šåª’ä½“åµŒå…¥ç›¸å…³çš„æ ‡ç­¾\n\n- å¸¸è§æ ‡ç­¾ä¸º`<img> ã€<video> ã€<audio>ã€ã€<iframe>ã€<embed> ã€ <object>ã€<track>ã€<param>`\n   - å¯æ’å…¥å¦‚å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ã€ç½‘é¡µã€å­—å¹•\n- `<embed>` å’Œ `<object>` : å¯åµŒå…¥å„ç±»èµ„æºï¼Œå¦‚éŸ³é¢‘ã€è§†é¢‘ã€pdf æ–‡ä»¶ç­‰\n\n> æ›´å¤šå‚è€ƒï¼š\n> [å¤šåª’ä½“ä¸åµŒå…¥ - å­¦ä¹  Web å¼€å‘ | MDN](https://developer.mozilla.org/zh-CN/docs/Learn/HTML/Multimedia_and_embedding)\n> [å¤šåª’ä½“æ ‡ç­¾](https://wangdoc.com/html/multimedia#embed)\n\n","5063bd94ca8e5e53bfd7718a60302e62":"\n# HTML æŠ€æœ¯å…³é”®è¯\n\n\n`#å‰ç«¯` `#HTML` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åˆ—ä¸¾ä¸€äº›HTML æŠ€æœ¯å…³é”®è¯ï¼ˆSonnetï¼‰ \n\nå…³äºHTMLæŠ€æœ¯ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®è¯å’Œæ¦‚å¿µï¼š\n\n1. è¯­ä¹‰åŒ–æ ‡ç­¾ï¼šå¦‚header, nav, main, article, section, aside, footerç­‰\n2. è¡¨å•å…ƒç´ ï¼šinput, select, textarea, buttonç­‰\n3. å¤šåª’ä½“æ ‡ç­¾ï¼šaudio, video, canvas, svg\n4. å…ƒæ•°æ®ï¼šmetaæ ‡ç­¾ï¼Œç”¨äºå®šä¹‰é¡µé¢çš„å„ç§å…ƒæ•°æ®\n5. å“åº”å¼è®¾è®¡ï¼šä½¿ç”¨viewport metaæ ‡ç­¾å’Œåª’ä½“æŸ¥è¯¢\n6. æ— éšœç¢æ€§ï¼ˆAccessibilityï¼‰ï¼šä½¿ç”¨ariaå±æ€§ï¼Œaltæ–‡æœ¬ç­‰\n7. ç»“æ„åŒ–æ•°æ®ï¼šä½¿ç”¨microdata, RDFa, JSON-LDç­‰\n8. ç¦»çº¿Webåº”ç”¨ï¼šä½¿ç”¨manifestæ–‡ä»¶ï¼ˆç°åœ¨æ›´å¤šä½¿ç”¨Service Workersï¼‰\n9. æœ¬åœ°å­˜å‚¨ï¼šlocalStorage, sessionStorage\n10. **æ‹–æ”¾APIï¼šdrag and drop**\n11. åœ°ç†å®šä½ï¼šGeolocation API\n12. Web Workersï¼šç”¨äºåœ¨åå°è¿è¡Œè„šæœ¬\n13. WebSocketsï¼šç”¨äºå®æ—¶åŒå‘é€šä¿¡\n14. è·¨æ–‡æ¡£æ¶ˆæ¯ä¼ é€’ï¼špostMessage API\n15. å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰ï¼šç”¨äºé˜²æ­¢XSSæ”»å‡»\n16. è‡ªå®šä¹‰æ•°æ®å±æ€§ï¼šdata-*å±æ€§\n17. æ¨¡æ¿ï¼štemplateæ ‡ç­¾\n18. **å›¾ç‰‡å“åº”å¼ï¼šsrcsetå’Œsizeså±æ€§**\n19. å»¶è¿ŸåŠ è½½ï¼šä½¿ç”¨loading=\"lazy\"å±æ€§\n20. è¡¨å•éªŒè¯ï¼šä½¿ç”¨pattern, requiredç­‰å±æ€§\n21. è¾“å…¥ç±»å‹ï¼šå¦‚date, time, email, urlç­‰\n22. å­—ç¬¦ç¼–ç ï¼šä½¿ç”¨UTF-8\n23. DOCTYPEå£°æ˜ï¼š\n24. è¯­è¨€å£°æ˜ï¼šlangå±æ€§\n25. é“¾æ¥å…³ç³»ï¼šrelå±æ€§ï¼Œå¦‚stylesheet, iconç­‰\n26. è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰ï¼šé€šè¿‡HTTPå¤´éƒ¨æ§åˆ¶\n27. å†…å®¹å¯ç¼–è¾‘ï¼šcontenteditableå±æ€§\n28. è‡ªåŠ¨å®Œæˆï¼šautocompleteå±æ€§\n29. é¡µé¢å¯è§æ€§APIï¼šç”¨äºæ£€æµ‹é¡µé¢æ˜¯å¦å¯è§\n30. å†å²APIï¼šç”¨äºæ“ä½œæµè§ˆå†å²\n\nè¿™äº›å…³é”®è¯æ¶µç›–äº†HTMLçš„åŸºæœ¬ç»“æ„ã€æ–°ç‰¹æ€§ã€APIä»¥åŠä¸Webå¼€å‘ç›¸å…³çš„é‡è¦æ¦‚å¿µã€‚å®ƒä»¬åæ˜ äº†ç°ä»£HTMLçš„åŠŸèƒ½å’Œæœ€ä½³å®è·µã€‚\n\n## 2. åˆ—ä¸¾ä¸€äº›HTML æŠ€æœ¯å…³é”®è¯ï¼ˆGPT-4oï¼‰\n\nå…³äºHTMLæŠ€æœ¯çš„å…³é”®è¯ï¼Œå¯ä»¥æ¶µç›–HTMLçš„åŸºç¡€çŸ¥è¯†ã€æ ‡ç­¾ã€å±æ€§ã€åŠŸèƒ½ä»¥åŠç›¸å…³çš„æŠ€æœ¯å’Œæ¦‚å¿µã€‚ä»¥ä¸‹æ˜¯ä¸€äº›é‡è¦çš„HTMLæŠ€æœ¯å…³é”®è¯ï¼š\n\n### 2.1. åŸºç¡€çŸ¥è¯†\n\n- **HTML (HyperText Markup Language)**: è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€\n- **DOCTYPE**: æ–‡æ¡£ç±»å‹å£°æ˜\n- **å…ƒç´  (Element)**: HTMLçš„åŸºæœ¬æ„å»ºå—\n- **æ ‡ç­¾ (Tag)**: ç”¨äºå®šä¹‰HTMLå…ƒç´ çš„æ ‡è®°\n- **å±æ€§ (Attribute)**: æä¾›å…ƒç´ çš„é™„åŠ ä¿¡æ¯\n\n### 2.2. å¸¸ç”¨æ ‡ç­¾\n\n- `<html>`: å®šä¹‰HTMLæ–‡æ¡£çš„æ ¹å…ƒç´ \n- `<head>`: åŒ…å«æ–‡æ¡£çš„å…ƒæ•°æ®\n- `<title>`: å®šä¹‰æ–‡æ¡£çš„æ ‡é¢˜\n- `<meta>`: æä¾›æ–‡æ¡£çš„å…ƒæ•°æ®\n- `<link>`: é“¾æ¥å¤–éƒ¨èµ„æº\n- `<script>`: åµŒå…¥æˆ–å¼•ç”¨JavaScriptä»£ç \n- `<style>`: åµŒå…¥CSSæ ·å¼\n- `<body>`: å®šä¹‰æ–‡æ¡£çš„ä¸»ä½“å†…å®¹\n- `<header>`: å®šä¹‰é¡µé¢æˆ–èŠ‚çš„å¤´éƒ¨\n- `<footer>`: å®šä¹‰é¡µé¢æˆ–èŠ‚çš„å°¾éƒ¨\n- `<nav>`: å®šä¹‰å¯¼èˆªé“¾æ¥\n- `<main>`: å®šä¹‰æ–‡æ¡£çš„ä¸»è¦å†…å®¹\n- `<section>`: å®šä¹‰æ–‡æ¡£çš„èŠ‚\n- `<article>`: å®šä¹‰ç‹¬ç«‹çš„å†…å®¹å—\n- `<aside>`: å®šä¹‰ä¾§è¾¹æ å†…å®¹\n- `<h1>` åˆ° `<h6>`: å®šä¹‰æ ‡é¢˜\n- `<p>`: å®šä¹‰æ®µè½\n- `<a>`: å®šä¹‰è¶…é“¾æ¥\n- `<img>`: å®šä¹‰å›¾åƒ\n- `<ul>`: å®šä¹‰æ— åºåˆ—è¡¨\n- `<ol>`: å®šä¹‰æœ‰åºåˆ—è¡¨\n- `<li>`: å®šä¹‰åˆ—è¡¨é¡¹\n- `<table>`: å®šä¹‰è¡¨æ ¼\n- `<tr>`: å®šä¹‰è¡¨æ ¼è¡Œ\n- `<td>`: å®šä¹‰è¡¨æ ¼å•å…ƒ\n- `<th>`: å®šä¹‰è¡¨æ ¼å¤´å•å…ƒ\n- `<form>`: å®šä¹‰è¡¨å•\n- `<input>`: å®šä¹‰è¾“å…¥æ§ä»¶\n- `<button>`: å®šä¹‰æŒ‰é’®\n- `<textarea>`: å®šä¹‰å¤šè¡Œæ–‡æœ¬è¾“å…¥æ§ä»¶\n- `<select>`: å®šä¹‰ä¸‹æ‹‰åˆ—è¡¨\n- `<option>`: å®šä¹‰ä¸‹æ‹‰åˆ—è¡¨ä¸­çš„é€‰é¡¹\n- `<label>`: å®šä¹‰è¡¨å•æ§ä»¶çš„æ ‡ç­¾\n- `<div>`: å®šä¹‰æ–‡æ¡£ä¸­çš„åˆ†åŒºæˆ–åŒºåŸŸ\n- `<span>`: å®šä¹‰æ–‡æ¡£ä¸­çš„è¡Œå†…å…ƒç´ \n\n### 2.3. è¡¨å•å’Œè¾“å…¥ç±»å‹\n\n- `<input>` ç±»å‹: `text, password, email, url, number, date, time, checkbox, radio, file, submit, reset, button, hidden, color, range, search, tel\n- **è¡¨å•éªŒè¯å±æ€§**: `required, pattern, min, max, minlength, maxlength, step`\n\n### 2.4. å¤šåª’ä½“æ ‡ç­¾\n\n- `<audio>`: å®šä¹‰éŸ³é¢‘å†…å®¹\n- `<video>`: å®šä¹‰è§†é¢‘å†…å®¹\n- `<source>`: å®šä¹‰å¤šåª’ä½“èµ„æº\n- `<track>`: å®šä¹‰è§†é¢‘å’ŒéŸ³é¢‘çš„æ–‡æœ¬è½¨é“\n\n### 2.5. å›¾å½¢å’Œç»˜å›¾\n\n- `<canvas>`: ç”¨äºç»˜åˆ¶å›¾å½¢\n   - 2d\n   - 3d\n- **SVG (Scalable Vector Graphics)**: å¯ç¼©æ”¾çŸ¢é‡å›¾å½¢\n\n### 2.6. å“åº”å¼è®¾è®¡\n\n- `<meta name=\"viewport\">`: å®šä¹‰è§†å£å±æ€§\n- **åª’ä½“æŸ¥è¯¢ (Media Queries)**: ç”¨äºå“åº”å¼è®¾è®¡çš„CSSæŠ€æœ¯\n\n### 2.7. æœ¬åœ°å­˜å‚¨\n\n- **localStorage**: æœ¬åœ°å­˜å‚¨æ•°æ®\n- **sessionStorage**: ä¼šè¯å­˜å‚¨æ•°æ®\n\n### 2.8. Web Components\n\n- **è‡ªå®šä¹‰å…ƒç´  (Custom Elements)**: åˆ›å»ºè‡ªå®šä¹‰HTMLæ ‡ç­¾\n- **Shadow DOM**: éšè—DOMæ ‘\n- **HTMLæ¨¡æ¿ (HTML Templates)**: å®šä¹‰å¯é‡ç”¨çš„HTMLç‰‡æ®µ\n\n### 2.9. è¯­ä¹‰åŒ–å’Œå¯è®¿é—®æ€§\n\n- **è¯­ä¹‰åŒ–æ ‡ç­¾**: `<header>`, `<footer>`, `<nav>`, `<main>`, `<section>`, `<article>`, `<aside>`\n- **ARIA (Accessible Rich Internet Applications)**: å¢å¼ºå¯è®¿é—®æ€§çš„å±æ€§\n\n### 2.10. å®‰å…¨å’Œæ€§èƒ½\n\n- **å†…å®¹å®‰å…¨ç­–ç•¥ (CSP)**: é˜²æ­¢XSSæ”»å‡»\n- **æ‡’åŠ è½½ (Lazy Loading)**: å»¶è¿ŸåŠ è½½å›¾åƒå’Œå…¶ä»–èµ„æº\n- **é¢„åŠ è½½ (Preloading)**: æå‰åŠ è½½å…³é”®èµ„æº\n\n### 2.11. å…¶ä»–ç›¸å…³æŠ€æœ¯\n\n- **HTML5**: HTMLçš„æœ€æ–°ç‰ˆæœ¬\n- **CSS (Cascading Style Sheets)**: å±‚å æ ·å¼è¡¨ï¼Œç”¨äºæ ·å¼å’Œå¸ƒå±€\n- **JavaScript**: ç”¨äºäº¤äº’å’ŒåŠ¨æ€å†…å®¹çš„ç¼–ç¨‹è¯­è¨€\n- **DOM (Document Object Model)**: æ–‡æ¡£å¯¹è±¡æ¨¡å‹\n- **SEO (Search Engine Optimization)**: æœç´¢å¼•æ“ä¼˜åŒ–\n\nè¿™äº›å…³é”®è¯æ¶µç›–äº†HTMLæŠ€æœ¯çš„å„ä¸ªæ–¹é¢ï¼Œä»åŸºç¡€çŸ¥è¯†åˆ°é«˜çº§åŠŸèƒ½ï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨HTMLæ¥æ„å»ºç°ä»£Webåº”ç”¨ã€‚\n","2539cc84e9535c64adf912039f91d387":"\n# è¯·åˆ—ä¸¾ä½ è®¤ä¸ºæœ€é‡è¦ HTML æŠ€æœ¯æ¸…å•ï¼Ÿ\n\n\n`#å‰ç«¯` `#HTML` \n\nä»¥ä¸‹æ˜¯ä¸€äº›æœ€é‡è¦çš„HTMLæŠ€æœ¯æ¸…å•ï¼Œè¿™äº›æŠ€æœ¯å’Œæ¦‚å¿µå¯¹äºç°ä»£Webå¼€å‘è‡³å…³é‡è¦ï¼š\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. **HTML5** \n\n- **ä»‹ç»**ï¼šHTMLçš„æœ€æ–°ç‰ˆæœ¬ï¼Œæä¾›äº†è®¸å¤šæ–°ç‰¹æ€§å’ŒAPIã€‚\n- **ç‰¹ç‚¹**ï¼šè¯­ä¹‰åŒ–æ ‡ç­¾ã€æ–°çš„è¡¨å•æ§ä»¶ã€å¤šåª’ä½“æ”¯æŒï¼ˆaudioã€videoï¼‰ã€æœ¬åœ°å­˜å‚¨ï¼ˆlocalStorageã€sessionStorageï¼‰ã€‚\n\n## 2. **è¯­ä¹‰åŒ–æ ‡ç­¾**\n\n- **ä»‹ç»**ï¼šä½¿ç”¨å…·æœ‰æ˜ç¡®å«ä¹‰çš„æ ‡ç­¾æ¥æ„å»ºé¡µé¢ç»“æ„ã€‚\n- **ç‰¹ç‚¹**ï¼šæé«˜å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€å¢å¼ºSEOã€æ”¹å–„æ— éšœç¢è®¿é—®ã€‚\n- **ç¤ºä¾‹**ï¼š`<header>`, `<footer>`, `<article>`, `<section>`, `<nav>`, `<aside>`ã€‚\n\n## 3. **è¡¨å•å…ƒç´ å’ŒéªŒè¯**\n\n- **ä»‹ç»**ï¼šHTML5å¼•å…¥äº†è®¸å¤šæ–°çš„è¡¨å•æ§ä»¶å’Œå±æ€§ï¼Œç®€åŒ–äº†è¡¨å•çš„åˆ›å»ºå’ŒéªŒè¯ã€‚\n- **ç‰¹ç‚¹**ï¼šæ–°çš„è¾“å…¥ç±»å‹ï¼ˆå¦‚`email`, `url`, `date`ï¼‰ã€è¡¨å•éªŒè¯å±æ€§ï¼ˆå¦‚`required`, `pattern`ï¼‰ã€å¢å¼ºçš„ç”¨æˆ·ä½“éªŒã€‚\n\n## 4. **å¤šåª’ä½“å…ƒç´ **\n\n- **ä»‹ç»**ï¼šHTML5å¼•å…¥äº†åŸç”Ÿçš„å¤šåª’ä½“æ”¯æŒã€‚\n- **ç‰¹ç‚¹**ï¼š`<audio>`å’Œ`<video>`æ ‡ç­¾ï¼Œæ”¯æŒåµŒå…¥éŸ³é¢‘å’Œè§†é¢‘å†…å®¹ï¼Œæ— éœ€ç¬¬ä¸‰æ–¹æ’ä»¶ã€‚\n\n## 5. **Canvas**\n\n- **ä»‹ç»**ï¼šç”¨äºç»˜åˆ¶2Då›¾å½¢çš„HTMLå…ƒç´ ã€‚\n- **ç‰¹ç‚¹**ï¼šé€šè¿‡JavaScriptç»˜åˆ¶å›¾å½¢ã€åŠ¨ç”»å’Œæ¸¸æˆã€‚\n\n## 6. **SVG**\n\n- **ä»‹ç»**ï¼šå¯ç¼©æ”¾çŸ¢é‡å›¾å½¢ï¼ŒåŸºäºXMLçš„å›¾åƒæ ¼å¼ã€‚\n- **ç‰¹ç‚¹**ï¼šé«˜è´¨é‡çš„å›¾å½¢ã€å¯äº¤äº’ã€å¯åŠ¨ç”»åŒ–ã€æ”¯æŒCSSæ ·å¼ã€‚\n\n## 7. **æœ¬åœ°å­˜å‚¨**\n\n- **ä»‹ç»**ï¼šHTML5æä¾›äº†ä¸¤ç§æœ¬åœ°å­˜å‚¨æœºåˆ¶ï¼šlocalStorageå’ŒsessionStorageã€‚\n- **ç‰¹ç‚¹**ï¼šæŒä¹…åŒ–å­˜å‚¨ï¼ˆlocalStorageï¼‰ã€ä¼šè¯å­˜å‚¨ï¼ˆsessionStorageï¼‰ã€ç®€åŒ–å®¢æˆ·ç«¯æ•°æ®ç®¡ç†ã€‚\n\n## 8. **ç¦»çº¿æ”¯æŒ**\n\n- **ä»‹ç»**ï¼šé€šè¿‡`<manifest>`æ–‡ä»¶å’Œ`Service Workers`å®ç°ç¦»çº¿æ”¯æŒã€‚\n- **ç‰¹ç‚¹**ï¼šç¦»çº¿è®¿é—®ã€ç¼“å­˜èµ„æºã€æé«˜åº”ç”¨çš„å¯é æ€§ã€‚\n\n## 9. **Web Workers**\n\n- **ä»‹ç»**ï¼šåœ¨åå°çº¿ç¨‹ä¸­è¿è¡ŒJavaScriptä»£ç ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚\n- **ç‰¹ç‚¹**ï¼šå¹¶è¡Œå¤„ç†ã€æé«˜æ€§èƒ½ã€å¢å¼ºç”¨æˆ·ä½“éªŒã€‚\n\n## 10. **ARIAï¼ˆAccessible Rich Internet Applicationsï¼‰**\n\n- **ä»‹ç»**ï¼šä¸€ç»„å±æ€§ï¼Œç”¨äºå¢å¼ºWebå†…å®¹çš„å¯è®¿é—®æ€§ã€‚\n- **ç‰¹ç‚¹**ï¼šæ”¹å–„æ— éšœç¢è®¿é—®ã€æé«˜å±å¹•é˜…è¯»å™¨æ”¯æŒã€å¢å¼ºç”¨æˆ·ä½“éªŒã€‚\n\n## 11. **è‡ªå®šä¹‰æ•°æ®å±æ€§**\n\n- **ä»‹ç»**ï¼šä½¿ç”¨`data-*`å±æ€§åœ¨HTMLå…ƒç´ ä¸­å­˜å‚¨è‡ªå®šä¹‰æ•°æ®ã€‚\n- **ç‰¹ç‚¹**ï¼šçµæ´»çš„æ•°æ®å­˜å‚¨ã€ç®€åŒ–JavaScriptäº¤äº’ã€‚\n\n## 12. **æ¨¡æ¿å…ƒç´ **\n\n- **ä»‹ç»**ï¼š`<template>`æ ‡ç­¾ï¼Œç”¨äºå®šä¹‰å¯é‡ç”¨çš„HTMLç‰‡æ®µã€‚\n- **ç‰¹ç‚¹**ï¼šå»¶è¿Ÿæ¸²æŸ“ã€æé«˜æ€§èƒ½ã€å¢å¼ºä»£ç å¤ç”¨æ€§ã€‚\n\n## 13. **Shadow DOM**\n\n- **ä»‹ç»**ï¼šWeb Components çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå°è£…å…ƒç´ çš„å†…éƒ¨ç»“æ„å’Œæ ·å¼ã€‚\n- **ç‰¹ç‚¹**ï¼šæ ·å¼éš”ç¦»ã€é¿å…æ ·å¼å†²çªã€æé«˜ç»„ä»¶åŒ–å¼€å‘ã€‚\n\n## 14. **è‡ªå®šä¹‰å…ƒç´ **\n\n- **ä»‹ç»**ï¼šWeb Components çš„ä¸€éƒ¨åˆ†ï¼Œå…è®¸åˆ›å»ºè‡ªå®šä¹‰çš„HTMLæ ‡ç­¾ã€‚\n- **ç‰¹ç‚¹**ï¼šå¢å¼ºHTMLçš„å¯æ‰©å±•æ€§ã€æé«˜ä»£ç å¤ç”¨æ€§ã€ä¸æ¡†æ¶æ— å…³ã€‚\n\n## 15. **å“åº”å¼è®¾è®¡**\n\n- **ä»‹ç»**ï¼šä½¿ç”¨HTMLå’ŒCSSæŠ€æœ¯åˆ›å»ºé€‚åº”ä¸åŒè®¾å¤‡å’Œå±å¹•å°ºå¯¸çš„é¡µé¢ã€‚\n- **ç‰¹ç‚¹**ï¼šåª’ä½“æŸ¥è¯¢ã€å¼¹æ€§å¸ƒå±€ã€è§†å£è®¾ç½®ã€‚\n\n## 16. **å¾®æ•°æ®ï¼ˆMicrodataï¼‰**\n\n- **ä»‹ç»**ï¼šä¸€ç§åµŒå…¥ HTML çš„ç»“æ„åŒ–æ•°æ®çš„æ–¹å¼ã€‚\n- ç›®çš„:  ä¸ºHTMLå…ƒç´ æ·»åŠ æœºå™¨å¯è¯»çš„æ ‡ç­¾,æè¿°å…¶å«ä¹‰\n- **ç»„æˆ:** ä¸»è¦ç”± itemscope, itemtype, å’Œ itemprop å±æ€§ç»„æˆã€‚\n   - itemscope: åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®,è¡¨ç¤ºå…¶ä¸­åŒ…å«çš„æ ‡è®°æè¿°äº†ä¸€ä¸ªç‰¹å®šçš„é¡¹ç›®ã€‚\n   - itemtype: æŒ‡å®šé¡¹ç›®çš„ç±»å‹,é€šå¸¸æ˜¯ä¸€ä¸ªURL,æŒ‡å‘ä¸€ä¸ªè¯æ±‡è¡¨æˆ–æ¶æ„ã€‚\n   - itemprop: å®šä¹‰é¡¹ç›®çš„å±æ€§\n- **ç‰¹ç‚¹**ï¼šå¢å¼ºSEOã€æé«˜æœç´¢å¼•æ“ç†è§£é¡µé¢å†…å®¹çš„èƒ½åŠ›ã€‚\n- å¸¸ç”¨è¯æ±‡è¡¨ï¼šSchema.orgï¼Œæœ€å¹¿æ³›ä½¿ç”¨çš„ç»“æ„åŒ–æ•°æ®è¯æ±‡è¡¨ï¼Œç”±ä¸»è¦æœç´¢å¼•æ“å…±åŒæ”¯æŒã€‚\n\n```html\n<div itemscope itemtype=\"http://schema.org/Person\">  \n  <span itemprop=\"name\">John Doe</span>  \n  <span itemprop=\"jobTitle\">Software Developer</span>  \n  <a href=\"mailto:john@example.com\" itemprop=\"email\">john@example.com</a>  \n</div>  \n\n```\n\n## 17. **å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰**\n\n- **ä»‹ç»**ï¼šä¸€ç§Webå®‰å…¨ç­–ç•¥ï¼Œç”¨äºé˜²æ­¢è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ç­‰å®‰å…¨å¨èƒã€‚\n- **ç‰¹ç‚¹**ï¼šå®šä¹‰å…è®¸åŠ è½½çš„èµ„æºã€æé«˜å®‰å…¨æ€§ã€å‡å°‘æ”»å‡»é¢ã€‚\n\nå†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆ`Content Security Policy`ï¼Œç®€ç§°CSPï¼‰æ˜¯ä¸€ç§é‡è¦çš„Webå®‰å…¨æœºåˆ¶ï¼Œç”¨äºé˜²æ­¢è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ã€æ•°æ®æ³¨å…¥ç­‰æ”»å‡»ã€‚è®©æˆ‘è¯¦ç»†è§£é‡Šä¸€ä¸‹CSP\n\n### 17.1. åŸºæœ¬æ¦‚å¿µ\n\nCSPæ˜¯ä¸€ç§ç”±æœåŠ¡å™¨å£°æ˜çš„å®‰å…¨ç­–ç•¥ï¼Œå®ƒå‘Šè¯‰æµè§ˆå™¨å“ªäº›èµ„æºå¯ä»¥è¢«åŠ è½½å’Œæ‰§è¡Œã€‚\n\n### 17.2. ä¸»è¦ç›®æ ‡\n\n- é˜²æ­¢XSSæ”»å‡»\n- å‡å°‘æ•°æ®æ³¨å…¥é£é™©\n- æŠ¥å‘Šè¿è§„è¡Œä¸º\n- å¼ºåˆ¶ä½¿ç”¨HTTPS\n\n### 17.3. å·¥ä½œåŸç†\n\nCSPé€šè¿‡`HTTP å¤´éƒ¨ æˆ– meta æ ‡ç­¾`æ¥å®ç°ï¼ŒæŒ‡å®šå…è®¸åŠ è½½çš„èµ„æºçš„æ¥æºã€‚\n\n### 17.4. å®ç°æ–¹å¼\n\n#### 17.4.1. HTTPå¤´éƒ¨æ–¹å¼\n\n```\nContent-Security-Policy: directive1 source1 source2; directive2 source3 source4\n```\n\n#### 17.4.2. Metaæ ‡ç­¾æ–¹å¼\n\n```html\n<meta http-equiv=\"Content-Security-Policy\" content=\"directive1 source1 source2; directive2 source3 source4\">\n```\n\n### 17.5. å¸¸ç”¨æŒ‡ä»¤\n\n- `default-src`: é»˜è®¤åŠ è½½ç­–ç•¥\n- `script-src`: JavaScriptæ¥æº\n- `style-src`: CSSæ ·å¼æ¥æº\n- `img-src`: å›¾ç‰‡æ¥æº\n- `connect-src`: AJAXã€WebSocketç­‰è¿æ¥æ¥æº\n- `font-src`: å­—ä½“æ–‡ä»¶æ¥æº\n- `object-src`: æ’ä»¶æ¥æºï¼ˆå¦‚Flashï¼‰\n- `media-src`: éŸ³è§†é¢‘æ¥æº\n- `frame-src`: iframeæ¥æº\n\n> **å³è§„å®šäº†æ‰€æœ‰å¯èƒ½åŠ è½½èµ„æºçš„æ¥æºè¦æ±‚**\n\n### 17.6. ç¤ºä¾‹\n\n```\nContent-Security-Policy: default-src 'self'; script-src 'self' https://trusted.cdn.com; img-src *\n```\n\nè¿™ä¸ªç­–ç•¥å…è®¸ï¼š\n\n- é»˜è®¤åªåŠ è½½åŒæºèµ„æº\n- è„šæœ¬åªèƒ½ä»è‡ªèº«åŸŸåå’Œtrusted.cdn.comåŠ è½½\n- å›¾ç‰‡å¯ä»¥ä»ä»»ä½•æºåŠ è½½\n\n### 17.7. æŠ¥å‘Šæ¨¡å¼\n\nå¯ä»¥ä½¿ç”¨`Content-Security-Policy-Report-Only`å¤´éƒ¨æ¥æµ‹è¯•ç­–ç•¥ï¼Œä¸å®é™…é˜»æ­¢èµ„æºï¼ŒåªæŠ¥å‘Šè¿è§„ã€‚\n\n### 17.8. è¿è§„æŠ¥å‘Š\n\nå¯ä»¥é€šè¿‡`report-uri`æŒ‡ä»¤æŒ‡å®šè¿è§„æŠ¥å‘Šçš„æ¥æ”¶åœ°å€ã€‚\n\n### 17.9. ä¼˜åŠ¿\n\n- å¤§å¹…é™ä½XSSé£é™©\n- æ§åˆ¶èµ„æºåŠ è½½ï¼Œæé«˜å®‰å…¨æ€§\n- å¼ºåˆ¶ä½¿ç”¨HTTPSï¼Œä¿æŠ¤æ•°æ®ä¼ è¾“\n- æä¾›è¿è§„æŠ¥å‘Šï¼Œä¾¿äºç›‘æ§å’Œè°ƒè¯•\n\n### 17.10. æŒ‘æˆ˜å’Œæ³¨æ„äº‹é¡¹\n\n- å¯èƒ½å½±å“ç¬¬ä¸‰æ–¹è„šæœ¬å’Œæ’ä»¶çš„ä½¿ç”¨\n- éœ€è¦ä»”ç»†é…ç½®ä»¥é¿å…ç ´åç½‘ç«™åŠŸèƒ½\n- æ—§ç‰ˆæµè§ˆå™¨å¯èƒ½ä¸æ”¯æŒ\n\n### 17.11. æœ€ä½³å®è·µ\n\n- ä»ä¸¥æ ¼ç­–ç•¥å¼€å§‹ï¼Œé€æ­¥æ”¾å®½\n- ä½¿ç”¨æŠ¥å‘Šæ¨¡å¼è¿›è¡Œæµ‹è¯•\n- å®šæœŸå®¡æŸ¥å’Œæ›´æ–°ç­–ç•¥\n- ç»“åˆå…¶ä»–å®‰å…¨æªæ–½ä½¿ç”¨ï¼ˆå¦‚HTTPSã€å®‰å…¨Cookieç­‰ï¼‰\n\n### 17.12. ä¸å…¶ä»–å®‰å…¨æªæ–½çš„ç»“åˆ\n\n- HSTS (HTTP Strict Transport Security)\n- X-Frame-Options\n- X-XSS-Protection\n\n### 17.13. æœªæ¥å‘å±•\n\n- æ›´ç»†ç²’åº¦çš„æ§åˆ¶\n- æ›´å¥½çš„æµè§ˆå™¨æ”¯æŒ\n- ä¸æ–°å…´WebæŠ€æœ¯çš„é›†æˆ\n\nå†…å®¹å®‰å…¨ç­–ç•¥æ˜¯ç°ä»£Webå®‰å…¨çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚å®ƒæä¾›äº†ä¸€ç§å¼ºå¤§çš„æ–¹å¼æ¥æ§åˆ¶èµ„æºåŠ è½½ï¼Œå¤§å¤§æé«˜äº†ç½‘ç«™æŠµå¾¡å„ç§æ”»å‡»çš„èƒ½åŠ›ã€‚ç„¶è€Œï¼Œå®æ–½CSPéœ€è¦ä»”ç»†è§„åˆ’å’Œæµ‹è¯•ï¼Œä»¥ç¡®ä¿æ—¢æé«˜å®‰å…¨æ€§ï¼Œåˆä¸å½±å“ç½‘ç«™çš„æ­£å¸¸åŠŸèƒ½ã€‚\n\n## 18. **Web Components**\n\n- **ä»‹ç»**ï¼šä¸€ç»„Webå¹³å°APIï¼Œç”¨äºåˆ›å»ºå¯å¤ç”¨çš„è‡ªå®šä¹‰å…ƒç´ ã€‚\n- **ç‰¹ç‚¹**ï¼šç»„ä»¶åŒ–å¼€å‘ã€æ ·å¼å’ŒåŠŸèƒ½å°è£…ã€ä¸æ¡†æ¶æ— å…³ã€‚\n\n## 19. **åª’ä½“æŸ¥è¯¢**\n\n- **ä»‹ç»**ï¼šç”¨äºåœ¨ä¸åŒè®¾å¤‡å’Œå±å¹•å°ºå¯¸ä¸Šåº”ç”¨ä¸åŒçš„CSSæ ·å¼ã€‚\n- **ç‰¹ç‚¹**ï¼šå“åº”å¼è®¾è®¡ã€æé«˜ç”¨æˆ·ä½“éªŒã€é€‚åº”å¤šç§è®¾å¤‡ã€‚\n","59227e1aaa715699ac597d9cb33e7fa1":"\n# å¦‚ä½•åˆ¤æ–­ä½ è‡ªå·±å¯¹ HTML æ ‡ç­¾äº†è§£æ˜¯å¦å…¨é¢ï¼Ÿ\n\n\n`#å‰ç«¯` `#HTML` \n\nä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ¸…å•æ¥æ£€æµ‹è‡ªå·±å¯¹äº HTML æ ‡ç­¾çš„äº†è§£æ˜¯å¦å…¨é¢\n\n- HTML ç®€ä»‹\n- HTML çš„æ ‡å‡†è§„èŒƒæœ‰å“ªäº›ï¼Ÿ\n- URL ï¼šé€šè¿‡ a æ ‡ç­¾ï¼Œæ„å»ºäº†äº’è”ç½‘\n- æ ‡ç­¾è¯­ä¹‰\n- å…¨å±€å±æ€§ï¼šæ¯”å¦‚ `spellcheck/translate` æ˜¯åšä»€ä¹ˆç”¨çš„ï¼Ÿ\n   - æ‹¼å†™å’Œç¿»è¯‘\n- HTMLçš„å­—ç¬¦å®ä½“è¡¨ç¤ºæ–¹æ³•ï¼šä¸ºä»€ä¹ˆï¼Ÿ\n   - ç½‘é¡µä½¿ç”¨ utf-8 ï¼Œé‚£ä¹ˆç±»ä¼¼äº`<p>` ä¸­çš„ `<` å¦‚ä½•è¡¨ç¤ºå‘¢ï¼Ÿ\n- `a æ ‡ç­¾`\n   - å®ƒçš„ä¸‹é¢è¿™äº›å±æ€§éƒ½æ˜¯å¹²å˜›çš„ï¼Ÿ\n      - [href](https://wangdoc.com/html/a#href)\n      - [hreflang](https://wangdoc.com/html/a#hreflang)\n      - [title](https://wangdoc.com/html/a#title)\n      - [target](https://wangdoc.com/html/a#target)\n      - [rel](https://wangdoc.com/html/a#rel)\n      - [referrerpolicy](https://wangdoc.com/html/a#referrerpolicy)\n      - [ping](https://wangdoc.com/html/a#ping)ï¼šç”¨äºæ‰“ç‚¹\n      - [type](https://wangdoc.com/html/a#type)\n      - [download](https://wangdoc.com/html/a#download) ï¼š==ç”¨äºä¸‹è½½==\n   - å‘é‚®ä»¶ï¼šè°ƒç”¨é‚®ä»¶å®¢æˆ·ç«¯\n   - æ‰“ç”µè¯ï¼šH5\n- link æ ‡ç­¾\n   - relï¼šå…¨ç§° `relationship`\n      - é¢„åŠ è½½ç›¸å…³ï¼špreload / prefetch /dns-prefetch / prerender / preconnect\n      - å…¶ä»–ï¼šæ¯”å¦‚ icon / stylessheet ç­‰\n   - mediaï¼šåª’ä½“æŸ¥è¯¢\n   - crossorigin ï¼šè·¨åŸŸè®¿é—®ç›¸å…³\n   - manifestï¼šæ–‡ä»¶æ¸…å•\n   - æ›´å¤šå‚è€ƒ [<link>](https://wangdoc.com/html/link#hreflang-%E5%B1%9E%E6%80%A7)\n- `<script> ã€<noscript>`\n   - type \n   - async/defer\n   - crossorigin\n   - integrityï¼šå“ˆå¸Œé˜²ç¯¡æ”¹\n   - nonceï¼šå¯†ç éšæœºå€¼ï¼Œé…åˆæœåŠ¡å™¨ï¼Œåªæœ‰ç™½åå•æ‰æ‰§è¡Œ\n- iframe\n   - `sandbox`ï¼šæ²™ç›’æƒé™å±æ€§ï¼Œæ¯”å¦‚æ˜¯å¦å…è®¸æäº¤è¡¨å•ã€æ˜¯å¦å…è®¸æç¤ºæ¡†ç­‰ç­‰\n   - `importance`ï¼šä¸‹è½½ä¼˜å…ˆçº§\n   - `loading`: auto/lazy/eager \n- `table` ç›¸å…³æ ‡ç­¾éƒ½æœ‰å“ªäº›\n   - å¦‚ä½•åˆå¹¶å•å…ƒæ ¼ï¼Ÿ\n- `details/summary/dialog æ ‡ç­¾`æ˜¯å¹²ä»€ä¹ˆç”¨çš„ ï¼Ÿ \n- form\n   - input type æœ‰å“ªäº›ï¼Ÿ\n   - æ¯ç§ type æœ‰ä¸åŒçš„å±æ€§ï¼šæ¯”å¦‚ min/pattern/autocomplete ...\n   - æ›´å¤šå‚è€ƒï¼š[è¡¨å•æ ‡ç­¾](https://wangdoc.com/html/form#meter)\n\n","978a25d6f7a256b0b602b3c65731bf27":"\n# ä»€ä¹ˆæ˜¯ Web Componentsï¼Ÿ\n\n`#å‰ç«¯` `#HTML` \n\nWeb ç»„ä»¶æ ‡å‡†ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š[HTML æ¨¡æ¿](https://developer.mozilla.org/docs/Web/Web_Components/Using_templates_and_slots)ã€[è‡ªå®šä¹‰å…ƒç´ ](https://developer.mozilla.org/docs/Web/Web_Components/Using_custom_elements) å’Œ [Shadow DOM](https://developer.mozilla.org/docs/Web/Web_Components/Using_shadow_DOM)\n\n> æ›´å¤šå‚è€ƒï¼š[Web Component - Web API | MDN](https://developer.mozilla.org/zh-CN/docs/Web/API/Web_components)\n> åé¢ä¼šæœ‰ç‹¬ç«‹ç« èŠ‚å•ç‹¬è®²è¿™å—\n\n","9cdd4172255e59bc95cc7a5ba3a8a31e":"\n# è¯´è¯´ HTML æ ‡å‡†è§„èŒƒéƒ½æœ‰å“ªäº›ï¼Ÿ\n\n\n`#HTML`  `#å‰ç«¯/HTML`  \n\n- **WHATWG** å…¨ç§°æ˜¯ `Web Hypertext Application Technology Working Group`ï¼Œå³ `Web è¶…æ–‡æœ¬åº”ç”¨æŠ€æœ¯å·¥ä½œç»„`\n- WHATWG HTML è§„èŒƒï¼šå®šä¹‰äº† HTML çš„è¯­æ³•å’Œè¡Œä¸ºï¼Œæ¶µç›–äº†ç½‘é¡µå¼€å‘çš„**æ‰€æœ‰**æ–¹é¢ï¼Œç¡®ä¿ç½‘é¡µåœ¨ä¸åŒæµè§ˆå™¨ä¸­çš„ä¸€è‡´æ€§ã€‚\n- ARIAï¼ˆAccessible Rich Internet Applications è§„èŒƒï¼šä¸“æ³¨äºå¢å¼ºç½‘é¡µçš„æ— éšœç¢æ€§ï¼Œä½¿å¾—è¾…åŠ©æŠ€æœ¯ç”¨æˆ·èƒ½å¤Ÿæ›´å¥½åœ°è®¿é—®å’Œæ“ä½œç½‘é¡µå†…å®¹\n   - ä¸»è¦å®šä¹‰äº†ä¸€ç»„å±æ€§ï¼Œæ¯”å¦‚å¦‚ roleã€aria-labelã€aria-hiddenã€aria-live ç­‰ï¼Œç”¨äºå¢å¼ºç°æœ‰ HTML å…ƒç´ çš„è¯­ä¹‰ä¿¡æ¯ã€‚\n","06c320f5bf5352e48443f18ab1d3581c":"\n# ä»€ä¹ˆæ˜¯å“åº”å¼å›¾ç‰‡\n\n\n`#HTML`   `#å‰ç«¯`\n\nå›¾ç‰‡å“åº”å¼è®¾è®¡æ˜¯ç°ä»£Webå¼€å‘ä¸­ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œæ—¨åœ¨æ ¹æ®ä¸åŒè®¾å¤‡å’Œå±å¹•å°ºå¯¸æä¾›é€‚åˆçš„å›¾ç‰‡èµ„æºï¼Œä»¥æé«˜é¡µé¢åŠ è½½é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒã€‚ä»¥ä¸‹æ˜¯å…³äºå›¾ç‰‡å“åº”å¼è®¾è®¡çš„è¯¦ç»†è¯´æ˜ï¼š\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. èƒŒæ™¯å’Œé‡è¦æ€§ \n\néšç€ç§»åŠ¨è®¾å¤‡çš„æ™®åŠï¼Œç”¨æˆ·è®¿é—®ç½‘ç«™çš„è®¾å¤‡ç§ç±»å’Œå±å¹•å°ºå¯¸å˜å¾—å¤šæ ·åŒ–ã€‚ä¼ ç»Ÿçš„å›ºå®šå°ºå¯¸å›¾ç‰‡åœ¨ä¸åŒè®¾å¤‡ä¸Šå¯èƒ½ä¼šå¯¼è‡´åŠ è½½æ—¶é—´è¿‡é•¿æˆ–æ˜¾ç¤ºæ•ˆæœä¸ä½³ã€‚å“åº”å¼å›¾ç‰‡æŠ€æœ¯é€šè¿‡æä¾›ä¸åŒå°ºå¯¸å’Œåˆ†è¾¨ç‡çš„å›¾ç‰‡ï¼Œç¡®ä¿åœ¨å„ç§è®¾å¤‡ä¸Šéƒ½èƒ½è·å¾—æœ€ä½³çš„æ˜¾ç¤ºæ•ˆæœå’Œæ€§èƒ½ã€‚\n\n## 2. åŸºæœ¬æ¦‚å¿µ\n\n- **å“åº”å¼å›¾ç‰‡**: æ ¹æ®è®¾å¤‡ç‰¹æ€§ï¼ˆå¦‚å±å¹•å°ºå¯¸ã€åˆ†è¾¨ç‡ç­‰ï¼‰åŠ¨æ€é€‰æ‹©å’ŒåŠ è½½åˆé€‚çš„å›¾ç‰‡ã€‚\n- **è§†å£ï¼ˆViewportï¼‰**: ç”¨æˆ·è®¾å¤‡çš„å¯è§†åŒºåŸŸã€‚\n- **DPRï¼ˆDevice Pixel Ratioï¼‰**: è®¾å¤‡åƒç´ æ¯”ï¼Œè¡¨ç¤ºè®¾å¤‡ç‰©ç†åƒç´ ä¸CSSåƒç´ çš„æ¯”ä¾‹ã€‚\n\n## 3. å®ç°æ–¹æ³•\n\n### 3.1. ä½¿ç”¨ `srcset` å’Œ `sizes` å±æ€§\n\n`srcset` å’Œ `sizes` å±æ€§æ˜¯ HTML5 ä¸­å¼•å…¥çš„ï¼Œç”¨äºæŒ‡å®šä¸åŒåˆ†è¾¨ç‡å’Œå°ºå¯¸çš„å›¾ç‰‡èµ„æºã€‚\n\n```html\n<img src=\"small.jpg\" \n     srcset=\"small.jpg 500w, medium.jpg 1000w, large.jpg 1500w\" \n     sizes=\"(max-width: 600px) 480px, (max-width: 1200px) 800px, 100vw\" \n     alt=\"Responsive Image\">\n```\n\n- `srcset`: å®šä¹‰ä¸€ç»„å›¾ç‰‡èµ„æºåŠå…¶å¯¹åº”çš„å®½åº¦æè¿°ç¬¦ï¼ˆå¦‚500wè¡¨ç¤º500åƒç´ å®½ï¼‰ã€‚\n- `sizes: å®šä¹‰å›¾ç‰‡åœ¨ä¸åŒè§†å£å®½åº¦ä¸‹çš„æ˜¾ç¤ºå°ºå¯¸ï¼ˆå¦‚**`**(max-width: 600px) 480px**`**è¡¨ç¤ºè§†å£å®½åº¦å°äº600pxæ—¶å›¾ç‰‡å®½åº¦ä¸º480pxï¼‰ã€‚**\n\næµè§ˆå™¨ä¼šæ ¹æ®è§†å£å¤§å°å’Œè®¾å¤‡åƒç´ æ¯”è‡ªåŠ¨é€‰æ‹©æœ€åˆé€‚çš„å›¾ç‰‡è¿›è¡ŒåŠ è½½ã€‚\n\n### 3.2. ä½¿ç”¨ `<picture>` å…ƒç´ \n\n`<picture>` å…ƒç´ æä¾›äº†æ›´å¼ºå¤§çš„å“åº”å¼å›¾ç‰‡æ”¯æŒï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„åª’ä½“æ¡ä»¶åŠ è½½ä¸åŒçš„å›¾ç‰‡èµ„æºã€‚\n```html\n<picture>\n  <source media=\"(max-width: 600px)\" srcset=\"small.jpg\">\n  <source media=\"(max-width: 1200px)\" srcset=\"medium.jpg\">\n  <img src=\"large.jpg\" alt=\"Responsive Image\">\n</picture>\n\n```\n\n- `<source>`: å®šä¹‰ä¸åŒçš„åª’ä½“æ¡ä»¶å’Œå¯¹åº”çš„å›¾ç‰‡èµ„æºã€‚\n- `<img>`: å®šä¹‰é»˜è®¤å›¾ç‰‡ï¼Œå½“æ‰€æœ‰åª’ä½“æ¡ä»¶éƒ½ä¸æ»¡è¶³æ—¶åŠ è½½ã€‚\n\n## 4. ç¤ºä¾‹\n\n### 4.1. ä½¿ç”¨ `srcset` å’Œ `sizes`\n\n```html\n<img src=\"images/default.jpg\"\n     srcset=\"images/small.jpg 480w, images/medium.jpg 800w, images/large.jpg 1200w\"\n     sizes=\"(max-width: 600px) 480px, (max-width: 1200px) 800px, 100vw\"\n     alt=\"Example of responsive image\">\n```\n\n### 4.2. ä½¿ç”¨ `<picture>` å…ƒç´ \n\n```html\n<picture>\n  <source media=\"(max-width: 600px)\" srcset=\"images/small.jpg\">\n  <source media=\"(max-width: 1200px)\" srcset=\"images/medium.jpg\">\n  <img src=\"images/large.jpg\" alt=\"Example of responsive image\">\n</picture>\n\n```\n\n## 5. ä¼˜åŠ¿\n\n- **æé«˜æ€§èƒ½**: é€šè¿‡åŠ è½½é€‚åˆçš„å›¾ç‰‡èµ„æºï¼Œå‡å°‘ä¸å¿…è¦çš„å¸¦å®½æ¶ˆè€—ï¼Œæé«˜é¡µé¢åŠ è½½é€Ÿåº¦ã€‚\n- **ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ**: ç¡®ä¿åœ¨ä¸åŒè®¾å¤‡ä¸Šéƒ½èƒ½è·å¾—æœ€ä½³çš„å›¾ç‰‡æ˜¾ç¤ºæ•ˆæœã€‚\n- **SEOå‹å¥½**: æä¾›åˆé€‚çš„å›¾ç‰‡èµ„æºï¼Œæœ‰åŠ©äºæœç´¢å¼•æ“ä¼˜åŒ–ã€‚\n\n## 6. æ³¨æ„äº‹é¡¹\n\n- **å›¾ç‰‡æ ¼å¼**: ä½¿ç”¨ç°ä»£`å›¾ç‰‡æ ¼å¼ï¼ˆå¦‚WebPï¼‰`å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–å›¾ç‰‡åŠ è½½æ€§èƒ½ã€‚\n- **ç¼“å­˜ç­–ç•¥**: åˆç†è®¾ç½®å›¾ç‰‡çš„ç¼“å­˜ç­–ç•¥ï¼Œå‡å°‘é‡å¤åŠ è½½ã€‚\n- **æµ‹è¯•å’Œä¼˜åŒ–**: åœ¨ä¸åŒè®¾å¤‡å’Œæµè§ˆå™¨ä¸Šæµ‹è¯•å“åº”å¼å›¾ç‰‡æ•ˆæœï¼Œç¡®ä¿å…¼å®¹æ€§å’Œæ€§èƒ½ã€‚\n\n## 7. å·¥å…·å’Œèµ„æº\n\n- **å›¾ç‰‡ç”Ÿæˆå·¥å…·**: ä½¿ç”¨å·¥å…·ï¼ˆå¦‚ImageMagickï¼‰æ‰¹é‡ç”Ÿæˆä¸åŒå°ºå¯¸å’Œåˆ†è¾¨ç‡çš„å›¾ç‰‡ã€‚\n- **åœ¨çº¿æœåŠ¡**: ä½¿ç”¨åœ¨çº¿æœåŠ¡ï¼ˆå¦‚Cloudinaryï¼‰è‡ªåŠ¨ç”Ÿæˆå’Œç®¡ç†å“åº”å¼å›¾ç‰‡èµ„æºã€‚\n- **æµè§ˆå™¨å¼€å‘è€…å·¥å…·**: ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æµ‹è¯•å’Œè°ƒè¯•å“åº”å¼å›¾ç‰‡æ•ˆæœã€‚\n\né€šè¿‡åˆç†ä½¿ç”¨å“åº”å¼å›¾ç‰‡æŠ€æœ¯ï¼Œå¯ä»¥æ˜¾è‘—æå‡Webåº”ç”¨çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼Œé€‚åº”ç°ä»£Webå¼€å‘çš„éœ€æ±‚ã€‚\n","d6f93f0569c35a67bfe1418a479f6f83":"\n# HTML æ¨¡æ¿è¯­è¨€\n\n\n`#HTML`  `#2024/07/30`  `#å‰ç«¯`\n\nHTML æ¨¡æ¿è¯­è¨€æ˜¯ä¸€ç§ç”¨äºç”ŸæˆåŠ¨æ€ HTML å†…å®¹çš„å·¥å…·ï¼Œé€šå¸¸ç”¨äº Web å¼€å‘ä¸­ä»¥ç®€åŒ–å’Œè‡ªåŠ¨åŒ– HTML ä»£ç çš„ç”Ÿæˆï¼Œæ¯”å¦‚\n\n- `Handlebars.js` ï¼Œé€‚ç”¨äºå‰ç«¯å’Œåç«¯æ¸²æŸ“\n- `Nunjucks`ï¼Œé€‚ç”¨äºå‰ç«¯å’Œåç«¯æ¸²æŸ“\n- `pug/ejs` ï¼Œé€‚ç”¨äº nodejs\n- è¿˜æœ‰ \n   - phpï¼š`smarty `\n   - javaï¼š`jsp / Velocity`\n\nç­‰ç­‰\n","f9c94ea0fcfe5d908a67c9a8606cfc8d":"\n# CSS ç¯‡\n\n\n`#å‰ç«¯/CSS` \n\n> CSS å®Œå…¨å¯ä»¥å†™ä¸€å¤§æœ¬ä¹¦äº†ï¼Œè¿™é‡Œåªåˆ—ä¸¾ä¸€äº›ç›¸å¯¹å‰æ²¿æˆ–æˆ‘è®¤ä¸ºæ¯”è¾ƒé‡è¦çš„çŸ¥è¯†ç‚¹\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‚è€ƒ \n\n- [GPT-4o](https://chatgpt.com/)\n- [Claude 3.5 Sonnet](https://www.anthropic.com/news/claude-3-5-sonnet?locale=zh_CN)\n- [https://www.w3.org/Style/CSS/#specs](https://www.w3.org/Style/CSS/#specs)\n- [CSSï¼šå±‚å æ ·å¼è¡¨ | MDN](https://developer.mozilla.org/zh-CN/docs/Web/CSS)\n- [https://web.dev/learn/css/color?hl=zh-cn](https://web.dev/learn/css/color?hl=zh-cn)\n\n## 2. æ¨èä¹¦ç±\n\n- ã€ŠCSS æ­ç§˜ã€‹\n\n","0955231a232a5591a1c5b90819eeaa8c":"\n# CSS æ˜¯ä»€ä¹ˆï¼Ÿ\n\n\n`#css`  `#å‰ç«¯/CSS`   \n\nå³ä¸º HTML æ·»åŠ æ ·å¼\n","0fde4d2929ac53c798d21af0fa4bc68e":"\n# CSS å®šä½éƒ½æœ‰å“ªäº›ï¼Ÿ\n\n\n`#2024/07/30`  `#å‰ç«¯/CSS`  \n\n- é™æ€å®šä½ï¼ˆStatic Positioningï¼‰\n- ç›¸å¯¹å®šä½ï¼ˆRelative Positioningï¼‰\n- ç»å¯¹å®šä½ï¼ˆAbsolute Positioningï¼‰\n- å›ºå®šå®šä½ï¼ˆFixed Positioningï¼‰\n- ç²˜æ€§å®šä½ï¼ˆSticky Positioningï¼‰\n\nä¸å±•å¼€äº†\n","23f6a83c633c5a5ba57a0aed12dc6128":"\n# CSS æ»šåŠ¨è‡ªåŠ¨å¸é™„æ•ˆæœä¸å¸é¡¶æ•ˆæœçš„åŒºåˆ«ï¼Ÿ\n\n`#å‰ç«¯/CSS`  `#2024/07/30` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. CSS æ»šåŠ¨è‡ªåŠ¨å¸é™„æ•ˆæœå¦‚ä½•å®ç°ï¼Ÿ \n\n`**CSS Scroll Snap**` ç”¨äºåˆ›å»ºæ›´æµç•…ã€æ›´æ§åˆ¶çš„æ»šåŠ¨ä½“éªŒï¼Œç¡®ä¿æ»šåŠ¨å®¹å™¨æ»šåŠ¨åˆ°`é¢„å®šä¹‰`çš„ä½ç½®ï¼Œä½¿ç”¨æˆ·å¯ä»¥`ç²¾ç¡®åœ°æ»šåŠ¨åˆ°ç›¸é‚»çš„éƒ¨åˆ†`\n\n- **æè¿°**ï¼šæä¾›äº†ä¸€ç§æ§åˆ¶æ»šåŠ¨è¡Œä¸ºçš„æ–¹å¼ï¼Œä½¿æ»šåŠ¨æ¡åœ¨æŒ‡å®šä½ç½®åœæ­¢ã€‚\n- **ç‰¹ç‚¹**ï¼šé€‚ç”¨äºåˆ›å»ºæ»‘åŠ¨è§†å›¾å’Œç”»å»Šã€‚\n- **ç¤ºä¾‹**ï¼š\n```css\n.container {\n  scroll-snap-type: x mandatory;\n}\n.item {\n  scroll-snap-align: center;\n}\n```\n\nå¯ä»¥ç†è§£ä¸ºå¹»ç¯ç‰‡çš„æ•ˆæœï¼Œæˆ–è€…ç”»å»Šæ»šåŠ¨çš„æ•ˆæœï¼Œå…·ä½“æ•ˆæœå¯å‚è€ƒï¼š[https://codepen.io/chriscoyier/full/pMRgwW](https://codepen.io/chriscoyier/full/pMRgwW)\n\nå…·ä½“ CSS Scroll Snap å±æ€§åŒ…æ‹¬å¦‚ä¸‹ï¼š\n\n- [scroll-snap-type](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-snap-type)\n- [scroll-padding](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-padding)\n   - [scroll-padding-top](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-padding-top)\n   - [scroll-padding-right](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-padding-right)\n   - [scroll-padding-bottom](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-padding-bottom)\n   - [scroll-padding-left](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-padding-left)\n   - [scroll-padding-inline](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-padding-inline)\n   - [scroll-padding-inline-start](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-padding-inline-start)\n   - [scroll-padding-inline-end](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-padding-inline-end)\n   - [scroll-padding-block](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-padding-block)\n   - [scroll-padding-block-start](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-padding-block-start)\n   - [scroll-padding-block-end](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-padding-block-end)\n\n> å¦‚ä½•ä½¿ç”¨å…·ä½“å‚è€ƒä¸Šé¢çš„é“¾æ¥å³å¯\n\n## 2. ä¸Šé¢è¯´çš„ css çš„`è‡ªåŠ¨å¸é™„æ•ˆæœ`å’Œ`å¸é¡¶`æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ\n\n- `position: sticky` ä¸»è¦ç”¨äºä½¿å…ƒç´ åœ¨æ»šåŠ¨æ—¶`ç²˜æ€§`åœ°ä¿æŒåœ¨å…¶çˆ¶å…ƒç´ çš„æŸä¸ªä½ç½®ã€‚\n- `CSS Scroll Snap` ä¸»è¦ç”¨äºåˆ›å»ºæ›´æµç•…å’Œå¯æ§åˆ¶çš„æ»šåŠ¨ä½“éªŒï¼Œé€šè¿‡è‡ªåŠ¨æ•æ‰å’Œå¯¹é½æ»šåŠ¨ç‚¹æ¥æå‡ç”¨æˆ·ä½“éªŒã€‚\n","b9613d3e473757899922d9a132ef8489":"\n# å¦‚ä½•ä½¿ç”¨ CSS å˜é‡ï¼Ÿ\n\n\n`#å‰ç«¯/CSS`   `#2024/07/30` \n\nCSS å˜é‡ä½¿ç”¨ `--` ä½œä¸ºå‰ç¼€æ¥å®šä¹‰ï¼Œå¹¶ä¸”é€šå¸¸å®šä¹‰åœ¨ `:root` é€‰æ‹©å™¨ä¸­ï¼Œä»¥ä¾¿åœ¨æ•´ä¸ªæ–‡æ¡£ä¸­å…¨å±€å¯ç”¨ã€‚\n\n```css\n:root {\n  --main-color: `#3498db;`\n  --padding-size: 10px;\n  --font-size: 16px;\n}\n```\n\nCSS å˜é‡å¯ä»¥å­˜å‚¨ä»»ä½•åˆæ³•çš„ CSS å€¼ï¼ŒåŒ…æ‹¬é¢œè‰²ã€é•¿åº¦ã€ç™¾åˆ†æ¯”ã€å­—ç¬¦ä¸²ç­‰\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä½¿ç”¨ CSS å˜é‡ \n\nä½¿ç”¨ `var()` å‡½æ•°æ¥å¼•ç”¨ CSS å˜é‡ã€‚\n```css\n.element {\n  color: var(--main-color);\n  padding: var(--padding-size);\n  font-size: var(--font-size);\n}\n```\n\n## 2. å˜é‡çš„ä½œç”¨åŸŸ\n\nCSS å˜é‡çš„ä½œç”¨åŸŸå¯ä»¥æ˜¯å…¨å±€çš„ï¼ˆå®šä¹‰åœ¨ `:root` ä¸­ï¼‰æˆ–å±€éƒ¨çš„ï¼ˆå®šä¹‰åœ¨ç‰¹å®šé€‰æ‹©å™¨ä¸­ï¼‰ã€‚\n\n### 2.1. å…¨å±€å˜é‡\n\nå®šä¹‰åœ¨ `:root` ä¸­çš„å˜é‡å¯ä»¥åœ¨æ•´ä¸ªæ–‡æ¡£ä¸­ä½¿ç”¨ã€‚\n```css\n:root {\n  --global-color: `#3498db;`\n}\n.element {\n  color: var(--global-color);\n}\n```\n\n### 2.2. å±€éƒ¨å˜é‡\n\nå®šä¹‰åœ¨ç‰¹å®šé€‰æ‹©å™¨ä¸­çš„å˜é‡åªèƒ½åœ¨è¯¥é€‰æ‹©å™¨åŠå…¶å­å…ƒç´ ä¸­ä½¿ç”¨ã€‚\n\n```css\n.container {\n  --local-color: `#e74c3c;`\n}\n.element {\n  color: var(--local-color); /* ä»…åœ¨ .container å†…éƒ¨æœ‰æ•ˆ */\n}\n```\n\n## 3. å˜é‡çš„é»˜è®¤å€¼\n\n`var()` å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªå¯é€‰çš„`ç¬¬äºŒä¸ªå‚æ•°`ä½œä¸ºé»˜è®¤å€¼ï¼Œå½“å˜é‡æœªå®šä¹‰æ—¶ä½¿ç”¨è¯¥é»˜è®¤å€¼ã€‚\n\n```css\n.element {\n  color: var(--undefined-color, `#2ecc71);` /* å¦‚æœ --undefined-color æœªå®šä¹‰ï¼Œåˆ™ä½¿ç”¨ `#2ecc71` */\n}\n```\n\n## 4. åµŒå¥—å˜é‡\n\nCSS å˜é‡å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œå³ä¸€ä¸ªå˜é‡çš„å€¼å¯ä»¥å¼•ç”¨å¦ä¸€ä¸ªå˜é‡ã€‚\n\n```css\n:root {\n  --primary-color: `#3498db;`\n  --secondary-color: var(--primary-color);\n}\n.element {\n  color: var(--secondary-color); /* ç­‰åŒäº `#3498db` */\n}\n```\n\n## 5. å˜é‡çš„è®¡ç®—\n\nCSS å˜é‡å¯ä»¥ä¸å…¶ä»– CSS å±æ€§å€¼ä¸€èµ·ä½¿ç”¨ï¼Œå¹¶ä¸”å¯ä»¥å‚ä¸è®¡ç®—ã€‚\n\n```css\n:root {\n  --base-padding: 10px;\n}\n.element {\n  padding: calc(var(--base-padding) * 2); /* ç­‰åŒäº 20px */\n}\n```\n\n## 6. åŠ¨æ€æ›´æ–°å˜é‡\n\nCSS å˜é‡çš„å€¼å¯ä»¥é€šè¿‡ JavaScript åŠ¨æ€æ›´æ–°ï¼Œä»è€Œå®ç°åŠ¨æ€æ ·å¼æ›´æ”¹ã€‚\n\n```html\n<style>\n  :root {\n    --dynamic-color: `#3498db;`\n  }\n  .element {\n    color: var(--dynamic-color);\n  }\n</style>\n\n<div class=\"element\">Hello World</div>\n\n<script>\n  document.documentElement.style.setProperty('--dynamic-color', '#e74c3c');\n</script>\n\n```\n\n## 7. å˜é‡çš„ç»§æ‰¿\n\nCSS å˜é‡éµå¾ª CSS çš„ç»§æ‰¿è§„åˆ™ï¼Œå­å…ƒç´ å¯ä»¥ç»§æ‰¿çˆ¶å…ƒç´ å®šä¹‰çš„å˜é‡ã€‚\n\n```css\n.parent {\n  --inherited-color: `#3498db;`\n}\n.child {\n  color: var(--inherited-color); /* ç»§æ‰¿è‡ª .parent */\n}\n```\n\n## 8. å˜é‡çš„ç±»å‹\n\nCSS å˜é‡å¯ä»¥å­˜å‚¨ä»»ä½•åˆæ³•çš„ CSS å€¼ï¼ŒåŒ…æ‹¬é¢œè‰²ã€é•¿åº¦ã€ç™¾åˆ†æ¯”ã€å­—ç¬¦ä¸²ç­‰ã€‚\n\n```css\n:root {\n  --color: `#3498db;`\n  --padding: 10px;\n  --font: 'Arial, sans-serif';\n}\n.element {\n  color: var(--color);\n  padding: var(--padding);\n  font-family: var(--font);\n}\n```\n\n## 9. CSS @property\n\n- æè¿°ï¼šç”¨äºæ³¨å†Œè‡ªå®šä¹‰å±æ€§ï¼Œå¹¶å®šä¹‰å…¶åˆå§‹å€¼å’Œç»§æ‰¿è¡Œä¸ºã€‚\n- ç‰¹ç‚¹ï¼šå¢å¼ºäº† CSS å˜é‡çš„åŠŸèƒ½ã€‚\n- ç¤ºä¾‹ï¼š\n```css\n@property --main-color {\n  syntax: '<color>';\n  initial-value: `#3498db;`\n  inherits: true;\n}\n```\n\n> æºäº GPT 4.0 ï¼Œæ€»ç»“å¾—å¾ˆå¥½ï¼\n\n","1a5c235a23975849aa245c95e602f5c3":"\n# CSS çš„è®¡ç®—å±æ€§éƒ½æœ‰å“ªäº›ï¼Ÿ\n\n\n`#å‰ç«¯/CSS`  `#2024/07/30` \n\nåœ¨ CSS ä¸­ï¼Œè®¡ç®—å±æ€§ï¼ˆä¹Ÿç§°ä¸ºè®¡ç®—å€¼ï¼‰æ˜¯æŒ‡é‚£äº›å¯ä»¥é€šè¿‡æ•°å­¦è¿ç®—ã€å‡½æ•°æˆ–å…¶ä»–æ–¹å¼åŠ¨æ€è®¡ç®—çš„å±æ€§å€¼ã€‚\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. `calc()` \n\n`calc()` å‡½æ•°å…è®¸ä½ åœ¨ CSS å±æ€§ä¸­è¿›è¡ŒåŸºæœ¬çš„æ•°å­¦è¿ç®—ï¼ˆåŠ ã€å‡ã€ä¹˜ã€é™¤ï¼‰ã€‚\n```css\n.element {\n  width: calc(100% - 50px);\n  height: calc(50vh + 20px);\n  margin: calc(10px * 2);\n}\n```\n\n## 2. `var()`\n\n`var()` å‡½æ•°ç”¨äºå¼•ç”¨ CSS å˜é‡ã€‚è¿™äº›å˜é‡å¯ä»¥åŒ…å«è®¡ç®—å€¼ã€‚\n\n```css\n:root {\n  --base-size: 10px;\n}\n\n.element {\n  padding: calc(var(--base-size) * 2);\n}\n```\n\n## 3. `min()`, `max()`, `clamp()`\n\nè¿™äº›å‡½æ•°å…è®¸ä½ åœ¨å¤šä¸ªå€¼ä¹‹é—´è¿›è¡Œé€‰æ‹©ã€‚\n\n- `min()` è¿”å›æœ€å°å€¼ã€‚\n- `max()` è¿”å›æœ€å¤§å€¼ã€‚\n- `clamp()` è¿”å›ä¸€ä¸ªåœ¨æŒ‡å®šèŒƒå›´å†…çš„å€¼ã€‚\n\n```css\n.element {\n  width: min(50vw, 500px); /* å– 50vw å’Œ 500px ä¸­çš„æœ€å°å€¼ */\n  height: max(100px, 10vh); /* å– 100px å’Œ 10vh ä¸­çš„æœ€å¤§å€¼ */\n  font-size: clamp(1rem, 2vw, 3rem); /* å­—ä½“å¤§å°åœ¨ 1rem åˆ° 3rem ä¹‹é—´ï¼Œå– 2vw */\n}\n```\n\n## 4. `attr()`\n\n`attr()` å‡½æ•°å…è®¸ä½ åœ¨ CSS ä¸­ä½¿ç”¨ HTML å±æ€§çš„å€¼ã€‚è™½ç„¶è¿™ä¸ªå‡½æ•°çš„æ”¯æŒä»ç„¶æœ‰é™ï¼Œä½†å®ƒå¯ä»¥ç”¨äºä¸€äº›ç®€å•çš„åœºæ™¯ã€‚\n\n```css\n.element::before {\n  content: attr(data-content);\n}\n```\n\n## 5. `env()`\n\n`env()` å‡½æ•°ç”¨äºè®¿é—®ç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚å®‰å…¨åŒºåŸŸï¼ˆsafe areaï¼‰å†…è¾¹è·ã€‚\n\n```css\n.element {\n  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);\n}\n```\n\n## 6. `url()`\n\n`url()` å‡½æ•°ç”¨äºå¼•ç”¨å¤–éƒ¨èµ„æºï¼Œä¾‹å¦‚å›¾åƒã€å­—ä½“ç­‰ã€‚\n\n```css\n.element {\n  background-image: url('path/to/image.jpg');\n}\n```\n\n## 7. `rgba()`, `hsla()`\n\nè¿™äº›å‡½æ•°ç”¨äºå®šä¹‰é¢œè‰²ï¼Œå¯ä»¥åŒ…å«è®¡ç®—å€¼ã€‚\n\n```css\n.element {\n  background-color: rgba(255, 0, 0, 0.5); /* åŠé€æ˜çš„çº¢è‰² */\n  color: hsla(120, 100%, 50%, 0.3); /* åŠé€æ˜çš„ç»¿è‰² */\n}\n```\n\n## 8. `repeat()`\n\n`repeat()` å‡½æ•°ç”¨äºåœ¨ CSS Grid å¸ƒå±€ä¸­é‡å¤è½¨é“å®šä¹‰ã€‚\n\n```css\n.grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr); /* ä¸‰åˆ—ï¼Œæ¯åˆ—å¹³åˆ† */\n}\n```\n\n## 9. `fit-content()`\n\n`fit-content()` å‡½æ•°ç”¨äºå®šä¹‰ä¸€ä¸ªè‡ªé€‚åº”å†…å®¹çš„å¤§å°ã€‚\n\n```css\n.element {\n  width: fit-content(200px); /* æ ¹æ®å†…å®¹è‡ªé€‚åº”å®½åº¦ï¼Œä¸è¶…è¿‡ 200px */\n}\n```\n\n## 10. `rotate()`, `scale()`, `translate()`, `skew()`\n\nè¿™äº›å˜æ¢å‡½æ•°ç”¨äºå®šä¹‰å…ƒç´ çš„å˜æ¢æ•ˆæœã€‚\n\n```css\n.element {\n  transform: rotate(45deg) scale(1.5) translate(10px, 20px);\n}\n```\n\n## 11. `cubic-bezier()`, `steps()`\n\nè¿™äº›å‡½æ•°ç”¨äºå®šä¹‰åŠ¨ç”»çš„æ—¶é—´å‡½æ•°ã€‚\n\n```css\n.element {\n  transition: all 0.5s cubic-bezier(0.25, 0.1, 0.25, 1);\n  animation-timing-function: steps(4, end);\n}\n```\n\n## 12. `conic-gradient()` \n\n`conic-gradient()` å‡½æ•°ç”¨äºåˆ›å»ºåœ†é”¥æ¸å˜ã€‚\n```css\n.element {\n  background: conic-gradient(from 0deg at 50% 50%, red, yellow, green, blue);\n}\n```\n\n## 13. `linear-gradient()`\n\n`linear-gradient()` å‡½æ•°ç”¨äºåˆ›å»ºçº¿æ€§æ¸å˜ã€‚\n```css\n.element {\n  background: linear-gradient(to right, red, yellow, green);\n}\n```\n\n## 14. `radial-gradient()`\n\n`radial-gradient()` å‡½æ•°ç”¨äºåˆ›å»ºå¾„å‘æ¸å˜ã€‚\n```css\n.element {\n  background: radial-gradient(circle, red, yellow, green);\n}\n```\n\n## 15. `repeating-linear-gradient()`\n\n`repeating-linear-gradient()` å‡½æ•°ç”¨äºåˆ›å»ºé‡å¤çš„çº¿æ€§æ¸å˜ã€‚\n\n```css\n.element {\n  background: repeating-linear-gradient(45deg, red, yellow 10%, green 20%);\n}\n```\n\n## 16. `repeating-radial-gradient()`\n\n`repeating-radial-gradient()` å‡½æ•°ç”¨äºåˆ›å»ºé‡å¤çš„å¾„å‘æ¸å˜ã€‚\n\n```css\n.element {\n  background: repeating-radial-gradient(circle, red, yellow 10%, green 20%);\n}\n```\n\n## 17. `hsl()`, `hsla()`\n\n`hsl()` å’Œ `hsla()` å‡½æ•°ç”¨äºå®šä¹‰ HSL é¢œè‰²å€¼ï¼Œå¯ä»¥åŒ…å«è®¡ç®—å€¼ã€‚\n\n```css\n.element {\n  color: hsl(120, 100%, 50%);\n  background-color: hsla(240, 100%, 50%, 0.5);\n}\n```\n\n## 18. `rotateX()`, `rotateY()`, `rotateZ()\n`\nè¿™äº› 3D å˜æ¢å‡½æ•°ç”¨äºå®šä¹‰å…ƒç´ çš„æ—‹è½¬æ•ˆæœã€‚\n\n```css\n.element {\n  transform: rotateX(45deg) rotateY(30deg) rotateZ(60deg);\n}\n```\n\n## 19. `scaleX()`, `scaleY()`, `scaleZ()`\n\nè¿™äº› 3D å˜æ¢å‡½æ•°ç”¨äºå®šä¹‰å…ƒç´ çš„ç¼©æ”¾æ•ˆæœã€‚\n\n```css\n.element {\n  transform: scaleX(1.2) scaleY(0.8) scaleZ(1.5);\n}\n```\n\n## 20. `translateX()`, `translateY()`, `translateZ()`\n\nè¿™äº› 3D å˜æ¢å‡½æ•°ç”¨äºå®šä¹‰å…ƒç´ çš„å¹³ç§»æ•ˆæœã€‚\n\n```css\n.element {\n  transform: translateX(10px) translateY(20px) translateZ(30px);\n}\n```\n\n## 21. `skewX()`, `skewY()`\n\nè¿™äº›å˜æ¢å‡½æ•°ç”¨äºå®šä¹‰å…ƒç´ çš„å€¾æ–œæ•ˆæœã€‚\n\n```css\n.element {\n  transform: skewX(30deg) skewY(20deg);\n}\n```\n\n## 22. `matrix()`, `matrix3d()`\n\nè¿™äº›å‡½æ•°ç”¨äºå®šä¹‰ 2D å’Œ 3D å˜æ¢çŸ©é˜µã€‚\n\n```css\n.element {\n  transform: matrix(1, 0, 0, 1, 50, 100); /* 2D å˜æ¢çŸ©é˜µ */\n  transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 50, 100, 0, 1); /* 3D å˜æ¢çŸ©é˜µ */\n}\n```\n\n## 23. `perspective()`\n\n`perspective()` å‡½æ•°ç”¨äºå®šä¹‰ 3D é€è§†æ•ˆæœã€‚\n\n```css\n.element {\n  transform: perspective(500px) rotateY(45deg);\n}\n```\n\n## 24. `path()`\n\n`path()` å‡½æ•°ç”¨äºå®šä¹‰ä¸€ä¸ªè·¯å¾„ï¼Œå¸¸ç”¨äº `clip-path` å±æ€§ã€‚\n\n```css\n.element {\n  clip-path: path('M10 10 H 90 V 90 H 10 L 10 10');\n}\n```\n\n## 25. `circle()`, `ellipse()`, `inset()`, `polygon()`\n\nè¿™äº›å‡½æ•°ç”¨äºå®šä¹‰è£å‰ªè·¯å¾„ï¼ˆclip pathï¼‰ã€‚\n\n```css\n.element {\n  clip-path: circle(50% at 50% 50%);\n  clip-path: ellipse(50% 50% at 50% 50%);\n  clip-path: inset(10% 20% 30% 40%);\n  clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);\n}\n```\n\n## 26. `counter()`, `counters()`\n\nè¿™äº›å‡½æ•°ç”¨äºç”Ÿæˆè®¡æ•°å™¨å†…å®¹ã€‚\n\n```css\nol {\n  counter-reset: section;\n}\n\nli::before {\n  counter-increment: section;\n  content: counter(section) \". \";\n}\n```\n\n## 27. `rotate3d()`\n\n`rotate3d()` å‡½æ•°ç”¨äºå®šä¹‰æ²¿ç€ä»»æ„è½´çš„ 3D æ—‹è½¬ã€‚\n\n```css\n.element {\n  transform: rotate3d(1, 1, 0, 45deg);\n}\n```\n\n## 28. `translate3d()`\n\n`translate3d()` å‡½æ•°ç”¨äºå®šä¹‰ 3D å¹³ç§»ã€‚\n\n```css\n.element {\n  transform: translate3d(10px, 20px, 30px);\n}\n```\n\n","3988d718f0845a8d8b77c228a9bb3498":"\n# CSS å¤„ç†å™¨éƒ½æœ‰å“ªäº›ï¼Ÿ\n\n\n`#css`  `#å‰ç«¯/CSS`  `#2024/07/30` \n\nåˆåˆ†ä¸º `å‰ç½®å¤„ç†å™¨ï¼ˆé¢„å¤„ç†å™¨ï¼‰`å’Œ `åç½®å¤„ç†å™¨ï¼ˆåå¤„ç†å™¨ï¼‰`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. CSS å‰ç½®å¤„ç†å™¨ï¼ˆé¢„å¤„ç†å™¨ï¼‰ \n\n- Sass/SCSS\n\t- Sass (Syntactically Awesome Style Sheets)\n- Less (Leaner CSS)\n- Stylus\n\n## 2. CSS åç½®å¤„ç†å™¨ï¼ˆåå¤„ç†å™¨ï¼‰\n\nä»£è¡¨\n\n- PostCSSï¼ˆè™½ç„¶å®ƒä¹Ÿå¯ä»¥ä½œä¸ºé¢„å¤„ç†å™¨ä½¿ç”¨ï¼‰\n- Autoprefixerï¼ˆè‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å‰ç¼€ï¼‰\n- CSS Nanoï¼ˆå‹ç¼©å’Œä¼˜åŒ– CSSï¼‰\n\n## 3. CSS-in-JS\n\nå°† CSS å†™å…¥ JavaScript ä»£ç ä¸­çš„æŠ€æœ¯ï¼Œæ¯”å¦‚ styled-componentsã€Emotionã€JSS ç­‰ã€‚\n\n","1dd29f68584a5f319bbf95352daa807f":"\n# CSS é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§\n\n\n`#å‰ç«¯/CSS`  `#2024/07/30`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ç‰¹å¼‚æ€§ï¼ˆSpecificityï¼‰ ï¼šä¼˜å…ˆçº§ \n\nCSS é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§ç”±å››ä¸ªæ•°å€¼ç»„æˆï¼Œç”¨æ¥è®¡ç®—é€‰æ‹©å™¨çš„`ç‰¹å¼‚æ€§ï¼ˆSpecificityï¼‰`ã€‚è¿™äº›æ•°å€¼ä»é«˜åˆ°ä½åˆ†åˆ«æ˜¯ï¼š\n\n1. å†…è”æ ·å¼ï¼šå¦‚æœæ ·å¼æ˜¯é€šè¿‡å…ƒç´ çš„ `style` å±æ€§å†…è”å®šä¹‰çš„ï¼Œä¾‹å¦‚ `<div style=\"color: red;\"></div>`ã€‚\n   1. ç‰¹å¼‚æ€§ï¼ˆSpecificityï¼‰ï¼š1000\n2. ID é€‰æ‹©å™¨ï¼šä¾‹å¦‚ `#id`\n   1. ç‰¹å¼‚æ€§ï¼ˆSpecificityï¼‰ï¼š100\n3. ç±»é€‰æ‹©å™¨ã€å±æ€§é€‰æ‹©å™¨å’Œ`ä¼ªç±»é€‰æ‹©å™¨`ï¼šä¾‹å¦‚ `.class`ã€`[type=\"text\"]`ã€`:hover`\n   1. ç‰¹å¼‚æ€§ï¼ˆSpecificityï¼‰ï¼š10\n4. å…ƒç´ é€‰æ‹©å™¨ å’Œ`ä¼ªå…ƒç´ `é€‰æ‹©å™¨ï¼šä¾‹å¦‚ `div`ã€`p`ã€`::before`\n   1. ç‰¹å¼‚æ€§ï¼ˆSpecificityï¼‰ï¼š1\n5. é€šé…ç¬¦é€‰æ‹©å™¨ï¼ˆ*ï¼‰\n   1. ç‰¹å¼‚æ€§ï¼ˆSpecificityï¼‰ï¼š0\n\n> ç‰¹å¼‚æ€§ï¼ˆSpecificityï¼‰ å³ ä¼˜å…ˆçº§\n\n## 2. ç¤ºä¾‹\n\n1. `style=\"color: red;\"` å†…è”æ ·å¼ï¼Œç‰¹å¼‚æ€§å€¼ä¸º `1000`\n2. `#idSelector` ID é€‰æ‹©å™¨ï¼Œç‰¹å¼‚æ€§å€¼ä¸º `100`\n3. `.classSelector` ç±»é€‰æ‹©å™¨ï¼Œç‰¹å¼‚æ€§å€¼ä¸º `10`\n4. `[type=\"text\"]` å±æ€§é€‰æ‹©å™¨ï¼Œç‰¹å¼‚æ€§å€¼ä¸º `10`\n5. `:hover` ä¼ªç±»é€‰æ‹©å™¨ï¼Œç‰¹å¼‚æ€§å€¼ä¸º `10`\n6. `div` å…ƒç´ é€‰æ‹©å™¨ï¼Œç‰¹å¼‚æ€§å€¼ä¸º `1`\n\n## 3. `important`\n\n1. `!important` æå‡å£°æ˜çš„ä¼˜å…ˆçº§ï¼Œè¦†ç›–ä»»ä½•é€šå¸¸çš„æƒé‡è®¡ç®—ã€‚\n2. ä»»æ„è§„åˆ™ä½¿ç”¨ `!important`ï¼Œè¯¥è§„åˆ™å°†ä¼˜å…ˆæƒã€‚\n3. å¤šä¸ª `!important`ä¹‹é—´æƒ…å†µï¼Œä¼˜å…ˆçº§åŸºäºç‰¹å¼‚æ€§ã€‚\n\n## 4. æ€»ç»“\n\n1. `!important` å£°æ˜\n2. å†…è”æ ·å¼ï¼ˆ`style å±æ€§`ï¼‰\n3. ID é€‰æ‹©å™¨ï¼ˆ`#id`ï¼‰\n4. ç±»é€‰æ‹©å™¨ï¼ˆ`.class`ï¼‰ã€å±æ€§é€‰æ‹©å™¨ï¼ˆ`[attr]`ï¼‰å’Œ `ä¼ªç±»ï¼ˆ:hover ç­‰ï¼‰`\n5. å…ƒç´ é€‰æ‹©å™¨ï¼ˆ`div, p ç­‰`ï¼‰å’Œ `ä¼ªå…ƒç´ ï¼ˆ::before, ::after ç­‰`ï¼‰\n6. é€šé…ç¬¦é€‰æ‹©å™¨ï¼ˆ`*`ï¼‰\n\n> æ˜¯æœ‰ä¸€ä¸ªå¾ˆè¯¦ç»†çš„è®¡ç®—å…¬å¼çš„ï¼ŒCSS å¼•æ“ä¼šä¸¥æ ¼è®¡ç®—å…·ä½“çš„å€¼\n\n","8d234d1a8b825083ba5a6903c7a4d3c3":"\n# CSS Houdini API\n\n\n`#å‰ç«¯/CSS`  `#2024/07/30` \n\n- **æè¿°**ï¼šä¸€ç»„ä½çº§ APIï¼Œå…è®¸å¼€å‘è€…æ‰©å±• CSS çš„åŠŸèƒ½ã€‚\n- **ç‰¹ç‚¹**ï¼šå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„ CSS å±æ€§ã€å€¼å’Œæ¸²æŸ“é€»è¾‘ã€‚\n- **ç¤ºä¾‹**ï¼šä½¿ç”¨ Houdini Paint API åˆ›å»ºè‡ªå®šä¹‰èƒŒæ™¯å›¾æ¡ˆã€‚\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/fbc8c2fd3e2020705eca7a56269f9619.png)\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/66aa45d5394512e154f5316bb589f85f.png)\n\n","af16b410592157eebdf2864756e15015":"\n# Tailland CSS çš„ä½¿ç”¨\n\n\n`#å‰ç«¯/CSS`  `#2024/07/30`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä¸»è¦ç‰¹ç‚¹ \n\n- åŸå­çº§ç±»ï¼šæ¯ä¸ªç±»é€šå¸¸åªåšä¸€ä»¶äº‹ã€‚\n- ç»„åˆä½¿ç”¨ï¼šé€šè¿‡ç»„åˆå¤šä¸ªç±»æ¥å®ç°å¤æ‚çš„æ ·å¼ã€‚\n- ç›´æ¥åœ¨ HTML ä¸­åº”ç”¨ï¼šæ ·å¼ç›´æ¥åœ¨ HTML å…ƒç´ ä¸Šåº”ç”¨ï¼Œè€Œä¸æ˜¯åœ¨å•ç‹¬çš„ CSS æ–‡ä»¶ä¸­ã€‚\n- é¢„å®šä¹‰ç±»ï¼šä½¿ç”¨æ¡†æ¶æä¾›çš„é¢„å®šä¹‰ç±»ï¼Œè€Œä¸æ˜¯è‡ªå®šä¹‰ CSSã€‚\n\n## 2. ä¼˜åŠ¿è§£é‡Š\n\n- å¿«é€Ÿå¼€å‘ï¼šä¸éœ€è¦åˆ‡æ¢åˆ° CSS æ–‡ä»¶ï¼Œç›´æ¥åœ¨ HTML ä¸­åº”ç”¨æ ·å¼ã€‚\n- ä¸€è‡´æ€§ï¼šä½¿ç”¨é¢„å®šä¹‰çš„ç±»ç¡®ä¿æ•´ä¸ªé¡¹ç›®çš„æ ·å¼ä¸€è‡´ã€‚\n- å“åº”å¼è®¾è®¡ï¼šå¯ä»¥è½»æ¾æ·»åŠ å“åº”å¼å‰ç¼€ï¼ˆå¦‚Â `md:`,Â `lg:`ï¼‰æ¥é€‚åº”ä¸åŒå±å¹•å°ºå¯¸ã€‚\n- é¿å…å‘½åå›°éš¾ï¼šä¸éœ€è¦ä¸ºæ¯ä¸ªå…ƒç´ æƒ³ç‹¬ç‰¹çš„ç±»åã€‚\n\n## 3. é—®é¢˜\n\n- HTML è†¨èƒ€ã€å¯ç»´æŠ¤æ€§\n- **è¯­ä¹‰åŒ–é—®é¢˜**\n- å¯èƒ½ä¸é€‚åˆå°é¡¹ç›®\n- è®¾è®¡ä¸€è‡´æ€§çš„æŒ‘æˆ˜\n\n","2d1d9a00fa885a7c97db43289acd5a2d":"\n# CSS æ€§èƒ½ä¼˜åŒ–æœ‰å“ªäº›æ€è·¯ï¼Ÿ\n\n\n`#å‰ç«¯/CSS`  `#2024/07/30`\n\nåœ¨è¿›è¡Œ CSS æ€§èƒ½ä¼˜åŒ–æ—¶ï¼Œæœ‰è®¸å¤šæ³¨æ„äº‹é¡¹å’Œæœ€ä½³å®è·µå¯ä»¥å¸®åŠ©æé«˜ç½‘é¡µçš„åŠ è½½é€Ÿåº¦å’Œæ¸²æŸ“æ€§èƒ½ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼š\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‡å°‘ CSS æ–‡ä»¶çš„å¤§å° \n\n- å‹ç¼© CSS æ–‡ä»¶ï¼šä½¿ç”¨å·¥å…·ï¼ˆå¦‚ CSSNanoã€cssoï¼‰å‹ç¼© CSS æ–‡ä»¶ï¼Œå»é™¤ç©ºæ ¼ã€æ³¨é‡Šå’Œä¸å¿…è¦çš„å­—ç¬¦ã€‚\n- ç§»é™¤æœªä½¿ç”¨çš„ CSSï¼šä½¿ç”¨å·¥å…·ï¼ˆå¦‚ PurifyCSSã€PurgeCSSï¼‰æ£€æµ‹å¹¶ç§»é™¤æœªä½¿ç”¨çš„ CSS è§„åˆ™ã€‚\n\n## 2. ä¼˜åŒ–é€‰æ‹©å™¨\n\n- é¿å…è¿‡äºå…·ä½“çš„é€‰æ‹©å™¨ï¼šå¤æ‚çš„é€‰æ‹©å™¨ï¼ˆå¦‚åä»£é€‰æ‹©å™¨ï¼‰ä¼šå¢åŠ æµè§ˆå™¨çš„åŒ¹é…æ—¶é—´ã€‚å°½é‡ä½¿ç”¨ç®€å•çš„é€‰æ‹©å™¨ã€‚\n- é¿å…ä½¿ç”¨é€šé…ç¬¦é€‰æ‹©å™¨ï¼šå¦‚ `*` é€‰æ‹©å™¨ä¼šåŒ¹é…æ‰€æœ‰å…ƒç´ ï¼Œæ€§èƒ½è¾ƒå·®ã€‚\n- å‡å°‘åµŒå¥—å±‚çº§ï¼šè¿‡æ·±çš„åµŒå¥—ä¼šå¢åŠ é€‰æ‹©å™¨çš„å¤æ‚åº¦ï¼Œå½±å“æ€§èƒ½ã€‚\n\n## 3. ä½¿ç”¨é«˜æ•ˆçš„å¸ƒå±€æŠ€æœ¯\n\n- ä¼˜å…ˆä½¿ç”¨ Flexbox å’Œ Grid å¸ƒå±€ï¼šè¿™äº›å¸ƒå±€æ¨¡å‹åœ¨ç°ä»£æµè§ˆå™¨ä¸­æ€§èƒ½è¾ƒå¥½ï¼Œä¸”ä»£ç ç®€æ´æ˜“ç»´æŠ¤ã€‚\n- é¿å…ä½¿ç”¨æµ®åŠ¨å¸ƒå±€ï¼šæµ®åŠ¨å¸ƒå±€éœ€è¦æ›´å¤šçš„æ¸…ç†å’Œå¤„ç†ï¼Œå½±å“æ€§èƒ½ã€‚\n\n## 4. å‡å°‘é‡æ’å’Œé‡ç»˜\n\n- é¿å…é¢‘ç¹ä¿®æ”¹æ ·å¼ï¼šé¢‘ç¹ä¿®æ”¹æ ·å¼ä¼šå¯¼è‡´é‡æ’å’Œé‡ç»˜ï¼Œå½±å“æ€§èƒ½ã€‚å°½é‡æ‰¹é‡ä¿®æ”¹æ ·å¼ã€‚\n- ä½¿ç”¨ `class` åˆ‡æ¢è€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹æ ·å¼ï¼šé€šè¿‡åˆ‡æ¢ `class` æ¥æ”¹å˜æ ·å¼ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹å…ƒç´ çš„ `style` å±æ€§ã€‚\n- é¿å…ä½¿ç”¨ JavaScript ä¿®æ”¹æ ·å¼ï¼šå°½é‡ä½¿ç”¨ CSS è¿‡æ¸¡å’ŒåŠ¨ç”»ï¼Œè€Œä¸æ˜¯é€šè¿‡ JavaScript ä¿®æ”¹æ ·å¼ã€‚\n\n## 5. ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿ\n\n- å¯ç”¨ GPU åŠ é€Ÿï¼šä½¿ç”¨ `transform`ã€`opacity` å’Œ `will-change` å±æ€§æ¥å¯ç”¨ GPU åŠ é€Ÿï¼Œå‡å°‘ CPU è´Ÿè½½ã€‚\n```css\n.element {\n  will-change: transform, opacity;\n}\n```\n\n## 6. å»¶è¿ŸåŠ è½½å’Œå¼‚æ­¥åŠ è½½\n\n- å¼‚æ­¥åŠ è½½ CSSï¼šä½¿ç”¨ `media` å±æ€§å’Œ `onload` äº‹ä»¶å¼‚æ­¥åŠ è½½éå…³é”® CSSã€‚\n```html\n<link rel=\"stylesheet\" href=\"non-critical.css\" media=\"print\" onload=\"this.media='all'\">\n<noscript><link rel=\"stylesheet\" href=\"non-critical.css\"></noscript>\n\n```\n\n> æ‰“å°çš„æ ·å¼è‚¯å®šéœ€è¦åç½®\n\n## 7. ä½¿ç”¨ CSS é¢„å¤„ç†å™¨å’Œåå¤„ç†å™¨\n\n- ä½¿ç”¨é¢„å¤„ç†å™¨ï¼ˆå¦‚ Sassã€Lessï¼‰ï¼šé¢„å¤„ç†å™¨å¯ä»¥å¸®åŠ©ç»„ç»‡å’Œä¼˜åŒ– CSS ä»£ç ï¼Œæé«˜å¯ç»´æŠ¤æ€§ã€‚\n- ä½¿ç”¨åå¤„ç†å™¨ï¼ˆå¦‚ PostCSSï¼‰ï¼šåå¤„ç†å™¨å¯ä»¥è‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å‰ç¼€ã€å‹ç¼© CSS ç­‰ã€‚\n\n## 8. ä¼˜åŒ–å­—ä½“åŠ è½½\n\n- ä½¿ç”¨å­—ä½“æ˜¾ç¤ºç­–ç•¥ï¼šä½¿ç”¨ `font-display` å±æ€§ä¼˜åŒ–å­—ä½“åŠ è½½ä½“éªŒã€‚\n```css\n@font-face {\n  font-family: 'MyFont';\n  src: url('myfont.woff2') format('woff2');\n  font-display: swap;\n}\n```\n\n- åªåŠ è½½å¿…è¦çš„å­—ä½“ï¼šé¿å…åŠ è½½è¿‡å¤šçš„å­—ä½“å˜ä½“å’Œå­—ç¬¦é›†ã€‚\n\n## 9. ä»£ç åˆ†å‰²å’ŒæŒ‰éœ€åŠ è½½\n\n- æŒ‰éœ€åŠ è½½ CSSï¼šå°†ä¸åŒé¡µé¢çš„æ ·å¼åˆ†å‰²æˆä¸åŒçš„ CSS æ–‡ä»¶ï¼ŒæŒ‰éœ€åŠ è½½ã€‚\n\n## 10. ä½¿ç”¨ç°ä»£ CSS ç‰¹æ€§\n\n- ä½¿ç”¨ CSS å˜é‡ï¼šCSS å˜é‡å¯ä»¥å‡å°‘é‡å¤ä»£ç ï¼Œæé«˜å¯ç»´æŠ¤æ€§å’Œæ€§èƒ½ã€‚\n```css\n:root {\n  --primary-color: `#3498db;`\n}\n\n.element {\n  color: var(--primary-color);\n}\n```\n\n- ä½¿ç”¨ç°ä»£å¸ƒå±€å’ŒåŠŸèƒ½ï¼šå¦‚ CSS Gridã€Flexboxã€`clamp()`ã€`min()`ã€`max()` ç­‰ï¼Œå‡å°‘ä¾èµ– JavaScript å®ç°å¤æ‚å¸ƒå±€å’ŒåŠŸèƒ½ã€‚\n\n## 11. æå‰åŠ è½½å…³é”® CSS\n\n- å†…è”å…³é”® CSSï¼šå°†å…³é”® CSS å†…è”åˆ° HTML ä¸­ï¼Œå‡å°‘åˆå§‹æ¸²æŸ“æ—¶é—´ã€‚\n```html\n<style>\n  /* å…³é”® CSS */\n  body {\n    font-family: 'Arial', sans-serif;\n  }\n</style>\n\n```\n\n## 12. ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œ (CDN)\n\n- ä½¿ç”¨ CDN æä¾› CSSï¼šä½¿ç”¨ CDN æä¾›çš„ CSS æ–‡ä»¶ï¼Œå¯ä»¥åŠ é€Ÿæ–‡ä»¶åŠ è½½ã€‚\n","b970c80a38db5fb9a70ae9fcdf66d506":"\n# åª’ä½“æŸ¥è¯¢\n\n`#2024/07/30`   `#å‰ç«¯/CSS`  \n\nå¸¸è§çš„åª’ä½“æŸ¥è¯¢è¯­å¥å¦‚ä¸‹\n\n- min-width,\n- max-width\n- orientation\n- @container\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. `Container` Queries  \n\n- **æè¿°**ï¼šå…è®¸æ ¹æ®å®¹å™¨çš„å°ºå¯¸è€Œä¸æ˜¯è§†å£å°ºå¯¸æ¥åº”ç”¨æ ·å¼ã€‚\n- **ç‰¹ç‚¹**ï¼š**æ›´çµæ´»çš„å“åº”å¼è®¾è®¡ï¼Œæ›´çµæ´»çš„åª’ä½“æŸ¥è¯¢**\n- **ç¤ºä¾‹**ï¼š\n```css\n@container (min-width: 500px) {\n  .element {\n    background-color: blue;\n  }\n}\n```\n\n","a0b1a18d5bc759529f409a4c2ef948b0":"\n# è¯·åˆ—ä¸¾ CSS å…¼å®¹æ€§ç›¸å…³çš„çŸ¥è¯†ç‚¹\n\n\n`#2024/07/30`  `#å‰ç«¯/CSS`  \n\n- `@supports not (--css: variables) {}`  ç”¨äºç¡®å®šæ˜¯å¦æ”¯æŒ `css å˜é‡`\n- Autoprefixer\n- Can I use?\n- CSS Reset\n   - `CSS Reset`:  å¦‚Eric Meyerâ€™s Reset CSS\n   - `Normalize.css`:  ä¿ç•™æœ‰ç”¨çš„é»˜è®¤æ ·å¼ï¼ŒåŒæ—¶æ ‡å‡†åŒ–è·¨æµè§ˆå™¨çš„æ ·å¼\n- Modernizråº“: ä¸€ä¸ªæµè¡Œçš„åº“ï¼Œç”¨äºæ£€æµ‹HTML5å’ŒCSS3ç‰¹æ€§ï¼Œæ¯”å¦‚ `if (Modernizr.flexbox) {} `\n- IEæ¡ä»¶æ³¨é‡Šï¼Œå¤ªè€äº†ï¼Œå¯ä»¥ä¸ç”¨äº†å§ï¼Ÿ\n- æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§\n- CSS Hackï¼šæ¯”å¦‚ `*color: yellow; /* IE6,IE7 */`\n- å•ä½å…¼å®¹æ€§ï¼šä½¿ç”¨ `px` , æœ‰å¯èƒ½ `rem/vw/vh` ä¸æ”¯æŒ\n","ad90748c284c5f478303577fd4c8f71b":"\n# è¯´è¯´å›æµå’Œé‡ç»˜\n\n\n`#2024/07/30`  `#å‰ç«¯/CSS`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å…ˆçœ‹å®šä¹‰ \n\n- `å›æµï¼ˆæˆ–é‡æ’ï¼‰`ï¼šå¸ƒå±€å¼•æ“ä¼šæ ¹æ®å„ç§æ ·å¼è®¡ç®—æ¯ä¸ªç›’å­åœ¨é¡µé¢ä¸Šçš„`å¤§å°ä¸ä½ç½®`\n   - é‡æ’ï¼ˆä¹Ÿç§°ä¸ºå›æµï¼‰æ˜¯æµè§ˆå™¨é‡æ–°è®¡ç®—é¡µé¢ä¸­`**å…ƒç´ ä½ç½®å’Œå‡ ä½•å½¢çŠ¶**`çš„è¿‡ç¨‹\n- `é‡ç»˜`ï¼šå½“è®¡ç®—å¥½ç›’æ¨¡å‹çš„`ä½ç½®ã€å¤§å°åŠå…¶ä»–å±æ€§`åï¼Œæµè§ˆå™¨æ ¹æ®æ¯ä¸ªç›’å­ç‰¹æ€§è¿›è¡Œç»˜åˆ¶\n- `é‡ç»˜`ä¸ä¸€å®šå¯¼è‡´`é‡æ’`ï¼Œä½†`é‡æ’`ä¸€å®šä¼šå¯¼è‡´`é‡ç»˜`  ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/0e89990a6d49095e5a717c3af1edeb53.png)\n\n## 2. å¯¼è‡´`å›æµ`çš„åœºæ™¯\n\n- é¡µé¢`é¦–æ¬¡æ¸²æŸ“`\n- æµè§ˆå™¨`çª—å£å¤§å°`å‘ç”Ÿæ”¹å˜\n- å…ƒç´ `å°ºå¯¸æˆ–ä½ç½®`å‘ç”Ÿæ”¹å˜\n- å…ƒç´ å†…å®¹å˜åŒ–ï¼ˆ`æ–‡å­—æ•°é‡`æˆ–`å›¾ç‰‡å¤§å°`ç­‰ç­‰ï¼‰\n- å…ƒç´ `å­—ä½“å¤§å°`å˜åŒ–\n- `æ·»åŠ æˆ–è€…åˆ é™¤`å¯è§çš„DOMå…ƒç´ \n- æ¿€æ´»CSSä¼ªç±»ï¼ˆä¾‹å¦‚ï¼š`:hover`ï¼‰\n- `calc()` æœ¬èº«ä¸ä¼šå¼•èµ· `å›æµ`ï¼Œä½†æ˜¯å› ä¸ºéœ€è¦é‡æ–°è®¡ç®—å¸ƒå±€çš„å±æ€§ï¼Œæ¯”å¦‚çˆ¶å…ƒç´ çš„å®½åº¦æ”¹å˜äº†ï¼Œé‚£å¿…ç„¶ä¼šå¯¼è‡´å­å…ƒç´ çš„ä¸€ä¸ª `å›æµ`\n- `æŸ¥è¯¢æŸäº›å±æ€§`æˆ–`è°ƒç”¨æŸäº›æ–¹æ³•`\n   - `dom.style.width/height` ï¼Œåªèƒ½å–`è¡Œå†…æ ·å¼çš„å®½å’Œé«˜`ï¼Œ`style` ä¸­ `link` å¤–é“¾å–ä¸åˆ°ã€‚å¯å†™ï¼Œä¿®æ”¹æ—¶ä¼šå¯¼è‡´`é‡æ’`\n   - `window.getComputedStyle(dom).width/height`ï¼ŒæŒ‡å®š`ç¬¬äºŒå‚æ•°`æŒ‡å®šä¸€ä¸ªè¦åŒ¹é…çš„ä¼ªå…ƒç´ çš„å­—ç¬¦ä¸²ã€‚å¿…é¡»å¯¹æ™®é€šå…ƒç´ çœç•¥ï¼ˆ`æˆ–null`ï¼‰ ï¼Œ\n      - è¯»å–çš„æ ·å¼æ˜¯`æœ€ç»ˆæ ·å¼`ï¼ŒåŒ…æ‹¬äº†å†…è”æ ·å¼ã€åµŒå…¥æ ·å¼å’Œå¤–éƒ¨æ ·å¼\n      - æ¯”å¦‚`getComputedStyle(h3, '::after').content` \n      - ä¼šå¯¼è‡´`å›æµ` å› ä¸ºå®ƒéœ€è¦è·å–ç¥–å…ˆèŠ‚ç‚¹çš„ä¸€äº›ä¿¡æ¯è¿›è¡Œè®¡ç®—ï¼ˆè­¬å¦‚å®½é«˜ç­‰ï¼‰ï¼Œä¸ºæ±‚ä¸€ä¸ª`â€œå³æ—¶æ€§â€`å’Œ`â€œå‡†ç¡®æ€§â€`ã€‚\n   - `dom.getBoundingClientRect().width/height ã€top/left/right/bottom`  å¾—åˆ°`æ¸²æŸ“åçš„å®½å’Œé«˜`ï¼ŒåŠ`ç›¸å¯¹äºè§†çª—çš„ä¸Šä¸‹å·¦å³`çš„è·ç¦»\n   - è·å–`å¸ƒå±€ä¿¡æ¯`æ—¶ï¼Œä¼šå¯¼è‡´`é‡æ’`ã€‚ç›¸å…³çš„æ–¹æ³•å±æ€§å¦‚ `offsetTop`   `getComputedStyle` ç­‰\n   - `scrollIntoView()`ã€`scrollIntoViewIfNeeded()` ã€ `scrollTo()` æ»šåŠ¨æ—¶ï¼Œä¼šå¯¼è‡´`é‡æ’`\n\n>  æ€»ä¹‹ï¼Œ `æŸ¥è¯¢æŸäº›å±æ€§`æˆ–`è°ƒç”¨æŸäº›æ–¹æ³•` æ˜¯å¦ä¼šå¯¼è‡´é‡æ’ï¼Œå…³é”®éœ€è¦çœ‹  `åªè¯»äº†` ï¼Œè¿˜æ˜¯æœ‰`å†™å…¥`æ“ä½œ\n\n>  å¦å¤–ä¸€äº›å®¹æ˜“è¢«å¿½ç•¥çš„æ“ä½œï¼šå¦‚ getComputedStyleï¼Œ  offsetTopã€offsetLeftã€ offsetWidthã€offsetHeightã€scrollTopã€scrollLeftã€scrollWidthã€scrollHeightã€clientTopã€clientLeftã€clientWidthã€clientHeight è¿™äº›å±æ€§æœ‰ä¸€ä¸ªå…±æ€§ï¼Œå°±æ˜¯éœ€è¦é€šè¿‡`**å³æ—¶è®¡ç®—**`å¾—åˆ°ã€‚å› æ­¤æµè§ˆå™¨ä¸ºäº†è·å–è¿™äº›å€¼ï¼Œä¹Ÿä¼šè¿›è¡Œ`å›æµ`\n\n## 3. opacityã€display å’Œ visibility\n\n- ä¿®æ”¹ `opacity` å’Œ `visibility` å±æ€§é€šå¸¸åªä¼šè§¦å‘`é‡ç»˜`ï¼Œè€Œä¸ä¼šè§¦å‘`å›æµ`\n- è€Œä¿®æ”¹ `display` å±æ€§åˆ™å¯èƒ½ä¼šè§¦å‘`å›æµå’Œé‡ç»˜`\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/d416ea83c9a78c5f5445f7568c9de8ba.png)\n\n> - `**opacity**`** ä¸º 0 ï¼Œå¯ä»¥ç‚¹å‡»**\n> - visibility ä¸º hiddenæ—¶ï¼Œä¸èƒ½ç‚¹å‡»\n\n## 4. ä¿®æ”¹  `left` å’Œ `right` çš„å½±å“\n\n### 4.1. å¯¹äºç»å¯¹å®šä½ (`position: absolute`) å’Œ å›ºå®šå®šä½ (`position: fixed`)çš„å…ƒç´ \n\n> [!abstract]\n>  > **ç»“è®ºï¼š å¯¹äºè„±ç¦»æ–‡æ¡£æµçš„å…ƒç´ ï¼šä¸€èˆ¬ä¸ä¼šå¼•èµ·æ–‡æ¡£æµçš„é‡æ’ï¼Œä½†ä¼šå¯¼è‡´è¯¥å…ƒç´ çš„é‡ç»˜ã€‚**\n\n- è¿™äº›å…ƒç´ è„±ç¦»æ­£å¸¸æ–‡æ¡£æµï¼Œå®ƒä»¬çš„å¸ƒå±€ä¸å†å½±å“å’Œè¢«å…¶ä»–å…ƒç´ å½±å“\n- å¯¹äºè„±ç¦»æ–‡æ¡£æµçš„å…ƒç´ ï¼ˆå¦‚`position: absolute`æˆ–`position: fixed`ï¼‰ï¼Œä¿®æ”¹`left`å’Œ`right`å±æ€§é€šå¸¸ç›´æ¥å½±å“è¯¥å…ƒç´ æœ¬èº«çš„ä½ç½®ï¼Œè€Œä¸ä¼šå½±å“åˆ°å…¶ä»–å…ƒç´ çš„å¸ƒå±€ï¼Œå› æ­¤**ä¸ä¼šå¼•èµ·æ•´ä½“å¸ƒå±€çš„é‡æ’**ã€‚\n- ç„¶è€Œï¼Œä¾ç„¶ä¼š **å¯¼è‡´è¯¥å…ƒç´ çš„é‡ç»˜ï¼ˆrepaintï¼‰ï¼Œä½†ä¸æ¶‰åŠåˆ°é‡æ’ï¼ˆreflowï¼‰**\n\n### 4.2. å¯¹äºå¯¹äºæœªè„±ç¦»æ–‡æ¡£æµçš„å…ƒç´ ï¼ˆå¦‚`position: relative`ï¼‰\n\n- å¯èƒ½ä¼šå¯¼è‡´è¯¥å…ƒç´ åŠå…¶å­å…ƒç´ çš„é‡æ’\n- å…ƒç´ æœ¬èº«æ”¹å˜äº†ï¼Œè‡ªç„¶æœ‰å¯èƒ½å¯¼è‡´æ•´ä¸ªæ–‡æ¡£çš„é‡æ’\n\n### 4.3. å¯¹äº `position: sticky` çš„å…ƒç´ \n\n#### 4.3.1. `position: sticky` çš„ç‰¹æ€§\n\n- å½“å…ƒç´ åœ¨å®¹å™¨è§†å£å†…æ—¶ï¼Œå®ƒè¡¨ç°ä¸ºç›¸å¯¹å®šä½ï¼ˆ`relative`ï¼‰ã€‚\n- ä¸€æ—¦å…ƒç´ æ»šåŠ¨åˆ°æŒ‡å®šåç§»ä½ç½®ï¼Œå®ƒå°±è¡¨ç°ä¸ºå›ºå®šå®šä½ï¼ˆ`fixed`ï¼‰ï¼Œå³ç›¸å¯¹äºè§†å£å®šä½ã€‚\n\n#### 4.3.2. ç›¸å¯¹å®šä½é˜¶æ®µï¼ˆåœ¨å®¹å™¨è§†å£å†…ï¼‰\n\n- å…ƒç´ è¿˜æœªè¾¾åˆ°æŒ‡å®šçš„åç§»ä½ç½®ï¼Œæ­¤æ—¶ä¸æ™®é€šçš„`**ç›¸å¯¹å®šä½**`å…ƒç´ éå¸¸ç›¸ä¼¼ã€‚\n- ä¿®æ”¹ `left` å’Œ `right` ä¼šå½±å“å…ƒç´ çš„ä½ç½®ï¼Œå› æ­¤å¯èƒ½ä¼šå¼•å‘é‡æ’ï¼ˆreflowï¼‰ã€‚\n\n#### 4.3.3. å›ºå®šå®šä½é˜¶æ®µï¼ˆåˆ°è¾¾åç§»ä½ç½®ï¼‰\n\n- å…ƒç´ è¾¾åˆ°åç§»ä½ç½®ï¼Œå˜ä¸ºç›¸å¯¹è§†å£å®šä½ã€‚\n- ä¿®æ”¹ `left` å’Œ `right` çš„è¡Œä¸ºæ›´åƒæ˜¯**å›ºå®šå®šä½**ï¼Œé€šå¸¸ä¸å½±å“å…¶ä»–å…ƒç´ çš„å¸ƒå±€ã€‚\n- è¿™ç§æƒ…å†µä¸‹ï¼Œå¯èƒ½åªä¼šå¯¼è‡´é‡ç»˜ï¼ˆrepaintï¼‰ï¼Œä¸ä¼šå¼•å‘é‡æ’ã€‚\n\n### 4.4. æ€»ç»“\n\n- å¯¹äºå·²ç»è„±ç¦»æ–‡æ¡£æµçš„å…ƒç´ ï¼ˆå¦‚ position: absolute æˆ– fixedï¼‰ï¼Œä»…ä¿®æ”¹ left å’Œ right çš„å€¼é€šå¸¸ä¸ä¼šå¯¼è‡´å…¶ä»–å…ƒç´ çš„å›æµï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´è¯¥å…ƒç´ æœ¬èº«çš„é‡ç»˜ã€‚\n- å¯¹äº` position: relative` æ¥è¯´ï¼Œä¼šå¯¼è‡´\n\n## 5. ä¸€äº›ä¼˜åŒ–å»ºè®®\n\n### 5.1. `transform` ä»£æ›¿ `top/left` \n\n### 5.2. é¿å…ä½¿ç”¨`CSSè¡¨è¾¾å¼`ï¼ˆå¦‚ï¼š`calc()`ï¼‰\n\n### 5.3. æ‰¹é‡ä¿®æ”¹ DOM\n\n```javascript\nconst fragment = document.createDocumentFragment();\nfor (let i = 0; i < 10; i++) {\n  const li = document.createElement('li');\n  li.textContent = `Item ${i}`;\n  fragment.appendChild(li);\n}\ndocument.getElementById('myList').appendChild(fragment);\n```\n\n   - ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µ(DocumentFragment)æˆ–è€…å…ˆå°†å…ƒç´ è®¾ä¸ºä¸å¯è§ï¼Œè¿›è¡Œå¤šæ¬¡ä¿®æ”¹åå†æ˜¾ç¤ºã€‚\n\n### 5.4. é¿å…é¢‘ç¹æ“ä½œæ ·å¼\n\n```javascript\n// ä¸æ¨è\nconst el = document.getElementById('myElement');\nel.style.borderLeft = '1px';\nel.style.borderRight = '2px';\nel.style.padding = '5px';\n\n// æ¨è\nel.style.cssText = 'border-left: 1px; border-right: 2px; padding: 5px;';\n// æˆ–è€…\nel.classList.add('my-class');\n```\n\n- åˆå¹¶å¤šæ¬¡æ ·å¼ä¿®æ”¹ï¼Œä¸€æ¬¡æ€§ä¿®æ”¹ã€‚\n- ä½¿ç”¨ç±»åæ›¿ä»£å¤šæ¬¡æ ·å¼ä¿®æ”¹ã€‚\n- `classList.add/remove/toggle` æ¥åˆ‡æ¢æ ·å¼ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹` style å±æ€§`\n\n### 5.5. ç¼“å­˜å¸ƒå±€ä¿¡æ¯ï¼šæ‰¹é‡ä¿®æ”¹\n\n```javascript\n// ä¸æ¨è\nfor (let i = 0; i < 100; i++) {\n  element.style.left = `${element.offsetLeft + 1}px`;\n}\n\n// æ¨è\nlet left = element.offsetLeft;\nfor (let i = 0; i < 100; i++) {\n  left++;\n  element.style.left = `${left}px`;\n}\n```\n\n- é¿å…å¤šæ¬¡è¯»å–ä¼šå¼•å‘é‡æ’çš„å±æ€§ã€‚\n\n### 5.6. ä½¿ç”¨ç»å¯¹å®šä½ä½¿å…ƒç´ è„±ç¦»æ–‡æ¡£æµ\n\n- å¯¹äºé¢‘ç¹é‡æ’çš„å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨ç»å¯¹å®šä½ä½¿å…¶è„±ç¦»æ–‡æ¡£æµã€‚\n- `position: absoluteã€fixed `  è„±ç¦»æ–‡æ¡£æµï¼Œä»¥é¿å…å¯¹å…¶ä»–å…ƒç´ å¸ƒå±€çš„å½±å“ã€‚\n\n### 5.7. ä¼˜åŒ–åŠ¨ç”»\n\n```javascript\nfunction animate() {\n  // åŠ¨ç”»é€»è¾‘\n  requestAnimationFrame(animate);\n}\nrequestAnimationFrame(animate);\n```\n\n- ä½¿ç”¨ `requestAnimationFrame` æ¥æ§åˆ¶åŠ¨ç”»ã€‚\n- ä½¿ç”¨ CSS3 åŠ¨ç”»å’Œ `transforms` æ›¿ä»£ JavaScript åŠ¨ç”»ã€‚\n\n### 5.8. ä½¿ç”¨ CSS3 ç¡¬ä»¶åŠ é€Ÿ\n\n```css\n.move {\n  transform: translateX(100px);\n}\n```\n\nä½¿ç”¨ transformã€opacityã€filters ç­‰å±æ€§ï¼Œè§¦å‘ GPU åŠ é€Ÿã€‚\n\nä½¿ç”¨`css3ç¡¬ä»¶åŠ é€Ÿ`ï¼Œ`å¯ä»¥è®©transform`ã€`opacity`ã€`filters` è¿™äº›åŠ¨ç”»ä¸ä¼šå¼•èµ·`å›æµé‡ç»˜`\n\n### 5.9. é¿å…ä½¿ç”¨ `table` å¸ƒå±€\n\n- è¡¨æ ¼å¸ƒå±€å¯èƒ½å¯¼è‡´å¤šæ¬¡é‡æ’ã€‚\n\n### 5.10. é™ä½ CSS é€‰æ‹©å™¨çš„å¤æ‚æ€§\n\nå¤æ‚çš„é€‰æ‹©å™¨ä¼šå¢åŠ æ ·å¼è®¡ç®—æ—¶é—´ã€‚\n\n### 5.11. ç¦»çº¿æ“ä½œï¼šä½¿ç”¨ `display: none` è¿›è¡Œå¤§é‡ DOM æ“ä½œ\n\n```javascript\nconst el = document.getElementById('myElement');\nel.style.display = 'none';\n// è¿›è¡Œå¤§é‡ DOM æ“ä½œ\nel.style.display = 'block';\n```\n> å½“å…ƒç´ è®¾ä¸º `display: none` æ—¶ï¼Œå¯¹å…¶è¿›è¡Œçš„æ“ä½œä¸ä¼šå¼•å‘é‡æ’å’Œé‡ç»˜ã€‚\n\n### 5.12. ä½¿ç”¨è™šæ‹Ÿ DOM\n\n- åƒ Reactã€Vue è¿™æ ·çš„æ¡†æ¶ä½¿ç”¨è™šæ‹Ÿ DOM æ¥ä¼˜åŒ–å®é™… DOM æ“ä½œã€‚\n\n### 5.13. ä½¿ç”¨é˜²æŠ–(Debounce)å’ŒèŠ‚æµ(Throttle)\n\nå¯¹äºé¢‘ç¹è§¦å‘çš„äº‹ä»¶ï¼ˆå¦‚æ»šåŠ¨ã€è°ƒæ•´çª—å£å¤§å°ç­‰ï¼‰ï¼Œä½¿ç”¨è¿™äº›æŠ€æœ¯æ¥é™åˆ¶å¤„ç†å‡½æ•°çš„æ‰§è¡Œé¢‘ç‡ã€‚\n\n### 5.14. åˆ†ç¦»è¯»å†™æ“ä½œ\n\n```javascript\n// ä¸æ¨è\nconst h1 = element1.clientHeight;\nelement1.style.height = `${h1 * 2}px`;\nconst h2 = element2.clientHeight;\nelement2.style.height = `${h2 * 2}px`;\n\n// æ¨è\nconst h1 = element1.clientHeight;\nconst h2 = element2.clientHeight;\nelement1.style.height = `${h1 * 2}px`;\nelement2.style.height = `${h2 * 2}px`;\n```\n\nå…ˆè¿›è¡Œæ‰€æœ‰çš„è¯»æ“ä½œï¼Œç„¶åå†è¿›è¡Œå†™æ“ä½œï¼Œé¿å…è¯»å†™äº¤å‰å¯¼è‡´å¤šæ¬¡é‡æ’ã€‚\n\n> åœ¨å®é™…åº”ç”¨ä¸­ï¼Œåº”æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©åˆé€‚çš„ä¼˜åŒ–æ–¹æ³•ã€‚\n\n","a07ad991d2cc537a918ea45022151d43":"\n# CSS  å¼€å¯ GPU ç¡¬ä»¶åŠ é€Ÿçš„åŸç†\n\n\n`#å‰ç«¯/CSS`  `#2024/07/30` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åŸç† \n\n### 1.1. æ ¸å¿ƒåŸç†\n\nGPU ç¡¬ä»¶åŠ é€Ÿçš„`æ ¸å¿ƒåŸç†`åœ¨äºå°†ç‰¹å®šçš„æ¸²æŸ“ä»»åŠ¡ä» CPU ç§»äº¤ç»™ GPU è¿›è¡Œå¤„ç†ã€‚GPU æ“…é•¿å¤„ç†å¤§è§„æ¨¡çš„å¹¶è¡Œä»»åŠ¡ï¼Œè¿™å¯¹äºåŠ¨ç”»ã€å˜æ¢å’Œå…¶ä»–å¤æ‚çš„è§†è§‰æ•ˆæœæ¥è¯´å°¤å…¶æœ‰æ•ˆã€‚é€šè¿‡ GPU ç¡¬ä»¶åŠ é€Ÿï¼Œå¯ä»¥å¤§å¹…æå‡è¿™äº›ä»»åŠ¡çš„æ‰§è¡Œæ•ˆç‡å’Œæ¸²æŸ“é€Ÿåº¦ã€‚\n\n### 1.2. ä»æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹åˆ†æåŸç†\n\nCSS å¼€å¯ GPU ç¡¬ä»¶åŠ é€Ÿçš„åŸç†ä¸»è¦æ¶‰åŠæµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹å’Œ`å›¾å±‚ï¼ˆLayer`ï¼‰çš„æ¦‚å¿µã€‚è®©æˆ‘ä»¬æ·±å…¥äº†è§£è¿™ä¸ªè¿‡ç¨‹ï¼š\n\næµè§ˆå™¨æ¸²æŸ“é¡µé¢é€šå¸¸éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š\n\n- è§£æ HTML æ„å»º DOM æ ‘\n- è§£æ CSS æ„å»º CSSOM æ ‘\n- å°† DOM å’Œ CSSOM åˆå¹¶æˆæ¸²æŸ“æ ‘\n- å¸ƒå±€ï¼ˆLayoutï¼‰ï¼šè®¡ç®—å…ƒç´ çš„ä½ç½®å’Œå¤§å°\n- ç»˜åˆ¶ï¼ˆPaintï¼‰ï¼šå°†å…ƒç´ ç»˜åˆ¶åˆ°å±å¹•ä¸Š\n- åˆæˆï¼ˆCompositeï¼‰ï¼šå°†`ä¸åŒçš„å›¾å±‚`åˆå¹¶åˆ°ä¸€èµ·\n\n#### 1.2.1. å›¾å±‚ï¼ˆLayerï¼‰ \n\n**æµè§ˆå™¨ä¼šå°†é¡µé¢åˆ†æˆå¤šä¸ªå›¾å±‚**ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ™®é€šå…ƒç´ éƒ½åœ¨åŒä¸€ä¸ªå›¾å±‚ä¸­ã€‚ä½†æŸäº›`ç‰¹å®šçš„ CSS å±æ€§`å¯ä»¥è®©å…ƒç´ æå‡ä¸ºå•ç‹¬çš„å›¾å±‚ã€‚\n\nå½“ä¸€ä¸ªå…ƒç´ è¢«æå‡ä¸ºå•ç‹¬çš„`å›¾å±‚`æ—¶ï¼Œå®ƒçš„æ¸²æŸ“ä¼šè¢«å§”æ‰˜ç»™ GPU å¤„ç†ã€‚GPU æ“…é•¿å¤„ç†çº¹ç†å’Œå›¾å½¢ï¼Œèƒ½å¤Ÿé«˜æ•ˆåœ°å¤„ç†å›¾å±‚çš„å˜æ¢ã€ç¼©æ”¾ã€æ—‹è½¬ç­‰æ“ä½œã€‚è¿™æ ·å°±èƒ½å¤Ÿ `**GPU ç¡¬ä»¶åŠ é€Ÿ**`\n\n#### 1.2.2. ä»¥ `transform: translate3d(0,0,0)` ä¸ºä¾‹\n\n- è¿™ä¸ªçœ‹ä¼¼æ— ç”¨çš„ 3D å˜æ¢ä¼šå¼ºåˆ¶æµè§ˆå™¨ä¸ºè¯¥å…ƒç´ åˆ›å»ºä¸€ä¸ª`æ–°çš„å›¾å±‚`ã€‚\n- æ–°å›¾å±‚ä¼šè¢«é€åˆ° GPU å¤„ç†ã€‚\n- GPU å¯ä»¥é«˜æ•ˆåœ°å¤„ç†è¿™ä¸ªå›¾å±‚çš„åç»­å˜æ¢ï¼Œ`æ— éœ€é‡æ–°å¸ƒå±€æˆ–é‡ç»˜`æ•´ä¸ªé¡µé¢ã€‚\n\n#### 1.2.3. å†…éƒ¨å·¥ä½œæœºåˆ¶\n\n- å½“å…ƒç´ è¢«æå‡ä¸ºç‹¬ç«‹å›¾å±‚åï¼Œå®ƒä¼šè¢«å­˜å‚¨ä¸ºçº¹ç†åœ¨ GPU ä¸­ã€‚\n- GPU å¯ä»¥ç›´æ¥æ“ä½œè¿™ä¸ªçº¹ç†ï¼Œè¿›è¡Œä½ç½®ç§»åŠ¨ã€ç¼©æ”¾ã€æ—‹è½¬ç­‰æ“ä½œï¼Œæ— éœ€ CPU å‚ä¸\n- è¿™å¤§å¤§å‡å°‘äº† CPU çš„å·¥ä½œè´Ÿæ‹…ï¼Œæé«˜äº†åŠ¨ç”»çš„æµç•…åº¦ã€‚\n\n## 2. CSS è§¦å‘ GPU åŠ é€Ÿçš„å±æ€§\n\nä»¥ä¸‹æ˜¯ä¸€äº›å¯ä»¥è§¦å‘ GPU ç¡¬ä»¶åŠ é€Ÿçš„ CSS å±æ€§ï¼Œå‘Šè¯‰æµè§ˆå™¨åœ¨æœ€å¼€å§‹å°±æŠŠ`**è¯¥å…ƒç´ æ”¾åˆ°æ–°å›¾å±‚æ¸²æŸ“**`ã€‚\n\n### 2.1. transform\n\nåº”ç”¨äºŒç»´æˆ–ä¸‰ç»´å˜æ¢ï¼Œå¦‚ `transform: translate3d(0, 0, 0);`\n\n> æ³¨æ„ï¼šå…¶å®`äºŒç»´`ä¹Ÿè¡Œ\n\n### 2.2. opacityï¼šæ”¹å˜å…ƒç´ çš„é€æ˜åº¦\n\n### 2.3. filterï¼šåº”ç”¨å›¾åƒå¤„ç†æ•ˆæœ\n\n`filter` å±æ€§ç”¨äºåº”ç”¨å„ç§å›¾å½¢å¤„ç†æ•ˆæœï¼ˆä¾‹å¦‚æ¨¡ç³Šã€äº®åº¦ã€å¯¹æ¯”åº¦ç­‰ï¼‰ï¼Œè¿™äº›æ•ˆæœé€šå¸¸ä¹Ÿä¼šä½¿ç”¨ GPU åŠ é€Ÿæ¥æé«˜æ€§èƒ½ã€‚\n```css\n.element {\n  filter: blur(5px);\n}\n```\n\n### 2.4. will-change\n\næ˜¾å¼å£°æ˜æŸäº›å±æ€§å°†å‘ç”Ÿå˜åŒ–ï¼Œä»è€Œè®©æµè§ˆå™¨æå‰ä¼˜åŒ–è¿™äº›å…ƒç´ \n\n### 2.5. CSS åŠ¨ç”»å’Œè¿‡æ¸¡ï¼ˆ`transition` æˆ– `animation`ï¼‰\n\n`will-change` å±æ€§è®©å¼€å‘è€…å¯ä»¥æ˜¾å¼åœ°å‘Šè¯‰æµè§ˆå™¨å“ªäº›å±æ€§å°†ä¼šå˜åŒ–ï¼Œä»è€Œè®©æµè§ˆå™¨æå‰ä¼˜åŒ–è¿™äº›å…ƒç´ ã€‚\n```css\n.element {\n  will-change: transform, opacity;\n}\n```\n\n## 3. ä¼˜åŠ¿\n\n- å‡å°‘é‡ç»˜ï¼šå›¾å±‚çš„å˜åŒ–ä¸ä¼šå½±å“å…¶ä»–å›¾å±‚ï¼Œå‡å°‘äº†ä¸å¿…è¦çš„`é‡ç»˜`ã€‚\n- æé«˜æ€§èƒ½ï¼šGPU å¹¶è¡Œå¤„ç†èƒ½åŠ›å¼ºï¼Œé€‚åˆå¤„ç†å›¾å½¢ä»»åŠ¡ã€‚\n- æµç•…åŠ¨ç”»ï¼šå‡å°‘äº† CPU çš„å‚ä¸ï¼Œä½¿åŠ¨ç”»æ›´åŠ æµç•…ã€‚\n\n## 4. æ³¨æ„äº‹é¡¹\n\n- è¿‡åº¦ä½¿ç”¨å¯èƒ½å¯¼è‡´å†…å­˜å ç”¨å¢åŠ ã€‚\n- ä¸æ˜¯æ‰€æœ‰è®¾å¤‡éƒ½æœ‰å¼ºå¤§çš„ GPUï¼Œè¿‡åº¦ä¾èµ–å¯èƒ½åœ¨ä½ç«¯è®¾å¤‡ä¸Šé€‚å¾—å…¶åã€‚\n- ä¸åŒæµè§ˆå™¨çš„å®ç°å¯èƒ½æœ‰å·®å¼‚ã€‚\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/61f5c262db0860b921ca61e0479d99d2.png)\n\n","ef4b5242179f5441a436b1108592775b":"\n# è¯´ä¸€è¯´ç›’æ¨¡å‹\n\n\n`#å‰ç«¯/CSS`  `#2024/07/30` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ ‡å‡†ç›’æ¨¡å‹ å’Œ IE ç›’æ¨¡å‹ \n\n- æ ‡å‡†ç›’æ¨¡å‹ï¼š`width = content`\n- IE ç›’æ¨¡å‹ï¼š`width = border + padding + content`\n\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/3193f0e277d0e85d83a2451b624006f3.png)\n\n## 2. box-sizing å¯ä»¥è®¾ç½®è£…ä¸¤ç§æ¨¡å‹\n\nå¦‚ä¸‹å›¾ï¼š\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/3514efe3929b598730be168652a3e627.png)\n\n","5871e496a89d585c8bc1bf642c5356c4":"\n# è¯´è¯´ BFC ä¸å¤–è¾¹è·é‡å \n\n\n`#å‰ç«¯/CSS`  `#2024/07/30` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å®šä¹‰ \n\n`BFCï¼ˆBlock Formatting Contextï¼Œå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰`æ˜¯ CSS ä¸­ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå®ƒæ˜¯é¡µé¢å¸ƒå±€ä¸­çš„ä¸€ä¸ªç‹¬ç«‹æ¸²æŸ“åŒºåŸŸï¼Œå†³å®šäº†å…ƒç´ å¦‚ä½•å®šä½åŠä¸å…¶ä»–å…ƒç´ ä¹‹é—´çš„å…³ç³»ã€‚\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/54562a17d3dbd31f0f89a9e125bfe2c3.png)\n\n## 2. BFC çš„ç‰¹æ€§\n\n1. **å†…éƒ¨çš„ç›’å­ä¼šåœ¨å‚ç›´æ–¹å‘ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ”¾ç½®ã€‚**\n2. **ç›’å­å‚ç›´æ–¹å‘ä¸Šçš„è·ç¦»ç”± **`margin`** å†³å®šã€‚ç›¸é‚»å—çº§å…ƒç´ çš„å¤–è¾¹è·ä¼šå‘ç”ŸæŠ˜å ã€‚**\n3. **BFC çš„åŒºåŸŸä¸ä¼šä¸æµ®åŠ¨å…ƒç´ çš„ç›’å­é‡å ã€‚**\n4. **BFC æ˜¯ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨å†…éƒ¨çš„å…ƒç´ ä¸ä¼šå½±å“å¤–éƒ¨çš„å…ƒç´ ã€‚**\n\n## 3. åˆ›å»º BFC çš„æ–¹å¼\n\nä»¥ä¸‹ CSS å±æ€§ä¼šè§¦å‘åˆ›å»º BFCï¼š\n\n1. è®¾ç½® `float` ä¸ä¸º `none` çš„å…ƒç´ ï¼›\n2. è®¾ç½® `position` ä¸º `absolute` æˆ– `fixed` çš„å…ƒç´ ï¼›\n3. è®¾ç½® `display` ä¸º `inline-block`, `table-cell`, `table-caption`, `flex`, æˆ– `grid` çš„å…ƒç´ ï¼›\n4. è®¾ç½® `overflow` ä¸ä¸º `visible` çš„å…ƒç´ ã€‚\n\nç¤ºä¾‹ï¼š\n```css\n.bfc {\n  overflow: hidden;  /* è§¦å‘ BFC */\n}\n```\n\n## 4. å¤–è¾¹è·é‡å ï¼ˆMargin Collapsingï¼‰\n\nå¤–è¾¹è·é‡å æ˜¯æŒ‡`**å½“ä¸¤ä¸ªä¸Šä¸‹ç›¸é‚»çš„å—çº§å…ƒç´ çš„å‚ç›´å¤–è¾¹è·ç›¸é‡æ—¶ï¼Œå®ƒä»¬ä¼šåˆå¹¶ä¸ºä¸€ä¸ªå¤–è¾¹è·**`ï¼Œå…¶é«˜åº¦ä¸ºæœ€å¤§çš„é‚£ä¸ªå¤–è¾¹è·å€¼ï¼Œè€Œä¸æ˜¯ä¸¤è€…ä¹‹å’Œã€‚\n\n### 4.1. å…„å¼Ÿå…ƒç´ çš„è¾¹ç•Œé‡å  &  çˆ¶å­å…ƒç´ çš„è¾¹ç•Œé‡å \n\n![A792D720-3B01-4A74-B5BD-7DC9028EFE9D.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/e34a6a6d31a5c93b4d342ec4a57f596b.png)\n\n### 4.2. å¤–è¾¹è·é‡å çš„è§„åˆ™\n\n- åŒæ­£ï¼Œè¾ƒå¤§å€¼ \n- åŒè´Ÿï¼Œç»å¯¹å€¼æœ€å¤§å€¼\n- ä¸€æ­£ä¸€è´Ÿï¼šç›¸åŠ \n\n## 5. ä½¿ç”¨ BFC é˜²æ­¢å¤–è¾¹è·é‡å \n\n- è§£å†³æ–¹æ¡ˆï¼šå³å»è§¦å‘`BFC`å³å¯ï¼Œå¦‚`BFC` ä¸ä¼šä¸ `float` å…ƒç´ å‘ç”Ÿé‡å ã€‚\n\n![240B4A71-C78E-47B2-A432-BF18ACC1134C.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/c4f97a2d27026987eb2967c1a6d48207.png)\n\n![E87FF6E8-F4A6-458C-B71C-9D230BAC5BB1.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/ff8df8522e39084cec5d64669309ac23.png)\n\n","13953b18e39b59ad8d378598dc937831":"\n# CSS å¸ƒå±€éƒ½æœ‰äº†å“ªäº›ï¼Ÿ\n\n\n`#å‰ç«¯/CSS`  `#2024/07/30` \n\n- CSS Grid Layoutï¼šäºŒç»´å¸ƒå±€ç³»ç»Ÿ\n- CSS Flexboxï¼šç»´å¸ƒå±€æ¨¡å‹\n- å¤šåˆ—å¸ƒå±€ï¼šcolumn-countã€column-gap ç­‰\n- æµ®åŠ¨å¸ƒå±€ï¼šä¸å±•å¼€äº†ï¼Œä¸å»ºè®®ä½¿ç”¨äº†\n","39dbfba5dbe0556aa43e3b07fb29977b":"\n# CSS å®šä½æˆ–å¸ƒå±€ç›¸å…³çš„å‚è€ƒåæ ‡ç³»éƒ½æœ‰å“ªäº›ï¼Ÿ\n\n\n`#å‰ç«¯/CSS`  `#2024/07/30` \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/c792c133990e2818a06482c7117b141c.png)\n\n> è¿™é‡Œå¯ä»¥å¯¹åº” JS è·å–æŸä¸ªå…ƒç´ çš„å„ç§ä½ç½®ä¿¡æ¯ï¼šæ¯”å¦‚ clientX pageX ã€width ã€offesetLeft ç­‰ç­‰ç­‰ç­‰\n> \n\nCSS ä¸­çš„â€œå‚è€ƒåæ ‡ç³»â€æˆ–â€œå‚è€ƒç³»â€æ˜¯æŒ‡ä¸ºå®šä½ã€å¯¹é½æˆ–å˜æ¢ CSS å…ƒç´ è€Œä½¿ç”¨çš„åæ ‡ç³»ã€‚ç†è§£ä¸åŒçš„å‚è€ƒç³»å¯¹äºæŒæ¡ CSS å¸ƒå±€å’Œå®šä½éå¸¸é‡è¦ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„å‚è€ƒåæ ‡ç³»åŠå…¶ä½¿ç”¨æ–¹æ³•ï¼š\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. **æ–‡æ¡£åæ ‡ç³»** \n\næ–‡æ¡£åæ ‡ç³»æ˜¯æ•´ä¸ª HTML æ–‡æ¡£çš„åæ ‡ç³»ï¼Œæ‰€æœ‰ä½ç½®å’Œå°ºå¯¸éƒ½æ˜¯ç›¸å¯¹äºæ–‡æ¡£çš„èµ·ç‚¹ï¼ˆé€šå¸¸æ˜¯å·¦ä¸Šè§’ï¼‰æ¥æŒ‡å®šçš„ã€‚\n\n- **å…ƒç´ çš„å®½åº¦å’Œé«˜åº¦**ï¼šä»¥æ•´ä¸ªæ–‡æ¡£ä¸ºå‚è€ƒç³»ã€‚\n- **æ»šåŠ¨ä½ç½®**ï¼šä»¥æ•´ä¸ªæ–‡æ¡£ä¸ºåŸºå‡†çš„æ»šåŠ¨ã€‚\n\n> - `å—çº§å…ƒç´ `ç‹¬å ä¸€è¡Œ,`å†…è”å…ƒç´ `åœ¨ä¸€è¡Œå†…æ’åˆ—\n\n## 2. **è§†å£åæ ‡ç³»**\n\nè§†å£åæ ‡ç³»æ˜¯æŒ‡`æµè§ˆå™¨çª—å£æˆ–è§†å£`çš„åæ ‡ç³»ã€‚\n\n- **ç™¾åˆ†æ¯”å®½åº¦å’Œé«˜åº¦**ï¼šå¦‚`width: 100vw`è¡¨ç¤ºå®½åº¦ä¸º 100% è§†å£å®½åº¦ã€‚\n- **å›ºå®šå®šä½**ï¼š`position: fixed;` ä¼šä»¥è§†å£ä¸ºå‚è€ƒç³»æ¥å®šä½å…ƒç´ ã€‚\n\n## 3. **åŒ…å«å—ï¼ˆContaining Blockï¼‰**\n\n`åŒ…å«å—`æ˜¯ä¸€ä¸ªå…ƒç´ åœ¨æ­£å¸¸æµæˆ–å…¶ä»–æŒ‡å®šå¸ƒå±€ä¸Šä¸‹æ–‡ä¸­çš„ç›´æ¥çˆ¶å—æˆ–ç¥–å…ˆå—ï¼Œç”¨äºç¡®å®šå…¶åæ ‡å’Œå¤§å°ã€‚\n\n- **ç›¸å¯¹å®šä½**ï¼š`position: relative;` ä¼šä»¥åŒ…å«å—ä¸ºå‚è€ƒæ¥å®šä½å…ƒç´ ã€‚\n- **ç»å¯¹å®šä½**ï¼š`position: absolute;` ä¼šä»¥æœ€è¿‘çš„éé™æ€å®šä½çš„ç¥–å…ˆå…ƒç´ ï¼ˆåŒ…å«å—ï¼‰ä¸ºå‚è€ƒã€‚\n\n## 4. **è¾¹æ¡†æ¡†ï¼ˆBorder Boxï¼‰**\n\nè¾¹æ¡†æ¡†æ˜¯åŒ…å«å…ƒç´ çš„å†…å®¹ã€å†…è¾¹è·å’Œè¾¹æ¡†çš„åŒºåŸŸã€‚\n\n- **ç›’æ¨¡å‹**ï¼šç”¨äºè®¡ç®—å…ƒç´ çš„æ€»è®¡å®½åº¦å’Œé«˜åº¦ã€‚\n\n## 5. **å†…è¾¹è·æ¡†ï¼ˆPadding Boxï¼‰**\n\nå†…è¾¹è·æ¡†æ˜¯åŒ…å«å…ƒç´ å†…å®¹å’Œå†…è¾¹è·çš„åŒºåŸŸã€‚\n\n- **èƒŒæ™¯å’Œè¾¹æ¡†**ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œ`**èƒŒæ™¯å’Œè¾¹æ¡†**`ä¼šæ‰©å±•åˆ°å†…è¾¹è·æ¡†ä¹‹å¤–ã€‚\n\n## 6. **å†…å®¹æ¡†ï¼ˆContent Boxï¼‰**\n\nå†…å®¹æ¡†æ˜¯ä»…åŒ…å«å…ƒç´ å†…å®¹çš„åŒºåŸŸï¼Œä¸åŒ…æ‹¬å†…è¾¹è·ã€è¾¹æ¡†å’Œå¤–è¾¹è·ã€‚\n\n- **å†…å®¹å°ºå¯¸**ï¼šé€šè¿‡`box-sizing`å±æ€§å¯ä»¥è®¾ç½®ä¸ºä»¥`**å†…å®¹æ¡†æˆ–è¾¹æ¡†æ¡†**`æ¥è®¡ç®—å…ƒç´ å°ºå¯¸ï¼ˆé»˜è®¤æ˜¯`content-box`ï¼‰ã€‚\n\n## 7. **å˜æ¢å‚è€ƒç³»ï¼ˆTransform Referenceï¼‰**\n\nå½“ä½ å¯¹å…ƒç´ åº”ç”¨ CSS å˜æ¢ï¼ˆæ¯”å¦‚`transform`å±æ€§ï¼‰æ—¶ï¼Œä½¿ç”¨çš„æ˜¯å˜æ¢å‚è€ƒç³»ã€‚\n\n- **å˜æ¢ä¸­å¿ƒç‚¹**ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œ**å˜æ¢ä¸­å¿ƒç‚¹ä¸ºå…ƒç´ çš„ä¸­å¿ƒ**ã€‚\n- åˆ›å»ºä¸€ä¸ªæ–°çš„åæ ‡ç³»,ä¸å½±å“å…¶ä»–å…ƒç´ \n- å˜æ¢åçš„å…ƒç´ æˆä¸ºå…¶å­å…ƒç´ çš„`åŒ…å«å—`\n\n```css\n.transform {  \n  transform: rotate(45deg) translateX(100px);  \n}\n```\n\n## 8. è¡¨æ ¼å¸ƒå±€\n\n- display: `table å’Œ table-cell`\n- æ¨¡æ‹Ÿè¡¨æ ¼çš„å¸ƒå±€ç»“æ„\n\n## 9. Flex å¸ƒå±€ã€ Grid å¸ƒå±€ã€CSS å¤šåˆ—å¸ƒå±€ï¼ˆMulti-Column Layoutï¼‰\n\nè¿™äº›å¸ƒå±€æ¨¡å‹åˆ›å»ºäº†è‡ªå·±çš„åæ ‡ç³»:\n\n- Flexbox åæ ‡ç³»: ä¸»è½´(main axis)å’Œäº¤å‰è½´(cross axis)\n- Grid åæ ‡ç³»:  è¡Œå’Œåˆ—å®šä¹‰çš„`ç½‘æ ¼åæ ‡ç³»`\n- Multi-Column Layoutï¼šç”¨äºå°†æ–‡æœ¬åˆ†ä¸ºå¤šåˆ—\n\n## 10. ç¤ºä¾‹\n\nä¸‹é¢ç¤ºä¾‹å±•ç¤ºäº†å‡ ç§ä¸åŒçš„åæ ‡ç³»çš„ä½¿ç”¨ï¼š\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>CSS Reference Coordinate Systems</title>\n\n    <style>\n        .relative-container {\n            position: relative;\n            width: 300px;\n            height: 300px;\n            background-color: lightgray;\n            margin: 50px; /* æ–‡æ¡£åæ ‡ç³» */\n        }\n\n        .relative-child {\n            position: absolute;\n            top: 10px; /* åŒ…å«å—å‚è€ƒç³» */\n            left: 10px;\n            width: 100px;\n            height: 100px;\n            background-color: lightcoral;\n        }\n\n        .fixed-element {\n            position: fixed;\n            top: 20px; /* è§†å£åæ ‡ç³» */\n            right: 20px;\n            width: 100px;\n            height: 100px;\n            background-color: lightblue;\n        }\n\n        .transform-element {\n            width: 100px;\n            height: 100px;\n            background-color: lightgreen;\n            margin: 50px;\n            transform: rotate(45deg); /* å˜æ¢å‚è€ƒç³» */\n        }\n    </style>\n\n</head>\n\n<body>\n    <div class=\"fixed-element\">Fixed</div>\n\n    <div class=\"relative-container\">\n        <div class=\"relative-child\">Absolute</div>\n\n    </div>\n\n    <div class=\"transform-element\">Transform</div>\n\n</body>\n\n</html>\n\n```\n\n## 11. å…³é”®ç‚¹\n\n1. **æ–‡æ¡£åæ ‡ç³»**ï¼šç”¨äºæ•´ä½“æ–‡æ¡£çš„å¸ƒå±€å’Œæ»šåŠ¨ã€‚\n2. **è§†å£åæ ‡ç³»**ï¼šç”¨äºå›ºå®šå®šä½å’Œè§†å£ç›¸å¯¹å°ºå¯¸ã€‚\n3. **åŒ…å«å—**ï¼šç”¨äº`ç›¸å¯¹å’Œç»å¯¹`å®šä½ã€‚\n4. **è¾¹æ¡†æ¡†ã€å†…è¾¹è·æ¡†å’Œå†…å®¹æ¡†**ï¼šç”¨äº`ç›’æ¨¡å‹`è®¡ç®—ã€‚\n5. **å˜æ¢å‚è€ƒç³»**ï¼šç”¨äºåº”ç”¨ CSS å˜æ¢ã€‚\n\nè¿™äº›å‚è€ƒåæ ‡ç³»åœ¨å®é™…å¸ƒå±€å’Œå®šä½ä¸­å¸¸å¸¸ç»“åˆä½¿ç”¨ï¼Œå› æ­¤ç†è§£å®ƒä»¬å¦‚ä½•ååŒå·¥ä½œæ˜¯æŒæ¡ CSS å¸ƒå±€çš„å…³é”®ã€‚\n\n","72d356bdeba65fb9a25106c0b3a71059":"\n# JavaScript ç¯‡\n\n\nJavaScript ç›¸å…³çš„çŸ¥è¯†ç‚¹\n\n","6a9aea5640115c80a85e76de83f27983":"\n# JavaScript çš„ç»„æˆ\n\n\n# Javascript çš„ç»„æˆ\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/a9104fded4d48d2d613eecce29dc3a26.png)\n\n- ECMAScriptï¼šç”± ECMA-262 å®šä¹‰å¹¶æä¾›æ ¸å¿ƒåŠŸèƒ½\n- æ–‡æ¡£å¯¹è±¡æ¨¡å‹(DOM)ï¼šæä¾›ä¸`ç½‘é¡µå†…å®¹`äº¤äº’çš„æ–¹æ³•å’Œæ¥å£\n- æµè§ˆå™¨å¯¹è±¡æ¨¡å‹(BOM)ï¼šæä¾›ä¸`æµè§ˆå™¨`äº¤äº’çš„æ–¹æ³•å’Œæ¥å£\n\n> - ECMA-262ï¼šECMA-262 æ˜¯ç”±æ¬§æ´²è®¡ç®—æœºåˆ¶é€ å•†åä¼šï¼ˆECMAï¼‰å‘å¸ƒçš„ä¸€é¡¹æ ‡å‡†ï¼Œæ­£å¼åç§°ä¸ºâ€œECMAScript è¯­è¨€è§„èŒƒâ€ \n>    - è‡³äº 262 æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„å«ä¹‰ï¼Œå°±æ˜¯ä¸€ä¸ªä»£å·\n> - TC39 å§”å‘˜ä¼šï¼šECMA-262 ç”± TC39ï¼ˆECMAScript æŠ€æœ¯å§”å‘˜ä¼šï¼‰è´Ÿè´£åˆ¶å®šå’Œç»´æŠ¤ï¼Œè¯¥å§”å‘˜ä¼šç”±æ¥è‡ªå„å¤§ç§‘æŠ€å…¬å¸çš„ä¸“å®¶ç»„æˆï¼Œå®šæœŸè®¨è®ºå’Œæ¨è¿› ECMAScript æ ‡å‡†çš„æ¼”è¿›ã€‚\n> - æœ€æ–°çš„è§„èŒƒè‰æ¡ˆè¯·è§ [https://tc39.es/ecma262/](https://tc39.es/ecma262/)\n\n\n# Javascript ä¸ºä½•æœ‰å¦‚æ­¤â€œåœ°ä½â€\n\n- ä¸ HTML/CSS å®Œå…¨é›†æˆ\n- æ‰€æœ‰çš„ä¸»æµæµè§ˆå™¨æ”¯æŒ\n\n# æµè§ˆå™¨ä¸Šçš„ Javascript èƒ½åšä»€ä¹ˆ å’Œ ä¸èƒ½åšä»€ä¹ˆï¼Ÿ\n\n- JavaScript çš„èƒ½åŠ›å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºå®ƒ`**è¿è¡Œçš„ç¯å¢ƒ**`ã€‚\n   - ä¾‹å¦‚ï¼Œ[Node.js](https://wikipedia.org/wiki/Node.js) æ”¯æŒå…è®¸ JavaScript è¯»å–/å†™å…¥ä»»æ„æ–‡ä»¶ï¼Œæ‰§è¡Œç½‘ç»œè¯·æ±‚ç­‰çš„å‡½æ•°\n   - æµè§ˆå™¨ä¸Šçš„ Javascript çš„èƒ½åŠ›éƒ½æ˜¯æµè§ˆå™¨æä¾›çš„\n   - app  webview ä¸Š JavaScript çš„èƒ½åŠ›éƒ½æ˜¯`åµŒå…¥çš„ APP` æä¾›çš„\n      - æ¯”å¦‚ `webview` ç»„ä»¶æä¾›äº†å¾ˆå¤šé…ç½®é¡¹ï¼Œç”¨äºæ˜¯å¦å¼€å¯ä¸€äº›èƒ½åŠ›\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## èƒ½åšä»€ä¹ˆ \n\n- DOMï¼šæ“ä½œ HTML åŠ CSS\n- BOMï¼šæ“ä½œæµè§ˆå™¨æä¾›çš„å„ç±» API\n- è¯·æ±‚èµ„æºï¼šè®¿é—®èµ„æºã€ä¸Šä¼ ã€ä¸‹è½½èµ„æº\n- æœ¬åœ°å­˜å‚¨ï¼šcookieã€localstarage ã€sessionstrage ç­‰\n\n## ä¸èƒ½åšä»€ä¹ˆ\n\n- æµè§ˆå™¨ç«¯è¯»ã€å†™æ–‡ä»¶ï¼Œä½†å¯ä»¥é€šè¿‡ `input type=file` é€‰æ‹©æ–‡ä»¶\n- ç›´æ¥è®¿é—®åŸç”Ÿç³»ç»Ÿçš„ä¸€äº›èƒ½åŠ›ï¼Œæ¯”å¦‚è°ƒå–æ‘„åƒå¤´ã€éº¦å…‹é£ç­‰\n- ä¸èƒ½åœ¨éšæ„åœ¨ä¸åŒçª—å£é—´é€šä¿¡ï¼Œéœ€è¦ä¸€äº›é™åˆ¶ï¼Œæ¯”å¦‚åŒåŸŸ\n\n\n# JS çš„è¶…çº§ä»¬\n\n- [CoffeeScript](https://coffeescript.org/) ï¼Œç°åœ¨åŸºæœ¬ä¸ç”¨äº†\n- [TypeScript](https://www.typescriptlang.org/) ï¼Œæ·»åŠ äº†ä¸¥æ ¼çš„æ•°æ®ç±»å‹æ ¡éªŒï¼Œåé¢ä¼šè¯¦ç»†è¯´å®ƒã€‚å¾®è½¯å‡ºå“ã€‚\n- [Flow](https://flow.org/) ä¹Ÿæ·»åŠ äº†æ•°æ®ç±»å‹ï¼Œä½†æ˜¯ä»¥ä¸€ç§ä¸åŒçš„æ–¹å¼ã€‚ç”± Facebook å¼€å‘ã€‚\n- [Dart](https://www.dartlang.org/)  `Flutter` ä½¿æœ‰è¯­è¨€ï¼Œå®ƒä¹Ÿå¯ä»¥è¢«ç¼–è¯‘æˆ JavaScriptï¼Œç”± Google å¼€å‘ã€‚\n- [Brython](https://brython.info/)  Python åˆ° JavaScript çš„è½¬è¯‘å™¨\n- [Kotlin](https://kotlinlang.org/docs/reference/js-overview.html) æ˜¯ä¸€ä¸ªç°ä»£ã€ç®€æ´ä¸”å®‰å…¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œç¼–å†™å‡ºçš„åº”ç”¨ç¨‹åºå¯ä»¥åœ¨æµè§ˆå™¨å’Œ Node ç¯å¢ƒä¸­è¿è¡Œã€‚\n","4f8751645e365006b272e964dc55611f":"\n# JavaScript ç®€ä»‹\n\n\nJavaScript æ˜¯ä¸€ç§é«˜å±‚æ¬¡çš„ã€è§£é‡Šå‹çš„ç¼–ç¨‹è¯­è¨€ã€‚å®ƒåœ¨å½“ä»Šçš„ä¿¡æ¯æŠ€æœ¯é¢†åŸŸä¸­æ‰®æ¼”ç€é‡è¦è§’è‰²ï¼Œå°¤å…¶åœ¨Webå¼€å‘æ–¹é¢ã€‚ä»¥ä¸‹æ˜¯å…³äºJavaScriptçš„å…¨é¢ä»‹ç»ï¼š\n\n# JavaScript çš„åŸºæœ¬æ¦‚å¿µ\n\n\n## ç›®å½•\n<!-- toc -->\n ## # 1. å®šä¹‰ \n\n- **JavaScript** æ˜¯ä¸€ç§ç¬¦åˆ ECMAScript è§„èŒƒçš„é«˜çº§ç¼–ç¨‹è¯­è¨€ã€‚\n- æœ€åˆè®¾è®¡çš„ç›®çš„æ˜¯å¢å¼º HTML ç½‘é¡µçš„åŠ¨æ€è¡Œä¸ºå’Œäº¤äº’èƒ½åŠ›ã€‚\n\n### 2. å†å²\n\n- **è¯ç”Ÿ**ï¼šç”± Brendan Eich åœ¨ 1995 å¹´å¼€å‘ï¼Œå¹¶é¦–æ¬¡åº”ç”¨äº Netscape Navigator æµè§ˆå™¨ã€‚\n- **æ ‡å‡†åŒ–**ï¼šECMAScript æ˜¯ç”± ECMA International ç®¡ç†çš„ JavaScript æ ‡å‡†åŒ–è§„èŒƒï¼ŒECMAScript 31999 å¹´ï¼‰å’Œ ECMAScript 5ï¼ˆ2009 å¹´ï¼‰æ˜¯é‡è¦çš„é‡Œç¨‹ç¢‘ã€‚\n- **ç°ä»£åŒ–**ï¼šECMAScript 6ï¼ˆ2015 å¹´ï¼‰ï¼Œåˆç§° ES6 æˆ– ES2015ï¼Œå¼•å…¥äº†è®¸å¤šæ–°ç‰¹æ€§ç±»ï¼Œæ¨¡å—ï¼Œç®­å¤´å‡½æ•°ç­‰ã€‚\n\n# JavaScript çš„æ ¸å¿ƒç‰¹æ€§\n\n### 1. åŠ¨æ€ç±»å‹\n\n- JavaScript æ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œå˜é‡å¯ä»¥åœ¨è¿è¡Œæ—¶æ”¹å˜ç±»å‹ã€‚\n\n### 2. è§£é‡Šæ‰§è¡Œ\n\n- JavaScriptè§£é‡Šå‹è¯­è¨€ï¼Œä¸éœ€è¦ç¼–è¯‘ï¼Œç›´æ¥åœ¨æµè§ˆå™¨æˆ– JS å¼•æ“ä¸­è§£é‡Šæ‰§è¡Œã€‚\n\n### 3. å¼±ç±»å‹\n\n- æ”¯æŒéšå¼ç±»å‹è½¬æ¢ï¼Œå¯ä»¥çµæ´»ä½¿ç”¨ä¸åŒçš„æ•°æ®ç±»å‹ã€‚\n\n### 4. å•çº¿ç¨‹\n\n- JavaScript æœ¬ä¸Šæ˜¯å•çº¿ç¨‹çš„ï¼Œä½†é€šè¿‡äº‹ä»¶å¾ªç¯æœºåˆ¶å¯ä»¥å¤„ç†å¼‚æ­¥ä»»åŠ¡ã€‚\n\n### 5. è·¨å¹³å°\n\n- JavaScript å¯ä»¥åœ¨å¤šç§ç¯å¢ƒä¸‹è¿è¡Œï¼Œæœ€å¸¸è§çš„æ˜¯æµè§ˆå™¨ç¯å¢ƒå’Œ Node.js ç¯å¢ƒã€‚\n\n# JavaScript çš„åº”ç”¨åœºæ™¯\n\n## Webå‰ç«¯å¼€å‘\n\n- **DOMæ“ä½œ**ï¼šæ§åˆ¶å’Œæ“ä½œç½‘é¡µå†…å®¹ã€‚\n- **äº‹ä»¶å¤„ç†**ï¼šå“åº”ç”¨æˆ·æ“ä½œï¼ˆå¦‚ç‚¹å‡»ã€è¾“å…¥ï¼‰ã€‚\n- **AJAX**ï¼šå®ç°å¼‚æ­¥æ•°æ®è¯·æ±‚å’Œæ›´æ–°ã€‚\n- **åŠ¨æ€æ ·å¼**ï¼šé€šè¿‡æ“ä½œ CSS æ‰“é€ åŠ¨æ€æ•ˆæœã€‚\n\n## æœåŠ¡ç«¯å¼€å‘\n\n- **Node.js**ï¼šåŸºäº Chrome V8 å¼•æ“æ„å»ºï¼Œæ”¯æŒæœåŠ¡å™¨ç«¯å¼€å‘ã€‚\n- **Expressã€Koa**ï¼šå¸¸ç”¨çš„æœåŠ¡å™¨æ¡†ã€‚\n- **æ•°æ®åº“æ“ä½œ**ï¼šå¦‚ä¸ MongoDBã€MySQL çš„äº¤äº’ã€‚\n\n## å…¨æ ˆå¼€å‘\n\n- **MEAN/MERN æ ˆ**ï¼šMongoDB, Express, Angular/React, Node.jsã€‚\n- åŸºäº React å’Œ Vue.js çš„æœåŠ¡ç«¯æ¸²æŸ“æ¡†æ¶: Next.js å’Œ Nuxt.jsã€‚\n\n## ç§»åŠ¨åº”ç”¨å¼€å‘\n\n- **React Native**ï¼šä½¿ç”¨ JavaScript æ„å»ºåŸç”Ÿç§»åŠ¨åº”ç”¨ã€‚\n- **Ionicã€PhoneGap/Cordova**ï¼šå»ºè·¨å¹³å°ç§»åŠ¨åº”ç”¨ã€‚\n\n## æ¡Œé¢åº”ç”¨å¼€å‘\n\n- **Electronã€NW.js**ï¼šä½¿ç”¨ Web æŠ€æœ¯æ„å»ºè·¨å¹³å°æ¡Œé¢åº”ç”¨ã€‚\n\n## æ¸¸æˆå¼€å‘\n\n- **Three.js**ï¼šåˆ›å»º3Då›¾å½¢åŠ¨ç”»ã€‚\n- **Phaser**ï¼š2Dæ¸¸æˆæ¡†æ¶ã€‚\n\n## æ•°æ®å¯è§†åŒ–\n\n- **D3.jsã€Chart.jsã€Highcharts**ï¼šç”¨äºé«˜çº§æ•°æ®å¯è§†åŒ–å’Œå›¾è¡¨åˆ›å»ºã€‚\n\n## æœºå™¨å­¦ä¹ äººå·¥æ™ºèƒ½\n\n- **TensorFlow.jsã€Brain.js**ï¼šè®©æœºå™¨å­¦ä¹ å’Œç¥ç»ç½‘ç»œåœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚\n\n## ç‰©è”ç½‘ (IoT)\n\n- **Johnny-Fiveã€Espruino**ï¼šç”¨äºæ™ºèƒ½è®¾å¤‡å’ŒåµŒå¼å¼€å‘ã€‚\n\n## è‡ªåŠ¨åŒ–å’Œè„šæœ¬\n\n- **Gulpã€Grunt**ï¼šä»»åŠ¡è‡ªåŠ¨åŒ–å·¥å…·ã€‚\n- **ShellJS**ï¼šæ‰§è¡Œç³»ç»Ÿå‘½ä»¤å’Œè„šæœ¬ç¼–å†™ã€‚\n\n# JavaScript çš„é‡è¦æ¦‚å¿µå’Œæœºåˆ¶\n\n### 1. åŸå‹å’ŒåŸå‹é“¾\n\n- JavaScript ä½¿ç”¨åŸå‹ç»§æ‰¿ï¼Œå³å¯¹è±¡ä¹‹é—´é€šè¿‡åŸå‹é“¾å½¢æˆç»§æ‰¿å…³ç³»ã€‚\n\n### 2. é—­åŒ…\n\n- é—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°èƒ½è®°ä½å¹¶è®¿é—®å®ƒçš„è¯æ³•åŸŸï¼Œå³ä½¿åœ¨å‡½æ•°åœ¨å…¶è¯æ³•ä½œç”¨åŸŸå¤–æ‰§è¡Œã€‚\n\n### 3. äº‹ä»¶å¾ªç¯\n\n- äº‹ä»¶å¾ªç¯æ˜¯ JavaScript å¤„ç†å¼‚æ­¥æ“ä½œçš„æœºåˆ¶ï¼Œæ£€æµ‹è°ƒç”¨æ ˆæ˜¯å¦ä¸ºç©ºï¼Œå¹¶ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–ä»»åŠ¡æ‰§è¡Œã€‚\n\n### 4ã€å¼‚æ­¥ç¼–ç¨‹\n\n- **å›è°ƒå‡½æ•°**ï¼šåŸºæœ¬çš„å¼‚æ­¥å¤„ç†æ–¹å¼ï¼Œä½†ä¼šå¯¼è‡´â€œå›è°ƒåœ°ç‹±â€ã€‚\n- **Promise**ï¼šé“¾å¼è§£å†³å¼‚æ­¥è°ƒç”¨ï¼Œé¿å…å›è°ƒåœ°ç‹±ã€‚\n- **async/await**ï¼šäº Promise çš„è¯­æ³•ç³–ï¼Œè®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ã€‚\n\n### 5. this å…³é”®å­—\n\n- `this` åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­æœ‰ä¸åŒçš„æŒ‡å‘ã€‚\n- æ¯”å¦‚ï¼Œå‡½æ•°è°ƒç”¨ä¸­çš„ `this` æŒ‡å‘å±€å¯¹è±¡ï¼Œç”¨ `new` è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼Œ`this` æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚\n\n### 6. æ¨¡å—åŒ–\n\n- ES6 æä¾›äº†åŸç”Ÿçš„æ¨¡å—åŒ–æ”¯æŒ (`import` å’Œ `export`)ã€‚\n- ä¹‹å‰è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ CommonJS (Node.js ä½¿ç”¨çš„æ¨¡å—ç³»ç»Ÿ) å’Œ AMD (å¼‚æ­¥æ¨¡å—å®šä¹‰)ã€‚\n\n# JavaScript çš„ç”Ÿæ€ç³»ç»Ÿ\n\n- **åº“å’Œæ¡†æ¶**ï¼šå¦‚ Reactã€Vue.jsã€Angularã€jQuery ç­‰ã€‚\n- **åŒ…ç®¡ç†**ï¼šnpm (Node Package Manager)ã€Yarn ç­‰ã€‚\n- **æ„å»ºå·¥å…·**ï¼šWebpackã€Parcelã€Gulpã€Grunt ç­‰ã€‚\n- **æµ‹è¯•å·¥å…·**ï¼šJestã€Mochaã€Chaiã€Cypress ç­‰ã€‚\n- **ç‰ˆæœ¬æ§åˆ¶ï¼šBabelï¼Œæ”¯æŒå°†æ–°çš„ JavaScript è¯­æ³•è½¬æ¢ä¸ºæ—§çš„è¯­æ³•ï¼Œä»¥ä¾¿åœ¨ä¸æ”¯æŒçš„ç¯å¢ƒä¸­è¿è¡Œã€‚\n\n# JavaScript çš„å±€é™æ€§\n\n- å•çº¿ç¨‹æ¨¡å‹åœ¨è¿›è¡Œ CPU å¯†é›†å‹ä»»åŠ¡æ—¶æ•ˆç‡è¾ƒä½ã€‚\n éšå¼ç±»å‹è½¬æ¢å¯èƒ½å¯¼è‡´ä¸€äº›é¢„æœŸä¹‹å¤–çš„è¡Œä¸ºã€‚\n- åŠ¨æ€ç±»å‹ç³»ç»Ÿå¯èƒ½åœ¨å¤§å‹é¡¹ç›®ä¸­å¼•å…¥ç±»å‹ç›¸å…³çš„ç¼ºé™·ã€‚\n\n\nJavaScript æ˜¯ä¸€é—¨åŠŸèƒ½å¼ºå¤§ä¸”çµæ´»çš„è¯­è¨€ï¼Œå¹¿æ³›åº”ç”¨äºå„ç§å¼€å‘åœºæ™¯ä¸­ç†è§£å…¶æ ¸å¿ƒåŸç†å’Œç”Ÿæ€ç³»ç»Ÿæœ‰åŠ©äºå¼€å‘è€…æ›´å¥½åœ°åˆ©ç”¨å®ƒçš„æ½œåŠ›ã€‚\n","76139872dd085912939c1d6d17bb7920":"\n# å®ç°æ‰¹é‡è¯·æ±‚å¹¶æ§åˆ¶æœ€å¤§å¹¶å‘æ•°\n\n`#å‰ç«¯` `#2023/04/26` \n\nä¸ºäº†å®ç°æ‰¹é‡è¯·æ±‚å¹¶æ§åˆ¶æœ€å¤§å¹¶å‘æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨\n\n`Promise.all()`å’Œ`Promise.race()`ç»“åˆå¾ªç¯æ¥å®ç°\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å…ˆä½¿ç”¨ setimeout æ¨¡æ‹Ÿè¯·æ±‚ \n\n```javascript\n/**\n * æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚\n * @param {*} id æ ‡è¯†ç¬¦\n * @param {*} delay å»¶è¿Ÿæ—¶é—´\n */\nconst mockRequest = (id, delay) => {\n    return new Promise(resolve => {\n        setTimeout(() => {\n            console.log(`å®Œæˆè¯·æ±‚ ${id}`);\n            resolve(`å“åº” ${id}`);\n        }, delay);\n    });\n};\n```\n\n## 2. ä¸»è¦é€»è¾‘\n\n**å…³é”®ç‚¹ï¼š**\n\n- ä½¿ç”¨ `set` æ¥å­˜å‚¨ä»»åŠ¡é›†åˆ\n- ä½¿ç”¨ `next` æ¥æ ‡è¯†å¤„ç†æ¯ä¸€ä¸ªè¯·æ±‚é€»è¾‘ï¼Œè¿™é‡Œæ˜¯**ä¸»è¦é€»è¾‘**\n   - æ¯æ¬¡æ‰§è¡Œå®Œæˆéœ€è¦ä»é›†åˆä¸­ `delete` æ‰\n      - å¤±è´¥ä¹Ÿéœ€è¦ä»é›†åˆä¸­  `delete` æ‰\n   - åˆ¤æ–­æ˜¯å¦è¾¾åˆ°æœ€å¤§å¹¶å‘æ•°\n      - è¾¾åˆ°ï¼Œç­‰å¾…ä»»æ„è¯·æ±‚å®Œæˆ\n         - ä½¿ç”¨ `Promise.race` æ¥ç«èµ›ï¼Œå®Œæˆå `then` ç»§ç»­æ‰§è¡Œ `next`\n      - æ²¡è¾¾åˆ°\n         - ç›´æ¥å¯åŠ¨ä¸‹ä¸ªä»»åŠ¡ `next()`\n\n```javascript\n/**\n * æ‰¹é‡æ‰§è¡Œè¯·æ±‚ï¼Œæ§åˆ¶æœ€å¤§å¹¶å‘æ•°\n * @param {Array} tasks ä»»åŠ¡æ•°ç»„\n * @param {number} maxConcurrency æœ€å¤§å¹¶å‘æ•°\n */\nasync function runBatchRequests(tasks, maxConcurrency) {\n    let i = 0; // å½“å‰å¤„ç†çš„ä»»åŠ¡ç´¢å¼•\n    const total = tasks.length;\n    const executing = new Set(); // æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡é›†åˆ\n\n    // ä¸‹ä¸€ä¸ªä»»åŠ¡ , é€’å½’è°ƒç”¨\n    const next = () => {\n        // æ‰€æœ‰ä»»åŠ¡å·²ç»å¯åŠ¨\n        if (i === total) {\n            return Promise.resolve();\n        }\n        const task = tasks[i++](); // è·å–ä»»åŠ¡å¹¶æ‰§è¡Œ\n        executing.add(task);\n\n        const clean = () => executing.delete(task);\n        task.then(clean).catch(clean);\n\n        let p = Promise.resolve();\n\n        if (executing.size >= maxConcurrency) {\n            // è¾¾åˆ°æœ€å¤§å¹¶å‘æ•°ï¼Œç­‰å¾…ä»»æ„ä»»åŠ¡å®Œæˆ\n            p = Promise.race(executing).then(() => next());\n        } else {\n            // æœªè¾¾åˆ°æœ€å¤§å¹¶å‘æ•°ï¼Œç›´æ¥å¯åŠ¨ä¸‹ä¸€ä¸ªä»»åŠ¡\n            p = next();\n        }\n        return p;\n    };\n\n    await next().then(() => Promise.all(executing)); // ç¡®ä¿æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆäº†\n}\n```\n\n## 3. æµ‹è¯•\n```javascript\n// ç¤ºä¾‹ä½¿ç”¨\nconst awaitList = [1000, 500, 1000, 300, 800, 700, 900];\nconst tasks = awaitList.map((item, index) => () => mockRequest(index + 1, item));\n\nrunBatchRequests(tasks, 10).then(() => console.log('æ‰€æœ‰è¯·æ±‚å®Œæˆ'));\n\n```\n\n## 4. æ€»ç»“\n\n- `runBatchRequests` å‡½æ•°æ¥å—ä¸€ä¸ªä»»åŠ¡æ•°ç»„å’Œæœ€å¤§å¹¶å‘æ•°ä½œä¸ºå‚æ•°ã€‚æ¯ä¸ªä»»åŠ¡éƒ½æ˜¯ä¸€ä¸ªè¿”å›Promiseçš„å‡½æ•°ã€‚\n   - å‡½æ•°å†…éƒ¨ï¼Œé€šè¿‡**é€’å½’è°ƒç”¨**  `next å‡½æ•°` æ¥ä¸æ–­åœ°å¯åŠ¨æ–°çš„ä»»åŠ¡ï¼Œç›´åˆ°æ‰€æœ‰ä»»åŠ¡éƒ½è¢«å¤„ç†ã€‚\n   - é€šè¿‡ç»´æŠ¤ä¸€ä¸ª`executingé›†åˆ`æ¥è·Ÿè¸ªå½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶ä½¿ç”¨`Promise.race()`åœ¨è¾¾åˆ°æœ€å¤§å¹¶å‘é™åˆ¶æ—¶ç­‰å¾…è‡³å°‘ä¸€ä¸ªä»»åŠ¡å®Œæˆã€‚è¿™æ ·å¯ä»¥åœ¨ä»»ä½•ä»»åŠ¡å®Œæˆåç«‹å³å¯åŠ¨æ–°çš„ä»»åŠ¡ï¼Œä»è€Œç»´æŒæœ€å¤§å¹¶å‘æ•°ï¼Œç›´åˆ°æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆã€‚\n\n\n\n","e8732da445c45e7f97bf20940b1bb53b":"\n# JavaScript çš„æ ¸å¿ƒè¯­æ³•\n\n\n# ç°ä»£æ¨¡å¼ï¼Œ\"use strict\"\n\n\n## ç›®å½•\n<!-- toc -->\n ## åŸå›  \nES5 è§„èŒƒå¢åŠ äº†æ–°çš„è¯­è¨€ç‰¹æ€§å¹¶ä¸”ä¿®æ”¹äº†ä¸€äº›å·²ç»å­˜åœ¨çš„ç‰¹æ€§ã€‚ä¸ºäº†ä¿è¯æ—§çš„åŠŸèƒ½èƒ½å¤Ÿä½¿ç”¨ï¼Œå¤§éƒ¨åˆ†çš„ä¿®æ”¹æ˜¯é»˜è®¤ä¸ç”Ÿæ•ˆçš„ã€‚ä½ éœ€è¦ä¸€ä¸ªç‰¹æ®Šçš„æŒ‡ä»¤ â€”â€” `\"use strict\"` æ¥æ˜ç¡®åœ°æ¿€æ´»è¿™äº›ç‰¹æ€§ã€‚\n\n\n## è¯­æ³•\n```javascript\n\"use strict\"; // å¿…é¡»æ”¾åˆ°å¼€å¤´\n\n// ä»£ç ä»¥ç°ä»£æ¨¡å¼å·¥ä½œ\n...\n```\n\n- ç°ä»£ JavaScript æ”¯æŒ â€œclassâ€ å’Œ â€œmoduleâ€ï¼Œå¦‚æœä½¿ç”¨å®ƒä»¬ï¼Œæ— éœ€æ·»åŠ   `\"use strict\"`\n\n\n# 6 ç§åŸå§‹ç±»å‹ + 1 ç§å¤æ‚æ•°æ®ç±»å‹\t\t\t\n\n- åŸå§‹ç±»å‹ï¼šUndefinedã€Nullã€Booleanã€Numberã€String å’Œ Symbol â€¨\n- å¤æ‚ç±»å‹ï¼šObject\n\n\n# å˜é‡ã€ä½œç”¨åŸŸä¸å†…å­˜\n\n## å¤åˆ¶\n\n### åŸå§‹ç±»å‹\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/e3768b3af18a23c8cdeccb85e280c323.png)\n\n### å¼•ç”¨ç±»å‹\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/bb555ee9faabf851d1d0d40946117804.png)\n\n\n## letã€varã€const ç”³æ˜é€‰æ‹©å»ºè®®\n\n1. ä¸ä½¿ç”¨ var\n2. const ä¼˜å…ˆï¼Œlet æ¬¡ä¹‹\n> `var`å°±ä¸è§£é‡Šäº†ï¼Œ`const` å£°æ˜å¯ä»¥è®©æµè§ˆå™¨è¿è¡Œæ—¶å¼ºåˆ¶ä¿æŒå˜é‡ä¸å˜ï¼Œä¹Ÿå¯ä»¥è®©é™æ€ä»£ç åˆ†æå·¥å…·æå‰å‘ç°ä¸åˆæ³•çš„èµ‹å€¼æ“ä½œ\n\n\n\n","f162d2d3d4b15dc1b068617c3c05c4a3":"\n# JavaScript å¼‚æ­¥ç¼–ç¨‹\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## è¯·ç®€è¿° JavaScript å¼‚æ­¥ç¼–ç¨‹ \n\nJavaScript å¼‚æ­¥ç¼–ç¨‹æ˜¯ä¸€ç§å¤„ç†éé˜»å¡æ“ä½œçš„ç¼–ç¨‹æ–¹å¼ï¼Œå…è®¸ç¨‹åºåœ¨ç­‰å¾…æŸäº›æ“ä½œå®Œæˆæ—¶ç»§ç»­æ‰§è¡Œå…¶ä»–ä»£ç ã€‚è¿™å¯¹äºå¤„ç†å¦‚**ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶æ“ä½œ**ç­‰å¯èƒ½è€—æ—¶çš„ä»»åŠ¡ç‰¹åˆ«é‡è¦ã€‚ä»¥ä¸‹æ˜¯ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„ä¸»è¦æ–¹æ³•å’Œæ¦‚å¿µï¼š\n\n1. å›è°ƒå‡½æ•° (Callbacks)\n\t- æœ€åŸºæœ¬çš„å¼‚æ­¥ç¼–ç¨‹æ–¹å¼\n\t- å°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨æ“ä½œå®Œæˆæ—¶è°ƒç”¨\n\t- å®¹æ˜“å¯¼è‡´\"å›è°ƒåœ°ç‹±\"ï¼Œä½¿ä»£ç éš¾ä»¥ç»´æŠ¤\n2. Promise\n\t- ES6 å¼•å…¥çš„å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ\n\t- ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆæˆ–å¤±è´¥\n\t- ä½¿ç”¨ .then() å’Œ .catch() æ–¹æ³•å¤„ç†ç»“æœå’Œé”™è¯¯\n\t- å¯ä»¥é“¾å¼è°ƒç”¨ï¼Œé¿å…å›è°ƒåœ°ç‹±\n3. Async/Await\n\t- åŸºäº Promise çš„è¯­æ³•ç³–ï¼Œä½¿å¼‚æ­¥ä»£ç æ›´æ˜“è¯»\n\t- async å…³é”®å­—ç”¨äºå£°æ˜å¼‚æ­¥å‡½æ•°\n\t- await å…³é”®å­—ç”¨äºç­‰å¾… Promise è§£å†³\n\t- ä½¿å¼‚æ­¥ä»£ç **çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç **\n4. äº‹ä»¶å¾ªç¯ (Event Loop)\n\t- JavaScript è¿è¡Œæ—¶çš„æ ¸å¿ƒæœºåˆ¶\n\t- ç®¡ç†å¼‚æ­¥æ“ä½œçš„æ‰§è¡Œé¡ºåº\n\t- åŒ…æ‹¬å®ä»»åŠ¡é˜Ÿåˆ—å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—\n5. å®šæ—¶å™¨å‡½æ•°\n\t- setTimeout() å’Œ setInterval() ç”¨äºå»¶è¿Ÿæ‰§è¡Œæˆ–å®šæœŸæ‰§è¡Œä»£ç \n6. äº‹ä»¶ç›‘å¬å™¨\n\t- ç”¨äºå“åº”ç”¨æˆ·äº¤äº’æˆ–å…¶ä»–äº‹ä»¶\n7. Fetch API\n\t- ç”¨äºè¿›è¡Œç½‘ç»œè¯·æ±‚çš„ç°ä»£æ¥å£\n\t- è¿”å› Promiseï¼Œä¾¿äºå¤„ç†å“åº”\n8. Web Workers\n\t- å…è®¸åœ¨åå°çº¿ç¨‹ä¸­è¿è¡Œè„šæœ¬ï¼Œä¸å½±å“ä¸»çº¿ç¨‹æ€§èƒ½\n\n## Promise ä¸“é¢˜\n\n\n### è¦ç‚¹æ€»ç»“\n\n1. `Promise`çš„çŠ¶æ€ä¸€ç»æ”¹å˜å°±ä¸èƒ½å†æ”¹å˜\n2. `.then`å’Œ`.catch`éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„`Promise`\n3. `catch`ä¸ç®¡è¢«è¿æ¥åˆ°å“ªé‡Œï¼Œéƒ½èƒ½æ•è·ä¸Šå±‚çš„é”™è¯¯ã€‚\n4. åœ¨`Promise`ä¸­ï¼Œè¿”å›ä»»æ„ä¸€ä¸ªéÂ `promise`Â çš„å€¼éƒ½ä¼šè¢«åŒ…è£¹æˆÂ `promise`Â å¯¹è±¡ï¼Œä¾‹å¦‚`return 2`ä¼šè¢«åŒ…è£…ä¸º`return Promise.resolve(2)`ã€‚\n5. `Promise`Â çš„Â `.then`Â æˆ–è€…Â `.catch`Â å¯ä»¥è¢«è°ƒç”¨å¤šæ¬¡, å½“å¦‚æœ`Promise`å†…éƒ¨çš„çŠ¶æ€ä¸€ç»æ”¹å˜ï¼Œå¹¶ä¸”æœ‰äº†ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆåç»­æ¯æ¬¡è°ƒç”¨`.then`æˆ–è€…`.catch`çš„æ—¶å€™éƒ½ä¼šç›´æ¥æ‹¿åˆ°è¯¥å€¼\n6. `.then`Â æˆ–è€…Â `.catch`Â ä¸­Â `return`Â ä¸€ä¸ªÂ `error`Â å¯¹è±¡å¹¶ä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼Œæ‰€ä»¥ä¸ä¼šè¢«åç»­çš„Â `.catch`Â æ•è· \n7. `.then`Â æˆ–Â `.catch`Â è¿”å›çš„å€¼ä¸èƒ½æ˜¯ promise æœ¬èº«ï¼Œå¦åˆ™ä¼šé€ æˆæ­»å¾ªç¯\n8. `.then`Â æˆ–è€…Â `.catch`Â çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ å…¥éå‡½æ•°åˆ™ä¼šå‘ç”Ÿ**å€¼é€ä¼ **ã€‚\n9. `.then`æ–¹æ³•æ˜¯èƒ½æ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„ï¼Œç¬¬ä¸€ä¸ªæ˜¯å¤„ç†æˆåŠŸçš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯å¤„ç†å¤±è´¥çš„å‡½æ•°ï¼Œå†æŸäº›æ—¶å€™ä½ å¯ä»¥è®¤ä¸º`catch`æ˜¯`.then`ç¬¬äºŒä¸ªå‚æ•°çš„ç®€ä¾¿å†™æ³•ã€‚\n10. `.finally`æ–¹æ³•ä¹Ÿæ˜¯è¿”å›ä¸€ä¸ª`Promise`ï¼Œä»–åœ¨`Promise`ç»“æŸçš„æ—¶å€™ï¼Œæ— è®ºç»“æœä¸º`resolved`è¿˜æ˜¯`rejected`ï¼Œéƒ½ä¼šæ‰§è¡Œé‡Œé¢çš„å›è°ƒå‡½æ•°ã€‚\n\n\n### æ‰“å° new Promise çš„æ•ˆæœ\n\n```javascript\nPromise { <fulfilled>: value }   // æ³¨æ„ï¼šä¸æ˜¯ Promise { <resolved> } \nPromise { <pending> }\nPromise { <rejected>: reason }  \n```\n\n### æ²¡æœ‰ resolveä¸ä¼šæ‰§è¡Œ then\n\n```javascript hl:14\nconst promise = new Promise((resolve, reject) => {\n  console.log(1);\n  console.log(2);\n});\npromise.then(() => {\n  console.log(3);\n});\nconsole.log(4);\n\n//**************************************\n// output:\n// 1 2 4\n//\n// 3 ä¸ä¼šè¢«è¾“å‡ºï¼Œå› ä¸º Promiseé‡Œé¢æ²¡æœ‰ resolve\n//**************************************\n\n```\n\n### æ³¨æ„ resolve åä¼šæ‰§è¡Œ then\n\n```javascript hl:16\nconst promise1 = new Promise((resolve, reject) => {\n  console.log(\"promise1\");\n  resolve(\"resolve1\");\n});\nconst promise2 = promise1.then((res) => {\n  console.log(res);\n});\nconsole.log(\"1\", promise1);\nconsole.log(\"2\", promise2);\n\n//**************************************\n// output: ä¸‹é¢åºå·è¡¨ç¤ºæ¯æ¬¡æ‰“å°çš„é¡ºåº\n// â‘  promise1\n// â‘¡ 1 Promise { <resolved> }  // å› ä¸º promise1 æ˜¯ resolved çŠ¶æ€\n// â‘¢ 2 Promise { <pending> }   // å› ä¸º promise2 æ˜¯ pending çŠ¶æ€\n// â‘£ resolve1  // å› ä¸º promise1 æ˜¯ resolved çŠ¶æ€ï¼Œæ‰€ä»¥ promise2 çš„ then æ–¹æ³•ä¼šæ‰§è¡Œ\n//**************************************\n\n```\n\n###  `setTimeout` é‡Œé¢åµŒå…¥ `Promise` çš„åœºæ™¯\n\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240911082045.png)\n\næ‰“å°æ•ˆæœï¼š\n\n``` hl:4\n'start'\n'timer1'\n'timer2'\n'timer3'  // è¿™ä¸ªè¿˜æ˜¯æœ€åæ‰§è¡Œï¼ŒsetTimeout é‡Œé¢åµŒå…¥ setTimeout\n```\n\n```\n'start'\n'timer1'\n'promise'\n'timer2'\n```\n\n### `catch`ä¸ç®¡è¢«è¿æ¥åˆ°å“ªé‡Œï¼Œéƒ½èƒ½æ•è·ä¸Šå±‚çš„é”™è¯¯ï¼Œå¹¶ä¸”`catch()`ä¹Ÿä¼šè¿”å›ä¸€ä¸ª`Promise`\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n  reject(\"error\");\n  resolve(\"success2\");\n});\npromise\n  .then((res) => {\n    console.log(\"then1: \", res);\n  })\n  .then((res) => {\n    console.log(\"then2: \", res);\n  })\n  .catch((err) => {\n    console.log(\"catch: \", err);\n  })\n  .then((res) => {\n    console.log(\"then3: \", res);\n  });\n\n// Output:\n// catch:  error\n// then3:  undefined\n```\n\n###  `return 2` ä¼šè¢«åŒ…è£…æˆ`resolve(2)`\n\n```javascript\nPromise.resolve(1)\n  .then((res) => {\n    console.log(res);\n    return 2; // ç­‰ä»·äº resolve(2)\n  })\n  .catch((err) => {\n    return 3;\n  })\n  .then((res) => {\n    console.log(res);\n  });\n\n// output: 1 2\n\n```\n\n### resolve åæ¯ä¸ª then å’Œ catch èƒ½è¢«è°ƒç”¨å¤šæ¬¡\n\n`Promise`Â çš„Â `.then`Â æˆ–è€…Â `.catch`Â å¯ä»¥è¢«è°ƒç”¨å¤šæ¬¡ï¼Œä½†è¿™é‡ŒÂ `Promise`Â æ„é€ å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ã€‚æˆ–è€…è¯´Â `promise`Â å†…éƒ¨çŠ¶æ€ä¸€ç»æ”¹å˜ï¼Œå¹¶ä¸”æœ‰äº†ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆåç»­æ¯æ¬¡è°ƒç”¨Â `.then`Â æˆ–è€…Â `.catch`Â éƒ½ä¼šç›´æ¥æ‹¿åˆ°è¯¥å€¼ã€‚\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    console.log(\"timer\");\n    resolve(\"success\");\n  }, 1000);\n});\nconst start = Date.now();\npromise.then((res) => {\n  console.log(res, Date.now() - start);\n});\npromise.then((res) => {\n  console.log(res, Date.now() - start);\n});\n\n// Output:\n// timer\n// success 1003\n// success 1003 or success 1004\n\n```\n\n### `return new Error('error!!!')` ä¸èµ° `reject`\n\n```javascript\nPromise.resolve()\n  .then(() => {\n    return new Error(\"error!!!\");\n  })\n  .then((res) => {\n    console.log(\"then: \", res);\n  })\n  .catch((err) => {\n    console.log(\"catch: \", err);\n  });\n\n// Output:\n// then:  Error: error!!!\n```\n\n### èµ° catch çš„åœºæ™¯\n\n```javascript hl:3,5\nPromise.resolve()\n  .then(() => {\n    return Promise.reject(new Error(\"error!!!\"));\n    // or\n    throw new Error(\"error!!!\");\n  })\n  .then((res) => {\n    console.log(\"then: \", res);\n  })\n  .catch((err) => {\n    console.log(\"catch: \", err);\n  });\n\n// Output:\n// catch:  Error: error!!!\n```\n\n### æ­»å¾ªç¯\n\n```javascript\nconst promise = Promise.resolve().then(() => {\n  return promise;\n})\npromise.catch(console.err)\n```\n\n### å€¼ç©¿é€ \n\n```javascript\n// å‘ç”Ÿäº† å€¼ç©¿é€\nPromise.resolve(1)\n  .then(2)\n  .then(Promise.resolve(3))\n  // console.log æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè¢«ä½œä¸ºå‚æ•°ä¼ é€’ç»™ .then()\n  // å½“ Promise è§£ææ—¶ï¼Œ.then() ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¹¶å°†å‰ä¸€ä¸ª Promise çš„å€¼ä½œä¸ºå‚æ•°ä¼ å…¥\n  // æ‰€ä»¥è¿™é‡Œçš„ console.log ä¼šæ‰“å°å‡º 1\n  .then(console.log);\n```\n\n- `.then`Â æˆ–è€…Â `.catch`Â çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ å…¥éå‡½æ•°åˆ™ä¼šå‘ç”Ÿ**å€¼é€ä¼ **\n- `.then()` ä¼š**æ‰§è¡Œ**ä¼ å…¥çš„å‡½æ•°å‚æ•°ï¼Œå¹¶æŠŠå‚æ•°ä¼ **é€’ç»™å®ƒ**\n\nä¸‹é¢æ‰“å°å‡º 4\n\n```javascript hl:5\nPromise.resolve(1)  \n    .then(2)  \n    .then(Promise.resolve(3))  \n    .then(() => {  \n        return Promise.resolve(4);  \n    }).then(console.log)  \n  \n// æ‰“å°ç»“æœ 4\n```\n\n\n### éœ€è¦æ³¨æ„æ˜¯å¦æœ‰ reject å‡½æ•°\n\n> `.then()`æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°`reject`ä¹Ÿæ˜¯å¯ä»¥æ•è·é”™è¯¯\n\n```javascript hl:7,8\nPromise.reject(\"err!!!\")\n  .then(\n    (res) => {\n      // è¿™é‡Œä¸ä¼šæ‰§è¡Œ\n      console.log(\"success\", res);\n    },\n    // è¿™é‡Œä¼šæ‰§è¡Œ: error err!!!\n    (err) => {\n      console.log(\"error\", err);\n    },\n  )\n  .catch((err) => {\n    console.log(\"catch\", err);\n  });\n\n```\n\n### finally è™½ç„¶ä¸€å®šä¼šæ‰§è¡Œï¼Œä½†è¿˜æ˜¯æœ‰é¡ºåºçš„ \n\n```javascript hl:13,20\nPromise.resolve(\"2\")\n  .finally(() => {\n    console.log(\"f2\");\n    return \"3\";\n  })\n  .then((res) => {\n    console.log(res);\n  });\n// æ‰“å°ç»“æœ f2 2\n\nPromise.resolve(\"1\")\n  .finally(() => {\n    console.log(\"f1\");\n    throw new Error(\"f1 error\");\n  })\n  .then((res) => {\n    console.log(res);\n  })\n  .catch((err) => {\n    console.log(err);\n  });\n\n// æ‰“å°ç»“æœï¼š\n// f1\n// VM327:10 Error: f1 error\n//     at <anonymous>:4:11\n//     at <anonymous>\n\n```\n\n### `finally()`ä¹Ÿæ˜¯å¾®ä»»åŠ¡é˜Ÿåˆ—\n\n```javascript\nfunction promise1() {\n  return new Promise((resolve) => {\n    console.log(\"p1\");\n    resolve(\"1\");\n  });\n}\nfunction promise2() {\n  return new Promise((resolve, reject) => {\n    console.log(\"p2\");\n    reject(\"err\");\n  });\n}\npromise1()\n  .then((res) => console.log(res))\n  .catch((err) => console.log(err))\n  // ç¬¬ä¸€è½®ï¼Œä¸ä¼šå°† finally é‡Œçš„å‡½æ•°æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—\n  .finally(() => console.log(\"f1\"));\n\npromise2()\n  .then((res) => console.log(res))\n  .catch((err) => console.log(err))\n  .finally(() => console.log(\"f2\"));\n\n// p1 p2 1 err f1 f2\n\n```\n\n\n### `.catch()`å‡½æ•°èƒ½å¤Ÿæ•è·åˆ°`.all()`é‡Œ**æœ€å…ˆ**çš„é‚£ä¸ªå¼‚å¸¸ï¼Œå¹¶ä¸”**åªæ‰§è¡Œä¸€æ¬¡**\n\n> [!danger]\n> - å¹¶ä¸æ˜¯åªè¦æœ‰å¼‚å¸¸å°±å®Œäº‹äº†ï¼Œæ¯ä¸ªéƒ½ä¼šæ‰§è¡Œ\n> - catch åªæ•è·æœ€æ–°çš„é‚£ä¸ªå¼‚å¸¸ï¼Œå¹¶ä¸”æ‰§è¡Œä¸€æ¬¡\n> - `Promise.all().then()`ç»“æœä¸­æ•°ç»„çš„é¡ºåºå’Œ`Promise.all()`æ¥æ”¶åˆ°çš„æ•°ç»„é¡ºåºä¸€è‡´\n\n\n```javascript\nfunction runAsync(x) {\n  return new Promise((resolve) =>\n    setTimeout(() => resolve(x, console.log(x)), 1000),\n  );\n}\nfunction runReject(x) {\n  return new Promise((resolve, reject) =>\n    setTimeout(() => reject(`Error: ${x}`, console.log(x)), 1000 * x),\n  );\n}\nPromise.all([runAsync(1), runReject(4), runAsync(3), runReject(2)])\n  .then((res) => console.log(res))\n  .catch((err) => console.log(err));\n\n1; // 1såè¾“å‡º\n3; // 1såè¾“å‡º\n2; // 2såè¾“å‡º\nError: 2; // 2såè¾“å‡º\n4; // 4såè¾“å‡º\n\n```\n\n\nå†çœ‹ä¸‹é¢ä¸€æ®µä»£ç ï¼Œç¬¬ 4s å³ä½¿ reject äº†ï¼Œä¹Ÿä¸å†è§¦å‘17 è¡Œäº†\n\n```javascript hl:14,17\nfunction runAsync(x) {\n  return new Promise((resolve) =>\n    setTimeout(() => resolve(x, console.log(x)), 1000),\n  );\n}\nfunction runReject(x) {\n  return new Promise((resolve, reject) =>\n    setTimeout(() => reject(`Error: ${x}`, console.log(x)), 1000 * x),\n  );\n}\nPromise.all([runAsync(1), runReject(4), runAsync(3), runReject(2)])\n  .then(\n    (res) => console.log(res),\n    // æ·»åŠ  reject å›è°ƒå‡½æ•°å‚æ•°\n    (reason) => console.log(\"reject\", reason),\n  )\n  // è¿™æ®µä»£ç ä¸æ‰§è¡Œ\n  .catch((err) => console.log(\"catch:\", err));\n\n1; // 1s åè¾“å‡º 1\n3; // 1s åè¾“å‡º 3\n2; // 2s åè¾“å‡º 2\nreject Error: 2; // 2s åè¾“å‡º Error: 2\n4; // 4s åè¾“å‡º 4\n\n```\n\n\nç°åœ¨ï¼Œè®©æˆ‘ä»¬è§£é‡Šä¸ºä»€ä¹ˆä¸Šé¢ `catch` æ²¡æœ‰è¢«è§¦å‘ï¼š\n\n1. `Promise.all` çš„ç‰¹æ€§ï¼š\n    - å½“å…¶ä¸­ä»»ä½•ä¸€ä¸ª Promise è¢«æ‹’ç»æ—¶ï¼Œ`Promise.all`Â å°±ä¼šç«‹å³æ‹’ç»ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªè¢«æ‹’ç»çš„ Promise çš„åŸå› ã€‚\n    - åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`runReject(2)`Â ä¼šåœ¨ 2 ç§’åé¦–å…ˆè¢«æ‹’ç»ã€‚\n2. `then` æ–¹æ³•çš„å¤„ç†ï¼š\n    - æ‚¨åœ¨Â `then`Â æ–¹æ³•ä¸­æä¾›äº†ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼š\n        - ä¸€ä¸ªç”¨äºæˆåŠŸï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰\n        - ä¸€ä¸ªç”¨äºå¤±è´¥ï¼ˆç¬¬äºŒä¸ªå‚æ•°ï¼‰ã€‚\n    - å½“Â `Promise.all`Â è¢«æ‹’ç»æ—¶ï¼Œå®ƒä¼šè°ƒç”¨Â `then`Â ä¸­çš„ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°ï¼ˆå¤±è´¥å›è°ƒï¼‰ã€‚\n    - åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¤±è´¥å›è°ƒÂ `(reason) => console.log(\"reject\", reason)`Â è¢«è°ƒç”¨ã€‚\n3. é”™è¯¯è¢«å¤„ç†ï¼š\n    - ä¸€æ—¦é”™è¯¯åœ¨Â `then`Â çš„ç¬¬äºŒä¸ªå›è°ƒä¸­è¢«å¤„ç†ï¼ŒJavaScript è®¤ä¸ºè¿™ä¸ªé”™è¯¯å·²ç»è¢«\"æ•è·\"å’Œ\"å¤„ç†\"äº†ã€‚\n    - å› æ­¤ï¼Œé”™è¯¯ä¸ä¼šç»§ç»­ä¼ æ’­åˆ°åé¢çš„Â `catch`Â è¯­å¥ã€‚\n4. `catch` çš„ä½œç”¨ï¼š\n    - ==`catch`Â ä¸»è¦ç”¨äºæ•è·åœ¨å‰é¢çš„Â `then`Â é“¾ä¸­æœªè¢«å¤„ç†çš„é”™è¯¯ã€‚==\n    - åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé”™è¯¯å·²ç»åœ¨Â `then`Â çš„ç¬¬äºŒä¸ªå›è°ƒä¸­è¢«å¤„ç†äº†ï¼Œæ‰€ä»¥Â `catch`Â ä¸ä¼šè¢«è§¦å‘\n\n> æ€»ç»“å°±æ˜¯ï¼šPromise.all åªå¤„ç†ä¸€ä¸ªå¼‚å¸¸ï¼Œå…¶ä»–çš„éƒ½è¢«åäº†\n\n\n### raceä¼šè·å–æœ€æ–°æœ‰ç»“è®ºçš„ä»»åŠ¡ï¼Œç„¶åèµ°åé¢thenæˆ–è€… catchï¼Œå…¶ä»–çš„æ­£å¸¸æ‰§è¡Œï¼Œä½†ä¸èµ°åé¢çš„thenå’Œ catch äº†,æ‰§è¡Œç»“æœä¼šè¢«æŠ›å¼ƒ\n\n```javascript\nfunction runAsync(x) {\n  return new Promise((r) => setTimeout(() => r(x, console.log(x)), 1000));\n}\nPromise.race([runAsync(1), runAsync(2), runAsync(3)])\n  // åªéœ€è¦æœ‰ä¸€ä¸ªpromiseå®ä¾‹ç‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œæ–°çš„PromiseçŠ¶æ€å°±è·Ÿç€æ”¹å˜\n  // ç„¶åå°±ä¼šè°ƒç”¨thenæ–¹æ³•ï¼Œç»‘å®šå›è°ƒå‡½æ•°\n  // ä¹‹åå°±ä¸ä¼šåœ¨ç†ä¼šå…¶ä»–promiseå®ä¾‹çš„çŠ¶æ€ï¼Œä½†è¿˜æ˜¯ä¼šç»§ç»­æ‰§è¡Œ\n  // åªä¸è¿‡ä¸èµ°åé¢ then å’Œ catch æ–¹æ³•äº†\n  .then((res) => console.log(\"result: \", res))\n  .catch((err) => console.log(err));\n\n// 1\n// 'result: ' 1\n// 2\n// 3\n\n```\n\n\n### `await async2()` ä¼šç«‹å³åŒæ­¥æ‰§è¡Œ `async2`\n\n```javascript hl:3\nasync function async1() {\n  console.log(\"1\");\n  // è¿™é‡Œ async2() ä¼šç«‹å³æ‰§è¡Œï¼Œæ‰€ä»¥ç«‹å³åŒæ­¥æ‰“å° 3\n  await async2();\n  console.log(\"2\");\n}\nasync function async2() {\n  console.log(\"3\");\n}\nasync1();\nconsole.log(\"4\");\n\n// æ‰“å°ç»“æœ 1 3 4 2\n\n```\n\n### å¹¶ä¸éœ€è¦ sync ä¸€å®šè¿”å›ä¸€ä¸ª promiseï¼Œç„¶åæ‰æ‰§è¡Œä¸‹é¢çš„ä¸œè¥¿\n\n```javascript\nasync function async1() {\n  console.log(\"1\");\n  await async2();\n  console.log(\"2\");\n}\n\n// å¹¶ä¸éœ€è¦ async2 ä¸€å®šè¿”å›ä¸€ä¸ª promise\n// ä¸‹é¢è¿™ä¸ªæ²¡æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆè¿”å› undefined\nasync function async2() {\n  // ä¸‹ä¸€è½®å®ä»»åŠ¡ï¼Œæ‰€ä»¥æœ€åæ‰§è¡Œ\n  setTimeout(() => {\n    console.log(\"3\");\n  }, 0);\n  console.log(\"4\");\n}\nasync1();\nconsole.log(\"5\");\n\n1;\n4;\n5;\n2;\n3;\n```\n\n### æ³¨æ„ setTimeout(fn,0) çš„ç¬¬ä¸€æ¬¡è§£æçš„é¡ºåº\n\n```javascript hl:18\nasync function async1() {\n  console.log(\"1\");\n  await async2();\n  console.log(\"2\");\n  setTimeout(() => {\n    console.log(\"3\");\n  }, 0);\n}\nasync function async2() {\n  setTimeout(() => {\n    console.log(\"4\");\n  }, 0);\n  console.log(\"5\");\n}\n\nasync1();\n\n// å…ˆäºç¬¬ 5 è¡Œè§£æåˆ°\nsetTimeout(() => {\n  console.log(\"6\");\n}, 0);\n\nconsole.log(\"7\");\n\n// 1 5 7 2 4 6 3\n\n```\n\n### async çš„è¿”å›å€¼\n\n```javascript\nasync function fn() {\n  // return await 1234\n  // ç­‰åŒäº ç›¸ç­‰äº resolve(123)\n  return 123;\n}\nfn().then((res) => console.log(res));\n```\n\n### await new Promise() æ³¨æ„æœ‰æ²¡æœ‰ resolve æˆ–è€… reject \n\n```javascript\nasync function async1() {\n  console.log(\"1\");\n  // Promiseæ˜¯æ²¡æœ‰è¿”å›å€¼çš„ï¼Œä¹Ÿå°±æ˜¯å®ƒçš„çŠ¶æ€å§‹ç»ˆæ˜¯pendingçŠ¶æ€\n  // å› æ­¤ç›¸å½“äºä¸€ç›´åœ¨await,åé¢çš„ 3 å’Œ 4 ä¸ä¼šè¢«æ‰“å°\n  await new Promise((resolve) => {\n    console.log(\"2\");\n    // ä¸‹é¢çš„æ³¨é‡Šæ”¾å¼€å°±èƒ½æ­£å¸¸æ‰“å°æ‰€æœ‰çš„ log\n    // resolve(\"22\");\n  });\n  console.log(\"3\");\n  return \"4\";\n}\nconsole.log(\"5\");\nasync1().then((res) => console.log(res));\nconsole.log(\"6\");\n\n// 5 1 2 6\n\n```\n\n\n### å¦‚æœåœ¨`asyncå‡½æ•°`ä¸­æŠ›å‡ºäº†é”™è¯¯ï¼Œåˆ™ç»ˆæ­¢**é”™è¯¯ç»“æœ**ï¼Œä¸ä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œ\n\n```javascript hl:3\nasync function async1() {\n  await async2();\n  // ä¸‹é¢éƒ½æ˜¯æ‰§è¡Œäº†ï¼Œå› ä¸º async2 æŠ¥é”™äº†\n  console.log(\"2\");\n  return \"3\";\n}\nasync function async2() {\n  return new Promise((resolve, reject) => {\n    console.log(\"3\");\n    reject(\"e4\");\n  });\n}\nasync1().then((res) => console.log(res));\n\n// 3\n// Uncaught (in promise) e4\n\n```\n","7dd5e8472b4f5893bb66d68b29519167":"\n# async ã€await çš„å®ç°åŸç†\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢„å¤‡çŸ¥è¯† \n### 1.1. å›è°ƒå‡½æ•°\n\nç•¥\n\n### 1.2. Promise\n\nç•¥\n\n### 1.3. generate åç¨‹&yield\n\n```javascript hl:1\nfunction* numberGenerator() {\n    yield 1;\n    yield 2;\n    yield 3;\n}\n\nconst gen = numberGenerator();\nconsole.log(gen.next().value); // 1\nconsole.log(gen.next().value); // 2\nconsole.log(gen.next().value); // 3\n\n```\n\n\n### 1.4. Thunk å‡½æ•°ä¸ thunkify\n\n- Thunk æ˜¯ä¸€ç§å°†å¤šå‚æ•°å‡½æ•°è½¬æ¢ä¸ºå•å‚æ•°çš„ååº”ç”¨å‡½æ•°çš„æ–¹æ³•\n- Thunké€šå¸¸ç”¨äºå°†`å›è°ƒé£æ ¼`çš„å‡½æ•°è½¬æ¢ä¸º `promise é£æ ¼`\n\n```javascript hl:8,11\n// æ™®é€šçš„å›è°ƒé£æ ¼å‡½æ•°\nfunction fetchData(callback) {\n    // æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ\n    setTimeout(() => callback(null, 'data'), 1000);\n}\n\n// Thunk å‡½æ•°\nfunction thunkify(fn) {\n    return function(...args) {\n        return function(callback) {\n            return fn.call(this, ...args, callback);\n        }\n    }\n}\n\nconst thunkedFetchData = thunkify(fetchData);\nconst thunk = thunkedFetchData();\nthunk((err, data) => console.log(data));\n\n```\n\n### 1.5. co å‡½æ•°\n\n- co æ˜¯ä¸€ä¸ªè‘—åçš„ `npm åŒ…`ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨æ‰§è¡Œå™¨ï¼Œå…è®¸ä½ **ä½¿ç”¨åŒæ­¥çš„æ–¹å¼ç¼–å†™å¼‚æ­¥ä»£ç **ã€‚\n- å®ƒå¯ä»¥è‡ªåŠ¨æ‰§è¡Œç”Ÿæˆå™¨å‡½æ•°ï¼Œå¹¶å¤„ç† `yield` çš„ Promiseã€thunks æˆ– æ•°ç»„/å¯¹è±¡ã€‚\n\n```javascript\nconst co = require('co');\n\nco(function* () {\n    const result = yield Promise.resolve(1);\n    return result;\n}).then(value => console.log(value));\n\n```\n\n## 2. ç”Ÿæˆå™¨ vs async/await\n    \n- ç”Ÿæˆå™¨æ˜¯æ›´åº•å±‚çš„æœºåˆ¶ï¼Œéœ€è¦æ‰‹åŠ¨è¿­ä»£æˆ–ä½¿ç”¨æ‰§è¡Œå™¨ã€‚\n- async/await æ˜¯å»ºç«‹åœ¨**ç”Ÿæˆå™¨å’Œ Promise ä¹‹ä¸Š**çš„é«˜çº§è¯­æ³•ï¼Œæä¾›äº†æ›´ç®€æ´çš„å¼‚æ­¥ç¼–ç¨‹æ–¹å¼ã€‚\n- async/await å¯ä»¥çœ‹ä½œæ˜¯**ç”Ÿæˆå™¨å’Œè‡ªåŠ¨æ‰§è¡Œå™¨**çš„è¯­æ³•ç³–ã€‚\n\n## 3. Thunk vs Promise\n    \n- Thunk ä¸»è¦ç”¨äºå°†å›è°ƒé£æ ¼çš„å‡½æ•°è½¬æ¢ä¸ºæ›´æ˜“äºæ“ä½œçš„å½¢å¼ã€‚\n- Promise æä¾›äº†ä¸€ç§æ ‡å‡†çš„å¼‚æ­¥æ“ä½œè¡¨ç¤ºæ–¹æ³•ï¼Œå…·æœ‰æ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼ˆå¦‚ .then()ã€.catch() ç­‰ï¼‰ã€‚\n\n## 4. co å‡½æ•° vs async/await\n    \n- co å‡½æ•°æ˜¯ async/await å‡ºç°ä¹‹å‰çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œç”¨äºç®€åŒ–ç”Ÿæˆå™¨çš„ä½¿ç”¨ã€‚\n- async/await å¯ä»¥çœ‹ä½œæ˜¯ co å‡½æ•°çš„`è¯­è¨€çº§å®ç°`ï¼Œæä¾›äº†æ›´åŸç”Ÿå’Œç®€æ´çš„è¯­æ³•ã€‚\n\n## 5. åç¨‹ vs å…¶ä»–æ¦‚å¿µ\n    \n- åç¨‹æ˜¯ä¸€ä¸ªæ›´å¹¿æ³›çš„æ¦‚å¿µï¼Œç”Ÿæˆå™¨æ˜¯JavaScriptä¸­åç¨‹çš„ä¸€ç§å®ç°ã€‚\n- async/awaitã€Thunkã€co å‡½æ•°éƒ½å¯ä»¥çœ‹ä½œæ˜¯åŸºäºåç¨‹æ€æƒ³çš„ä¸åŒå±‚æ¬¡çš„æŠ½è±¡å’Œå®ç°ã€‚\n\n## 6. co å‡½æ•°çš„æœ€ç®€å®ç°\n\nco å‡½æ•°çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯è‡ªåŠ¨æ‰§è¡Œç”Ÿæˆå™¨å‡½æ•°ï¼Œå°† yield çš„å€¼è½¬æ¢ä¸º Promiseï¼Œå¹¶å¤„ç†å¼‚æ­¥æµç¨‹ã€‚\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„ `co å‡½æ•°`å®ç°ï¼š\n\n```javascript hl:5\nfunction co(gen) {\n    // å¦‚æœä¼ å…¥çš„æ˜¯ç”Ÿæˆå™¨å‡½æ•°ï¼Œå…ˆæ‰§è¡Œå®ƒå¾—åˆ°ç”Ÿæˆå™¨å¯¹è±¡\n    const generator = typeof gen === 'function' ? gen() : gen;\n    \n    // è¿”å›ä¸€ä¸ª Promise\n    return new Promise((resolve, reject) => {\n        // å®šä¹‰é€’å½’å¤„ç†å‡½æ•°\n        function step(nextValue) {\n            let result;\n            \n            try {\n                // æ‰§è¡Œä¸‹ä¸€æ­¥ï¼Œä¼ å…¥ä¸Šä¸€æ­¥çš„å€¼\n                result = generator.next(nextValue);\n            } catch (e) {\n                // å¦‚æœæ‰§è¡Œå‡ºé”™ï¼Œreject Promise\n                return reject(e);\n            }\n            \n            // å¦‚æœç”Ÿæˆå™¨æ‰§è¡Œå®Œæ¯•ï¼Œresolve æœ€ç»ˆå€¼\n            if (result.done) {\n                return resolve(result.value);\n            }\n            \n            // å°† yield çš„å€¼è½¬æ¢ä¸º Promise\n            Promise.resolve(result.value)\n                .then(value => step(value))  // ç»§ç»­æ‰§è¡Œä¸‹ä¸€æ­¥\n                .catch(reject);              // å¤„ç†é”™è¯¯\n        }\n        \n        // å¼€å§‹æ‰§è¡Œ\n        step();\n    });\n}\n```\n\n### 6.1. ä½¿ç”¨å»ºè®®\n\n1. åœ¨ç°ä»£JavaScriptä¸­ï¼Œæ¨èä½¿ç”¨ async/await è€Œä¸æ˜¯ co\n\t1. async/await å¯ä»¥çœ‹ä½œæ˜¯è¿™ç§æ¨¡å¼çš„è¯­è¨€çº§å®ç°\n2. ç†è§£ co çš„å®ç°æœ‰åŠ©äºæ·±å…¥ç†è§£ async/await çš„å·¥ä½œåŸç†\n3. åœ¨éœ€è¦æ”¯æŒæ—§ç‰ˆæœ¬ç¯å¢ƒæ—¶ï¼Œco ä»ç„¶æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„å·¥å…·\n","4038f8a64ea651879b1c87943d14b724":"\n# Thunk Function\n\nThunk function åœ¨å¼‚æ­¥ç¼–ç¨‹å’Œå‡½æ•°å¼ç¼–ç¨‹ä¸­ç»å¸¸ä½¿ç”¨\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åŸºæœ¬å®šä¹‰ \n   \n   Thunk æ˜¯ä¸€ä¸ªè¢«åŒ…è£¹åœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­çš„å‡½æ•°ï¼Œé€šå¸¸ç”¨äºå»¶è¿Ÿä¸€ä¸ªè®¡ç®—æˆ–æ“ä½œçš„æ‰§è¡Œã€‚\n\n## 2. ä¸»è¦ç‰¹ç‚¹\n\n   - å»¶è¿Ÿæ‰§è¡Œï¼šThunk å…è®¸ä½ æ¨è¿Ÿä¸€æ®µä»£ç çš„æ‰§è¡Œã€‚\n   - å°è£…å¤æ‚æ€§ï¼šå®ƒå¯ä»¥å°è£…å¤æ‚çš„é€»è¾‘ï¼Œä½¿ä»£ç æ›´æ¸…æ™°ã€‚\n   - å‚æ•°ä¼ é€’ï¼šå¯ä»¥åœ¨ä¸ç«‹å³æ‰§è¡Œå‡½æ•°çš„æƒ…å†µä¸‹ä¼ é€’å‚æ•°ã€‚\n\n## 3. åœ¨å¼‚æ­¥ç¼–ç¨‹ä¸­çš„åº”ç”¨\n\n   Thunk åœ¨å¤„ç†å¼‚æ­¥æ“ä½œæ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨ `Redux` ç­‰çŠ¶æ€ç®¡ç†åº“ä¸­ã€‚\n\n### 3.1. åŸºæœ¬çš„ thunk ç¤ºä¾‹\n\n```javascript\n// æ™®é€šå‡½æ•°\nfunction add(x, y) {\n  return x + y;\n}\n\n// Thunk å‡½æ•°\nfunction addThunk(x, y) {\n  return function() {\n    return x + y;\n  };\n}\n\nconsole.log(add(2, 3));        // è¾“å‡º: 5\nconsole.log(addThunk(2, 3));   // è¾“å‡º: [Function]\nconsole.log(addThunk(2, 3)()); // è¾“å‡º: 5\n```\n\n### 3.2. åœ¨å¼‚æ­¥æ“ä½œä¸­ä½¿ç”¨ thunk\n\n```javascript\nfunction fetchUserData(userId) {\n  return function(dispatch) {\n    dispatch({ type: 'FETCH_USER_REQUEST' });\n    \n    fetch(`https://api.example.com/users/${userId}`)\n      .then(response => response.json())\n      .then(data => {\n        dispatch({ type: 'FETCH_USER_SUCCESS', payload: data });\n      })\n      .catch(error => {\n        dispatch({ type: 'FETCH_USER_FAILURE', error });\n      });\n  };\n}\n\n// ä½¿ç”¨\nstore.dispatch(fetchUserData(123));\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`fetchUserData` è¿”å›ä¸€ä¸ªå‡½æ•°ï¼ˆthunkï¼‰ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ™®é€šçš„ action å¯¹è±¡ã€‚è¿™ä¸ªè¿”å›çš„å‡½æ•°æ¥æ”¶ `dispatch` ä½œä¸ºå‚æ•°ï¼Œå…è®¸åœ¨å¼‚æ­¥æ“ä½œå®Œæˆåå†æ¬¡æ´¾å‘ actionã€‚\n\n### 3.3. Thunk åœ¨ Redux ä¸­çš„åº”ç”¨\n\nåœ¨ Redux ä¸­ï¼Œaction åˆ›å»ºå™¨é€šå¸¸è¿”å›ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨ Redux Thunk ä¸­é—´ä»¶åï¼Œaction åˆ›å»ºå™¨å¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ª thunkã€‚\n\n```javascript\n// é…ç½® Redux Thunk\nimport { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducers';\n\nconst store = createStore(\n  rootReducer,\n  applyMiddleware(thunk)\n);\n\n// ä½¿ç”¨ thunk action åˆ›å»ºå™¨\nconst fetchPosts = (subreddit) => (dispatch) => {\n  dispatch(requestPosts(subreddit));\n  return fetch(`https://www.reddit.com/r/${subreddit}.json`)\n    .then(response => response.json())\n    .then(json => dispatch(receivePosts(subreddit, json)));\n};\n\n// æ´¾å‘ thunk\nstore.dispatch(fetchPosts('reactjs'));\n```\n\n## 4. æ€»ç»“\n\n- Thunk å‡½æ•°æ˜¯ä¸€ç§å»¶è¿Ÿæ‰§è¡Œçš„å‡½æ•°ã€‚\n- åœ¨å¼‚æ­¥ç¼–ç¨‹ä¸­ï¼Œthunk å¯ä»¥å¸®åŠ©ç®¡ç†å¤æ‚çš„å¼‚æ­¥æµç¨‹ã€‚\n- åœ¨ Redux ç­‰çŠ¶æ€ç®¡ç†åº“ä¸­ï¼Œthunk ç”¨äºå¤„ç†å¼‚æ­¥ actionã€‚\n- `Thunk` æä¾›äº†ä¸€ç§æ–¹å¼æ¥å°è£…å¤æ‚çš„é€»è¾‘ï¼Œä½¿ä»£ç æ›´åŠ æ¨¡å—åŒ–å’Œå¯æµ‹è¯•ã€‚\n\né€šè¿‡ä½¿ç”¨ thunkï¼Œæˆ‘ä»¬å¯ä»¥æ›´çµæ´»åœ°æ§åˆ¶å‡½æ•°çš„æ‰§è¡Œæ—¶æœºï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¼‚æ­¥æ“ä½œæˆ–éœ€è¦è®¿é—® Redux store çš„æƒ…å†µä¸‹ã€‚","477d42a968335d8487ac61c9a1e1719f":"\n# JavaScript å¼•æ“\n\nå¼•æ“å¾ˆå¤æ‚ï¼Œä½†æ˜¯åŸºæœ¬åŸç†å¾ˆç®€å•ã€‚\n\n1. å¼•æ“ï¼ˆå¦‚æœæ˜¯æµè§ˆå™¨ï¼Œåˆ™å¼•æ“è¢«åµŒå…¥åœ¨å…¶ä¸­ï¼‰è¯»å–ï¼ˆâ€œè§£æâ€ï¼‰è„šæœ¬ã€‚\n2. ç„¶åï¼Œå¼•æ“å°†è„šæœ¬è½¬åŒ–ï¼ˆâ€œç¼–è¯‘â€ï¼‰ä¸ºæœºå™¨è¯­è¨€ã€‚\n3. ç„¶åï¼Œæœºå™¨ä»£ç å¿«é€Ÿåœ°æ‰§è¡Œ\n\n\nJavaScript å¼•æ“æ˜¯ç”¨äºè§£é‡Šå’Œæ‰§è¡Œ JavaScript ä»£ç çš„ç¨‹åºã€‚å®ƒä»¬æœ€å¸¸è§äºç½‘é¡µæµè§ˆå™¨ä¸­ï¼Œä½†ä¹Ÿç”¨äºè®¸å¤šå…¶ä»–ç¯å¢ƒã€‚ä¸»è¦çš„ JavaScript å¼•æ“åŒ…æ‹¬ï¼š\n\n1. **V8 (è°·æ­Œ)**:\n   - å¼€å‘è€…ï¼šè°·æ­Œ\n   - ç”¨äºï¼šChrome æµè§ˆå™¨ã€Node.js ç­‰\n   - ç‰¹è‰²ï¼šä½¿ç”¨`å³æ—¶ç¼–è¯‘`ï¼ˆJITï¼ŒJust-In-Time compilationï¼‰ï¼Œå°† JavaScript ä»£ç å³æ—¶ç¼–è¯‘æˆä¸æœºå™¨ç ï¼Œä»¥æé«˜æ‰§è¡Œæ•ˆç‡ã€‚\n2. **SpiderMonkey (Mozilla)**:\n   - å¼€å‘è€…ï¼šMozilla\n   - ç”¨äºï¼šFirefox æµè§ˆå™¨\n   - ç‰¹è‰²ï¼šæ˜¯ç¬¬ä¸€ä¸ª JavaScript å¼•æ“ï¼Œæ”¯æŒè§£é‡Šå’Œç¼–è¯‘ä¸¤ç§æ¨¡å¼ï¼Œä½¿ç”¨å¤šå±‚ä¼˜åŒ–ç¼–è¯‘å™¨ã€‚\n3. **Chakra (å¾®è½¯)**:\n   - å¼€å‘è€…ï¼šå¾®è½¯\n   - ç”¨äºï¼šæ›¾ç”¨äº Internet Explorer å’Œ Microsoft Edge (æ—§ç‰ˆï¼ŒEdgeHTML)\n   - ç‰¹è‰²ï¼šæ‹¥æœ‰ä¸€ä¸ªå¼ºå¤§çš„ JIT ç¼–è¯‘å™¨ï¼Œæ”¯æŒä¼˜åŒ–çš„æ‰§è¡Œå’Œåƒåœ¾å›æ”¶ã€‚\n4. **JavaScriptCore (è‹¹æœ)**:\n   - å¼€å‘è€…ï¼šè‹¹æœ\n   - ç”¨äºï¼šSafari æµè§ˆå™¨\n   - ç‰¹è‰²ï¼šä¹Ÿè¢«ç§°ä¸º Nitroï¼Œæ³¨é‡å†…å­˜ç®¡ç†å’Œæ‰§è¡Œæ€§èƒ½ã€‚\n\n\n## ç›®å½•\n<!-- toc -->\n ## # JavaScript å¼•æ“çš„ç»„æˆéƒ¨åˆ† \n\n1. **è§£æå™¨ (Parser)**:\n   - å°†æºä»£ç è½¬æ¢æˆæŠ½è±¡è¯­æ³•æ ‘ (ASTï¼ŒAbstract Syntax Tree)ã€‚\n   - åˆ†æä»£ç ç»“æ„ï¼Œä¿è¯è¯­æ³•æ­£ç¡®ã€‚\n2. **è§£é‡Šå™¨ (Interpreter)**:\n   - é€è¡Œè§£é‡Šå’Œæ‰§è¡Œ JavaScript ä»£ç ï¼Œä½¿ç”¨ AST ç”Ÿæˆä¸­é—´ä»£ç ã€‚\n3. **ç¼–è¯‘å™¨ (Compiler)**:\n   - JIT ç¼–è¯‘å™¨ä¼šåœ¨è¿è¡Œæ—¶å°†`é¢‘ç¹æ‰§è¡Œçš„ä»£ç `ç¼–è¯‘æˆæœºå™¨ç ï¼Œä»¥æ›´å¿«åœ°æ‰§è¡Œã€‚\n4. **è¿è¡Œæ—¶ (Runtime)**:\n   - æä¾›å†…ç½®å‡½æ•°ã€å†…å­˜ç®¡ç†ï¼ˆå¦‚åƒåœ¾å›æ”¶ï¼‰å’Œæ‰§è¡Œç¯å¢ƒã€‚\n\n### è¿è¡Œæœºåˆ¶\n\n1. **è§£æå’Œç¼–è¯‘**\n   - ä»£ç é¦–å…ˆè¢«è§£æå™¨è§£æä¸º ASTï¼Œç„¶å JIT ç¼–è¯‘å™¨å°†éƒ¨åˆ† AST ç¼–è¯‘æˆæœºå™¨ç ã€‚å½“è¿è¡Œè¿‡ç¨‹ä¸­å‘ç°æŸäº›ä»£ç ç‰‡æ®µè¢«é¢‘ç¹è°ƒç”¨ï¼Œç¼–è¯‘å™¨ä¼šè¿›ä¸€æ­¥ä¼˜åŒ–è¿™äº›ç‰‡æ®µã€‚\n2. **æ‰§è¡Œ**\n   - æ‰§è¡Œå¼•æ“ä¼šæ ¹æ®ç¼–è¯‘åçš„ä»£ç ç›´æ¥è¿è¡Œæœºå™¨ç ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚\n3. **åƒåœ¾å›æ”¶ (Garbage Collection)**\n   - JavaScript å¼•æ“ä¼šè‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œè‡ªåŠ¨å›æ”¶ä¸å†ä½¿ç”¨çš„å¯¹è±¡å’Œå˜é‡ã€‚è¿™é€šå¸¸æ˜¯é€šè¿‡åƒåœ¾å›æ”¶å™¨å®ç°çš„ï¼Œå¸¸è§çš„ç®—æ³•åŒ…æ‹¬æ ‡è®°-æ¸…é™¤ (mark-and-sweep)ã€å¼•ç”¨è®¡æ•° (reference counting) ç­‰ã€‚\n\n### æ€§èƒ½ä¼˜åŒ–\n\n1. **å³æ—¶ç¼–è¯‘ (Just-In-Time Compilation, JIT)**\n   - ä½¿ç”¨ JIT ç¼–è¯‘å™¨ï¼Œä»£ç åœ¨è¿è¡Œæ—¶è¢«åŠ¨æ€ç¼–è¯‘ï¼Œé¿å…äº†è§£é‡Šä»£ç çš„å¼€é”€ã€‚\n2. **å†…è”ç¼“å­˜ (Inline Caching)**\n   - ç”¨äºåŠ é€Ÿå±æ€§æŸ¥æ‰¾å’Œæ–¹æ³•è°ƒç”¨é¢‘ç¹çš„å¯¹è±¡ã€‚\n3. **æƒ°æ€§è§£æ (Lazy Parsing)**\n   - åªåœ¨çœŸæ­£éœ€è¦æ—¶è§£æ JavaScript ä»£ç ï¼Œæé«˜åˆå§‹åŠ è½½æ€§èƒ½ã€‚\n4. **åƒåœ¾å›æ”¶ä¼˜åŒ–**\n   - é€šè¿‡åˆ†ä»£åƒåœ¾å›æ”¶ã€å¢é‡åƒåœ¾å›æ”¶ç­‰æŠ€æœ¯ï¼Œæé«˜å†…å­˜ç®¡ç†æ•ˆç‡ã€‚\n\næ€»çš„æ¥è¯´ï¼ŒJavaScript å¼•æ“é€šè¿‡å¤šç§æŠ€æœ¯å’Œä¼˜åŒ–ç­–ç•¥ï¼Œæå¤§åœ°æå‡äº† JavaScript ä»£ç çš„è¿è¡Œæ•ˆç‡å’Œæ€§èƒ½ã€‚è¿™ä¹Ÿæ˜¯ç°ä»£ç½‘é¡µå’Œåº”ç”¨ç¨‹åºå¤æ‚åº¦å’ŒåŠŸèƒ½æ€§å¾—ä»¥æå‡çš„é‡è¦å› ç´ ä¹‹ä¸€ã€‚\n\n\n\n\n\n# å‚è€ƒ\n\n- [https://zh.javascript.info/intro](https://zh.javascript.info/intro)\n- [https://kangax.github.io/compat-table](https://kangax.github.io/compat-table) ï¼šä¸€ä»½åˆ—æœ‰è¯­è¨€åŠŸèƒ½ä»¥åŠå¼•æ“æ˜¯å¦æ”¯æŒè¿™äº›åŠŸèƒ½çš„è¡¨æ ¼ã€‚\n","a30cffd0bdde5f2fae8f396eec332f85":"\n# JavaScript çš„åƒåœ¾å›æ”¶æœºåˆ¶\n\nJavaScript çš„åƒåœ¾å›æ”¶æœºåˆ¶ä¸»è¦é€šè¿‡è‡ªåŠ¨å†…å­˜ç®¡ç†æ¥å¤„ç†ä¸å†ä½¿ç”¨çš„å¯¹è±¡å’Œå˜é‡ï¼Œä»¥é‡Šæ”¾å†…å­˜èµ„æºã€‚æœ€å¸¸ç”¨çš„åƒåœ¾å›æ”¶ç®—æ³•æ˜¯ **æ ‡è®°-æ¸…é™¤ (Mark-and-Sweep)**ã€‚ä»¥ä¸‹æ˜¯ä¸»è¦ç‰¹ç‚¹å’Œæ­¥éª¤ï¼š\n\n\n## ç›®å½•\n<!-- toc -->\n ## # æ ‡è®°-æ¸…é™¤ç®—æ³• \n\n1. **æ ‡è®°é˜¶æ®µ (Marking Phase)**:\n   - ä»æ ¹å¯¹è±¡ï¼ˆä¾‹å¦‚å…¨å±€å¯¹è±¡ã€å±€éƒ¨å˜é‡ç­‰ï¼‰å¼€å§‹ï¼Œæ ‡è®°æ‰€æœ‰å¯è¾¾çš„å¯¹è±¡ï¼Œå³æœ‰å¼•ç”¨çš„å¯¹è±¡ã€‚\n2. **æ¸…é™¤é˜¶æ®µ (Sweeping Phase)**:\n   - éå†å†…å­˜ï¼Œå°†æœªè¢«æ ‡è®°çš„å¯¹è±¡è§†ä¸ºåƒåœ¾ï¼Œå¹¶å°†å…¶å†…å­˜é‡Šæ”¾ã€‚\n\n### å…¶ä»–ä¼˜åŒ–ç­–ç•¥\n\n1. **åˆ†ä»£åƒåœ¾å›æ”¶ (Generational Garbage Collection)**:\n   - å°†å†…å­˜åˆ†ä¸ºä¸¤ä»£ï¼šæ–°ç”Ÿä»£å’Œè€ç”Ÿä»£ã€‚\n   - æ–°ç”Ÿä»£å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçŸ­ï¼Œé¢‘ç¹å›æ”¶ï¼›è€ç”Ÿä»£å¯¹è±¡ç”Ÿå‘½å‘¨æœŸé•¿ï¼Œè¾ƒå°‘å›æ”¶ã€‚\n2. **å¢é‡åƒåœ¾å›æ”¶ (Incremental Garbage Collection)**:\n   - å°†æ ‡è®°å’Œæ¸…é™¤è¿‡ç¨‹åˆ†æˆå¤šä¸ªå°æ­¥è¿›è¡Œï¼Œä»¥é¿å…é•¿æ—¶é—´åœé¡¿ã€‚\n3. **æƒ°æ€§åƒåœ¾å›æ”¶ (Lazy Garbage Collection)**:\n   - å½“ç³»ç»Ÿç©ºé—²æ—¶æ‰è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå‡å°‘å¯¹åº”ç”¨ç¨‹åºæ€§èƒ½çš„å½±å“ã€‚\n\n### åƒåœ¾å›æ”¶è§¦å‘æ¡ä»¶\n\n- å†…å­˜ä½¿ç”¨è¾¾åˆ°ä¸€å®šé˜ˆå€¼ã€‚\n- ç³»ç»Ÿç©ºé—²æ—¶ä¸»åŠ¨è§¦å‘åƒåœ¾å›æ”¶ã€‚\n\n### ä¼˜ç‚¹\n\n- **è‡ªåŠ¨å†…å­˜ç®¡ç†**ï¼šå¼€å‘è€…æ— éœ€æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œå‡å°‘å†…å­˜æ³„æ¼é£é™©ã€‚\n- **ä¼˜åŒ–æ€§èƒ½**ï¼šç°ä»£åƒåœ¾å›æ”¶æœºåˆ¶é€šè¿‡å¤šç§ä¼˜åŒ–ç­–ç•¥ï¼Œé™ä½äº†å¯¹åº”ç”¨æ€§èƒ½çš„å½±å“ã€‚\n\n### ç¼ºç‚¹\n\n- **ä¸å¯æ§æ€§**ï¼šåƒåœ¾å›æ”¶æ—¶æœºå’Œé¢‘ç‡ç”±å¼•æ“ç®¡ç†ï¼Œå¼€å‘è€…æ— æ³•å®Œå…¨æ§åˆ¶ã€‚\n- **æ½œåœ¨çš„æ€§èƒ½å½±å“**ï¼šå°½ç®¡æœ‰å¤šç§ä¼˜åŒ–ç­–ç•¥ï¼Œä½†åƒåœ¾å›æ”¶ä»å¯èƒ½åœ¨é«˜è´Ÿè½½åº”ç”¨ä¸­å¼•å…¥åœé¡¿ã€‚\n\næ€»çš„æ¥è¯´ï¼ŒJavaScript çš„åƒåœ¾å›æ”¶æœºåˆ¶é€šè¿‡è‡ªåŠ¨åŒ–å’Œä¼˜åŒ–çš„å†…å­˜ç®¡ç†ï¼Œæä¾›äº†ä¾¿æ·çš„å¼€å‘ä½“éªŒï¼ŒåŒæ—¶é€šè¿‡å¤šç§ç®—æ³•å’Œç­–ç•¥æé«˜äº†æ•ˆç‡å’Œæ€§èƒ½ã€‚\n","49f8145de9655dfab9304bd772dcbf67":"\n# Typescript ç¯‡\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## ä¸€ã€ç¼–è¯‘ \nå¯é€šè¿‡ `tsconfig.json` æ¥æŒ‡å®šå“ªäº›æ–‡ä»¶ç¼–è¯‘ç­‰ç¼–è¯‘é€‰é¡¹ï¼Œå¦‚\n```json\n{\n  \"files\": [\n    \"./some/file.ts\"\n  ],\n  \"include\": [\n    \"./folder\"\n  ],\n  \"exclude\": [\n    \"./folder/**/*.spec.ts\",\n    \"./folder/someSubFolder\"\n  ]\n}\n```\n>  playgroundï¼š [http://www.typescriptlang.org/play/](http://www.typescriptlang.org/play/) \n\nå¯è¿è¡Œ `ts` çš„ç¼–è¯‘å·¥å…·\n1ã€TypeScript å®˜æ–¹æä¾›çš„ç¼–è¯‘å™¨å«åš `tsc` \n2ã€**ts-node**\n```bash\nnpx ts-node script.ts\n\n# æˆ–è€…\nts-node script.ts\n```\n\n## äºŒã€å£°æ˜ç©ºé—´\nåœ¨ TypeScript é‡Œå­˜åœ¨ä¸¤ç§å£°æ˜ç©ºé—´ï¼š`ç±»å‹å£°æ˜ç©ºé—´`ä¸`å˜é‡å£°æ˜ç©ºé—´`\n\n### ï¼ˆä¸€ï¼‰ç±»å‹å£°æ˜ç©ºé—´\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/76e5d299da3f92d03fa51b2e9528079d.png)\n\nå³ `interface B{}`  åªæ˜¯ä¸€ä¸ª`ç±»å‹ç”³æ˜`ï¼Œä¸èƒ½å½“åšå˜é‡ä½¿ç”¨\n>  çœ‹ä¸Šå›¾ï¼Œ`b1` å’Œ `c1` éƒ½é£˜çº¢è­¦å‘Šäº†\n\n### ï¼ˆäºŒï¼‰å˜é‡å£°æ˜ç©ºé—´\n```javascript\n/**\n * â‘  Class Foo æä¾›äº†ä¸€ä¸ªç±»å‹ Foo åˆ°ç±»å‹å£°æ˜ç©ºé—´\n * â‘¡ æŠŠä¸€ä¸ªç±»æ¥å½“åšå˜é‡ä¼ é€’æ—¶ï¼Œts ä¼šæŠŠè¿™ä¸ªç±»å½“åšå€¼æ¥å¤„ç†\n * */\nclass Foo {\n}\n\nconst someVar: Foo = Foo;\n\n\n/**\n * â‘  ä¸€äº›ç”¨ var å£°æ˜çš„å˜é‡ï¼Œä¹Ÿåªèƒ½åœ¨å˜é‡å£°æ˜ç©ºé—´ä½¿ç”¨ï¼Œä¸èƒ½ç”¨ä½œç±»å‹æ³¨è§£ï¼Œå¦‚ä¸‹ç¤ºä¾‹\n */\nconst foo = 123;\nlet bar: foo; \n// ts2749: 'foo' refers to a value, but is being used as a type here. Did you mean 'typeof foo'?\n\n```\n\n### ï¼ˆä¸‰ï¼‰æ€»ç»“\n**æ€»ç»“å°±æ˜¯ï¼š**\n\n1. `å˜é‡å£°æ˜ç©ºé—´`å¯ä»¥ç›´æ¥å½“åšå˜é‡èµ‹å€¼ä½¿ç”¨ï¼Œä½†å¦‚`const foo = 123;` ä¸­çš„ `foo`ä¸èƒ½å½“åš**ç±»å‹æ³¨è§£**ä½¿ç”¨\n2. `ç±»å‹å£°æ˜ç©ºé—´` éƒ½å¯ä»¥å½“åšç±»å‹æ³¨è§£ï¼Œä½†ä¸èƒ½å½“åš`ç±»å‹æ³¨è§£` ä½¿ç”¨\n\n## ä¸‰ã€TS æ¨¡å—\n\n### ï¼ˆä¸€ï¼‰å…¨å±€æ¨¡å—\nä½ å¯ä»¥åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ª `å…¨å±€å£°æ˜æ–‡ä»¶ global.d.ts`ï¼Œç”¨äºå£°æ˜å…¨å±€å˜é‡ã€‚æ¯”å¦‚å…¨å±€ä½¿ç”¨çš„ `JQuery`\n```typescript\ndeclare var jQuery: (selector: string) => any;\n```\n>  éœ€è¦ä½¿ç”¨ `declare` å…³é”®è¯\n\n### ï¼ˆäºŒï¼‰æ–‡ä»¶æ¨¡å—\nå³ `æ–‡ä»¶æ¨¡å—ç³»ç»Ÿ`ï¼Œè€³ç†Ÿèƒ½è¯¦çš„çš„ `CMD AMD ESM` ç­‰ç­‰ï¼Œè¿™é‡Œåªè®¨è®º ESM ï¼Œè€Œä¸”åªéœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç§å¹³æ—¶è‡ªå·±ä¸å¸¸ç”¨çš„å†™æ³•\nä¸»è¦æ˜¯`as` çš„å‡ ä¸ªå†™æ³•ï¼Œå¦‚ä¸‹ï¼š\n```typescript\nexport { someVar as aDifferentName };\n\nimport { someVar as aDifferentName } from './foo';\n\nimport * as foo from './foo';\n```\n\n## å››ã€å‘½åç©ºé—´\nä½¿ç”¨ `namespace` å…³é”®è¯ï¼Œå¦‚ä¸‹ï¼š\n```typescript\nnamespace Utility {\n  export function log(msg) {\n    console.log(msg);\n  }\n  export function error(msg) {\n    console.log(msg);\n  }\n}\n\n// usage\nUtility.log('Call me');\nUtility.error('maybe');\n\n```\nä»¥ä¸Š `ts` æœ€ç»ˆè½¬æˆ `js` çš„æ ·å­å¦‚ä¸‹ï¼Œæ˜¯çš„ï¼Œæ˜¯ä¸æ˜¯å¾ˆç±»ä¼¼ä¹‹å‰` JQuery` çš„å®ç°æ–¹å¼ã€‚\n```javascript\n(function (Utility) {\n  // æ·»åŠ å±æ€§è‡³ Utility\n})(Utility || Utility = {});\n\n```\n\n## äº”ã€åŠ¨æ€å¯¼å…¥è¡¨è¾¾å¼\nå…¶å®å°±ç±»ä¼¼äº Webpack çš„ `import()` ï¼ˆé¦–é€‰ï¼ŒECMAScript çš„ææ¡ˆï¼‰å’Œ `require.ensure()` ï¼Œè¿™æ ·å°±èƒ½å®ç°**ä»£ç åˆ†å‰²èƒ½åŠ›** ï¼Œå³`Code Splitting`  ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦æ‡’åŠ è½½ `mement`\n```typescript\nimport(/* webpackChunkName: \"momentjs\" */ 'moment')\n  .then(moment => {\n    // æ‡’åŠ è½½çš„æ¨¡å—æ‹¥æœ‰æ‰€æœ‰çš„ç±»å‹ï¼Œå¹¶ä¸”èƒ½å¤ŸæŒ‰æœŸå·¥ä½œ\n    // ç±»å‹æ£€æŸ¥ä¼šå·¥ä½œï¼Œä»£ç å¼•ç”¨ä¹Ÿä¼šå·¥ä½œ \n    const time = moment().format();\n    console.log('TypeScript >= 2.4.0 Dynamic Import Expression:');\n    console.log(time);\n  })\n  .catch(err => {\n    console.log('Failed to load moment', err);\n  });\n```\n\n## å…­ã€Typescript ç±»å‹ç³»ç»Ÿ\n\n### ï¼ˆä¸€ï¼‰åŸºæœ¬ç±»å‹\nå³ä»¥ä¸‹ 8 ç§ç±»å‹\n\n- boolean\n- string\n- number\n- bigint\n- symbol\n- object\n- undefined\n- null\n\n1ã€**TypeScript ç»§æ‰¿äº† JavaScript çš„ç±»å‹è®¾è®¡**ï¼Œä»¥ä¸Š8ç§ç±»å‹å¯ä»¥çœ‹ä½œ TypeScript çš„åŸºæœ¬ç±»å‹ã€‚\n2ã€`undefined` å’Œ `null` æ—¢å¯ä»¥ä½œä¸º**å€¼**ï¼Œä¹Ÿå¯ä»¥ä½œä¸º**ç±»å‹**ï¼Œå–å†³äºåœ¨å“ªé‡Œä½¿ç”¨å®ƒä»¬ã€‚æ›´å¤šå‚è€ƒ [#^d3044f](/post/49f8145de9655dfab9304bd772dcbf67.html#^d3044f)\n3ã€è¿™é‡Œå•ç‹¬è¯´ä¸‹ `object` æ ¹æ® JavaScript çš„è®¾è®¡ï¼Œ`object` ç±»å‹åŒ…å«äº†æ‰€æœ‰å¯¹è±¡ã€æ•°ç»„å’Œå‡½æ•°ã€‚\n```typescript\nconst x:object = { foo: 123 };\nconst y:object = [1, 2, 3];\nconst z:object = (n:number) => n + 1;\n```\n\n---\n\n4ã€åŒ…è£…ç±»å‹ï¼š5 ç§\nï¼ˆ1ï¼‰`Symbol()`** å’Œ **`BigInt()`** ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨** ï¼Œå³ä»–ä¿©æ— æ³•ç›´æ¥è·å–å®ƒä»¬çš„**åŒ…è£…å¯¹è±¡** \n\n- booleanï¼š`Boolean()`\n- string    `String()`\n- number   `Number()`\n- bigint  \n- symbol\n\nï¼ˆ2ï¼‰åŒ…è£…å¯¹è±¡ç±»å‹ä¸å­—é¢é‡ç±»å‹ï¼š**å¤§å†™ç±»å‹åŒæ—¶åŒ…å«åŒ…è£…å¯¹è±¡å’Œå­—é¢é‡ä¸¤ç§æƒ…å†µï¼Œå°å†™ç±»å‹åªåŒ…å«å­—é¢é‡ï¼Œä¸åŒ…å«åŒ…è£…å¯¹è±¡ã€‚**\n\n- **åŒ…è£…å¯¹è±¡** å’Œ **å­—é¢é‡**   ï¼š å¯¹åº”å…³ç³»å¦‚ä¸‹\n- Boolean å’Œ boolean\n- String å’Œ string\n- Number å’Œ number\n- BigInt å’Œ bigint\n- Symbol å’Œ symbol\n\nä¸¾ä¾‹ï¼š\n```typescript\n\nâ‘  å³å¤§å†™æ˜¯å°å†™å½¢å¼çš„è¶…é›† \n\nconst s1:String = 'hello'; // æ­£ç¡®\nconst s2:String = new String('hello'); // æ­£ç¡®\n\nconst s3:string = 'hello'; // æ­£ç¡®\nconst s4:string = new String('hello'); // æŠ¥é”™\n\n\nâ‘¡ å»ºè®®åªä½¿ç”¨å°å†™ç±»å‹ï¼Œä¸ä½¿ç”¨å¤§å†™ç±»å‹ã€‚å› ä¸ºç»å¤§éƒ¨åˆ†ä½¿ç”¨åŸå§‹ç±»å‹çš„åœºåˆï¼Œéƒ½æ˜¯ä½¿ç”¨å­—é¢é‡ï¼Œä¸ä½¿ç”¨åŒ…è£…å¯¹è±¡ï¼Œ\n\næ¯”å¦‚ï¼ŒMath.abs(å°å†™ç±»å‹)\nconst n1:number = 1;\nconst n2:Number = 1;\n\nMath.abs(n1) // 1\nMath.abs(n2) // æŠ¥é”™\n```\nï¼ˆ3ï¼‰`Object` ç±»å‹ä¸ `object` ç±»å‹ \nå…ˆçœ‹ **å¤§å†™çš„ Object** \n```typescript\n\nâ‘   å¤§å†™çš„Objectç±»å‹ä»£è¡¨ JavaScript è¯­è¨€é‡Œé¢çš„å¹¿ä¹‰å¯¹è±¡ã€‚\n    æ‰€æœ‰å¯ä»¥è½¬æˆå¯¹è±¡çš„å€¼ï¼Œéƒ½æ˜¯Objectç±»å‹ï¼Œè¿™å›Šæ‹¬äº†å‡ ä¹æ‰€æœ‰çš„å€¼\n\nlet obj:Object;\n \nobj = true;\nobj = 'hi';\nobj = 1;\nobj = { foo: 123 };\nobj = [1, 2];\nobj = (a:number) => a + 1;\n\nâ‘¡ äº‹å®ä¸Šï¼Œé™¤äº†undefinedå’Œnullè¿™ä¸¤ä¸ªå€¼ä¸èƒ½è½¬ä¸ºå¯¹è±¡ï¼Œå…¶ä»–ä»»ä½•å€¼éƒ½å¯ä»¥èµ‹å€¼ç»™Objectç±»å‹ï¼Œæ¯”å¦‚ä¸€ä¸‹ç¤ºä¾‹ä¼šæŠ¥é”™\n\nlet obj:Object;\n\nobj = undefined; // æŠ¥é”™\nobj = null; // æŠ¥é”™\n\n\nâ‘¢ ç©ºå¯¹è±¡ {} æ˜¯Objectç±»å‹çš„ç®€å†™å½¢å¼ï¼Œæ‰€ä»¥ä½¿ç”¨Objectæ—¶å¸¸å¸¸ç”¨ç©ºå¯¹è±¡ä»£æ›¿ï¼Œå¦‚ä¸‹ï¼š\n\nlet obj:{};\n \nobj = true;\nobj = 'hi';\nobj = 1;\nobj = { foo: 123 };\nobj = [1, 2];\nobj = (a:number) => a + 1;\n\nâ‘£ æ˜¾ç„¶ï¼Œæ— æ‰€ä¸åŒ…çš„Objectç±»å‹æ—¢ä¸ç¬¦åˆç›´è§‰ï¼Œä¹Ÿä¸æ–¹ä¾¿ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨\n\n```\n\n> [!danger]\n **æ— æ‰€ä¸åŒ…çš„Objectç±»å‹æ—¢ä¸ç¬¦åˆç›´è§‰ï¼Œä¹Ÿä¸æ–¹ä¾¿ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨**\n\nå†çœ‹ **å°å†™çš„ object**  ,  ==åªåŒ…å«å¯¹è±¡ã€æ•°ç»„å’Œå‡½æ•°==ï¼Œ ä¸åŒ…æ‹¬åŸå§‹ç±»å‹çš„å€¼ï¼Œæ¯”å¦‚ä¸‹é¢ä»£ç \n```typescript\nlet obj:object;\n \nobj = { foo: 123 };\nobj = [1, 2];\nobj = (a:number) => a + 1;\nobj = true; // æŠ¥é”™\nobj = 'hi'; // æŠ¥é”™\nobj = 1; // æŠ¥é”™\n```\næ³¨æ„ï¼Œæ— è®ºæ˜¯å¤§å†™çš„Objectç±»å‹ï¼Œè¿˜æ˜¯å°å†™çš„objectç±»å‹ï¼Œéƒ½ **åªåŒ…å« JavaScript å†…ç½®å¯¹è±¡åŸç”Ÿçš„å±æ€§å’Œæ–¹æ³•**ï¼Œç”¨æˆ·è‡ªå®šä¹‰çš„å±æ€§å’Œæ–¹æ³•éƒ½ä¸å­˜åœ¨äºè¿™ä¸¤ä¸ªç±»å‹ä¹‹ä¸­ã€‚\n```typescript\n\nconst o1:Object = { foo: 0 };\nconst o2:object = { foo: 0 };\n\no1.toString() // æ­£ç¡®\no1.foo // æŠ¥é”™\n\no2.toString() // æ­£ç¡®\no2.foo // æŠ¥é”™\n\n```\n> å¦‚ä¸‹å›¾ï¼Œéƒ½æŠ¥è­¦å‘Šäº†ï¼Œè¿™ä¸ªå€¼å¾—æ³¨æ„ï¼Œå³ object å…¶å®ä¸å¸¸ç”¨ï¼Œæœ€å¥½ç›´æ¥å®šä¹‰ interface ç±»å‹\n>  ![](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/b4674d165a9a0fa7a4faf5501b8ac303.png)\n\n### ï¼ˆäºŒï¼‰æ•°ç»„ç±»å‹\n\n#### 1ã€åŸºæœ¬ç”¨æ³•\n```typescript\nlet a:boolean[]; // åŒ let a:Array<boolean>;\nlet b:any[];   // åŒ let b:Array<any>;\nlet arr:(number|string)[];  // åŒ let arr:Array<number|string>;\n```\n\n#### 2ã€è¯»å–æ•°ç»„æˆå‘˜ç±»å‹\nTypeScript å…è®¸ä½¿ç”¨æ–¹æ‹¬å·è¯»å–æ•°ç»„æˆå‘˜çš„ç±»å‹ã€‚å¦‚ä¸‹ï¼š\n```typescript\nâ‘  è¯»å–æ•°ç»„æˆå‘˜çš„ç±»å‹\ntype Names = string[];\ntype Name = Names[0]; // string\n\nâ‘¡ ç”±äºæ•°ç»„æˆå‘˜çš„ç´¢å¼•ç±»å‹éƒ½æ˜¯numberï¼Œæ‰€ä»¥è¯»å–æˆå‘˜ç±»å‹ä¹Ÿå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·\ntype Name = Names[number]; // string\n\nâ‘¢ é‚£ä¹ˆè¿™ç§å†™æ³•æ˜¯å¯ä»¥çš„å—ï¼Ÿ\ntype Name = Names[99999]\n\n```\n\n#### 3ã€æ•°ç»„çš„ç±»å‹æ¨æ–­\nä¸ºæ•°ç»„èµ‹å€¼æ—¶ï¼ŒTypeScript ä¼š**è‡ªåŠ¨æ›´æ–°ç±»å‹æ¨æ–­**ï¼Œå¦‚ä¸‹ï¼š\n```typescript\nconst arr = [];\narr // æ¨æ–­ä¸º any[]\n\narr.push(123);\narr // æ¨æ–­ç±»å‹ä¸º number[]\n\narr.push('abc');\narr // æ¨æ–­ç±»å‹ä¸º (string|number)[]\n\nâ‘¡ ä¸‹é¢è¿™ç§ä¼šæ¨æ–­åˆå§‹å€¼ä¸º number åé¢å†èµ‹å€¼å°±ä¼šæŠ¥é”™äº†\n// æ¨æ–­ç±»å‹ä¸º number[]\nconst arr = [123];\n\narr.push('abc'); // æŠ¥é”™\n```\n\n#### 4ã€åªè¯»æ•°ç»„\nï¼ˆ1ï¼‰`const` å‘½ä»¤å£°æ˜çš„æ•°ç»„å˜é‡æ˜¯å¯ä»¥æ”¹å˜æˆå‘˜çš„ï¼Œå¦‚ä¸‹ï¼š\n```typescript\nconst arr = [0, 1];\narr[0] = 2;\n```\nï¼ˆ2ï¼‰å£°æ˜åªè¯»æ•°ç»„ï¼Œå³ `readonly`, ä¸‹é¢ç¤ºä¾‹ä¸­ï¼Œ`arr` æ˜¯ä¸€ä¸ªåªè¯»æ•°ç»„ï¼Œåˆ é™¤ã€ä¿®æ”¹ã€æ–°å¢æ•°ç»„æˆå‘˜éƒ½ä¼šæŠ¥é”™ã€‚\n```typescript\nconst arr:readonly number[] = [0, 1];\n\narr[1] = 2; // æŠ¥é”™\narr.push(3); // æŠ¥é”™\ndelete arr[0]; // æŠ¥é”™\n```\nï¼ˆ3ï¼‰`number[]`å…¶å®æ˜¯`readonly number[]`çš„å­ç±»å‹\n```typescript\nlet c:number[] = [0, 1];\nlet p:readonly number[] = c; // æ­£ç¡®\n\nc = p; // æŠ¥é”™\n```\n> æ‰€ä»¥ï¼Œè¿™é‡Œæœ‰ä¸ªç”¨æ³•å°±æ˜¯ï¼Œå¦‚æœåªæ˜¯å¸Œæœ›æ ¹æ®æ•°ç»„ç”Ÿæˆå¦å¤–ä¸€ä¸ªæ•°ç»„ï¼Œæ¯”å¦‚è¿‡æ»¤å‡ºæ•°ç»„ç­‰ï¼Œå°±å¯ä»¥ä¼ å…¥ readonly çš„æ•°ç»„ ï¼Ÿ \n\n```typescript\n\nâ‘  getSum()çš„å‚æ•°sæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¼ å…¥åªè¯»æ•°ç»„å°±ä¼šæŠ¥é”™ã€‚åŸå› å°±æ˜¯åªè¯»æ•°ç»„æ˜¯æ•°ç»„çš„çˆ¶ç±»å‹ï¼Œçˆ¶ç±»å‹ä¸èƒ½æ›¿ä»£å­ç±»å‹\nfunction getSum(s:number[]) {\n  // ...\n}\n\nconst arr:readonly number[] = [1, 2, 3];\n\ngetSum(arr) // æŠ¥é”™\n\nâ‘¡ ä½¿ç”¨ ç±»å‹æ–­è¨€ as è§£å†³æŠ¥é”™\n\ngetSum(arr as number[])\n```\n\n---\n\nç–‘æƒ‘ï¼š\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/9e33333a92b80383104547a2393f5fef.png)\n\n> [!danger]\n**æœ‰ç‚¹å’Œè‡ªå·±ç†è§£çš„æœ‰åå·®**ï¼ŒæŠŠ `readonly number[]` å½“åšæ˜¯çˆ¶ç±»ï¼Œ`number[]` å­ç±»ï¼Œå­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œæ‰€ä»¥ä¼šå¤šå‡º æ¯”å¦‚ `pop` `push` ç­‰å¯æ”¹å˜æ•°ç»„çš„æ–¹æ³•\n\n---\n\nï¼ˆ4ï¼‰ä½¿å¾—æ•°ç»„å¯è¯»çš„å…¶ä»–æ–¹æ³•\n```typescript\nâ‘  readonlyä¸æ•°ç»„çš„æ³›å‹å†™æ³•ä¸€èµ·ä½¿ç”¨ï¼Œå°±ä¼šæŠ¥é”™\n// æŠ¥é”™\nconst arr:readonly Array<number> = [0, 1];\n\nâ‘¡ TypeScript æä¾›äº†ä¸¤ä¸ªä¸“é—¨çš„æ³›å‹ï¼Œç”¨æ¥ç”Ÿæˆåªè¯»æ•°ç»„çš„ç±»å‹\nconst a1:ReadonlyArray<number> = [0, 1];\nconst a2:Readonly<number[]> = [0, 1];\n\nâ‘¢ as constå‘Šè¯‰ TypeScriptï¼Œæ¨æ–­ç±»å‹æ—¶è¦æŠŠå˜é‡arræ¨æ–­ä¸ºåªè¯»æ•°ç»„ï¼Œä»è€Œä½¿å¾—æ•°ç»„æˆå‘˜æ— æ³•æ”¹å˜ã€‚\n\nconst arr = [0, 1] as const;\narr[0] = [2]; // æŠ¥é”™ \n\n```\n\n#### 5ã€å¤šç»´æ•°ç»„\n```typescript\nâ‘  TypeScript ä½¿ç”¨T[][]çš„å½¢å¼ï¼Œè¡¨ç¤ºäºŒç»´æ•°ç»„ï¼ŒTæ˜¯æœ€åº•å±‚æ•°ç»„æˆå‘˜çš„ç±»å‹\n\nvar multi:number[][] = [1,2,3], [23,24,25](/post/49f8145de9655dfab9304bd772dcbf67.html#1,2,3],-[23,24,25);\n```\n\n### ï¼ˆä¸‰ï¼‰any ã€null ã€ undefined ã€void\n1ã€`any`  å‘Šè¯‰ **TypeScript ç¼–è¯‘å™¨**ä¸è¦è¿›è¡Œä»»ä½•çš„ç±»å‹æ£€æŸ¥ï¼Œå¤±å»äº†ç±»å‹æ£€æŸ¥çš„æ„ä¹‰ï¼Œå¦å¤–ä¼šé€ æˆ**ç±»å‹æ±¡æŸ“** ï¼Œå¦‚ä¸‹ï¼š ^4fa065 \n```typescript\nlet user: any = {\n  avatar: {\n    url: '/user-1.png'\n  }\n};\nlet avatar = user.avatar; // any\nlet url = avatar.url; // any\n```\nä½¿ç”¨åœºæ™¯ï¼š\n\n- è€æ—§é¡¹ç›®ï¼Œå¹´ä»£ä¹…è¿œçš„é¡¹ç›®\n- å…¶ä»–ç‰¹æ®ŠåŸå› ï¼šéœ€è¦å…³é—­å…·ä½“å˜é‡çš„ç±»å‹æ£€æŸ¥\n\nå¦å¤–ï¼Œå¯é€šè¿‡ `tsc --noImplicitAny app.ts` å¯åŠ¨ `any` æ£€æŸ¥\n\n2ã€`null` ã€ `undefined`  : ä»»ä½•ç±»å‹ï¼Œéƒ½èƒ½å†èµ‹å€¼ä¸º  `null`  å’Œ `undefined` ï¼Œå¦‚ä¸‹ä»£ç  ^d3044f\n```typescript\n// strictNullChecks: false\nlet num: number;\nlet str: string;\n\n// è¿™äº›ç±»å‹èƒ½è¢«èµ‹äºˆ\nnum = null;\nstr = undefined;\n\nå®ƒä»¬çš„ç±»å‹ä¼šè¢«æ¨æ–­ä¸ºanyã€‚\nlet a = undefined;   // any\nconst b = undefined; // any\n\nlet c = null;        // any\nconst d = null;      // any\n\n\n// æ‰“å¼€ç¼–è¯‘è®¾ç½® strictNullChecks = true\nlet a = undefined;   // undefined\nconst b = undefined; // undefined\n\nlet c = null;        // null\nconst d = null;      // null\n\n\n// tsc --strictNullChecks app.ts\nlet age:number = 24;\nage = null;      // æŠ¥é”™\nage = undefined; // æŠ¥é”™\n\n\n// æ‰“å¼€ strictNullChecks\n\nlet x:undefined = null; // æŠ¥é”™\nlet y:null = undefined; // æŠ¥é”™\n\n```\n**æ€»ä¹‹ï¼Œæ‰“å¼€ strictNullChecks ä»¥åï¼Œundefinedå’Œnullåªèƒ½èµ‹å€¼ç»™è‡ªèº«ï¼Œæˆ–è€…anyç±»å‹å’Œunknownç±»å‹çš„å˜é‡**\n```typescript\nlet x:any     = undefined;\nlet y:unknown = null;\n```\n\n3ã€`void`  æ ‡è¯† å‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œå³**ç©ºå€¼** ï¼Œå…¶å®å¯ä»¥ç†è§£ä¸º `null | undefined` \n\n### ï¼ˆå››ï¼‰never\n**ä»£è¡¨æ°¸è¿œä¸ä¼šå‘ç”Ÿ** çš„ç±»å‹ï¼Œæ˜¯ TypeScript ä¸­çš„ **åº•å±‚ç±»å‹** ï¼Œ çœ‹ä¸‹é¢çš„ä¸¤ä¸ªç¤ºä¾‹ï¼š\n\n1. ä¸€ä¸ªæ€»æ˜¯ä¼šæŠ›å‡ºé”™è¯¯çš„å‡½æ•°\n2. ä¸€ä¸ªä»æ¥ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°ï¼Œå› ä¸ºé‡Œé¢åŒ…å« `while(true)`\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/b010c6ee18dfa882025d20df3366730d.png)\nçœ‹ä¸€ä¸ªå…·ä½“**æ¡ˆä¾‹**ï¼š\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/edc5b68e55702c323c6b2660dcec33a0.png)\næˆ–è€…å¦‚ä¸‹ä»£ç ï¼Œç»Ÿä¸€åŒ…è£…ä¸€ä¸ª `fail` å‡½æ•°\n```typescript\nfunction foo(x: string | number): boolean {\n  if (typeof x === 'string') {\n    return true;\n  } else if (typeof x === 'number') {\n    return false;\n  }\n\n  // å¦‚æœä¸æ˜¯ä¸€ä¸ª never ç±»å‹ï¼Œè¿™ä¼šæŠ¥é”™ï¼š\n  // - ä¸æ˜¯æ‰€æœ‰æ¡ä»¶éƒ½æœ‰è¿”å›å€¼ ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰\n  // - æˆ–è€…æ£€æŸ¥åˆ°æ— æ³•è®¿é—®çš„ä»£ç \n  // ä½†æ˜¯ç”±äº TypeScript ç†è§£ `fail` å‡½æ•°è¿”å›ä¸º `never` ç±»å‹\n  // å®ƒå¯ä»¥è®©ä½ è°ƒç”¨å®ƒï¼Œå› ä¸ºä½ å¯èƒ½ä¼šåœ¨è¿è¡Œæ—¶ç”¨å®ƒæ¥åšå®‰å…¨æˆ–è€…è¯¦ç»†çš„æ£€æŸ¥ã€‚\n  return fail('Unexhaustive');\n}\n\nfunction fail(message: string): never {\n  throw new Error(message);\n}\n```\n>  1ã€æ³¨æ„ï¼šæŠ›å‡ºå¼‚å¸¸åå°±ç›´æ¥ä¸­æ–­ç¨‹åºäº†\n 2ã€**never ä»…èƒ½è¢«èµ‹å€¼ç»™å¦å¤–ä¸€ä¸ª never ç±»å‹**\n\n### ï¼ˆäº”ï¼‰Unknown\n1ã€ä½¿ç”¨ `any` æœ‰å¾ˆå¤šå¼Šç«¯ ï¼Œå‚è€ƒå¦‚ä¸Šï¼š [#^4fa065](/post/49f8145de9655dfab9304bd772dcbf67.html#^4fa065) ï¼Œè¿™å°±å¼•å‡ºäº† `unknown`\n2ã€`any` å’Œ `unknown` çš„ **æœ¬è´¨åŒºåˆ«**ï¼š\n `any` å’Œ `unknown` çš„æœ€å¤§åŒºåˆ«æ˜¯, unknown æ˜¯ `top type` (ä»»ä½•ç±»å‹éƒ½æ˜¯å®ƒçš„ subtype) , è€Œ  **any å³æ˜¯ top type, åˆæ˜¯ bottom type** (å®ƒæ˜¯ä»»ä½•ç±»å‹çš„ `subtype` ) ï¼Œè¿™å¯¼è‡´ any åŸºæœ¬ä¸Šå°±æ˜¯æ”¾å¼ƒäº†ä»»ä½•ç±»å‹æ£€æŸ¥ã€‚\n**æ‰€ä»¥ï¼Œ **`any`** å’Œ **`unknown`**  çš„ äº¤é›† å’Œ å¹¶é›†éƒ½æ˜¯ **`any` , å¦‚ä¸‹ä»£ç ï¼š\n```typescript\ntype U6 = unknown | any; // any\ntype U12 = unknown & any; // any;\n```\n3ã€ `unknown` ç±»å‹çš„å€¼åªèƒ½èµ‹ç»™ `unknown` æœ¬èº«å’Œ `any` ç±»å‹\n4ã€è”åˆç±»å‹å–æœ€å¤§é›†åˆï¼Œå³**å¹¶é›†** ï¼Œ äº¤å‰ç±»å‹ä¸­ï¼Œå–æœ€å°é›†åˆï¼Œå³**äº¤é›†** ï¼Œé‚£ä¹ˆ unknown çš„ è”åˆç±»å‹ å’Œ äº¤å‰ç±»å‹å¦‚ä½•å‘¢ï¼Ÿ\n```typescript\n// è”åˆç±»å‹\ntype U1 = unknown | null; // unknown\ntype U2 = unknown | undefined; // unknown\ntype U3 = unknown | number; // unknown\ntype U4 = unknown | boolean; // unknown\ntype U5 = unknown | string[]; // unknown\ntype U6 = unknown | any; // any\n\n// äº¤å‰ç±»å‹\ntype U7 = unknown & null; // null;\ntype U8 = unknown & undefined; // undefined;\ntype U9 = unknown & number; // number;\ntype U10 = unknown & boolean; // boolean;\ntype U11 = unknown & string[]; // string[]\ntype U12 = unknown & any; // any;\n```\næ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼š **unknown ä¹Ÿå¯ä»¥è§†ä¸ºæ‰€æœ‰å…¶ä»–ç±»å‹ï¼ˆé™¤äº†anyï¼‰çš„å…¨é›†**\n>  TypeScript æœ‰ä¸¤ä¸ªâ€œ**é¡¶å±‚ç±»å‹**â€ï¼ˆ`any`å’Œ`unknown`ï¼‰ï¼Œä½†æ˜¯ **â€œåº•å±‚ç±»å‹â€** åªæœ‰`never`å”¯ä¸€ä¸€ä¸ª \n\n### ï¼ˆå…­ï¼‰å€¼ç±»å‹\nå³ å•ä¸ªå€¼ä¹Ÿæ˜¯ä¸€ç§ç±»å‹ï¼Œç§°ä¸ºâ€œ**å€¼ç±»å‹**â€ã€‚\n```typescript\nlet x:'hello';\n\nx = 'hello'; // æ­£ç¡®\nx = 'world'; // æŠ¥é”™\n\nconst x:5 = 4 + 1; // æŠ¥é”™\n// åœ¨4 + 1åé¢åŠ ä¸Šas 5ï¼Œå°±æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå¯ä»¥æŠŠ 4 + 1çš„ç±»å‹ è§†ä¸ºå€¼ç±»å‹5 \nconst x:5 = (4 + 1) as 5; // æ­£ç¡®\n\n```\n> å•ä¸ªå€¼çš„å€¼ç±»å‹ï¼Œç”¨å¤„ä¸å¤§ï¼Œæ›´å¤šæ˜¯é…åˆ **è”åˆç±»å‹** ä½¿ç”¨\n\n### ï¼ˆä¸ƒï¼‰è”åˆç±»å‹\n```typescript\n\nâ‘  å¸¸ç”¨ç¤ºä¾‹\n\nlet x:string|number;\n\nlet setting:true|false;\n\nlet gender:'male'|'female';\n\nlet rainbowColor:'èµ¤'|'æ©™'|'é»„'|'ç»¿'|'é’'|'è“'|'ç´«';\n\n// strictNullChecks = true\nlet nullOrUndefined = undefined | null\n\n// æ–¹ä¾¿ä¹¦å†™\nlet x:\n  | 'one'\n  | 'two'\n  | 'three'\n  | 'four';\n\nâ‘¡ å¦‚æœä¸€ä¸ªå˜é‡æœ‰å¤šç§ç±»å‹ï¼Œè¯»å–è¯¥å˜é‡æ—¶ï¼Œå¾€å¾€éœ€è¦è¿›è¡Œâ€œç±»å‹ç¼©å°â€ï¼Œæ¯”å¦‚ï¼š\n\nfunction printId(\n  id:number|string\n) {\n    console.log(id.toUpperCase()); // æŠ¥é”™\n}\n\n// ä¿®æ”¹ä¸º =========> \n\nfunction printId(\n  id:number|string\n) {\n  if (typeof id === 'string') {\n    console.log(id.toUpperCase());\n  } else {\n    console.log(id);\n  }\n}\n\nâ‘¢ â€œç±»å‹ç¼©å°â€çš„å¦ä¸€ä¸ªä¾‹å­\n\nfunction getPort(\n  scheme: 'http'|'https'\n) {\n  switch (scheme) {\n    case 'http':\n      return 80;\n    case 'https':\n      return 443;\n  }\n}\n\n\n```\n>  å®é™…ä¸Šï¼Œè”åˆç±»å‹æœ¬èº«å¯ä»¥çœ‹æˆæ˜¯ä¸€ç§â€œ**ç±»å‹æ”¾å¤§**â€ï¼ˆtype wideningï¼‰ï¼Œå¤„ç†æ—¶å°±éœ€è¦â€œ**ç±»å‹ç¼©å°**â€ï¼ˆtype narrowingï¼‰\n\n### ï¼ˆå…«ï¼‰äº¤å‰ç±»å‹\näº¤å‰ç±»å‹ `A&B` è¡¨ç¤ºï¼Œä»»ä½•ä¸€ä¸ªç±»å‹å¿…é¡»åŒæ—¶å±äº `A` å’Œ`B`ï¼Œæ‰å±äºäº¤å‰ç±»å‹ `A&B`ï¼Œå³äº¤å‰ç±»å‹åŒæ—¶æ»¡è¶³`A`å’Œ`B`çš„ç‰¹å¾ã€‚ä¸‹é¢æ˜¯ç¤ºä¾‹\n```typescript\n\nâ‘  å˜é‡objåŒæ—¶å…·æœ‰å±æ€§fooå’Œå±æ€§bar\nlet obj:\n  { foo: string } &\n  { bar: string };\n\nobj = {\n  foo: 'hello',\n  bar: 'world'\n};\n\nâ‘¡ xçš„ç±»å‹å®é™…æ˜¯ never ï¼Œå› ä¸ºä¸å¯èƒ½æœ‰è¿™æ ·çš„ x \n\nlet x:number&string;\n\nâ‘¢ äº¤å‰ç±»å‹å¸¸å¸¸ç”¨æ¥ä¸ºå¯¹è±¡ç±»å‹æ·»åŠ æ–°å±æ€§ã€‚\n\ntype A = { foo: number };\ntype B = A & { bar: number };\n\n```\n\n### ï¼ˆä¹ï¼‰type å‘½ä»¤\n`type` å‘½ä»¤ç”¨æ¥å®šä¹‰ä¸€ä¸ªç±»å‹çš„`åˆ«å`\n```typescript\n\nâ‘  åˆ«å Age ç±»å‹\ntype Age = number;\nlet age:Age = 55;\n\nâ‘¡ åˆ«åä¸å…è®¸é‡å\ntype Color = 'red';\ntype Color = 'blue'; // æŠ¥é”™\n\nâ‘¢ åˆ«åçš„ä½œç”¨åŸŸæ˜¯å—çº§ä½œç”¨åŸŸ\ntype Color = 'red';\nif (Math.random() < 0.5) {\n  type Color = 'blue';\n}\n\nâ‘£ åˆ«åæ”¯æŒä½¿ç”¨è¡¨è¾¾å¼\ntype World = \"world\";\ntype Greeting = `hello ${World}`;\n```\n>  typeå‘½ä»¤å±äºç±»å‹ç›¸å…³çš„ä»£ç ï¼Œç¼–è¯‘æˆ JavaScript çš„æ—¶å€™ï¼Œä¼šè¢« ==å…¨éƒ¨åˆ é™¤==\n\n### ï¼ˆåï¼‰ typeof è¿ç®—ç¬¦\n1ã€JavaScript é‡Œé¢ï¼Œ`typeof` è¿ç®—ç¬¦åªå¯èƒ½è¿”å› **å…«ç§ç»“æœ**ï¼Œè€Œä¸”éƒ½æ˜¯**å­—ç¬¦ä¸²**ã€‚\n```javascript\ntypeof undefined; // \"undefined\"\ntypeof true; // \"boolean\"\ntypeof 1337; // \"number\"\ntypeof \"foo\"; // \"string\"\ntypeof {}; // \"object\"\ntypeof parseInt; // \"function\"\ntypeof Symbol(); // \"symbol\"\ntypeof 127n // \"bigint\"\n```\n2ã€TypeScript   `typeof` è¿ç®—ç¬¦å°†è¿”å› è¯¥å€¼çš„ **TypeScript ç±»å‹**\n```typescript\nconst a = { x: 0 };\n\ntype T0 = typeof a;   // { x: number }\ntype T1 = typeof a.x; // number\n```\n3ã€ç±»å‹è¿ç®— ä¸ å€¼è¿ç®—\n\n- `typeof` è¿”å›çš„æ˜¯ TypeScript ç±»å‹ï¼Œæ‰€ä»¥åªèƒ½ç”¨åœ¨**ç±»å‹è¿ç®—**ä¹‹ä¸­ï¼ˆå³è·Ÿ==ç±»å‹ç›¸å…³çš„ä»£ç ä¹‹ä¸­==ï¼‰ï¼Œä¸èƒ½ç”¨åœ¨ **å€¼è¿ç®—**\n- typeof çš„å‚æ•°ä¸èƒ½æ˜¯ä¸€ä¸ªå€¼çš„è¿ç®—å¼ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š\n```typescript\n// Date()éœ€è¦è¿ç®—æ‰çŸ¥é“ç»“æœ\ntype T = typeof Date(); // æŠ¥é”™\n```\n\n- `typeof` å‘½ä»¤çš„å‚æ•°ä¸èƒ½æ˜¯ç±»å‹ã€‚å¦‚ä¸‹ä»£ç \n```typescript\ntype Age = number;\ntype MyAge = typeof Age; // æŠ¥é”™\n```\n\n### ï¼ˆåä¸€ï¼‰ç±»å‹å£°æ˜çš„å—çº§ä½œç”¨åŸŸ\n```typescript\nå­˜åœ¨ä¸¤ä¸ªä»£ç å—ï¼Œå…¶ä¸­åˆ†åˆ«æœ‰ä¸€ä¸ªç±»å‹Tçš„å£°æ˜, è¿™ä¸¤ä¸ªå£°æ˜éƒ½åªåœ¨è‡ªå·±çš„ä»£ç å—å†…éƒ¨æœ‰æ•ˆï¼Œåœ¨ä»£ç å—å¤–éƒ¨æ— æ•ˆã€‚\nif (true) {\n  type T = number;\n  let v:T = 5;\n} else {\n  type T = string;\n  let v:T = 'hello';\n}\n```\n\n### ï¼ˆåäºŒï¼‰ å­ç±»å‹ä¸çˆ¶ç±»å‹\nå³**å­ç±»å‹å¯ä»¥èµ‹å€¼ç»™çˆ¶ç±»å‹**ï¼Œä½†åè¿‡æ¥ä¸è¡Œï¼Œå¦‚ä¸‹\n```typescript\n\nâ‘  å­ç±»å‹ a å¯ä»¥èµ‹å€¼ç»™çˆ¶ç±»å‹ b\n\ntype T = number|string;\n\nlet a:number = 1;\nlet b:T = a; \n\nâ‘¡ çˆ¶ç±»å‹ b ä¸å¯ä»¥èµ‹å€¼ç»™ å­ç±»å‹ a\n\nlet a:'hi' = 'hi';\nlet b:string = 'hello';\n\nb = a; // æ­£ç¡®\na = b; // æŠ¥é”™\n```\n\n### ï¼ˆåä¸‰ï¼‰å…ƒç»„\n\n#### 1ã€åŸºæœ¬ç¤ºä¾‹\n```typescript\nconst s:[string, string, boolean] = ['a', 'b', true];\n\n// æ•°ç»„\nlet a:number[] = [1];\n// å…ƒç»„\nlet t:[number] = [1];\n```\n>  æ•°ç»„ä¸å…ƒç»„çš„åŒºåˆ«åœ¨äºï¼Œ`number[]` ä¸ `[number]`\n\n#### 2ã€å¯é€‰å…ƒç´ \næ·»åŠ `?` è¡¨ç¤ºå¯é€‰ï¼Œæ¯”å¦‚\n```typescript\nâ‘  æ­£å¸¸ç”¨æ³•\nlet a:[number, number?] = [1];\n\nâ‘¡ å®ƒçš„æˆå‘˜æ•°é‡å¯èƒ½æœ‰ä¸¤ä¸ªã€ä¸‰ä¸ªå’Œå››ä¸ª\ntype myTuple = [\n  number,\n  number,\n  number?,\n  string?\n];\n\nâ‘¢ æ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰ï¼Œå¯ä»¥è¡¨ç¤ºä¸é™æˆå‘˜æ•°é‡çš„å…ƒç»„\ntype NamedNums = [\n  string,\n  ...number[]\n];\nconst a:NamedNums = ['A', 1, 2];\nconst b:NamedNums = ['B', 1, 2, 3];\n\ntype t1 = [string, number, ...boolean[]];\ntype t2 = [string, ...boolean[], number];\ntype t3 = [...boolean[], string, number];\n```\n\n#### 3ã€æˆå‘˜æˆ–è€…å…ƒç´ å\nå…ƒç»„çš„æˆå‘˜å¯ä»¥æ·»åŠ æˆå‘˜åï¼Œè¿™ä¸ª**æˆå‘˜å**æ˜¯è¯´æ˜æ€§çš„\n```typescript\ntype Color = [\n  red: number,\n  green: number,\n  blue: number\n];\n\nconst c:Color = [255, 255, 255];\n\n```\n\n#### 4ã€è¯»å–æˆå‘˜ç±»å‹\nå…ƒç»„å¯ä»¥é€šè¿‡æ–¹æ‹¬å·ï¼Œ**è¯»å–æˆå‘˜ç±»å‹**\n```typescript\ntype Tuple = [string, number];\ntype Age = Tuple[1]; // number\n\nç”±äºå…ƒç»„çš„æˆå‘˜éƒ½æ˜¯æ•°å€¼ç´¢å¼•ï¼Œå³ç´¢å¼•ç±»å‹éƒ½æ˜¯number\ntype Tuple = [string, number, Date];\ntype TupleEl = Tuple[number];  // string|number|Date ,å³ ä¸‰ç§å€¼çš„è”åˆç±»å‹\n\n```\n\n#### 5ã€åªè¯»å…ƒç»„\n```typescript\n// å†™æ³•ä¸€\ntype t = readonly [number, string]\n\n// å†™æ³•äºŒï¼šæ³›å‹ Readonly<T>\ntype t = Readonly<[number, string]>\n```\nåªè¯»å…ƒç»„æ˜¯å…ƒç»„çš„çˆ¶ç±»å‹ï¼Œæ‰€ä»¥ **è°å¯ä»¥ç»™è°èµ‹å€¼çŸ¥é“äº†å—ï¼Ÿ**\nå¦‚ä¸‹ä»£ç ï¼Œä¸ºä»€ä¹ˆä¼ å…¥`åªè¯»å…ƒç»„`å°±ä¼šæŠ¥é”™å‘¢ï¼Ÿå› ä¸º **åªè¯»å…ƒç»„ä¸èƒ½æ›¿ä»£å…ƒç»„**\n```typescript\nfunction distanceFromOrigin([x, y]:[number, number]) {\n  return Math.sqrt(x**2 + y**2);\n}\n\nlet point = [3, 4] as const;\n\ndistanceFromOrigin(point); // æŠ¥é”™\n\né—®ï¼šå¦‚ä½•è§£å†³è¿™ä¸ªæŠ¥é”™é—®é¢˜å‘¢ï¼Ÿä½¿ç”¨ç±»å‹æ–­è¨€ï¼Œå¦‚ä¸‹ï¼š\ndistanceFromOrigin(\n  point as [number, number]\n)\n```\n\n#### 6ã€æˆå‘˜æ•°é‡çš„æ¨æ–­\n```typescript\nâ‘  ts å‘ç° å…ƒç»„pointçš„é•¿åº¦æ˜¯2ï¼Œä¸å¯èƒ½ç­‰äº3ï¼ŒæŠ¥é”™\nfunction f(point: [number, number]) {\n  if (point.length === 3) {  // æŠ¥é”™\n    // ...\n  }\n}\n\nâ‘¡ TypeScript å‘ç°point.lengthçš„ç±»å‹æ˜¯1|2|3ï¼Œä¸å¯èƒ½ç­‰äº4ã€‚\nfunction f(\n  point:[number, number?, number?]\n) {\n  if (point.length === 4) {  // æŠ¥é”™\n    // ...\n  }\n}\n\nâ‘¢ ä½¿ç”¨äº†æ‰©å±•è¿ç®—ç¬¦ï¼ŒTypeScript å°±æ— æ³•æ¨æ–­å‡ºæˆå‘˜æ•°é‡ï¼›æ•…ä¸ä¼šæŠ¥é”™\nconst myTuple:[...string[]]\n  = ['a', 'b', 'c'];\n\nif (myTuple.length === 4) { // æ­£ç¡®\n  // ...\n}\n```\n\n#### 7ã€æ‰©å±•è¿ç®—ç¬¦ä¸æˆå‘˜æ•°é‡\n```typescript\n\nâ‘  æŠ¥é”™åŸå› æ˜¯å‡½æ•°add()åªèƒ½æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä½†æ˜¯ä¼ å…¥çš„æ˜¯...arrï¼ŒTypeScript è®¤ä¸ºè½¬æ¢åçš„å‚æ•°ä¸ªæ•°æ˜¯ä¸ç¡®å®šçš„\nconst arr = [1, 2];\nfunction add(x:number, y:number){\n  // ...\n}\nadd(...arr) // æŠ¥é”™\n\nâ‘¡ arræ˜¯ä¸€ä¸ªæ‹¥æœ‰ä¸¤ä¸ªæˆå‘˜çš„å…ƒç»„ï¼Œæ‰€ä»¥ TypeScript èƒ½å¤Ÿç¡®å®š...arrå¯ä»¥åŒ¹é…å‡½æ•°add()çš„å‚æ•°æ•°é‡ï¼Œå°±ä¸ä¼šæŠ¥é”™äº†\nconst arr:[number, number] = [1, 2];\nfunction add(x:number, y:number){\n  // ...\n}\nadd(...arr) // æ­£ç¡®\n\næˆ–è€… const arr = [1, 2] as const; ä½¿ç”¨ as const æ–­è¨€å³å¯\n\n\nâ‘¢ å› ä¸ºconsole.log()å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°\nconst arr = [1, 2, 3];\nconsole.log(...arr) // æ­£ç¡®\n\n\n```\n\n### ï¼ˆåå››ï¼‰symbol\n\n## å‚è€ƒ\n> [https://jkchao.github.io/typescript-book-chinese/project/dynamicImportExpressions.html](https://jkchao.github.io/typescript-book-chinese/project/dynamicImportExpressions.html)\n[https://ts.xcatliu.com/basics/primitive-data-types.html](https://ts.xcatliu.com/basics/primitive-data-types.html)\n [https://www.fullstackbb.com/typescript/typescript-unknown-as-top-type/](https://www.fullstackbb.com/typescript/typescript-unknown-as-top-type/)\n  [https://wangdoc.com/typescript/any](https://wangdoc.com/typescript/any)\n\n","be0dc33906405b1aa0e015dc93668456":"\n# æµè§ˆå™¨ç¯‡\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## BOM ç¯‡ \n\n- [1. JavaScript ä¸­æœ‰å“ªäº›ä¸ä¼šå†’æ³¡çš„äº‹ä»¶ï¼Œä»¥åŠä¸ºä»€ä¹ˆä¸æ”¯æŒå†’æ³¡ï¼Ÿ](/post/e18dca28cba550b78c39b3124e5f0f96.html)\n- [2. ä½¿ç”¨ requestAnimationFrame æ‰¹é‡å¤„ç†æ“ä½œçš„åŸç†](/post/a46b7be6b5315c388983afe45331e6af.html)\n- [3. MessageChannel åŠå…¶åº”ç”¨åœºæ™¯](/post/0e4bee42677e5a6aaa89420715c26a03.html)\n- [4. å¦‚ä½•æ£€æµ‹é¡µé¢æ˜¯å¦åœ¨å‰å°è¿è¡Œï¼ˆæ£€æµ‹é¡µé¢çš„å¯è§æ€§ï¼‰](/post/d5cd14759c8a5125b17ee466498d9907.html)\n- [5. ä¸ºä»€ä¹ˆè¦ç”¨ setTimeout æ¨¡æ‹Ÿ setInterval ï¼Ÿ](/post/2c2651f3346b562281c476ef811522ec.html)\n\n\n## DOM ç¯‡\n\n## æµè§ˆå™¨æ¸²æŸ“åŸç†ç¯‡\n\n\n## å¼€å‘è€…å·¥å…·\n\n> æ•´ç†æ‰€æœ‰å…³äºå¼€å‘è¿™å·¥å…·çš„ä¸€åˆ‡ï¼\n\n### CSS \n\n- è®¡ç®—æ ·å¼ï¼šåœ¨â€œå…ƒç´ â€é¢æ¿ä¸­ï¼ŒæŸ¥çœ‹å…ƒç´ çš„è®¡ç®—æ ·å¼ï¼Œäº†è§£æœ€ç»ˆåº”ç”¨çš„æ ·å¼å€¼ã€‚\n- ç›’æ¨¡å‹ï¼šæŸ¥çœ‹å…ƒç´ çš„ç›’æ¨¡å‹ï¼Œäº†è§£å…ƒç´ çš„å°ºå¯¸ã€è¾¹è·ã€è¾¹æ¡†å’Œå†…è¾¹è·ã€‚\n- CSS æ–­ç‚¹ï¼šåœ¨â€œæºä»£ç â€é¢æ¿ä¸­ï¼Œè®¾ç½®æ ·å¼è¡¨æ–­ç‚¹ï¼Œå½“æ ·å¼è¡¨è¢«ä¿®æ”¹æ—¶ï¼Œä»£ç ä¼šæš‚åœæ‰§è¡Œï¼Œå¸®åŠ©å®šä½é—®é¢˜ã€‚\n- å…ƒç´ æ£€æŸ¥ï¼šå³é”®ç‚¹å‡»é¡µé¢å…ƒç´ ï¼Œé€‰æ‹©â€œæ£€æŸ¥â€æˆ–æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ŒæŸ¥çœ‹å’Œä¿®æ”¹å…ƒç´ çš„ CSS æ ·å¼ã€‚\n- å®æ—¶ç¼–è¾‘ï¼šåœ¨â€œå…ƒç´ â€é¢æ¿ä¸­ï¼Œç›´æ¥ç¼–è¾‘ CSS è§„åˆ™ï¼Œå®æ—¶æŸ¥çœ‹æ•ˆæœã€‚\n- æ ·å¼å±‚å ï¼šæŸ¥çœ‹å…ƒç´ çš„æ‰€æœ‰æ ·å¼ï¼ŒåŒ…æ‹¬ç”¨æˆ·ä»£ç†æ ·å¼ã€å¤–éƒ¨æ ·å¼è¡¨ã€å†…è”æ ·å¼ç­‰ï¼Œç†è§£æ ·å¼çš„å±‚å å’Œä¼˜å…ˆçº§ã€‚\n\n### HTML\n\n\n### JS\n\n- å®æ—¶ä¿®æ”¹ä»£ç  ï¼š`Shift+Enter` ä½ å¯ä»¥å°è¯•æ­é…ä½¿ç”¨ Shift+Enter æŒ‰é”®å»è¾“å…¥å¤šè¡Œä»£ç \n\n","e18dca28cba550b78c39b3124e5f0f96":"\n# JavaScript ä¸­æœ‰å“ªäº›ä¸ä¼šå†’æ³¡çš„äº‹ä»¶ï¼Œä»¥åŠä¸ºä»€ä¹ˆä¸æ”¯æŒå†’æ³¡ï¼Ÿ\n\n\n`#dom` `#bom` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. äº‹ä»¶ä¼ æ’­çš„ä¸‰ä¸ªé˜¶æ®µ \n\näº‹ä»¶ä¼ æ’­åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š\n\n```javascript\n// äº‹ä»¶ä¼ æ’­ç¤ºæ„\n/*\n1. æ•è·é˜¶æ®µï¼ˆCapturing Phaseï¼‰ï¼šä»é¡¶å±‚å…ƒç´ å‘ä¸‹ä¼ æ’­\n2. ç›®æ ‡é˜¶æ®µï¼ˆTarget Phaseï¼‰ï¼šåˆ°è¾¾ç›®æ ‡å…ƒç´ \n3. å†’æ³¡é˜¶æ®µï¼ˆBubbling Phaseï¼‰ï¼šä»ç›®æ ‡å…ƒç´ å‘ä¸Šä¼ æ’­\n*/\n\ndocument.addEventListener('click', function(e) {\n    console.log('æ•è·é˜¶æ®µ');\n}, true); // ç¬¬ä¸‰ä¸ªå‚æ•° true è¡¨ç¤ºåœ¨æ•è·é˜¶æ®µå¤„ç†\n\nelement.addEventListener('click', function(e) {\n    console.log('ç›®æ ‡é˜¶æ®µ');\n});\n\ndocument.addEventListener('click', function(e) {\n    console.log('å†’æ³¡é˜¶æ®µ');\n}, false); // é»˜è®¤æ˜¯å†’æ³¡é˜¶æ®µ\n```\n\n## 2. ä¸å†’æ³¡çš„äº‹ä»¶åˆ—è¡¨\n\nä»¥ä¸‹äº‹ä»¶ä¸ä¼šå†’æ³¡ï¼š\n\na) ç„¦ç‚¹äº‹ä»¶ï¼š\n- focus\n- blur\nb) èµ„æºäº‹ä»¶ï¼š\n- load\n- unload\n- abort\n- error\nc) é¼ æ ‡äº‹ä»¶ï¼š\n- mouseenter\n- mouseleave\nd) åª’ä½“äº‹ä»¶ï¼š\n- pause\n- play\n- playing\n- ended\n- volumechange\n- stalled\n\n> è¿™äº›äº‹ä»¶**åªåœ¨ç›®æ ‡å…ƒç´ ä¸Šè§¦å‘**\n\nç¤ºä¾‹ä»£ç ï¼š\n\n```javascript\n// ç„¦ç‚¹äº‹ä»¶ç¤ºä¾‹\ndocument.querySelector('input').addEventListener('focus', function(e) {\n    console.log('Input focused');\n    console.log('è¿™ä¸ªäº‹ä»¶ä¸ä¼šå†’æ³¡åˆ°çˆ¶å…ƒç´ ');\n});\n\n// mouseenter/mouseleave vs mouseover/mouseout\nconst parent = document.querySelector('.parent');\nconst child = document.querySelector('.child');\n\n// mouseenter ä¸å†’æ³¡\nparent.addEventListener('mouseenter', () => {\n    console.log('Parent mouseenter'); // åªåœ¨çœŸæ­£è¿›å…¥çˆ¶å…ƒç´ æ—¶è§¦å‘ä¸€æ¬¡\n});\n\n// mouseover ä¼šå†’æ³¡\nparent.addEventListener('mouseover', () => {\n    console.log('Parent mouseover'); // è¿›å…¥å­å…ƒç´ æ—¶ä¹Ÿä¼šè§¦å‘\n});\n```\n\n## 3. ä¸ºä»€ä¹ˆæŸäº›äº‹ä»¶ä¸å†’æ³¡ï¼Ÿ\n\nä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š\n\n### 3.1. æ€§èƒ½è€ƒè™‘\n\n```javascript hl:8\n// æƒ³è±¡å¦‚æœ focus äº‹ä»¶å†’æ³¡ä¼šå‘ç”Ÿä»€ä¹ˆ\n<div>\n    <div>\n        <input id=\"myInput\" />\n    </div>\n</div>\n\n// å¦‚æœ focus å†’æ³¡ï¼Œå½“è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶ï¼Œæ‰€æœ‰çˆ¶å…ƒç´ éƒ½ä¼šæ”¶åˆ°é€šçŸ¥\n// è¿™ä¼šå¯¼è‡´ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€\n```\n\n### 3.2. é€»è¾‘åˆç†æ€§\n\n```javascript\n// ä»¥ mouseenter ä¸ºä¾‹\n<div class=\"parent\">\n    <div class=\"child\"></div>\n</div>\n\n// mouseenter ä¸å†’æ³¡æ˜¯åˆç†çš„ï¼Œå› ä¸ºï¼š\n// 1. ä» parent è¿›å…¥ child æ—¶ï¼Œé¼ æ ‡å®é™…ä¸Šå¹¶æ²¡æœ‰\"è¿›å…¥\"çˆ¶å…ƒç´ \n// 2. å¦‚æœå†’æ³¡ï¼Œä¼šå¯¼è‡´çˆ¶å…ƒç´ é‡å¤è§¦å‘ mouseenter äº‹ä»¶\n```\n\n### 3.3. äº‹ä»¶æœ¬èº«çš„ç‰¹æ€§\n\n```javascript\n// ä¾‹å¦‚ load äº‹ä»¶\n<img src=\"example.jpg\" onload=\"handleLoad()\">\n\n// load äº‹ä»¶è¡¨ç¤ºèµ„æºåŠ è½½å®Œæˆ\n// è¿™æ˜¯ä¸€ä¸ªä¸€æ¬¡æ€§çš„çŠ¶æ€å˜åŒ–ï¼Œæ²¡æœ‰å¿…è¦å‘ä¸Šå†’æ³¡\n```\n\n## 4. å¦‚ä½•å¤„ç†ä¸å†’æ³¡çš„äº‹ä»¶\n\n### 4.1. ä½¿ç”¨æ•è·é˜¶æ®µ\n\n```javascript\n// å¦‚æœç¡®å®éœ€è¦åœ¨çˆ¶å…ƒç´ æ•è·å­å…ƒç´ çš„ focus äº‹ä»¶\nparent.addEventListener('focus', function(e) {\n    console.log('Focus captured');\n}, true); // ä½¿ç”¨æ•è·é˜¶æ®µ\n```\n\n### 4.2. ä½¿ç”¨æ›¿ä»£äº‹ä»¶\n\n```javascript\n// ä½¿ç”¨ focusin/focusout ä»£æ›¿ focus/blur\n// focusin/focusout æ˜¯ä¼šå†’æ³¡çš„\nelement.addEventListener('focusin', function(e) {\n    console.log('Focus detected');\n});\n```\n\n### 4.3. äº‹ä»¶å§”æ‰˜çš„æ›¿ä»£æ–¹æ¡ˆ\n\n```javascript\n// å¯¹äºä¸å†’æ³¡çš„äº‹ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ MutationObserver\nconst observer = new MutationObserver((mutations) => {\n    mutations.forEach((mutation) => {\n        if (mutation.type === 'attributes' && mutation.attributeName === 'focused') {\n            // å¤„ç†ç„¦ç‚¹å˜åŒ–\n        }\n    });\n});\n\nobserver.observe(element, {\n    attributes: true,\n    attributeFilter: ['focused']\n});\n```\n\n## 5. æœ€ä½³å®è·µ\n\n### 5.1. é€‰æ‹©åˆé€‚çš„äº‹ä»¶\n\n```javascript\n// ä¸å¥½çš„å®è·µ\ndocument.addEventListener('mouseenter', function(e) {\n    // è¯•å›¾é€šè¿‡äº‹ä»¶å§”æ‰˜å¤„ç†å­å…ƒç´ çš„ mouseenter\n}, false);\n\n// å¥½çš„å®è·µ\ndocument.addEventListener('mouseover', function(e) {\n    // ä½¿ç”¨å†’æ³¡äº‹ä»¶å®ç°ç±»ä¼¼åŠŸèƒ½\n}, false);\n```\n\n### 5.2. ä½¿ç”¨äº‹ä»¶å§”æ‰˜æ—¶æ³¨æ„\n\n```javascript\n// æ­£ç¡®çš„äº‹ä»¶å§”æ‰˜\ndocument.addEventListener('click', function(e) {\n    if (e.target.matches('.button')) {\n        // å¤„ç†æŒ‰é’®ç‚¹å‡»\n    }\n});\n\n// å¯¹äºä¸å†’æ³¡çš„äº‹ä»¶ï¼Œç›´æ¥ç»‘å®šåˆ°ç›®æ ‡å…ƒç´ \ndocument.querySelectorAll('input').forEach(input => {\n    input.addEventListener('focus', handleFocus);\n});\n```\n\n## 6. è°ƒè¯•æŠ€å·§\n\n```javascript\n// æ£€æµ‹äº‹ä»¶æ˜¯å¦å†’æ³¡\nfunction isEventBubbling(eventName) {\n    const element = document.createElement('div');\n    let bubbles = false;\n    \n    element.addEventListener(eventName, function(e) {\n        bubbles = e.bubbles;\n    });\n    \n    // è§¦å‘äº‹ä»¶\n    const event = new Event(eventName, {\n        bubbles: true,\n        cancelable: true\n    });\n    element.dispatchEvent(event);\n    \n    return bubbles;\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconsole.log(isEventBubbling('click')); // true\nconsole.log(isEventBubbling('focus')); // false\n```\n\n","a46b7be6b5315c388983afe45331e6af":"\n# ä½¿ç”¨ requestAnimationFrame æ‰¹é‡å¤„ç†æ“ä½œçš„åŸç†\n\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. requestAnimationFrame çš„åŸºæœ¬åŸç† \n\nrequestAnimationFrame æ˜¯æµè§ˆå™¨æä¾›çš„ä¸€ä¸ªç”¨äºä¼˜åŒ–åŠ¨ç”»æ¸²æŸ“çš„ APIï¼Œå®ƒçš„æ ¸å¿ƒåŸç†æ˜¯ï¼š\n\n1. åŒæ­¥å±å¹•åˆ·æ–°ç‡ï¼š\n   - rAF ä¼šåœ¨æµè§ˆå™¨ä¸‹ä¸€æ¬¡é‡ç»˜ä¹‹å‰æ‰§è¡Œå›è°ƒå‡½æ•°\n   - é€šå¸¸ä¸æ˜¾ç¤ºå™¨çš„åˆ·æ–°ç‡åŒæ­¥ï¼ˆä¸€èˆ¬æ˜¯ 60Hzï¼Œå³æ¯ç§’ 60 æ¬¡ï¼‰\n   - åœ¨è§†è§‰ä¸Šèƒ½æä¾›æ›´æµç•…çš„åŠ¨ç”»æ•ˆæœ\n2. æ‰¹é‡å¤„ç†æœºåˆ¶ï¼š\n   - **å¤šä¸ª rAF å›è°ƒä¼šåœ¨åŒä¸€ä¸ªæ¸²æŸ“å¸§ä¸­æ‰§è¡Œ**\n   - å¯ä»¥é¿å…åœ¨ä¸€å¸§å†…å¤šæ¬¡è§¦å‘é‡æ’é‡ç»˜\n   - è‡ªåŠ¨èŠ‚æµï¼Œé˜²æ­¢è¿‡åº¦æ¸²æŸ“\n\n## 2. æ‰¹é‡å¤„ç†çš„å®ç°ç¤ºä¾‹\n\n```javascript hl:23\n// å­˜å‚¨å¾…å¤„ç†çš„ä»»åŠ¡\nconst updates = new Set();\n\n// æ ‡è®°æ˜¯å¦å·²ç»è¯·æ±‚æ‰§è¡Œæ‰¹å¤„ç†\nlet isPending = false;\n\n// æ‰¹é‡å¤„ç†å‡½æ•°\nfunction batchProcess() {\n    // æ‰§è¡Œæ‰€æœ‰æ›´æ–°ä»»åŠ¡\n    updates.forEach(update => update());\n    // æ¸…ç©ºä»»åŠ¡é˜Ÿåˆ—\n    updates.clear();\n    // é‡ç½®è¯·æ±‚æ ‡è®°\n    isPending = false;\n}\n\n// æ·»åŠ æ›´æ–°ä»»åŠ¡\nfunction scheduleUpdate(update) {\n    updates.add(update);\n    \n    if (!isPending) {\n        isPending = true;\n        requestAnimationFrame(batchProcess);\n    }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nfunction updateElement(element, value) {\n    scheduleUpdate(() => {\n        element.style.transform = `translateX(${value}px)`;\n    });\n}\n```\n\n## 3. å®é™…åº”ç”¨åœºæ™¯\n\n### 3.1. DOM æ‰¹é‡æ›´æ–°\n\n```javascript hl:5\n// æ‰¹é‡æ›´æ–°å¤šä¸ªå…ƒç´ \nfunction batchUpdateElements() {\n    const elements = document.querySelectorAll('.animated');\n    elements.forEach((el, index) => {\n        scheduleUpdate(() => {\n            el.style.opacity = Math.random();\n            el.style.transform = `translateX(${index * 10}px)`;\n        });\n    });\n}\n```\n\n### 3.2. æ•°æ®å¯è§†åŒ–æ›´æ–°\n\n```javascript hl:7\nfunction updateChart(data) {\n    let isScheduled = false;\n    \n    data.forEach(item => {\n        if (!isScheduled) {\n            isScheduled = true;\n            requestAnimationFrame(() => {\n                // æ‰¹é‡æ›´æ–°å›¾è¡¨æ•°æ®\n                renderChart(data);\n                isScheduled = false;\n            });\n        }\n    });\n}\n```\n\n## 4. ä¼˜åŠ¿å’Œæ³¨æ„äº‹é¡¹\n\n### 4.1.1. ä¼˜åŠ¿\n\n1. æ€§èƒ½ä¼˜åŒ–ï¼š\n   - å‡å°‘é‡æ’é‡ç»˜çš„æ¬¡æ•°\n   - æ›´å¥½çš„å†…å­˜ä½¿ç”¨\n   - æ›´æµç•…çš„åŠ¨ç”»æ•ˆæœ\n2. è‡ªåŠ¨è°ƒèŠ‚ï¼š\n   - åœ¨`æ ‡ç­¾é¡µä¸å¯è§æ—¶è‡ªåŠ¨æš‚åœ`ï¼Œæ‰€ä»¥æœ‰ æ›´å¥½çš„ç”µæ± å¯¿å‘½\n   - æ ¹æ®è®¾å¤‡æ€§èƒ½è‡ªåŠ¨è°ƒæ•´æ‰§è¡Œé¢‘ç‡\n\n## 4.2. æ³¨æ„äº‹é¡¹\n\n### 4.2.1. æ—¶åºæ€§\n\n- rAF çš„æ‰§è¡Œæ˜¯å¼‚æ­¥çš„\n- å¦‚æœæ“ä½œæœ‰ä¸¥æ ¼çš„æ—¶åºè¦æ±‚ï¼Œéœ€è¦ç‰¹åˆ«å¤„ç†\n### 4.2.2. å…¼å®¹æ€§å¤„ç†\n\n```javascript\n// å…¼å®¹æ€§å°è£…\nconst raf = window.requestAnimationFrame ||\n           window.webkitRequestAnimationFrame ||\n           window.mozRequestAnimationFrame ||\n           function(callback) {\n               return window.setTimeout(callback, 1000 / 60);\n           };\n```\n\n### 4.2.3. å–æ¶ˆæ“ä½œ\n\n```javascript\nconst rafId = requestAnimationFrame(callback);\n// éœ€è¦æ—¶å¯ä»¥å–æ¶ˆ\ncancelAnimationFrame(rafId);\n```\n","0e4bee42677e5a6aaa89420715c26a03":"\n# MessageChannel åŠå…¶åº”ç”¨åœºæ™¯\n\n\n\nMessageChannel æ˜¯ HTML5 ä¸­çš„ä¸€ä¸ª APIï¼Œå®ƒæä¾›äº†ä¸€ç§åœ¨**ä¸åŒçš„æµè§ˆå™¨ä¸Šä¸‹æ–‡ï¼ˆå¦‚çª—å£ã€æ ‡ç­¾é¡µã€iframeï¼‰ä¹‹é—´**å»ºç«‹åŒå‘é€šä¿¡é€šé“çš„æ–¹æ³•ã€‚æ¯ä¸ª MessageChannel éƒ½æœ‰ä¸¤ä¸ª MessagePort å¯¹è±¡ï¼Œå®ƒä»¬åˆ†åˆ«ä»£è¡¨é€šé“çš„ä¸¤ä¸ªç«¯ç‚¹ã€‚\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. MessageChannel çš„åŸºæœ¬ç»“æ„ \n\n```javascript hl:5\n// åˆ›å»ºä¸€ä¸ªæ–°çš„æ¶ˆæ¯é€šé“\nconst channel = new MessageChannel();\n\n// channel.port1 å’Œ channel.port2 æ˜¯ä¸¤ä¸ªç«¯å£\nconst port1 = channel.port1;\nconst port2 = channel.port2;\n```\n\n## 2. åŸºæœ¬ä½¿ç”¨æ–¹å¼\n\n```javascript\n// åˆ›å»ºæ¶ˆæ¯é€šé“\nconst channel = new MessageChannel();\n\n// è®¾ç½® port1 çš„æ¶ˆæ¯å¤„ç†ç¨‹åº\nchannel.port1.onmessage = (event) => {\n    console.log('Port1 æ”¶åˆ°æ¶ˆæ¯:', event.data);\n};\n\n// é€šè¿‡ port2 å‘é€æ¶ˆæ¯\nchannel.port2.postMessage('ä½ å¥½ï¼Œè¿™æ˜¯æ¥è‡ª Port2 çš„æ¶ˆæ¯');\n```\n\n## 3. ä¸»è¦ä½¿ç”¨åœºæ™¯\n\n### 3.1. Web Worker é€šä¿¡\n\n```javascript\n// ä¸»çº¿ç¨‹\nconst worker = new Worker('worker.js');\nconst channel = new MessageChannel();\n\n// å°† port2 ä¼ é€’ç»™ Worker\nworker.postMessage({ port: channel.port2 }, [channel.port2]);\n\n// ç›‘å¬ port1 çš„æ¶ˆæ¯\nchannel.port1.onmessage = (event) => {\n    console.log('ä» Worker æ”¶åˆ°æ¶ˆæ¯:', event.data);\n};\n\n// worker.js ä¸­çš„ä»£ç \nself.onmessage = (event) => {\n    const port = event.data.port;\n    port.postMessage('Worker å‘é€çš„æ¶ˆæ¯');\n};\n```\n\n### 3.2. iframe ä¹‹é—´çš„é€šä¿¡\n\n```javascript\n// çˆ¶é¡µé¢\nconst iframe = document.querySelector('iframe');\nconst channel = new MessageChannel();\n\niframe.addEventListener('load', () => {\n    // å°† port2 ä¼ é€’ç»™ iframe\n    iframe.contentWindow.postMessage('åˆå§‹åŒ–é€šé“', '*', [channel.port2]);\n    \n    // ç›‘å¬æ¥è‡ª iframe çš„æ¶ˆæ¯\n    channel.port1.onmessage = (event) => {\n        console.log('ä» iframe æ”¶åˆ°æ¶ˆæ¯:', event.data);\n    };\n});\n\n// iframe ä¸­çš„ä»£ç \nwindow.addEventListener('message', (event) => {\n    const port = event.ports[0];\n    port.postMessage('iframe å‘é€çš„æ¶ˆæ¯');\n});\n```\n\n### 3.3. å¾®å‰ç«¯æ¶æ„ä¸­çš„é€šä¿¡\n\n```javascript\n// ä¸»åº”ç”¨\nconst channel = new MessageChannel();\nconst microApp = document.querySelector('#micro-app');\n\nmicroApp.contentWindow.postMessage({ type: 'init', port: channel.port2 }, '*', [channel.port2]);\n\nchannel.port1.onmessage = (event) => {\n    console.log('ä»å¾®åº”ç”¨æ”¶åˆ°æ¶ˆæ¯:', event.data);\n};\n\n// å¾®åº”ç”¨ä¸­\nwindow.addEventListener('message', (event) => {\n    if (event.data.type === 'init') {\n        const port = event.ports[0];\n        // ä½¿ç”¨ port è¿›è¡Œé€šä¿¡\n    }\n});\n```\n\n### 3.4. ç»„ä»¶é—´éš”ç¦»é€šä¿¡\n\n```javascript\n// ç»„ä»¶ A\nconst channelA = new MessageChannel();\nconst componentB = document.querySelector('#componentB');\n\ncomponentB.port = channelA.port2;\nchannelA.port1.onmessage = (event) => {\n    console.log('ç»„ä»¶Aæ”¶åˆ°æ¶ˆæ¯:', event.data);\n};\n\n// ç»„ä»¶ B\nconst port = this.port; // ä»ç»„ä»¶å±æ€§ä¸­è·å–\nport.postMessage('ä»ç»„ä»¶Bå‘é€æ¶ˆæ¯');\n```\n\n### 3.5. å¹¿æ’­é€šé“\n\nå¯ä»¥åˆ›å»ºä¸€ä¸ªå¹¿æ’­ç³»ç»Ÿï¼Œwhere`å¤šä¸ªçª—å£æˆ–æ ‡ç­¾é¡µ`å¯ä»¥è®¢é˜…å’Œæ¥æ”¶æ¶ˆæ¯\n## 4. MessageChannel çš„ä¼˜åŠ¿\n\n1. åŒå‘é€šä¿¡ï¼šä¸¤ä¸ªç«¯å£éƒ½å¯ä»¥å‘é€å’Œæ¥æ”¶æ¶ˆæ¯\n2. å®‰å…¨æ€§ï¼šæ¯”ç›´æ¥ä½¿ç”¨ postMessage æ›´å®‰å…¨ï¼Œå› ä¸ºé€šä¿¡æ˜¯ç‚¹å¯¹ç‚¹çš„\n3. éš”ç¦»æ€§ï¼šä¸åŒçš„é€šé“ä¹‹é—´äº’ä¸å¹²æ‰°\n4. æ€§èƒ½ï¼šé€‚åˆé¢‘ç¹é€šä¿¡çš„åœºæ™¯ï¼Œæ€§èƒ½è¾ƒå¥½\n\n## 5. æ³¨æ„äº‹é¡¹\n\n### 5.1. ç«¯å£ä¼ è¾“ï¼šç«¯å£åœ¨ä¼ è¾“æ—¶éœ€è¦ä½¿ç”¨å¯è½¬ç§»å¯¹è±¡ï¼ˆTransferable Objectsï¼‰\n\n```javascript\n// æ­£ç¡®çš„ä¼ è¾“æ–¹å¼\npostMessage({ port: port2 }, [port2]);\n```\n\n### 5.2. ç«¯å£å…³é—­ï¼šä¸å†éœ€è¦æ—¶åº”è¯¥å…³é—­ç«¯å£\n\n```javascript\nport1.close();\nport2.close();\n```\n\n### 5.3. é”™è¯¯å¤„ç†ï¼šåº”è¯¥æ·»åŠ é”™è¯¯å¤„ç†æœºåˆ¶\n\n```javascript\nchannel.port1.onerror = (error) => {\n    console.error('é€šä¿¡é”™è¯¯:', error);\n};\n```\n","d5cd14759c8a5125b17ee466498d9907":"\n# å¦‚ä½•æ£€æµ‹é¡µé¢æ˜¯å¦åœ¨å‰å°è¿è¡Œï¼ˆæ£€æµ‹é¡µé¢çš„å¯è§æ€§ï¼‰\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¦–å…ˆè¯´è¯´ä¸ºä»€ä¹ˆéœ€è¦æ£€æµ‹ \n\né¡µé¢è¢«`æœ€å°åŒ–`æˆ–`éšè—`æˆ–è€…åœ¨`åå°è¿è¡Œ`ï¼Œé‚£ä¹ˆ`è½®è¯¢æœåŠ¡å™¨`æˆ–`æ›´æ–°åŠ¨ç”»`ç­‰åŠ¨ä½œå°±ä¸å¿…è¦äº†ã€‚\n\n## 2. å¸¸è§çš„å‡ ç§æ–¹æ³•\n\n1ã€document.hidden åªè¯»å±æ€§\n\n2ã€document.visibilityState æ£€æµ‹é¡µé¢å¯è§æ€§ï¼Œè¿”å›åªè¯»å±æ€§\n\n3ã€visibilitychange äº‹ä»¶\n\n4ã€`window.addEventListener()`æ–¹æ³•ç›‘å¬ `blur` å’Œ `focus` äº‹ä»¶æ¥æ£€æµ‹é¡µé¢æ˜¯å¦åœ¨å‰å°æˆ–åå°ã€‚å½“**é¡µé¢**å¤±å»ç„¦ç‚¹æ—¶è§¦å‘ `blur` äº‹ä»¶ï¼Œè€Œå½“**é¡µé¢**é‡æ–°è·å¾—ç„¦ç‚¹æ—¶è§¦å‘ `focus` äº‹ä»¶ã€‚äº²æµ‹å¯ä»¥\n\n5ã€`document.hasFocus()` æ£€æµ‹é¡µé¢æ˜¯å¦åœ¨å‰å°ï¼Œå³æ˜¯å¦è·å¾—ç„¦ç‚¹\n\n6ã€ä¸€äº›é¡µé¢ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ä¹Ÿå¯ä»¥\n\n- `pagehide`\n- `beforeunload`\n- `unload` \n- `pageshow`\n\n## 3. æœ€å\n\næ³¨æ„å…¼å®¹æ€§ï¼Œå¦å¤–æ•´ä½“å¯ä»¥åˆ†ä¸ºä¸¤ç±» \n\n- documentä¸Šçš„`å±æ€§å€¼`æˆ–è€…`å…·ä½“æ–¹æ³•` \n- ç›‘å¬ç‰¹å®šäº‹ä»¶","2c2651f3346b562281c476ef811522ec":"\n# ä¸ºä»€ä¹ˆè¦ç”¨ setTimeout æ¨¡æ‹Ÿ setInterval ï¼Ÿ\n\n\n`#2023/03/20` `#å‰ç«¯` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å…ˆè¯´è¯´ `setInterval`  çš„é—®é¢˜ \n\n`setInterval(fn, N)`;  å³`fn()` å°†ä¼šåœ¨ `N` ç§’ä¹‹åè¢«æ¨å…¥`ä»»åŠ¡é˜Ÿåˆ—`ï¼Œä½†æ˜¯æ¯æ¬¡æ¨ä¹‹å‰ï¼Œéƒ½è¦åˆ¤æ–­çœ‹`ä¸Šæ¬¡çš„ä»»åŠ¡æ˜¯å¦è¿˜åœ¨é˜Ÿåˆ—ä¸­`ï¼Œå¦‚æœåœ¨ï¼Œåˆ™ä¸æ·»åŠ ã€‚æ‰€ä»¥ `setInterval` æœ‰ä¸¤ä¸ª`ç¼ºç‚¹`ï¼š\n\n- ä½¿ç”¨ `setInterval` æ—¶ï¼ŒæŸäº›é—´éš”ä¼š`è¢«è·³è¿‡`ï¼›\n- ç”šè‡³å¯èƒ½å¤šä¸ªå®šæ—¶å™¨ä¼š`è¿ç»­æ‰§è¡Œ` ï¼Œå³åˆšå¥½åœ¨ä¸¤ä¸ªé˜Ÿåˆ—çš„ç¼éš™æ—¶ï¼Œä¼š`è¿ç»­æ‰§è¡Œ`\n\n## 2. å†çœ‹çœ‹ `setTimeout`\n\nä¸€ä¸ªç»å…¸æ¡ˆä¾‹ï¼š\n```javascript\nfor (var i = 0; i < 5; i++) {\n  setTimeout(function() {\n    console.log(i);\n  }, 1000);\n}\n```\n\nä¸ºä»€ä¹ˆæ˜¯`ä¸€ç§’åè¾“å‡ºäº† 5 ä¸ª 5` å‘¢ï¼Ÿ `for` æ˜¯`ä¸»çº¿ç¨‹ä»£ç `ï¼Œå…ˆæ‰§è¡Œå®Œäº†ï¼Œæ‰è½®åˆ°æ‰§è¡Œ `setTimeout`\næ¯ä¸ª `setTimeout` äº§ç”Ÿçš„æ–°çš„ä»»åŠ¡ä¼šç›´æ¥ `push` åˆ°`ä»»åŠ¡é˜Ÿåˆ—`ä¸­ã€‚è€Œä¸”å®ƒæ˜¯`ä¸€æ¬¡æ€§`çš„ï¼Œ\næˆ–è€…æ¢ä¸ªæ€è·¯ï¼Œ`setInterval` å¾ªç¯æ‰§è¡Œï¼Œé“¾è·¯é•¿ï¼Œä¸å¥½æ§åˆ¶ï¼Œè€Œ `setTimeout` åªæ˜¯å»¶æ—¶`ä¸€æ¬¡` ï¼Œæ–¹ä¾¿æ§åˆ¶ã€‚\n\n## 3. ä½¿ç”¨ `setTimeout`  æ¥æ¨¡æ‹Ÿ  `setInterval`\n\n```javascript\nfunction mySetInterval(fn, timeout) {\n    // ::::å…³é”®ï¼Œæ ‡è¯†æ˜¯å¦ç»§ç»­,å¹¶è¿”å›\n    let timer = {\n        flag: true\n    }\n    // :::: ä¸¤æ¬¡ settimeoutï¼Œéœ€è¦é—­åŒ…å®šä¹‰ä¸€ä¸ªå‡½æ•°\n    function func() {\n        if (timer.flag) {\n            fn();\n            setTimeout(func, timeout);\n        }\n    }\n    setTimeout(func, timeout);\n    return timer;\n}\n\n// æµ‹è¯•\nconst timer = mySetInterval(() => {\n    console.log('log 1');\n},1000)\n\n// 5såï¼Œåœæ­¢å®šæ—¶å™¨\nsetTimeout(() => {\n    timer.flag = false;\n},5000)\n\n```\n\n> [!danger]\n æ‰‹å†™è¿™ç§ä»£ç æ—¶ï¼Œ`å¥—è·¯` å°±æ˜¯ å‡½æ•° é‡Œ å†å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå½¢æˆ`é—­åŒ…`ï¼Œå¦å¤–éœ€è¦`è¿”å› å®šæ—¶æ ‡è¯†`ï¼Œå¦å¤–ä¸€å®šä¼šæœ‰é€’å½’ï¼Œæ¯”å¦‚è¿™é‡Œçš„ `func` \n\n## 4. æœ€å\n\nå†æ¬¡å¼ºè°ƒï¼Œå®šæ—¶å™¨æŒ‡å®šçš„`æ—¶é—´é—´éš”`ï¼Œè¡¨ç¤ºçš„æ˜¯ `ä½•æ—¶å°†å®šæ—¶å™¨çš„ä»£ç æ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—`ï¼Œè€Œ`ä¸æ˜¯ä½•æ—¶æ‰§è¡Œä»£ç `ã€‚ æ‰€ä»¥çœŸæ­£ä½•æ—¶æ‰§è¡Œä»£ç çš„æ—¶é—´æ˜¯ä¸èƒ½ä¿è¯çš„ï¼Œå–å†³äº`ä½•æ—¶è¢«ä¸»çº¿ç¨‹çš„äº‹ä»¶å¾ªç¯å–åˆ°ï¼Œå¹¶æ‰§è¡Œ`.\n\nW3Cåœ¨HTMLæ ‡å‡†ä¸­è§„å®šï¼Œè§„å®šè¦æ±‚ `setTimeout` ä¸­ä½äº`4ms`çš„æ—¶é—´é—´éš”ç®—ä¸º`4ms`ã€‚\n\n## 5. å‚è€ƒ\n\n- [https://juejin.cn/post/6914201197620494350](https://juejin.cn/post/6914201197620494350)\n","d9e0588bf2d759d5a53bb6d70f656ddb":"\n# Nodejs ç¯‡\n\n`#nodejs`\n\n","eb26d0d3bd8e538ea252230895d96328":"\n# Nodejs ç¯‡ï¼ˆç¯‡ä¸€ï¼‰\n\n`#å‰ç«¯é¢è¯•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ç£ç›˜ä¸ŠæŸç›®å½•ä¸‹æœ‰100ä¸ªJSONæ–‡ä»¶ï¼Œè¯·åˆå¹¶æˆ 1ä¸ªJSONæ–‡ä»¶ \n\n- ä½¿ç”¨ `require` ç›´æ¥ç®€å•åŒæ­¥å†™å…¥ï¼Œç„¶ååˆå¹¶\n\t- åŒæ­¥é˜»å¡ï¼Œå†…å­˜æ¶ˆè€—å¤§\n- ä½¿ç”¨ `readFile` å¼‚æ­¥è¯»å–ï¼Œå¹¶ä¿®æ”¹æˆ Promise \n\t- å¯å¹¶å‘ï¼Œä½†å†…å­˜å ç”¨é«˜\n- æµå¤„ç†ï¼šå¼•å…¥ `stream` ã€ `createWriteStream`  ã€`new Readalble`\n\t- å†…å­˜å ç”¨ä½ï¼Œå¯å¤„ç†å¤§æ–‡ä»¶ï¼Œä½†ä¸²è¡Œå¤„ç†ï¼Œé€Ÿåº¦è¾ƒæ…¢\n- å·¥ä½œçº¿ç¨‹ï¼šä½¿ç”¨ `worker_threads` \n\t- å……åˆ†åˆ©ç”¨å¤šæ ¸CPUï¼Œå¹¶è¡Œå¤„ç†\n- ä¼˜åŒ–çš„æµå¤„ç†\n\t- å¼‚æ­¥ + æµå¤„ç†\n\nè¡¥å……è¯´æ˜ï¼š\n- æ‰€æœ‰æ–¹æ¡ˆéƒ½åº”è¯¥æ·»åŠ `é”™è¯¯å¤„ç†`\n- ç”Ÿäº§ç¯å¢ƒä¸­åº”è¯¥æ·»åŠ `æ—¥å¿—è®°å½•`\n- å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚`è°ƒæ•´å¹¶å‘æ•°å’Œç¼“å†²åŒºå¤§å°`\n- è€ƒè™‘æ·»åŠ `è¿›åº¦æç¤º`åŠŸèƒ½\n\n## 2. require å’Œ readFileSync ä¸€ä¸ª JSON æ–‡ä»¶çš„åŒºåˆ«æ˜¯ï¼Ÿ\n\n- æ˜¯å¦ç¼“å­˜\n\t- require ä¼šç¼“å­˜ï¼Œæ‰€ä»¥ä¼š**å¸¸é©»å†…å­˜**\n\t- readFileSync æ¯æ¬¡éƒ½é‡æ–°è¯»å–ï¼Œæ‰€ä»¥ **ä¸å¸¸é©»å†…å­˜**\n- æ–‡ä»¶æ›´æ–°å¤„ç†\n\t- require ä¸ä¼šæ„ŸçŸ¥æ–‡ä»¶æ›´æ–°ï¼Œå³ä½¿å¤–éƒ¨ä¿®æ”¹äº†ï¼Œ ä¾ç„¶æ˜¯ä»ç¼“å­˜é‡Œè·å–æ—§æ•°æ®\n\t- readFileSync æ¯æ¬¡éƒ½æ˜¯æœ€æ–°æ•°æ®\n- é”™è¯¯å¤„ç†\n\t- require çš„é”™è¯¯å¤„ç†ï¼Œä¼šæŠ›å‡º MODULE_NOT_FOUND é”™è¯¯\n\t- readFileSync çš„é”™è¯¯å¤„ç†ï¼Œä¼šæŠ›å‡º ENOENT é”™è¯¯ï¼ˆENOENT = Error NO ENTryï¼ˆæˆ– Error NO ENTityï¼‰ï¼‰\n\t\t- è¡¨ç¤ºç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•\n\t\t- ä¸»è¦åŸå› åŒ…æ‹¬è·¯å¾„é”™è¯¯ã€æƒé™é—®é¢˜ã€å¼‚æ­¥æ“ä½œé¡ºåºç­‰\n- è·¯å¾„è§£æ\n\t- require ä½¿ç”¨æ¨¡å—è§£æè§„åˆ™\n\t- readFileSync ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿè·¯å¾„\n- å®é™…åº”ç”¨åœºæ™¯\n\t- requireï¼šé…ç½®æ–‡ä»¶ï¼ˆä¸éœ€è¦åŠ¨æ€æ›´æ–°ï¼‰ã€é™æ€æ•°æ®ã€æ¨¡å—åŒ–çš„ JSON æ•°æ®\n\t- readFileSyncï¼šæ–‡ä»¶ç›‘æ§åœºæ™¯ã€éœ€è¦åŠ¨æ€æ›´æ–°çš„é…ç½®ã€**å¤§æ–‡ä»¶å¤„ç†** ï¼Œä½†å¤§æ–‡ä»¶å»ºè®®è€ƒè™‘ä½¿ç”¨**æµå¼**å¤„ç†\n\n## 3. cjm / esm çš„åŒºåˆ«\n\n### 3.1. å¼•ç”¨ä¸æ‹·è´\n\n- ESMè¾“å‡ºçš„æ˜¯`å€¼çš„å¼•ç”¨`ï¼Œè€ŒCJSè¾“å‡ºçš„æ˜¯`å€¼çš„æ‹·è´`ï¼›\n\n### 3.2. è¿è¡Œæ—¶ä¸ç¼–è¯‘æ—¶\n\n- CJSçš„è¾“å‡ºæ˜¯`è¿è¡Œæ—¶åŠ è½½`ï¼Œè€ŒESMæ˜¯ `ç¼–è¯‘æ—¶` è¾“å‡ºæ¥å£ï¼›\n\n### 3.3. åŒæ­¥ä¸å¼‚æ­¥\n\n- CJSæ˜¯`åŒæ­¥åŠ è½½`ï¼ŒESMæ˜¯`å¼‚æ­¥åŠ è½½`ï¼› \n\t-  åŒæ­¥æ˜¯æœåŠ¡å™¨ä»£ç éƒ½åœ¨**æœ¬åœ°**ï¼Œæµè§ˆå™¨éœ€è¦å»**å¼‚æ­¥**æ‹¿\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241027-1.png)\n\n### 3.4. åŠ¨æ€åŠ è½½\n\n- éƒ½æ”¯æŒ  `åŠ¨æ€åŠ è½½`\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241027-2.png)\n### 3.5. æ–‡ä»¶æ‰©å±•åä¸ `package.json`é…ç½®\n\n- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241027-3.png)\n\n### 3.6. é¡¶çº§ `await` æ”¯æŒ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241027-4.png)\n\n### 3.7. `this` æŒ‡å‘\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241027-5.png)\n\n### 3.8. **å¾ªç¯å¼•ç”¨**çš„å¤„ç†å·®å¼‚\n\n- CommonJS\n\t- æ¨¡å—åœ¨é¦–æ¬¡ require æ—¶ä¼šè¢« `ç¼“å­˜`\n\t\t- å› ä¸ºæ˜¯`ç¼“å­˜` ï¼Œæ‰€ä»¥é¿å…äº† **æ— é™å¾ªç¯**\n\t- å¦‚æœå‡ºç°å¾ªç¯å¼•ç”¨ï¼Œä¼šè¿”å›æœªå®Œæˆçš„å¯¼å‡ºå¯¹è±¡\n\t- å¯èƒ½å¯¼è‡´è·å–åˆ°éƒ¨åˆ†åˆå§‹åŒ–çš„å¯¹è±¡\n- ESM\n\t- ä½¿ç”¨ç»‘å®šå¼•ç”¨è€Œä¸æ˜¯ å€¼æ‹·è´\n\t- æä¾›äº†`é™æ€åˆ†æèƒ½åŠ›`ï¼Œå¯ä»¥åœ¨`ç¼–è¯‘`æ—¶æ£€æµ‹é—®é¢˜\n\t- `webpack æ’ä»¶`æˆ–è€… `vite æ’ä»¶`æ£€æµ‹æ˜¯å¦å¾ªç¯å¼•ç”¨äº†\n\n### 3.9. é”™è¯¯å¤„ç†æœºåˆ¶\n\n#### 3.9.1. cjs \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241027.png)\n\n```javascript\n// CJS\ntry {\n    require('./non-existent');\n} catch (err) {\n    console.log(err.code);  // MODULE_NOT_FOUND\n}\n\n// ESM\nimport './non-existent.js'\n    .catch(err => {\n        console.log(err.code);  // ERR_MODULE_NOT_FOUND\n    });\n\n```\n\n## 4. ESM å’Œ CJS çš„æ··åˆä½¿ç”¨\n\n### 4.1. ESM ä¸­ä½¿ç”¨ CJS æ¨¡å—\n\n```javascript hl:1,9\n// æ–¹æ³•1ï¼šä½¿ç”¨ createRequire\nimport { createRequire } from 'module';\nconst require = createRequire(import.meta.url);\n\n// ç°åœ¨å¯ä»¥ä½¿ç”¨ require äº†\nconst fs = require('fs');\nconst lodash = require('lodash');\n\n// æ–¹æ³•2ï¼šä½¿ç”¨åŠ¨æ€ import ä»£æ›¿ require\n// cjs-module.js (CommonJS)\nmodule.exports = { hello: 'world' };\n\n// esm-module.mjs (ESM)\nconst cjsModule = await import('./cjs-module.js');\nconsole.log(cjsModule.default.hello); // æ³¨æ„ï¼šéœ€è¦ä½¿ç”¨ .default\n```\n\n### 4.2. CJS ä¸­ä½¿ç”¨ ESM æ¨¡å—\n\n```javascript hl:1,12\n// æ–¹æ³•1ï¼šä½¿ç”¨å¼‚æ­¥ import()\n// esm-module.mjs\nexport const hello = 'world';\n\n// cjs-module.js\nasync function loadEsm() {\n    const esmModule = await import('./esm-module.mjs');\n    console.log(esmModule.hello);\n}\nloadEsm();\n\n// æ–¹æ³•2ï¼šä½¿ç”¨ async/await åŒ…è£…\n(async () => {\n    const { hello } = await import('./esm-module.mjs');\n    console.log(hello);\n})();\n```\n\n### 4.3. åŒ…è£… CJS æ¨¡å—ä¸º ESM\n\n```javascript hl:8\n// wrapper.mjs\nimport { createRequire } from 'module';\nconst require = createRequire(import.meta.url);\n\n// å¯¼å…¥ CJS æ¨¡å—\nconst cjsModule = require('./cjs-module');\n\n// é‡æ–°å¯¼å‡ºä¸º ESM\nexport const { methodA, methodB } = cjsModule;\nexport default cjsModule;\n```\n\n### 4.4. åœ¨ package.json ä¸­é…ç½®åŒæ¨¡å¼æ”¯æŒ\n\n```json\n{\n    \"name\": \"my-package\",\n    \"exports\": {\n        \".\": {\n            \"import\": \"./dist/index.mjs\",\n            \"require\": \"./dist/index.cjs\"\n        }\n    },\n    \"main\": \"./dist/index.cjs\",\n    \"module\": \"./dist/index.mjs\",\n    \"type\": \"module\"\n}\n```\n\n### 4.5. æ¡ä»¶å¯¼å‡º\n\n```javascript\n// index.cjs\nif (typeof require !== 'undefined') {\n    module.exports = require('./cjs/index.js');\n}\n\n// index.mjs\nexport * from './esm/index.js';\n```\n\n### 4.6. å¤„ç†ä¸åŒçš„å¯¼å‡ºæ–¹å¼\n\n```javascript\n// CJS æ¨¡å—\n// math.cjs\nmodule.exports = {\n    add: (a, b) => a + b,\n    subtract: (a, b) => a - b\n};\n\n// ESM åŒ…è£…å™¨\n// math.mjs\nimport { createRequire } from 'module';\nconst require = createRequire(import.meta.url);\n\nconst cjsMath = require('./math.cjs');\n\n// é‡æ–°å¯¼å‡ºä¸ºå…·åå¯¼å‡º\nexport const { add, subtract } = cjsMath;\n\n// åŒæ—¶æä¾›é»˜è®¤å¯¼å‡º\nexport default cjsMath;\n```\n\n### 4.7. å¤„ç†å¼‚æ­¥æ“ä½œ\n\n```javascript\n// async-cjs.cjs\nmodule.exports = async function getData() {\n    return Promise.resolve('data');\n};\n\n// async-esm.mjs\nimport { createRequire } from 'module';\nconst require = createRequire(import.meta.url);\n\nconst getData = require('./async-cjs.cjs');\n\n// ä½¿ç”¨å¼‚æ­¥å‡½æ•°åŒ…è£…\nexport async function fetchData() {\n    return await getData();\n}\n```\n\n### 4.8. ç±»å‹å®šä¹‰çš„å¤„ç†\n\n```typescript\n// types.d.ts\ndeclare module 'my-mixed-module' {\n    // CJS é£æ ¼\n    export = {\n        method: () => void\n    };\n    \n    // ESM é£æ ¼\n    export const method: () => void;\n}\n```\n\n### 4.9. åŠ¨æ€å¯¼å…¥å¤„ç†\n\n- å…ˆå°è¯• ESM å¯¼å…¥\n- é™çº§åˆ° CJS\n\n```javascript\n// dynamic-import.mjs\nasync function loadModule(modulePath) {\n    try {\n        // å°è¯• ESM å¯¼å…¥\n        return await import(modulePath);\n    } catch (err) {\n        // é™çº§åˆ° CJS\n        const require = createRequire(import.meta.url);\n        return require(modulePath);\n    }\n}\n```\n\n### 4.10. ç¯å¢ƒæ£€æµ‹ï¼š`typeof require === 'undefined'`\n\n```javascript\n// utils.js\nexport function isESM() {\n    return typeof require === 'undefined';\n}\n\nexport function isCJS() {\n    return typeof require !== 'undefined';\n}\n\n// æ ¹æ®ç¯å¢ƒä½¿ç”¨ä¸åŒçš„å¯¼å…¥æ–¹å¼\nconst loader = isESM() ? \n    (m) => import(m) : \n    (m) => Promise.resolve(require(m));\n```\n\n### 4.11. é”™è¯¯å¤„ç†\n\n```javascript\n// error-handler.mjs\nexport async function safeImport(modulePath) {\n    try {\n        const module = await import(modulePath);\n        return module;\n    } catch (err) {\n        if (err.code === 'ERR_REQUIRE_ESM') {\n            // å¤„ç† ESM æ¨¡å—çš„æƒ…å†µ\n            console.log('This is an ESM module');\n        } else if (err.code === 'MODULE_NOT_FOUND') {\n            // å¤„ç†æ¨¡å—æœªæ‰¾åˆ°çš„æƒ…å†µ\n            console.log('Module not found');\n        }\n        throw err;\n    }\n}\n```\n\n### 4.12. æ„å»ºå·¥å…·é…ç½®\n\n```javascript\n// rollup.config.js\nimport commonjs from '@rollup/plugin-commonjs';\n\nexport default {\n    input: 'src/index.js',\n    output: [\n        {\n            file: 'dist/bundle.cjs.js',\n            format: 'cjs'\n        },\n        {\n            file: 'dist/bundle.esm.js',\n            format: 'esm'\n        }\n    ],\n    plugins: [\n        commonjs() // è½¬æ¢ CJS åˆ° ESM\n    ]\n};\n```\n\n### 4.13. æœ€ä½³å®è·µå»ºè®®\n\n1. å°½å¯èƒ½ä½¿ç”¨ ESM\n2. ä¸ºæ—§æ¨¡å—æä¾› ESM åŒ…è£…å™¨\n3. åœ¨ package.json ä¸­æä¾›åŒæ¨¡å¼æ”¯æŒ\n4. ä½¿ç”¨æ„å»ºå·¥å…·å¤„ç†å…¼å®¹æ€§\n5. è°¨æ…å¤„ç†å¼‚æ­¥æ“ä½œ\n6. æä¾›æ¸…æ™°çš„ç±»å‹å®šä¹‰\n7. åšå¥½é”™è¯¯å¤„ç†\n8. è€ƒè™‘å‘åå…¼å®¹æ€§\n\nè¿™æ ·çš„æ··åˆä½¿ç”¨ç­–ç•¥å¯ä»¥å¸®åŠ©ä½ åœ¨è¿‡æ¸¡æœŸé—´å¹³ç¨³åœ°å¤„ç†ä¸åŒæ¨¡å—ç³»ç»Ÿçš„ä»£ç ã€‚\n\n## 5. è¯´è¯´ `commonjs` çš„`require`æœºåˆ¶\n\n### 5.1. åŸºæœ¬åŠ è½½è¿‡ç¨‹ï¼š7 ä¸ªæ­¥éª¤\n\n```javascript\n// require çš„åŸºæœ¬å®ç°åŸç†\nfunction require(modulePath) {\n\n    // 1. è§£æè·¯å¾„\n    const absolutePath = resolveModulePath(modulePath);\n    \n    // 2. æ£€æŸ¥ç¼“å­˜\n    if (require.cache[absolutePath]) {\n        return require.cache[absolutePath].exports;\n    }\n    \n    // 3. åˆ›å»ºæ¨¡å—å¯¹è±¡\n    const module = {\n        exports: {},\n        loaded: false,\n        id: absolutePath\n    };\n    \n    // 4. å°†æ¨¡å—æ”¾å…¥ç¼“å­˜\n    require.cache[absolutePath] = module;\n    \n    // 5. åŠ è½½æ¨¡å—\n    loadModule(absolutePath, module, require);\n    \n    // 6. æ ‡è®°ä¸ºå·²åŠ è½½\n    module.loaded = true;\n    \n    // 7. è¿”å› exports å¯¹è±¡\n    return module.exports;\n}\n```\n\n### 5.2. æ¨¡å—ç¼“å­˜æœºåˆ¶ï¼šæŸ¥çœ‹ç¼“å­˜å’Œæ¸…é™¤ç¼“å­˜\n\n```javascript\n// example.js\nmodule.exports = {\n    count: 0,\n    increment() {\n        this.count++;\n    }\n};\n\n// main.js\nconst module1 = require('./example');\nconst module2 = require('./example');\n\nconsole.log(module1 === module2); // true\n// å› ä¸ºç¼“å­˜çš„å­˜åœ¨ï¼Œä¸¤æ¬¡ require è¿”å›åŒä¸€ä¸ªå¯¹è±¡\n\n// æŸ¥çœ‹ç¼“å­˜\nconsole.log(require.cache);\n// æ¸…é™¤ç¼“å­˜\ndelete require.cache[require.resolve('./example')];\n```\n\n### 5.3. è·¯å¾„è§£æè§„åˆ™\n\n```javascript hl:14\n// 1. æ ¸å¿ƒæ¨¡å—\nconst fs = require('fs');              // ç›´æ¥ä» Node.js æ ¸å¿ƒæ¨¡å—åŠ è½½\n\n// 2. æ–‡ä»¶æ¨¡å—\nconst myModule = require('./myModule'); // ç›¸å¯¹è·¯å¾„\nconst config = require('/opt/config');  // ç»å¯¹è·¯å¾„\n\n// 3. npm åŒ…\nconst lodash = require('lodash');      // ä» node_modules æŸ¥æ‰¾\n\n// æ–‡ä»¶æ‰©å±•åè§£æé¡ºåº\nrequire('./myModule');  \n\n// ä¾æ¬¡æŸ¥æ‰¾ï¼š\n// 1. myModule.js\n// 2. myModule.json\n// 3. myModule.node\n// 4. myModule/index.js\n```\n\n### 5.4. æ¨¡å—åŒ…è£…æœºåˆ¶\n\n```javascript hl:1\n// Node.js å®é™…ä¸Šä¼šå°†ä½ çš„æ¨¡å—ä»£ç åŒ…è£…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­\n(function(exports, require, module, __filename, __dirname) {\n    // ä½ çš„æ¨¡å—ä»£ç åœ¨è¿™é‡Œ\n    const something = require('./something');\n    module.exports = {\n        // ...\n    };\n});\n```\n\n### 5.5. å¼‚å¸¸å¤„ç†\n\n```javascript\ntry {\n    // å¤„ç†æ¨¡å—ä¸å­˜åœ¨\n    const nonExistent = require('./non-existent');\n} catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n        console.log('æ¨¡å—æœªæ‰¾åˆ°');\n    }\n}\n\n// å¤„ç†æ¨¡å—åŠ è½½é”™è¯¯\ntry {\n    const badModule = require('./bad-module');\n} catch (err) {\n    console.error('æ¨¡å—åŠ è½½å¤±è´¥:', err);\n}\n```\n\n### 5.6. æ¡ä»¶åŠ è½½\n\n```javascript\n// æ ¹æ®ç¯å¢ƒåŠ è½½ä¸åŒçš„é…ç½®\nconst config = require(process.env.NODE_ENV === 'production'\n    ? './config.prod'\n    : './config.dev');\n\n// åŠ¨æ€åŠ è½½æ¨¡å—\nfunction loadPlugin(name) {\n    try {\n        return require(`./plugins/${name}`);\n    } catch (err) {\n        console.error(`æ’ä»¶ ${name} åŠ è½½å¤±è´¥`);\n        return null;\n    }\n}\n```\n\n### 5.7. æ€§èƒ½ä¼˜åŒ–ï¼šæ¯”å¦‚ fs/pathç­‰\n\n```javascript hl:5,12\n// 1. ä½¿ç”¨è·¯å¾„ç¼“å­˜\nconst modulePath = require.resolve('./myModule');\nconst myModule = require(modulePath);\n\n// 2. é¢„åŠ è½½æ¨¡å—\nconst modules = {\n    fs: require('fs'),\n    path: require('path'),\n    util: require('util')\n};\n\n// 3. å»¶è¿ŸåŠ è½½\nlet heavyModule;\nfunction getHeavyModule() {\n    if (!heavyModule) {\n        heavyModule = require('./heavyModule');\n    }\n    return heavyModule;\n}\n```\n\n### 5.8. æ¨¡å—å¯¼å‡ºæ–¹å¼\n\n```javascript\n// 1. module.exports å¯¼å‡º\nmodule.exports = {\n    method1() {},\n    method2() {}\n};\n\n// 2. exports å¿«æ·æ–¹å¼\nexports.method1 = function() {};\nexports.method2 = function() {};\n\n// 3. æ³¨æ„: ç›´æ¥èµ‹å€¼ exports æ— æ•ˆ\nexports = { method: () => {} };  // è¿™æ ·åšæ˜¯é”™è¯¯çš„\n```\n\n### 5.9. ç›®å½•ä½œä¸ºæ¨¡å—\n\n```javascript\n// myModule/index.js\nmodule.exports = {\n    // æ¨¡å—å†…å®¹\n};\n\n// myModule/package.json\n{\n    \"main\": \"lib/entry.js\"  // æŒ‡å®šå…¥å£æ–‡ä»¶\n}\n\n// ä½¿ç”¨\nconst myModule = require('./myModule');\n```\n\n### 5.10. require.main çš„ä½¿ç”¨\n\n```javascript\n// æ£€æŸ¥æ¨¡å—æ˜¯å¦ä¸ºå…¥å£æ–‡ä»¶\nif (require.main === module) {\n    // ç›´æ¥è¿è¡Œæ­¤æ–‡ä»¶\n    console.log('è¿™æ˜¯ä¸»æ¨¡å—');\n} else {\n    // è¢«å…¶ä»–æ¨¡å—å¼•ç”¨\n    console.log('è¿™æ˜¯è¢«å¯¼å…¥çš„æ¨¡å—');\n}\n```\n\n### 5.11. è°ƒè¯•æŠ€å·§\n\n```javascript\n// 1. æŸ¥çœ‹æ¨¡å—æœç´¢è·¯å¾„\nconsole.log(module.paths);\n\n// 2. æŸ¥çœ‹å·²åŠ è½½çš„æ¨¡å—\nconsole.log(Object.keys(require.cache));\n\n// 3. æ¨¡å—è§£æè·¯å¾„\nconsole.log(require.resolve('./myModule'));\n\n// 4. æ¨¡å—å…ƒä¿¡æ¯\nconsole.log(module);\n```\n\n### 5.12. æœ€ä½³å®è·µ\n\n1. æ€»æ˜¯ä½¿ç”¨ const å£°æ˜ require\n2. å°†æ‰€æœ‰ require è¯­å¥æ”¾åœ¨æ–‡ä»¶é¡¶éƒ¨\n3. ä½¿ç”¨æ˜ç¡®çš„æ–‡ä»¶æ‰©å±•å\n4. é€‚å½“ä½¿ç”¨æ¨¡å—ç¼“å­˜æœºåˆ¶\n5. æ³¨æ„å¾ªç¯ä¾èµ–é—®é¢˜\n6. æ­£ç¡®å¤„ç†å¼‚å¸¸æƒ…å†µ\n7. åˆç†ç»„ç»‡æ¨¡å—ç»“æ„\n8. ä½¿ç”¨ package.json ç®¡ç†ä¾èµ–\n9. æ³¨æ„æ¨¡å—åŠ è½½æ€§èƒ½\n10. éµå¾ªå•ä¸€èŒè´£åŸåˆ™\n\n## 6. æ ¸å¿ƒæ¨¡å—æ˜¯äºŒè¿›åˆ¶å’Œç¼“å­˜æ˜¯çš„ nodejs å¾ˆå¿«\n\n- `require('fs')`  æ ¸å¿ƒæ¨¡å—å¾ˆå¿«ï¼Œå› ä¸ºæ˜¯ç¼–è¯‘å¥½çš„`äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶` \n- ç¼“å­˜ï¼šå¯¼è‡´å¾ˆå¿«\n\n## 7. Node.js ä¸­å¯¹ä¸åŒæ‰©å±•åæ–‡ä»¶çš„å¤„ç†æœºåˆ¶\n\n### 7.1. æ‰©å±•åè§£æä¼˜å…ˆçº§\n\n```javascript\n// require çš„æ‰©å±•åè§£æä¼˜å…ˆçº§\nconst path = './myModule';\nrequire(path);  // æŒ‰ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾ï¼š\n// 1. ./myModule.js\n// 2. ./myModule.json\n// 3. ./myModule.node\n// 4. ./myModule/index.js\n// 5. ./myModule/index.json\n// 6. ./myModule/index.node\n```\n\n### 7.2. `.js` æ–‡ä»¶å¤„ç†\n\n```javascript\n// 1. JS æ–‡ä»¶ä¼šè¢«åŒ…è£…åœ¨å‡½æ•°ä¸­æ‰§è¡Œ\n(function(exports, require, module, __filename, __dirname) {\n    // ä½ çš„ JS ä»£ç \n    const foo = 'bar';\n    module.exports = { foo };\n});\n\n// 2. æ”¯æŒæ‰€æœ‰ JavaScript ç‰¹æ€§\n// example.js\nconst fs = require('fs');\n\nclass MyClass {\n    constructor() {\n        this.data = 'test';\n    }\n}\n\nmodule.exports = {\n    MyClass,\n    async readFile(path) {\n        return fs.promises.readFile(path, 'utf8');\n    }\n};\n```\n\n### 7.3. .json æ–‡ä»¶å¤„ç†\n\n>  ä¼šæœ‰ `json.parse ` çš„æ“ä½œ\n\n```javascript\n// 1. JSON æ–‡ä»¶ç›´æ¥è¢«è§£æä¸ºå¯¹è±¡\n// config.json\n{\n    \"host\": \"localhost\",\n    \"port\": 3000,\n    \"debug\": true\n}\n\n// ä½¿ç”¨ JSON æ–‡ä»¶\nconst config = require('./config.json');\nconsole.log(config.host);  // localhost\n\n// 2. JSON æ–‡ä»¶çš„é”™è¯¯å¤„ç†\ntry {\n    const badJson = require('./bad.json');\n} catch (err) {\n    if (err instanceof SyntaxError) {\n        console.error('JSON è§£æé”™è¯¯');\n    }\n}\n\n// 3. JSON æ–‡ä»¶æ˜¯åªè¯»çš„\nconst config = require('./config.json');\nconfig.port = 4000;  // ä¿®æ”¹åªå½±å“å†…å­˜ä¸­çš„å‰¯æœ¬\n// é‡æ–° require æ—¶ä¼šè·å¾—åŸå§‹æ–‡ä»¶çš„å†…å®¹\n```\n\n### 7.4. .node æ–‡ä»¶å¤„ç†\n\n```javascript\n// .node æ–‡ä»¶æ˜¯ç¼–è¯‘å¥½çš„ C++ æ’ä»¶\n// 1. åŠ è½½ .node æ–‡ä»¶\ntry {\n    const nativeModule = require('./addon.node');\n} catch (err) {\n    console.error('åŠ è½½ native æ¨¡å—å¤±è´¥:', err);\n}\n\n// 2. é€šå¸¸é€šè¿‡ node-gyp ç¼–è¯‘\n// binding.gyp\n{\n    \"targets\": [{\n        \"target_name\": \"addon\",\n        \"sources\": [ \"addon.cc\" ]\n    }]\n}\n\n// 3. C++ æ’ä»¶ç¤ºä¾‹\n// addon.cc\n`#include` <node.h>\n\nvoid Initialize(v8::Local<v8::Object> exports) {\n    // å¯¼å‡ºå‡½æ•°å’Œå¯¹è±¡\n}\n\nNODE_MODULE(NODE_GYP_MODULE_NAME, Initialize)\n```\n\n### 7.5. ç›®å½•æ¨¡å—å¤„ç†\n\n```javascript\n// 1. package.json æ–¹å¼\n// myModule/package.json\n{\n    \"name\": \"myModule\",\n    \"main\": \"./lib/index.js\"  // æŒ‡å®šå…¥å£æ–‡ä»¶\n}\n\n// 2. index æ–‡ä»¶æ–¹å¼\n// myModule/index.js\nmodule.exports = {\n    // æ¨¡å—å†…å®¹\n};\n\n// 3. ç›®å½•æ¨¡å—åŠ è½½é¡ºåº\nconst myModule = require('./myModule');\n// æŸ¥æ‰¾é¡ºåºï¼š\n// 1. ./myModule/package.json ä¸­çš„ main å­—æ®µ\n// 2. ./myModule/index.js\n// 3. ./myModule/index.json\n// 4. ./myModule/index.node\n```\n\n### 7.6. ç‰¹æ®Šæ–‡ä»¶å¤„ç†\n\n```javascript\n// 1. å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶\nconst binary = require('fs').readFileSync('./file.bin');\n\n// 2. å¤„ç†æºç æ–‡ä»¶\nconst sourceMap = require('./file.js.map');\n\n// 3. å¤„ç†é…ç½®æ–‡ä»¶\nconst tsConfig = require('./tsconfig.json');\nconst babelConfig = require('./.babelrc');\n```\n\n### 7.7. è‡ªå®šä¹‰æ‰©å±•åå¤„ç†\n\n```javascript\n// æ³¨å†Œè‡ªå®šä¹‰æ‰©å±•åå¤„ç†å™¨\nrequire.extensions['.xyz'] = function(module, filename) {\n    const content = fs.readFileSync(filename, 'utf8');\n    // å¤„ç†å†…å®¹\n    module._compile(content, filename);\n};\n\n// ä½¿ç”¨è‡ªå®šä¹‰æ‰©å±•å\nconst xyzModule = require('./file.xyz');\n```\n\n### 7.8. æ–‡ä»¶ç¼“å­˜æœºåˆ¶\n\n```javascript hl:15\n// 1. ä¸åŒæ‰©å±•åçš„ç¼“å­˜å¤„ç†\nconst jsModule = require('./file.js');\nconst jsonModule = require('./file.json');\nconst nodeModule = require('./file.node');\n\n// 2. æ¸…é™¤ç‰¹å®šæ‰©å±•åçš„ç¼“å­˜\nfunction clearCache(extension) {\n    Object.keys(require.cache).forEach(key => {\n        if (key.endsWith(extension)) {\n            delete require.cache[key];\n        }\n    });\n}\n\n// 3. ç›‘è§†æ–‡ä»¶å˜åŒ–ï¼šfs.watch\nconst fs = require('fs');\nfs.watch('./config.json', (event, filename) => {\n    delete require.cache[require.resolve('./config.json')];\n});\n```\n\n### 7.9. é”™è¯¯å¤„ç†æœ€ä½³å®è·µ\n\n```javascript\nfunction safeRequire(path) {\n    try {\n        return require(path);\n    } catch (err) {\n        if (err.code === 'MODULE_NOT_FOUND') {\n            console.error(`æ¨¡å— ${path} ä¸å­˜åœ¨`);\n        } else if (err instanceof SyntaxError) {\n            console.error(`æ¨¡å— ${path} è¯­æ³•é”™è¯¯`);\n        } else {\n            console.error(`åŠ è½½æ¨¡å— ${path} æ—¶å‘ç”Ÿé”™è¯¯:`, err);\n        }\n        return null;\n    }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst config = safeRequire('./config.json') || defaultConfig;\nconst addon = safeRequire('./addon.node') || mockAddon;\n```\n\n### 7.10. æ€§èƒ½è€ƒè™‘\n\n```javascript\n// 1. JSON æ–‡ä»¶ç¼“å­˜\nconst configs = new Map();\n\nfunction loadConfig(path) {\n    if (!configs.has(path)) {\n        configs.set(path, require(path));\n    }\n    return configs.get(path);\n}\n\n// 2. å¤§æ–‡ä»¶å¤„ç†\nconst fs = require('fs');\nconst stream = fs.createReadStream('./large-file.json');\n// ä½¿ç”¨æµå¤„ç†å¤§å‹ JSON æ–‡ä»¶\n\n// 3. å»¶è¿ŸåŠ è½½\nlet heavyModule;\nfunction getHeavyModule() {\n    if (!heavyModule) {\n        heavyModule = require('./heavy.node');\n    }\n    return heavyModule;\n}\n```\n\n### 7.11. æœ€ä½³å®è·µå»ºè®®\n\n1. æ˜¾å¼æŒ‡å®šæ–‡ä»¶æ‰©å±•åä»¥æé«˜å¯è¯»æ€§\n2. å¯¹ JSON æ–‡ä»¶è¿›è¡ŒéªŒè¯\n3. è°¨æ…å¤„ç†äºŒè¿›åˆ¶æ¨¡å—\n4. å®ç°é€‚å½“çš„é”™è¯¯å¤„ç†\n5. æ³¨æ„ç¼“å­˜æœºåˆ¶\n6. è€ƒè™‘æ€§èƒ½å½±å“\n7. éµå¾ªæ¨¡å—åŒ–åŸåˆ™\n8. ä½¿ç”¨é€‚å½“çš„æ–‡ä»¶ç»„ç»‡ç»“æ„\n9. æ³¨æ„è·¨å¹³å°å…¼å®¹æ€§\n10. ä¿æŒä»£ç æ•´æ´å’Œå¯ç»´æŠ¤æ€§\n\n## 8. `module.exports` å’Œ `exports` çš„åŒºåˆ«\n\n### 8.1. åŸºæœ¬å…³ç³»\n\n```javascript\n// Node.js æ¨¡å—ç³»ç»Ÿä¸­\nexports = module.exports = {};  // åˆå§‹æ—¶ï¼Œexports æ˜¯ module.exports çš„å¼•ç”¨\n```\n\n### 8.2. å…³é”®åŒºåˆ«\n\n```javascript hl:8\n// æ­£ç¡®ä½¿ç”¨\nexports.foo = 'bar';           // æ·»åŠ å±æ€§æœ‰æ•ˆ\n\nmodule.exports.foo = 'bar';    // æ·»åŠ å±æ€§æœ‰æ•ˆ\nmodule.exports = { foo: 'bar' };// ç›´æ¥èµ‹å€¼æœ‰æ•ˆ\n\n// é”™è¯¯ä½¿ç”¨\n// æ— æ•ˆï¼è¿™ä¼šæ–­å¼€ä¸ module.exports çš„å¼•ç”¨\nexports = { foo: 'bar' };      \n```\n\n### 8.3. ç®€å•è®°å¿†\n\n- `exports` åªèƒ½é€šè¿‡ `.` è¯­æ³•æ·»åŠ å±æ€§\n- `module.exports` å¯ä»¥ç›´æ¥èµ‹å€¼æ–°å¯¹è±¡\n- æœ€ç»ˆå¯¼å‡ºçš„å§‹ç»ˆæ˜¯ `module.exports` çš„å€¼\n\n### 8.4. æœ€å\n\nå› æ­¤ï¼Œä¸ºé¿å…æ··æ·†ï¼Œå»ºè®®ç»Ÿä¸€ä½¿ç”¨ `module.exports`ã€‚\n\n## 9. åˆ—ä¸¾æ¯”è¾ƒå¸¸ç”¨çš„ package.json å­—æ®µè¯´æ˜\n\n```json\n{\n  // åŸºç¡€ä¿¡æ¯ï¼šå¿½ç•¥\n  \n\n  // å…¥å£æ–‡ä»¶é…ç½®\n  \"main\": \"./dist/index.js\",  // CommonJS å…¥å£\n  \"module\": \"./dist/index.mjs\",// ES Module å…¥å£\n  \"types\": \"./dist/index.d.ts\",// TypeScript ç±»å‹å£°æ˜æ–‡ä»¶\n  \"exports\": {                // ç°ä»£åŒ–çš„å¯¼å‡ºé…ç½®\n    \".\": {\n      \"import\": \"./dist/index.mjs\",\n      \"require\": \"./dist/index.js\",\n      \"types\": \"./dist/index.d.ts\"\n    }\n  },\n\n  // è„šæœ¬å‘½ä»¤ï¼šå¿½ç•¥\n  \"scripts\": {\n\n  },\n\n  // ä¾èµ–é…ç½®\n  \"dependencies\": {           // ç”Ÿäº§ç¯å¢ƒä¾èµ–\n    \"react\": \"^18.0.0\"\n  },\n  \"devDependencies\": {        // å¼€å‘ç¯å¢ƒä¾èµ–\n    \"typescript\": \"^5.0.0\",\n    \"vite\": \"^4.0.0\"\n  },\n  // `peerDependencies` è¡¨ç¤ºå®¿ä¸»é¡¹ç›®ä¸­éœ€è¦å®‰è£…çš„ä¾èµ–ï¼Œè¿™äº›ä¾èµ–ä¸ä¼šè¢«è‡ªåŠ¨å®‰è£…ï¼Œè€Œæ˜¯æœŸæœ›ç”±ä½¿ç”¨è¯¥åŒ…çš„é¡¹ç›®æä¾›\n  // 1. é¿å…ä¾èµ–é‡å¤å®‰è£…\n  // 2. ç¡®ä¿ç‰ˆæœ¬å…¼å®¹æ€§ ç­‰\n  \"peerDependencies\": {      // åŒç‰ˆæœ¬å¯¹ç­‰ä¾èµ–\n    \"react\": \"^18.0.0\"\n  },\n\n  // é¡¹ç›®é…ç½®\n  \"private\": true,           // æ˜¯å¦ç§æœ‰åŒ…\n  \"type\": \"module\",          // æŒ‡å®šæ¨¡å—ç±»å‹(commonjs/module)\n  \"engines\": {               // æŒ‡å®š node/npm ç‰ˆæœ¬è¦æ±‚\n    \"node\": \">=14.0.0\",\n    \"npm\": \">=6.0.0\"\n  },\n\n  // å‘å¸ƒé…ç½®ï¼Œnpm å‘å¸ƒåŒ…å«çš„æ–‡ä»¶\n  \"files\": [                \n    \"dist\",\n    \"README.md\"\n  ]\n}\n```\n\nå¸¸è§åœºæ™¯ï¼š\n1. å¼€å‘åº“/æ¡†æ¶æ—¶ï¼Œé‡ç‚¹å…³æ³¨ï¼š`main`ã€`module`ã€`types`ã€`exports`ã€`peerDependencies`\n2. å¼€å‘åº”ç”¨æ—¶ï¼Œé‡ç‚¹å…³æ³¨ï¼š`scripts`ã€`dependencies`ã€`devDependencies`\n3. å‘å¸ƒ npm åŒ…æ—¶ï¼Œé‡ç‚¹å…³æ³¨ï¼š`name`ã€`version`ã€`files`ã€`keywords`\n\n## 10. æµ/pipe\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241027-6.png)\n\n### 10.1. `koa`å®ç°æµå¯¹è±¡è¯»å–ç¤ºä¾‹\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241027-7.png)\n\n## 11. æ¢è®¨ Node.js ä¸­çš„è¿›ç¨‹å’Œçº¿ç¨‹æœºåˆ¶\n\n### 11.1. åŸºæœ¬æ¦‚å¿µ\n\n- è¿›ç¨‹ï¼ˆProcessï¼‰ï¼šæ˜¯æ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„æœ€å°å•ä½ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±**ç‹¬ç«‹çš„å†…å­˜ç©ºé—´**\n- çº¿ç¨‹ï¼ˆThreadï¼‰ï¼šæ˜¯ CPU è°ƒåº¦çš„æœ€å°å•ä½ï¼ŒåŒä¸€è¿›ç¨‹å†…çš„çº¿ç¨‹**å…±äº«å†…å­˜ç©ºé—´**\n\n### 11.2. Node.js çš„å•çº¿ç¨‹ç‰¹æ€§\n\n- Node.js é»˜è®¤è¿è¡Œåœ¨`å•çº¿ç¨‹ç¯å¢ƒ`ä¸­ï¼Œè¿™ä¸ªä¸»çº¿ç¨‹è¢«ç§°ä¸º\"äº‹ä»¶å¾ªç¯\"ï¼ˆEvent Loopï¼‰\n- ä½¿ç”¨äº‹ä»¶é©±åŠ¨å’Œéé˜»å¡ I/O æ¨¡å‹æ¥å¤„ç†å¹¶å‘\n- è™½ç„¶æ˜¯å•çº¿ç¨‹ï¼Œä½†é€šè¿‡äº‹ä»¶å¾ªç¯å¯ä»¥é«˜æ•ˆå¤„ç†å¤§é‡å¹¶å‘è¿æ¥\n\n### 11.3. å¤šè¿›ç¨‹æ”¯æŒ\n\n- Node.js æä¾›äº† `child_process` æ¨¡å—ï¼Œå…è®¸`åˆ›å»ºå­è¿›ç¨‹`\n\t- å¸¸ç”¨çš„æ–¹æ³•åŒ…æ‹¬ï¼š\n\t\t- `fork()`: ä¸“é—¨ç”¨äºåˆ›å»º Node.js è¿›ç¨‹\n\t\t- `spawn()`: å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹æ¥æ‰§è¡Œå‘½ä»¤\n\t\t- `exec()`: å¯åŠ¨ä¸€ä¸ª shell å¹¶åœ¨ shell ä¸­æ‰§è¡Œå‘½ä»¤\n- é€šè¿‡ `cluster` æ¨¡å—å¯ä»¥åˆ›å»ºå…±äº«æœåŠ¡å™¨ç«¯å£çš„å­è¿›ç¨‹ \n\n### 11.4. å¤šçº¿ç¨‹æ”¯æŒï¼šWorker Threadsï¼ˆå·¥ä½œçº¿ç¨‹ï¼‰ \n\n- Node.js ä»ç‰ˆæœ¬ 10.5.0 å¼€å§‹å¼•å…¥äº† `worker_threads` æ¨¡å—\n- å…è®¸åœ¨ Node.js ä¸­è¿è¡Œ**çœŸæ­£çš„å¤šçº¿ç¨‹ä»£ç **\n\t- ç‰¹ç‚¹ï¼š\n\t\t- çº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«å†…å­˜\n\t\t- é€šè¿‡æ¶ˆæ¯ä¼ é€’è¿›è¡Œé€šä¿¡\n\t\t- æ¯ä¸ªå·¥ä½œçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„äº‹ä»¶å¾ªç¯\n\n### 11.5. è¿›ç¨‹ vs å·¥ä½œçº¿ç¨‹\n\n- è¿›ç¨‹ï¼š\n\t- ç‹¬ç«‹çš„å†…å­˜ç©ºé—´\n\t- æ›´é«˜çš„èµ„æºå¼€é”€\n\t- é€‚åˆ CPU å¯†é›†å‹ä»»åŠ¡\n\t- é€šè¿‡ IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰äº¤æ¢æ•°æ®\n- å·¥ä½œçº¿ç¨‹ï¼š\n\t- å…±äº«å†…å­˜ç©ºé—´\n\t- æ›´ä½çš„èµ„æºå¼€é”€\n\t- é€‚åˆå¹¶è¡Œè®¡ç®—\n\t- é€šè¿‡ `postMessage()` è¿›è¡Œé€šä¿¡ \n\n### 11.6. æœ€ä½³å®è·µ\n\n- CPU å¯†é›†å‹ä»»åŠ¡ï¼šä½¿ç”¨ Worker Threads\n- I/O å¯†é›†å‹ä»»åŠ¡ï¼šä½¿ç”¨å¼‚æ­¥æ“ä½œå³å¯\n- éœ€è¦éš”ç¦»çš„ä»»åŠ¡ï¼šä½¿ç”¨å­è¿›ç¨‹\n- éœ€è¦æ‰©å±•åˆ°å¤šæ ¸ï¼šä½¿ç”¨ cluster æ¨¡å—\n\nç¤ºä¾‹ä»£ç ï¼š\n\n#### 11.6.1. åˆ›å»ºå·¥ä½œçº¿ç¨‹\n\n````javascript \nconst { Worker, isMainThread, parentPort } = require('worker_threads');\n\nif (isMainThread) {\n  // è¿™æ®µä»£ç è¿è¡Œåœ¨ä¸»çº¿ç¨‹\n  const worker = new Worker(__filename);\n  worker.on('message', (msg) => {\n    console.log('ä»å·¥ä½œçº¿ç¨‹æ”¶åˆ°:', msg);\n  });\n  worker.postMessage('Hello, Worker!');\n} else {\n  // è¿™æ®µä»£ç è¿è¡Œåœ¨å·¥ä½œçº¿ç¨‹\n  parentPort.on('message', (msg) => {\n    console.log('ä»ä¸»çº¿ç¨‹æ”¶åˆ°:', msg);\n    parentPort.postMessage('Hello, Main Thread!');\n  });\n}\n````\n\n#### 11.6.2. åˆ›å»ºå­è¿›ç¨‹\n\n````javascript\nconst { fork } = require('child_process');\n\n// åˆ›å»ºå­è¿›ç¨‹\nconst child = fork('child.js');\n\n// å‘é€æ¶ˆæ¯ç»™å­è¿›ç¨‹\nchild.send({ hello: 'world' });\n\n// æ¥æ”¶å­è¿›ç¨‹çš„æ¶ˆæ¯\nchild.on('message', (msg) => {\n  console.log('ä»å­è¿›ç¨‹æ”¶åˆ°:', msg);\n});\n````\n\n### 11.7. æ³¨æ„äº‹é¡¹\n\n1. ä¸è¦ä¸ºäº†ä½¿ç”¨å¤šçº¿ç¨‹è€Œä½¿ç”¨å¤šçº¿ç¨‹ï¼ŒNode.js çš„å•çº¿ç¨‹æ¨¡å‹åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å·²ç»è¶³å¤Ÿé«˜æ•ˆ\n2. åœ¨ä½¿ç”¨ Worker Threads æ—¶è¦æ³¨æ„å†…å­˜ç®¡ç†ï¼Œé¿å…è¿‡åº¦åˆ›å»ºçº¿ç¨‹\n3. è¿›ç¨‹é—´é€šä¿¡ä¼šæœ‰æ€§èƒ½å¼€é”€ï¼Œéœ€è¦æ ¹æ®å®é™…åœºæ™¯é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆ\n4. åœ¨ä½¿ç”¨é›†ç¾¤æ¨¡å¼æ—¶ï¼Œè¦æ³¨æ„çŠ¶æ€åŒæ­¥çš„é—®é¢˜\n\n## 12. nodejsæ˜¯å•çº¿ç¨‹çš„ï¼Œ é‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•åˆ©ç”¨ç°ä»£è®¡ç®—æœºçš„å¤šæ ¸èƒ½åŠ›çš„\n\nè™½ç„¶ Node.js çš„ä¸»çº¿ç¨‹æ˜¯å•çº¿ç¨‹çš„ï¼Œä½†å®ƒæä¾›äº†**å¤šç§æ–¹å¼**æ¥åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨ï¼š\n\n### 12.1. Node.js çš„å•çº¿ç¨‹æœ¬è´¨\n\nNode.js çš„å•çº¿ç¨‹ä¸»è¦ä½“ç°åœ¨ï¼š\n- äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰è¿è¡Œåœ¨å•ä¸ªçº¿ç¨‹ä¸Š\n- JavaScript ä»£ç æ‰§è¡Œåœ¨ä¸»çº¿ç¨‹ä¸Š\n- ç”¨æˆ·ä»£ç çš„åŒæ­¥æ“ä½œéƒ½åœ¨è¿™ä¸ªä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œ\n\n```javascript\n// å…¸å‹çš„å•çº¿ç¨‹ç¤ºä¾‹\nconsole.log('1');\nsetTimeout(() => console.log('2'), 0);\nconsole.log('3');\n\n// è¾“å‡ºé¡ºåºï¼š1, 3, 2\n// å³ä½¿setTimeoutä¸º0ï¼Œä¹Ÿä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œå®Œåæ‰æ‰§è¡Œ\n```\n\n### 12.2. åˆ©ç”¨å¤šæ ¸çš„ä¸»è¦æ–¹å¼\n\n#### 12.2.1. ä½¿ç”¨ Cluster æ¨¡å—æ¥å®ç°å¤šè¿›ç¨‹\n\n```javascript\nconst cluster = require('cluster');\nconst http = require('http');\nconst numCPUs = require('os').cpus().length;\n\nif (cluster.isMaster) {\n    // ä¸»è¿›ç¨‹\n    console.log(`ä¸»è¿›ç¨‹ ${process.pid} æ­£åœ¨è¿è¡Œ`);\n\n    // è¡ç”Ÿå·¥ä½œè¿›ç¨‹\n    for (let i = 0; i < numCPUs; i++) {\n        cluster.fork();\n    }\n\n    cluster.on('exit', (worker, code, signal) => {\n        console.log(`å·¥ä½œè¿›ç¨‹ ${worker.process.pid} å·²é€€å‡º`);\n    });\n} else {\n    // å·¥ä½œè¿›ç¨‹å¯ä»¥å…±äº«ä»»ä½• TCP è¿æ¥\n    http.createServer((req, res) => {\n        res.writeHead(200);\n        res.end('ä½ å¥½ä¸–ç•Œ\\n');\n    }).listen(8000);\n\n    console.log(`å·¥ä½œè¿›ç¨‹ ${process.pid} å·²å¯åŠ¨`);\n}\n```\n\n#### 12.2.2. ä½¿ç”¨ Worker Threadsæ¨¡å—æ¥å®ç°å·¥ä½œçº¿ç¨‹\n\n```javascript\nconst { Worker, isMainThread, parentPort } = require('worker_threads');\n\nif (isMainThread) {\n    // è¿™æ®µä»£ç è¿è¡Œåœ¨ä¸»çº¿ç¨‹\n\n    // åˆ›å»ºå¤šä¸ªå·¥ä½œçº¿ç¨‹\n    const worker1 = new Worker(__filename);\n    const worker2 = new Worker(__filename);\n\n    // æ¥æ”¶å·¥ä½œçº¿ç¨‹çš„æ¶ˆæ¯\n    worker1.on('message', (msg) => {\n        console.log('æ¥è‡ªå·¥ä½œçº¿ç¨‹1çš„æ¶ˆæ¯:', msg);\n    });\n\n    worker2.on('message', (msg) => {\n        console.log('æ¥è‡ªå·¥ä½œçº¿ç¨‹2çš„æ¶ˆæ¯:', msg);\n    });\n\n    // å‘å·¥ä½œçº¿ç¨‹å‘é€æ¶ˆæ¯\n    worker1.postMessage('å¼€å§‹ä»»åŠ¡1');\n    worker2.postMessage('å¼€å§‹ä»»åŠ¡2');\n} else {\n    // è¿™æ®µä»£ç è¿è¡Œåœ¨å·¥ä½œçº¿ç¨‹\n    parentPort.on('message', (msg) => {\n        // æ‰§è¡ŒCPUå¯†é›†å‹ä»»åŠ¡\n        const result = heavyComputation();\n        parentPort.postMessage(result);\n    });\n}\n```\n\n### 12.3. å†…ç½®çš„å¼‚æ­¥å¹¶è¡Œå¤„ç†\n\nNode.js é€šè¿‡ `libuv åº“`æä¾›çš„`çº¿ç¨‹æ± `æ¥å¤„ç†æŸäº›å¼‚æ­¥æ“ä½œï¼Œæ¯”å¦‚`æ–‡ä»¶æ“ä½œ`ã€`åŠ å¯†æ“ä½œ`\n\n```javascript\nconst fs = require('fs');\nconst crypto = require('crypto');\n\n// æ–‡ä»¶æ“ä½œä¼šä½¿ç”¨çº¿ç¨‹æ± \nfs.readFile('large-file.txt', (err, data) => {\n    if (err) throw err;\n    console.log('æ–‡ä»¶è¯»å–å®Œæˆ');\n});\n\n// CPUå¯†é›†å‹çš„åŠ å¯†æ“ä½œä¹Ÿä¼šä½¿ç”¨çº¿ç¨‹æ± \ncrypto.pbkdf2('å¯†ç ', 'ç›å€¼', 100000, 512, 'sha512', (err, key) => {\n    if (err) throw err;\n    console.log('åŠ å¯†å®Œæˆ');\n});\n\n// è¿™äº›æ“ä½œä¼šå¹¶è¡Œæ‰§è¡Œ\nconsole.log('ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ');\n```\n\n### 12.4. å®é™…åº”ç”¨ç¤ºä¾‹\n\n#### 12.4.1. ä½¿ç”¨worker_threads æ¥å¤„ç† CPUå¯†é›†å‹ä»»åŠ¡å¤„ç†ï¼ˆå¤šçº¿ç¨‹æ± ï¼‰\n\n```javascript\nconst { Worker } = require('worker_threads');\n\nclass WorkerPool {\n    constructor(numThreads) {\n        this.workers = [];\n        this.freeWorkers = [];\n\n        // åˆ›å»ºå·¥ä½œçº¿ç¨‹æ± \n        for (let i = 0; i < numThreads; i++) {\n            const worker = new Worker('./worker.js');\n            this.workers.push(worker);\n            this.freeWorkers.push(worker);\n        }\n    }\n\n    async runTask(data) {\n        return new Promise((resolve, reject) => {\n            if (this.freeWorkers.length === 0) {\n                reject(new Error('æ²¡æœ‰å¯ç”¨çš„å·¥ä½œçº¿ç¨‹'));\n                return;\n            }\n\n            const worker = this.freeWorkers.pop();\n            \n            worker.once('message', (result) => {\n                this.freeWorkers.push(worker);\n                resolve(result);\n            });\n\n            worker.once('error', reject);\n            worker.postMessage(data);\n        });\n    }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst pool = new WorkerPool(4); // åˆ›å»º4ä¸ªå·¥ä½œçº¿ç¨‹\npool.runTask({ type: 'compute', data: [1,2,3,4] })\n    .then(result => console.log('è®¡ç®—ç»“æœ:', result))\n    .catch(err => console.error('é”™è¯¯:', err));\n```\n\n#### 12.4.2. ä½¿ç”¨cluster æ¨¡è€ƒ æ¥å¤„ç†  WebæœåŠ¡å™¨è´Ÿè½½å‡è¡¡\n\n```javascript\nconst cluster = require('cluster');\nconst express = require('express');\nconst numCPUs = require('os').cpus().length;\n\nif (cluster.isMaster) {\n    console.log(`ä¸»è¿›ç¨‹ ${process.pid} æ­£åœ¨è¿è¡Œ`);\n\n    // è¿½è¸ªå·¥ä½œè¿›ç¨‹çŠ¶æ€\n    const workers = new Map();\n\n    // åˆ›å»ºå·¥ä½œè¿›ç¨‹\n    for (let i = 0; i < numCPUs; i++) {\n        const worker = cluster.fork();\n        workers.set(worker.id, { \n            pid: worker.process.pid,\n            requests: 0 \n        });\n    }\n\n    // ç›‘æ§å·¥ä½œè¿›ç¨‹\n    cluster.on('exit', (worker, code, signal) => {\n        console.log(`å·¥ä½œè¿›ç¨‹ ${worker.process.pid} å·²é€€å‡º`);\n        workers.delete(worker.id);\n        // åˆ›å»ºæ–°çš„å·¥ä½œè¿›ç¨‹æ›¿ä»£æ­»æ‰çš„è¿›ç¨‹\n        const newWorker = cluster.fork();\n        workers.set(newWorker.id, {\n            pid: newWorker.process.pid,\n            requests: 0\n        });\n    });\n\n} else {\n    // å·¥ä½œè¿›ç¨‹åˆ›å»º HTTP æœåŠ¡å™¨\n    const app = express();\n\n    app.get('/', (req, res) => {\n        res.send(`ç”±å·¥ä½œè¿›ç¨‹ ${process.pid} å¤„ç†çš„è¯·æ±‚`);\n    });\n\n    app.listen(3000, () => {\n        console.log(`å·¥ä½œè¿›ç¨‹ ${process.pid} å·²å¯åŠ¨`);\n    });\n}\n```\n\n### 12.5. æ€§èƒ½ä¼˜åŒ–å»ºè®®\n\n#### 12.5.1. **åˆç†ä½¿ç”¨è¿›ç¨‹æ•°é‡**\n\n- ä¸€èˆ¬å»ºè®®ä¸ CPU æ ¸å¿ƒæ•°ç›¸å½“\n- è€ƒè™‘é¢„ç•™ä¸€äº›ç³»ç»Ÿèµ„æº\n- æ³¨æ„å†…å­˜ä½¿ç”¨æƒ…å†µ\n\n#### 12.5.2. **é€‰æ‹©åˆé€‚çš„å¹¶è¡Œç­–ç•¥**\n\n- I/Oå¯†é›†å‹ä»»åŠ¡ï¼šä½¿ç”¨å¼‚æ­¥æ“ä½œå³å¯\n- CPUå¯†é›†å‹ä»»åŠ¡ï¼šä½¿ç”¨ Worker Threads\n- **éœ€è¦éš”ç¦»**çš„ä»»åŠ¡ï¼šä½¿ç”¨ Cluster\n\n#### 12.5.3. **ç›‘æ§å’Œç®¡ç†**\n\n```javascript\n// è¿›ç¨‹ç›‘æ§ç¤ºä¾‹\nif (cluster.isMaster) {\n    const workers = new Map();\n\n    // ç›‘æ§å†…å­˜ä½¿ç”¨\n    setInterval(() => {\n        const usage = process.memoryUsage();\n        console.log(`å†…å­˜ä½¿ç”¨ï¼š${Math.round(usage.heapUsed / 1024 / 1024)}MB`);\n        \n        // å¦‚æœå†…å­˜ä½¿ç”¨è¿‡é«˜ï¼Œå¯ä»¥é‡å¯å·¥ä½œè¿›ç¨‹\n        if (usage.heapUsed > threshold) {\n            restartWorkers();\n        }\n    }, 30000);\n}\n```\n\né€šè¿‡ä»¥ä¸Šè¿™äº›æœºåˆ¶ï¼ŒNode.js å¯ä»¥å……åˆ†åˆ©ç”¨ç°ä»£è®¡ç®—æœºçš„å¤šæ ¸èƒ½åŠ›ï¼Œåœ¨ä¿æŒç®€å•çš„å•çº¿ç¨‹ç¼–ç¨‹æ¨¡å‹çš„åŒæ—¶ï¼Œå®ç°é«˜æ•ˆçš„å¹¶è¡Œå¤„ç†ã€‚é€‰æ‹©å“ªç§æ–¹å¼å–å†³äºå…·ä½“çš„åº”ç”¨åœºæ™¯å’Œéœ€æ±‚ï¼Œé€šå¸¸çš„å»ºè®®æ˜¯ï¼š\n\n- æ™®é€šçš„Webåº”ç”¨ï¼šä½¿ç”¨ Cluster æ¨¡å¼å°±è¶³å¤Ÿäº†\n- è®¡ç®—å¯†é›†å‹åº”ç”¨ï¼šç»“åˆä½¿ç”¨ Cluster å’Œ Worker Threads\n- I/Oå¯†é›†å‹åº”ç”¨ï¼šä½¿ç”¨å†…ç½®çš„å¼‚æ­¥æœºåˆ¶å³å¯\n\n## 13. å†è¯¦ç»†ä»‹ç»ä¸‹ Cluster æ¨¡å—\n\n### 13.1. Cluster æ¨¡å—åŸºæœ¬æ¦‚å¿µ\n\nCluster æ¨¡å—å…è®¸æˆ‘ä»¬**åˆ›å»ºå…±äº«æœåŠ¡å™¨ç«¯å£çš„å­è¿›ç¨‹**ã€‚å®ƒä¸»è¦ç”¨äºï¼š\n\n- åˆ©ç”¨å¤šæ ¸ CPU\n- æé«˜åº”ç”¨ç¨‹åºæ€§èƒ½\n- å®ç°è´Ÿè½½å‡è¡¡\n- æé«˜åº”ç”¨å¯ç”¨æ€§\n\n### 13.2. åŸºæœ¬å·¥ä½œåŸç†\n\n```javascript\nconst cluster = require('cluster');\nconst http = require('http');\nconst numCPUs = require('os').cpus().length;\n\nif (cluster.isPrimary) {\n    console.log(`ä¸»è¿›ç¨‹ ${process.pid} æ­£åœ¨è¿è¡Œ`);\n\n    // è¡ç”Ÿå·¥ä½œè¿›ç¨‹\n    for (let i = 0; i < numCPUs; i++) {\n        cluster.fork();\n    }\n\n    cluster.on('exit', (worker, code, signal) => {\n        console.log(`å·¥ä½œè¿›ç¨‹ ${worker.process.pid} å·²é€€å‡º`);\n    });\n} else {\n    // å·¥ä½œè¿›ç¨‹å…±äº«åŒä¸€ä¸ªTCPè¿æ¥\n    http.createServer((req, res) => {\n        res.writeHead(200);\n        res.end(`å·¥ä½œè¿›ç¨‹ ${process.pid} å“åº”\\n`);\n    }).listen(8000);\n\n    console.log(`å·¥ä½œè¿›ç¨‹ ${process.pid} å·²å¯åŠ¨`);\n}\n```\n\n### 13.3. è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰\n\n#### 13.3.1. ä¸»è¿›ç¨‹ä¸å·¥ä½œè¿›ç¨‹é€šä¿¡\n\n```javascript\nif (cluster.isPrimary) {\n    const worker = cluster.fork();\n    \n    // ä¸»è¿›ç¨‹å‘é€æ¶ˆæ¯ç»™å·¥ä½œè¿›ç¨‹\n    worker.send({ type: 'command', data: 'hello' });\n    \n    // ä¸»è¿›ç¨‹æ¥æ”¶å·¥ä½œè¿›ç¨‹æ¶ˆæ¯\n    worker.on('message', (msg) => {\n        console.log('ä¸»è¿›ç¨‹æ”¶åˆ°æ¶ˆæ¯:', msg);\n    });\n} else {\n    // å·¥ä½œè¿›ç¨‹æ¥æ”¶æ¶ˆæ¯\n    process.on('message', (msg) => {\n        console.log('å·¥ä½œè¿›ç¨‹æ”¶åˆ°æ¶ˆæ¯:', msg);\n        // å·¥ä½œè¿›ç¨‹å›å¤æ¶ˆæ¯\n        process.send({ type: 'response', data: 'received' });\n    });\n}\n```\n\n#### 13.3.2. å·¥ä½œè¿›ç¨‹ä¹‹é—´é€šä¿¡\n\n```javascript\nif (cluster.isPrimary) {\n    const workers = [];\n    \n    // åˆ›å»ºå·¥ä½œè¿›ç¨‹\n    for (let i = 0; i < 2; i++) {\n        workers.push(cluster.fork());\n    }\n\n    // è½¬å‘æ¶ˆæ¯\n    workers.forEach((worker) => {\n        worker.on('message', (msg) => {\n            workers.forEach((w) => {\n                if (w.id !== worker.id) {\n                    w.send(msg);\n                }\n            });\n        });\n    });\n} else {\n    // å·¥ä½œè¿›ç¨‹é€»è¾‘\n    process.on('message', (msg) => {\n        console.log(`å·¥ä½œè¿›ç¨‹ ${process.pid} æ”¶åˆ°æ¶ˆæ¯:`, msg);\n    });\n}\n```\n\n### 13.4. è´Ÿè½½å‡è¡¡\n\n#### 13.4.1. å†…ç½®çš„è½®è¯¢è°ƒåº¦\n\n```javascript\n// Node.js é»˜è®¤ä½¿ç”¨è½®è¯¢è°ƒåº¦\nif (cluster.isPrimary) {\n    for (let i = 0; i < numCPUs; i++) {\n        cluster.fork();\n    }\n} else {\n    http.createServer((req, res) => {\n        res.end(`Handled by process ${process.pid}`);\n    }).listen(8000);\n}\n```\n\n#### 13.4.2. è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡\n\n```javascript\nif (cluster.isPrimary) {\n    const workers = new Map();\n    \n    // è·Ÿè¸ªæ¯ä¸ªå·¥ä½œè¿›ç¨‹çš„è´Ÿè½½\n    function createWorker() {\n        const worker = cluster.fork();\n        workers.set(worker.id, {\n            process: worker,\n            load: 0\n        });\n        return worker;\n    }\n\n    // åˆ›å»ºå·¥ä½œè¿›ç¨‹\n    for (let i = 0; i < numCPUs; i++) {\n        createWorker();\n    }\n\n    // ç›‘æ§å·¥ä½œè¿›ç¨‹è´Ÿè½½\n    workers.forEach((data, id) => {\n        data.process.on('message', (msg) => {\n            if (msg.type === 'load') {\n                data.load = msg.load;\n            }\n        });\n    });\n\n    // å½“å·¥ä½œè¿›ç¨‹é€€å‡ºæ—¶é‡æ–°åˆ›å»º\n    cluster.on('exit', (worker, code, signal) => {\n        console.log(`å·¥ä½œè¿›ç¨‹ ${worker.process.pid} å·²é€€å‡º`);\n        workers.delete(worker.id);\n        createWorker();\n    });\n}\n```\n\n### 13.5. ä¼˜é›…é€€å‡ºå’Œé›¶åœæœºé‡å¯\n\n```javascript\nif (cluster.isPrimary) {\n    const workers = new Set();\n\n    // åˆ›å»ºå·¥ä½œè¿›ç¨‹\n    for (let i = 0; i < numCPUs; i++) {\n        workers.add(cluster.fork());\n    }\n\n    // ä¼˜é›…é€€å‡ºå‡½æ•°\n    function gracefulShutdown() {\n        workers.forEach(worker => {\n            worker.send('shutdown');\n            \n            // ç»™å·¥ä½œè¿›ç¨‹ä¸€å®šæ—¶é—´æ¥å®Œæˆå½“å‰è¯·æ±‚\n            setTimeout(() => {\n                if (!worker.isDead()) {\n                    worker.kill();\n                }\n            }, 5000);\n        });\n    }\n\n    // é›¶åœæœºé‡å¯\n    function reload() {\n        workers.forEach(worker => {\n            // åˆ›å»ºæ–°çš„å·¥ä½œè¿›ç¨‹\n            const newWorker = cluster.fork();\n            \n            // ç­‰å¾…æ–°è¿›ç¨‹å‡†å¤‡å°±ç»ª\n            newWorker.on('listening', () => {\n                // ä¼˜é›…åœ°å…³é—­æ—§è¿›ç¨‹\n                worker.disconnect();\n                workers.delete(worker);\n                workers.add(newWorker);\n            });\n        });\n    }\n\n    // ç›‘å¬ä¿¡å·\n    process.on('SIGTERM', gracefulShutdown);\n    process.on('SIGHUP', reload);\n} else {\n    const server = http.createServer((req, res) => {\n        res.writeHead(200);\n        res.end('hello world\\n');\n    });\n\n    // ç›‘å¬å…³é—­ä¿¡å·\n    process.on('message', (msg) => {\n        if (msg === 'shutdown') {\n            server.close(() => {\n                process.exit(0);\n            });\n        }\n    });\n\n    server.listen(8000);\n}\n```\n\n### 13.6. ç›‘æ§å’Œæ—¥å¿—\n\n```javascript\nif (cluster.isPrimary) {\n    const workers = new Map();\n\n    // ç›‘æ§æŒ‡æ ‡\n    const metrics = {\n        totalRequests: 0,\n        activeWorkers: 0,\n        failedRequests: 0\n    };\n\n    function createWorker() {\n        const worker = cluster.fork();\n        workers.set(worker.id, {\n            startTime: Date.now(),\n            requests: 0,\n            errors: 0\n        });\n        metrics.activeWorkers++;\n        \n        // ç›‘å¬å·¥ä½œè¿›ç¨‹æ¶ˆæ¯\n        worker.on('message', (msg) => {\n            if (msg.type === 'metric') {\n                const stats = workers.get(worker.id);\n                stats.requests++;\n                metrics.totalRequests++;\n                \n                if (msg.error) {\n                    stats.errors++;\n                    metrics.failedRequests++;\n                }\n            }\n        });\n\n        return worker;\n    }\n\n    // å®šæœŸè¾“å‡ºç›‘æ§ä¿¡æ¯\n    setInterval(() => {\n        console.log('é›†ç¾¤çŠ¶æ€:', {\n            activeWorkers: metrics.activeWorkers,\n            totalRequests: metrics.totalRequests,\n            failedRequests: metrics.failedRequests,\n            workerStats: Array.from(workers.entries()).map(([id, stats]) => ({\n                id,\n                uptime: (Date.now() - stats.startTime) / 1000,\n                requests: stats.requests,\n                errors: stats.errors\n            }))\n        });\n    }, 10000);\n\n    // åˆ›å»ºå·¥ä½œè¿›ç¨‹\n    for (let i = 0; i < numCPUs; i++) {\n        createWorker();\n    }\n}\n```\n\n### 13.7. æœ€ä½³å®è·µ\n\n#### 13.7.1. **è¿›ç¨‹æ•°é‡ç®¡ç†**\n```javascript\nconst WORKERS = process.env.NODE_ENV === 'production' \n    ? numCPUs \n    : Math.min(2, numCPUs);\n```\n\n#### 13.7.2. **é”™è¯¯å¤„ç†**\n```javascript\nif (cluster.isPrimary) {\n    cluster.on('exit', (worker, code, signal) => {\n        if (signal) {\n            console.log(`å·¥ä½œè¿›ç¨‹è¢«ä¿¡å·${signal}ç»ˆæ­¢`);\n        } else if (code !== 0) {\n            console.log(`å·¥ä½œè¿›ç¨‹å¼‚å¸¸é€€å‡ºï¼Œé”™è¯¯ç ï¼š${code}`);\n            cluster.fork(); // é‡æ–°åˆ›å»ºå·¥ä½œè¿›ç¨‹\n        }\n    });\n}\n```\n\n#### 13.7.3. **å¥åº·æ£€æŸ¥**\n```javascript\nif (cluster.isPrimary) {\n    function healthCheck() {\n        workers.forEach((worker) => {\n            worker.send({ type: 'health_check' });\n            \n            const timeout = setTimeout(() => {\n                console.log(`å·¥ä½œè¿›ç¨‹ ${worker.process.pid} æ— å“åº”`);\n                worker.kill();\n            }, 5000);\n\n            worker.once('message', (msg) => {\n                if (msg.type === 'health_check_response') {\n                    clearTimeout(timeout);\n                }\n            });\n        });\n    }\n\n    setInterval(healthCheck, 30000);\n}\n```\n\né€šè¿‡è¿™äº›æœºåˆ¶å’Œæœ€ä½³å®è·µï¼ŒCluster æ¨¡å—èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ„å»ºé«˜å¯ç”¨ã€å¯ä¼¸ç¼©çš„ Node.js åº”ç”¨ã€‚å®ƒæ˜¯åˆ©ç”¨å¤šæ ¸ç³»ç»Ÿã€æé«˜åº”ç”¨æ€§èƒ½çš„é‡è¦å·¥å…·ã€‚\n\n\n## 14. Node.js åº”ç”¨ä¸­å¤šæ ¸ã€å¤š CPUã€å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹çš„åŒºåˆ«å’Œå…³ç³»\n\n### 14.1. å¤šæ ¸ï¼ˆMulti-Coreï¼‰\n\nå¤šæ ¸æŒ‡çš„æ˜¯åœ¨**å•ä¸ª CPU** ç‰©ç†èŠ¯ç‰‡ä¸Šé›†æˆå¤šä¸ªå®Œæ•´çš„è®¡ç®—æ ¸å¿ƒã€‚\n\n```javascript\nconst os = require('os');\n\n// è·å– CPU ä¿¡æ¯\nconsole.log('CPU æ ¸å¿ƒæ•°:', os.cpus().length);\nconsole.log('CPU è¯¦ç»†ä¿¡æ¯:', os.cpus());\n\n// è¾“å‡ºç¤ºä¾‹\n/*\nCPU æ ¸å¿ƒæ•°: 8\nCPU è¯¦ç»†ä¿¡æ¯: [\n  {\n    model: 'Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz',\n    speed: 2600,\n    times: { user: 123456, nice: 0, sys: 34567, idle: 789012, irq: 1234 }\n  },\n  // ... æ›´å¤šæ ¸å¿ƒä¿¡æ¯\n]\n*/\n```\n\n### 14.2. å¤š CPUï¼ˆMulti-CPUï¼‰\n\nå¤š CPU æŒ‡ç³»ç»Ÿä¸­å®‰è£…äº†**å¤šä¸ªç‰©ç† CPU èŠ¯ç‰‡**ã€‚æ¯ä¸ª CPU å¯èƒ½åŒ…å«å¤šä¸ªæ ¸å¿ƒã€‚\n\n```javascript\nconst os = require('os');\n\n// æ£€æŸ¥ç³»ç»Ÿæ¶æ„å’Œå¹³å°ä¿¡æ¯\nconsole.log('ç³»ç»Ÿæ¶æ„:', os.arch());\nconsole.log('å¹³å°:', os.platform());\nconsole.log('æ€»å†…å­˜:', os.totalmem() / 1024 / 1024 / 1024, 'GB');\nconsole.log('ç©ºé—²å†…å­˜:', os.freemem() / 1024 / 1024 / 1024, 'GB');\n\n```\n\n### 14.3. å¤šè¿›ç¨‹ï¼ˆMulti-Processï¼‰\n\nè¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€ä¸ªç‹¬ç«‹å®ä¾‹ï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ã€‚**Node.js é€šè¿‡ cluster æ¨¡å—å®ç°å¤šè¿›ç¨‹**ã€‚\n\n```javascript\nconst cluster = require('cluster');\nconst http = require('http');\nconst numCPUs = require('os').cpus().length;\n\nif (cluster.isPrimary) {\n    console.log(`ä¸»è¿›ç¨‹ ${process.pid} æ­£åœ¨è¿è¡Œ`);\n\n    // è®°å½•è¿›ç¨‹ä¿¡æ¯\n    const workers = new Map();\n\n    // åˆ›å»ºå·¥ä½œè¿›ç¨‹\n    for (let i = 0; i < numCPUs; i++) {\n        const worker = cluster.fork();\n        workers.set(worker.id, {\n            pid: worker.process.pid,\n            startTime: Date.now(),\n            requests: 0\n        });\n    }\n\n    // è¿›ç¨‹é—´é€šä¿¡ç¤ºä¾‹\n    cluster.on('message', (worker, message) => {\n        const workerInfo = workers.get(worker.id);\n        if (message.type === 'request_completed') {\n            workerInfo.requests++;\n        }\n    });\n\n    // ç›‘æ§è¿›ç¨‹çŠ¶æ€\n    setInterval(() => {\n        console.log('è¿›ç¨‹çŠ¶æ€æŠ¥å‘Š:');\n        for (const [id, info] of workers) {\n            console.log(`å·¥ä½œè¿›ç¨‹ ${info.pid}:`, {\n                uptime: (Date.now() - info.startTime) / 1000,\n                requests: info.requests\n            });\n        }\n    }, 10000);\n\n} else {\n    // å·¥ä½œè¿›ç¨‹åˆ›å»º HTTP æœåŠ¡å™¨\n    http.createServer((req, res) => {\n        res.writeHead(200);\n        res.end(`æ¥è‡ªè¿›ç¨‹ ${process.pid} çš„å“åº”\\n`);\n        \n        // é€šçŸ¥ä¸»è¿›ç¨‹è¯·æ±‚å®Œæˆ\n        process.send({ type: 'request_completed' });\n    }).listen(8000);\n\n    console.log(`å·¥ä½œè¿›ç¨‹ ${process.pid} å·²å¯åŠ¨`);\n}\n```\n\n### 14.4. å¤šçº¿ç¨‹ï¼ˆMulti-Threadï¼‰\n\nçº¿ç¨‹æ˜¯è¿›ç¨‹ä¸­çš„æ‰§è¡Œå•å…ƒï¼Œå…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´ã€‚**Node.js é€šè¿‡ worker_threads æ¨¡å—å®ç°å¤šçº¿ç¨‹**ã€‚\n\n```javascript\nconst { Worker, isMainThread, parentPort, workerData } = require('worker_threads');\n\nif (isMainThread) {\n    // ä¸»çº¿ç¨‹ä»£ç \n    const threads = new Map();\n    const threadCount = 4;\n    \n    // åˆ›å»ºçº¿ç¨‹æ± \n    class ThreadPool {\n        constructor(size) {\n            this.size = size;\n            this.workers = new Map();\n            this.queue = [];\n            this.activeWorkers = 0;\n        }\n\n        addWorker() {\n            const worker = new Worker(__filename, {\n                workerData: { threadId: this.workers.size }\n            });\n\n            const workerInfo = {\n                worker: worker,\n                busy: false,\n                taskCount: 0\n            };\n\n            worker.on('message', (result) => {\n                workerInfo.busy = false;\n                workerInfo.taskCount++;\n                this.activeWorkers--;\n                this.processQueue();\n            });\n\n            this.workers.set(worker.threadId, workerInfo);\n        }\n\n        async runTask(task) {\n            return new Promise((resolve, reject) => {\n                const queueItem = { task, resolve, reject };\n                this.queue.push(queueItem);\n                this.processQueue();\n            });\n        }\n\n        processQueue() {\n            if (this.queue.length === 0) return;\n\n            for (const [threadId, workerInfo] of this.workers) {\n                if (!workerInfo.busy && this.queue.length > 0) {\n                    const { task, resolve, reject } = this.queue.shift();\n                    workerInfo.busy = true;\n                    this.activeWorkers++;\n                    \n                    workerInfo.worker.postMessage(task);\n                    \n                    workerInfo.worker.once('message', resolve);\n                    workerInfo.worker.once('error', reject);\n                }\n            }\n        }\n\n        getStats() {\n            const stats = {\n                totalWorkers: this.workers.size,\n                activeWorkers: this.activeWorkers,\n                queueLength: this.queue.length,\n                workerStats: []\n            };\n\n            for (const [threadId, info] of this.workers) {\n                stats.workerStats.push({\n                    threadId,\n                    busy: info.busy,\n                    taskCount: info.taskCount\n                });\n            }\n\n            return stats;\n        }\n    }\n\n    // ä½¿ç”¨çº¿ç¨‹æ± \n    const pool = new ThreadPool(threadCount);\n    \n    // åˆå§‹åŒ–çº¿ç¨‹æ± \n    for (let i = 0; i < threadCount; i++) {\n        pool.addWorker();\n    }\n\n    // ç¤ºä¾‹ï¼šæ‰§è¡ŒCPUå¯†é›†å‹ä»»åŠ¡\n    async function runTasks() {\n        const tasks = Array(10).fill().map((_, i) => ({\n            type: 'compute',\n            data: i\n        }));\n\n        console.log('å¼€å§‹æ‰§è¡Œä»»åŠ¡...');\n\n        const results = await Promise.all(\n            tasks.map(task => pool.runTask(task))\n        );\n\n        console.log('æ‰€æœ‰ä»»åŠ¡å®Œæˆ:', results);\n        console.log('çº¿ç¨‹æ± çŠ¶æ€:', pool.getStats());\n    }\n\n    runTasks().catch(console.error);\n\n} else {\n    // å·¥ä½œçº¿ç¨‹ä»£ç \n    parentPort.on('message', (task) => {\n        // æ¨¡æ‹ŸCPUå¯†é›†å‹æ“ä½œ\n        let result;\n        \n        switch (task.type) {\n            case 'compute':\n                // ç¤ºä¾‹è®¡ç®—ä»»åŠ¡\n                result = heavyComputation(task.data);\n                break;\n            default:\n                result = null;\n        }\n\n        parentPort.postMessage({\n            threadId: workerData.threadId,\n            result: result\n        });\n    });\n\n    function heavyComputation(n) {\n        let result = 0;\n        for (let i = 0; i < 1000000; i++) {\n            result += Math.sqrt(n * i);\n        }\n        return result;\n    }\n}\n```\n\n### 14.5. å„ç§æ¨¡å‹çš„å¯¹æ¯”\n\n#### 14.5.1. **èµ„æºå ç”¨**\n\n```javascript\n// å†…å­˜ä½¿ç”¨å¯¹æ¯”ç¤ºä¾‹\nconst process = require('process');\n\nfunction showMemoryUsage() {\n    const used = process.memoryUsage();\n    console.log({\n        rss: `${Math.round(used.rss / 1024 / 1024 * 100) / 100} MB`,    // è¿›ç¨‹æ€»å†…å­˜\n        heapTotal: `${Math.round(used.heapTotal / 1024 / 1024 * 100) / 100} MB`,  // V8 æ€»å †å†…å­˜\n        heapUsed: `${Math.round(used.heapUsed / 1024 / 1024 * 100) / 100} MB`,    // V8 å·²ç”¨å †å†…å­˜\n        external: `${Math.round(used.external / 1024 / 1024 * 100) / 100} MB`,     // C++ å¯¹è±¡å†…å­˜\n    });\n}\n```\n\n#### 14.5.2. **é€šä¿¡æˆæœ¬**\n\n```javascript\n// è¿›ç¨‹é—´é€šä¿¡ç¤ºä¾‹\nif (cluster.isPrimary) {\n    const worker = cluster.fork();\n    console.time('ipc');\n    worker.send('ping');\n    worker.on('message', (msg) => {\n        if (msg === 'pong') {\n            console.timeEnd('ipc');\n        }\n    });\n} else {\n    process.on('message', (msg) => {\n        if (msg === 'ping') {\n            process.send('pong');\n        }\n    });\n}\n\n// çº¿ç¨‹é—´é€šä¿¡ç¤ºä¾‹\nif (isMainThread) {\n    const worker = new Worker(__filename);\n    console.time('thread');\n    worker.postMessage('ping');\n    worker.on('message', (msg) => {\n        if (msg === 'pong') {\n            console.timeEnd('thread');\n        }\n    });\n} else {\n    parentPort.on('message', (msg) => {\n        if (msg === 'ping') {\n            parentPort.postMessage('pong');\n        }\n    });\n}\n```\n\n### 14.6. é€‰æ‹©å»ºè®®\n\n#### 14.6.1. **I/O å¯†é›†å‹åº”ç”¨**\n\n```javascript\n// ä½¿ç”¨å¼‚æ­¥ I/O å³å¯ï¼Œä¸éœ€è¦å¤šè¿›ç¨‹/å¤šçº¿ç¨‹\nconst fs = require('fs').promises;\n\nasync function handleIO() {\n    const file1 = fs.readFile('file1.txt');\n    const file2 = fs.readFile('file2.txt');\n    const [content1, content2] = await Promise.all([file1, file2]);\n    // å¤„ç†æ–‡ä»¶å†…å®¹\n}\n```\n\n#### 14.6.2. **CPU å¯†é›†å‹åº”ç”¨**\n\n```javascript\n// ä½¿ç”¨ Worker Threads\nconst { Worker } = require('worker_threads');\n\nfunction runWorker(workerData) {\n    return new Promise((resolve, reject) => {\n        const worker = new Worker('./worker.js', { workerData });\n        worker.on('message', resolve);\n        worker.on('error', reject);\n        worker.on('exit', (code) => {\n            if (code !== 0) {\n                reject(new Error(`Worker stopped with exit code ${code}`));\n            }\n        });\n    });\n}\n```\n\n#### 14.6.3. **Web æœåŠ¡å™¨**\n\n```javascript\n// ä½¿ç”¨ Cluster\nif (cluster.isPrimary) {\n    // æ ¹æ® CPU æ ¸å¿ƒæ•°åˆ›å»ºå·¥ä½œè¿›ç¨‹\n    for (let i = 0; i < numCPUs; i++) {\n        cluster.fork();\n    }\n} else {\n    // Express åº”ç”¨\n    const express = require('express');\n    const app = express();\n    app.listen(3000);\n}\n```\n\n#### 14.6.4. æ€»ç»“ï¼š\n\n- å¤šæ ¸å’Œå¤š CPU æ˜¯ç¡¬ä»¶å±‚é¢çš„æ¦‚å¿µ\n- å¤šè¿›ç¨‹é€‚åˆéœ€è¦éš”ç¦»çš„åœºæ™¯ï¼Œå¦‚ Web æœåŠ¡å™¨\n- å¤šçº¿ç¨‹é€‚åˆ CPU å¯†é›†å‹ä»»åŠ¡\n- Node.js çš„äº‹ä»¶å¾ªç¯é€‚åˆ I/O å¯†é›†å‹ä»»åŠ¡\n\né€‰æ‹©æ—¶éœ€è¦è€ƒè™‘ï¼š\n\n1. åº”ç”¨ç±»å‹ï¼ˆI/Oå¯†é›† vs CPUå¯†é›†ï¼‰\n2. èµ„æºå ç”¨\n3. å¼€å‘ç»´æŠ¤æˆæœ¬\n4. ç¨³å®šæ€§è¦æ±‚","2178e03c1b4a5f2ba1ee5540db68e935":"\n# Nodejs ç¯‡ï¼ˆç¯‡äºŒï¼‰\n\n`#å‰ç«¯é¢è¯•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. Node.js ä¸­å¼‚å¸¸æ•è·å’Œå®¹é”™çš„å¸¸è§å¤„ç†æ–¹å¼ \n\n### 1.1. try-catch æ•è·åŒæ­¥å¼‚å¸¸\n\n```javascript\n// åŸºæœ¬çš„åŒæ­¥å¼‚å¸¸æ•è·\nfunction syncOperation() {\n    try {\n        const result = JSON.parse('{\"invalid\": json}');\n        return result;\n    } catch (error) {\n        console.error('åŒæ­¥é”™è¯¯:', {\n            name: error.name,\n            message: error.message,\n            stack: error.stack\n        });\n        // å¯ä»¥è¿”å›é»˜è®¤å€¼æˆ–é‡æ–°æŠ›å‡ºé”™è¯¯\n        return { error: true };\n    }\n}\n```\n\n### 1.2. Promise å¼‚å¸¸å¤„ç†\n\n```javascript\n// Promise é“¾å¼è°ƒç”¨å¼‚å¸¸å¤„ç†\nasync function asyncOperation() {\n    try {\n        const result = await fetch('https://api.example.com/data')\n            .then(response => response.json())\n            .catch(error => {\n                console.error('Fetch é”™è¯¯:', error);\n                return null;\n            });\n\n        if (!result) {\n            throw new Error('è·å–æ•°æ®å¤±è´¥');\n        }\n\n        return result;\n    } catch (error) {\n        console.error('å¼‚æ­¥æ“ä½œé”™è¯¯:', error);\n        return null;\n    }\n}\n\n// Promise.all é”™è¯¯å¤„ç†\nasync function multipleAsyncOperations() {\n    try {\n        const promises = [\n            fetch('https://api1.example.com'),\n            fetch('https://api2.example.com'),\n            fetch('https://api3.example.com')\n        ];\n\n        const results = await Promise.all(\n            promises.map(p => p.catch(error => {\n                console.error('å•ä¸ªè¯·æ±‚å¤±è´¥:', error);\n                return null;\n            }))\n        );\n\n        return results.filter(result => result !== null);\n    } catch (error) {\n        console.error('æ‰¹é‡è¯·æ±‚é”™è¯¯:', error);\n        return [];\n    }\n}\n```\n\n### 1.3. å…¨å±€æœªæ•è·å¼‚å¸¸å¤„ç†\n\n```javascript\n// æœªæ•è·çš„å¼‚å¸¸å¤„ç†\nprocess.on('uncaughtException', (error) => {\n    console.error('æœªæ•è·çš„å¼‚å¸¸:', {\n        error: error,\n        time: new Date().toISOString(),\n        pid: process.pid\n    });\n    \n    // è®°å½•é”™è¯¯æ—¥å¿—\n    logError(error);\n    \n    // ä¼˜é›…é€€å‡ºï¼ˆå»ºè®®åœ¨å¤„ç†å®Œå…³é”®æ“ä½œåé€€å‡ºï¼‰\n    process.exit(1);\n});\n\n// æœªå¤„ç†çš„ Promise æ‹’ç»\nprocess.on('unhandledRejection', (reason, promise) => {\n    console.error('æœªå¤„ç†çš„ Promise æ‹’ç»:', {\n        reason: reason,\n        time: new Date().toISOString(),\n        pid: process.pid\n    });\n    \n    // è®°å½•é”™è¯¯æ—¥å¿—\n    logError(reason);\n});\n\n// è‡ªå®šä¹‰é”™è¯¯æ—¥å¿—è®°å½•å‡½æ•°\nfunction logError(error) {\n    // è¿™é‡Œå¯ä»¥å®ç°é”™è¯¯æ—¥å¿—è®°å½•é€»è¾‘\n    // æ¯”å¦‚å†™å…¥æ–‡ä»¶æˆ–å‘é€åˆ°æ—¥å¿—æœåŠ¡\n}\n```\n\n### 1.4. Express é”™è¯¯å¤„ç†ä¸­é—´ä»¶\n\n```javascript\nconst express = require('express');\nconst app = express();\n\n// è‡ªå®šä¹‰é”™è¯¯ç±»\nclass AppError extends Error {\n    constructor(statusCode, message) {\n        super(message);\n        this.statusCode = statusCode;\n        this.status = `${statusCode}`.startsWith('4') ? 'fail' : 'error';\n        this.isOperational = true;\n\n        Error.captureStackTrace(this, this.constructor);\n    }\n}\n\n// å¼‚æ­¥å‡½æ•°é”™è¯¯æ•è·åŒ…è£…å™¨\nconst catchAsync = fn => {\n    return (req, res, next) => {\n        fn(req, res, next).catch(next);\n    };\n};\n\n// è·¯ç”±å¤„ç†\napp.get('/api/data', catchAsync(async (req, res) => {\n    const data = await fetchData();\n    if (!data) {\n        throw new AppError(404, 'æ•°æ®ä¸å­˜åœ¨');\n    }\n    res.json(data);\n}));\n\n// 404 é”™è¯¯å¤„ç†\napp.use((req, res, next) => {\n    next(new AppError(404, 'æ‰¾ä¸åˆ°è¯·æ±‚çš„èµ„æº'));\n});\n\n// å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶\napp.use((error, req, res, next) => {\n    error.statusCode = error.statusCode || 500;\n    error.status = error.status || 'error';\n\n    // å¼€å‘ç¯å¢ƒé”™è¯¯å“åº”\n    if (process.env.NODE_ENV === 'development') {\n        res.status(error.statusCode).json({\n            status: error.status,\n            error: error,\n            message: error.message,\n            stack: error.stack\n        });\n    } \n    // ç”Ÿäº§ç¯å¢ƒé”™è¯¯å“åº”\n    else {\n        // æ“ä½œå‹é”™è¯¯ï¼šå‘é€ç»™å®¢æˆ·ç«¯\n        if (error.isOperational) {\n            res.status(error.statusCode).json({\n                status: error.status,\n                message: error.message\n            });\n        } \n        // ç¨‹åºå‹é”™è¯¯ï¼šä¸æš´éœ²è¯¦ç»†ä¿¡æ¯\n        else {\n            console.error('ERROR ğŸ’¥', error);\n            res.status(500).json({\n                status: 'error',\n                message: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'\n            });\n        }\n    }\n});\n```\n\n### 1.5. æ•°æ®åº“æ“ä½œé”™è¯¯å¤„ç†\n\n```javascript\nconst mongoose = require('mongoose');\n\n// MongoDB è¿æ¥é”™è¯¯å¤„ç†\nmongoose.connect('mongodb://localhost/myapp', {\n    useNewUrlParser: true,\n    useUnifiedTopology: true\n})\n.then(() => console.log('æ•°æ®åº“è¿æ¥æˆåŠŸ'))\n.catch(error => {\n    console.error('æ•°æ®åº“è¿æ¥å¤±è´¥:', error);\n    process.exit(1);\n});\n\n// æ•°æ®åº“æ“ä½œé”™è¯¯å¤„ç†\nasync function databaseOperation() {\n    const session = await mongoose.startSession();\n    try {\n        session.startTransaction();\n\n        // æ‰§è¡Œæ•°æ®åº“æ“ä½œ\n        await Model.create([{ data: 'example' }], { session });\n\n        await session.commitTransaction();\n    } catch (error) {\n        await session.abortTransaction();\n        throw error;\n    } finally {\n        session.endSession();\n    }\n}\n```\n\n### 1.6. äº‹ä»¶è§¦å‘å™¨é”™è¯¯å¤„ç†\n\n```javascript\nconst EventEmitter = require('events');\n\nclass MyEmitter extends EventEmitter {\n    execute() {\n        try {\n            this.emit('start');\n            // æŸäº›æ“ä½œ\n            if (error) {\n                this.emit('error', new Error('æ“ä½œå¤±è´¥'));\n            }\n            this.emit('end');\n        } catch (error) {\n            this.emit('error', error);\n        }\n    }\n}\n\nconst myEmitter = new MyEmitter();\n\n// é”™è¯¯äº‹ä»¶ç›‘å¬\nmyEmitter.on('error', (error) => {\n    console.error('äº‹ä»¶é”™è¯¯:', error);\n});\n\n// å…¶ä»–äº‹ä»¶ç›‘å¬\nmyEmitter.on('start', () => console.log('å¼€å§‹æ‰§è¡Œ'));\nmyEmitter.on('end', () => console.log('æ‰§è¡Œå®Œæˆ'));\n```\n\n### 1.7. å®šæ—¶å™¨é”™è¯¯å¤„ç†\n\n```javascript\nclass SafeInterval {\n    constructor(callback, interval) {\n        this.callback = callback;\n        this.interval = interval;\n        this.timer = null;\n    }\n\n    start() {\n        this.timer = setInterval(() => {\n            try {\n                this.callback();\n            } catch (error) {\n                console.error('å®šæ—¶å™¨æ‰§è¡Œé”™è¯¯:', error);\n                this.stop(); // å‘ç”Ÿé”™è¯¯æ—¶åœæ­¢å®šæ—¶å™¨\n            }\n        }, this.interval);\n    }\n\n    stop() {\n        if (this.timer) {\n            clearInterval(this.timer);\n            this.timer = null;\n        }\n    }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst safeTimer = new SafeInterval(() => {\n    // å®šæ—¶æ‰§è¡Œçš„æ“ä½œ\n}, 1000);\n\nsafeTimer.start();\n```\n\n### 1.8. é”™è¯¯ç›‘æ§å’ŒæŠ¥è­¦\n\n```javascript\nclass ErrorMonitor {\n    constructor() {\n        this.errors = new Map();\n        this.threshold = 10; // é”™è¯¯é˜ˆå€¼\n        this.timeWindow = 60000; // æ—¶é—´çª—å£ï¼ˆ1åˆ†é’Ÿï¼‰\n    }\n\n    recordError(error) {\n        const errorKey = error.message;\n        const now = Date.now();\n        \n        if (!this.errors.has(errorKey)) {\n            this.errors.set(errorKey, []);\n        }\n        \n        const errorList = this.errors.get(errorKey);\n        errorList.push(now);\n        \n        // æ¸…ç†è¶…å‡ºæ—¶é—´çª—å£çš„é”™è¯¯è®°å½•\n        const validErrors = errorList.filter(time => \n            now - time < this.timeWindow\n        );\n        this.errors.set(errorKey, validErrors);\n\n        // æ£€æŸ¥æ˜¯å¦éœ€è¦æŠ¥è­¦\n        if (validErrors.length >= this.threshold) {\n            this.sendAlert(error, validErrors.length);\n        }\n    }\n\n    sendAlert(error, count) {\n        console.error(`è­¦å‘Š: é”™è¯¯ \"${error.message}\" åœ¨æœ€è¿‘1åˆ†é’Ÿå†…å‡ºç°äº† ${count} æ¬¡`);\n        // è¿™é‡Œå¯ä»¥æ·»åŠ å‘é€é‚®ä»¶æˆ–å…¶ä»–é€šçŸ¥çš„é€»è¾‘\n    }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst errorMonitor = new ErrorMonitor();\nprocess.on('uncaughtException', error => {\n    errorMonitor.recordError(error);\n});\n```\n\n### 1.9. è‡ªå·±å†™ä¸€ä¸ªkoaä¸­é—´ä»¶ï¼Œç”¨äºæ•è·ç›¸å…³çš„å¼‚å¸¸\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241027-8.png)\n\n### 1.10. æ€»ç»“\n\nè¿™äº›é”™è¯¯å¤„ç†æ–¹å¼å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚ç»„åˆä½¿ç”¨ï¼Œæ„å»ºä¸€ä¸ªå¥å£®çš„é”™è¯¯å¤„ç†ç³»ç»Ÿã€‚å…³é”®ç‚¹æ˜¯ï¼š\n1. åˆç†åŒºåˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„é”™è¯¯å¤„ç†\n2. ç¡®ä¿é”™è¯¯è¢«æ­£ç¡®è®°å½•å’Œç›‘æ§\n3. å®ç°ä¼˜é›…çš„é”™è¯¯æ¢å¤æœºåˆ¶\n4. é¿å…æ•æ„Ÿä¿¡æ¯æ³„éœ²\n5. ä¿æŒåº”ç”¨çš„ç¨³å®šæ€§\n\n## 2. ä»‹ç» Node.js ä¸­å¸¸è§çš„å†…å­˜æ³„æ¼åœºæ™¯åŠå…¶è§£å†³æ–¹æ¡ˆ\n\n### 2.1. å…¨å±€å˜é‡å¼•èµ·çš„å†…å­˜æ³„æ¼\n\n```javascript hl:1\n// é”™è¯¯ç¤ºä¾‹ï¼šå…¨å±€å˜é‡ç´¯ç§¯\nglobal.dataStore = [];\n\nfunction addData(data) {\n    global.dataStore.push(data);\n}\n\n// æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨å±€éƒ¨å˜é‡æˆ–åŠæ—¶æ¸…ç†\nclass DataManager {\n    constructor() {\n        this.dataStore = new Map();\n        this.maxSize = 1000;\n    }\n\n    addData(key, data) {\n        // è®¾ç½®å®¹é‡é™åˆ¶\n        if (this.dataStore.size >= this.maxSize) {\n            const firstKey = this.dataStore.keys().next().value;\n            this.dataStore.delete(firstKey);\n        }\n        this.dataStore.set(key, data);\n    }\n\n    clearOldData() {\n        const now = Date.now();\n        for (const [key, data] of this.dataStore) {\n            if (now - data.timestamp > 3600000) { // 1å°æ—¶å‰çš„æ•°æ®\n                this.dataStore.delete(key);\n            }\n        }\n    }\n}\n```\n\n### 2.2. é—­åŒ…å¯¼è‡´çš„å†…å­˜æ³„æ¼\n\n```javascript hl:6\n// é”™è¯¯ç¤ºä¾‹ï¼šé—­åŒ…æŒæœ‰å¤§å¯¹è±¡å¼•ç”¨\nfunction createLeak() {\n    const largeData = new Array(1000000);\n    \n    return function() {\n        console.log(largeData[0]); // largeData ä¸€ç›´è¢«æŒæœ‰\n    }\n}\n\n// æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨å®Œå³é‡Šæ”¾\nfunction betterImplementation() {\n    let result;\n    {\n        const largeData = new Array(1000000);\n        result = largeData[0];\n    }\n    // largeData åœ¨è¿™é‡Œå·²ç»å¯ä»¥è¢«åƒåœ¾å›æ”¶\n    return function() {\n        console.log(result);\n    }\n}\n```\n\n### 2.3. äº‹ä»¶ç›‘å¬å™¨æœªç§»é™¤\n\n```javascript hl:25\n// é”™è¯¯ç¤ºä¾‹ï¼šäº‹ä»¶ç›‘å¬å™¨ç´¯ç§¯\nclass LeakyClass {\n    constructor() {\n        this.data = new Array(10000);\n        process.on('data', this.onData.bind(this));\n    }\n\n    onData(data) {\n        // å¤„ç†æ•°æ®\n    }\n}\n\n// æ­£ç¡®ç¤ºä¾‹ï¼šæä¾›ç§»é™¤ç›‘å¬å™¨çš„æ–¹æ³•\nclass BetterClass {\n    constructor() {\n        this.data = new Array(10000);\n        this.boundOnData = this.onData.bind(this);\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        process.on('data', this.boundOnData);\n    }\n\n    cleanup() {\n        process.removeListener('data', this.boundOnData);\n    }\n\n    onData(data) {\n        // å¤„ç†æ•°æ®\n    }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst instance = new BetterClass();\n// ä½¿ç”¨å®Œåæ¸…ç†\ninstance.cleanup();\n```\n\n### 2.4. ç¼“å­˜æœªé™åˆ¶å¤§å°\n\n```javascript hl:1\n// é”™è¯¯ç¤ºä¾‹ï¼šæ— é™åˆ¶çš„ç¼“å­˜\nconst cache = {};\n\nfunction addToCache(key, value) {\n    cache[key] = value;\n}\n\n// æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨ LRU ç¼“å­˜\nconst LRU = require('lru-cache');\nconst cache = new LRU({\n    max: 500,   // æœ€å¤§é¡¹æ•°\n    maxAge: 1000 * 60 * 60 // é¡¹çš„æœ€å¤§å¹´é¾„ï¼ˆ1å°æ—¶ï¼‰\n});\n\n// æˆ–è€…ä½¿ç”¨ Map å®ç°ç®€å•çš„ LRU\nclass SimpleCache {\n    constructor(limit = 1000) {\n        this.limit = limit;\n        this.cache = new Map();\n    }\n\n    set(key, value) {\n        if (this.cache.size >= this.limit) {\n            const firstKey = this.cache.keys().next().value;\n            this.cache.delete(firstKey);\n        }\n        this.cache.set(key, value);\n    }\n\n    get(key) {\n        const value = this.cache.get(key);\n        if (value) {\n            // åˆ·æ–°è®¿é—®é¡ºåº\n            this.cache.delete(key);\n            this.cache.set(key, value);\n        }\n        return value;\n    }\n}\n```\n\n### 2.5. å®šæ—¶å™¨æœªæ¸…ç†\n\n```javascript hl:27\n// é”™è¯¯ç¤ºä¾‹ï¼šå®šæ—¶å™¨æœªæ¸…ç†\nfunction startPolling() {\n    setInterval(() => {\n        // æ‰§è¡ŒæŸäº›æ“ä½œ\n    }, 1000);\n}\n\n// æ­£ç¡®ç¤ºä¾‹ï¼šå¯æ¸…ç†çš„å®šæ—¶å™¨\nclass PollingManager {\n    constructor() {\n        this.timers = new Set();\n    }\n\n    startPolling(fn, interval) {\n        const timer = setInterval(fn, interval);\n        this.timers.add(timer);\n        return timer;\n    }\n\n    stopPolling(timer) {\n        clearInterval(timer);\n        this.timers.delete(timer);\n    }\n\n    stopAll() {\n        for (const timer of this.timers) {\n            clearInterval(timer);\n        }\n        this.timers.clear();\n    }\n}\n```\n\n### 2.6. Promise é“¾æœªå¤„ç†\n\n```javascript hl:1\n// é”™è¯¯ç¤ºä¾‹ï¼šæœªå¤„ç†çš„ Promise\nfunction leakyPromise() {\n    return new Promise(resolve => {\n        const hugeData = new Array(1000000);\n        resolve(hugeData);\n    });\n}\n\n// æ­£ç¡®ç¤ºä¾‹ï¼šç¡®ä¿ Promise é“¾æ­£ç¡®å¤„ç†å’Œç»“æŸ\nasync function betterPromise() {\n    try {\n        const hugeData = await processData();\n        // ä½¿ç”¨å®Œæ•°æ®åç½®ä¸º null\n        hugeData = null;\n    } catch (error) {\n        console.error('Error:', error);\n    }\n}\n```\n\n### 2.7. Stream æœªæ­£ç¡®å¤„ç†\n\n```javascript\n// é”™è¯¯ç¤ºä¾‹ï¼šæµæœªæ­£ç¡®å¤„ç†\nconst fs = require('fs');\n\nconst readStream = fs.createReadStream('large-file.txt');\nreadStream.on('data', (chunk) => {\n    // å¤„ç†æ•°æ®\n});\n\n// æ­£ç¡®ç¤ºä¾‹ï¼šæ­£ç¡®å¤„ç†æµ\nclass StreamHandler {\n    constructor() {\n        this.streams = new Set();\n    }\n\n    handleStream(stream) {\n        this.streams.add(stream);\n\n        stream.on('end', () => {\n            this.streams.delete(stream);\n        });\n\n        stream.on('error', (error) => {\n            console.error('Stream error:', error);\n            this.streams.delete(stream);\n        });\n\n        return stream;\n    }\n\n    cleanup() {\n        for (const stream of this.streams) {\n            stream.destroy();\n        }\n        this.streams.clear();\n    }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst streamHandler = new StreamHandler();\nconst readStream = streamHandler.handleStream(\n    fs.createReadStream('large-file.txt')\n);\n```\n\n### 2.8. å†…å­˜ä½¿ç”¨ç›‘æ§\n\n```javascript hl:9\nclass MemoryMonitor {\n    constructor(threshold = 0.8) { // 80% é˜ˆå€¼\n        this.threshold = threshold;\n        this.startMonitoring();\n    }\n\n    startMonitoring() {\n        this.interval = setInterval(() => {\n            const usage = process.memoryUsage();\n            const heapUsed = usage.heapUsed;\n            const heapTotal = usage.heapTotal;\n            const usage_ratio = heapUsed / heapTotal;\n\n            console.log('å†…å­˜ä½¿ç”¨æƒ…å†µ:', {\n                heapUsed: `${Math.round(heapUsed / 1024 / 1024)} MB`,\n                heapTotal: `${Math.round(heapTotal / 1024 / 1024)} MB`,\n                usage: `${Math.round(usage_ratio * 100)}%`\n            });\n\n            if (usage_ratio > this.threshold) {\n                this.handleHighMemoryUsage(usage);\n            }\n        }, 30000); // æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡\n    }\n\n    handleHighMemoryUsage(usage) {\n        console.warn('å†…å­˜ä½¿ç”¨è¿‡é«˜è­¦å‘Šï¼');\n        // è¿™é‡Œå¯ä»¥æ·»åŠ å‘Šè­¦é€»è¾‘\n        // ä¾‹å¦‚ï¼šå‘é€å‘Šè­¦é‚®ä»¶ã€æ¸…ç†ç¼“å­˜ç­‰\n    }\n\n    stop() {\n        if (this.interval) {\n            clearInterval(this.interval);\n        }\n    }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst monitor = new MemoryMonitor();\n```\n\n### 2.9. WeakMap å’Œ WeakSet çš„ä½¿ç”¨\n\n```javascript\n// ä½¿ç”¨ WeakMap å­˜å‚¨å¯¹è±¡ç›¸å…³çš„æ•°æ®\nclass DomNodeData {\n    constructor() {\n        // ä½¿ç”¨ WeakMap å­˜å‚¨ DOM èŠ‚ç‚¹ç›¸å…³çš„æ•°æ®\n        this.nodeData = new WeakMap();\n    }\n\n    setData(node, data) {\n        this.nodeData.set(node, data);\n    }\n\n    getData(node) {\n        return this.nodeData.get(node);\n    }\n}\n\n// WeakMap ä¼šåœ¨å¯¹è±¡è¢«åƒåœ¾å›æ”¶æ—¶è‡ªåŠ¨æ¸…ç†ç›¸å…³æ•°æ®\nconst nodeData = new DomNodeData();\n```\n\n### 2.10. æœ€å\n\nè¿™äº›æ˜¯ Node.js ä¸­å¸¸è§çš„å†…å­˜æ³„æ¼åœºæ™¯åŠå…¶è§£å†³æ–¹æ¡ˆã€‚è¦é¿å…å†…å­˜æ³„æ¼ï¼Œå…³é”®æ˜¯è¦ï¼š\n\n1. åŠæ—¶æ¸…ç†ä¸å†ä½¿ç”¨çš„èµ„æº\n2. é™åˆ¶ç¼“å­˜å¤§å°\n3. æ­£ç¡®å¤„ç†äº‹ä»¶ç›‘å¬å™¨\n4. ä½¿ç”¨é€‚å½“çš„æ•°æ®ç»“æ„ï¼ˆå¦‚ WeakMapï¼‰\n5. å®æ–½ç›‘æ§æœºåˆ¶\n6. å®šæœŸè¿›è¡Œå†…å­˜ä½¿ç”¨åˆ†æ\n\nåŒæ—¶ï¼Œå»ºè®®ä½¿ç”¨å·¥å…·å¦‚ `node-heapdump`ã€`node --inspect` ç­‰è¿›è¡Œå†…å­˜åˆ†æå’Œè°ƒè¯•ã€‚\n\n## 3. è¯¦ç»†ä»‹ç» Node.js ä¸­è¿›ç¨‹é€šä¿¡ï¼ˆIPCï¼šInter-Process Communicationï¼‰çš„å„ç§æ–¹å¼\n\n### 3.1. child_process å­è¿›ç¨‹é€šä¿¡\n\n```javascript\n// 1.1 spawn æ–¹å¼\nconst { spawn } = require('child_process');\n\n// çˆ¶è¿›ç¨‹\nconst child = spawn('node', ['child.js']);\n\nchild.stdout.on('data', (data) => {\n    console.log('å­è¿›ç¨‹è¾“å‡ºï¼š', data.toString());\n});\n\nchild.stderr.on('data', (data) => {\n    console.error('å­è¿›ç¨‹é”™è¯¯ï¼š', data.toString());\n});\n\nchild.on('close', (code) => {\n    console.log(`å­è¿›ç¨‹é€€å‡ºï¼Œé€€å‡ºç  ${code}`);\n});\n\n// 1.2 fork æ–¹å¼\nconst { fork } = require('child_process');\n\n// çˆ¶è¿›ç¨‹ (parent.js)\nconst child = fork('./child.js');\n\n// å‘é€æ¶ˆæ¯ç»™å­è¿›ç¨‹\nchild.send({ hello: 'world' });\n\n// æ¥æ”¶å­è¿›ç¨‹æ¶ˆæ¯\nchild.on('message', (message) => {\n    console.log('æ”¶åˆ°å­è¿›ç¨‹æ¶ˆæ¯:', message);\n});\n\n// å­è¿›ç¨‹ (child.js)\nprocess.on('message', (message) => {\n    console.log('æ”¶åˆ°çˆ¶è¿›ç¨‹æ¶ˆæ¯:', message);\n    // å›å¤çˆ¶è¿›ç¨‹\n    process.send({ received: true });\n});\n```\n\n### 3.2. cluster é›†ç¾¤æ¨¡å¼é€šä¿¡\n\n```javascript\nconst cluster = require('cluster');\nconst http = require('http');\nconst numCPUs = require('os').cpus().length;\n\nif (cluster.isMaster) {\n    // ä¸»è¿›ç¨‹ä»£ç \n    console.log(`ä¸»è¿›ç¨‹ ${process.pid} æ­£åœ¨è¿è¡Œ`);\n\n    // ç”Ÿæˆå·¥ä½œè¿›ç¨‹\n    for (let i = 0; i < numCPUs; i++) {\n        const worker = cluster.fork();\n\n        // ä¸»è¿›ç¨‹å‘é€æ¶ˆæ¯ç»™å·¥ä½œè¿›ç¨‹\n        worker.send({ type: 'hello', from: 'master' });\n\n        // æ¥æ”¶å·¥ä½œè¿›ç¨‹æ¶ˆæ¯\n        worker.on('message', (message) => {\n            console.log(`ä¸»è¿›ç¨‹æ”¶åˆ°æ¥è‡ªå·¥ä½œè¿›ç¨‹ ${worker.id} çš„æ¶ˆæ¯:`, message);\n        });\n    }\n\n    // ç›‘å¬å·¥ä½œè¿›ç¨‹é€€å‡º\n    cluster.on('exit', (worker, code, signal) => {\n        console.log(`å·¥ä½œè¿›ç¨‹ ${worker.process.pid} å·²é€€å‡º`);\n    });\n} else {\n    // å·¥ä½œè¿›ç¨‹ä»£ç \n    http.createServer((req, res) => {\n        res.writeHead(200);\n        res.end('ä½ å¥½ï¼Œä¸–ç•Œ\\n');\n    }).listen(8000);\n\n    // å·¥ä½œè¿›ç¨‹æ¥æ”¶æ¶ˆæ¯\n    process.on('message', (message) => {\n        console.log(`å·¥ä½œè¿›ç¨‹ ${process.pid} æ”¶åˆ°æ¶ˆæ¯:`, message);\n    });\n\n    // å·¥ä½œè¿›ç¨‹å‘é€æ¶ˆæ¯ç»™ä¸»è¿›ç¨‹\n    process.send({ type: 'ready', pid: process.pid });\n}\n```\n\n### 3.3. Socket é€šä¿¡\n\n```javascript\n// 3.1 TCP Socket\nconst net = require('net');\n\n// TCP æœåŠ¡å™¨\nconst server = net.createServer((socket) => {\n    socket.on('data', (data) => {\n        console.log('æ”¶åˆ°æ•°æ®:', data.toString());\n        socket.write('æœåŠ¡å™¨å·²æ”¶åˆ°æ¶ˆæ¯');\n    });\n});\n\nserver.listen(8080, () => {\n    console.log('TCP æœåŠ¡å™¨å¯åŠ¨åœ¨ç«¯å£ 8080');\n});\n\n// TCP å®¢æˆ·ç«¯\nconst client = new net.Socket();\nclient.connect(8080, 'localhost', () => {\n    client.write('ä½ å¥½ï¼ŒæœåŠ¡å™¨');\n});\n\n// 3.2 Unix Domain Socket\nconst server = net.createServer((socket) => {\n    socket.on('data', (data) => {\n        console.log('æ”¶åˆ°æ•°æ®:', data.toString());\n    });\n});\n\nserver.listen('/tmp/node.sock');\n```\n\n### 3.4. æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆä½¿ç”¨ Redisï¼‰\n\n```javascript\nconst Redis = require('ioredis');\nconst redis = new Redis();\n\n// å‘å¸ƒè€…\nclass Publisher {\n    constructor() {\n        this.redis = new Redis();\n    }\n\n    publish(channel, message) {\n        return this.redis.publish(channel, JSON.stringify(message));\n    }\n}\n\n// è®¢é˜…è€…\nclass Subscriber {\n    constructor() {\n        this.redis = new Redis();\n    }\n\n    subscribe(channel, callback) {\n        this.redis.subscribe(channel, (err, count) => {\n            if (err) {\n                console.error('è®¢é˜…é”™è¯¯:', err);\n                return;\n            }\n            console.log(`è®¢é˜…äº† ${count} ä¸ªé¢‘é“`);\n        });\n\n        this.redis.on('message', (channel, message) => {\n            callback(channel, JSON.parse(message));\n        });\n    }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst publisher = new Publisher();\nconst subscriber = new Subscriber();\n\nsubscriber.subscribe('news', (channel, message) => {\n    console.log(`æ”¶åˆ°æ¥è‡ª ${channel} çš„æ¶ˆæ¯:`, message);\n});\n\npublisher.publish('news', { title: 'é‡è¦é€šçŸ¥', content: 'ç³»ç»Ÿæ›´æ–°' });\n```\n\n### 3.5. å…±äº«å†…å­˜ï¼ˆä½¿ç”¨ Node.js worker_threadsï¼‰\n\n```javascript\nconst { Worker, isMainThread, parentPort, workerData, SharedArrayBuffer } = require('worker_threads');\n\nif (isMainThread) {\n    // ä¸»çº¿ç¨‹ä»£ç \n    const sharedBuffer = new SharedArrayBuffer(1024);\n    const sharedArray = new Int32Array(sharedBuffer);\n\n    const worker = new Worker(__filename, {\n        workerData: { sharedBuffer }\n    });\n\n    worker.on('message', (message) => {\n        console.log('ä¸»çº¿ç¨‹æ”¶åˆ°æ¶ˆæ¯:', message);\n        console.log('å…±äº«å†…å­˜æ•°æ®:', sharedArray[0]);\n    });\n\n    // ä¿®æ”¹å…±äº«å†…å­˜\n    sharedArray[0] = 100;\n    worker.postMessage('å·²æ›´æ–°å…±äº«å†…å­˜');\n} else {\n    // å·¥ä½œçº¿ç¨‹ä»£ç \n    const sharedArray = new Int32Array(workerData.sharedBuffer);\n\n    parentPort.on('message', (message) => {\n        console.log('å·¥ä½œçº¿ç¨‹æ”¶åˆ°æ¶ˆæ¯:', message);\n        console.log('å…±äº«å†…å­˜æ•°æ®:', sharedArray[0]);\n        \n        // ä¿®æ”¹å…±äº«å†…å­˜\n        sharedArray[0] += 1;\n        parentPort.postMessage('å·¥ä½œçº¿ç¨‹å·²ä¿®æ”¹å…±äº«å†…å­˜');\n    });\n}\n```\n\n### 3.6. HTTP/HTTPS é€šä¿¡\n\n```javascript\nconst http = require('http');\nconst axios = require('axios');\n\n// HTTP æœåŠ¡å™¨\nconst server = http.createServer((req, res) => {\n    if (req.method === 'POST') {\n        let body = '';\n        req.on('data', chunk => {\n            body += chunk.toString();\n        });\n        req.on('end', () => {\n            console.log('æ”¶åˆ°æ•°æ®:', JSON.parse(body));\n            res.writeHead(200, { 'Content-Type': 'application/json' });\n            res.end(JSON.stringify({ status: 'ok' }));\n        });\n    }\n});\n\nserver.listen(3000, () => {\n    console.log('HTTP æœåŠ¡å™¨è¿è¡Œåœ¨ç«¯å£ 3000');\n});\n\n// HTTP å®¢æˆ·ç«¯\nasync function sendRequest() {\n    try {\n        const response = await axios.post('http://localhost:3000', {\n            message: 'ä½ å¥½ï¼ŒæœåŠ¡å™¨'\n        });\n        console.log('æœåŠ¡å™¨å“åº”:', response.data);\n    } catch (error) {\n        console.error('è¯·æ±‚é”™è¯¯:', error);\n    }\n}\n```\n\n### 3.7. WebSocket é€šä¿¡\n\n```javascript\nconst WebSocket = require('ws');\n\n// WebSocket æœåŠ¡å™¨\nconst wss = new WebSocket.Server({ port: 8080 });\n\nwss.on('connection', (ws) => {\n    console.log('æ–°çš„è¿æ¥å»ºç«‹');\n\n    ws.on('message', (message) => {\n        console.log('æ”¶åˆ°æ¶ˆæ¯:', message.toString());\n        // å¹¿æ’­æ¶ˆæ¯ç»™æ‰€æœ‰å®¢æˆ·ç«¯\n        wss.clients.forEach((client) => {\n            if (client !== ws && client.readyState === WebSocket.OPEN) {\n                client.send(message.toString());\n            }\n        });\n    });\n});\n\n// WebSocket å®¢æˆ·ç«¯\nconst ws = new WebSocket('ws://localhost:8080');\n\nws.on('open', () => {\n    ws.send('å®¢æˆ·ç«¯è¿æ¥æˆåŠŸ');\n});\n\nws.on('message', (data) => {\n    console.log('æ”¶åˆ°æœåŠ¡å™¨æ¶ˆæ¯:', data.toString());\n});\n```\n\n### 3.8. è¿›ç¨‹ç®¡ç†å’Œç›‘æ§\n\n```javascript\nclass ProcessManager {\n    constructor() {\n        this.workers = new Map();\n        this.setupMaster();\n    }\n\n    setupMaster() {\n        cluster.setupMaster({\n            exec: 'worker.js',\n            args: ['--use', 'http']\n        });\n\n        cluster.on('online', (worker) => {\n            console.log(`å·¥ä½œè¿›ç¨‹ ${worker.process.pid} å·²å¯åŠ¨`);\n            this.workers.set(worker.id, worker);\n        });\n\n        cluster.on('exit', (worker, code, signal) => {\n            console.log(`å·¥ä½œè¿›ç¨‹ ${worker.process.pid} é€€å‡º`);\n            this.workers.delete(worker.id);\n            \n            // è‡ªåŠ¨é‡å¯è¿›ç¨‹\n            if (signal !== 'SIGTERM') {\n                this.createWorker();\n            }\n        });\n    }\n\n    createWorker() {\n        const worker = cluster.fork();\n        return worker;\n    }\n\n    broadcastMessage(message) {\n        for (const worker of this.workers.values()) {\n            worker.send(message);\n        }\n    }\n\n    shutdown() {\n        for (const worker of this.workers.values()) {\n            worker.kill('SIGTERM');\n        }\n    }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst manager = new ProcessManager();\n// åˆ›å»ºå·¥ä½œè¿›ç¨‹\nfor (let i = 0; i < require('os').cpus().length; i++) {\n    manager.createWorker();\n}\n\n// å¹¿æ’­æ¶ˆæ¯\nmanager.broadcastMessage({ type: 'config', data: { port: 8000 } });\n```\n\n### 3.9. æ€»ç»“\n\nè¿™äº›æ˜¯ Node.js ä¸­ä¸»è¦çš„è¿›ç¨‹é€šä¿¡æ–¹å¼ï¼Œæ¯ç§æ–¹å¼éƒ½æœ‰å…¶é€‚ç”¨åœºæ™¯ï¼š\n\n--- \n\n1. child_processï¼šé€‚ç”¨äº`çˆ¶å­è¿›ç¨‹`é€šä¿¡\n2. clusterï¼šé€‚ç”¨äº`ä¸»ä»æ¶æ„çš„å¤šè¿›ç¨‹åº”ç”¨`\n3. Socketï¼šé€‚ç”¨äº`è·¨æœºå™¨`çš„è¿›ç¨‹é€šä¿¡ \n4. æ¶ˆæ¯é˜Ÿåˆ—ï¼šé€‚ç”¨äºè§£è€¦çš„å¼‚æ­¥é€šä¿¡ ï¼ˆredisï¼‰\n5. å…±äº«å†…å­˜ï¼šé€‚ç”¨äºé«˜æ€§èƒ½æ•°æ®å…±äº«ï¼ˆworker_threadsï¼‰\n6. HTTP/HTTPSï¼šé€‚ç”¨äºRESTfulæœåŠ¡é€šä¿¡\n7. WebSocketï¼šé€‚ç”¨äºå®æ—¶åŒå‘é€šä¿¡\n8. è¿›ç¨‹ç®¡ç†ï¼šé€‚ç”¨äºå¤æ‚çš„å¤šè¿›ç¨‹åº”ç”¨\n\n--- \n\né€‰æ‹©åˆé€‚çš„é€šä¿¡æ–¹å¼éœ€è¦è€ƒè™‘ï¼š\n- é€šä¿¡æ•ˆç‡\n- å¯é æ€§è¦æ±‚\n- å®ç°å¤æ‚åº¦\n- è·¨å¹³å°éœ€æ±‚\n- ç»´æŠ¤æˆæœ¬\n\n## 4. nodejs server ç«¯ å¦‚ä½•æ¸…é™¤  cookie\n\n1. Express:Â `res.clearCookie(name)`\n2. Koa:Â `ctx.cookies.set(name, null)`\n3. åŸç”Ÿ:Â `res.setHeader('Set-Cookie', 'name=; Max-Age=0')`\n\nå®é™…åº”ç”¨ï¼Œé€šè¿‡ `/logout` æ¥é€€å‡ºç™»å½•ï¼Œæ¸…é™¤ cookieç­‰\n\nå®‰å…¨ç›¸å…³ï¼š\n\n```javascript\nconst cookieOptions = {\n    path: '/',\n    httpOnly: true,    // é˜²æ­¢ XSS\n    secure: true,      // ä»… HTTPS\n    sameSite: 'strict' // é˜²æ­¢ CSRF\n};\n```\n\n## 5. TCP ç²˜åŒ…æ˜¯æ€ä¹ˆå›äº‹ï¼Œå¦‚ä½•å¤„ç†? UDP æœ‰ç²˜åŒ…å—?\n\n### 5.1. TCP ç²˜åŒ…é—®é¢˜\n\nTCP ç²˜åŒ…æ˜¯å› ä¸º TCP æ˜¯`é¢å‘æµ`çš„åè®®ï¼Œä¼ è¾“æ•°æ®æ—¶ä¼šå°†æ•°æ®æ‹†åˆ†æˆå¤šä¸ªæ•°æ®åŒ…è¿›è¡Œä¼ è¾“ï¼Œ`æ¥æ”¶æ–¹`æ”¶åˆ°æ•°æ®åä¼šæŒ‰åº`é‡ç»„`ã€‚è¿™å¯èƒ½å¯¼è‡´ä¸¤ç§æƒ…å†µï¼š\n\n1. å¤šä¸ªå°æ•°æ®åŒ…åˆå¹¶æˆä¸€ä¸ªå¤§æ•°æ®åŒ…\n2. ä¸€ä¸ªå¤§æ•°æ®åŒ…è¢«åˆ†å‰²æˆå¤šä¸ªå°æ•°æ®åŒ…\n\n```ascii\nå‘é€æ•°æ®ï¼š\nåŒ…1: \"Hello\" | åŒ…2: \"World\"\n\nå¯èƒ½çš„æ¥æ”¶æƒ…å†µï¼š\næƒ…å†µ1ï¼ˆç²˜åŒ…ï¼‰: \"HelloWorld\"\næƒ…å†µ2ï¼ˆæ‹†åŒ…ï¼‰: \"Hel\" \"loWorld\"\n```\n\n### 5.2. TCP ç²˜åŒ…è§£å†³æ–¹æ¡ˆ\n\n#### 5.2.1. å›ºå®šé•¿åº¦\n\n```javascript\n// å›ºå®šé•¿åº¦æ–¹æ¡ˆ\nconst net = require('net');\n\nconst server = net.createServer((socket) => {\n    const FIXED_LENGTH = 10;\n    let buffer = Buffer.alloc(0);\n\n    socket.on('data', (data) => {\n        buffer = Buffer.concat([buffer, data]);\n        \n        // å½“æ•°æ®è¶³å¤Ÿæ—¶ï¼ŒæŒ‰å›ºå®šé•¿åº¦è§£æ\n        while (buffer.length >= FIXED_LENGTH) {\n            const message = buffer.slice(0, FIXED_LENGTH);\n            buffer = buffer.slice(FIXED_LENGTH);\n            console.log('æ”¶åˆ°æ¶ˆæ¯:', message.toString());\n        }\n    });\n});\n```\n\n#### 5.2.2. åˆ†éš”ç¬¦\n\n```javascript\n// ä½¿ç”¨åˆ†éš”ç¬¦æ–¹æ¡ˆ\nconst net = require('net');\n\nconst server = net.createServer((socket) => {\n    let buffer = '';\n    const DELIMITER = '\\n';\n\n    socket.on('data', (data) => {\n        buffer += data;\n        \n        let index;\n        while ((index = buffer.indexOf(DELIMITER)) !== -1) {\n            const message = buffer.slice(0, index);\n            buffer = buffer.slice(index + 1);\n            console.log('æ”¶åˆ°æ¶ˆæ¯:', message);\n        }\n    });\n});\n```\n\n#### 5.2.3. æ¶ˆæ¯å¤´æ ‡è¯†é•¿åº¦\n\n```javascript\n// æ¶ˆæ¯å¤´æ ‡è¯†é•¿åº¦æ–¹æ¡ˆ\nconst net = require('net');\n\nclass Protocol {\n    static pack(message) {\n        const body = Buffer.from(message);\n        const header = Buffer.alloc(4);\n        header.writeUInt32BE(body.length);\n        return Buffer.concat([header, body]);\n    }\n\n    static unpack(buffer) {\n        if (buffer.length < 4) return null;\n        \n        const length = buffer.readUInt32BE(0);\n        if (buffer.length < length + 4) return null;\n        \n        const body = buffer.slice(4, length + 4);\n        const remaining = buffer.slice(length + 4);\n        \n        return {\n            message: body.toString(),\n            remaining: remaining\n        };\n    }\n}\n\n// æœåŠ¡ç«¯ç¤ºä¾‹\nconst server = net.createServer((socket) => {\n    let buffer = Buffer.alloc(0);\n\n    socket.on('data', (data) => {\n        buffer = Buffer.concat([buffer, data]);\n        \n        let result;\n        while ((result = Protocol.unpack(buffer))) {\n            console.log('æ”¶åˆ°æ¶ˆæ¯:', result.message);\n            buffer = result.remaining;\n        }\n    });\n});\n\n// å®¢æˆ·ç«¯ç¤ºä¾‹\nconst client = new net.Socket();\nclient.connect(3000, '127.0.0.1', () => {\n    const message = Protocol.pack('Hello World');\n    client.write(message);\n});\n```\n\n### 5.3. UDP ç²˜åŒ…é—®é¢˜\n\nUDP ä¸å­˜åœ¨ç²˜åŒ…é—®é¢˜ï¼Œå› ä¸ºï¼š\n\n1. UDP æ˜¯åŸºäºæ¶ˆæ¯çš„åè®®ï¼Œ**æ¯ä¸ªæ•°æ®åŒ…éƒ½æ˜¯ç‹¬ç«‹çš„**\n2. UDP ä¸ä¿è¯æ•°æ®åŒ…çš„é¡ºåºå’Œå¯é æ€§\n3. æ¯ä¸ª UDP æ•°æ®åŒ…éƒ½æœ‰æ˜ç¡®çš„ç•Œé™\n\n```javascript\n// UDP ç¤ºä¾‹\nconst dgram = require('dgram');\n\n// UDP æœåŠ¡å™¨\nconst server = dgram.createSocket('udp4');\n\nserver.on('message', (msg, rinfo) => {\n    // UDP æ¯ä¸ªæ¶ˆæ¯éƒ½æ˜¯å®Œæ•´çš„ï¼Œä¸ä¼šç²˜åŒ…\n    console.log(`æ”¶åˆ°æ¶ˆæ¯: ${msg} æ¥è‡ª ${rinfo.address}:${rinfo.port}`);\n});\n\nserver.bind(3000);\n\n// UDP å®¢æˆ·ç«¯\nconst client = dgram.createSocket('udp4');\n\n// å‘é€å¤šä¸ªæ¶ˆæ¯\nclient.send('Hello', 3000, 'localhost');\nclient.send('World', 3000, 'localhost');\n```\n\n### 5.4. æ€»ç»“æ¯”è¾ƒ\n\n1. TCP ç²˜åŒ…åŸå› ï¼š\n   - TCP æ˜¯æµå¼åè®®\n   - TCP æœ‰ç¼“å†²åŒºæœºåˆ¶\n   - æ•°æ®åŒ…çš„å‘é€å’Œæ¥æ”¶ä¸ä¸€å®šä¸€ä¸€å¯¹åº”\n\n2. UDP æ— ç²˜åŒ…åŸå› ï¼š\n   - UDP æ˜¯æ¶ˆæ¯è¾¹ç•Œåè®®\n   - æ¯ä¸ªæ•°æ®åŒ…éƒ½æ˜¯ç‹¬ç«‹çš„\n   - ä¸€æ¬¡æ¥æ”¶ä¸€ä¸ªå®Œæ•´çš„æ•°æ®åŒ…\n\n3. TCP ç²˜åŒ…è§£å†³æ–¹æ¡ˆï¼š\n   - å›ºå®šé•¿åº¦\n   - åˆ†éš”ç¬¦\n   - æ¶ˆæ¯å¤´+æ¶ˆæ¯ä½“\n   - è‡ªå®šä¹‰åè®®\n\n1. æœ€ä½³å®è·µï¼š\n   - TCP åº”ç”¨å»ºè®®ä½¿ç”¨æ¶ˆæ¯å¤´+æ¶ˆæ¯ä½“æ–¹æ¡ˆ\n   - å¯¹äºç®€å•åº”ç”¨å¯ä»¥ä½¿ç”¨åˆ†éš”ç¬¦æ–¹æ¡ˆ\n   - UDP åº”ç”¨éœ€è¦è€ƒè™‘æ•°æ®åŒ…å¤§å°é™åˆ¶å’Œä¸¢åŒ…å¤„ç†\n\n## 6. TIME_WAIT è¿‡å¤šçš„åŸå› ä»¥åŠè§£å†³æ–¹æ¡ˆ\n\n### 6.1. TIME_WAIT è¿‡å¤šçš„åŸå› \n\n#### 6.1.1. çŸ­è¿æ¥è¿‡å¤š\n\n```javascript\n// ä¸è‰¯ç¤ºä¾‹ï¼šé¢‘ç¹åˆ›å»ºçŸ­è¿æ¥\nconst http = require('http');\n\nsetInterval(() => {\n    http.get('http://example.com', (res) => {\n        // å¤„ç†å®Œç«‹å³å…³é—­\n        res.on('end', () => {\n            // è¿æ¥å…³é—­ï¼Œè¿›å…¥ TIME_WAIT\n        });\n    });\n}, 100);\n```\n\n#### 6.1.2. å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­è¿æ¥\n\n```javascript\n// ä¸è‰¯ç¤ºä¾‹ï¼šå®¢æˆ·ç«¯é¢‘ç¹ä¸»åŠ¨å…³é—­è¿æ¥\nconst net = require('net');\nconst client = new net.Socket();\n\nclient.connect(3000, '127.0.0.1', () => {\n    client.end(); // å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­ï¼Œå°†äº§ç”Ÿ TIME_WAIT\n});\n```\n\n#### 6.1.3. é«˜å¹¶å‘ä¸‹çš„è¿æ¥å¤ç”¨ä¸è¶³\n\n### 6.2. è§£å†³æ–¹æ¡ˆ\n\n#### 6.2.1. å¯ç”¨ TCP keepalive ä¿æŒé•¿è¿æ¥\n```javascript\n// æœåŠ¡ç«¯å¯ç”¨ keepalive\nconst server = net.createServer((socket) => {\n    socket.setKeepAlive(true, 60000); // 60ç§’\n});\n\n// æˆ–åœ¨ HTTP æœåŠ¡ä¸­\nconst server = http.createServer((req, res) => {\n    res.setHeader('Connection', 'keep-alive');\n    res.setHeader('Keep-Alive', 'timeout=5'); // 5ç§’è¶…æ—¶\n});\n```\n\n#### 6.2.2. ä½¿ç”¨è¿æ¥æ± \n```javascript\n// ä½¿ç”¨è¿æ¥æ± ç¤ºä¾‹\nconst generic_pool = require('generic-pool');\n\nconst factory = {\n    create: async () => {\n        const client = new net.Socket();\n        await new Promise((resolve) => {\n            client.connect(3000, '127.0.0.1', resolve);\n        });\n        return client;\n    },\n    destroy: (client) => {\n        return new Promise((resolve) => {\n            client.end();\n            client.on('close', resolve);\n        });\n    }\n};\n\nconst pool = generic_pool.createPool(factory, {\n    max: 10, // æœ€å¤§è¿æ¥æ•°\n    min: 2   // æœ€å°è¿æ¥æ•°\n});\n```\n\n#### 6.2.3. ç³»ç»Ÿå±‚é¢ä¼˜åŒ–\n\n```bash\n# ä¿®æ”¹ TIME_WAIT è¶…æ—¶æ—¶é—´\nsysctl -w net.ipv4.tcp_fin_timeout=30\n\n# å…è®¸ TIME_WAIT çŠ¶æ€çš„ socket é‡ç”¨\nsysctl -w net.ipv4.tcp_tw_reuse=1\n\n# å¿«é€Ÿå›æ”¶ TIME_WAIT è¿æ¥\nsysctl -w net.ipv4.tcp_tw_recycle=1  # æ³¨æ„ï¼šåœ¨ Linux 4.12+ å·²è¢«ç§»é™¤\n```\n\n#### 6.2.4. è´Ÿè½½å‡è¡¡\n\n```javascript\n// ä½¿ç”¨ Node.js cluster æ¨¡å—åšè´Ÿè½½å‡è¡¡\nconst cluster = require('cluster');\nconst http = require('http');\nconst numCPUs = require('os').cpus().length;\n\nif (cluster.isMaster) {\n    // å¯åŠ¨å¤šä¸ªå·¥ä½œè¿›ç¨‹\n    for (let i = 0; i < numCPUs; i++) {\n        cluster.fork();\n    }\n} else {\n    // å·¥ä½œè¿›ç¨‹åˆ›å»ºæœåŠ¡å™¨\n    http.createServer((req, res) => {\n        res.writeHead(200);\n        res.end('hello world\\n');\n    }).listen(8000);\n}\n```\n\n### 6.3. æœ€ä½³å®è·µå»ºè®®\n\n#### 6.3.1. æœåŠ¡ç«¯è®¾è®¡\n\n   - å°½é‡ä½¿ç”¨é•¿è¿æ¥\n   - å®ç°è¿æ¥æ± æœºåˆ¶\n   - åˆç†é…ç½® keepalive å‚æ•°\n\n#### 6.3.2. å®¢æˆ·ç«¯è®¾è®¡\n\n   - ä½¿ç”¨è¿æ¥æ± \n   - é¿å…é¢‘ç¹åˆ›å»ºçŸ­è¿æ¥\n   - é€‚å½“ä½¿ç”¨é•¿è¿æ¥\n\n#### 6.3.3. ç³»ç»Ÿé…ç½®\n\n   - é€‚å½“è°ƒæ•´ç³»ç»Ÿå‚æ•°\n   - é…ç½®è´Ÿè½½å‡è¡¡\n   - ç›‘æ§ TIME_WAIT çŠ¶æ€\n\n#### 6.3.4. æ¶æ„ä¼˜åŒ–\n\n   - ä½¿ç”¨åå‘ä»£ç†\n   - å®ç°æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡\n   - åˆç†è®¾ç½®è¶…æ—¶æ—¶é—´\n\n## 7. ECONNRESET \n\nECONNRESETï¼ˆConnection Resetï¼‰é”™è¯¯è¡¨ç¤ºè¿æ¥è¢«å¯¹æ–¹å¼ºåˆ¶å…³é—­ã€‚ç®€å•æ¥è¯´å°±æ˜¯ï¼šTCP è¿æ¥ä¸­ï¼Œä¸€æ–¹çªç„¶æ”¶åˆ°äº† RST åŒ…ï¼Œè¿æ¥è¢«é‡ç½®\n\n`ECONNRESET`æ˜¯å› ä¸ºTCPè¿æ¥çš„å¯¹ç«¯(é€šå¸¸æ˜¯server)çªç„¶æ–­å¼€äº†è¿æ¥ã€‚serverä¸€èˆ¬éƒ½è®¾ç½®äº†`keepalive`ï¼Œå¯¹äºä¸æ´»åŠ¨çš„è¿æ¥ä¼šè¶…æ—¶æ–­å¼€\n\n### 7.1. å¸¸è§åŸå› \n\n#### 7.1.1. æœåŠ¡ç«¯ä¸»åŠ¨å…³é—­è¿æ¥\n\n```javascript\n// æœåŠ¡ç«¯çªç„¶å…³é—­\nsocket.destroy();\n```\n\n#### 7.1.2. é˜²ç«å¢™å¹²æ‰°\n\n- è¿æ¥ç©ºé—²è¢«é˜²ç«å¢™åˆ‡æ–­\n- æŸäº›åŒ…è¢«é˜²ç«å¢™æ‹¦æˆª\n\n#### 7.1.3. å®¢æˆ·ç«¯ç»§ç»­å‘é€æ•°æ®ï¼Œä½†æœåŠ¡ç«¯å·²å…³é—­\n\n```javascript\n// é”™è¯¯ç¤ºä¾‹\nsocket.on('end', () => {\n    // æœåŠ¡ç«¯å·²å…³é—­ï¼Œä½†è¿˜åœ¨å†™æ•°æ®\n    socket.write('data');  // å¯èƒ½è§¦å‘ ECONNRESET\n});\n```\n\n### 7.2. è§£å†³æ–¹æ¡ˆ\n\n#### 7.2.1. ä½¿ç”¨ keep-alive ä¿æŒè¿æ¥æ´»è·ƒ\n\n```javascript\nsocket.setKeepAlive(true, 1000);\n```\n\n#### 7.2.2. ä¼˜é›…å…³é—­è¿æ¥\n\n```javascript\nsocket.end(() => {\n    // ç¡®ä¿æ•°æ®å‘é€å®Œæ¯•åå†å…³é—­\n    socket.destroy();\n});\n```\n\n#### 7.2.3. æ·»åŠ é”™è¯¯å¤„ç†\n\n```javascript\nsocket.on('error', (err) => {\n    if (err.code === 'ECONNRESET') {\n        // å¤„ç†è¿æ¥é‡ç½®\n        console.log('è¿æ¥è¢«é‡ç½®');\n    }\n});\n```\n\n#### 7.2.4. å®ç°é‡è¿æœºåˆ¶\n\n```javascript\nfunction connect() {\n    const socket = new net.Socket();\n    socket.on('error', (err) => {\n        if (err.code === 'ECONNRESET') {\n            setTimeout(() => connect(), 1000);\n        }\n    });\n}\n```\n\n## 8. socket hang up\n\nsocket hang up è¡¨ç¤ºè¿æ¥æ„å¤–ä¸­æ–­ï¼Œé€šå¸¸æ˜¯å› ä¸º**æœåŠ¡å™¨åœ¨å®¢æˆ·ç«¯è¿˜åœ¨ç­‰å¾…å“åº”æ—¶å…³é—­äº†è¿æ¥**ã€‚\n\n### 8.1. å¸¸è§åœºæ™¯\n\n#### 8.1.1. è¯·æ±‚è¶…æ—¶\n\n```javascript\n// æœåŠ¡ç«¯è®¾ç½®äº†è¶…æ—¶æ—¶é—´ï¼Œä½†å¤„ç†æ—¶é—´è¿‡é•¿\nconst server = http.createServer((req, res) => {\n    // é•¿æ—¶é—´æ“ä½œï¼Œè¶…è¿‡äº†é»˜è®¤è¶…æ—¶æ—¶é—´\n    setTimeout(() => {\n        res.end('done');  // å¯èƒ½å·²ç»è¶…æ—¶ï¼Œè§¦å‘ socket hang up\n    }, 2 * 60 * 1000);\n});\n```\n\n#### 8.1.2. æœåŠ¡ç«¯æå‰å…³é—­\n\n```javascript\n// æœåŠ¡ç«¯æå‰ç»“æŸå“åº”\napp.get('/api', (req, res) => {\n    res.socket.destroy();  // å¼ºåˆ¶å…³é—­è¿æ¥\n    // æˆ–\n    res.destroy();\n});\n```\n\n#### 8.1.3. ä»£ç†è¶…æ—¶\n\n```javascript\n// ä»£ç†è¯·æ±‚è¶…æ—¶\nconst proxy = http.request(options, (res) => {\n    // å¤„ç†å“åº”\n});\n// æœªè®¾ç½®è¶…æ—¶å¤„ç†\nproxy.end();\n```\n\n### 8.2. è§£å†³æ–¹æ¡ˆ\n\n#### 8.2.1. è®¾ç½®åˆé€‚çš„è¶…æ—¶æ—¶é—´\n\n```javascript\n// æœåŠ¡ç«¯\nserver.timeout = 120000; // è®¾ç½®2åˆ†é’Ÿè¶…æ—¶\n\n// å®¢æˆ·ç«¯\nconst req = http.request(options);\nreq.setTimeout(120000);\n```\n\n#### 8.2.2. æ­£ç¡®çš„é”™è¯¯å¤„ç†\n\n```javascript\nconst axios = require('axios');\n\naxios.get('/api')\n    .catch(error => {\n        if (error.code === 'ECONNRESET') {\n            console.log('è¿æ¥è¢«é‡ç½®');\n        }\n    });\n```\n\n#### 8.2.3. å®ç°é‡è¯•æœºåˆ¶\n\n```javascript\nasync function fetchWithRetry(url, retries = 3) {\n    for (let i = 0; i < retries; i++) {\n        try {\n            return await fetch(url);\n        } catch (err) {\n            if (i === retries - 1) throw err;\n            await new Promise(r => setTimeout(r, 1000 * i));\n        }\n    }\n}\n```\n\n#### 8.2.4. ä½¿ç”¨ keep-alive\n\n```javascript\nconst agent = new http.Agent({\n    keepAlive: true,\n    keepAliveMsecs: 3000\n});\n```\n\n#### 8.2.5. æ€»ç»“\n\n- è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´\n- æ·»åŠ é”™è¯¯å¤„ç†\n- å®ç°é‡è¯•æœºåˆ¶\n- ä½¿ç”¨é•¿è¿æ¥ï¼ˆé€‚å½“åœºæ™¯ï¼‰\n\n## 9. åˆ—ä¸¾å‡ ä¸ªåœ¨ Node.js ä¸­æé«˜ç½‘ç»œä¼ è¾“é€Ÿåº¦çš„ä¸»è¦æ–¹æ³•\n\n### 9.1. å¯ç”¨ Gzip å‹ç¼©\n\n```javascript\nconst express = require('express');\nconst compression = require('compression');\nconst app = express();\n\n// å¯ç”¨ Gzip å‹ç¼©\napp.use(compression({\n    // åªå‹ç¼©å¤§äº 1kb çš„å“åº”\n    threshold: 1024,\n    // è®¾ç½®å‹ç¼©çº§åˆ«\n    level: 6,\n    // è®¾ç½®éœ€è¦å‹ç¼©çš„ç±»å‹\n    filter: (req, res) => {\n        if (req.headers['x-no-compression']) {\n            return false;\n        }\n        return compression.filter(req, res);\n    }\n}));\n```\n\n### 9.2. ä½¿ç”¨ HTTP/2\n\n```javascript\nconst http2 = require('http2');\nconst fs = require('fs');\n\nconst server = http2.createSecureServer({\n    key: fs.readFileSync('server.key'),\n    cert: fs.readFileSync('server.crt')\n});\n\nserver.on('stream', (stream, headers) => {\n    // HTTP/2 æ”¯æŒå¤šè·¯å¤ç”¨\n    stream.respond({\n        'content-type': 'text/html',\n        ':status': 200\n    });\n    stream.end('<h1>Hello World</h1>');\n});\n```\n\n### 9.3. å®ç°ç¼“å­˜ç­–ç•¥\n\n```javascript\nconst express = require('express');\nconst app = express();\n\n// é™æ€æ–‡ä»¶ç¼“å­˜\napp.use(express.static('public', {\n    maxAge: '1d',  // ç¼“å­˜ä¸€å¤©\n    etag: true,    // å¯ç”¨ ETag\n    lastModified: true\n}));\n\n// API å“åº”ç¼“å­˜\napp.get('/api/data', (req, res) => {\n    res.setHeader('Cache-Control', 'public, max-age=3600');\n    res.setHeader('ETag', 'W/\"123-123\"');\n    \n    // æ£€æŸ¥æ˜¯å¦å‘½ä¸­ç¼“å­˜\n    if (req.fresh) {\n        return res.status(304).end();\n    }\n    \n    res.json({ data: 'some data' });\n});\n```\n\n### 9.4. ä½¿ç”¨æµå¼ä¼ è¾“\n\n```javascript\nconst fs = require('fs');\n\n// æ–‡ä»¶ä¼ è¾“ä½¿ç”¨æµ\napp.get('/download', (req, res) => {\n    const fileStream = fs.createReadStream('large-file.mp4');\n    fileStream.pipe(res);\n});\n\n// å¤§æ•°æ®å“åº”ä½¿ç”¨æµ\napp.get('/large-data', (req, res) => {\n    res.setHeader('Content-Type', 'application/json');\n    \n    const streamData = async function*() {\n        for (let i = 0; i < 1000000; i++) {\n            yield JSON.stringify({ id: i }) + '\\n';\n        }\n    };\n    \n    const stream = Readable.from(streamData());\n    stream.pipe(res);\n});\n```\n\n### 9.5. å¯ç”¨ Keep-Alive\n\n```javascript\nconst http = require('http');\n\nconst server = http.createServer((req, res) => {\n    res.setHeader('Connection', 'keep-alive');\n    res.setHeader('Keep-Alive', 'timeout=5');\n});\n\n// æˆ–ä½¿ç”¨ agent\nconst agent = new http.Agent({\n    keepAlive: true,\n    keepAliveMsecs: 3000,\n    maxSockets: 100\n});\n```\n\n### 9.6. ä½¿ç”¨è´Ÿè½½å‡è¡¡\n\n```javascript\nconst cluster = require('cluster');\nconst numCPUs = require('os').cpus().length;\n\nif (cluster.isMaster) {\n    // ä¸»è¿›ç¨‹åˆ›å»ºå·¥ä½œè¿›ç¨‹\n    for (let i = 0; i < numCPUs; i++) {\n        cluster.fork();\n    }\n} else {\n    // å·¥ä½œè¿›ç¨‹åˆ›å»ºæœåŠ¡å™¨\n    const express = require('express');\n    const app = express();\n    app.listen(3000);\n}\n```\n\n### 9.7. ä½¿ç”¨å†…å­˜ç¼“å­˜\n\n```javascript hl:1\nconst NodeCache = require('node-cache');\nconst myCache = new NodeCache({ stdTTL: 100 });\n\napp.get('/api/data', async (req, res) => {\n    const key = req.url;\n    const cachedData = myCache.get(key);\n    \n    if (cachedData) {\n        return res.json(cachedData);\n    }\n    \n    const data = await fetchData();\n    myCache.set(key, data);\n    res.json(data);\n});\n```\n\n### 9.8. æ€»ç»“\n\n- å¯ç”¨å‹ç¼©\n- ä½¿ç”¨ HTTP/2\n- å®ç°åˆé€‚çš„ç¼“å­˜ç­–ç•¥\n- ä½¿ç”¨æµå¼ä¼ è¾“\n- ä¿æŒé•¿è¿æ¥\n- è´Ÿè½½å‡è¡¡\n- ä½¿ç”¨å†…å­˜ç¼“å­˜\n\næ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œé€šå¸¸éœ€è¦**å¤šç§æ–¹æ¡ˆç»„åˆä½¿ç”¨**æ‰èƒ½è¾¾åˆ°æœ€ä½³æ•ˆæœã€‚","6650f23d324354b9ba38d63c33d6621e":"\n# Koa çš„æ ¸å¿ƒåŸç†\n\n`#koa` \n\nKoa æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ Node.js Web æ¡†æ¶\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä¸­é—´ä»¶æœºåˆ¶ä¸æ´‹è‘±æ¨¡å‹ \n\nKoa æœ€æ ¸å¿ƒçš„ç‰¹æ€§æ˜¯å…¶`ä¸­é—´ä»¶æœºåˆ¶`ï¼Œé‡‡ç”¨æ´‹è‘±æ¨¡å‹ï¼ˆOnion Modelï¼‰ã€‚è¿™ç§æ¨¡å‹çš„å·¥ä½œæ–¹å¼å¦‚ä¸‹ï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-29.png)\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-27.png)\n\n### 1.1. ä¸­é—´ä»¶çš„æ ¸å¿ƒå®ç°åŸç†\n\n```javascript hl:4,12\n// ç®€åŒ–ç‰ˆçš„ä¸­é—´ä»¶å®ç°åŸç†\nclass Koa {\n  constructor() {\n    this.middleware = [];\n  }\n\n  use(fn) {\n    this.middleware.push(fn);\n    return this;\n  }\n\n  // æ ¸å¿ƒçš„ä¸­é—´ä»¶ç»„åˆå‡½æ•°\n  compose(middleware) {\n    return function(context, next) {\n      let index = -1;\n      \n      function dispatch(i) {\n        if (i <= index) {\n          return Promise.reject(new Error('next() called multiple times'));\n        }\n        index = i;\n        \n        let fn = middleware[i];\n        if (i === middleware.length) fn = next;\n        if (!fn) return Promise.resolve();\n        \n        try {\n          return Promise.resolve(fn(context, dispatch.bind(null, i + 1)));\n        } catch (err) {\n          return Promise.reject(err);\n        }\n      }\n      \n      return dispatch(0);\n    };\n  }\n}\n```\n\n### 1.2. ä¸­é—´ä»¶æœºåˆ¶ï¼ˆæ´‹è‘±æ¨¡å‹ï¼‰ï¼šç¤ºä¾‹\n\n```javascript\nconst Koa = require('koa');\nconst app = new Koa();\n\n// ä¸­é—´ä»¶1\napp.use(async (ctx, next) => {\n    console.log('1 å¼€å§‹');\n    await next();\n    console.log('1 ç»“æŸ');\n});\n\n// ä¸­é—´ä»¶2\napp.use(async (ctx, next) => {\n    console.log('2 å¼€å§‹');\n    await next();\n    console.log('2 ç»“æŸ');\n});\n\n// 1 å¼€å§‹ -> 2 å¼€å§‹ -> 2 ç»“æŸ -> 1 ç»“æŸ\n```\n\n## 2. Context å¯¹è±¡\n\nKoa çš„ Context å¯¹è±¡æ˜¯è¯·æ±‚çš„ä¸Šä¸‹æ–‡ï¼Œå°† node çš„ request å’Œ response å¯¹è±¡å°è£…åˆ°å•ä¸ªå¯¹è±¡ä¸­ï¼š\n\n```javascript\nclass Context {\n  constructor(req, res) {\n    this.req = req;\n    this.res = res;\n    this.state = {};  // ç”¨äºåœ¨ä¸­é—´ä»¶ä¹‹é—´ä¼ é€’ä¿¡æ¯\n    \n    // ä»£ç† request å’Œ response å¯¹è±¡çš„å±æ€§\n    delegate(this, 'response')\n      .method('attachment')\n      .method('redirect')\n      .access('type')\n      .access('status');\n      \n    delegate(this, 'request')\n      .method('acceptsLanguages')\n      .method('acceptsEncodings')\n      .access('querystring')\n      .access('socket');\n  }\n}\n```\n\n## 3. é”™è¯¯å¤„ç†æœºåˆ¶\n\nKoa æä¾›äº†ä¼˜é›…çš„é”™è¯¯å¤„ç†æ–¹å¼ï¼š\n\n```javascript\napp.use(async (ctx, next) => {\n  try {\n    await next();\n  } catch (err) {\n    ctx.status = err.status || 500;\n    ctx.body = {\n      message: err.message\n    };\n    // è§¦å‘åº”ç”¨çº§é”™è¯¯äº‹ä»¶\n    ctx.app.emit('error', err, ctx);\n  }\n});\n```\n\n## 4. å¼‚æ­¥æµç¨‹æ§åˆ¶\n\nKoa 2.x ç‰ˆæœ¬åˆ©ç”¨ async/await æ¥å¤„ç†å¼‚æ­¥æµç¨‹ï¼š\n\n```javascript\napp.use(async (ctx, next) => {\n  const start = Date.now();\n  await next();\n  const ms = Date.now() - start;\n  console.log(`${ctx.method} ${ctx.url} - ${ms}ms`);\n});\n```\n\n## 5. è¯·æ±‚å’Œå“åº”çš„å°è£…\n\nKoa å¯¹ Node.js åŸç”Ÿçš„ req å’Œ res å¯¹è±¡è¿›è¡Œäº†å°è£…ï¼Œå½¢æˆäº†`æ›´æ˜“ç”¨çš„ Request å’Œ Response å¯¹è±¡`ï¼š\n\n```javascript\nclass Request {\n  get header() {\n    return this.req.headers;\n  }\n  \n  get method() {\n    return this.req.method;\n  }\n  \n  get url() {\n    return this.req.url;\n  }\n  \n  get query() {\n    const str = this.querystring;\n    return qs.parse(str);\n  }\n}\n\nclass Response {\n  set type(type) {\n    this.set('Content-Type', type);\n  }\n  \n  set body(val) {\n    this._body = val;\n    // æ ¹æ®ä¸åŒç±»å‹è®¾ç½®å¯¹åº”çš„ Content-Type\n    if (typeof val === 'string') this.type = 'text/plain';\n    if (Buffer.isBuffer(val)) this.type = 'application/octet-stream';\n    if (typeof val === 'object') this.type = 'application/json';\n  }\n}\n```\n\n## 6. å·¥ä½œæµç¨‹\n\nå®Œæ•´çš„ Koa å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-28.png)\n\n## 7. ä¸»è¦ç‰¹ç‚¹æ€»ç»“\n\n- è½»é‡çº§ï¼šæ ¸å¿ƒä»£ç é‡å¾ˆå°ï¼Œä½†æ‰©å±•æ€§å¼º\n- ä¸­é—´ä»¶æœºåˆ¶ï¼šåŸºäºæ´‹è‘±æ¨¡å‹çš„ä¼˜é›…ä¸­é—´ä»¶æœºåˆ¶\n- å¼‚æ­¥æµç¨‹ï¼šå®Œç¾æ”¯æŒ async/await\n- ä¸Šä¸‹æ–‡å°è£…ï¼šå°† request å’Œ response å°è£…ä¸ºå•ä¸€çš„ context å¯¹è±¡\n- é”™è¯¯å¤„ç†ï¼šç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶\n- æ— å›è°ƒåœ°ç‹±ï¼šé€šè¿‡ async/await å½»åº•è§£å†³å›è°ƒé—®é¢˜\n\n## 8. å¯¹æ¯” Koa ä¸ express \n\nå…ˆè¯´ä¸»è¦åŒºåˆ«\n- æ˜¯å¦é›†æˆäº† router/static ä¸­é—´ä»¶\n- ä¸­é—´ä»¶å®ç°åŸºäº å›è°ƒè¿˜æ˜¯ promise\n\t- å¯¼è‡´æ•è·é”™è¯¯çš„çš„æ–¹å¼ä¸ä¸€è‡´\n\n### 8.1. æ ¸å¿ƒç†å¿µ\n\nExpress:\n- \"**å¢å¼º** Node.js\"çš„ç†å¿µ\n- æä¾›äº†å®Œæ•´çš„åº”ç”¨ç¨‹åºåŠŸèƒ½\n- åŒ…å«äº†è·¯ç”±ã€æ¨¡æ¿ç­‰åŠŸèƒ½åœ¨æ¡†æ¶å†…\n- æ›´åƒæ˜¯ä¸€ä¸ªå…¨èƒ½å‹çš„æ¡†æ¶\nKoa:\n- \"**ä¿®å¤å¹¶æ›¿ä»£** Node.js\"çš„ç†å¿µ\n- æç®€ä¸»ä¹‰ï¼Œæ ¸å¿ƒåŠŸèƒ½éå¸¸ç²¾ç®€\n- é€šè¿‡ä¸­é—´ä»¶æ‰©å±•åŠŸèƒ½\n- æ›´åƒæ˜¯ä¸€ä¸ªä¸­é—´ä»¶æ¡†æ¶\n\n### 8.2. ä¸­é—´ä»¶ç³»ç»Ÿ\n\nExpress:\n- åŸºäº`å›è°ƒ`å‡½æ•°ï¼ˆCallbackï¼‰\n- ä¸­é—´ä»¶æŒ‰çº¿æ€§æ–¹å¼æ‰§è¡Œ\n- é”™è¯¯å¤„ç†éœ€è¦ç‰¹æ®Šçš„é”™è¯¯å¤„ç†ä¸­é—´ä»¶\n```javascript\n// Express ä¸­é—´ä»¶ç¤ºä¾‹\napp.use((req, res, next) => {\n    console.log('Start');\n    next();\n    console.log('End');\n});\n```\n\nKoa:\n- åŸºäº async/await\n- æ´‹è‘±æ¨¡å‹ï¼ˆOnion modelï¼‰ä¸­é—´ä»¶\n- æ›´ä¼˜é›…çš„é”™è¯¯å¤„ç†æœºåˆ¶\n```javascript\n// Koa ä¸­é—´ä»¶ç¤ºä¾‹\napp.use(async (ctx, next) => {\n    console.log('Start');\n    await next();\n    console.log('End');\n});\n```\n\n### 8.3. å¼‚æ­¥å¤„ç†\n\nExpress:\n- ä½¿ç”¨å›è°ƒå¤„ç†å¼‚æ­¥\n- å®¹æ˜“é™·å…¥`å›è°ƒåœ°ç‹±`\n- é”™è¯¯å¤„ç†ç›¸å¯¹å¤æ‚\n```javascript\n// Express å¼‚æ­¥å¤„ç†\napp.get('/users', (req, res, next) => {\n    db.users.find()\n        .then(users => res.json(users))\n        .catch(next);\n});\n```\n\nKoa:\n- åŸç”Ÿæ”¯æŒ async/await\n- æ›´æ¸…æ™°çš„å¼‚æ­¥æµç¨‹\n- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†\n```javascript\n// Koa å¼‚æ­¥å¤„ç†\napp.use(async ctx => {\n    const users = await db.users.find();\n    ctx.body = users;\n});\n```\n\n### 8.4. ä¸Šä¸‹æ–‡å¤„ç†\n\nExpress:\n- åˆ†ç¦»çš„ req å’Œ res å¯¹è±¡\n- éœ€è¦æ‰‹åŠ¨å¤„ç†è¯·æ±‚å’Œå“åº”\n```javascript\n// Express\napp.use((req, res) => {\n    res.send(req.query.name);\n});\n```\n\nKoa:\n- ç»Ÿä¸€çš„ context å¯¹è±¡\n- å°è£…äº† request å’Œ response\n```javascript\n// Koa\napp.use(ctx => {\n    ctx.body = ctx.query.name;\n});\n```\n\n### 8.5. æ€§èƒ½æ¯”è¾ƒ\n\nExpress:\n- æ›´å¤šçš„å†…ç½®åŠŸèƒ½æ„å‘³ç€æ›´å¤§çš„å¼€é”€\n- å¤„ç†ç®€å•è¯·æ±‚çš„æ€§èƒ½å¾ˆå¥½\n- å¤§é‡ä¸­é—´ä»¶å¯èƒ½å½±å“æ€§èƒ½\nKoa:\n- æ›´è½»é‡çº§\n- æ›´å°‘çš„å†…å­˜å ç”¨\n- åœ¨å¤„ç†å¤§é‡å¹¶å‘è¯·æ±‚æ—¶è¡¨ç°æ›´å¥½\n\n### 8.6. ä»£ç ç¤ºä¾‹æ¯”è¾ƒ\n\n#### 8.6.1. Express è·¯ç”±å¤„ç†: å·²ç»å†…ç½®è·¯ç”±èƒ½åŠ›\n\n```javascript\nconst express = require('express');\nconst app = express();\n\napp.get('/api/users', (req, res) => {\n    res.json({ users: [] });\n});\n\napp.use((err, req, res, next) => {\n    res.status(500).json({ error: err.message });\n});\n```\n\n#### 8.6.2. Koa è·¯ç”±å¤„ç†\n\néœ€è¦å¼•å…¥ `@koa/router`\n\n```javascript hl:2\nconst Koa = require('koa');\nconst Router = require('@koa/router');\n\nconst app = new Koa();\nconst router = new Router();\n\nrouter.get('/api/users', async (ctx) => {\n    ctx.body = { users: [] };\n});\n\napp.use(async (ctx, next) => {\n    try {\n        await next();\n    } catch (err) {\n        ctx.status = 500;\n        ctx.body = { error: err.message };\n    }\n});\n```\n","bb400cd27f045c7396c9c47337a64159":"\n# å®ç°ä¸€ä¸ªç®€æ˜“ç‰ˆçš„ Koa\n\n`#nodejs` `#koa`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æœ€ç®€æºç å®ç° \n\n### 1.1. ä»£ç å®ç°\n\n```javascript\nconst http = require(\"http\");\nconst EventEmitter = require(\"events\");\n\n// å®ç°æ´‹è‘±æ¨¡å‹çš„ä¸­é—´ä»¶ç»„åˆå‡½æ•°\nfunction compose(middlewares) {\n  return function (context) {\n    let index = -1;\n\n    function dispatch(i) {\n      // å¦‚æœåœ¨ä¸€ä¸ªä¸­é—´ä»¶ä¸­å¤šæ¬¡è°ƒç”¨ next()ï¼Œåˆ™æŠ›å‡ºé”™è¯¯\n      if (i <= index) {\n        return Promise.reject(new Error(\"next() called multiple times\"));\n      }\n\n      index = i;\n      const fn = middlewares[i];\n\n      if (i === middlewares.length) {\n        return Promise.resolve();\n      }\n\n      try {\n        return Promise.resolve(fn(context, () => dispatch(i + 1)));\n      } catch (err) {\n        return Promise.reject(err);\n      }\n    }\n\n    return dispatch(0);\n  };\n}\n\n// ç®€åŒ–ç‰ˆçš„ Koa æ¡†æ¶,ç»§æ‰¿è‡ª EventEmitter\nclass MiniKoa extends EventEmitter {\n  constructor() {\n    super();\n    this.middleware = [];\n    this.context = Object.create(null);\n  }\n\n  // æ³¨å†Œä¸­é—´ä»¶\n  use(fn) {\n    if (typeof fn !== \"function\") {\n      throw new TypeError(\"Middleware must be a function!\");\n    }\n    // å°†ä¸­é—´ä»¶å‡½æ•°æ·»åŠ åˆ° middleware æ•°ç»„ä¸­\n    this.middleware.push(fn);\n    // è¿”å› thisï¼Œæ–¹ä¾¿é“¾å¼è°ƒç”¨\n    return this;\n  }\n\n  // åˆ›å»ºä¸Šä¸‹æ–‡å¯¹è±¡\n  createContext(req, res) {\n    const context = Object.create(this.context);\n\n    // ç®€åŒ–ç‰ˆçš„è¯·æ±‚å’Œå“åº”å¯¹è±¡\n    context.req = req;\n    context.res = res;\n\n    // æ·»åŠ å¸¸ç”¨çš„è¯·æ±‚å±æ€§\n    context.method = req.method;\n    context.url = req.url;\n    context.path = req.url.split(\"?\")[0];\n\n    // æ·»åŠ å¸¸ç”¨çš„å“åº”æ–¹æ³•\n    context.status = 404;\n    context.body = null;\n\n    context.set = function (key, value) {\n      res.setHeader(key, value);\n    };\n\n    return context;\n  }\n\n  // å¤„ç†è¯·æ±‚\n  handleRequest(ctx) {\n    const fn = compose(this.middleware);\n\n    return fn(ctx)\n      .then(() => this.handleResponse(ctx))\n      .catch((err) => this.handleError(err, ctx));\n  }\n\n  // å¤„ç†å“åº”\n  handleResponse(ctx) {\n    const body = ctx.body;\n    const res = ctx.res;\n\n    if (body === null) {\n      res.statusCode = 404;\n      res.end(\"Not Found\");\n      return;\n    }\n\n    if (typeof body === \"string\") {\n      res.setHeader(\"Content-Type\", \"text/plain\");\n      res.end(body);\n      return;\n    }\n\n    if (Buffer.isBuffer(body)) {\n      res.setHeader(\"Content-Type\", \"application/octet-stream\");\n      res.end(body);\n      return;\n    }\n\n    if (typeof body === \"object\") {\n      res.setHeader(\"Content-Type\", \"application/json\");\n      res.end(JSON.stringify(body));\n      return;\n    }\n  }\n\n  // é”™è¯¯å¤„ç†\n  handleError(err, ctx) {\n    console.error(err);\n    ctx.status = err.status || 500;\n    ctx.body = {\n      error: err.message || \"Internal Server Error\",\n    };\n    this.handleResponse(ctx);\n  }\n\n  // å¯åŠ¨æœåŠ¡å™¨\n  listen(...args) {\n    const server = http.createServer(this.callback());\n    return server.listen(...args);\n  }\n\n  // ç”Ÿæˆå›è°ƒå‡½æ•°\n  callback() {\n    return (req, res) => {\n      const ctx = this.createContext(req, res);\n      return this.handleRequest(ctx);\n    };\n  }\n}\n\nmodule.exports = MiniKoa;\n\n```\n\n### 1.2. ä¸»è¦åŠŸèƒ½\n\n1. **ä¸­é—´ä»¶ç»„åˆå‡½æ•° `compose`**ï¼š\n   - è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªä¸­é—´ä»¶æ•°ç»„ï¼Œå¹¶è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šä¾æ¬¡æ‰§è¡Œè¿™äº›ä¸­é—´ä»¶ã€‚\n   - ä¸­é—´ä»¶é€šè¿‡è°ƒç”¨ `next()` æ¥ä¼ é€’æ§åˆ¶æƒç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚\n   - å¦‚æœåœ¨ä¸€ä¸ªä¸­é—´ä»¶ä¸­å¤šæ¬¡è°ƒç”¨ `next()`ï¼Œä¼šæŠ›å‡ºé”™è¯¯ã€‚\n2. **`MiniKoa` ç±»**ï¼š\n   - ç»§æ‰¿è‡ª `EventEmitter`ï¼Œå…è®¸å®ä¾‹åœ¨ç‰¹å®šäº‹ä»¶ä¸Šæ³¨å†Œç›‘å¬å™¨ã€‚\n   - åŒ…å«ä¸€ä¸ª `middleware` æ•°ç»„ï¼Œç”¨äºå­˜å‚¨ä¸­é—´ä»¶å‡½æ•°ã€‚\n   - æä¾›äº† `use` æ–¹æ³•æ¥æ³¨å†Œä¸­é—´ä»¶ã€‚\n   - æä¾›äº† `createContext` æ–¹æ³•æ¥åˆ›å»ºä¸Šä¸‹æ–‡å¯¹è±¡ `context`ï¼Œè¯¥å¯¹è±¡åŒ…å«è¯·æ±‚å’Œå“åº”çš„ç›¸å…³ä¿¡æ¯ã€‚\n   - æä¾›äº† `handleRequest` æ–¹æ³•æ¥å¤„ç†è¯·æ±‚ï¼Œè°ƒç”¨ä¸­é—´ä»¶ç»„åˆå‡½æ•°ï¼Œå¹¶å¤„ç†å“åº”æˆ–é”™è¯¯ã€‚\n   - æä¾›äº† `handleResponse` æ–¹æ³•æ¥å¤„ç†å“åº”ï¼Œæ ¹æ® `context.body` çš„ç±»å‹è®¾ç½®å“åº”å¤´å’Œå“åº”ä½“ã€‚\n   - æä¾›äº† `handleError` æ–¹æ³•æ¥å¤„ç†é”™è¯¯ï¼Œè®¾ç½®é”™è¯¯çŠ¶æ€ç å’Œé”™è¯¯ä¿¡æ¯ã€‚\n   - æä¾›äº† `listen` æ–¹æ³•æ¥å¯åŠ¨ HTTP æœåŠ¡å™¨ã€‚\n   - æä¾›äº† `callback` æ–¹æ³•æ¥ç”Ÿæˆ HTTP æœåŠ¡å™¨çš„å›è°ƒå‡½æ•°ã€‚\n\n### 1.3. ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨ `EventEmitter`\n\n`MiniKoa` ç»§æ‰¿è‡ª `EventEmitter`ï¼Œä¸»è¦æ˜¯ä¸ºäº†**æä¾›äº‹ä»¶é©±åŠ¨**çš„èƒ½åŠ›ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½çš„ç”¨é€”ï¼š\n\n1. **é”™è¯¯å¤„ç†**ï¼š\n\t- å¯ä»¥åœ¨å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ç‰¹å®šäº‹ä»¶ï¼Œå…è®¸ç”¨æˆ·æ³¨å†Œé”™è¯¯å¤„ç†å™¨ã€‚\n\t- ä¾‹å¦‚ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ `app.on('error', (err) => { ... })` æ¥å¤„ç†å…¨å±€é”™è¯¯ã€‚\n2. **æ—¥å¿—è®°å½•**ï¼š\n\t- å¯ä»¥åœ¨ç‰¹å®šäº‹ä»¶ï¼ˆå¦‚è¯·æ±‚å¼€å§‹ã€è¯·æ±‚ç»“æŸï¼‰æ—¶è§¦å‘äº‹ä»¶ï¼Œå…è®¸ç”¨æˆ·æ³¨å†Œæ—¥å¿—è®°å½•å™¨ã€‚\n\t- ä¾‹å¦‚ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ `app.on('request', (ctx) => { ... })` æ¥è®°å½•è¯·æ±‚æ—¥å¿—ã€‚\n3. **æ‰©å±•åŠŸèƒ½**ï¼š\n\t- å…è®¸ç”¨æˆ·åœ¨ç‰¹å®šäº‹ä»¶ä¸Šæ³¨å†Œè‡ªå®šä¹‰åŠŸèƒ½ï¼Œå¢å¼ºæ¡†æ¶çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚\n\næ€»ä¹‹ï¼Œ`EventEmitter` æä¾›äº†ä¸€ç§çµæ´»çš„æœºåˆ¶æ¥å¤„ç†å¼‚æ­¥äº‹ä»¶ï¼Œä½¿å¾—æ¡†æ¶æ›´åŠ å¥å£®å’Œå¯æ‰©å±•ã€‚\n\n## 2. ä½¿ç”¨ç¤ºä¾‹\n\n```javascript\nconst MiniKoa = require(\"./mini-koa\");\nconst app = new MiniKoa();\n\n// è®°å½•è¯·æ±‚æ—¥å¿—çš„ä¸­é—´ä»¶\napp.use(async (ctx, next) => {\n  const start = Date.now();\n  console.log(`${ctx.method} ${ctx.url}`);\n\n  await next();\n\n  const ms = Date.now() - start;\n  console.log(`${ctx.method} ${ctx.url} - ${ms}ms`);\n});\n\n// å¤„ç†é”™è¯¯çš„ä¸­é—´ä»¶\napp.use(async (ctx, next) => {\n  try {\n    await next();\n  } catch (err) {\n    ctx.status = err.status || 500;\n    ctx.body = {\n      error: err.message,\n    };\n  }\n});\n\n// ä¸šåŠ¡é€»è¾‘ä¸­é—´ä»¶\napp.use(async (ctx) => {\n  if (ctx.path === \"/\") {\n    ctx.body = \"Hello MiniKoa!\";\n  } else if (ctx.path === \"/json\") {\n    ctx.body = { message: \"Hello MiniKoa!\" };\n  } else if (ctx.path === \"/error\") {\n    throw new Error(\"Oops! Something went wrong!\");\n  }\n});\n\napp.listen(3000, () => {\n  console.log(\"Server running on http://localhost:3000\");\n});\n\n```\n\n## 3. ç»§ç»­æ‰©å±•\n\nè¿™ä¸ªå®ç°è™½ç„¶ç®€åŒ–äº†å¾ˆå¤šç»†èŠ‚ï¼Œä½†ä¿ç•™äº† Koa çš„æ ¸å¿ƒç‰¹æ€§å’Œè®¾è®¡ç†å¿µã€‚ä½ å¯ä»¥åŸºäºè¿™ä¸ªåŸºç¡€ç‰ˆæœ¬ç»§ç»­æ·»åŠ æ›´å¤šåŠŸèƒ½ï¼Œæ¯”å¦‚ï¼š\n\n1. æ·»åŠ æ›´å¤šçš„ä¸Šä¸‹æ–‡æ–¹æ³•\n2. å®ç°è¯·æ±‚ä½“è§£æ\n3. æ·»åŠ æ›´å¤šçš„å“åº”ç±»å‹æ”¯æŒ\n4. å®ç°é™æ€æ–‡ä»¶æœåŠ¡\n5. æ·»åŠ è·¯ç”±åŠŸèƒ½\n6. å®ç° Cookie æ”¯æŒ\n\n## 4. Koa çš„æºç ç›®å½•ç»“æ„åŠå…¶åŠŸèƒ½\n\nKoa çš„æºç ç»“æ„éå¸¸ç²¾ç®€ï¼Œè¿™ä¹Ÿä½“ç°äº†å®ƒçš„è®¾è®¡ç†å¿µï¼šä¿æŒæ ¸å¿ƒç®€å•ï¼Œé€šè¿‡ä¸­é—´ä»¶æ‰©å±•åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯ä¸»è¦ç›®å½•å’Œæ–‡ä»¶çš„åˆ†æï¼š\n\n### 4.1. æ ¹ç›®å½•ç»“æ„\n\n```bash\nkoa/\nâ”œâ”€â”€ lib/           # æ ¸å¿ƒæºç ç›®å½•\nâ”œâ”€â”€ docs/          # æ–‡æ¡£ç›®å½•\nâ”œâ”€â”€ test/          # æµ‹è¯•ç”¨ä¾‹ç›®å½•\nâ”œâ”€â”€ package.json   # é¡¹ç›®é…ç½®æ–‡ä»¶\nâ””â”€â”€ History.md     # ç‰ˆæœ¬æ›´æ–°å†å²\n```\n\n### 4.2. lib ç›®å½•ï¼ˆæ ¸å¿ƒæºç ï¼‰\n\n```bash\nlib/\nâ”œâ”€â”€ application.js  # åº”ç”¨ç¨‹åºçš„ä¸»ç±»\nâ”œâ”€â”€ context.js      # ä¸Šä¸‹æ–‡å¯¹è±¡\nâ”œâ”€â”€ request.js      # è¯·æ±‚å¯¹è±¡çš„å°è£…\nâ””â”€â”€ response.js     # å“åº”å¯¹è±¡çš„å°è£…\n```\n\nè®©æˆ‘ä»¬è¯¦ç»†åˆ†ææ¯ä¸ªæ ¸å¿ƒæ–‡ä»¶çš„åŠŸèƒ½ï¼š\n\n#### 4.2.1. `application.js`\n\n- æ¡†æ¶çš„æ ¸å¿ƒæ–‡ä»¶ï¼Œå¯¼å‡º Koa ç±»\n- ä¸»è¦åŠŸèƒ½ï¼š\n\t- ä¸­é—´ä»¶ç®¡ç†ï¼ˆuse æ–¹æ³•ï¼‰\n\t- æœåŠ¡å™¨åˆ›å»ºå’Œç›‘å¬ï¼ˆlisten æ–¹æ³•ï¼‰\n\t- ä¸Šä¸‹æ–‡åˆ›å»ºå’Œå¤„ç†\n\t- é”™è¯¯å¤„ç†æœºåˆ¶\n\n```javascript\n// æ ¸å¿ƒä»£ç ç¤ºä¾‹\nclass Application extends Emitter {\n  constructor() {\n    super();\n    this.middleware = [];\n    this.context = Object.create(context);\n    this.request = Object.create(request);\n    this.response = Object.create(response);\n  }\n  // ...\n}\n```\n\n#### 4.2.2. `context.js`\n\n- è¯·æ±‚`ä¸Šä¸‹æ–‡å¯¹è±¡`çš„å®ç°\n- ä¸»è¦åŠŸèƒ½ï¼š\n\t- å°è£…è¯·æ±‚å’Œå“åº”å¯¹è±¡\n\t- æä¾›ä¾¿æ·çš„è®¿é—®å™¨å±æ€§\n\t- é”™è¯¯å¤„ç†æ–¹æ³•\n\t- çŠ¶æ€ç®¡ç†\n\n```javascript\nconst context = {\n  get url() {\n    return this.request.url;\n  },\n  get body() {\n    return this.response.body;\n  },\n  set body(val) {\n    this.response.body = val;\n  },\n  // ...\n};\n```\n\n#### 4.2.3. `request.js`\n\n- HTTP è¯·æ±‚å¯¹è±¡çš„å°è£…\n- ä¸»è¦åŠŸèƒ½ï¼š\n\t- è¯·æ±‚å¤´è§£æ\n\t- æŸ¥è¯¢å­—ç¬¦ä¸²å¤„ç†\n\t- è¯·æ±‚æ–¹æ³•åˆ¤æ–­\n\t- Content-Type å¤„ç†\n\n```javascript\nmodule.exports = {\n  get header() {\n    return this.req.headers;\n  },\n  get method() {\n    return this.req.method;\n  },\n  // ...\n};\n```\n\n#### 4.2.4. `response.js`\n\n- HTTP å“åº”å¯¹è±¡çš„å°è£…\n- ä¸»è¦åŠŸèƒ½ï¼š\n\t- å“åº”å¤´è®¾ç½®\n\t- çŠ¶æ€ç ç®¡ç†\n\t- å“åº”ä½“å¤„ç†\n\t- Content-Type è®¾ç½®\n\n```javascript\nmodule.exports = {\n  get status() {\n    return this.res.statusCode;\n  },\n  set status(code) {\n    this.res.statusCode = code;\n  },\n  // ...\n};\n```\n\n#### 4.2.5. `test/` ç›®å½•\n\n- åŒ…å«å®Œæ•´çš„å•å…ƒæµ‹è¯•\n- æŒ‰åŠŸèƒ½æ¨¡å—åˆ’åˆ†çš„æµ‹è¯•ç”¨ä¾‹\n- æä¾›äº†ä½¿ç”¨ç¤ºä¾‹å’Œæœ€ä½³å®è·µ\n\n#### 4.2.6. `docs/` ç›®å½•\n\n- API æ–‡æ¡£\n- ä½¿ç”¨æŒ‡å—\n- ä¸­é—´ä»¶å¼€å‘æŒ‡å—\n- é”™è¯¯å¤„ç†æ–‡æ¡£\n\n","a6d7522188d35c9a9df96791a4c70f3c":"\n# å‰è¨€\n\n\nVue3 ç›¸å…³åŸºç¡€ã€åŸç†ã€åŠæºç è®¾è®¡\n\nç›®å½•ï¼š\n- åŸºç¡€\n\t- [1. Vue3 åŸºç¡€ï¼ˆç¯‡ä¸€ï¼‰](/post/3abe29bc738b592c876a72cae4005117.html)\n\t- [2. Vue3 åŸºç¡€ï¼ˆç¯‡äºŒï¼‰](/post/ea406eee129b5e94b1a62f96d6cdb684.html)\n\t- [3. Vue3 åŸºç¡€ï¼ˆç¯‡ä¸‰ï¼‰](/post/6c152cd061ac5cbcbbadd7aa76057296.html)\n\t- [4. Vue3 ç»„ä»¶](/post/d60d72b996b053a49903884d313c885c.html)\n\t- [5. è¯·ä»‹ç»ä¸‹  Vue3  ç”Ÿæ€æœ€æ–°åŠ¨æ€](/post/117f9c7a06c25d2383a3e1f6b5ca9448.html)\n- åŸç†\n\t- [6. Vue3 çš„å“åº”å¼çš„ç³»ç»Ÿè®¾è®¡åŸç†ï¼ˆeffectã€computedã€watch çš„åŸç† ï¼‰](/post/1c52539699f15d5d80f350f4a7d98915.html)\n\t- [7. Vue3 ä¸­ effect çš„è°ƒåº¦é€‰é¡¹ï¼ˆschedulerï¼‰çš„ä½¿ç”¨ç¤ºä¾‹](/post/c682639afe0b5e52b50a2455332e00a6.html)\n\t- [8. vue3 watch çš„å–æ¶ˆç›‘å¬ä¸æ¸…ç†å‰¯ä½œç”¨](/post/c276d7aca9a052f18a31537ee2bf64d5.html)\n\t- [9. Vue3 çš„éåŸå§‹å€¼å“åº”å¼æ–¹æ¡ˆï¼ˆMapã€WeakMap ã€Set ã€WeakSet ï¼‰](/post/bf137ce405e5590ba39bee0ccd7feafe.html)\n\t- [10. åŸå§‹å€¼çš„å“åº”æ–¹æ¡ˆ](/post/30b62fd7a2f358eeaf2b7c400e740dc4.html)\n\n","3abe29bc738b592c876a72cae4005117":"\n# Vue3 åŸºç¡€ï¼ˆç¯‡ä¸€ï¼‰\n\n`#vue3`  `#å‰ç«¯` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. Vue ç®€ä»‹ \n\n- Vue æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript æ¡†æ¶ï¼Œæä¾›äº†`å£°æ˜å¼æ¸²æŸ“`å’Œ`å“åº”å¼æ›´æ–°`ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚\n- Vue æ˜¯ä¸€ä¸ª`æ¸è¿›å¼æ¡†æ¶`ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚çµæ´»åœ°é€‰æ‹©ä½¿ç”¨æ–¹å¼ï¼Œé€‚ç”¨äºç®€å•åˆ°å¤æ‚çš„å„ç§ Web å¼€å‘åœºæ™¯ï¼Œ\n\t- æ¯”å¦‚ HTML â†’ Web Components   â†’ SPA â†’ SSR â†’ SSG  â†’   æ¡Œé¢ç«¯ã€ç§»åŠ¨ç«¯ã€WebGL ç­‰\n\n## 2. å•æ–‡ä»¶ç»„ä»¶\n\nå³ Vue çš„å•æ–‡ä»¶ç»„ä»¶ä¼šå°†ä¸€ä¸ªç»„ä»¶çš„é€»è¾‘ (JavaScript)ï¼Œæ¨¡æ¿ (HTML) å’Œæ ·å¼ (CSS) å°è£…åœ¨åŒä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š\n\n```vue\n<template>\n  <button @click=\"count++\">Count is: {{ count }}</button>\n</template>\n\n<script setup>\n  import { ref } from 'vue'\n  const count = ref(0)\n</script>\n\n<style scoped>\n  button {\n  font-weight: bold;\n  }\n</style>\n```\n\n## 3. ç»„åˆå¼ API (Composition API)  vs  é€‰é¡¹å¼ API (Options API)\n\nVue æœ‰ä¸¤ç§ä¸»è¦çš„ API é£æ ¼ï¼š`é€‰é¡¹å¼ API` å’Œ`ç»„åˆå¼ API`ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®å–œå¥½å’Œé¡¹ç›®éœ€æ±‚é€‰æ‹©ä½¿ç”¨ã€‚\n\n```vue\n<script>\nexport default {\n  // data() è¿”å›çš„å±æ€§å°†ä¼šæˆä¸ºå“åº”å¼çš„çŠ¶æ€\n  // å¹¶ä¸”æš´éœ²åœ¨ `this` ä¸Š\n  data() {\n    return {\n      count: 0\n    }\n  },\n\n  // methods æ˜¯ä¸€äº›ç”¨æ¥æ›´æ”¹çŠ¶æ€ä¸è§¦å‘æ›´æ–°çš„å‡½æ•°\n  // å®ƒä»¬å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½œä¸ºäº‹ä»¶å¤„ç†å™¨ç»‘å®š\n  methods: {\n    increment() {\n      this.count++\n    }\n  },\n\n  // ç”Ÿå‘½å‘¨æœŸé’©å­ä¼šåœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªä¸åŒé˜¶æ®µè¢«è°ƒç”¨\n  // ä¾‹å¦‚è¿™ä¸ªå‡½æ•°å°±ä¼šåœ¨ç»„ä»¶æŒ‚è½½å®Œæˆåè¢«è°ƒç”¨\n  mounted() {\n    console.log(`The initial count is ${this.count}.`)\n  }\n}\n</script>\n\n<template>\n  <button @click=\"increment\">Count is: {{ count }}</button>\n</template>\n```\n\n```vue\n<script setup>\nimport { ref, onMounted } from 'vue'\n\n// å“åº”å¼çŠ¶æ€\nconst count = ref(0)\n\n// ç”¨æ¥ä¿®æ”¹çŠ¶æ€ã€è§¦å‘æ›´æ–°çš„å‡½æ•°\nfunction increment() {\n  count.value++\n}\n\n// ç”Ÿå‘½å‘¨æœŸé’©å­\nonMounted(() => {\n  console.log(`The initial count is ${count.value}.`)\n})\n</script>\n\n<template>\n  <button @click=\"increment\">Count is: {{ count }}</button>\n</template>\n```\n\n> è‡ªä¸»å¼€å‘æˆ‘ä»¬è¦æ±‚ä½¿ç”¨ `ç»„åˆå¼ API (Composition API)` +  `<script setup>`\n\n## 4. ä½¿ç”¨ Vue3 çš„å‡ ç§æ–¹å¼\n\n### 4.1. npm åŒ…å¼•å…¥\n\n```js\nimport { createApp } from 'vue'\n\nconst app = createApp({\n  /* æ ¹ç»„ä»¶é€‰é¡¹ */\n})\n```\n\n### 4.2. é€šè¿‡ CDN ä½¿ç”¨ Vue\n\n```html\n<script src=\"https://unpkg.com/vue@3/dist/vue.global.js\"></script>\n<div id=\"app\">{{ message }}</div>\n\n<script>\n  const { createApp, ref } = Vue\n\n  createApp({\n    setup() {\n      const message = ref('Hello vue!')\n      return {\n        message\n      }\n    }\n  }).mount('#app')\n</script>\n```\n\n### 4.3. ä½¿ç”¨ ES æ¨¡å—æ„å»ºç‰ˆæœ¬\n\n> æ³¨æ„æ˜¯ `<script type=\"module\">`\n\n```html\n<div id=\"app\">{{ message }}</div>\n\n<script type=\"module\">\nimport { createApp, ref } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'\n\n  createApp({\n    setup() {\n      const message = ref('Hello Vue!')\n      return {\n        message\n      }\n    }\n  }).mount('#app')\n</script>\n```\n\n### 4.4. Import maps æ–¹å¼å¼•ç”¨\n\n```vue\n<!-- è¿™ä¸ªæ ‡ç­¾åŒ…å«ä¸€ä¸ª JSON å¯¹è±¡ï¼Œç”¨äºå®šä¹‰æ¨¡å—çš„æ˜ å°„å…³ç³»ã€‚ -->\n<script type=\"importmap\">\n  {\n    \"imports\": {\n      \"vue\": \"https://unpkg.com/vue@3/dist/vue.esm-browser.js\"\n    }\n  }\n</script>\n\n<div id=\"app\">{{ message }}</div>\n\n<script type=\"module\">\n  import { createApp, ref } from 'vue'\n\n  createApp({\n    setup() {\n      const message = ref('Hello Vue!')\n      return {\n        message\n      }\n    }\n  }).mount('#app')\n</script>\n```\n\n> æ³¨æ„ `<script type=\"importmap\">` çš„å…¼å®¹æ€§\n\n","30b62fd7a2f358eeaf2b7c400e740dc4":"\n# åŸå§‹å€¼çš„å“åº”æ–¹æ¡ˆ\n\n`#vue3` \n\næœ¬æ–‡è®²åŸå§‹å€¼çš„å“åº”æ–¹æ¡ˆï¼Œæ¯”å¦‚ `Boolean String BigInt Symbol undefined null Number`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ€»ç»“ \n\n- ref çš„åŸç†\n\t- æœ¬è´¨ä¸Š `ref` æ˜¯ä¸€ä¸ªâ€œåŒ…è£¹ å¯¹è±¡â€ã€‚\n\t\t- `å› ä¸º` JavaScript çš„ Proxy æ— æ³•æä¾›å¯¹åŸå§‹å€¼çš„ä»£ç†ï¼Œ`æ‰€ä»¥`æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€å±‚å¯¹è±¡ä½œä¸ºåŒ…è£¹ï¼Œ`é—´æ¥`å®ç°åŸå§‹å€¼çš„å“åº”å¼æ–¹æ¡ˆã€‚\n\t- å¦‚ä½•åˆ¤æ–­æ˜¯ ref å¯¹è±¡\n\t\t- ç”±äºâ€œåŒ… è£¹å¯¹è±¡â€æœ¬è´¨ä¸Šä¸æ™®é€šå¯¹è±¡æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œå› æ­¤ä¸ºäº†åŒºåˆ† ref ä¸æ™®é€šå“åº”å¼å¯¹è±¡ï¼Œæˆ‘ä»¬è¿˜ä¸ºâ€œåŒ…è£¹å¯¹è±¡â€å®šä¹‰äº†ä¸€ä¸ªå€¼ä¸º true çš„å±æ€§ï¼Œå³ __v_isRefï¼Œç”¨å®ƒä½œä¸º ref çš„æ ‡è¯†ã€‚\n- å“åº”å¼ä¸¢å¤±é—®é¢˜\n\t- ref é™¤äº†èƒ½å¤Ÿç”¨äºåŸå§‹å€¼çš„å“åº”å¼æ–¹æ¡ˆä¹‹å¤–ï¼Œè¿˜èƒ½ç”¨æ¥è§£å†³`å“åº”ä¸¢å¤±é—®é¢˜`ã€‚\n\t- ä¸ºäº†è§£å†³è¯¥é—®é¢˜ï¼Œæˆ‘ä»¬å®ç°äº† `toRef` ä»¥åŠ `toRefs` è¿™ä¸¤ä¸ªå‡½æ•°ã€‚å®ƒä»¬æœ¬è´¨ä¸Šæ˜¯å¯¹å“åº”å¼æ•°æ®åšäº†ä¸€å±‚åŒ…è£…ï¼Œæˆ–è€…å«ä½œâ€œè®¿é—®ä»£ç†â€ã€‚\n- è‡ªåŠ¨è„± ref çš„èƒ½åŠ›\n\t- æ¨¡æ¿ä¸­çš„å“åº”å¼æ•°æ®è¿›è¡Œè„± ref å¤„ç†\n\t- è¡¨ç°ä¸º vue æ¨¡æ¿ä¸­ä¸éœ€è¦è¾“å…¥ `.value`\n\n## 2. Ref çš„åŸç†\n\nåŸå§‹å€¼`æŒ‰å€¼ä¼ é€’`ï¼Œæ‰€ä»¥éœ€è¦`åŒ…è£¹` , æˆ‘ä»¬ä½¿ç”¨ `ref()` æ¥åŒ…è£¹ã€‚ä»£ç å¦‚ä¸‹ï¼š\n\n```javascript hl:9\nfunction ref(val) {\n    const wrapper = {\n        value: val\n    }\n    // å®šä¹‰ä¸€ä¸ªä¸å¯æšä¸¾ä¸å¯å†™çš„å±æ€§ï¼Œç”¨äºæ ‡è¯†ä»–æ˜¯ä¸€ä¸ª ref\n    Object.defineProperty(wrapper, '__v_isRef', {\n        value: true\n    })\n    return reactive(wrapper)\n}\n\n```\n\n> `ref` ä¾èµ– `reactive`\n\n## 3. å“åº”å¼ä¸¢å¤±é—®é¢˜\n\n`ref` è¿˜èƒ½è§£å†³`å“åº”å¼ä¸¢å¤±`çš„é—®é¢˜ï¼Œå…³äº`å“åº”å¼ä¸¢å¤±`ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­\n\n```javascript hl:4,11\n\nconst obj = reactive({foo: 1, bar: 2});\n\n// :::: ä½¿ç”¨ ... è¿ç®—ç¬¦\nconst newObj = {...obj}; \n\neffect(() => {\n    console.log(newObj.foo); // newObj æ²¡æœ‰ä»»ä½•å“åº”èƒ½åŠ›ï¼Œæ‰€ä»¥è¿™é‡Œä¸ä¼šè§¦å‘ effect\n})\n\n// :::: å¾ˆæ˜¾ç„¶ï¼Œè¿™é‡Œä¸ä¼šè§¦å‘ effect \nobj.foo = 2; \n```\n\næœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•ï¼Œå³ä½¿ä½¿ç”¨ `newObj` æ™®é€šå¯¹è±¡è®¿é—®å±æ€§å€¼ï¼Œä¹Ÿä¼šè¢«æ”¶é›†å“åº”å‘¢ï¼Ÿç­”æ¡ˆå¦‚ä¸‹ï¼š\n\n```javascript hl:4,5\nconst obj = reactive({foo: 1, bar: 2});\nconst newObj = {\n    foo: {\n        get value() {\n            return obj.foo\n        }\n    },\n    bar: {\n        get value() {\n            return bar.foo\n        }\n    }\n}\n\neffect(() => {\n    // è¿™é‡Œä¼šè§¦å‘ get value() ï¼Œä»è€Œè®¿é—®äº† obj.foo ï¼Œä»è€Œè§¦å‘æ”¶é›†ä¾èµ–\n    console.log(newObj.foo); \n})\n\nobj.foo = 2;\n```\n\næ‰€ä»¥å°è£…ä¸¤ä¸ªå‡½æ•° `toRef`  å’Œ `toRefs` \n\n## 4. toRef ä¸ toRefs\n\n```javascript\nfunction toRefs(obj) {\n  const ret = {}\n  for (const key in obj) {\n    ret[key] = toRef(obj, key)\n  }\n  return ret\n}\n\nfunction toRef(obj, key) {\n  const wrapper = {\n    get value() {\n      return obj[key]\n    },\n    set value(val) {\n      obj[key] = val\n    }\n  }\n\n  Object.defineProperty(wrapper, '__v_isRef', {\n    value: true\n  })\n\n  return wrapper\n}\n```\n\nè¿™æ ·ï¼Œå°±èƒ½æ­£ç¡®çš„è§¦å‘æ”¶é›†äº†ã€‚\n\n>  è¿™ä¸‹çŸ¥é“è¿™ä¸ªä¸¤ä¸ªå‡½æ•°æ˜¯å¹²ä»€ä¹ˆçš„äº†å§ï¼Ÿä»¥å‰éƒ½æœ‰ä¸€ç‚¹æ‡µé€¼\n\n## 5. è‡ªåŠ¨è„±è½ `ref` çš„èƒ½åŠ›\n\næœ€åï¼Œæˆ‘ä»¬è¯´è¯´ è‡ªåŠ¨è„±è½ `ref` çš„èƒ½åŠ›ï¼Œå•¥æ„æ€å‘¢ï¼Ÿ\n\næ¯”å¦‚æ¨¡æ¿ä»£ç ï¼Œæ¯æ¬¡éƒ½éœ€è¦åŠ ä¸€ä¸ª `.value` ï¼Ÿ\n\n```html\n<div>{{foo.value}}</div>\n\n```\n\næœ‰å•¥åŠæ³•è§£å†³å—ï¼Ÿ å…¶å®å¾ˆç®€å•ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/4a689b99b8f3b3e902890b4f5a93765a.png)\n\n","1d4b6077acf55710b1a41f7b8e299b2f":"\n# Vue3 çš„æ¸²æŸ“å™¨åŸç†\n\n\n`#vue` `#2023/05/19`  `#vue3` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ€»ç»“ \n\n### 1.1. æ‘˜è¦\n\næœ¬æ–‡æ·±å…¥æ¢è®¨äº†Vue3æ¸²æŸ“å™¨çš„åŸç†å’Œå®ç°ã€‚\n- æ–‡ç« è¯¦ç»†è§£é‡Šäº†æ¸²æŸ“å™¨çš„æ¦‚å¿µã€å·¥ä½œåŸç†ä»¥åŠä¸å“åº”å¼ç³»ç»Ÿçš„ç»“åˆã€‚\n- åŒæ—¶ï¼Œä»‹ç»äº†å¦‚ä½•å®ç°ä¸€ä¸ªè·¨å¹³å°çš„æ¸²æŸ“å™¨\n- å¹¶è¯¦ç»†è®²è§£äº†æ¸²æŸ“è¿‡ç¨‹ä¸­çš„å„ç§ç»†èŠ‚ï¼ŒåŒ…æ‹¬å±æ€§å¤„ç†ã€äº‹ä»¶å¤„ç†ã€å­èŠ‚ç‚¹æ›´æ–°ç­‰ã€‚\n- æ–‡ç« è¿˜è®¨è®ºäº†ä¸€äº›ç‰¹æ®Šæƒ…å†µçš„å¤„ç†ï¼Œå¦‚Fragmentå’Œæ–‡æœ¬èŠ‚ç‚¹çš„æ¸²æŸ“ã€‚\n\n### 1.2. è¦ç‚¹\n\n- æ¸²æŸ“å™¨çš„ä½œç”¨æ˜¯å°†è™šæ‹ŸDOMå¯¹è±¡æ¸²æŸ“ä¸ºçœŸå®DOMå…ƒç´ ï¼Œå…¶æ ¸å¿ƒåœ¨äºæ›´æ–°æ—¶çš„Diffç®—æ³•ã€‚\n- å®ç°è·¨å¹³å°æ¸²æŸ“å™¨çš„å…³é”®æ˜¯å°†æ¸²æŸ“æ“ä½œæŠ½è±¡ä¸ºå¯é…ç½®çš„å¯¹è±¡ã€‚\n- å±æ€§å¤„ç†éœ€è¦åŒºåˆ†HTML Attributeså’ŒDOM Propertiesï¼Œå¹¶æ­£ç¡®å¤„ç†ç‰¹æ®Šå±æ€§å¦‚classå’Œstyleã€‚\n- äº‹ä»¶å¤„ç†é‡‡ç”¨**ç‰¹æ®Šçš„è®¾è®¡**æ¥ä¼˜åŒ–æ€§èƒ½å¹¶è§£å†³äº‹ä»¶å†’æ³¡å’Œæ›´æ–°æ—¶æœºçš„é—®é¢˜ã€‚\n- å­èŠ‚ç‚¹æ›´æ–°æ¶‰åŠå¤šç§æƒ…å†µï¼Œéœ€è¦æ­£ç¡®å¤„ç†æ–°æ—§èŠ‚ç‚¹çš„å˜åŒ–ã€‚\n- ç‰¹æ®ŠèŠ‚ç‚¹å¦‚æ–‡æœ¬èŠ‚ç‚¹ã€æ³¨é‡ŠèŠ‚ç‚¹å’ŒFragmentéœ€è¦ç‰¹æ®Šå¤„ç†ã€‚\n- Vue3çš„æ¸²æŸ“å™¨è®¾è®¡è€ƒè™‘äº†æ€§èƒ½ä¼˜åŒ–ã€è·¨å¹³å°å…¼å®¹æ€§å’Œç‰¹æ®Šåœºæ™¯çš„å¤„ç†ã€‚\n- æ¸²æŸ“å™¨çš„å®ç°æ¶‰åŠå¤šä¸ªæ–¹é¢ï¼ŒåŒ…æ‹¬æŒ‚è½½ã€æ›´æ–°ã€å¸è½½ç­‰æ“ä½œçš„ç»†èŠ‚å¤„ç†ã€‚\n- Fragmentçš„å­˜åœ¨ç®€åŒ–äº†ç»„ä»¶çš„ç»“æ„ï¼Œç±»ä¼¼äºReactçš„ç©ºæ ‡ç­¾æˆ–Fragmentç»„ä»¶ã€‚\n\n## 2. ä½•ä¸ºæ¸²æŸ“å™¨ï¼Ÿ\n\nä»¥`æµè§ˆå™¨å¹³å°`æ¥è¯´ï¼Œå¦‚ä¸‹çš„`rendererå‡½æ•°`å°±æ˜¯ä¸€ä¸ª`æ¸²æŸ“å™¨` ã€‚\n\n```js\nfunction renderer(domString, container) {\n  container.innerHTML = domString\n}\n\nrenderer(`<h1>hello app</h1>`, document.getElementById('app'));\n```\n\n> [!info]\n> æ¸²æŸ“å™¨çš„ä½œç”¨æ˜¯ï¼ŒæŠŠè™šæ‹ŸDOM å¯¹è±¡æ¸²æŸ“ä¸ºçœŸå® DOMå…ƒç´ ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯ï¼Œé€’å½’åœ°éå†è™›æ‹ŸDOMå¯¹è±¡ï¼Œå¹¶è°ƒç”¨åŸç”Ÿ  DOM  API æ¥å®ŒæˆçœŸå® DOM çš„åˆ›å»ºã€‚æ¸²æŸ“å™¨çš„ç²¾é«“åœ¨äºåç»­çš„æ›´æ–°ï¼Œå®ƒä¼šé€šè¿‡Diffç®—æ³•æˆ‘å‡ºå˜æ›´ç‚¹ï¼Œå¹¶ä¸”åªä¼šæ›´æ–°éœ€è¦æ›´æ–°çš„å†…å®¹\n\n## 3. æ¸²æŸ“å™¨ä¸å“åº”å¼ç³»ç»Ÿ\n\nå³ç»“åˆ `å“åº”å¼èƒ½åŠ›`ï¼Œå®ç° `è‡ªåŠ¨`è°ƒç”¨æ¸²æŸ“å™¨å®Œæˆæ¸²æŸ“å’Œæ›´æ–°ã€‚\n- å³å˜é‡å˜äº†ï¼ŒUI ä¸»åŠ¨æ›´æ–°\n\nå¦‚ä¸‹ä»£ç ï¼Œä½¿ç”¨ `effect`, `ref` ä¸¤ä¸ªå˜é‡ã€‚\n\n```vue hl:8,\n\n<div id=\"app\"></div>\n\n<script src=\"https://unpkg.com/@vue/reactivity@3.0.5/dist/reactivity.global.js\"></script>\n\n<script>\n\n// ::::æš´éœ²çš„å…¨å±€ API\nconst { effect, ref } = VueReactivity; \n\nfunction renderer(domString, container) {\n  container.innerHTML = domString\n}\n\nconst count = ref(1)\n\neffect(() => {\n  renderer(`<h1>${count.value}</h1>`, document.getElementById('app'))\n})\n\ncount.value++\n\n// 2såæ›´æ–°\nsetTimeout(() => {\n    count.value++;\n},2000)\n\n</script>\n```\n\n## 4. æ¸²æŸ“çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µ\n\n- `æ¸²æŸ“å™¨`ä¸`æ¸²æŸ“`\n\t- åè¯ å’Œ åŠ¨è¯ çš„åŒºåˆ«\n- `æŒ‚è½½`\n\t- å³ `mount` ï¼Œå°† `è™šæ‹Ÿ DOM` æ¸²æŸ“æˆ `çœŸå® DOM èŠ‚ç‚¹`\n- `å®¹å™¨`\n\t- å³æ¸²æŸ“`åˆ°å“ªå„¿`ï¼Ÿ\n\nä¸‹é¢æ¥çœ‹ä¸€ä¸ªå¦‚ä½•å®ç°ä¸€ä¸ª**æ¸²æŸ“å™¨å‡½æ•°**\n\n- `createRender`\n\n```vue hl:42\n<div id=\"app\"></div>\n\n<script src=\"https://unpkg.com/@vue/reactivity@3.0.5/dist/reactivity.global.js\"></script>\n\n<script>\n    function createRenderer() {\n        /**\n         * @desc è¡¥ä¸å‡½æ•°\n         * @param {VNode} oldNode æ—§çš„ VNode\n         * @param {VNode} newNode æ–°çš„ VNode\n         * @param {HTMLElement} container å®¹å™¨\n         * */\n        function patch(oldNode, newNode, container) {\n        \n        }\n        function render(vnode, container) {\n            if (vnode) {\n                // ::: æ–° vnode å­˜åœ¨ï¼Œå°†å…¶ä¸æ—§ vnode ä¸€èµ·ä¼ é€’ç»™ patch å‡½æ•°è¿›è¡Œæ‰“è¡¥ä¸\n                patch(container._vnode, vnode, container);\n                \n            } else {\n                if (container._vnode) { // ::::å¸è½½æ“ä½œ\n                    // æ—§ vnode å­˜åœ¨ï¼Œä¸”æ–° vnode ä¸å­˜åœ¨ï¼Œè¯´æ˜æ˜¯ å¸è½½(unmount)æ“ä½œ\n                    // åªéœ€è¦å°† container å†…çš„ DOM æ¸…ç©ºå³å¯\n                    container.innerHTML = ''\n                }\n            }\n            // æŠŠ vnode å­˜å‚¨åˆ° container._vnode ä¸‹ï¼Œå³åç»­æ¸²æŸ“ä¸­çš„æ—§ vnode\n            container._vnode = vnode\n        }\n        // æœåŠ¡ç«¯æ¸²æŸ“æ—¶ä¼šç”¨åˆ°\n        function hydrate() {\n        \n        }\n        return {\n            render,\n            hydrate\n        }\n    }\n    \n    const renderer = createRenderer()\n    // ä¸‰æ¬¡æ¸²æŸ“ï¼Œéƒ½æ¸²æŸ“åˆ°#appä¸Š \n    // é¦–æ¬¡æ¸²æŸ“\n    renderer.render(vnode1, document.querySelector('#app'))\n    // ç¬¬äºŒæ¬¡æ¸²æŸ“\n    renderer.render(vnode2, document.querySelector('#app'))\n    // ç¬¬ä¸‰æ¬¡æ¸²æŸ“\n    renderer.render(null, document.querySelector('#app'))\n    \n</script>\n```\n\n## 5. å®ç°ä¸€ä¸ªæç®€è·¨å¹³å°æ¸²æŸ“å™¨\n\n- å¦‚ä½•å®ç°ä¸€ä¸ªæ¸²æŸ“å™¨ï¼Œå³ä¸ä¾èµ–äº`å…·ä½“å®¿ä¸»`\n\t- å¦‚ æµè§ˆå™¨çš„ `DOM API`\n\t- æˆ– Node.js ç«¯\n\t- æˆ– å®¢æˆ·ç«¯ ç­‰\n\n```js\nfunction createRenderer(options) {\n    // ::::ä¸ºäº†å®ç°è·¨å¹³å°ï¼Œå°†æ¸²æŸ“å™¨çš„æ“ä½œæŠ½è±¡ä¸º options å¯¹è±¡::::\n    // å¦‚ï¼šåˆ›å»ºå…ƒç´  createElementï¼Œ\n    // å¦‚ï¼šè®¾ç½®å…ƒç´ æ–‡æœ¬ setElementText\n    // å¦‚ï¼šæ’å…¥å…ƒç´  insert\n    const {\n        createElement,\n        insert,\n        setElementText\n    } = options;\n    \n    function mountElement(vnode, container) {\n        \n        // è¿™é‡Œçš„ createElement ä¾èµ–äºå…·ä½“å®¿ä¸»\n        const el = createElement(vnode.type)\n        \n        // è¯´æ˜æ˜¯æ–‡æœ¬å†…å®¹ï¼Œè°ƒç”¨ setElementText æ’å…¥\n        if (typeof vnode.children === 'string') {\n            setElementText(el, vnode.children)\n        }\n        \n        insert(el, container)\n    }\n    \n    function patch(n1, n2, container) {\n        if (!n1) {\n            mountElement(n2, container)\n        } else {\n            // n1 å­˜åœ¨ï¼Œè¿™é‡Œéœ€è¦æ‰“è¡¥ä¸\n        }\n    }\n    \n    function render(vnode, container) {\n        if (vnode) {\n            // æ–° vnode å­˜åœ¨ï¼Œå°†å…¶ä¸æ—§ vnode ä¸€èµ·ä¼ é€’ç»™ patch å‡½æ•°è¿›è¡Œæ‰“è¡¥ä¸\n            patch(container._vnode, vnode, container)\n        } else {\n            if (container._vnode) {\n                // æ—§ vnode å­˜åœ¨ï¼Œä¸”æ–° vnode ä¸å­˜åœ¨ï¼Œè¯´æ˜æ˜¯å¸è½½(unmount)æ“ä½œ\n                // åªéœ€è¦å°† container å†…çš„ DOM æ¸…ç©ºå³å¯\n                container.innerHTML = ''\n            }\n        }\n        // æŠŠ vnode å­˜å‚¨åˆ° container._vnode ä¸‹ï¼Œå³åç»­æ¸²æŸ“ä¸­çš„æ—§ vnode\n        container._vnode = vnode\n    }\n    return {\n        render\n    }\n}\n```\n\nä¸Šé¢ä»£ç æŠŠ`åˆ›å»ºã€ä¿®æ”¹ã€åŠåˆ é™¤æ“ä½œ`ç­‰æŠ½è±¡æˆå¯é…ç½®çš„å¯¹è±¡\n\n### 5.1. æµè§ˆå™¨ç«¯\n\næ¯”å¦‚åœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹ï¼Œè°ƒç”¨`æµè§ˆå™¨`ç‰¹å®šçš„ `DOM API` ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```js\nconst renderer = createRenderer({\n  createElement(tag) {\n    return document.createElement(tag)\n  },\n  setElementText(el, text) {\n    el.textContent = text\n  },\n  insert(el, parent, anchor = null) {\n    parent.insertBefore(el, anchor)\n  }\n})\n\nconst vnode = {\n    type: 'h1',\n    children: 'hello'\n}\n\nrenderer.render(vnode, document.querySelector('#app'))\n\n```\n\n### 5.2. Nodejs ç«¯\n\nè€Œåœ¨ `Nodejs ç¯å¢ƒ`ä¸‹ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```js\n\nconst renderer2 = createRenderer({\n    createElement(tag) {\n        console.log(`åˆ›å»ºå…ƒç´  ${tag}`)\n        return {tag}\n    },\n    setElementText(el, text) {\n        console.log(`è®¾ç½® ${JSON.stringify(el)} çš„æ–‡æœ¬å†…å®¹ï¼š${text}`)\n        el.text = text\n    },\n    insert(el, parent, anchor = null) {\n        console.log(`å°†${JSON.stringify(el)}æ·»åŠ åˆ°${JSON.stringify(parent)} ä¸‹`)\n        parent.children = el\n    }\n});\n\nconst container = {type: 'root'};\nrenderer2.render(vnode, container);\n```\n\n## 6. å¦‚ä½•æŒ‚è½½ `å­èŠ‚ç‚¹` åŠ `å­èŠ‚ç‚¹çš„å±æ€§`\n\n### 6.1. é¦–å…ˆçœ‹ä¸€ä¸ªèƒ½å¤Ÿå¦‚ä½•æŒ‚è½½å­èŠ‚ç‚¹\n\nä»¥ä¸‹æ˜¯æ˜¯ä¸€ä¸ªèƒ½å¤Ÿè·‘èµ·æ¥çš„ `æœ€ç®€æ˜“çš„ DEMO` :\n\n```js\n<div id=\"app\"></div>\n\n<script src=\"https://unpkg.com/@vue/reactivity@3.0.5/dist/reactivity.global.js\"></script>\n\n<script>\n    function createRenderer(options) {\n        const {\n            createElement,\n            insert,\n            setElementText\n        } = options\n        function mountElement(vnode, container) {\n            const el = createElement(vnode.type)\n            if (typeof vnode.children === 'string') {\n                setElementText(el, vnode.children)\n                // :::::::::é€’å½’æ¸²æŸ“å­èŠ‚ç‚¹å³å¯\n            } else if (Array.isArray(vnode.children)) {\n                vnode.children.forEach(child => {\n                    patch(null, child, el)\n                })\n            }\n            // :::::::::è®¾ç½®å±æ€§\n            if (vnode.props) {\n                for (const key in vnode.props) {\n                    el.setAttribute(key, vnode.props[key])\n                }\n            }\n            // ::æ’å…¥åˆ°å®¹å™¨ä¸­\n            insert(el, container)\n        }\n        function patch(n1, n2, container) {\n            if (!n1) {\n                mountElement(n2, container)\n            } else {\n                // // ::::è¡¥ä¸é€»è¾‘\n            }\n        }\n\n        function render(vnode, container) {\n            if (vnode) {\n                // æ–° vnode å­˜åœ¨ï¼Œå°†å…¶ä¸æ—§ vnode ä¸€èµ·ä¼ é€’ç»™ patch å‡½æ•°è¿›è¡Œæ‰“è¡¥ä¸\n                patch(container._vnode, vnode, container)\n            } else {\n                if (container._vnode) {\n                    // æ—§ vnode å­˜åœ¨ï¼Œä¸”æ–° vnode ä¸å­˜åœ¨ï¼Œè¯´æ˜æ˜¯å¸è½½(unmount)æ“ä½œ\n                    // åªéœ€è¦å°† container å†…çš„ DOM æ¸…ç©ºå³å¯\n                    container.innerHTML = ''\n                }\n            }\n            // æŠŠ vnode å­˜å‚¨åˆ° container._vnode ä¸‹ï¼Œå³åç»­æ¸²æŸ“ä¸­çš„æ—§ vnode\n            container._vnode = vnode\n        }\n\n        return {\n            render\n        }\n    }\n    const renderer = createRenderer({\n        createElement(tag) {\n            return document.createElement(tag)\n        },\n        setElementText(el, text) {\n            el.textContent = text\n        },\n        insert(el, parent, anchor = null) {\n            parent.insertBefore(el, anchor)\n        }\n    })\n    const vnode = {\n        type: 'div',\n        props: {\n            id: 'foo'\n        },\n        children: [\n            {\n                type: 'p',\n                children: 'p tag'\n            },\n            {\n                type: 'h1',\n                children: 'H1 tag'\n            },\n            {\n                type: 'div',\n                children: [\n                    {\n                        type: 'span',\n                        children: 'div > span > tag'\n                    }\n                ]\n            }\n        ]\n    }\n    renderer.render(vnode, document.querySelector('#app'))\n\n</script>\n```\n\nä¸‹å›¾æ˜¯æœ€ç»ˆ`æ¸²æŸ“çš„æ•ˆæœ`ï¼š\n\n![](https://od-1310531898.cos.ap-beijing.myqcloud.com/202305232003540.png)\n\n\nä¸¤ä¸ªæ³¨æ„ç‚¹ï¼š\n\n- é€’å½’é€»è¾‘ï¼šå¦‚æœå­˜åœ¨ `children` åˆ™æ¥ç€éå†\n- è®¾ç½®å±æ€§ä½¿ç”¨ `el.setAttribute(key,value)` \n\t- æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ `el[key] = value` çš„æ–¹å¼\n\t- ä½†æ˜¯ï¼Œ**ä¸ºå…ƒç´ è®¾ç½®å±æ€§æ¯”æƒ³è±¡ä¸­çš„æ›´å¤æ‚å¾—å¤š**\n\nä¸‹é¢å…ˆåŒºåˆ† `HTML Attributes` å’Œ `DOM Properities`\n\n### 6.2. `HTML Attributes` å’Œ `DOM Properities` ä¸ä¸€æ ·\n\næµè§ˆå™¨è§£æå®Œä»¥ä¸‹ `HTMLä»£ç æ®µ` åï¼Œä¼šåˆ›å»ºä»¥ä¹‹ç›¸ç¬¦çš„ `DOM å…ƒç´ å¯¹è±¡` ï¼Œæ¯”å¦‚\n- `id=\"app\"` å¯¹åº” `el.id`\n- `class=\"green\"` å¯¹åº” `el.className` ï¼Œè¯´æ˜ä¸¤è€…å¹¶ä¸æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚\n\n```html\n<div id=\"app\" class=\"green\"></div>\n\n<div data-a=\"3\" mmm=\"asdf\" draggable=\"true\"></div>\n\n<form id=\"aaa\"></form>\n```\n\nåˆæ¯”å¦‚ä¸‹é¢çš„ HTML ç‰‡æ®µï¼ŒæŠŠ `foo` æ”¹æˆ `bar`\n\n```html\n<!-- å¦‚æœ foo æ”¹æˆ bar -->\n<input value=\"foo\" form=\"aaa\"/>\n```\n\n- `el.getAttribute('value')` å’Œ `el.defaultValue` å§‹ç»ˆæ˜¯ `foo`\n- åªæœ‰ `el.value` ä¸ºä¿®æ”¹çš„å€¼\n\nåˆæ¯”å¦‚ä¿®æ”¹ä¸Šé¢ input çš„ type å€¼ï¼š `el.type = 'xxx'` ï¼Œæµè§ˆå™¨ä¼šçŸ«æ­£è¿™ä¸ªä¸åˆæ³•çš„ `xxx` ä¸º `text`\n\n> [!abstract]\n> \n**ç»¼ä¸Šï¼š** `HTML Attributes` **æ˜¯ä¸º** `DOM Properities`**è®¾ç½®**`åˆå§‹å€¼`**çš„**\n\n### 6.3. å¦‚ä½•æ­£å¸¸æ­£å¸¸çš„è®¾ç½®å±æ€§\n\næ¯”å¦‚å¦‚ä¸‹ `vnode` \n- `disabled` éœ€è¦å¤„ç†æˆ å¸ƒå°”å€¼\n\n```js\nconst vnode = {\n  type: 'button',\n  props: {\n    disabled: '' // éœ€è¦å¤„ç†æˆ false \n  },\n  children: 'Button'\n}\n```\n\n```js\n// form æ˜¯åªè¯»çš„ï¼Œåªèƒ½é€šè¿‡ setAttribute æ¥è®¾ç½®\nfunction shouldSetAsProps(el, key, value) {\n  if (key === 'form' && el.tagName === 'INPUT') return false\n  return key in el\n}\n\n// çœç•¥äº†å¾ˆå¤šé€»è¾‘\nif (vnode.props) {\n  for (const key in vnode.props) {\n\tpatchProps(el, key, null, vnode.props[key])\n  }\n}\n\n// ä¸‹é¢æ˜¯ä¼ å…¥çš„ patchProp çš„åœºæ™¯\npatchProps(el, key, preValue, nextValue) {\n    if (shouldSetAsProps(el, key, nextValue)) {\n      const type = typeof el[key];\n      // å…¼å®¹ el.disabled = false è¿™ç§æƒ…å†µ, ä»¥åŠ el.disabled = '' è¿™ç§æƒ…å†µ\n      if (type === 'boolean' && nextValue === '') {\n        el[key] = true\n      } else {\n        el[key] = nextValue\n      }\n    } else {\n      el.setAttribute(key, nextValue)\n    }\n  }\n```\n\nä¸Šé¢ä»£ç å±•ç¤ºäº†å¦‚ä½•æ­£ç¡®è®¾ç½®å±æ€§ï¼Œå³æ ¹æ®ä¸åŒçš„æ ‡ç­¾ç±»å‹ï¼Œä½¿ç”¨ä¸åŒçš„è®¾ç½®å±æ€§çš„æ–¹æ³•ï¼Œå¦å¤–éœ€è¦å…³æ³¨ä¸‹æ›´æ–°å‰åçš„å€¼ï¼Œå¦‚ `preValue, nextValue`\n\n> ä¸Šé¢ä»£ç åªå±•ç¤ºäº†å…³é”®é€»è¾‘éƒ¨åˆ†\n\n## 7. `classå±æ€§` ä¸ `styleå±æ€§` çš„å¤„ç†\n\nå¦‚ä¸‹èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¸Œæœ›æŒ‚è½½å­èŠ‚ç‚¹çš„ class å±æ€§ï¼Œå¹¶ä¸”åšå¢å¼º\n\n```js\nconst vnode = {\n  type: 'p',\n  props: {\n    class: 'foo bar baz',\n    class: {'foo': true},\n    class: ['foo bar baz','abc'],\n  },\n  children: 'text'\n}\n```\n\nä¸»è¦é€»è¾‘å¦‚ä¸‹ï¼š\n\n```js\n  patchProps(el, key, preValue, nextValue) {\n    //************** here è¿™é‡Œ  ************//\n    if (key === 'class') {\n      el.className = nextValue\n    } else if (shouldSetAsProps(el, key, nextValue)) {\n      const type = typeof el[key]\n      if (type === 'boolean' && nextValue === '') {\n        el[key] = true\n      } else {\n        el[key] = nextValue\n      }\n    } else {\n      el.setAttribute(key, nextValue)\n    }\n  }\n```\n\n- è¿™é‡Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨ `className` ï¼Œ\n\t- è€Œä¸æ˜¯ `el.classList` å’Œ`setAttribute('class','xxxx')` \n\t\t- å› ä¸º`æ€§èƒ½æ›´ä¼˜` \n\nå¦å¤–ï¼Œvue ä¹Ÿå¯¹ `style` å±æ€§åšäº†äº›å¢å¼ºï¼Œæ”¯æŒ `å¯¹è±¡å’Œå­—ç¬¦ä¸²` \n\n## 8. å¦‚ä½•å¸è½½ä¸€ä¸ªèŠ‚ç‚¹\n\nå‰é¢ï¼Œæˆ‘ä»¬è‡ªå·±é€šè¿‡ `InnerHTML` çš„æ–¹å¼æ¥å¸è½½ï¼Œæœ‰ä»¥ä¸‹é—®é¢˜\n\n1. è¿™ä¸ªç»„ä»¶å¯èƒ½ç”±å¤šä¸ªç»„ä»¶ç»„æˆï¼Œ`æ²¡åŠæ³•ç»†ç²’åº¦çš„æ§åˆ¶æ¯ä¸ªç»„ä»¶çš„å¸è½½`ï¼Œå³ä¸èƒ½æ­£ç¡®è°ƒç”¨ `é’©å­ç”Ÿå‘½å‘¨æœŸå‡½æ•°`ï¼Œå¦‚ `beforeUnmount` æˆ–è€… `unmounted` ç­‰\n2. æœ‰äº›å…ƒç´ å­˜åœ¨`æŒ‡ä»¤`ï¼Œå¸è½½æ—¶ï¼Œåº”è¯¥æ­£ç¡®æ‰§è¡Œå¯¹åº”çš„ `æŒ‡ä»¤é’©å­å‡½æ•°`\n3. æ²¡æ³•æ­£ç¡®ç§»é™¤ DOM ä¸Šç»‘å®šçš„`äº‹ä»¶`\n\næ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥å®ç°ï¼š\n\n```js hl:6\nfunction unmount(vnode) {\n    const parent = vnode.el.parentNode\n    if (parent) {\n        parent.removeChild(vnode.el)\n    }\n    // åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨è¯¥èŠ‚ç‚¹æ ‘ä¸‹çš„æŒ‡ä»¤é’©å­å‡½æ•° å’Œ ç”Ÿå‘½å‘¨æœŸå‡½æ•°\n}\n\nfunction render(vnode, container) {\n    if (vnode) {\n        patch(container._vnode, vnode, container)\n    } else {\n        if (container._vnode) {\n            // æ—§ vnode å­˜åœ¨ï¼Œä¸”æ–° vnode ä¸å­˜åœ¨ï¼Œè¯´æ˜æ˜¯å¸è½½(unmount)æ“ä½œ\n            unmount(container._vnode)\n        }\n    }\n    // æŠŠ vnode å­˜å‚¨åˆ° container._vnode ä¸‹ï¼Œå³ åç»­æ¸²æŸ“ä¸­çš„æ—§ vnode\n    container._vnode = vnode\n}\n```\n\nå•ç‹¬æå‡º `unmount` ï¼Œå¥½å¤„æ˜¯ï¼šæˆ‘ä»¬å¯ä»¥è°ƒç”¨è¯¥èŠ‚ç‚¹æ ‘ä¸‹çš„æŒ‡ä»¤é’©å­å‡½æ•° å’Œ ç”Ÿå‘½å‘¨æœŸå‡½æ•°\n\n>[!info]  \nå…¶å®ï¼Œå¸è½½æ—¶ï¼ŒçœŸæ­£è¿˜æœ‰å¾ˆå¤šäº‹æƒ…è¦æï¼Œæ¯”å¦‚éå† `è™šæ‹Ÿ DOMæ ‘èŠ‚ç‚¹`ï¼Œ`é€’å½’å¸è½½`å­å…ƒç´ ç­‰ç­‰ï¼Œè¿™é‡Œåªæ˜¯ç»™äº†ä¸€ä¸ªç®€å•çš„è¯´æ˜\n\n## 9. ä¸ºä»€ä¹ˆè¦åŒºåˆ† vnode çš„ ç±»å‹ ?\n\nçœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š\n\n```js\nconst vnode = {\n    type: 'p',\n    props: {\n        class: 'foo bar baz'\n    },\n    children: 'text'\n}\nrenderer.render(vnode, document.querySelector('#app'))\n\nconst newVnode = {\n    type: 'div',\n    props: {\n        id: 'foo'\n    },\n    children: 'hello'\n}\n\nsetTimeout(() => {\n    renderer.render(newVnode, document.querySelector('#app'))\n}, 1000);\n```\n\næˆ‘ä»¬å‘ç° `vnode` çš„ `type` å€¼éƒ½å‘ç”Ÿå˜åŒ–äº†ï¼Œç”± `p` å˜æˆ `div` ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè¿˜éœ€è¦`æ‰“è¡¥ä¸`å—ï¼Ÿ\n- æ˜¯çš„\n\t- â‘  åº”è¯¥å…ˆæŠŠ `p æŒ‚è½½` \n\t- â‘¡  ç„¶åå†å°† `div æŒ‚è½½`\n- å¦‚ä¸‹ä»£ç ï¼š\n\n```js hl:2,7,15 \nfunction patch(n1, n2, container) {\n    // ç±»å‹ä¸åŒï¼Œç›´æ¥å¸è½½\n    if (n1 && n1.type !== n2.type) {\n        unmount(n1);\n        n1 = null\n    }\n    // æŒ‚è½½æ–°çš„ vnode \n    const {type} = n2\n    if (typeof type === 'string') {\n        if (!n1) {\n            mountElement(n2, container)\n        } else {\n            patchElement(n1, n2)\n        }\n    // å¦‚æœæ˜¯ Object ï¼Œéœ€è¦å†ç‰¹æ®Šå¤„ç†,é€’å½’å¤„ç†\t\n    } else if (typeof type === 'object') {\n        // ç»„ä»¶\n    }\n}\n```\n\n- å¦‚æœæ˜¯ `Object` ï¼Œ éœ€è¦è°ƒç”¨ `mountComponent` å’Œ `patchComponent` æ¥ç»§ç»­`é€’å½’å¤„ç†`ï¼Œç›´åˆ°é‡åˆ°`æ™®é€šçš„æ ‡ç­¾å…ƒç´ `ï¼Œå¦‚ `div`\n\nä¸‹é¢æ˜¯`å¯¹å…·ä½“å…ƒç´ æ‰“è¡¥ä¸`çš„é€»è¾‘ï¼š\n\n```js\nfunction patchElement(n1, n2) {\n    const el = n2.el = n1.el\n    const oldProps = n1.props\n    const newProps = n2.props;\n    \n    // å¯¹ã€æ–°æ·»åŠ çš„å…ƒç´ å±æ€§ã€‘æ‰“è¡¥ä¸\n    for (const key in newProps) {\n        if (newProps[key] !== oldProps[key]) {\n            patchProps(el, key, oldProps[key], newProps[key])\n        }\n    }\n    // å¯¹ ã€æ—§çš„çš„å…ƒç´ å±æ€§ã€‘ æ‰“è¡¥ä¸\n    for (const key in oldProps) {\n        if (!(key in newProps)) {\n            patchProps(el, key, oldProps[key], null)\n        }\n    }\n}\n```\n\n## 10. äº‹ä»¶çš„å¤„ç†\n\nå¦‚ä½•ç»™ `vnode` ç»‘å®šäº‹ä»¶å‘¢ï¼Ÿæ¯”å¦‚å¦‚ `è™šæ‹ŸèŠ‚ç‚¹`\n\n```js\n\nconst vnode = {\n    type: 'p',\n    props: {\n        onClick: [\n            () => {\n                alert('clicked 1')\n            },\n            () => {\n                alert('clicked 2')\n            }\n        ]\n    },\n    children: 'text'\n}\n```\n\næˆ‘ä»¬ç›´æ¥æ¥çœ‹ä»£ç å®ç°ï¼Œåé¢å†è¯´æ˜ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ\n\n```js hl:2\npatchProps(el, key, prevValue, nextValue) {\n    if (/^on/.test(key)) {\n        const invokers = el._vei || (el._vei = {})\n        let invoker = invokers[key]\n        const name = key.slice(2).toLowerCase()\n        if (nextValue) {\n            if (!invoker) {\n                invoker = el._vei[key] = (e) => {\n                    if (Array.isArray(invoker.value)) {\n                        invoker.value.forEach(fn => fn(e))\n                    } else {\n                        invoker.value(e)\n                    }\n                }\n                invoker.value = nextValue\n                el.addEventListener(name, invoker)\n            } else {\n                invoker.value = nextValue\n            }\n        } else if (invoker) {\n            el.removeEventListener(name, invoker)\n        }\n    } else if (key === 'class') {\n        \n    } else if (shouldSetAsProps(el, key, nextValue)) {\n        \n    } else {\n        \n    }\n}\n})\n```\n\nè¯´æ˜ï¼š\n- `on` å¼€å¤´çš„å±æ€§æ‰éœ€è¦å¤„ç†\n\t- `invokersï¼šäº‹ä»¶å¤„ç†å‡½æ•°` ç”¨äºå¤„ç†äº‹ä»¶å›è°ƒå‡½æ•°\n\t- çœŸæ­£çš„äº‹ä»¶ callback å­˜åœ¨ `invokers.value` ä¸­\n- é—®ï¼šä¸ºä»€ä¹ˆè¦è¿™æ ·ï¼Œ\n\t- è§£å†³æ€§èƒ½é—®é¢˜ï¼Œæ¯”å¦‚æ›´æ–°äº‹ä»¶æ—¶ï¼Œç›´æ¥æ›´æ–° `invokers.value` å³å¯ï¼Œæ²¡å¿…è¦æ¯æ¬¡éƒ½è°ƒç”¨ `removeEventListener` æ¥ç§»é™¤ä¸Šä¸€æ¬¡ç»‘å®šçš„äº‹ä»¶ï¼Ÿ\n\t- `el._vei[key]` ä¸­å­˜å‚¨ç€**æ‰€æœ‰äº‹ä»¶ä¿¡æ¯**ï¼Œå®ƒçš„æ•°æ®ç»“æ„å¯èƒ½æ˜¯ä¸€ä¸ª**æ•°ç»„**ï¼Œæ¯”å¦‚åŒä¸€äº‹ä»¶å¦‚ `click` æœ‰å¤šä¸ªå›è°ƒcallbackï¼Œæ‰€ä»¥æ‰æœ‰ `invoker.value.forEach(fn => fn(e))`\n\t- å®ƒè¿˜èƒ½è§£å†³`äº‹ä»¶å†’æ³¡`å’Œ`æ›´æ–°ç›¸äº’å†²çª`çš„é—®é¢˜ï¼Œè§ä¸‹é¢ï¼š\n\n## 11. äº‹ä»¶å†’æ³¡ä¸æ›´æ–°æ—¶æœºé—®é¢˜\n\nçœ‹å¦‚ä¸‹ä»£ç ï¼š\n\n```js\nconst {effect, ref} = VueReactivity\nconst bol = ref(false)\n\neffect(() => {\n    const vnode = {\n        type: 'div',\n        props: bol.value ? {\n            onClick: () => { \n                alert('çˆ¶å…ƒç´  clicked')\n            }\n        } : {},\n        children: [\n            {\n                type: 'p',\n                props: {\n                    onClick: () => {\n                        bol.value = true\n                    }\n                },\n                children: 'text'\n            }\n        ]\n    }\n    renderer.render(vnode, document.querySelector('#app'))\n})\n```\n\nä¸€å¼€å§‹ `bol` ä¸º `false`ï¼Œ \n- æ‰€ä»¥ `div` æ²¡æœ‰å›è°ƒäº‹ä»¶ ï¼Œ `p` æœ‰å›è°ƒ ï¼Œ æ‰€ä»¥ `æ­£å¸¸é¢„æœŸ` æ˜¯ ç‚¹å‡» `p å…ƒç´ `ï¼Œå†’æ³¡åˆ° `div` , ä¸ `alert`ã€‚\n- ä½†æ˜¯ï¼Œç«Ÿç„¶æ‰§è¡Œäº†ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\n\t- å› ä¸º `bol æ˜¯å“åº”æ•°æ®`ï¼Œ å˜åŒ–äº†ä¼šå¯¼è‡´ å‰¯ä½œç”¨æ‰§è¡Œï¼Œç„¶åå°±ç»™ div ç»‘å®šäº†äº‹ä»¶ï¼›\n\nå¦‚ä½•è§£å†³å‘¢ï¼Ÿç¬¦åˆæ­£å¸¸é¢„æœŸã€‚å¦‚ä¸‹ä»£ç ï¼š\n\n![](https://od-1310531898.cos.ap-beijing.myqcloud.com/202305252000226.png)\n\nå³ï¼Œå±è”½æ‰€æœ‰`ç»‘å®šæ—¶é—´ æ™šäº çœŸæ­£æ‰§è¡Œæ—¶é—´`çš„æ‰§è¡Œ ã€‚\n\n## 12. å¦‚ä½•æ›´æ–°å­èŠ‚ç‚¹\n\n6ç§æƒ…å†µï¼š`ã€æ–°èŠ‚ç‚¹ã€è€èŠ‚ç‚¹ã€‘ * ã€æ–‡æœ¬èŠ‚ç‚¹ã€ä¸€ç»„èŠ‚ç‚¹ã€nullã€‘`\n\néœ€è¦åœ¨ç‰¹å®šæƒ…å†µ è°ƒç”¨ `æ—§èŠ‚ç‚¹å¸è½½æ“ä½œ` å’Œ `æ–°åŠ èŠ‚ç‚¹çš„æŒ‚è½½æ“ä½œ` ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```js\n\nfunction patchChildren(oldNode, newNode, container) {\n    // æ–°èŠ‚ç‚¹æ˜¯å¦æ˜¯æ–‡æœ¬èŠ‚ç‚¹\n    if (typeof newNode.children === 'string') {\n        // è€èŠ‚ç‚¹æ˜¯ä»…åœ¨æ˜¯æ˜¯ä¸€ç»„èŠ‚ç‚¹æ—¶ï¼Œæ‰éœ€è¦éå†å¸è½½\n        if (Array.isArray(oldNode.children)) {\n            oldNode.children.forEach((c) => unmount(c))\n        }\n        setElementText(container, newNode.children)\n    // æ–°èŠ‚ç‚¹æ˜¯ä¸€ç»„èŠ‚ç‚¹\n    } else if (Array.isArray(newNode.children)) {\n        // è€èŠ‚ç‚¹æ˜¯ä¸€ç»„èŠ‚ç‚¹\n        if (Array.isArray(oldNode.children)) {\n            oldNode.children.forEach(c => unmount(c))\n            newNode.children.forEach(c => patch(null, c, container))\n        } else {\n            setElementText(container, '')\n            newNode.children.forEach(c => patch(null, c, container))\n        }\n    } else {\n        if (Array.isArray(oldNode.children)) {\n            oldNode.children.forEach(c => unmount(c))\n        } else if (typeof oldNode.children === 'string') {\n            setElementText(container, '')\n        }\n    }\n}\n```\n\nå…¶å®ä¸Šé¢ä»£ç å¾ˆç®€å•ç²—æš´ï¼Œæ¯”å¦‚ï¼Œå¦‚æœæ—§èŠ‚ç‚¹æ˜¯ä¸€ç»„èŠ‚ç‚¹ï¼Œç®€å•ç²—æš´çš„å…¨éƒ¨å¸è½½ï¼Œå†å…¨éƒ¨æŒ‚è½½æ–°èŠ‚ç‚¹æ“ä½œï¼›å…¶å®æ›´å¥½çš„æ–¹å¼æ˜¯ `ä½¿ç”¨ Diff ç®—æ³•ï¼Œæœ€å¤§å¯èƒ½åˆ©ç”¨`ï¼Œä»¥æé«˜æ€§èƒ½ã€‚\n\n## 13. æ–‡æœ¬èŠ‚ç‚¹ä¸æ³¨é‡ŠèŠ‚ç‚¹\n\n- **æ–‡æœ¬èŠ‚ç‚¹**ï¼šç”¨äºè¡¨ç¤ºçº¯æ–‡æœ¬ã€‚\n- **æ³¨é‡ŠèŠ‚ç‚¹**ï¼šç”¨äºåœ¨HTMLä¸­æ·»åŠ æ³¨é‡Šï¼Œè¿™äº›æ³¨é‡Šä¸ä¼šæ˜¾ç¤ºåœ¨é¡µé¢ä¸Šä½†å¯èƒ½å¯¹å¼€å‘è€…æœ‰å¸®åŠ©ã€‚\n- å¦‚ä½•ä½¿ç”¨ `vnode` æè¿°çœŸå®åœºæ™¯ä¸­çš„ `æ–‡æœ¬èŠ‚ç‚¹` ä¸ `æ³¨é‡ŠèŠ‚ç‚¹` ï¼Ÿ\n\t- ç­”æ¡ˆæ˜¯ï¼šä½¿ç”¨ `Symbol()` ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\t\t- ä½¿ç”¨ Symbol çš„åŸå› ï¼š\n\t\t    - Symbol æ˜¯ JavaScriptä¸­çš„ä¸€ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼Œç”¨äº**åˆ›å»ºå”¯ä¸€çš„æ ‡è¯†ç¬¦**ã€‚\n\t\t    - é€šè¿‡ä½¿ç”¨ Symbolï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºç‹¬ç‰¹çš„æ ‡è¯†æ¥ä»£è¡¨**æ–‡æœ¬èŠ‚ç‚¹**å’Œ**æ³¨é‡ŠèŠ‚ç‚¹**ã€‚\n\t\t- ä½¿ç”¨ Symbol çš„**ä¼˜åŠ¿** ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°ä¸”å®‰å…¨åœ°åœ¨è™šæ‹ŸDOMä¸­å®šä¹‰å’ŒåŒºåˆ†ä¸åŒç±»å‹çš„èŠ‚ç‚¹\n\t\t\t- ç»Ÿä¸€çš„èŠ‚ç‚¹è¡¨ç¤ºæ–¹å¼\n\t\t\t- æ¸…æ™°çš„ç±»å‹åŒºåˆ†\n\t\t\t- æ˜“äºåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­è¿›è¡Œç‰¹æ®Šå¤„ç†\n\n```js\nconst Text = Symbol();\nconst Comment = Symbol();\n\nconst vnode1 = {\n  type: Text,\n  children: 'Some Text'\n}\n\nconst vnode2 = {\n  type: Comment,\n  children: 'Some Comment'\n}\n```\n\nç„¶åæ ¹æ®å…·ä½“èŠ‚ç‚¹ç±»å‹ï¼Œåœ¨æŒ‚è½½ã€æ›´æ–°ã€å¸è½½ç­‰æ“ä½œæ—¶æ ¹æ®å…·ä½“æƒ…å†µå¤„ç†å³å¯ã€‚\n\n## 14. Fragment\n\nå­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ ï¼Ÿ å…¶å®å°±æ˜¯ç±»ä¼¼äºReact çš„ `<></>` å’Œ `<fragment>`\n\nå¦‚ä¸‹ vnode ï¼š\n\n```js\nconst Fragment = Symbol()\nconst newVnode = {\n  type: 'div',\n  children: [\n    {\n      type: Fragment,\n      children: [\n        { type: 'p', children: 'text 1' },\n        { type: 'p', children: 'text 2' },\n        { type: 'p', children: 'text 3' }\n      ]\n    },\n    { type: 'section', children: 'åˆ†å‰²çº¿' }\n  ]\n}\n```\n\n**åœ¨æŒ‚è½½ã€æ›´æ–°ã€å¸è½½æ“ä½œæ˜¯ï¼Œä¸å¤„ç†å®ƒæœ¬èº«ï¼Œåªå¤„ç†å®ƒçš„å­èŠ‚ç‚¹å³å¯**\n","15d13e5949de5fdf8f8c72f1a2ade238":"\n# Vue3 çš„ diff ç®—æ³•\n\n`#vue` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä¸åšä»»ä½• diff ä¼˜åŒ– çš„æ¸²æŸ“ \n\nçœ‹ä¸ªä¾‹å­ï¼Œç”± `vnode1` å˜æˆ `vnode2` ï¼Œå¦‚æœæŒ‰ç…§ [11. Vue3 çš„æ¸²æŸ“å™¨åŸç†](/post/1d4b6077acf55710b1a41f7b8e299b2f.html) ä¸­çš„ç®€æ˜“å®ç°ï¼Œå³ `å…ˆå¸è½½æ‰€æœ‰ï¼Œå†æŒ‚è½½æ‰€æœ‰`ï¼Œé‚£ä¹ˆï¼šæˆ‘ä»¬éœ€è¦ `8 æ¬¡ DOM æ“ä½œ`\n\n-  å¸è½½æ‰€æœ‰æ—§å­èŠ‚ç‚¹ï¼Œéœ€è¦ 3 æ¬¡ DOM åˆ é™¤æ“ä½œ\n-  æŒ‚è½½æ‰€æœ‰æ–°å­èŠ‚ç‚¹ï¼Œéœ€è¦ 3 æ¬¡ DOM æ·»åŠ æ“ä½œ\n\n```javascript\nconst VNode1 = {\n    type: 'div',\n    children: [\n        {type: 'p', children: '1'},\n        {type: 'p', children: '2'},\n        {type: 'p', children: '3'},\n    ]\n}\n\nconst VNode2 = {\n    type: 'div',\n    children: [\n        {type: 'p', children: '4'},\n        {type: 'p', children: '5'},\n        {type: 'p', children: '6'},\n    ]\n}\n```\n\nå¦‚æœï¼Œæˆ‘ä»¬åš diff  ç®—æ³•ï¼Œæˆ‘ä»¬å‘ç°ï¼Œä¸Šé¢çš„ vnode åªæ˜¯ `æ–‡æœ¬å†…å®¹`å‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰€ä»¥åªéœ€è¦æ›´æ–°æ–‡æœ¬èŠ‚ç‚¹å³å¯ï¼Œæœ€ç»ˆåªéœ€è¦ `3 æ¬¡ DOM æ“ä½œ`\n\næ‰€ä»¥ï¼Œå¯¹äº `è¿™æ–°æ—§ä¸¤ç»„èŠ‚ç‚¹`ï¼Œæˆ‘ä»¬ä»¥ä¸‹ä¼˜åŒ–ç­–ç•¥ï¼š\n\n- æ¯”è¾ƒæ–°æ—§ä¸¤ç»„èŠ‚ç‚¹çš„ä¸ªæ•°ï¼Œæ–°ç»„èŠ‚ç‚¹å¤šï¼Œåˆ™è¯´æ˜æœ‰æ–°çš„èŠ‚ç‚¹éœ€è¦æŒ‚è½½ï¼Œå¦åˆ™æœ‰æ—§çš„èŠ‚ç‚¹éœ€è¦å¸è½½\n- å¦å¤–ï¼Œæˆ‘ä»¬éœ€è¦ `éå†é•¿åº¦è¾ƒæ®µçš„èŠ‚ç‚¹`ï¼Œè¿›è¡Œ `patch`ï¼Œä¿è¯å°½å¯èƒ½å¤šçš„ patchï¼Œé¿å…æ›´å¤šçš„ DOM æ“ä½œ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241103-3.png)\n\n## 2. ç®€å• Diff ç®—æ³•ï¼šè€ƒè™‘å¯å¤ç”¨ DOM ï¼Œå‡å°‘ DOM æ“ä½œ\n\nè¿˜æ˜¯çœ‹ä¸ªä¾‹å­ï¼ŒæŒ‰ç…§ä¸Šé¢çš„ä¼˜åŒ–ç­–ç•¥ï¼Œè¿˜æ˜¯å¾— `6 æ¬¡ DOM æ“ä½œ` ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œå…¶å®æ¯ä¸ªèŠ‚ç‚¹çš„åŒºåˆ«ä»…ä»…åœ¨äº `ä½ç½®ç§»åŠ¨äº†`ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦è€ƒè™‘å¦‚ä½•**å¤ç”¨** DOMï¼Œè€Œä¸æ˜¯`é”€æ¯äº†é‡å»º`\n\n```javascript\nconst vNode1 = {\n    type: 'div',\n    children: [\n        {type: 'p', children: '4'},\n        {type: 'div', children: '2'},\n        {type: 'h1', children: '1'},\n        {type: 'span', children: '3'}\n    ]\n}\n\nconst vNode2 = {\n    type: 'div',\n    children: [\n        {type: 'div', children: '2'},\n        {type: 'span', children: '3'},\n        {type: 'p', children: '4'},\n        {type: 'h1', children: '1'}\n    ]\n}\n\n```\n\nåŸºäºä¸Šï¼Œæˆ‘ä»¬éœ€è¦æ€è€ƒï¼š\n\n### 2.1. ç¬¬ä¸€ï¼šå¦‚ä½•æ‰¾å¯å¤ç”¨çš„èŠ‚ç‚¹ï¼Ÿ\n\nç­”æ¡ˆæ˜¯å”¯ä¸€ `key` ,  æœ€ç®€å•çš„æ–¹å¼ï¼Œæˆ‘ä»¬éå†ï¼ˆåµŒå¥—éå†ï¼‰æ–°æ—§èŠ‚ç‚¹ï¼Œç„¶åæ‰¾åˆ° `key ç›¸åŒ`çš„æ–°æ—§èŠ‚ç‚¹ï¼Œç„¶åæ‰“è¡¥ä¸ `patch(oldNode , newNode)` ï¼Œæ¢å¦å¤–ä¸€ç§è¯´æ˜ï¼Œå³æ‹¿ç€ä¸€ç»„èŠ‚ç‚¹ï¼Œå»æ—§èŠ‚ç‚¹ç»„ä¸­æŸ¥æ‰¾ï¼Œæ˜¯å¦æœ‰å¯å¤ç”¨çš„èŠ‚ç‚¹ï¼Œå¤ç”¨çš„ä¾æ®æ˜¯` key`  ï¼Œä¸‹é¢æ˜¯ä»£ç æè¿°ï¼š\n\n```javascript hl:8\n // éå†æ–°çš„ children\n  for (let i = 0; i < newChildren.length; i++) {\n    const newVNode = newChildren[i]\n    let j = 0\n    // éå†æ—§çš„ children\n    for (j; j < oldChildren.length; j++) {\n      const oldVNode = oldChildren[j]\n      // å¦‚æœæ‰¾åˆ°äº†å…·æœ‰ç›¸åŒ key å€¼çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œåˆ™è°ƒç”¨ `patch` å‡½æ•°æ›´æ–°ä¹‹\n      if (newVNode.key === oldVNode.key) {\n        patch(oldVNode, newVNode, container)\n        break // è¿™é‡Œéœ€è¦ break\n      }\n    }\n  }\n```\n\n### 2.2. ç¬¬äºŒï¼šå¦‚ä½•åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦éœ€è¦ç§»åŠ¨ï¼Ÿ\n\nè¿™é‡Œç›´æ¥ç»™ç»“è®ºï¼Œåˆå§‹åŒ–`æœ€å¤§ç´¢å¼•å€¼ä¸º 0`ï¼Œæ‹¿ç€æ–°çš„èŠ‚ç‚¹ï¼Œå°è¯•å»æ—§çš„èŠ‚ç‚¹ç»„å»æ‰¾å…·æœ‰ç›¸åŒ` key` å€¼çš„ï¼Œæ›´æ–° `æœ€å¤§ç´¢å¼•å€¼`ï¼›å¦‚æœåç»­åç»­æŸ¥æ‰¾è¿‡ç¨‹ä¸­ï¼Œåœ¨æ—§çš„çš„èŠ‚ç‚¹ç»„ä¸­æ‹›åˆ°çš„ç´¢å¼• å°äº è¿™ä¸ª `æœ€å¤§ç´¢å¼•å€¼`ï¼Œåˆ™éœ€è¦ç§»åŠ¨ã€‚\n\nä»£ç æè¿°å¦‚ä¸‹å›¾ï¼š\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/feca43d0e736ad65e3a9a4b0df08fd4e.png)\n\nä¸‹é¢æ˜¯å…·ä½“ä»£ç ï¼š\n\n```javascript\n  const oldChildren = n1.children\n  const newChildren = n2.children\n  // éå†æ–°çš„ children\n  for (let i = 0; i < newChildren.length; i++) {\n    const newVNode = newChildren[i]\n    let j = 0\n    // éå†æ—§çš„ children\n    for (j; j < oldChildren.length; j++) {\n      const oldVNode = oldChildren[j]\n      // å¦‚æœæ‰¾åˆ°äº†å…·æœ‰ç›¸åŒ key å€¼çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œåˆ™è°ƒç”¨ `patch` å‡½æ•°æ›´æ–°ä¹‹\n      if (newVNode.key === oldVNode.key) {\n        patch(oldVNode, newVNode, container)\n        if (j < lastIndex) {\n          // éœ€è¦ç§»åŠ¨\n        } else {\n          // æ›´æ–° lastIndex\n          lastIndex = j\n        }\n        break // è¿™é‡Œéœ€è¦ break\n      }\n    }\n  }\n```\n\nä¸Šé¢çš„ `patch ä»£ç `ï¼Œå› ä¸ºå¯ä»¥`å¤ç”¨DOM`ï¼Œæ‰€ä»¥ä¼šåœ¨ `pathElement` ä¸­æŠŠ `DOM å¼•ç”¨ï¼ˆ å³oldNode.el ï¼‰`ç›´æ¥ç»™æ–°çš„èŠ‚ç‚¹ï¼Œè¾¾åˆ°å¤ç”¨çš„æ•ˆæœï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```javascript hl:2\nfunction patchElement(n1, n2) {\n    const el = n2.el = n1.el\n    // ã€‚ã€‚ã€‚ å…¶ä»–ä»£ç \n}\n```\n\n### 2.3. ç¬¬ä¸‰ï¼šå¦‚ä½•ç§»åŠ¨å¯å¤ç”¨èŠ‚ç‚¹ï¼Ÿ\n\né¦–å…ˆï¼Œç§»åŠ¨èŠ‚ç‚¹ï¼Œç§»åŠ¨çš„æ˜¯`çœŸå®çš„ DOM`ï¼Œä½ æƒ³å˜›ï¼Œè¦å¤ç”¨DOM èŠ‚ç‚¹å˜›ã€‚æ‰€ä»¥ï¼Œä¼šè°ƒç”¨ DOM  `insertBefore(el, anchor)`æ“ä½œ\n\nå¦‚ä¸‹å›¾ï¼š\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/77b571bd0ac2e148ce354da1436cd76f.png)\n\næœ€ç»ˆä»£ç ï¼š\n\n```javascript\n      const oldChildren = n1.children\n      const newChildren = n2.children\n      let lastIndex = 0\n      // éå†æ–°çš„ children\n      for (let i = 0; i < newChildren.length; i++) {\n        const newVNode = newChildren[i]\n        let j = 0\n        let find = false\n        // éå†æ—§çš„ children\n        for (j; j < oldChildren.length; j++) {\n          const oldVNode = oldChildren[j]\n          // å¦‚æœæ‰¾åˆ°äº†å…·æœ‰ç›¸åŒ key å€¼çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œåˆ™è°ƒç”¨ `patch` å‡½æ•°æ›´æ–°ä¹‹\n          if (newVNode.key === oldVNode.key) {\n            find = true\n            patch(oldVNode, newVNode, container)\n            if (j < lastIndex) {\n              // éœ€è¦ç§»åŠ¨\n              const prevVNode = newChildren[i - 1]\n              if (prevVNode) {\n                const anchor = prevVNode.el.nextSibling\n                insert(newVNode.el, container, anchor)\n              }\n            } else {\n              // æ›´æ–° lastIndex\n              lastIndex = j\n            }\n            break // è¿™é‡Œéœ€è¦ break\n          }\n        }\n```\n\n`insert` ä¾èµ–äºåŸç”Ÿ `insertBefore` æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š\n\n```javascript\ninsert(el, parent, anchor = null) {\n    parent.insertBefore(el, anchor)\n},\n```\n\n### 2.4. ç¬¬äº”ã€å¦‚ä½•æ·»åŠ æ–°èŠ‚ç‚¹\n\nå¦‚ä¸‹å›¾ï¼š\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/6cc5d14fb3a1b3474c6c5f21f60b2eaf.png)\n\nç›´æ¥çœ‹ä»£ç ï¼Œæ³¨æ„è§£é‡Šéƒ¨åˆ†ï¼š\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/82f0cb40de7c60fe8f2cab6f9c1b3ffa.png)\n\nå…·ä½“ä»£ç éƒ¨åˆ†ï¼š\n\n```javascript\nif (!find) {\n    const prevVNode = newChildren[i - 1]\n    let anchor = null\n    if (prevVNode) {\n        anchor = prevVNode.el.nextSibling // ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹\n    } else {\n        anchor = container.firstChild // æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ \n    }\n    patch(null, newVNode, container, anchor)\n}\n```\n\n### 2.5. åˆ é™¤ä¸å­˜åœ¨çš„å…ƒç´ \n\n![|568](https://832-1310531898.cos.ap-beijing.myqcloud.com/fe2007501f0e9fc182f02cb05395abaa.png)\n\nè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦éå† `æ—§çš„èŠ‚ç‚¹ç»„`ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\n\n// éå†æ—§çš„èŠ‚ç‚¹\nfor (let i = 0; i < oldChildren.length; i++) {\n    const oldVNode = oldChildren[i]\n    // æ‹¿ç€æ—§ VNode å»æ–° children ä¸­å¯»æ‰¾ç›¸åŒçš„èŠ‚ç‚¹\n    const has = newChildren.find(\n        vnode => vnode.key === oldVNode.key\n    )\n    if (!has) {\n        // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç›¸åŒçš„èŠ‚ç‚¹ï¼Œåˆ™ç§»é™¤\n        unmount(oldVNode)\n    }\n}\n```\n\n### 2.6. æ€»ç»“\n\n- Diff ç®—æ³•ç”¨æ¥è®¡ç®—`ä¸¤ç»„å­èŠ‚ç‚¹`çš„å·®å¼‚ï¼Œå¹¶è¯•å›¾æœ€å¤§ç¨‹åº¦åœ°å¤ç”¨ DOM å…ƒç´ ã€‚\n- éå†æ–°æ—§ä¸¤ç»„å­èŠ‚ç‚¹ä¸­`æ•°é‡è¾ƒå°‘`çš„é‚£ä¸€ ç»„ï¼Œå¹¶é€ä¸ªè°ƒç”¨ patch å‡½æ•°è¿›è¡Œæ‰“è¡¥ä¸ï¼Œç„¶åæ¯”è¾ƒæ–°æ—§ä¸¤ç»„å­èŠ‚ç‚¹çš„æ•°é‡\n\t- å¦‚æœæ–°çš„ä¸€ç»„å­èŠ‚ç‚¹æ•°é‡æ›´å¤šï¼Œè¯´æ˜æœ‰æ–°å­èŠ‚ç‚¹éœ€è¦æŒ‚è½½\n\t- å¦åˆ™è¯´æ˜åœ¨æ—§çš„ä¸€ç»„å­èŠ‚ç‚¹ä¸­ï¼Œæœ‰èŠ‚ç‚¹éœ€è¦å¸è½½\n- è™šæ‹ŸèŠ‚ç‚¹ä¸­ key å±æ€§çš„ä½œç”¨ï¼Œå®ƒå°±åƒè™šæ‹ŸèŠ‚ç‚¹ çš„â€œèº«ä»½è¯å·â€ã€‚\n\t- åœ¨æ›´æ–°æ—¶ï¼Œæ¸²æŸ“å™¨é€šè¿‡ key å±æ€§æ‰¾åˆ°`å¯å¤ç”¨`çš„èŠ‚ç‚¹ï¼Œ \n\t- ç„¶åå°½å¯èƒ½åœ°é€šè¿‡ DOM ç§»åŠ¨æ“ä½œæ¥å®Œæˆæ›´æ–°ï¼Œé¿å…è¿‡å¤šåœ°å¯¹ DOM å…ƒç´ è¿›è¡Œé”€æ¯å’Œé‡å»ºã€‚\n- ç®€å• Diff ç®—æ³•çš„æ ¸å¿ƒé€»è¾‘æ˜¯ï¼Œæ‹¿æ–°çš„ä¸€ç»„å­èŠ‚ç‚¹ä¸­çš„èŠ‚ç‚¹å»æ—§çš„ä¸€ç»„å­èŠ‚ç‚¹ä¸­å¯»æ‰¾å¯å¤ç”¨çš„èŠ‚ç‚¹ã€‚\n\t- å¦‚æœæ‰¾åˆ°äº†ï¼Œåˆ™è®°å½•è¯¥èŠ‚ç‚¹çš„`ä½ç½®ç´¢å¼•`ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªä½ç½®ç´¢å¼•ç§°ä¸º`æœ€å¤§ç´¢å¼•`ã€‚\n\t- åœ¨æ•´ä¸ªæ›´æ–°è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„ç´¢å¼•å€¼`å°äº`æœ€å¤§ç´¢å¼•ï¼Œåˆ™è¯´æ˜è¯¥èŠ‚ç‚¹å¯¹åº”çš„çœŸå® DOM å…ƒç´ éœ€è¦ç§»åŠ¨ã€‚\n\n## 3. åŒç«¯ Diff ç®—æ³•\n\n### 3.1. å…ˆçœ‹çœ‹ä¸€ä¸ªç¤ºä¾‹\n\nå¦‚ä¸‹å›¾ï¼Œå¦‚æœä½¿ç”¨å‰æ–‡æ‰€ä½¿ç”¨çš„çš„ ç®€æ˜“ Diff ç®—æ³•ï¼Œé‚£ä¹ˆéœ€è¦ç§»åŠ¨ `ä¸¤æ¬¡ DOM æ“ä½œ`\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/af82e1f002de149760f6171ff125bad5.png)\n\nä½†å…¶å®ï¼Œæˆ‘åªéœ€è¦`ç§»åŠ¨ä¸€æ¬¡DOM`å³å¯ï¼Œå³ æŠŠ P3 ç§»åŠ¨ P1 åé¢ å³å¯ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/f9ee3a586037014fc072543ba6206a29.png)\n\n### 3.2. ç†æƒ³æƒ…å†µåŒç«¯ç®—æ³•å¤„ç†\n\nå…·ä½“åŒç«¯ç®—æ³•æµç¨‹å›¾ï¼Œå‚è€ƒ `fj`\n[https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=167-296&t=i3ztBjIOmSVuaLfT-4](https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=167-296&t=i3ztBjIOmSVuaLfT-4)\n\néƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š\n\n```javascript hl:12\nfunction patchKeyedChildren(n1, n2, container) {\n    const oldChildren = n1.children\n    const newChildren = n2.children\n    let oldStartIdx = 0\n    let oldEndIdx = oldChildren.length - 1\n    let newStartIdx = 0\n    let newEndIdx = newChildren.length - 1\n    let oldStartVNode = oldChildren[oldStartIdx]\n    let oldEndVNode = oldChildren[oldEndIdx]\n    let newStartVNode = newChildren[newStartIdx]\n    let newEndVNode = newChildren[newEndIdx]\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n        //  ç¬¬1æ­¥ï¼š\n        if (oldStartVNode.key === newStartVNode.key) {\n            patch(oldStartVNode, newStartVNode, container)\n            oldStartVNode = oldChildren[++oldStartIdx]\n            newStartVNode = newChildren[++newStartIdx]\n        //  ç¬¬2æ­¥ï¼š\t\n        } else if (oldEndVNode.key === newEndVNode.key) {\n            patch(oldEndVNode, newEndVNode, container)\n            oldEndVNode = oldChildren[--oldEndIdx]\n            newEndVNode = newChildren[--newEndIdx]\n        //  ç¬¬3æ­¥ï¼š\t\n        } else if (oldStartVNode.key === newEndVNode.key) {\n            patch(oldStartVNode, newEndVNode, container)\n            insert(oldStartVNode.el, container, newEndVNode.el.nextSibling)\n            oldStartVNode = oldChildren[++oldStartIdx]\n            newEndVNode = newChildren[--newEndIdx]\n        //  ç¬¬4æ­¥ï¼š\n        } else if (oldEndVNode.key === newStartVNode.key) {\n            // æ­¥éª¤å››ï¼šoldEndVNode å’Œ newStartVNode æ¯”å¯¹\n            patch(oldEndVNode, newStartVNode, container)\n            insert(oldEndVNode.el, container, oldStartVNode.el)\n            oldEndVNode = oldChildren[--oldEndIdx]\n            newStartVNode = newChildren[++newStartIdx]\n        }else{\n            //********* éç†æƒ³æƒ…å†µä¸‹ *********\n        }\n    }\n}\n```\n\næ˜¯çš„ï¼ŒåŒç«¯ï¼Œ4 ä¸ªæŒ‡é’ˆï¼ŒæŒ‰ç…§ä¸€å®šè§„åˆ™ç§»åŠ¨ï¼Œä½†ä¸Šé¢ä»£ç ä¸­ `elseéƒ¨åˆ†` æ˜¯å¹²å•¥çš„ ï¼Ÿ çœ‹ä¸‹é¢å›¾ï¼š\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/d11a8399be49347401c33b5b4af09f78.png)\n\nå‰ 4 æ­¥éª¤éƒ½æ²¡æ³•å‘½ä¸­ï¼Œæ‰€ä»¥æ‰éœ€è¦`åœ¨ else é‡Œ`å¤„ç†ã€‚\n\n### 3.3. éç†æƒ³æƒ…å†µä¸‹åŒç«¯ç®—æ³•\n\nçœ‹æµç¨‹å›¾ï¼š\n[https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=169-371&t=i3ztBjIOmSVuaLfT-4](https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=169-371&t=i3ztBjIOmSVuaLfT-4)\néƒ¨åˆ†ä»£ç æˆªå›¾ï¼š\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/573bdf003191c59daf303c4704b95e47.png)\n\nä¸Šé¢ç¬¬ 5 æ­¥ï¼Œå¦‚æœæ‰¾ä¸åˆ°å¯ä»¥å¤ç”¨çš„èŠ‚ç‚¹å‘¢ï¼Ÿ è¯´æ˜éœ€è¦`æ·»åŠ èŠ‚ç‚¹`äº†ï¼Œè§ä¸‹é¢ï¼š\n\n### 3.4. æ–°å¢å…ƒç´ \n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/f2e1fd7b2e3813914e1bdf248ab2e122.png)\n[https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=169-503&t=i3ztBjIOmSVuaLfT-4](https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=169-503&t=i3ztBjIOmSVuaLfT-4)\n\n### 3.5. ç§»åŠ¨å…ƒç´ \n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/5bd7fe0a2f85f1d5f9332ef9f9a5bce9.png)\n\nè¯¦è§æµç¨‹å›¾ï¼š\n[https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=169-542&t=i3ztBjIOmSVuaLfT-4](https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=169-542&t=i3ztBjIOmSVuaLfT-4)\n\n### 3.6. æœ€åæ€»ç»“\n\n- é¡¾åæ€ä¹‰ï¼ŒåŒç«¯ Diff ç®—æ³•æŒ‡çš„æ˜¯ï¼Œåœ¨æ–°æ—§ä¸¤ç»„å­èŠ‚ç‚¹çš„å››ä¸ªç«¯ç‚¹ä¹‹é—´åˆ†åˆ«è¿›è¡Œæ¯”è¾ƒï¼Œ å¹¶è¯•å›¾æ‰¾åˆ°å¯å¤ç”¨çš„èŠ‚ç‚¹ã€‚\n- ç›¸è¾ƒäº`ç®€å• Diff ç®—æ³•`ï¼Œ`åŒç«¯Diff ç®—æ³•`çš„ä¼˜åŠ¿åœ¨äºï¼ŒåŒæ ·çš„æ›´æ–°åœºæ™¯ï¼Œæ‰§è¡Œçš„ DOM æ“ä½œæ›´å°‘ä¸€ç‚¹è€Œå·²ã€‚\n\n## 4. å¿«é€Ÿ Diff ç®—æ³• + æœ€é•¿é€’å¢å­åºåˆ—\n\nVue3 æ˜¯é€šè¿‡`åŒç«¯å¯¹æ¯”`+`æœ€é•¿é€’å¢å­åºåˆ—ç®—æ³•`å¾—å‡º**æœ€å°çš„æ›´æ–°æ¶ˆè€—**ã€‚ä¸‹é¢æˆ‘ä»¬å…ˆçœ‹çœ‹ `å¿«é€Ÿ Diff ç®—æ³•`\n\n### 4.1. ç›¸åŒçš„å‰ç½®å…ƒç´ å’Œåç½®å…ƒç´ \n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/c0b03bd8b5104dedc29b8d1ec9e8d825.png)\n\n### 4.2. æ·»åŠ çš„èŠ‚ç‚¹çš„æƒ…å†µ\n\n[https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=189-731&t=2Hh2yCqllM2zgzaD-4](https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=189-731&t=2Hh2yCqllM2zgzaD-4)\n\n### 4.3. åˆ é™¤èŠ‚ç‚¹çš„æƒ…å†µ\n\n[https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=189-695&t=2Hh2yCqllM2zgzaD-4](https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=189-695&t=2Hh2yCqllM2zgzaD-4)\n\n### 4.4. æ›´å¤æ‚çš„æƒ…å†µ\n\n[https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=189-731&t=2Hh2yCqllM2zgzaD-4](https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=189-731&t=2Hh2yCqllM2zgzaD-4)\n\n### 4.5. æœ€å\n\n`å¿«é€Ÿ Diff ç®—æ³•`åœ¨å®æµ‹ä¸­æ€§èƒ½æœ€ä¼˜ã€‚å®ƒå€Ÿé‰´äº†`æ–‡æœ¬ Diff ä¸­`çš„ `é¢„å¤„ç†æ€è·¯`ï¼Œ\n1. å…ˆå¤„ç†`æ–°æ—§ä¸¤ç»„å­èŠ‚ç‚¹`ä¸­`ç›¸åŒçš„å‰ç½®èŠ‚ç‚¹`å’Œ`ç›¸åŒçš„åç½®èŠ‚ç‚¹`ã€‚ \n2. å½“å‰ç½®èŠ‚ç‚¹å’Œåç½®èŠ‚ç‚¹å…¨éƒ¨å¤„ç†å®Œæ¯•åï¼Œå¦‚æœæ— æ³•ç®€å•åœ°é€šè¿‡æŒ‚è½½æ–°èŠ‚ç‚¹æˆ–è€…å¸è½½å·²ç»ä¸å­˜åœ¨çš„èŠ‚ç‚¹æ¥å®Œæˆæ›´æ–°ï¼Œåˆ™éœ€è¦`æ ¹æ®èŠ‚ç‚¹çš„ç´¢å¼•å…³ç³»ï¼Œæ„é€ å‡ºä¸€ä¸ªæœ€é•¿é€’å¢å­åºåˆ—`ã€‚\n\t- `æœ€é•¿é€’å¢å­åºåˆ—æ‰€æŒ‡å‘çš„èŠ‚ç‚¹`å³ä¸º`ä¸éœ€è¦ç§»åŠ¨çš„èŠ‚ç‚¹`ã€‚\n","d6757822f66e55c483673891ac1025cc":"\n# Vue3 ç»„ä»¶çš„å®ç°åŸç†\n\n\n`#vue` `#vue3` `#2023/06/10` `#vueåŸç†`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ€»ç»“ \n\n### 1.1. æ‘˜è¦\n\næœ¬æ–‡è¯¦ç»†ä»‹ç»äº†Vue3ç»„ä»¶çš„å®ç°åŸç†ï¼ŒåŒ…æ‹¬æ¸²æŸ“å™¨ã€ç»„ä»¶å’Œè™šæ‹ŸDOMä¹‹é—´çš„å…³ç³»ï¼Œç»„ä»¶çŠ¶æ€çš„ä¿å­˜å’Œæ›´æ–°æœºåˆ¶ï¼Œç»„ä»¶å®ä¾‹å’Œç”Ÿå‘½å‘¨æœŸçš„å®ç°ï¼Œpropsçš„å¤„ç†ï¼Œsetupå‡½æ•°çš„ä½œç”¨ï¼Œç»„ä»¶äº‹ä»¶å’Œemitçš„å®ç°ï¼Œæ’æ§½çš„å·¥ä½œåŸç†ï¼Œä»¥åŠç”Ÿå‘½å‘¨æœŸçš„æ³¨å†Œæ–¹æ³•ã€‚æ–‡ç« æ·±å…¥æ¢è®¨äº†Vue3ç»„ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒæ¦‚å¿µå’Œå†…éƒ¨æœºåˆ¶ï¼Œä¸ºç†è§£Vue3çš„å·¥ä½œåŸç†æä¾›äº†å…¨é¢çš„è§†è§’ã€‚\n\n### 1.2. å…³é”®ç‚¹\n\n- æ¸²æŸ“å™¨æ ¹æ® vdom ç±»å‹åˆ¤æ–­æ˜¯å¦ä¸ºç»„ä»¶ï¼Œå¹¶ä½¿ç”¨ mountComponent æˆ– patchComponent è¿›è¡ŒæŒ‚è½½å’Œæ›´æ–°ã€‚\n- ç»„ä»¶çŠ¶æ€ï¼šé€šè¿‡`data()`ä¿å­˜ï¼Œå¹¶ä½¿ç”¨reactiveä½¿å…¶æˆä¸ºå“åº”å¼æ•°æ®ã€‚\n- ç»„ä»¶å®ä¾‹ï¼šæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå­˜å‚¨ç»„ä»¶è¿è¡Œè¿‡ç¨‹çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬çŠ¶æ€ã€propsã€ç”Ÿå‘½å‘¨æœŸç­‰ã€‚\n- propsæœºåˆ¶ï¼šéœ€è¦ç¼–å†™å¤§é‡è¾¹ç•Œä»£ç ï¼Œå¹¶é€šè¿‡æ¸²æŸ“ä¸Šä¸‹æ–‡å¯¹è±¡æš´éœ²æ•°æ®ã€‚\n- setupå‡½æ•°ï¼šä¸ºç»„åˆå¼APIè®¾è®¡ï¼Œå¯è¿”å›**æ¸²æŸ“å‡½æ•°**æˆ–**æ•°æ®å¯¹è±¡**ã€‚\n- emit å‡½æ•°ï¼šç”¨äºå‘å°„ç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶ï¼Œv-on æŒ‡ä»¤ç»‘å®šçš„äº‹ä»¶ä¼šå­˜å‚¨åœ¨propså¯¹è±¡ä¸­ã€‚\n- æ’æ§½å†…å®¹ï¼šè¢«ç¼–è¯‘ä¸ºæ’æ§½å‡½æ•°ï¼Œ`<slot>`æ ‡ç­¾è¢«ç¼–è¯‘ä¸ºæ’æ§½å‡½æ•°çš„è°ƒç”¨ã€‚\n- ç”Ÿå‘½å‘¨æœŸå‡½æ•°é€šè¿‡ `onMounted` ç­‰æ–¹æ³•æ³¨å†Œï¼Œå­˜å‚¨åœ¨ç»„ä»¶å®ä¾‹çš„ç›¸åº”æ•°ç»„ä¸­ã€‚\n\n### 1.3. å¦‚ä½•ä½¿ç”¨è™šæ‹ŸèŠ‚ç‚¹æ¥æè¿°ç»„ä»¶\n\n- ä½¿ç”¨è™šæ‹ŸèŠ‚ç‚¹çš„ `vnode.type` å±æ€§æ¥å­˜å‚¨`ç»„ä»¶å¯¹è±¡ç±»å‹`ï¼Œæ¸²æŸ“å™¨æ ¹æ®è™šæ‹ŸèŠ‚ç‚¹çš„è¯¥å±æ€§çš„ç±»å‹æ¥åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯ç»„ä»¶ã€‚\n\t- å¦‚æœæ˜¯ç»„ä»¶ï¼Œåˆ™æ¸²æŸ“å™¨ä¼šä½¿ç”¨ `mountComponent` å’Œ `patchComponent` æ¥å®Œæˆç»„ä»¶çš„æŒ‚è½½å’Œæ›´æ–°ã€‚\n\n### 1.4. ç»„ä»¶çš„è‡ªæ›´æ–°\n\n- åœ¨ç»„ä»¶æŒ‚è½½é˜¶æ®µï¼Œä¼šä¸ºç»„ä»¶åˆ›å»ºä¸€ä¸ª`ç”¨äºæ¸²æŸ“å…¶å†…å®¹çš„å‰¯ä½œç”¨å‡½æ•°`ã€‚\n\t- è¯¥å‰¯ä½œç”¨å‡½æ•°ä¼šä¸ç»„ä»¶è‡ªèº«çš„å“åº”å¼æ•°æ®å»ºç«‹å“åº”è”ç³»ã€‚\n\t- å½“ç»„ä»¶è‡ªèº«çš„å“åº”å¼æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘æ¸²æŸ“å‰¯ä½œç”¨å‡½æ•°é‡æ–°æ‰§è¡Œï¼Œå³`é‡æ–°æ¸²æŸ“`ã€‚\n- ä½†ç”±äºé»˜è®¤æƒ…å†µä¸‹`é‡æ–°æ¸²æŸ“`æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œè¿™å¯¼è‡´æ— æ³•å¯¹ä»»åŠ¡å»é‡ï¼Œå› æ­¤æˆ‘ä»¬åœ¨åˆ›å»ºæ¸²æŸ“å‰¯ä½œç”¨å‡½æ•°æ—¶ï¼ŒæŒ‡å®šäº†`è‡ªå®šä¹‰çš„è°ƒåº¦å™¨`ã€‚\n\t- è¯¥`è°ƒåº¦å™¨`çš„ä½œç”¨æ˜¯ï¼Œå½“ç»„ä»¶è‡ªèº«çš„å“åº”å¼æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°†æ¸²æŸ“å‰¯ä½œç”¨å‡½æ•°ç¼“å†²åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚\n\t- æœ‰äº†ç¼“å†²é˜Ÿåˆ—ï¼Œæˆ‘ä»¬å³å¯å®ç°å¯¹æ¸²æŸ“ä»»åŠ¡çš„å»é‡ï¼Œä»è€Œé¿å…æ— ç”¨çš„é‡æ–°æ¸²æŸ“æ‰€å¯¼è‡´çš„é¢å¤–æ€§èƒ½å¼€é”€ã€‚\n\n### 1.5. `ç»„ä»¶å®ä¾‹`\n\nå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†ç»„ä»¶è¿è¡Œè¿‡ç¨‹ä¸­çš„çŠ¶æ€ï¼Œä¾‹å¦‚ç»„ä»¶æ˜¯å¦æŒ‚è½½ã€ç»„ä»¶è‡ªèº«çš„å“åº”å¼æ•°æ®ï¼Œä»¥åŠç»„ä»¶æ‰€æ¸²æŸ“çš„å†…å®¹(å³ subtree)ç­‰ã€‚\n\næœ‰äº†ç»„ä»¶å®ä¾‹åï¼Œåœ¨æ¸²æŸ“å‰¯ä½œç”¨å‡½æ•°å†…ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®ç»„ä»¶å®ä¾‹ä¸Šçš„çŠ¶æ€æ ‡è¯†ï¼Œæ¥å†³å®šåº”è¯¥è¿›è¡Œå…¨æ–°çš„æŒ‚è½½ï¼Œè¿˜æ˜¯åº”è¯¥æ‰“è¡¥ä¸ã€‚\n\n### 1.6. ç»„ä»¶çš„ props ä¸ç»„ä»¶çš„è¢«åŠ¨æ›´æ–°\n\n- å‰¯ä½œç”¨è‡ªæ›´æ–°æ‰€å¼•èµ·çš„å­ç»„ä»¶æ›´æ–°å«ä½œå­ç»„ä»¶çš„è¢«åŠ¨æ›´æ–°ã€‚\n\n### 1.7. æ¸²æŸ“ä¸Šä¸‹æ–‡(renderContext)\n\nå®ƒå®é™…ä¸Šæ˜¯ç»„ä»¶å®ä¾‹çš„ä»£ç†å¯¹è±¡ã€‚åœ¨æ¸²æŸ“å‡½æ•°å†…è®¿é—®ç»„ä»¶å®ä¾‹æ‰€æš´éœ²çš„æ•°æ®éƒ½æ˜¯é€šè¿‡è¯¥ä»£ç†å¯¹è±¡å®ç°çš„ã€‚\n\n### 1.8. setup å‡½æ•°\n\n è¯¥å‡½æ•°æ˜¯ä¸ºäº†ç»„åˆå¼ API è€Œç”Ÿ çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦é¿å…å°†å…¶ä¸ Vue.js 2 ä¸­çš„â€œä¼ ç»Ÿâ€ç»„ä»¶é€‰é¡¹æ··åˆä½¿ç”¨ã€‚\n  setup å‡½æ•°çš„è¿”å›å€¼å¯ä»¥æ˜¯ä¸¤ç§ç±»å‹ï¼Œ\n  - å¦‚æœè¿”å›å‡½æ•°ï¼Œåˆ™å°†è¯¥å‡½æ•°ä½œä¸ºç»„ä»¶çš„æ¸²æŸ“å‡½æ•°;\n  - å¦‚æœè¿”å›æ•°æ®å¯¹è±¡ï¼Œåˆ™å°†è¯¥å¯¹è±¡æš´éœ²åˆ°æ¸²æŸ“ä¸Šä¸‹æ–‡ä¸­ã€‚\n### 1.9. emit å‡½æ•°\n\n- `emit å‡½æ•°`åŒ…å«åœ¨ `setupContext å¯¹è±¡`ä¸­ï¼Œå¯ä»¥é€šè¿‡ `emit å‡½æ•°`å‘å°„ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶ã€‚\n- é€šè¿‡ `v-on æŒ‡ä»¤`ä¸ºç»„ä»¶ç»‘å®šçš„äº‹ä»¶åœ¨ç»è¿‡`ç¼–è¯‘`åï¼Œä¼šä»¥ `onXxx` çš„å½¢å¼å­˜å‚¨åˆ° `props å¯¹è±¡`ä¸­ã€‚\n- å½“ emit å‡½æ•°æ‰§è¡Œ æ—¶ï¼Œä¼šåœ¨ props å¯¹è±¡ä¸­å¯»æ‰¾å¯¹åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°å¹¶æ‰§è¡Œå®ƒã€‚\n\n### 1.10. ç»„ä»¶çš„æ’æ§½\n\n- å®ƒå€Ÿé‰´äº† Web Component ä¸­ `<slot>` æ ‡ç­¾çš„æ¦‚å¿µã€‚\n- æ’æ§½å†…å®¹ä¼šè¢«`ç¼–è¯‘`ä¸ºæ’æ§½å‡½æ•°ï¼Œæ’æ§½å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯å‘æ§½ä½å¡«å……çš„å†…å®¹ã€‚\n- `<slot>` æ ‡ç­¾åˆ™ä¼šè¢«ç¼–è¯‘ä¸º`æ’æ§½å‡½æ•°`çš„è°ƒç”¨ï¼Œé€šè¿‡æ‰§è¡Œå¯¹åº”çš„æ’æ§½å‡½æ•°ï¼Œå¾—åˆ°å¤–éƒ¨å‘æ§½ä½å¡«å……çš„å†…å®¹(å³è™šæ‹Ÿ DOM)ï¼Œæœ€åå°†è¯¥å†…å®¹æ¸²æŸ“åˆ°æ§½ä½ä¸­ã€‚\n### 1.11. ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°\n\n- æ¯”å¦‚ onMounted ï¼Œé€šè¿‡ onMounted æ³¨å†Œçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¼šè¢«æ³¨å†Œåˆ°å½“å‰ç»„ä»¶å®ä¾‹çš„ `instance.mounted æ•°ç»„`ä¸­ã€‚\n- ä¸ºäº†ç»´æŠ¤å½“å‰æ­£åœ¨åˆå§‹åŒ–çš„ç»„ä»¶å®ä¾‹ï¼Œæˆ‘ä»¬å®šä¹‰äº†å…¨å±€å˜é‡ `currentInstance`ï¼Œä»¥åŠç”¨æ¥è®¾ç½®è¯¥å˜é‡çš„ `setCurrentInstance` å‡½æ•°ã€‚\n\n## 2. æ¸²æŸ“å™¨ã€ç»„ä»¶ä¸ vdom ä¹‹é—´çš„å…³ç³»\n\nå‰æ–‡ [11. Vue3 çš„æ¸²æŸ“å™¨åŸç†](/post/1d4b6077acf55710b1a41f7b8e299b2f.html) å®ç°äº†å¯¹å•ä¸ª `vdom` çš„æ¸²æŸ“ï¼Œæ¯”å¦‚å¯¹ä¸‹é¢ `vdom` çš„æ¸²æŸ“ï¼š\n\n```js\nconst Fragment = Symbol()\nconst newVnode = {\n  type: 'div',\n  children: [\n    {\n      type: Fragment,\n      children: [\n        { type: 'p', children: 'text 1' },\n        { type: 'p', children: 'text 2' },\n        { type: 'p', children: 'text 3' }\n      ]\n    },\n    { type: 'section', children: 'åˆ†å‰²çº¿' }\n  ]\n}\n```\n\nä½†å®é™…é¡µé¢ï¼Œä¼šåŒ…æ‹¬å¾ˆå¤š `vdom` ç”šè‡³æ˜¯å„ç§åµŒå¥—çš„ `vdom`\n\né‚£ä¹ˆï¼Œ**å¦‚ä½•ä½¿ç”¨** `vdom` **æ¥æè¿°é¡µé¢ï¼Œæè¿° UI å‘¢ï¼Ÿ**\n\nè¿™é‡Œç›´æ¥ç»™å‡ºç­”æ¡ˆï¼šå¦‚ä¸‹ç»“æ„\n\n```js hl:2\nconst C1 = {\n    name: 'C1',\n    type: 'C1',\n    render() {\n        return {\n            type: 'div',\n            children: [\n                { type: 'p', children: 'text 1' },\n                { type: 'p', children: 'text 2' },\n                { type: 'p', children: 'text 3' }\n            ]\n        }\n    }\n}\n```\n\nä¸¤ä¸ªè¦ç‚¹ï¼š\n\n- â‘   åŒ…å« `render` å‡½æ•°\n- â‘¡  `return` ä¸€ä¸ª `vnode`\n\nä¸‹å›¾å±•ç¤ºäº† `æ¸²æŸ“å™¨ã€ç»„ä»¶ ã€ vnode çš„å…³ç³»` , **å¾ˆé‡è¦ï¼Œæ‰“å¼€çœ‹çœ‹**\n- [figjam](https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=201-996&t=x2AAJuGlw9iHBGmM-4)\n\n- æ€»ç»“ä¸‹å°±æ˜¯ï¼Œæ¸²æŸ“å™¨ä¼šæ ¹æ® `vdom` çš„ç±»å‹\n\t- æ˜¯å­—ç¬¦ä¸²\n\t- æ˜¯æ–‡æœ¬ç±»å‹ï¼ˆSymbolï¼‰\n\t- æ˜¯ Fragment\n\t- æ˜¯å¯¹è±¡æˆ–è€…å‡½æ•°\n\t\t- æ¥åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯å¦æ˜¯`ç»„ä»¶`ï¼Œ\n\t\t\t- å¦‚æœæ˜¯ï¼Œåˆ™ä¼šç»§ç»­é€’å½’ä½¿ç”¨ `mountComponent` æˆ–è€… `patchComponent`æ¥å®Œæˆç»„ä»¶çš„æŒ‚è½½å’Œæ›´æ–°\n\t\t\t\t- æ¯”å¦‚ ï¼š\n\t\t\t\t\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241104.png)\n\t\t\t\t- æ¯”å¦‚ï¼š\n\t\t\t\t\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-1.png)\n- éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š\n\n```js\nif (typeof type === 'string') {\n    if (!n1) {\n        mountElement(n2, container, anchor)\n    } else {\n        patchElement(n1, n2)\n    }\n} else if (type === Text) {\n    if (!n1) {\n        const el = n2.el = createText(n2.children)\n        insert(el, container)\n    } else {\n        const el = n2.el = n1.el\n        if (n2.children !== n1.children) {\n            setText(el, n2.children)\n        }\n    }\n} else if (type === Fragment) {\n    if (!n1) {\n        n2.children.forEach(c => patch(null, c, container))\n    } else {\n        patchChildren(n1, n2, container)\n    }\n} else if (typeof type === 'object' || typeof type === 'function') {\n    // æŒ‚è½½ç»„ä»¶\n    if (!n1) {\n        mountComponent(n2, container, anchor)\n    } else { // æ›´æ–°ç»„ä»¶\n        patchComponent(n1, n2, anchor)\n    }\n}\n```\n\næŒ‚è½½ä¸æ›´æ–°ç»„ä»¶ï¼Œå¯¹åº”ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼Œå¦‚ä¸‹å›¾\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-2.png)\n\n## 3. å¦‚ä½•ä¿å­˜ç»„ä»¶çŠ¶æ€ï¼Œä»¥åŠçŠ¶æ€æ”¹å˜äº†åŒæ­¥æ›´æ–°ç»„ä»¶\n\nå¦‚æœä¿å­˜ç»„ä»¶çŠ¶æ€å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ `data()` ï¼Œå¹¶ä¸”éœ€è¦è®© `data æ•°æ®`æ˜¯å“åº”å¼çš„ï¼Œæ‰€ä»¥ä»£ç åº”è¯¥å¦‚ä¸‹\n\n```js\nconst state = data ? reactive(data()) : null\n```\n\næ‰€ä»¥ï¼Œæ¯æ¬¡æ›´æ–° data ï¼Œä¼šé‡æ–°æ¸²æŸ“\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-3.png)\n\nä½†æ˜¯æµè§ˆå™¨æ¸²æŸ“æ˜¯`åŒæ­¥ä»»åŠ¡`ï¼Œæ‰€ä»¥éœ€è¦æœ‰ä¸ª**è°ƒåº¦å™¨**æ¥è°ƒåº¦ï¼Œå®ƒé€šè¿‡`promise` å®ç°äº†ä¸€ä¸ª`å¾®ä»»åŠ¡é˜Ÿåˆ—`ï¼Œé¿å…é‡å¤æ¸²æŸ“ï¼Œå»é‡ä»»åŠ¡é˜Ÿåˆ—ç­‰ã€‚\n\nå…³äºè°ƒåº¦å™¨å¾®ä»»åŠ¡é˜Ÿåˆ—çš„å®ç°ï¼Œæ›´å¤šå‚è€ƒ [11. å‰ç«¯/2. å‰ç«¯æ¶æ„ç¯‡/3. Vue ç¯‡/2. Vue åŸç†ç¯‡/3. Vue3 çš„å“åº”å¼çš„ç³»ç»Ÿè®¾è®¡åŸç†|3. Vue3 çš„å“åº”å¼çš„ç³»ç»Ÿè®¾è®¡åŸç†](/post/d6757822f66e55c483673891ac1025cc.html#11-å‰ç«¯/2-å‰ç«¯æ¶æ„ç¯‡/3-Vue-ç¯‡/2-Vue-åŸç†ç¯‡/3-Vue3-çš„å“åº”å¼çš„ç³»ç»Ÿè®¾è®¡åŸç†|3-Vue3-çš„å“åº”å¼çš„ç³»ç»Ÿè®¾è®¡åŸç†)\n\néƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼šæ³¨æ„ä¸‹é¢çš„ `scheduler`\n\n```js\n const state = data ? reactive(data()) : null\n effect(() => {\n    const subTree = render.call(renderContext, renderContext)\n}, {\n    scheduler: queueJob\n})\n```\n\nqueueJob çš„ä»£ç å¦‚ä¸‹ï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-4.png)\n\n## 4. ç»„ä»¶å®ä¾‹ä¸ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ\n\n- **ç»„ä»¶å®ä¾‹**ï¼Œæœ¬è´¨å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ**å­˜å‚¨ç€ç»„ä»¶è¿è¡Œè¿‡ç¨‹çš„æ‰€æœ‰ä¿¡æ¯**ï¼Œæ¯”å¦‚\n\t- ç»„ä»¶çŠ¶æ€\n\t- æ˜¯å¦å¸è½½\n\t- ç»„ä»¶çš„å­æ ‘\n\t- æ’æ§½\n\t- ç”Ÿå‘½å‘¨æœŸç­‰\n- å¦‚ä¸‹ä»£ç ï¼š\n\n```js\nconst instance = {\n        state, //  ç»„ä»¶è‡ªèº«çš„çŠ¶æ€æ•°æ®ï¼Œå³ dataã€‚\n        props: shallowReactive(props),\n        isMounted: false, //  ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨æ¥è¡¨ç¤ºç»„ä»¶æ˜¯å¦è¢«æŒ‚è½½\n        subTree: null,\n        slots,\n        mounted: [] // éƒ½é’©å­å‡½æ•°æ•°ç»„\n}\n```\n\nå„ç±»ç”Ÿå‘½å‘¨æœŸï¼Œå°±åœ¨å…·ä½“ä½ç½®ä¸Šæ·»åŠ å³å¯ï¼Œå¦‚ä¸‹ï¼š\n\n![|512](https://od-1310531898.cos.ap-beijing.myqcloud.com/202306101223326.png)\n\nä¸€ä¸ªç»„ä»¶å¯èƒ½å­˜åœ¨å¤šä¸ªåŒç±»å‹çš„ç»„ä»¶ï¼Œæ¯”å¦‚ `mixin` è¿›æ¥çš„ç»„ä»¶ï¼Œè¿™æ—¶å€™å°±éœ€è¦æ•°ç»„äº†ã€‚ä½†æ ¸å¿ƒåŸç†ä¸å˜\n\n> æˆ‘ä»¬é€šå¸¸æŠŠç”Ÿå‘½å‘¨æœŸé’©å­åºåˆ—åŒ–ä¸€ä¸ªæ•°ç»„\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-5.png)\n\n## 5. props ä¸ç»„ä»¶çš„è¢«åŠ¨æ›´æ–°\n\n- `å‰¯ä½œç”¨è‡ªæ›´æ–°`æ‰€å¼•èµ·çš„å­ç»„ä»¶æ›´æ–°å«ä½œ`å­ç»„ä»¶çš„è¢«åŠ¨æ›´æ–°`ã€‚\n- æˆ‘ä»¬éœ€è¦æ£€æŸ¥æ˜¯å¦éœ€è¦çœŸçš„æ›´æ–°\n\t- æ¯”å¦‚ `props` å¦‚æœæ ¹æœ¬å°±æ²¡å˜ï¼Ÿ\n\t- å¦‚æœéœ€è¦æ›´æ–°ï¼Œéœ€è¦åŒæ­¥æ›´æ–°å­ç»„ä»¶çš„ `props` ã€`slots` ç­‰å†…å®¹\n\t- å…¶å®è¦ **å®Œå–„ vue ä¸­çš„ props æœºåˆ¶ï¼Œéœ€è¦ç¼–å†™å¤§é‡çš„è¾¹ç•Œä»£ç **\n\nç”±äº props æ•°æ®ä¸ç»„ä»¶è‡ªèº«çš„çŠ¶æ€æ•°æ®éƒ½éœ€è¦æš´éœ²åˆ°`æ¸²æŸ“å‡½æ•°`ä¸­ï¼Œå¹¶ä½¿å¾—æ¸²æŸ“å‡½æ•°èƒ½å¤Ÿé€šè¿‡ this è®¿é—®å®ƒä»¬ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°è£…ä¸€ä¸ª`æ¸²æŸ“ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆrenderContextï¼‰`ï¼Œ å®ƒå®é™…ä¸Šæ˜¯ç»„ä»¶å®ä¾‹çš„ä»£ç†å¯¹è±¡ã€‚åœ¨æ¸²æŸ“å‡½æ•°å†…è®¿é—®ç»„ä»¶å®ä¾‹æ‰€æš´éœ²çš„æ•°æ®éƒ½æ˜¯é€šè¿‡è¯¥ä»£ç†å¯¹è±¡å®ç°çš„ã€‚\n\n`renderContext` å®ƒçš„æ„ä¹‰åœ¨äºæ‹¦æˆªæ•°æ®çŠ¶æ€çš„è¯»å–å’Œè®¾ç½®æ“ä½œï¼Œæ¯å½“åœ¨æ¸²æŸ“å‡½æ•°æˆ–ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­é€šè¿‡ this æ¥è¯»å–æ•°æ®æ—¶ï¼Œéƒ½ ä¼šä¼˜å…ˆä»ç»„ä»¶çš„è‡ªèº«çŠ¶æ€ä¸­è¯»å–ï¼Œå¦‚æœç»„ä»¶æœ¬èº«å¹¶æ²¡æœ‰å¯¹åº”çš„æ•°æ®ï¼Œ åˆ™å†ä» props æ•°æ®ä¸­è¯»å–ã€‚æœ€åæˆ‘ä»¬å°†æ¸²æŸ“ä¸Šä¸‹æ–‡ä½œä¸ºæ¸²æŸ“å‡½æ•°ä»¥åŠ ç”Ÿå‘½å‘¨æœŸé’©å­çš„ this å€¼å³å¯\n\nvue ä¸­ï¼Œæ²¡æœ‰åœ¨ `props é€‰é¡¹`ä¸­çš„ `props æ•°æ®`éƒ½å°†å­˜å‚¨åˆ° `attrs` å¯¹è±¡ä¸­\n\nä¸‹é¢æ˜¯  `patchComponent` çš„é€»è¾‘\n\n```javascript hl:4,6\nfunction patchComponent(n1, n2, anchor) {\n\tconst instance = (n2.component = n1.component);\n\tconst { props } = instance;\n\tif (hasPropsChanged(n1.props, n2.props)) {\n\t\t// è°ƒç”¨ resolveProps å‡½æ•°é‡æ–°è·å– props æ•°æ®\n\t\tconst [nextProps, nextAttrs] = resolveProps(\n\t\t\tn2.type.props,\n\t\t\tn2.props,\n\t\t);\n\t\t// æ›´æ–° props\n\t\tfor (const k in nextProps) {\n\t\t\tprops[k] = nextProps[k];\n\t\t}\n\t\t// åˆ é™¤ä¸å­˜åœ¨çš„ props\n\t\tfor (const k in props) {\n\t\t\tif (!(k in nextProps)) delete props[k];\n\t\t}\n\t}\n}\n\nfunction hasPropsChanged(prevProps, nextProps) {\n\tconst nextKeys = Object.keys(nextProps);\n\tif (nextKeys.length !== Object.keys(prevProps).length) {\n\t\treturn true;\n\t}\n\tfor (let i = 0; i < nextKeys.length; i++) {\n\t\tconst key = nextKeys[i];\n\t\treturn nextProps[key] !== prevProps[key];\n\t}\n\treturn false;\n}\n\nfunction resolveProps(options, propsData) {\n\tconst props = {};\n\tconst attrs = {};\n\tfor (const key in propsData) {\n\t\tif ((options && key in options) || key.startsWith(\"on\")) {\n\t\t\tprops[key] = propsData[key];\n\t\t} else {\n\t\t\tattrs[key] = propsData[key];\n\t\t}\n\t}\n\n\treturn [props, attrs];\n}\n```\n\n## 6. setup å‡½æ•°çš„ä½œç”¨ ä¸ å®ç°\n\n`setup` å‡½æ•°ï¼Œå®ƒåªä¼šåœ¨æŒ‚è½½æ—¶`æ‰§è¡Œä¸€æ¬¡`ï¼Œè¯¥å‡½æ•°æ˜¯ä¸ºäº†`ç»„åˆå¼ API` è€Œç”Ÿçš„ï¼Œ==æ‰€ä»¥æˆ‘ä»¬è¦é¿å…å°†å…¶ä¸ `Vue.js 2 ä¸­çš„â€œä¼ ç»Ÿâ€ç»„ä»¶é€‰é¡¹ï¼ˆå¦‚ methods watch dataï¼‰` æ··åˆä½¿ç”¨ã€‚==\n\n`setup` å‡½æ•°çš„è¿”å›å€¼å¯ä»¥æ˜¯**ä¸¤ç§ç±»å‹**\n- å¦‚æœè¿”å›`å‡½æ•°`ï¼Œåˆ™**å°†è¯¥å‡½æ•°ä½œä¸ºç»„ä»¶çš„æ¸²æŸ“å‡½æ•°**ï¼›\n- å¦‚æœè¿”å›`æ•°æ®å¯¹è±¡`ï¼Œåˆ™å°†è¯¥å¯¹è±¡æš´éœ²åˆ°æ¸²æŸ“ä¸Šä¸‹æ–‡ä¸­ï¼Œæš´éœ²ç»™æ¨¡æ¿ä½¿ç”¨ã€‚\n\n```js\nconst InnerComp = {\n    name: 'InnerComp',\n    /**\n     * expose: æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å±æ€§\n     * */\n    setup(props, {emit, slots,attrs,expose}) {\n\t\t// setupContext ä¸­åŒ…å«ä¸ç»„ä»¶æ¥å£ç›¸å…³çš„é‡è¦æ•°æ®\n\t\t// const { slots, emit, attrs, expose } = setupContext\n        \n        const count = ref(0);\n        // è¿”å›ä¸€ä¸ªã€æ•°æ®å¯¹è±¡ã€‘\n        return {\n            count,\n        }\n        // è¿”å›ä¸€ä¸ªã€æ¸²æŸ“å‡½æ•°ã€‘\n        return () => ({\n            type: 'span',\n            children: 'inner'\n        })\n    }\n}\n```\n\n## 7. ç»„ä»¶äº‹ä»¶ä¸ emit\n\n- emit å‡½æ•°åŒ…å«åœ¨ `setupContext å¯¹è±¡`ä¸­ï¼Œå¯ä»¥é€šè¿‡ `emit å‡½æ•°` å‘å°„ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶ã€‚\n- é€šè¿‡ `v-on` æŒ‡ä»¤ä¸ºç»„ä»¶ç»‘å®šçš„äº‹ä»¶åœ¨ç»è¿‡`ç¼–è¯‘`åï¼Œä¼šä»¥ `onXxx` çš„å½¢å¼å­˜å‚¨åˆ° `props å¯¹è±¡`ä¸­ã€‚\n- å½“ `emit` å‡½æ•°æ‰§è¡Œæ—¶ï¼Œä¼šåœ¨ **props å¯¹è±¡ä¸­å¯»æ‰¾å¯¹åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°**å¹¶æ‰§è¡Œå®ƒã€‚\n\n```javascript hl:3\nfunction emit(event, ...payload) {\n\t\tconst eventName = `on${event[0].toUpperCase() + event.slice(1)}`;\n\t\t// ä»å½“å‰ç»„ä»¶å®ä¾‹ä¸Šè·å–äº‹ä»¶å¤„ç†å‡½æ•°\n\t\tconst handler = instance.props[eventName];\n\t\tif (handler) {\n\t\t\thandler(...payload);\n\t\t} else {\n\t\t\tconsole.error(\"äº‹ä»¶ä¸å­˜åœ¨\");\n\t\t}\n\t}\n```\n\n## 8. æ’æ§½ slot\n\nå®ƒå€Ÿé‰´äº† Web Component ä¸­ `<slot> æ ‡ç­¾`çš„æ¦‚å¿µã€‚\n- **æ’æ§½å†…å®¹ä¼šè¢«ç¼–è¯‘ä¸ºæ’æ§½å‡½æ•°ï¼Œæ’æ§½å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯å‘æ§½ä½å¡«å……çš„å†…å®¹**ã€‚\n- `<slot>` æ ‡ç­¾åˆ™ä¼šè¢«ç¼–è¯‘ä¸ºæ’æ§½å‡½æ•°çš„è°ƒç”¨ï¼Œé€šè¿‡æ‰§è¡Œå¯¹åº”çš„**æ’æ§½å‡½æ•°**ï¼Œå¾—åˆ°å¤–éƒ¨å‘æ§½ä½å¡«å……çš„å†…å®¹ï¼ˆå³è™šæ‹Ÿ DOMï¼‰ï¼Œæœ€åå°†è¯¥å†…å®¹æ¸²æŸ“åˆ°`æ§½ä½`ä¸­ã€‚\n\næˆ‘ä»¬ä»¥ `MyComponent` ç»„ä»¶ä¸ºä¾‹ï¼Œå®ƒçš„æ¨¡æ¿å¦‚ä¸‹ï¼š\n\n![|376](https://od-1310531898.cos.ap-beijing.myqcloud.com/202306101327730.png)\n\nä¸Šé¢çš„ä»£ç ä¼š**ç¼–è¯‘**æˆå¦‚ä¸‹ï¼š\n\n![|328](https://od-1310531898.cos.ap-beijing.myqcloud.com/202306101329712.png)\n\nå…·ä½“ä½¿ç”¨ `MyComponent` ç»„ä»¶\n\n![|288](https://od-1310531898.cos.ap-beijing.myqcloud.com/202306101327662.png)\n\nä¸Šé¢çš„æ¨¡æ¿ï¼Œä¼šç¼–è¯‘æˆå¦‚ä¸‹`æ¸²æŸ“å‡½æ•°`ï¼š\n\n![|512](https://od-1310531898.cos.ap-beijing.myqcloud.com/202306101328116.png)\n\næ¯”å¦‚  `this.$slots.header()`  ï¼Œåœ¨ renderContext ä»£ç†å¯¹è±¡ä¸­è·å–ï¼Œå¦‚ä¸‹ï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-6.png)\n\n**æ’æ§½çš„å®ç°æ˜¯ä¸æ˜¯å’Œ React render props çš„æ¦‚å¿µå¾ˆåƒï¼Ÿ**ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![|464](https://od-1310531898.cos.ap-beijing.myqcloud.com/202306101333060.png)\n\n## 9. æ³¨å†Œç”Ÿå‘½å‘¨æœŸ\n\nå…ˆçœ‹ä»£ç ï¼Œä¸‹é¢æ³¨å†Œä¸¤ä¸ª `onMounted` ï¼Œå®ƒä¼šè¢«æ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚\n\n![|424](https://od-1310531898.cos.ap-beijing.myqcloud.com/202306101337074.png)\n\n- é€šè¿‡ `onMounted` æ³¨å†Œçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¼šè¢«æ³¨å†Œåˆ°**å½“å‰ç»„ä»¶å®ä¾‹**çš„**instance.mounted æ•°ç»„**ä¸­ã€‚\n- ä¸ºäº†ç»´æŠ¤å½“å‰æ­£åœ¨åˆå§‹åŒ–çš„**ç»„ä»¶å®ä¾‹**ï¼Œæˆ‘ä»¬å®šä¹‰äº†`å…¨å±€å˜é‡currentinstance`ï¼Œä»¥åŠç”¨æ¥è®¾ç½®è¯¥å˜é‡çš„ `setCurrentInstance` å‡½æ•°ã€‚\n- å…¶ä»–ç”Ÿå‘½å‘¨æœŸåŒç†ã€‚\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-7.png)\n\n### 9.1. å¦‚ä½• push çš„\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-10.png)\n\n### 9.2. å¦‚ä½•æ‰§è¡Œçš„\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-9.png)\n\n## 10. æœ€å\n\nä¸€äº›å…·ä½“ä»£ç å®ç°ç»†èŠ‚ï¼Œæ²¡æœ‰å¤ªæŠ ï¼ŒçŸ¥é“å¤§è‡´çš„åŸç†å³å¯ï¼ŒçœŸæœ‰åº”ç”¨åœºæ™¯å†ä»”ç»†ç ”ç©¶ä¸€ä¸‹å…·ä½“ä»£ç å®ç°ç»†èŠ‚ã€‚\n\n## 11. å‚è€ƒ\n\n- ã€ŠVue è®¾è®¡ä¸å®ç°ã€‹","1fc960b4c1155170a35fe29830468223":"\n# å¼‚æ­¥ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶çš„å®ç°åŸç†\n\n`#vue` `#2023/06/20` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å¼‚æ­¥ç»„ä»¶çš„æ¦‚å¿µ \n\nå³ï¼Œä»¥å¼‚æ­¥çš„æ–¹å¼åŠ è½½å¹¶æ¸²æŸ“ä¸€ä¸ªç»„ä»¶ã€‚ è¿™åœ¨`é¡µé¢æ€§èƒ½` ã€ `ä»£ç åˆ†å‰²`ã€`æœåŠ¡ç«¯ä¸‹å‘ç»„ä»¶`ç­‰åœºæ™¯ä¸­å°¤ä¸ºé‡è¦\n\n## 2. å…ˆçœ‹å®šä¹‰å’Œä½¿ç”¨æŒ‡å—\n\n### 2.1. å®šä¹‰ defineAsyncComponent \n\n```ts\nfunction defineAsyncComponent(\n  source: AsyncComponentLoader | AsyncComponentOptions\n): Component\n\ntype AsyncComponentLoader = () => Promise<Component>\n\ninterface AsyncComponentOptions {\n  loader: AsyncComponentLoader\n  loadingComponent?: Component\n  errorComponent?: Component\n  delay?: number\n  timeout?: number\n  suspensible?: boolean\n  onError?: (\n    error: Error,\n    retry: () => void,\n    fail: () => void,\n    attempts: number\n  ) => any\n}\n\nimport { defineAsyncComponent } from 'vue'\n\nconst AsyncComp = defineAsyncComponent(() => {\n  return new Promise((resolve, reject) => {\n    // ...ä»æœåŠ¡å™¨è·å–ç»„ä»¶\n    resolve(/* è·å–åˆ°çš„ç»„ä»¶ */)\n  })\n  // or\n  return import('./components/MyComponent.vue')\n})\n// ... åƒä½¿ç”¨å…¶ä»–ä¸€èˆ¬ç»„ä»¶ä¸€æ ·ä½¿ç”¨ `AsyncComp`\n```\n\n### 2.2. ä½¿ç”¨ç¤ºä¾‹\n\n#### 2.2.1. æœ€åŸºç¡€çš„ç”¨æ³•\n\n```js\nimport { defineAsyncComponent } from 'vue'\n\n// å¼‚æ­¥åŠ è½½ç»„ä»¶\nconst AsyncComponent = defineAsyncComponent(() =>\n  import('./components/MyComponent.vue')\n)\n\n// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨\nexport default {\n  components: {\n    AsyncComponent\n  }\n}\n```\n\n#### 2.2.2. å¸¦åŠ è½½å’Œé”™è¯¯çŠ¶æ€çš„å®Œæ•´é…ç½®\n\n```js\nconst AsyncComponent = defineAsyncComponent({\n  // åŠ è½½å‡½æ•°\n  loader: () => import('./components/MyComponent.vue'),\n  \n  // åŠ è½½æ—¶æ˜¾ç¤ºçš„ç»„ä»¶\n  loadingComponent: LoadingSpinner,\n  \n  // å±•ç¤ºåŠ è½½ç»„ä»¶å‰çš„å»¶è¿Ÿæ—¶é—´ï¼Œé»˜è®¤ä¸º 200ms\n  delay: 200,\n  \n  // é”™è¯¯æ—¶æ˜¾ç¤ºçš„ç»„ä»¶\n  errorComponent: ErrorComponent,\n  \n  // å¦‚æœæä¾›äº† timeoutï¼Œå¹¶ä¸”åŠ è½½æ—¶é—´è¶…è¿‡äº†è®¾å®šå€¼ï¼Œå°†æ˜¾ç¤ºé”™è¯¯ç»„ä»¶\n  timeout: 3000,\n  \n  // åŠ è½½å¤±è´¥æ—¶çš„å›è°ƒ\n  onError(error, retry, fail, attempts) {\n    if (attempts <= 3) {\n      // é‡è¯•\n      retry()\n    } else {\n      // å¤±è´¥\n      fail()\n    }\n  }\n})\n```\n\n#### 2.2.3. åœ¨ setup å‡½æ•°ä¸­ä½¿ç”¨\n\n```js\nimport { defineAsyncComponent } from 'vue'\n\nexport default {\n  setup() {\n    const DynamicComponent = defineAsyncComponent(() =>\n      import(`./components/${someCondition ? 'A' : 'B'}.vue`)\n    )\n\n    return {\n      DynamicComponent\n    }\n  }\n}\n```\n\n#### 2.2.4. ç»“åˆ Suspense ä½¿ç”¨\n\n```vue\n<template>\n  <Suspense>\n    <template `#default>`\n      <AsyncComponent />\n    </template>\n    <template `#fallback>`\n      <div>Loading...</div>\n    </template>\n  </Suspense>\n</template>\n\n<script>\nimport { defineAsyncComponent } from 'vue'\n\nexport default {\n  components: {\n    AsyncComponent: defineAsyncComponent(() =>\n      import('./components/HeavyComponent.vue')\n    )\n  }\n}\n</script>\n```\n\n#### 2.2.5. å¤„ç†åŠ¨æ€è·¯å¾„çš„ç»„ä»¶\n\n```js\nconst AsyncComponent = defineAsyncComponent({\n  loader: () => {\n    const componentName = computed(() => store.state.currentComponent)\n    return import(`./components/${componentName.value}.vue`)\n  },\n  loadingComponent: LoadingComponent,\n  errorComponent: ErrorComponent\n})\n```\n\n#### 2.2.6. å¸¦æœ‰ç¼“å­˜çš„å¼‚æ­¥ç»„ä»¶\n\n```js\nconst cache = new Map()\n\nconst AsyncComponent = defineAsyncComponent({\n  loader: async () => {\n    const componentPath = './components/MyComponent.vue'\n    \n    if (!cache.has(componentPath)) {\n      const component = await import(componentPath)\n      cache.set(componentPath, component)\n    }\n    \n    return cache.get(componentPath)\n  }\n})\n```\n\n#### 2.2.7. é…åˆè·¯ç”±\n\n```javascript\n// è·¯ç”±ä¸­ä½¿ç”¨\nimport { createRouter } from 'vue-router'\n\nconst router = createRouter({\n  routes: [\n    {\n      path: '/dashboard',\n      component: defineAsyncComponent(() => \n        import('./views/Dashboard.vue')\n      )\n    }\n  ]\n})\n```\n\n#### 2.2.8. Vue 3.5 æ–°ç‰¹æ€§ - æ°´åˆæ§åˆ¶\n\nåœ¨ Vue 3.5+ ä¸­ï¼Œå¼‚æ­¥ç»„ä»¶å¯ä»¥é€šè¿‡æä¾›`æ¿€æ´»ç­–ç•¥`æ¥æ§åˆ¶ä½•æ—¶è¿›è¡Œæ¿€æ´»\n\n```javascript\nimport {\n    defineAsyncComponent,\n    hydrateOnIdle,\n    hydrateOnVisible,\n    hydrateOnInteraction,\n    hydrateOnMediaQuery,\n} from \"vue\";\n\nconst AsyncComp = defineAsyncComponent({\n    loader: () => import(\"./Comp.vue\"),\n    hydrate: hydrateOnIdle(/* ä¼ é€’å¯é€‰çš„æœ€å¤§è¶…æ—¶ */),\n    hydrate: hydrateOnVisible(), // ä»…åœ¨å…ƒç´ å¯è§æ—¶å¼€å§‹åŠ è½½\n    // ä»…åœ¨å…ƒç´ å¯è§æ—¶å¼€å§‹åŠ è½½ï¼Œä¸”åœ¨å…ƒç´ è¿›å…¥è§†å£100pxä¹‹å‰å¼€å§‹åŠ è½½\n    hydrate: hydrateOnVisible({ rootMargin: \"100px\" }),\n    //å½“æŒ‡å®šçš„åª’ä½“æŸ¥è¯¢åŒ¹é…æ—¶è¿›è¡Œæ¿€æ´»ã€‚\n    hydrate: hydrateOnMediaQuery(\"(max-width:500px)\"),\n    // äº¤äº’æ—¶æ¿€æ´»\n    hydrate: hydrateOnInteraction(\"click\"),\n});\n```\n\n#### 2.2.9. éœ€è¦æ³¨æ„çš„æ˜¯\n\n- `defineAsyncComponent` è¿”å›çš„æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œå®ƒä»…åœ¨éœ€è¦æ—¶æ‰ä¼šåŠ è½½å®é™…çš„ç»„ä»¶\n- å¼‚æ­¥ç»„ä»¶é»˜è®¤æ˜¯\"æŒ‚èµ·çš„\"ï¼Œéœ€è¦é…åˆ `Suspense ç»„ä»¶`ä½¿ç”¨æ‰èƒ½æ˜¾ç¤ºåŠ è½½çŠ¶æ€\n- åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ä¸­ä½¿ç”¨æ—¶éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œç¡®ä¿ç»„ä»¶èƒ½å¤Ÿæ­£ç¡®åœ°åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“\n- å¼‚æ­¥ç»„ä»¶æœ€å¥½ç”¨äº`è¾ƒå¤§çš„ç»„ä»¶`æˆ–ä¸æ˜¯`ç«‹å³éœ€è¦çš„ç»„ä»¶`\n\n## 3. å¼‚æ­¥ç»„ä»¶çš„ç®€æ˜“å®ç°\n\nåŒæ­¥æ¸²æŸ“ï¼Œå¦‚ä¸‹é¢çš„ä»£ç å°±æ˜¯åŒæ­¥æ¸²æŸ“çš„\n\n![|299](https://832-1310531898.cos.ap-beijing.myqcloud.com/473c17f0834312fab0708e76ce7ba693.png)\n\næœ€ç®€å•çš„å¼‚æ­¥ç»„ä»¶åŠ è½½æ¸²æŸ“å®ç°ï¼šä½¿ç”¨ `import()` \n\n![|390](https://832-1310531898.cos.ap-beijing.myqcloud.com/c67ad6727edfee99008493c10f669896.png)\n\n### 3.1. åªå¼‚æ­¥æ¸²æŸ“é¡µé¢çš„æŸä¸€éƒ¨åˆ†\n\n![|440](https://832-1310531898.cos.ap-beijing.myqcloud.com/9397a82c38cdd035e996cffb175114ca.png)\n\n> å…³äº `is`ï¼Œæ˜¯`vue`å†…ç½®çš„ç‰¹æ®Š **Attributes** ï¼ˆå…¶ä»–çš„å¦‚ `key` å’Œ `ref`ï¼‰, ç”¨äº**ç»‘å®šåŠ¨æ€ç»„ä»¶**ã€‚ æ›´å¤šå‚è€ƒ [https://cn.vuejs.org/api/built-in-special-attributes.html#is](https://cn.vuejs.org/api/built-in-special-attributes.html#is)\n\n### 3.2. å¾…å®Œå–„çš„ç‚¹\n\n- å¦‚æœç»„ä»¶åŠ è½½å¤±è´¥æˆ–åŠ è½½è¶…æ—¶ï¼Œæ˜¯å¦è¦æ¸²æŸ“ ==Error ç»„ä»¶==ï¼Ÿ\n- ç»„ä»¶åœ¨åŠ è½½æ—¶ï¼Œæ˜¯å¦è¦å±•ç¤º==å ä½==çš„å†…å®¹ï¼Ÿä¾‹å¦‚æ¸²æŸ“ä¸€ä¸ª `Loading` ç»„ä»¶ã€‚\n- ç»„ä»¶åŠ è½½çš„é€Ÿåº¦å¯èƒ½å¾ˆå¿«ï¼Œä¹Ÿå¯èƒ½å¾ˆæ…¢ï¼Œæ˜¯å¦è¦è®¾ç½®ä¸€ä¸ªå»¶è¿Ÿå±•ç¤º Loading ç»„ä»¶çš„æ—¶é—´ï¼Ÿ\n\t- ==å¦‚æœç»„ä»¶åœ¨ 200ms å†…æ²¡æœ‰åŠ è½½æˆåŠŸæ‰å±•ç¤º Loading ç»„ä»¶==ï¼Œè¿™æ ·å¯ä»¥é¿å…ç”±ç»„ä»¶åŠ è½½è¿‡å¿«æ‰€å¯¼è‡´çš„`é—ªçƒ`ã€‚ \n- ç»„ä»¶åŠ è½½å¤±è´¥åï¼Œæ˜¯å¦éœ€è¦==é‡è¯•==ï¼Ÿ\n\n> [!abstract]\nä»æ ¹æœ¬ä¸Šæ¥è¯´ï¼Œå¼‚æ­¥ç»„ä»¶çš„å®ç°å¯ä»¥å®Œå…¨åœ¨**ç”¨æˆ·å±‚é¢**å®ç°ï¼Œè€Œæ— é¡»æ¡†æ¶æ”¯æŒã€‚ä½†ä¸€ä¸ªå®Œå–„çš„å¼‚æ­¥ç»„ä»¶ä»éœ€è¦è€ƒè™‘è¯¸å¤šé—®é¢˜\n\n## 4. å¼‚æ­¥ç»„ä»¶çš„å®ç°åŸç†\n\nå¼‚æ­¥ç»„ä»¶**æœ¬è´¨ä¸Š**æ˜¯é€šè¿‡å°è£…æ‰‹æ®µæ¥å®ç°å‹å¥½çš„ç”¨æˆ·æ¥å£ï¼Œä»è€Œé™ä½**ç”¨æˆ·å±‚é¢**çš„ä½¿ç”¨å¤æ‚åº¦\n\n### 4.1. å°è£… defineAsyncComponent å‡½æ•°\n\n`defineAsyncComponent` çš„`æœ¬è´¨`æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œè¿”å›ä¸€ä¸ª`åŒ…è£…ç»„ä»¶`\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-11.png)\n\n### 4.2. ä¸€ä¸ª Loading çš„åœºæ™¯çš„ä¼˜åŒ–\n\n> [!question]\nå¦‚æœåŠ è½½éœ€è¦ `201ms`  , `delay = 200` , é‚£ä¹ˆ loading ç»„ä»¶å°±å±•ç¤º `1ms`  ï¼Ÿ\n\nè¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼š\n1. è®¾ç½®Â `delay`ï¼ˆ`å»¶è¿Ÿæ˜¾ç¤ºæ—¶é—´`ï¼‰ï¼šåœ¨çŸ­æ—¶é—´åŠ è½½å®Œæˆçš„æƒ…å†µä¸‹ï¼Œå®Œå…¨ä¸æ˜¾ç¤º loading\n2. è®¾ç½®Â `minDuration`ï¼ˆæœ€å°æ˜¾ç¤ºæ—¶é—´ï¼‰ï¼šä¸€æ—¦æ˜¾ç¤ºäº† loadingï¼Œç¡®ä¿å®ƒè‡³å°‘æ˜¾ç¤ºä¸€å®šæ—¶é—´\n\nè¿™æ ·å¯ä»¥é¿å…ä¸¤ç§æƒ…å†µï¼š\n- å¯¹äºç‰¹åˆ«å¿«çš„åŠ è½½ï¼ˆ< delayï¼‰ï¼Œå®Œå…¨ä¸æ˜¾ç¤º loading\n- å¯¹äºæ¥è¿‘ delay çš„åŠ è½½ï¼Œç¡®ä¿ loading æ˜¾ç¤ºè¶³å¤Ÿé•¿çš„æ—¶é—´ï¼Œé¿å…é—ªçƒ\nåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼š\n- å¦‚æœåŠ è½½æ—¶é—´ < 200msï¼Œå®Œå…¨ä¸ä¼šæ˜¾ç¤º loading\n- å¦‚æœåŠ è½½æ—¶é—´ > 200msï¼Œloading ä¼šæ˜¾ç¤ºè‡³å°‘ 300ms\n\nä¸Šé¢æçš„é—®é¢˜ï¼Œè¿˜æ˜¯ä¼šå¯¼è‡´`é—ªçƒ` ï¼Œæ‰€ä»¥åº”è¯¥å†åŠ ä¸€ä¸ªå‚æ•°ï¼Œæ ‡è¯†è‡³å°‘å±•ç¤º `loading` å¤šä¹… ï¼Œæ‰€ä»¥å‚æ•°åº”è¯¥å¦‚ä¸‹ï¼š\n\n![|544](https://832-1310531898.cos.ap-beijing.myqcloud.com/6970da42cc493c33ab00c2cba8ae11f2.png)\n>  å…·ä½“ä»£ç å‚è€ƒï¼š [https://github.com/yued-fe/fetch-with-loading/blob/main/fetch-with-loading.js](https://github.com/yued-fe/fetch-with-loading/blob/main/fetch-with-loading.js)\n\n#### 4.2.1. å…¶ä»–æ€è·¯\n\n- è€ƒè™‘ä½¿ç”¨éª¨æ¶å±ï¼ˆSkeletonï¼‰ä»£æ›¿ä¼ ç»Ÿçš„ loading\n- ä½¿ç”¨ CSS è¿‡æ¸¡åŠ¨ç”»\n\n### 4.3. é‡è¯•æœºåˆ¶\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-12.png)\n\n#### 4.3.1. å»¶ä¼¸\n\nå¦‚ä½•é‡ç°å‘èµ·è¯·æ±‚ï¼Œå¹¶æ§åˆ¶æ¬¡æ•°\n```javascript hl:7\nPromise.retry = function (fn, times = 3) {\n    return new Promise(async (resolve, reject) => {\n        while (times--) {\n            try {\n                let ret = await fn();\n                resolve(ret);\n                // å¦‚æœæˆåŠŸäº†ï¼Œå°±ç›´æ¥breakäº†\n                break;\n            } catch (error) {\n                if (!times) reject(error);\n            }\n        }\n    });\n};\n```\n\n> [!tip]\n `while` é‡Œç›´æ¥ä½¿ç”¨ `break` è·³å‡ºå¾ªç¯ï¼Œå¹³æ—¶è‡ªå·±å¾ˆå°‘ä½¿ç”¨\n\n## 5. å‡½æ•°å¼ç»„ä»¶ ä¸ æœ‰çŠ¶æ€çš„ç»„ä»¶\n\nä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶**æœ¬è´¨ä¸Š**å°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„**è¿”å›å€¼**æ˜¯`è™šæ‹Ÿ DOM` ï¼Œ å‡½æ•°å¼ç»„ä»¶**æ²¡æœ‰è‡ªèº«çŠ¶æ€** ï¼Œéœ€è¦é€šè¿‡ `props` çš„æ–¹å¼ä¼ å…¥ã€‚\n\nä¸‹é¢æ˜¯ä¸€ä¸ª å‡½æ•°å¼ç»„ä»¶çš„ç¤ºä¾‹ï¼š\n\n```javascript\nfunction MyFuncComp(props) {\n    return {type: 'h1', children: props.title}\n}\n\nMyFuncComp.props = {\n    title: 'default title'\n}\n```\n\nå‡½æ•°å¼ç»„ä»¶**æ— éœ€åˆå§‹åŒ–**`data`**ä»¥åŠç”Ÿå‘½å‘¨æœŸé’©å­**ã€‚ä»è¿™ä¸€ç‚¹å¯ä»¥çœ‹å‡ºï¼Œå‡½æ•°å¼ç»„ä»¶çš„åˆå§‹åŒ–æ€§èƒ½æ¶ˆè€—å°äºæœ‰çŠ¶æ€ç»„ä»¶ï¼Œä½†å…¶å®åœ¨ Vue.js 3 ä¸­ï¼Œå³ä½¿æ˜¯**æœ‰çŠ¶æ€ç»„ä»¶**ï¼Œå…¶åˆå§‹åŒ–æ€§èƒ½æ¶ˆè€—ä¹Ÿéå¸¸å°ï¼Œ\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå…·ä½“çš„ä»£ç å®ç°ï¼š\n\n![|568](https://832-1310531898.cos.ap-beijing.myqcloud.com/cab8607e5c66d804ed355f4e98c49910.png)\n\n![|560](https://832-1310531898.cos.ap-beijing.myqcloud.com/f0f7b9f6f2f48546166404f6484dd6e4.png)\n\n![|552](https://832-1310531898.cos.ap-beijing.myqcloud.com/c20cc1744e847ad5027143ba2dcfedba.png)\n\n## 6. æ€»ç»“\n\n- å¼‚æ­¥ç»„ä»¶åœ¨é¡µé¢æ€§èƒ½ã€æ‹†åŒ…ä»¥åŠæœåŠ¡ç«¯ä¸‹å‘ç»„ä»¶ç­‰åœºæ™¯ä¸­å°¤ä¸ºé‡è¦ã€‚\n- ä»æ ¹æœ¬ä¸Šæ¥è¯´ï¼Œå¼‚æ­¥ç»„ä»¶çš„å®ç°å¯ä»¥å®Œå…¨åœ¨`ç”¨æˆ·å±‚é¢`å®ç°ï¼Œè€Œ`æ— é¡»æ¡†æ¶æ”¯æŒ`ã€‚\n- ä½†ä¸€ä¸ªå®Œå–„çš„å¼‚æ­¥ç»„ä»¶ä»éœ€è¦è€ƒè™‘è¯¸å¤šé—®é¢˜ï¼Œä¾‹å¦‚: \n\t- å…è®¸ç”¨æˆ·æŒ‡å®šåŠ è½½å‡ºé”™æ—¶è¦æ¸²æŸ“çš„ç»„ä»¶;  \n\t- å…è®¸ç”¨æˆ·æŒ‡å®š Loading ç»„ä»¶ï¼Œä»¥åŠå±•ç¤ºè¯¥ç»„ä»¶çš„`å»¶è¿Ÿ`æ—¶é—´; \n\t\t- ==æ³¨æ„ï¼šè¿™æ˜¯å»¶è¿Ÿå±•ç¤º Loading çš„æ—¶é—´==\n\t- å…è®¸ç”¨æˆ·è®¾ç½®åŠ è½½ç»„ä»¶çš„`è¶…æ—¶`æ—¶é•¿;\n\t- ç»„ä»¶åŠ è½½å¤±è´¥æ—¶ï¼Œä¸ºç”¨æˆ·æä¾›é‡è¯•çš„èƒ½åŠ›ã€‚\n\t- å› æ­¤ï¼Œæ¡†æ¶æœ‰å¿…è¦å†…å»ºå¼‚æ­¥ç»„ä»¶çš„å®ç°ã€‚\n- Vue.js 3 æä¾›äº† defineAsyncComponent å‡½æ•°ï¼Œç”¨æ¥å®šä¹‰`å¼‚æ­¥ç»„ä»¶`ã€‚\n\t- å¼‚æ­¥ç»„ä»¶çš„åŠ è½½è¶…æ—¶é—®é¢˜ï¼Œä»¥åŠå½“åŠ è½½é”™è¯¯å‘ç”Ÿæ—¶ï¼Œå¦‚ä½•æŒ‡å®š Error ç»„ä»¶ã€‚\n\t- é€šè¿‡ä¸º defineAsyncComponent å‡½æ•°æŒ‡å®šé€‰é¡¹å‚æ•°ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡ timeout é€‰é¡¹è®¾ç½®è¶…æ—¶æ—¶é•¿ã€‚\n\t- å½“åŠ è½½è¶…æ—¶åï¼Œä¼šè§¦å‘åŠ è½½é”™è¯¯ï¼Œè¿™æ—¶ä¼šæ¸²æŸ“ç”¨æˆ·é€šè¿‡ errorComponent é€‰ é¡¹æŒ‡å®šçš„ Error ç»„ä»¶ã€‚\n-  Loading ç»„ä»¶ç»„ä»¶ ä¸ delay é€‰é¡¹\n\t- ä¸ºäº†é¿å… Loading ç»„ä»¶å¯¼è‡´çš„é—ªçƒé—® é¢˜ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è®¾è®¡ä¸€ä¸ªæ¥å£ï¼Œè®©ç”¨æˆ·èƒ½æŒ‡å®š==å»¶è¿Ÿå±•ç¤º Loading ç»„ä»¶==çš„æ—¶é—´ï¼Œå³ delay é€‰é¡¹ã€‚\n- ç»„ä»¶åŠ è½½å‘ç”Ÿé”™è¯¯åçš„é‡è¯•æœºåˆ¶\n- æˆ‘ä»¬è®¨è®ºäº†å‡½æ•°å¼ç»„ä»¶ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶å†…éƒ¨å®ç°é€»è¾‘å¯ä»¥å¤ç”¨æœ‰çŠ¶æ€ç»„ä»¶çš„å®ç°é€»è¾‘ã€‚\n\t- ä¸ºäº†ç»™å‡½æ•°å¼ç»„ä»¶**å®šä¹‰ props**ï¼Œæˆ‘ä»¬å…è®¸å¼€å‘è€…åœ¨å‡½æ•°å¼ç»„ä»¶çš„ä¸»å‡½æ•°ä¸Šæ·»åŠ **é™æ€çš„ props å±æ€§**ã€‚\n\t- å‡ºäºæ›´åŠ ä¸¥è°¨çš„è€ƒè™‘ï¼Œå‡½æ•°å¼ç»„ä»¶æ²¡æœ‰è‡ªèº«çŠ¶æ€ï¼Œä¹Ÿæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µã€‚\n\t- æ‰€ä»¥ï¼Œåœ¨åˆå§‹åŒ–å‡½æ•°å¼ç»„ä»¶æ—¶ï¼Œéœ€è¦é€‰æ‹©æ€§åœ°å¤ç”¨æœ‰çŠ¶æ€ç»„ä»¶çš„**åˆå§‹åŒ–é€»è¾‘**ã€‚\n\n## 7. å‚è€ƒ\nã€Švue.js è®¾è®¡ä¸å®ç°ã€‹\n","2326400898025e0c8f525c214b432280":"\n# Vue3 ä¸­ keepAliveç»„ä»¶çš„å®ç°åŸç†\n\n\n`#vue` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä¸ºä»€ä¹ˆéœ€è¦ keepalive \n\nç±»ä¼¼äºHTTP ä¸­çš„ `keepAlive` , ä¸ºäº†é¿å…é¢‘ç¹åœ°é”€æ¯ã€åˆ›å»º HTTP è¿æ¥ä¼šå¸¦æ¥é¢å¤– çš„æ€§èƒ½å¼€é”€ï¼›æ•…å…è®¸å¤šä¸ªè¯·æ±‚æˆ–å“åº”å…±ç”¨ä¸€ä¸ª TCP è¿æ¥\n\nåŒæ ·çš„ï¼Œ `keepAliveç»„ä»¶` å¯ä»¥é¿å…ä¸€ä¸ªç»„ä»¶è¢«é¢‘ç¹åœ°é”€æ¯/é‡å»º\n\n## 2. KeepAlive çš„å®šä¹‰\n\n```typescript\ninterface KeepAliveProps {\n  /**\n   * å¦‚æœæŒ‡å®šï¼Œåˆ™åªæœ‰ä¸ `include` åç§°\n   * åŒ¹é…çš„ç»„ä»¶æ‰ä¼šè¢«ç¼“å­˜ã€‚\n   */\n  include?: MatchPattern\n  /**\n   * ä»»ä½•åç§°ä¸ `exclude`\n   * åŒ¹é…çš„ç»„ä»¶éƒ½ä¸ä¼šè¢«ç¼“å­˜ã€‚\n   */\n  exclude?: MatchPattern\n  /**\n   * æœ€å¤šå¯ä»¥ç¼“å­˜å¤šå°‘ç»„ä»¶å®ä¾‹ã€‚\n   */\n  max?: number | string\n}\n\ntype MatchPattern = string | RegExp | (string | RegExp)[]\n```\n\n## 3. KeepAlive çš„æœ¬è´¨\n\nå®ƒçš„åŠŸèƒ½æ˜¯åœ¨å¤šä¸ªç»„ä»¶é—´åŠ¨æ€åˆ‡æ¢æ—¶ç¼“å­˜è¢«ç§»é™¤çš„ç»„ä»¶å®ä¾‹\n\n**æœ¬è´¨æ˜¯ç¼“å­˜ç®¡ç†ï¼Œå†åŠ ä¸Šç‰¹æ®Šçš„æŒ‚è½½/å¸è½½é€»è¾‘**\n\nå…·ä½“å¦‚ä¸‹å›¾ï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-13.png)\n\n## 4. å…·ä½“çš„ä»£ç æ¶å­\n\n![|528](https://832-1310531898.cos.ap-beijing.myqcloud.com/13dc59a8d535136931adcb1d8e17fa18.png)\n\n>  å½“ç„¶ï¼Œæ¯”å¦‚å¸è½½æ—¶ï¼Œéœ€è¦çœ‹è¿™ä¸ªç»„ä»¶æ˜¯å¦æ˜¯`å†…éƒ¨ç»„ä»¶`ï¼Œæ˜¯çš„è¯ä¼šå¯¹ç‰¹æ®Šå¤„ç†ã€‚\n\nä¸‹é¢æ˜¯ `move` çš„ä¸€äº›å…·ä½“é€»è¾‘ï¼š\n\n![|552](https://832-1310531898.cos.ap-beijing.myqcloud.com/6dc62342e395740c11f4a21257e00a46.png)\n\n## 5. include å’Œ exclude\n\nå³èƒ½å¤Ÿæ˜¾ç¤ºçš„é…ç½®åº”è¯¥ è¢«ç¼“å­˜çš„ç»„ä»¶æˆ–ä¸åº”è¯¥ç¼“å­˜çš„ç»„ä»¶ï¼Œ**æœ¬è´¨æ˜¯é€šè¿‡å†…éƒ¨ç»„ä»¶çš„åç§°è¿›è¡Œæ­£åˆ™åŒ¹é…ï¼Œå¦‚æœåŒ¹é…åˆ°åˆ™ç›´æ¥æ¸²æŸ“â€œå†…éƒ¨ç»„ä»¶â€ï¼Œä¸å¯¹å…¶è¿›è¡Œåç»­çš„ç¼“å­˜æ“ä½œ**\n\n## 6. ç¼“å­˜ç®¡ç†\n\næ€»ç»“ä¸‹å°±æ˜¯ï¼š\n\n- å¦‚æœç¼“å­˜å­˜åœ¨ï¼Œåˆ™ç»§æ‰¿ç»„ä»¶å®ä¾‹ï¼Œå¹¶å°†ç”¨äºæè¿°`ç»„ä»¶çš„ vnode å¯¹è±¡`æ ‡è®°ä¸º `keptAlive`ï¼Œè¿™æ ·æ¸²æŸ“å™¨å°±ä¸ä¼šé‡æ–°åˆ›å»ºæ–°çš„ç»„ä»¶å®ä¾‹ï¼› \n- å¦‚æœç¼“å­˜ä¸å­˜åœ¨ï¼Œåˆ™è®¾ç½®ç¼“å­˜\n- ç¼“å­˜ç­–ç•¥ï¼š\n\t- ç›®å‰æ˜¯`æœ€è¿‘ä¸€æ¬¡è®¿é—®`\n\t- å¦å¤–è¿˜éœ€è¦å…³æ³¨æ˜¯å¦è®¾ç½®`æœ€å¤§ç¼“å­˜å®¹é‡`ï¼Œå¦‚æœè®¾ç½®äº†ï¼Œè¿˜éœ€è¦`ä¿®å‰ª`\n\n>  æ³¨1ï¼šç¼“å­˜çš„æ˜¯ç»„ä»¶çš„å®ä¾‹\n\n## 7. æ€»ç»“\n\n- KeepAlive ç»„ä»¶çš„ä½œç”¨ç±»ä¼¼äº HTTP ä¸­çš„æŒä¹…é“¾æ¥ã€‚å®ƒå¯ä»¥é¿å…ç»„ä»¶å®ä¾‹ä¸æ–­åœ°è¢«é”€æ¯å’Œé‡å»ºã€‚\n- KeepAlive çš„åŸºæœ¬å®ç°å¹¶ä¸å¤æ‚ã€‚\n\t- å½“è¢« KeepAlive çš„ç»„ä»¶â€œå¸è½½â€æ—¶ï¼Œæ¸²æŸ“å™¨å¹¶ä¸ä¼šçœŸçš„å°†å…¶å¸è½½æ‰ï¼Œè€Œæ˜¯ä¼šå°†è¯¥ç»„ä»¶æ¬è¿åˆ°ä¸€ä¸ªéšè—å®¹å™¨ä¸­ï¼Œä»è€Œä½¿å¾—ç»„ä»¶å¯ä»¥ç»´æŒå½“å‰çŠ¶æ€ã€‚\n\t- å½“è¢« KeepAlive çš„ç»„ä»¶â€œæŒ‚è½½â€æ—¶ï¼Œæ¸²æŸ“å™¨ä¹Ÿä¸ä¼šçœŸçš„æŒ‚è½½å®ƒï¼Œè€Œæ˜¯å°†å®ƒä»éšè—å®¹å™¨æ¬è¿åˆ°åŸå®¹å™¨ã€‚\n-  KeepAlive çš„å…¶ä»–èƒ½åŠ›ï¼Œå¦‚åŒ¹é…ç­–ç•¥å’Œç¼“å­˜ç­–ç•¥ã€‚\n\t-  include å’Œ exclude è¿™ä¸¤ä¸ªé€‰é¡¹ç”¨æ¥æŒ‡å®šå“ªäº›ç»„ä»¶éœ€è¦è¢« KeepAliveï¼Œå“ªäº›ç»„ä»¶ä¸éœ€è¦è¢« KeepAliveã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œinclude å’Œ exclude ä¼šåŒ¹é…ç»„ä»¶çš„ `name é€‰é¡¹`ã€‚ä½†æ˜¯åœ¨å…·ä½“å®ç°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰©å±•åŒ¹é…èƒ½åŠ›ã€‚\n\t- å¯¹äºç¼“å­˜ç­–ç•¥ï¼ŒVue.js é»˜è®¤é‡‡ç”¨â€œæœ€æ–°ä¸€æ¬¡è®¿é—®â€ã€‚ä¸ºäº†è®©ç”¨æˆ·èƒ½`è‡ªè¡Œå®ç°ç¼“å­˜ç­–ç•¥`\n\n> å…·ä½“ä»£ç è§ä»“åº“ï¼Œè¿™é‡Œä¸»è¦æ˜¯åˆ—ä¸¾äº†å…³é”®ç‚¹\n\n","4e701fc173e4503a8d31da1ec8fc20c2":"\n# Vue3ä¸­ Teleport ç»„ä»¶çš„å®ç°åŸç†\n\n\n`#vue` \n\nç®€å•è¯´å°±æ˜¯ï¼Œè’™å±‚ `z-index` çš„é—®é¢˜ï¼Œæ‰€ä»¥å¿…é¡»æ¸²æŸ“åˆ° `body` æˆ–è€…æŒ‚è½½åˆ°çˆ¶å…ƒç´ ä¸Šæ‰è¡Œï¼Œvue3 æœ¬èº«æä¾›å†…éƒ¨ç»„ä»¶æ¥æ”¯æŒè¿™ä¸ªåŠŸèƒ½\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å®šä¹‰ \n\n```typescript\ninterface TeleportProps {\n  /**\n   * å¿…å¡«é¡¹ã€‚æŒ‡å®šç›®æ ‡å®¹å™¨ã€‚\n   * å¯ä»¥æ˜¯é€‰æ‹©å™¨æˆ–å®é™…å…ƒç´ ã€‚\n   */\n  to: string | HTMLElement\n  /**\n   * å½“å€¼ä¸º `true` æ—¶ï¼Œå†…å®¹å°†ä¿ç•™åœ¨å…¶åŸå§‹ä½ç½®\n   * è€Œä¸æ˜¯ç§»åŠ¨åˆ°ç›®æ ‡å®¹å™¨ä¸­ã€‚\n   * å¯ä»¥åŠ¨æ€æ›´æ”¹ã€‚\n   */\n  disabled?: boolean\n  /**\n   * å½“å€¼ä¸º `true` æ—¶ï¼ŒTeleport å°†æ¨è¿Ÿ\n   * ç›´åˆ°åº”ç”¨çš„å…¶ä»–éƒ¨åˆ†æŒ‚è½½å\n   * å†è§£æå…¶ç›®æ ‡ã€‚(3.5+)\n   */\n  defer?: boolean\n}\n```\n\n## 2. å®ç°æ¸²æŸ“é€»è¾‘åˆ†ç¦»\n\nå°† Teleport ç»„ä»¶çš„æ¸²æŸ“é€»è¾‘ä»æ¸²æŸ“å™¨ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œè¿™ä¹ˆåšæœ‰ä¸¤ç‚¹å¥½å¤„ï¼š\n\n- å¯ä»¥**é¿å…æ¸²æŸ“å™¨é€»è¾‘ä»£ç â€œè†¨èƒ€â€**ï¼› \n- **æ–¹ä¾¿TreeShaking**ï¼š\n\t- å½“ç”¨æˆ·æ²¡æœ‰ä½¿ç”¨ Teleport ç»„ä»¶æ—¶ï¼Œç”±äº Teleport çš„æ¸²æŸ“é€»è¾‘è¢«åˆ†ç¦»ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨ TreeShaking æœºåˆ¶åœ¨æœ€ç»ˆçš„ bundle ä¸­åˆ é™¤ Teleport ç›¸å…³çš„ä»£ç ï¼Œä½¿å¾—æœ€ç»ˆæ„å»ºåŒ…çš„ä½“ç§¯å˜å°\n\nä¸‹é¢æ˜¯ patch å‡½æ•°ï¼š\n\n![|544](https://832-1310531898.cos.ap-beijing.myqcloud.com/157ea664c2294a84c81ee0dba0120952.png)\n\n## 3. ä»¥ä¸‹é¢æ¨¡æ¿ä¸ºç¤ºä¾‹\n\n![|472](https://832-1310531898.cos.ap-beijing.myqcloud.com/43dac0ddd96491945eff4ff8a1f2770c.png)\n\næ‰€ä»¥å…·ä½“å¯¹åº”çš„ vdom å¦‚ä¸‹ï¼š\n\n![|536](https://832-1310531898.cos.ap-beijing.myqcloud.com/f25fb6a62f4fc44e773d798c7cc4227b.png)\n\n## 4. æœ€ç»ˆä»£ç \n```javascript\nconst Teleport = {\n  __isTeleport: true,\n  process(n1, n2, container, anchor, internals) {\n    const { patch, patchChildren, move } = internals\n    if (!n1) {\n      // æŒ‚è½½\n        // ä½¿ç”¨ toå±æ€§ å»æŸ¥æ‰¾ DOM èŠ‚ç‚¹\n      const target = typeof n2.props.to === 'string'\n        ? document.querySelector(n2.props.to)\n        : n2.props.to\n      n2.children.forEach(c => patch(null, c, target, anchor))\n    } else {\n      // æ›´æ–°\n      patchChildren(n1, n2, container)\n      if (n2.props.to !== n1.props.to) {\n          // :::: ä½¿ç”¨ toå±æ€§ å»æŸ¥æ‰¾ DOM èŠ‚ç‚¹\n        const newTarget = typeof n2.props.to === 'string'\n          ? document.querySelector(n2.props.to)\n          : n2.props.to\n        n2.children.forEach(c => move(c, newTarget))\n      }\n    }\n  }\n}\n```\n\n## 5. æœ€å\n\nçœ‹çœ‹ `Teleport` å•è¯å«ä¹‰ï¼š\n\nv. å¿ƒçµè¿è¾“ï¼ˆç‰©ä½“ã€äººï¼‰ï¼›è¿œè·ç¦»ä¼ é€\nn. é€šä¿¡å«æ˜Ÿï¼›å¿ƒçµä¼ è¾“\n\n**å³ï¼ŒTeleportç»„ä»¶ å°†æ¨¡æ¿æ¸²æŸ“åˆ°å…¶ä»–èŠ‚ç‚¹ä¸‹ï¼Œå³è·¨è¶Š DOM å±‚çº§æ¸²æŸ“**\n","716186e3e09d593e919221d6ef3f2a0a":"\n# Vue3 ä¸­ Transition ç»„ä»¶çš„å®ç°åŸç†\n\n`#vue` \n\n\n## ç›®å½•\n<!-- toc -->\n ## æ ¸å¿ƒåŸç† \n\nTransition ç»„ä»¶çš„å®ç°æ¯”æƒ³è±¡ä¸­ç®€å•å¾—å¤šï¼Œå®ƒçš„**æ ¸å¿ƒåŸç†**æ˜¯ï¼š\n\n- å½“ DOM å…ƒç´ è¢«`æŒ‚è½½æ—¶`ï¼Œå°†**åŠ¨æ•ˆ**é™„åŠ åˆ°è¯¥ DOM å…ƒç´ ä¸Šï¼› \n- å½“ DOM å…ƒç´ è¢«`å¸è½½æ—¶`ï¼Œä¸è¦ç«‹å³å¸è½½ DOM å…ƒç´ ï¼Œè€Œæ˜¯ç­‰åˆ°é™„åŠ åˆ°è¯¥ DOM å…ƒç´ ä¸Šçš„**åŠ¨æ•ˆæ‰§è¡Œå®Œæˆå**å†å¸è½½å®ƒã€‚\n\n## åŸç”Ÿ DOM çš„è¿‡æ¸¡å®ç°åŸç†\n\nç®€å•è¯´å°±æ˜¯ï¼Œå¦‚æœä½¿ç”¨ JS ä¸º DOM å…ƒç´ æ·»åŠ è¿›åœºå’Œç¦»åœºçš„åŠ¨æ•ˆã€‚\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/545fb51c3790dac61166a5a7ae72d606.png)\n\nä½†ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬æ‰§è¡Œä¼šå‘ç°ä¸ç¬¦åˆé¢„æœŸï¼Œè¿™æ˜¯å› ä¸ºéƒ½æ˜¯`å½“å‰å¸§`ç»˜åˆ¶äº†ï¼Œä¸‹é¢çš„ä»£ç å°±ç¬¦åˆé¢„æœŸ\n\n![|576](https://832-1310531898.cos.ap-beijing.myqcloud.com/b34413de3d3674ef0ce3ec8b64afda80.png)\n\n\n> ä¸ºä»€ä¹ˆ `requestAnimationFrame` è¦åµŒå¥—ä¸¤æ¬¡ï¼Œå› ä¸ºæµè§ˆå™¨çš„ä¸€ä¸ª bug æ‰€è‡´ï¼Œæœ‰å…´è¶£è‡ªå·±æœæœ\n\næœ€å é€šè¿‡ç›‘å¬å…ƒç´ çš„ `transitionend äº‹ä»¶`æ¥å®Œæˆæ”¶å°¾å·¥ä½œï¼Œå¦‚ä¸‹ï¼š\n\n![|552](https://832-1310531898.cos.ap-beijing.myqcloud.com/c533b909a9f09e46fb8c4e81251ae13c.png)\n\næ‰€ä»¥æ€»ç»“ä¸‹å°±æ˜¯ä¸‰ä¸ªé˜¶æ®µï¼š\n\n- beforeEnter é˜¶æ®µï¼šæ·»åŠ  enter-from å’Œ enter-active ç±»ã€‚ \n- enter é˜¶æ®µï¼šåœ¨ä¸‹ä¸€å¸§ä¸­ç§»é™¤ enter-from ç±»ï¼Œæ·»åŠ  enter-toã€‚ \n- è¿›åœºåŠ¨æ•ˆç»“æŸï¼šç§»é™¤ enter-to å’Œ enter-active ç±»\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/6411de1206e237b995eb09b237262567.png)\n\n### æœ€ç»ˆä»£ç ï¼Œå†å°è£…\n\n```html\n<head>\n<style>\n.box {\n  width: 100px;\n  height: 100px;\n  background-color: red;\n}\n\n.enter-active, .leave-active {\n  transition: transform 1s ease-in-out;\n}\n.enter-from, .leave-to {\n  transform: translateX(200px);\n}\n.enter-to, .leave-from {\n  transform: translateX(0);\n}\n</style>\n\n</head>\n\n<body>\n\n<div id=\"app\"></div>\n\n<script>\n\nconst container = document.querySelector('#app')\n\nconst el = document.createElement('div')\nel.classList.add('box')\n\n// before enter\nel.classList.add('enter-from')\nel.classList.add('enter-active')\n\ncontainer.appendChild(el)\n// enter\nnextFrame(() => {\n  el.classList.remove('enter-from')\n  el.classList.add('enter-to')\n\n  el.addEventListener('transitionend', () => {\n    el.classList.remove('enter-to')\n    el.classList.remove('enter-active')\n  })\n})\n\n\nfunction nextFrame(cb) {\n  requestAnimationFrame(() => {\n    requestAnimationFrame(cb)\n  })\n}\n\nel.addEventListener('click', () => {\n  const performRemove = () => el.parentNode.removeChild(el)\n  el.classList.add('leave-from')\n  el.classList.add('leave-active')\n\n  // document.body.offsetHeight\n\n  nextFrame(() => {\n    el.classList.remove('leave-from')\n    el.classList.add('leave-to')\n\n    el.addEventListener('transitionend', () => {\n      el.classList.remove('leave-to')\n      el.classList.remove('leave-active')\n\n      performRemove()\n    })\n  })\n})\n\n</script>\n\n</body>\n\n```\n\n\n>  æ³¨ï¼š`nextFrame` çš„å®ç°æœ‰ä¸¤ä¸ª `requestAnimationFrame` åµŒå¥—\n\n\n## Transition ç»„ä»¶çš„å®ç°åŸç†\n\næ›´å¤šå‚è€ƒæµç¨‹å›¾ï¼š\n\n[https://www.figma.com/file/yadsH3JL06697MH3uWxPXd/2023.06.LOG?type=whiteboard&node-id=20-77&t=h8yXeRi9xblhKVhW-4](https://www.figma.com/file/yadsH3JL06697MH3uWxPXd/2023.06.LOG?type=whiteboard&node-id=20-77&t=h8yXeRi9xblhKVhW-4)\n\n\n### æ€»ç»“\n\nTransition ç»„ä»¶çš„å®ç°åŸç†ï¼šæˆ‘ä»¬å°†è¿‡æ¸¡ç›¸å…³çš„é’©å­å‡½æ•°å®šä¹‰åˆ°è™šæ‹ŸèŠ‚ç‚¹çš„ `vnode.transitionå¯¹è±¡`ä¸­ã€‚æ¸²æŸ“å™¨åœ¨æ‰§è¡Œ`æŒ‚è½½å’Œå¸è½½`æ“ä½œæ—¶ï¼Œä¼šä¼˜å…ˆæ£€æŸ¥è¯¥è™šæ‹ŸèŠ‚ç‚¹æ˜¯å¦éœ€è¦è¿›è¡Œè¿‡æ¸¡ï¼Œå¦‚æœéœ€è¦ï¼Œ åˆ™ä¼šåœ¨`åˆé€‚çš„æ—¶æœº`æ‰§è¡Œ `vnode.transition å¯¹è±¡`ä¸­å®šä¹‰çš„è¿‡æ¸¡ç›¸å…³é’©å­å‡½æ•°ã€‚\n\n> æ›´å½¢è±¡çš„å‚è€ƒæµç¨‹å›¾\n\n","690fe13b44065f92af66c16938482fdf":"\n# Vue3 çš„ç¼–è¯‘å™¨åŸç†ï¼ˆç¯‡ä¸€ï¼šåŸºæœ¬å®ç°ï¼‰\n\n`#vue` `#2023/06/24` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ•™ç§‘ä¹¦å¼çš„ç¼–è¯‘æ¨¡å‹ \n\n**ç¼–è¯‘å™¨å…¶å®åªæ˜¯ä¸€æ®µç¨‹åº**ï¼Œå®ƒç”¨æ¥å°†â€œä¸€ç§è¯­è¨€ Aâ€  `ç¿»è¯‘æˆ`  â€œå¦å¤–ä¸€ ç§è¯­è¨€ Bâ€ã€‚\n\nå®Œæ•´çš„ç¼–è¯‘æµç¨‹å¦‚ä¸‹ï¼š\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/bb7817fb1a517ee8ae5e63730360bf57.png)\n\n## 2. Vue.js æ¨¡æ¿ç¼–è¯‘å™¨\n\næ•™ç§‘ä¹¦å¼çš„ç¼–è¯‘æ¨¡å‹å¦‚ä¸Šï¼Œä½† `Vue æ¨¡æ¿`æœ‰æ‰€ä¸åŒï¼Œ\n\n`Vue.js çš„æ¨¡æ¿`å’Œ `JSX`  éƒ½å±äº `é¢†åŸŸç‰¹å®šè¯­è¨€(DSL)`  ï¼Œ`Vue.js æ¨¡æ¿ç¼–è¯‘å™¨`çš„ä½œç”¨å¦‚ä¸‹å›¾\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-14.png)\n\n- æºç æ˜¯ï¼š`.vue æ¨¡æ¿`\n- ç›®æ ‡ä»£ç ï¼š`å¯æ‰§è¡Œçš„æ¸²æŸ“å‡½æ•°`\n\n### 2.1. Vue.js æ¨¡æ¿ç¼–è¯‘ä¸ºæ¸²æŸ“å‡½æ•°çš„å®Œæ•´æµç¨‹\n\n![|640](https://832-1310531898.cos.ap-beijing.myqcloud.com/ded1464ed79b825a24b24e148fed06c6.png)\n\n> å…¶ä¸­ï¼Œ`str` å³ä¸º `.vueæ–‡ä»¶`çš„å†…å®¹\n\nåˆ†å¼€è¯´ï¼Œåˆ†ä¸ºä¸€ä¸‹å‡ éƒ¨åˆ†ï¼š\n - ç”¨æ¥å°†æ¨¡æ¿å­—ç¬¦ä¸²è§£æä¸ºæ¨¡æ¿ AST çš„è§£æå™¨(parser); \n - ç”¨æ¥å°†æ¨¡æ¿ AST è½¬æ¢ä¸º JavaScript AST çš„è½¬æ¢å™¨ (transformer);\n -  ç”¨æ¥æ ¹æ® JavaScript AST ç”Ÿæˆæ¸²æŸ“å‡½æ•°ä»£ç çš„ç”Ÿæˆå™¨ (generator)\n\n### 2.2. æ¨¡æ¿ ç”Ÿæˆ æ¨¡æ¿AST\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-16.png)\n\n### 2.3. æ¨¡æ¿AST ç”Ÿæˆ `JS AST è½¬æ¢å™¨`\n\nå› ä¸º Vue.js æ¨¡æ¿ç¼–è¯‘å™¨çš„`æœ€ç»ˆç›®æ ‡`æ˜¯ç”Ÿæˆæ¸²æŸ“å‡½æ•°ï¼Œè€Œæ¸²æŸ“å‡½æ•°`æœ¬è´¨`ä¸Šæ˜¯ JavaScript ä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†`æ¨¡æ¿ AST` è½¬æ¢æˆ`ç”¨äºæè¿°æ¸²æŸ“å‡½æ•°çš„ JavaScript AST`\n\næ‰€ä»¥`JS AST è½¬æ¢å™¨` æ˜¯ `ç”¨äºæè¿°æ¸²æŸ“å‡½æ•°çš„ JavaScript AST`\n\n### 2.4. jsAST ç”Ÿæˆæœ€ç»ˆå¯æ‰§è¡Œçš„ **æ¸²æŸ“å‡½æ•°**\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-17.png)\n\n## 3. Vue3 çš„å®ç°åŸç†\n\n### 3.1. å¦‚ä½•ç”¨`æœ‰é™çŠ¶æ€è‡ªåŠ¨æœº`æ„é€ ä¸€ä¸ª`è¯æ³•åˆ†æå™¨`\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-18.png)\n\næŒ‰ç…§`æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºçš„çŠ¶æ€è¿ç§»è¿‡ç¨‹`ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°ç¼–å†™å¯¹åº”çš„ä»£ç å®ç°ã€‚å› æ­¤ï¼Œæœ‰é™çŠ¶æ€è‡ªåŠ¨æœºå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆå¯¹æ¨¡æ¿çš„ (tokenized)ï¼Œæœ€ç»ˆæˆ‘ä»¬å°†å¾—åˆ°ä¸€ç³»åˆ— Tokenï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\nconst template = `<p>Vue</p>`;\n\n// å®šä¹‰çŠ¶æ€æœºçš„çŠ¶æ€\nconst State = {\n  initial: 1,\n  tagOpen: 2,\n  tagName: 3,\n  text: 4,\n  tagEnd: 5,\n  tagEndName: 6,\n};\n\n// åˆ¤æ–­æ˜¯å¦æ˜¯å­—æ¯\nfunction isAlpha(char) {\n  return (char >= \"a\" && char <= \"z\") || (char >= \"A\" && char <= \"Z\");\n}\n\nfunction tokenize(str) {\n  // åˆå§‹åŒ–çŠ¶æ€\n  let currentState = State.initial;\n  // ç”¨äºå­˜æ”¾å­—ç¬¦\n  const chars = [];\n  // ç”¨äºå­˜æ”¾token\n  const tokens = [];\n  while (str) {\n    const char = str[0];\n    switch (currentState) {\n      case State.initial:\n        if (char === \"<\") {\n          currentState = State.tagOpen;\n          str = str.slice(1);\n        } else if (isAlpha(char)) {\n          currentState = State.text;\n          chars.push(char);\n          str = str.slice(1);\n        }\n        break;\n      case State.tagOpen:\n        if (isAlpha(char)) {\n          currentState = State.tagName;\n          chars.push(char);\n          str = str.slice(1);\n        } else if (char === \"/\") {\n          currentState = State.tagEnd;\n          str = str.slice(1);\n        }\n        break;\n      case State.tagName:\n        if (isAlpha(char)) {\n          chars.push(char);\n          str = str.slice(1);\n        } else if (char === \">\") {\n          currentState = State.initial;\n          tokens.push({\n            type: \"tag\",\n            name: chars.join(\"\"),\n          });\n          chars.length = 0;\n          str = str.slice(1);\n        }\n        break;\n      case State.text:\n        if (isAlpha(char)) {\n          chars.push(char);\n          str = str.slice(1);\n        } else if (char === \"<\") {\n          currentState = State.tagOpen;\n          tokens.push({\n            type: \"text\",\n            content: chars.join(\"\"),\n          });\n          chars.length = 0;\n          str = str.slice(1);\n        }\n        break;\n      case State.tagEnd:\n        if (isAlpha(char)) {\n          currentState = State.tagEndName;\n          chars.push(char);\n          str = str.slice(1);\n        }\n        break;\n      case State.tagEndName:\n        if (isAlpha(char)) {\n          chars.push(char);\n          str = str.slice(1);\n        } else if (char === \">\") {\n          currentState = State.initial;\n          tokens.push({\n            type: \"tagEnd\",\n            name: chars.join(\"\"),\n          });\n          chars.length = 0;\n          str = str.slice(1);\n        }\n        break;\n    }\n  }\n\n  // è¿”å›token\n  return tokens;\n}\n\nconsole.log(tokenize(template));\n\n[\n    {\n        \"type\": \"tag\",\n        \"name\": \"p\"\n    },\n    {\n        \"type\": \"text\",\n        \"content\": \"Vue\"\n    },\n    {\n        \"type\": \"tagEnd\",\n        \"name\": \"p\"\n    }\n]\n\n```\n\n> [!tip]\n> ä¹Ÿå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œå› ä¸º`ç¼–å†™æ­£åˆ™è¡¨è¾¾å¼`æœ¬è´¨å°±æ˜¯`ç¼–å†™æœ‰é™è‡ªåŠ¨æœº`ï¼›ä½†é€šè¿‡è¿™ç§æ–¹å¼æ¥å®ç°æ›´èƒ½è¯´æ˜ä»€ä¹ˆæ˜¯æœ‰é™çŠ¶æ€è‡ªåŠ¨æœº\n\nè¯æ³•åˆ†æçš„è¿‡ç¨‹å°±æ˜¯çŠ¶æ€æœºåœ¨ä¸åŒçŠ¶æ€ä¹‹é—´è¿ç§»çš„è¿‡ç¨‹ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼ŒçŠ¶æ€æœºä¼šäº§ç”Ÿä¸€ä¸ªä¸ª Tokenï¼Œå½¢æˆä¸€ä¸ª Token åˆ—è¡¨\n#### 3.1.1. ç¤ºä¾‹\n\n `tokenize(<div><p>Vue</p><p>Template</p></div>)` ,  å¯å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š\n\n```json\n[\n    {\n        \"type\": \"tag\",\n        \"name\": \"div\"\n    },\n    {\n        \"type\": \"tag\",\n        \"name\": \"p\"\n    },\n    {\n        \"type\": \"text\",\n        \"content\": \"Vue\"\n    },\n    {\n        \"type\": \"tagEnd\",\n        \"name\": \"p\"\n    },\n    {\n        \"type\": \"tag\",\n        \"name\": \"p\"\n    },\n    {\n        \"type\": \"text\",\n        \"content\": \"Template\"\n    },\n    {\n        \"type\": \"tagEnd\",\n        \"name\": \"p\"\n    },\n    {\n        \"type\": \"tagEnd\",\n        \"name\": \"div\"\n    }\n]\n```\n\n>  è¯æ³•åˆ†æçš„è¿‡ç¨‹å°±æ˜¯ï¼ŒçŠ¶æ€æœºåœ¨ä¸åŒçŠ¶æ€ä¹‹é—´çš„è¿ç§»è¿‡ç¨‹\n\n### 3.2. å°†ä¸Šé¢æ„é€ å‡ºçš„ token åˆ—è¡¨æ„é€ æˆ`æ ‘å½¢ AST`\n\nå®ç°ä¸€ä¸ª `parse` å‡½æ•°ï¼Œå³å°† `ä¸Šé¢çš„token åˆ—è¡¨`è¾“å‡ºä¸ºå¦‚ä¸‹`æ ‘ç»“æ„`ï¼Œå¦‚ä¸‹ç»“æ„å°±æ˜¯ `AST` æˆ–è€…è¯´æ˜¯  `Vnode`\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-19.png)\n\n```json\n{\n    \"type\": \"Root\",\n    \"children\": [\n        {\n            \"type\": \"Element\",\n            \"tag\": \"div\",\n            \"children\": [\n                {\n                    \"type\": \"Element\",\n                    \"tag\": \"p\",\n                    \"children\": [\n                        {\n                            \"type\": \"Text\",\n                            \"content\": \"Vue\"\n                        }\n                    ]\n                },\n                {\n                    \"type\": \"Element\",\n                    \"tag\": \"p\",\n                    \"children\": [\n                        {\n                            \"type\": \"Text\",\n                            \"content\": \"Template\"\n                        }\n                    ]\n                }\n            ]\n        }\n    ]\n}\n```\n\næ‰«æ Token åˆ—è¡¨å¹¶ç»´æŠ¤ä¸€ä¸ªå¼€å§‹æ ‡ç­¾`æ ˆ`ã€‚\n- æ¯å½“æ‰«æåˆ°ä¸€ä¸ªå¼€å§‹æ ‡ç­¾èŠ‚ç‚¹ï¼Œå°±å°†å…¶å‹å…¥æ ˆé¡¶ã€‚\n- æ ˆé¡¶çš„èŠ‚ç‚¹å§‹ç»ˆä½œä¸ºä¸‹ä¸€ä¸ªæ‰«æçš„èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚\n- è¿™æ ·ï¼Œå½“æ‰€æœ‰ Token æ‰«æå®Œæ¯•åï¼Œå³å¯æ„å»ºå‡ºä¸€æ£µæ ‘å‹ AST\n\nå…·ä½“ä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\nconst template = `<div><p>Vue</p><p>Template</p></div>`;\nfunction parse(str) {\n  const tokens = tokenize(str);\n  // è‡ªå®šä¹‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹\n  const root = {\n    type: \"Root\",\n    children: [],\n  };\n  // æ ‡ç­¾æ ˆ\n  const elementStack = [root];\n\n  while (tokens.length) {\n    const parent = elementStack[elementStack.length - 1];\n    const t = tokens[0];\n    switch (t.type) {\n      case \"tag\":\n        // å…ƒç´ èŠ‚ç‚¹å®šä¹‰\n        const elementNode = {\n          type: \"Element\",\n          tag: t.name,\n          children: [],\n        };\n        parent.children.push(elementNode);\n        elementStack.push(elementNode);\n        break;\n      // æ–‡æœ¬èŠ‚ç‚¹å®šä¹‰\n      case \"text\":\n        const textNode = {\n          type: \"Text\",\n          content: t.content,\n        };\n        parent.children.push(textNode);\n        break;\n      // è®°å¾— pop   \n      case \"tagEnd\":\n        elementStack.pop();\n        break;\n    }\n    tokens.shift();\n  }\n\n  return root;\n}\n\n\n```\n\n> è¿™åªæ˜¯ç®€å•å®ç°ï¼Œæ²¡æœ‰è€ƒè™‘é—­åˆçš„åœºæ™¯ï¼Œå¯æ‰§è¡Œçš„ä»£ç è§ `codes` ç›®å½•\n\n### 3.3. å®Œæˆæµç¨‹ç¤ºæ„å›¾\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-20.png)\n\n### 3.4. å¦‚ä½•æœ‰æ•ˆçš„éå† AST æ ‘ï¼Ÿï¼ˆæ’ä»¶åŒ–æ¶æ„ï¼‰\n \næ·±åº¦éå†å¦‚ä¸‹ `AST æ ‘`æ—¶\n\n```json\n{\n    \"type\": \"Root\",\n    \"children\": [\n        {\n            \"type\": \"Element\",\n            \"tag\": \"div\",\n            \"children\": [\n                {\n                    \"type\": \"Element\",\n                    \"tag\": \"p\",\n                    \"children\": [\n                        {\n                            \"type\": \"Text\",\n                            \"content\": \"Vue\"\n                        }\n                    ]\n                },\n                {\n                    \"type\": \"Element\",\n                    \"tag\": \"p\",\n                    \"children\": [\n                        {\n                            \"type\": \"Text\",\n                            \"content\": \"Template\"\n                        }\n                    ]\n                }\n            ]\n        }\n    ]\n}\n\n```\n \n ä¸ºäº†è§£è€¦èŠ‚ç‚¹çš„è®¿é—®å’Œæ“ä½œï¼Œæˆ‘ä»¬è®¾è®¡äº†`æ’ä»¶åŒ–æ¶æ„`ï¼Œ å°†èŠ‚ç‚¹çš„æ“ä½œå°è£…åˆ°`ç‹¬ç«‹çš„è½¬æ¢å‡½æ•°`ä¸­ã€‚\n - è¿™äº›è½¬æ¢å‡½æ•°å¯ä»¥é€šè¿‡ `context.nodeTransforms` æ¥æ³¨å†Œã€‚\n - è¿™é‡Œçš„ `context` ç§°ä¸ºè½¬æ¢`ä¸Šä¸‹æ–‡`ã€‚\n\t - ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­é€šå¸¸ä¼šç»´æŠ¤ç¨‹åºçš„å½“å‰çŠ¶æ€ï¼Œä¾‹å¦‚\n\t\t - å½“å‰è®¿é—®çš„èŠ‚ç‚¹\n\t\t - å½“å‰è®¿é—®çš„èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹\n\t\t - å½“å‰è®¿é—®çš„èŠ‚ç‚¹çš„ä½ç½®ç´¢å¼•ç­‰ä¿¡æ¯ã€‚ \n\t\t - æœ‰äº†ä¸Šä¸‹æ–‡å¯¹è±¡åŠå…¶åŒ…å«çš„é‡è¦ä¿¡æ¯åï¼Œæˆ‘ä»¬å³å¯è½»æ¾åœ°å®ç°èŠ‚ç‚¹çš„æ›¿æ¢ã€åˆ é™¤ç­‰èƒ½åŠ›ã€‚\n - éå†çš„`è¿›å…¥`å’Œ`ç¦»å¼€`é˜¶æ®µ\n\t - ä½†æœ‰æ—¶ï¼Œå½“å‰è®¿é—®èŠ‚ç‚¹çš„è½¬æ¢å·¥ä½œä¾èµ–äºå…¶å­èŠ‚ç‚¹çš„è½¬æ¢ç»“æœï¼Œæ‰€ä»¥ä¸ºäº†`ä¼˜å…ˆ`å®Œæˆå­èŠ‚ç‚¹çš„è½¬æ¢ï¼Œæˆ‘ä»¬å°†æ•´ä¸ªè½¬æ¢è¿‡ ç¨‹åˆ†ä¸ºâ€œ`è¿›å…¥`é˜¶æ®µâ€ä¸â€œ`é€€å‡º`é˜¶æ®µâ€ã€‚\n\t - æ¯ä¸ªè½¬æ¢å‡½æ•°éƒ½åˆ†ä¸¤ä¸ªé˜¶æ®µæ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥å®ç°`æ›´åŠ ç»†ç²’åº¦`çš„è½¬æ¢æ§åˆ¶ã€‚\n\n#### 3.4.1. å…·ä½“ä»£ç ï¼Œå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ä¸€ä¸ª`å¤šå‰æ ‘çš„éå†`è€Œå·²\n\n```javascript\n\n// è½¬æ¢å‡½æ•° 1 ç”¨äºè½¬æ¢å…ƒç´ èŠ‚ç‚¹\nfunction transformElement(node) {\n  console.log(`è¿›å…¥ï¼š${JSON.stringify(node)}`);\n  return () => {\n    console.log(`é€€å‡ºï¼š${JSON.stringify(node)}`);\n  };\n}\n// è½¬æ¢å‡½æ•° 2 ç”¨äºè½¬æ¢æ–‡æœ¬èŠ‚ç‚¹\nfunction transformText(node, context) {\n  console.log(`è¿›å…¥ï¼š${JSON.stringify(node)}`);\n\n  return () => {\n    console.log(`é€€å‡ºï¼š${JSON.stringify(node)}`);\n  };\n}\n\n// éå†èŠ‚ç‚¹ï¼Œæ·±åº¦ä¼˜å…ˆéå†ï¼Œä¼ å…¥èŠ‚ç‚¹å’Œä¸Šä¸‹æ–‡å¯¹è±¡\nfunction traverseNode(ast, context) {\n  context.currentNode = ast;\n\n  // éå†èŠ‚ç‚¹è½¬æ¢å‡½æ•°çš„returnå€¼, ç”¨äºé€€å‡ºæ—¶æ‰§è¡Œ\n  const exitFns = [];\n  const transforms = context.nodeTransforms;\n  // éå†èŠ‚ç‚¹è½¬æ¢å‡½æ•°, ä¼ å…¥å½“å‰èŠ‚ç‚¹å’Œä¸Šä¸‹æ–‡å¯¹è±¡,ç„¶åæ‰§è¡Œ\n  for (let i = 0; i < transforms.length; i++) {\n    // æ‰§è¡ŒèŠ‚ç‚¹è½¬æ¢å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºé€€å‡ºæ—¶æ‰§è¡Œ\n    const onExit = transforms[i](context.currentNode, context);\n    if (onExit) {\n      exitFns.push(onExit);\n    }\n    if (!context.currentNode) return;\n  }\n\n  // éå†å­èŠ‚ç‚¹,é€’å½’éå†\n  const children = context.currentNode.children;\n  if (children) {\n    for (let i = 0; i < children.length; i++) {\n      // è®°å¾—æ›´æ–°ä¸Šä¸‹æ–‡ä¿¡æ¯\n      context.parent = context.currentNode;\n      context.childIndex = i;\n      traverseNode(children[i], context);\n    }\n  }\n\n  // é€€å‡ºæ—¶æ‰§è¡Œ,èµ°åˆ°è¿™å„¿è¯´æ˜å½“å‰èŠ‚ç‚¹å·²ç»éå†å®Œäº†\n  // ååºä½ç½®ï¼Œè¿™æ˜¯ç¦»å¼€èŠ‚ç‚¹æ—¶æ‰§è¡Œçš„å‡½æ•°\n  let i = exitFns.length;\n  while (i--) {\n    exitFns[i]();\n  }\n}\n\nfunction transform(ast) {\n  // éå†çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ŒåŒ…æ‹¬\n  // å½“å‰èŠ‚ç‚¹çˆ¶èŠ‚ç‚¹\n  // å½“å‰èŠ‚ç‚¹åœ¨çˆ¶èŠ‚ç‚¹ä¸­çš„ç´¢å¼•\n  // æ›¿æ¢èŠ‚ç‚¹\n  // åˆ é™¤èŠ‚ç‚¹\n  // èŠ‚ç‚¹è½¬æ¢å‡½æ•°\n  const context = {\n    currentNode: null,\n    parent: null,\n    replaceNode(node) {\n      context.currentNode = node;\n      context.parent.children[context.childIndex] = node;\n    },\n    removeNode() {\n      if (context.parent) {\n        context.parent.children.splice(context.childIndex, 1);\n        context.currentNode = null;\n      }\n    },\n    // æ’ä»¶çš„æ–¹å¼æ‰©å±•åŠŸèƒ½\n    // èŠ‚ç‚¹è½¬æ¢å‡½æ•°, ç”¨äºå¯¹èŠ‚ç‚¹è¿›è¡Œè½¬æ¢\n    // ä¼ å…¥èŠ‚ç‚¹å’Œä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œ\n    //  è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºåœ¨é€€å‡ºèŠ‚ç‚¹æ—¶æ‰§è¡Œ\n    nodeTransforms: [transformElement, transformText],\n  };\n  // è°ƒç”¨ traverseNode å®Œæˆè½¬æ¢ï¼Œä¼ å…¥ AST å’Œä¸Šä¸‹æ–‡å¯¹è±¡\n  // è¿™æ˜¯ä¸€ä¸ªDFSé€’å½’éå†çš„è¿‡ç¨‹\n  traverseNode(ast, context);\n  // æ‰“å° AST ä¿¡æ¯\n  console.log(dump(ast));\n}\n\nconst ast = parse(`<div><p>Vue</p><p>Template</p></div>`);\ntransform(ast);\n```\n\n#### 3.4.2. é™„ï¼š  Context(ä¸Šä¸‹æ–‡)\n\n- åœ¨ç¼–å†™ React åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `React.createContext` å‡½æ•°åˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè¯¥ä¸Šä¸‹æ–‡å¯¹è±¡å…è®¸æˆ‘ä»¬å°†æ•°æ®é€šè¿‡ç»„ä»¶ æ ‘ä¸€å±‚å±‚åœ°ä¼ é€’ä¸‹å»ã€‚æ— è®ºç»„ä»¶æ ‘çš„å±‚çº§æœ‰å¤šæ·±ï¼Œåªè¦ç»„ä»¶åœ¨è¿™ æ£µç»„ä»¶æ ‘çš„å±‚çº§å†…ï¼Œé‚£ä¹ˆå®ƒå°±èƒ½å¤Ÿè®¿é—®ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­çš„æ•°æ®ã€‚\n-  åœ¨ç¼–å†™ Vue.js åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ `provide/inject` ç­‰èƒ½åŠ›ï¼Œå‘ä¸€æ•´æ£µç»„ä»¶æ ‘æä¾›æ•°æ®ã€‚è¿™äº›æ•°æ®å¯ä»¥ç§°ä¸ºä¸Šä¸‹æ–‡ã€‚ \n- åœ¨ç¼–å†™ Koa åº”ç”¨æ—¶ï¼Œä¸­é—´ä»¶å‡½æ•°æ¥æ”¶çš„ context å‚æ•°ä¹Ÿæ˜¯ä¸€ç§ä¸Š ä¸‹æ–‡å¯¹è±¡ï¼Œæ‰€æœ‰ä¸­é—´ä»¶éƒ½å¯ä»¥é€šè¿‡ context æ¥è®¿é—®ç›¸åŒçš„æ•°æ®\n\n### 3.5. å°†æ¨¡æ¿ AST è½¬æ¢ä¸ºç”¨äºæè¿°æ¸²æŸ“å‡½æ•°çš„ JavaScript AST\n\n#### 3.5.1. JavaScript AST ä»‹ç»\n\nJavaScript AST ç”¨äºæè¿° JavaScript ä»£ç ã€‚åªæœ‰æŠŠæ¨¡æ¿ AST è½¬æ¢ä¸º JavaScript AST åï¼Œæˆ‘ä»¬æ‰èƒ½æ®æ­¤ç”Ÿæˆæœ€ç»ˆçš„æ¸²æŸ“å‡½æ•°ä»£ç ã€‚\n\n```javascript\nfunction render() {\n  return h(\"div\", [h(\"p\", \"Vue\"), h(\"p\", \"Template\")]);\n}\n```\n\n ä¸Šé¢ä»£ç å¯¹åº”çš„ `js AST` æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¦‚ä¸‹\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-21.png)\n\nä¸‹é¢æ˜¯å…·ä½“ç»“æ„\n\n```javascript\n// æœ€ç»ˆç”Ÿæˆçš„ jsAST\nconst jsAST = {\n  // ä»£è¡¨è¯¥èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜\n  type: \"FunctionDecl\",\n  // æ ‡è¯†ç¬¦ï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥æœ‰è‡ªå·±çš„typeå’Œnameå±æ€§\n  id: {\n    type: \"Identifier\",\n    name: \"render\", // å‡½æ•°å\n  },\n  params: [], // å‚æ•°åˆ—è¡¨\n  body: [\n    // å‡½æ•°ä½“\n    {\n      type: \"ReturnStatement\", // ä»£è¡¨è¯¥èŠ‚ç‚¹æ˜¯ä¸€ä¸ªè¿”å›è¯­å¥\n      return: {\n        type: \"CallExpression\",\n        callee: {\n          type: \"Identifier\",\n          name: \"h\",\n        },\n        arguments: [\n          {\n            type: \"StringLiteral\",\n            value: \"div\",\n          },\n          {\n            type: \"ArrayExpression\",\n            elements: [\n              {\n                type: \"CallExpression\",\n                callee: {\n                  type: \"Identifier\",\n                  name: \"h\",\n                },\n                arguments: [\n                  {\n                    type: \"StringLiteral\",\n                    value: \"p\",\n                  },\n                  {\n                    type: \"StringLiteral\",\n                    value: \"Vue\",\n                  },\n                ],\n              },\n              {\n                type: \"CallExpression\",\n                callee: {\n                  type: \"Identifier\",\n                  name: \"h\",\n                },\n                arguments: [\n                  {\n                    type: \"StringLiteral\",\n                    value: \"p\",\n                  },\n                  {\n                    type: \"StringLiteral\",\n                    value: \"Template\",\n                  },\n                ],\n              },\n            ],\n          },\n        ],\n      },\n    },\n  ],\n};\n```\n\n#### 3.5.2. å°†æ¨¡æ¿ AST è½¬æ¢ JS AST\n\nå…ˆå†™å‡ ä¸ªç”Ÿæˆ JS  AST çš„è¾…åŠ©å‡½æ•°\n\n```javascript\n// åˆ›å»º AST èŠ‚ç‚¹: StringLiteral èŠ‚ç‚¹\nfunction createStringLiteral(value) {\n  return {\n    type: \"StringLiteral\",\n    value,\n  };\n}\n// åˆ›å»º AST èŠ‚ç‚¹: Identifier  èŠ‚ç‚¹\nfunction createIdentifier(name) {\n  return {\n    type: \"Identifier\",\n    name,\n  };\n}\n// åˆ›å»º AST èŠ‚ç‚¹: ArrayExpression  èŠ‚ç‚¹\nfunction createArrayExpression(elements) {\n  return {\n    type: \"ArrayExpression\",\n    elements,\n  };\n}\n// åˆ›å»º AST èŠ‚ç‚¹: CallExpression èŠ‚ç‚¹\nfunction createCallExpression(callee, arguments) {\n  return {\n    type: \"CallExpression\",\n    callee: createIdentifier(callee),\n    arguments,\n  };\n}\n```\n\nå®Œæ•´ä»£ç ï¼š\n\n```javascript\nfunction traverseNode(ast, context) {\n  context.currentNode = ast;\n\n  const exitFns = [];\n  const transforms = context.nodeTransforms;\n  for (let i = 0; i < transforms.length; i++) {\n    const onExit = transforms[i](context.currentNode, context);\n    if (onExit) {\n      exitFns.push(onExit);\n    }\n    if (!context.currentNode) return;\n  }\n\n  const children = context.currentNode.children;\n  if (children) {\n    for (let i = 0; i < children.length; i++) {\n      context.parent = context.currentNode;\n      context.childIndex = i;\n      traverseNode(children[i], context);\n    }\n  }\n\n  let i = exitFns.length;\n  while (i--) {\n    exitFns[i]();\n  }\n}\n\nfunction transform(ast) {\n  const context = {\n    currentNode: null,\n    parent: null,\n    replaceNode(node) {\n      context.currentNode = node;\n      context.parent.children[context.childIndex] = node;\n    },\n    removeNode() {\n      if (context.parent) {\n        context.parent.children.splice(context.childIndex, 1);\n        context.currentNode = null;\n      }\n    },\n    nodeTransforms: [transformRoot, transformElement, transformText],\n  };\n  // è°ƒç”¨ traverseNode å®Œæˆè½¬æ¢\n  traverseNode(ast, context);\n}\n\n// =============================== AST å·¥å…·å‡½æ•° ===============================\n\n// åˆ›å»º AST èŠ‚ç‚¹: StringLiteral èŠ‚ç‚¹\nfunction createStringLiteral(value) {\n  return {\n    type: \"StringLiteral\",\n    value,\n  };\n}\n// åˆ›å»º AST èŠ‚ç‚¹: Identifier  èŠ‚ç‚¹\nfunction createIdentifier(name) {\n  return {\n    type: \"Identifier\",\n    name,\n  };\n}\n// åˆ›å»º AST èŠ‚ç‚¹: ArrayExpression  èŠ‚ç‚¹\nfunction createArrayExpression(elements) {\n  return {\n    type: \"ArrayExpression\",\n    elements,\n  };\n}\n// åˆ›å»º AST èŠ‚ç‚¹: CallExpression èŠ‚ç‚¹\nfunction createCallExpression(callee, arguments) {\n  return {\n    type: \"CallExpression\",\n    callee: createIdentifier(callee),\n    arguments,\n  };\n}\n\n// =============================== AST å·¥å…·å‡½æ•° ===============================\n\n// æ¨¡æ¿ AST æ–‡æœ¬ è½¬æ¢ JS  StringLiteral èŠ‚ç‚¹\nfunction transformText(node) {\n  if (node.type !== \"Text\") {\n    return;\n  }\n\n  node.jsNode = createStringLiteral(node.content);\n}\n\n// æ¨¡æ¿ AST å…ƒç´  è½¬æ¢ JS  CallExpression èŠ‚ç‚¹,å› ä¸ºè¦è°ƒç”¨ h å‡½æ•°\nfunction transformElement(node) {\n  return () => {\n    if (node.type !== \"Element\") {\n      return;\n    }\n\n    const callExp = createCallExpression(\"h\", [createStringLiteral(node.tag)]);\n    node.children.length === 1\n      ? callExp.arguments.push(node.children[0].jsNode)\n      : callExp.arguments.push(\n          createArrayExpression(node.children.map((c) => c.jsNode)),\n        );\n\n    node.jsNode = callExp;\n  };\n}\n\n// æ¨¡æ¿ AST æ ¹èŠ‚ç‚¹ è½¬æ¢ JS  FunctionDecl èŠ‚ç‚¹\n// æ ¹èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œæ‰€ä»¥ç›´æ¥è¿”å›å­èŠ‚ç‚¹çš„ jsNode\nfunction transformRoot(node) {\n  return () => {\n    if (node.type !== \"Root\") {\n      return;\n    }\n\n    const vnodeJSAST = node.children[0].jsNode;\n\n    node.jsNode = {\n      type: \"FunctionDecl\",\n      id: { type: \"Identifier\", name: \"render\" },\n      params: [],\n      body: [\n        {\n          type: \"ReturnStatement\",\n          return: vnodeJSAST,\n        },\n      ],\n    };\n  };\n}\n\nconst ast = parse(`<div><p>Vue</p><p>Template</p></div>`);\ntransform(ast);\n\nconsole.log(ast);\n```\n\n### 3.6. æ¸²æŸ“å‡½æ•°ä»£ç çš„ç”Ÿæˆ\n\nä»£ç ç”Ÿæˆçš„è¿‡ç¨‹å°±æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥çš„è¿‡ç¨‹ã€‚æˆ‘ä»¬éœ€è¦ä¸ºä¸åŒçš„ AST èŠ‚ç‚¹ç¼–å†™å¯¹åº”çš„ä»£ç ç”Ÿæˆå‡½æ•°ã€‚\n- ä¸ºäº†è®©ç”Ÿæˆçš„ä»£ç å…·æœ‰æ›´å¼ºçš„å¯è¯»æ€§ï¼Œæˆ‘ä»¬å¯å¯¹ç”Ÿæˆçš„ä»£ç è¿›è¡Œç¼©è¿›å’Œæ¢è¡Œã€‚\n\t- æˆ‘ä»¬å°†ç”¨äºç¼©è¿›å’Œæ¢è¡Œçš„ä»£ç å°è£…ä¸ºå·¥å…·å‡½æ•°ï¼Œå¹¶ä¸”å®šä¹‰åˆ°ä»£ç ç”Ÿæˆè¿‡ç¨‹ä¸­çš„`ä¸Šä¸‹æ–‡å¯¹è±¡`ä¸­\n\n#### 3.6.1. å…ˆçœ‹è°ƒç”¨ generate çš„æ•ˆæœ\n\n```javascript\n// æœ€ç»ˆç”Ÿæˆçš„ jsAST\nconst jsAST = {\n  type: \"FunctionDecl\",\n  id: {\n    type: \"Identifier\",\n    name: \"render\",\n  },\n  params: [],\n  body: [\n    {\n      type: \"ReturnStatement\",\n      return: {\n        type: \"CallExpression\",\n        callee: {\n          type: \"Identifier\",\n          name: \"h\",\n        },\n        arguments: [\n          {\n            type: \"StringLiteral\",\n            value: \"div\",\n          },\n          {\n            type: \"ArrayExpression\",\n            elements: [\n              {\n                type: \"CallExpression\",\n                callee: {\n                  type: \"Identifier\",\n                  name: \"h\",\n                },\n                arguments: [\n                  {\n                    type: \"StringLiteral\",\n                    value: \"p\",\n                  },\n                  {\n                    type: \"StringLiteral\",\n                    value: \"Vue\",\n                  },\n                ],\n              },\n              {\n                type: \"CallExpression\",\n                callee: {\n                  type: \"Identifier\",\n                  name: \"h\",\n                },\n                arguments: [\n                  {\n                    type: \"StringLiteral\",\n                    value: \"p\",\n                  },\n                  {\n                    type: \"StringLiteral\",\n                    value: \"Template\",\n                  },\n                ],\n              },\n            ],\n          },\n        ],\n      },\n    },\n  ],\n};\n\nconsole.log(generate(jsAST));\n\n// function render () {\n//   return h('div', [h('p', 'Vue'), h('p', 'Template')])\n// }\n\n```\n\n#### 3.6.2. generate çš„å®ç°\n\n> å°±æ˜¯å­—ç¬¦ä¸²çš„æ‹¼æ¥å·¥ä½œï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„\n\n```javascript\nfunction generate(node) {\n  const context = {\n    code: \"\",\n    push(code) {\n      context.code += code;\n    },\n    currentIndent: 0,\n    newline() {\n      context.code += \"\\n\" + `  `.repeat(context.currentIndent);\n    },\n    indent() {\n      context.currentIndent++;\n      context.newline();\n    },\n    deIndent() {\n      context.currentIndent--;\n      context.newline();\n    },\n  };\n\n  genNode(node, context);\n\n  return context.code;\n}\n\nfunction genNode(node, context) {\n  switch (node.type) {\n    case \"FunctionDecl\":\n      genFunctionDecl(node, context);\n      break;\n    case \"ReturnStatement\":\n      genReturnStatement(node, context);\n      break;\n    case \"CallExpression\":\n      genCallExpression(node, context);\n      break;\n    case \"StringLiteral\":\n      genStringLiteral(node, context);\n      break;\n    case \"ArrayExpression\":\n      genArrayExpression(node, context);\n      break;\n  }\n}\n\nfunction genFunctionDecl(node, context) {\n  const { push, indent, deIndent } = context;\n\n  push(`function ${node.id.name} `);\n  push(`(`);\n  genNodeList(node.params, context);\n  push(`) `);\n  push(`{`);\n  indent();\n\n  node.body.forEach((n) => genNode(n, context));\n\n  deIndent();\n  push(`}`);\n}\n\nfunction genNodeList(nodes, context) {\n  const { push } = context;\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n    genNode(node, context);\n    if (i < nodes.length - 1) {\n      push(\", \");\n    }\n  }\n}\n\nfunction genReturnStatement(node, context) {\n  const { push } = context;\n\n  push(`return `);\n  genNode(node.return, context);\n}\n\nfunction genCallExpression(node, context) {\n  const { push } = context;\n  const { callee, arguments: args } = node;\n  push(`${callee.name}(`);\n  genNodeList(args, context);\n  push(`)`);\n}\n\nfunction genStringLiteral(node, context) {\n  const { push } = context;\n\n  push(`'${node.value}'`);\n}\n\nfunction genArrayExpression(node, context) {\n  const { push } = context;\n  push(\"[\");\n  genNodeList(node.elements, context);\n  push(\"]\");\n}\n\n```\n\n### 3.7. æœ€å\n\n","b72afd5f9fdc579db9302234085bee13":"\n# Vue3 çš„ç¼–è¯‘å™¨åŸç†ï¼ˆç¯‡äºŒï¼šå®Œå–„çš„ HTML è§£æå™¨ï¼‰\n\n`#vue3` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‰è¨€ \n\n- è§£æå™¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªçŠ¶æ€æœºã€‚Â·\n- æ­£åˆ™è¡¨è¾¾å¼å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªçŠ¶æ€æœºã€‚\n- å› æ­¤åœ¨ç¼–å†™ parser çš„æ—¶å€™ï¼Œåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼èƒ½å¤Ÿè®©æˆ‘ä»¬å°‘å†™ä¸å°‘ä»£ç ã€‚æœ¬ç« æˆ‘ä»¬å°†æ›´å¤šåœ°åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥å®ç° HTML è§£æå™¨ã€‚\n- å¦å¤–ï¼Œä¸€ä¸ªå®Œå–„çš„ HTML è§£æå™¨è¿œæ¯”æƒ³è±¡çš„è¦å¤æ‚ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œ**æµè§ˆå™¨ä¼šå¯¹ HTML æ–‡æœ¬è¿›è¡Œè§£æ**ï¼Œé‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•åšçš„å‘¢? \n\t- å…¶å®å…³äº HTML æ–‡æœ¬çš„è§£æï¼Œæ˜¯æœ‰è§„èŒƒå¯å¾ªçš„ï¼Œå³ WHATWG å…³äº HTML çš„è§£æè§„èŒƒï¼Œå…¶ä¸­**å®šä¹‰äº†å®Œæ•´çš„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€æœºçš„çŠ¶æ€è¿ç§»æµç¨‹**ï¼Œè¿˜æåŠäº†ä¸€äº›**ç‰¹æ®Šçš„çŠ¶æ€**ï¼Œ\n\t\t- ä¾‹å¦‚ DATAã€CDATAã€RCDATAã€ RAWTEXT ç­‰ã€‚\n\t\t- é‚£ä¹ˆï¼Œè¿™äº›çŠ¶æ€æœ‰ä»€ä¹ˆå«ä¹‰å‘¢?\n\t\t- å®ƒä»¬å¯¹è§£æå™¨æœ‰å“ªäº›å½± å“å‘¢?ä»€ä¹ˆæ˜¯ HTML å®ä½“ï¼Œ\n\t\t- ä»¥åŠ Vue.js æ¨¡æ¿è§£æå™¨éœ€è¦å¦‚ä½•å¤„ç† HTML å®ä½“å‘¢?\n\n## 2. å®Œå–„çš„ HTML è§£æå™¨\n\n```javascript\n// å®šä¹‰æ–‡æœ¬æ¨¡å¼ï¼ŒçŠ¶æ€è¡¨\nconst TextModes = {\n  DATA: \"DATA\", // æ™®é€šæ–‡æœ¬æ¨¡å¼\n  RCDATA: \"RCDATA\", // è§£æå­—ç¬¦æ•°æ®æ¨¡å¼\n  RAWTEXT: \"RAWTEXT\", // åŸå§‹æ–‡æœ¬æ¨¡å¼\n  CDATA: \"CDATA\", // CDATA æ¨¡å¼\n};\n\n// è§£æ Vue æ¨¡æ¿, è¿”å› AST\n// ä¼ å…¥ä¸€ä¸ª vue æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡\nfunction parse(str) {\n  // å®šä¹‰ä¸Šä¸‹æ–‡å¯¹è±¡\n  const context = {\n    source: str, // æ¨¡æ¿å†…å®¹\n    mode: TextModes.DATA, // å½“å‰æ¨¡å¼\n    // å‰è¿›æŒ‡å®šé•¿åº¦çš„å­—ç¬¦\n    advanceBy(num) {\n      context.source = context.source.slice(num); // æˆªå–å­—ç¬¦ä¸²ï¼Œå‰è¿›æŒ‡å®šé•¿åº¦\n    },\n    // è·³è¿‡ç©ºç™½å­—ç¬¦\n    advanceSpaces() {\n      const match = /^[\\t\\r\\n\\f ]+/.exec(context.source); // åŒ¹é…ç©ºç™½å­—ç¬¦\n      if (match) {\n        context.advanceBy(match[0].length); // å‰è¿›åŒ¹é…åˆ°çš„ç©ºç™½å­—ç¬¦é•¿åº¦\n      }\n    },\n  };\n\n  // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œ\n  // ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä»£è¡¨çˆ¶èŠ‚ç‚¹æ„æˆçš„èŠ‚ç‚¹æ ˆï¼Œåˆå§‹ä¸ºç©ºæ•°ç»„\n  const nodes = parseChildren(context, []); // è§£æå­èŠ‚ç‚¹\n\n  return {\n    type: \"Root\", // æ ¹èŠ‚ç‚¹ç±»å‹\n    children: nodes, // å­èŠ‚ç‚¹\n  };\n}\n\n// è§£æå­èŠ‚ç‚¹\nfunction parseChildren(context, ancestors) {\n  let nodes = []; // å­˜å‚¨è§£æå‡ºçš„å­èŠ‚ç‚¹\n\n  const { mode } = context; // è·å–å½“å‰æ¨¡å¼\n\n  // å¾ªç¯è§£æï¼Œç›´åˆ°æ¨¡æ¿å­—ç¬¦ä¸²ç»“æŸæˆ–é‡åˆ°ç»“æŸæ ‡ç­¾\n  while (!isEnd(context, ancestors)) {\n    let node; // å½“å‰è§£æå‡ºçš„èŠ‚ç‚¹\n\n    // æ ¹æ®å½“å‰æ¨¡å¼è§£æä¸åŒç±»å‹çš„èŠ‚ç‚¹\n    if (mode === TextModes.DATA || mode === TextModes.RCDATA) {\n      if (mode === TextModes.DATA && context.source[0] === \"<\") {\n        if (context.source[1] === \"!\") {\n          if (context.source.startsWith(\"<!--\")) {\n            // è§£ææ³¨é‡Š\n            node = parseComment(context);\n          } else if (context.source.startsWith(\"<![CDATA[\")) {\n            // è§£æ CDATA\n            node = parseCDATA(context, ancestors);\n          }\n        } else if (context.source[1] === \"/\") {\n          // ç»“æŸæ ‡ç­¾ï¼Œä¸åšå¤„ç†\n        } else if (/[a-z]/i.test(context.source[1])) {\n          // è§£æå…ƒç´ æ ‡ç­¾\n          node = parseElement(context, ancestors);\n        }\n      } else if (context.source.startsWith(\"{{\")) {\n        // è§£ææ’å€¼\n        node = parseInterpolation(context);\n      }\n    }\n\n    // å¦‚æœæ²¡æœ‰è§£æå‡ºèŠ‚ç‚¹ï¼Œåˆ™è§£æä¸ºæ–‡æœ¬èŠ‚ç‚¹\n    if (!node) {\n      node = parseText(context);\n    }\n\n    nodes.push(node); // å°†è§£æå‡ºçš„èŠ‚ç‚¹åŠ å…¥èŠ‚ç‚¹æ•°ç»„\n  }\n\n  return nodes; // è¿”å›è§£æå‡ºçš„å­èŠ‚ç‚¹æ•°ç»„\n}\n\n// è§£æå…ƒç´ èŠ‚ç‚¹\nfunction parseElement(context, ancestors) {\n  // è§£æå¼€å§‹æ ‡ç­¾\n  const element = parseTag(context);\n  if (element.isSelfClosing) return element; // å¦‚æœæ˜¯è‡ªé—­åˆæ ‡ç­¾ï¼Œç›´æ¥è¿”å›\n\n  // å°†å½“å‰å…ƒç´ èŠ‚ç‚¹åŠ å…¥çˆ¶èŠ‚ç‚¹æ ˆ\n  ancestors.push(element);\n\n  // æ ¹æ®æ ‡ç­¾ç±»å‹åˆ‡æ¢æ¨¡å¼\n  if (element.tag === \"textarea\" || element.tag === \"title\") {\n    context.mode = TextModes.RCDATA;\n  } else if (/style|xmp|iframe|noembed|noframes|noscript/.test(element.tag)) {\n    context.mode = TextModes.RAWTEXT;\n  } else {\n    context.mode = TextModes.DATA;\n  }\n\n  // è§£æå­èŠ‚ç‚¹\n  element.children = parseChildren(context, ancestors);\n\n  // ä»çˆ¶èŠ‚ç‚¹æ ˆä¸­ç§»é™¤å½“å‰å…ƒç´ èŠ‚ç‚¹\n  ancestors.pop();\n\n  // è§£æç»“æŸæ ‡ç­¾\n  if (context.source.startsWith(`</${element.tag}`)) {\n    parseTag(context, \"end\");\n  } else {\n    console.error(`${element.tag} æ ‡ç­¾ç¼ºå°‘é—­åˆæ ‡ç­¾`);\n  }\n\n  return element; // è¿”å›è§£æå‡ºçš„å…ƒç´ èŠ‚ç‚¹\n}\n\n// è§£ææ ‡ç­¾\nfunction parseTag(context, type = \"start\") {\n  const { advanceBy, advanceSpaces } = context; // è·å–ä¸Šä¸‹æ–‡ä¸­çš„æ–¹æ³•\n\n  // åŒ¹é…å¼€å§‹æ ‡ç­¾æˆ–ç»“æŸæ ‡ç­¾\n  const match =\n    type === \"start\"\n      ? /^<([a-z][^\\t\\r\\n\\f />]*)/i.exec(context.source) // åŒ¹é…å¼€å§‹æ ‡ç­¾\n      : /^<\\/([a-z][^\\t\\r\\n\\f />]*)/i.exec(context.source); // åŒ¹é…ç»“æŸæ ‡ç­¾\n  const tag = match[1]; // è·å–æ ‡ç­¾å\n\n  // å‰è¿›åˆ°æ ‡ç­¾åä¹‹å\n  advanceBy(match[0].length);\n  advanceSpaces(); // è·³è¿‡ç©ºç™½å­—ç¬¦\n\n  // è§£æå±æ€§\n  const props = parseAttributes(context);\n\n  // åˆ¤æ–­æ˜¯å¦è‡ªé—­åˆæ ‡ç­¾\n  const isSelfClosing = context.source.startsWith(\"/>\");\n  advanceBy(isSelfClosing ? 2 : 1); // å‰è¿›åˆ°æ ‡ç­¾ç»“æŸç¬¦ä¹‹å\n\n  return {\n    type: \"Element\", // å…ƒç´ èŠ‚ç‚¹ç±»å‹\n    tag, // æ ‡ç­¾å\n    props, // å±æ€§\n    children: [], // å­èŠ‚ç‚¹\n    isSelfClosing, // æ˜¯å¦è‡ªé—­åˆ\n  };\n}\n\n// è§£æå±æ€§\nfunction parseAttributes(context) {\n  const { advanceBy, advanceSpaces } = context; // è·å–ä¸Šä¸‹æ–‡ä¸­çš„æ–¹æ³•\n  const props = []; // å­˜å‚¨è§£æå‡ºçš„å±æ€§\n\n  // å¾ªç¯è§£æå±æ€§ï¼Œç›´åˆ°é‡åˆ°æ ‡ç­¾ç»“æŸç¬¦\n  while (!context.source.startsWith(\">\") && !context.source.startsWith(\"/>\")) {\n    const match = /^[^\\t\\r\\n\\f />][^\\t\\r\\n\\f />=]*/.exec(context.source); // åŒ¹é…å±æ€§å\n    const name = match[0]; // è·å–å±æ€§å\n\n    advanceBy(name.length); // å‰è¿›åˆ°å±æ€§åä¹‹å\n    advanceSpaces(); // è·³è¿‡ç©ºç™½å­—ç¬¦\n    advanceBy(1); // è·³è¿‡ç­‰å·\n    advanceSpaces(); // è·³è¿‡ç©ºç™½å­—ç¬¦\n\n    let value = \"\"; // å±æ€§å€¼\n\n    // åˆ¤æ–­å±æ€§å€¼æ˜¯å¦è¢«å¼•å·åŒ…è£¹\n    const quote = context.source[0];\n    const isQuoted = quote === '\"' || quote === \"'\";\n    if (isQuoted) {\n      advanceBy(1); // è·³è¿‡å¼•å·\n      const endQuoteIndex = context.source.indexOf(quote); // æŸ¥æ‰¾å¼•å·ç»“æŸä½ç½®\n      if (endQuoteIndex > -1) {\n        value = context.source.slice(0, endQuoteIndex); // è·å–å±æ€§å€¼\n        advanceBy(value.length); // å‰è¿›åˆ°å±æ€§å€¼ä¹‹å\n        advanceBy(1); // è·³è¿‡å¼•å·\n      } else {\n        console.error(\"ç¼ºå°‘å¼•å·\");\n      }\n    } else {\n      const match = /^[^\\t\\r\\n\\f >]+/.exec(context.source); // åŒ¹é…æœªè¢«å¼•å·åŒ…è£¹çš„å±æ€§å€¼\n      value = match[0]; // è·å–å±æ€§å€¼\n      advanceBy(value.length); // å‰è¿›åˆ°å±æ€§å€¼ä¹‹å\n    }\n\n    advanceSpaces(); // è·³è¿‡ç©ºç™½å­—ç¬¦\n\n    props.push({\n      type: \"Attribute\", // å±æ€§èŠ‚ç‚¹ç±»å‹\n      name, // å±æ€§å\n      value, // å±æ€§å€¼\n    });\n  }\n\n  return props; // è¿”å›è§£æå‡ºçš„å±æ€§æ•°ç»„\n}\n\n// è§£ææ–‡æœ¬èŠ‚ç‚¹\nfunction parseText(context) {\n  let endIndex = context.source.length; // æ–‡æœ¬èŠ‚ç‚¹ç»“æŸä½ç½®\n  const ltIndex = context.source.indexOf(\"<\"); // æŸ¥æ‰¾ä¸‹ä¸€ä¸ªæ ‡ç­¾çš„èµ·å§‹ä½ç½®\n  const delimiterIndex = context.source.indexOf(\"{{\"); // æŸ¥æ‰¾ä¸‹ä¸€ä¸ªæ’å€¼çš„èµ·å§‹ä½ç½®\n\n  // æ‰¾åˆ°æœ€è¿‘çš„æ ‡ç­¾æˆ–æ’å€¼çš„èµ·å§‹ä½ç½®\n  if (ltIndex > -1 && ltIndex < endIndex) {\n    endIndex = ltIndex;\n  }\n  if (delimiterIndex > -1 && delimiterIndex < endIndex) {\n    endIndex = delimiterIndex;\n  }\n\n  const content = context.source.slice(0, endIndex); // è·å–æ–‡æœ¬å†…å®¹\n\n  context.advanceBy(content.length); // å‰è¿›åˆ°æ–‡æœ¬å†…å®¹ä¹‹å\n\n  return {\n    type: \"Text\", // æ–‡æœ¬èŠ‚ç‚¹ç±»å‹\n    content: decodeHtml(content), // è§£ç åçš„æ–‡æœ¬å†…å®¹\n  };\n}\n\n// åˆ¤æ–­æ˜¯å¦è§£æç»“æŸ\nfunction isEnd(context, ancestors) {\n  if (!context.source) return true; // å¦‚æœæ¨¡æ¿å­—ç¬¦ä¸²ä¸ºç©ºï¼Œåˆ™è§£æç»“æŸ\n\n  // ä¸èŠ‚ç‚¹æ ˆå†…å…¨éƒ¨çš„èŠ‚ç‚¹æ¯”è¾ƒï¼Œåˆ¤æ–­æ˜¯å¦é‡åˆ°ç»“æŸæ ‡ç­¾\n  for (let i = ancestors.length - 1; i >= 0; --i) {\n    if (context.source.startsWith(`</${ancestors[i].tag}`)) {\n      return true; // å¦‚æœé‡åˆ°ç»“æŸæ ‡ç­¾ï¼Œåˆ™è§£æç»“æŸ\n    }\n  }\n}\n\n// å‘½åå­—ç¬¦å¼•ç”¨è¡¨\nconst namedCharacterReferences = {\n  gt: \">\",\n  \"gt;\": \">\",\n  lt: \"<\",\n  \"lt;\": \"<\",\n  \"ltcc;\": \"âª¦\",\n};\n\n// è§£ç  HTML å­—ç¬¦å¼•ç”¨\nfunction decodeHtml(rawText, asAttr = false) {\n  let offset = 0; // å½“å‰åç§»é‡\n  const end = rawText.length; // æ–‡æœ¬ç»“æŸä½ç½®\n  let decodedText = \"\"; // è§£ç åçš„æ–‡æœ¬\n  let maxCRNameLength = 0; // æœ€å¤§å­—ç¬¦å¼•ç”¨åç§°é•¿åº¦\n\n  function advance(length) {\n    offset += length; // å¢åŠ åç§»é‡\n    rawText = rawText.slice(length); // æˆªå–å­—ç¬¦ä¸²\n  }\n\n  while (offset < end) {\n    const head = /&(?:#x?)?/i.exec(rawText); // åŒ¹é…å­—ç¬¦å¼•ç”¨çš„èµ·å§‹ä½ç½®\n    if (!head) {\n      const remaining = end - offset; // å‰©ä½™æœªå¤„ç†çš„æ–‡æœ¬é•¿åº¦\n      decodedText += rawText.slice(0, remaining); // è¿½åŠ å‰©ä½™æ–‡æœ¬\n      advance(remaining); // å‰è¿›åˆ°æ–‡æœ¬ç»“æŸ\n      break;\n    }\n    // å‰è¿›åˆ°å­—ç¬¦å¼•ç”¨çš„èµ·å§‹ä½ç½®\n    decodedText += rawText.slice(0, head.index); // è¿½åŠ å­—ç¬¦å¼•ç”¨å‰çš„æ–‡æœ¬\n    advance(head.index); // å‰è¿›åˆ°å­—ç¬¦å¼•ç”¨èµ·å§‹ä½ç½®\n\n    if (head[0] === \"&\") {\n      // å‘½åå­—ç¬¦å¼•ç”¨\n      let name = \"\"; // å­—ç¬¦å¼•ç”¨åç§°\n      let value; // å­—ç¬¦å¼•ç”¨å€¼\n      if (/[0-9a-z]/i.test(rawText[1])) {\n        if (!maxCRNameLength) {\n          maxCRNameLength = Object.keys(namedCharacterReferences).reduce(\n            (max, name) => Math.max(max, name.length),\n            0,\n          ); // è®¡ç®—æœ€å¤§å­—ç¬¦å¼•ç”¨åç§°é•¿åº¦\n        }\n        for (let length = maxCRNameLength; !value && length > 0; --length) {\n          name = rawText.substr(1, length); // è·å–å­—ç¬¦å¼•ç”¨åç§°\n          value = namedCharacterReferences[name]; // è·å–å­—ç¬¦å¼•ç”¨å€¼\n        }\n        if (value) {\n          const semi = name.endsWith(\";\"); // åˆ¤æ–­å­—ç¬¦å¼•ç”¨æ˜¯å¦ä»¥åˆ†å·ç»“å°¾\n          if (\n            asAttr &&\n            !semi &&\n            /[=a-z0-9]/i.test(rawText[name.length + 1] || \"\")\n          ) {\n            decodedText += \"&\" + name; // è¿½åŠ å­—ç¬¦å¼•ç”¨\n            advance(1 + name.length); // å‰è¿›åˆ°å­—ç¬¦å¼•ç”¨ä¹‹å\n          } else {\n            decodedText += value; // è¿½åŠ è§£ç åçš„å­—ç¬¦å¼•ç”¨å€¼\n            advance(1 + name.length); // å‰è¿›åˆ°å­—ç¬¦å¼•ç”¨ä¹‹å\n          }\n        } else {\n          decodedText += \"&\" + name; // è¿½åŠ å­—ç¬¦å¼•ç”¨\n          advance(1 + name.length); // å‰è¿›åˆ°å­—ç¬¦å¼•ç”¨ä¹‹å\n        }\n      } else {\n        decodedText += \"&\"; // è¿½åŠ å­—ç¬¦å¼•ç”¨\n        advance(1); // å‰è¿›åˆ°å­—ç¬¦å¼•ç”¨ä¹‹å\n      }\n    } else {\n      // åˆ¤æ–­æ˜¯åè¿›åˆ¶è¡¨ç¤ºè¿˜æ˜¯åå…­è¿›åˆ¶è¡¨ç¤º\n      const hex = head[0] === \"&#x\";\n      // æ ¹æ®ä¸åŒè¿›åˆ¶è¡¨ç¤ºæ³•ï¼Œé€‰ç”¨ä¸åŒçš„æ­£åˆ™\n      const pattern = hex ? /^&#x([0-9a-f]+);?/i : /^&#([0-9]+);?/;\n      // æœ€ç»ˆï¼Œbody[1] çš„å€¼å°±æ˜¯ Unicode ç ç‚¹\n      const body = pattern.exec(rawText);\n\n      // å¦‚æœåŒ¹é…æˆåŠŸï¼Œåˆ™è°ƒç”¨ String.fromCodePoint å‡½æ•°è¿›è¡Œè§£ç \n      if (body) {\n        // å°†ç ç‚¹å­—ç¬¦ä¸²è½¬ä¸ºåè¿›åˆ¶æ•°å­—\n        const cp = Number.parseInt(body[1], hex ? 16 : 10);\n        // ç ç‚¹çš„åˆæ³•æ€§æ£€æŸ¥\n        if (cp === 0) {\n          // å¦‚æœç ç‚¹å€¼ä¸º 0x00ï¼Œæ›¿æ¢ä¸º 0xfffd\n          cp = 0xfffd;\n        } else if (cp > 0x10ffff) {\n          // å¦‚æœç ç‚¹å€¼è¶…è¿‡äº† Unicode çš„æœ€å¤§å€¼ï¼Œæ›¿æ¢ä¸º 0xfffd\n          cp = 0xfffd;\n        } else if (cp >= 0xd800 && cp <= 0xdfff) {\n          // å¦‚æœç ç‚¹å€¼å¤„äº surrogate pair èŒƒå›´ï¼Œæ›¿æ¢ä¸º 0xfffd\n          cp = 0xfffd;\n        } else if ((cp >= 0xfdd0 && cp <= 0xfdef) || (cp & 0xfffe) === 0xfffe) {\n          // å¦‚æœç ç‚¹å€¼å¤„äº `noncharacter` èŒƒå›´ï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸åšï¼Œäº¤ç»™å¹³å°å¤„ç†\n          // noop\n        } else if (\n          // æ§åˆ¶å­—ç¬¦é›†çš„èŒƒå›´æ˜¯ï¼š[0x01, 0x1f] åŠ ä¸Š [0x7f, 0x9f]\n          // å´æ‰ ASICC ç©ºç™½ç¬¦ï¼š0x09(TAB)ã€0x0A(LF)ã€0x0C(FF)\n          // 0x0D(CR) è™½ç„¶ä¹Ÿæ˜¯ ASICC ç©ºç™½ç¬¦ï¼Œä½†éœ€è¦åŒ…å«\n          (cp >= 0x01 && cp <= 0x08) ||\n          cp === 0x0b ||\n          (cp >= 0x0d && cp <= 0x1f) ||\n          (cp >= 0x7f && cp <= 0x9f)\n        ) {\n          // åœ¨ CCR_REPLACEMENTS è¡¨ä¸­æŸ¥æ‰¾æ›¿æ¢ç ç‚¹ï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™ä½¿ç”¨åŸç ç‚¹\n          cp = CCR_REPLACEMENTS[cp] || cp;\n        }\n        // è§£ç åè¿½åŠ åˆ° decodedText ä¸Š\n        decodedText += String.fromCodePoint(cp);\n        // æ¶ˆè´¹æ‰æ•´ä¸ªæ•°å­—å­—ç¬¦å¼•ç”¨çš„å†…å®¹\n        advance(body[0].length);\n      } else {\n        // å¦‚æœæ²¡æœ‰åŒ¹é…ï¼Œåˆ™ä¸è¿›è¡Œè§£ç æ“ä½œï¼Œåªæ˜¯æŠŠ head[0] è¿½åŠ åˆ° decodedText å¹¶æ¶ˆè´¹æ‰\n        decodedText += head[0];\n        advance(head[0].length);\n      }\n    }\n  }\n  return decodedText; // è¿”å›è§£ç åçš„æ–‡æœ¬\n}\n\n// è§£ææ’å€¼\nfunction parseInterpolation(context) {\n  context.advanceBy(\"{{\".length); // å‰è¿›åˆ°æ’å€¼èµ·å§‹ä½ç½®\n  closeIndex = context.source.indexOf(\"}}\"); // æŸ¥æ‰¾æ’å€¼ç»“æŸä½ç½®\n  const content = context.source.slice(0, closeIndex); // è·å–æ’å€¼å†…å®¹\n  context.advanceBy(content.length); // å‰è¿›åˆ°æ’å€¼å†…å®¹ä¹‹å\n  context.advanceBy(\"}}\".length); // å‰è¿›åˆ°æ’å€¼ç»“æŸä½ç½®\n\n  return {\n    type: \"Interpolation\", // æ’å€¼èŠ‚ç‚¹ç±»å‹\n    content: {\n      type: \"Expression\", // è¡¨è¾¾å¼èŠ‚ç‚¹ç±»å‹\n      content: decodeHtml(content), // è§£ç åçš„è¡¨è¾¾å¼å†…å®¹\n    },\n  };\n}\n\n// è§£ææ³¨é‡Š\nfunction parseComment(context) {\n  context.advanceBy(\"<!--\".length); // å‰è¿›åˆ°æ³¨é‡Šèµ·å§‹ä½ç½®\n  closeIndex = context.source.indexOf(\"-->\"); // æŸ¥æ‰¾æ³¨é‡Šç»“æŸä½ç½®\n  const content = context.source.slice(0, closeIndex); // è·å–æ³¨é‡Šå†…å®¹\n  context.advanceBy(content.length); // å‰è¿›åˆ°æ³¨é‡Šå†…å®¹ä¹‹å\n  context.advanceBy(\"-->\".length); // å‰è¿›åˆ°æ³¨é‡Šç»“æŸä½ç½®\n\n  return {\n    type: \"Comment\", // æ³¨é‡ŠèŠ‚ç‚¹ç±»å‹\n    content, // æ³¨é‡Šå†…å®¹\n  };\n}\n\n\n\n```\n\n## 3. æ‰§è¡Œç»“æœæµ‹è¯•\n\n```js\n// æµ‹è¯•è§£æå‡½æ•°\nconst s = `<div><!-- comments --></div>`;\nconst ast = parse(s); // è§£ææ¨¡æ¿å­—ç¬¦ä¸²\nconsole.log(ast); // è¾“å‡ºè§£æç»“æœ\n\n{\n    \"type\": \"Root\",\n    \"children\": [\n        {\n            \"type\": \"Element\",\n            \"tag\": \"div\",\n            \"props\": [],\n            \"children\": [\n                {\n                    \"type\": \"Comment\",\n                    \"content\": \" comments \"\n                }\n            ],\n            \"isSelfClosing\": false\n        }\n    ]\n}\n```\n\n## 4. æ›´å¤š\n\nç»†èŠ‚éœ€è¦å†æ…¢æ…¢çœ‹çœ‹ä¹¦ä¸­çš„å†…å®¹å§ï¼Œä¸éœ€è¦æ¯è¡Œæ¯å­—çš„çœ‹äº†ï¼Œåˆ«æµªè´¹æ—¶é—´ï¼Œä»¥åéœ€è¦ç›´æ¥æ¥çœ‹è°ƒè¯•è¿™ä¸ªä»£ç ï¼Œæˆ–è€…çœ‹ä¹¦ï¼Œæˆ–è€…å€ŸåŠ©å…¶ä»–å·¥å…·éƒ½è¡Œ\n\n","ea406eee129b5e94b1a62f96d6cdb684":"\n# Vue3 åŸºç¡€ï¼ˆç¯‡äºŒï¼‰\n\n\n`#2024/08/18` `#vue3`  `#å‰ç«¯æ¡†æ¶/vue`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‡ ä¸ªå…³é”®è¯ \n\n### 1.1. Vue çš„ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½\n\n- `å£°æ˜å¼æ¸²æŸ“`ï¼šVue åŸºäºæ ‡å‡† HTML æ‹“å±•äº†ä¸€å¥—æ¨¡æ¿è¯­æ³•ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥å£°æ˜å¼åœ°æè¿°æœ€ç»ˆè¾“å‡ºçš„ HTML å’Œ JavaScript çŠ¶æ€ä¹‹é—´çš„å…³ç³»ã€‚\n- å“åº”æ€§ï¼šVue ä¼šè‡ªåŠ¨è·Ÿè¸ª JavaScript çŠ¶æ€å¹¶åœ¨å…¶å‘ç”Ÿå˜åŒ–æ—¶å“åº”å¼åœ°æ›´æ–° DOMã€‚\n\n### 1.2. å•æ–‡ä»¶ç»„ä»¶\n\n- `å•æ–‡ä»¶ç»„ä»¶` (ä¹Ÿè¢«ç§°ä¸º `*.vue` æ–‡ä»¶ï¼Œè‹±æ–‡ Single-File Componentsï¼Œç¼©å†™ä¸º SFC)\n- é¡¾åæ€ä¹‰ï¼ŒVue çš„å•æ–‡ä»¶ç»„ä»¶ä¼šå°†ä¸€ä¸ªç»„ä»¶çš„é€»è¾‘ (JavaScript)ï¼Œæ¨¡æ¿ (HTML) å’Œæ ·å¼ (CSS) å°è£…åœ¨åŒä¸€ä¸ªæ–‡ä»¶é‡Œ\n\n### 1.3. API é£æ ¼\n\nVue çš„ç»„ä»¶å¯ä»¥æŒ‰ä¸¤ç§ä¸åŒçš„é£æ ¼ä¹¦å†™ï¼šé€‰é¡¹å¼ API å’Œ ç»„åˆå¼ APIã€‚\n\n#### 1.3.1. é€‰é¡¹å¼ API (Options API)\n\nå³`vue2`çš„å†™æ³•\n\n#### 1.3.2. ç»„åˆå¼ API (Composition API)\n\nå³æ–°çš„`vue3`çš„å†™æ³•\n\n### 1.4. ONLINE DEMO\n\n> å¾ˆé‡è¦ï¼Œé‡è¦åŠŸèƒ½æˆ–è€…feature å¯ä»¥ç›´æ¥åœ¨çº¿ä½“éªŒ\n\n- æƒ³è¦å¿«é€Ÿä½“éªŒ Vueï¼Œä½ å¯ä»¥ç›´æ¥è¯•è¯•æˆ‘ä»¬çš„  [æ¼”ç»ƒåœº](https://sfc.vuejs.org/#eNo9j01qAzEMha+iapMWOjbdDm6gu96gG2/cjJJM8B+2nBaGuXvlpBMwtj4/JL234EfO6toIRzT1UObMexvpN6fCMNHRNc+w2AgwOXbPL/caoBC3EjcCCPU0wu6TvE/wlYqfnnZ3ae2PXHKMfiwQYArZOyYhAHN+2y9LnwLrarTQ7XeOuTFch5Am8u8WRbcoktGPbnzFOXS3Q3BZXWqKkuRmy/4L1eK4GbUoUTtbPDPnOmpdj4ee/1JVKictlSot8hxIUQ3Dd0k/lYoMtrglwfUPkXdoJg==)ã€‚\n- å¦‚æœä½ æ›´å–œæ¬¢ä¸ç”¨ä»»ä½•æ„å»ºçš„åŸå§‹ HTMLï¼Œå¯ä»¥ä½¿ç”¨ [JSFiddle](https://jsfiddle.net/yyx990803/2ke1ab0z/) å…¥é—¨ã€‚\n- å¦‚æœä½ å·²ç»æ¯”è¾ƒç†Ÿæ‚‰ Node.js å’Œæ„å»ºå·¥å…·ç­‰æ¦‚å¿µï¼Œè¿˜å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ [StackBlitz](https://vite.new/vue) æ¥å°è¯•å®Œæ•´çš„æ„å»ºè®¾ç½®ã€‚\n\n### 1.5. ç±»ä¼¼äº unpkg çš„ä¸œè¥¿\n\n-  [unpkg](https://unpkg.com/)\n-  [jsdelivr](https://www.jsdelivr.com/package/npm/vue) æˆ– [cdnjs](https://cdnjs.com/libraries/vue)\n\n### 1.6. Vue2 ä¸ Vue3 çš„åŒºåˆ«\n\n- Vue 2 åœ¨ 2023 å¹´åº•å°†åˆ°è¾¾å®ƒçš„æˆªæ­¢ç»´æŠ¤æ—¥æœŸ\n- vue3 ä»…æ”¯æŒ IE11åŠä»¥ä¸Šã€‚Vue 3 ç”¨åˆ°äº†ä¸€äº› IE11 ä¸æ”¯æŒçš„ç°ä»£ JavaScript ç‰¹æ€§\n- vue3 åªæ”¯æŒ [åŸç”Ÿæ”¯æŒ ES2015 çš„æµè§ˆå™¨](https://caniuse.com/es6) ï¼Œå³es6\n\n## 2. åº”ç”¨\n\n1ã€æ¯ä¸ª `Vue` åº”ç”¨éƒ½æ˜¯é€šè¿‡ [createApp](https://cn.vuejs.org/api/application.html#createapp) å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„ `åº”ç”¨å®ä¾‹`\n\n2ã€æ ¹ç»„ä»¶\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/b88a5a4d2277eff8f27cf31541ea7c84.png)\n\n3ã€æŒ‚è½½åº”ç”¨\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/e83ae5da762a1f626745c2bb063513cf.png)\n\n4ã€åº”ç”¨é…ç½®\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/8a51b48b1e5e8ea2fd9d5590b63f12f0.png)\n\n5ã€å¤šä¸ªåº”ç”¨å®ä¾‹\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/06eaeda3dcc927c55c1c786a078866da.png)\n\n## 3. æ¨¡æ¿è¯­æ³•\n\n1ã€`{{}}`\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/348842d7954689c3fdb16c1a8c0f0cad.png)\n\n2ã€rawHtml ä¸ `v-html` æŒ‡ä»¤\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/5968a47d4e873e246b2520f15634070f.png)\n\n3ã€`v-bind:attrName` ä¸  ç®€å†™`:attrName`  æˆ– `v-bind:obj` åŠ¨æ€ç»‘å®šå¤šä¸ªå€¼\n\n![image.png|544](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/26f05e6dfe25ed256f0eee99069f2010.png)\n\nç®€å†™ï¼š `:attrName`\n\n![image.png|552](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/50c1241f3a8803a2f5b58996c011aeea.png)\n\n![image.png|480](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/acf06258899c4d73a70ae439342aef61.png)\n\n4ã€`{{}}` ä»…æ”¯æŒ`è¡¨è¾¾å¼`ï¼Œä¸æ”¯æŒ`è¯­å¥`\n\n![image.png|544](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/1ebe8a98b79792c966d3a75d935365ad.png)\n\n5ã€å—é™çš„å…¨å±€è®¿é—®ï¼Œå¯ä»¥é€šè¿‡ [app.config.globalProperties](https://cn.vuejs.org/api/application.html#app-config-globalproperties) é…ç½®\n\næ¨¡æ¿ä¸­çš„è¡¨è¾¾å¼å°†è¢«æ²™ç›’åŒ–ï¼Œä»…èƒ½å¤Ÿè®¿é—®åˆ°[æœ‰é™çš„å…¨å±€å¯¹è±¡åˆ—è¡¨](https://github.com/vuejs/core/blob/main/packages/shared/src/globalsWhitelist.ts#L3)ã€‚è¯¥åˆ—è¡¨ä¸­ä¼šæš´éœ²å¸¸ç”¨çš„å†…ç½®å…¨å±€å¯¹è±¡ï¼Œæ¯”å¦‚ `Math` å’Œ `Date`ã€‚\n\n```javascript\nimport { makeMap } from './makeMap'\n\nconst GLOBALS_WHITE_LISTED =\n  'Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,' +\n  'decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,' +\n  'Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt'\n\nexport const isGloballyWhitelisted = /*#__PURE__*/ makeMap(GLOBALS_WHITE_LISTED)\n```\n\næ²¡æœ‰æ˜¾å¼åŒ…å«åœ¨åˆ—è¡¨ä¸­çš„å…¨å±€å¯¹è±¡å°†ä¸èƒ½åœ¨æ¨¡æ¿å†…è¡¨è¾¾å¼ä¸­è®¿é—®ï¼Œä¾‹å¦‚ç”¨æˆ·é™„åŠ åœ¨ window ä¸Šçš„å±æ€§ã€‚\n\nç„¶è€Œï¼Œä½ ä¹Ÿå¯ä»¥è‡ªè¡Œåœ¨ [app.config.globalProperties](https://cn.vuejs.org/api/application.html#app-config-globalproperties) ä¸Š æ˜¾å¼åœ°æ·»åŠ å®ƒä»¬ï¼Œä¾›æ‰€æœ‰çš„ Vue è¡¨è¾¾å¼ä½¿ç”¨ã€‚\n\n## 4. æŒ‡ä»¤ Directives\n\n1ã€`v-on` æœ‰ä¸€ä¸ªç›¸åº”çš„ç¼©å†™ï¼Œå³ `@` å­—ç¬¦ ï¼Œ å¦‚ `@click <=> v-on:click`\n\n2ã€`v-bind:href`  ç­‰ä»·äº  `:href` \n\n3ã€åŠ¨æ€å‚æ•°çš„è¯´æ˜å¦‚ä¸‹\n\n- åŠ¨æ€å±æ€§\n- åŠ¨æ€äº‹ä»¶åç§°\n- åŠ¨æ€å‚æ•°å€¼çš„é™åˆ¶ï¼šä¸ºnull æˆ–è€… å­—ç¬¦ä¸²ï¼Œå¦åˆ™ç¼–è¯‘è­¦å‘Š\n- åŠ¨æ€å‚æ•°çš„è¯­æ³•é™åˆ¶ï¼šå¤§å°å†™ï¼Œæ³¨æ„ç©ºæ ¼ç­‰\n\nå…·ä½“çœ‹ä¸‹é¢ï¼š\n\n![image.png|544](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/0c3f6bbe4333afb3a4d663b954c16887.png)\n\nåŠ¨æ€å‚æ•°çš„è¯­æ³•é™åˆ¶ï¼š\n\n![image.png|560](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/53bf37f4be201240faf16a9c33191c14.png)\n\n4ã€æŒ‡ä»¤çš„ä¿®é¥°ç¬¦\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/9f6397816b7d01663f22e57bbc383a36.png)\n\n","1162e91ce1cf56ac95233c273eab06cd":"\n# Vue3 çš„ç¼–è¯‘å™¨åŸç†ï¼ˆç¯‡ä¸‰ï¼šç¼–è¯‘ä¼˜åŒ–ï¼‰\n\n\n `#vue` `#vue3` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä¼ ç»Ÿ Diff ç®—æ³•çš„é—®é¢˜ \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-32.png)\n\nä¸ºä»€ä¹ˆè™šæ‹Ÿ DOM ä¼šäº§ç”Ÿé¢å¤–çš„æ€§èƒ½å¼€é”€å‘¢?\n- æ ¹æœ¬åŸå› åœ¨äºï¼Œæ¸²æŸ“å™¨åœ¨è¿è¡Œæ—¶å¾—ä¸åˆ°è¶³å¤Ÿçš„ä¿¡æ¯ã€‚ä¼ ç»Ÿ Diff ç®—æ³•æ— æ³•åˆ©ç”¨ç¼–è¯‘æ—¶æå–åˆ°çš„ä»»ä½•å…³é”®ä¿¡æ¯ï¼Œè¿™å¯¼è‡´æ¸²æŸ“å™¨åœ¨è¿è¡Œæ—¶ä¸å¯èƒ½å»åšç›¸å…³çš„ä¼˜åŒ–\n\n## 2. è§£å†³æ–¹æ¡ˆï¼šç¼–è¯‘ä¼˜åŒ–\n\n- ç¼–è¯‘ä¼˜åŒ–æŒ‡çš„æ˜¯é€šè¿‡ç¼–è¯‘çš„æ‰‹æ®µæå–`å…³é”®ä¿¡æ¯`ï¼Œå¹¶ä»¥æ­¤æŒ‡å¯¼ç”Ÿæˆæœ€ä¼˜ä»£ç çš„è¿‡ç¨‹ã€‚\n- å…·ä½“æ¥è¯´ï¼ŒVue.js 3 çš„ç¼–è¯‘å™¨ä¼šå……åˆ†åˆ†ææ¨¡æ¿ï¼Œæå–å…³é”®ä¿¡æ¯å¹¶å°†å…¶é™„ç€åˆ°å¯¹åº”çš„è™šæ‹ŸèŠ‚ç‚¹ä¸Šã€‚\n- åœ¨è¿è¡Œæ—¶é˜¶æ®µï¼Œæ¸²æŸ“å™¨é€šè¿‡è¿™äº›`å…³é”®ä¿¡æ¯`æ‰§è¡Œ â€œå¿«æ·è·¯å¾„â€ ï¼Œä»è€Œæå‡æ€§èƒ½ã€‚\n\n### 2.1. Block å’Œ PatchFlags\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105.png)\n\nè§‚å¯Ÿä¸Šé¢çš„ `vnode å¯¹è±¡`å¯ä»¥å‘ç°ï¼Œä¸æ™®é€šè™šæ‹ŸèŠ‚ç‚¹ç›¸æ¯”ï¼Œå®ƒå¤šå‡ºäº†ä¸€ä¸ªé¢å¤–çš„ `dynamicChildren` å±æ€§ã€‚\næˆ‘ä»¬æŠŠå¸¦æœ‰è¯¥å±æ€§çš„è™šæ‹ŸèŠ‚ç‚¹ç§°ä¸ºâ€œå—â€ï¼Œ å³ Blockã€‚æ‰€ä»¥ï¼Œä¸€ä¸ª Block `æœ¬è´¨ä¸Š`ä¹Ÿæ˜¯ä¸€ä¸ªè™šæ‹Ÿ DOM èŠ‚ç‚¹ï¼Œåªä¸ è¿‡å®ƒæ¯”æ™®é€šçš„è™šæ‹ŸèŠ‚ç‚¹å¤šå‡ºæ¥ä¸€ä¸ªç”¨æ¥å­˜å‚¨åŠ¨æ€å­èŠ‚ç‚¹çš„ `dynamicChildren` å±æ€§ã€‚\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ª Block ä¸ä»…èƒ½å¤Ÿæ”¶é›†å®ƒçš„ç›´æ¥åŠ¨æ€å­èŠ‚ç‚¹ï¼Œè¿˜èƒ½å¤Ÿæ”¶é›†æ‰€æœ‰`åŠ¨æ€å­å­™èŠ‚ç‚¹`ã€‚\n\næ¸²æŸ“å™¨çš„æ›´æ–°æ“ä½œå°†ä¼šä»¥ Block ä¸ºç»´åº¦ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æ¸²æŸ“å™¨åœ¨æ›´æ–°ä¸€ä¸ª Block æ—¶ï¼Œä¼šå¿½ç•¥è™šæ‹ŸèŠ‚ç‚¹çš„ children æ•°ç»„ï¼Œè€Œæ˜¯ç›´æ¥æ‰¾åˆ°è¯¥è™šæ‹ŸèŠ‚ç‚¹çš„ `dynamicChildren æ•°ç»„`ï¼Œå¹¶åªæ›´æ–°è¯¥æ•°ç»„ä¸­çš„åŠ¨æ€èŠ‚ç‚¹ã€‚è¿™æ ·ï¼Œåœ¨æ›´æ–°æ—¶å°±å®ç°äº†è·³è¿‡é™æ€å†…å®¹ï¼Œåªæ›´æ–°åŠ¨æ€å†…å®¹ã€‚\n\nåŒæ—¶ï¼Œç”±äºåŠ¨æ€èŠ‚ç‚¹ä¸­å­˜åœ¨å¯¹åº”çš„è¡¥ä¸æ ‡ å¿—ï¼Œæ‰€ä»¥åœ¨æ›´æ–°åŠ¨æ€èŠ‚ç‚¹çš„æ—¶å€™ï¼Œä¹Ÿèƒ½å¤Ÿåšåˆ°**é¶å‘æ›´æ–°**ã€‚\n- ä¾‹å¦‚ï¼Œå½“ä¸€ ä¸ªåŠ¨æ€èŠ‚ç‚¹çš„ `patchFlag` å€¼ä¸ºæ•°å­— 1 æ—¶ï¼Œæˆ‘ä»¬çŸ¥é“å®ƒåªå­˜åœ¨åŠ¨æ€çš„æ–‡æœ¬èŠ‚ç‚¹ï¼Œæ‰€ä»¥åªéœ€è¦æ›´æ–°å®ƒçš„æ–‡æœ¬å†…å®¹å³å¯\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-1.png)\n\n### 2.2. æ”¶é›†åŠ¨æ€èŠ‚ç‚¹\n\nåœ¨ç¼–è¯‘å™¨ç”Ÿæˆçš„æ¸²æŸ“å‡½æ•°ä»£ç ä¸­ï¼Œ**å¹¶ä¸ä¼šç›´æ¥åŒ…å«ç”¨æ¥æè¿°è™šæ‹ŸèŠ‚ç‚¹çš„æ•°æ®ç»“æ„ï¼Œè€Œæ˜¯åŒ…å«ç€ç”¨æ¥åˆ›å»ºè™šæ‹Ÿ DOM èŠ‚ç‚¹çš„è¾…åŠ©å‡½æ•°**\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-3.png)\n\n`createBlock` å‡½æ•°åŠ `createVNode` ä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\nfunction createVNode(tag, props, children, flags) {\n  const key = props && props.key;\n\n  // ä¸ºä»€ä¹ˆè¦åˆ é™¤ key å±æ€§å‘¢ï¼Ÿ\n  // å› ä¸º key å±æ€§æ˜¯ç”¨æ¥åšè™šæ‹ŸèŠ‚ç‚¹çš„å”¯ä¸€æ ‡è¯†çš„ï¼Œä¸åº”è¯¥è¢«æŒ‚è½½åˆ° props ä¸Š\n  props && delete props.key;\n\n  const vnode = {\n    tag,\n    props,\n    children,\n    key,\n    flags,\n  };\n\n  if (typeof flags !== \"undefined\" && currentDynamicChildren) {\n    // åŠ¨æ€èŠ‚ç‚¹\n    currentDynamicChildren.push(vnode);\n  }\n\n  return vnode;\n}\n\n// åŠ¨æ€èŠ‚ç‚¹æ ˆ\nconst dynamicChildrenStack = [];\n// å½“å‰åŠ¨æ€èŠ‚ç‚¹é›†åˆ\nlet currentDynamicChildren = null;\n// openBlock ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„åŠ¨æ€èŠ‚ç‚¹é›†åˆï¼Œå¹¶å°†è¯¥é›†åˆå‹å…¥æ ˆä¸­\nfunction openBlock() {\n  dynamicChildrenStack.push((currentDynamicChildren = []));\n}\n// closeBlock ç”¨æ¥å°†é€šè¿‡ openBlock åˆ›å»ºçš„åŠ¨å¼¹èŠ‚ç‚¹é›†åˆä»æ ˆä¸­å¼¹å‡º\nfunction closeBlock() {\n  currentDynamicChildren = dynamicChildrenStack.pop();\n}\n\nfunction createBlock(tag, props, children) {\n  const block = createVNode(tag, props, children);\n  block.dynamicChildren = currentDynamicChildren;\n\n  closeBlock();\n\n  return block;\n}\n\n```\n\nè¿è¡Œçœ‹æ•ˆæœ\n\n```javascript hl:8,10\nconst block =\n  (openBlock(),\n  createBlock(\"div\", null, [\n    createVNode(\"p\", { class: \"foo\" }, null, 1),\n    createVNode(\"p\", { class: \"bar\" }, null),\n  ]));\n\nconsole.log(block);\n\n// outputï¼š\nconst vdom = {\n  tag: \"div\",\n  props: null,\n  children: [\n    {\n      tag: \"p\",\n      props: {\n        class: \"foo\",\n      },\n      children: null,\n      flags: 1,\n    },\n    {\n      tag: \"p\",\n      props: {\n        class: \"bar\",\n      },\n      children: null,\n    },\n  ],\n  key: null,\n  dynamicChildren: [\n    {\n      tag: \"p\",\n      props: {\n        class: \"foo\",\n      },\n      children: null,\n      flags: 1,\n    },\n  ],\n};\n```\n\nä»¥ä¸Š block æˆ–è€… vdom å¯ä»¥ç›´æ¥ç»™ render å‡½æ•°\n\n```javascript\n// render() {\n//   return createVNode('div', {}, [\n//     createVNode('div', {}, [\n//       createVNode('div', {}, [\n//         createVNode('div', {}, [\n//           createVNode('div', {}, [\n//             // ...\n//           ])\n//         ])\n//       ])\n//     ])\n//   ])\n// }\n```\n \n### 2.3. æ¸²æŸ“å™¨çš„è¿è¡Œæ—¶æ”¯æŒ\n\nç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†åŠ¨æ€èŠ‚ç‚¹é›†åˆ `vnode.dynamicChildren`ï¼Œ ä»¥åŠé™„ç€å…¶ä¸Šçš„è¡¥ä¸æ ‡å¿—ã€‚åŸºäºè¿™ä¸¤ç‚¹ï¼Œå³å¯åœ¨æ¸²æŸ“å™¨ä¸­å®ç°**é¶å‘æ›´æ–°**ã€‚\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-4.png)\n\n### 2.4. æ€»ç»“\n\n- ç¼–è¯‘ä¼˜åŒ–çš„æ ¸å¿ƒåœ¨äºï¼ŒåŒºåˆ†**åŠ¨æ€èŠ‚ç‚¹ä¸é™æ€èŠ‚ç‚¹**ã€‚Vue.js 3 ä¼šä¸º`åŠ¨æ€èŠ‚ç‚¹`æ‰“ä¸Šè¡¥ä¸æ ‡å¿—ï¼Œå³ patchFlagã€‚\n- åŒæ—¶ï¼ŒVue.js 3 è¿˜æå‡ºäº† Block çš„æ¦‚å¿µï¼Œä¸€ä¸ª Block æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä½†ä¸æ™®é€šè™šæ‹ŸèŠ‚ç‚¹ç›¸æ¯”ï¼Œä¼šå¤šå‡ºä¸€ä¸ª dynamicChildren æ•°ç»„ã€‚\n- è¯¥æ•°ç»„ç”¨æ¥æ”¶é›†æ‰€æœ‰åŠ¨æ€å­ä»£èŠ‚ç‚¹ï¼Œè¿™åˆ©ç”¨äº† createVNode å‡½æ•°å’Œ createBlock å‡½æ•°çš„å±‚å±‚åµŒå¥—è°ƒç”¨çš„ç‰¹ç‚¹ï¼Œå³ä»¥â€œç”±å†…å‘å¤–â€çš„æ–¹å¼æ‰§è¡Œã€‚å†é…åˆä¸€ä¸ª ç”¨æ¥ä¸´æ—¶å­˜å‚¨åŠ¨æ€èŠ‚ç‚¹çš„èŠ‚ç‚¹æ ˆï¼Œå³å¯å®Œæˆ**åŠ¨æ€å­ä»£èŠ‚ç‚¹**çš„æ”¶é›†ã€‚\n\n## 3. Block æ ‘\n\n### 3.1. v-if çš„é—®é¢˜ï¼šä½¿ç”¨ key \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-5.png)\n\nè§£å†³æ–¹æ¡ˆï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-6.png)\n\n### 3.2. v-for çš„è§£å†³æ–¹æ¡ˆï¼š è®© v-forçš„æŒ‡ä»¤ä¹Ÿä½œä¸º block\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-7.png)\n\n### 3.3. Fragment çš„ç¨³å®šæ€§ä¸ä¸ç¨³å®š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-8.png)\n\n### 3.4. æ€»ç»“\n\nç”±äº Block ä¼šæ”¶é›†æ‰€æœ‰åŠ¨æ€å­ä»£èŠ‚ç‚¹ï¼Œæ‰€ä»¥å¯¹åŠ¨æ€èŠ‚ç‚¹çš„æ¯”å¯¹æ“ä½œæ˜¯å¿½ç•¥ DOM å±‚çº§ç»“æ„çš„ã€‚è¿™ä¼šå¸¦æ¥é¢å¤–çš„é—®é¢˜ï¼Œå³ v-ifã€v-for ç­‰ç»“æ„åŒ–æŒ‡ä»¤ä¼šå½±å“ DOM å±‚çº§ç»“æ„ï¼Œä½¿ä¹‹ä¸ç¨³å®šã€‚è¿™ä¼šé—´æ¥å¯¼è‡´åŸºäº Block æ ‘çš„æ¯”å¯¹ç®—æ³•å¤±æ•ˆã€‚\n\nè€Œè§£å†³æ–¹å¼å¾ˆç®€å•ï¼Œåªéœ€è¦è®©å¸¦æœ‰ v- ifã€v-for ç­‰æŒ‡ä»¤çš„èŠ‚ç‚¹ä¹Ÿä½œä¸º Block è§’è‰²å³å¯ã€‚\n\n## 4. é™æ€æå‡\n\né™æ€æå‡: èƒ½å¤Ÿå‡å°‘æ›´æ–°æ—¶åˆ›å»ºè™šæ‹Ÿ DOM å¸¦æ¥çš„æ€§èƒ½å¼€é”€å’Œå†…å­˜å ç”¨ã€‚\n\n### 4.1. é™æ€æå‡é™æ€è™šæ‹ŸèŠ‚ç‚¹\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-11.png)\n\n### 4.2. é™æ€æå‡é™æ€å±æ€§\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-9.png)\n\n## 5. é¢„å­—ç¬¦ä¸²åŒ–ï¼šé™æ€æå‡é™æ€å­—ç¬¦ä¸²\n\né¢„å­—ç¬¦ä¸²åŒ–:åœ¨é™æ€æå‡çš„åŸºç¡€ä¸Šï¼Œå¯¹é™æ€èŠ‚ç‚¹è¿›è¡Œå­—ç¬¦ä¸²åŒ–ã€‚ è¿™æ ·åšèƒ½å¤Ÿå‡å°‘åˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹äº§ç”Ÿçš„æ€§èƒ½å¼€é”€ä»¥åŠå†…å­˜å ç”¨ã€‚\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-10.png)\n\n## 6. ç¼“å­˜å†…è”äº‹ä»¶å¤„ç†å‡½æ•°\n\né¿å…é€ æˆä¸å¿…è¦çš„ç»„ä»¶æ›´æ–°\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-12.png)\n\n## 7. v-once æŒ‡ä»¤\n\nç¼“å­˜å…¨éƒ¨æˆ–éƒ¨åˆ†è™šæ‹ŸèŠ‚ç‚¹ï¼Œèƒ½å¤Ÿé¿å…ç»„ä»¶æ›´æ–°æ—¶é‡æ–°åˆ›å»ºè™šæ‹Ÿ DOM å¸¦æ¥çš„æ€§èƒ½å¼€é”€ï¼Œä¹Ÿå¯ä»¥é¿å…æ— ç”¨çš„ Diff æ“ä½œã€‚\n\nå½“ç¼–è¯‘å™¨é‡åˆ° `v-once æŒ‡ä»¤`æ—¶ï¼Œä¼šåˆ©ç”¨æˆ‘ä»¬ä¸Šä¸€èŠ‚ä»‹ç»çš„ `cache æ•°ç»„`æ¥ç¼“å­˜`æ¸²æŸ“å‡½æ•°çš„å…¨éƒ¨æˆ–è€…éƒ¨åˆ†æ‰§è¡Œç»“æœ`ï¼Œå¦‚ä¸‹å›¾\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-13.png)\n\nå®é™…ä¸Šï¼Œ`v-once æŒ‡ä»¤`èƒ½å¤Ÿä»ä¸¤ä¸ªæ–¹é¢æå‡æ€§èƒ½ã€‚\n- é¿å…ç»„ä»¶æ›´æ–°æ—¶é‡æ–°åˆ›å»ºè™šæ‹Ÿ DOM å¸¦æ¥çš„æ€§èƒ½å¼€é”€ã€‚å› ä¸º`è™šæ‹Ÿ DOM` è¢«ç¼“å­˜äº†ï¼Œæ‰€ä»¥æ›´æ–°æ—¶æ— é¡»é‡æ–°åˆ›å»ºã€‚\n-  é¿å…æ— ç”¨çš„ Diff å¼€é”€ã€‚è¿™æ˜¯å› ä¸ºè¢« `v-once æ ‡è®°`çš„è™šæ‹Ÿ DOM æ ‘ä¸ä¼šè¢«çˆ¶çº§ Block èŠ‚ç‚¹æ”¶é›†ã€‚\n\n","b17b2b543bf05cc59e90d31b56007ba0":"\n# Vue3 çš„æœåŠ¡ç«¯æ¸²æŸ“åŸç†ï¼ˆåŒæ„åŸç†ï¼‰\n\n`#vue3` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. CSRã€SSRã€åŒæ„ \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-22.png)\n\n- CSR å’Œ SSR å¦‚ä¸Šå›¾\n- åŒæ„ \n\t- é¦–æ¬¡æ¸²æŸ“ä¸ SSR çš„å·¥ä½œæµç¨‹æ˜¯ä¸€è‡´çš„\n\t-  æ¿€æ´»å®Œæˆåï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºå·²ç»å®Œå…¨è¢« Vue.js æ¥ç®¡ä¸º CSR åº”ç”¨ç¨‹åºäº†\n\n### 1.1. æ¸²æŸ“å¯¹æ¯”\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-23.png)\n\n## 2. Vdom æ¸²æŸ“æˆ HTML å­—ç¬¦ä¸²\n\n### 2.1. renderElementVNodeï¼šæ¸²æŸ“æ ‡å‡†çš„ DOM\n\n```javascript hl:13\n    // è‡ªé—­åˆæ ‡ç­¾\nconst VOID_TAGS =\n\t\"area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr\".split(\n\t\t\",\",\n\t);\nfunction renderElementVNode(vnode) {\n\tconst { type: tag, props, children } = vnode;\n\tconst isVoidElement = VOID_TAGS.includes(tag);\n\t// å¼€å§‹æ ‡ç­¾\n\tlet ret = `<${tag}`;\n\t// å±æ€§,è€ƒè™‘å±æ€§åç§°æ˜¯å¦åˆæ³•ï¼Œè¿˜è¦å¯¹å±æ€§å€¼è¿›è¡Œ HTML è½¬ä¹‰\n\tif (props) {\n\t\tret += renderAttrs(props);\n\t}\n\t// ç»“æŸæ ‡ç­¾\n\tret += isVoidElement ? `/>` : `>`;\n\n\t// å¦‚æœæ˜¯è‡ªé—­åˆæ ‡ç­¾, ç›´æ¥è¿”å›\n\tif (isVoidElement) return ret;\n\n\t// å­èŠ‚ç‚¹: è¯´æ˜æ˜¯æ–‡æœ¬èŠ‚ç‚¹ï¼Œç›´æ¥æ‹¼æ¥\n\tif (typeof children === \"string\") {\n\t\tret += children;\n\t\t// å­èŠ‚ç‚¹: è¯´æ˜æ˜¯æ•°ç»„ï¼Œé€’å½’æ¸²æŸ“ , æ‹¼æ¥\n\t} else {\n\t\tchildren.forEach((child) => {\n\t\t\tret += renderElementVNode(child);\n\t\t});\n\t}\n\n\t// èµ°åˆ°è¿™é‡Œè¯´æ˜æ˜¯æ™®é€šæ ‡ç­¾ï¼Œéœ€è¦é—­åˆ\n\tret += `</${tag}>`;\n\n\t// è¿”å›æ‹¼æ¥å¥½çš„å­—ç¬¦ä¸²\n\treturn ret;\n}\n```\n\n### 2.2. renderAttrs\n\n```javascript hl:16,48\nconst shouldIgnoreProp = [\"key\", \"ref\"];\n\n// æ¸²æŸ“å±æ€§ï¼šå±æ€§åæ˜¯å¦åˆæ³•ï¼Œæ˜¯å¦æ˜¯åŠ¨æ€å±æ€§ï¼Œå±æ€§å€¼æ˜¯å¦éœ€è¦è½¬ä¹‰\nfunction renderAttrs(props) {\n\tlet ret = \"\";\n\tfor (const key in props) {\n\t\tif (shouldIgnoreProp.includes(key) || /^on[^a-z]/.test(key)) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst value = props[key];\n\t\tif (key === \"class\") {\n\t\t\t// ret += ` class=\"${renderClass(value)}\"`\n\t\t} else if (key === \"style\") {\n\t\t\t// ret += ` style=\"${renderStyle(value)}\"`\n\t\t} else {\n\t\t\tret += renderDynamicAttr(key, value);\n\t\t}\n\t}\n\treturn ret;\n}\n\nfunction isRenderableValue(value) {\n\tif (value == null) {\n\t\treturn false;\n\t}\n\tconst type = typeof value;\n\treturn type === \"string\" || type === \"number\" || type === \"boolean\";\n}\n\nconst isBooleanAttr = (key) =>\n\t(\n\t\t`itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly` +\n\t\t`,async,autofocus,autoplay,controls,default,defer,disabled,hidden,` +\n\t\t`loop,open,required,reversed,scoped,seamless,` +\n\t\t`checked,muted,multiple,selected`\n\t)\n\t\t.split(\",\")\n\t\t.includes(key);\nconst isSSRSafeAttrName = (key) => true;\n\nfunction renderDynamicAttr(key, value) {\n\tif (!isRenderableValue(value)) {\n\t\treturn ``;\n\t}\n\tif (isBooleanAttr(key)) {\n\t\treturn value === false ? `` : ` ${key}`;\n\t} else if (isSSRSafeAttrName(key)) {\n\t\treturn value === \"\" ? ` ${key}` : ` ${key}=\"${escapeHtml(value)}\"`;\n\t} else {\n\t\tconsole.warn(\n\t\t\t`[@vue/server-renderer] Skipped rendering unsafe attribute name: ${key}`,\n\t\t);\n\t\treturn ``;\n\t}\n}\n```\n\n### 2.3. escapeHtml\n\nä¸å±•å¼€äº†\n\n## 3. Vue ç»„ä»¶ æ¸²æŸ“æˆ HTML å­—ç¬¦ä¸²\n\næ¯”å¦‚è‡ªå®šä¹‰ç»„ä»¶ `MyComponent`ï¼Œå¦‚ä¸‹ï¼š\n\n```javascript\nconst MyComponent = {\n\tname: \"App\",\n\tsetup() {\n\t\tconst str = ref(\"foo\");\n\n\t\treturn () => {\n\t\t\treturn {\n\t\t\t\ttype: \"div\",\n\t\t\t\tchildren: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: \"span\",\n\t\t\t\t\t\tchildren: str.value,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tstr.value = \"bar\";\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{ type: \"span\", children: \"baz\" },\n\t\t\t\t],\n\t\t\t};\n\t\t};\n\t},\n};\n\nconst compVNode = {\n\ttype: MyComponent,\n};\n```\n\nè¯¦ç»†ä»£ç \n\n```javascript hl:26,24,107,116,118\nfunction renderComponentVNode(vnode) {\n\tconst isFunctional = typeof vnode.type === \"function\";\n\tlet componentOptions = vnode.type;\n\tif (isFunctional) {\n\t\tcomponentOptions = {\n\t\t\trender: vnode.type,\n\t\t\tprops: vnode.type.props,\n\t\t};\n\t}\n\tlet {\n\t\trender,\n\t\tdata,\n\t\tsetup,\n\t\tbeforeCreate,\n\t\tcreated,\n\t\tbeforeMount,\n\t\tmounted,\n\t\tbeforeUpdate,\n\t\tupdated,\n\t\tprops: propsOption,\n\t} = componentOptions;\n\n\t// ç”Ÿå‘½å‘¨æœŸé’©å­\n\tbeforeCreate && beforeCreate();\n\n\t// ä¸éœ€è¦è½¬æˆå“åº”å¼æ•°æ®ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ä¸éœ€è¦\n\tconst state = data ? data() : null;\n\tconst [props, attrs] = resolveProps(propsOption, vnode.props);\n\n\tconst slots = vnode.children || {};\n\n\tconst instance = {\n\t\tstate,\n\t\tprops,\n\t\tisMounted: false,\n\t\tsubTree: null,\n\t\tslots,\n\t\tmounted: [],\n\t\tkeepAliveCtx: null,\n\t};\n\n\tfunction emit(event, ...payload) {\n\t\tconst eventName = `on${event[0].toUpperCase() + event.slice(1)}`;\n\t\tconst handler = instance.props[eventName];\n\t\tif (handler) {\n\t\t\thandler(...payload);\n\t\t} else {\n\t\t\tconsole.error(\"äº‹ä»¶ä¸å­˜åœ¨\");\n\t\t}\n\t}\n\n\t// setup\n\tlet setupState = null;\n\tif (setup) {\n\t\tconst setupContext = { attrs, emit, slots };\n\t\tconst prevInstance = setCurrentInstance(instance);\n\t\tconst setupResult = setup(\n\t\t\tshallowReadonly(instance.props),\n\t\t\tsetupContext,\n\t\t);\n\t\tsetCurrentInstance(prevInstance);\n\t\tif (typeof setupResult === \"function\") {\n\t\t\tif (render)\n\t\t\t\tconsole.error(\n\t\t\t\t\t\"setup å‡½æ•°è¿”å›æ¸²æŸ“å‡½æ•°ï¼Œrender é€‰é¡¹å°†è¢«å¿½ç•¥\",\n\t\t\t\t);\n\t\t\trender = setupResult;\n\t\t} else {\n\t\t\tsetupState = setupContext;\n\t\t}\n\t}\n\n\tvnode.component = instance;\n\n\tconst renderContext = new Proxy(instance, {\n\t\tget(t, k, r) {\n\t\t\tconst { state, props, slots } = t;\n\n\t\t\tif (k === \"$slots\") return slots;\n\n\t\t\tif (state && k in state) {\n\t\t\t\treturn state[k];\n\t\t\t} else if (k in props) {\n\t\t\t\treturn props[k];\n\t\t\t} else if (setupState && k in setupState) {\n\t\t\t\treturn setupState[k];\n\t\t\t} else {\n\t\t\t\tconsole.error(\"ä¸å­˜åœ¨\");\n\t\t\t}\n\t\t},\n\t\tset(t, k, v, r) {\n\t\t\tconst { state, props } = t;\n\t\t\tif (state && k in state) {\n\t\t\t\tstate[k] = v;\n\t\t\t} else if (k in props) {\n\t\t\t\tprops[k] = v;\n\t\t\t} else if (setupState && k in setupState) {\n\t\t\t\tsetupState[k] = v;\n\t\t\t} else {\n\t\t\t\tconsole.error(\"ä¸å­˜åœ¨\");\n\t\t\t}\n\t\t},\n\t});\n\n\t// created\n\tcreated && created.call(renderContext);\n\t// æ‰§è¡Œ render å¾—åˆ° subTreeï¼Œå³ç»„ä»¶è¦æ¸²æŸ“çš„å†…å®¹\n\tconst subTree = render.call(renderContext, renderContext);\n\n\treturn renderVNode(subTree);\n}\n\nfunction renderVNode(vnode) {\n\tconst type = typeof vnode.type;\n\tif (type === \"string\") {\n\t\treturn renderElementVNode(vnode);\n\t} else if (type === \"object\" || type === \"function\") {\n\t\treturn renderComponentVNode(vnode);\n\t} else if (vnode.type === Text) {\n\t\t// å¤„ç†æ–‡æœ¬...\n\t} else if (vnode.type === Fragment) {\n\t\t// å¤„ç†ç‰‡æ®µ...\n\t} else {\n\t\t// å…¶ä»– VNode ç±»å‹\n\t}\n}\n```\n\n### 3.1. ä¸¤ç§æ¸²æŸ“åˆå§‹åŒ–çš„å¯¹æ¯”\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-24.png)\n\n## 4. å®¢æˆ·ç«¯æ¿€æ´»çš„åŸç†\n\n- åœ¨åŒæ„æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œç»„ä»¶çš„ä»£ç ä¼šåˆ†åˆ«åœ¨æœåŠ¡ç«¯å’Œæµè§ˆå™¨ä¸­æ‰§è¡Œä¸€æ¬¡ã€‚\n\t- åœ¨æœåŠ¡ç«¯ï¼Œç»„ä»¶ä¼šè¢«æ¸² æŸ“ä¸ºé™æ€çš„ HTML å­—ç¬¦ä¸²ï¼Œå¹¶å‘é€ç»™æµè§ˆå™¨ã€‚\n\t- æµè§ˆå™¨åˆ™ä¼šæ¸²æŸ“ç”±æœåŠ¡ ç«¯è¿”å›çš„é™æ€çš„ HTML å†…å®¹ï¼Œå¹¶ä¸‹è½½æ‰“åŒ…åœ¨é™æ€èµ„æºä¸­çš„ç»„ä»¶ä»£ç ã€‚ å½“ä¸‹è½½å®Œæ¯•åï¼Œæµè§ˆå™¨ä¼šè§£é‡Šå¹¶æ‰§è¡Œè¯¥ç»„ä»¶ä»£ç ã€‚\n\t- å½“ç»„ä»¶ä»£ç åœ¨å®¢æˆ·ç«¯æ‰§è¡Œæ—¶ï¼Œç”±äºé¡µé¢ä¸­å·²ç»å­˜åœ¨å¯¹åº”çš„ DOM å…ƒç´ ï¼Œæ‰€ä»¥æ¸²æŸ“å™¨å¹¶ä¸ä¼šæ‰§è¡Œåˆ›å»º DOM å…ƒç´ çš„é€»è¾‘ï¼Œè€Œæ˜¯ä¼šæ‰§è¡Œ`æ¿€æ´»`æ“ä½œã€‚\n- æ¿€æ´»æ“ä½œå¯ä»¥æ€»ç»“ ä¸ºä¸¤ä¸ªæ­¥éª¤ã€‚\n\t- åœ¨è™šæ‹ŸèŠ‚ç‚¹ä¸çœŸå®DOMå…ƒç´ ä¹‹é—´å»ºç«‹è”ç³»ï¼Œå³ `vnode.el = el`ã€‚è¿™æ ·æ‰èƒ½ä¿è¯åç»­æ›´æ–°ç¨‹åºæ­£ç¡®è¿è¡Œã€‚  \n\t- ä¸º DOM å…ƒç´ æ·»åŠ äº‹ä»¶ç»‘å®šã€‚\n\nä¸»è¦ä»£ç å¦‚ä¸‹\n\n```javascript hl:3,12,15,18,25,31\n// æ¿€æ´» å®¢æˆ·ç«¯æ¸²æŸ“ï¼Œæ°´åˆ\nfunction hydrate(vnode, container) {\n\thydrateNode(container.firstChild, vnode);\n}\n\nfunction hydrateNode(node, vnode) {\n\tconst { type } = vnode;\n\tvnode.el = node;\n\n\t// å¦‚æœæ˜¯ç»„ä»¶, åˆ™è°ƒç”¨ mountComponent å®Œæˆæ¿€æ´»\n\tif (typeof type === \"object\") {\n\t\tmountComponent(vnode, container, null);\n\t\t// å¦‚æœæ˜¯çœŸå®çš„ DOM å…ƒç´ ï¼Œéœ€è¦å’Œ vnode è¿›è¡Œæ°´åˆ\n\t} else if (typeof type === \"string\") {\n\t\thydrateElement(node, vnode);\n\t}\n\n\t// è¿”å›ä¸‹ä¸€ä¸ªèŠ‚ç‚¹, ç”¨äºä¸‹æ¬¡æ¿€æ´»æ“ä½œ\n\treturn node.nextSibling;\n}\n\nfunction hydrateElement(el, vnode) {\n\tif (vnode.props) {\n\t\tfor (const key in vnode.props) {\n\t\t\t// åªæœ‰äº‹ä»¶å±æ€§æ‰éœ€è¦è¿›è¡Œæ°´åˆï¼ˆæ¿€æ´»ï¼‰\n\t\t\tif (/^on/.test(key)) {\n\t\t\t\tpatchProps(el, key, null, vnode.props[key]);\n\t\t\t}\n\t\t}\n\t}\n\t// é€’å½’æ¿€æ´»å­èŠ‚ç‚¹\n\tif (Array.isArray(vnode.children)) {\n\t\tlet nextNode = el.firstChild;\n\t\tconst len = vnode.children.length;\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tnextNode = hydrateNode(nextNode, vnode.children[i]);\n\t\t}\n\t}\n}\n```\n\n`mountComponent` éœ€è¦ç‰¹æ®Šå¤„ç†ä¸‹ï¼Œå¦‚ä¸‹\n \n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-25.png)\n\n## 5. ç¼–å†™åŒæ„ä»£ç çš„æ³¨æ„äº‹é¡¹\n\n### 5.1. ç”Ÿå‘½å‘¨æœŸ\n\nbeforeUpdateã€updatedã€ beforeMountã€mountedã€beforeUnmountã€unmounted ç­‰ ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¸ä¼šåœ¨æœåŠ¡ç«¯æ‰§è¡Œã€‚  \n\næ¯”å¦‚ä¸‹é¢çš„ä»£ç node ç«¯ä¼šå‡ºå†…å­˜æ³„æ¼é—®é¢˜\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-26.png)\n\nè§£å†³æ–¹æ¡ˆï¼Œä¸¤ä¸ªï¼Œå¦‚ä¸‹å›¾\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-27.png)\n\n### 5.2. ä½¿ç”¨è·¨å¹³å°çš„ API\n\n- ç”±äºç»„ä»¶çš„ä»£ç æ—¢è¦åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œä¹Ÿè¦åœ¨æœåŠ¡å™¨ä¸­è¿è¡Œï¼Œæ‰€ä»¥ç¼–å†™ç»„ä»¶ä»£ç æ—¶ï¼Œè¦é¢å¤–æ³¨æ„ä»£ç çš„è·¨å¹³å°æ€§ã€‚\n- é€šå¸¸æˆ‘ä»¬åœ¨é€‰æ‹©ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ï¼Œä¼šé€‰æ‹©æ”¯æŒ`è·¨å¹³å°çš„åº“`ï¼Œ ä¾‹å¦‚ä½¿ç”¨ `Axios` ä½œä¸ºç½‘ç»œè¯·æ±‚åº“ã€‚\n\n### 5.3. åªåœ¨æŸä¸€ç«¯å¼•å…¥æ¨¡å—\n\nç‰¹å®šç«¯çš„å®ç°ã€‚æ— è®ºåœ¨å®¢æˆ·ç«¯è¿˜æ˜¯åœ¨æœåŠ¡ç«¯ï¼Œéƒ½åº”è¯¥ä¿è¯åŠŸèƒ½çš„ä¸€è‡´æ€§ã€‚\n\nä¾‹å¦‚ï¼Œç»„ä»¶éœ€è¦è¯»å– cookie ä¿¡æ¯ã€‚\n- åœ¨å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬å¯ä»¥ é€šè¿‡ document.cookie æ¥å®ç°è¯»å–;\n- è€Œåœ¨æœåŠ¡ç«¯ï¼Œåˆ™éœ€è¦æ ¹æ®è¯·æ±‚å¤´æ¥å®ç°è¯»å–ã€‚æ‰€ä»¥ï¼Œå¾ˆå¤šåŠŸèƒ½æ¨¡å—éœ€è¦æˆ‘ä»¬ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åˆ†åˆ«å®ç°ã€‚ \n\næ¯”å¦‚\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-28.png)\n\n### 5.4. é¿å…äº¤å‰è¯·æ±‚å¼•èµ·çš„çŠ¶æ€æ±¡æŸ“\n\nçŠ¶æ€æ±¡æŸ“æ—¢å¯ä»¥æ˜¯åº”ç”¨çº§çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æ¨¡å—çº§çš„ã€‚\n- å¯¹äºåº”ç”¨ï¼Œæˆ‘ä»¬åº”è¯¥ä¸ºæ¯ä¸€ä¸ªè¯·æ±‚åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„åº”ç”¨å®ä¾‹ã€‚\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-29.png)\n- å¯¹äºæ¨¡å—ï¼Œæˆ‘ä»¬åº”è¯¥é¿å…ä½¿ç”¨æ¨¡å—çº§çš„å…¨å±€å˜é‡ã€‚è¿™æ˜¯å› ä¸ºåœ¨ä¸åšç‰¹æ®Šå¤„ç†çš„æƒ…å†µä¸‹ï¼Œå¤šä¸ªè¯·æ±‚ä¼šå…±ç”¨æ¨¡å—çº§çš„å…¨å±€å˜é‡ï¼Œé€ æˆè¯·æ±‚é—´çš„äº¤å‰æ±¡æŸ“ã€‚å› ä¸ºæœåŠ¡å™¨ä¸ç”¨ æˆ·æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œä¸‹å›¾ï¼Œé€ æˆäº† `count` çš„æ±¡æŸ“\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241104-30.png)\n\n### 5.5. ClientOnly\n\n ä»…åœ¨å®¢æˆ·ç«¯æ¸²æŸ“ç»„ä»¶ä¸­çš„éƒ¨åˆ†å†…å®¹ã€‚è¿™éœ€è¦æˆ‘ä»¬è‡ªè¡Œå°è£… `<ClientOnly>` ç»„ä»¶ï¼Œè¢«è¯¥ç»„ä»¶åŒ…è£¹çš„å†…å®¹ä»…åœ¨å®¢æˆ·ç«¯æ‰ä¼šè¢«æ¸² æŸ“ã€‚\n \n![520](#)","46f176eac3855654beb4149da4a323a1":"\n# Vue3 ä¸­å¯ä½¿ç”¨ JSX åŸç†\n\n\n`#vue`  `#jsx` \n\nVue 3 ä¸­æ”¯æŒä½¿ç”¨ JSX çš„åŸç†æ¶‰åŠåˆ°ç¼–è¯‘è¿‡ç¨‹å’Œè¿è¡Œæ—¶çš„é…åˆ\n- ç¼–è¯‘è¿‡ç¨‹å°† JSX è½¬æ¢ä¸º Vue çš„æ¸²æŸ“å‡½æ•°è°ƒç”¨\n- è€Œè¿è¡Œæ—¶åˆ™é€šè¿‡ h å‡½æ•°åˆ›å»ºè™šæ‹Ÿ DOMã€‚\n- è¿™ç§æ–¹å¼æ—¢ä¿ç•™äº† JSX çš„çµæ´»æ€§ï¼Œåˆå……åˆ†åˆ©ç”¨äº† Vue çš„å“åº”å¼ç³»ç»Ÿå’Œç»„ä»¶æ¨¡å‹\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ç¼–è¯‘åŸç† \n\nJSX åœ¨ Vue 3 ä¸­çš„ä½¿ç”¨éœ€è¦é€šè¿‡ç¼–è¯‘æ­¥éª¤å°† JSX è¯­æ³•è½¬æ¢ä¸º Vue çš„æ¸²æŸ“å‡½æ•°ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸»è¦ä¾èµ–äº Babel æ’ä»¶ï¼Œç‰¹åˆ«æ˜¯ `@vue/babel-plugin-jsx`ã€‚\n\nç¼–è¯‘è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š\n\n### 1.1. è§£æ JSX\n\nBabel é¦–å…ˆå°† JSX ä»£ç è§£ææˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ã€‚\n\n### 1.2. è½¬æ¢\n\n@vue/babel-plugin-jsx æ’ä»¶ä¼šéå† ASTï¼Œå°† JSX èŠ‚ç‚¹è½¬æ¢ä¸ºå¯¹åº”çš„ Vue 3 æ¸²æŸ“å‡½æ•°è°ƒç”¨ã€‚\n\n### 1.3. ç”Ÿæˆä»£ç \n\næœ€åï¼ŒBabel æ ¹æ®è½¬æ¢åçš„ AST ç”Ÿæˆ JavaScript ä»£ç ã€‚\n\n## 2. è¿è¡Œæ—¶åŸç†\n\nåœ¨è¿è¡Œæ—¶ï¼ŒVue 3 ä½¿ç”¨ `h å‡½æ•°`ï¼ˆcreateElement çš„ç®€å†™ï¼‰æ¥åˆ›å»ºè™šæ‹Ÿ DOM èŠ‚ç‚¹ã€‚JSX ç¼–è¯‘åçš„ä»£ç æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç³»åˆ— h å‡½æ•°çš„è°ƒç”¨ã€‚\n\nä¾‹å¦‚ï¼Œä¸‹é¢çš„ JSXï¼š\n\n```jsx\nconst App = () => (\n  <div>\n    <h1>Hello, Vue 3!</h1>\n    <p>{message}</p>\n  </div>\n);\n```\n\nä¼šè¢«ç¼–è¯‘æˆç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š\n\n```javascript\nimport { h } from 'vue';\n\nconst App = () => h('div', null, [\n  h('h1', null, 'Hello, Vue 3!'),\n  h('p', null, message)\n]);\n```\n\n## 3. ä¸ Vue ç»„ä»¶ç³»ç»Ÿçš„é›†æˆ\n\nVue 3 çš„ç»„ä»¶ç³»ç»Ÿèƒ½å¤Ÿæ— ç¼åœ°ä¸ JSX é›†æˆï¼Œä¸»è¦é€šè¿‡ä»¥ä¸‹æ–¹å¼ï¼š\n\n### 3.1. å±æ€§ä¼ é€’\n\nJSX ä¸­çš„å±æ€§ä¼šè¢«è½¬æ¢ä¸º h å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯¹åº”äºç»„ä»¶çš„ propsã€‚\n\n### 3.2. äº‹ä»¶å¤„ç†\n\nJSX ä¸­çš„äº‹ä»¶å¤„ç†å™¨ï¼ˆå¦‚ onClickï¼‰ä¼šè¢«è½¬æ¢ä¸º Vue çš„äº‹ä»¶ç›‘å¬å™¨ã€‚\n\n### 3.3. æ’æ§½\n\nJSX å…è®¸ç›´æ¥ä¼ é€’å­å…ƒç´ ï¼Œè¿™äº›ä¼šè¢«è½¬æ¢ä¸º`é»˜è®¤æ’æ§½`æˆ–`å…·åæ’æ§½`ã€‚\n\n## 4. å“åº”å¼æ•´åˆ\n\nVue 3 çš„ç»„åˆå¼ APIï¼ˆComposition APIï¼‰ä¸ JSX é…åˆå¾—å¾ˆå¥½ã€‚ä½ å¯ä»¥åœ¨ JSX ä¸­ç›´æ¥ä½¿ç”¨ refã€computed ç­‰å“åº”å¼ APIã€‚\n\n```jsx\nimport { ref, computed } from 'vue';\n\nconst MyComponent = () => {\n  const count = ref(0);\n  const doubleCount = computed(() => count.value * 2);\n\n  return () => (\n    <div>\n      <p>Count: {count.value}</p>\n      <p>Double: {doubleCount.value}</p>\n      <button onClick={() => count.value++}>Increment</button>\n    </div>\n  );\n};\n```\n\n## 5. æ€§èƒ½ä¼˜åŒ–ï¼šç¼–è¯‘ä¼˜åŒ–\n\nVue 3 çš„ç¼–è¯‘å™¨èƒ½å¤Ÿå¯¹ JSX è¿›è¡Œé™æ€åˆ†æå’Œä¼˜åŒ–ï¼Œä¾‹å¦‚ï¼š\n\n- é™æ€æå‡ï¼šå°†ä¸å˜çš„å†…å®¹æå‡åˆ°æ¸²æŸ“å‡½æ•°ä¹‹å¤–ã€‚\n- è¡¥ä¸æ ‡è®°ï¼šä¸ºåŠ¨æ€å†…å®¹æ·»åŠ æ ‡è®°ï¼Œä»¥ä¼˜åŒ–æ›´æ–°è¿‡ç¨‹ã€‚\n\n## 6. Vue3 çš„JSX å’Œ React çš„JSXåœ¨å„ä¸ªå±‚é¢çš„åŒºåˆ«\n\n### 6.1. è¯­æ³•å±‚é¢çš„åŒºåˆ«\n\n#### 6.1.1. v-modelçš„å¤„ç†\n\n- Reactä¸­æ²¡æœ‰v-modelæ¦‚å¿µï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†ï¼š\n```jsx\n<input \n  value={value} \n  onChange={e => setValue(e.target.value)} \n/>\n```\n- Vue JSXä¸­å¯ä»¥ä½¿ç”¨v-modelï¼š\n```jsx\n<input v-model={value} />\n// æˆ–è€…ä½¿ç”¨æ›´åŸç”Ÿçš„æ–¹å¼\n<input \n  value={value} \n  onInput={e => value.value = e.target.value} \n/>\n```\n\n#### 6.1.2. å±æ€§ä¼ é€’\n\n- React JSX:\n```jsx\n<Component prop={value} />\n```\n- Vue JSX:\n```jsx\n<Component prop={value} />\n// ä¹Ÿæ”¯æŒv-bindè¯­æ³•\n<Component {...props} />\n```\n\n### 6.2. ç»„ä»¶å®šä¹‰æ–¹å¼çš„åŒºåˆ«\n\nReactç»„ä»¶å®šä¹‰ï¼š\n\n```jsx\n// å‡½æ•°ç»„ä»¶\nfunction MyComponent(props) {\n  return <div>{props.text}</div>\n}\n\n// Classç»„ä»¶\nclass MyComponent extends React.Component {\n  render() {\n    return <div>{this.props.text}</div>\n  }\n}\n```\n\nVue3ç»„ä»¶å®šä¹‰ï¼š\n\n```jsx\n// ä½¿ç”¨defineComponent\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  props: {\n    text: String\n  },\n  setup(props) {\n    return () => <div>{props.text}</div>\n  }\n})\n\n// æˆ–è€…ç›´æ¥ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶\nconst MyComponent = (props) => {\n  return () => <div>{props.text}</div>\n}\n```\n\n### 6.3. çŠ¶æ€ç®¡ç†çš„åŒºåˆ«\n\nReactä¸­çš„çŠ¶æ€ç®¡ç†ï¼š\n\n```jsx\nfunction Component() {\n  const [count, setCount] = useState(0)\n  return <div onClick={() => setCount(count + 1)}>{count}</div>\n}\n```\n\nVue3ä¸­çš„çŠ¶æ€ç®¡ç†ï¼š\n\n```jsx\nimport { ref } from 'vue'\n\nconst Component = defineComponent({\n  setup() {\n    const count = ref(0)\n    return () => (\n      <div onClick={() => count.value++}>{count.value}</div>\n    )\n  }\n})\n```\n\n### 6.4. åŸç†å±‚é¢çš„åŒºåˆ«\n\n#### 6.4.1. ç¼–è¯‘æ—¶å·®å¼‚\n\n- React JSX ä¼šè¢«ç¼–è¯‘æˆ `React.createElement()` è°ƒç”¨\n- Vue JSX ä¼šè¢«ç¼–è¯‘æˆ `h()` å‡½æ•°è°ƒç”¨ï¼ˆcreateVNodeï¼‰\n\n#### 6.4.2. æ›´æ–°æœºåˆ¶\n\n- Reacté‡‡ç”¨è™šæ‹ŸDOM diffç®—æ³•ï¼Œå½“çŠ¶æ€æ”¹å˜æ—¶ä¼šé‡æ–°æ‰§è¡Œæ•´ä¸ªç»„ä»¶å‡½æ•°\n- Vue3é‡‡ç”¨å“åº”å¼ç³»ç»Ÿï¼Œåªæœ‰ä¾èµ–å‘ç”Ÿå˜åŒ–çš„éƒ¨åˆ†æ‰ä¼šé‡æ–°æ¸²æŸ“\n\n#### 6.4.3. å±æ€§å¤„ç†\n- Reactå°†æ‰€æœ‰å±æ€§éƒ½ç»Ÿä¸€å¤„ç†ä¸ºprops\n- VueåŒºåˆ†äº†propsã€attrsã€eventsç­‰ä¸åŒç±»å‹çš„å±æ€§\n\n#### 6.4.4. ç‰¹æœ‰åŠŸèƒ½æ”¯æŒ\n\nVueç‰¹æœ‰çš„åŠŸèƒ½åœ¨JSXä¸­çš„ä½¿ç”¨ï¼š\n\n- æ’æ§½ï¼ˆslotsï¼‰\n```jsx\n// Vue JSX\nconst MyComponent = {\n  setup(props, { slots }) {\n    return () => (\n      <div>\n        {slots.default?.()}\n        {slots.named?.()}\n      </div>\n    )\n  }\n}\n```\n\n- æŒ‡ä»¤\n```jsx\n// Vue JSX\n<div v-show={isShow}>Content</div>\n```\n\nReactç‰¹æœ‰çš„åŠŸèƒ½ï¼š\n\n- Fragments\n```jsx\n// React\n<>\n  <div>1</div>\n  <div>2</div>\n</>\n\n// Vue3 JSXä¹Ÿæ”¯æŒ\n<>\n  <div>1</div>\n  <div>2</div>\n</>\n```\n\n### 6.5. æ€§èƒ½è€ƒè™‘\n\n- Reactçš„JSXæ¯æ¬¡æ›´æ–°éƒ½ä¼šé‡æ–°æ‰§è¡Œæ•´ä¸ªç»„ä»¶å‡½æ•°\n- Vue3çš„JSXå€ŸåŠ©å“åº”å¼ç³»ç»Ÿï¼Œå¯ä»¥å®ç°æ›´ç»†ç²’åº¦çš„æ›´æ–°\n- Vue3åœ¨ç¼–è¯‘æ—¶å¯ä»¥è¿›è¡Œæ›´å¤šä¼˜åŒ–ï¼Œå› ä¸ºå®ƒçš„æ¨¡æ¿è¯­æ³•æä¾›äº†æ›´å¤šé™æ€åˆ†æçš„æœºä¼š\n\n### 6.6. ä½¿ç”¨åœºæ™¯\n\n- Reactä¸­JSXæ˜¯ä¸»è¦çš„æ¨¡æ¿ç¼–å†™æ–¹å¼\n- Vueä¸­JSXæ›´å¤šæ˜¯ä¸€ä¸ªè¡¥å……é€‰é¡¹ï¼Œé€šå¸¸åœ¨éœ€è¦æ›´çµæ´»çš„æ¸²æŸ“é€»è¾‘æ—¶ä½¿ç”¨\n\n### 6.7. å¼€å‘ä½“éªŒ\n\n- Reactçš„JSXæ›´æ¥è¿‘åŸç”ŸJavaScriptçš„ç¼–ç¨‹ä½“éªŒ\n- Vueçš„JSXéœ€è¦è€ƒè™‘å“åº”å¼ç‰¹æ€§ï¼Œæœ‰æ—¶éœ€è¦é¢å¤–å¤„ç†.value\n- Vueæä¾›äº†ä¸¤ç§é€‰æ‹©ï¼šæ¨¡æ¿è¯­æ³•å’ŒJSXï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©\n\n### 6.8. è°ƒè¯•ä¸å·¥å…·æ”¯æŒ\n\n- Reactçš„JSXè°ƒè¯•å·¥å…·æ›´æˆç†Ÿï¼ˆReact DevToolsï¼‰\n- Vueçš„JSXè°ƒè¯•ä½“éªŒç›¸å¯¹è¾ƒå·®ï¼Œå°¤å…¶æ˜¯ä¸æ¨¡æ¿è¯­æ³•ç›¸æ¯”\n\n","f0b04591a01c53bdae029a9b98e90929":"\n# Vue3 ä¸­ä¸å¸¸ç”¨çš„ API\n\n`#vue` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å…¨å±€ API  \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-16.png)\n\n## 2. ç»„åˆå¼ API\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-17.png)\n\n- `useSlots`Â å’ŒÂ `useAttrs`Â æ˜¯çœŸå®çš„è¿è¡Œæ—¶å‡½æ•°ï¼Œå®ƒçš„è¿”å›ä¸Â `setupContext.slots`Â å’ŒÂ `setupContext.attrs`Â ç­‰ä»·\n- useTemplateRefï¼šè¿”å›ä¸€ä¸ªæµ…å±‚ refï¼Œå…¶å€¼å°†ä¸æ¨¡æ¿ä¸­çš„å…·æœ‰åŒ¹é… ref attribute çš„å…ƒç´ æˆ–ç»„ä»¶åŒæ­¥\n\n## 3. å†…ç½®å†…å®¹\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-18.png)\n- v-preï¼šè·³è¿‡è¯¥å…ƒç´ åŠå…¶æ‰€æœ‰å­å…ƒç´ çš„ç¼–è¯‘\n- v-memoï¼šç”¨äºç¼“å­˜\n- v-onceï¼šä»…æ¸²æŸ“å…ƒç´ å’Œç»„ä»¶ä¸€æ¬¡ï¼Œå¹¶è·³è¿‡ä¹‹åçš„æ›´æ–°\n- v-cloakï¼šç”¨äºéšè—å°šæœªå®Œæˆç¼–è¯‘çš„ DOM æ¨¡æ¿\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-19.png)\n- TransitionGroupï¼šä¸ºåˆ—è¡¨ä¸­çš„**å¤šä¸ª**å…ƒç´ æˆ–ç»„ä»¶æä¾›è¿‡æ¸¡æ•ˆæœ\n\n## 4. å•æ–‡ä»¶ç»„ä»¶\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241105-20.png)\n\n\n\n## 5. è¿›é˜¶ API\n\n![undefined](#)","8c5b1d526bea513d9ded1cafe5f79d33":"\n# Vue3 æºç ä¸»è¦åŒ…åŠŸèƒ½ä»‹ç»åˆ†æ\n\n`#vue3` \n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. compiler-core \n\nä½œç”¨ï¼š\n- å®ç°ä¸å¹³å°æ— å…³çš„ç¼–è¯‘å™¨æ ¸å¿ƒåŠŸèƒ½ã€‚\n- è´Ÿè´£å°†æ¨¡æ¿è§£æä¸ºæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œç„¶åè½¬æ¢å’Œä¼˜åŒ– ASTï¼Œæœ€åç”Ÿæˆæ¸²æŸ“å‡½æ•°ã€‚\n\nä½¿ç”¨åœºæ™¯ï¼š\n\n- ä½œä¸ºå…¶ä»–ç¼–è¯‘å™¨åŒ…çš„åŸºç¡€ï¼Œå¦‚ compiler-dom å’Œ compiler-ssrã€‚\n- å½“éœ€è¦ä¸ºéæµè§ˆå™¨ç¯å¢ƒåˆ›å»ºè‡ªå®šä¹‰ç¼–è¯‘å™¨æ—¶ã€‚\n\næ³¨æ„äº‹é¡¹ï¼š\n\n- è¿™ä¸ªåŒ…æ˜¯å¹³å°æ— å…³çš„ï¼Œä¸åŒ…å«ä»»ä½•ä¸ DOM æˆ–æµè§ˆå™¨ç›¸å…³çš„ä»£ç ã€‚\n- é€šå¸¸ä¸ä¼šç›´æ¥ä½¿ç”¨ï¼Œè€Œæ˜¯é€šè¿‡ compiler-dom æˆ–è‡ªå®šä¹‰ç¼–è¯‘å™¨é—´æ¥ä½¿ç”¨ã€‚\n\n## 2. compiler-dom\n\nä½œç”¨ï¼š\n- åŸºäº compiler-coreï¼Œæ·»åŠ äº†æµè§ˆå™¨ DOM ç‰¹å®šçš„ç¼–è¯‘åŠŸèƒ½ã€‚\n- å¤„ç† DOM ç‰¹å®šçš„æŒ‡ä»¤å’Œå±æ€§ã€‚\n\nä½¿ç”¨åœºæ™¯ï¼š\n- åœ¨æ„å»ºè¿‡ç¨‹ä¸­ç¼–è¯‘ Vue æ¨¡æ¿ã€‚\n- åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œè¿è¡Œæ—¶ç¼–è¯‘ï¼ˆè™½ç„¶ä¸æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼‰ã€‚\n\næ³¨æ„äº‹é¡¹ï¼š\n- é€šå¸¸ä¸æ„å»ºå·¥å…·é›†æˆä½¿ç”¨ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨åº”ç”¨ä»£ç ä¸­ä½¿ç”¨ã€‚\n- ç¡®ä¿ç‰ˆæœ¬ä¸å…¶ä»– Vue åŒ…åŒ¹é…ï¼Œä»¥é¿å…å…¼å®¹æ€§é—®é¢˜ã€‚\n\n\nå¯ä»¥å•ç‹¬ä½¿ç”¨ï¼šæ˜¯ï¼Œä½†ä¸å¸¸è§\n- åˆ›å»ºè‡ªå®šä¹‰ç¼–è¯‘å™¨\n- åœ¨è¿è¡Œæ—¶ç¼–è¯‘æ¨¡æ¿ï¼ˆä¸æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼‰\n```javascript\nimport { compile } from '@vue/compiler-dom'\n\nconst template = '<div>Hello, {{ name }}</div>'\nconst { code } = compile(template)\nconsole.log(code) // è¾“å‡ºç¼–è¯‘åçš„æ¸²æŸ“å‡½æ•°\n\n```\n## 3. compiler-sfc\n\nä½œç”¨ï¼š\n- ç¼–è¯‘ Vue å•æ–‡ä»¶ç»„ä»¶ï¼ˆ.vue æ–‡ä»¶ï¼‰ã€‚\n- å¤„ç† `<template>ã€<script> å’Œ <style> å—`ã€‚\n\nä½¿ç”¨åœºæ™¯ï¼š\n- åœ¨ Vue CLI æˆ– Vite ç­‰æ„å»ºå·¥å…·ä¸­ä½¿ç”¨ï¼Œç”¨äºå¤„ç† .vue æ–‡ä»¶ã€‚\n\næ³¨æ„äº‹é¡¹ï¼š\n- è¿™ä¸ªåŒ…é€šå¸¸ç”±æ„å»ºå·¥å…·å†…éƒ¨ä½¿ç”¨ï¼Œå¼€å‘è€…å¾ˆå°‘éœ€è¦ç›´æ¥ä¸ä¹‹äº¤äº’ã€‚\n- æ”¯æŒ TypeScriptã€CSS é¢„å¤„ç†å™¨ç­‰åŠŸèƒ½ï¼Œéœ€è¦ç›¸åº”çš„æ’ä»¶æ”¯æŒã€‚\n\n## 4. reactivity\n\nä½œç”¨ï¼š\n- å®ç° Vue 3 çš„å“åº”å¼ç³»ç»Ÿã€‚\n- æä¾› reactiveã€refã€computed ç­‰æ ¸å¿ƒ APIã€‚\n\nä½¿ç”¨åœºæ™¯ï¼š\n- åœ¨ Vue åº”ç”¨ä¸­åˆ›å»ºå“åº”å¼æ•°æ®ã€‚\n- å¯ä»¥ç‹¬ç«‹äº Vue ä½¿ç”¨ï¼Œç”¨äºä»»ä½•éœ€è¦å“åº”å¼æ•°æ®çš„ JavaScript åº”ç”¨ã€‚\n\næ³¨æ„äº‹é¡¹ï¼š\n- ç†è§£ Vue 3 çš„å“åº”å¼åŸç†å¯¹äºé«˜æ•ˆä½¿ç”¨è‡³å…³é‡è¦ã€‚\n- æ³¨æ„é¿å…å¾ªç¯ä¾èµ–ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚\n\nå¯å•ç‹¬ä½¿ç”¨ \n\n```javascript\nimport { reactive, effect } from '@vue/reactivity'\n\nconst state = reactive({ count: 0 })\n\neffect(() => {\n  console.log('Count is:', state.count)\n})\n\n// å°†è§¦å‘æ•ˆæœ\nstate.count++\n\n```\n## 5. runtime-core\n\nä½œç”¨ï¼š\n- å®ç° Vue çš„æ ¸å¿ƒè¿è¡Œæ—¶åŠŸèƒ½ã€‚\n- åŒ…å«ç»„ä»¶ç³»ç»Ÿã€è™šæ‹Ÿ DOMã€æ¸²æŸ“å™¨ç­‰æ ¸å¿ƒæ¦‚å¿µçš„å®ç°ã€‚\n\nä½¿ç”¨åœºæ™¯ï¼š\n- ä½œä¸º Vue è¿è¡Œæ—¶çš„åŸºç¡€ï¼Œé€šå¸¸ä¸ç›´æ¥ä½¿ç”¨ã€‚\n- å½“éœ€è¦ä¸ºç‰¹å®šå¹³å°åˆ›å»ºè‡ªå®šä¹‰æ¸²æŸ“å™¨æ—¶å¯èƒ½ä¼šç”¨åˆ°ã€‚\n\næ³¨æ„äº‹é¡¹ï¼š\n- è¿™æ˜¯ä¸€ä¸ªå¹³å°æ— å…³çš„åŒ…ï¼Œä¸åŒ…å«ä»»ä½• DOM æ“ä½œã€‚\n- æ·±å…¥ç†è§£è¿™ä¸ªåŒ…æœ‰åŠ©äºç†è§£ Vue çš„å†…éƒ¨å·¥ä½œåŸç†ã€‚\n\n## 6. runtime-dom\n\nä½œç”¨ï¼š\n- åŸºäº runtime-coreï¼Œæ·»åŠ äº†æµè§ˆå™¨ DOM ç‰¹å®šçš„è¿è¡Œæ—¶ä»£ç ã€‚\n- å¤„ç† DOM äº‹ä»¶ã€å±æ€§ã€æ ·å¼ç­‰ã€‚\n\nä½¿ç”¨åœºæ™¯ï¼š\n- åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­è¿è¡Œ Vue åº”ç”¨ã€‚\n\næ³¨æ„äº‹é¡¹ï¼š\n- è¿™æ˜¯å¤§å¤šæ•° Vue åº”ç”¨å®é™…ä½¿ç”¨çš„è¿è¡Œæ—¶åŒ…ã€‚\n- ç¡®ä¿ä¸å…¶ä»– Vue åŒ…çš„ç‰ˆæœ¬ä¸€è‡´ã€‚\n\n## 7. server-renderer\n\nä½œç”¨ï¼š\n- å®ç° Vue çš„æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰åŠŸèƒ½ã€‚\n\nä½¿ç”¨åœºæ™¯ï¼š\n- éœ€è¦æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„ Vue åº”ç”¨ã€‚\n- ç”¨äºæ”¹å–„é¦–å±åŠ è½½æ€§èƒ½å’Œ SEOã€‚\n\næ³¨æ„äº‹é¡¹ï¼š\n- ä½¿ç”¨ SSR éœ€è¦ç‰¹åˆ«æ³¨æ„æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯çŠ¶æ€çš„åŒæ­¥ã€‚\n- æŸäº›æµè§ˆå™¨ç‰¹å®šçš„ API åœ¨æœåŠ¡å™¨ç«¯ä¸å¯ç”¨ï¼Œéœ€è¦é€‚å½“å¤„ç†ã€‚\n\n## 8. shared\n\nä½œç”¨ï¼š\n- æä¾›åœ¨å…¶ä»– Vue åŒ…ä¸­å…±äº«çš„å·¥å…·å‡½æ•°å’Œå¸¸é‡ã€‚\n\nä½¿ç”¨åœºæ™¯ï¼š\n- åœ¨ Vue çš„å…¶ä»–åŒ…ä¸­ä½¿ç”¨ã€‚\n- å¯ä»¥åœ¨è‡ªå®šä¹‰ Vue æ’ä»¶æˆ–å·¥å…·ä¸­ä½¿ç”¨è¿™äº›å…±äº«å‡½æ•°ã€‚\n\næ³¨æ„äº‹é¡¹ï¼š\n- è¿™ä¸ªåŒ…çš„å†…å®¹å¯èƒ½ä¼šéš Vue ç‰ˆæœ¬æ›´æ–°è€Œå˜åŒ–ã€‚\n- ä¸å»ºè®®åœ¨åº”ç”¨ä»£ç ä¸­ç›´æ¥ä¾èµ–è¿™ä¸ªåŒ…ï¼Œå› ä¸ºå®ƒä¸»è¦ç”¨äº Vue å†…éƒ¨ã€‚\n\n## 9. vueï¼ˆåˆ«åï¼švue-runtime-domï¼‰\n\nä½œç”¨ï¼š\n- ä½œä¸º Vue 3 çš„ä¸»å…¥å£ã€‚\n- æ•´åˆäº†è¿è¡Œæ—¶å’Œç¼–è¯‘å™¨ã€‚\n\nä½¿ç”¨åœºæ™¯ï¼š\n- åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨å®Œæ•´ç‰ˆçš„ Vueï¼ˆåŒ…æ‹¬è¿è¡Œæ—¶ç¼–è¯‘å™¨ï¼‰ã€‚\n- é€šè¿‡ CDN ä½¿ç”¨ Vue æ—¶ã€‚\n\næ³¨æ„äº‹é¡¹ï¼š\n- åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ¨èä½¿ç”¨ä»…è¿è¡Œæ—¶ç‰ˆæœ¬ä»¥å‡å°åŒ…ä½“ç§¯ã€‚\n- ä½¿ç”¨æ„å»ºå·¥å…·æ—¶ï¼Œé€šå¸¸ä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ã€‚\n","1292077451085f5fb1914aa753f0f64f":"\n# å¦‚ä½•åš vue3 ä¸­å®ç°ç±»ä¼¼äºReacté«˜é˜¶ç»„ä»¶çš„åŠŸèƒ½ï¼Ÿ\n\n\nVue 3ç¡®å®æ²¡æœ‰ç›´æ¥ç­‰åŒäºReacté«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰çš„æ¦‚å¿µï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡Vue 3çš„ç»„åˆå¼APIï¼ˆComposition APIï¼‰å’Œå…¶ä»–ç‰¹æ€§æ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚è®©æˆ‘ä¸ºæ‚¨è¯¦ç»†è§£é‡Šå‡ ç§åœ¨Vue 3ä¸­å®ç°ç±»ä¼¼Reacté«˜é˜¶ç»„ä»¶åŠŸèƒ½çš„æ–¹æ³•ï¼š\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ç»„åˆå¼å‡½æ•°ï¼ˆComposablesï¼‰ \n\nè¿™æ˜¯Vue 3ä¸­æœ€æ¥è¿‘Reacté«˜é˜¶ç»„ä»¶æ¦‚å¿µçš„æ–¹æ³•ã€‚ç»„åˆå¼å‡½æ•°å…è®¸æˆ‘ä»¬å°è£…å’Œé‡ç”¨æœ‰çŠ¶æ€é€»è¾‘ã€‚\n\nç¤ºä¾‹ï¼š\n\n```typescript\n// useLogger.ts\nimport { ref, onMounted, onUnmounted } from 'vue'\n\nexport function useLogger(componentName: string) {\n  const mountedTime = ref<number>(0)\n\n  onMounted(() => {\n    console.log(`${componentName} mounted`)\n    mountedTime.value = Date.now()\n  })\n\n  onUnmounted(() => {\n    console.log(`${componentName} unmounted after ${Date.now() - mountedTime.value}ms`)\n  })\n}\n\n// ä½¿ç”¨æ–¹å¼\n// MyComponent.vue\nimport { defineComponent } from 'vue'\nimport { useLogger } from './useLogger'\n\nexport default defineComponent({\n  name: 'MyComponent',\n  setup() {\n    useLogger('MyComponent')\n    // ç»„ä»¶çš„å…¶ä»–é€»è¾‘...\n  }\n})\n```\n\n## 2. æ¸²æŸ“å‡½æ•°å’ŒJSX\n\nVue 3æ”¯æŒä½¿ç”¨æ¸²æŸ“å‡½æ•°å’ŒJSXï¼Œè¿™è®©æˆ‘ä»¬å¯ä»¥æ›´æ¥è¿‘Reactçš„ç¼–ç¨‹æ–¹å¼ï¼ŒåŒ…æ‹¬å®ç°ç±»ä¼¼HOCçš„æ¨¡å¼ã€‚\n\nç¤ºä¾‹ï¼š\n\n```typescript hl:15\n// withLogger.tsx\nimport { defineComponent, h, onMounted, onUnmounted } from 'vue'\n\nexport function withLogger(WrappedComponent: any) {\n  return defineComponent({\n    setup(props, { attrs, slots }) {\n      onMounted(() => {\n        console.log(`${WrappedComponent.name} mounted`)\n      })\n\n      onUnmounted(() => {\n        console.log(`${WrappedComponent.name} unmounted`)\n      })\n\n      return () => h(WrappedComponent, { ...props, ...attrs }, slots)\n    }\n  })\n}\n\n// ä½¿ç”¨æ–¹å¼\n// MyComponent.tsx\nimport { defineComponent } from 'vue'\nimport { withLogger } from './withLogger'\n\nconst MyComponent = defineComponent({\n  name: 'MyComponent',\n  setup() {\n    return () => <div>Hello from MyComponent</div>\n  }\n})\n\nexport default withLogger(MyComponent)\n```\n\n## 3. æ’ä»¶å’Œå…¨å±€æ··å…¥ï¼ˆMixinï¼‰\n\nè™½ç„¶ä¸å¦‚ç»„åˆå¼å‡½æ•°çµæ´»ï¼Œä½†å¯¹äºæŸäº›åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Vueæ’ä»¶æˆ–å…¨å±€æ··å…¥æ¥æ·»åŠ è·¨ç»„ä»¶çš„åŠŸèƒ½ã€‚\n\nç¤ºä¾‹ï¼š\n\n```typescript\n// logger-plugin.ts\nimport { Plugin } from 'vue'\n\nexport const LoggerPlugin: Plugin = {\n  install(app) {\n    app.mixin({\n      mounted() {\n        console.log(`${this.$options.name} mounted`)\n      },\n      unmounted() {\n        console.log(`${this.$options.name} unmounted`)\n      }\n    })\n  }\n}\n\n// main.ts\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport { LoggerPlugin } from './logger-plugin'\n\nconst app = createApp(App)\napp.use(LoggerPlugin)\napp.mount('#app')\n```\n\n## 4. è‡ªå®šä¹‰æŒ‡ä»¤\n\nå¯¹äºä¸€äº›ç‰¹å®šçš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Vueçš„è‡ªå®šä¹‰æŒ‡ä»¤æ¥å®ç°ç±»ä¼¼HOCçš„æ•ˆæœã€‚\n\nç¤ºä¾‹ï¼š\n\n```typescript\n// logger-directive.ts\nimport { Directive } from 'vue'\n\nexport const logger: Directive = {\n  mounted(el, binding) {\n    console.log(`${binding.value} mounted`)\n  },\n  unmounted(el, binding) {\n    console.log(`${binding.value} unmounted`)\n  }\n}\n\n// ä½¿ç”¨æ–¹å¼\n// MyComponent.vue\n<template>\n  <div v-logger=\"'MyComponent'\">\n    <!-- ç»„ä»¶å†…å®¹ -->\n  </div>\n</template>\n\n<script>\nimport { logger } from './logger-directive'\n\nexport default {\n  directives: {\n    logger\n  }\n}\n</script>\n```\n\n## 5. æä¾›/æ³¨å…¥ï¼ˆProvide/Injectï¼‰\n\nå¯¹äºéœ€è¦åœ¨ç»„ä»¶æ ‘ä¸­å…±äº«æ•°æ®æˆ–åŠŸèƒ½çš„åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Vue 3çš„provide/injectç‰¹æ€§ã€‚\n\nç¤ºä¾‹ï¼š\n\n```typescript\n// LoggerProvider.vue\n<script lang=\"ts\">\nimport { defineComponent, provide } from 'vue'\n\nexport const loggerKey = Symbol()\n\nexport default defineComponent({\n  setup() {\n    const logger = {\n      log: (componentName: string, message: string) => {\n        console.log(`[${componentName}] ${message}`)\n      }\n    }\n\n    provide(loggerKey, logger)\n\n    return () => null\n  }\n})\n</script>\n\n// ä½¿ç”¨æ–¹å¼\n// MyComponent.vue\n<script lang=\"ts\">\nimport { defineComponent, inject, onMounted } from 'vue'\nimport { loggerKey } from './LoggerProvider.vue'\n\nexport default defineComponent({\n  setup() {\n    const logger = inject(loggerKey)\n\n    onMounted(() => {\n      logger?.log('MyComponent', 'Component mounted')\n    })\n\n    // ç»„ä»¶çš„å…¶ä»–é€»è¾‘...\n  }\n})\n</script>\n```\n\n","762b196a51dd5077b494a5e8135aa708":"\n# PiniaçŠ¶æ€ç®¡ç†åº“æ–‡æ¡£ç¬”è®°\n\n\n`#pinia` `#vue`  `#2024/01/07`\n\næ–‡æ¡£åœ°å€ï¼š https://pinia.vuejs.org/zh/core-concepts/getters.html\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä¸ºä»€ä¹ˆï¼Ÿ \n\n- PiniaæŠ›å¼ƒäº†Mutationï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ç›´æ¥æ›´æ–°çŠ¶æ€ï¼Œä¸ç”¨å†æ³¨å†Œ Commit\n- è¯­æ³•ä¸Šæ›´åŠ è´´è¿‘Composition Api\n- æ•°æ®æŒä¹…åŒ–ä½¿ç”¨ï¼š `pinia-plugin-persistedstate`\n- å…è®¸æ„å»ºå·¥å…·è‡ªåŠ¨è¿›è¡Œ**ä»£ç åˆ†å‰²**ä»¥åŠ **TypeScript æ¨æ–­**\n\n## 2. ä¸¤ç§å®šä¹‰æ–¹å¼\n\nçº¦å®šï¼šæ‰€æœ‰çš„ store å®šä¹‰ï¼Œéƒ½ä½¿ç”¨ **use å¼€å¤´**\n\n### 2.1. æ–¹å¼ä¸€ï¼šOption Store\n\n Store æ˜¯ç”¨ defineStore() å®šä¹‰çš„ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°è¦æ±‚æ˜¯ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„åå­—\n\n```javascript\n// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä½ çš„åº”ç”¨ä¸­ Store çš„å”¯ä¸€ IDã€‚\nexport const useCounterStore = defineStore('counter', {\n  // ä¸ºäº†å®Œæ•´ç±»å‹æ¨ç†ï¼Œæ¨èä½¿ç”¨ç®­å¤´å‡½æ•°\n  state: () => ({ count: 0 }),\n  getters: {\n    double: (state) => state.count * 2,\n  },\n  actions: {\n    increment() {\n      this.count++\n    },\n  },\n})\n```\n\n`state` æ˜¯ store çš„æ•°æ® (data)ï¼Œ`getters` æ˜¯ store çš„è®¡ç®—å±æ€§ (computed)ï¼Œè€Œ `actions` åˆ™æ˜¯æ–¹æ³• (methods)\n\n### 2.2. æ–¹å¼äºŒï¼šSetup Store\n\n```javascript\nexport const useCounterStore = defineStore('counter', () => {\n  const count = ref(0)\n  function increment() {\n    count.value++\n  }\n\n  return { count, increment }\n})\n```\n\n- `ref()` å°±æ˜¯ state å±æ€§\n- `computed() `å°±æ˜¯ getters\n- `function() `å°±æ˜¯ actions\n\n### 2.3. ä½¿ç”¨åœºæ™¯é€‰æ‹©\n\n- Setup store æ¯” Option Store å¸¦æ¥äº†æ›´å¤šçš„**çµæ´»æ€§**ï¼Œå› ä¸ºä½ å¯ä»¥åœ¨ä¸€ä¸ª store å†…åˆ›å»ºä¾¦å¬å™¨ï¼Œå¹¶è‡ªç”±åœ°ä½¿ç”¨ä»»ä½•ç»„åˆå¼å‡½æ•°ã€‚\n- ä¸è¿‡ï¼Œè¯·è®°ä½ï¼Œä½¿ç”¨ç»„åˆå¼å‡½æ•°ä¼šè®© **SSR** å˜å¾—æ›´åŠ å¤æ‚\n\n## 3. ä½¿ç”¨ TS å®šä¹‰ stateï¼Œå¹¶ä½¿ç”¨å®ƒ\n\n```typescript\ninterface State {\n  userList: UserInfo[]\n  user: UserInfo | null\n}\n\nconst useStore = defineStore('storeId', {\n  state: (): State => {\n    return {\n      userList: [],\n      user: null,\n    }\n  },\n})\n\ninterface UserInfo {\n  name: string\n  age: number\n}\n```\n\n### 3.1. ä½¿ç”¨ Store\n\n```typescript\nconst store = useStore()\n\nstore.count++\n\n\n// é‡ç½®ï¼Œå°† state é‡ç½®ä¸ºåˆå§‹å€¼ã€‚\nstore.$reset()\n```\n\n### 3.2. é€‰é¡¹å¼çš„é‡ç½®ä¸ç®¡ç†\n\nç›´æ¥è°ƒç”¨å†…éƒ¨è¿”å›çš„ `$reset()` å³å¯\n\n```typescript\nconst store = useStore()\n\nstore.$reset()\n```\n\né€‰é¡¹å¼ä¸­\n\n- ä½ å¯ä»¥ä½¿ç”¨ `mapState` æ¥è¾…åŠ©ç®¡ç†çŠ¶æ€ï¼Œå°† state å±æ€§æ˜ å°„ä¸º**åªè¯»çš„è®¡ç®—å±æ€§**\n- å¯ä»¥ä½¿ç”¨ `mapWritableState()` æ¥ä¿®æ”¹ state å±æ€§\n\n### 3.3. ç»„åˆå¼çš„é‡ç½®\n\néœ€è¦è‡ªå®šä¹‰ `$reset()`\n\n```typescript\nexport const useCounterStore = defineStore('counter', () => {\n  const count = ref(0)\n\n  function $reset() {\n    count.value = 0\n  }\n\n  return { count, $reset }\n})\n```\n\n### 3.4. å˜æ›´ state\n\n```typescript\nâ‘  åŒä¸€æ—¶é—´æ›´æ”¹å¤šä¸ªå±æ€§\nstore.$patch({\n  count: store.count + 1,\n  age: 120,\n  name: 'DIO',\n})\n\nâ‘¡ å‡½æ•°æ¥ç»„åˆæ§åˆ¶æ›´å¤æ‚çš„å˜æ›´æ“ä½œ\nstore.$patch((state) => {\n  state.items.push({ name: 'shoes', quantity: 1 })\n  state.hasChanged = true\n})\n```\n\n### 3.5. æ›¿æ¢ state\n\n```typescript\n// è¿™å®é™…ä¸Šå¹¶æ²¡æœ‰æ›¿æ¢`$state`\nstore.$state = { count: 24 }\n// åœ¨å®ƒå†…éƒ¨è°ƒç”¨ `$patch()`ï¼š\nstore.$patch({ count: 24 })\n```\n\n### 3.6. ç›‘å¬æˆ–è€…è®¢é˜… state\n\nä½¿ç”¨ `$subscribe`\n\n```typescript\ncartStore.$subscribe((mutation, state) => {\n  // import { MutationType } from 'pinia'\n  mutation.type // 'direct' | 'patch object' | 'patch function'\n  // å’Œ cartStore.$id ä¸€æ ·\n  mutation.storeId // 'cart'\n  // åªæœ‰ mutation.type === 'patch object'çš„æƒ…å†µä¸‹æ‰å¯ç”¨\n  mutation.payload // ä¼ é€’ç»™ cartStore.$patch() çš„è¡¥ä¸å¯¹è±¡ã€‚\n\n  // æ¯å½“çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°†æ•´ä¸ª state æŒä¹…åŒ–åˆ°æœ¬åœ°å­˜å‚¨ã€‚\n  localStorage.setItem('cart', JSON.stringify(state))\n})\n```\n\nå¸è½½åç›‘å¬ä»ç„¶ä¿ç•™\n\n```typescript\n<script setup>\nconst someStore = useSomeStore()\n// æ­¤è®¢é˜…å™¨å³ä¾¿åœ¨ç»„ä»¶å¸è½½ä¹‹åä»ä¼šè¢«ä¿ç•™\nsomeStore.$subscribe(callback, { detached: true })\n</script>\n```\n\nå½“ç„¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ `watch` æ¥ç›‘å¬ï¼Œå³åœ¨ pinia å®ä¾‹ä¸Šä½¿ç”¨ watch() å‡½æ•°ä¾¦å¬æ•´ä¸ª state\n\n```typescript\nwatch(\n  pinia.state,\n  (state) => {\n    // æ¯å½“çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°†æ•´ä¸ª state æŒä¹…åŒ–åˆ°æœ¬åœ°å­˜å‚¨ã€‚\n    localStorage.setItem('piniaState', JSON.stringify(state))\n  },\n  { deep: true }\n)\n```\n\n## 4. Action\n\n### 4.1. åŸºæœ¬ä½¿ç”¨\n\n- Action ç›¸å½“äºç»„ä»¶ä¸­çš„ `method`\n- action å¯ä»¥æ˜¯**å¼‚æ­¥**çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ **åŒæ­¥**\n\n```typescript\nimport { mande } from 'mande'\n\nconst api = mande('/api/users')\n\nexport const useUsers = defineStore('users', {\n  state: () => ({\n    userData: null,\n    // ...\n  }),\n\n  actions: {\n   \n   åŒæ­¥çš„\n   increment() {\n      this.count++\n    },\n    å¼‚æ­¥çš„\n    async registerUser(login, password) {\n      try {\n        this.userData = await api.post({ login, password })\n        showTooltip(`Welcome back ${this.userData.name}!`)\n      } catch (error) {\n        showTooltip(error)\n        // è®©è¡¨å•ç»„ä»¶æ˜¾ç¤ºé”™è¯¯\n        return error\n      }\n    },\n  },\n})\n```\n\nAction å¯ä»¥åƒå‡½æ•°æˆ–è€…é€šå¸¸æ„ä¹‰ä¸Šçš„æ–¹æ³•ä¸€æ ·è¢«è°ƒç”¨ï¼Œå¦‚ä¸‹ï¼š\n\n```html\n<script setup>\nconst store = useCounterStore()\n// å°† action ä½œä¸º store çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨\nstore.randomizeCounter()\n</script>\n<template>\n  <!-- å³ä½¿åœ¨æ¨¡æ¿ä¸­ä¹Ÿå¯ä»¥ -->\n  <button @click=\"store.randomizeCounter()\">Randomize</button>\n</template>\n```\n\n### 4.2. è®¿é—®å…¶ä»– store çš„ action\n\nç›´æ¥å¼•å…¥è°ƒç”¨å°±å¥½äº†ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œå¯ä»¥**å…¨å±€ç®¡ç†æ‰€æœ‰çš„ store**\n\n```typescript\nimport { useAuthStore } from './auth-store'\n\nexport const useSettingsStore = defineStore('settings', {\n  state: () => ({\n    preferences: null,\n    // ...\n  }),\n  actions: {\n    async fetchUserPreferences() {\n      const auth = useAuthStore()\n      if (auth.isAuthenticated) {\n        this.preferences = await fetchPreferences()\n      } else {\n        throw new Error('User must be authenticated')\n      }\n    },\n  },\n})\n\n```\n\n### 4.3. Action é€‰é¡¹å¼ API çš„ç”¨æ³•\n\nå…ˆçœ‹çœ‹ ç»„åˆå¼çš„ç”¨æ³•ï¼Œ**æ›´æ˜“ç”¨**\n\n```html\n<script>\nimport { useCounterStore } from '../stores/counter'\nexport default defineComponent({\n  setup() {\n    const counterStore = useCounterStore()\n    return { counterStore }\n  },\n  methods: {\n    incrementAndPrint() {\n      this.counterStore.increment()\n      console.log('New Count:', this.counterStore.count)\n    },\n  },\n})\n</script>\n```\n\nå¯ä½¿ç”¨ `mapActions()` è¾…åŠ©å‡½æ•°å°† action å±æ€§**æ˜ å°„ä¸ºä½ ç»„ä»¶ä¸­çš„æ–¹æ³•**\n\n```typescript\nimport { mapActions } from 'pinia'\nimport { useCounterStore } from '../stores/counter'\n\nexport default {\n  methods: {\n    // è®¿é—®ç»„ä»¶å†…çš„ this.increment()\n    // ä¸ä» store.increment() è°ƒç”¨ç›¸åŒ\n    ...mapActions(useCounterStore, ['increment'])\n     \n    â‘  ä¸ä¸Šè¿°ç›¸åŒï¼Œä½†å°†å…¶æ³¨å†Œä¸ºthis.myOwnName()\n    \n    ...mapActions(useCounterStore, { myOwnName: 'increment' }),\n  },\n}\n```\n\n### 4.4. è®¢é˜…æˆ–ç›‘å¬ Action\n\nå³ ç›‘å¬ action æ–¹æ³•æ‰§è¡Œåçš„ç»“æœ\n\n```typescript\nconst unsubscribe = someStore.$onAction(\n  ({\n    name, // action åç§°\n    store, // store å®ä¾‹ï¼Œç±»ä¼¼ `someStore`\n    args, // ä¼ é€’ç»™ action çš„å‚æ•°æ•°ç»„\n    after, // åœ¨ action è¿”å›æˆ–è§£å†³åçš„é’©å­\n    onError, // action æŠ›å‡ºæˆ–æ‹’ç»çš„é’©å­\n  }) => {\n    // ä¸ºè¿™ä¸ªç‰¹å®šçš„ action è°ƒç”¨æä¾›ä¸€ä¸ªå…±äº«å˜é‡\n    const startTime = Date.now()\n    // è¿™å°†åœ¨æ‰§è¡Œ \"store \"çš„ action ä¹‹å‰è§¦å‘ã€‚\n    console.log(`Start \"${name}\" with params [${args.join(', ')}].`)\n\n    // è¿™å°†åœ¨ action æˆåŠŸå¹¶å®Œå…¨è¿è¡Œåè§¦å‘ã€‚\n    // å®ƒç­‰å¾…ç€ä»»ä½•è¿”å›çš„ promise\n    after((result) => {\n      console.log(\n        `Finished \"${name}\" after ${\n          Date.now() - startTime\n        }ms.\\nResult: ${result}.`\n      )\n    })\n\n    // å¦‚æœ action æŠ›å‡ºæˆ–è¿”å›ä¸€ä¸ªæ‹’ç»çš„ promiseï¼Œè¿™å°†è§¦å‘\n    onError((error) => {\n      console.warn(\n        `Failed \"${name}\" after ${Date.now() - startTime}ms.\\nError: ${error}.`\n      )\n    })\n  }\n)\n\n// æ‰‹åŠ¨åˆ é™¤ç›‘å¬å™¨\nunsubscribe()\n```\n\nç¬¬äºŒæ¬¡å‚æ•°ï¼š`someStore.$onAction(callback, true)`\n\n```typescript\n<script setup>\nconst someStore = useSomeStore()\n// æ­¤è®¢é˜…å™¨å³ä¾¿åœ¨ç»„ä»¶å¸è½½ä¹‹åä»ä¼šè¢«ä¿ç•™\nsomeStore.$onAction(callback, true)\n</script>\n```\n\n## 5. Pinia æ’ä»¶\n\næ’ä»¶æ˜¯é€šè¿‡` pinia.use() `æ·»åŠ åˆ°` pinia å®ä¾‹`çš„ ï¼Œä½¿ç”¨æ’ä»¶çš„åœºæ™¯æœ‰\n\n- æ·»åŠ æ–°çš„çŠ¶æ€å±æ€§åˆ°store\n- å®šä¹‰storeæ—¶åˆ›å»ºæ–°çš„é€‰é¡¹\n- ä¸ºstoreå¢åŠ æ–°çš„æ–¹æ³•\n- åŒ…è£…ç°æœ‰çš„æ–¹æ³•\n- æ”¹å˜æˆ–å–æ¶ˆaction\n- å®ç°å‰¯ä½œç”¨ï¼Œæ¯”å¦‚æœ¬åœ°å­˜å‚¨\n- æ‰©å±•storeçš„å±æ€§\n\n### 5.1. æœ€ç®€å•çš„ä¸€ä¸ªç¤ºä¾‹\n\né€šè¿‡è¿”å›ä¸€ä¸ªå¯¹è±¡**å°†ä¸€ä¸ªé™æ€å±æ€§æ·»åŠ åˆ°æ‰€æœ‰ store**ï¼Œå¦‚ï¼š\n\n```typescript\nimport { createPinia } from 'pinia'\n\n// åˆ›å»ºçš„æ¯ä¸ª store ä¸­éƒ½ä¼šæ·»åŠ ä¸€ä¸ªåä¸º `secret` çš„å±æ€§ã€‚\n// åœ¨å®‰è£…æ­¤æ’ä»¶åï¼Œæ’ä»¶å¯ä»¥ä¿å­˜åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­\nfunction SecretPiniaPlugin() {\n  return { secret: 'the cake is a lie' }\n}\n\nconst pinia = createPinia()\n// å°†è¯¥æ’ä»¶äº¤ç»™ Pinia\npinia.use(SecretPiniaPlugin)\n\n// åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­\nconst store = useStore()\nstore.secret // 'the cake is a lie'\n```\n\nè¿™å¯¹æ·»åŠ **å…¨å±€å¯¹è±¡**å¾ˆæœ‰ç”¨ï¼Œå¦‚**è·¯ç”±å™¨ã€modal æˆ– toast ç®¡ç†å™¨**\n\n### 5.2. å¦‚ä½•å®šä¹‰æ’ä»¶\n\n```typescript\nexport function myPiniaPlugin(context) {\n  context.pinia // ç”¨ `createPinia()` åˆ›å»ºçš„ piniaã€‚ \n  context.app // ç”¨ `createApp()` åˆ›å»ºçš„å½“å‰åº”ç”¨(ä»… Vue 3)ã€‚\n  context.store // è¯¥æ’ä»¶æƒ³æ‰©å±•çš„ store\n  context.options // å®šä¹‰ä¼ ç»™ `defineStore()` çš„ store çš„å¯é€‰å¯¹è±¡ã€‚\n  // ...\n}\n```\n\n### 5.3. æ¯ä¸ª store éƒ½æ·»åŠ ä¸Šç‰¹å®šå±æ€§\n\n```typescript\n// ä¸Šæ–‡ç¤ºä¾‹\npinia.use(({ store }) => {\n  store.hello = 'world'\n  // ç¡®ä¿ä½ çš„æ„å»ºå·¥å…·èƒ½å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œwebpack å’Œ vite åœ¨é»˜è®¤æƒ…å†µä¸‹åº”è¯¥èƒ½å¤„ç†ã€‚\n  if (process.env.NODE_ENV === 'development') {\n    // æ·»åŠ ä½ åœ¨ store ä¸­è®¾ç½®çš„é”®å€¼\n    store._customProperties.add('hello')\n  }\n})\n```\n\n>  æ¯ä¸ª `store` éƒ½è¢« `reactive` åŒ…è£…è¿‡\n\n### 5.4. æ·»åŠ æ–°çš„å¤–éƒ¨å±æ€§\n\n```typescript\nimport { markRaw } from 'vue'\n// æ ¹æ®ä½ çš„è·¯ç”±å™¨çš„ä½ç½®æ¥è°ƒæ•´\nimport { router } from './router'\n\npinia.use(({ store }) => {\n  store.router = markRaw(router)\n})\n```\n\nä½¿ç”¨ `markRaw` æ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å…¶åœ¨å“åº”å¼ç³»ç»Ÿä¸­å˜ä¸ºéå“åº”å¼çš„ï¼Œé¿å…æ— æ„ä¹‰çš„æ¸²æŸ“\n\n### 5.5. åœ¨æ’ä»¶ä¸­è°ƒç”¨ $subscribe\n\nä½ ä¹Ÿå¯ä»¥åœ¨æ’ä»¶ä¸­ä½¿ç”¨ `store.$subscribe å’Œ store.$onAction `ã€‚\n\n```typescript\npinia.use(({ store }) => {\n  store.$subscribe(() => {\n    // å“åº” store å˜åŒ–\n  })\n  store.$onAction(() => {\n    // å“åº” store actions\n  })\n})\n```\n\n### 5.6. åœ¨å®šä¹‰ store æ—¶ï¼Œå¯æ·»åŠ æ–°çš„ options\n\næ¯”å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª `debounce` é€‰é¡¹ï¼Œå…è®¸ä½ è®©**ä»»ä½• action å®ç°é˜²æŠ–**ã€‚\n\n## 6. TS æ”¯æŒ\n\nå…·ä½“å†å‚è€ƒæ–‡æ¡£\n\n## 7. ç»„ä»¶å¤–éƒ¨ä½¿ç”¨ Store\n\nåœ¨ç»„ä»¶å¤–éƒ¨ä½¿ç”¨storeæ—¶ï¼Œæƒ…å†µä¼šæœ‰æ‰€ä¸åŒã€‚\n\nåœ¨å•é¡µé¢åº”ç”¨ç¨‹åºä¸­ï¼Œåªéœ€åœ¨åˆ›å»ºpiniaå®ä¾‹ä¹‹åè°ƒç”¨`useStore()`å‡½æ•°å³å¯æ­£å¸¸å·¥ä½œã€‚ç¡®ä¿åœ¨piniaå®‰è£…åæ‰è°ƒç”¨`useStore()`å‡½æ•°å³å¯ã€‚\n\nä¾‹å¦‚ï¼Œåœ¨Vue Routerçš„å¯¼èˆªå®ˆå«ä¸­ä½¿ç”¨ `store` æ—¶ï¼Œåº”å°† useStore() çš„è°ƒç”¨æ”¾åœ¨`beforeEach()`å‡½æ•°ä¸­\n\n---\n## 8. é˜…è¯»åŸæ–‡\n- https://liguwe.github.io/post/b3055a75-f4cc-52a0-93da-90e2eb1c913f","6c152cd061ac5cbcbbadd7aa76057296":"\n# Vue3 åŸºç¡€ï¼ˆç¯‡ä¸‰ï¼‰\n\n`#vue3` \n\n## ç›®å½•\n<!-- toc -->\n ## 1. Vue åº”ç”¨å®ä¾‹ \n\n- é€šè¿‡ `createApp` å‡½æ•°åˆ›å»ºæ–°çš„åº”ç”¨å®ä¾‹\n- åº”ç”¨å®ä¾‹éœ€è¦ä¸€ä¸ª`æ ¹ç»„ä»¶`æ¥æ¸²æŸ“å†…å®¹\n- ä½¿ç”¨ `.mount() `æ–¹æ³•æŒ‚è½½åº”ç”¨å®ä¾‹åˆ°` DOM å…ƒç´ `ä¸Š\n- å¯ä»¥é…ç½®åº”ç”¨å®ä¾‹çš„å…¨å±€é€‰é¡¹å’Œèµ„æºï¼Œæ¯”å¦‚\n   - åº”ç”¨çº§åˆ«é”™è¯¯å¤„ç†å™¨ï¼š`app.config.errorHandler = (err) => {})`\n   - æ³¨å†Œä¸€ä¸ªå…¨å±€ç»„ä»¶ï¼š `app.component('TodoDeleteButton', TodoDeleteButton)`\n- ä¸€ä¸ªé¡µé¢å¯ä»¥åˆ›å»ºå¤šä¸ªå…±å­˜çš„ Vue åº”ç”¨å®ä¾‹ã€‚\n\n## 2. Vue æ¨¡æ¿\n\n1ã€Vue ä½¿ç”¨åŸºäº `HTML` çš„æ¨¡æ¿è¯­æ³•, å°†ç»„ä»¶å®ä¾‹çš„æ•°æ®ç»‘å®šåˆ°å‘ˆç°çš„ DOM ä¸Šã€‚\n\n2ã€`æ–‡æœ¬æ’å€¼`ä½¿ç”¨åŒå¤§æ‹¬å·è¯­æ³•,å¯ä»¥å°†ç»„ä»¶å±æ€§æ˜¾ç¤ºä¸ºçº¯æ–‡æœ¬ \n\n3ã€ä½¿ç”¨ `v-html æŒ‡ä»¤`å¯ä»¥å°†å±æ€§æ’å…¥ä¸º`åŸå§‹ HTML`, ä½†è¦æ³¨æ„å®‰å…¨é£é™©ã€‚\n\n3ã€å±æ€§ç»‘å®šä½¿ç”¨ `v-bind` æŒ‡ä»¤æˆ–å…¶`ç®€å†™`ï¼Œ å¯ä»¥åŠ¨æ€ç»‘å®šå¤šä¸ª HTML å±æ€§\n\n4ã€`æŒ‡ä»¤`æ˜¯å¸¦æœ‰ `v- å‰ç¼€`çš„ç‰¹æ®Šå±æ€§,å¯ä»¥æ ¹æ®è¡¨è¾¾å¼çš„å€¼æ›´æ–° DOMï¼Œ`æŒ‡ä»¤`å¯ä»¥å¸¦æœ‰å‚æ•°,å¦‚ `v-bind:href` æˆ– `v-on:click`,ç”¨äºæŒ‡å®šç»‘å®šçš„ç›®æ ‡\n\n5ã€`åŠ¨æ€å‚æ•°`å…è®¸ä½¿ç”¨`js è¡¨è¾¾å¼`è®¡ç®—å‚æ•°åç§°,å¦‚` :[someAttrObj]`\n\n6ã€`ä¿®é¥°ç¬¦`æ˜¯ä»¥ç‚¹å¼€å¤´çš„ç‰¹æ®Šåç¼€ï¼Œç”¨äºæŒ‡å®šæŒ‡ä»¤éœ€è¦ä»¥ç‰¹æ®Šæ–¹å¼ç»‘å®šï¼Œå¦‚` .prevent`ã€‚\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/3df5cd42ab14e6bb604f1a7fc53e3e91.png)\n\n7ã€JavaScript è¡¨è¾¾å¼å¯ä»¥è¢«ä½¿ç”¨åœ¨å¦‚ä¸‹åœºæ™¯ä¸Š\n\n- åœ¨æ–‡æœ¬æ’å€¼ä¸­ (åŒå¤§æ‹¬å·)\n- åœ¨ä»»ä½• Vue æŒ‡ä»¤ (ä»¥ v- å¼€å¤´çš„ç‰¹æ®Š attribute) attribute çš„å€¼ä¸­\n\n## 3. å“åº”å¼åŸºç¡€\n\n1ã€å»ºè®®ä½¿ç”¨ `<script setup>`ï¼Œæ¥ç®€åŒ–æš´éœ²å¤§é‡çš„çŠ¶æ€å’Œæ–¹æ³•çš„ç¹ç\n\n2ã€`ref`å¯ä»¥åŒ…è£…`ä»»ä½•ç±»å‹`çš„å€¼å¹¶ä¿æŒ`æ·±å±‚å“åº”æ€§` ï¼Œå³ æ”¹å˜åµŒå¥—å¯¹è±¡æˆ–æ•°ç»„æ—¶ï¼Œå˜åŒ–ä¹Ÿä¼šè¢«æ£€æµ‹åˆ°\n\n- åœ¨`æ¨¡æ¿`æ¸²æŸ“ä¸Šä¸‹æ–‡ä¸­ï¼Œåªæœ‰`é¡¶çº§çš„ ref` å±æ€§æ‰ä¼šè¢«è§£åŒ…\n- DOM æ›´æ–°ä¸é€‚åˆ ref å˜åŒ–åŒæ­¥çš„ï¼Œ`nextTick()` åå¯ä»¥ä¿è¯æ›´æ–°\n- éæ¨¡æ¿åœºæ™¯ï¼Œ**è§£æ„é‡Œé¢çš„å±æ€§ä¹Ÿä¼šä¸¢å¤±å“åº”æ€§**\n\n3ã€`reactive()` å°†ä½¿`å¯¹è±¡æœ¬èº«`å…·æœ‰å“åº”æ€§ï¼›\n\n- å¦å¤–åªæœ‰`ä»£ç†å¯¹è±¡`æ˜¯å“åº”å¼çš„ï¼Œæ›´æ”¹`åŸå§‹å¯¹è±¡`ä¸ä¼šè§¦å‘æ›´æ–°\n- åŒä¸€ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ `reactive() `ä¼šè¿”å›ç›¸åŒçš„ä»£ç†\n- åœ¨ä¸€ä¸ªä»£ç†ä¸Šè°ƒç”¨ `reactive() `ä¼šè¿”å›å®ƒè‡ªå·±\n- `reactive()` çš„å±€é™æ€§\n   - `reactive()` åªèƒ½å¤„ç†å¯¹è±¡ç±»å‹ï¼Œä¸èƒ½å¤„ç†åŸå§‹ç±»å‹\n   - `reactive()` ä¸èƒ½æ›¿æ¢æ•´ä¸ªå¯¹è±¡ï¼Œå¦åˆ™ä¼šä¸¢å¤±å“åº”å¼\n   - `è§£æ„`ä¼šä¸¢å¤±å“åº”æ€§ï¼Œæ¯”å¦‚ `let { count } = state` ä¸­ï¼Œä¿®æ”¹ `count`å°±æ²¡ç”¨äº†\n\n```javascript\nimport { reactive } from 'vue'\n\nconst state = reactive({ count: 0 })\n\n// åªæœ‰ä»£ç†å¯¹è±¡æ˜¯å“åº”å¼çš„ï¼Œæ›´æ”¹åŸå§‹å¯¹è±¡ä¸ä¼šè§¦å‘æ›´æ–°\nconst raw = {}\nconst proxy = reactive(raw)\n\n\n// åœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ reactive() ä¼šè¿”å›ç›¸åŒçš„ä»£ç†\nconsole.log(reactive(raw) === proxy) // true\n\n// åœ¨ä¸€ä¸ªä»£ç†ä¸Šè°ƒç”¨ reactive() ä¼šè¿”å›å®ƒè‡ªå·±\nconsole.log(reactive(proxy) === proxy) // true\n\n\nlet state = reactive({ count: 0 })\n\n// ä¸Šé¢çš„ ({ count: 0 }) å¼•ç”¨å°†ä¸å†è¢«è¿½è¸ª\n// (å“åº”æ€§è¿æ¥å·²ä¸¢å¤±ï¼)\nstate = reactive({ count: 1 })\n```\n\n## 4. è®¡ç®—å±æ€§\n\n- è®¡ç®—å±æ€§å¯ä»¥ç”¨æ¥æè¿°ä¾èµ–å“åº”å¼çŠ¶æ€çš„å¤æ‚é€»è¾‘,æ¯”æ–¹æ³•æ›´åŠ ä¼˜é›…å’Œé«˜æ•ˆ\n- è®¡ç®—å±æ€§åŸºäºå…¶å“åº”å¼ä¾èµ–è¢«`ç¼“å­˜`,åªæœ‰åœ¨ä¾èµ–å˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—,è¿™`å¯¹äºæ€§èƒ½æ•æ„Ÿçš„åœºæ™¯`å¾ˆæœ‰å¸®åŠ©ã€‚\n- è®¡ç®—å±æ€§å¯ä»¥å®šä¹‰ä¸º`å¯å†™å±æ€§`,æä¾› `getter` å’Œ `setter` æ–¹æ³•ã€‚\n- è®¡ç®—å±æ€§çš„ `getter` åº”è¯¥åªåšè®¡ç®—è€Œæ²¡æœ‰ä»»ä½•`å‰¯ä½œç”¨`ï¼Œä¸åº”è¯¥æ”¹å˜å…¶ä»–çŠ¶æ€æˆ–æ‰§è¡Œå¼‚æ­¥æ“ä½œã€‚\n- è®¡ç®—å±æ€§è¿”å›çš„å€¼åº”è¯¥è¢«è§†ä¸º`åªè¯»çš„`ï¼Œä¸åº”è¯¥ç›´æ¥ä¿®æ”¹å®ƒï¼Œè€Œæ˜¯`åº”è¯¥æ›´æ–°å®ƒæ‰€ä¾èµ–çš„æºçŠ¶æ€**\n\n```vue\n<script setup>\n  import { ref, computed } from 'vue'\n\n  const firstName = ref('John')\n  const lastName = ref('Doe')\n\n  const fullName = computed({\n    // getter\n    get() {\n      return firstName.value + ' ' + lastName.value\n    },\n    // setter\n    set(newValue) {\n      // æ³¨æ„ï¼šæˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯è§£æ„èµ‹å€¼è¯­æ³•\n      [firstName.value, lastName.value] = newValue.split(' ')\n    }\n  })\n</script>\n```\n\nè¯¥æ–‡ç« ä¸»è¦ä»‹ç»äº†å¦‚ä½•åœ¨ Vue.js ä¸­ç»‘å®š HTML class å’Œå†…è”æ ·å¼ã€‚\n\n## 5. ç±»ä¸æ ·å¼\n\n- `:class ` å’Œ `:style` éƒ½å¯ä»¥ç»‘å®š`æ•°ç»„` æˆ–è€… `å¯¹è±¡`ï¼Œå¹¶ä¸”æœ€åä¼šè¢«`åˆå¹¶` å¤„ç†ã€‚\n- `:style` ç»‘å®šçš„å±æ€§åå¯ä»¥ä½¿ç”¨ `camelCase` æˆ– `kebab-case`ã€‚\n- Vue ä½¿ç”¨ `:style` ä¼šè‡ªåŠ¨æ·»åŠ `å‰ç¼€`\n\n## 6. æ¡ä»¶æ¸²æŸ“\n\n- `v-if`\n   - `v-if æŒ‡ä»¤`ç”¨äºæ¡ä»¶æ€§åœ°æ¸²æŸ“å†…å®¹ï¼Œ**ä»…åœ¨è¡¨è¾¾å¼è¿”å›çœŸå€¼æ—¶æ¸²æŸ“**ã€‚ \n   - æ³¨æ„ `v-if ` `v-else-if` `v-else` ä¸‰ä¸ªçš„é…å¯¹å…³ç³»ã€‚\n- `v-if` ä¸ `v-show`\n   - `v-if` æ˜¯çœŸå®çš„æŒ‰æ¡ä»¶æ¸²æŸ“ï¼Œåˆ‡æ¢æ—¶**é”€æ¯ä¸é‡å»ºäº‹ä»¶ç›‘å¬å™¨å’Œå­ç»„ä»¶**ï¼›\n   - `v-show `åˆ™ç®€å•åˆ‡æ¢ CSS å±æ€§ï¼ˆå³å§‹ç»ˆä¿ç•™åœ¨ DOM ä¸­ï¼Œä»…åˆ‡æ¢ display å±æ€§ï¼‰\n   - `v-if` æœ‰**æ›´é«˜çš„åˆ‡æ¢å¼€é”€**ï¼Œè€Œ `v-show` æœ‰**æ›´é«˜çš„åˆå§‹æ¸²æŸ“å¼€é”€**\n- ` v-if` ä¼˜å…ˆçº§é«˜äº  `v-for`ï¼Œ ä¸æ¨èåŒæ—¶ä½¿ç”¨ã€‚\n\n## 7. åˆ—è¡¨æ¸²æŸ“\n\n- å¾ªç¯èŒƒå›´ï¼š `v-for=\"n in 10\"`\n- å¾ªç¯åˆ—è¡¨ï¼š`v-for=\"item in items\"`\n- ä½¿ç”¨ `of` ï¼š  `v-for=\"item of items\"`\n- ä½¿ç”¨ `key` ä¼˜åŒ–æ€§èƒ½\n- åœ¨`è®¡ç®—å±æ€§`ä¸­ä½¿ç”¨ `reverse()` å’Œ `sort()` ä¼šä¿®æ”¹åŸæ•°ç»„ï¼ŒåŠ¡å¿…å°å¿ƒ\n\n```js\n- return numbers.reverse()\n+ return [...numbers].reverse()\n```\n\n## 8. äº‹ä»¶å¤„ç†\n\n- ä½¿ç”¨ `v-on` æŒ‡ä»¤ç›‘å¬ DOM äº‹ä»¶ï¼Œå¹¶åœ¨äº‹ä»¶è§¦å‘æ—¶æ‰§è¡Œå¯¹åº”çš„ JavaScriptã€‚\n- å†…è”äº‹ä»¶ ä¸ æ–¹æ³•äº‹ä»¶\n   - `å†…è”äº‹ä»¶`å¤„ç†å™¨é€‚ç”¨äºç®€å•åœºæ™¯ï¼Œ\n   - è€Œ`æ–¹æ³•äº‹ä»¶`å¤„ç†å™¨é€‚ç”¨äºå¤æ‚é€»è¾‘ã€‚\n- å¦‚ä½•ä¼ å…¥å‚æ•°ï¼Ÿ\n   - å¯ä»¥åœ¨`å†…è”äº‹ä»¶å¤„ç†å™¨`ä¸­`è°ƒç”¨æ–¹æ³•`ï¼Œå¹¶`ä¼ å…¥è‡ªå®šä¹‰å‚æ•°`æˆ–è®¿é—®åŸç”Ÿäº‹ä»¶ã€‚\n- Vue æä¾›äº†å¤šç§`äº‹ä»¶ä¿®é¥°ç¬¦`ï¼Œ\n   - å¦‚ `.stop.prevent.self.capture.once.passive` ï¼Œä»¥ç®€åŒ–äº‹ä»¶å¤„ç†\n- `æŒ‰é”®ä¿®é¥°ç¬¦`å’Œ`ç³»ç»ŸæŒ‰é”®ä¿®é¥°ç¬¦`ç”¨äºå¤„ç†ç‰¹å®šæŒ‰é”®äº‹ä»¶\n   - æŒ‰é”®ä¿®é¥°ç¬¦ï¼š `.enter .tab .delete  .esc .space .up .down .left .right`\n   - ç³»ç»ŸæŒ‰é”®ä¿®é¥°ç¬¦ï¼š  `.ctrl .alt .shift .meta` \n- `.exact` ä¿®é¥°ç¬¦å…è®¸ç²¾ç¡®æ§åˆ¶è§¦å‘äº‹ä»¶æ‰€éœ€çš„ç³»ç»Ÿä¿®é¥°ç¬¦ç»„åˆ\n- `é¼ æ ‡æŒ‰é”®ä¿®é¥°ç¬¦`ç”¨äºå¤„ç†ç‰¹å®šé¼ æ ‡æŒ‰é”®è§¦å‘çš„äº‹ä»¶\n   - æ¯”å¦‚ `.left.right.middle` \n\n> `passive` æ˜¯ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨é€‰é¡¹ï¼Œå®ƒå‘Šè¯‰æµè§ˆå™¨ç›‘å¬å™¨ä¸ä¼šè°ƒç”¨ `preventDefault() `æ¥é˜»æ­¢é»˜è®¤çš„æ»šåŠ¨è¡Œä¸ºï¼Œå¯ç”¨äºæ”¹å–„æ»šåŠ¨æ€§èƒ½ã€‚\n\n```javascript\nwindow.addEventListener('scroll', function(event) {\n    // å¤„ç†æ»šåŠ¨äº‹ä»¶\n}, { passive: true });\n```\n\n## 9. è¡¨å•è¾“å…¥ç»‘å®š\n\n- `v-model æŒ‡ä»¤`ç®€åŒ–äº†è¡¨å•è¾“å…¥ä¸ JavaScript å˜é‡çš„åŒæ­¥\n- `v-model` æ”¯æŒå¤šç§è¡¨å•å…ƒç´ ï¼ŒåŒ…æ‹¬æ–‡æœ¬è¾“å…¥ã€å¤é€‰æ¡†ã€å•é€‰æŒ‰é’®å’Œé€‰æ‹©å™¨ã€‚æ¯”å¦‚\n   - æ–‡æœ¬ç±»å‹çš„` <input>` å’Œ `<textarea>` å…ƒç´ ä¼šç»‘å®š `value property` å¹¶ä¾¦å¬` input äº‹ä»¶`ï¼›\n   - `<input type=\"checkbox\">` å’Œ `<input type=\"radio\">` ä¼šç»‘å®š `checked property `å¹¶ä¾¦å¬ `change äº‹ä»¶`ï¼›\n   - `<select> `ä¼šç»‘å®š `value property `å¹¶ä¾¦å¬ `change` äº‹ä»¶\n   - `v-model` ä¼šå¿½ç•¥ä»»ä½•è¡¨å•å…ƒç´ ä¸Šåˆå§‹çš„ `value`ã€`checked` æˆ– `selected` attribute\n- `v-model` å¯ä»¥ä¸`ä¿®é¥°ç¬¦`ä¸€èµ·ä½¿ç”¨ï¼Œå¦‚` .lazyã€.number å’Œ .trim`ï¼Œä»¥å®ç°ä¸åŒçš„è¾“å…¥ç®¡ç†æ–¹å¼\n   - `.lazy`ï¼šåœ¨  `change` äº‹ä»¶ååŒæ­¥æ›´æ–°è€Œä¸æ˜¯ `input`\n- é™¤äº†`å†…ç½®è¡¨å•`å¤–ï¼Œå¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ `v-model` æ¥åˆ›å»ºå…·æœ‰`è‡ªå®šä¹‰è¡Œä¸º`çš„å¯å¤ç”¨è¾“å…¥ç»„ä»¶\n\nç›¸å¯¹å°ä¼—çš„ä¸€ä¸ªç”¨æ³•ï¼š\n\n```vue\n<input\n  type=\"checkbox\"\n  v-model=\"toggle\"\n  :true-value=\"'é€‰ä¸­äº†'\"\n  :false-value=\"'æœªé€‰ä¸­'\" />\n```\n\n## 10. ç”Ÿå‘½å‘¨æœŸ\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/ecf5a16d3c2229d12c040cb757da8714.png)\n\n## 11. ä¾¦å¬å™¨\n\n### 11.1. watch \n\n```javascript\n// ä¾¦å¬å•ä¸ªæ¥æº\nfunction watch<T>(\n  source: WatchSource<T>,\n  callback: WatchCallback<T>,\n  options?: WatchOptions\n): StopHandle\n\n// ä¾¦å¬å¤šä¸ªæ¥æº\nfunction watch<T>(\n  sources: WatchSource<T>[],\n  callback: WatchCallback<T[]>,\n  options?: WatchOptions\n): StopHandle\n\ntype WatchCallback<T> = (\n  value: T,\n  oldValue: T,\n  onCleanup: (cleanupFn: () => void) => void\n) => void\n\ntype WatchSource<T> =\n  | Ref<T> // ref\n  | (() => T) // getter\n  | T extends object\n  ? T\n  : never // å“åº”å¼å¯¹è±¡\n\ninterface WatchOptions extends WatchEffectOptions {\n  immediate?: boolean // é»˜è®¤ï¼šfalse\n  deep?: boolean // é»˜è®¤ï¼šfalse\n  flush?: 'pre' | 'post' | 'sync' // é»˜è®¤ï¼š'pre'\n  onTrack?: (event: DebuggerEvent) => void\n  onTrigger?: (event: DebuggerEvent) => void\n  once?: boolean // é»˜è®¤ï¼šfalse (3.4+)\n}\n```\n\n### 11.2. watchEffect()\n\n```javascript\nfunction watchEffect(\n  effect: (onCleanup: OnCleanup) => void,\n  options?: WatchEffectOptions\n): StopHandle\n\ntype OnCleanup = (cleanupFn: () => void) => void\n\ninterface WatchEffectOptions {\n  flush?: 'pre' | 'post' | 'sync' // é»˜è®¤ï¼š'pre'\n  onTrack?: (event: DebuggerEvent) => void\n  onTrigger?: (event: DebuggerEvent) => void\n}\n\ntype StopHandle = () => void\n```\n\n### 11.3. å‡ ä¸ªæ³¨æ„ç‚¹\n\n1ã€`watch` çš„ `ç¬¬ä¸€ä¸ªå‚æ•°` éƒ½å»ºè®®å†™æˆ`ç®­å¤´å‡½æ•°`\n\n2ã€æ³¨æ„ `watch`  çš„ `ç¬¬äºŒä¸ªå‚æ•°` æœ‰ `once` ã€`immediate` ï¼Œ `deep`\n- ä½†éœ€è¦æ³¨æ„ `deep = true æ—¶`  å¯èƒ½ä¼šå¼•èµ·æ€§èƒ½é—®é¢˜\n\n3ã€ [watchEffectå‡½æ•°](https://cn.vuejs.org/api/reactivity-core.html#watcheffect)  ä¼š**è‡ªåŠ¨æ”¶é›†å¹¶è¿½è¸ª**å‡½æ•°å†…æ‰€ä¾èµ–çš„å“åº”å¼æ•°æ®ï¼Œçœå¾—æ‰‹åŠ¨ç»´æŠ¤æ‰€éœ€è¦ç›‘å¬çš„æ•°æ®ï¼Œä»–ä¸éœ€è¦åƒ `watch` ä¸€æ · é€’å½’åœ°è·Ÿè¸ªæ‰€æœ‰çš„å±æ€§ï¼Œæ¯”è¾ƒé€‚åˆä¾¦å¬ä¸€ä¸ªåµŒå¥—æ•°æ®ç»“æ„ä¸­çš„`å‡ ä¸ªå±æ€§`ã€‚\n\n4ã€å›è°ƒçš„è§¦å‘æ—¶æœº\n\nï¼ˆ1ï¼‰é»˜è®¤æƒ…å†µä¸‹ï¼Œä¾¦å¬å™¨å›è°ƒä¼šåœ¨`çˆ¶ç»„ä»¶æ›´æ–°ä¹‹åã€æ‰€å±ç»„ä»¶çš„ DOM æ›´æ–°ä¹‹å‰`è¢«è°ƒç”¨ï¼Œè¿™æ„å‘³ç€å¦‚æœä½ å°è¯•åœ¨ä¾¦å¬å™¨å›è°ƒä¸­è®¿é—®æ‰€å±ç»„ä»¶çš„ DOMï¼Œé‚£ä¹ˆ DOM å°†å¤„äºæ›´æ–°å‰çš„çŠ¶æ€\n\nï¼ˆ2ï¼‰å¯ä»¥é€šè¿‡è®¾ç½®`flush: 'post'`é€‰é¡¹åœ¨ä¾¦å¬å™¨å›è°ƒä¸­è®¿é—®è¢« Vue æ›´æ–°ä¹‹åçš„ DOMã€‚\n\nï¼ˆ3ï¼‰å¯ä»¥è®¾ç½® `flush: 'sync'` åˆ›å»ºä¸€ä¸ª`åŒæ­¥è§¦å‘çš„ä¾¦å¬å™¨`ï¼Œå®ƒä¼šåœ¨ Vue è¿›è¡Œä»»ä½•æ›´æ–°ä¹‹å‰è§¦å‘\n\nï¼ˆ4ï¼‰åŒæ­¥ä¾¦å¬å™¨ä¸ä¼šè¿›è¡Œ**æ‰¹å¤„ç†**ï¼Œæ¯å½“æ£€æµ‹åˆ°å“åº”å¼æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶å°±ä¼šè§¦å‘ã€‚å¯ä»¥ä½¿ç”¨å®ƒæ¥ç›‘è§†ç®€å•çš„å¸ƒå°”å€¼ï¼Œä½†åº”é¿å…åœ¨å¯èƒ½å¤šæ¬¡åŒæ­¥ä¿®æ”¹çš„æ•°æ®æº (å¦‚æ•°ç»„) ä¸Šä½¿ç”¨\n\n5ã€åœæ­¢ä¾¦å¬å™¨\n\nï¼ˆ1ï¼‰å®¿ä¸»ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨åœæ­¢ï¼Œä½†å¼‚æ­¥å›è°ƒé‡Œåˆ™ä¸ä¼š\n\n```javascript\n<script setup>\nimport { watchEffect } from 'vue'\n\n// å®ƒä¼šè‡ªåŠ¨åœæ­¢\nwatchEffect(() => {})\n\n// ...è¿™ä¸ªåˆ™ä¸ä¼šï¼\nsetTimeout(() => {\n  watchEffect(() => {})\n}, 100)\n</script>\n```\n\n> éœ€è¦`å¼‚æ­¥åˆ›å»º`ä¾¦å¬å™¨çš„æƒ…å†µå¾ˆå°‘ï¼Œè¯·å°½å¯èƒ½é€‰æ‹©`åŒæ­¥åˆ›å»º`ã€‚å¦‚æœéœ€è¦ç­‰å¾…ä¸€äº›å¼‚æ­¥æ•°æ®ï¼Œä½ å¯ä»¥ä½¿ç”¨**æ¡ä»¶å¼çš„ä¾¦å¬é€»è¾‘**\n\nï¼ˆ2ï¼‰æ‰‹åŠ¨åœæ­¢ä¸€ä¸ªä¾¦å¬å™¨ï¼Œè¯·è°ƒç”¨ `watch` æˆ– `watchEffect` è¿”å›çš„å‡½æ•°\n\n```javascript\nconst unwatch = watchEffect(() => {})\n\n// ...å½“è¯¥ä¾¦å¬å™¨ä¸å†éœ€è¦æ—¶\nunwatch()\n```\n\n## 12. æ¨¡æ¿å¼•ç”¨\n\n1ã€ä½¿ç”¨ `ref attribute` æ¥å¼•ç”¨ DOM ï¼Œå¦‚ `<input ref=\"input\"> `\n\n2ã€åœ¨ç»„ä»¶æŒ‚è½½å `onMounted` ä¸­ï¼Œä½¿ç”¨ `ref` ,ä¸ç„¶å¯èƒ½ä¸º `null` ï¼›æˆ–è€… `watch ` ä¸ä¸ºç©ºæ—¶ï¼Œä¹Ÿèƒ½æ­£å¸¸è·å–åˆ° DOM\n\n3ã€`v-for` ä¸­çš„æ¨¡æ¿å¼•ç”¨ï¼Œ`<li v-for=\"item in list\" ref=\"itemRefs\">` ï¼Œ å…¶ä¸­ `const itemRefs = ref([]) `\n\n4ã€å‡½æ•°æ¨¡æ¿å¼•ç”¨ï¼š `<input :ref=\"(el) => { /* å°† el èµ‹å€¼ç»™ä¸€ä¸ªæ•°æ®å±æ€§æˆ– ref å˜é‡ */ }\">`\n\n5ã€ç»„ä»¶ä¸Šçš„ `ref` ï¼š `<Child ref=\"child\" />`ï¼Œè€Œåå°±å¯ä»¥é€šè¿‡ `child` è·å–ç»„ä»¶ `Child` çš„å®ä¾‹ï¼Œä½†è®¿é—®`ç»„ä»¶å®ä¾‹`çš„å±æ€§æˆ–æ–¹æ³•éœ€è¦é€šè¿‡ `defineExpose` æš´éœ²å‡ºæ¥ï¼ŒåŸå› å¦‚ä¸‹ï¼š\n\n> ä½¿ç”¨äº† `<script setup>` çš„ç»„ä»¶æ˜¯é»˜è®¤ç§æœ‰çš„ï¼šä¸€ä¸ªçˆ¶ç»„ä»¶æ— æ³•è®¿é—®åˆ°ä¸€ä¸ªä½¿ç”¨äº† `<script setup> `çš„å­ç»„ä»¶ä¸­çš„ä»»ä½•ä¸œè¥¿ï¼Œé™¤éå­ç»„ä»¶åœ¨å…¶ä¸­é€šè¿‡ `defineExpose` å® **æ˜¾å¼æš´éœ²**\n\n","d60d72b996b053a49903884d313c885c":"\n# Vue3 ç»„ä»¶\n\n`#vue3`  `#å‰ç«¯æ¡†æ¶/vue`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åŸºç¡€ \n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/158cdda6d2da00692729eb12f32de205.png)\n\n### 1.1. å®šä¹‰\n\nå®šä¹‰ï¼šä½¿ç”¨ `SFC` æˆ–è€… `ç‰¹å®šJavaScript å¯¹è±¡`\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/b3751bcb2ed0be8d12f1ebf08cf1fc8e.png)\n\n> å†…è”æ¨¡æ¿å­—ç¬¦ä¸²æ—¶ï¼Œå¿…é¡»è¿™æ ·ï¼š`<script type=\"text/x-template\">`\n\n### 1.2. ä½¿ç”¨ç»„ä»¶\n\nä½¿ç”¨ç»„ä»¶ï¼š`<script setup>` ä¸­ï¼Œå¯¼å…¥çš„ç»„ä»¶éƒ½åœ¨æ¨¡æ¿ä¸­ç›´æ¥å¯ç”¨ï¼Œæˆ– å…¨å±€æ³¨å†Œç»„ä»¶éƒ½ä¸éœ€è¦å¯¼å…¥\n\n### 1.3. ä¼ é€’ props\n\n`<script setup>` ä¸­ ä½¿ç”¨ `const props = defineProps(['title'])` å®šä¹‰\n\n```javascript\nexport default {\n  props: ['title'],\n  setup(props) {\n    console.log(props.title)\n  }\n}\n```\n\n### 1.4. å®šä¹‰äº‹ä»¶\n\n`<script setup>` ä¸­ ä½¿ç”¨ `const emit = defineEmits(['enlarge-text'])` å®šä¹‰\n\n```javascript\nexport default {\n  emits: ['enlarge-text'],\n  setup(props, ctx) {\n    ctx.emit('enlarge-text')\n  }\n}\n```\n\n### 1.5. æ’æ§½\n\nåƒ HTML å…ƒç´ ä¸€æ ·å‘`ç»„ä»¶`ä¸­ä¼ é€’å†…å®¹\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/e51ef16990a2a7456969b2eb98fbcd62.png)\n\n### 1.6. åŠ¨æ€ç»„ä»¶\n\nå³ä½¿ç”¨  `<component>`  \n\n```vue\n<!-- currentTab æ”¹å˜æ—¶ç»„ä»¶ä¹Ÿæ”¹å˜ -->\n<component :is=\"tabs[currentTab]\"></component>\n```\n\n> è¢«åˆ‡æ¢æ‰çš„ç»„ä»¶ä¼šè¢«`å¸è½½` ï¼Œå¯ä½¿ç”¨ `KeepAlive` å¼ºåˆ¶`å­˜æ´»`\n\n### 1.7. `:is` çš„ç”¨æ³•\n\nå…ƒç´ ä½ç½®é™åˆ¶å¦‚ä½•è§£å†³ï¼Ÿ  æ¯”å¦‚ `li` å¿…é¡»åœ¨ `ul` é‡Œï¼Œ`tr` å¿…é¡»åœ¨ `table`é‡Œ\n\nä¸¾ä¾‹ï¼š\n\n```vue\n<table>\n  <blog-post-row></blog-post-row>\n</table>\n```\n\nè§£å†³æ–¹æ¡ˆï¼š\n\n```vue\n<table>\n  <tr is=\"vue:blog-post-row\"></tr>\n</table>\n```\n\n## 2. æ³¨å†Œç»„ä»¶\n\n### 2.1. å…¨å±€æ³¨å†Œ\n\nå³åº”ç”¨å†…ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ `<ComponentA/>`\n\n```js\nimport { createApp } from 'vue'\n\nconst app = createApp({})\n\napp.component(\n  // æ³¨å†Œçš„åå­—\n  'MyComponent',\n  // ç»„ä»¶çš„å®ç°\n  {\n    /* ... */\n  }\n)\n\n// é“¾å¼è°ƒç”¨  \napp\n.component('ComponentA', ComponentA)\n.component('ComponentB', ComponentB)\n.component('ComponentC', ComponentC)\n```\n\n#### 2.1.1. å…¨å±€æ³¨å†Œçš„é—®é¢˜\n\n1. ä¸èƒ½è¢« `tree-shaking` ï¼Œä¼šå¯¼è‡´ js åŒ…è¿‡å¤§\n2. å’Œä½¿ç”¨è¿‡å¤šçš„`å…¨å±€å˜é‡`ä¸€æ ·ï¼Œå¤ªå¤š`å…¨å±€æ³¨å†Œçš„ç»„ä»¶`å¯èƒ½ä¼šå½±å“åº”ç”¨é•¿æœŸçš„å¯ç»´æŠ¤æ€§\n\n### 2.2. å±€éƒ¨æ³¨å†Œ\n\nï¼ˆ1ï¼‰ä½¿ç”¨ `<script setup>`ï¼Œå¯¼å…¥çš„ç»„ä»¶å¯ä»¥ç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼Œæ— éœ€æ³¨å†Œ\n\nï¼ˆ2ï¼‰ä¸ä½¿ç”¨`<script setup>`ï¼Œ åˆ™éœ€è¦ä½¿ç”¨` components é€‰é¡¹`æ¥`æ˜¾å¼æ³¨å†Œ\n`\nï¼ˆ3ï¼‰å±€éƒ¨æ³¨å†Œçš„ç»„ä»¶åœ¨`åä»£ç»„ä»¶`ä¸­ä¸å¯ç”¨ï¼Œå³åªåœ¨å½“å‰ç»„ä»¶å¯ç”¨\n\n### 2.3. ç»„ä»¶å‘½åå’Œä½¿ç”¨å‘½å\n\n`ç»„ä»¶å®šä¹‰å‘½å`å’Œ`ç»„ä»¶ä½¿ç”¨å‘½å`ï¼šæ¯”å¦‚ `MyComponent` ä¸ºåæ³¨å†Œçš„ç»„ä»¶ï¼Œåœ¨æ¨¡æ¿ä¸­å¯ä»¥é€šè¿‡ `<MyComponent>` æˆ– `<my-component>` \n- PascalCase è¿™æ ·çš„ç»„ä»¶å®šä¹‰åœ¨ IDE ä¸­å‹å¥½\n- `PascalCase` æ ¼å¼çš„ä¸€çœ‹å°±æ˜¯ `Vue ç»„ä»¶`ï¼Œå¾ˆå®¹æ˜“å’Œ`è‡ªå®šä¹‰å…ƒç´  (web components)` åŒºåˆ†å¼€æ¥\n\n## 3. Props å®šä¹‰\n\n1ã€`props` å¯ä»¥ä½¿ç”¨  `defineProps()`  å®æ¥å£°æ˜\n\nï¼ˆ1ï¼‰` <script setup>` ï¼š `const props = defineProps(['foo'])`\n\nï¼ˆ2ï¼‰ä¸ä½¿ç”¨`setup` ï¼Œä½¿ç”¨ `props` é€‰é¡¹å£°æ˜\n\n--- \n\n2ã€ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ç»‘å®šå¤šä¸ª `prop`ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š\n\n```typescript\nconst post = {\n  id: 1,\n  title: 'My Journey with Vue'\n}\n  \n`<BlogPost v-bind=\"post\" />`\n\n//******************=======>  ç­‰ä»·äº\n`<BlogPost :id=\"post.id\" :title=\"post.title\" />`\n```\n\n---\n\n3ã€`props` å¯ä»¥æ˜¯é™æ€å€¼æˆ–åŠ¨æ€ç»‘å®šçš„å€¼\n\nï¼ˆ1ï¼‰`é™æ€` å³ `:key=1`\n\nï¼ˆ2ï¼‰`åŠ¨æ€`å³`:key={post.title}`\n\n4ã€æ‰€æœ‰çš„ `props` éƒ½éµå¾ªç€`å•å‘ç»‘å®šåŸåˆ™`ï¼Œé¿å…å­ç»„ä»¶ä¿®æ”¹çˆ¶ç»„ä»¶çš„çŠ¶æ€ã€‚ å¦åˆ™æ•°æ®æµå°†å¾ˆå®¹æ˜“å˜å¾—æ··ä¹±è€Œéš¾ä»¥ç†è§£ï¼Œæ›´æ”¹ä¸€ä¸ª prop çš„éœ€æ±‚é€šå¸¸æ¥æºäºä»¥ä¸‹å‡ ç§åœºæ™¯\n\nï¼ˆ1ï¼‰prop è¢«ç”¨äºä¼ å…¥`åˆå§‹å€¼`\n\n```javascript\nconst props = defineProps(['initialCounter'])\n\n// è®¡æ•°å™¨åªæ˜¯å°† props.initialCounter ä½œä¸ºåˆå§‹å€¼\n// åƒä¸‹é¢è¿™æ ·åšå°±ä½¿ prop å’Œåç»­æ›´æ–°æ— å…³äº†\nconst counter = ref(props.initialCounter)\n```\n\nï¼ˆ2ï¼‰éœ€è¦å¯¹ä¼ å…¥çš„` prop å€¼`åšè¿›ä¸€æ­¥çš„è½¬æ¢ï¼Œå»ºè®®ä½¿ç”¨ `computed`\n\nï¼ˆ3ï¼‰æ›´æ”¹`å¯¹è±¡ / æ•°ç»„ç±»å‹`çš„ `props`ï¼Œä»…åœ¨çˆ¶å­ç»„ä»¶åœ¨è®¾è®¡ä¸Šæœ¬æ¥å°±éœ€è¦`ç´§å¯†è€¦åˆ`ï¼Œä¸ç„¶å­ç»„ä»¶ä¸å…è®¸ç›´æ¥ä¿®æ”¹ï¼Œå¦åˆ™éƒ½æ¨èå­ç»„ä»¶æŠ›å‡ºä¸€ä¸ª`äº‹ä»¶`æ¥é€šçŸ¥çˆ¶ç»„ä»¶åšå‡ºæ”¹å˜ï¼Œå³éƒ½å›åˆ°çˆ¶ç»„ä»¶ä¿®æ”¹\n\n> å› ä¸ºæ˜¯å¼•ç”¨ç±»å‹ï¼Œé˜»æ­¢è¿™ç§æ›´æ”¹ä¸ç°å®\n\n---\n\n5ã€Prop æ ¡éªŒ\n\n```javascript\ndefineProps({\n  // åŸºç¡€ç±»å‹æ£€æŸ¥\n  // ï¼ˆç»™å‡º `null` å’Œ `undefined` å€¼åˆ™ä¼šè·³è¿‡ä»»ä½•ç±»å‹æ£€æŸ¥ï¼‰\n  propA: Number,\n  // å¤šç§å¯èƒ½çš„ç±»å‹\n  propB: [String, Number],\n  // å¿…ä¼ ï¼Œä¸”ä¸º String ç±»å‹\n  propC: {\n    type: String,\n    required: true\n  },\n  // å¿…ä¼ ä½†å¯ä¸ºç©ºçš„å­—ç¬¦ä¸²\n  propD: {\n    type: [String, null],\n    required: true\n  },\n  // Number ç±»å‹çš„é»˜è®¤å€¼\n  propE: {\n    type: Number,\n    default: 100\n  },\n  // å¯¹è±¡ç±»å‹çš„é»˜è®¤å€¼\n  propF: {\n    type: Object,\n    // å¯¹è±¡æˆ–æ•°ç»„çš„é»˜è®¤å€¼\n    // å¿…é¡»ä»ä¸€ä¸ªå·¥å‚å‡½æ•°è¿”å›ã€‚\n    // è¯¥å‡½æ•°æ¥æ”¶ç»„ä»¶æ‰€æ¥æ”¶åˆ°çš„åŸå§‹ prop ä½œä¸ºå‚æ•°ã€‚\n    default(rawProps) {\n      return { message: 'hello' }\n    }\n  },\n  // è‡ªå®šä¹‰ç±»å‹æ ¡éªŒå‡½æ•°\n  // åœ¨ 3.4+ ä¸­å®Œæ•´çš„ props ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥\n  propG: {\n    validator(value, props) {\n      // The value must match one of these strings\n      return ['success', 'warning', 'danger'].includes(value)\n    }\n  },\n  // å‡½æ•°ç±»å‹çš„é»˜è®¤å€¼\n  propH: {\n    type: Function,\n    // ä¸åƒå¯¹è±¡æˆ–æ•°ç»„çš„é»˜è®¤ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ª\n    // å·¥å‚å‡½æ•°ã€‚è¿™ä¼šæ˜¯ä¸€ä¸ªç”¨æ¥ä½œä¸ºé»˜è®¤å€¼çš„å‡½æ•°\n    default() {\n      return 'Default function'\n    }\n  }\n})\n```\n\n`defineProps() å®`ä¸­çš„å‚æ•°ä¸å¯ä»¥è®¿é—®` <script setup>` ä¸­å®šä¹‰çš„å…¶ä»–å˜é‡ï¼Œå› ä¸ºåœ¨ç¼–è¯‘æ—¶æ•´ä¸ªè¡¨è¾¾å¼éƒ½ä¼šè¢«ç§»åˆ°å¤–éƒ¨çš„å‡½æ•°ä¸­\n\n## 4. ç»„ä»¶äº‹ä»¶\n\n1ã€`<script setup>` ä¸­ å®šä¹‰ï¼š`const emit = defineEmits(['inFocus', 'submit'])`\n> é`<script setup>` ä¸­ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£\n\n2ã€`defineEmits()å®`è¿˜æ”¯æŒå¯¹è±¡è¯­æ³•ï¼Œæ¯”å¦‚\n\n```vue\n<script setup lang=\"ts\">\n  const emit = defineEmits<{\n      (e: 'change', id: number): void\n      (e: 'update', value: string): void\n  }>()\n </script>\n```\n\n3ã€å¦‚æœä¸€ä¸ªåŸç”Ÿäº‹ä»¶çš„åå­— (ä¾‹å¦‚ `click`) è¢«å®šä¹‰åœ¨ `emits` é€‰é¡¹ä¸­ï¼Œåˆ™ç›‘å¬å™¨åªä¼šç›‘å¬ç»„ä»¶è§¦å‘çš„ `click` äº‹ä»¶è€Œä¸ä¼šå†å“åº”åŸç”Ÿçš„` click` äº‹ä»¶ã€‚\n\n4ã€å’Œ`åŸç”Ÿ DOM äº‹ä»¶`ä¸ä¸€æ ·ï¼Œç»„ä»¶è§¦å‘çš„äº‹ä»¶`æ²¡æœ‰å†’æ³¡æœºåˆ¶`ã€‚ä½ åªèƒ½ç›‘å¬ç›´æ¥å­ç»„ä»¶è§¦å‘çš„äº‹ä»¶ã€‚å¹³çº§ç»„ä»¶æˆ–æ˜¯è·¨è¶Šå¤šå±‚åµŒå¥—çš„ç»„ä»¶é—´é€šä¿¡ï¼Œåº”ä½¿ç”¨ä¸€ä¸ªå¤–éƒ¨çš„`äº‹ä»¶æ€»çº¿`ï¼Œæˆ–æ˜¯ä½¿ç”¨ä¸€ä¸ª[å…¨å±€çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ](https://cn.vuejs.org/guide/scaling-up/state-management.html)ã€‚\n\n5ã€äº‹ä»¶æ ¡éªŒï¼Œå¦‚ä¸‹ä»£ç \n\n```vue\n<script setup>\nconst emit = defineEmits({\n  // æ²¡æœ‰æ ¡éªŒ\n  click: null,\n\n  // æ ¡éªŒ submit äº‹ä»¶\n  submit: ({ email, password }) => {\n    if (email && password) {\n      return true\n    } else {\n      console.warn('Invalid submit event payload!')\n      return false\n    }\n  }\n})\n\nfunction submitForm(email, password) {\n  emit('submit', { email, password })\n}\n</script>\n```\n\n## 5. ç»„ä»¶ v-model\n\n> å¦‚æœæ˜¯ `v3.4ä»¥å‰`çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä¸çœ‹è¿™éƒ¨åˆ†\n\n1ã€`v-model` å¯ä»¥å®ç°åŒå‘ç»‘å®š\n\n2ã€vue 3.4 ç‰ˆæœ¬ä¹‹å‰å®ç° `v-model` åŒå‘ç»‘å®šï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œå¦‚ä¸‹\n\n```vue\n<!-- Child.vue -->\n<script setup>\nconst props = defineProps(['modelValue'])\nconst emit = defineEmits(['update:modelValue'])\n</script>\n\n\n<template>\n  <input\n    :value=\"props.modelValue\"\n    @input=\"emit('update:modelValue', $event.target.value)\"\n  />\n</template>\n```\n\n```vue\n<!-- Parent.vue -->\n<Child\n  :modelValue=\"foo\"\n  @update:modelValue=\"$event => (foo = $event)\"\n/>\n```\n\n3ã€æ‰€ä»¥ï¼Œ`Vue3.4` å®ç°äº† `defineModel`ï¼Œç®€åŒ–å®ç°`v-model` çš„æµç¨‹ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```vue\n<script setup>\nconst title = defineModel('title')\n</script>\n\n<template>\n  <input type=\"text\" v-model=\"title\" />\n</template>\n```\n\n> æ¯”å•ç‹¬å†™ç®€åŒ–äº†ä¸å°‘ï¼Œè¿™é‡Œå†è§£é‡Šä¸€ä¸‹ `defineModel()å®`çš„ä½œç”¨ï¼šè¿™ä¸ªå®å¯ä»¥ç”¨æ¥å£°æ˜ä¸€ä¸ªåŒå‘ç»‘å®š propï¼Œé€šè¿‡çˆ¶ç»„ä»¶çš„ v-model æ¥ä½¿ç”¨\n\n4ã€`defineModel` çš„åº•å±‚æœºåˆ¶ï¼š`ç¼–è¯‘å™¨`å±‚é¢ï¼Œå®ç°äº†çˆ¶å­é€šä¿¡çš„è¯­æ³•ç³–\n\n- ä¸€ä¸ªåä¸º`modelValue`çš„ `prop`ï¼Œæœ¬åœ° `ref` çš„å€¼ä¸å…¶åŒæ­¥ï¼›\n- ä¸€ä¸ªåä¸º`update:modelValue`çš„äº‹ä»¶ï¼Œå½“æœ¬åœ° `ref` çš„å€¼å‘ç”Ÿå˜æ›´æ—¶è§¦å‘ã€‚\n\næ‰€ä»¥æ•ˆæœå°±æ˜¯ï¼š\n\n- å®ƒçš„`.value`å’Œ`çˆ¶ç»„ä»¶`çš„`v-model`çš„å€¼åŒæ­¥ï¼›\n- å½“å®ƒè¢«`å­ç»„ä»¶`å˜æ›´äº†ï¼Œä¼šè§¦å‘`çˆ¶ç»„ä»¶`ç»‘å®šçš„å€¼ä¸€èµ·æ›´æ–°\n\nç¤ºä¾‹å¦‚ä¸‹ï¼š\n\n```html\n<script setup>\nconst firstName = defineModel('firstName')\nconst lastName = defineModel('lastName')\n</script>\n\n\n<template>\n  <input type=\"text\" v-model=\"firstName\" />\n  <input type=\"text\" v-model=\"lastName\" />\n</template>\n\n```\n\n5ã€å¦å¤–ä¸€ç§å®ç°`åŒå‘ç»‘å®š`çš„æ–¹æ³•ï¼š ä½¿ç”¨å…·æœ‰ `getter` å’Œ `setter` çš„ `computed` å±æ€§\n\n```vue\n<!-- CustomInput.vue -->\n<script>\n  export default {\n    props: ['modelValue'],\n    emits: ['update:modelValue'],\n    computed: {\n      value: {\n        get() {\n          return this.modelValue\n        },\n        set(value) {\n          this.$emit('update:modelValue', value)\n        }\n      }\n    }\n  }\n</script>\n\n<template>\n  <input v-model=\"value\" />\n</template>\n```\n\n6ã€`defineModel` çš„å‚æ•°è¯´æ˜ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```javascript\nconst title = defineModel('title', { required: true })\n```\n\n7ã€å¤šä¸ª `v-model` ç»‘å®šåœºæ™¯ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```vue\n<script setup>\n  const firstName = defineModel('firstName')\n  const lastName = defineModel('lastName')\n</script>\n\n<template>\n  <input type=\"text\" v-model=\"firstName\" />\n  <input type=\"text\" v-model=\"lastName\" />\n</template>\n```\n\n8ã€å¤„ç† `v-model` ä¿®é¥°ç¬¦ \n\n- [å†…ç½®çš„ä¿®é¥°ç¬¦](https://cn.vuejs.org/guide/essentials/forms.html#modifiers)ï¼Œä¾‹å¦‚ `.trim`ï¼Œ`.number` å’Œ `.lazy`ã€‚\n- è‡ªå®šä¹‰çš„ä¿®é¥°ç¬¦å‘¢ï¼Ÿæ¯”å¦‚è‡ªå®šä¹‰çš„ä¿®é¥°ç¬¦ `capitalize`ï¼Œå®ƒä¼šè‡ªåŠ¨å°† `v-model` ç»‘å®šè¾“å…¥çš„å­—ç¬¦ä¸²å€¼ç¬¬ä¸€ä¸ªå­—æ¯è½¬ä¸ºå¤§å†™ï¼š\n\n```vue\n<script setup>\n  const [model, modifiers] = defineModel({\n    // get() çœç•¥äº†ï¼Œå› ä¸ºè¿™é‡Œä¸éœ€è¦å®ƒ\n    set(value) {\n      if (modifiers.capitalize) {\n        return value.charAt(0).toUpperCase() + value.slice(1)\n      }\n      // å¦‚æœä½¿ç”¨äº† .trim ä¿®é¥°ç¬¦ï¼Œåˆ™è¿”å›è£å‰ªè¿‡åçš„å€¼\n      if(modelModifiers.trim){\n        return value.trim()\n      }\n      return value\n    }\n  })\n</script>\n\n<template>\n  <input type=\"text\" v-model=\"model\" />\n</template>\n```\n\n9ã€æœ€åæ€»ç»“`defineModel` ä½¿ç”¨\n\n```typescript\n// å£°æ˜ \"modelValue\" propï¼Œç”±çˆ¶ç»„ä»¶é€šè¿‡ v-model ä½¿ç”¨\nconst model = defineModel()\n// æˆ–è€…ï¼šå£°æ˜å¸¦é€‰é¡¹çš„ \"modelValue\" prop\nconst model = defineModel({ type: String })\n\n// åœ¨è¢«ä¿®æ”¹æ—¶ï¼Œè§¦å‘ \"update:modelValue\" äº‹ä»¶\nmodel.value = \"hello\"\n\n// å£°æ˜ \"count\" propï¼Œç”±çˆ¶ç»„ä»¶é€šè¿‡ v-model:count ä½¿ç”¨\nconst count = defineModel(\"count\")\n// æˆ–è€…ï¼šå£°æ˜å¸¦é€‰é¡¹çš„ \"count\" prop\nconst count = defineModel(\"count\", { type: Number, default: 0 })\n\nfunction inc() {\n  // åœ¨è¢«ä¿®æ”¹æ—¶ï¼Œè§¦å‘ \"update:count\" äº‹ä»¶\n  count.value++\n}\n```\n\n10ã€å…³äº``v-model:title=\"bookTitle\"`` å’Œ `v-model=\"title\"` ç©¶ç«Ÿä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\n- `v-model=\"title\" `é»˜è®¤`ç»‘å®šåˆ° `modelValue prop`ï¼Œå¹¶é€šè¿‡ `update:modelValue äº‹ä»¶`æ›´æ–°\n- `v-model:title=\"bookTitle\"` ç»‘å®šåˆ°` title prop`ï¼Œå¹¶é€šè¿‡` update:title äº‹ä»¶`æ›´æ–°\n\næ‰€ä»¥ï¼Œå…¶å®`v-model=\"title\"` æ˜¯`v-model:modelValue=\"title\"` ä¸€ç§`ç®€å†™æ–¹å¼`\n\nå…·ä½“å·®åˆ«å¦‚ä¸‹ï¼š\n\n- é»˜è®¤ç»‘å®šçš„ props å­—æ®µä¸åŒ\n- æ˜¯å¦æ”¯æŒ`å¤šå±æ€§`ç»‘å®šï¼Œæ¯”å¦‚ `v-model:title`   `v-model:title1` å¤šä¸ªï¼Œä½†  `v-model=\"title\"` åªæ”¯æŒä¸€ä¸ª\n- æ”¯æŒ`å¤šå±æ€§`ç»‘å®š é€‚åˆå¤æ‚ç»„ä»¶ï¼Œæ¯”å¦‚ç»„ä»¶åº“é‡Œçš„ä¸€äº›ç»„ä»¶ç»‘å®šåœºæ™¯\n\n11ã€åœ¨`è¡¨å•è¾“å…¥å…ƒç´ `æˆ–`ç»„ä»¶`ä¸Šåˆ›å»º`åŒå‘ç»‘å®š`ï¼Œé»˜è®¤è¡¨å•ä¸Šç›´æ¥ä½¿ç”¨ï¼Œä½†ç»„ä»¶ä¸Šè¿˜éœ€è¦ä½¿ç”¨é…åˆ `defineModel`  \n\n![image.png|552](https://832-1310531898.cos.ap-beijing.myqcloud.com/yuque/9dd55eaedb417f6eedd40bb0b5627e13.png)\n\n## 6. Suspense ç»„ä»¶\n\nSuspense æ˜¯ Vue çš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ï¼Œç”¨äº**åè°ƒç»„ä»¶æ ‘ä¸­çš„å¼‚æ­¥ä¾èµ–å…³ç³»**\n\n> æ˜¯å®éªŒæ€§çš„\n\n### 6.1. åŸºæœ¬ç”¨æ³•\n\n```vue hl:3,7\n<template>\n  <Suspense>\n    <!-- é»˜è®¤æ’æ§½ - å¼‚æ­¥ç»„ä»¶ -->\n    <template `#default>`\n      <AsyncComponent />\n    </template>\n    <!-- fallback æ’æ§½ - åŠ è½½çŠ¶æ€ -->\n    <template `#fallback>`\n      <div>Loading...</div>\n    </template>\n  </Suspense>\n</template>\n\n<script setup>\nimport { defineAsyncComponent } from 'vue'\n\nconst AsyncComponent = defineAsyncComponent(() =>\n  import('./components/AsyncComponent.vue')\n)\n</script>\n```\n\n### 6.2. å¼‚æ­¥ç»„ä»¶ç¤ºä¾‹\n\n```vue\n<!-- AsyncComponent.vue -->\n<template>\n  <div>\n    <h2>{{ data.title }}</h2>\n    <p>{{ data.content }}</p>\n  </div>\n</template>\n\n<script setup>\n// ä½¿ç”¨ async setup ä½¿ç»„ä»¶æˆä¸ºå¼‚æ­¥ç»„ä»¶\nconst data = await fetch('https://api.example.com/data')\n  .then(res => res.json())\n</script>\n```\n\n### 6.3. å¤„ç†å¤šä¸ªå¼‚æ­¥ç»„ä»¶\n\n```vue\n<template>\n  <Suspense>\n    <template `#default>`\n      <div>\n        <AsyncComponent1 />\n        <AsyncComponent2 />\n        <AsyncComponent3 />\n      </div>\n    </template>\n    <template `#fallback>`\n      <LoadingSpinner />\n    </template>\n  </Suspense>\n</template>\n\n<script setup>\nimport { defineAsyncComponent } from 'vue'\n\nconst AsyncComponent1 = defineAsyncComponent(() =>\n  import('./components/AsyncComponent1.vue')\n)\nconst AsyncComponent2 = defineAsyncComponent(() =>\n  import('./components/AsyncComponent2.vue')\n)\nconst AsyncComponent3 = defineAsyncComponent(() =>\n  import('./components/AsyncComponent3.vue')\n)\n</script>\n```\n\n### 6.4. é”™è¯¯å¤„ç†\n\n```vue hl:15\n<template>\n  <Suspense @pending=\"onPending\" @resolve=\"onResolve\" @fallback=\"onFallback\">\n    <template `#default>`\n      <AsyncComponent />\n    </template>\n    <template `#fallback>`\n      <LoadingComponent />\n    </template>\n  </Suspense>\n</template>\n\n<script setup>\nimport { onErrorCaptured } from 'vue'\n\n// æ•è·å¼‚æ­¥ç»„ä»¶ä¸­çš„é”™è¯¯\n// æ³¨å†Œä¸€ä¸ªé’©å­ï¼Œåœ¨æ•è·äº†åä»£ç»„ä»¶ä¼ é€’çš„é”™è¯¯æ—¶è°ƒç”¨ã€‚\nonErrorCaptured((error) => {\n  console.error('Async component error:', error)\n  // è¿”å› false é˜»æ­¢é”™è¯¯ç»§ç»­ä¼ æ’­\n  return false\n})\n\nconst onPending = () => {\n  console.log('Component is pending')\n}\n\nconst onResolve = () => {\n  console.log('Component is resolved')\n}\n\nconst onFallback = () => {\n  console.log('Fallback is shown')\n}\n</script>\n```\n\n### 6.5. åµŒå¥— Suspense\n\n```vue\n<template>\n  <Suspense>\n    <template `#default>`\n      <div>\n        <h1>Main Content</h1>\n        <Suspense>\n          <template `#default>`\n            <NestedAsyncComponent />\n          </template>\n          <template `#fallback>`\n            <p>Loading nested component...</p>\n          </template>\n        </Suspense>\n      </div>\n    </template>\n    <template `#fallback>`\n      <p>Loading main content...</p>\n    </template>\n  </Suspense>\n</template>\n```\n\n### 6.6. ç»“åˆ Transition ä½¿ç”¨\n\n```vue\n<template>\n  <Suspense>\n    <template `#default>`\n      <AsyncComponent />\n    </template>\n    <template `#fallback>`\n      <Transition name=\"fade\">\n        <div class=\"loading\">\n          <LoadingSpinner />\n        </div>\n      </Transition>\n    </template>\n  </Suspense>\n</template>\n\n<style>\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.5s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>\n```\n\n### 6.7. åœ¨ç»„åˆå¼å‡½æ•°ä¸­ä½¿ç”¨\n\n```vue\n<script setup>\nimport { ref } from 'vue'\n\n// å¼‚æ­¥ç»„åˆå¼å‡½æ•°\nconst useAsyncData = async () => {\n  const data = ref(null)\n  const response = await fetch('https://api.example.com/data')\n  data.value = await response.json()\n  return { data }\n}\n\n// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨\nconst { data } = await useAsyncData()\n</script>\n\n<template>\n  <div>\n    <h2>{{ data.title }}</h2>\n    <p>{{ data.description }}</p>\n  </div>\n</template>\n```\n\n### 6.8. ä½¿ç”¨ Suspense çš„æ³¨æ„äº‹é¡¹\n\n1. Suspense åªå¤„ç†å…¶ç›´æ¥å­ç»„ä»¶çš„å¼‚æ­¥ä¾èµ–ï¼Œåªå¤„ç†ä»¥ä¸‹å¼‚æ­¥æƒ…å†µï¼š\n\t- å¸¦æœ‰å¼‚æ­¥ setup() çš„ç»„ä»¶\n\t- å¸¦æœ‰ async setup() çš„ç»„ä»¶\n\t- ä½¿ç”¨ defineAsyncComponent å®šä¹‰çš„ç»„ä»¶\n2. å¼‚æ­¥ç»„ä»¶å¿…é¡»ä½¿ç”¨ await æˆ–è¿”å› Promise\n3. ç¡®ä¿æ­£ç¡®å¤„ç†é”™è¯¯æƒ…å†µ\n4. è€ƒè™‘ä½¿ç”¨ transition æ¥ä¼˜åŒ–åŠ è½½çŠ¶æ€çš„è§†è§‰æ•ˆæœ\n5. åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰åœºæ™¯ä¸­è¦ç‰¹åˆ«æ³¨æ„ä½¿ç”¨æ–¹å¼\n\n","117f9c7a06c25d2383a3e1f6b5ca9448":"\n# è¯·ä»‹ç»ä¸‹  Vue3  ç”Ÿæ€æœ€æ–°åŠ¨æ€\n\n`#vue3` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. Vue 3.5 ç‰ˆæœ¬å‘å¸ƒ \n\n- Vue 3.5 å·²äº2024å¹´9æœˆå‘å¸ƒ\n- åœ¨ Vue 3.5 ä¸­ï¼Œ`watch` å‡½æ•°çš„æ·±åº¦ç›‘å¬åŠŸèƒ½å¾—åˆ°äº†å¢å¼ºã€‚ä¹‹å‰çš„ `deep` å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè€Œç°åœ¨å¯ä»¥æŒ‡å®šç›‘å¬çš„å±‚çº§\n- Vue3.5çš„`æ¨¡æ¿è§£æå™¨`é‡æ„ï¼Œå†…å­˜å ç”¨å‡å°‘äº† 56%\n- ç”Ÿæˆç±»ä¼¼äº React çš„ `useId`\n\n## 2. Vapor æ¨¡å¼å¼€å‘\n\n- Vapor æ¨¡å¼æ˜¯Vue 3æ¨å‡ºçš„ä¸€ç§`æ— è™šæ‹ŸDOM`çš„ç¼–è¯‘ç­–ç•¥\n- Vapor æ¨¡å¼å°†åªæ”¯æŒ Vue çš„ä¸€éƒ¨åˆ†åŠŸèƒ½\n\n### 2.1. å— solid.js çš„å½±å“\n\n- æ²¡æœ‰è™šæ‹ŸDOMï¼Œç›´æ¥æ“ä½œçœŸå®DOM\n- Solid æ˜¯ä¸€ä¸ªç”¨äºåˆ¶ä½œäº¤äº’å¼ Web åº”ç”¨ç¨‹åºçš„ JavaScript æ¡†æ¶ã€‚\n\t- å®ƒåˆ©ç”¨è‡ªå®šä¹‰ç¼–è¯‘å™¨å°† JSX è½¬æ¢ä¸ºé«˜æ€§èƒ½çš„ DOM æ“ä½œã€‚æ›´æ–°åˆ™ç”±ç»†ç²’åº¦çš„å“åº”å¼ç³»ç»Ÿæä¾›æ”¯æŒï¼Œå“åº”å¼ç³»ç»Ÿå‡å°‘äº†å¯¹æ¯”å·®å¼‚çš„å¼€é”€ï¼Œä»è€Œè·å¾—æœ€ä½³æ€§èƒ½\n- Solid çš„æ€§èƒ½è¡¨å‹\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241102.png)\n\n","092f121e1ccc549bb468226592472e20":"\n# Vue çš„æ•´ä½“è®¾è®¡æ€è·¯\n\n\n`#vue` `#2023/03/25` `#å‰ç«¯æ¡†æ¶/vue` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å¦‚ä½•æè¿° UI \n\nä¸‰ç§æ–¹å¼ï¼š\n\n- å£°æ˜å¼æè¿° UI\n- JavaScriptå¯¹è±¡\n- v-dom\n\n1. `å£°æ˜å¼æè¿° UI`ï¼Œæ¯”å¦‚ `<div class='btn' id='test' @click=\"handle\"> button </div>`ï¼Œ åŒ…å«ä¿¡æ¯ tagåï¼Œå±æ€§ï¼Œäº‹ä»¶ï¼Œå±‚çº§å…³ç³»\n2. ä½¿ç”¨ `JavaScriptå¯¹è±¡ ` æ¥æè¿° UIï¼Œå¦‚ä¸‹ä»£ç \n```javascript\nconst title = {\n    tag: 'h1', // tag åç§°\n    props:{ // å±æ€§ä¸äº‹ä»¶\n        onClick:handler\n    }\n    children:[ // å­èŠ‚ç‚¹\n        {tag: 'span'}\n    ]\n}\n```\n\n3. `è™šæ‹Ÿ DOM` æè¿° UIï¼Œæ¯”å¦‚ vue ä¸­çš„ `æ¸²æŸ“å‡½æ•° - h` ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n```javascript\nimport {h} from \"vue\";\nexport default{\n    render(){\n        // è™šæ‹Ÿ DOM\n        return h('h1',{ onClick: fn }); \n        \n        // æˆ–è€…ç›´æ¥è¿”å› js å¯¹çš„\n        return {\n            tag: 'h1', // tag åç§°\n            props:{ // å±æ€§ä¸äº‹ä»¶\n                onClick:handler\n            }\n            children:[ // å­èŠ‚ç‚¹\n                {tag: 'span'}\n            ]\n        }\n    }\n}\n```\n> `h` è¿”å›çš„å…¶å®å°±æ˜¯ `js å¯¹è±¡`ï¼Œ `hå‡½æ•°`å°±æ˜¯è¾…åŠ©åˆ›å»ºè™šæ‹Ÿ DOM çš„å·¥å…·å‡½æ•°è€Œå·²ï¼Œæ‰€**ä»¥ä»–ä¿©å…¶å®æ˜¯ä¸€ä¸ªä¸œè¥¿**\n\n- å“ªç§æ–¹å¼**æ›´çµæ´»**å‘¢ï¼Ÿ\n   - ç­”æ¡ˆæ˜¯ï¼š`JavaScript å¯¹è±¡`ï¼ˆæˆ–`è™šæ‹Ÿ DOM` ï¼‰ çš„æ–¹å¼ï¼Œ\n      - æ¯”å¦‚è¡¨ç° `H1-H6` ï¼Œä½¿ç”¨ `tag:H${index}` å³å¯\n      - åˆæ¯”å¦‚è¯´ï¼Œ`jsx`çš„æ–¹å¼å®ç° `é€’å½’æ ‘`ï¼Œæ›´æ–¹ä¾¿\n- é‚£ç§æ–¹å¼**æ›´ç›´è§‚**å‘¢ï¼Ÿå½“ç„¶æ˜¯ `æ¨¡æ¿`\n\n## 2. æ¸²æŸ“å‡½æ•°\n\n- å³ä¸Šé¢çš„ `render æ–¹æ³•`\n   - å¦‚ vue ä¼šæ ¹æ®è¿”å›çš„`è™šæ‹Ÿ DOM` ï¼Œ æŠŠç»„ä»¶æ¸²æŸ“å‡ºæ¥\n\n## 3. æ¸²æŸ“å™¨\n`æ¸²æŸ“å™¨`çš„ä½œç”¨ï¼Œå°±æ˜¯æŠŠ `è™šæ‹Ÿ DOM`ï¼Œå¦‚  `h('div','hello')`  è½¬æˆ `çœŸå®çš„ DOM` \n> è¿™é‡Œå†å¼ºè°ƒä¸€ä¸‹ï¼Œ`h('div','hello')` è¿”å›çš„å…¶å®å°±ä¸€ä¸ª `ç”¨äºè¡¨ç¤º UI çš„ js å¯¹è±¡`\n\nå¦‚ä½•å®ç°ä¸€ä¸ª`æ¸²æŸ“å™¨`? \n```javascript\nconst vnode = {}; // ç”¨äºæè¿° UI çš„ js å¯¹è±¡ã€‚\nfunction renderer(vnode,container){\n    1. æ ¹æ® vnode.tag åˆ›å»ºå…ƒç´ \n    2. æ·»åŠ  props å’Œ äº‹ä»¶\n    3. å¤„ç† childrenï¼Œé€’å½’è°ƒç”¨ renderer \n}\n```\n\næ‰€ä»¥`æ¸²æŸ“å™¨` çš„\n\n- **æœ¬è´¨**æ˜¯ï¼Œé€’å½’éå† `vdom` , è°ƒç”¨`åŸç”Ÿ DOM API` å®ŒæˆçœŸå®çš„ `DOM åˆ›å»º`\n- ä½†**ç²¾é«“**åœ¨äºï¼Œ**å¦‚ä½•åš diff æ›´æ–°**\n\n## 4. ç»„ä»¶çš„æœ¬è´¨\n\nç»„ä»¶**æœ¬è´¨**æ˜¯`ä¸€ç»„è™šæ‹ŸDOMå…ƒç´ `çš„å°è£…ï¼Œä»–å¯ä»¥æ˜¯ä¸€ä¸ªè¿”å›è™šæ‹Ÿ DOM çš„`å‡½æ•°`ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª`å¯¹è±¡`ï¼Œç„¶åå†ç”¨ `æ¸²æŸ“å™¨` è¿›è¡Œæ¸²æŸ“ã€‚\næ‰€ä»¥ï¼Œæ¸²æŸ“æ—¶éœ€è¦åˆ¤æ–­ `vnode.tag = function | object | string ? `  åˆ†åˆ«å¤„ç†ã€‚\n\n## 5. æ¨¡æ¿ç¼–è¯‘å™¨\n\nç¼–è¯‘å™¨å…¶å®å°±æ˜¯æŠŠ `æ¨¡æ¿` ç¼–è¯‘æˆ `æ¸²æŸ“å‡½æ•°` \n\n- å³ï¼šå£°æ˜å¼æè¿° UI  **â†’**  è™šæ‹Ÿ DOM æ–¹å¼æè¿° UI\n- æ¯”å¦‚ï¼šä¸€ä¸ªæ ‡å‡†`vueæ¨¡æ¿`\n```html\n<template>\n    <div @click=\"fn\"></div>\n\n</template>\n\n<script>\nexport default{\n    data(){},\n    methond(){\n        fn(){}\n    },\n    render(){\n        return h('div',{onclick:fn})\n    }\n}\n</script>\n\n```\næœ€ç»ˆ**ç¼–è¯‘**æˆçš„æ ·å­å¦‚ä¸‹ï¼š\n```javascript\nexport default{\n    data(){},\n    methond(){\n        fn(){}\n    },\n    render(){\n        return h('div',{onclick:fn})\n    }\n}\n```\n\n## 6. æœ€åæ€»ç»“\n\n- ç»„ä»¶çš„å®ç°ä¾èµ–äº `æ¸²æŸ“å™¨`\n- æ¨¡æ¿çš„ç¼–è¯‘ä¾èµ–äº `ç¼–è¯‘å™¨`\n- `æ¸²æŸ“å™¨` å’Œ  `ç¼–è¯‘å™¨` æ˜¯å­˜åœ¨`ä¿¡æ¯äº¤æµ`çš„ï¼Œæ¯”å¦‚è™šæ‹Ÿ DOM å¯¹è±¡ä¸­ çš„ `patchFlages` å±æ€§ï¼Œç”¨äºæ ‡è¯†æ˜¯ `åŠ¨æ€å±æ€§` å’Œ `é™æ€å±æ€§`ï¼Ÿ äº’ç›¸é…åˆä½¿å¾—æ€§èƒ½å¾—åˆ°æå‡\n\n","1c52539699f15d5d80f350f4a7d98915":"\n# Vue3 çš„å“åº”å¼çš„ç³»ç»Ÿè®¾è®¡åŸç†ï¼ˆeffectã€computedã€watch çš„åŸç† ï¼‰\n\n\n`#å‰ç«¯æ¡†æ¶/vue` `#2023/03/25`  `#å‰ç«¯` `#vue3` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ€»ç»“ \n\n### 1.1. æ‘˜è¦\n\næœ¬æ–‡è¯¦ç»†ä»‹ç»äº†Vue3å“åº”å¼ç³»ç»Ÿçš„è®¾è®¡åŸç†å’Œå®ç°è¿‡ç¨‹ã€‚æ–‡ç« ä»å‰¯ä½œç”¨å‡½æ•°çš„æ¦‚å¿µå‡ºå‘ï¼Œé€æ­¥è®²è§£äº†\n- å“åº”å¼æ•°æ®çš„å®ç°\n- æ•°æ®ç»“æ„çš„è®¾è®¡\n- åˆ†æ”¯åˆ‡æ¢é—®é¢˜çš„è§£å†³\n- `effect` å‡½æ•° åµŒå¥—çš„å¤„ç†\n- è°ƒåº¦ç³»ç»Ÿçš„å®ç°\n- `computed` è®¡ç®—å±æ€§çš„åŸç†\n- `watch` å‡½æ•°çš„å®ç°\n\næ–‡ç« é€šè¿‡å¾ªåºæ¸è¿›çš„æ–¹å¼ï¼Œå±•ç¤ºäº†Vue3å“åº”å¼ç³»ç»Ÿä»ç®€å•åˆ°å¤æ‚çš„æ¼”è¿›è¿‡ç¨‹ï¼Œå¹¶æä¾›äº†å¤§é‡ä»£ç ç¤ºä¾‹æ¥è§£é‡Šå„ä¸ªæ¦‚å¿µå’Œå®ç°ç»†èŠ‚ã€‚\n\n### 1.2. è¦ç‚¹\n\n- å“åº”å¼æ•°æ®çš„åŸºæœ¬å®ç°ä¾èµ–äºProxyå’Œå‰¯ä½œç”¨å‡½æ•°\n- ä½¿ç”¨WeakMapã€Mapå’ŒSetç»„åˆçš„æ•°æ®ç»“æ„æ¥å­˜å‚¨ä¾èµ–å…³ç³»\n- é€šè¿‡cleanupå‡½æ•°è§£å†³åˆ†æ”¯åˆ‡æ¢é—®é¢˜\n- ä½¿ç”¨effectStackæ¥å¤„ç†effectå‡½æ•°çš„åµŒå¥—é—®é¢˜\n- å®ç°è°ƒåº¦ç³»ç»Ÿæ¥æ§åˆ¶å‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œæ—¶æœºå’Œæ¬¡æ•°\n- è®¡ç®—å±æ€§çš„å®ç°åŸºäºlazyæ‰§è¡Œå’Œç¼“å­˜æœºåˆ¶\n- watchå‡½æ•°çš„å®ç°æ¶‰åŠé€’å½’éå†å¯¹è±¡å±æ€§å’Œå¤„ç†ç«æ€é—®é¢˜\n\n## 2. ä½•ä¸ºå‰¯ä½œç”¨å‡½æ•°ï¼Ÿ\n\nå¦‚ä¿®æ”¹äº†å…¨å±€å˜é‡ç­‰\n\n## 3. ä¸ºä½•å“åº”å¼æ•°æ®ï¼Ÿ\n\nå¦‚ä¸‹ä»£ç ï¼Œå¸Œæœ› `data.text` å€¼æ”¹å˜æ—¶ï¼Œä¼šè‡ªå·±æ‰§è¡Œ `effectå‡½æ•°` ï¼Œ é‚£ä¹ˆ`data æ•°æ®`å°±æ˜¯`å“åº”å¼çš„`ã€‚\n\n```js\n// åŸå§‹æ•°æ®\nconst data = { text: 'hello world' }\nfunction effect() {\n  document.body.innerText = obj.text\n}\neffect()\n```\n\n## 4. å“åº”å¼æ•°æ®æœ€ç®€å•çš„å®ç°\n\nå€ŸåŠ© `Proxy` ï¼Œ\n- æ¯æ¬¡`è¯»å–`æ—¶ï¼Œå°† effect å‡½æ•°å­˜å‚¨åˆ°`æ¡¶ï¼šbucket` ä¸­ï¼Œ\n- æ¯æ¬¡`set æ—¶`ï¼Œä»`æ¡¶`ä¸­å–å‡ºå¹¶æ‰§è¡Œï¼Œ\n\nå¦‚ä¸‹ä»£ç ï¼š\n\n```js hl:20,11\n// å­˜å‚¨å‰¯ä½œç”¨å‡½æ•°çš„æ¡¶\nconst bucket = new Set()\n\n// åŸå§‹æ•°æ®\nconst data = { text: 'hello world' }\n// å¯¹åŸå§‹æ•°æ®çš„ä»£ç†\nconst obj = new Proxy(data, {\n  // æ‹¦æˆªè¯»å–æ“ä½œ\n  get(target, key) {\n    // å°†å‰¯ä½œç”¨å‡½æ•° effect æ·»åŠ åˆ°å­˜å‚¨å‰¯ä½œç”¨å‡½æ•°çš„æ¡¶ä¸­\n    bucket.add(effect)\n    // è¿”å›å±æ€§å€¼\n    return target[key]\n  },\n  // æ‹¦æˆªè®¾ç½®æ“ä½œ\n  set(target, key, newVal) {\n    // è®¾ç½®å±æ€§å€¼\n    target[key] = newVal\n    // æŠŠå‰¯ä½œç”¨å‡½æ•°ä»æ¡¶é‡Œå–å‡ºå¹¶æ‰§è¡Œ\n    bucket.forEach(fn => fn())\n  }\n})\n\nfunction effect() {\n  document.body.innerText = obj.text\n}\neffect()\n```\n\nä½†ä¸Šé¢çš„æ–¹å¼ç¼ºç‚¹æ˜¯`ç¡¬ç¼–ç `äº† `effect`\n\n## 5. è§£å†³ ç¡¬ç¼–ç  `effect` å‡½æ•°çš„é—®é¢˜\n\næ€è·¯æ˜¯ï¼Œ`effect(fn)` ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œæ ‡è¯†æ³¨å†Œå‰¯ä½œç”¨å‡½æ•° `fn` ,\n- å¹¶ä½¿ç”¨å…¨å±€å˜é‡ `activeEffect` æ¥å­˜å‚¨ `å½“å‰æ¿€æ´»çš„ effect å‡½æ•°`\n\n```js hl:25\n// å­˜å‚¨å‰¯ä½œç”¨å‡½æ•°çš„æ¡¶\nconst bucket = new Set()\n\n// åŸå§‹æ•°æ®\nconst data = { text: 'hello world' }\n// å¯¹åŸå§‹æ•°æ®çš„ä»£ç†\nconst obj = new Proxy(data, {\n  // æ‹¦æˆªè¯»å–æ“ä½œ\n  get(target, key) {\n    // å°†å‰¯ä½œç”¨å‡½æ•° activeEffect æ·»åŠ åˆ°å­˜å‚¨å‰¯ä½œç”¨å‡½æ•°çš„æ¡¶ä¸­\n    bucket.add(activeEffect)\n    // è¿”å›å±æ€§å€¼\n    return target[key]\n  },\n  // æ‹¦æˆªè®¾ç½®æ“ä½œ\n  set(target, key, newVal) {\n    // è®¾ç½®å±æ€§å€¼\n    target[key] = newVal\n    // æŠŠå‰¯ä½œç”¨å‡½æ•°ä»æ¡¶é‡Œå–å‡ºå¹¶æ‰§è¡Œ\n    bucket.forEach(fn => fn())\n  }\n})\n\n\n// ç”¨ä¸€ä¸ªå…¨å±€å˜é‡å­˜å‚¨å½“å‰æ¿€æ´»çš„ effect å‡½æ•°\nlet activeEffect\nfunction effect(fn) {\n  // å½“è°ƒç”¨ effect æ³¨å†Œå‰¯ä½œç”¨å‡½æ•°æ—¶ï¼Œå°†å‰¯ä½œç”¨å‡½æ•°å¤åˆ¶ç»™ activeEffect\n  activeEffect = fn\n  // æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°\n  fn()\n}\n\neffect(() => {\n  console.log('effect run')\n  document.body.innerText = obj.text\n})\n\nsetTimeout(() => {\n  obj.text2 = 'hello vue3'\n}, 1000)\n```\n\nä½†æ˜¯ï¼Œä¸Šé¢ä»£ç å¦‚æœæˆ‘ä»¬è®¾ç½®ä¸å­˜åœ¨çš„å±æ€§æ—¶ï¼Œå¦‚ `obj.noExist = 'hello '` , `ä¼ å…¥çš„effect` ä¸­çš„ `fn` ä¼š**æ‰§è¡Œä¸¤æ¬¡**\n\næ‰€ä»¥ï¼Œ`å‰¯ä½œç”¨å‡½æ•°`éœ€è¦ä¸`ç›®æ ‡å­—æ®µ` å»ºç«‹æ˜ å°„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡æ–°è®¾è®¡æ•°æ®ç»“æ„\n\n## 6. é‡æ–°è®¾è®¡æ•°æ®ç»“æ„\n\nè§£å†³ä¸Šé¢è®¾ç½®ä¸å­˜åœ¨çš„å±æ€§æ—¶ä¹Ÿæ‰§è¡Œé—®é¢˜ï¼Œå¯ä»¥**é‡æ–°è®¾è®¡æ•°æ®ç»“æ„**\n\nå¦‚ä¸‹ä»£ç ï¼š\n\n```js\n// ç”¨ä¸€ä¸ªå…¨å±€å˜é‡å­˜å‚¨å½“å‰æ¿€æ´»çš„ effect å‡½æ•°\nlet activeEffect\nfunction effect(fn) {\n    // å½“è°ƒç”¨ effect æ³¨å†Œå‰¯ä½œç”¨å‡½æ•°æ—¶ï¼Œå°†å‰¯ä½œç”¨å‡½æ•°å¤åˆ¶ç»™ activeEffect\n    activeEffect = fn\n    // æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°\n    fn()\n}\n\nconst obj = { text1: 'text1', text2: 'text2' };\nconst obj2 = { text1: 'text1', text2: 'text2' };\n\neffect(function fn1() {\n    console.log(obj.text1);\n})\n\neffect(function fn2() {\n    console.log(obj.text2);\n    console.log(obj.text1);\n})\n\n/*************************************************\n * :::: ä»¥ä¸Šä»£ç çš„æ˜ å°„å…³ç³»å¦‚ä¸‹\n * obj\n *  text1: [fn1,fn2]\n *  text2: [fn2]\n ************************************************/\n\neffect(function fn3() {\n    console.log(obj.text1);\n    console.log(obj.text2);\n})\n/*************************************************\n * :::: ä»¥ä¸Šä»£ç çš„æ˜ å°„å…³ç³»å¦‚ä¸‹\n * obj\n *  text1: [fn3]\n *  text2: [fn3]\n ************************************************/\n\neffect(function fn1() {\n    console.log(obj.text1);\n})\n\neffect(function fn2() {\n    console.log(obj2.text2);\n    console.log(obj.text1);\n})\n\n/*************************************************\n * :::: ä»¥ä¸Šä»£ç çš„æ˜ å°„å…³ç³»å¦‚ä¸‹\n * obj\n *   text1: [fn1,fn2] \n * obj2\n *   text2: [fn2]\n ************************************************/\n```\n\nç»“æ„å¦‚ä¸‹ï¼š\n\n- `WeakMap`\n\t- `key` ä¸º `obj` æˆ–è€… `obj1` å¯¹è±¡\n\t- `value` ä¸º `Map`\n\t\t- `key` ä¸º å­—æ®µåï¼Œå¦‚ `text1` ,`text2`\n\t\t- `value`ä¸º `Set` ï¼Œæ¯”å¦‚ä¸Šé¢çš„ `fn1` `fn2`\n\nå¦‚ä¸‹å›¾ï¼š\n\n![](https://od-1310531898.cos.ap-beijing.myqcloud.com/202304081112785.png)\n\n### 6.1. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ WeakMapï¼Ÿ\n\n```js\nconst weakMap = new WeakMap();\nconst map = new Map();\n\n(function () {\n    let w = {w: \"w\"};\n    let m = {m: \"m\"};\n    weakMap.set(w, 1);\n    map.set(m, 2);\n    console.log(weakMap);\n    console.log(map);\n    w = null;\n    m = null;\n})()\n\n// è¿™ 5sçš„æ—¶é—´ï¼ŒweakMap ä¼šè¢«å›æ”¶ï¼Œè€Œ map ä¸ä¼šï¼Œå› ä¸º map çš„ key æ˜¯å¼ºå¼•ç”¨ï¼Œä¸ä¼šè¢«å›æ”¶\n// chrome performance æ‰‹åŠ¨è§¦å‘åƒåœ¾å›æ”¶\nsetTimeout(() => {\n    console.log(weakMap);\n    console.log(map);\n}, 5000);\n```\n\næ‰‹åŠ¨è§¦å‘åƒåœ¾å›æ”¶æœºåˆ¶ï¼š\n\n![|536](https://od-1310531898.cos.ap-beijing.myqcloud.com/202304081153881.png)\n\næœ€ç»ˆæ‰“å°æ‰“å°ç»“æœå¦‚ä¸‹ï¼š\n\n![|512](https://od-1310531898.cos.ap-beijing.myqcloud.com/202304081151462.png)\n\næ‰€ä»¥ï¼Œç»“è®ºå°±æ˜¯ï¼šä½¿ç”¨ `WeakMap` èƒ½å¤Ÿä¿è¯ `GC`ï¼Œä¸ä¼šåƒ `Map` é‚£ä¸ªå¼ºå¼•ç”¨å¯¼è‡´`å†…å­˜æº¢å‡º`\n\n### 6.2. æœ€ç»ˆä»£ç \n\n**æœ€ç»ˆä»£ç å¦‚ä¸‹**ï¼šå°è£… `track(targe,key)` å’Œ `trigger(targe,key)`\n\n```js\n// å­˜å‚¨å‰¯ä½œç”¨å‡½æ•°çš„æ¡¶\nconst bucket = new WeakMap()\n// åŸå§‹æ•°æ®\nconst data = { text: 'hello world' }\n// å¯¹åŸå§‹æ•°æ®çš„ä»£ç†\nconst obj = new Proxy(data, {\n  // æ‹¦æˆªè¯»å–æ“ä½œ\n  get(target, key) {\n    // å°†å‰¯ä½œç”¨å‡½æ•° activeEffect æ·»åŠ åˆ°å­˜å‚¨å‰¯ä½œç”¨å‡½æ•°çš„æ¡¶ä¸­\n    track(target, key)\n    // è¿”å›å±æ€§å€¼\n    return target[key]\n  },\n  // æ‹¦æˆªè®¾ç½®æ“ä½œ\n  set(target, key, newVal) {\n    // è®¾ç½®å±æ€§å€¼\n    target[key] = newVal\n    // æŠŠå‰¯ä½œç”¨å‡½æ•°ä»æ¡¶é‡Œå–å‡ºå¹¶æ‰§è¡Œ\n    trigger(target, key)\n  }\n})\n\nfunction track(target, key) {\n  let depsMap = bucket.get(target)\n  if (!depsMap) {\n    bucket.set(target, (depsMap = new Map()))\n  }\n  let deps = depsMap.get(key)\n  if (!deps) {\n    depsMap.set(key, (deps = new Set()))\n  }\n  deps.add(activeEffect)\n}\n\nfunction trigger(target, key) {\n  const depsMap = bucket.get(target)\n  if (!depsMap) return\n  const effects = depsMap.get(key)\n  effects && effects.forEach(fn => fn())\n}\n// ç”¨ä¸€ä¸ªå…¨å±€å˜é‡å­˜å‚¨å½“å‰æ¿€æ´»çš„ effect å‡½æ•°\nlet activeEffect\nfunction effect(fn) {\n  // å½“è°ƒç”¨ effect æ³¨å†Œå‰¯ä½œç”¨å‡½æ•°æ—¶ï¼Œå°†å‰¯ä½œç”¨å‡½æ•°å¤åˆ¶ç»™ activeEffect\n  activeEffect = fn\n  // æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°\n  fn()\n}\n\neffect(() => {\n  console.log('effect run')\n  document.body.innerText = obj.text\n})\n\nsetTimeout(() => {\n  trigger(data, 'text')\n}, 1000)\n```\n\n>[!tip]  \nå…¶å®å¦‚ä½•èƒ½å¤Ÿæ¢³ç†æ¸…æ¥šè¿™ä¸ªæ•°æ®ç»“æ„ï¼Œé‚£èƒ½é‚£ä¹ˆå®¹æ˜“å†™å‡ºä»£ç ï¼Œæ‰€ä»¥ä¹Ÿä¸ç”¨æŠ ä»£ç ç»†èŠ‚ï¼ŒçœŸæ­£éœ€è¦è‡ªå·±ä½¿ç”¨å³å¯ï¼\n\n## 7. åˆ†æ”¯åˆ‡æ¢é—®é¢˜\n\nå³ä½¿ç”¨**ä¸‰å…ƒç¬¦å·**æ—¶ï¼Œå¦‚ä½•é¿å…ä¸å¿…è¦çš„æ‰§è¡Œï¼Ÿ\n\nå¦‚ä¸‹ä»£ç ï¼š\n\n```js\neffect(() => {\n  console.log('effect run')\n  document.body.innerText = obj.ok ? obj.text : 'not'\n})\n```\n\næ ¹æ®ä¸Šé¢ï¼Œæˆ‘ä»¬çŸ¥é“å…³ç³»å¦‚ä¸‹ï¼š\n\n- obj\n\t- ok\n\t- fn\n- text\n\t- fn\n\næ‰€ä»¥ï¼Œå½“ `text` å€¼æ”¹å˜æ—¶ï¼Œå¿…ç„¶ä¼šå¯¼è‡´ `fn` é‡æ–°æ‰§è¡Œ ï¼Œä½†å…¶å®å½“`ok` ä¸º `false` æ—¶ï¼Œæ— è®º `text` å¦‚ä½•å˜åŒ–ï¼Œæˆ‘ä»¬ä¸å¸Œæœ› `fn` é‡æ–°æ‰§è¡Œã€‚å¦‚ä½•è§£å†³å‘¢ï¼Ÿ\n\nè§£å†³æ–¹æ¡ˆæ˜¯ **æ¯æ¬¡å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œä¹‹å‰ï¼Œæ¸…é™¤ä¸Šä¸€æ¬¡å»ºç«‹çš„å…³ç³»**ã€‚\n\né‡æ–°è®¾è®¡ç»“æ„ï¼Œ`effect.deps` ç”¨æ¥å­˜å‚¨ `æ‰€æœ‰ä¸è¯¥å‰¯ä½œç”¨å‡½æ•°ç›¸å…³çš„ä¾èµ–é›†åˆ` ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```js\n// ç”¨ä¸€ä¸ªå…¨å±€å˜é‡å­˜å‚¨å½“å‰æ¿€æ´»çš„ effect å‡½æ•°\nlet activeEffect\nfunction effect(fn) {\n  const effectFn = () => {\n    cleanup(effectFn)\n    // å½“è°ƒç”¨ effect æ³¨å†Œå‰¯ä½œç”¨å‡½æ•°æ—¶ï¼Œå°†å‰¯ä½œç”¨å‡½æ•°å¤åˆ¶ç»™ activeEffect\n    activeEffect = effectFn\n    fn()\n  }\n  // activeEffect.deps ç”¨æ¥å­˜å‚¨æ‰€æœ‰ä¸è¯¥å‰¯ä½œç”¨å‡½æ•°ç›¸å…³çš„ä¾èµ–é›†åˆ\n  effectFn.deps = []\n  // æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°\n  effectFn()\n}\n\n// æ¯æ¬¡éƒ½ä¼šæ¸…é™¤\nfunction cleanup(effectFn) {\n  for (let i = 0; i < effectFn.deps.length; i++) {\n    const deps = effectFn.deps[i]\n    deps.delete(effectFn)\n  }\n  effectFn.deps.length = 0\n}\n```\n\nä¸‹é¢çœ‹ `trigger` å‡½æ•°ï¼š\n\n```js\nfunction trigger(target, key) {\n  const depsMap = bucket.get(target)\n  if (!depsMap) return\n  const effects = depsMap.get(key);\n  // here ï¼Œè¿™é‡Œå‡ºç°æ— é™å¾ªç¯\n  effects && effects.forEach(effectFn => effectFn())\n}\n```\n\nä½†æ˜¯ï¼Œä¸Šé¢çš„ä»£ç ä¼šå‡ºç°æ— é™å¾ªç¯ï¼ŒåŸå› ç±»ä¼¼äºä¸‹é¢çš„ä»£ç ï¼š\n\n```js\nconst set = new Set([1])\nset.forEach(item => {\n  set.delete(1)\n  set.add(1)\n  console.log(999)\n})\n```\n\n![](https://od-1310531898.cos.ap-beijing.myqcloud.com/202304081406196.png)\n\nè§£å†³æ–¹æ¡ˆï¼š**æ–°çš„å˜é‡** `newSet`\n\n```js\nconst set = new Set([1])\nconst newSet = new Set(set)\nnewSet.forEach(item => {\n  set.delete(1)\n  set.add(1)\n  console.log(999)\n})\n```\n\næ‰€ä»¥æœ€ç»ˆ `trigger` ä»£ç ï¼šåˆ›å»º`æ–°çš„å˜é‡` `effectsToRun`\n\n```js\nfunction trigger(target, key) {\n  const depsMap = bucket.get(target)\n  if (!depsMap) return\n  const effects = depsMap.get(key)\n\n  const effectsToRun = new Set()\n  effects && effects.forEach(effectFn => effectsToRun.add(effectFn))\n  effectsToRun.forEach(effectFn => effectFn())\n  // effects && effects.forEach(effectFn => effectFn())\n}\n```\n\n## 8. Effect å‡½æ•°åµŒå¥—çš„åœºæ™¯\n\n### 8.1. å…ˆè¯´è¯´ä¸ºä»€ä¹ˆè¦æ”¯æŒåµŒå¥—\n\nå› ä¸º `jsx` å¤©ç„¶éœ€è¦æ”¯æŒåµŒå¥—ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```js\nconst Foo = {\n    render() {\n        return h('div', 'foo')\n    }\n}\n\nconst Bar = {\n    render() {\n        return h(Foo, 'bar')\n    }\n}\n```\n\n### 8.2. ç°æœ‰ `effect` å‡½æ•°ä¸æ”¯æŒåµŒå¥—\n\nå¦‚ä¸‹ä»£ç ï¼š\n\n```js\nlet temp1, temp2\n\neffect(function effectFn1() {\n  console.log('1')\n  effect(function effectFn2() {\n    console.log('2')\n    temp2 = obj.bar\n  })\n  temp1 = obj.foo\n})\n\n// obj.fooä¹‹å‰çš„å€¼ä¸º true\nsetTimeout(() => {\n    obj.foo = false\n}, 5000);\n```\n\næˆ‘ä»¬ä¿®æ”¹ `obj.foo` , é¢„æœŸæ˜¯ï¼š\n\n- è¾“å‡º `1 2 1` , å› ä¸º obj.foo ä¿®æ”¹å¯¼è‡´ `fn1` çš„æ‰§è¡Œï¼Œæ‰“å° `1`ï¼Œ`fn2` åµŒå¥—åœ¨ `fn1` é‡Œï¼Œæ‰€ä»¥è¿˜ä¼šæ‰§è¡Œ`fn2` æ‰“å°å‡º `2`ï¼Œ5s åï¼Œå€¼`obj.foo`æ”¹å˜äº†ï¼Œå¯¼è‡´ `fn1` æ‰§è¡Œï¼Œæ‰“å°å‡º `2`\n\nä½†å®é™…ä¸Šæ˜¯ `1 2 2`\n\nåŸå› æ˜¯ï¼šå‘ç”ŸåµŒå¥—æ—¶ï¼Œå†…å±‚æ¿€æ´»çš„ `activeEffect` ä¼šè¦†ç›–`å¤–å±‚çš„å‰¯ä½œç”¨å‡½æ•°`ï¼Œæ‰€ä»¥æœ€ç»ˆæ‰§è¡Œçš„éƒ½æ˜¯`å†…å±‚å‰¯ä½œç”¨å‡½æ•°`\n\n### 8.3. è§£å†³æ€è·¯ï¼šå‰¯ä½œç”¨å‡½æ•°æ ˆ `efectStack`\n\nå¦‚ä¸‹ä»£ç ï¼š\n\n```js\n// ç”¨ä¸€ä¸ªå…¨å±€å˜é‡å­˜å‚¨å½“å‰æ¿€æ´»çš„ effect å‡½æ•°\nlet activeEffect\n// effect æ ˆ\nconst effectStack = []\nfunction effect(fn) {\n  const effectFn = () => {\n    cleanup(effectFn)\n    // å½“è°ƒç”¨ effect æ³¨å†Œå‰¯ä½œç”¨å‡½æ•°æ—¶ï¼Œå°†å‰¯ä½œç”¨å‡½æ•°å¤åˆ¶ç»™ activeEffect\n    activeEffect = effectFn\n    // åœ¨è°ƒç”¨å‰¯ä½œç”¨å‡½æ•°ä¹‹å‰å°†å½“å‰å‰¯ä½œç”¨å‡½æ•°å‹æ ˆ\n    effectStack.push(effectFn)\n    fn()\n    // åœ¨å½“å‰å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œå°†å½“å‰å‰¯ä½œç”¨å‡½æ•°å¼¹å‡ºæ ˆ\n    // å¹¶è¿˜åŸ activeEffect ä¸ºä¹‹å‰çš„å€¼\n    effectStack.pop()\n    activeEffect = effectStack[effectStack.length - 1]\n  }\n  // activeEffect.deps ç”¨æ¥å­˜å‚¨æ‰€æœ‰ä¸è¯¥å‰¯ä½œç”¨å‡½æ•°ç›¸å…³çš„ä¾èµ–é›†åˆ\n  effectFn.deps = []\n  // æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°\n  effectFn()\n}\n```\n\n## 9. æ–°çš„é—®é¢˜ï¼šæ— é™é€’å½’å¾ªç¯\n\nå¦‚ä¸‹ä»£ç ï¼Œä¼šå¼•èµ· `æ ˆæº¢å‡º`\n\n```js\neffect(() => {\n    obj.foo++;\n})\n```\n\nå› ä¸º `obj.foo åŒæ—¶è¯»å–å’Œè®¾ç½®` ï¼Œä»è€Œå¯¼è‡´æ— é™é€’å½’å¾ªç¯ã€‚\n\nå› ä¸ºè¯»å–å’Œæ“ä½œæ˜¯åœ¨åŒä¸€ä¸ªå‰¯ä½œç”¨å‡½æ•°ä¸­ï¼Œè¿›è¡Œçš„ã€‚æ‰€ä»¥å¯ä»¥å¢åŠ `å®ˆå«æ¡ä»¶`ï¼š **trigger è§¦å‘çš„å‰¯ä½œç”¨å‡½æ•°å’Œå½“å‰æ‰§è¡Œçš„å‰¯ä½œç”¨å‡½æ•°ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™ä¸æ‰§è¡Œã€‚**\n\n```js\nfunction trigger(target, key) {\n  const depsMap = bucket.get(target)\n  if (!depsMap) return\n  const effects = depsMap.get(key)\n  const effectsToRun = new Set()\n  effects && effects.forEach(effectFn => {\n    // å®ˆå«æ¡ä»¶\n    if (effectFn !== activeEffect) {\n      effectsToRun.add(effectFn)\n    }\n  })\n  effectsToRun.forEach(effectFn => effectFn())\n}\n```\n\n## 10. å“åº”å¼ç³»ç»Ÿçš„è°ƒåº¦ï¼ˆSchedulerï¼‰\n\næ‰€è°“`è°ƒåº¦`ï¼Œå³ `trigger` é‡æ–°è§¦å‘å‰¯ä½œç”¨å‡½æ•°æ—¶ï¼Œèƒ½å¤Ÿå†³å®šæ‰§è¡Œçš„`æ—¶æœº`ï¼Œ`æ¬¡æ•°`ç­‰`è‡ªå®šä¹‰è¡Œä¸º`ã€‚\n\n### 10.1. ä¾‹å­ 1 ï¼šæ§åˆ¶æ‰§è¡Œé¡ºåº\n\nä»¥ä¸‹æ‰§è¡Œé¡ºåºæ˜¯ï¼š`1 ï¼Œ2 ï¼Œend...`\n\n```js\nconst data = {foo: 1};\nconst obj = new Proxy(data, {});\n\neffect(() => {\n    console.log(obj.foo);\n})\n\nobj.foo++;\nconsole.log('end...');\n// ::::é¡ºåºæ˜¯ï¼š1 ï¼Œ2 ï¼Œend... \n```\n\nå¦‚æœæˆ‘ä»¬å¸Œæœ›é¡ºåºå˜æˆäº†ï¼š`1 ï¼Œend... ï¼Œ2` å‘¢ï¼Ÿï¼Ÿï¼Ÿ\n\n**è§£æ³•æ–¹æ³•æ˜¯**ï¼šç»™ `effect` å‡½æ•°æ·»åŠ ä¸€ä¸ª `options` å‚æ•°\n\n```js hl:13\nfunction trigger(target, key) {\n  const depsMap = bucket.get(target)\n  if (!depsMap) return\n  const effects = depsMap.get(key)\n\n  const effectsToRun = new Set()\n  effects && effects.forEach(effectFn => {\n    if (effectFn !== activeEffect) {\n      effectsToRun.add(effectFn)\n    }\n  })\n  effectsToRun.forEach(effectFn => {\n      // ::::æ–°å¢ä»£ç ::::\n    if (effectFn.options.scheduler) {\n      effectFn.options.scheduler(effectFn)\n    } else {\n      effectFn()\n    }\n  })\n}\n```\n\nä¿®æ”¹ä¸Šé¢ä¾‹å­ä»£ç å¦‚ä¸‹ï¼š\n\n```js\nconst data = {foo: 1};\nconst obj = new Proxy(data, {});\n\neffect(\n    () => {\n        console.log(obj.foo);\n    },\n    {\n        scheduler: (fn) => {\n            setTimeout(fn, 0);\n        }\n    }\n);\n\nobj.foo++;\nconsole.log('end...');\n\n// ::::é¡ºåºå°±å¯ä»¥å˜æˆ 1 ï¼Œend... ï¼Œ2\n```\n\n### 10.2. ç¤ºä¾‹ 2ï¼šåˆå¹¶æ“ä½œ\n\nå¦‚ä¸‹ä»£ç \n\n```js\nconst data = {foo: 1};\nconst obj = new Proxy(data, {});\n\neffect(\n    () => {\n        console.log(obj.foo);\n    }\n);\n\nobj.foo++;\nobj.foo++;\nobj.foo++;\nobj.foo++;\n\n// ::::é¡ºåºï¼š 1 2 3 4 5 \n```\n\nå¦‚æœæˆ‘åªæ‰“å° `åˆå§‹å€¼` å’Œ `æœ€ç»ˆå€¼`å‘¢ï¼Ÿå…¶å®å°±æœ‰ç‚¹ç±»ä¼¼äº **React ä¸­çš„ setState å¤šæ¬¡æˆ–è€… Vue ä¸­çš„è¿ç»­æ”¹å˜å“åº”å¼æ•°æ®ã€‚**\n\n#### 10.2.1. å¾®ä»»åŠ¡é˜Ÿåˆ—\n\næ‰€ä»¥ï¼Œå…³é”®æ˜¯ éœ€è¦`å®ç°ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¹¶å»é‡ï¼Œå¹¶ä¸”å¦‚ä½•ä¿è¯ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œï¼Œåªæ‰§è¡Œä¸€æ¬¡`ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```js hl:12\nconst jobQueue = new Set()\nconst p = Promise.resolve()\n// æ ‡è¯†æ˜¯å¦æ­£åœ¨åˆ·æ–°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œ\n// å¦‚æœæ­£åœ¨åˆ·æ–°ï¼Œåˆ™ä¸å†æ‰§è¡Œ flushJobï¼Œæ‰€ä»¥ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­åªä¼šæ‰§è¡Œä¸€æ¬¡ flushJob\nlet isFlushing = false\n// åˆ©ç”¨ promise ï¼Œä¿è¯ flushJob åœ¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­åªæ‰§è¡Œä¸€æ¬¡\nfunction flushJob() {\n  if (isFlushing) return\n  isFlushing = true;\n  // å°†ä¸€ä¸ªå‡½æ•°æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­\n  Promise.resolve().then(() => {\n    jobQueue.forEach(job => job())\n  }).finally(() => {\n    isFlushing = false\n  })\n}\n\neffect(() => {\n  console.log(obj.foo)\n}, {\n  scheduler(fn) {\n    // ä½¿ç”¨ Set æ¥å»é‡\n    jobQueue.add(fn);\n    // åˆ·æ–°å¾®ä»»åŠ¡é˜Ÿåˆ—\n    flushJob()\n  }\n})\n```\n\n### 10.3. æ›´å¤šå‚è€ƒ\n\n> [7. Vue3 ä¸­ effect çš„è°ƒåº¦é€‰é¡¹ï¼ˆschedulerï¼‰çš„ä½¿ç”¨ç¤ºä¾‹](/post/c682639afe0b5e52b50a2455332e00a6.html)\n\n## 11. è®¡ç®—å±æ€§ `computed` å®ç°åŸç† ä¸ `lazy`\n\n### 11.1. æ‡’æ‰§è¡Œ\n\nä»¥ä¸‹ä»£ç æ˜¯`ç«‹å³æ‰§è¡Œ`çš„ï¼Œå¦‚ä½•å®ç°ä»£ç  `lazy æ‰§è¡Œ` å‘¢ï¼Ÿå¦‚ä¸‹ä»£ç ï¼š\n\n```js\nconst data = {foo: 1};\nconst obj = new Proxy(data, {});\neffect(\n    () => {\n        console.log(obj.foo); // ::::ç«‹å³æ‰§è¡Œ\n    }\n);\n```\n\næ·»åŠ  `options.lazy = true`, ä½¿å¾— `effect` ä¸ä¼šç«‹å³æ‰§è¡Œ ? å¦‚ä¸‹ä»£ç ï¼š\n\n```js\neffect(\n    () => {\n        console.log(obj.foo); // ::::ä¸ç«‹å³æ‰§è¡Œ\n    },\n    // ::::options.lazy = true æ—¶ä¸ç«‹å³æ‰§è¡Œ\n    {lazy: true}\n);\n```\n\næ”¹é€  `effectå‡½æ•°` ä»£ç å¦‚ä¸‹ï¼š\n\n![|536](https://od-1310531898.cos.ap-beijing.myqcloud.com/202304091113904.png)\n\nä½†æ˜¯ï¼Œä¸Šé¢çš„ä»£ç ï¼Œä»…ä»…èƒ½å¤Ÿ`æ‰‹åŠ¨æ‰§è¡Œ` ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n![|496](https://od-1310531898.cos.ap-beijing.myqcloud.com/202304091118724.png)\n\nå¦‚æœ `fn` ä¸º `getterå‡½æ•°`å‘¢ï¼Ÿ å¦‚ä¸‹ï¼š\n\n![|560](https://od-1310531898.cos.ap-beijing.myqcloud.com/202304091121697.png)\n\nä¸Šé¢ä»£ç èƒ½å¦å†æŠ½è±¡æˆ `computed` ? è¿™å°±å¼•å‡ºäº† `computed`\n\n### 11.2. `computed` è®¡ç®—å±æ€§\n\n- è®¡ç®—å±æ€§çš„ `æ‡’è®¡ç®—`ï¼Œå³ `åªæœ‰è¯»å–æ—¶ï¼Œæ‰ä¼šè®¡ç®—`\n- å¦å¤–ï¼Œå¤šæ¬¡è¯»å–ä¸€ä¸ªå±æ€§æ—¶ï¼Œè¿˜éœ€è¦åšåˆ° `ç¼“å­˜`ï¼Œé¿å…`å¤šæ¬¡è®¡ç®—`ï¼Œé€šè¿‡è„å˜é‡ `dirty`æ¥æ ‡è¯†ï¼Œç±»ä¼¼äº Angular çš„æ¦‚å¿µã€‚\n- ç±»ä¼¼äº Vue ï¼Œ å¦‚æœ`è®¡ç®—å±æ€§å‘ç”Ÿå˜åŒ–ä¼šé‡æ–°è§¦å‘æ¸²æŸ“` ï¼Œ ä½†æ˜¯å¦‚æœä¸€ä¸ªè®¡ç®—å±æ€§ä¾èµ–å¦å¤–ä¸€ä¸ªè®¡ç®—å±æ€§æ—¶ï¼Œä¼šå‘ç”Ÿ `effect åµŒå¥—`ï¼Œæ‰€ä»¥ï¼Œæ¯æ¬¡è¯»å–è®¡ç®—å±æ€§æ—¶ï¼Œéœ€è¦`æ‰‹åŠ¨è§¦å‘ trigger è¿½è¸ª`\n\n![|576](https://od-1310531898.cos.ap-beijing.myqcloud.com/202304091154769.png)\n\næ‰€ä»¥ï¼Œä¸Šé¢çš„ä»£ç ä¼šå»ºç«‹å“åº”è”åŠ¨å…³ç³»å¦‚ä¸‹ï¼š\n\n- `computed(obj)`\n- `value`\n- `effectFn`\n\nå³ï¼Œä½ å°±æŠŠ `å¯¹äºcomputedåµŒå¥—ï¼Œå½“åšæ˜¯ä¸¤ä¸ªå‰¯ä½œç”¨å‡½æ•°çš„åµŒå¥—æ¥ç†è§£`ï¼Œå°±å¯¹äº†ï¼\n\n> [!info]  \nçœŸæ­£è¿˜æ˜¯éœ€è¦çœ‹ä»£ç å»ï¼Œè¯´çœŸçš„ï¼Œè‡ªå·±æ‰‹å†™å®ç°å®Œæ•´çš„åŠŸèƒ½ï¼Œå¾—å®ç°å¤šä¹…å•Šï¼ï¼ï¼Œè¿™å°±æ˜¯ä¸šåŠ¡ä»£ç å’ŒçœŸæ­£æŠ€æœ¯ä»£ç çš„åŒºåˆ«å§ï¼\n\n>[!tip]  \næ‰€ä»¥ï¼Œ**è¿™é‡ŒåŸºæœ¬æ€è·¯æŒæ¡å³å¯ï¼Œä¸ç”¨è£…ç‰›è§’å°–**ï¼Œä¹Ÿä¸å¯èƒ½è®©ä½ æ®µæ—¶é—´å†…å¾’æ‰‹å†™å‡ºæ¥ï¼Œéœ€è¦çš„è¯å°±å»è‡ªå·±çœ‹ä»£ç ã€‚\n\n## 12. `watchå‡½æ•°` çš„å®ç°åŸç†\n\n### 12.1. ç®€å•å®ç°\n\né€šè¿‡å‰é¢æˆ‘ä»¬çŸ¥é“ï¼Œå‰¯ä½œç”¨å‡½æ•°é‡æ–°æ‰§è¡Œæ—¶ï¼Œ`å¯è°ƒåº¦` ï¼Œæ‰€ä»¥ æˆ‘ä»¬æŠŠè°ƒåº¦é‡Œï¼ŒåŠ ä¸ª`å›è°ƒ`ï¼Œå°±èƒ½å®ç°ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n![|576](https://od-1310531898.cos.ap-beijing.myqcloud.com/202304091223151.png)\n\nä¸Šé¢ä»£ç ç¡¬ç¼–ç äº† `source.foo` çš„è¯»å–æ“ä½œï¼Œæ›´é€šç”¨çš„è§£æ³•ï¼š`é€’å½’è¯»å–å¯¹è±¡çš„æ‰€æœ‰å±æ€§`\n\n### 12.2. ç›¸å¯¹å®Œå–„çš„å®ç°\n\nå°±æƒ³æƒ³å¦‚ä½•ä½¿ç”¨ `watch` å‡½æ•°çš„ï¼Ÿ æ‰€ä»¥ï¼Œéœ€è¦æ”¯æŒä¸€ä¸‹åŠŸèƒ½ï¼š\n\n- watch å…¥å‚æ”¯æŒ`ä¸‰ä¸ª`ï¼Œæƒ³æƒ³æ˜¯ å“ªä¸‰ä¸ªï¼Ÿ\n\t- `ç¬¬ä¸€ä¸ª`å‚æ•° æ”¯æŒ `getter å‡½æ•°` å’Œ `å¯¹è±¡`\n\t- `ç¬¬äºŒä¸ª`å‚æ•°ï¼Œå›è°ƒå‡½æ•°é‡Œæ”¯æŒ `newVal` å’Œ `oldVal`\n\t- `ç¬¬ä¸‰ä¸ª`è‡ªå®šä¹‰å‚æ•° `options`\n\nä¸‹é¢æ˜¯ `watch å‡½æ•°`çš„ä»£ç   \n\n![](https://od-1310531898.cos.ap-beijing.myqcloud.com/202304091242677.png)\n\n> [!tip]  \næ³¨æ„ï¼Œä¸Šé¢ä»£ç **é«˜äº®çš„éƒ¨åˆ†** ï¼Œå¦å¤– `flush` çš„å€¼ `pre` å’Œ `post` ä»£è¡¨**ç»„ä»¶æ›´æ–°å‰å’Œæ›´æ–°å**ï¼Œåé¢ä¼šæ¶‰åŠåˆ°å…·ä½“åŸç†ï¼Œè¿™é‡Œä¸æ·±ç©¶ã€‚\n\n### 12.3. å›è°ƒçš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Ÿ\n\n```typescript hl:4\ntype WatchCallback<T> = (\n  value: T,\n  oldValue: T,\n  onCleanup: (cleanupFn: () => void) => void\n) => void\n\n```\n\nå…ˆçœ‹ä¸€ä¸ªä¾‹å­ï¼Œå¦‚æœ `watch` ä¸€ä¸ª `obj å¯¹è±¡`ï¼Œæ”¹å˜äº†å°±å‘è¯·æ±‚ï¼Œå¦‚ä¸‹ï¼š\n\n![](https://od-1310531898.cos.ap-beijing.myqcloud.com/202304091258200.png)\n\næ‰€ä»¥ï¼Œä¼šå­˜åœ¨`è¿‡æœŸçš„å‰¯ä½œç”¨å‡½æ•°`ï¼Œ`ç¬¬ä¸‰ä¸ªå‚æ•°`å°±æ˜¯è§£å†³è¿™ç§`ç«æ€é—®é¢˜`çš„ ï¼Œä»¥ä¸‹æ˜¯ä»£ç å®ç°ï¼š\n\n![|576](https://od-1310531898.cos.ap-beijing.myqcloud.com/202304091303363.png)\n\næ³¨æ„ä¸Šé¢ä»£ç çš„ **é«˜äº®éƒ¨åˆ†**\n\nä¸‹é¢æ˜¯ **ä½¿ç”¨å®ä¾‹**ï¼š\n\n![|568](https://od-1310531898.cos.ap-beijing.myqcloud.com/202304091304118.png)\n\næ‰€ä»¥ï¼Œæœ€ç»ˆçš„æ•ˆæœå¦‚ä¸‹ï¼š\n\n![|560](https://od-1310531898.cos.ap-beijing.myqcloud.com/202304091306983.png)\n\n## 13. æœ€å\n\n>[!warning]  \nå¼ºè°ƒä¸‹ï¼Œè¿™ä¸€ç« å¾ˆéš¾å•ƒçš„ï¼Œä½†å±‚å±‚é€’è¿›çš„æ€æƒ³æ¯”ä»£ç æœ¬èº«æ›´é‡è¦ï¼Œå…·ä½“å¦‚ä½•å®ç°ï¼Œä»£ç æœ€ç»ˆå¦‚ä½•ç¼–å†™å®ç°ï¼Œè¿œè¿œæ²¡æœ‰ç†è§£æ¥é¾™å»è„‰é‡è¦ã€‚**æœ€ç»ˆä»£ç éƒ½æœ‰ï¼Œå¤šäº›æ€è€ƒä¸ç†è§£ï¼Œè£…ç‰›è§’å°–æ„ä¹‰ä¸å¤§**\n\n## 14. å‚è€ƒ\n\n- ã€ŠVue.jsè®¾è®¡ä¸å®ç°ã€‹\n- [https://github.com/HcySunYang/code-for-vue-3-book](https://github.com/HcySunYang/code-for-vue-3-book)","c682639afe0b5e52b50a2455332e00a6":"\n# Vue3 ä¸­ effect çš„è°ƒåº¦é€‰é¡¹ï¼ˆschedulerï¼‰çš„ä½¿ç”¨ç¤ºä¾‹\n\n`#vue3` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åŸºæœ¬æ¦‚å¿µ \n\næˆ‘æ¥è¯¦ç»†è§£é‡Š Vue3 ä¸­ effect çš„å®Œæ•´å®šä¹‰ã€å‚æ•°å’Œè¿”å›å€¼ï¼š\n\n### 1.1. å®Œæ•´å‚æ•°è¯´æ˜\n\n```typescript\nimport { effect, reactive } from 'vue'\n\n// åˆ›å»ºå“åº”å¼å¯¹è±¡\nconst state = reactive({\n  count: 0\n})\n\n// effect çš„å®Œæ•´ä½¿ç”¨ç¤ºä¾‹\nconst runner = effect(\n  // ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ•ˆæœå‡½æ•°\n  () => {\n    console.log('count is:', state.count)\n    return state.count // å¯ä»¥æœ‰è¿”å›å€¼\n  },\n  \n  // ç¬¬äºŒä¸ªå‚æ•°ï¼šé…ç½®é€‰é¡¹\n  {\n    // æ˜¯å¦å»¶è¿Ÿæ‰§è¡Œï¼Œé»˜è®¤ false\n    lazy: false,\n    \n    // è°ƒåº¦å™¨å‡½æ•°\n    scheduler: (run) => {\n      console.log('scheduler called')\n      run()\n    },\n    \n    // æ•ˆæœä½œç”¨åŸŸ\n    scope: undefined,\n    \n    // æ˜¯å¦å…è®¸é€’å½’è°ƒç”¨ï¼Œé»˜è®¤ false\n    allowRecurse: false,\n    \n    // åœæ­¢æ—¶çš„å›è°ƒå‡½æ•°\n    onStop: () => {\n      console.log('effect stopped')\n    }\n  }\n)\n```\n\n### 1.2. è¿”å›å€¼è¯¦è§£\n\n```typescript\n// runner å‡½æ•°çš„ä½¿ç”¨\nconst runner = effect(() => {\n  return state.count * 2\n})\n\n// 1. ç›´æ¥è°ƒç”¨æ‰§è¡Œæ•ˆæœå‡½æ•°\nconst result = runner() // è¿”å›è®¡ç®—ç»“æœ\n\n// 2. è®¿é—® effect å®ä¾‹\nconst effectInstance = runner.effect\n\n// 3. ä½¿ç”¨ effect å®ä¾‹çš„æ–¹æ³•\nrunner.effect.stop() // åœæ­¢å“åº”å¼è¿½è¸ª\nrunner.effect.run()  // æ‰‹åŠ¨è¿è¡Œæ•ˆæœ\n```\n\n## 2. åŸºç¡€ä½¿ç”¨ç¤ºä¾‹\n\n```javascript hl:11\nimport { effect, ref } from 'vue'\n\nconst count = ref(0)\n\n// åˆ›å»ºä¸€ä¸ªeffectï¼Œå¸¦æœ‰è‡ªå®šä¹‰è°ƒåº¦å™¨\neffect(() => {\n  console.log(count.value)\n}, {\n  scheduler: (run) => {\n    // run æ˜¯åŸå§‹çš„ effect å‡½æ•°\n    console.log('scheduler called')\n    // å¯ä»¥é€‰æ‹©ä½•æ—¶è¿è¡Œ effect\n    run()\n  }\n})\n```\n\n## 3. å¼‚æ­¥è°ƒåº¦ç¤ºä¾‹\n\n```javascript hl:8\nconst count = ref(0)\n\n// å°†effectæ‰§è¡Œæ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—\neffect(() => {\n  console.log(count.value)\n}, {\n  scheduler: (run) => {\n    Promise.resolve().then(run)\n  }\n})\n```\n\n## 4. é˜²æŠ–ç¤ºä¾‹\n\n```javascript\nimport { effect, ref } from 'vue'\nimport { debounce } from 'lodash'\n\nconst searchQuery = ref('')\n\n// åˆ›å»ºä¸€ä¸ªé˜²æŠ–çš„effect\neffect(() => {\n  // æœç´¢é€»è¾‘\n  console.log('Searching for:', searchQuery.value)\n}, {\n  scheduler: debounce((run) => {\n    run()\n  }, 300)\n})\n```\n\n## 5. æ‰¹é‡æ›´æ–°ç¤ºä¾‹ \n\n```javascript hl:9\nconst count = ref(0)\nlet runs = 0\n\neffect(() => {\n  console.log(count.value)\n}, {\n  scheduler: (run) => {\n    // ä½¿ç”¨ requestAnimationFrame æ‰¹é‡å¤„ç†æ›´æ–°\n    requestAnimationFrame(() => {\n      runs++\n      console.log(`Running effect, times: ${runs}`)\n      run()\n    })\n  }\n})\n```\n\n## 6. æ‰¹é‡æ›´æ–°ç¤ºä¾‹ 2\n\n```javascript hl:14,9\nconst list = ref([])\nlet pending = false\nconst updates = new Set()\n\neffect(() => {\n  console.log('List updated:', list.value)\n}, {\n  scheduler: (run) => {\n    updates.add(run)\n    \n    if (!pending) {\n      pending = true\n      Promise.resolve().then(() => {\n        updates.forEach(update => update())\n        updates.clear()\n        pending = false\n      })\n    }\n  }\n})\n\n// æ‰¹é‡æ·»åŠ æ•°æ®\nlist.value.push(1)\nlist.value.push(2)\nlist.value.push(3)\n```\n\n## 7. æ¡ä»¶è°ƒåº¦ç¤ºä¾‹\n\n```javascript hl:8\nconst count = ref(0)\nlet shouldRun = true\n\neffect(() => {\n  console.log(count.value)\n}, {\n  scheduler: (run) => {\n    if (shouldRun) {\n      run()\n    } else {\n      console.log('Effect execution skipped')\n    }\n  }\n})\n```\n\n## 8. é”™è¯¯å¤„ç†\n\n```javascript hl:7\nconst count = ref(0)\n\neffect(() => {\n  console.log(count.value)\n}, {\n  scheduler: (run) => {\n    try {\n      run()\n    } catch (error) {\n      console.error('Effect execution failed:', error)\n    }\n  }\n})\n```\n\n## 9. å®é™…åº”ç”¨åœºæ™¯\n\n```javascript hl:10,24\n// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨\nimport { effect, ref, onMounted, onUnmounted } from 'vue'\n\nexport default {\n  setup() {\n    const data = ref(null)\n    let stop\n\n    onMounted(() => {\n      // åˆ›å»ºå¯æ¸…ç†çš„effect\n      stop = effect(() => {\n        // æ•°æ®å¤„ç†é€»è¾‘\n        processData(data.value)\n      }, {\n        scheduler: (run) => {\n          // ä½¿ç”¨ requestIdleCallback åœ¨ç©ºé—²æ—¶æ‰§è¡Œ\n          requestIdleCallback(() => {\n            run()\n          })\n        }\n      })\n    })\n\n    onUnmounted(() => {\n      // æ¸…ç†effect\n      if (stop) stop()\n    })\n  }\n}\n```\n\n## 10. ä¼˜å…ˆçº§è°ƒåº¦ç¤ºä¾‹ 1\n\n```javascript\nconst highPriorityQueue = []\nconst lowPriorityQueue = []\n\nconst count = ref(0)\n\neffect(() => {\n  console.log(count.value)\n}, {\n  scheduler: (run) => {\n    if (isHighPriority()) {\n      highPriorityQueue.push(run)\n      flushHighPriorityQueue()\n    } else {\n      lowPriorityQueue.push(run)\n      scheduleFlushLowPriorityQueue()\n    }\n  }\n})\n```\n\n## 11. ä¼˜å…ˆçº§è°ƒåº¦ç¤ºä¾‹ 2\n```javascript hl:12\nconst data = ref(null)\nconst loading = ref(false)\nconst error = ref(null)\n\n// é«˜ä¼˜å…ˆçº§æ›´æ–° - ç«‹å³æ‰§è¡Œ\neffect(() => {\n  console.log('Loading status:', loading.value)\n}, {\n  scheduler: (run) => run()\n})\n\n// ä½ä¼˜å…ˆçº§æ›´æ–° - ä½¿ç”¨ requestIdleCallback\neffect(() => {\n  console.log('Data processed:', data.value)\n}, {\n  scheduler: (run) => {\n    requestIdleCallback(() => run())\n  }\n})\n```\n\n## 12. ç»„åˆè°ƒåº¦å™¨ç¤ºä¾‹\n\n```javascript hl:2\n// åˆ›å»ºç»„åˆè°ƒåº¦å™¨\nfunction createCompositeScheduler(...schedulers) {\n  return (run) => {\n    schedulers.forEach(scheduler => scheduler(run))\n  }\n}\n\nconst count = ref(0)\n\n// ç»„åˆé˜²æŠ–å’Œé”™è¯¯å¤„ç†\neffect(() => {\n  console.log('Count:', count.value)\n}, {\n  scheduler: createCompositeScheduler(\n    debounce((run) => run(), 300),\n    (run) => {\n      try {\n        run()\n      } catch (error) {\n        console.error(error)\n      }\n    }\n  )\n})\n```\n\n## 13. è‡ªå®šä¹‰é˜Ÿåˆ—è°ƒåº¦ç¤ºä¾‹\n\n```javascript hl:5\nclass QueueScheduler {\n  queue = []\n  flushing = false\n\n  add(run) {\n    this.queue.push(run)\n    this.flush()\n  }\n\n  flush() {\n    if (this.flushing) return\n    this.flushing = true\n\n    Promise.resolve().then(() => {\n      while (this.queue.length) {\n        const run = this.queue.shift()\n        run()\n      }\n      this.flushing = false\n    })\n  }\n}\n\nconst scheduler = new QueueScheduler()\n\nconst counter = ref(0)\n\neffect(() => {\n  console.log('Counter:', counter.value)\n}, {\n  scheduler: (run) => scheduler.add(run)\n})\n```\n\n## 14. ä½¿ç”¨æ³¨æ„äº‹é¡¹\n\n1. scheduler å‡½æ•°æ¥æ”¶åŸå§‹çš„ effect å‡½æ•°ä½œä¸ºå‚æ•°\n2. scheduler å¯ä»¥æ§åˆ¶ effect çš„æ‰§è¡Œæ—¶æœºå’Œæ–¹å¼\n3. å¦‚æœæä¾›äº† schedulerï¼Œeffect çš„é‡æ–°æ‰§è¡Œå°†ç”± scheduler æ¥æ§åˆ¶\n4. scheduler å¯ä»¥ç”¨äºå®ç°é«˜çº§åŠŸèƒ½å¦‚`é˜²æŠ–ã€èŠ‚æµã€å¼‚æ­¥æ›´æ–°`ç­‰\n5. åœ¨æ¸…ç†ç»„ä»¶æ—¶è®°å¾—`åœæ­¢ effect ä»¥é˜²å†…å­˜æ³„æ¼`\n\n## 15. æœ€ä½³å®è·µ\n\n1. å¯¹äºé¢‘ç¹æ›´æ–°çš„æ•°æ®ï¼Œä½¿ç”¨é˜²æŠ–æˆ–èŠ‚æµ\n2. å¯¹äºå¤§é‡è®¡ç®—ï¼Œè€ƒè™‘ä½¿ç”¨å¼‚æ­¥è°ƒåº¦ï¼Œæ¯”å¦‚\n3. å¯¹äºæ‰¹é‡æ›´æ–°ï¼Œä½¿ç”¨ requestAnimationFrame\n4. éœ€è¦æ¸…ç†çš„ effect è¦åœ¨ç»„ä»¶å¸è½½æ—¶åœæ­¢\n5. åˆç†ä½¿ç”¨é”™è¯¯å¤„ç†ç¡®ä¿åº”ç”¨ç¨³å®šæ€§","c276d7aca9a052f18a31537ee2bf64d5":"\n# vue3 watch çš„å–æ¶ˆç›‘å¬ä¸æ¸…ç†å‰¯ä½œç”¨\n\n`#vue3` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åŸºæœ¬è¯­æ³•å®šä¹‰ \n\n```typescript hl:18\n// ä¾¦å¬å•ä¸ªæ¥æº\nfunction watch<T>(\n  source: WatchSource<T>,\n  callback: WatchCallback<T>,\n  options?: WatchOptions\n): WatchHandle\n\n// ä¾¦å¬å¤šä¸ªæ¥æº\nfunction watch<T>(\n  sources: WatchSource<T>[],\n  callback: WatchCallback<T[]>,\n  options?: WatchOptions\n): WatchHandle\n\ntype WatchCallback<T> = (\n  value: T,\n  oldValue: T,\n  onCleanup: (cleanupFn: () => void) => void\n) => void\n\ntype WatchSource<T> =\n  | Ref<T> // ref\n  | (() => T) // getter\n  | T extends object\n  ? T\n  : never // å“åº”å¼å¯¹è±¡\n\ninterface WatchOptions extends WatchEffectOptions {\n  immediate?: boolean // é»˜è®¤ï¼šfalse\n  deep?: boolean | number // é»˜è®¤ï¼šfalse\n  flush?: 'pre' | 'post' | 'sync' // é»˜è®¤ï¼š'pre'\n  onTrack?: (event: DebuggerEvent) => void\n  onTrigger?: (event: DebuggerEvent) => void\n  once?: boolean // é»˜è®¤ï¼šfalse (3.4+)\n}\n\ninterface WatchHandle {\n  (): void // å¯è°ƒç”¨ï¼Œä¸ `stop` ç›¸åŒ\n  pause: () => void\n  resume: () => void\n  stop: () => void\n}\n```\n\n## 2. åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ï¼šå–æ¶ˆç›‘å¬\n```javascript hl:23\nimport { ref, watch } from 'vue'\n\n// ç›‘å¬å•ä¸ªå“åº”å¼å¼•ç”¨\nconst count = ref(0)\nconst stop = watch(count, (newValue, oldValue) => {\n  console.log('count changed:', newValue, oldValue)\n})\n\n// ç›‘å¬å¤šä¸ªæ•°æ®æº\nconst name = ref('John')\nconst age = ref(25)\nwatch(\n  [name, age],\n  ([newName, newAge], [oldName, oldAge]) => {\n    console.log('Person changed:', {\n      name: [oldName, newName],\n      age: [oldAge, newAge]\n    })\n  }\n)\n\n// å–æ¶ˆç›‘å¬\nstop() // è°ƒç”¨è¿”å›çš„å‡½æ•°å³å¯å–æ¶ˆç›‘å¬\n```\n\n## 3. ç›‘å¬é€‰é¡¹çš„ä½¿ç”¨\n\n```javascript\nconst count = ref(0)\n\n// immediate: ç«‹å³æ‰§è¡Œ\nwatch(\n  count,\n  (newVal, oldVal) => {\n    console.log('Count:', newVal, oldVal)\n  },\n  { immediate: true }\n)\n\n// deep: æ·±åº¦ç›‘å¬\nconst user = reactive({\n  profile: {\n    name: 'John',\n    settings: {\n      theme: 'dark'\n    }\n  }\n})\n\n\n// flush: æ§åˆ¶å›è°ƒçš„è§¦å‘æ—¶æœº\nwatch(\n  count,\n  () => {\n    console.log('DOM updated')\n  },\n  { flush: 'post' } // åœ¨ DOM æ›´æ–°åè§¦å‘\n)\n```\n\n## 4. æ¸…ç†å‰¯ä½œç”¨\n\n```javascript hl:4,8\nconst userId = ref(1)\n\nwatch(userId, (newId, oldId,\n\t\t\t\tonCleanup) => {\n  const controller = new AbortController()\n  \n  // æ³¨å†Œæ¸…ç†å‡½æ•°\n  onCleanup(() => {\n    controller.abort()\n  })\n  \n  // å‘èµ·è¯·æ±‚\n  fetch(`/api/users/${newId}`, {\n    signal: controller.signal\n  })\n})\n```\n\n## 5. æœ€ä½³å®è·µå’Œæ³¨æ„äº‹é¡¹\n\n```javascript hl:1,8,15,27\n// 1. é¿å…åœ¨ç›‘å¬å›è°ƒä¸­ç›´æ¥ä¿®æ”¹è¢«ç›‘å¬çš„å€¼\nconst count = ref(0)\n// âŒ é”™è¯¯ç¤ºä¾‹\nwatch(count, (newVal) => {\n  count.value++ // å¯èƒ½å¯¼è‡´æ— é™å¾ªç¯\n})\n\n// 2. ä½¿ç”¨ watchEffect æ›¿ä»£ç®€å•çš„ watch\nimport { watchEffect } from 'vue'\n// âœ… æ›´ç®€æ´çš„å†™æ³•\nwatchEffect(() => {\n  console.log('Count is:', count.value)\n})\n\n// 3. åˆç†ä½¿ç”¨ deep é€‰é¡¹\nconst user = reactive({\n  profile: { /* æ·±å±‚å¯¹è±¡ */ }\n})\n// åªç›‘å¬éœ€è¦çš„å±æ€§\nwatch(\n  () => user.profile.name,\n  (newVal) => {\n    console.log('Name changed:', newVal)\n  }\n)\n\n// 4. åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„ç›‘å¬å™¨\nconst stop = watch(/* ... */)\nonUnmounted(() => {\n  stop()\n})\n```\n\n","bf137ce405e5590ba39bee0ccd7feafe":"\n# Vue3 çš„éåŸå§‹å€¼å“åº”å¼æ–¹æ¡ˆï¼ˆMapã€WeakMap ã€Set ã€WeakSet ï¼‰\n\n\nå‰æ–‡ [6. Vue3 çš„å“åº”å¼çš„ç³»ç»Ÿè®¾è®¡åŸç†ï¼ˆeffectã€computedã€watch çš„åŸç† ï¼‰](/post/1c52539699f15d5d80f350f4a7d98915.html) æ³¨æ„è®²äº†åŸºæœ¬çš„å“åº”å¼æ–¹æ¡ˆ\n\næœ¬æ–‡ï¼Œä¸»è¦è®²è§£æ›´å¤æ‚åœºæ™¯ ï¼Œæ¯”å¦‚\n- å¦‚ä½•æ‹¦æˆª `for-in` ?\n- å¦‚ä½•æ‹¦æˆª `Map WeakMap  Set  WeakSet` ç­‰ï¼Ÿ\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æœ¬æ–‡æ€»ç»“ \n\n### 1.1. åŸºæœ¬åŸç†\n\n- Vue çš„å“åº”å¼æ•°æ®æ˜¯åŸºäº Proxy å®ç°çš„\n\t- Proxy å¯ä»¥ä¸ºå…¶ä»–å¯¹è±¡åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚\n\t- åœ¨å®ç°ä»£ç†çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°äº†è®¿é—®å™¨å±æ€§çš„ `this æŒ‡å‘`é—®é¢˜ï¼Œè¿™éœ€è¦ä½¿ç”¨ `Reflect.* æ–¹æ³•`å¹¶æŒ‡å®šæ­£ç¡®çš„ receiver æ¥è§£å†³ã€‚\n- åœ¨ ECMAScript è§„èŒƒä¸­ï¼ŒJavaScript ä¸­æœ‰ä¸¤ç§å¯¹è±¡ï¼Œå…¶ä¸­ä¸€å«ä½œ`å¸¸è§„å¯¹è±¡`ï¼Œå¦ä¸€ç§å«ä½œ`å¼‚è´¨å¯¹è±¡`ã€‚\n- ä»£ç† `Objectå¯¹è±¡` çš„æœ¬è´¨ï¼Œ å°±æ˜¯**æŸ¥é˜…è§„èŒƒ**å¹¶æ‰¾åˆ°å¯æ‹¦æˆªçš„åŸºæœ¬æ“ä½œçš„æ–¹æ³•ã€‚\n\t- æœ‰ä¸€äº›æ“ä½œå¹¶ä¸æ˜¯åŸºæœ¬æ“ä½œï¼Œè€Œæ˜¯å¤åˆæ“ä½œï¼Œè¿™éœ€è¦æˆ‘ä»¬æŸ¥é˜…è§„èŒƒäº†è§£å®ƒä»¬éƒ½ä¾èµ–å“ªäº›åŸºæœ¬æ“ä½œï¼Œä»è€Œé€šè¿‡åŸºæœ¬æ“ä½œçš„æ‹¦æˆªæ–¹æ³•**é—´æ¥**åœ°å¤„ç†å¤åˆæ“ä½œã€‚\n- æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤å±æ€§å¯¹ `for...in` æ“ä½œçš„å½±å“\n\t- `æ·»åŠ å’Œåˆ é™¤`å±æ€§éƒ½ä¼šå½±å“ for...in å¾ªç¯çš„`æ‰§è¡Œæ¬¡æ•°`ï¼Œæ‰€ä»¥å½“è¿™äº›æ“ä½œå‘ç”Ÿæ—¶ï¼Œéœ€è¦è§¦å‘ä¸ `ITERATE_KEY` ç›¸å…³è”çš„å‰¯ä½œç”¨å‡½æ•°é‡æ–°æ‰§è¡Œã€‚\n\t-  `ä¿®æ”¹`å±æ€§å€¼åˆ™ä¸å½±å“ `for...in` å¾ªç¯çš„æ‰§è¡Œæ¬¡æ•°ï¼Œå› æ­¤æ— é¡»å¤„ç†ã€‚\n-  å¦‚ä½•åˆç†åœ°è§¦å‘å‰¯ä½œç”¨å‡½æ•°é‡æ–°æ‰§è¡Œï¼ŒåŒ…æ‹¬\n\t- å¯¹ `NaN` çš„å¤„ç†ï¼Œ\n\t\t- å¯¹äº `NaN`ï¼Œæˆ‘ä»¬ä¸»è¦æ³¨æ„çš„æ˜¯`NaN === NaN`æ°¸è¿œç­‰äºfalse\n\t- è®¿é—®åŸå‹é“¾ä¸Šçš„å±æ€§å¯¼è‡´çš„å‰¯ä½œç”¨å‡½æ•°é‡æ–°æ‰§è¡Œä¸¤æ¬¡çš„é—®é¢˜\n\t\t-  å¯¹äºåŸå‹é“¾å±æ€§é—®é¢˜ï¼Œéœ€è¦æˆ‘ä»¬æŸ¥é˜…è§„èŒƒå®šä½é—®é¢˜çš„åŸå› ã€‚\n\t- ç”±æ­¤å¯è§ï¼Œæƒ³è¦åŸºäº Proxy å®ç°ä¸€ä¸ªç›¸å¯¹å®Œå–„çš„å“åº”ç³»ç»Ÿï¼Œ**å…ä¸äº†å»äº†è§£ ECMAScript è§„èŒƒ**ã€‚\n- æ·±å“åº”ä¸æµ…å“åº”ï¼Œä»¥åŠæ·±åªè¯»ä¸æµ…åªè¯»ã€‚\n\t- è¿™é‡Œçš„æ·±å’Œæµ…æŒ‡çš„æ˜¯å¯¹è±¡çš„å±‚çº§ï¼Œ\n\t- æµ…å“åº”(æˆ–åªè¯»)ä»£è¡¨ä»…ä»£ç†ä¸€ä¸ªå¯¹è±¡çš„ç¬¬ä¸€å±‚å±æ€§ï¼Œå³åªæœ‰å¯¹è±¡çš„ç¬¬ä¸€å±‚å±æ€§å€¼æ˜¯å“åº”(æˆ–åªè¯»)çš„ã€‚\n\t- æ·±å“åº”(æˆ–åªè¯»)åˆ™æ°æ°ç›¸åï¼Œ\n\t- ä¸ºäº†å®ç°æ·±å“åº”(æˆ–åªè¯»)ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¿”å›å±æ€§å€¼ä¹‹å‰ï¼Œå¯¹å€¼åšä¸€å±‚åŒ…è£…ï¼Œå°†å…¶åŒ…è£…ä¸ºå“åº”å¼(æˆ–åªè¯») æ•°æ®åå†è¿”å›ã€‚\n\n### 1.2. æ•°ç»„çš„ä»£ç†\n\n- æ•°ç»„æ˜¯ä¸€ä¸ª`å¼‚è´¨å¯¹è±¡`ï¼Œå› ä¸ºæ•°ç»„å¯¹è±¡éƒ¨ç½²çš„å†…éƒ¨æ–¹æ³• `[DefineOwnProperty](/post/bf137ce405e5590ba39bee0ccd7feafe.html#DefineOwnProperty)` ä¸åŒäºå¸¸è§„å¯¹è±¡ã€‚\n- å¾ˆå¤šéšå¼å¯¹è±¡çš„å±æ€§ï¼Œè§¦å‘å“åº”çš„æ—¶å€™éœ€è¦é¢å¤–æ³¨æ„ï¼Œæ¯”å¦‚\n\t- é€šè¿‡`ç´¢å¼•`ä¸ºæ•°ç»„è®¾ç½®æ–°çš„å…ƒç´ ï¼Œå¯èƒ½ä¼šéšå¼åœ°æ”¹å˜æ•°ç»„ `length` å±æ€§çš„å€¼ã€‚\n\t- å¯¹åº”åœ°ï¼Œä¿®æ”¹æ•°ç»„ `length` å±æ€§çš„å€¼ï¼Œä¹Ÿå¯èƒ½ä¼šé—´æ¥å½±å“æ•°ç»„ä¸­çš„å·²æœ‰å…ƒç´ ã€‚\n- å¦‚ä½•æ‹¦æˆª `for...in` å’Œ `for...of` å¯¹æ•°ç»„çš„éå†æ“ä½œ\n\t- ä½¿ç”¨ `for...in` å¾ªç¯éå†æ•°ç»„ä¸éå†æ™®é€šå¯¹è±¡åŒºåˆ«ä¸å¤§ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„ æ˜¯ï¼Œå½“è¿½è¸ª for...in æ“ä½œæ—¶ï¼Œåº”è¯¥ä½¿ç”¨`æ•°ç»„çš„ length` ä½œä¸ºè¿½è¸ªçš„ keyã€‚\n\t- `for...of` åŸºäºè¿­ä»£åè®®å·¥ä½œï¼Œæ•°ç»„å†…å»ºäº† `Symbol.iterator` æ–¹æ³•ã€‚\n\t\t- æ•°ç»„è¿­ä»£å™¨æ‰§è¡Œæ—¶ï¼Œä¼šè¯»å–æ•°ç»„çš„ length å±æ€§æˆ–æ•°ç»„çš„ç´¢å¼•ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸éœ€è¦åšå…¶ä»–é¢å¤–çš„å¤„ç†ï¼Œå°±èƒ½å¤Ÿå®ç°å¯¹ for...of è¿­ä»£çš„å“åº”å¼æ”¯æŒã€‚\n- æ•°ç»„çš„æŸ¥æ‰¾æ–¹æ³•ã€‚å¦‚ includesã€indexOf ä»¥åŠ lastIndexOf ç­‰\n\t- å¯¹äºæ•°ç»„å…ƒç´ çš„æŸ¥æ‰¾ï¼Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œç”¨æˆ·æ—¢å¯èƒ½ä½¿ç”¨ä»£ç†å¯¹è±¡è¿›è¡ŒæŸ¥æ‰¾ï¼Œä¹Ÿå¯èƒ½ä½¿ç”¨åŸå§‹å¯¹è±¡è¿›è¡ŒæŸ¥æ‰¾ã€‚\n\t- ä¸ºäº†æ”¯æŒè¿™ä¸¤ç§å½¢å¼ï¼Œæˆ‘ä»¬éœ€è¦é‡å†™æ•°ç»„çš„æŸ¥æ‰¾æ–¹æ³•ã€‚åŸç†å¾ˆç®€å•ï¼Œå½“ç”¨æˆ·ä½¿ç”¨è¿™äº›æ–¹æ³•æŸ¥æ‰¾å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå»ä»£ç†å¯¹è±¡ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå†å»åŸå§‹æ•°ç»„ä¸­æŸ¥æ‰¾ã€‚\n- æ ˆæº¢å‡ºé—®é¢˜\n\t- å³ pushã€popã€ shiftã€unshift ä»¥åŠ splice ç­‰æ–¹æ³•ã€‚è°ƒç”¨è¿™äº›æ–¹æ³•ä¼šé—´æ¥åœ°è¯»å– å’Œè®¾ç½®æ•°ç»„çš„ length å±æ€§ï¼Œå› æ­¤ï¼Œåœ¨ä¸åŒçš„å‰¯ä½œç”¨å‡½æ•°å†…å¯¹åŒä¸€ä¸ª æ•°ç»„æ‰§è¡Œä¸Šè¿°æ–¹æ³•ï¼Œä¼šå¯¼è‡´å¤šä¸ªå‰¯ä½œç”¨å‡½æ•°ä¹‹é—´å¾ªç¯è°ƒç”¨ï¼Œæœ€ç»ˆå¯¼è‡´è°ƒç”¨**æ ˆæº¢å‡º**ã€‚\n\t- ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ ‡è®°å˜é‡ `shouldTrack` æ¥ä»£è¡¨æ˜¯å¦å…è®¸è¿›è¡Œè¿½è¸ªï¼Œç„¶åé‡å†™äº†ä¸Šè¿°è¿™äº›æ–¹æ³•ï¼Œ ç›®çš„æ˜¯ï¼Œå½“è¿™äº›æ–¹æ³•é—´æ¥è¯»å– length å±æ€§å€¼æ—¶ï¼Œæˆ‘ä»¬ä¼šå…ˆå°† shouldTrack çš„å€¼è®¾ç½®ä¸º falseï¼Œå³ç¦æ­¢è¿½è¸ªã€‚\n\t- è¿™æ ·å°±å¯ä»¥æ–­å¼€ length å±æ€§ä¸å‰¯ä½œç”¨å‡½æ•°ä¹‹é—´çš„å“åº”è”ç³»ï¼Œä»è€Œé¿å…å¾ªç¯è°ƒç”¨å¯¼è‡´çš„è°ƒç”¨æ ˆæº¢å‡ºã€‚\n\n### 1.3. é›†åˆç±»å‹çš„å“åº”å¼æ–¹æ¡ˆ\n\n- é›†åˆç±»å‹æŒ‡ Setã€Mapã€WeakSet ä»¥åŠ WeakMap\n\t- ä¾‹å¦‚ï¼Œé›†åˆç±»å‹çš„ size å±æ€§æ˜¯ä¸€ä¸ªè®¿é—®å™¨å±æ€§ï¼Œå½“é€šè¿‡ä»£ç† å¯¹è±¡è®¿é—® size å±æ€§æ—¶ï¼Œç”±äºä»£ç†å¯¹è±¡æœ¬èº«å¹¶æ²¡æœ‰éƒ¨ç½² `[SetData](/post/bf137ce405e5590ba39bee0ccd7feafe.html#SetData)` è¿™æ ·çš„å†…éƒ¨æ§½ï¼Œæ‰€ä»¥ä¼šå‘ç”Ÿé”™è¯¯ã€‚\n\t- å¦å¤–ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡æ‰§è¡Œé›†åˆç±»å‹ çš„æ“ä½œæ–¹æ³•æ—¶ï¼Œè¦æ³¨æ„è¿™äº›æ–¹æ³•æ‰§è¡Œæ—¶çš„ this æŒ‡å‘ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ get æ‹¦æˆªå‡½æ•°å†…é€šè¿‡ .bind å‡½æ•°ä¸ºè¿™äº›æ–¹æ³•ç»‘å®šæ­£ç¡®çš„ `this å€¼`ã€‚\n- é›†åˆç±»å‹å“åº”å¼æ•°æ®çš„å®ç°ã€‚\n\t- æˆ‘ä»¬éœ€è¦é€šè¿‡â€œ**é‡å†™**â€é›†åˆæ–¹æ³•çš„æ–¹å¼æ¥å®ç°è‡ªå®šä¹‰çš„èƒ½åŠ›ï¼Œ\n\t- å½“ Set é›†åˆçš„ add æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œéœ€è¦è°ƒç”¨ trigger å‡½æ•°è§¦å‘å“åº”ã€‚\n- æ•°æ®æ±¡æŸ“\n\t- æŒ‡çš„æ˜¯ä¸å°å¿ƒå°†å“åº”å¼æ•°æ®æ·»åŠ åˆ°åŸå§‹æ•°æ®ä¸­ï¼Œå®ƒå¯¼è‡´ç”¨æˆ· å¯ä»¥é€šè¿‡åŸå§‹æ•°æ®æ‰§è¡Œå“åº”å¼ç›¸å…³æ“ä½œï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„ã€‚ä¸ºäº†é¿å…è¿™ç±»é—®é¢˜å‘ç”Ÿï¼Œæˆ‘ä»¬é€šè¿‡å“åº”å¼æ•°æ®å¯¹è±¡çš„ `raw å±`æ€§æ¥è®¿é—®å¯¹åº” çš„åŸå§‹æ•°æ®å¯¹è±¡ï¼Œåç»­æ“ä½œä½¿ç”¨åŸå§‹æ•°æ®å¯¹è±¡å°±å¯ä»¥äº†ã€‚\n- é›†åˆçš„ forEach æ–¹æ³•ä¸å¯¹è±¡çš„ for...in éå†ç±»ä¼¼ï¼Œæœ€å¤§çš„ä¸åŒä½“ç°åœ¨åœ¨äº\n\t- å½“ä½¿ç”¨ for...in éå†å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬åªå…³å¿ƒå¯¹è±¡çš„é”®æ˜¯å¦å˜åŒ–ï¼Œè€Œä¸å…³å¿ƒå€¼;\n\t- ä½†ä½¿ç”¨ forEach éå†é›†åˆæ—¶ï¼Œæˆ‘ä»¬æ—¢å…³å¿ƒé”®çš„å˜åŒ–ï¼Œä¹Ÿå…³å¿ƒå€¼çš„å˜åŒ–ã€‚\n\n## 2. å…ˆçœ‹çœ‹ `Proxy` ä¸ `Reflect`\n\n### 2.1. åŸºæœ¬æ“ä½œ\n\næ‹¦æˆªå¯¹è±¡çš„ `è¯» get ã€å– set`   \n\n```javascript\nconst obj = {foo: 1}\n\nconst p = new Proxy(obj, {\n    get() {\n        return obj.foo\n    },\n    set(target, key, value) {\n        obj[key] = value\n    }\n})\n```\n\næ‹¦æˆªå‡½æ•°çš„`è°ƒç”¨ apply`\n\n```javascript hl:6\nconst fn = (name) => {\n    console.log('æˆ‘æ˜¯ï¼š', name)\n}\n\nconst p2 = new Proxy(fn, {\n    apply(target, thisArg, argArray) {\n        target.call(thisArg, ...argArray)\n    }\n})\n```\n\n### 2.2. å¤åˆæ“ä½œ\n\nè¯»å–ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œå¦‚ `obj.fn()` ï¼Œ åˆ†ä¸¤æ­¥ï¼š\n- å…ˆ `get` è¯»å– `obj.fn`\n- ç„¶å`apply` è°ƒç”¨ï¼Œ`obj.fn()`\n\n### 2.3. Reflect\n\n![|496](https://832-1310531898.cos.ap-beijing.myqcloud.com/89f6df0dbb53ae4746460d060a860c99.png)\n\n> `Reflect` ä¸ `Proxy` çš„ API  ä¸€ä¸€å¯¹åº”ï¼Œæ¯”å¦‚ `get / set / apply` ç­‰\n\n`Reflect` è¿˜æ¥å—`ç¬¬ä¸‰ä¸ªå‚æ•°`ï¼Œå¦‚ä¸‹ï¼š\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/6f6465918bdc361e993206a4b58d401d.png)\nå‰æ–‡ [6. Vue3 çš„å“åº”å¼çš„ç³»ç»Ÿè®¾è®¡åŸç†ï¼ˆeffectã€computedã€watch çš„åŸç† ï¼‰](/post/1c52539699f15d5d80f350f4a7d98915.html) çš„` Effect` å‡½æ•°ï¼Œå¦‚æœå¯¹äºä¸‹é¢çš„æ•°æ®ç»“æ„æœ‰é—®é¢˜ï¼Œ`æ— æ³•æ­£å¸¸æ”¶é›†å“åº”ä¿¡æ¯`ã€‚è¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ° `Reflect çš„ç¬¬ä¸‰ä¸ªå‚æ•°äº†`\n\n```javascript hl:3\nconst obj = {\n  foo: 1,\n  get bar() {\n     return this.foo\n  }\n}\n```\n\n## 3. Javascript å¯¹è±¡ ä¸ Proxy å¯¹è±¡\n\n### 3.1. å¦‚ä½•åˆ¤æ–­æ˜¯ `æ™®é€šå¯¹è±¡` è¿˜æ˜¯`å‡½æ•°å¯¹è±¡`\n\nJS ä¸­ä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ï¼Œå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆå¦‚ä½•åŒºåˆ†å‘¢ï¼Ÿ\n- å¯¹è±¡çœŸæ­£è¯­ä¹‰ç”±`å†…éƒ¨æ–¹æ³•`å®ç°ï¼Œå³å¯¹å¯¹è±¡è¿›è¡ŒæŸä¸ªæ“ä½œæ—¶ï¼Œ`å¼•æ“å†…éƒ¨`å®é™…è°ƒç”¨çš„æ–¹æ³•ï¼Œå¯¹ç”¨æˆ·æ˜¯ä¸å¯è§çš„\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/facf27b921187c6c77f36e11511f2d2d.png)\n\nå¦‚ä¸Šå›¾ï¼Œæ˜¯ å¸¸è§„å¯¹è±¡ çš„ `å†…éƒ¨æ–¹æ³•`ï¼Œä¸‹é¢æ˜¯`å‡½æ•°å¯¹è±¡çš„å†…éƒ¨æ–¹æ³•`\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/5ffa20e66f443a16309655b8ae9201c4.png)\n\næ‰€ä»¥ï¼Œæ ¹æ®æ˜¯å¦éƒ¨ç½² `[Call](/post/bf137ce405e5590ba39bee0ccd7feafe.html#Call)`  æ–¹æ³•ï¼Œå°±å¯ä»¥åˆ¤æ–­æ˜¯ `æ™®é€šå¯¹è±¡` è¿˜æ˜¯`å‡½æ•°å¯¹è±¡` \n> [https://262.ecma-international.org/#sec-ordinary-and-exotic-objects-behaviours](https://262.ecma-international.org/#sec-ordinary-and-exotic-objects-behaviours)\n\n### 3.2. `å¸¸è§„å¯¹è±¡` ä¸ `å¼‚è´¨å¯¹è±¡`\n\nES è§„èŒƒï¼ŒJS ä¸­æœ‰`ä¸¤ç§å¯¹è±¡`ï¼š\n\n- `å¸¸è§„å¯¹è±¡`\n- `å¼‚è´¨å¯¹è±¡`ï¼š å¦‚ Proxy å¯¹è±¡ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/a519e54f6ddf360657463d503143b1ca.png)\n\n- `[Call](/post/bf137ce405e5590ba39bee0ccd7feafe.html#Call)` å’Œ `[construct](/post/bf137ce405e5590ba39bee0ccd7feafe.html#construct)` ä¸¤ä¸ªå†…éƒ¨æ–¹æ³•**åªæœ‰è¢«ä»£ç†å¯¹è±¡æ˜¯å‡½æ•°å’Œæ„é€ å‡½æ•°æ—¶**æ‰ä¼šè°ƒç”¨\n- å†…éƒ¨æ–¹æ³•çš„`å¤šæ€æ€§` å³ æ™®é€šå¯¹è±¡ å’Œ Proxy éƒ½æœ‰ `[Get](/post/bf137ce405e5590ba39bee0ccd7feafe.html#Get)`  ï¼Œä½†è§„èŒƒå®šä¹‰æ˜¯å®Œå…¨ä¸åŒçš„ã€‚\n> [https://262.ecma-international.org/#sec-proxy-object-internal-methods-and-internal-slots](https://262.ecma-international.org/#sec-proxy-object-internal-methods-and-internal-slots)\n\n### 3.3. ç¤ºä¾‹ï¼šä»£ç† `delete` æ“ä½œ\n\næ‰€ä»¥æ ¹æ®ä»¥ä¸Šå¯çŸ¥ï¼Œå¯é€šè¿‡**ä¸‹é¢**çš„æ–¹å¼ `æ‹¦æˆªåˆ é™¤å±æ€§æ“ä½œ` \n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/29799983481927d8818c33386d0b94e6.png)\n``\n> [!bug]\næ³¨æ„ï¼šéœ€è¦åˆ é™¤è¢« `proxy` çš„å¯¹è±¡ï¼Œæ‰ä¼šæ‹¦æˆªï¼Œå¦‚ä¸‹å›¾ï¼Œä¸‹é¢çš„æ–¹å¼å°±ä¸ä¼š\n**è‡ªå·±ä¸¢åˆ°å‘é‡Œäº†ï¼Œæäº†ä¸€ä¼šï¼Œæ‰å‘ç°éƒ½å†™é”™äº†**\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/b125b5237dd8ce6ea39f9e95e472d7fa.png)\n\n## 4. å¦‚ä½•ä»£ç† Object\n\nå¦‚ä½•æ‹¦æˆªå¯¹è±¡çš„`ä¸€åˆ‡è¯»å–æ“ä½œ`ï¼Œæ¯”å¦‚\n- è®¿é—®å±æ€§ï¼š`obj.foo`  ï¼Œ `obj['foo']`\n   - `Proxy get`\n- `in`æ“ä½œç¬¦ï¼š`foo in obj`\n   - æ ¹æ® ECMA-262 ä¸­ï¼Œin æ“ä½œç¬¦è¿ç®—æ—¶çš„é€»è¾‘ï¼Œé€šè¿‡ `Proxy has` æ‹¦æˆª\n- éå†ï¼š`for(const key in obj)`\n   - è¿˜æ˜¯é€šè¿‡è§„èŒƒå¯çŸ¥ï¼Œä½¿ç”¨` Proxy ownKeys æ“ä½œ` å¯æ‹¦æˆª\n- åˆ é™¤æŸä¸ªå±æ€§ï¼š `delete p.foo`\n   - é€šè¿‡çœ‹è§„èŒƒå¯çŸ¥ï¼Œå¯é€šè¿‡æ‹¦æˆª `Proxy deleteProperty ` æ‹¦æˆª\n- ç­‰ç­‰ã€‚ã€‚ã€‚\n\næ‰€ä»¥ï¼Œç»“è®ºå°±æ˜¯ï¼šé¦–å…ˆéœ€è¦`æŸ¥é˜…è§„èŒƒ`ï¼Œæ‰¾åˆ°å¯æ‹¦æˆªçš„æ–¹æ³•ï¼Œå¦å¤–ä¸€äº›`å¤åˆæ“ä½œ`ï¼Œä¾èµ–äºä¸€äº›åŸºæœ¬æ“ä½œï¼Œæˆ‘ä»¬éœ€è¦åˆ†æï¼Œé€šè¿‡æ‹¦æˆª`åŸºæœ¬æ“ä½œ`ï¼Œè¾¾åˆ°`é—´æ¥æ‹¦æˆªå¤åˆæ“ä½œ`çš„ç›®çš„ã€‚\n\nå¦å¤–ï¼Œæ¯”å¦‚ æ·»åŠ ã€åˆ é™¤å±æ€§æ—¶å¯¹ `for-in`  çš„`æ‰§è¡Œæ¬¡æ•°`æœ‰å½±å“ï¼Œéœ€è¦å®šä¹‰ `const ITERATE_KEY = Symbol()`ï¼Œå³`éå†key` ä¸ å‰¯ä½œç”¨å‡½æ•°ç›¸å…³è”ï¼Œé¿å…é‡å¤æ‰§è¡Œã€‚\n\n> [!info]\n æ›´å¤šçš„å‚è€ƒä»£ç ï¼Œä¸å±•å¼€äº†ï¼ŒçœŸæ­£éœ€è¦çš„æ—¶å€™å†è¯´å§ï¼\n\n### 4.1. åˆç†çš„è§¦å‘å“åº”\n\nå¦‚ä¸‹ä»£ç ï¼šæœŸæœ›æ”¹å˜ `p.foo` æ—¶ï¼Œè§¦å‘ `effect` å‡½æ•°\n\n```javascript\nconst obj = {foo:0}\nconst p = reactive(obj);\n\neffect(() => {\n    console.log(p.foo);\n})\n\np.foo = 1;\np.foo = 2;\np.foo = 3;\n\n```\næ‰“å°å¦‚ä¸‹ï¼š\n![|256](https://832-1310531898.cos.ap-beijing.myqcloud.com/583cf5d8cf0ab1a883d7a49d63b4a3d2.png)\n\nç„¶è€Œï¼Œ`NaN === NaN` æ°¸è¿œä¸º `false` ï¼Œéœ€è¦å…¼å®¹ã€‚å¦‚ä¸‹å›¾ï¼š\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/e0dfc40ac7fec65a89882cd170810a47.png)\n\næœ€åï¼Œè®¿é—®`åŸå‹é“¾ä¸Šçš„å±æ€§`ï¼Œå¯èƒ½ä¼šå¯¼è‡´å‰¯ä½œç”¨æ‰§è¡Œä¸¤æ¬¡çš„é—®é¢˜ï¼Œä¹Ÿéœ€è¦è§£å†³ã€‚\n\n```javascript\nconst obj = {foo: 0};\nconst proto = {bar: 1};\n\nconst child = reactive(obj);\nconst parent = reactive(proto);\n\nObject.setPrototypeOf(child, parent);\n\neffect(() => {\n    console.log(child.bar);\n})\n\nchild.bar = 2;\n```\n\næ‰€ä»¥ï¼Œä»£ç†å¯¹è±¡æ˜¯ä¸€ä¸ªå¤§å·¥ç¨‹ï¼Œè¿™é‡Œä¸å±•å¼€äº†ï¼Œä»¥åçœŸæ­£æœ‰å®é™…åº”ç”¨åœºæ™¯ï¼Œå†æ¥çœ‹`æºä»£ç `ã€‚\n\n## 5. æ·±å“åº”ä¸æµ…å“åº” ã€æ·±åªè¯» ä¸ æµ…åªè¯»\n\n`æ·±æµ…`æ˜¯æŒ‡ï¼š\n- `æµ…`ä»£è¡¨`åªè¯»æˆ–åªå“åº”`å¯¹è±¡çš„`ç¬¬ä¸€å±‚`å±æ€§ï¼Œ\n- `æ·±`åˆ™ç›¸åï¼Œæˆ‘ä»¬éœ€è¦ï¼Œæˆ‘ä»¬éœ€è¦å†è¿”å›å±æ€§å€¼ï¼Œä¹‹å‰å¯¹å€¼è¿›è¡Œé€’å½’åŒ…è£…ï¼ŒåŒ…è£…æˆ`å“åº”å¼`çš„å†è¿”å›ã€‚\n\nå¦‚ä¸‹å›¾ï¼šä¿®æ”¹åµŒå¥—å†…å±‚çš„ `barå±æ€§`ï¼Œä¹Ÿåº”è¯¥è§¦å‘å‰¯ä½œç”¨å‡½æ•°\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/53a08f4b30bc2b6d8a8d9247b6de2c82.png)\næ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å†é€’å½’å†è¿”å›å±æ€§å€¼ï¼Œå¦‚ä¸‹å›¾ï¼š\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/009b93436fd03c02c033d8c930b0f27f.png)\n\nå¦‚ä¸‹ä»£ç ï¼š\n```javascript\nimport {createApp, reactive, effect,readonly} from 'vue'\nconst obj = readonly({ text1: 'text1', text2: 'text2' });\nobj.text2 = 1; // [Vue warn] Set operation on key \"text2\" failed: target is readonly\n```\næ‰§è¡Œä¼šè­¦å‘Šï¼šå¦‚ä¸‹å›¾\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/37944aa17e10affab4b6854774631b0e.png)\nå†è€…ï¼Œ`åªè¯»æ•°æ®`ä¸åº”è¯¥å’Œå‰¯ä½œç”¨å‡½æ•°`å»ºç«‹å“åº”å…³ç³»`ã€‚å¦‚ä½•å®ç°å‘¢ï¼Ÿ\n\n## 6. å¯¹äºæ•°ç»„çš„ä»£ç†\n\næ•°ç»„æ˜¯`å¼‚è´¨å¯¹è±¡`ï¼Œå› ä¸ºæ•°ç»„å¯¹è±¡çš„ `[DefineOwnproperty](/post/bf137ce405e5590ba39bee0ccd7feafe.html#DefineOwnproperty)` å†…éƒ¨æ–¹æ³•ä¸å¸¸è§„å¯¹è±¡ä¸åŒã€‚\n- é€šè¿‡`ç´¢å¼•`ç›´æ¥è®¾ç½®æ–°çš„å…ƒç´ ï¼Œå¯èƒ½ä¼š`éšå¼`çš„æ”¹å˜æ•°ç»„çš„ `length` å€¼\n- ä¿®æ”¹ `length` å€¼ï¼Œä¹Ÿå¯èƒ½ä¼šå½±å“ `å·²æœ‰å…ƒç´ `\n- `for-in`éå†å¯¹è±¡ä¸æ™®é€šå¯¹è±¡åŒºåˆ«ä¸å¤§ï¼Œå¯ä½¿ç”¨ `length` ä½œä¸ºè¿½è¸ªçš„ `key`\n- ä½¿ç”¨ `for-of` æ—¶ï¼Œä¼šè¯»å–æ•°ç»„çš„ `Symbol.iterator` çš„æ–¹æ³•ã€‚\n- å¦å¤–å¯¹äºæ•°ç»„çš„æŸ¥æ‰¾æ–¹æ³•ï¼šç”¨æˆ·å¯èƒ½ä¼šå¯¹`ä»£ç†æ•°ç»„å¯¹è±¡`è¿›è¡ŒæŸ¥æ‰¾ï¼Œå½“ç„¶ä¹Ÿå¯èƒ½å¯¹`åŸå§‹å¯¹è±¡`è¿›è¡ŒæŸ¥æ‰¾ï¼Œæ‰€ä»¥æˆ‘ä»¬`é‡å†™äº†`æ•°ç»„çš„æŸ¥æ‰¾æ–¹æ³•ã€‚\n\næ‰€ä»¥ï¼Œé¦–å…ˆï¼Œæˆ‘éœ€è¦çŸ¥é“ `è¯»å–` å’Œ `å†™å…¥` æ“ä½œéƒ½æœ‰å“ªäº›ï¼Ÿ\nå¯¹äºæ•°ç»„æ‰€æœ‰å¯èƒ½çš„`è¯»å–æ“ä½œ`æœ‰å“ªäº›ï¼Ÿ\n\n- `arr[0]`\n- length\n- for-in \n- for-of\n- ä¸æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼šå¦‚ some /find ã€includes ç­‰ç­‰\n\nå¯¹äºæ•°ç»„æ‰€æœ‰å¯èƒ½çš„`è®¾ç½®æ“ä½œ`æœ‰å“ªäº›ï¼Ÿ\n\n- `arr[0]=1`\n- `length=0`\n- æ ˆæ–¹æ³•ï¼špush popç­‰ç­‰ï¼Œå®ƒè¿˜ä¼š`éšå¼`ä¿®æ”¹ `length`\n- æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼šå¦‚ spice ã€sort  ã€fill ç­‰\n\nç„¶åï¼Œå»æŸ¥æ–‡æ¡£ï¼Œçœ‹çœ‹æ¯ä¸ªæ“ä½œåé¢çš„è°ƒç”¨é€»è¾‘æ˜¯ä»€ä¹ˆï¼Ÿå†æœ‰é’ˆå¯¹æ€§çš„å»è·Ÿè¸ªå»ºç«‹å“åº”ã€‚\nä¸ºä»€ä¹ˆæˆ‘ä»¬è¦é‡å†™` includes` ã€ `indexOf` å’Œ `lastIndexof` å‘¢ï¼Ÿ\n\n- ä»¥ includes ä¸ºä¾‹ï¼ŒæŸ¥é˜…è¯­è¨€è§„èŒƒï¼Œæˆ‘ä»¬å‘ç°\n   - è¿™ä¸ªæ–¹æ³•çš„æ‰§è¡Œæµç¨‹ä¸­ä½¿ç”¨äº†`æ•°ç»„çš„å¯¹è±¡å±æ€§çš„ä¸€é¢`å»æŸ¥æ‰¾å±æ€§ï¼Œæ‰€ä»¥ `this` æŒ‡å‘è¿™ä¸ª`å¯¹è±¡`ï¼Œæ‰€ä»¥ `reacttive(obj)` æ¯æ¬¡éƒ½å¾ˆè¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œæ‰€ä»¥ this æŒ‡å‘è‚¯å®šæœ‰é—®é¢˜ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡å†™ `includes`, å¦‚ä½•é‡å†™å‘¢ï¼Œå³ æ‹¦æˆª` arr å¯¹è±¡`çš„ `includes å±æ€§` ï¼ŒåŠçœ‹ `includes` æ˜¯å¦å­˜åœ¨äº`arrayInstrumentations`ä¸­ï¼Œå¦‚ä¸‹ä»£ç æˆªå›¾\n\n```javascript\nconst arrayInstrumentations = {}\n\n;['includes', 'indexOf', 'lastIndexOf'].forEach(method => {\n  const originMethod = Array.prototype[method]\n  arrayInstrumentations[method] = function(...args) {\n    // this æ˜¯ä»£ç†å¯¹è±¡ï¼Œå…ˆåœ¨ä»£ç†å¯¹è±¡ä¸­æŸ¥æ‰¾ï¼Œå°†ç»“æœå­˜å‚¨åˆ° res ä¸­\n    let res = originMethod.apply(this, args)\n\n    if (res === false) {\n      // res ä¸º false è¯´æ˜æ²¡æ‰¾åˆ°ï¼Œåœ¨é€šè¿‡ this.raw æ‹¿åˆ°åŸå§‹æ•°ç»„ï¼Œå†å»åŸå§‹æ•°ç»„ä¸­æŸ¥æ‰¾ï¼Œå¹¶æ›´æ–° res å€¼\n      res = originMethod.apply(this.raw, args)\n    }\n    // è¿”å›æœ€ç»ˆçš„ç»“æœ\n    return res\n  }\n})\n```\n\nä¸‹é¢çœ‹çœ‹ä¸ºä»€ä¹ˆé‡å†™ æ ˆæ–¹æ³•ï¼šå¦‚ `push`ï¼Œçœ‹ä¸‹é¢ç¤ºä¾‹ï¼š\n> ä½ å¯ä»¥æƒ³æƒ³ï¼Œè¯­è¨€è§„èŒƒé‡Œï¼Œè°ƒç”¨ `push`  è‚¯å®šæœ‰ä¸€æ­¥æ˜¯ä¿®æ”¹ `length` çš„\n\n```javascript\nconst arr = reactive([]);\n// ::::ç¬¬ä¸€ä¸ª effect\neffect(() => {\n    arr.push(1); // é—´æ¥è¯»å– length,æ‰€ä»¥ä¼šå»ºç«‹ä¾èµ–\n})\n// ::::ç¬¬äºŒä¸ª effect\neffect(() => {\n    arr.push(1); // é—´æ¥è¯»å– length,è¿˜ä¼šé—´æ¥ä¿®æ”¹ length, ç„¶åå°±æ‰§è¡Œç¬¬ ä¸€ å·²ç»å»ºç«‹å¥½çš„effectï¼Œç„¶åå°±æ­»å¾ªç¯äº†ï¼Œå¯¼è‡´æ ˆæº¢å‡º\n})\n```\nä¸Šé¢çš„ä»£ç ä¼š`æ ˆæº¢å‡º` ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯ï¼šä½¿ç”¨å…¨å±€å˜é‡ `shouldTrack` æ¥ç¦æ­¢è¿½è¸ªï¼Œæ–­å¼€ length å±æ€§ ä¸ å‰¯ä½œç”¨å‡½æ•°çš„å“åº”è”ç³»ã€‚\n```javascript\nlet shouldTrack = true\n;['push','unshift','pop'].forEach(method => {\n  const originMethod = Array.prototype[method]\n  arrayInstrumentations[method] = function(...args) {\n    shouldTrack = false\n    // è°ƒç”¨åŸå§‹æ–¹æ³•ä¹‹å‰\n    let res = originMethod.apply(this, args)\n    // è°ƒç”¨åŸå§‹æ–¹æ³•ä¹‹åï¼Œæ¢å¤ï¼Œå…è®¸è¿½è¸ª\n    shouldTrack = true\n    return res;\n  }\n})\n```\nä»¥ä¸‹ä»£ç å®ç°`ä¸è¿½è¸ª`ï¼š\n```javascript\nfunction track(target, key) {\n  if (!activeEffect || !shouldTrack) return\n}\n```\n`pop ã€ shiftã€unshift ã€splice` ç­‰æ–¹æ³•ç±»ä¼¼ã€‚\n\n## 7. å¯¹äº Set å’Œ Map çš„ä»£ç†\n\nå¯ä»¥æƒ³æƒ³ `Set` å’Œ  `Map` å¯¹åº”çš„å±æ€§å’Œæ–¹æ³•æœ‰å“ªäº›ï¼Ÿ\n\n- size clear keys  values()  entries()  ç­‰ç­‰\n\nåŒæ ·çš„ä½ è¿˜æ˜¯éœ€è¦å»æŸ¥è¯­è¨€è§„èŒƒï¼Œæ¯”å¦‚ `size` æ˜¯ä¸€ä¸ªè®¿é—®å™¨å±æ€§ï¼Œè¯­è¨€è§„èŒƒé‡Œè§„èŒƒæœ‰ `this` æ‰§è¡Œçš„æ­¥éª¤ï¼Œæ‰€ä»¥ç›´æ¥é€šè¿‡ä»£ç†å¯¹è±¡è®¿é—®ï¼Œä¼šå¯¼è‡´æŠ¥é”™ï¼Œè¿™æ—¶å€™ä½ éœ€è¦å»å…¼å®¹ï¼Œå¦‚å»æ‹¦æˆª `get()` ï¼Œç„¶å`bind` æ­£ç¡®çš„ `this å€¼`\n\nå…¶å® `delete()` ä¹Ÿæ˜¯åŒæ ·çš„é“ç†\nå¾ˆå¤šæ€è·¯ç±»ä¼¼ï¼Œæ¯”å¦‚ä»£ç†è¿­ä»£å™¨å±æ€§å’Œæ–¹æ³•ï¼Œæ¯”å¦‚ `for in`  å’Œ `foreach` ï¼Œåˆæ¯”å¦‚ éœ€è¦å»çœ‹çœ‹æ–‡æ¡£è§„èŒƒé‡Œ `entries keys å’Œ values` æ˜¯å¦‚ä½•å®šä¹‰çš„\n\nå¦å¤–éœ€è¦é¿å…æ•°æ®æ±¡æŸ“çš„é—®é¢˜ï¼Œå³æŠŠ`å“åº”å¼æ•°æ®`è®¾ç½®åˆ°`åŸå§‹æ•°æ®`ä¸Šçš„è¡Œä¸ºã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å“åº”å¼å¯¹è±¡çš„ `row`å±æ€§æ¥è®¿é—®`åŸå§‹å¯¹è±¡`\n\nOKï¼Œå°±åˆ°è¿™å„¿å§ï¼Œå…¶å®å·²ç»æœ‰ä¸€ä¸ªå¾ˆç°æˆçš„åº“ä¾›æˆ‘ä»¬ä½¿ç”¨äº†ï¼Œå¦‚æœæŸä¸€å¤©çœŸæ­£éœ€è¦ç”¨åˆ°ï¼Œæˆ–è€…éœ€è¦ä»”ç»†ç ”ç©¶ï¼Œé‚£ä¹ˆå»çœ‹çœ‹ `@vue/reactivity` æˆ–è€…çœ‹çœ‹æœ¬ä¹¦çš„é™„ä»¶æºç å§\n\n","1fad285c47a05d63ba58bf0cfbaa8fb3":"\n# å‰è¨€\n\n\n","12e95d03e4965e39afc487053ddef2ab":"\n# useEffect çš„ä½¿ç”¨åŠæ³¨æ„äº‹é¡¹\n\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åŸºæœ¬æ¦‚å¿µ \n\n`useEffect` æ˜¯ React ä¸­ç”¨äºå¤„ç†å‰¯ä½œç”¨çš„ Hookã€‚`å‰¯ä½œç”¨`åŒ…æ‹¬ï¼š\n- æ•°æ®è·å–ï¼ˆAPI è°ƒç”¨ï¼‰\n- è®¢é˜…\n- DOM æ‰‹åŠ¨ä¿®æ”¹\n\t- ä¿®æ”¹æ ‡é¢˜\n- äº‹ä»¶ç›‘å¬\n- å®šæ—¶å™¨\n- æ—¥å¿—è®°å½•ç­‰\n\n## 2. åŸºæœ¬è¯­æ³•\n\n```jsx \nuseEffect(() => {\n  // å‰¯ä½œç”¨ä»£ç \n  \n  return () => {\n    // æ¸…ç†å‡½æ•°\n  };\n  \n}, [dependencies]);\n```\n\n## 3. è¯¦ç»†ç¤ºä¾‹\n\nè®©æˆ‘é€šè¿‡å‡ ä¸ªå…·ä½“çš„ä¾‹å­æ¥è¯´æ˜ `useEffect` çš„ä¸åŒä½¿ç”¨åœºæ™¯ï¼š\n\n````jsx hl:9,30,44,56\nimport React, { useState, useEffect } from \"react\";\n\nconst EffectExamples = () => {\n  const [count, setCount] = useState(0);\n  const [data, setData] = useState(null);\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n  const [timer, setTimer] = useState(0);\n\n  // 1. åŸºç¡€æ•ˆæœï¼šæ¯æ¬¡ count æ”¹å˜æ—¶æ‰§è¡Œ\n  useEffect(() => {\n    console.log(\"Count changed:\", count);\n    document.title = `Count is ${count}`;\n  }, [count]);\n\n  // 2. æ¨¡æ‹Ÿæ•°æ®è·å–\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // æ¨¡æ‹Ÿ API è°ƒç”¨\n        const response = await new Promise((resolve) =>\n          setTimeout(() => resolve({ data: \"æ¨¡æ‹Ÿæ•°æ®\" }), 1000),\n        );\n        setData(response.data);\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n      }\n    };\n\n    fetchData();\n  }, []); // ç©ºä¾èµ–æ•°ç»„ï¼Œåªåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡\n\n  // 3. äº‹ä»¶ç›‘å¬å™¨ç¤ºä¾‹\n  useEffect(() => {\n    const handleResize = () => {\n      setWindowWidth(window.innerWidth);\n    };\n\n    window.addEventListener(\"resize\", handleResize);\n\n    // æ¸…ç†å‡½æ•°\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []); // ç©ºä¾èµ–æ•°ç»„ï¼Œä½†åŒ…å«æ¸…ç†å‡½æ•°\n\n  // 4. å®šæ—¶å™¨ç¤ºä¾‹\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      setTimer((prev) => prev + 1);\n    }, 1000);\n\n    // æ¸…ç†å‡½æ•°\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, []); // ç©ºä¾èµ–æ•°ç»„ï¼Œä½†åŒ…å«æ¸…ç†å‡½æ•°\n\n  return (\n    <div className=\"p-4 space-y-4\">\n      <div className=\"border p-4 rounded\">\n        <h2 className=\"text-xl mb-2\">è®¡æ•°å™¨æ•ˆæœ</h2>\n        <p>å½“å‰è®¡æ•°: {count}</p>\n        <button\n          className=\"bg-blue-500 text-white px-4 py-2 rounded\"\n          onClick={() => setCount((c) => c + 1)}\n        >\n          å¢åŠ è®¡æ•°\n        </button>\n      </div>\n\n      <div className=\"border p-4 rounded\">\n        <h2 className=\"text-xl mb-2\">æ•°æ®è·å–æ•ˆæœ</h2>\n        <p>è·å–çš„æ•°æ®: {data || \"åŠ è½½ä¸­...\"}</p>\n      </div>\n\n      <div className=\"border p-4 rounded\">\n        <h2 className=\"text-xl mb-2\">çª—å£å¤§å°ç›‘å¬</h2>\n        <p>å½“å‰çª—å£å®½åº¦: {windowWidth}px</p>\n      </div>\n\n      <div className=\"border p-4 rounded\">\n        <h2 className=\"text-xl mb-2\">å®šæ—¶å™¨æ•ˆæœ</h2>\n        <p>è®¡æ—¶å™¨: {timer}ç§’</p>\n      </div>\n    </div>\n  );\n};\n\nexport default EffectExamples;\n\n````\n\n## 4. ä¾èµ–æ•°ç»„çš„ä½¿ç”¨è§„åˆ™\n\n### 4.1. **ç©ºä¾èµ–æ•°ç»„ `[]`**\n\n   - æ•ˆæœåªåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡\n   ```jsx\n   useEffect(() => {\n     console.log('ç»„ä»¶æŒ‚è½½');\n   }, []);\n   ```\n\n### 4.2. **æœ‰ä¾èµ–çš„æ•°ç»„ `[dep1, dep2]`**\n\n   - å½“ä¾èµ–é¡¹æ”¹å˜æ—¶æ‰§è¡Œ\n   ```jsx\n   useEffect(() => {\n     console.log('ä¾èµ–é¡¹æ”¹å˜');\n   }, [dep1, dep2]);\n   ```\n\n#### 4.2.1. **æ²¡æœ‰ä¾èµ–æ•°ç»„**\n\n   - æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œ\n   ```jsx\n   useEffect(() => {\n     console.log('æ¯æ¬¡æ¸²æŸ“');\n   });\n   ```\n\n## 5. æ¸…ç†å‡½æ•°ï¼ˆCleanupï¼‰\n\nuseEffect çš„æ¸…ç†å‡½æ•°ï¼ˆCleanup Functionï¼‰æœ‰å‡ ä¸ªé‡è¦çš„æ‰§è¡Œæ—¶æœºï¼Œè®©æˆ‘é€šè¿‡å…·ä½“ç¤ºä¾‹æ¥è¯¦ç»†è¯´æ˜ï¼š\n\n### 5.1. **ç»„ä»¶å¸è½½æ—¶**\n\n```jsx\nuseEffect(() => {\n  console.log('ç»„ä»¶æŒ‚è½½');\n  return () => {\n    console.log('ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œæ¸…ç†'); // å½“ç»„ä»¶è¢«ç§»é™¤æ—¶æ‰§è¡Œ\n  };\n}, []);\n```\n- å½“ç»„ä»¶è¢«å®Œå…¨ä» DOM ä¸­ç§»é™¤æ—¶æ‰§è¡Œ\n- é€‚ç”¨äºæ¸…ç†è®¢é˜…ã€å®šæ—¶å™¨ç­‰æŒä¹…æ€§çš„å‰¯ä½œç”¨\n\n### 5.2. **ä¾èµ–é¡¹å˜åŒ–æ—¶**\n\n```jsx\nuseEffect(() => {\n  console.log(`count å€¼: ${count}`);\n  return () => {\n    // åœ¨ä¸‹ä¸€æ¬¡ effect æ‰§è¡Œå‰ï¼Œä¼šå…ˆæ‰§è¡Œä¸Šä¸€æ¬¡çš„æ¸…ç†å‡½æ•°\n    console.log(`æ¸…ç† count æ—§å€¼: ${count}`);\n  };\n}, [count]);\n```\n\næ‰§è¡Œé¡ºåºï¼š\n\n1. é¦–æ¬¡æ¸²æŸ“ï¼šæ‰§è¡Œ effect\n2. count æ›´æ–°æ—¶ï¼š\n   - å…ˆæ‰§è¡Œä¸Šä¸€æ¬¡çš„æ¸…ç†å‡½æ•°\n   - ç„¶åæ‰§è¡Œæ–°çš„ effect\n\n### 5.3. **æ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶**\n\n```jsx\nuseEffect(() => {\n  console.log('æ¸²æŸ“åæ‰§è¡Œ');\n  return () => {\n    console.log('ä¸‹ä¸€æ¬¡æ¸²æŸ“å‰æ‰§è¡Œæ¸…ç†');\n  };\n}); // æ²¡æœ‰ä¾èµ–æ•°ç»„\n```\n\n- æ¯æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“éƒ½ä¼šè§¦å‘\n- æ¸…ç†å‡½æ•°åœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“å‰æ‰§è¡Œ\n\n### 5.4. **å¸¸è§çš„æ¸…ç†åœºæ™¯**\n\n#### 5.4.1. **æ¸…ç†å®šæ—¶å™¨**\n\n```jsx\nuseEffect(() => {\n  const timer = setInterval(() => {\n    // å®šæ—¶å™¨é€»è¾‘\n  }, 1000);\n\n  return () => {\n    clearInterval(timer); // é˜²æ­¢å†…å­˜æ³„æ¼\n  };\n}, []);\n```\n\n#### 5.4.2. **å–æ¶ˆäº‹ä»¶ç›‘å¬**\n\n```jsx\nuseEffect(() => {\n  const handleScroll = () => {\n    // æ»šåŠ¨å¤„ç†é€»è¾‘\n  };\n  window.addEventListener('scroll', handleScroll);\n\n  return () => {\n    window.removeEventListener('scroll', handleScroll);\n  };\n}, []);\n```\n\n#### 5.4.3. **å–æ¶ˆè®¢é˜…**\n```jsx\nuseEffect(() => {\n  const subscription = someService.subscribe();\n  return () => {\n    subscription.unsubscribe();\n  };\n}, []);\n```\n\n### 5.5. **æ‰§è¡Œé¡ºåºçš„é‡è¦è¯´æ˜**\n\n- **æŒ‚è½½æ—¶**ï¼š\n\t  1. æ¸²æŸ“ç»„ä»¶\n\t  2. æ‰§è¡Œ effect\n- **æ›´æ–°æ—¶**ï¼š\n\t  1. æ¸²æŸ“ç»„ä»¶\n\t  2. æ‰§è¡Œä¸Šä¸€æ¬¡çš„æ¸…ç†å‡½æ•°\n\t  3. æ‰§è¡Œæ–°çš„ effect\n- **å¸è½½æ—¶**ï¼š\n\t  1. æ‰§è¡Œæ¸…ç†å‡½æ•°\n\t  2. ç§»é™¤ç»„ä»¶\n\n### 5.6. **æ³¨æ„äº‹é¡¹**\n\n#### 5.6.1. **é—­åŒ…é™·é˜±**\n\n```jsx\nuseEffect(() => {\n  const timer = setInterval(() => {\n    // è¿™é‡Œçš„ count ä¼šè¢«\"é—­åŒ…\"æ•è·\n    console.log(count);\n  }, 1000);\n\n  return () => clearInterval(timer);\n}, []); // éœ€è¦æ·»åŠ  count ä½œä¸ºä¾èµ–ï¼Œå¦åˆ™ä¼šå‡ºç°é—­åŒ…é—®é¢˜\n```\n\n#### 5.6.2. **æ¸…ç†å‡½æ•°çš„è¿”å›å€¼**\n```jsx\nuseEffect(() => {\n  // æ¸…ç†å‡½æ•°å¿…é¡»è¿”å› undefined\n  return () => {\n    // æ¸…ç†é€»è¾‘\n  };\n  // ä¸è¦è¿”å›å…¶ä»–å€¼\n}, []);\n```\n\n#### 5.6.3. **å¼‚æ­¥æ¸…ç†å‡½æ•°**\n\n```jsx hl:2\nuseEffect(() => {\n  // æ¸…ç†å‡½æ•°ä¸èƒ½æ˜¯å¼‚æ­¥çš„\n  return () => {\n    // è¿™æ˜¯æ­£ç¡®çš„\n    cleanup();\n  };\n\n  // è¿™æ˜¯é”™è¯¯çš„\n  // return async () => {\n  //   await cleanup();\n  // };\n}, []);\n```\n\n### 5.7. **æœ€ä½³å®è·µ**\n\n- å§‹ç»ˆè¿”å›æ¸…ç†å‡½æ•°æ¥é˜²æ­¢å†…å­˜æ³„æ¼\n- ç¡®ä¿æ¸…ç†å‡½æ•°æ¸…ç†äº†æ‰€æœ‰å‰¯ä½œç”¨\n- åœ¨å¼€å‘æ—¶ä½¿ç”¨ React DevTools æ£€æŸ¥æ˜¯å¦æœ‰é—æ¼çš„æ¸…ç†\n- ä½¿ç”¨ ESLint çš„ exhaustive-deps è§„åˆ™ç¡®ä¿ä¾èµ–é¡¹æ­£ç¡®\n- æµ‹è¯•ç»„ä»¶çš„æŒ‚è½½ã€æ›´æ–°å’Œå¸è½½åœºæ™¯\n\né€šè¿‡æ­£ç¡®ç†è§£å’Œä½¿ç”¨æ¸…ç†å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š\n\n- é˜²æ­¢å†…å­˜æ³„æ¼\n- ç¡®ä¿çŠ¶æ€æ›´æ–°çš„æ­£ç¡®æ€§\n- æé«˜åº”ç”¨æ€§èƒ½\n- é¿å…å‰¯ä½œç”¨ç›¸å…³çš„ bug\n\n## 6. å¸¸è§é™·é˜±å’Œæ³¨æ„äº‹é¡¹\n\n### 6.1. **æ— é™å¾ªç¯**\n\n```jsx\n// é”™è¯¯ç¤ºä¾‹\nuseEffect(() => {\n  setCount(count + 1); // è¿™ä¼šå¯¼è‡´æ— é™å¾ªç¯\n}, [count]);\n```\n\n### 6.2. **ç«æ€æ¡ä»¶**\n\nè§ä¸‹é¢\n\n### 6.3. **ä¾èµ–é¡¹å¤„ç†**\n\néœ€è¦ åŒ…å«æ‰€æœ‰ä½¿ç”¨çš„å¤–éƒ¨å˜é‡ï¼Œå¦‚ä¸‹ï¼š\n\n```jsx\n// æ­£ç¡®çš„ä¾èµ–é¡¹å¤„ç†\nuseEffect(() => {\n  const handler = (e) => {\n    if (e.key === 'Enter') {\n      callback();\n    }\n  };\n  \n  window.addEventListener('keydown', handler);\n  return () => window.removeEventListener('keydown', handler);\n}, [callback]); // åŒ…å«æ‰€æœ‰ä½¿ç”¨çš„å¤–éƒ¨å˜é‡\n```\n\n## 7. ä½¿ç”¨åœºæ™¯æ€»ç»“\n\n1. **æ•°æ®è·å–**\n   - API è°ƒç”¨\n   - æ•°æ®è®¢é˜…\n2. **DOM æ“ä½œ**\n   - ä¿®æ”¹æ ‡é¢˜\n   - ç®¡ç†ç„¦ç‚¹\n   - æ“ä½œ canvas\n3. **è®¢é˜…/ç›‘å¬**\n   - äº‹ä»¶ç›‘å¬\n   - WebSocket è¿æ¥\n   - ç¬¬ä¸‰æ–¹åº“è®¢é˜…\n4. **å®šæ—¶ä»»åŠ¡**\n   - å®šæ—¶å™¨\n   - è½®è¯¢\n5. **ä¸å…¶ä»–ç³»ç»Ÿé›†æˆ**\n   - ç¬¬ä¸‰æ–¹åº“åˆå§‹åŒ–\n   - å¤–éƒ¨ç³»ç»ŸåŒæ­¥\n\n## 8. useEffect ä¸­çš„ç«æ€æ¡ä»¶ï¼ˆRace Conditionï¼‰é—®é¢˜\n\nç«æ€æ¡ä»¶æ˜¯æŒ‡å½“å¤šä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœä»¥ä¸å¯é¢„æµ‹çš„é¡ºåºè¿”å›æ—¶å¯èƒ½å¯¼è‡´çš„é—®é¢˜ã€‚\n\n### 8.1. **é—®é¢˜åœºæ™¯**\n\n```jsx\n// æœ‰é—®é¢˜çš„ä»£ç \nuseEffect(() => {\n  const fetchData = async () => {\n    const data = await fetchUserData(userId);\n    setUserData(data); // å¯èƒ½è®¾ç½®é”™è¯¯çš„æ•°æ®\n  };\n  fetchData();\n}, [userId]);\n```\n\né—®é¢˜åœ¨äºï¼š\n- ç”¨æˆ·`å¿«é€Ÿåˆ‡æ¢ userId`ï¼ˆæ¯”å¦‚è¿ç»­ç‚¹å‡»æŒ‰é’®ï¼‰\n- å¤šä¸ªè¯·æ±‚è¢«å‘å‡ºï¼Œä½†è¿”å›é¡ºåºä¸ç¡®å®š\n- å¯èƒ½åå‘å‡ºçš„è¯·æ±‚å…ˆè¿”å›ï¼Œè€Œå…ˆå‘å‡ºçš„è¯·æ±‚åè¿”å›\n- å¯¼è‡´æ˜¾ç¤ºçš„æ˜¯æ—§çš„è¯·æ±‚ç»“æœï¼Œè€Œä¸æ˜¯æœ€æ–°çš„\n\n### 8.2. **åŸºæœ¬è§£å†³æ–¹æ¡ˆ**\n\n```jsx\nuseEffect(() => {\n  let isMounted = true;\n\n  const fetchData = async () => {\n    const data = await fetchUserData(userId);\n    if (isMounted) {\n      setUserData(data);\n    }\n  };\n\n  fetchData();\n\n  return () => {\n    isMounted = false;\n  };\n}, [userId]);\n```\n\nè¿™ä¸ªæ–¹æ¡ˆï¼š\n- ä½¿ç”¨ `isMounted` æ ‡å¿—è¿½è¸ªç»„ä»¶æ˜¯å¦ä»ç„¶æŒ‚è½½\n- åœ¨è®¾ç½®çŠ¶æ€å‰æ£€æŸ¥ç»„ä»¶æ˜¯å¦ä»ç„¶æŒ‚è½½\n- åœ¨`æ¸…ç†å‡½æ•°`ä¸­å°†æ ‡å¿—è®¾ä¸º `false`\n\n### 8.3. **æœ€ä½³å®è·µæ–¹æ¡ˆï¼ˆä½¿ç”¨ AbortControllerï¼‰**\n\n```jsx hl:20\nuseEffect(() => {\n  const abortController = new AbortController();\n\n  const fetchData = async () => {\n    try {\n      const data = await fetchUserData(userId);\n      if (!abortController.signal.aborted) {\n        setUserData(data);\n      }\n    } catch (error) {\n      if (!abortController.signal.aborted) {\n        setError(error);\n      }\n    }\n  };\n\n  fetchData();\n\n  return () => {\n    abortController.abort();\n  };\n}, [userId]);\n```\n\nè¿™ä¸ªæ–¹æ¡ˆçš„ä¼˜ç‚¹ï¼š\n- å¯ä»¥çœŸæ­£å–æ¶ˆè¿›è¡Œä¸­çš„è¯·æ±‚\n- æ›´å¥½çš„é”™è¯¯å¤„ç†\n- æ›´å®Œæ•´çš„çŠ¶æ€ç®¡ç†ï¼ˆloadingã€error çŠ¶æ€ï¼‰\n\n### 8.4. **å…¶ä»–è§£å†³æ–¹æ¡ˆ**\n\n#### 8.4.1. ä½¿ç”¨é˜²æŠ–/èŠ‚æµ\n\n```jsx\nimport { debounce } from 'lodash';\n\nuseEffect(() => {\n  const debouncedFetch = debounce(async () => {\n    const data = await fetchUserData(userId);\n    setUserData(data);\n  }, 300);\n\n  debouncedFetch();\n\n  return () => {\n    debouncedFetch.cancel();\n  };\n}, [userId]);\n```\n\n#### 8.4.2. ä½¿ç”¨æ•°æ®è·å–åº“ï¼šuseQuery\n\n```jsx\n// ä½¿ç”¨ React Query\nconst { data, isLoading } = useQuery(\n  ['user', userId],\n  () => fetchUserData(userId)\n);\n```\n\n### 8.5. **æœ€ä½³å®è·µå»ºè®®**\n\n- å§‹ç»ˆå®ç°æ¸…ç†å‡½æ•°\n- è€ƒè™‘ä½¿ç”¨ `AbortController` å–æ¶ˆè¯·æ±‚\n- é€‚å½“çš„é”™è¯¯å¤„ç†\n- è€ƒè™‘ä½¿ç”¨ä¸“é—¨çš„æ•°æ®è·å–åº“ï¼ˆå¦‚ `React Query, SWR`ï¼‰\n- å®ç°åŠ è½½çŠ¶æ€å’Œé”™è¯¯çŠ¶æ€\n- è€ƒè™‘ä½¿ç”¨é˜²æŠ–/èŠ‚æµæ¥é™åˆ¶è¯·æ±‚é¢‘ç‡\n\né€šè¿‡æ­£ç¡®å¤„ç†ç«æ€æ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š\n- é¿å…æ˜¾ç¤ºè¿‡æœŸçš„æ•°æ®\n- é˜²æ­¢å†…å­˜æ³„æ¼\n- æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ\n- å‡å°‘ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚\n\nè¿™ä¸ªé—®é¢˜åœ¨å®é™…å¼€å‘ä¸­ç»å¸¸é‡åˆ°ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†æœç´¢ã€åˆ†é¡µã€ç­›é€‰ç­‰åŠŸèƒ½æ—¶ï¼Œæ­£ç¡®å¤„ç†ç«æ€æ¡ä»¶æ˜¯å¾ˆé‡è¦çš„ã€‚","4a1cbdf4c2eb55febfe2c722d8465276":"\n# React çš„ Capture Valueï¼ˆæ•è·å€¼ï¼‰ç‰¹æ€§\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å®šä¹‰ä¸è¦ç‚¹ \n\n- åŸå› ï¼šCapture Value æ˜¯ React çš„é‡è¦ç‰¹æ€§ï¼Œ**æ¯æ¬¡æ¸²æŸ“éƒ½æœ‰å…¶ç‹¬ç«‹çš„ props å’Œ state**\n- å¦‚ä½•è§„é¿\n\t- ä½¿ç”¨`å‡½æ•°å¼æ›´æ–°`å¯ä»¥é¿å…é—­åŒ…é™·é˜±\n\t- `useRef` å¯ä»¥ç”¨æ¥ä¿å­˜æœ€æ–°å€¼\n\t- ä¾èµ–æ•°ç»„**éœ€è¦åŒ…å«æ‰€æœ‰ä¼šå˜åŒ–çš„å€¼**\n\t- `useCallback` å’Œ `useMemo` å¯ä»¥å¸®åŠ©æ§åˆ¶å‡½æ•°å’Œå€¼çš„æ•è·è¡Œä¸º\n\n## 2. åŸºæœ¬æ¦‚å¿µ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241030.png)\n\n```jsx hl:6\nimport React, { useState } from \"react\";\nfunction Counter() {\n  const [count, setCount] = useState(0);\n\n  // ç‚¹å‡»æŒ‰é’®ï¼Œ3 ç§’åå¼¹å‡ºå½“å‰ count å€¼\n  // ä½†æ˜¯ç”±äº setTimeout æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥ä¼šæ•è·å½“æ—¶çš„ count å€¼\n  const handleClick = () => {\n    setTimeout(() => {\n      alert(count); // ä¼šæ•è·å½“æ—¶çš„ count å€¼\n    }, 3000);\n  };\n\n  return (\n    <div>\n      <p>å½“å‰è®¡æ•°: {count}</p>\n      <button onClick={() => setCount(count + 1)}>+1</button>\n      <button onClick={handleClick}>æ˜¾ç¤ºè®¡æ•°</button>\n    </div>\n  );\n}\n\nexport default Counter;\n\n```\n\n## 3. é—­åŒ…é™·é˜±ç¤ºä¾‹\n\n```javascript hl:6\nfunction Counter() {\n  const [count, setCount] = useState(0);\n  \n  useEffect(() => {\n    const id = setInterval(() => {\n      // è¿™é‡Œçš„ count æ°¸è¿œæ˜¯åˆå§‹å€¼ 0\n      setCount(count + 1);\n    }, 1000);\n    \n    return () => clearInterval(id);\n  }, []); // ç©ºä¾èµ–æ•°ç»„\n  \n  return <h1>{count}</h1>;\n}\n```\n\n## 4. æ­£ç¡®çš„æ›´æ–°æ–¹å¼\n\n```javascript hl:6\nfunction Counter() {\n  const [count, setCount] = useState(0);\n  \n  useEffect(() => {\n    const id = setInterval(() => {\n      // ä½¿ç”¨å‡½æ•°å¼æ›´æ–°\n      setCount(c => c + 1);\n    }, 1000);\n    \n    return () => clearInterval(id);\n  }, []); // ç©ºä¾èµ–æ•°ç»„æ˜¯å®‰å…¨çš„\n  \n  return <h1>{count}</h1>;\n}\n```\n\n## 5. äº‹ä»¶å¤„ç†ä¸­çš„ Capture Value\n\n```javascript\nfunction Example() {\n  const [message, setMessage] = useState('');\n  \n  const showMessage = () => {\n    alert('ä½ è¾“å…¥äº†: ' + message);\n  };\n  \n  const handleClick = () => {\n    setTimeout(showMessage, 3000);\n  };\n  \n  return (\n    <div>\n      <input value={message} onChange={e => setMessage(e.target.value)} />\n      <button onClick={handleClick}>3ç§’åæ˜¾ç¤º</button>\n    </div>\n  );\n}\n```\n\n## 6. ä½¿ç”¨ ref é¿å… Capture Value\n\n```javascript hl:3,12,11\nfunction Example() {\n  const [message, setMessage] = useState('');\n  const latestMessage = useRef('');\n  \n  // æ›´æ–° ref\n  useEffect(() => {\n    latestMessage.current = message;\n  }, [message]);\n  \n  const showMessage = () => {\n    // ä½¿ç”¨ ref è·å–æœ€æ–°å€¼\n    alert('ä½ è¾“å…¥äº†: ' + latestMessage.current);\n  };\n  \n  const handleClick = () => {\n    setTimeout(showMessage, 3000);\n  };\n  \n  return (\n    <div>\n      <input value={message} onChange={e => setMessage(e.target.value)} />\n      <button onClick={handleClick}>3ç§’åæ˜¾ç¤º</button>\n    </div>\n  );\n}\n```\n\n## 7. ä¾èµ–æ•°ç»„ä¸­çš„ Capture Value\n\n```javascript\nfunction SearchResults() {\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState([]);\n  \n  useEffect(() => {\n    // è¿™ä¸ªæ•ˆæœä¼šæ•è·ç‰¹å®šçš„ query å€¼\n    const fetchData = async () => {\n      const response = await fetch(`/api/search?q=${query}`);\n      const data = await response.json();\n      setResults(data);\n    };\n    \n    fetchData();\n  }, [query]); // query æ”¹å˜æ—¶é‡æ–°è¿è¡Œ\n  \n  return (\n    <div>\n      <input value={query} onChange={e => setQuery(e.target.value)} />\n      <ul>\n        {results.map(result => (\n          <li key={result.id}>{result.title}</li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n```\n\n## 8. å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ\n\n```javascript hl:18,9\n// é—®é¢˜ï¼šåœ¨å¾ªç¯ä¸­ä½¿ç”¨å¼‚æ­¥æ“ä½œ\nfunction App() {\n  const [count, setCount] = useState(0);\n  \n  // é”™è¯¯ç¤ºä¾‹\n  const handleClick = () => {\n    for (let i = 0; i < 5; i++) {\n      setTimeout(() => {\n         // æ²¡ä½¿ç”¨ å‡½æ•°å¼æ›´æ–°\n        setCount(count + 1); // æ¯æ¬¡éƒ½ä½¿ç”¨ç›¸åŒçš„ count å€¼\n      }, i * 1000);\n    }\n  };\n  \n  // æ­£ç¡®ç¤ºä¾‹\n  const handleClickCorrect = () => {\n    for (let i = 0; i < 5; i++) {\n      setTimeout(() => {\n\t      // ä½¿ç”¨å‡½æ•°å¼æ›´æ–°\n        setCount(c => c + 1); \n      }, i * 1000);\n    }\n  };\n  \n  return <button onClick={handleClickCorrect}>{count}</button>;\n}\n```\n\n## 9. ä½¿ç”¨ useCallback å¤„ç† Capture Value\n\n```javascript hl:4\nfunction Example() {\n  const [count, setCount] = useState(0);\n  \n  // æ¯æ¬¡ count æ”¹å˜æ—¶éƒ½ä¼šåˆ›å»ºæ–°çš„å›è°ƒ\n  const handleClick = useCallback(() => {\n    console.log(`Count is: ${count}`);\n  }, [count]);\n  \n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={() => setCount(count + 1)}>Increment</button>\n      <button onClick={handleClick}>Log count</button>\n    </div>\n  );\n}\n```\n\n## 10. å®é™…åº”ç”¨åœºæ™¯\n\n```javascript hl:5\nfunction ChatRoom() {\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  \n  // ä½¿ç”¨ useCallback ç¡®ä¿å‡½æ•°å¼•ç”¨ç¨³å®š\n  const sendMessage = useCallback(() => {\n    const messageToSend = newMessage; // æ•è·å½“å‰çš„æ¶ˆæ¯\n    setNewMessage(''); // æ¸…ç©ºè¾“å…¥\n    \n    // å¼‚æ­¥å‘é€æ¶ˆæ¯\n    api.sendMessage(messageToSend).then(() => {\n      setMessages(msgs => [...msgs, messageToSend]);\n    });\n  }, [newMessage]);\n  \n  return (\n    <div>\n      <input\n        value={newMessage}\n        onChange={e => setNewMessage(e.target.value)}\n      />\n      <button onClick={sendMessage}>å‘é€</button>\n      <div>\n        {messages.map((msg, index) => (\n          <div key={index}>{msg}</div>\n        ))}\n      </div>\n    </div>\n  );\n}\n```\n\n","60bfbed3b23b57f49855be4991b90bac":"\n# åˆ—ä¸¾ React é‡æ–°æ¸²æŸ“çš„åœºæ™¯ä»¥åŠå¯¹åº”çš„ä¼˜åŒ–æ–¹æ¡ˆ\n\n\n`#React` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å…³é”®ä¼˜åŒ–æ€è·¯ \n\n1. å‡å°‘æ¸²æŸ“èŒƒå›´ï¼š\n    - çŠ¶æ€ä¸‹ç§»\n    - ç»„ä»¶æ‹†åˆ†\n    - ä½¿ç”¨ React.memo\n2. ç¨³å®šåŒ–æ•°æ®å’Œå›è°ƒï¼š\n    - useCallback\n    - useMemo\n    - useReducer\n    - æå–é™æ€æ•°æ®\n3. ä¼˜åŒ–æ•°æ®æµï¼š\n    - åˆç†çš„çŠ¶æ€ç®¡ç†\n    - Context æ‹†åˆ†\n    - æ‰¹é‡æ›´æ–°\n4. æ€§èƒ½ç›‘æµ‹ï¼š\n    - React DevTools Profiler\n    - æ€§èƒ½ç›‘æ§\n    - ä»£ç åˆ†å‰²\n\n## 2. é‡å¤æ¸²æŸ“åœºæ™¯åŠè§£å†³æ€è·¯\n\n- State å˜åŒ–è§¦å‘é‡æ–°æ¸²æŸ“\n\t- åˆå¹¶çŠ¶æ€æ›´æ–°\n\t- ä½¿ç”¨ useReducer ç®¡ç†å¤æ‚çŠ¶æ€\n- Props å˜åŒ–è§¦å‘å­ç»„ä»¶é‡æ–°æ¸²æŸ“\n\t- ä½¿ç”¨ React.memo åŒ…è£…ç»„ä»¶\n\t- ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—å±æ€§\n\t- ä½¿ç”¨ useCallback ç¼“å­˜å›è°ƒå‡½æ•°\n- çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“å¯¼è‡´å­ç»„ä»¶é‡æ–°æ¸²æŸ“\n\t- ç»„ä»¶æ‹†åˆ†ï¼Œå°†å˜åŒ–éƒ¨åˆ†éš”ç¦»\n\t- ä½¿ç”¨ React.memo é˜»æ­¢ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“\n- Context å˜åŒ–è§¦å‘æ¶ˆè´¹ç»„ä»¶é‡æ–°æ¸²æŸ“\n\t- æ‹†åˆ† Context\n\t- ä½¿ç”¨ useMemo ç¼“å­˜ Context å€¼\n- åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–\n\t- ä½¿ç”¨ç¨³å®šçš„ key\n\t- è™šæ‹Ÿåˆ—è¡¨ï¼š- è™šæ‹Ÿåˆ—è¡¨ï¼ˆreact-window æˆ– react-virtualizedï¼‰\n\t- åˆ†é¡µæˆ–æ— é™æ»šåŠ¨\n- äº‹ä»¶å¤„ç†å‡½æ•°ä¼˜åŒ–ï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°çš„å‡½æ•°\n\t- ä½¿ç”¨ useCallback\n\t-  ä½¿ç”¨ ref å­˜å‚¨å‡½æ•°ï¼Œè¿™æ˜¯é™æ€çš„ï¼Œå°±ä¸ä¼šæ¯æ¬¡éƒ½åˆ›å»ºæ–°å‡½æ•°\n- å¼‚æ­¥æ“ä½œå’Œå‰¯ä½œç”¨ä¼˜åŒ–\n\t- ä½¿ç”¨ AbortController å–æ¶ˆè¯·æ±‚\n\t- ä½¿ç”¨ç¼“å­˜\n\t- è€ƒè™‘ä½¿ç”¨ React Query æˆ– SWR ç­‰æ•°æ®ç®¡ç†åº“\n- å¼ºåˆ¶é‡æ–°æ¸²æŸ“ï¼š`const [, forceUpdate] = useReducer(x => x + 1, 0);`\n\n## 3. ä½¿ç”¨ React DevTools åˆ†ææ¸²æŸ“\n\n```jsx\n// ä½¿ç”¨ React Profiler ç»„ä»¶åŒ…è£¹éœ€è¦åˆ†æçš„éƒ¨åˆ†\nfunction App() {\n  return (\n    <Profiler id=\"App\" onRender={onRenderCallback}>\n      <YourComponent />\n    </Profiler>\n  );\n}\n\nfunction onRenderCallback(\n  id, // å‘ç”Ÿæäº¤çš„ Profiler æ ‘çš„ \"id\"\n  phase, // \"mount\" ï¼ˆé¦–æ¬¡æ¸²æŸ“ï¼‰æˆ– \"update\" ï¼ˆé‡æ–°æ¸²æŸ“ï¼‰\n  actualDuration, // æœ¬æ¬¡æ›´æ–°èŠ±è´¹çš„æ¸²æŸ“æ—¶é—´\n  baseDuration, // ä¼°è®¡ä¸ä½¿ç”¨ memoization çš„æƒ…å†µä¸‹æ¸²æŸ“æ•´é¢—å­æ ‘éœ€è¦çš„æ—¶é—´\n  startTime, // æœ¬æ¬¡æ›´æ–°å¼€å§‹æ¸²æŸ“çš„æ—¶é—´\n  commitTime, // æœ¬æ¬¡æ›´æ–°è¢«æäº¤çš„æ—¶é—´\n  interactions // å±äºæœ¬æ¬¡æ›´æ–°çš„ interactions çš„é›†åˆ\n) {\n  // åœ¨è¿™é‡Œè¿›è¡Œæ€§èƒ½åˆ†æ\n}\n```","5d56a820540b53959269f2ba7e1fda30":"\n# React.memo å’Œ useMemo çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼ŸReact.useCallback å’Œ useCallback å‘¢ï¼Ÿ\n\n\nè®©æˆ‘è¯¦ç»†è§£é‡Šè¿™äº› React hooks å’Œæ–¹æ³•çš„åŒºåˆ«ï¼š\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. React.useCallback å’Œ useCallback \n\nå®é™…ä¸Šå®ƒä»¬æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼è¿™åªæ˜¯å¼•ç”¨æ–¹å¼çš„ä¸åŒï¼š\n\n```javascript\n// æ–¹å¼ 1ï¼šä» React å¯¹è±¡ä¸­è§£æ„\nimport { useCallback } from 'react';\nconst memoizedFn = useCallback(() => {}, []);\n\n// æ–¹å¼ 2ï¼šé€šè¿‡ React å¯¹è±¡è°ƒç”¨\nimport React from 'react';\nconst memoizedFn = React.useCallback(() => {}, []);\n```\n\nä¸¤ç§æ–¹å¼åŠŸèƒ½å®Œå…¨ç›¸åŒï¼Œéƒ½æ˜¯ç”¨æ¥ç¼“å­˜å‡½æ•°çš„ Hookã€‚é€‰æ‹©å“ªç§æ–¹å¼ä¸»è¦å–å†³äºä½ çš„ä»£ç é£æ ¼å’Œé¡¹ç›®çº¦å®šã€‚\n\n## 2. React.memo å’Œ useMemo çš„åŒºåˆ«\n\n### 2.1. React.memo\n\nReact.memo æ˜¯ä¸€ä¸ª**é«˜é˜¶ç»„ä»¶(HOC)**ï¼Œç”¨äº**ç»„ä»¶çº§åˆ«çš„ç¼“å­˜**ï¼š\n\n```javascript hl:12\n// React.memo ç¤ºä¾‹\nconst MyComponent = React.memo(function MyComponent(props) {\n  /* æ¸²æŸ“é€»è¾‘ */\n  return (\n    <div>\n      <h1>{props.name}</h1>\n      <p>{props.description}</p>\n    </div>\n  );\n});\n\n// å¯ä»¥æ·»åŠ ç¬¬äºŒä¸ªå‚æ•°ï¼šå¯ä»¥æ·»åŠ è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°\nconst MyComponent = React.memo(function MyComponent(props) {\n  /* æ¸²æŸ“é€»è¾‘ */\n}, (prevProps, nextProps) => {\n  // è¿”å› true åˆ™ä¸é‡æ–°æ¸²æŸ“ï¼Œè¿”å› false åˆ™é‡æ–°æ¸²æŸ“\n  return prevProps.name === nextProps.name;\n});\n```\n\nä¸»è¦ç‰¹ç‚¹ï¼š\n\n- ç”¨äºä¼˜åŒ–å‡½æ•°ç»„ä»¶çš„é‡æ¸²æŸ“\n- å¯¹æ¯” props å˜åŒ–ï¼Œå†³å®šæ˜¯å¦é‡æ–°æ¸²æŸ“ç»„ä»¶\n- æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼ŒåŒ…è£¹æ•´ä¸ªç»„ä»¶\n- é€‚ç”¨äºçº¯å±•ç¤ºå‹ç»„ä»¶çš„ä¼˜åŒ–\n\n### 2.2. useMemo\n\nuseMemo æ˜¯ä¸€ä¸ª Hookï¼Œç”¨äºç¼“å­˜è®¡ç®—ç»“æœï¼š\n\n```javascript\n// useMemo ç¤ºä¾‹\nfunction MyComponent() {\n  const [count, setCount] = useState(0);\n  const [text, setText] = useState('');\n\n  // ç¼“å­˜è®¡ç®—ç»“æœ\n  const expensiveValue = useMemo(() => {\n    return computeExpensiveValue(count);\n  }, [count]);\n\n  // ç¼“å­˜å¯¹è±¡\n  const memoizedObject = useMemo(() => ({\n    id: count,\n    text: text\n  }), [count, text]);\n\n  return (\n    <div>\n      <p>Computed value: {expensiveValue}</p>\n      <ChildComponent data={memoizedObject} />\n    </div>\n  );\n}\n```\n\nä¸»è¦ç‰¹ç‚¹ï¼š\n\n- ç”¨äºç¼“å­˜è®¡ç®—ç»“æœæˆ–å€¼\n- åªåœ¨ä¾èµ–é¡¹æ”¹å˜æ—¶é‡æ–°è®¡ç®—\n- æ˜¯ä¸€ä¸ª Hookï¼Œåœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨\n- é€‚ç”¨äºæ˜‚è´µçš„è®¡ç®—æˆ–é˜²æ­¢å¯¹è±¡å¼•ç”¨å˜åŒ–\n\n### 2.3. æ€»ç»“\n\n1. React.memo é€‚ç”¨äºå‡å°‘ç»„ä»¶é‡æ¸²æŸ“\n2. useMemo é€‚ç”¨äºç¼“å­˜è®¡ç®—ç»“æœæˆ–å¯¹è±¡å¼•ç”¨\n3. ä¸è¦è¿‡åº¦ä¼˜åŒ–ï¼Œåªåœ¨æ€§èƒ½é—®é¢˜æ˜æ˜¾æ—¶ä½¿ç”¨\n4. é…åˆ React DevTools è¿›è¡Œæ€§èƒ½åˆ†æ","da202da4efe854ebb74c32c3631a7bf7":"\n# è¯´è¯´ PureComponent\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. PureComponent çš„å®šä¹‰ \n\nPureComponent æ˜¯ React æä¾›çš„ä¸€ä¸ªåŸºç¡€ç»„ä»¶ç±»ï¼Œå®ƒè‡ªåŠ¨å®ç°äº† shouldComponentUpdate ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œé€š`è¿‡æµ…æ¯”è¾ƒï¼ˆshallow comparisonï¼‰props å’Œ state` æ¥å†³å®šæ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚\n\n## 2. PureComponent vs Component\n\n```javascript\n// æ™®é€š Component\nclass RegularComponent extends React.Component {\n  render() {\n    console.log(\"Regular Component render\");\n    return <div>{this.props.value}</div>;\n  }\n}\n\n// PureComponent\nclass PureComponentExample extends React.PureComponent {\n  render() {\n    console.log(\"Pure Component render\");\n    return <div>{this.props.value}</div>;\n  }\n}\n```\n\n### 2.1. æ›´æ–°æœºåˆ¶\n\n   - Componentï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œåªè¦çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œç»„ä»¶å°±ä¼šé‡æ–°æ¸²æŸ“\n   - PureComponentï¼šä¼šå¯¹ props å’Œ state è¿›è¡Œæµ…æ¯”è¾ƒï¼Œåªæœ‰åœ¨æ•°æ®çœŸæ­£å‘ç”Ÿå˜åŒ–æ—¶æ‰é‡æ–°æ¸²æŸ“\n\n### 2.2. æ€§èƒ½å½±å“\n\n   - Componentï¼šå¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„é‡æ¸²æŸ“\n   - PureComponentï¼šé€šè¿‡æµ…æ¯”è¾ƒé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œæé«˜æ€§èƒ½\n\n## 3. æµ…æ¯”è¾ƒçš„å·¥ä½œåŸç†\n\n```javascript hl:10,12,20,22\nclass Example extends React.PureComponent {\n  state = {\n    data: { count: 0 },\n    array: [1, 2, 3],\n  };\n\n  // æµ…æ¯”è¾ƒçš„æƒ…å†µ\n  goodUpdate = () => {\n    this.setState({\n      // åˆ›å»ºæ–°å¯¹è±¡ï¼Œä¼šè§¦å‘é‡æ–°æ¸²æŸ“\n      data: { count: 1 },\n      // åˆ›å»ºæ–°æ•°ç»„ï¼Œä¼šè§¦å‘é‡æ–°æ¸²æŸ“\n      array: [...this.state.array, 4],\n    });\n  };\n\n  // æµ…æ¯”è¾ƒå¯èƒ½å‡ºé—®é¢˜çš„æƒ…å†µ\n  problematicUpdate = () => {\n    const { data, array } = this.state;\n    // ç›´æ¥ä¿®æ”¹å¯¹è±¡ï¼Œä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“\n    data.count = 1;\n    // ç›´æ¥ä¿®æ”¹æ•°ç»„ï¼Œä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“\n    array.push(4);\n    this.setState({ data, array });\n  };\n}\n\n```\n\n## 4. ä½¿ç”¨åœºæ™¯å’Œæ³¨æ„äº‹é¡¹\n\n### 4.1. é€‚åˆä½¿ç”¨ PureComponent çš„åœºæ™¯\n\n```javascript\n// å±•ç¤ºå‹ç»„ä»¶ï¼Œprops æ˜¯ç®€å•ç±»å‹\nclass UserInfo extends React.PureComponent {\n  render() {\n    return (\n      <div>\n        <h2>{this.props.name}</h2>\n        <p>{this.props.email}</p>\n      </div>\n    );\n  }\n}\n```\n\n### 4.2. ä¸é€‚åˆä½¿ç”¨ PureComponent çš„åœºæ™¯\n\n```javascript\n// é¢‘ç¹æ›´æ–°çš„ç»„ä»¶\nclass Timer extends React.Component { // ä½¿ç”¨æ™®é€š Component\n  state = { time: new Date() };\n\n  componentDidMount() {\n    this.timer = setInterval(() => {\n      this.setState({ time: new Date() });\n    }, 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n\n  render() {\n    return <div>{this.state.time.toLocaleTimeString()}</div>;\n  }\n}\n```\n\n## 5. åœ¨å‡½æ•°ç»„ä»¶ä¸­çš„ç­‰æ•ˆå®ç°\n\nåœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ **React.memo æ¥å®ç°ç±»ä¼¼ PureComponent çš„åŠŸèƒ½**ï¼š\n\n```javascript\n// ä½¿ç”¨ React.memo åˆ›å»ºç±»ä¼¼ PureComponent çš„æ•ˆæœ\nconst MemoizedComponent = React.memo(function UserInfo({ name, email }) {\n  return (\n    <div>\n      <h2>{name}</h2>\n      <p>{email}</p>\n    </div>\n  );\n});\n\n// è‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘\nconst CustomMemoized = React.memo(\n  function UserInfo({ user }) {\n    return (\n      <div>\n        <h2>{user.name}</h2>\n        <p>{user.email}</p>\n      </div>\n    );\n  },\n  (prevProps, nextProps) => {\n    // è¿”å› true åˆ™ä¸é‡æ–°æ¸²æŸ“\n    return prevProps.user.id === nextProps.user.id;\n  }\n);\n```\n\n## 6. å¸¸è§é™·é˜±å’Œä¼˜åŒ–\n\n### 6.1. å¯¹è±¡å±æ€§çš„é—®é¢˜\n\n> [!danger]\n> å…³é”®çš„ï¼Œ `style={{ color: 'red' }}` ä¸å¥½ï¼\n\n```javascript hl:3\nclass Parent extends React.Component {\n  render() {\n    // ä¸å¥½çš„åšæ³•ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å¯¹è±¡\n    return <PureChild style={{ color: 'red' }} />;\n\n    // å¥½çš„åšæ³•ï¼šå°†å¯¹è±¡æåˆ°ç»„ä»¶å¤–éƒ¨æˆ–ä½¿ç”¨ useMemo\n    return <PureChild style={styles} />;\n  }\n}\n\nconst styles = { color: 'red' };\n```\n\n### 6.2. æ•°ç»„å±æ€§çš„å¤„ç†\n\n```javascript\nclass ListComponent extends React.PureComponent {\n  render() {\n    const { items } = this.props;\n    \n    return (\n      <ul>\n        {/* ä¸å¥½çš„åšæ³•ï¼šmap åˆ›å»ºæ–°æ•°ç»„ */}\n        {items.map((item, index) => (\n          <li key={index}>{item}</li>\n        ))}\n      </ul>\n    );\n  }\n}\n\n// ä¼˜åŒ–ï¼šå°† map ç»“æœç¼“å­˜\nclass OptimizedList extends React.PureComponent {\n  memoizedItems = null;\n  \n  getMemoizedItems(items) {\n    if (!this.memoizedItems || this.props.items !== items) {\n      this.memoizedItems = items.map((item, index) => (\n        <li key={index}>{item}</li>\n      ));\n    }\n    return this.memoizedItems;\n  }\n\n  render() {\n    return <ul>{this.getMemoizedItems(this.props.items)}</ul>;\n  }\n}\n```\n\n### 6.3. å‡½æ•°å±æ€§çš„å¤„ç†\n\n```javascript\nclass Parent extends React.Component {\n  // å¥½çš„åšæ³•ï¼šä½¿ç”¨ç±»æ–¹æ³•\n  handleClick = () => {\n    // å¤„ç†ç‚¹å‡»\n  };\n\n  render() {\n    return (\n      // ä¸å¥½çš„åšæ³•ï¼šå†…è”å‡½æ•°ä¼šå¯¼è‡´ PureComponent å¤±æ•ˆ\n      <PureChild onClick={() => this.handleClick()} />\n      \n      // å¥½çš„åšæ³•ï¼šä¼ é€’ç±»æ–¹æ³•å¼•ç”¨\n      <PureChild onClick={this.handleClick} />\n    );\n  }\n}\n```\n\n","ab72e135665157c7a3030cd26ce900a1":"\n# æ— çŠ¶æ€ç»„ä»¶ï¼ˆStateless Componentï¼‰æ¦‚å¿µã€åŸç†åŠæœ€ä½³å®è·µ\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä»€ä¹ˆæ˜¯æ— çŠ¶æ€ç»„ä»¶ \n\næ— çŠ¶æ€ç»„ä»¶ï¼ˆä¹Ÿå«å‡½æ•°å¼ç»„ä»¶ï¼‰æ˜¯æœ€ç®€å•çš„ React ç»„ä»¶å½¢å¼ï¼Œå®ƒä»¬æ˜¯çº¯å‡½æ•°ï¼Œæ¥æ”¶ props å¹¶è¿”å› React å…ƒç´ ï¼Œä¸åŒ…å«å†…éƒ¨çŠ¶æ€ã€ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å’Œ this å¼•ç”¨ã€‚\n\n## 2. åŸºæœ¬è¯­æ³•\n\n```jsx\n// 1. æœ€åŸºæœ¬çš„æ— çŠ¶æ€ç»„ä»¶\nfunction Welcome(props) {\n  return <h1>Hello, {props.name}</h1>;\n}\n\n// 2. ç®­å¤´å‡½æ•°å½¢å¼\nconst Welcome = (props) => <h1>Hello, {props.name}</h1>;\n\n// 3. ä½¿ç”¨è§£æ„çš„å½¢å¼\nconst Welcome = ({ name, age }) => (\n  <div>\n    <h1>Hello, {name}</h1>\n    <p>Age: {age}</p>\n  </div>\n);\n```\n\n## 3. ç‰¹ç‚¹å’Œä¼˜åŠ¿\n\n### 3.1. æ€§èƒ½ä¼˜åŠ¿\n\n```jsx\n// æ— çŠ¶æ€ç»„ä»¶\nconst PureDisplay = ({ text }) => <div>{text}</div>;\n\n// ç­‰æ•ˆçš„ç±»ç»„ä»¶\nclass DisplayComponent extends React.Component {\n  render() {\n    return <div>{this.props.text}</div>;\n  }\n}\n```\n\nä¸»è¦ä¼˜åŠ¿ï¼š\n- æ›´å°‘çš„å†…å­˜å ç”¨ï¼ˆæ²¡æœ‰å®ä¾‹åˆ›å»ºï¼‰\n- æ›´å¿«çš„æ¸²æŸ“é€Ÿåº¦\n- æ›´å®¹æ˜“æµ‹è¯•å’Œç»´æŠ¤\n\n### 3.2. ä»£ç ç®€æ´\n\n```jsx\n// æ— çŠ¶æ€ç»„ä»¶ï¼šç®€æ´æ˜äº†\nconst UserCard = ({ name, email, avatar }) => (\n  <div className=\"user-card\">\n    <img src={avatar} alt={name} />\n    <h2>{name}</h2>\n    <p>{email}</p>\n  </div>\n);\n\n// ç±»ç»„ä»¶ï¼šç›¸å¯¹å†—é•¿\nclass UserCard extends React.Component {\n  render() {\n    const { name, email, avatar } = this.props;\n    return (\n      <div className=\"user-card\">\n        <img src={avatar} alt={name} />\n        <h2>{name}</h2>\n        <p>{email}</p>\n      </div>\n    );\n  }\n}\n```\n\n## 4. æœ€ä½³å®è·µ\n\n### 4.1. Props çš„é»˜è®¤å€¼å¤„ç†\n\n```jsx\n// æ–¹å¼1ï¼šä½¿ç”¨é»˜è®¤å‚æ•°\nconst Button = ({ text = 'Click me', onClick = () => {} }) => (\n  <button onClick={onClick}>{text}</button>\n);\n\n// æ–¹å¼2ï¼šä½¿ç”¨ defaultProps\nconst Button = ({ text, onClick }) => (\n  <button onClick={onClick}>{text}</button>\n);\n\nButton.defaultProps = {\n  text: 'Click me',\n  onClick: () => {}\n};\n```\n\n### 4.2. Props ç±»å‹æ£€æŸ¥\n\n```jsx\nimport PropTypes from 'prop-types';\n\nconst UserProfile = ({ name, age, email }) => (\n  <div>\n    <h2>{name}</h2>\n    <p>Age: {age}</p>\n    <p>Email: {email}</p>\n  </div>\n);\n\nUserProfile.propTypes = {\n  name: PropTypes.string.isRequired,\n  age: PropTypes.number,\n  email: PropTypes.string.isRequired\n};\n```\n\n### 4.3. æ¡ä»¶æ¸²æŸ“\n\n```jsx\nconst ConditionalComponent = ({ isLoggedIn, userData }) => (\n  <div>\n    {isLoggedIn ? (\n      <UserDashboard data={userData} />\n    ) : (\n      <LoginPrompt />\n    )}\n  </div>\n);\n\n// ä½¿ç”¨ && è¿ç®—ç¬¦\nconst Notification = ({ message }) => (\n  <div>\n    {message && <div className=\"alert\">{message}</div>}\n  </div>\n);\n```\n\n## 5. ç»„åˆæ¨¡å¼\n\n### 5.1. ç»„ä»¶ç»„åˆ\n\n```jsx\n// å°å‹å¯å¤ç”¨ç»„ä»¶\nconst Avatar = ({ src, alt }) => (\n  <img src={src} alt={alt} className=\"avatar\" />\n);\n\nconst UserInfo = ({ name, title }) => (\n  <div className=\"user-info\">\n    <h3>{name}</h3>\n    <p>{title}</p>\n  </div>\n);\n\n// ç»„åˆä½¿ç”¨\nconst UserCard = ({ user }) => (\n  <div className=\"user-card\">\n    <Avatar src={user.avatarUrl} alt={user.name} />\n    <UserInfo name={user.name} title={user.title} />\n  </div>\n);\n```\n\n### 5.2. æ¸²æŸ“å±æ€§æ¨¡å¼\n\n```jsx\nconst WithTooltip = ({ children, tooltip }) => (\n  <div className=\"tooltip-wrapper\">\n    {children}\n    <span className=\"tooltip\">{tooltip}</span>\n  </div>\n);\n\nconst Button = () => (\n  <WithTooltip tooltip=\"Click to submit\">\n    <button>Submit</button>\n  </WithTooltip>\n);\n```\n\n## 6. æ€§èƒ½ä¼˜åŒ–\n\n### 6.1. ä½¿ç”¨ React.memo\n\n```jsx\nconst ExpensiveComponent = React.memo(({ data }) => (\n  <div>\n    {/* å¤æ‚çš„æ¸²æŸ“é€»è¾‘ */}\n    {data.map(item => (\n      <ComplexItem key={item.id} {...item} />\n    ))}\n  </div>\n));\n\n// è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°\nconst MemoizedComponent = React.memo(\n  ({ value }) => <div>{value}</div>,\n  (prevProps, nextProps) => {\n    return prevProps.value === nextProps.value;\n  }\n);\n```\n\n### 6.2. é¿å…ä¸å¿…è¦çš„æ¸²æŸ“\n\n```jsx hl:1\n// ä¸å¥½çš„åšæ³•ï¼šå†…è”å¯¹è±¡\nconst BadExample = () => (\n  <UserCard\n    style={{ margin: '10px' }} // æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å¯¹è±¡\n    data={{ id: 1, name: 'John' }}\n  />\n);\n\n// å¥½çš„åšæ³•ï¼šæå–å¸¸é‡\nconst cardStyle = { margin: '10px' };\nconst userData = { id: 1, name: 'John' };\n\nconst GoodExample = () => (\n  <UserCard\n    style={cardStyle}\n    data={userData}\n  />\n);\n```\n\n## 7. å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ\n\n### 7.1. å¤„ç†äº‹ä»¶\n\n```jsx hl:12,1\n\n// ä¸å¥½çš„åšæ³•ï¼šæ¯æ¬¡æ¸²æŸ“åˆ›å»ºæ–°å‡½æ•°\nconst BadButton = ({ onClick, text }) => (\n  <button onClick={(e) => onClick(e, text)}>\n    {text}\n  </button>\n);\n\n// å¥½çš„åšæ³•ï¼šä½¿ç”¨ useCallback\nimport { useCallback } from 'react';\n\nconst GoodButton = ({ onClick, text }) => {\n  const handleClick = useCallback((e) => {\n    onClick(e, text);\n  }, [onClick, text]);\n\n  return (\n    <button onClick={handleClick}>\n      {text}\n    </button>\n  );\n};\n```\n\n### 7.2. å¤æ‚è®¡ç®—\n\n```jsx\nimport { useMemo } from 'react';\n\nconst DataDisplay = ({ items }) => {\n  // ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ\n  const processedData = useMemo(() => {\n    return items.map(item => ({\n      ...item,\n      processed: expensiveOperation(item)\n    }));\n  }, [items]);\n\n  return (\n    <ul>\n      {processedData.map(item => (\n        <li key={item.id}>{item.processed}</li>\n      ))}\n    </ul>\n  );\n};\n```\n\n### 7.3. æ ·å¼å¤„ç†\n\n```jsx\n// CSS-in-JS\nconst StyledButton = ({ primary, children }) => (\n  <button\n    style={{\n      backgroundColor: primary ? 'blue' : 'gray',\n      color: 'white',\n      padding: '10px 20px',\n      border: 'none',\n      borderRadius: '4px'\n    }}\n  >\n    {children}\n  </button>\n);\n\n// ä½¿ç”¨ className\nconst Button = ({ type, children }) => (\n  <button className={`btn btn-${type}`}>\n    {children}\n  </button>\n);\n```\n\n## 8. æ— çŠ¶æ€ç»„ä»¶çš„ä¸»è¦ç¼ºé™·\n\n1. æ— æ³•ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•\n2. ä¸èƒ½ç»´æŠ¤å†…éƒ¨çŠ¶æ€\n3. éš¾ä»¥å®ç°å¤æ‚äº¤äº’é€»è¾‘\n4. æ€§èƒ½ä¼˜åŒ–å—é™\n5. Refs ä½¿ç”¨å—é™\n6. ç¼ºå°‘å®ä¾‹æ–¹æ³•ï¼Œæ¯”å¦‚æ— æ³•åƒ class é‚£æ ·è°ƒç”¨æ–¹æ³•\n\nä½†æ˜¯**é€šè¿‡ React Hooksï¼Œè¿™äº›é—®é¢˜å¤§å¤šå¯ä»¥å¾—åˆ°è§£å†³**ï¼Œè€Œä¸”èƒ½å¤Ÿä¿æŒä»£ç çš„ç®€æ´æ€§å’Œå‡½æ•°å¼ç¼–ç¨‹çš„ä¼˜åŠ¿ã€‚åœ¨ç°ä»£ React å¼€å‘ä¸­ï¼Œæ¨èä½¿ç”¨å‡½æ•°ç»„ä»¶ + Hooks çš„ç»„åˆæ¥æ„å»ºåº”ç”¨ã€‚\n\n","fdfd5c70fe1753288f8ec07f4c962e9e":"\n# React ç»„ä»¶çš„å„ç§å®šä¹‰å’Œå£°æ˜æ–¹å¼\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‡½æ•°å¼ç»„ä»¶ï¼ˆFunction Componentï¼‰ \n\n```jsx\n// 1.1 æ™®é€šå‡½æ•°å£°æ˜\nfunction Welcome(props) {\n  return <h1>Hello, {props.name}</h1>;\n}\n\n// 1.2 ç®­å¤´å‡½æ•°å£°æ˜\nconst Welcome = (props) => {\n  return <h1>Hello, {props.name}</h1>;\n};\n\n// 1.3 ç®­å¤´å‡½æ•°ç®€å†™ï¼ˆå•è¡Œè¿”å›ï¼‰\nconst Welcome = props => <h1>Hello, {props.name}</h1>;\n\n// 1.4 ä½¿ç”¨è§£æ„çš„ç®­å¤´å‡½æ•°\nconst Welcome = ({ name, age }) => (\n  <div>\n    <h1>Hello, {name}</h1>\n    <p>Age: {age}</p>\n  </div>\n);\n```\n\n## 2. ç±»ç»„ä»¶ï¼ˆClass Componentï¼‰\n\n```jsx hl:1,8,15\n// 2.1 åŸºç¡€ç±»ç»„ä»¶\nclass Welcome extends React.Component {\n  render() {\n    return <h1>Hello, {this.props.name}</h1>;\n  }\n}\n\n// 2.2 ä½¿ç”¨ React.PureComponent\nclass PureWelcome extends React.PureComponent {\n  render() {\n    return <h1>Hello, {this.props.name}</h1>;\n  }\n}\n\n// 2.3 ä½¿ç”¨ class fields\nclass ModernWelcome extends React.Component {\n  state = {\n    count: 0\n  };\n\n  handleClick = () => {\n    this.setState(state => ({ count: state.count + 1 }));\n  };\n\n  render() {\n    return (\n      <div>\n        <h1>Hello, {this.props.name}</h1>\n        <button onClick={this.handleClick}>\n          Count: {this.state.count}\n        </button>\n      </div>\n    );\n  }\n}\n```\n\n## 3. é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰\n\n```jsx\n// 3.1 åŸºæœ¬çš„é«˜é˜¶ç»„ä»¶\nconst withLogger = (WrappedComponent) => {\n  return class extends React.Component {\n    componentDidMount() {\n      console.log('Component mounted');\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  };\n};\n\n// ä½¿ç”¨é«˜é˜¶ç»„ä»¶\nconst LoggedWelcome = withLogger(Welcome);\n\n// 3.2 å¸¦å‚æ•°çš„é«˜é˜¶ç»„ä»¶\nconst withData = (dataSource) => (WrappedComponent) => {\n  return class extends React.Component {\n    state = {\n      data: null\n    };\n\n    componentDidMount() {\n      this.fetchData();\n    }\n\n    fetchData = async () => {\n      const data = await dataSource();\n      this.setState({ data });\n    };\n\n    render() {\n      return (\n        <WrappedComponent\n          data={this.state.data}\n          {...this.props}\n        />\n      );\n    }\n  };\n};\n```\n\n## 4. Render Props æ¨¡å¼\n\n```jsx\n// 4.1 åŸºæœ¬çš„ Render Props\nclass MouseTracker extends React.Component {\n  state = { x: 0, y: 0 };\n\n  handleMouseMove = (event) => {\n    this.setState({\n      x: event.clientX,\n      y: event.clientY\n    });\n  };\n\n  render() {\n    return (\n      <div onMouseMove={this.handleMouseMove}>\n        {this.props.render(this.state)}\n      </div>\n    );\n  }\n}\n\n// ä½¿ç”¨ Render Props\n<MouseTracker\n  render={({ x, y }) => (\n    <h1>Mouse position: {x}, {y}</h1>\n  )}\n/>\n\n// 4.2 ä½¿ç”¨ children ä½œä¸ºå‡½æ•°\nclass MouseTracker extends React.Component {\n  // ... åŒä¸Š\n  render() {\n    return (\n      <div onMouseMove={this.handleMouseMove}>\n        {this.props.children(this.state)}\n      </div>\n    );\n  }\n}\n```\n\n## 5. ä½¿ç”¨ Hooks çš„å‡½æ•°ç»„ä»¶\n\n```jsx\n// 5.1 ä½¿ç”¨å¤šä¸ª Hooks\nconst UserProfile = ({ userId }) => {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchUser(userId).then(data => {\n      setUser(data);\n      setLoading(false);\n    });\n  }, [userId]);\n\n  if (loading) return <div>Loading...</div>;\n  return <div>Welcome {user.name}</div>;\n};\n\n// 5.2 è‡ªå®šä¹‰ Hook\nconst useWindowSize = () => {\n  const [size, setSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight\n  });\n\n  useEffect(() => {\n    const handleResize = () => {\n      setSize({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return size;\n};\n\n// ä½¿ç”¨è‡ªå®šä¹‰ Hook\nconst ResponsiveComponent = () => {\n  const { width, height } = useWindowSize();\n  return <div>Window size: {width} x {height}</div>;\n};\n```\n\n## 6. Memo ç»„ä»¶\n\n```jsx hl:1,6\n// 6.1 åŸºæœ¬çš„ Memo ç»„ä»¶\nconst MemoizedComponent = React.memo(function MyComponent(props) {\n  return <div>{props.value}</div>;\n});\n\n// 6.2 å¸¦æœ‰æ¯”è¾ƒå‡½æ•°çš„ Memo ç»„ä»¶\nconst MemoizedComponent = React.memo(\n  function MyComponent(props) {\n    return <div>{props.value}</div>;\n  },\n  (prevProps, nextProps) => {\n    return prevProps.value === nextProps.value;\n  }\n);\n```\n\n## 7. åŠ¨æ€ç»„ä»¶\n\n```jsx hl:1,13\n// 7.1 ä½¿ç”¨æ¡ä»¶æ¸²æŸ“åˆ›å»ºåŠ¨æ€ç»„ä»¶\nconst DynamicComponent = ({ type, ...props }) => {\n  const components = {\n    text: TextComponent,\n    image: ImageComponent,\n    video: VideoComponent\n  };\n\n  const Component = components[type];\n  return Component ? <Component {...props} /> : null;\n};\n\n// 7.2 ä½¿ç”¨ lazy å’Œ Suspense è¿›è¡Œä»£ç åˆ†å‰²\nconst LazyComponent = React.lazy(() => import('./LazyComponent'));\n\nfunction App() {\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <LazyComponent />\n    </Suspense>\n  );\n}\n```\n\n## 8. æ¯ç§å®šä¹‰æ–¹å¼éƒ½æœ‰å…¶é€‚ç”¨åœºæ™¯\n\n- ç®€å•çš„å±•ç¤ºå‹ç»„ä»¶ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶\n- éœ€è¦çŠ¶æ€ç®¡ç†å’Œç”Ÿå‘½å‘¨æœŸçš„ä½¿ç”¨ç±»ç»„ä»¶æˆ– Hooks\n- éœ€è¦å¤ç”¨é€»è¾‘çš„ä½¿ç”¨é«˜é˜¶ç»„ä»¶æˆ–è‡ªå®šä¹‰ Hooks\n- éœ€è¦æ€§èƒ½ä¼˜åŒ–çš„ä½¿ç”¨ React.memo æˆ– PureComponent\n- éœ€è¦ä»£ç åˆ†å‰²çš„ä½¿ç”¨ lazy å’Œ Suspense\n\né€‰æ‹©åˆé€‚çš„ç»„ä»¶å®šä¹‰æ–¹å¼åº”è¯¥åŸºäºï¼š\n1. ç»„ä»¶çš„å¤æ‚åº¦\n2. æ˜¯å¦éœ€è¦çŠ¶æ€ç®¡ç†\n3. æ˜¯å¦éœ€è¦ç”Ÿå‘½å‘¨æœŸæ–¹æ³•\n4. æ€§èƒ½ä¼˜åŒ–éœ€æ±‚\n5. ä»£ç å¤ç”¨éœ€æ±‚\n6. å›¢é˜Ÿå¼€å‘è§„èŒƒ","d9224b75f9d75494a0b287c73f0ceea0":"\n# React ä¸­è·å– DOM å¼•ç”¨çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ\n\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. React.createRef() \n\næœ€æ–°æ¨èçš„åˆ›å»º ref çš„æ–¹å¼ï¼š\n\n```jsx\n// 1.1 åœ¨ç±»ç»„ä»¶ä¸­ä½¿ç”¨\nclass MyComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.myRef = React.createRef();\n  }\n\n  componentDidMount() {\n    // è®¿é—® DOM èŠ‚ç‚¹\n    console.log(this.myRef.current);\n  }\n\n  render() {\n    return <div ref={this.myRef}>Hello</div>;\n  }\n}\n\n// 1.2 åœ¨ç±»ç»„ä»¶ä¸­ä½¿ç”¨ class fields\nclass MyComponent extends React.Component {\n  myRef = React.createRef();\n\n  handleClick = () => {\n    // è®¿é—® DOM èŠ‚ç‚¹\n    this.myRef.current.focus();\n  };\n\n  render() {\n    return (\n      <>\n        <input ref={this.myRef} />\n        <button onClick={this.handleClick}>Focus Input</button>\n      </>\n    );\n  }\n}\n```\n\n## 2. useRef Hook\n\nåœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨çš„ Hook æ–¹å¼ï¼š\n\n```jsx\n// 2.1 åŸºæœ¬ç”¨æ³•\nfunction TextInputWithFocusButton() {\n  const inputRef = useRef(null);\n\n  const focusInput = () => {\n    inputRef.current.focus();\n  };\n\n  return (\n    <>\n      <input ref={inputRef} type=\"text\" />\n      <button onClick={focusInput}>Focus Input</button>\n    </>\n  );\n}\n\n// 2.2 å¤šä¸ª ref çš„ä½¿ç”¨\nfunction MultipleRefs() {\n  const firstRef = useRef(null);\n  const secondRef = useRef(null);\n  const thirdRef = useRef(null);\n\n  const handleClick = (ref) => {\n    ref.current.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  return (\n    <div>\n      <button onClick={() => handleClick(firstRef)}>Scroll to First</button>\n      <button onClick={() => handleClick(secondRef)}>Scroll to Second</button>\n      <button onClick={() => handleClick(thirdRef)}>Scroll to Third</button>\n      \n      <div ref={firstRef}>First Element</div>\n      <div ref={secondRef}>Second Element</div>\n      <div ref={thirdRef}>Third Element</div>\n    </div>\n  );\n}\n```\n\n## 3. å›è°ƒ Refsï¼ˆCallback Refsï¼‰\n\né€šè¿‡å›è°ƒå‡½æ•°çš„æ–¹å¼è®¾ç½® refï¼š\n\n```jsx hl:1,22\n// 3.1 åŸºæœ¬ç”¨æ³•\nclass CallbackRefComponent extends React.Component {\n  setTextInputRef = (element) => {\n    this.textInput = element;\n  };\n\n  focusTextInput = () => {\n    // ç›´æ¥ä½¿ç”¨ DOM API\n    if (this.textInput) this.textInput.focus();\n  };\n\n  render() {\n    return (\n      <>\n        <input type=\"text\" ref={this.setTextInputRef} />\n        <button onClick={this.focusTextInput}>Focus Input</button>\n      </>\n    );\n  }\n}\n\n// 3.2 åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨\nfunction CallbackRefFunctional() {\n  let textInput = null;\n\n  const setTextInputRef = (element) => {\n    textInput = element;\n  };\n\n  const focusTextInput = () => {\n    if (textInput) textInput.focus();\n  };\n\n  return (\n    <>\n      <input ref={setTextInputRef} />\n      <button onClick={focusTextInput}>Focus Input</button>\n    </>\n  );\n}\n```\n\n## 4. forwardRef\n\nç”¨äº**è½¬å‘ refs åˆ°å­ç»„ä»¶**ï¼š\n\n```jsx\n// 4.1 åŸºæœ¬ç”¨æ³•\nconst FancyButton = React.forwardRef((props, ref) => (\n  <button ref={ref} className=\"fancy-button\">\n    {props.children}\n  </button>\n));\n\n// ä½¿ç”¨ FancyButton\nfunction Parent() {\n  const buttonRef = useRef(null);\n\n  return <FancyButton ref={buttonRef}>Click me!</FancyButton>;\n}\n\n// 4.2 å¸¦æœ‰ HOC çš„ forwardRef\nconst withLogger = (WrappedComponent) => {\n  return React.forwardRef((props, ref) => {\n    useEffect(() => {\n      console.log('Component mounted');\n    }, []);\n\n    return <WrappedComponent {...props} ref={ref} />;\n  });\n};\n\nconst LoggedButton = withLogger(FancyButton);\n```\n\n## 5. å­—ç¬¦ä¸² Refsï¼ˆä¸æ¨èï¼‰\n\næ—§ç‰ˆæœ¬çš„ ref æ–¹å¼ï¼Œç°å·²ä¸æ¨èä½¿ç”¨ï¼š\n\n```jsx hl:5\n// ä¸æ¨èä½¿ç”¨çš„å­—ç¬¦ä¸² ref\nclass LegacyComponent extends React.Component {\n  componentDidMount() {\n    // ä¸æ¨è\n    this.refs.myInput.focus();\n  }\n\n  render() {\n    return <input ref=\"myInput\" />;\n  }\n}\n```\n\n## 6. findDOMNodeï¼ˆä¸æ¨èï¼‰\n\nlegacy APIï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šè­¦å‘Šï¼š\n\n```jsx\n// ä¸æ¨èä½¿ç”¨ findDOMNode\nclass LegacyFindDOMNode extends React.Component {\n  componentDidMount() {\n    // ä¸æ¨è\n    const node = ReactDOM.findDOMNode(this);\n  }\n\n  render() {\n    return <div>Legacy</div>;\n  }\n}\n```\n\n## 7. å®é™…åº”ç”¨ç¤ºä¾‹\n\n```jsx\n// 7.1 å¤æ‚è¡¨å•å¤„ç†\nfunction ComplexForm() {\n  const formRefs = {\n    name: useRef(null),\n    email: useRef(null),\n    phone: useRef(null)\n  };\n\n  const validateField = (fieldName) => {\n    const value = formRefs[fieldName].current.value;\n    // éªŒè¯é€»è¾‘\n  };\n\n  return (\n    <form>\n      <input ref={formRefs.name} placeholder=\"Name\" />\n      <input ref={formRefs.email} type=\"email\" placeholder=\"Email\" />\n      <input ref={formRefs.phone} placeholder=\"Phone\" />\n    </form>\n  );\n}\n\n// 7.2 åª’ä½“æ’­æ”¾å™¨\nfunction VideoPlayer({ src }) {\n  const videoRef = useRef(null);\n\n  const handlePlay = () => {\n    videoRef.current.play();\n  };\n\n  const handlePause = () => {\n    videoRef.current.pause();\n  };\n\n  return (\n    <div>\n      <video ref={videoRef} src={src} />\n      <button onClick={handlePlay}>Play</button>\n      <button onClick={handlePause}>Pause</button>\n    </div>\n  );\n}\n```\n\n## 8. æœ€ä½³å®è·µå»ºè®®\n\n1. ä¼˜å…ˆä½¿ç”¨ `useRef` å’Œ `createRef`\n2. éœ€è¦æ›´ç»†ç²’åº¦æ§åˆ¶æ—¶ä½¿ç”¨å›è°ƒ `refs`\n3. éœ€è¦è·¨ç»„ä»¶ä¼ é€’ ref æ—¶ä½¿ç”¨ `forwardRef`\n4. é¿å…ä½¿ç”¨å­—ç¬¦ä¸² refs å’Œ `findDOMNode`\n5. åªåœ¨å¿…è¦æ—¶ä½¿ç”¨ refsï¼ˆå¦‚ç„¦ç‚¹ç®¡ç†ã€åŠ¨ç”»ã€ç¬¬ä¸‰æ–¹ DOM åº“é›†æˆç­‰ï¼‰\n6. ä¸è¦è¿‡åº¦ä½¿ç”¨ refs æ¥æ“ä½œ DOMï¼Œå°½é‡é€šè¿‡ React çš„å£°æ˜å¼æ›´æ–°æ¥ç®¡ç† UI\n\nè®°ä½ï¼Œrefs ä¸»è¦ç”¨äºï¼š\n- ç®¡ç†ç„¦ç‚¹ã€æ–‡æœ¬é€‰æ‹©æˆ–åª’ä½“æ’­æ”¾\n- è§¦å‘å¼ºåˆ¶åŠ¨ç”»\n- é›†æˆç¬¬ä¸‰æ–¹ DOM åº“\n- ç›´æ¥è®¿é—® DOM å…ƒç´ çš„ç‰¹å®šå±æ€§æˆ–æ–¹æ³•\n\nåº”é¿å…ä½¿ç”¨ refs æ¥åšä»»ä½•å¯ä»¥é€šè¿‡å£°æ˜å¼å®ç°çš„äº‹æƒ…ã€‚","5ba8f5c174ae5f5c9c2f563a709b082f":"\n# é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰\n\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä»€ä¹ˆæ˜¯é«˜é˜¶ç»„ä»¶ \n\né«˜é˜¶ç»„ä»¶æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å¢å¼ºç»„ä»¶ã€‚è¿™æ˜¯ä¸€ç§åŸºäº React ç»„åˆç‰¹æ€§çš„ç»„ä»¶**å¤ç”¨**æŠ€æœ¯ã€‚\n\n```jsx\n// åŸºæœ¬çš„ HOC ç»“æ„\nconst withExample = (WrappedComponent) => {\n  return class extends React.Component {\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n}\n\n// ä½¿ç”¨ HOC\nconst EnhancedComponent = withExample(OriginalComponent);\n```\n\n## 2. å¸¸è§ä½¿ç”¨åœºæ™¯\n\n### 2.1. å±æ€§ä»£ç†\n\n```jsx\n// æ·»åŠ é¢å¤–çš„ props\nconst withExtraProps = (WrappedComponent) => {\n  return class extends React.Component {\n    render() {\n      const newProps = {\n        extraProp: 'Extra Property'\n      };\n      return <WrappedComponent {...this.props} {...newProps} />;\n    }\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst MyComponent = ({ extraProp }) => (\n  <div>{extraProp}</div>\n);\n\nconst Enhanced = withExtraProps(MyComponent);\n```\n\n### 2.2. æ¡ä»¶æ¸²æŸ“ï¼šæƒé™æ§åˆ¶\n\n```jsx \n// æƒé™æ§åˆ¶ HOC\nconst withAuth = (WrappedComponent) => {\n  return class extends React.Component {\n    render() {\n      if (!this.props.isAuthenticated) {\n        return <Navigate to=\"/login\" />;\n      }\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n}\n\n// åŠ è½½çŠ¶æ€ HOC\nconst withLoading = (WrappedComponent) => {\n  return function({ isLoading, ...props }) {\n    if (isLoading) {\n      return <div>Loading...</div>;\n    }\n    return <WrappedComponent {...props} />;\n  }\n}\n```\n\n### 2.3. çŠ¶æ€ç®¡ç†\n\n```jsx\n// æ·»åŠ æœ¬åœ°çŠ¶æ€ç®¡ç†\nconst withState = (WrappedComponent) => {\n  return class extends React.Component {\n    state = {\n      count: 0\n    };\n\n    increment = () => {\n      this.setState(prev => ({ count: prev.count + 1 }));\n    };\n\n    render() {\n      return (\n        <WrappedComponent\n          {...this.props}\n          count={this.state.count}\n          onIncrement={this.increment}\n        />\n      );\n    }\n  }\n}\n```\n\n### 2.4. æ—¥å¿—è®°å½•\n\n```jsx\n// ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ—¥å¿—\nconst withLogger = (WrappedComponent) => {\n  return class extends React.Component {\n    componentDidMount() {\n      console.log(`${WrappedComponent.name} mounted`);\n    }\n\n    componentWillUnmount() {\n      console.log(`${WrappedComponent.name} will unmount`);\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n}\n```\n\n### 2.5. æ€§èƒ½ä¼˜åŒ–\n\n```jsx\n// æ·»åŠ æ€§èƒ½ä¼˜åŒ–\nconst withMemo = (WrappedComponent) => {\n  return React.memo(WrappedComponent, (prevProps, nextProps) => {\n    // è‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘\n    return prevProps.value === nextProps.value;\n  });\n}\n```\n\n### 2.6. **æ•°æ®è·å–å’ŒåŠ è½½çŠ¶æ€**\n\n```javascript hl:11\nconst withData = (dataSource) => (WrappedComponent) => {\n  return class extends React.Component {\n    state = {\n      data: null,\n      loading: true,\n      error: null\n    };\n\n    async componentDidMount() {\n      try {\n        const data = await dataSource();\n        this.setState({ data, loading: false });\n      } catch (error) {\n        this.setState({ error, loading: false });\n      }\n    }\n\n    render() {\n      const { data, loading, error } = this.state;\n      return (\n        <WrappedComponent\n          data={data}\n          loading={loading}\n          error={error}\n          {...this.props}\n        />\n      );\n    }\n  };\n};\n```\n\n### 2.7. **æ ·å¼æ³¨å…¥**\n\n```javascript\nconst withStyles = (styles) => (WrappedComponent) => {\n  return class extends React.Component {\n    render() {\n      return (\n        <div style={styles}>\n          <WrappedComponent {...this.props} />\n        </div>\n      );\n    }\n  };\n};\n```\n\n## 3. å¤æ‚ç¤ºä¾‹\n\n### 3.1. ç»„åˆå¤šä¸ª HOCï¼šcompose\n\n```jsx\n// HOC ç»„åˆ\nconst compose = (...funcs) => x => funcs.reduceRight((v, f) => f(v), x);\n\nconst enhance = compose(\n  withAuth,\n  withLogger,\n  withState,\n  withLoading\n);\n\nconst EnhancedComponent = enhance(BaseComponent);\n```\n\n### 3.2. å¸¦å‚æ•°çš„ HOCï¼šå¸¦å‚æ•° `url`\n\n```jsx\nconst withFetch = (url) => (WrappedComponent) => {\n  return class extends React.Component {\n    state = {\n      data: null,\n      loading: true,\n      error: null\n    };\n\n    componentDidMount() {\n      this.fetchData();\n    }\n\n    fetchData = async () => {\n      try {\n        const response = await fetch(url);\n        const data = await response.json();\n        this.setState({ data, loading: false });\n      } catch (error) {\n        this.setState({ error, loading: false });\n      }\n    };\n\n    render() {\n      const { data, loading, error } = this.state;\n      return (\n        <WrappedComponent\n          {...this.props}\n          data={data}\n          loading={loading}\n          error={error}\n        />\n      );\n    }\n  };\n};\n\n// ä½¿ç”¨\nconst UserList = withFetch('https://api.example.com/users')(UserComponent);\n```\n\n## 4. æ³¨æ„äº‹é¡¹\n\n### 4.1. ä¸è¦åœ¨ render æ–¹æ³•ä¸­ä½¿ç”¨ HOC\n\n```jsx\n// âŒ é”™è¯¯ç¤ºä¾‹\nclass Example extends React.Component {\n  render() {\n    // æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºæ–°çš„ç»„ä»¶å®ä¾‹\n    const EnhancedComponent = withExample(MyComponent);\n    return <EnhancedComponent />;\n  }\n}\n\n// âœ… æ­£ç¡®ç¤ºä¾‹\nconst EnhancedComponent = withExample(MyComponent);\nclass Example extends React.Component {\n  render() {\n    return <EnhancedComponent />;\n  }\n}\n```\n\n### 4.2. å¤åˆ¶é™æ€æ–¹æ³•\n\n```javascript\nimport hoistNonReactStatics from 'hoist-non-react-statics';\n\nfunction withExample(WrappedComponent) {\n  class WithExample extends React.Component {\n    /* ... */\n  }\n  \n  // å¤åˆ¶é™æ€æ–¹æ³•\n  hoistNonReactStatics(WithExample, WrappedComponent);\n  return WithExample;\n}\n```\n\n### 4.3. **å‘½åçº¦å®š**\n```javascript\n// ä¸º HOC æ·»åŠ æ˜¾ç¤ºåç§°ä»¥ä¾¿è°ƒè¯•\nfunction withExample(WrappedComponent) {\n  class WithExample extends React.Component {/* ... */}\n  \n  // è®¾ç½®æœ‰æ„ä¹‰çš„æ˜¾ç¤ºåç§°\n  WithExample.displayName = `WithExample(${getDisplayName(WrappedComponent)})`;\n  return WithExample;\n}\n\nfunction getDisplayName(WrappedComponent) {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n}\n```\n\n### 4.4. ä¼ é€’ Refs\n\n```jsx\nconst withRef = (WrappedComponent) => {\n  return React.forwardRef((props, ref) => {\n    return <WrappedComponent {...props} forwardedRef={ref} />;\n  });\n}\n```\n\n## 5. æœ€ä½³å®è·µ\n\n### 5.1. **å‘½åçº¦å®š**\n\n```jsx\n// ä½¿ç”¨ with å‰ç¼€\nconst withAuth = (WrappedComponent) => {\n  // HOC å®ç°\n};\n\n// ä¸º HOC åŒ…è£…çš„ç»„ä»¶è®¾ç½®æ˜¾ç¤ºåç§°\nconst getDisplayName = (WrappedComponent) => {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n};\n\nHOC.displayName = `WithAuth(${getDisplayName(WrappedComponent)})`;\n```\n\n### 5.2. **è§£æ„ props**\n\n```jsx\nconst withExample = (WrappedComponent) => {\n  return class extends React.Component {\n    render() {\n      const { specialProp, ...passThroughProps } = this.props;\n      return <WrappedComponent {...passThroughProps} />;\n    }\n  }\n}\n```\n\n### 5.3. **ç»„åˆè€Œéä¿®æ”¹**\n\n```jsx\n// âŒ é”™è¯¯ç¤ºä¾‹ï¼šç›´æ¥ä¿®æ”¹åŸç»„ä»¶\nconst withExample = (WrappedComponent) => {\n  WrappedComponent.prototype.componentDidMount = function() {\n    // æŸäº›æ“ä½œ\n  };\n  return WrappedComponent;\n};\n\n// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨ç»„åˆ\nconst withExample = (WrappedComponent) => {\n  return class extends React.Component {\n    componentDidMount() {\n      // æŸäº›æ“ä½œ\n    }\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n};\n```\n\n## 6. å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ\n\n### 6.1. **props å‘½åå†²çª**\n\n```jsx\nconst withProps = (WrappedComponent) => {\n  return class extends React.Component {\n    render() {\n      const newProps = {\n        // ä½¿ç”¨ç‰¹å®šå‰ç¼€é¿å…å†²çª\n        withProps_value: 'example'\n      };\n      return <WrappedComponent {...this.props} {...newProps} />;\n    }\n  }\n}\n```\n\n### 6.2. **å¤šä¸ª HOC çš„é¡ºåºé—®é¢˜**\n\n```jsx\n// HOC çš„æ‰§è¡Œé¡ºåºä»ä¸‹åˆ°ä¸Š\nconst enhance = compose(\n  withAuth,      // ç¬¬ä¸‰ä¸ªæ‰§è¡Œ\n  withLayout,    // ç¬¬äºŒä¸ªæ‰§è¡Œ\n  withLoading    // ç¬¬ä¸€ä¸ªæ‰§è¡Œ\n);\n```\n\n## 7. æ›¿ä»£æ–¹æ¡ˆ\n\nåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ä»¥ä¸‹æ›¿ä»£æ–¹æ¡ˆï¼š\n\n1. **Render Props**\n2. **Hooks**\n3. **ç»„ä»¶ç»„åˆ**\n\né€‰æ‹©ä½¿ç”¨ HOC è¿˜æ˜¯å…¶ä»–æ–¹æ¡ˆï¼Œåº”è¯¥åŸºäºï¼š\n- ä»£ç å¤ç”¨çš„ç²’åº¦\n- æ€§èƒ½è¦æ±‚\n- ç»„ä»¶çš„å¤æ‚åº¦\n- å›¢é˜Ÿçš„å¼€å‘ä¹ æƒ¯\n\nHOC æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ¨¡å¼ï¼Œä½†ä¸æ˜¯å”¯ä¸€çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨ç°ä»£ React å¼€å‘ä¸­ï¼ŒHooks é€šå¸¸æ˜¯æ›´ç®€å•å’Œçµæ´»çš„é€‰æ‹©ã€‚\n\n## 8. æ€§èƒ½è€ƒè™‘\n\n### 8.1. **é¿å…ä¸å¿…è¦çš„åµŒå¥—**\n\n```javascript\n// âŒ è¿‡åº¦åµŒå¥—\nexport default withRouter(connect(mapState)(withStyles(MyComponent)));\n\n// âœ… ä½¿ç”¨ç»„åˆå‡½æ•°\nconst enhance = compose(\n  withRouter,\n  connect(mapState),\n  withStyles\n);\nexport default enhance(MyComponent);\n```\n\n### 8.2. **ä½¿ç”¨è®°å¿†åŒ–**\n\n```javascript\nconst memoizedHOC = (WrappedComponent) => {\n  return React.memo((props) => {\n    return <WrappedComponent {...props} />;\n  });\n};\n```\n","8d97ca2bd98a5dc0b97a36dd56f52f0e":"\n# React ç»„ä»¶é—´é€šä¿¡æœ‰å“ªäº›ï¼Ÿ\n\n`#react`  \n\n## ç›®å½•\n<!-- toc -->\n ## 1. Props ä¼ é€’ï¼ˆçˆ¶å­ç»„ä»¶é€šä¿¡ï¼‰ \n\næœ€åŸºæœ¬ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„é€šä¿¡æ–¹å¼ï¼š\n\n```jsx\n// çˆ¶ç»„ä»¶\nfunction Parent() {\n  const [count, setCount] = useState(0);\n  \n  const handleChildClick = (value) => {\n    console.log('ä»å­ç»„ä»¶æ”¶åˆ°ï¼š', value);\n  };\n\n  return (\n    <Child \n      count={count} \n      onIncrement={() => setCount(count + 1)}\n      onChildClick={handleChildClick}\n    />\n  );\n}\n\n// å­ç»„ä»¶\nfunction Child({ count, onIncrement, onChildClick }) {\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={onIncrement}>å¢åŠ </button>\n      <button onClick={() => onChildClick('hello')}>å‘çˆ¶ç»„ä»¶å‘é€æ•°æ®</button>\n    </div>\n  );\n}\n```\n\n## 2. Contextï¼ˆè·¨å±‚çº§ç»„ä»¶é€šä¿¡ï¼‰\n\né€‚ç”¨äºéœ€è¦åœ¨ç»„ä»¶æ ‘ä¸­å…±äº«æ•°æ®çš„åœºæ™¯ï¼š\n\n```jsx\n// åˆ›å»º Context\nconst ThemeContext = React.createContext('light');\n\n// æä¾›è€…ç»„ä»¶\nfunction App() {\n  const [theme, setTheme] = useState('light');\n  \n  return (\n    <ThemeContext.Provider value={{ theme, setTheme }}>\n      <div className=\"app\">\n        <Header />\n        <Main />\n        <Footer />\n      </div>\n    </ThemeContext.Provider>\n  );\n}\n\n// æ¶ˆè´¹è€…ç»„ä»¶ï¼ˆä½¿ç”¨ useContext Hookï¼‰\nfunction ThemedButton() {\n  const { theme, setTheme } = useContext(ThemeContext);\n  \n  return (\n    <button onClick={() => setTheme(theme === 'light' ? 'dark' : 'light')}>\n      Current theme: {theme}\n    </button>\n  );\n}\n\n// æˆ–ä½¿ç”¨ Consumer ç»„ä»¶\nfunction ThemedButton() {\n  return (\n    <ThemeContext.Consumer>\n      {({ theme, setTheme }) => (\n        <button onClick={() => setTheme(theme === 'light' ? 'dark' : 'light')}>\n          Current theme: {theme}\n        </button>\n      )}\n    </ThemeContext.Consumer>\n  );\n}\n```\n\n## 3. çŠ¶æ€ç®¡ç†åº“ï¼ˆå…¨å±€çŠ¶æ€ç®¡ç†ï¼‰\n\nä½¿ç”¨ Reduxã€MobX æˆ– Zustand ç­‰çŠ¶æ€ç®¡ç†åº“ï¼š\n\n```jsx\n// Redux ç¤ºä¾‹\n// store.js\nimport { createSlice, configureStore } from '@reduxjs/toolkit';\n\nconst counterSlice = createSlice({\n  name: 'counter',\n  initialState: { value: 0 },\n  reducers: {\n    increment: state => { state.value += 1 },\n    decrement: state => { state.value -= 1 }\n  }\n});\n\nexport const store = configureStore({\n  reducer: {\n    counter: counterSlice.reducer\n  }\n});\n\n// App.js\nimport { Provider } from 'react-redux';\nimport { store } from './store';\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <Counter />\n    </Provider>\n  );\n}\n\n// Counter.js\nimport { useSelector, useDispatch } from 'react-redux';\n\nfunction Counter() {\n  const count = useSelector(state => state.counter.value);\n  const dispatch = useDispatch();\n\n  return (\n    <div>\n      <button onClick={() => dispatch(increment())}>+</button>\n      <span>{count}</span>\n      <button onClick={() => dispatch(decrement())}>-</button>\n    </div>\n  );\n}\n```\n\n## 4. è‡ªå®šä¹‰äº‹ä»¶ï¼ˆå‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼‰\n\né€‚ç”¨äºéçˆ¶å­ç»„ä»¶é—´çš„é€šä¿¡ï¼š\n\n```jsx\n// eventBus.js\nclass EventBus {\n  constructor() {\n    this.events = {};\n  }\n\n  on(eventName, callback) {\n    if (!this.events[eventName]) {\n      this.events[eventName] = [];\n    }\n    this.events[eventName].push(callback);\n  }\n\n  emit(eventName, data) {\n    if (this.events[eventName]) {\n      this.events[eventName].forEach(callback => callback(data));\n    }\n  }\n\n  off(eventName, callback) {\n    if (this.events[eventName]) {\n      this.events[eventName] = this.events[eventName]\n        .filter(cb => cb !== callback);\n    }\n  }\n}\n\nexport const eventBus = new EventBus();\n\n// ComponentA.js\nfunction ComponentA() {\n  const sendMessage = () => {\n    eventBus.emit('message', 'Hello from A!');\n  };\n\n  return <button onClick={sendMessage}>Send Message</button>;\n}\n\n// ComponentB.js\nfunction ComponentB() {\n  const [message, setMessage] = useState('');\n\n  useEffect(() => {\n    const handleMessage = (msg) => setMessage(msg);\n    eventBus.on('message', handleMessage);\n    \n    return () => eventBus.off('message', handleMessage);\n  }, []);\n\n  return <div>Received: {message}</div>;\n}\n```\n\n## 5. Refs ä¼ é€’ï¼ˆçˆ¶ç»„ä»¶è®¿é—®å­ç»„ä»¶ï¼‰\n\nä½¿ç”¨ `useRef` å’Œ `forwardRef` å®ç°çˆ¶ç»„ä»¶å¯¹å­ç»„ä»¶çš„ç›´æ¥è®¿é—®ï¼š\n\n```jsx\n// å­ç»„ä»¶\nconst ChildComponent = forwardRef((props, ref) => {\n  const childMethod = () => {\n    console.log('Child method called');\n  };\n\n  useImperativeHandle(ref, () => ({\n    childMethod\n  }));\n\n  return <div>Child Component</div>;\n});\n\n// çˆ¶ç»„ä»¶\nfunction ParentComponent() {\n  const childRef = useRef();\n\n  const handleClick = () => {\n    childRef.current.childMethod();\n  };\n\n  return (\n    <div>\n      <ChildComponent ref={childRef} />\n      <button onClick={handleClick}>Call Child Method</button>\n    </div>\n  );\n}\n```\n\n## 6. URL å‚æ•°ï¼ˆè·¯ç”±é€šä¿¡ï¼‰\n\né€šè¿‡ URL å‚æ•°åœ¨ç»„ä»¶é—´ä¼ é€’æ•°æ®ï¼š\n\n```jsx\n// ä½¿ç”¨ React Router\nimport { useNavigate, useParams, useSearchParams } from 'react-router-dom';\n\n// å‘é€ç»„ä»¶\nfunction ComponentA() {\n  const navigate = useNavigate();\n\n  const handleClick = () => {\n    navigate('/component-b/123?name=test');\n  };\n\n  return <button onClick={handleClick}>Go to B</button>;\n}\n\n// æ¥æ”¶ç»„ä»¶\nfunction ComponentB() {\n  const { id } = useParams();\n  const [searchParams] = useSearchParams();\n  const name = searchParams.get('name');\n\n  return (\n    <div>\n      <p>ID: {id}</p>\n      <p>Name: {name}</p>\n    </div>\n  );\n}\n```\n\n## 7. localStorage/sessionStorage\n\né€šè¿‡æµè§ˆå™¨å­˜å‚¨å®ç°ç»„ä»¶é€šä¿¡ï¼š\n\n```jsx\n// ComponentA\nfunction ComponentA() {\n  const saveData = () => {\n    localStorage.setItem('sharedData', JSON.stringify({ message: 'Hello!' }));\n    // è§¦å‘è‡ªå®šä¹‰äº‹ä»¶é€šçŸ¥å…¶ä»–ç»„ä»¶\n    window.dispatchEvent(new Event('storage-update'));\n  };\n\n  return <button onClick={saveData}>Save Data</button>;\n}\n\n// ComponentB\nfunction ComponentB() {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    const handleStorage = () => {\n      const storedData = localStorage.getItem('sharedData');\n      if (storedData) {\n        setData(JSON.parse(storedData));\n      }\n    };\n\n    window.addEventListener('storage-update', handleStorage);\n    return () => window.removeEventListener('storage-update', handleStorage);\n  }, []);\n\n  return <div>Stored Message: {data?.message}</div>;\n}\n```\n\n## 8. ç»„åˆç»„ä»¶ï¼ˆCompound Componentsï¼‰\n\né€šè¿‡ç»„ä»¶ç»„åˆæ¨¡å¼å®ç°ç»„ä»¶é—´é€šä¿¡ï¼š\n\n```jsx\n// åˆ›å»º Context\nconst TabContext = React.createContext();\n\n// çˆ¶ç»„ä»¶\nfunction Tabs({ children, defaultIndex = 0 }) {\n  const [activeIndex, setActiveIndex] = useState(defaultIndex);\n\n  return (\n    <TabContext.Provider value={{ activeIndex, setActiveIndex }}>\n      <div className=\"tabs\">{children}</div>\n    </TabContext.Provider>\n  );\n}\n\n// å­ç»„ä»¶\nfunction TabList({ children }) {\n  return <div className=\"tab-list\">{children}</div>;\n}\n\nfunction Tab({ index, children }) {\n  const { activeIndex, setActiveIndex } = useContext(TabContext);\n  \n  return (\n    <button\n      className={activeIndex === index ? 'active' : ''}\n      onClick={() => setActiveIndex(index)}\n    >\n      {children}\n    </button>\n  );\n}\n\nfunction TabPanel({ index, children }) {\n  const { activeIndex } = useContext(TabContext);\n  \n  if (activeIndex !== index) return null;\n  return <div className=\"tab-panel\">{children}</div>;\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nfunction App() {\n  return (\n    <Tabs>\n      <TabList>\n        <Tab index={0}>Tab 1</Tab>\n        <Tab index={1}>Tab 2</Tab>\n      </TabList>\n      <TabPanel index={0}>Content 1</TabPanel>\n      <TabPanel index={1}>Content 2</TabPanel>\n    </Tabs>\n  );\n}\n```\n\n## 9. æœ€ä½³å®è·µå»ºè®®\n\n1. **é€‰æ‹©åˆé€‚çš„é€šä¿¡æ–¹å¼**ï¼š\n   - çˆ¶å­ç»„ä»¶ï¼šä¼˜å…ˆä½¿ç”¨ Props\n   - è·¨å±‚çº§ç»„ä»¶ï¼šè€ƒè™‘ä½¿ç”¨ Context\n   - å…¨å±€çŠ¶æ€ï¼šä½¿ç”¨çŠ¶æ€ç®¡ç†åº“\n   - éå…³è”ç»„ä»¶ï¼šè€ƒè™‘**äº‹ä»¶æ€»çº¿**æˆ–çŠ¶æ€ç®¡ç†\n2. **é¿å…è¿‡åº¦ä½¿ç”¨å…¨å±€çŠ¶æ€**ï¼š\n   - ä¼˜å…ˆè€ƒè™‘å±€éƒ¨çŠ¶æ€\n   - åˆç†åˆ’åˆ†çŠ¶æ€èŒƒå›´\n   - é¿å…ä¸å¿…è¦çš„ç»„ä»¶é‡æ¸²æŸ“\n3. **ä¿æŒå•å‘æ•°æ®æµ**ï¼š\n   - æ•°æ®æµå‘è¦æ¸…æ™°å¯é¢„æµ‹\n   - é¿å…åŒå‘æ•°æ®ç»‘å®š\n   - éµå¾ª React çš„æ•°æ®æµç†å¿µ\n4. **åˆç†ä½¿ç”¨æ€§èƒ½ä¼˜åŒ–**ï¼š\n   - ä½¿ç”¨ `useMemo` å’Œ `useCallback` ä¼˜åŒ–ä¼ é€’çš„å‡½æ•°å’Œå¯¹è±¡\n   - é€‚å½“ä½¿ç”¨ `React.memo` é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“\n   - æ³¨æ„äº‹ä»¶ç›‘å¬å™¨çš„æ¸…ç†\n5. **æ³¨æ„å†…å­˜æ³„æ¼**ï¼š\n   - åŠæ—¶æ¸…ç†äº‹ä»¶ç›‘å¬\n   - æ³¨æ„æ¸…ç†å®šæ—¶å™¨\n   - å–æ¶ˆä¸å¿…è¦çš„è®¢é˜…\n\né€šè¿‡åˆç†é€‰æ‹©å’Œç»„åˆè¿™äº›é€šä¿¡æ–¹å¼ï¼Œå¯ä»¥æ„å»ºå‡ºæ¸…æ™°ã€å¯ç»´æŠ¤çš„ React åº”ç”¨ã€‚é€‰æ‹©å“ªç§é€šä¿¡æ–¹å¼ä¸»è¦å–å†³äºï¼š\n- ç»„ä»¶ä¹‹é—´çš„å…³ç³»\n- é€šä¿¡çš„é¢‘ç‡\n- æ•°æ®çš„å¤æ‚åº¦\n- æ€§èƒ½è¦æ±‚\n- ç»´æŠ¤æˆæœ¬\n\n","a3c8b52deda05752a23dac9713e2b65c":"\n# React æ€§èƒ½ä¼˜åŒ–çš„æ€è·¯æœ‰å“ªäº›ï¼Ÿ\n\n`#react` \n\n## ç›®å½•\n<!-- toc -->\n ## 1. ç»„ä»¶æ¸²æŸ“ä¼˜åŒ– \n\n### 1.1. ä½¿ç”¨ React.memo é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“\n\n```javascript\n// ä½¿ç”¨ React.memo åŒ…è£…å‡½æ•°ç»„ä»¶\nconst MyComponent = React.memo(function MyComponent(props) {\n  /* æ¸²æŸ“é€»è¾‘ */\n  return (\n    // ...\n  );\n}, (prevProps, nextProps) => {\n  // å¯é€‰çš„æ¯”è¾ƒå‡½æ•°ï¼Œè¿”å› true åˆ™ä¸é‡æ–°æ¸²æŸ“\n  return prevProps.id === nextProps.id;\n});\n\n// å¯¹äºç±»ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ PureComponent\nclass MyPureComponent extends React.PureComponent {\n  render() {\n    return (\n      // ...\n    );\n  }\n}\n```\n\n### 1.2. ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ\n\n```javascript\nfunction ExpensiveComponent({ data }) {\n  // ç¼“å­˜è®¡ç®—ç»“æœ\n  const processedData = useMemo(() => {\n    return data.map(item => expensiveOperation(item));\n  }, [data]); // åªåœ¨ data æ”¹å˜æ—¶é‡æ–°è®¡ç®—\n\n  return (\n    <div>\n      {processedData.map(item => (\n        <div key={item.id}>{item.value}</div>\n      ))}\n    </div>\n  );\n}\n```\n\n### 1.3. ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°\n\n```javascript\nfunction ParentComponent() {\n  const [count, setCount] = useState(0);\n\n  // ç¼“å­˜å›è°ƒå‡½æ•°\n  const handleClick = useCallback(() => {\n    setCount(c => c + 1);\n  }, []); // ç©ºä¾èµ–æ•°ç»„ï¼Œå‡½æ•°æ°¸è¿œä¸ä¼šæ”¹å˜\n\n  return <ChildComponent onClick={handleClick} />;\n}\n```\n\n## 2. åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–\n\n### 2.1. ä½¿ç”¨åˆé€‚çš„ key\n\n```javascript\n// âŒ é”™è¯¯ç¤ºä¾‹ï¼šä½¿ç”¨ç´¢å¼•ä½œä¸º key\n{items.map((item, index) => (\n  <ListItem key={index} item={item} />\n))}\n\n// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨å”¯ä¸€æ ‡è¯†ç¬¦ä½œä¸º key\n{items.map(item => (\n  <ListItem key={item.id} item={item} />\n))}\n```\n\n### 2.2. è™šæ‹Ÿåˆ—è¡¨\n\nä½¿ç”¨ `react-window` æˆ– `react-virtualized` å¤„ç†é•¿åˆ—è¡¨ï¼š\n\n```javascript\nimport { FixedSizeList } from 'react-window';\n\nfunction VirtualList({ items }) {\n  const Row = ({ index, style }) => (\n    <div style={style}>\n      {items[index].name}\n    </div>\n  );\n\n  return (\n    <FixedSizeList\n      height={400}\n      width={300}\n      itemCount={items.length}\n      itemSize={35}\n    >\n      {Row}\n    </FixedSizeList>\n  );\n}\n```\n\n## 3. çŠ¶æ€ç®¡ç†ä¼˜åŒ–\n\n### 3.1. åˆç†æ‹†åˆ†çŠ¶æ€\n\n```javascript\n// âŒ é”™è¯¯ç¤ºä¾‹ï¼šæ‰€æœ‰çŠ¶æ€æ”¾åœ¨ä¸€èµ·\nconst [state, setState] = useState({\n  user: null,\n  posts: [],\n  comments: [],\n  settings: {}\n});\n\n// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šæ‹†åˆ†çŠ¶æ€\nconst [user, setUser] = useState(null);\nconst [posts, setPosts] = useState([]);\nconst [comments, setComments] = useState([]);\nconst [settings, setSettings] = useState({});\n```\n\n### 3.2. ä½¿ç”¨ useReducer ç®¡ç†å¤æ‚çŠ¶æ€\n\n```javascript\nconst initialState = { count: 0 };\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'increment':\n      return { count: state.count + 1 };\n    case 'decrement':\n      return { count: state.count - 1 };\n    default:\n      return state;\n  }\n}\n\nfunction Counter() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  return (\n    <>\n      Count: {state.count}\n      <button onClick={() => dispatch({ type: 'increment' })}>+</button>\n      <button onClick={() => dispatch({ type: 'decrement' })}>-</button>\n    </>\n  );\n}\n```\n\n## 4. ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½\n\n### 4.1. ä½¿ç”¨ React.lazy å’Œ Suspense\n\n```javascript\nconst OtherComponent = React.lazy(() => import('./OtherComponent'));\n\nfunction MyComponent() {\n  return (\n    <Suspense fallback={<Loading />}>\n      <OtherComponent />\n    </Suspense>\n  );\n}\n```\n\n### 4.2. è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²\n\n```javascript\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\nimport React, { Suspense } from 'react';\n\nconst Home = React.lazy(() => import('./routes/Home'));\nconst About = React.lazy(() => import('./routes/About'));\nconst Contact = React.lazy(() => import('./routes/Contact'));\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Suspense fallback={<div>Loading...</div>}>\n        <Routes>\n          <Route path=\"/\" element={<Home />} />\n          <Route path=\"/about\" element={<About />} />\n          <Route path=\"/contact\" element={<Contact />} />\n        </Routes>\n      </Suspense>\n    </BrowserRouter>\n  );\n}\n```\n\n## 5. é¿å…é‡å¤æ¸²æŸ“\n\n### 5.1. ä½¿ç”¨ CSS ä»£æ›¿ JS åŠ¨ç”»\n\n```javascript\n// âŒ ä½¿ç”¨ JS åŠ¨ç”»\nfunction AnimatedComponent() {\n  const [position, setPosition] = useState(0);\n  \n  useEffect(() => {\n    const animation = setInterval(() => {\n      setPosition(p => p + 1);\n    }, 16);\n    return () => clearInterval(animation);\n  }, []);\n\n  return <div style={{ transform: `translateX(${position}px)` }} />;\n}\n\n// âœ… ä½¿ç”¨ CSS åŠ¨ç”»\nconst AnimatedComponent = styled.div`\n  animation: slide 1s linear infinite;\n  \n  @keyframes slide {\n    from { transform: translateX(0); }\n    to { transform: translateX(100px); }\n  }\n`;\n```\n\n### 5.2. ä½¿ç”¨é˜²æŠ–å’ŒèŠ‚æµ\n\n```javascript\nimport { debounce, throttle } from 'lodash';\n\nfunction SearchComponent() {\n  // ä½¿ç”¨é˜²æŠ–å¤„ç†æœç´¢\n  const debouncedSearch = useCallback(\n    debounce((query) => {\n      // æ‰§è¡Œæœç´¢\n      performSearch(query);\n    }, 300),\n    []\n  );\n\n  // ä½¿ç”¨èŠ‚æµå¤„ç†æ»šåŠ¨\n  const throttledScroll = useCallback(\n    throttle((event) => {\n      // å¤„ç†æ»šåŠ¨\n      handleScroll(event);\n    }, 100),\n    []\n  );\n\n  useEffect(() => {\n    window.addEventListener('scroll', throttledScroll);\n    return () => window.removeEventListener('scroll', throttledScroll);\n  }, [throttledScroll]);\n\n  return (\n    <input\n      type=\"text\"\n      onChange={(e) => debouncedSearch(e.target.value)}\n    />\n  );\n}\n```\n\n## 6. ä¼˜åŒ–èµ„æºåŠ è½½\n\n### 6.1. å›¾ç‰‡æ‡’åŠ è½½\n\n```javascript\nfunction ImageComponent({ src, alt }) {\n  const imgRef = useRef();\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            imgRef.current.src = src;\n            observer.disconnect();\n          }\n        });\n      },\n      { threshold: 0.1 }\n    );\n\n    if (imgRef.current) {\n      observer.observe(imgRef.current);\n    }\n\n    return () => observer.disconnect();\n  }, [src]);\n\n  return <img ref={imgRef} alt={alt} />;\n}\n```\n\n### 6.2. é¢„åŠ è½½å…³é”®èµ„æº\n\n```javascript\nfunction App() {\n  useEffect(() => {\n    // é¢„åŠ è½½é‡è¦å›¾ç‰‡\n    const preloadImages = ['/logo.png', '/hero.jpg'];\n    preloadImages.forEach(src => {\n      const img = new Image();\n      img.src = src;\n    });\n\n    // é¢„åŠ è½½å…¶ä»–ç»„ä»¶\n    const preloadComponent = () => import('./HeavyComponent');\n  }, []);\n\n  return (\n    // ...\n  );\n}\n```\n\n## 7. å·¥å…·å’Œç›‘æ§\n\n### 7.1. ä½¿ç”¨ React DevTools è¿›è¡Œæ€§èƒ½åˆ†æ\n\n```javascript\n// å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ Profiler\nimport { Profiler } from 'react';\n\nfunction onRenderCallback(\n  id, // å‘ç”Ÿæäº¤çš„ Profiler æ ‘çš„ \"id\"\n  phase, // \"mount\" ï¼ˆé¦–æ¬¡æ¸²æŸ“ï¼‰æˆ– \"update\" ï¼ˆé‡æ–°æ¸²æŸ“ï¼‰\n  actualDuration, // æœ¬æ¬¡æ›´æ–°åœ¨æ¸²æŸ“å®Œæˆä¹‹å‰è€—è´¹çš„æ—¶é—´\n  baseDuration, // ä¼°è®¡ä¸ä½¿ç”¨ memoization çš„æƒ…å†µä¸‹æ¸²æŸ“æ•´é¢—å­æ ‘éœ€è¦çš„æ—¶é—´\n  startTime, // æœ¬æ¬¡æ›´æ–°å¼€å§‹æ¸²æŸ“çš„æ—¶é—´\n  commitTime, // æœ¬æ¬¡æ›´æ–°è¢«æäº¤çš„æ—¶é—´\n  interactions // å±äºæœ¬æ¬¡æ›´æ–°çš„ interactions çš„é›†åˆ\n) {\n  // è®°å½•æˆ–ä¸ŠæŠ¥æ€§èƒ½æ•°æ®\n  console.log(`${id} æ¸²æŸ“è€—æ—¶: ${actualDuration}`);\n}\n\nfunction MyApp() {\n  return (\n    <Profiler id=\"App\" onRender={onRenderCallback}>\n      <App />\n    </Profiler>\n  );\n}\n```\n\n## 8. å…¶ä»–ä¼˜åŒ–å»ºè®®\n\n1. **åˆç†ä½¿ç”¨ Context**\n   - é¿å…å°†é¢‘ç¹å˜åŒ–çš„å€¼æ”¾åœ¨ Context ä¸­\n   - è€ƒè™‘æ‹†åˆ† Context ä»¥å‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“\n2. **ä½¿ç”¨ Web Workers å¤„ç†å¤æ‚è®¡ç®—**\n   ```javascript\n   const worker = new Worker('worker.js');\n   \n   worker.postMessage({ data: complexData });\n   worker.onmessage = (event) => {\n     setResult(event.data);\n   };\n   ```\n\n3. **ä¼˜åŒ–ä¾èµ–åŒ…å¤§å°**\n   - ä½¿ç”¨ `import` è¯­æ³•è¿›è¡ŒæŒ‰éœ€åŠ è½½\n   - ä½¿ç”¨è¾ƒå°çš„æ›¿ä»£åŒ…\n   - å®šæœŸå®¡æŸ¥å’Œæ›´æ–°ä¾èµ–\n\n4. **æœåŠ¡ç«¯æ¸²æŸ“ (SSR)**\n   - è€ƒè™‘ä½¿ç”¨ Next.js æˆ–å…¶ä»– SSR æ¡†æ¶\n   - å®ç°é¦–å±å¿«é€ŸåŠ è½½\n   - ä¼˜åŒ– SEO\n\n5. **ä½¿ç”¨æ€§èƒ½ç›‘æ§å·¥å…·**\n   - React DevTools\n   - Chrome Performance é¢æ¿\n   - Lighthouse\n   - è‡ªå®šä¹‰æ€§èƒ½æŒ‡æ ‡ç›‘æ§\n\nè®°ä½ï¼Œæ€§èƒ½ä¼˜åŒ–åº”è¯¥æ˜¯æ¸è¿›å¼çš„ï¼Œå…ˆæ‰¾å‡ºçœŸæ­£çš„æ€§èƒ½ç“¶é¢ˆï¼Œå†æœ‰é’ˆå¯¹æ€§åœ°è¿›è¡Œä¼˜åŒ–ã€‚ä¸è¦è¿‡æ—©ä¼˜åŒ–ï¼Œä¹Ÿä¸è¦è¿‡åº¦ä¼˜åŒ–ã€‚","47d2c7c55e9a5ef98071055b7fb3e563":"\n# useLayoutEffect å’Œ useEffect\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ‰§è¡Œæ—¶æœºçš„åŒºåˆ« \n\n```jsx\n// useEffectï¼šæ¸²æŸ“å®Œæˆåå¼‚æ­¥æ‰§è¡Œ\nuseEffect(() => {\n  // åœ¨æµè§ˆå™¨å®Œæˆç»˜åˆ¶ä¹‹åæ‰§è¡Œ\n  console.log('useEffect æ‰§è¡Œ');\n}, []);\n\n// useLayoutEffectï¼šæ¸²æŸ“å®Œæˆå‰åŒæ­¥æ‰§è¡Œ\nuseLayoutEffect(() => {\n  // åœ¨æµè§ˆå™¨ç»˜åˆ¶ä¹‹å‰æ‰§è¡Œ\n  console.log('useLayoutEffect æ‰§è¡Œ');\n}, []);\n```\n\næ‰§è¡Œé¡ºåºï¼š\n1. React æ›´æ–° DOM\n2. useLayoutEffect æ‰§è¡Œ\n3. æµè§ˆå™¨ç»˜åˆ¶å±å¹•\n4. useEffect æ‰§è¡Œ\n\n## 2. æ€§èƒ½å½±å“\n\n### 2.1. useEffect\n\n```jsx\nuseEffect(() => {\n  // å¼‚æ­¥æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡æµè§ˆå™¨ç»˜åˆ¶\n  expensiveOperation();\n}, []);\n```\n\n### 2.2. useLayoutEffect\n\n```jsx\nuseLayoutEffect(() => {\n  // åŒæ­¥æ‰§è¡Œï¼Œä¼šé˜»å¡æµè§ˆå™¨ç»˜åˆ¶\n  expensiveOperation();\n}, []);\n```\n\n## 3. ä½¿ç”¨åœºæ™¯\n\n### 3.1. useLayoutEffect é€‚ç”¨åœºæ™¯\n\n```jsx\n// 1. éœ€è¦ç«‹å³æµ‹é‡ DOM çš„åœºæ™¯\nuseLayoutEffect(() => {\n  const dimensions = element.getBoundingClientRect();\n  setMeasurements(dimensions);\n}, []);\n\n// 2. é˜²æ­¢é—ªçƒçš„åœºæ™¯\nuseLayoutEffect(() => {\n  element.style.opacity = 1; // åœ¨ç”¨æˆ·çœ‹åˆ°ä¹‹å‰å°±å®Œæˆè®¾ç½®\n}, []);\n```\n\n### 3.2. useEffect é€‚ç”¨åœºæ™¯\n```jsx\n// 1. æ•°æ®è·å–\nuseEffect(() => {\n  fetchData().then(data => setData(data));\n}, []);\n\n// 2. è®¢é˜…äº‹ä»¶\nuseEffect(() => {\n  const handler = () => console.log('scroll');\n  window.addEventListener('scroll', handler);\n  return () => window.removeEventListener('scroll', handler);\n}, []);\n```\n\n## 4. å…³é”®åŒºåˆ«æ€»ç»“\n\n| ç‰¹æ€§ | useEffect | useLayoutEffect |\n|------|-----------|----------------|\n| æ‰§è¡Œæ—¶æœº | æ¸²æŸ“åå¼‚æ­¥æ‰§è¡Œ | æ¸²æŸ“å‰åŒæ­¥æ‰§è¡Œ |\n| æµè§ˆå™¨ç»˜åˆ¶ | ä¸é˜»å¡ | é˜»å¡ |\n| æ€§èƒ½å½±å“ | è¾ƒå° | å¯èƒ½è¾ƒå¤§ |\n| é€‚ç”¨åœºæ™¯ | å¤§å¤šæ•°å‰¯ä½œç”¨ | DOM æµ‹é‡å’Œæ›´æ–° |\n\n## 5. æœ€ä½³å®è·µ\n\n### 5.1. é»˜è®¤ä½¿ç”¨ useEffect\n\n```jsx\n// å¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨ useEffect å³å¯\nuseEffect(() => {\n  // å‰¯ä½œç”¨ä»£ç \n}, [dependencies]);\n```\n\n### 5.2. ä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨ useLayoutEffect\n\n```jsx\n// å½“éœ€è¦åŒæ­¥æ›´æ–° DOM æˆ–é˜²æ­¢é—ªçƒæ—¶\nuseLayoutEffect(() => {\n  // DOM æ“ä½œä»£ç \n}, [dependencies]);\n```\n\n## 6. å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ\n\n### 6.1. é—ªçƒé—®é¢˜\n```jsx\n// é—®é¢˜ä»£ç \nconst [position, setPosition] = useState(0);\nuseEffect(() => {\n  setPosition(100); // å¯èƒ½å¯¼è‡´é—ªçƒ\n}, []);\n\n// è§£å†³æ–¹æ¡ˆ\nuseLayoutEffect(() => {\n  setPosition(100); // ä¸ä¼šé—ªçƒ\n}, []);\n```\n\n### 6.2. æ€§èƒ½é—®é¢˜\n\n```jsx\n// é¿å…åœ¨ useLayoutEffect ä¸­è¿›è¡Œè€—æ—¶æ“ä½œ\nuseLayoutEffect(() => {\n  // ä¸æ¨è\n  heavyComputation();\n  \n  // æ¨èï¼šç§»åˆ° useEffect ä¸­\n  requestAnimationFrame(() => {\n    heavyComputation();\n  });\n}, []);\n```\n\n## 7. æ³¨æ„äº‹é¡¹\n\n- SSRï¼ˆæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼‰æ³¨æ„äº‹é¡¹ï¼š\n\n```jsx\n// useLayoutEffect åœ¨ SSR ä¸­ä¼šè­¦å‘Š\n// å¯ä»¥ä½¿ç”¨æ¡ä»¶åˆ¤æ–­\nconst useIsomorphicLayoutEffect = \n  typeof window !== 'undefined' ? useLayoutEffect : useEffect;\n```\n\n- é¿å…è¿‡åº¦ä½¿ç”¨ï¼š\n```jsx\n// ä¸æ¨è\nuseLayoutEffect(() => {\n  // éå¿…è¦çš„åŒæ­¥æ“ä½œ\n  setSimpleState(newValue);\n}, []);\n\n// æ¨è\nuseEffect(() => {\n  // ä½¿ç”¨ useEffect å³å¯\n  setSimpleState(newValue);\n}, []);\n```\n\n## 8. é€‰æ‹©å»ºè®®\n\n- é»˜è®¤ä½¿ç”¨ useEffect\n- å½“å‡ºç°ä»¥ä¸‹æƒ…å†µæ—¶è€ƒè™‘ä½¿ç”¨ useLayoutEffectï¼š\n\t- éœ€è¦åŒæ­¥æµ‹é‡ DOM\n\t- éœ€è¦åœ¨è§†è§‰æ›´æ–°ä¹‹å‰ä¿®æ”¹ DOM\n\t- å‡ºç°é—ªçƒé—®é¢˜éœ€è¦è§£å†³\n- åœ¨ä½¿ç”¨ useLayoutEffect æ—¶æ³¨æ„æ€§èƒ½å½±å“\n","541769a4438256c4b4137fad8cbc70a7":"\n# react-dom ä»‹ç»\n\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åŸºæœ¬ä½œç”¨ \n\n- react-dom æ˜¯ React çš„é…å¥—åº“ï¼Œä¸»è¦è´Ÿè´£å°† React ç»„ä»¶æ¸²æŸ“åˆ°æµè§ˆå™¨çš„ DOM ä¸­\n- å®ƒæ˜¯è¿æ¥ React `è™šæ‹Ÿ DOM` å’Œ `å®é™…æµè§ˆå™¨ DOM` çš„æ¡¥æ¢\n- ä» React 16 å¼€å§‹ï¼ŒReact è¢«æ‹†åˆ†ä¸º `react æ ¸å¿ƒåº“` å’Œ `react-dom` ä¸¤ä¸ªåŒ…\n\n## 2. å¸¸ç”¨æ–¹æ³•\n\n### 2.1. ReactDOM.render()\n\n```jsx\nReactDOM.render(element, container[, callback])\n```\n\n- ç”¨äºå°† React å…ƒç´ æ¸²æŸ“åˆ°æŒ‡å®šçš„ DOM å®¹å™¨ä¸­\n- è¿”å›å¯¹ç»„ä»¶çš„å¼•ç”¨\n- è¿™æ˜¯æœ€åŸºç¡€ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³• [2]\n\n### 2.2. ReactDOM.createRoot()\n\n```jsx\nconst root = ReactDOM.createRoot(container)\nroot.render(element)\n```\n\n- React 18 ä¸­å¼•å…¥çš„æ–° API\n- ç”¨äºåˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œæ”¯æŒ`å¹¶å‘æ¸²æŸ“`ç‰¹æ€§\n\n### 2.3. ReactDOM.unmountComponentAtNode()\n\n```jsx\nReactDOM.unmountComponentAtNode(container)\n```\n\n- ä» DOM ä¸­ç§»é™¤å·²æŒ‚è½½çš„ React ç»„ä»¶\n- æ¸…ç†ç»„ä»¶çš„äº‹ä»¶å¤„ç†å™¨å’Œ state\n\n### 2.4. ReactDOM.findDOMNode()\n\n```jsx\nReactDOM.findDOMNode(component)\n```\n\n- ç”¨äºè·å–å·²æŒ‚è½½ç»„ä»¶çš„ DOM èŠ‚ç‚¹\n- æ³¨æ„ï¼šè¿™ä¸ªæ–¹æ³•åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å·²è¢«åºŸå¼ƒ\n\n## 3. æœåŠ¡å™¨ç«¯æ¸²æŸ“æ–¹æ³•\n\n- `ReactDOM.hydrate()`ï¼šç”¨äºæœåŠ¡å™¨ç«¯æ¸²æŸ“çš„æ°´åˆè¿‡ç¨‹\n- `ReactDOMServer.renderToString()`ï¼šå°† React ç»„ä»¶æ¸²æŸ“ä¸ºåˆå§‹ HTML\n\n## 4. Portal ç›¸å…³\n\n- å…è®¸å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°å­˜åœ¨äºçˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹ä¸­\n- å¸¸ç”¨äºæ¨¡æ€æ¡†ã€å¼¹å‡ºå±‚ç­‰åœºæ™¯\n\n```jsx\nReactDOM.createPortal(child, container)\n```\n\n## 5. ç‰¹ç‚¹å’Œæ³¨æ„äº‹é¡¹\n\n- react-dom æ˜¯ä¸“é—¨ç”¨äº Web å¹³å°çš„åŒ…\n- ç§»åŠ¨ç«¯å¼€å‘éœ€è¦ä½¿ç”¨ react-native è€Œä¸æ˜¯ react-dom\n- åœ¨ç°ä»£ React åº”ç”¨ä¸­ï¼Œæ¨èä½¿ç”¨ createRoot API è€Œä¸æ˜¯ä¼ ç»Ÿçš„ render æ–¹æ³•\n\n## 6. ä½¿ç”¨åœºæ™¯\n\n- åˆ›å»ºæ–°çš„ React åº”ç”¨æ—¶å¿…é¡»å®‰è£…\n- ç”¨äºæ„å»ºæµè§ˆå™¨ç«¯çš„ React åº”ç”¨\n- åœ¨æµ‹è¯•ç¯å¢ƒä¸­ç”¨äºæ¸²æŸ“ç»„ä»¶\n\n## 7. ä¸å…¶ä»–åº“çš„å…³ç³»\n\n- react-dom æ˜¯ React ç”Ÿæ€ç³»ç»Ÿä¸­çš„æ ¸å¿ƒåº“ä¹‹ä¸€\n- é€šå¸¸ä¸ react-routerã€redux ç­‰å…¶ä»–åº“ä¸€èµ·ä½¿ç”¨\n- åœ¨ Next.js ç­‰æ¡†æ¶ä¸­ä¹Ÿæ˜¯å¿…éœ€çš„ä¾èµ– \n\n## 8. ä½¿ç”¨ç¤ºä¾‹\n\n```jsx\n// ä¼ ç»Ÿæ–¹å¼\nimport ReactDOM from 'react-dom';\nReactDOM.render(<App />, document.getElementById('root'));\n\n// React 18 æ–¹å¼\nimport ReactDOM from 'react-dom/client';\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(<App />);\n```\n","8686080866dc55e786c958d97109835a":"\n# æ·±å…¥æ¢è®¨ React äº‹ä»¶ç³»ç»Ÿçš„å„ä¸ªæ–¹é¢\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. React äº‹ä»¶ç³»ç»Ÿçš„è®¾è®¡ç†å¿µ \n\n### 1.1. åˆæˆäº‹ä»¶ï¼ˆSyntheticEventï¼‰\n\n- React å®ç°äº†ä¸€ä¸ªåˆæˆäº‹ä»¶å±‚ï¼Œå°†æµè§ˆå™¨åŸç”Ÿäº‹ä»¶ç»Ÿä¸€å°è£…ä¸º`åˆæˆäº‹ä»¶`\n- æŠ¹å¹³å·®å¼‚ï¼Œç¡®ä¿äº‹ä»¶åœ¨ä¸åŒæµè§ˆå™¨ä¸­çš„è¡Œä¸ºä¸€è‡´\n- ä¼˜åŒ–æ€§èƒ½ï¼Œé€šè¿‡`äº‹ä»¶å§”æ‰˜`å’Œ`å¯¹è±¡æ± `æ¥ç®¡ç†äº‹ä»¶å¯¹è±¡\n\n### 1.2. äº‹ä»¶å§”æ‰˜ï¼ˆEvent Delegationï¼‰\n\n- React å°†å¤§å¤šæ•°äº‹ä»¶éƒ½å§”æ‰˜åˆ° document èŠ‚ç‚¹ä¸Šï¼ˆåœ¨ React 17 ä¹‹åæ”¹ä¸º root èŠ‚ç‚¹ï¼‰\n\t-  React 17ä¹‹å‰ï¼Œäº‹ä»¶éƒ½å§”æ‰˜åˆ° document ä¸Š\n\t- React 17ä¹‹åï¼Œäº‹ä»¶å§”æ‰˜åˆ° root å…ƒç´ ä¸Š\n- å‡å°‘å†…å­˜æ¶ˆè€—ï¼Œæé«˜æ€§èƒ½\n- åŠ¨æ€ç»‘å®šï¼Œæ”¯æŒç»„ä»¶åŠ¨æ€åŠ è½½\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241030-1.png)\n\n## 2. äº‹ä»¶ç³»ç»Ÿå®ç°åŸç†\n\n### 2.1. äº‹ä»¶æ³¨å†Œ\n\næ¸²æŸ“åçš„çœŸå®`DOM`ç»‘å®šçš„äº‹ä»¶å‡½æ•°éƒ½è¢«æ¢æˆäº†`ç©ºå‡½æ•°`\n\n```jsx\n// React äº‹ä»¶æ³¨å†Œ\n<button onClick={handleClick}>\n  Click me\n</button>\n\n// å®é™…è½¬æ¢ä¸º\ndocument.addEventListener('click', dispatchEvent, false);\n```\n\n```javascript hl:18,6,4\n// ç±»ç»„ä»¶ä¸­çš„äº‹ä»¶å¤„ç†\nclass Component extends React.Component {\n  handleClick = (e) => {\n    // e æ˜¯åˆæˆäº‹ä»¶å¯¹è±¡\n    e.preventDefault();\n    // é˜»æ­¢äº‹ä»¶å†’æ³¡\n    e.stopPropagation();\n  }\n  \n  render() {\n    return <button onClick={this.handleClick}>Click</button>\n  }\n}\n\n// å‡½æ•°ç»„ä»¶ä¸­çš„äº‹ä»¶å¤„ç†\nfunction Component() {\n  const handleClick = (e) => {\n    // è®¿é—®åŸç”Ÿäº‹ä»¶\n    console.log(e.nativeEvent); \n  }\n  \n  return <button onClick={handleClick}>Click</button>\n}\n\n```\n\n### 2.2. äº‹ä»¶æ± \n\n### 2.3. React 16 åŠä¹‹å‰ç‰ˆæœ¬\n\näº‹ä»¶æ± æ˜¯ React 16 åŠä¹‹å‰ç‰ˆæœ¬ä¸­çš„ä¸€ä¸ªæ€§èƒ½ä¼˜åŒ–æœºåˆ¶ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šReact ä¼šåœ¨å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªäº‹ä»¶å¯¹è±¡æ± ï¼Œå½“äº‹ä»¶è¢«è§¦å‘æ—¶ï¼ŒReact ä¼šä»æ± å­ä¸­å¤ç”¨äº‹ä»¶å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½åˆ›å»ºæ–°çš„äº‹ä»¶å¯¹è±¡ã€‚åœ¨äº‹ä»¶å¤„ç†å®Œæˆåï¼Œè¿™ä¸ªäº‹ä»¶å¯¹è±¡ä¼šè¢«æ¸…ç©ºå¹¶æ”¾å›æ± å­ä¸­ä¾›ä¸‹æ¬¡ä½¿ç”¨ã€‚\n\n```jsx\n// é—®é¢˜ç¤ºä¾‹\nclass Component extends React.Component {\n  handleChange = (e) => {\n    // âŒ é”™è¯¯çš„ä½¿ç”¨æ–¹å¼\n    setTimeout(() => {\n      console.log(e.target.value); // æ— æ³•è®¿é—®ï¼Œå› ä¸ºäº‹ä»¶å¯¹è±¡å·²è¢«æ¸…ç©º\n    }, 0);\n    \n    // âœ… æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼ - æ–¹æ³•1ï¼šè°ƒç”¨ persist()\n    e.persist();\n    setTimeout(() => {\n      console.log(e.target.value); // ç°åœ¨å¯ä»¥æ­£å¸¸è®¿é—®äº†\n    }, 0);\n    \n    // âœ… æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼ - æ–¹æ³•2ï¼šæå‰ä¿å­˜éœ€è¦çš„å€¼\n    const value = e.target.value;\n    setTimeout(() => {\n      console.log(value);\n    }, 0);\n  }\n\n  render() {\n    return <input onChange={this.handleChange} />;\n  }\n}\n\n```\n\n#### 2.3.1. React 17\n\nReact 17 å®Œå…¨ç§»é™¤äº†äº‹ä»¶æ± æœºåˆ¶ï¼ŒåŸå› æ˜¯ï¼š\n- ç°ä»£æµè§ˆå™¨æ€§èƒ½æå‡ï¼Œ`å¯¹è±¡åˆ›å»ºçš„å¼€é”€`ä¸å†æ˜¯ä¸»è¦é—®é¢˜\n- äº‹ä»¶æ± æœºåˆ¶ç»å¸¸å¯¼è‡´å›°æƒ‘å’Œ bug\n- ä»£ç ç»´æŠ¤æ€§æå‡æ›´é‡è¦\n\n```javascript\n// React 17+ çš„äº‹ä»¶å¤„ç†\nfunction Component() {\n  const handleClick = (e) => {\n    // æ— éœ€è°ƒç”¨ e.persist()\n    setTimeout(() => {\n      console.log(e.type); // æ­£å¸¸å·¥ä½œ\n      console.log(e.target); // æ­£å¸¸å·¥ä½œ\n    }, 0);\n  };\n\n  return <button onClick={handleClick}>Click</button>;\n}\n\n```\n\n#### 2.3.2. æ€»ç»“\n\n- äº‹ä»¶æ± æ˜¯ React 16 åŠä¹‹å‰ç‰ˆæœ¬çš„ä¸€ä¸ªæ€§èƒ½ä¼˜åŒ–æœºåˆ¶\n- å®ƒé€šè¿‡å¤ç”¨äº‹ä»¶å¯¹è±¡æ¥å‡å°‘å†…å­˜åˆ†é…å’Œåƒåœ¾å›æ”¶\n- åœ¨ React 17 ä¸­è¢«å®Œå…¨ç§»é™¤ï¼Œä½¿å¾—äº‹ä»¶å¤„ç†æ›´ç›´è§‚å’Œå¯é¢„æµ‹\n- ç§»é™¤äº‹ä»¶æ± åï¼Œä¸å†éœ€è¦è°ƒç”¨ `e.persist()`\n- è™½ç„¶æ²¡æœ‰äº†äº‹ä»¶æ± ï¼Œä½†åœ¨å¤„ç†å¤§é‡äº‹ä»¶æ—¶ä»éœ€æ³¨æ„æ€§èƒ½ä¼˜åŒ–\n\n## 3. å¸¸ç”¨çš„äº‹ä»¶å¤„ç†æ–¹å¼\n\n### 3.1. ç±»ç»„ä»¶ä¸­çš„äº‹ä»¶å¤„ç†\n\n```jsx hl:3\nclass MyComponent extends React.Component {\n    handleClick = (e) => {\n        // ä½¿ç”¨ç®­å¤´å‡½æ•°è‡ªåŠ¨ç»‘å®šthis\n        this.setState({ clicked: true });\n    }\n\n    render() {\n        return <button onClick={this.handleClick}>Click</button>;\n    }\n}\n```\n\n### 3.2. å‡½æ•°ç»„ä»¶ä¸­çš„äº‹ä»¶å¤„ç†\n\n```jsx\nfunction MyComponent() {\n    const handleClick = useCallback((e) => {\n        // ä½¿ç”¨ useCallback ä¼˜åŒ–æ€§èƒ½\n        console.log('clicked');\n    }, []);\n\n    return <button onClick={handleClick}>Click</button>;\n}\n```\n\n## 4. äº‹ä»¶å¤„ç†æœ€ä½³å®è·µ\n\n### 4.1. æ€§èƒ½ä¼˜åŒ–\n\n```jsx\n// ä½¿ç”¨é˜²æŠ–æˆ–èŠ‚æµ\nimport { debounce } from 'lodash';\n\nfunction SearchComponent() {\n    const handleSearch = debounce((value) => {\n        // æ‰§è¡Œæœç´¢\n    }, 300);\n\n    return <input onChange={(e) => handleSearch(e.target.value)} />;\n}\n```\n\n### 4.2. äº‹ä»¶è§£ç»‘\n\n```jsx\nfunction Component() {\n    useEffect(() => {\n        const handleScroll = () => {\n            console.log('scrolling');\n        };\n        window.addEventListener('scroll', handleScroll);\n        \n        // æ¸…ç†å‡½æ•°\n        return () => {\n            window.removeEventListener('scroll', handleScroll);\n        };\n    }, []);\n}\n```\n\n## 5. æ³¨æ„äº‹é¡¹å’Œå¸¸è§é—®é¢˜\n\n### 5.1. Reactäº‹ä»¶å’ŒåŸç”Ÿäº‹ä»¶æ‰§è¡Œé¡ºåº\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241030-2.png)\n\n### 5.2. äº‹ä»¶å‘½å\n\n- React äº‹ä»¶é‡‡ç”¨é©¼å³°å‘½åï¼ˆonClick, onSubmitï¼‰\n- åŸç”Ÿäº‹ä»¶å…¨å°å†™ï¼ˆonclick, onsubmitï¼‰\n\n### 5.3. é˜»æ­¢é»˜è®¤è¡Œä¸º\n```jsx hl:3\n// Reactä¸­é˜»æ­¢é»˜è®¤è¡Œä¸º\nfunction handleSubmit(e) {\n    e.preventDefault(); // ä½¿ç”¨åˆæˆäº‹ä»¶å¯¹è±¡çš„æ–¹æ³•\n    // è€Œä¸æ˜¯ return false\n}\n```\n\n### 5.4. äº‹ä»¶ä¼ å‚\n\n```jsx\n// æ¨èæ–¹å¼\n<button onClick={(e) => handleClick(id, e)}>Click</button>\n\n// æˆ–ä½¿ç”¨ bind\n<button onClick={handleClick.bind(this, id)}>Click</button>\n```\n\n## 6. ç‰¹æ®Šåœºæ™¯å¤„ç†\n\n### 6.1. å¤„ç†æ–‡æ¡£çº§äº‹ä»¶\n\n```jsx\nuseEffect(() => {\n    const handleClickOutside = (event) => {\n        if (ref.current && !ref.current.contains(event.target)) {\n            onClickOutside();\n        }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n        document.removeEventListener('mousedown', handleClickOutside);\n    };\n}, [onClickOutside]);\n```\n\n### 6.2. è‡ªå®šä¹‰äº‹ä»¶\n\n```jsx\nconst customEvent = new CustomEvent('myEvent', {\n    detail: { data: 'some data' }\n});\nelement.dispatchEvent(customEvent);\n```\n\n## 7. è°ƒè¯•æŠ€å·§\n\n### 7.1. äº‹ä»¶ç›‘å¬å™¨æ£€æŸ¥\n\n```jsx\n// å¼€å‘ç¯å¢ƒä¸‹æ£€æŸ¥äº‹ä»¶ç»‘å®š\nuseEffect(() => {\n    console.log('Event listeners:', getEventListeners(document));\n}, []);\n```\n\n### 7.2. äº‹ä»¶è§¦å‘é¡ºåº\n```jsx\n<div onClick={() => console.log('div')}> // ç¬¬ä¸‰ä¸ªè§¦å‘\n    <span onClick={() => console.log('span')}> // ç¬¬äºŒä¸ªè§¦å‘\n        <button onClick={() => console.log('button')}>Click</button> // ç¬¬ä¸€ä¸ªè§¦å‘\n    </span>\n</div>\n```\n\n## 8. æ€§èƒ½è€ƒè™‘\n\n- ä½¿ç”¨ useCallback ç¼“å­˜äº‹ä»¶å¤„ç†å‡½æ•°\n- é¿å…åœ¨æ¸²æŸ“æ–¹æ³•ä¸­åˆ›å»ºæ–°çš„å‡½æ•°\n- åˆç†ä½¿ç”¨äº‹ä»¶å§”æ‰˜\n- åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„äº‹ä»¶ç›‘å¬å™¨\n\n","e86e43d68260516da45b4b8951b64409":"\n# React ä¸­å®ç°å¦‚ä½•å®ç°å¼‚æ­¥åŠ è½½ç»„ä»¶\n\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. React.lazy å’Œ Suspenseï¼ˆæ¨èæ–¹å¼ï¼‰ \n\nè¿™æ˜¯ React 16.6+ å®˜æ–¹æä¾›çš„å¼‚æ­¥ç»„ä»¶è§£å†³æ–¹æ¡ˆï¼š\n\n```jsx\n// 1. åŸºç¡€ç”¨æ³•\nimport React, { Suspense } from 'react';\n\n// ä½¿ç”¨ React.lazy åŠ¨æ€å¼•å…¥ç»„ä»¶\nconst LazyComponent = React.lazy(() => import('./LazyComponent'));\n\nfunction App() {\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <LazyComponent />\n    </Suspense>\n  );\n}\n\n// 2. å¤šä¸ªå¼‚æ­¥ç»„ä»¶\nconst LazyComponent1 = React.lazy(() => import('./LazyComponent1'));\nconst LazyComponent2 = React.lazy(() => import('./LazyComponent2'));\n\nfunction App() {\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <div>\n        <LazyComponent1 />\n        <LazyComponent2 />\n      </div>\n    </Suspense>\n  );\n}\n\n// 3. åµŒå¥— Suspense\nfunction App() {\n  return (\n    <Suspense fallback={<div>Loading outer...</div>}>\n      <div>\n        <h1>Main Content</h1>\n        <Suspense fallback={<div>Loading inner...</div>}>\n          <LazyComponent />\n        </Suspense>\n      </div>\n    </Suspense>\n  );\n}\n```\n\n## 2. è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²\n\nåœ¨ React Router ä¸­ä½¿ç”¨å¼‚æ­¥ç»„ä»¶ï¼š\n\n```jsx\n// 1. åŸºç¡€è·¯ç”±æ‡’åŠ è½½\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport React, { Suspense } from 'react';\n\nconst Home = React.lazy(() => import('./routes/Home'));\nconst About = React.lazy(() => import('./routes/About'));\nconst User = React.lazy(() => import('./routes/User'));\n\nfunction App() {\n  return (\n    <Router>\n      <Suspense fallback={<div>Loading...</div>}>\n        <Switch>\n          <Route exact path=\"/\" component={Home} />\n          <Route path=\"/about\" component={About} />\n          <Route path=\"/user\" component={User} />\n        </Switch>\n      </Suspense>\n    </Router>\n  );\n}\n\n// 2. åˆ›å»ºå¯é‡ç”¨çš„å¼‚æ­¥è·¯ç”±ç»„ä»¶\nconst AsyncRoute = ({ component: Component, ...rest }) => (\n  <Route\n    {...rest}\n    render={props => (\n      <Suspense fallback={<div>Loading...</div>}>\n        <Component {...props} />\n      </Suspense>\n    )}\n  />\n);\n\n// ä½¿ç”¨\nfunction App() {\n  return (\n    <Router>\n      <Switch>\n        <AsyncRoute exact path=\"/\" component={Home} />\n        <AsyncRoute path=\"/about\" component={About} />\n        <AsyncRoute path=\"/user\" component={User} />\n      </Switch>\n    </Router>\n  );\n}\n```\n\n## 3. è‡ªå®šä¹‰å¼‚æ­¥ç»„ä»¶å®ç°\n\nå¦‚æœéœ€è¦æ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œå¯ä»¥è‡ªå·±å®ç°å¼‚æ­¥ç»„ä»¶ï¼š\n\n### 3.1. åŸºäº Class ç»„ä»¶çš„å®ç°\n\n```jsx hl:13\n// 1. åŸºäº Class ç»„ä»¶çš„å®ç°\nclass AsyncComponent extends React.Component {\n  state = {\n    Component: null\n  };\n\n  componentDidMount() {\n    this.loadComponent();\n  }\n\n  loadComponent = async () => {\n    const { loader } = this.props;\n    const Component = await loader();\n    this.setState({ Component });\n  };\n\n  render() {\n    const { Component } = this.state;\n    const { fallback, ...props } = this.props;\n\n    return Component ? <Component {...props} /> : fallback;\n  }\n}\n\n// ä½¿ç”¨æ–¹å¼\nconst AsyncHome = props => (\n  <AsyncComponent\n    loader={() => import('./Home')}\n    fallback={<div>Loading...</div>}\n    {...props}\n  />\n);\n\n```\n\n### 3.2. åŸºäº Hooks çš„å®ç°\n\n```javascript\n\n// 2. åŸºäº Hooks çš„å®ç°\nfunction useAsync(loader) {\n  const [Component, setComponent] = React.useState(null);\n\n  React.useEffect(() => {\n    loader().then(comp => {\n      setComponent(comp.default || comp);\n    });\n  }, [loader]);\n\n  return Component;\n}\n\nfunction AsyncComponent({ loader, fallback, ...props }) {\n  const Component = useAsync(loader);\n  return Component ? <Component {...props} /> : fallback;\n}\n```\n\n## 4. é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶\n\n### 4.1. ä½¿ç”¨ Error Boundary\n\n```jsx hl:5\n// 1. ä½¿ç”¨ Error Boundary\nclass ErrorBoundary extends React.Component {\n  state = { hasError: false };\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.error('Error:', error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <div>Something went wrong!</div>;\n    }\n    return this.props.children;\n  }\n}\n\n// ä½¿ç”¨\nfunction App() {\n  return (\n    <ErrorBoundary>\n      <Suspense fallback={<div>Loading...</div>}>\n        <LazyComponent />\n      </Suspense>\n    </ErrorBoundary>\n  );\n}\n\n```\n\n### 4.2. å¸¦é‡è¯•æœºåˆ¶çš„å¼‚æ­¥ç»„ä»¶\n\n```javascript\n\n// 2. å¸¦é‡è¯•æœºåˆ¶çš„å¼‚æ­¥ç»„ä»¶\nfunction RetryableAsyncComponent({ loader, maxRetries = 3, ...props }) {\n  const [error, setError] = React.useState(null);\n  const [retries, setRetries] = React.useState(0);\n  const [Component, setComponent] = React.useState(null);\n\n  const loadComponent = async () => {\n    try {\n      const comp = await loader();\n      setComponent(comp.default || comp);\n      setError(null);\n    } catch (err) {\n      setError(err);\n      if (retries < maxRetries) {\n        setTimeout(() => {\n          setRetries(r => r + 1);\n          loadComponent();\n        }, Math.pow(2, retries) * 1000); // æŒ‡æ•°é€€é¿\n      }\n    }\n  };\n\n  React.useEffect(() => {\n    loadComponent();\n  }, []);\n\n  if (error && retries >= maxRetries) {\n    return <div>Failed to load component after {maxRetries} retries</div>;\n  }\n\n  return Component ? <Component {...props} /> : <div>Loading...</div>;\n}\n```\n\n### 4.3. æœ€ç®€å•çš„é‡è¯•æœºåˆ¶\n\n```javascript\nfunction RetryableComponent({ retries = 3 }) {\n  const [retry, setRetry] = useState(0);\n\n  return (\n    <ErrorBoundary\n      onError={() => {\n        if (retry < retries) {\n          setRetry(r => r + 1);\n        }\n      }}\n    >\n      <Suspense fallback={<Loading />}>\n        <LazyComponent key={retry} />\n      </Suspense>\n    </ErrorBoundary>\n  );\n}\n\n```\n\n## 5. æ€§èƒ½ä¼˜åŒ–\n\n### 5.1. åœ¨éœ€è¦æ—¶é¢„åŠ è½½\n```jsx\n// 1. é¢„åŠ è½½ç»„ä»¶\nconst LazyComponent = React.lazy(() => import('./LazyComponent'));\n\n// åœ¨éœ€è¦æ—¶é¢„åŠ è½½\nconst preloadComponent = () => {\n  const componentPromise = import('./LazyComponent');\n  return componentPromise;\n};\n\n// ä½¿ç”¨\nfunction App() {\n  const handleMouseEnter = () => {\n    preloadComponent(); // ç”¨æˆ·hoveræ—¶é¢„åŠ è½½\n  };\n\n  return (\n    <div onMouseEnter={handleMouseEnter}>\n      <Suspense fallback={<div>Loading...</div>}>\n        <LazyComponent />\n      </Suspense>\n    </div>\n  );\n}\n\n\n```\n\n### 5.2. ä¼˜åŒ–åŠ è½½çŠ¶æ€\n\n```javascript\n// 2. ä¼˜åŒ–åŠ è½½çŠ¶æ€\nfunction DelayedFallback({ delay = 200 }) {\n  const [show, setShow] = React.useState(false);\n\n  React.useEffect(() => {\n    const timer = setTimeout(() => setShow(true), delay);\n    return () => clearTimeout(timer);\n  }, [delay]);\n\n  return show ? <div>Loading...</div> : null;\n}\n\nfunction App() {\n  return (\n    <Suspense fallback={<DelayedFallback />}>\n      <LazyComponent />\n    </Suspense>\n  );\n}\n```\n\n### 5.3. ä½¿ç”¨ startTransition ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ\n\n```javascript\nimport { startTransition } from 'react';\n\nfunction App() {\n  const [tab, setTab] = useState('home');\n\n  const switchTab = (nextTab) => {\n    startTransition(() => {\n      setTab(nextTab);\n    });\n  };\n\n  return (\n    <div>\n      <TabButton onClick={() => switchTab('home')}>Home</TabButton>\n      <TabButton onClick={() => switchTab('profile')}>Profile</TabButton>\n      <Suspense fallback={<Loading />}>\n        {tab === 'home' ? <Home /> : <Profile />}\n      </Suspense>\n    </div>\n  );\n}\n\n```\n\n## 6. æ•°æ®é¢„åŠ è½½\n\n```jsx\n// 1. åˆ›å»ºèµ„æºåŠ è½½å™¨\nfunction createResource(promise) {\n  let status = 'pending';\n  let result;\n  let suspender = promise.then(\n    r => {\n      status = 'success';\n      result = r;\n    },\n    e => {\n      status = 'error';\n      result = e;\n    }\n  );\n\n  return {\n    read() {\n      if (status === 'pending') {\n        throw suspender;\n      } else if (status === 'error') {\n        throw result;\n      } else if (status === 'success') {\n        return result;\n      }\n    }\n  };\n}\n\n// 2. ä½¿ç”¨æ•°æ®é¢„åŠ è½½\nconst dataResource = createResource(fetch('/api/data').then(r => r.json()));\n\nfunction AsyncDataComponent() {\n  const data = dataResource.read();\n  return <div>{data.message}</div>;\n}\n\nfunction App() {\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <AsyncDataComponent />\n    </Suspense>\n  );\n}\n```\n\n## 7. æ€»ç»“\n\nè¿™äº›å®ç°æ–¹å¼è®©æˆ‘ä»¬èƒ½å¤Ÿï¼š\n\n- å®ç°ä»£ç åˆ†å‰²å’ŒæŒ‰éœ€åŠ è½½\n- ä¼˜åŒ–é¦–æ¬¡åŠ è½½æ€§èƒ½\n- æä¾›è‰¯å¥½çš„åŠ è½½ä½“éªŒ\n- å¤„ç†åŠ è½½é”™è¯¯\n- å®ç°æ•°æ®é¢„åŠ è½½\n\n## 8. å»ºè®®\n\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»ºè®®ï¼š\n\n1. ä¼˜å…ˆä½¿ç”¨ React.lazy å’Œ Suspense\n2. åœ¨è·¯ç”±å±‚é¢å®ç°ä»£ç åˆ†å‰²\n3. å®ç°é€‚å½“çš„é”™è¯¯å¤„ç†\n4. æ·»åŠ åŠ è½½çŠ¶æ€åé¦ˆ\n5. è€ƒè™‘é¢„åŠ è½½ç­–ç•¥\n6. ä¼˜åŒ–åŠ è½½ä½“éªŒ\n\nè¿™æ ·å¯ä»¥åœ¨ä¿æŒä»£ç å¯ç»´æŠ¤æ€§çš„åŒæ—¶ï¼Œæä¾›è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒã€‚","e28643ecd2e1526780f100e9528e2d33":"\n# React ä¸­é”™è¯¯æ•è·çš„æ–¹å¼\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. Error Boundaryï¼ˆé”™è¯¯è¾¹ç•Œï¼‰ \n\nè¿™æ˜¯ React å®˜æ–¹æ¨èçš„æ•è·æ¸²æŸ“é”™è¯¯çš„æ–¹å¼ï¼š\n\n```jsx hl:7,12\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null, errorInfo: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    // æ›´æ–° stateï¼Œä¸‹æ¬¡æ¸²æŸ“æ—¶æ˜¾ç¤ºé™çº§ UI\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // å¯ä»¥åœ¨è¿™é‡Œå°†é”™è¯¯æ—¥å¿—ä¸ŠæŠ¥ç»™æœåŠ¡å™¨\n    console.error('Error:', error);\n    console.error('Error Info:', errorInfo);\n    this.setState({\n      error,\n      errorInfo\n    });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"error-boundary\">\n          <h2>Something went wrong</h2>\n          <details>\n            <summary>Error Details</summary>\n            <pre>{this.state.error && this.state.error.toString()}</pre>\n            <pre>{this.state.errorInfo && this.state.errorInfo.componentStack}</pre>\n          </details>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n```\n\n## 2. å…¨å±€é”™è¯¯å¤„ç†\n\n```jsx\n// åœ¨åº”ç”¨å…¥å£å¤„è®¾ç½®\nwindow.onerror = function(message, source, lineno, colno, error) {\n  // å¤„ç†å…¨å±€é”™è¯¯\n  console.error('Global error:', { message, source, lineno, colno, error });\n  // ä¸ŠæŠ¥é”™è¯¯\n  return false;\n};\n\n// å¤„ç† Promise ä¸­çš„é”™è¯¯\nwindow.addEventListener('unhandledrejection', function(event) {\n  console.error('Unhandled promise rejection:', event.reason);\n  // ä¸ŠæŠ¥é”™è¯¯\n  event.preventDefault();\n});\n```\n\n## 3. å¼‚æ­¥é”™è¯¯å¤„ç†\n\n```jsx\n// å¼‚æ­¥ç»„ä»¶çš„é”™è¯¯å¤„ç†\nconst AsyncComponent = React.lazy(() => import('./AsyncComponent'));\n\nfunction SafeAsyncComponent() {\n  return (\n    <ErrorBoundary>\n      <Suspense fallback={<Loading />}>\n        <AsyncComponent />\n      </Suspense>\n    </ErrorBoundary>\n  );\n}\n\n// å¼‚æ­¥è¯·æ±‚é”™è¯¯å¤„ç†\nasync function fetchData() {\n  try {\n    const response = await fetch('/api/data');\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    // å¤„ç†é”™è¯¯\n    console.error('API Error:', error);\n    throw error; // æˆ–è€…è¿”å›é»˜è®¤å€¼\n  }\n}\n```\n\n## 4. é€šç”¨é”™è¯¯å¤„ç†è§£å†³æ–¹æ¡ˆ\n\n### 4.1. åˆ›å»ºé”™è¯¯ç±»å‹æšä¸¾\n\n```javascript\n// 1. åˆ›å»ºé”™è¯¯ç±»å‹æšä¸¾\nconst ErrorTypes = {\n  NETWORK_ERROR: 'NETWORK_ERROR',\n  RENDER_ERROR: 'RENDER_ERROR',\n  RUNTIME_ERROR: 'RUNTIME_ERROR',\n  BUSINESS_ERROR: 'BUSINESS_ERROR'\n};\n```\n\n### 4.2. åˆ›å»ºè‡ªå®šä¹‰é”™è¯¯ç±»\n\n```tsx\n// 2. åˆ›å»ºè‡ªå®šä¹‰é”™è¯¯ç±»\nclass AppError extends Error {\n  constructor(type, message, metadata = {}) {\n    super(message);\n    this.type = type;\n    this.metadata = metadata;\n    this.timestamp = new Date().toISOString();\n  }\n}\n```\n\n### 4.3. é”™è¯¯å¤„ç†æœåŠ¡ï¼šè®°å¾—ä¸ŠæŠ¥\n\n```tsx hl:28,22\n// 3. é”™è¯¯å¤„ç†æœåŠ¡\nclass ErrorService {\n  static async reportError(error, componentInfo = null) {\n    const errorReport = {\n      error: {\n        message: error.message,\n        stack: error.stack,\n        type: error.type || 'UNKNOWN',\n        metadata: error.metadata || {},\n      },\n      component: componentInfo,\n      userInfo: {\n        // æ”¶é›†ç”¨æˆ·ä¿¡æ¯\n        userId: localStorage.getItem('userId'),\n        userAgent: navigator.userAgent,\n        // å…¶ä»–ç›¸å…³ä¿¡æ¯\n      },\n      timestamp: new Date().toISOString()\n    };\n\n    try {\n      await fetch('/api/error-logging', {\n        method: 'POST',\n        body: JSON.stringify(errorReport)\n      });\n    } catch (e) {\n      console.error('Failed to report error:', e);\n      // å¯ä»¥è€ƒè™‘ä½¿ç”¨å¤‡ç”¨æŠ¥å‘Šæœºåˆ¶ï¼Œå¦‚ sendBeacon\n      navigator.sendBeacon('/api/error-logging', JSON.stringify(errorReport));\n    }\n  }\n  static getErrorMessage(error) {\n    // æ ¹æ®é”™è¯¯ç±»å‹è¿”å›ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯\n    const messages = {\n      [ErrorTypes.NETWORK_ERROR]: 'ç½‘ç»œè¿æ¥å‡ºç°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•',\n      [ErrorTypes.RENDER_ERROR]: 'é¡µé¢æ¸²æŸ“å‡ºç°é—®é¢˜ï¼Œè¯·åˆ·æ–°é‡è¯•',\n      [ErrorTypes.BUSINESS_ERROR]: error.message,\n      'default': 'ç³»ç»Ÿå‡ºç°æœªçŸ¥é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•'\n    };\n\n    return messages[error.type] || messages.default;\n  }\n}\n```\n\n### 4.4. å¢å¼ºç‰ˆé”™è¯¯è¾¹ç•Œç»„ä»¶\n\n```tsx\n// 4. å¢å¼ºç‰ˆé”™è¯¯è¾¹ç•Œç»„ä»¶\nclass EnhancedErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null\n    };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    ErrorService.reportError(error, {\n      componentStack: errorInfo.componentStack,\n      componentName: this.props.name || 'Unknown'\n    });\n  }\n\n  handleRetry = () => {\n    this.setState({ hasError: false, error: null, errorInfo: null });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      return this.props.fallback ? (\n        this.props.fallback({\n          error: this.state.error,\n          retry: this.handleRetry\n        })\n      ) : (\n        <DefaultErrorFallback\n          error={this.state.error}\n          onRetry={this.handleRetry}\n        />\n      );\n    }\n\n    return this.props.children;\n  }\n}\n```\n\n### 4.5. é»˜è®¤é”™è¯¯å›é€€ç»„ä»¶\n\n```tsx\n// 5. é»˜è®¤é”™è¯¯å›é€€ç»„ä»¶\nfunction DefaultErrorFallback({ error, onRetry }) {\n  return (\n    <div className=\"error-container\">\n      <h2>å‡ºé”™å•¦ï¼</h2>\n      <p>{ErrorService.getErrorMessage(error)}</p>\n      <button onClick={onRetry}>é‡è¯•</button>\n    </div>\n  );\n}\n```\n\n### 4.6. ä½¿ç”¨ç¤ºä¾‹\n\n```jsx\n\n// 6. ä½¿ç”¨ç¤ºä¾‹\nfunction App() {\n  return (\n    <EnhancedErrorBoundary\n      name=\"RootApp\"\n      fallback={({ error, retry }) => (\n        <CustomErrorUI error={error} onRetry={retry} />\n      )}\n    >\n      <Router>\n        {/* è·¯ç”±é…ç½® */}\n      </Router>\n    </EnhancedErrorBoundary>\n  );\n}\n\n// 7. å¼‚æ­¥ç»„ä»¶é”™è¯¯å¤„ç†\nconst AsyncComponent = React.lazy(() => \n  import('./AsyncComponent')\n    .catch(error => {\n      ErrorService.reportError(\n        new AppError(ErrorTypes.RUNTIME_ERROR, 'Failed to load component', {\n          componentName: 'AsyncComponent'\n        })\n      );\n      // è¿”å›ä¸€ä¸ªé»˜è®¤å¯¼å‡ºï¼Œé¿å…åº”ç”¨å´©æºƒ\n      return { default: () => <DefaultErrorFallback /> };\n    })\n);\n\n// 8. API è¯·æ±‚é”™è¯¯å¤„ç†\nconst api = {\n  async fetch(url, options = {}) {\n    try {\n      const response = await fetch(url, options);\n      \n      if (!response.ok) {\n        throw new AppError(\n          ErrorTypes.NETWORK_ERROR,\n          `HTTP error! status: ${response.status}`,\n          { url, status: response.status }\n        );\n      }\n\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error;\n      }\n      \n      throw new AppError(\n        ErrorTypes.NETWORK_ERROR,\n        'Failed to fetch data',\n        { url, originalError: error.message }\n      );\n    }\n  }\n};\n\n// 9. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨\nfunction DataComponent() {\n  const [data, setData] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const result = await api.fetch('/api/data');\n        setData(result);\n      } catch (error) {\n        setError(error);\n        ErrorService.reportError(error, {\n          componentName: 'DataComponent',\n          action: 'fetchData'\n        });\n      }\n    }\n\n    fetchData();\n  }, []);\n\n  if (error) {\n    return <ErrorMessage error={error} />;\n  }\n\n  if (!data) {\n    return <Loading />;\n  }\n\n  return <div>{/* æ¸²æŸ“æ•°æ® */}</div>;\n}\n```\n\n### 4.7. è¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„ä¼˜ç‚¹\n\n1. åˆ†å±‚å¤„ç†ï¼š\n   - ç»„ä»¶å±‚é”™è¯¯å¤„ç†ï¼ˆError Boundaryï¼‰\n   - å…¨å±€è¿è¡Œæ—¶é”™è¯¯å¤„ç†ï¼ˆwindow.onerrorï¼‰\n   - å¼‚æ­¥é”™è¯¯å¤„ç†ï¼ˆPromise rejectionï¼‰\n   - ç½‘ç»œè¯·æ±‚é”™è¯¯å¤„ç†\n2. ç»Ÿä¸€çš„é”™è¯¯æŠ¥å‘Šæœºåˆ¶ï¼š\n   - é”™è¯¯åˆ†ç±»\n   - é”™è¯¯ä¸ŠæŠ¥\n   - ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯\n3. å¯æ¢å¤æ€§ï¼š\n   - æä¾›é‡è¯•æœºåˆ¶\n   - é™çº§UI\n   - ä¸ä¼šå¯¼è‡´æ•´ä¸ªåº”ç”¨å´©æºƒ\n4. å¯æ‰©å±•æ€§ï¼š\n   - è‡ªå®šä¹‰é”™è¯¯ç±»å‹\n   - è‡ªå®šä¹‰é”™è¯¯å¤„ç†é€»è¾‘\n   - è‡ªå®šä¹‰é”™è¯¯UI\n5. å¼€å‘ä½“éªŒï¼š\n   - è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯\n   - å¼€å‘ç¯å¢ƒä¸‹çš„é”™è¯¯å †æ ˆ\n   - é”™è¯¯è¿½è¸ªå’Œè°ƒè¯•ä¿¡æ¯\n\n## 5. ä½¿ç”¨å»ºè®®\n\n### 5.1. åœ¨åº”ç”¨çš„å…³é”®èŠ‚ç‚¹ä½¿ç”¨ ErrorBoundary\n\n```jsx\nfunction App() {\n  return (\n    <EnhancedErrorBoundary name=\"Root\">\n      <Router>\n        <Switch>\n          <Route path=\"/dashboard\">\n            <EnhancedErrorBoundary name=\"Dashboard\">\n              <Dashboard />\n            </EnhancedErrorBoundary>\n          </Route>\n          {/* å…¶ä»–è·¯ç”± */}\n        </Switch>\n      </Router>\n    </EnhancedErrorBoundary>\n  );\n}\n```\n\n### 5.2. å¯¹äºé‡è¦çš„å¼‚æ­¥æ“ä½œæ·»åŠ é”™è¯¯å¤„ç†\n\n```jsx\nfunction ImportantComponent() {\n  const handleImportantAction = async () => {\n    try {\n      await performAction();\n    } catch (error) {\n      ErrorService.reportError(\n        new AppError(ErrorTypes.BUSINESS_ERROR, 'æ“ä½œå¤±è´¥', {\n          action: 'importantAction'\n        })\n      );\n      // æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯\n      message.error(ErrorService.getErrorMessage(error));\n    }\n  };\n\n  return <button onClick={handleImportantAction}>æ‰§è¡Œæ“ä½œ</button>;\n}\n```\n\n### 5.3. åœ¨å¼€å‘ç¯å¢ƒæä¾›è¯¦ç»†ä¿¡æ¯ï¼Œç”Ÿäº§ç¯å¢ƒæ³¨æ„å®‰å…¨\n\n```jsx\nconst ErrorMessage = ({ error }) => (\n  <div className=\"error-message\">\n    <h3>{ErrorService.getErrorMessage(error)}</h3>\n    {process.env.NODE_ENV === 'development' && (\n      <details>\n        <summary>Debug Information</summary>\n        <pre>{JSON.stringify(error, null, 2)}</pre>\n      </details>\n    )}\n  </div>\n);\n```\n\n### 5.4. åˆ†å±‚é”™è¯¯å¤„ç†\n\nè¿™ç§åˆ†å±‚æ–¹å¼ç¡®ä¿äº†å³ä½¿æŸä¸ªéƒ¨åˆ†å‡ºé”™ï¼Œå…¶ä»–éƒ¨åˆ†ä»ç„¶å¯ä»¥æ­£å¸¸å·¥ä½œ\n\n```javascript\n// App.js\nfunction App() {\n  return (\n    <ErrorBoundary>\n      <div className=\"app\">\n        <Header />\n        <main>\n          <ErrorBoundary>\n            <Router>\n              <Switch>\n                <Route path=\"/dashboard\">\n                  <ErrorBoundary>\n                    <Dashboard />\n                  </ErrorBoundary>\n                </Route>\n                {/* å…¶ä»–è·¯ç”± */}\n              </Switch>\n            </Router>\n          </ErrorBoundary>\n        </main>\n        <Footer />\n      </div>\n    </ErrorBoundary>\n  );\n}\n\n```\n\n### 5.5. è®°å¾—é”™è¯¯ç›‘æ§å’Œä¸ŠæŠ¥\n\n```javascript\n// é”™è¯¯ç›‘æ§æœåŠ¡\nconst errorTracker = {\n  init() {\n    // åˆå§‹åŒ–é”™è¯¯è¿½è¸ªæœåŠ¡\n  },\n\n  captureError(error, context = {}) {\n    // æ”¶é›†é”™è¯¯ä¿¡æ¯\n    const errorInfo = {\n      message: error.message,\n      stack: error.stack,\n      timestamp: new Date().toISOString(),\n      userInfo: getUserInfo(),\n      context,\n    };\n\n    // å‘é€åˆ°æœåŠ¡å™¨\n    this.sendToServer(errorInfo);\n  },\n\n  sendToServer(errorInfo) {\n    fetch('/api/errors', {\n      method: 'POST',\n      body: JSON.stringify(errorInfo),\n    }).catch(err => {\n      // ç¡®ä¿é”™è¯¯ä¸ŠæŠ¥æœ¬èº«çš„é”™è¯¯ä¸ä¼šå½±å“åº”ç”¨\n      console.error('Error reporting failed:', err);\n    });\n  }\n};\n\n```","777910f3192252ff9719d7c5771cfe4f":"\n# èŠèŠ React Class ç±»ç”Ÿå‘½å‘¨æœŸç›¸å…³ï¼Œä»¥åŠç°åœ¨ä½¿ç”¨ Hooks çš„æ–¹å¼å¦‚ä½•å¯¹ç…§æ¨¡æ‹Ÿä¹‹å‰çš„ç”Ÿå‘½å‘¨æœŸ\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å…ˆè¯´Classç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ \n\nåˆ†ä¸‰ä¸ªé˜¶æ®µï¼šç»„ä»¶æŒ‚åœ¨é˜¶æ®µ + ç»„ä»¶æ›´æ–° + å¸è½½ + é”™è¯¯å¤„ç†é˜¶æ®µ ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241030-3.png)\n\n### 1.1. ç¬¬ä¸€é˜¶æ®µï¼šç»„ä»¶æŒ‚è½½é˜¶æ®µ\n\næŒ‚è½½é˜¶æ®µç»„ä»¶è¢«åˆ›å»ºï¼Œç„¶åç»„ä»¶å®ä¾‹æ’å…¥åˆ° DOM ä¸­ï¼Œå®Œæˆç»„ä»¶çš„ç¬¬ä¸€æ¬¡æ¸²æŸ“ï¼Œåœ¨æ­¤é˜¶æ®µ`ä¼šä¾æ¬¡è°ƒç”¨`ä»¥ä¸‹è¿™äº›æ–¹æ³•\n- `constructor`ï¼šåˆå§‹åŒ–ç»„ä»¶çš„ `state`ï¼Œç»™äº‹ä»¶å¤„ç†æ–¹æ³•ç»‘å®š `this`\n- `getDerivedStateFromProps`ï¼Œé™æ€æ–¹æ³•ï¼Œå®ƒå­˜åœ¨åªæœ‰ä¸€ä¸ªç›®çš„ï¼š**è®©ç»„ä»¶åœ¨ props å˜åŒ–æ—¶æ›´æ–° state**ã€‚\n\t- è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ç”¨äºæ›´æ–° `state`ï¼Œå¦‚æœè¿”å› `null` åˆ™ä¸æ›´æ–°ä»»ä½•å†…å®¹\n- `render`ï¼šæ ¹æ®çŠ¶æ€ `state` å’Œå±æ€§ `props` æ¸²æŸ“ç»„ä»¶ã€‚**è¿™ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹ï¼Œå°±æ˜¯è¿”å›éœ€è¦æ¸²æŸ“çš„å†…å®¹ï¼Œä¸è¦åœ¨è¿™é‡Œé¢åšå…¶ä»–äº‹æƒ…**\n- `componentDidMount`ï¼šä»£è¡¨`ç»„ä»¶æŒ‚è½½å®Œæˆ`**ï¼Œ** åœ¨è¿™é‡Œå¯ä»¥DOMæ“ä½œã€ç½‘ç»œè¯·æ±‚ã€äº‹ä»¶è®¢é˜…ç­‰\n\t- å…¶å®`ä¸æ¨èç›´æ¥åœ¨componentDidMountç›´æ¥è°ƒç”¨setState`ï¼Œå› ä¸ºæˆ‘ä»¬åˆè°ƒç”¨äº†ä¸€æ¬¡`setState`ï¼Œå°±ä¼šåœ¨æœªæ¥å†è¿›è¡Œä¸€æ¬¡`render`ï¼Œé€ æˆä¸å¿…è¦çš„æ€§èƒ½æµªè´¹ï¼Œ**å¤§å¤šæ•°æƒ…å†µå¯ä»¥è®¾ç½®åˆå§‹å€¼æ¥æå®š**\n\n### 1.2. ç¬¬äºŒé˜¶æ®µï¼šç»„ä»¶æ›´æ–°é˜¶æ®µ\n\n- `getDerivedStateFromProps`ï¼Œå¦‚ä¸Š\n- `shouldComponentUpdate(nextProps, nextState)` æ˜¯å¦åº”è¯¥æ¸²æŸ“ç»„ä»¶ \n\t-  `æ€§èƒ½ä¼˜åŒ–çš„ç‚¹`\n- `render`ï¼Œå¦‚ä¸Š\n- `getSnapshotBeforeUpdate(prevProps, prevState)`\n\t- åœ¨ `render` ä¹‹åï¼Œ`componentDidUpdate` ä¹‹å‰è°ƒç”¨ï¼Œ\n\t- æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“è¾“å‡ºï¼ˆæäº¤åˆ° DOM èŠ‚ç‚¹ï¼‰ä¹‹å‰è°ƒç”¨ã€‚å³` Reactæ›´æ–°DOMæˆ–Refsä¹‹å‰è°ƒç”¨ `\n\t- è¿”å›å€¼ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ ç»™`componentDidUpdate`\n- `componentDidUpdate(prevProps, prevState, snapshot){}` ï¼Œæ›´æ–°åç«‹å³è¢«è°ƒç”¨ï¼Œé€šå¸¸åšä»¥ä¸‹æ“ä½œ\n\t- å½“ç»„ä»¶æ›´æ–°åï¼Œå¯¹`DOM è¿›è¡Œæ“ä½œ`ï¼›\n\t- å¦‚æœä½ å¯¹æ›´æ–°å‰åçš„ `props` è¿›è¡Œäº†æ¯”è¾ƒï¼Œä¹Ÿå¯ä»¥é€‰æ‹©åœ¨æ­¤å¤„è¿›è¡Œ`ç½‘ç»œè¯·æ±‚`ï¼›\n\t\t- ï¼ˆä¾‹å¦‚ï¼Œå½“ `props` æœªå‘ç”Ÿå˜åŒ–æ—¶ï¼Œåˆ™ä¸ä¼šæ‰§è¡Œç½‘ç»œè¯·æ±‚ï¼‰\n\n### 1.3. ç¬¬ä¸‰é˜¶æ®µï¼šç»„ä»¶å¸è½½é˜¶æ®µ\n\n- componentWillUnmount\n\t- æ¸…é™¤ `timer`ï¼Œå–æ¶ˆç½‘ç»œè¯·æ±‚æˆ–æ¸…é™¤\n\t- å–æ¶ˆåœ¨ `componentDidMount()` ä¸­åˆ›å»ºçš„è®¢é˜…ç­‰ï¼›\n\n### 1.4. ç¬¬å››é˜¶æ®µï¼šé”™è¯¯å¤„ç†é˜¶æ®µ\n\n- `componentDidCatch(error, info)`ï¼Œåä»£ç»„ä»¶æŠ›å‡ºé”™è¯¯åè¢«è°ƒç”¨\n\n## 2. React16 åºŸå¼ƒäº†é‚£äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°\n\n- `componentWillMount`ï¼šå®Œå…¨å¯ä»¥ä½¿ç”¨ `componentDidMount` å’Œ `constructor` æ¥ä»£æ›¿\n- `componentWillReceiveProps`\n\t- æ¥å›æ¯”è¾ƒæ•°æ®çŠ¶æ€ä¸å¯é¢„æµ‹è¡Œ\n\t- å¢åŠ ç»„ä»¶é‡å›æ¬¡æ•°\n\t- ä½¿ç”¨é™æ€æ–¹æ³•ä»£æ›¿ï¼š`getDerivedStateFromProps`ï¼Œä¸ä½¿ç”¨ `this`ï¼Œçº¯å‡½æ•°ï¼Œä¸ä¼šå†™å‡ºå‰¯ä½œç”¨ä»£ç \n- `componentWillUpdate`ï¼š\n\t- åœ¨`fiber`ä¸­ï¼Œrenderå¯è¢«æ‰“æ–­ï¼Œ**å¯èƒ½åœ¨wilMountä¸­è·å–åˆ°çš„å…ƒç´ çŠ¶æ€å¾ˆå¯èƒ½ä¸å®é™…éœ€è¦çš„ä¸åŒ**\n\t- ä¼šè§¦å‘å¤šæ¬¡\n\t\t- æ¯”å¦‚ï¼Œåœ¨è¿™ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼Œ`è°ƒç”¨setStateä¼šé€ æˆæ­»å¾ªç¯`ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒã€‚\n\n## 3. getDerivedStateFromError ç”Ÿå‘½å‘¨æœŸ\n\nä¸Šå›¾ä¸­æ²¡æœ‰åˆ—ä¸¾ï¼Œè¿™é‡Œå•ç‹¬è¯´æ˜ï¼Œå…³äºé”™è¯¯å¤„ç†ï¼Œæ›´å¤š [23. React ä¸­é”™è¯¯æ•è·çš„æ–¹å¼](/post/e28643ecd2e1526780f100e9528e2d33.html)\n\n### 3.1. äº§ç”ŸèƒŒæ™¯\n\ngetDerivedStateFromError æ˜¯åœ¨ React 16 å¼•å…¥çš„é”™è¯¯è¾¹ç•Œï¼ˆError Boundariesï¼‰ç‰¹æ€§çš„ä¸€éƒ¨åˆ†ã€‚å®ƒçš„å‡ºç°ä¸»è¦åŸºäºä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š\n\n- éœ€è¦ä¸€ä¸ªå¯ä»¥ä¼˜é›…å¤„ç†æ¸²æŸ“æœŸé—´é”™è¯¯çš„æœºåˆ¶\n- é˜²æ­¢å› ç»„ä»¶é”™è¯¯å¯¼è‡´æ•´ä¸ªåº”ç”¨å´©æºƒ\n- æä¾›é™çº§ UI çš„èƒ½åŠ›\n- æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰åœºæ™¯ \n\n### 3.2. getDerivedStateFromError vs componentDidCatch\n\nè¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•éƒ½ç”¨äºé”™è¯¯å¤„ç†ï¼Œä½†æœ‰é‡è¦åŒºåˆ«ï¼š\n\n```javascript\nclass ErrorBoundary extends React.Component {\n  state = { hasError: false };\n\n  // ç”¨äºæ¸²æŸ“é™çº§ UI\n  static getDerivedStateFromError(error) {\n    // è¿”å›æ–°çš„ state\n    return { hasError: true };\n  }\n\n  // ç”¨äºé”™è¯¯æ—¥å¿—è®°å½•\n  componentDidCatch(error, errorInfo) {\n    // å¯ä»¥å°†é”™è¯¯æ—¥å¿—å‘é€åˆ°æœåŠ¡å™¨\n    logErrorToService(error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return this.props.children;\n  }\n}\n```\n\nä¸»è¦åŒºåˆ«ï¼š\n\n- getDerivedStateFromError åœ¨`æ¸²æŸ“é˜¶æ®µ`è°ƒç”¨ï¼Œæ˜¯åŒæ­¥çš„\n- componentDidCatch åœ¨`æäº¤é˜¶æ®µ`è°ƒç”¨ï¼Œå¯ä»¥æ‰§è¡Œå‰¯ä½œç”¨\n- getDerivedStateFromError å¿…é¡»è¿”å›ä¸€ä¸ª`çŠ¶æ€å¯¹è±¡`\n- getDerivedStateFromError æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ï¼Œè€Œ componentDidCatch ä¸æ”¯æŒ \n\n### 3.3. ä½¿ç”¨åœºæ™¯å’Œæœ€ä½³å®è·µ\n\n```javascript\n// åˆ›å»ºé”™è¯¯è¾¹ç•Œç»„ä»¶\nclass ErrorBoundary extends React.Component {\n  state = { \n    hasError: false,\n    error: null,\n    errorInfo: null \n  };\n\n  static getDerivedStateFromError(error) {\n    // åŸºç¡€é”™è¯¯çŠ¶æ€\n    return { \n      hasError: true,\n      error \n    };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // è®°å½•è¯¦ç»†é”™è¯¯ä¿¡æ¯\n    this.setState({\n      errorInfo\n    });\n    \n    // å‘é€åˆ°é”™è¯¯è¿½è¸ªæœåŠ¡\n    logErrorToService(error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"error-ui\">\n          <h2>Something went wrong</h2>\n          {process.env.NODE_ENV === 'development' && (\n            <details>\n              <summary>Error Details</summary>\n              <pre>{this.state.error?.toString()}</pre>\n              <pre>{this.state.errorInfo?.componentStack}</pre>\n            </details>\n          )}\n          <button onClick={() => this.setState({ hasError: false })}>\n            Try again\n          </button>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n```\n\n### 3.4. åœ¨ç°ä»£ Reactï¼ˆHooksï¼‰ä¸­çš„ä½¿ç”¨\n\nè™½ç„¶ç›®å‰ Hooks ä¸èƒ½ç›´æ¥å®ç°é”™è¯¯è¾¹ç•Œï¼Œä½†æœ‰å‡ ç§æ¨èçš„è§£å†³æ–¹æ¡ˆï¼š\n\n#### 3.4.1. ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ react-error-boundary\n\n```javascript\nimport { ErrorBoundary } from 'react-error-boundary';\n\nfunction ErrorFallback({error, resetErrorBoundary}) {\n  return (\n    <div role=\"alert\">\n      <p>Something went wrong:</p>\n      <pre>{error.message}</pre>\n      <button onClick={resetErrorBoundary}>Try again</button>\n    </div>\n  );\n}\n\nfunction MyApp() {\n  return (\n    <ErrorBoundary\n      FallbackComponent={ErrorFallback}\n      onReset={() => {\n        // é‡ç½®åº”ç”¨çŠ¶æ€\n      }}\n      onError={(error, errorInfo) => {\n        // è®°å½•é”™è¯¯\n        logError(error, errorInfo);\n      }}\n    >\n      <MyComponent />\n    </ErrorBoundary>\n  );\n}\n```\n\n#### 3.4.2. è‡ªå®šä¹‰ Hook é…åˆé”™è¯¯è¾¹ç•Œ\n\n```javascript\nfunction useErrorHandler() {\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (error) {\n      throw error; // æŠ›å‡ºé”™è¯¯ç»™æœ€è¿‘çš„é”™è¯¯è¾¹ç•Œ\n    }\n  }, [error]);\n\n  return setError;\n}\n\nfunction MyComponent() {\n  const handleError = useErrorHandler();\n\n  const handleClick = async () => {\n    try {\n      await riskyOperation();\n    } catch (error) {\n      handleError(error);\n    }\n  };\n\n  return <button onClick={handleClick}>Risky Operation</button>;\n}\n```\n\n### 3.5. æœ€ä½³å®è·µå’Œæ³¨æ„äº‹é¡¹ \n\n#### 3.5.1. é”™è¯¯è¾¹ç•Œçš„ç²’åº¦æ§åˆ¶\n\n```javascript\nfunction App() {\n  return (\n    <ErrorBoundary>\n      <Header />\n      <ErrorBoundary>\n        {/* å…³é”®åŠŸèƒ½å•ç‹¬é”™è¯¯å¤„ç† */}\n        <MainContent />\n      </ErrorBoundary>\n      <ErrorBoundary>\n        {/* éå…³é”®åŠŸèƒ½å•ç‹¬é”™è¯¯å¤„ç† */}\n        <Sidebar />\n      </ErrorBoundary>\n      <Footer />\n    </ErrorBoundary>\n  );\n}\n```\n\n#### 3.5.2. é”™è¯¯æ¢å¤ç­–ç•¥\n\n```javascript\nclass ErrorBoundary extends React.Component {\n  state = { hasError: false };\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  resetError = () => {\n    this.setState({ hasError: false });\n    // å¯èƒ½éœ€è¦æ¸…é™¤ç¼“å­˜æˆ–é‡æ–°è·å–æ•°æ®\n    this.props.onReset?.();\n  };\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div>\n          <h2>Something went wrong</h2>\n          <button onClick={this.resetError}>\n            Reset and try again\n          </button>\n        </div>\n      );\n    }\n    return this.props.children;\n  }\n}\n```\n\n### 3.6. éœ€è¦æ³¨æ„çš„æ˜¯\n\n1. é”™è¯¯è¾¹ç•Œæ— æ³•æ•è·ä»¥ä¸‹é”™è¯¯ï¼š\n   - äº‹ä»¶å¤„ç†å™¨ä¸­çš„é”™è¯¯\n   - å¼‚æ­¥ä»£ç é”™è¯¯\n   - æœåŠ¡ç«¯æ¸²æŸ“é”™è¯¯\n   - é”™è¯¯è¾¹ç•Œç»„ä»¶è‡ªèº«çš„é”™è¯¯\n2. åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œé”™è¯¯ä¼šå†’æ³¡åˆ°çª—å£ï¼Œè¿™æ˜¯ä¸ºäº†ç¡®ä¿é”™è¯¯æ›´å®¹æ˜“è¢«å‘ç°\n3. åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œé”™è¯¯ä¼šè¢«é™åˆ¶åœ¨é”™è¯¯è¾¹ç•Œå†…\n4. å»ºè®®åœ¨åº”ç”¨çš„ä¸åŒå±‚çº§è®¾ç½®é”™è¯¯è¾¹ç•Œï¼Œä»¥å®ç°æ›´ç»†ç²’åº¦çš„é”™è¯¯å¤„ç†\n\n## 4. Class å’Œ Hooks å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸ\n### 4.1. åˆå§‹åŒ–é˜¶æ®µ\n\n#### 4.1.1. Class ç»„ä»¶\n\n```javascript\nclass MyComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      count: 0\n    };\n  }\n}\n```\n\n#### 4.1.2. Hooks æ–¹å¼\n\n```javascript\nfunction MyComponent(props) {\n  const [count, setCount] = useState(0);\n  \n  // å¦‚æœéœ€è¦å¤æ‚çš„åˆå§‹çŠ¶æ€è®¡ç®—\n  const [state, setState] = useState(() => {\n    const initialState = someExpensiveComputation(props);\n    return initialState;\n  });\n}\n```\n\n### 4.2. æŒ‚è½½é˜¶æ®µ\n\n#### 4.2.1. Class ç»„ä»¶\n\n```javascript\nclass MyComponent extends React.Component {\n  componentDidMount() {\n    console.log('ç»„ä»¶å·²æŒ‚è½½');\n    // æ‰§è¡Œå‰¯ä½œç”¨ï¼Œå¦‚ API è°ƒç”¨\n    this.fetchData();\n    // æ·»åŠ äº‹ä»¶ç›‘å¬\n    window.addEventListener('resize', this.handleResize);\n  }\n}\n```\n\n#### 4.2.2. Hooks æ–¹å¼\n\n```javascript\nfunction MyComponent() {\n  useEffect(() => {\n    console.log('ç»„ä»¶å·²æŒ‚è½½');\n    // æ‰§è¡Œå‰¯ä½œç”¨\n    fetchData();\n    \n    // æ·»åŠ äº‹ä»¶ç›‘å¬\n    window.addEventListener('resize', handleResize);\n    \n    // æ¸…ç†å‡½æ•°ï¼ˆç›¸å½“äº componentWillUnmountï¼‰\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []); // ç©ºä¾èµ–æ•°ç»„è¡¨ç¤ºä»…åœ¨æŒ‚è½½æ—¶æ‰§è¡Œ\n}\n```\n\n### 4.3. æ›´æ–°é˜¶æ®µ\n\n#### 4.3.1. Class ç»„ä»¶\n\n```javascript\nclass MyComponent extends React.Component {\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.userID !== prevProps.userID) {\n      this.fetchData(this.props.userID);\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return this.props.value !== nextProps.value;\n  }\n}\n```\n\n#### 4.3.2. Hooks æ–¹å¼\n\n```javascript\nfunction MyComponent({ userID }) {\n  // æ›¿ä»£ componentDidUpdate\n  useEffect(() => {\n    fetchData(userID);\n  }, [userID]); // ä»…åœ¨ userID æ”¹å˜æ—¶æ‰§è¡Œ\n\n  // æ›¿ä»£ shouldComponentUpdate\n  const MemoizedComponent = React.memo(MyComponent, (prevProps, nextProps) => {\n    return prevProps.value === nextProps.value;\n  });\n}\n```\n\n### 4.4. å¸è½½é˜¶æ®µ\n\n#### 4.4.1. Class ç»„ä»¶\n\n```javascript\nclass MyComponent extends React.Component {\n  componentWillUnmount() {\n    // æ¸…ç†å·¥ä½œ\n    window.removeEventListener('resize', this.handleResize);\n    this.clearIntervals();\n  }\n}\n```\n\n#### 4.4.2. Hooks æ–¹å¼\n\n```javascript hl:10\nfunction MyComponent() {\n  useEffect(() => {\n    // è®¾ç½®\n    const interval = setInterval(() => {\n      // ä¸€äº›æ“ä½œ\n    }, 1000);\n\n    // è¿”å›æ¸…ç†å‡½æ•°\n    return () => {\n      clearInterval(interval);\n    };\n  }, []);\n}\n```\n\n### 4.5. é”™è¯¯å¤„ç†\n\n#### 4.5.1. Class ç»„ä»¶\n\n```javascript\nclass MyComponent extends React.Component {\n  componentDidCatch(error, errorInfo) {\n    logErrorToService(error, errorInfo);\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n}\n```\n\n#### 4.5.2. Hooks æ–¹å¼\n\n```javascript\n// é”™è¯¯è¾¹ç•Œç›®å‰è¿˜éœ€è¦ä½¿ç”¨ Class ç»„ä»¶\n// ä½†å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰ Hook å¤„ç†ç»„ä»¶å†…çš„é”™è¯¯\nfunction useErrorHandler(error) {\n  const [hasError, setHasError] = useState(false);\n  \n  useEffect(() => {\n    if (error) {\n      setHasError(true);\n      logErrorToService(error);\n    }\n  }, [error]);\n\n  return hasError;\n}\n```\n\n### 4.6. è·å–æ´¾ç”ŸçŠ¶æ€\n\n#### 4.6.1. Class ç»„ä»¶\n\n```javascript\nclass MyComponent extends React.Component {\n  static getDerivedStateFromProps(props, state) {\n    if (props.currentRow !== state.lastRow) {\n      return {\n        isScrollingDown: props.currentRow > state.lastRow,\n        lastRow: props.currentRow\n      };\n    }\n    return null;\n  }\n}\n```\n\n#### 4.6.2. Hooks æ–¹å¼\n\n```javascript\nfunction MyComponent(props) {\n  const [isScrollingDown, setIsScrollingDown] = useState(false);\n  const [lastRow, setLastRow] = useState(0);\n\n  // ä½¿ç”¨ useEffect æ¨¡æ‹Ÿ getDerivedStateFromProps\n  useEffect(() => {\n    if (props.currentRow !== lastRow) {\n      setIsScrollingDown(props.currentRow > lastRow);\n      setLastRow(props.currentRow);\n    }\n  }, [props.currentRow, lastRow]);\n}\n```\n\n### 4.7. æ€§èƒ½ä¼˜åŒ–\n\n#### 4.7.1. Class ç»„ä»¶\n\n```javascript\nclass MyComponent extends React.Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    return this.props.value !== nextProps.value;\n  }\n}\n```\n\n#### 4.7.2. Hooks æ–¹å¼\n\n```javascript\nfunction MyComponent({ value }) {\n  // ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ\n  const expensiveValue = useMemo(() => {\n    return computeExpensiveValue(value);\n  }, [value]);\n\n  // ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°\n  const handleClick = useCallback(() => {\n    doSomething(value);\n  }, [value]);\n}\n\n// ä½¿ç”¨ React.memo è¿›è¡Œç»„ä»¶çº§åˆ«çš„ä¼˜åŒ–\nconst MemoizedComponent = React.memo(MyComponent);\n```\n\n### 4.8. è‡ªå®šä¹‰ç”Ÿå‘½å‘¨æœŸ Hook\n\n```javascript\n// ç»„åˆå¤šä¸ªç”Ÿå‘½å‘¨æœŸçš„è‡ªå®šä¹‰ Hook\nfunction useLifecycle(props) {\n  // æ¨¡æ‹Ÿ componentDidMount\n  useEffect(() => {\n    console.log('ç»„ä»¶å·²æŒ‚è½½');\n    return () => console.log('ç»„ä»¶å°†å¸è½½');\n  }, []);\n\n  // æ¨¡æ‹Ÿ componentDidUpdate\n  const prevPropsRef = useRef();\n  useEffect(() => {\n    if (prevPropsRef.current) {\n      // æ¯”è¾ƒ props å˜åŒ–\n      const prevProps = prevPropsRef.current;\n      // æ‰§è¡Œæ›´æ–°åçš„æ“ä½œ\n    }\n    prevPropsRef.current = props;\n  });\n\n  // è¿”å›éœ€è¦çš„å€¼æˆ–æ–¹æ³•\n  return {\n    // ...\n  };\n}\n```\n\n### 4.9. Hooks å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç¤ºä¾‹\n\n```javascript\nfunction CompleteLifecycleComponent({ data }) {\n  // 1. æ„é€ å‡½æ•°é˜¶æ®µ\n  const [state, setState] = useState(() => {\n    // åˆå§‹åŒ–çŠ¶æ€\n    return { data: processData(data) };\n  });\n\n  // 2. æŒ‚è½½é˜¶æ®µ\n  useEffect(() => {\n    console.log('ç»„ä»¶å·²æŒ‚è½½');\n    // æ‰§è¡Œå‰¯ä½œç”¨\n    const subscription = subscribeToData();\n\n    // 3. å¸è½½é˜¶æ®µ\n    return () => {\n      console.log('ç»„ä»¶å°†å¸è½½');\n      subscription.unsubscribe();\n    };\n  }, []);\n\n  // 4. æ›´æ–°é˜¶æ®µ\n  useEffect(() => {\n    console.log('æ•°æ®å·²æ›´æ–°');\n    updateUIWithData(data);\n  }, [data]);\n\n  // 5. é”™è¯¯å¤„ç†\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    if (error) {\n      logError(error);\n    }\n  }, [error]);\n\n  // 6. æ€§èƒ½ä¼˜åŒ–\n  const memoizedValue = useMemo(() => {\n    return expensiveComputation(state.data);\n  }, [state.data]);\n\n  if (error) {\n    return <ErrorDisplay error={error} />;\n  }\n\n  return (\n    <div>{/* æ¸²æŸ“å†…å®¹ */}</div>\n  );\n}\n```\n\n### 4.10. ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å¯¹ç…§è¡¨\n\n```javascript\n// Class ç»„ä»¶              Hooks ç­‰æ•ˆå®ç°\n// ------------------------------------------\n// constructor           -> useState, useRef\n// getDerivedStateFromProps -> useEffect é…åˆ useState\n// shouldComponentUpdate -> React.memo\n// render               -> å‡½æ•°æœ¬èº«\n// componentDidMount    -> useEffect([])\n// componentDidUpdate   -> useEffect([deps])\n// componentWillUnmount -> useEffect è¿”å›çš„æ¸…ç†å‡½æ•°\n// componentDidCatch    -> éœ€è¦ä½¿ç”¨ Class ç»„ä»¶\n// getSnapshotBeforeUpdate -> æ²¡æœ‰ç›´æ¥ç­‰æ•ˆå®ç°\n\n```\n\n","fb031e31a8eb56cabd5af71e82b8ab2e":"\n# React.createContext ä¸ useContext\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‘å¸ƒè®¢é˜…æ¨¡å¼ \n\nè¿™å°±æ˜¯ä¸€ä¸ª `å‘å¸ƒè®¢é˜…æ¨¡å¼`\n\n## 2. Context çš„åŸºæœ¬æ¦‚å¿µå’Œä½¿ç”¨åœºæ™¯\n\nContext æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶æ ‘ä¸­å…±äº«æ•°æ®çš„æ–¹å¼ï¼Œæ— éœ€é€šè¿‡ props æ‰‹åŠ¨ä¼ é€’ã€‚ä¸»è¦ç”¨äºï¼š\n\n```jsx\n// å¸¸è§çš„ä½¿ç”¨åœºæ™¯\n// 1. ä¸»é¢˜åˆ‡æ¢\n// 2. ç”¨æˆ·è®¤è¯çŠ¶æ€\n// 3. è¯­è¨€åå¥½\n// 4. å…¨å±€é…ç½®\n```\n\n## 3. createContext çš„åŸºæœ¬ä½¿ç”¨\n\n```jsx\n// åˆ›å»º Context\nconst ThemeContext = React.createContext({\n  theme: 'light',\n  toggleTheme: () => {}\n});\n\n// å¯ä»¥æä¾›é»˜è®¤å€¼\nconst UserContext = React.createContext(null);\n\n// Provider ç»„ä»¶\nfunction ThemeProvider({ children }) {\n  const [theme, setTheme] = useState('light');\n  \n  const toggleTheme = useCallback(() => {\n    setTheme(prev => prev === 'light' ? 'dark' : 'light');\n  }, []);\n\n  // value å±æ€§ä¼ é€’å…±äº«å€¼\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\n// ä½¿ç”¨ Provider åŒ…è£…åº”ç”¨\nfunction App() {\n  return (\n    <ThemeProvider>\n      <MainContent />\n    </ThemeProvider>\n  );\n}\n```\n\n## 4. useContext çš„ä½¿ç”¨æ–¹å¼\n\n```jsx hl:3\nfunction ChildComponent() {\n  // ä½¿ç”¨ useContext è·å–ä¸Šä¸‹æ–‡å€¼\n  const { theme, toggleTheme } = useContext(ThemeContext);\n  \n  return (\n    <div className={`theme-${theme}`}>\n      <button onClick={toggleTheme}>\n        Switch to {theme === 'light' ? 'dark' : 'light'}\n      </button>\n    </div>\n  );\n}\n```\n\n## 5. é«˜çº§ç”¨æ³•å’Œæœ€ä½³å®è·µ\n\n```jsx\n// 4.1 åˆ›å»ºè‡ªå®šä¹‰ Hook å°è£… Context é€»è¾‘\nfunction useTheme() {\n  const context = useContext(ThemeContext);\n  if (context === undefined) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n}\n\n// 4.2 ç»„åˆå¤šä¸ª Context\nfunction AppProviders({ children }) {\n  return (\n    <ThemeProvider>\n      <UserProvider>\n        <SettingsProvider>\n          {children}\n        </SettingsProvider>\n      </UserProvider>\n    </ThemeProvider>\n  );\n}\n\n// 4.3 ä½¿ç”¨ Context çš„ Consumer ç»„ä»¶ï¼ˆç±»ç»„ä»¶ä¸­ï¼‰\nclass ClassComponent extends React.Component {\n  render() {\n    return (\n      <ThemeContext.Consumer>\n        {value => (\n          <div className={`theme-${value.theme}`}>\n            <button onClick={value.toggleTheme}>\n              Toggle Theme\n            </button>\n          </div>\n        )}\n      </ThemeContext.Consumer>\n    );\n  }\n}\n```\n\n## 6. æ€§èƒ½ä¼˜åŒ–\n\n```jsx\n// 5.1 ä½¿ç”¨ memo ä¼˜åŒ–å­ç»„ä»¶\nconst MemoizedChild = React.memo(function Child() {\n  console.log(\"Child render\");\n  const { theme } = useContext(ThemeContext);\n  return <div>Theme: {theme}</div>;\n});\n\n// 5.2 åˆ†ç¦» Context å€¼\nconst ThemeContext = React.createContext('light');\nconst ThemeUpdateContext = React.createContext(() => {});\n\nfunction ThemeProvider({ children }) {\n  const [theme, setTheme] = useState('light');\n  \n  const toggleTheme = useCallback(() => {\n    setTheme(prev => prev === 'light' ? 'dark' : 'light');\n  }, []);\n\n  return (\n    <ThemeContext.Provider value={theme}>\n      <ThemeUpdateContext.Provider value={toggleTheme}>\n        {children}\n      </ThemeUpdateContext.Provider>\n    </ThemeContext.Provider>\n  );\n}\n```\n\n## 7. å®é™…åº”ç”¨ç¤ºä¾‹\n\n- å…¨å±€çŠ¶æ€ç®¡ç†\n- å¤šè¯­è¨€æ”¯æŒ\n\n```jsx\n// 6.1 å…¨å±€çŠ¶æ€ç®¡ç†\nconst GlobalStateContext = React.createContext();\n\nfunction GlobalStateProvider({ children }) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  \n  return (\n    <GlobalStateContext.Provider value={{ state, dispatch }}>\n      {children}\n    </GlobalStateContext.Provider>\n  );\n}\n\n// 6.2 å¤šè¯­è¨€æ”¯æŒ\nconst LanguageContext = React.createContext({\n  language: 'en',\n  translations: {},\n  setLanguage: () => {}\n});\n\nfunction useTranslation() {\n  const { language, translations } = useContext(LanguageContext);\n  \n  const t = useCallback((key) => {\n    return translations[language]?.[key] || key;\n  }, [language, translations]);\n  \n  return { t, language };\n}\n```\n\n## 8. å¸¸è§é™·é˜±å’Œæ³¨æ„äº‹é¡¹\n\n```jsx\n// 7.1 é¿å…é‡å¤æ¸²æŸ“\nfunction ParentComponent() {\n  const [count, setCount] = useState(0);\n  \n  // ä¸å¥½çš„åšæ³•ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å¯¹è±¡\n  return (\n    <ThemeContext.Provider value={{ theme: 'light', count }}>\n      <ChildComponent />\n    </ThemeContext.Provider>\n  );\n  \n  // å¥½çš„åšæ³•ï¼šä½¿ç”¨ useMemo\n  const value = useMemo(() => ({ theme: 'light', count }), [count]);\n  return (\n    <ThemeContext.Provider value={value}>\n      <ChildComponent />\n    </ThemeContext.Provider>\n  );\n}\n\n// 7.2 Context åµŒå¥—è¿‡æ·±çš„é—®é¢˜\n// ä¸å¥½çš„åšæ³•\nfunction DeepNesting() {\n  return (\n    <ContextA.Provider>\n      <ContextB.Provider>\n        <ContextC.Provider>\n          <ContextD.Provider>\n            <Component />\n          </ContextD.Provider>\n        </ContextC.Provider>\n      </ContextB.Provider>\n    </ContextA.Provider>\n  );\n}\n\n// å¥½çš„åšæ³•ï¼šä½¿ç”¨ç»„åˆ\nfunction CombinedProvider({ children }) {\n  // åœ¨ä¸€ä¸ªç»„ä»¶ä¸­å¤„ç†æ‰€æœ‰ context é€»è¾‘\n  return (\n    <AppProviders>\n      {children}\n    </AppProviders>\n  );\n}\n```\n\n### 8.1. é¿å…è¿‡åº¦ä½¿ç”¨\n\n```tsx\n// ä¸æ¨è\nconst UserContext = React.createContext();\nconst ThemeContext = React.createContext();\nconst SettingsContext = React.createContext();\n\nfunction DeepNestedComponent() {\n  const user = useContext(UserContext);\n  const theme = useContext(ThemeContext);\n  const settings = useContext(SettingsContext);\n  // ...\n}\n\n// æ¨è\nconst AppContext = React.createContext();\n\nfunction DeepNestedComponent() {\n  const { user, theme, settings } = useContext(AppContext);\n  // ...\n}\n\n```\n\n## 9. è°ƒè¯•æŠ€å·§\n\n```jsx\n// 8.1 æ·»åŠ  displayName\nThemeContext.displayName = 'ThemeContext';\n\n// 8.2 å¼€å‘ç¯å¢ƒä¸‹çš„è°ƒè¯•æ—¥å¿—\nfunction useDebugContext(context, name) {\n  const value = useContext(context);\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'development') {\n      console.log(`${name} context value:`, value);\n    }\n  }, [value, name]);\n  return value;\n}\n```\n\n## 10. ä½¿ç”¨ Context æ—¶çš„å…³é”®å»ºè®®\n\n1. é€‚åº¦ä½¿ç”¨ï¼šä¸è¦ä¸ºäº†é¿å… props ä¼ é€’å°±è¿‡åº¦ä½¿ç”¨ Context\n\t- è€ƒè™‘æ˜¯å¦çœŸçš„éœ€è¦ Contextï¼Œæœ‰æ—¶ props ä¼ é€’å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©\n2. åˆç†æ‹†åˆ†ï¼šå°†ä¸åŒé¢†åŸŸçš„ Context åˆ†å¼€ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“\n3. æä¾›é»˜è®¤å€¼ï¼šæ€»æ˜¯ä¸º createContext æä¾›åˆç†çš„é»˜è®¤å€¼\n4. é”™è¯¯å¤„ç†ï¼šåœ¨è‡ªå®šä¹‰ Hook ä¸­æ·»åŠ å¿…è¦çš„é”™è¯¯æ£€æŸ¥\n5. æ€§èƒ½ä¼˜åŒ–ï¼šä½¿ç”¨ memoã€useMemo å’Œ useCallback ä¼˜åŒ–æ€§èƒ½\n6. ç±»å‹å®‰å…¨ï¼šåœ¨ TypeScript é¡¹ç›®ä¸­ï¼Œä¸º Context æ·»åŠ é€‚å½“çš„ç±»å‹å®šä¹‰\n","93854c5ca9625be5a43b8d8e38daa7ec":"\n# immer.js åœ¨ React ä¸­çš„ä½¿ç”¨\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å®šä¹‰ \n\nImmer.js æ˜¯ä¸€ä¸ªè®©æˆ‘ä»¬èƒ½å¤Ÿä»¥æ›´ç®€å•çš„æ–¹å¼å¤„ç†`ä¸å¯å˜æ•°æ®`çš„åº“ã€‚\n\nå®ƒçš„æ ¸å¿ƒç†å¿µæ˜¯é€šè¿‡åˆ›å»ºä¸€ä¸ª\"è‰ç¨¿çŠ¶æ€\"(draft)æ¥ä¿®æ”¹æ•°æ®ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹åŸå§‹çŠ¶æ€ã€‚\n\n## 2. åŸºæœ¬ä½¿ç”¨æ–¹æ³•\n\n```jsx\nimport produce from 'immer';\n\n// åŸºç¡€ç”¨æ³•\nconst baseState = {\n    name: \"John\",\n    age: 30,\n    address: {\n        city: \"New York\",\n        country: \"USA\"\n    },\n     users: [ { id: 1, name: 'John' } ]\n};\n\n// ä½¿ç”¨ produce åˆ›å»ºæ–°çŠ¶æ€\nconst newState = produce(baseState, draft => {\n    draft.age = 31;\n    draft.address.city = \"Boston\";\n    draft.users.push({ id: 2, name: 'Jane' });\n});\n```\n\n## 3. åœ¨ React ä¸­çš„åº”ç”¨\n\n```jsx hl:13\nimport { useState } from 'react';\nimport produce from 'immer';\n\nfunction UserProfile() {\n    const [user, setUser] = useState({\n        name: \"John\",\n        preferences: {\n            theme: \"light\",\n            notifications: true\n        }\n    });\n\n    // ä½¿ç”¨ Immer æ›´æ–°åµŒå¥—çŠ¶æ€\n    const toggleNotifications = () => {\n        setUser(produce(draft => {\n            draft.preferences.notifications = !draft.preferences.notifications;\n        }));\n    };\n    \n    // ä¹Ÿå¯ä»¥è¿™æ ·å†™\n    const toggleTheme = () => {\n        setUser(\n            produce(user, draft => {\n                draft.preferences.theme = draft.preferences.theme === \"light\" ? \"dark\" : \"light\";\n            })\n        );\n    };\n}\n```\n\n## 4. ä¸»è¦ä½œç”¨å’Œä¼˜åŠ¿\n\n### 4.1.1. ç®€åŒ–å¤æ‚çŠ¶æ€æ›´æ–°\n\n- ä¸éœ€è¦æ‰‹åŠ¨åˆ›å»ºå¯¹è±¡çš„æ·±æ‹·è´\n- é¿å…äº†å±•å¼€è¿ç®—ç¬¦çš„å¤šå±‚åµŒå¥—\n- ä»£ç æ›´ç›´è§‚ï¼Œæ›´æ˜“è¯»\n\n```jsx hl:1,15\n// ä¸ä½¿ç”¨ Immer\nconst updateNestedState = () => {\n    setState({\n        ...state,\n        nested: {\n            ...state.nested,\n            deep: {\n                ...state.nested.deep,\n                value: newValue\n            }\n        }\n    });\n};\n\n// ä½¿ç”¨ Immer\nconst updateNestedState = () => {\n    setState(produce(draft => {\n        draft.nested.deep.value = newValue;\n    }));\n};\n```\n\n## 5. è‡ªåŠ¨å¤„ç†ä¸å¯å˜æ€§\n\n- Immer ç¡®ä¿çŠ¶æ€çš„ä¸å¯å˜æ€§\n- é˜²æ­¢æ„å¤–çš„çŠ¶æ€çªå˜\n- ä¼˜åŒ– React çš„æ€§èƒ½ï¼ˆé€šè¿‡å¼•ç”¨æ¯”è¾ƒï¼‰\n\n## 6. ä½¿ç”¨æ³¨æ„äº‹é¡¹\n\n### 6.1. è¿”å›å€¼å¤„ç†\n\n```jsx\n// è¿™æ ·æ˜¯æ­£ç¡®çš„\nconst newState = produce(state, draft => {\n    draft.value += 1;\n});\n\n// è¿™æ ·ä¹Ÿæ˜¯æ­£ç¡®çš„ï¼ˆè¿”å›å…¨æ–°çš„çŠ¶æ€ï¼‰\nconst newState = produce(state, draft => {\n    return {\n        ...draft,\n        value: draft.value + 1\n    };\n});\n\n// æ³¨æ„ï¼šä¸è¦è¿™æ ·åš\nconst newState = produce(state, draft => {\n    return draft.value + 1; // é”™è¯¯ï¼šè¿”å›åŸå§‹å€¼è€Œä¸æ˜¯å¯¹è±¡\n});\n```\n\n### 6.2. æ€§èƒ½è€ƒè™‘\n\n- å¯¹äºç®€å•çš„çŠ¶æ€æ›´æ–°ï¼Œç›´æ¥ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦å¯èƒ½æ›´é«˜æ•ˆ\n- Immer é€‚åˆå¤„ç†å¤æ‚çš„åµŒå¥—çŠ¶æ€æ›´æ–°\n- é¿å…åœ¨æ€§èƒ½å…³é”®çš„å¾ªç¯ä¸­è¿‡åº¦ä½¿ç”¨\n\n```jsx\n// ç®€å•æ›´æ–°ï¼Œä¸éœ€è¦ Immer\nsetState(state => ({ ...state, count: state.count + 1 }));\n\n// å¤æ‚åµŒå¥—æ›´æ–°ï¼Œé€‚åˆä½¿ç”¨ Immer\nsetState(produce(draft => {\n    draft.deeply.nested.array[0].value = newValue;\n}));\n```\n\n### 6.3. å¼‚æ­¥æ“ä½œ\n```jsx\n// åœ¨å¼‚æ­¥æ“ä½œä¸­ä½¿ç”¨\nconst handleAsync = async () => {\n    const response = await fetchData();\n    setState(produce(draft => {\n        draft.data = response;\n        draft.loading = false;\n    }));\n};\n```\n\n## 7. ä¸ React å·¥å…·çš„é›†æˆ\n\n### 7.1. ä¸ useReducer é…åˆä½¿ç”¨\n\n```jsx\nimport produce from 'immer';\n\nconst reducer = produce((draft, action) => {\n    switch (action.type) {\n        case 'INCREMENT':\n            draft.count += 1;\n            break;\n        case 'ADD_TODO':\n            draft.todos.push(action.payload);\n            break;\n    }\n});\n```\n\n### 7.2. ä¸ Redux é…åˆä½¿ç”¨\n\n```jsx\nimport produce from 'immer';\n\nconst todosReducer = produce((draft, action) => {\n    switch (action.type) {\n        case 'ADD_TODO':\n            draft.push(action.payload);\n            break;\n        case 'TOGGLE_TODO':\n            const todo = draft.find(todo => todo.id === action.payload);\n            if (todo) {\n                todo.completed = !todo.completed;\n            }\n            break;\n    }\n});\n```\n\n## 8. æœ€ä½³å®è·µ\n\n- åœ¨çŠ¶æ€æ›´æ–°é€»è¾‘å¤æ‚çš„ç»„ä»¶ä¸­ä½¿ç”¨ Immer\n- å¯¹äºç®€å•çš„çŠ¶æ€æ›´æ–°ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨å¸¸è§„æ–¹å¼\n- ç¡®ä¿å›¢é˜Ÿæˆå‘˜éƒ½ç†è§£ Immer çš„å·¥ä½œåŸç†\n- åœ¨æ€§èƒ½å…³é”®çš„åœºæ™¯ä¸­è°¨æ…ä½¿ç”¨\n- ä¿æŒçŠ¶æ€ç»“æ„çš„æ‰å¹³åŒ–ï¼Œå³ä½¿ä½¿ç”¨ Immer ä¹Ÿåº”é¿å…è¿‡æ·±çš„åµŒå¥—\n\n## ä¸ Immutable.js çš„æ¯”è¾ƒ\n\n- å¦‚æœä½ çš„é¡¹ç›®ä¸æ˜¯ç‰¹åˆ«ä¾èµ–æ€§èƒ½ï¼Œå¹¶ä¸”å¸Œæœ›ä¿æŒä»£ç çš„å¯è¯»æ€§å’Œç»´æŠ¤æ€§ï¼ŒImmer.js æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚\n- å¦‚æœä½ çš„é¡¹ç›®è§„æ¨¡è¾ƒå¤§ï¼Œå¯¹æ€§èƒ½è¦æ±‚æé«˜ï¼Œå¹¶ä¸”å›¢é˜Ÿæˆå‘˜éƒ½ç†Ÿæ‚‰å‡½æ•°å¼ç¼–ç¨‹æ¦‚å¿µï¼Œé‚£ä¹ˆ Immutable.js å¯èƒ½æ›´é€‚åˆã€‚\n- åœ¨ç°ä»£ React å¼€å‘ä¸­ï¼ŒImmer.js çš„ä½¿ç”¨æ›´ä¸ºæ™®éï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Redux Toolkit é€‰æ‹©äº†é›†æˆ Immer.js è€Œä¸æ˜¯ Immutable.jsã€‚\n\n\n","9aeb84295fa0562cbfe88f373fcc3e0e":"\n# èŠèŠ Redux\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä¸ Flux çš„å…³ç³» \n\nFlux:\n- å•å‘æ•°æ®æµ\n- å¤šä¸ª Store\n- Dispatcher æ˜¯æ ¸å¿ƒ\n- Store ä¹‹é—´å¯èƒ½å­˜åœ¨ä¾èµ–å…³ç³»\nRedux:\n- å•å‘æ•°æ®æµ\n- å•ä¸€ Storeï¼šå•ä¸€çš„ Store å­˜å‚¨æ‰€æœ‰çŠ¶æ€\n- Reducer æ˜¯æ ¸å¿ƒ\n- ä½¿ç”¨çº¯å‡½æ•°æ›´æ–°çŠ¶æ€\n\nRedux æ˜¯ Flux æ¶æ„çš„ä¸€ä¸ªæ¼”è¿›å’Œæ”¹è¿›ç‰ˆæœ¬ã€‚å®ƒé€šè¿‡å¼•å…¥`å•ä¸€æ•°æ®æº`ã€`çº¯å‡½æ•°æ›´æ–°`å’Œä¸å¯å˜æ€§ç­‰æ¦‚å¿µï¼Œä½¿å¾—çŠ¶æ€ç®¡ç†æ›´åŠ å¯é¢„æµ‹å’Œæ˜“äºç»´æŠ¤\n\n## 2. Redux çš„æ ¸å¿ƒåŸåˆ™\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241030-6.png)\n\n1. **å•ä¸€æ•°æ®æºï¼ˆSingle Source of Truthï¼‰**\n    - æ•´ä¸ªåº”ç”¨çš„çŠ¶æ€å­˜å‚¨åœ¨å•ä¸ª store çš„å¯¹è±¡æ ‘ä¸­\n    - ä½¿çŠ¶æ€å¯é¢„æµ‹ä¸”æ˜“äºè°ƒè¯•\n    - æ”¯æŒæœåŠ¡å™¨ç«¯æ¸²æŸ“\n2. **çŠ¶æ€æ˜¯åªè¯»çš„ï¼ˆState is Read-onlyï¼‰**\n    - `å”¯ä¸€`æ”¹å˜çŠ¶æ€çš„æ–¹å¼æ˜¯è§¦å‘ action\n    - æ‰€æœ‰çš„çŠ¶æ€æ›´æ–°éƒ½æ˜¯é›†ä¸­åŒ–å’Œé¡ºåºåŒ–çš„\n    - ç¡®ä¿è§†å›¾å’Œç½‘ç»œè¯·æ±‚ä¸èƒ½ç›´æ¥ä¿®æ”¹çŠ¶æ€\n3. **ä½¿ç”¨çº¯å‡½æ•°è¿›è¡Œä¿®æ”¹ï¼ˆChanges are made with Pure Functionsï¼‰**\n    - Reducers å¿…é¡»æ˜¯çº¯å‡½æ•°\n    - ç»™å®šç›¸åŒçš„è¾“å…¥ï¼Œæ€»æ˜¯è¿”å›ç›¸åŒçš„è¾“å‡º\n    - ä¸äº§ç”Ÿå‰¯ä½œç”¨\n\n## 3. Redux æ ¸å¿ƒæ¦‚å¿µ\n\n### 3.1. å…ˆæ€»ç»“\n\n- createStore\n    - åˆ›å»º store å¯¹è±¡ï¼ŒåŒ…å« getStateã€dispatchã€subscribeã€replaceReducer\n- reducer\n    - çº¯å‡½æ•°ï¼Œæ¥å—æ—§çš„ stateã€actionï¼Œç”Ÿæˆæ–°çš„ state\n- action\n    - åŠ¨ä½œï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¿…é¡»åŒ…æ‹¬ type å­—æ®µï¼Œè¡¨ç¤º view å‘å‡ºé€šçŸ¥å‘Šè¯‰ store è¦æ”¹å˜\n- dispatch\n    - æ´¾å‘ï¼Œè§¦å‘ action ï¼Œç”Ÿæˆæ–°çš„ stateã€‚æ˜¯ view å‘å‡º action çš„å”¯ä¸€æ–¹æ³•\n- subscribe\n    - è®¢é˜…ï¼Œåªæœ‰è®¢é˜…äº†ï¼Œå½“æ´¾å‘æ—¶ï¼Œä¼šæ‰§è¡Œè®¢é˜…å‡½æ•°\n- combineReducers\n    - åˆå¹¶ reducer æˆä¸€ä¸ª reducer\n- replaceReudcer\n    - ä»£æ›¿ reducer çš„å‡½æ•°\n- middleware\n    - ä¸­é—´ä»¶ï¼Œæ‰©å±• dispatch å‡½æ•°\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241030-7.png)\n### 3.2. Store\n\n- æ•´ä¸ªåº”ç”¨çš„çŠ¶æ€æ ‘\n- æ˜¯åªè¯»çš„\n- åªèƒ½é€šè¿‡è§¦å‘ action æ¥ä¿®æ”¹\n\n```javascript\nimport { createStore } from 'redux'\nconst store = createStore(reducer)\n\n```\n\n- ä¿å­˜çŠ¶æ€çš„å®¹å™¨\n- æä¾›Â `getState()`Â æ–¹æ³•è®¿é—®çŠ¶æ€\n- æä¾›Â `dispatch(action)`Â æ–¹æ³•æ›´æ–°çŠ¶æ€\n- æä¾›Â `subscribe(listener)`Â æ–¹æ³•æ³¨å†Œç›‘å¬å™¨\n\n### 3.3. Action\n\n- æè¿°å‘ç”Ÿäº†ä»€ä¹ˆçš„`æ™®é€šå¯¹è±¡`\n- å¿…é¡»åŒ…å« type å±æ€§\n- å¯ä»¥æºå¸¦é¢å¤–æ•°æ®\n\n   ```javascript\n   // æ™®é€š action\n   const addTodo = {\n     type: 'ADD_TODO',\n     payload: { text: 'å­¦ä¹  Redux' }\n   }\n   \n   // action creator\n   const addTodo = (text) => ({\n     type: 'ADD_TODO',\n     payload: { text }\n   })\n   ```\n\n### 3.4. Reducer\n\n- æŒ‡å®šçŠ¶æ€å¦‚ä½•å˜åŒ–çš„çº¯å‡½æ•°\n- æ¥æ”¶æ—§çŠ¶æ€å’Œ actionï¼Œè¿”å›æ–°çŠ¶æ€\n- ä¸åº”ç›´æ¥ä¿®æ”¹æ—§çŠ¶æ€\n\n   ```javascript\n   const todoReducer = (state = [], action) => {\n     switch (action.type) {\n       case 'ADD_TODO':\n         return [...state, action.payload];\n       case 'REMOVE_TODO':\n         return state.filter(todo => todo.id !== action.payload.id);\n       default:\n         return state;\n     }\n   }\n   ```\n\n## 4. äºŒã€åŸºæœ¬ä½¿ç”¨æµç¨‹\n\n### 4.1. åˆ›å»º Store\n\n   ```javascript\n   import { createStore } from 'redux';\n   \n   const store = createStore(reducer);\n   ```\n\n### 4.2. è®¢é˜…æ›´æ–°\n\n   ```javascript\n   store.subscribe(() => {\n     console.log('Store updated:', store.getState());\n   });\n   ```\n\n### 4.3. è§¦å‘ Action\n\n   ```javascript\n   store.dispatch(addTodo('å­¦ä¹  Redux'));\n   ```\n\n## 5. ä¸‰ã€Redux å·¥å…·é“¾\n\n### 5.1. Redux Toolkitï¼ˆæ¨èä½¿ç”¨ï¼‰\n\n- ç®€åŒ–æ ·æ¿ä»£ç \n- å†…ç½® Immer\n- æ›´å¥½çš„å¼€å‘ä½“éªŒ\n\n   ```javascript\n   import { createSlice, configureStore } from '@reduxjs/toolkit';\n\n   const todoSlice = createSlice({\n     name: 'todos',\n     initialState: [],\n     reducers: {\n       addTodo: (state, action) => {\n         state.push(action.payload);\n       },\n       removeTodo: (state, action) => {\n         return state.filter(todo => todo.id !== action.payload.id);\n       }\n     }\n   });\n\n   const store = configureStore({\n     reducer: {\n       todos: todoSlice.reducer\n     }\n   });\n   ```\n\n### 5.2. Redux Middleware\n\n- å¤„ç†å¼‚æ­¥æ“ä½œ\n- æ—¥å¿—è®°å½•\n- é”™è¯¯å¤„ç†\n\n```javascript\nimport { createStore, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\n\nconst store = createStore(\n  reducer,\n  applyMiddleware(thunk)\n)\n\n```\n\n#### 5.2.1. æ¯”å¦‚æ—¥å¿—ä¸­é—´ä»¶\n\n   ```javascript\n   // æ—¥å¿—ä¸­é—´ä»¶ç¤ºä¾‹\n   const logger = store => next => action => {\n     console.log('dispatching', action);\n     let result = next(action);\n     console.log('next state', store.getState());\n     return result;\n   };\n   ```\n\n## 6. æœ€ä½³å®è·µ\n\n2. Action ä½¿ç”¨æ³¨æ„ç‚¹ï¼š\n\n3. Reducer æ³¨æ„ç‚¹ï¼š\n\n### 6.1. State ç»“æ„è®¾è®¡\n\n- å°†çŠ¶æ€æ‰å¹³åŒ–\n- é¿å…å†—ä½™æ•°æ®\n- è§„èŒƒåŒ–å¤æ‚æ•°æ®ç»“æ„\n- é¿å…å†—ä½™æ•°æ®\n- åˆç†åˆ’åˆ† state æ ‘\n- ä½¿ç”¨èŒƒå¼åŒ–æ•°æ®ç»“æ„\n- é¿å…æ·±å±‚åµŒå¥—\n\n   ```javascript\n   const state = {\n     entities: {\n       todos: {\n         byId: {\n           1: { id: 1, text: 'å­¦ä¹  Redux' },\n           2: { id: 2, text: 'å­¦ä¹  React' }\n         },\n         allIds: [1, 2]\n       },\n       users: {\n         // ...\n       }\n     },\n     ui: {\n       loading: false,\n       error: null\n     }\n   };\n   ```\n\n### 6.2. Action è®¾è®¡åŸåˆ™\n\n```javascript\n// ä½¿ç”¨ action creator\nconst createUser = (user) => ({\n  type: 'CREATE_USER',\n  payload: user\n})\n\n// ä½¿ç”¨å¸¸é‡å®šä¹‰ action types\nconst ActionTypes = {\n  CREATE_USER: 'CREATE_USER',\n  UPDATE_USER: 'UPDATE_USER'\n}\n\n```\n\n   - ä½¿ç”¨åŠ¨è¯+åè¯çš„å‘½åæ–¹å¼\n   - æºå¸¦æœ€å°å¿…è¦ä¿¡æ¯\n   - ä½¿ç”¨æ ‡å‡†åŒ–çš„ç»“æ„\n   - é¿å…åœ¨ä¸€ä¸ª action ä¸­åŒ…å«å¤šä¸ªæ“ä½œ\n   - ä¿æŒ action çš„åŸå­æ€§\n   - ä½¿ç”¨ action creator ç»Ÿä¸€åˆ›å»º\n   - è€ƒè™‘ä½¿ç”¨ action ç±»å‹å¸¸é‡\n\n### 6.3. Reducer è®¾è®¡åŸåˆ™\n\n- ä¿æŒçº¯å‡½æ•°ç‰¹æ€§\n- é¿å…å‰¯ä½œç”¨\n- ä½¿ç”¨ combineReducers æ‹†åˆ†\n- ä½¿ç”¨ immer ç®€åŒ–ä¸å¯å˜æ›´æ–°\n- ä¿æŒçº¯å‡½æ•°ç‰¹æ€§\n- é¿å…ä¿®æ”¹ state å‚æ•°\n- å¤„ç†å¥½æœªçŸ¥çš„ action type\n- åˆç†æ‹†åˆ† reducer\n\n## 7. Redux åŸç†\n\n### 7.1. æ•°æ®æµå‘\n\n- å•å‘æ•°æ®æµ\n- å¯é¢„æµ‹çš„çŠ¶æ€å˜åŒ–\n- ä¾¿äºè°ƒè¯•å’Œæµ‹è¯•\n\n```javascript\nAction -> Dispatcher -> Store -> View\n```\n\n### 7.2. å‘å¸ƒè®¢é˜…æ¨¡å¼\n\n- é€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼å®ç°\n- çŠ¶æ€æ›´æ–°è§¦å‘ç›‘å¬å™¨\n- ç¡®ä¿çŠ¶æ€åŒæ­¥æ›´æ–°\n\n   ```javascript\n   function createStore(reducer) {\n     let state;\n     let listeners = [];\n     \n     const getState = () => state;\n     \n     const dispatch = (action) => {\n       state = reducer(state, action);\n       listeners.forEach(listener => listener());\n     };\n     \n     const subscribe = (listener) => {\n       listeners.push(listener);\n       return () => {\n         listeners = listeners.filter(l => l !== listener);\n       };\n     };\n     \n     dispatch({}); // åˆå§‹åŒ– state\n     \n     return { getState, dispatch, subscribe };\n   }\n   ```\n\n### 7.3. ä¸­é—´ä»¶å®ç°åŸç†\n\n   ```javascript\n   function applyMiddleware(...middlewares) {\n     return (createStore) => (reducer, preloadedState) => {\n       const store = createStore(reducer, preloadedState);\n       let dispatch = store.dispatch;\n       \n       const middlewareAPI = {\n         getState: store.getState,\n         dispatch: (action) => dispatch(action)\n       };\n       \n       const chain = middlewares.map(middleware => middleware(middlewareAPI));\n       dispatch = compose(...chain)(store.dispatch);\n       \n       return {\n         ...store,\n         dispatch\n       };\n     };\n   }\n   ```\n\n## 8. æ€§èƒ½ä¼˜åŒ–\n\n### 8.1. Reselect ä½¿ç”¨\n\n   ```javascript\n   import { createSelector } from 'reselect';\n\n   const getTodos = state => state.todos;\n   const getFilter = state => state.filter;\n\n   const getVisibleTodos = createSelector(\n     [getTodos, getFilter],\n     (todos, filter) => {\n       switch (filter) {\n         case 'SHOW_COMPLETED':\n           return todos.filter(todo => todo.completed);\n         case 'SHOW_ACTIVE':\n           return todos.filter(todo => !todo.completed);\n         default:\n           return todos;\n       }\n     }\n   );\n   ```\n\n### 8.2. é¿å…ä¸å¿…è¦çš„æ¸²æŸ“\n\n   ```javascript\n   // ä½¿ç”¨ React.memo æˆ– shouldComponentUpdate\n   const TodoItem = React.memo(({ todo, onToggle }) => {\n     return (\n       <li onClick={() => onToggle(todo.id)}>\n         {todo.text}\n       </li>\n     );\n   });\n   ```\n\n### 8.3. å…¶ä»–\n\n- é¿å…é¢‘ç¹çš„ `dispatch`\n- ä½¿ç”¨ `reselect` ç¼“å­˜è®¡ç®—ç»“æœ\n- é¿å…ä¸å¿…è¦çš„ç»„ä»¶æ¸²æŸ“\n- åˆç†ä½¿ç”¨ connect æˆ– hooks\n- ç²¾ç»†åŒ–ä¾èµ–\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241030-5.png)\n\n## 9. Redux Hooks\n\n### 9.1. useSelector\n\n   ```javascript\n   import { useSelector } from 'react-redux';\n\n   function TodoList() {\n     const todos = useSelector(state => state.todos);\n     return (\n       <ul>\n         {todos.map(todo => (\n           <TodoItem key={todo.id} {...todo} />\n         ))}\n       </ul>\n     );\n   }\n   ```\n\n### 9.2. useDispatch\n\n   ```javascript\n   import { useDispatch } from 'react-redux';\n\n   function AddTodo() {\n     const dispatch = useDispatch();\n     return (\n       <button onClick={() => dispatch(addTodo('æ–°ä»»åŠ¡'))}>\n         æ·»åŠ ä»»åŠ¡\n       </button>\n     );\n   }\n   ```\n\n## 10. è°ƒè¯•å·¥å…·\n\n### 10.1. Redux DevTools\n\n   ```javascript\n   const store = createStore(\n     reducer,\n     window.__REDUX_DEVTOOLS_EXTENSION__ && \n     window.__REDUX_DEVTOOLS_EXTENSION__()\n   );\n   ```\n\n### 10.2. æ—¥å¿—ä¸­é—´ä»¶\n\n   ```javascript\n   import { createLogger } from 'redux-logger';\n\n   const store = createStore(\n     reducer,\n     applyMiddleware(createLogger())\n   );\n   ```\n\n## 11. é€‰æ‹©å»ºè®®\n\nå¯¹äºå°å‹é¡¹ç›®ï¼Œå¯èƒ½ä½¿ç”¨ React çš„ Context API æˆ–å…¶ä»–æ›´è½»é‡çº§çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆä¼šæ›´åˆé€‚ã€‚\n\n\n\n## 12. æ€»ç»“\n\n1. Redux æ˜¯çŠ¶æ€ç®¡ç†åº“ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ¶æ„\n2. Redux ä¸ React æ— å…³ï¼Œä½†å®ƒæ˜¯ä¸ºäº†è§£å†³ React ç»„ä»¶ä¸­çŠ¶æ€æ— æ³•å…±äº«è€Œå‡ºçš„ä¸€ç§è§£å†³æ–¹æ¡ˆ\n3. å•çº¯çš„ Redux åªæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œ store ä¸­å­˜æ”¾äº†æ‰€æœ‰çš„çŠ¶æ€ stateï¼Œè¦æƒ³æ”¹å˜é‡Œé¢çš„çŠ¶æ€ stateï¼Œåªèƒ½ dispatch ä¸€ä¸ªåŠ¨ä½œ\n4. å‘å‡ºå»çš„ action éœ€è¦ç”¨ reducer æ¥å¤„ç†ï¼Œä¼ å…¥ state å’Œ actionï¼Œè¿”å›æ–°çš„ state\n5. subscribe æ–¹æ³•å¯ä»¥æ³¨å†Œå›è°ƒæ–¹æ³•ï¼Œå½“ dispatch action çš„æ—¶å€™ä¼šæ‰§è¡Œé‡Œé¢çš„å›è°ƒ\n6. Redux å…¶å®æ˜¯ä¸€ä¸ª`å‘å¸ƒè®¢é˜…æ¨¡å¼`\n7. Redux æ”¯æŒ enhancerï¼Œenhancer å…¶å®å°±æ˜¯ä¸€ä¸ªè£…é¥°å™¨å‡½æ•°ï¼Œä¼ å…¥å½“å‰çš„ createStoreï¼Œè¿”å›ä¸€ä¸ªå¢å¼ºçš„ createStore\n8. Redux ä½¿ç”¨ `applyMiddleware` å‡½æ•°æ”¯æŒä¸­é—´ä»¶ï¼Œå®ƒçš„è¿”å›å€¼å…¶å®å°±æ˜¯ä¸€ä¸ª enhancer\n9. Redux çš„ä¸­é—´ä»¶ä¹Ÿæ˜¯ä¸€ä¸ªè£…é¥°å™¨æ¨¡å¼ï¼Œä¼ å…¥å½“å‰çš„ dispatchï¼Œè¿”å›ä¸€ä¸ªå¢å¼ºäº†çš„ dispatch\n10. å•çº¯çš„ Redux æ˜¯æ²¡æœ‰ View å±‚çš„\n\n","0fd4baba20745d6bbf508c4a4f5cde20":"\n# èŠèŠæœ€æ–°çš„ umi\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. Umi å¦‚ä½•ç®¡ç†çŠ¶æ€ \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241030-9.png)\n\n### å®šä¹‰ç¤ºä¾‹\n\n```javascript\nimport React, { Component } from \"react\";\nimport { connect } from \"umi\";\n\n@connect(({ user }) => ({\n  user,\n}))\nclass UserInfo extends Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    return <div>{this.props.user.name}</div>;\n  }\n}\n\nexport default UserInfo;\n\n```\n\n### ä½¿ç”¨ç¤ºä¾‹\n\n```javascript hl:4\nimport React, { Component } from \"react\";\nimport { connect } from \"umi\";\n\n@connect(({ user }) => ({\n  user,\n}))\nclass UserInfo extends Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    return <div>{this.props.user.name}</div>;\n  }\n}\n\nexport default UserInfo;\n\n```\n\n## 2. æœ€æ–°çš„ Hooks æ•°æ®æµ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241030-10.png)\n\n### 2.1. counterModel\n\n```javascript\n// src/models/counterModel.ts\nimport { useState, useCallback } from \"react\";\n\nexport default function Page() {\n  const [counter, setCounter] = useState(0);\n\n  const increment = useCallback(() => setCounter((c) => c + 1), []);\n  const decrement = useCallback(() => setCounter((c) => c - 1), []);\n\n  return { counter, increment, decrement };\n}\n\n```\n\n### 2.2. è¯·æ±‚æ•°æ®\n\n```javascript\n// src/models/userModel.ts\nimport { useState } from \"react\";\nimport { getUser } from \"@/services/user\";\n\nexport default function Page() {\n  const [user, setUser] = useState({});\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    getUser().then((res) => {\n      setUser(res);\n      setLoading(false);\n    });\n  }, []);\n\n  return {\n    user,\n    loading,\n  };\n}\n\n```\n\n### 2.3. å’Œ Vue3 çš„ pinia\n\næ˜¯ä¸æ˜¯ç‰¹åˆ«åƒï¼Œé™¤äº†æ”¯æŒæ”¾åˆ° pages ä¸‹çš„ model ç®¡ç†\n\n## 3. Dva \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241030-8.png)\n\n- namespace\n    - model çš„å‘½åç©ºé—´ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä»–åœ¨å…¨å±€ state ä¸Šçš„å±æ€§ï¼Œåªèƒ½ç”¨å­—ç¬¦ä¸²ï¼Œä¸æ”¯æŒé€šè¿‡Â `.`Â çš„æ–¹å¼åˆ›å»ºå¤šå±‚å‘½åç©ºé—´\n- state\n    - åˆå§‹å€¼\n- reducers\n    - çº¯å‡½æ•°ï¼Œä»¥ key/value æ ¼å¼å®šä¹‰ reducerã€‚ç”¨äºå¤„ç†åŒæ­¥æ“¦åšï¼Œå”¯ä¸€å¯ä»¥ä¿®æ”¹Â `state`Â çš„åœ°æ–¹ï¼Œç”±Â `action`Â è§¦å‘\n    - æ ¼å¼ä¸ºï¼š`(state, action) => newState`Â æˆ–Â `[(state, action) => newState, enhancer]`\n- effects\n    - å¤„ç†å¼‚æ­¥æ“ä½œå’Œä¸šåŠ¡é€»è¾‘ï¼Œä»¥ `key/value` æ ¼å¼å®šä¹‰ effect\n    - ä¸ç›´æ¥ä¿®æ”¹ stateã€‚ç”± action è§¦å‘\n    - callï¼šæ‰§è¡Œå¼‚æ­¥æ“ä½œ\n    - putï¼šå‘å‡ºä¸€ä¸ª Actionï¼Œç±»ä¼¼äº dispatch\n- subscriptions\n    - è®¢é˜…\n    - åœ¨Â `app.start()`Â æ—¶è¢«æ‰§è¡Œï¼Œæ•°æ®æºå¯ä»¥æ˜¯å½“å‰çš„æ—¶é—´ã€æœåŠ¡å™¨çš„ websocket é“¾æ¥ã€ keyboard è¾“å…¥ã€history è·¯ç”±å˜åŒ–ã€geolocation å˜åŒ–ç­‰ç­‰\n\n```javascript\nimport React, { Component } from \"react\";\nimport { connect } from \"umi\";\n\nconst mapModelToProps = (allModels) => {\n  return {\n    test: \"hello world\",\n    // props you want connect to Component\n  };\n};\n\n@connect(mapModelToProps)\nclass UserInfo extends Component {\n  render() {\n    return <div>{this.props.test}</div>;\n  }\n}\n\nexport default UserInfo;\n\n```\n","a835e51c9a20532484d8fb99003df310":"\n# è¯·ä»‹ç»ä¸€ä¸‹ next.js æ¡†æ¶\n\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åŸºæœ¬å®šä¹‰ \n\nNext.js æ˜¯ä¸€ä¸ªåŸºäº React çš„`å…¨æ ˆ Web åº”ç”¨å¼€å‘æ¡†æ¶`ï¼Œå®ƒæä¾›äº†æ„å»ºç°ä»£ç½‘ç»œåº”ç”¨æ‰€éœ€çš„æ‰€æœ‰åŠŸèƒ½ã€‚å®ƒæ˜¯ç”± Vercel å…¬å¸å¼€å‘å’Œç»´æŠ¤çš„å¼€æºæ¡†æ¶ã€‚\n\n## 2. æ ¸å¿ƒç‰¹æ€§\n\n### 2.1. æ¸²æŸ“æ–¹å¼\n\n- æœåŠ¡å™¨ç«¯æ¸²æŸ“ (SSR)\n- é™æ€ç«™ç‚¹ç”Ÿæˆ (SSG)\n- å¢é‡é™æ€å†ç”Ÿæˆ (ISR)\n- å®¢æˆ·ç«¯æ¸²æŸ“ (CSR)\n\n### 2.2. è·¯ç”±ç³»ç»Ÿ\n\n- åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„è·¯ç”±\n- åŠ¨æ€è·¯ç”±æ”¯æŒ\n- App Routerï¼ˆæœ€æ–°ç¨³å®šç‰ˆç‰¹æ€§ï¼‰\n- åµŒå¥—è·¯ç”±å’Œå¸ƒå±€\n\n### 2.3. æ€§èƒ½ä¼˜åŒ–\n\n- è‡ªåŠ¨ä»£ç åˆ†å‰²\n- å›¾ç‰‡ä¼˜åŒ–\n- å­—ä½“ä¼˜åŒ–\n- è„šæœ¬ä¼˜åŒ–\n\n## 3. ä¸»è¦ä¼˜åŠ¿\n\n- é›¶é…ç½®ï¼šæä¾›å¼€ç®±å³ç”¨çš„é…ç½®\n- SEO å‹å¥½ï¼šå¾—ç›ŠäºæœåŠ¡å™¨ç«¯æ¸²æŸ“\n- å¼€å‘ä½“éªŒä½³ï¼šæ”¯æŒçƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰\n- å†…ç½® API è·¯ç”±ï¼šæ”¯æŒå…¨æ ˆå¼€å‘\n- TypeScript æ”¯æŒ\n- è‡ªåŠ¨ä¼˜åŒ–å’Œæ€§èƒ½æå‡\n\n## 4. Next.js çš„å…¨æ ˆå¼€å‘èƒ½åŠ›\n\n### 4.1. API è·¯ç”±å®ç°\n\n```typescript\n// app/api/users/route.ts\nimport { NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'  // å‡è®¾ä½¿ç”¨ Prisma ä½œä¸º ORM\n\nexport async function GET() {\n    const users = await prisma.user.findMany()\n    return NextResponse.json(users)\n}\n\nexport async function POST(request: Request) {\n    const data = await request.json()\n    const user = await prisma.user.create({\n        data: {\n            name: data.name,\n            email: data.email\n        }\n    })\n    return NextResponse.json(user)\n}\n```\n\n### 4.2. æ•°æ®åº“é›†æˆ\n\n```typescript\n// lib/prisma.ts\nimport { PrismaClient } from '@prisma/client'\n\nconst prisma = new PrismaClient()\nexport { prisma }\n\n// schema.prisma\ndatasource db {\n    provider = \"postgresql\"\n    url      = env(\"DATABASE_URL\")\n}\n\nmodel User {\n    id        Int      @id @default(autoincrement())\n    name      String\n    email     String   @unique\n    posts     Post[]\n}\n```\n\n### 4.3. æœåŠ¡å™¨ç»„ä»¶ä¸­çš„æ•°æ®è·å–\n\n```typescript\n// app/users/page.tsx\nimport { prisma } from '@/lib/prisma'\n\n// æœåŠ¡å™¨ç»„ä»¶\nexport default async function UsersPage() {\n    // ç›´æ¥åœ¨æœåŠ¡å™¨ç«¯è·å–æ•°æ®\n    const users = await prisma.user.findMany({\n        include: {\n            posts: true\n        }\n    })\n\n    return (\n        <div>\n            {users.map(user => (\n                <div key={user.id}>\n                    <h2>{user.name}</h2>\n                    <p>{user.email}</p>\n                    <h3>Posts:</h3>\n                    <ul>\n                        {user.posts.map(post => (\n                            <li key={post.id}>{post.title}</li>\n                        ))}\n                    </ul>\n                </div>\n            ))}\n        </div>\n    )\n}\n```\n\n### 4.4. ä¸­é—´ä»¶å®ç°\n\n```typescript\n// middleware.ts\nimport { NextResponse } from 'next/server'\nimport type { NextRequest } from 'next/server'\n\nexport function middleware(request: NextRequest) {\n    // è·å– token\n    const token = request.cookies.get('token')\n\n    // ä¿æŠ¤ API è·¯ç”±\n    if (request.nextUrl.pathname.startsWith('/api/')) {\n        if (!token) {\n            return NextResponse.json(\n                { error: 'Authentication required' },\n                { status: 401 }\n            )\n        }\n    }\n\n    return NextResponse.next()\n}\n```\n\n### 4.5. å…¨æ ˆæ•°æ®éªŒè¯\n\n```typescript\n// lib/validations.ts\nimport { z } from 'zod'\n\nexport const userSchema = z.object({\n    name: z.string().min(2),\n    email: z.string().email(),\n    password: z.string().min(6)\n})\n\n// app/api/register/route.ts\nimport { userSchema } from '@/lib/validations'\n\nexport async function POST(request: Request) {\n    try {\n        const data = await request.json()\n        const validated = userSchema.parse(data)\n        \n        // å¤„ç†éªŒè¯åçš„æ•°æ®\n        const user = await prisma.user.create({\n            data: validated\n        })\n        \n        return NextResponse.json(user)\n    } catch (error) {\n        return NextResponse.json(\n            { error: 'Validation failed' },\n            { status: 400 }\n        )\n    }\n}\n```\n\n### 4.6. æœåŠ¡å™¨ç«¯çŠ¶æ€ç®¡ç†\n\n```typescript\n// app/actions.ts\n'use server'\n\nexport async function createPost(formData: FormData) {\n    const title = formData.get('title')\n    const content = formData.get('content')\n    \n    const post = await prisma.post.create({\n        data: {\n            title: title as string,\n            content: content as string\n        }\n    })\n    \n    return post\n}\n\n// app/new-post/page.tsx\nimport { createPost } from '../actions'\n\nexport default function NewPostPage() {\n    return (\n        <form action={createPost}>\n            <input name=\"title\" type=\"text\" />\n            <textarea name=\"content\" />\n            <button type=\"submit\">Create Post</button>\n        </form>\n    )\n}\n```\n\n### 4.7. è®¤è¯é›†æˆ\n\n```typescript\n// app/api/auth/[...nextauth]/route.ts\nimport NextAuth from 'next-auth'\nimport { PrismaAdapter } from '@auth/prisma-adapter'\nimport GitHubProvider from 'next-auth/providers/github'\nimport { prisma } from '@/lib/prisma'\n\nconst handler = NextAuth({\n    adapter: PrismaAdapter(prisma),\n    providers: [\n        GitHubProvider({\n            clientId: process.env.GITHUB_ID!,\n            clientSecret: process.env.GITHUB_SECRET!,\n        }),\n    ],\n    callbacks: {\n        async session({ session, user }) {\n            session.user.id = user.id\n            return session\n        }\n    }\n})\n\nexport { handler as GET, handler as POST }\n```\n\n### 4.8. æ–‡ä»¶ä¸Šä¼ å¤„ç†\n\n```typescript\n// app/api/upload/route.ts\nimport { writeFile } from 'fs/promises'\nimport { NextResponse } from 'next/server'\n\nexport async function POST(request: Request) {\n    const formData = await request.formData()\n    const file = formData.get('file') as File\n    \n    if (!file) {\n        return NextResponse.json(\n            { error: 'No file uploaded' },\n            { status: 400 }\n        )\n    }\n\n    const bytes = await file.arrayBuffer()\n    const buffer = Buffer.from(bytes)\n    \n    const path = `/uploads/${file.name}`\n    await writeFile(`public${path}`, buffer)\n    \n    return NextResponse.json({ path })\n}\n```\n\n### 4.9. WebSocket é›†æˆ\n\n```typescript\n// app/api/socket/route.ts\nimport { createServer } from 'http'\nimport { Server } from 'socket.io'\n\nconst httpServer = createServer()\nconst io = new Server(httpServer, {\n    cors: {\n        origin: process.env.NEXT_PUBLIC_URL\n    }\n})\n\nio.on('connection', (socket) => {\n    console.log('Client connected')\n    \n    socket.on('message', (data) => {\n        io.emit('message', data)\n    })\n})\n\nhttpServer.listen(3001)\n```\n\n### 4.10. ç¯å¢ƒå˜é‡å’Œé…ç½®ç®¡ç†\n\n```env\n# .env.local\nDATABASE_URL=\"postgresql://...\"\nGITHUB_ID=\"...\"\nGITHUB_SECRET=\"...\"\nNEXT_PUBLIC_API_URL=\"...\"\n```\n\nè¿™äº›ç¤ºä¾‹å±•ç¤ºäº† Next.js çš„å…¨æ ˆèƒ½åŠ›ï¼ŒåŒ…æ‹¬ï¼š\n- API è·¯ç”±å¤„ç†\n- æ•°æ®åº“æ“ä½œ\n- æœåŠ¡å™¨ç«¯æ¸²æŸ“\n- æ–‡ä»¶å¤„ç†\n- è®¤è¯æˆæƒ\n- å®æ—¶é€šä¿¡\n- ä¸­é—´ä»¶\n- æ•°æ®éªŒè¯\n- æœåŠ¡å™¨ç«¯çŠ¶æ€ç®¡ç†\n- ç¯å¢ƒé…ç½®\n\nå»ºè®®æ ¹æ®é¡¹ç›®éœ€æ±‚é€æ­¥æ•´åˆè¿™äº›åŠŸèƒ½ï¼Œä¸å¿…ä¸€æ¬¡æ€§å®ç°æ‰€æœ‰ç‰¹æ€§ã€‚ä»åŸºæœ¬çš„ API è·¯ç”±å’Œæ•°æ®åº“æ“ä½œå¼€å§‹ï¼Œç„¶åæ ¹æ®éœ€è¦æ·»åŠ æ›´å¤šåŠŸèƒ½ã€‚\n\n## 5. Next.js çš„åº•å±‚æŠ€æœ¯æ ˆ\n\n### 5.1. æ ¸å¿ƒç¼–è¯‘å’Œæ„å»ºå·¥å…·\n\n#### 5.1.1. SWC (Speedy Web Compiler)\n\n- ç”¨ Rust ç¼–å†™çš„é«˜æ€§èƒ½ JavaScript/TypeScript ç¼–è¯‘å™¨\n- æ›¿ä»£äº†ä¼ ç»Ÿçš„ Babel\n- æä¾›ä»£ç è½¬æ¢å’Œå‹ç¼©åŠŸèƒ½\n- æ¯” Babel å¿« 17 å€ä»¥ä¸Š \n\n#### 5.1.2. b) Turbopack\n\n- Next.js 13 å¼•å…¥çš„æ–°ä¸€ä»£æ‰“åŒ…å·¥å…·\n- åŒæ ·ä½¿ç”¨ Rust ç¼–å†™\n- æ¯” Webpack å¿« 700 å€\n- æ”¯æŒå¢é‡ç¼–è¯‘\n\n### 5.2. è¿è¡Œæ—¶æ ¸å¿ƒ\n\n#### 5.2.1. React æ ¸å¿ƒ\n\n- å®Œå…¨é›†æˆ React 18\n- æ”¯æŒæœåŠ¡å™¨ç»„ä»¶ï¼ˆReact Server Componentsï¼‰\n- æ”¯æŒå¹¶å‘æ¸²æŸ“\n- æ”¯æŒ Suspense å’Œæµå¼æ¸²æŸ“ \n\n#### 5.2.2. æ¸²æŸ“å¼•æ“\n\n- æ”¯æŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰\n- é™æ€ç½‘ç«™ç”Ÿæˆï¼ˆSSGï¼‰\n- å¢é‡é™æ€å†ç”Ÿæˆï¼ˆISRï¼‰\n- å®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆCSRï¼‰\n\n### 5.3. æ•°æ®å±‚æ”¯æŒ\n\n#### 5.3.1. æ•°æ®è·å–\n\n- fetch API\n- React Query/SWR é›†æˆ\n- GraphQL æ”¯æŒ\n- REST API æ”¯æŒ \n\n#### 5.3.2. æ•°æ®åº“é›†æˆ\n\n- Prisma\n- MongoDB\n- PostgreSQL\n- MySQL\n- SQLite\n\n### 5.4. æ€§èƒ½ä¼˜åŒ–å·¥å…·\n\n#### 5.4.1. å›¾åƒä¼˜åŒ–\n\n- å†…ç½®å›¾åƒç»„ä»¶\n- è‡ªåŠ¨å›¾åƒä¼˜åŒ–\n- WebP æ”¯æŒ\n- å“åº”å¼å›¾åƒå¤„ç†\n\n#### 5.4.2. å­—ä½“ä¼˜åŒ–\n\n- å†…ç½®å­—ä½“ç³»ç»Ÿ\n- è‡ªåŠ¨å­—ä½“ä¼˜åŒ–\n- å˜ä½“å­—ä½“æ”¯æŒ\n- æœ¬åœ°å­—ä½“åŠ è½½\n\n### 5.5. å¼€å‘å·¥å…·é›†æˆ\n\n#### 5.5.1. TypeScript\n\n- åŸç”Ÿ TypeScript æ”¯æŒ\n- ç±»å‹æ£€æŸ¥\n- æ™ºèƒ½æç¤º\n- è‡ªåŠ¨ç±»å‹ç”Ÿæˆ\n\n#### 5.5.2. ESLint\n\n- å†…ç½® ESLint é…ç½®\n- ä»£ç è´¨é‡æ£€æŸ¥\n- æœ€ä½³å®è·µå¼ºåˆ¶æ‰§è¡Œ\n\n### 5.6. è·¯ç”±ç³»ç»Ÿ\n\n#### 5.6.1. æ–‡ä»¶ç³»ç»Ÿè·¯ç”±\n\n- åŸºäºæ–‡ä»¶çš„è·¯ç”±ç³»ç»Ÿ\n- åŠ¨æ€è·¯ç”±æ”¯æŒ\n- åµŒå¥—è·¯ç”±\n- å¹³è¡Œè·¯ç”±\n\n#### 5.6.2. ä¸­é—´ä»¶\n\n- è·¯ç”±ä¸­é—´ä»¶\n- è®¤è¯ä¸­é—´ä»¶\n- é‡å®šå‘å¤„ç†\n- è¯·æ±‚æ‹¦æˆª\n\n### 5.7. æ ·å¼è§£å†³æ–¹æ¡ˆ\n\n#### 5.7.1. CSS æ”¯æŒ\n\n- CSS Modules\n- Sass/SCSS\n- PostCSS\n- Tailwind CSS \n\n#### 5.7.2. CSS-in-JS\n\n- styled-components\n- emotion\n- CSS Modules\n- æ³¨æ„ï¼šéƒ¨åˆ† CSS-in-JS è§£å†³æ–¹æ¡ˆåœ¨æœåŠ¡å™¨ç»„ä»¶ä¸­å¯èƒ½å—é™\n\n### 5.8. å®‰å…¨ç‰¹æ€§\n\n#### 5.8.1. å†…ç½®å®‰å…¨æªæ–½\n\n- CSRF ä¿æŠ¤\n- XSS é˜²æŠ¤\n- CSP æ”¯æŒ\n- è¯·æ±‚éªŒè¯\n\n#### 5.8.2. è®¤è¯é›†æˆ\n\n- NextAuth.js\n- JWT\n- Session ç®¡ç†\n- OAuth æä¾›å•†æ”¯æŒ\n\n### 5.9. éƒ¨ç½²å’ŒåŸºç¡€è®¾æ–½\n\n#### 5.9.1. éƒ¨ç½²å¹³å°\n\n- Vercelï¼ˆåŸç”Ÿæ”¯æŒï¼‰\n- AWS\n- Google Cloud\n- Azure\n\n#### 5.9.2. Edge è¿è¡Œæ—¶\n\n- Edge Functions\n- Edge Middleware\n- CDN é›†æˆ\n- å…¨çƒåˆ†å‘\n\n### 5.10. å¼€å‘ä½“éªŒ\n\n#### 5.10.1. å¼€å‘æœåŠ¡å™¨\n\n- å¿«é€Ÿåˆ·æ–°\n- é”™è¯¯å¤„ç†\n- å¼€å‘æ—¶è°ƒè¯•\n- çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰\n\n#### 5.10.2. è°ƒè¯•å·¥å…·\n\n- React DevTools é›†æˆ\n- æ€§èƒ½åˆ†æ\n- å†…å­˜æ³„æ¼æ£€æµ‹\n- ç½‘ç»œè¯·æ±‚ç›‘æ§\n\n","aff5f04c09445702bac7f9999d45d4bb":"\n# ä¸ºä»€ä¹ˆ React è¦å¼•å…¥ Hooks\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä¹‹å‰çš„é—®é¢˜ \n\n- thisæŒ‡å‘é—®é¢˜\n- è¾ƒå¤šç”Ÿå‘½å‘¨æœŸï¼Œä¸”åˆ’åˆ†å¹¶ä¸ç¬¦åˆâ€œ**å†…èšæ€§**â€åŸåˆ™ï¼Œ\n\t- ä¾‹å¦‚ `setInterval` å’Œ `clearInterval` è¿™ç§å…·æœ‰å¼ºå…³è”çš„é€»è¾‘è¢«æ‹†åˆ†åœ¨ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­\n- å¤ç”¨é—®é¢˜ï¼šæ•°æ®å…±äº«æˆ–åŠŸèƒ½å¤ç”¨ï¼Œä»æœ€æ—©ä¹‹å‰çš„mixin / é«˜é˜¶ç»„ä»¶ ã€æˆ–è€…åˆ° Render Props\n- è§£å†³æ•°æ®å…±äº«æˆ–åŠŸèƒ½å¤ç”¨ï¼Œä»æœ€æ—©ä¹‹å‰çš„mixin / é«˜é˜¶ç»„ä»¶ ã€æˆ–è€…åˆ° Render Props\n\n## 2. è§£å†³ç±»ç»„ä»¶çš„é—®é¢˜\n\n- `ç±»ç»„ä»¶`ä¸­çš„ `this` æŒ‡å‘é—®é¢˜å®¹æ˜“é€ æˆå›°æ‰°\n- `ç”Ÿå‘½å‘¨æœŸæ–¹æ³•`å¯¼è‡´ç›¸å…³é€»è¾‘è¢«åˆ†æ•£åˆ°ä¸åŒæ–¹æ³•ä¸­\n- `å¤æ‚ç»„ä»¶`å˜å¾—éš¾ä»¥ç†è§£å’Œç»´æŠ¤\n- `ç±»ç»„ä»¶`éš¾ä»¥å‹ç¼©å’Œä¼˜åŒ–\n\n## 3. æ›´å¥½çš„é€»è¾‘å¤ç”¨ å’Œ æ›´å¥½çš„ç»„ç»‡ä»£ç   \n\n- åœ¨ Hooks ä¹‹å‰ï¼Œå¤ç”¨çŠ¶æ€é€»è¾‘ä¸»è¦`ä¾èµ– HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰`å’Œ `render props`\n\t- è¿™äº›æ¨¡å¼éœ€è¦é‡æ„ç»„ä»¶å±‚çº§ï¼Œå¯¼è‡´ä»£ç éš¾ä»¥ç†è§£\n- Hooks å…è®¸åœ¨ä¸æ”¹å˜ç»„ä»¶å±‚çº§çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘\n\t- å¯ä»¥æŠŠç›¸å…³çš„é€»è¾‘æŠ½å–åˆ°è‡ªå®šä¹‰ Hook ä¸­\n\n## 4. æ›´å®¹æ˜“ç†è§£çš„ç”Ÿå‘½å‘¨æœŸ\n\n- `useEffect` ç»Ÿä¸€äº†ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µ\n- æŒ‰ç…§`å…³æ³¨ç‚¹`è€Œä¸æ˜¯`æ—¶é—´ç‚¹`æ¥ç»„ç»‡ä»£ç \n- æ›´ç›´è§‚åœ°å¤„ç†å‰¯ä½œç”¨\n\n","5ee64ca300bd5fa882043ae05b675efa":"\n# å¯¹æ¯” Next.js ä¸ Nuxt.js\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åŸºç¡€æ¶æ„ \n\n- Next.jsï¼šåŸºäº React ç”Ÿæ€ç³»ç»Ÿ\n- Nuxt.jsï¼šåŸºäº Vue.js ç”Ÿæ€ç³»ç»Ÿ\n\nè¿™æ˜¯æœ€æ ¹æœ¬çš„åŒºåˆ«ï¼Œé€‰æ‹©å“ªä¸ªæ¡†æ¶å¾€å¾€å–å†³äºå›¢é˜Ÿæ˜¯æ›´ç†Ÿæ‚‰ React è¿˜æ˜¯ Vue \n\n## 2. æ€§èƒ½è¡¨ç°\n\nNext.jsï¼š\n\n- ä½¿ç”¨ Rust ç¼–å†™çš„ `SWC ç¼–è¯‘å™¨`\n- Turbopack æä¾›æ›´å¿«çš„æ„å»ºé€Ÿåº¦\n- é»˜è®¤æ”¯æŒæµå¼æ¸²æŸ“\n\nNuxt.jsï¼š\n\n- ä½¿ç”¨ Vite ä½œä¸ºæ„å»ºå·¥å…·\n- Vue 3 çš„å“åº”å¼ç³»ç»Ÿæä¾›æ›´å¥½çš„è¿è¡Œæ—¶æ€§èƒ½\n- `Nitro å¼•æ“`æä¾›è·¨å¹³å°éƒ¨ç½²èƒ½åŠ›\n\n## 3. å¼€å‘ä½“éªŒ\n\nNext.jsï¼š\n- æ›´ä¸¥æ ¼çš„ TypeScript æ”¯æŒ\n- æ›´å®Œå–„çš„ IDE æ”¯æŒ\n- æ›´å¤§çš„ç¤¾åŒºå’Œæ›´å¤šçš„ç¬¬ä¸‰æ–¹ç»„ä»¶\n\nNuxt.jsï¼š\n- æ›´ç®€å•çš„å­¦ä¹ æ›²çº¿\n- æ›´å¥½çš„çº¦å®šä¼˜äºé…ç½®\n- æ›´ç›´è§‚çš„ç›®å½•ç»“æ„ \n\n## 4. ç‰¹æ€§å¯¹æ¯”\n\n|ç‰¹æ€§|Next.js|Nuxt.js|\n|---|---|---|\n|æ–‡ä»¶è·¯ç”±|âœ…|âœ…|\n|API è·¯ç”±|âœ…|âœ…|\n|SSR|âœ…|âœ…|\n|SSG|âœ…|âœ…|\n|å¢é‡é™æ€å†ç”Ÿæˆ|âœ…|éƒ¨åˆ†æ”¯æŒ|\n|è‡ªåŠ¨ä»£ç åˆ†å‰²|âœ…|âœ…|\n|å›¾åƒä¼˜åŒ–|å†…ç½®|æ’ä»¶æ”¯æŒ|\n|ä¸­é—´ä»¶|âœ…|âœ…|\n|çƒ­æ¨¡å—æ›¿æ¢|âœ…|âœ…|\n|TypeScript|åŸç”Ÿæ”¯æŒ|åŸç”Ÿæ”¯æŒ|\n\n## 5. éƒ¨ç½²å’Œæ‰˜ç®¡\n\nNext.jsï¼š\n- Vercel åŸç”Ÿæ”¯æŒ\n- æ›´å¥½çš„ Serverless æ”¯æŒ\n- æ›´å¤šçš„äº‘å¹³å°é›†æˆ\n\nNuxt.jsï¼š\n- æ”¯æŒé™æ€æ‰˜ç®¡\n- Nitro å¼•æ“æ”¯æŒå¤šå¹³å°éƒ¨ç½²\n- æ›´çµæ´»çš„æœåŠ¡å™¨éƒ¨ç½²é€‰é¡¹ \n\n## 6. ç”Ÿæ€ç³»ç»Ÿ\n\nNext.jsï¼š\n- React ç”Ÿæ€ç³»ç»Ÿæ›´å¤§\n- æ›´å¤šä¼ä¸šçº§åº”ç”¨æ¡ˆä¾‹\n- æ›´å¤šç¬¬ä¸‰æ–¹é›†æˆ\n\nNuxt.jsï¼š\n- Vue ç”Ÿæ€ç³»ç»Ÿå®Œå–„\n- æ¨¡å—ç³»ç»Ÿæ›´ç®€å•\n- æ›´å®¹æ˜“æ‰©å±• \n\n## 7. é€‚ç”¨åœºæ™¯\n\nNext.js æ›´é€‚åˆï¼š\n- å¤§å‹ä¼ä¸šåº”ç”¨\n- éœ€è¦å¤æ‚çŠ¶æ€ç®¡ç†çš„åº”ç”¨\n- éœ€è¦ä¸¥æ ¼ç±»å‹æ£€æŸ¥çš„é¡¹ç›®\n- å¯¹æ€§èƒ½è¦æ±‚æé«˜çš„åº”ç”¨\n\nNuxt.js æ›´é€‚åˆï¼š\n- ä¸­å°å‹é¡¹ç›®\n- å¿«é€ŸåŸå‹å¼€å‘\n- å†…å®¹é©±åŠ¨çš„ç½‘ç«™\n- éœ€è¦ç®€å•ç»´æŠ¤çš„é¡¹ç›® \n\n## 8. å­¦ä¹ æ›²çº¿\n\nNext.jsï¼š\n- éœ€è¦æ·±å…¥ç†è§£ React\n- é…ç½®é€‰é¡¹è¾ƒå¤š\n- æ¦‚å¿µç›¸å¯¹å¤æ‚\n\nNuxt.jsï¼š\n- Vue.js çš„ç®€å•æ€§\n- æ›´å°‘çš„é…ç½®éœ€æ±‚\n- æ›´ç›´è§‚çš„API \n\n## 9. æ„å»ºæ€§èƒ½\n\nNext.jsï¼š\n- æ„å»ºæ—¶é—´è¾ƒé•¿\n- äº§ç‰©ä½“ç§¯è¾ƒå¤§\n- æ›´å¥½çš„ä»£ç åˆ†å‰²\n\nNuxt.jsï¼š\n- æ›´å¿«çš„æ„å»ºé€Ÿåº¦\n- æ›´å°çš„äº§ç‰©ä½“ç§¯\n- æ›´å¥½çš„ç¼“å­˜ç­–ç•¥ \n\n## 10. ç¤¾åŒºæ”¯æŒ\n\nNext.jsï¼š\n- Vercel çš„å¼ºåŠ›æ”¯æŒ\n- æ›´æ´»è·ƒçš„ç¤¾åŒº\n- æ›´å¤šçš„å­¦ä¹ èµ„æº\n\nNuxt.jsï¼š\n- Vue.js å®˜æ–¹æ”¯æŒ\n- ç¨³å®šçš„æ›´æ–°å‘¨æœŸ\n- å®Œå–„çš„æ–‡æ¡£ \n\n## 11. é€‰æ‹©å»ºè®®\n\n- é€‰æ‹© Next.js çš„æƒ…å†µï¼š\n\t- å›¢é˜Ÿç†Ÿæ‚‰ React\n\t- éœ€è¦å¼ºå¤§çš„ä¼ä¸šçº§ç‰¹æ€§\n\t- éœ€è¦æè‡´çš„æ€§èƒ½ä¼˜åŒ–\n\t- é¡¹ç›®è§„æ¨¡è¾ƒå¤§\n- é€‰æ‹© Nuxt.js çš„æƒ…å†µï¼š\n\t- å›¢é˜Ÿç†Ÿæ‚‰ Vue\n\t- éœ€è¦å¿«é€Ÿå¼€å‘\n\t- é¡¹ç›®æ¶æ„ç®€å•\n\t- æ³¨é‡å¼€å‘ä½“éªŒ\n- é€šç”¨è€ƒè™‘å› ç´ ï¼š\n\t- å›¢é˜ŸæŠ€æœ¯æ ˆ\n\t- é¡¹ç›®è§„æ¨¡å’Œå¤æ‚åº¦\n\t- æ€§èƒ½éœ€æ±‚\n\t- å¼€å‘æ—¶é—´é™åˆ¶\n\t- ç»´æŠ¤æˆæœ¬\n\nä¸¤ä¸ªæ¡†æ¶éƒ½æ˜¯ä¼˜ç§€çš„å…¨æ ˆè§£å†³æ–¹æ¡ˆï¼Œé€‰æ‹©å“ªä¸ªä¸»è¦å–å†³äºå…·ä½“çš„é¡¹ç›®éœ€æ±‚å’Œå›¢é˜Ÿæƒ…å†µã€‚å»ºè®®åœ¨é€‰æ‹©å‰è¿›è¡Œå……åˆ†çš„æŠ€æœ¯è¯„ä¼°å’ŒåŸå‹éªŒè¯ã€‚","8ecea72f0c175d5fa166c3adab93f97f":"\n# è¯·ä»‹ç»ä¸€ä¸‹ remix æ¡†æ¶\n\n\nRemix æ˜¯ä¸€ä¸ªå…¨æ ˆ Web æ¡†æ¶ï¼Œç”± React Router çš„åˆ›å»ºè€…å¼€å‘ã€‚Remix é‡‡ç”¨`æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰`å’Œ`å®¢æˆ·ç«¯ï¼ˆHydrationï¼‰`çš„æ–¹å¼æ¥æä¾›å‡ºè‰²çš„ç”¨æˆ·ä½“éªŒ\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ ¸å¿ƒç‰¹æ€§ \n\n### 1.1. å…¨æ ˆæ¡†æ¶\n\n- åŒæ—¶å¤„ç†å‰ç«¯å’Œåç«¯é€»è¾‘\n\t- æœåŠ¡å™¨ä¼˜å…ˆè®¾è®¡\n- æ—  JS é™çº§æ”¯æŒ\n- åŸºäº React æ„å»º\n- å†…ç½®è·¯ç”±ç³»ç»Ÿï¼ˆåŸºäº React Routerï¼‰\n- æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰æ”¯æŒ\n- æ™ºèƒ½é¢„åŠ è½½\n- æ™ºèƒ½é¢„åŠ è½½\n- å†…ç½®çš„ç¼“å­˜ç­–ç•¥\n\n### 1.2. æ•°æ®å¤„ç†\n\n```javascript\n// ç¤ºä¾‹ 1\n// Remix æ•°æ®åŠ è½½ç¤ºä¾‹\nexport async function loader({ params }) {\n  const user = await db.user.findUnique({\n    where: { id: params.userId }\n  });\n  return json(user);\n}\n\nexport default function UserProfile() {\n  const user = useLoaderData();\n  return <div>{user.name}</div>;\n}\n\n// ç¤ºä¾‹ 2\n\n// ä½¿ç”¨ loader å‡½æ•°åŠ è½½æ•°æ®\nexport async function loader({ request }) {\n  const users = await db.user.findMany();\n  return json(users);\n}\n\n// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨æ•°æ®\nexport default function Users() {\n  const users = useLoaderData();\n  return (\n    <ul>\n      {users.map(user => (\n        <li key={user.id}>{user.name}</li>\n      ))}\n    </ul>\n  );\n}\n\n```\n\n## 2. ä¸»è¦ä¼˜åŠ¿\n\n### 2.1. åµŒå¥—è·¯ç”±\n\n- æ”¯æŒå¤æ‚çš„è·¯ç”±ç»“æ„\n- è‡ªåŠ¨ä»£ç åˆ†å‰²\n- å¹¶è¡Œæ•°æ®åŠ è½½\n\n```javascript\n// åµŒå¥—è·¯ç”±ç¤ºä¾‹\n// routes/dashboard.tsx\nexport default function Dashboard() {\n  return (\n    <div>\n      <h1>Dashboard</h1>\n      <Outlet /> {/* å­è·¯ç”±æ¸²æŸ“ä½ç½® */}\n    </div>\n  );\n}\n\n// routes/dashboard/stats.tsx\nexport default function Stats() {\n  return <div>Statistics</div>;\n}\n```\n\n### 2.2. æ¸è¿›å¢å¼º\n\n- æ”¯æŒæ—  JavaScript è¿è¡Œ\n- ä¼˜ç§€çš„ SEO è¡¨ç°\n- æ›´å¥½çš„å¯è®¿é—®æ€§\n\n## 3. ä¸å…¶ä»–æ¡†æ¶çš„æ¯”è¾ƒ\n\n### 3.1. ç›¸æ¯” Next.js\n\n- æ›´ç®€å•çš„è·¯ç”±ç³»ç»Ÿ\n- æ›´å¥½çš„è¡¨å•å¤„ç†\n- æ›´å¼ºçš„æ¸è¿›å¢å¼ºæ”¯æŒ \n\n### 3.2. ç›¸æ¯”ä¼ ç»Ÿ SPA\n\n- æ›´å¥½çš„æ€§èƒ½\n- æ›´å¥½çš„ SEO\n- æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ \n\n## 4. æœ€ä½³å®è·µ\n\n### 4.1. ç›®å½•ç»“æ„\n\n```\napp/\n  â”œâ”€â”€ routes/\n  â”‚   â”œâ”€â”€ index.tsx\n  â”‚   â”œâ”€â”€ about.tsx\n  â”‚   â””â”€â”€ blog/\n  â”‚       â”œâ”€â”€ index.tsx\n  â”‚       â””â”€â”€ $slug.tsx\n  â”œâ”€â”€ components/\n  â”œâ”€â”€ styles/\n  â””â”€â”€ utils/\n```\n\n\n## 5. æœ€å\n\nRemix æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å…¨æ ˆæ¡†æ¶ï¼Œç‰¹åˆ«é€‚åˆæ„å»ºéœ€è¦è‰¯å¥½æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒçš„ç°ä»£ Web åº”ç”¨ã€‚å®ƒçš„è®¾è®¡ç†å¿µæ³¨é‡æ¸è¿›å¢å¼ºå’Œ Web æ ‡å‡†ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ„å»ºå‡ºæ›´åŠ å¯é å’Œå¯è®¿é—®çš„åº”ç”¨ç¨‹åºã€‚","797c4acaea9d5e3b8faf3b4d9772e262":"\n# React åŸç†ç¯‡ï¼ˆäºŒï¼‰\n\n`#react` \n\nå‰æ–‡ [6.  React åŸç†ç¯‡ï¼ˆä¸€ï¼‰](/post/f083a7fafd2f5b58adefd5d4ccabc56a.html) ä»‹ç»äº†åŸºæœ¬çš„ React æ•´ä½“æ¶æ„ï¼Œæœ¬æ–‡ç»§ç»­\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. React  å…ƒç´ ã€React ç»„ä»¶ä¸FiberNode \n\n### 1.1. React å…ƒç´  (React Elements)\n\nReact å…ƒç´ æ˜¯æè¿° UI çš„æ™®é€š JavaScript å¯¹è±¡ï¼Œæ˜¯æœ€åŸºæœ¬çš„æ„å»ºå—ã€‚\n\n```javascript\n// React å…ƒç´ çš„ç»“æ„\nconst element = {\n  type: 'div',\n  props: {\n    className: 'container',\n    children: [\n      {\n        type: 'h1',\n        props: {\n          children: 'Hello'\n        }\n      }\n    ]\n  }\n}\n\n// JSX åˆ›å»º React å…ƒç´ \nconst jsxElement = (\n  <div className=\"container\">\n    <h1>Hello</h1>\n  </div>\n);\n\n// React.createElement åˆ›å»ºå…ƒç´ \nconst createElement = React.createElement(\n  'div',\n  { className: 'container' },\n  React.createElement('h1', null, 'Hello')\n);\n```\n\nç‰¹ç‚¹ï¼š\n1. ä¸å¯å˜å¯¹è±¡ï¼ˆImmutableï¼‰\n2. æè¿°ç•Œé¢çš„å¿«ç…§\n3. è½»é‡çº§æ™®é€šå¯¹è±¡\n4. **æ¯æ¬¡æ›´æ–°éƒ½ä¼šåˆ›å»ºæ–°çš„å…ƒç´ æ ‘**\n\n### 1.2. React ç»„ä»¶ (React Components)\n\nReact ç»„ä»¶æ˜¯å¯å¤ç”¨çš„ä»£ç ç‰‡æ®µï¼Œå¯ä»¥æ˜¯å‡½æ•°ç»„ä»¶æˆ–ç±»ç»„ä»¶ã€‚\n\n```javascript\n// å‡½æ•°ç»„ä»¶\nfunction Welcome(props) {\n  return <h1>Hello, {props.name}</h1>;\n}\n\n// ç±»ç»„ä»¶\nclass Greeting extends React.Component {\n  render() {\n    return <h1>Hello, {this.props.name}</h1>;\n  }\n}\n\n// ç»„ä»¶çš„ä½¿ç”¨\nfunction App() {\n  return (\n    <div>\n      <Welcome name=\"Alice\" />\n      <Greeting name=\"Bob\" />\n    </div>\n  );\n}\n```\n\nç‰¹ç‚¹ï¼š\n1. æ¥å— `props` ä½œä¸ºè¾“å…¥\n2. è¿”å› React å…ƒç´ \n3. å¯ä»¥åŒ…å«`çŠ¶æ€`å’Œ`ç”Ÿå‘½å‘¨æœŸ`\n4. å¯ä»¥è¢«`å¤šæ¬¡`å¤ç”¨\n\n### 1.3. FiberNode\n\nFiber èŠ‚ç‚¹æ˜¯ React å†…éƒ¨å®ç°çš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œç”¨äºè·Ÿè¸ªç»„ä»¶æ ‘çš„çŠ¶æ€å’Œå˜åŒ–ã€‚\n\n```ts\n// Fiber èŠ‚ç‚¹çš„ç®€åŒ–ç»“æ„\ninterface FiberNode {\n  // é™æ€æ•°æ®ç»“æ„\n  type: any;\n  key: null | string;\n  elementType: any;\n  stateNode: any;\n\n  // Fiber æ ‘ç»“æ„\n  return: Fiber | null;    // çˆ¶èŠ‚ç‚¹\n  child: Fiber | null;     // ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹\n  sibling: Fiber | null;   // ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹\n\n  // å·¥ä½œå•å…ƒ\n  pendingProps: any;\n  memoizedProps: any;\n  memoizedState: any;\n  updateQueue: UpdateQueue<any> | null;\n\n  // å‰¯ä½œç”¨\n  flags: Flags;\n  subtreeFlags: Flags;\n  deletions: Array<Fiber> | null;\n\n  // è°ƒåº¦ä¼˜å…ˆçº§\n  lanes: Lanes;\n  childLanes: Lanes;\n}\n\n// Fiber èŠ‚ç‚¹ç¤ºä¾‹\nconst fiber = {\n  type: 'div',\n  key: null,\n  stateNode: domElement,\n  \n  // é“¾æ¥åˆ°å…¶ä»– Fiber èŠ‚ç‚¹\n  return: parentFiber,\n  child: childFiber,\n  sibling: null,\n\n  // çŠ¶æ€ç›¸å…³\n  memoizedState: null,\n  memoizedProps: { className: 'container' },\n  \n  // å‰¯ä½œç”¨æ ‡è®°\n  flags: Update,\n};\n```\n\nç‰¹ç‚¹ï¼š\n1. æ„æˆäº†å¯ä¸­æ–­çš„å·¥ä½œå•å…ƒï¼ˆåŠ¨æ€å·¥ä½œå•å…ƒï¼‰\n2. åŒ…å«äº†å®Œæ•´çš„ç»„ä»¶ä¿¡æ¯ï¼Œæ¯ä¸ª FiberNode å¯¹åº”ä¸€ä¸ª React å…ƒç´ ï¼ŒåŒ…æ‹¬è¿™ä¸ª React å¯¹åº”çš„æ‰€æœ‰`é™æ€æ•°æ®ç»“æ„`\n3. å½¢æˆäº†`é“¾è¡¨`ç»“æ„\n4. æ”¯æŒä¼˜å…ˆçº§è°ƒåº¦\n\n### 1.4. ä¸‰è€…çš„å…³ç³»ä¸åŒºåˆ«\n\n#### 1.4.1. æ•°æ®ç»“æ„å¯¹æ¯”\n\n```javascript\n// React å…ƒç´  - æ™®é€šå¯¹è±¡\nconst element = {\n  type: 'div',\n  props: { className: 'example' }\n};\n\n// React ç»„ä»¶ - å‡½æ•°æˆ–ç±»\nfunction Component(props) {\n  return <div className=\"example\" />;\n}\n\n// FiberNode - å¤æ‚æ•°æ®ç»“æ„\nconst fiber = {\n  type: Component,\n  memoizedState: null,\n  memoizedProps: {},\n  // ... æ›´å¤š Fiber ç›¸å…³å±æ€§\n};\n```\n\n#### 1.4.2. ç”Ÿå‘½å‘¨æœŸå’Œæ›´æ–°æœºåˆ¶\n\n```javascript\n// React å…ƒç´  - ä¸å¯å˜\nconst element1 = <div>Hello</div>;\nconst element2 = <div>Hello</div>; // å®Œå…¨æ–°çš„å¯¹è±¡\n\n// React ç»„ä»¶ - å¯ç»´æŠ¤çŠ¶æ€\nclass StatefulComponent extends React.Component {\n  state = { count: 0 };\n  \n  componentDidMount() {\n    // ç”Ÿå‘½å‘¨æœŸæ–¹æ³•\n  }\n  \n  render() {\n    return <div>{this.state.count}</div>;\n  }\n}\n\n// FiberNode - è·Ÿè¸ªæ›´æ–°\nfunction processUpdateQueue(fiber) {\n  const queue = fiber.updateQueue;\n  // å¤„ç†æ›´æ–°é˜Ÿåˆ—\n  // è®¾ç½®æ–°çš„çŠ¶æ€\n  fiber.memoizedState = newState;\n}\n```\n\n#### 1.4.3. ç”¨é€”å¯¹æ¯”\n\n```jsx\n// 1. React å…ƒç´  - UI æè¿°\nconst buttonElement = (\n  <button className=\"btn\">\n    Click me\n  </button>\n);\n\n// 2. React ç»„ä»¶ - é€»è¾‘å°è£…\nfunction Button({ onClick, children }) {\n  const [isPressed, setIsPressed] = useState(false);\n  \n  return (\n    <button\n      className={`btn ${isPressed ? 'pressed' : ''}`}\n      onClick={onClick}\n    >\n      {children}\n    </button>\n  );\n}\n\n// 3. FiberNode - å†…éƒ¨è°ƒåº¦\nclass FiberScheduler {\n  workLoop(deadline) {\n    let shouldYield = false;\n    while (nextUnitOfWork && !shouldYield) {\n      nextUnitOfWork = performUnitOfWork(nextUnitOfWork);\n      shouldYield = deadline.timeRemaining() < 1;\n    }\n    requestIdleCallback(workLoop);\n  }\n}\n```\n\n### 1.5. ä¸»è¦åŒºåˆ«\n\n1. **èŒè´£ä¸åŒ**\n   - React å…ƒç´ ï¼šæè¿° UI çš„çº¯æ•°æ®ç»“æ„\n   - React ç»„ä»¶ï¼šå°è£…å¯é‡ç”¨çš„ UI é€»è¾‘\n   - FiberNodeï¼šç®¡ç†ç»„ä»¶æ›´æ–°å’Œè°ƒåº¦\n2. **å¯å˜æ€§**\n   - React å…ƒç´ ï¼šä¸å¯å˜\n   - React ç»„ä»¶ï¼šçŠ¶æ€å¯å˜\n   - FiberNodeï¼šå®Œå…¨å¯å˜\n3. **ç”Ÿå‘½å‘¨æœŸ**\n   - React å…ƒç´ ï¼šæ— ç”Ÿå‘½å‘¨æœŸ\n   - React ç»„ä»¶ï¼šæœ‰å®Œæ•´ç”Ÿå‘½å‘¨æœŸ\n   - FiberNodeï¼šè´Ÿè´£ç®¡ç†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ\n4. **ä½¿ç”¨åœºæ™¯**\n   - React å…ƒç´ ï¼šä½œä¸ºç»„ä»¶çš„æ¸²æŸ“ç»“æœ\n   - React ç»„ä»¶ï¼šæ„å»ºåº”ç”¨ç•Œé¢\n   - FiberNodeï¼šReact å†…éƒ¨å®ç°æœºåˆ¶\n\n## 2. å®Œæ•´çš„ FiberNode èŠ‚ç‚¹\n\n```javascript hl:7,14,22,37,41\nfunction FiberNode(\n  tag: WorkTag,\n  pendingProps: mixed,\n  key: null | string,\n  mode: TypeOfMode,\n) {\n  // ä½œä¸ºé™æ€æ•°æ®ç»“æ„çš„å±æ€§\n  this.tag = tag;\n  this.key = key;\n  this.elementType = null;\n  this.type = null;\n  this.stateNode = null;\n\n  // ç”¨äºè¿æ¥å…¶ä»–FiberèŠ‚ç‚¹å½¢æˆFiberæ ‘\n  this.return = null;\n  this.child = null;\n  this.sibling = null;\n  this.index = 0;\n\n  this.ref = null;\n\n  // ä½œä¸ºåŠ¨æ€çš„å·¥ä½œå•å…ƒçš„å±æ€§\n  this.pendingProps = pendingProps;\n  this.memoizedProps = null;\n  this.updateQueue = null;\n  this.memoizedState = null;\n  this.dependencies = null;\n\n  this.mode = mode;\n\n  this.effectTag = NoEffect;\n  this.nextEffect = null;\n\n  this.firstEffect = null;\n  this.lastEffect = null;\n\n  // è°ƒåº¦ä¼˜å…ˆçº§ç›¸å…³\n  this.lanes = NoLanes;\n  this.childLanes = NoLanes;\n\n  // æŒ‡å‘è¯¥fiberåœ¨å¦ä¸€æ¬¡æ›´æ–°æ—¶å¯¹åº”çš„fiber\n  this.alternate = null;\n}\n\n```\n## 3. ä¸¤æ£µFiber æ ‘ï¼šåŒç¼“å­˜æœºåˆ¶\n\n- çœŸå® UI å¯¹åº”çš„ Fiber Treeï¼šå‰ç¼“å†²åŒºã€å³`æµè§ˆå™¨ä¸Šæ˜¾ç¤ºçš„ UI`\n\t- workInProgress Fiber æ ‘\n- æ­£åœ¨å†…å­˜ä¸­æ„å»º Fiber Treeï¼šåç¼“å†²åŒº\n\t- workInProgress Fiber æ ‘\n\n### 3.1. ä¸¾ä¸ªç¤ºä¾‹ï¼šmount ä¸€ä¸ªç»„ä»¶æ—¶\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241029-3.png)\n\n### 3.2. ä¸¾ä¸ªç¤ºä¾‹ï¼šç‚¹å‡» p èŠ‚ç‚¹ï¼Œupdate ä¸€ä¸ªç»„ä»¶æ—¶\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241029-4.png)\n\n## 4. ä¸ºä»€ä¹ˆéœ€è¦ Fiber\n\nåœ¨æ—§çš„æ¶æ„ä¸­ï¼ŒReact çš„æ›´æ–°è¿‡ç¨‹æ˜¯åŒæ­¥çš„ï¼Œç§°ä¸º `Stack Reconciler`ã€‚è¿™å¯èƒ½å¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š\n\n- å½“ç»„ä»¶æ ‘å¾ˆå¤§æ—¶ï¼Œæ›´æ–°è¿‡ç¨‹ä¼šå ç”¨ä¸»çº¿ç¨‹å¤ªé•¿æ—¶é—´\n- æ— æ³•ä¸­æ–­æ›´æ–°è¿‡ç¨‹\n- å¯èƒ½å¯¼è‡´æ‰å¸§å’Œé¡µé¢å¡é¡¿\n\nFiber æ˜¯ React 16 å¼•å…¥çš„æ–°æ¶æ„ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯å®ç°ï¼š\n\n1. **å¢é‡æ¸²æŸ“**ï¼šèƒ½å¤Ÿå°†æ¸²æŸ“å·¥ä½œåˆ†ç‰‡ï¼Œå¹¶å°†å…¶åˆ†æ•£åˆ°å¤šä¸ªå¸§ä¸­\n2. **ä»»åŠ¡æš‚åœå’Œæ¢å¤**ï¼šèƒ½å¤Ÿæš‚åœæ­£åœ¨è¿›è¡Œçš„å·¥ä½œï¼Œç¨åå†æ¢å¤\n3. **ä»»åŠ¡ä¼˜å…ˆçº§**ï¼šèƒ½å¤Ÿä¸ºä¸åŒçš„æ›´æ–°åˆ†é…ä¼˜å…ˆçº§\n4. **å¹¶å‘æ¨¡å¼**ï¼šæ”¯æŒå¹¶å‘æ›´æ–°\n\n## 5. Fiber èŠ‚ç‚¹çš„åŸºæœ¬ç»“æ„\n\n```javascript hl:7,14,22,37,41\nfunction FiberNode(\n  tag: WorkTag,\n  pendingProps: mixed,\n  key: null | string,\n  mode: TypeOfMode,\n) {\n  // ä½œä¸ºé™æ€æ•°æ®ç»“æ„çš„å±æ€§\n  this.tag = tag;\n  this.key = key;\n  this.elementType = null;\n  this.type = null;\n  this.stateNode = null;\n\n  // ç”¨äºè¿æ¥å…¶ä»–FiberèŠ‚ç‚¹å½¢æˆFiberæ ‘\n  this.return = null;\n  this.child = null;\n  this.sibling = null;\n  this.index = 0;\n\n  this.ref = null;\n\n  // ä½œä¸ºåŠ¨æ€çš„å·¥ä½œå•å…ƒçš„å±æ€§\n  this.pendingProps = pendingProps; // // æ­£åœ¨ç­‰å¾…å¤„ç†çš„æ–°props\n  this.memoizedProps = null; // ä¸Šä¸€æ¬¡æ¸²æŸ“æ—¶çš„props\n  this.updateQueue = null; // ä¸€ä¸ªé˜Ÿåˆ—ï¼ŒåŒ…å«äº†è¯¥Fiberä¸Šçš„çŠ¶æ€æ›´æ–°å’Œå‰¯ä½œç”¨\n  this.memoizedState = null; // ä¸Šä¸€æ¬¡æ¸²æŸ“æ—¶çš„state\n  this.dependencies = null;  // è¯¥Fiberè®¢é˜…çš„ä¸Šä¸‹æ–‡æˆ–å…¶ä»–èµ„æºçš„æè¿°\n\n  this.mode = mode;\n\n  // å‰¯ä½œç”¨ï¼šeffects\n  this.effectTag = NoEffect;\n   this.flags = NoFlags; // æè¿°è¯¥Fiberå‘ç”Ÿçš„å‰¯ä½œç”¨çš„æ ‡å¿—ï¼ˆåå…­è¿›åˆ¶çš„æ ‡è¯†ï¼‰\n   this.subtreeFlags = NoFlags; // æè¿°è¯¥Fiberå­æ ‘ä¸­å‘ç”Ÿçš„å‰¯ä½œç”¨çš„æ ‡å¿—ï¼ˆåå…­è¿›åˆ¶çš„æ ‡è¯†ï¼‰ \n   this.deletions = null; // åœ¨commité˜¶æ®µè¦åˆ é™¤çš„å­Fiberæ•°ç»„\n  this.nextEffect = null;\n  \n\n  this.firstEffect = null;\n  this.lastEffect = null;\n\n  // è°ƒåº¦ä¼˜å…ˆçº§ç›¸å…³\n  this.lanes = NoLanes;\n  this.childLanes = NoLanes;\n\n  // æŒ‡å‘è¯¥fiberåœ¨å¦ä¸€æ¬¡æ›´æ–°æ—¶å¯¹åº”çš„fiber\n  this.alternate = null;\n}\n\n\n```\n\n- **å•å…ƒå·¥ä½œ**ï¼šæ¯ä¸ªFiberèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ª`å·¥ä½œå•å…ƒ`ï¼Œæ‰€æœ‰FiberèŠ‚ç‚¹å…±åŒç»„æˆä¸€ä¸ªFiberé“¾è¡¨æ ‘ï¼ˆæœ‰é“¾æ¥å±æ€§ï¼ŒåŒæ—¶åˆæœ‰æ ‘çš„ç»“æ„ï¼‰ï¼Œè¿™ç§ç»“æ„è®©Reactå¯ä»¥ç»†ç²’åº¦æ§åˆ¶èŠ‚ç‚¹çš„è¡Œä¸ºã€‚\n- **æŒ‡é’ˆå±æ€§**ï¼š**`child`**ã€**`sibling`**Â å’ŒÂ **`return`**Â å­—æ®µæ„æˆäº†Fiberä¹‹é—´çš„é“¾æ¥å…³ç³»ï¼Œä½¿Reactèƒ½å¤Ÿéå†ç»„ä»¶æ ‘å¹¶çŸ¥é“ä»å“ªé‡Œå¼€å§‹ã€ç»§ç»­æˆ–åœæ­¢å·¥ä½œã€‚\n- **åŒç¼“å†²æŠ€æœ¯**\n- **State å’Œ Props**ï¼š\n\t- `memoizedProps`ã€**`pendingProps`**Â å’ŒÂ **`memoizedState`**Â å­—æ®µè®©ReactçŸ¥é“ç»„ä»¶çš„ä¸Šä¸€ä¸ªçŠ¶æ€å’Œå³å°†åº”ç”¨çš„çŠ¶æ€ã€‚\n\t- é€šè¿‡æ¯”è¾ƒè¿™äº›å€¼ï¼ŒReactå¯ä»¥å†³å®šç»„ä»¶æ˜¯å¦éœ€è¦æ›´æ–°ï¼Œä»è€Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“ï¼Œæé«˜æ€§èƒ½ã€‚\n- **å‰¯ä½œç”¨çš„è¿½è¸ª**ï¼š\n\t- `flags`Â å’ŒÂ **`subtreeFlags`**Â å­—æ®µæ ‡è¯†FiberåŠå…¶å­æ ‘ä¸­éœ€è¦æ‰§è¡Œçš„å‰¯ä½œç”¨ï¼Œä¾‹å¦‚DOMæ›´æ–°ã€ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è°ƒç”¨ç­‰ã€‚\n\t- Reactä¼šç§¯ç´¯è¿™äº›å‰¯ä½œç”¨ï¼Œç„¶ååœ¨Commité˜¶æ®µä¸€æ¬¡æ€§æ‰§è¡Œï¼Œä»è€Œæé«˜æ•ˆç‡ã€‚\n\n## 6. åè°ƒé˜¶æ®µï¼ˆReconcilerï¼‰ï¼šRender é˜¶æ®µ\n\nåè°ƒé˜¶æ®µï¼ˆReconcilerï¼‰ï¼š\n- æ„å»º Fiber æ ‘ï¼š\n\t-  workInProgress tree\n- Diff ç®—æ³•\n- æ”¶é›†å‰¯ä½œç”¨ï¼šç”Ÿæˆ effects list\n\n- **ç›®æ ‡**: ç¡®å®šå“ªäº›éƒ¨åˆ†çš„UIéœ€è¦æ›´æ–°\n- **åŸç†**: è¿™æ˜¯Reactæ„å»º`å·¥ä½œè¿›åº¦æ ‘`çš„é˜¶æ®µï¼Œä¼šæ¯”è¾ƒæ–°çš„propså’Œæ—§çš„Fiberæ ‘æ¥ç¡®å®šå“ªäº›éƒ¨åˆ†éœ€è¦æ›´æ–°ã€‚\n\n### 6.1. `react-reconciler`åŒ…\n\næ­¤å¤„å…ˆå½’çº³ä¸€ä¸‹`react-reconciler`åŒ…çš„ä¸»è¦ä½œç”¨, å°†ä¸»è¦åŠŸèƒ½åˆ†ä¸º 4 ä¸ªæ–¹é¢:\n1. è¾“å…¥: æš´éœ²`api`å‡½æ•°(å¦‚:Â `scheduleUpdateOnFiber`), ä¾›ç»™å…¶ä»–åŒ…(å¦‚`react`åŒ…)è°ƒç”¨.\n2. æ³¨å†Œè°ƒåº¦ä»»åŠ¡: ä¸è°ƒåº¦ä¸­å¿ƒ(`scheduler`åŒ…)äº¤äº’, æ³¨å†Œè°ƒåº¦ä»»åŠ¡`task`, ç­‰å¾…ä»»åŠ¡å›è°ƒ.\n3. æ‰§è¡Œä»»åŠ¡å›è°ƒ: åœ¨å†…å­˜ä¸­æ„é€ å‡º`fiberæ ‘`, åŒæ—¶ä¸ä¸æ¸²æŸ“å™¨(`react-dom`)äº¤äº’, åœ¨å†…å­˜ä¸­åˆ›å»ºå‡ºä¸`fiber`å¯¹åº”çš„`DOM`èŠ‚ç‚¹.\n4. è¾“å‡º: ä¸æ¸²æŸ“å™¨(`react-dom`)äº¤äº’, æ¸²æŸ“`DOM`èŠ‚ç‚¹.\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-19.png)\n\n### 6.2. `FiberèŠ‚ç‚¹`æ˜¯å¦‚ä½•è¢«åˆ›å»ºå¹¶æ„å»º`Fiber æ ‘`çš„å‘¢ï¼Ÿ\n\n`renderé˜¶æ®µ`å¼€å§‹äº`performSyncWorkOnRoot`æˆ–`performConcurrentWorkOnRoot`æ–¹æ³•çš„è°ƒç”¨ï¼Œè¿™å–å†³äºæœ¬æ¬¡æ›´æ–°æ˜¯åŒæ­¥æ›´æ–°è¿˜æ˜¯å¼‚æ­¥æ›´æ–°\n\n- workInProgress\n- performUnitOfWork\n\n```javascript\n//â‘  performSyncWorkOnRoot ä¼šè°ƒç”¨è¯¥æ–¹æ³•\nfunction workLoopSync() {\n  while (workInProgress !== null) {\n    performUnitOfWork(workInProgress);\n  }\n}\n\n//â‘¡  performConcurrentWorkOnRoot ä¼šè°ƒç”¨è¯¥æ–¹æ³•\nfunction workLoopConcurrent() {\n  while (workInProgress !== null && !shouldYield()) {\n    performUnitOfWork(workInProgress);\n  }\n}\n\n// â‘¢ performUnitOfWork æ–¹æ³•\n// ä¼šåˆ›å»ºä¸‹ä¸€ä¸ªFiberèŠ‚ç‚¹å¹¶èµ‹å€¼ç»™ workInProgress\n// å¹¶å°† workInProgress ä¸ å·²åˆ›å»ºçš„FiberèŠ‚ç‚¹è¿æ¥èµ·æ¥æ„æˆ Fiberæ ‘\nfunction performUnitOfWork(fiber) {\n  // 1. å¤„ç†å½“å‰ fiber èŠ‚ç‚¹\n  const next = beginWork(fiber);\n  fiber.memoizedProps = fiber.pendingProps;\n\n  if (next === null) {\n    // 2. æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå®Œæˆå½“å‰èŠ‚ç‚¹\n    completeUnitOfWork(fiber);\n  }\n  return next;\n}\n\n```\n\n### 6.3. ä¸¾ä¸ªç¤ºä¾‹\n\n```tsx\nfunction App() {\n  return (\n    <div>\n      i am\n      <span>KaSong</span>\n    </div>\n  );\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n```\n\nå¯¹åº”çš„ `Fiber æ ‘` å¦‚ä¸‹ï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-18.png)\n\nç„¶åå°±æ˜¯`DFS é€’å½’éå†`è¿™ä¸ªæ ‘äº†\n- å¦‚æœæ˜¯è¿›å…¥èŠ‚ç‚¹ï¼Œæ‰§è¡Œ `beginWork`\n- å¦‚æœæ˜¯ç¦»å¼€èŠ‚ç‚¹ï¼Œæ‰§è¡Œ `completeWork`\n\næ‰€ä»¥ï¼Œä¸‹é¢æ‰“å°å‡ºéå†è¿™äº›èŠ‚ç‚¹çš„é¡ºåº\n\n```bash\n1. rootFiber beginWork\n2. App Fiber beginWork\n3. div Fiber beginWork\n4. \"i am\" Fiber beginWork\n5. \"i am\" Fiber completeWork\n6. span Fiber beginWork\n7. span Fiber completeWork\n8. div Fiber completeWork\n9. App Fiber completeWork\n10. rootFiber completeWork\n```\n\n### 6.4. beginWorkï¼šåˆ›å»ºä¸æ ‡è®°æ›´æ–°èŠ‚ç‚¹\n\n- åˆ¤æ–­`FiberèŠ‚ç‚¹`æ˜¯å¦è¦æ›´æ–°\n- åˆ¤æ–­`Fiberå­èŠ‚ç‚¹`æ˜¯æ›´æ–°è¿˜æ˜¯å¤ç”¨\n\n### 6.5. completeWorkï¼šæ”¶é›†å‰¯ä½œç”¨åˆ—è¡¨\n\nä¸»è¦å®Œæˆæ”¶é›†å‰¯ä½œç”¨åˆ—è¡¨ï¼š\n- è®°å½•`Fiber`çš„å‰¯ä½œç”¨æ ‡å¿—\n- ä¸º`å­Fiber`åˆ›å»ºé“¾è¡¨\n\n## 7. æ¸²æŸ“é˜¶æ®µï¼ˆRendererï¼‰ ï¼šcommit é˜¶æ®µ\n\n- Render é˜¶æ®µå¯èƒ½è¢«æ‰“æ–­ï¼Œä½† `commit` ä¸å¯è¢«ä¸­æ–­\n- ç›®æ ‡ï¼šæ›´æ–°DOMå¹¶**æ‰§è¡Œå‰¯ä½œç”¨** \n- éå†åœ¨`Reconciliationé˜¶æ®µï¼ˆrender é˜¶æ®µï¼‰`åˆ›å»ºçš„å‰¯ä½œç”¨åˆ—è¡¨è¿›è¡Œæ›´æ–°\n\n```javascript\nfunction commitRoot(root: FiberRoot) {\n  // 1. æ‰§è¡Œå‰ç½®æ“ä½œï¼šæ‰§è¡Œ`DOM`æ“ä½œå‰ï¼‰\n  commitBeforeMutationEffects(root);\n  \n  // 2. æ‰§è¡Œ DOM æ“ä½œï¼šï¼ˆæ‰§è¡Œ`DOM`æ“ä½œï¼‰\n  commitMutationEffects(root);\n  \n  // 3. æ‰§è¡Œå¸ƒå±€å‰¯ä½œç”¨ï¼šæ‰§è¡Œ`DOM`æ“ä½œå\n  commitLayoutEffects(root);\n}\n\n```\n\n- `before mutationé˜¶æ®µ`ï¼Œä¼šéå†`effectList`ï¼Œä¾æ¬¡æ‰§è¡Œï¼š\n\t- å¤„ç†`DOMèŠ‚ç‚¹`æ¸²æŸ“/åˆ é™¤åçš„Â `autoFocus`ã€`blur`é€»è¾‘\n\t- è°ƒç”¨`getSnapshotBeforeUpdate`ç”Ÿå‘½å‘¨æœŸé’©å­\n\t- è°ƒåº¦`useEffect`\n- `mutationé˜¶æ®µ`ä¼šéå†`effectList`ï¼Œä¾æ¬¡æ‰§è¡Œ`commitMutationEffects`ã€‚\n\t- è¯¥æ–¹æ³•çš„ä¸»è¦å·¥ä½œä¸ºâ€œæ ¹æ®`effectTag`è°ƒç”¨ä¸åŒçš„å¤„ç†å‡½æ•°å¤„ç†`Fiber`\n- `layouté˜¶æ®µ`ä¼šéå†`effectList`\n\t- æ ¹æ®`effectTag`è°ƒç”¨ä¸åŒçš„å¤„ç†å‡½æ•°å¤„ç†`Fiber`å¹¶æ›´æ–°`ref`\n\n> æ˜¯çš„ï¼Œä¸‰ä¸ªé˜¶æ®µéƒ½ä¼šéå†ä¸€é `effectList` \n\n## 8. è°ƒåº¦æ¨¡å—ï¼ˆSchedulerï¼‰\n\nSchedulerï¼ˆè°ƒåº¦å™¨ï¼‰æ˜¯ React çš„æ ¸å¿ƒæ¨¡å—ï¼Œä¸»è¦è´Ÿè´£ï¼š\n- ä»»åŠ¡ä¼˜å…ˆçº§ç®¡ç†\n- æ—¶é—´ç‰‡åˆ†é…\n- å¯ä¸­æ–­æ¸²æŸ“\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-25.png)\n\n### 8.1. è°ƒåº¦ä¸­å¿ƒçš„æ ¸å¿ƒå®ç°\n\n1. **ä»»åŠ¡åˆ›å»º**ï¼šé€šè¿‡ `scheduleCallback` åˆ›å»ºä»»åŠ¡\n2. **ä¼˜å…ˆçº§åˆ†é…**ï¼šæ ¹æ®ä»»åŠ¡ç±»å‹åˆ†é…ä¼˜å…ˆçº§\n3. **å…¥é˜Ÿæ’åº**ï¼šæ”¾å…¥å¯¹åº”ä¼˜å…ˆçº§é˜Ÿåˆ—\n4. **ä»»åŠ¡è°ƒåº¦**ï¼šå¾ªç¯æ‰§è¡Œä»»åŠ¡ï¼Œæ”¯æŒä¸­æ–­\n5. **æ—¶é—´åˆ‡ç‰‡**ï¼šæ§åˆ¶æ‰§è¡Œæ—¶é—´ï¼Œé¿å…é˜»å¡\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-20.png)\n\n### 8.2. æ—¶é—´åˆ‡ç‰‡çš„å®ç°\n\n- MessageChannel å®ç°ï¼š`new MessageChannel();`\n\n","99d3201f0f4758e3acf80fda2b61eb4a":"\n# èŠèŠ React çš„æºç ç»“æ„\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä¸»è¦ç›®å½•ç»“æ„ \n```bash\nreact/\nâ”œâ”€â”€ fixtures/        # æµ‹è¯•å›ºä»¶ï¼ŒåŒ…å«ä¸€äº›æµ‹è¯•ç”¨ä¾‹\nâ”œâ”€â”€ packages/        # æ ¸å¿ƒåŒ…ç›®å½•ï¼ŒåŒ…å«ä¸»è¦æºç \nâ”œâ”€â”€ scripts/        # æ„å»ºå’Œå¼€å‘è„šæœ¬\nâ””â”€â”€ docs/           # æ–‡æ¡£ï¼ˆå·²è¿ç§»åˆ°ç‹¬ç«‹ä»“åº“ï¼‰\n```\n\n## 2. packages ç›®å½•ï¼ˆæ ¸å¿ƒä»£ç ï¼‰\n\n```bash\npackages/\nâ”œâ”€â”€ react/                     # React æ ¸å¿ƒåº“\nâ”œâ”€â”€ react-dom/                 # DOM æ¸²æŸ“å™¨\nâ”œâ”€â”€ react-reconciler/         # åè°ƒå™¨å®ç°\nâ”œâ”€â”€ react-native-renderer/    # React Native æ¸²æŸ“å™¨\nâ”œâ”€â”€ scheduler/                # è°ƒåº¦å™¨\nâ”œâ”€â”€ shared/                   # å…±äº«å·¥å…·ä»£ç \nâ””â”€â”€ react-is/                # ç±»å‹æ£€æŸ¥å·¥å…·\n```\n\n## 3. å„ä¸ªæ ¸å¿ƒåŒ…çš„åŠŸèƒ½åˆ†æ\n\n### 3.1. react åŒ…ï¼ˆpackages/react/ï¼‰\n\n```bash\nreact/\nâ”œâ”€â”€ src/\nâ”‚   â”œâ”€â”€ React.js              # React å¯¹å¤–æ¥å£\nâ”‚   â”œâ”€â”€ ReactElement.js       # createElement å®ç°\nâ”‚   â”œâ”€â”€ ReactHooks.js        #  Hooks å®ç°\nâ”‚   â””â”€â”€ ReactContext.js      # Context å®ç°\n```\nåŠŸèƒ½ï¼š\n- æä¾›æ ¸å¿ƒ API\n- å®šä¹‰ç»„ä»¶åŸºç±»\n- å®ç° Hooks\n- æä¾› Context åŠŸèƒ½\n\n### 3.2. react-dom åŒ…ï¼ˆpackages/react-dom/ï¼‰\n```bash\nreact-dom/\nâ”œâ”€â”€ src/\nâ”‚   â”œâ”€â”€ client/              # å®¢æˆ·ç«¯æ¸²æŸ“ç›¸å…³\nâ”‚   â”œâ”€â”€ server/              # æœåŠ¡ç«¯æ¸²æŸ“ç›¸å…³\nâ”‚   â””â”€â”€ events/              # äº‹ä»¶ç³»ç»Ÿ\n```\n\nåŠŸèƒ½ï¼š\n- å¤„ç† DOM æ“ä½œ\n- å®ç°äº‹ä»¶ç³»ç»Ÿ\n- æä¾›æœåŠ¡ç«¯æ¸²æŸ“\n- ç®¡ç†ç”Ÿå‘½å‘¨æœŸ\n\n### 3.3. react-reconciler åŒ…ï¼ˆpackages/react-reconciler/ï¼‰\n\n```bash\nreact-reconciler/\nâ”œâ”€â”€ src/\nâ”‚   â”œâ”€â”€ ReactFiber.js           # Fiber èŠ‚ç‚¹ç»“æ„\nâ”‚   â”œâ”€â”€ ReactFiberWorkLoop.js   # å·¥ä½œå¾ªç¯\nâ”‚   â”œâ”€â”€ ReactUpdateQueue.js     # æ›´æ–°é˜Ÿåˆ—\nâ”‚   â””â”€â”€ ReactFiberReconciler.js # åè°ƒå™¨å®ç°\n```\nåŠŸèƒ½ï¼š\n- å®ç°è™šæ‹Ÿ DOM\n- Fiber æ¶æ„å®ç°\n- Diff ç®—æ³•\n- æ›´æ–°è°ƒåº¦\n\n### 3.4. scheduler åŒ…ï¼ˆpackages/scheduler/ï¼‰\n\n```bash\nscheduler/\nâ”œâ”€â”€ src/\nâ”‚   â”œâ”€â”€ Scheduler.js            # è°ƒåº¦å™¨å®ç°\nâ”‚   â”œâ”€â”€ SchedulerPriorities.js  # ä¼˜å…ˆçº§ç®¡ç†\nâ”‚   â””â”€â”€ SchedulerHostConfig.js  # å®¿ä¸»ç¯å¢ƒé…ç½®\n```\n\nåŠŸèƒ½ï¼š\n- ä»»åŠ¡è°ƒåº¦\n- ä¼˜å…ˆçº§ç®¡ç†\n- æ—¶é—´åˆ†ç‰‡\n- å¹¶å‘æ¨¡å¼æ”¯æŒ\n\n## 4. shared åŒ…ï¼ˆpackages/shared/ï¼‰\n\n```bash\nshared/\nâ”œâ”€â”€ ReactSymbols.js        # React å†…éƒ¨ Symbol å®šä¹‰\nâ”œâ”€â”€ ReactTypes.js          # ç±»å‹å®šä¹‰\nâ””â”€â”€ ReactFeatureFlags.js   # ç‰¹æ€§å¼€å…³\n```\n\nåŠŸèƒ½ï¼š\n- å…±äº«å¸¸é‡\n- å·¥å…·å‡½æ•°\n- ç±»å‹å®šä¹‰\n- ç‰¹æ€§æ ‡è®°\n\n## 5. æ ¸å¿ƒæµç¨‹å’Œå…³ç³»\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-26.png)\n\n````mermaid\n  graph TB\n    subgraph Application\n        App[åº”ç”¨ä»£ç ]\n    end\n    \n    subgraph React Core\n        ReactAPI[React API]\n        Hooks[Hooks]\n        Context[Context]\n    end\n    \n    subgraph Reconciliation\n        Reconciler[Reconciler]\n        Fiber[Fiber Tree]\n        Diff[Diff ç®—æ³•]\n    end\n    \n    subgraph Rendering\n        ReactDOM[React DOM]\n        RNRenderer[RN Renderer]\n    end\n    \n    subgraph Scheduling\n        Scheduler[Scheduler]\n        Priority[Priority Queue]\n    end\n    \n    App --> ReactAPI\n    ReactAPI --> Reconciler\n    Hooks --> Reconciler\n    Context --> Reconciler\n    Reconciler --> Fiber\n    Fiber --> Diff\n    Diff --> Scheduler\n    Scheduler --> Priority\n    Priority --> ReactDOM\n    Priority --> RNRenderer\n    \n    style Application fill:#f9f,stroke:#333,stroke-width:2px\n    style React Core fill:#bbf,stroke:#333,stroke-width:2px\n    style Reconciliation fill:#bfb,stroke:#333,stroke-width:2px\n    style Rendering fill:#fbb,stroke:#333,stroke-width:2px\n    style Scheduling fill:#ffb,stroke:#333,stroke-width:2px\n````\n\n1. åº”ç”¨å±‚ï¼š\n   - å¼€å‘è€…ç¼–å†™çš„åº”ç”¨ä»£ç \n   - ä½¿ç”¨ React API åˆ›å»ºç»„ä»¶å’Œå…ƒç´ \n2. React æ ¸å¿ƒå±‚ï¼š\n   - å¤„ç†ç»„ä»¶å®šä¹‰å’ŒåŸºç¡€æŠ½è±¡\n   - ç®¡ç† Hooks å’Œ Context\n   - æä¾›æ ¸å¿ƒ API æ¥å£\n3. åè°ƒå±‚ï¼š\n   - ç»´æŠ¤ Fiber æ ‘ç»“æ„\n   - æ‰§è¡Œ Diff ç®—æ³•\n   - è®¡ç®—æ›´æ–°å†…å®¹\n4. è°ƒåº¦å±‚ï¼š\n   - ç®¡ç†ä»»åŠ¡ä¼˜å…ˆçº§\n   - æ§åˆ¶æ›´æ–°æ—¶æœº\n   - å®ç°æ—¶é—´åˆ†ç‰‡\n5. æ¸²æŸ“å±‚ï¼š\n   - æ‰§è¡Œå®é™…çš„ DOM æ“ä½œ\n   - å¤„ç†å¹³å°ç‰¹å®šçš„æ¸²æŸ“é€»è¾‘\n\n## 6. é‡è¦æ¦‚å¿µå’Œå®ç°\n\n- Fiber æ¶æ„ï¼š\n\t- å®ç°å¯ä¸­æ–­çš„æ›´æ–°\n\t- æ”¯æŒä¼˜å…ˆçº§è°ƒåº¦\n\t- æ›´å¥½çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ\n- å¹¶å‘æ¨¡å¼ï¼š\n\t- æ”¯æŒä»»åŠ¡ä¸­æ–­å’Œæ¢å¤\n\t- å®ç°æ—¶é—´åˆ‡ç‰‡\n\t- ä¼˜åŒ–ç”¨æˆ·äº¤äº’ä½“éªŒ\n- è°ƒåº¦ç³»ç»Ÿï¼š\n\t- åŸºäºä¼˜å…ˆçº§çš„ä»»åŠ¡è°ƒåº¦\n\t- æ”¯æŒå¼‚æ­¥æ¸²æŸ“\n\t- å®ç°å¯ä¸­æ–­æ›´æ–°\n","7935ea9476a05ca2b17fa5345e58844d":"\n# ä½¿ç”¨ useTransition è¿›è¡Œéé˜»å¡æ¸²æŸ“\n\n\nuseTransition æ˜¯ React 18 å¼•å…¥çš„ä¸€ä¸ªå¼ºå¤§çš„æ€§èƒ½ä¼˜åŒ– Hookï¼Œå®ƒå…è®¸æˆ‘ä»¬å°†æŸäº›æ›´æ–°æ ‡è®°ä¸ºéç´§æ€¥çš„è¿‡æ¸¡æ›´æ–°ã€‚è®©æˆ‘è¯¦ç»†è§£é‡Šå®ƒçš„å„ä¸ªæ–¹é¢ï¼š\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åŸºæœ¬æ¦‚å¿µ \n\n```typescript\nconst [isPending, startTransition] = useTransition();\n```\n\n- `isPending`: å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¿‡æ¸¡çŠ¶æ€æ˜¯å¦å¤„äºè¿›è¡Œä¸­\n- `startTransition`: \n\t- å½“ä½ å¸Œæœ›å¯åŠ¨ä¸€ä¸ªæ–°çš„è¿‡æ¸¡çŠ¶æ€æ—¶è°ƒç”¨å®ƒ\n\t- ç”¨äºåŒ…è£…éœ€è¦æ ‡è®°ä¸ºè¿‡æ¸¡æ›´æ–°çš„çŠ¶æ€æ›´æ–°å‡½æ•° \n\t- å½“ä½ ä½¿ç”¨`startTransition`å‡½æ•°è¿›è¡ŒçŠ¶æ€æ›´æ–°æ—¶ï¼Œä½ å®é™…ä¸Šå‘Šè¯‰ Reactï¼š**è¿™ä¸ªæ›´æ–°ä¸æ˜¯éå¸¸ç´§æ€¥çš„**ï¼Œå¦‚æœæœ‰æ›´é‡è¦çš„æ›´æ–°è¦å¤„ç†ï¼Œä½ å¯ä»¥ä¸­æ–­æˆ–å»¶åè¿™ä¸ªæ¬¡è¦æ›´æ–°\n\n## 2. ä¸»è¦ç”¨é€”\n\n- å¤„ç†å¤§é‡æ•°æ®æ›´æ–°\n\t- é¿å…ç•Œé¢å¡é¡¿\n\t- ä¿æŒç”¨æˆ·ç•Œé¢å“åº”\n\t- ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ\n- å¹¶å‘æ¸²æŸ“æ§åˆ¶\n\t- åŒºåˆ†ç´§æ€¥å’Œéç´§æ€¥æ›´æ–°\n\t- ä¼˜åŒ–æ¸²æŸ“ä¼˜å…ˆçº§\n\t- æä¾›æ›´æµç•…çš„äº¤äº’\n- **æ™ºèƒ½è°ƒåº¦**\n\t- è‡ªåŠ¨æ‰¹å¤„ç†æ›´æ–°\n\t- ä¼˜åŒ–æ¸²æŸ“æ—¶æœº\n\t- å‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“\n- **é¿å…é˜»å¡**\n\t- ä¿æŒè¾“å…¥å“åº”æ€§\n\t- é˜²æ­¢ UI å†»ç»“\n\t- æ”¹å–„ç”¨æˆ·ä½“éªŒ\n## 3. ä¸ useDeferredValue çš„æ¯”è¾ƒ\n\n- **useTransition**\n\t- ç›´æ¥æ§åˆ¶çŠ¶æ€æ›´æ–°\n\t- é€‚ç”¨äºè§¦å‘æ›´æ–°çš„åœ°æ–¹\n\t- æä¾› pending çŠ¶æ€\n- **useDeferredValue**\n\t- å»¶è¿Ÿå€¼çš„æ›´æ–°\n\t- é€‚ç”¨äºæ¥æ”¶å€¼çš„åœ°æ–¹\n\t- ä¸æä¾› pending çŠ¶æ€\n\n## 4. æ³¨æ„äº‹é¡¹\n\n- `useTransition`ä»…åœ¨å¼€å¯Reactå¹¶å‘æ¨¡å¼çš„æ—¶å€™æ‰æœ‰æ•ˆ\n\n```javascript\n// React v18ä»¥å‰\nReactDOM.render(<app />, rootNode) // âŒ æ— æ³•å¼€å¯useTransition\n \n// React v18\nReactDOM.createRoot(rootNode).render(<app />) // âœ… å¼€å¯useTransition\n```\n\n- åªæœ‰å½“ä½ èƒ½è®¿é—®æŸä¸ªçŠ¶æ€çš„`set`å‡½æ•°æ—¶ï¼Œä½ æ‰èƒ½å°†æ›´æ–°åŒ…è£…è¿›`useTransition`ä¸­\n\n- ä¼ é€’ç»™`startTransition`çš„å‡½æ•°å¿…é¡»æ˜¯åŒæ­¥çš„ï¼Œè€Œä¸èƒ½æ˜¯å¼‚æ­¥çš„ã€‚\n\n```javascript\nstartTransition(async () => {\n  await someAsyncFunction();\n  // âŒ Setting state *after* startTransition call\n  setPage('/about');\n});\n \nawait someAsyncFunction();\nstartTransition(() => {\n  // âœ… Setting state *during* startTransition call\n  setPage('/about');\n});\n```\n\n- ä¸èƒ½ç”¨äºæ§åˆ¶æ–‡æœ¬è¾“å…¥ã€‚å› ä¸ºè¾“å…¥æ¡†æ˜¯éœ€è¦å®æ—¶æ›´æ–°çš„ï¼Œå¦‚æœç”¨`useTransition`é™ä½äº†æ¸²æŸ“ä¼˜å…ˆçº§ï¼Œå¯èƒ½é€ æˆè¾“å…¥â€œå¡é¡¿â€ã€‚\n\n- ä¸è¦åœ¨`startTransition`å†…éƒ¨ä½¿ç”¨`setTimeout`ï¼Œå¦‚æœä¸€å®šè¦ç”¨`setTimeout`ï¼Œä½ å¯ä»¥åœ¨`startTransition`å¤–å±‚ä½¿ç”¨\n\n```javascript\nstartTransition(() => {\n  // âŒ Setting state *after* startTransition call\n  setTimeout(() => {\n    setPage('/about');\n  }, 1000);\n});\n \nsetTimeout(() => {\n  startTransition(() => {\n    // âœ… Setting state *during* startTransition call\n    setPage('/about');\n  });\n}, 1000);\n```\n\n- å‰é¢è¯´åˆ°å¾ˆå¤šæ¬¡â€œä¸­æ–­æˆ–å»¶åæ›´æ–°â€ï¼Œé‚£ä¹ˆä»€ä¹ˆæ—¶å€™ä¸­æ–­ï¼Œä»€ä¹ˆæ—¶å€™å»¶åæ›´æ–°ï¼Ÿ\n\t- æœ€ç®€å•çš„ç†è§£ï¼šè¢«`useTransition`åŒ…è£¹çš„åŒä¸€ä¸ªçŠ¶æ€å¤šæ¬¡æ›´æ–°ï¼Œåªä¼šæ¸²æŸ“æœ€åä¸€ä¸ªï¼Œå‰é¢çš„éƒ½ç®—ä¸­æ–­ï¼ˆä»…UIå±‚é¢ï¼Œå¦‚ï¼šé•¿åˆ—è¡¨å¤šæ¬¡è¯·æ±‚ï¼‰ï¼›\n\t- ä¸åŒç»„ä»¶è§¦å‘ä¸åŒçŠ¶æ€çš„æ›´æ–°ï¼Œè¢«`useTransition`åŒ…è£¹çš„çŠ¶æ€ä¼˜å…ˆçº§è¾ƒä½ï¼Œè¢«ä¸­æ–­åä¼šç­‰é«˜ä¼˜å…ˆçº§çš„çŠ¶æ€æ›´æ–°å®Œæˆåç»§ç»­æ›´æ–°ï¼ˆå¦‚ï¼šå¤æ‚å›¾è¡¨æ¸²æŸ“è¢«ä¸­æ–­ï¼Œä¼šåœ¨é«˜ä¼˜å…ˆçº§çŠ¶æ€æ›´æ–°åï¼Œç»§ç»­å¤„ç†å›¾è¡¨çš„æ¸²æŸ“ï¼‰ã€‚\n\n## 5. å®é™…åº”ç”¨ç¤ºä¾‹\n\n### 5.1. ç¤ºä¾‹1ï¼šé€‰é¡¹å¡åˆ‡æ¢\n\nå¦‚ä¸‹ä»£ç ï¼Œè¿™æ ·æˆ‘ä»¬å¿«é€Ÿåˆ‡æ¢tabï¼Œæ— è®ºç‚¹åˆ°å“ªä¸€ä¸ªtabéƒ½ä¸ä¼šå¡é¡¿\n\n```javascript hl:9,17\nfunction Tabs() {\n  const [tab, setTab] = useState('home');\n  const [isPending, startTransition] = useTransition();\n\n  return (\n    <>\n      <TabButton \n        onClick={() => {\n          startTransition(() => {\n            setTab('home');\n          });\n        }}>\n        Home\n      </TabButton>\n      <TabButton \n        onClick={() => {\n          startTransition(() => {\n            setTab('posts');\n          });\n        }}>\n        Posts\n      </TabButton>\n      {isPending ? (\n        <Spinner />\n      ) : (\n        <TabContent tab={tab} />\n      )}\n    </>\n  );\n}\n\n```\n\n### 5.2. ç¤ºä¾‹ 2ï¼šè¾“å…¥æ¡†ä¼˜å…ˆçº§é«˜äºæœç´¢ç»“æœï¼Œç«‹å³æ›´æ–°\n\n```typescript\nfunction SearchResults() {\n  const [query, setQuery] = useState('');\n  const [isPending, startTransition] = useTransition();\n\n  const updateQuery = (e) => {\n    // ç«‹å³æ›´æ–°è¾“å…¥æ¡†\n    setQuery(e.target.value);\n    \n    // å°†æœç´¢ç»“æœæ›´æ–°æ ‡è®°ä¸ºè¿‡æ¸¡\n    startTransition(() => {\n      // å¤æ‚çš„æœç´¢é€»è¾‘\n      performSearch(e.target.value);\n    });\n  };\n\n  return (\n    <div>\n      <input value={query} onChange={updateQuery} />\n      {isPending ? (\n        <div>Loading...</div>\n      ) : (\n        <SearchResults />\n      )}\n    </div>\n  );\n}\n```\n\n### 5.3. ç¤ºä¾‹ 3ï¼š `useTransition`å’Œ`Suspense`å®ç°è·¯ç”±æµç•…åˆ‡æ¢\n\n```jsx hl:5,9,39\nimport React, { useState } from 'react';\nimport { BrowserRouter, Switch, Route, Link } from 'react-router-dom';\n \nconst [location, setLocation] = useState(window.location);\nconst [isPending, startTransition] = React.unstable_useTransition();\n \n// ä½¿ç”¨ startTransition æ¥æ›´æ–° location çŠ¶æ€ï¼Œèƒ½å¤Ÿå»¶è¿Ÿæ˜¾ç¤ºæ–°é¡µé¢çš„å†…å®¹ï¼Œç›´åˆ°æ•°æ®åŠ è½½å®Œæ¯•\nfunction handleNavigation(newLocation) {\n  startTransition(() => {\n    setLocation(newLocation);\n  });\n}\n \nfunction CustomLink({ to, children }) {\n  return (\n    <a\n      href={to}\n      onClick={(event) => {\n        event.preventDefault();\n        handleNavigation(to);\n      }}\n    >\n      {children}\n    </a>\n  );\n}\n \n// ä¸»åº”ç”¨ç»„ä»¶\nfunction App() {\n  return (\n    <div>\n      <BrowserRouter>\n        {/* å¯¼èˆª */}\n        <nav>\n          <CustomLink to=\"/about\">About</CustomLink>\n          <CustomLink to=\"/contact\">Contact</CustomLink>\n        </nav>\n \n        {/* ä½¿ç”¨ React.Suspense æ¥å¤„ç†ç»„ä»¶çš„æ‡’åŠ è½½ */}\n        <React.Suspense fallback={<LoadingIndicator />}>\n          <Switch location={location}>\n            <Route path=\"/about\" component={AboutPage} />\n            <Route path=\"/contact\" component={ContactPage} />\n            {/* ...å…¶ä»–è·¯ç”±... */}\n          </Switch>\n        </React.Suspense>\n \n        {/* ä½¿ç”¨ isPending æ˜¾ç¤ºæˆ–éšè—å…¨å±€åŠ è½½æŒ‡ç¤ºå™¨ */}\n        {isPending && <LoadingIndicator />}\n      </BrowserRouter>\n    </div>\n  );\n}\n \nexport default App;\n```\n\n## 6. ä½¿ç”¨åœºæ™¯\n\n- **å¤æ‚æ•°æ®è¿‡æ»¤**ï¼šå¤„ç†å¤§å‹åˆ—è¡¨çš„è¿‡æ»¤å’Œæœç´¢\n- **åˆ‡æ¢è§†å›¾**ï¼šåœ¨ä¸åŒè§†å›¾ä¹‹é—´å¹³æ»‘è¿‡æ¸¡\n- **æ•°æ®å¯è§†åŒ–**ï¼šæ›´æ–°å¤§å‹å›¾è¡¨æˆ–æ•°æ®é›†\n- **å»¶è¿ŸåŠ è½½**ï¼šå¤„ç†å¼‚æ­¥å†…å®¹åŠ è½½ \n\n## 7. æ€§èƒ½ä¼˜åŠ¿\n\n- **é¿å…é˜»å¡**ï¼šé˜²æ­¢å¤§å‹æ›´æ–°é˜»å¡ç”¨æˆ·è¾“å…¥\n- **ä¼˜å…ˆçº§ç®¡ç†**ï¼šè‡ªåŠ¨å¤„ç†æ›´æ–°ä¼˜å…ˆçº§\n- **æ›´æµç•…çš„ä½“éªŒ**ï¼šå‡å°‘ç•Œé¢å¡é¡¿å’Œå»¶è¿Ÿ \n\n## 8. æœ€ä½³å®è·µ\n\n### 8.1. **è¯†åˆ«éç´§æ€¥æ›´æ–°**\n\n  ```typescript\n  // å¥½çš„ä½¿ç”¨æ–¹å¼\n  startTransition(() => {\n    setFilteredItems(computeExpensiveFiltering(items));\n  });\n  ```\n\n### 8.2. **ç»“åˆ Suspense**\n\n  ```typescript\n  <Suspense fallback={<Loading />}>\n    {isPending ? <OldContent /> : <NewContent />}\n  </Suspense>\n  ``` \n\n## 9. ä½¿ç”¨å»ºè®®\n\n1. ä¼˜å…ˆè€ƒè™‘ä»¥ä¸‹åœºæ™¯ä½¿ç”¨ useTransitionï¼š\n    - å¤§æ•°æ®åˆ—è¡¨æ¸²æŸ“\n    - å¤æ‚è®¡ç®—æ“ä½œ\n    - é¢‘ç¹çŠ¶æ€æ›´æ–°\n2. é¿å…åœ¨ä»¥ä¸‹æƒ…å†µä½¿ç”¨ï¼š\n    - ç®€å•çš„çŠ¶æ€æ›´æ–°\n    - ä¸éœ€è¦ä¼˜åŒ–çš„æ“ä½œ\n    - ç´§æ€¥çš„ç”¨æˆ·åé¦ˆ\n3. ç»“åˆå…¶ä»–ä¼˜åŒ–æ‰‹æ®µï¼š\n    - è™šæ‹Ÿåˆ—è¡¨\n    - æ•°æ®åˆ†é¡µ\n    - ç¼“å­˜ç­–ç•¥\n\n## 10. æ€§èƒ½ä¼˜åŒ–æŠ€å·§\n\n### 10.1. åˆ†æ‰¹å¤„ç†æ›´æ–°\n\n  ```typescript\n  startTransition(() => {\n    // å°†å¤§å‹æ›´æ–°åˆ†æˆå°æ‰¹æ¬¡\n    for (let i = 0; i < items.length; i += 100) {\n      const batch = items.slice(i, i + 100);\n      processItems(batch);\n    }\n  });\n  ```\n\n### 10.2. æ¡ä»¶ä½¿ç”¨\n\n  ```typescript\n  const handleChange = (e) => {\n    if (isComplexUpdate) {\n      startTransition(() => updateState(e.target.value));\n    } else {\n      updateState(e.target.value);\n    }\n  };\n  ``` \n\n","3b182d04103051e09e57476adbf2a2f7":"\n# ä½¿ç”¨ useDeferredValue  æ¥å»¶è¿ŸçŠ¶æ€æ›´æ–°\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. `useTransition`å’Œ`useDeferredValue`çš„å·®å¼‚ \n\n- `useTransition`ä¸»è¦å…³æ³¨ç‚¹æ˜¯**çŠ¶æ€çš„è¿‡æ¸¡**ã€‚å®ƒå…è®¸å¼€å‘è€…æ§åˆ¶æŸä¸ªæ›´æ–°çš„å»¶è¿Ÿæ›´æ–°ï¼Œè¿˜æä¾›äº†è¿‡æ¸¡æ ‡è¯†ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿæ·»åŠ è¿‡æ¸¡åé¦ˆã€‚\n- `useDeferredValue`ä¸»è¦å…³æ³¨ç‚¹æ˜¯**å•ä¸ªå€¼çš„å»¶è¿Ÿæ›´æ–°**ã€‚å®ƒå…è®¸ä½ æŠŠç‰¹å®šçŠ¶æ€çš„æ›´æ–°æ ‡è®°ä¸º`ä½ä¼˜å…ˆçº§`ã€‚\n\n## 2. å®šä¹‰å’ŒåŸºæœ¬æ¦‚å¿µ\n\nuseDeferredValue æ˜¯ React 18 å¼•å…¥çš„ä¸€ä¸ª Hookï¼Œå®ƒå…è®¸æˆ‘ä»¬å»¶è¿Ÿæ›´æ–° UI çš„æŸäº›éƒ¨åˆ†ã€‚è¿™ä¸ª Hook æ¥æ”¶ä¸€ä¸ªå€¼å¹¶è¿”å›è¯¥å€¼çš„å»¶è¿Ÿç‰ˆæœ¬ï¼š\n\n```javascript\nconst deferredValue = useDeferredValue(value);\n```\n\nå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯åœ¨å¤„ç†å¤§é‡æ•°æ®æˆ–å¤æ‚è®¡ç®—æ—¶ï¼Œé€šè¿‡å»¶è¿Ÿéå…³é”®æ›´æ–°æ¥ä¿æŒ UI çš„å“åº”æ€§ \n\n## 3. å·¥ä½œåŸç†\n\n- **å»¶è¿Ÿå¤„ç†**\n\t- åˆ›å»ºå€¼çš„å»¶è¿Ÿå‰¯æœ¬\n\t- ä¼˜å…ˆå¤„ç†ç´§æ€¥æ›´æ–°\n\t- åœ¨ç©ºé—²æ—¶é—´å¤„ç†å»¶è¿Ÿå€¼ \n- **æ€§èƒ½ä¼˜åŒ–**\n\t- é¿å…é˜»å¡ä¸»çº¿ç¨‹\n\t- æé«˜ç”¨æˆ·äº¤äº’å“åº”æ€§\n\t- å¹³æ»‘å¤„ç†å¤§é‡æ•°æ®æ›´æ–° \n\n## 4. ä¸»è¦ä½¿ç”¨åœºæ™¯\n\n- **å¤§æ•°æ®å±•ç¤º**\n\t- é•¿åˆ—è¡¨æ¸²æŸ“\n\t- å®æ—¶æœç´¢\n\t- æ•°æ®è¿‡æ»¤ \n- **å¤æ‚è®¡ç®—**\n\t- å›¾è¡¨æ›´æ–°\n\t- æ•°æ®åˆ†æ\n\t- åŠ¨æ€è¡¨æ ¼ \n- **ç”¨æˆ·è¾“å…¥å¤„ç†**\n   - è‡ªåŠ¨å®Œæˆ\n   - å®æ—¶é¢„è§ˆ\n   - è¡¨å•éªŒè¯ \n\n## 5. å®é™…ä½¿ç”¨æ¡ˆä¾‹\n\n### 5.1. æ¡ˆä¾‹1ï¼šå®æ—¶æœç´¢\n\n> æœç´¢ç»“æœå¯ä»¥å¾€åå»¶è¿Ÿ\n\n```javascript hl:3,12,19\nfunction SearchComponent() {\n  const [query, setQuery] = useState('');\n  const deferredQuery = useDeferredValue(query);\n  \n  return (\n    <div>\n      <input\n        value={query}\n        onChange={(e) => setQuery(e.target.value)}\n        placeholder=\"æœç´¢...\"\n      />\n      <SearchResults query={deferredQuery} />\n    </div>\n  );\n}\n\nfunction SearchResults({ query }) {\n  const results = useMemo(() => {\n    // å¤æ‚çš„æœç´¢é€»è¾‘\n    return performExpensiveSearch(query);\n  }, [query]);\n\n  return (\n    <ul>\n      {results.map(item => (\n        <li key={item.id}>{item.name}</li>\n      ))}\n    </ul>\n  );\n}\n```\n\n### 5.2. æ¡ˆä¾‹2ï¼šæ•°æ®å¯è§†åŒ–\n\n```javascript hl:3,12,18\nfunction DataVisualization() {\n  const [data, setData] = useState([]);\n  const deferredData = useDeferredValue(data);\n\n  const handleDataUpdate = (newData) => {\n    setData(newData);\n  };\n\n  return (\n    <div>\n      <DataControls onUpdate={handleDataUpdate} />\n      <Chart data={deferredData} />\n    </div>\n  );\n}\n\nfunction Chart({ data }) {\n  // ä½¿ç”¨ useMemo ä¼˜åŒ–å¤æ‚çš„å›¾è¡¨è®¡ç®—\n  const chartConfig = useMemo(() => {\n    return generateChartConfig(data);\n  }, [data]);\n\n  return <ChartComponent config={chartConfig} />;\n}\n```\n\n### 5.3. æ¡ˆä¾‹3ï¼šå®æ—¶æ–‡æœ¬é¢„è§ˆ\n\n```javascript hl:3,12,19\nfunction MarkdownEditor() {\n  const [text, setText] = useState('');\n  const deferredText = useDeferredValue(text);\n\n  return (\n    <div className=\"editor-container\">\n      <textarea\n        value={text}\n        onChange={(e) => setText(e.target.value)}\n        placeholder=\"è¾“å…¥ Markdown æ–‡æœ¬...\"\n      />\n      <MarkdownPreview text={deferredText} />\n    </div>\n  );\n}\n\nfunction MarkdownPreview({ text }) {\n  const html = useMemo(() => {\n    return convertMarkdownToHtml(text);\n  }, [text]);\n\n  return <div dangerouslySetInnerHTML={{ __html: html }} />;\n}\n```\n\n## 6. ä½¿ç”¨çš„æ³¨æ„äº‹é¡¹\n\n- `useDeferredValue` ä»…åœ¨**å¼€å¯Reactå¹¶å‘æ¨¡å¼**çš„æ—¶å€™æ‰æœ‰æ•ˆ\n- ä¼ é€’ç»™`useDeferredValue`çš„å€¼åº”è¯¥æ˜¯**åŸå§‹å€¼**ï¼ˆå¦‚å­—ç¬¦ä¸²å’Œæ•°å­—ï¼‰æˆ–**åœ¨æ¸²æŸ“å¤–éƒ¨åˆ›å»ºçš„å¯¹è±¡**\n- å½“åŒä¸€ä¸ª`useDeferredValue`åœ¨æ¸²æŸ“å‰æ¥æ”¶åˆ°å¤šæ¬¡ä¸åŒçš„å€¼æ—¶ï¼Œåªæœ‰**æœ€åä¸€ä¸ªä¼šè¢«æ¸²æŸ“**\n- å’Œ`useTransition`ä¸€æ ·ï¼Œ`useDeferredValue`åªä¼šä¸­æ–­æˆ–å»¶è¿ŸUIçš„æ¸²æŸ“ï¼Œ**ä¸ä¼šé˜»æ­¢ç½‘ç»œè¯·æ±‚**ã€‚\n   \n## 7. ä½¿ç”¨çš„å¥½å¤„ã€ä¸é˜²æŠ–ä¸èŠ‚æµçš„åŒºåˆ«\n\n- å®ƒä¸Reactæ·±åº¦é›†æˆï¼Œå¯ä»¥é€‚åº”ç”¨æˆ·çš„è®¾å¤‡ã€‚å¦‚æœè®¾å¤‡æ€§èƒ½å¥½ï¼Œå»¶è¿Ÿçš„é‡æ–°æ¸²æŸ“ä¼šå¾ˆå¿«å®Œæˆï¼›å¦‚æœè®¾å¤‡æ€§èƒ½å·®ï¼Œé‡æ–°æ¸²æŸ“ä¼šç›¸åº”åœ°å»¶è¿Ÿã€‚\n- å®ƒä¸éœ€è¦é€‰æ‹©å›ºå®šçš„å»¶è¿Ÿï¼Œä¸é˜²æŠ–å’ŒèŠ‚æµä¸åŒã€‚\n\t- **é˜²æŠ–ä¸èŠ‚æµçš„å±€é™æ€§**ï¼š\n\t\t- è¿™ä¸¤ç§æ–¹æ³•éƒ½æ˜¯ä¸ºäº†æ§åˆ¶å‡½æ•°çš„æ‰§è¡Œé¢‘ç‡ï¼Œä½†å®ƒä»¬æ˜¯é˜»å¡çš„ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚\n- ç”±`useDeferredValue`æ‰§è¡Œçš„é‡æ–°æ¸²æŸ“æ˜¯å¯ä¸­æ–­çš„ã€‚è¿™æ„å‘³ç€åœ¨Reacté‡æ–°æ¸²æŸ“æœŸé—´ï¼Œå¦‚æœå‘ç”Ÿäº†å…¶ä»–æ›´æ–°ï¼ŒReactä¼šä¸­æ–­å½“å‰çš„æ¸²æŸ“å¹¶å¤„ç†æ–°çš„æ›´æ–°ã€‚\n## 8. ä¸ useTransition çš„åŒºåˆ«\n\n- **ä½¿ç”¨åœºæ™¯**\n\t- useDeferredValueï¼šé€‚ç”¨äº`å€¼`çš„å»¶è¿Ÿ\n\t- useTransitionï¼šé€‚ç”¨äº`çŠ¶æ€æ›´æ–°`çš„ä¼˜å…ˆçº§ \n- **æ§åˆ¶æ–¹å¼**\n\t- useDeferredValueï¼š`è¢«åŠ¨`æ§åˆ¶\n\t- useTransitionï¼š`ä¸»åŠ¨`æ§åˆ¶ \n- **åº”ç”¨æ–¹å¼**\n\t- useDeferredValueï¼šç›´æ¥åº”ç”¨äº`å€¼`\n\t- useTransitionï¼šåŒ…è£…`çŠ¶æ€æ›´æ–°å‡½æ•°` \n\n","01af8ff0694658699ace90335bfa96db":"\n# ä½¿ç”¨ useInsertionEffect æ³¨å…¥ css-in-js\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å®šä¹‰å’ŒåŸºæœ¬æ¦‚å¿µ \n\nuseInsertionEffect æ˜¯ React 18 å¼•å…¥çš„ä¸€ä¸ªç‰¹æ®Šçš„ Effect Hookï¼Œå®ƒçš„æ‰§è¡Œæ—¶æœºæ¯” `useLayoutEffect` å’Œ `useEffect` éƒ½è¦æ—©ã€‚å…¶ä¸»è¦ç›®çš„æ˜¯ç”¨äº CSS-in-JS åº“**åœ¨ DOM å˜æ›´ä¹‹å‰æ³¨å…¥æ ·å¼** \n\nåŸºæœ¬è¯­æ³•ï¼š\n\n```javascript\nuseInsertionEffect(setup, dependencies?)\n```\n\n## 2. æ‰§è¡Œæ—¶æœº\n\næ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š\n1. useInsertionEffect\n2. useLayoutEffect\n3. useEffect\n\nè¿™ä¸ªé¡ºåºè®¾è®¡ä½¿å¾—å®ƒ**ç‰¹åˆ«é€‚åˆåœ¨ DOM å˜æ›´ä¹‹å‰æ’å…¥æ ·å¼**ï¼Œé¿å…äº†å¸ƒå±€æŠ–åŠ¨çš„é—®é¢˜\n\n## 3. ä¸»è¦ä½¿ç”¨åœºæ™¯\n\n- **CSS-in-JS åº“çš„æ ·å¼æ³¨å…¥**\n\t- styled-components\n\t- Emotion\n\t- å…¶ä»–åŠ¨æ€æ ·å¼åº“\n- **æ€§èƒ½å…³é”®çš„æ ·å¼æ“ä½œ**\n\t- åŠ¨æ€ä¸»é¢˜åˆ‡æ¢\n\t- å…³é”®æ ·å¼æ³¨å…¥\n\t- æ ·å¼ä¼˜å…ˆçº§å¤„ç† \n- **ç‰¹æ®Šçš„ DOM æ“ä½œ**\n\t- éœ€è¦åœ¨å¸ƒå±€è®¡ç®—å‰æ‰§è¡Œçš„æ“ä½œ\n\t- æ ·å¼è¡¨åŠ¨æ€æ’å…¥\n\t- æ€§èƒ½æ•æ„Ÿçš„ DOM ä¿®æ”¹ \n\n## 4. å®é™…ä½¿ç”¨æ¡ˆä¾‹\n\n### 4.1. æ¡ˆä¾‹1ï¼šåŸºæœ¬çš„æ ·å¼æ³¨å…¥\n\n```javascript hl:5,8\nfunction StyleInjector({ styles }) {\n  useInsertionEffect(() => {\n    const style = document.createElement('style');\n    style.innerHTML = styles;\n    document.head.appendChild(style);\n    \n    return () => {\n      document.head.removeChild(style);\n    };\n  }, [styles]);\n\n  return null;\n}\n```\n\n### 4.2. æ¡ˆä¾‹2ï¼šç®€å•çš„ CSS-in-JS å®ç°\n\n```javascript\nfunction DynamicStyles({ className, rules }) {\n  useInsertionEffect(() => {\n    const styleSheet = new CSSStyleSheet();\n    styleSheet.replaceSync(rules);\n    document.adoptedStyleSheets = [...document.adoptedStyleSheets, styleSheet];\n\n    return () => {\n      document.adoptedStyleSheets = document.adoptedStyleSheets\n        .filter(sheet => sheet !== styleSheet);\n    };\n  }, [rules]);\n\n  return <div className={className}>{/* content */}</div>;\n}\n```\n\n### 4.3. æ¡ˆä¾‹3ï¼šä¸»é¢˜åˆ‡æ¢å®ç°\n\n```javascript hl:9\nfunction ThemeProvider({ theme, children }) {\n  useInsertionEffect(() => {\n    const styleElement = document.createElement('style');\n    styleElement.setAttribute('data-theme', theme);\n    styleElement.textContent = generateThemeCSS(theme);\n    document.head.appendChild(styleElement);\n\n    return () => {\n      document.head.removeChild(styleElement);\n    };\n  }, [theme]);\n\n  return <>{children}</>;\n}\n```\n\n## 5. æ³¨æ„äº‹é¡¹\n\n- ä¸èƒ½è®¿é—® refs\n-  ä¸“æ³¨äºæ ·å¼æ³¨å…¥\n- åšå¥½æ¸…ç†å·¥ä½œ\n- ä¿æŒç®€å•çš„é€»è¾‘\n- ä¸èƒ½ä½¿ç”¨ DOM APIsï¼ˆé™¤äº†æ ·å¼æ³¨å…¥ï¼‰\n- ä¸èƒ½æ›´æ–°çŠ¶æ€\n- ä»…ç”¨äºå¿…è¦çš„æ ·å¼æ³¨å…¥\n- æ³¨æ„æ¸…ç†å·¥ä½œ \n- é¿å…å¤æ‚è®¡ç®—\n- é˜²æ­¢ XSS æ”»å‡»\n- æ¸…ç†æ— ç”¨æ ·å¼\n- éªŒè¯æ ·å¼å†…å®¹\n\n### 5.1. æ³¨æ„äº‹é¡¹çš„è¯¦ç»†è¯´æ˜\n\n- `useInsertionEffect`åªåœ¨å®¢æˆ·ç«¯è¿è¡Œï¼Œä¸èƒ½åœ¨æœåŠ¡å™¨æ¸²æŸ“æœŸé—´è¿è¡Œã€‚\n- ä¸èƒ½ä»`useInsertionEffect`ä¸­æ›´æ–°çŠ¶æ€ã€‚\n\t- è¿™æ˜¯å› ä¸º`useInsertionEffect`ä¸“ä¸º**æ’å…¥æ“ä½œ**è®¾è®¡çš„ï¼Œ\n\t- è€Œä¸æ˜¯ä¸ºå“åº”å¼çŠ¶æ€å˜åŒ–è®¾è®¡çš„ã€‚\n\t- å¦‚æœåœ¨`useInsertionEffect`é‡Œæ›´æ–°çŠ¶æ€ï¼Œä¼šé€ æˆç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚\n- å½“`useInsertionEffect`è¿è¡Œæ—¶ï¼Œ`refs`è¿˜æ²¡æœ‰é™„åŠ ã€‚\n\t- å¦‚æœä½ è¯•å›¾åœ¨`useInsertionEffect`ä¸­è®¿é—®refï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°`null`æˆ–æœªå®šä¹‰çš„å€¼ã€‚\n- `useInsertionEffect`å¯èƒ½åœ¨DOMæ›´æ–°ä¹‹å‰æˆ–ä¹‹åè¿è¡Œï¼Œæ‰€ä»¥ä¸èƒ½ä¾èµ–äºDOMåœ¨ç‰¹å®šæ—¶åˆ»çš„æ›´æ–°çŠ¶æ€ã€‚\n\t- è¿™æ˜¯å› ä¸º`useInsertionEffect`çš„è®¾è®¡åˆè¡·æ˜¯åœ¨ä»»ä½•å¸ƒå±€æ•ˆæœè§¦å‘ä¹‹å‰æ’å…¥å…ƒç´ ï¼Œä½†å®ƒå¹¶ä¸ä¿è¯åœ¨ DOM çš„ä»»ä½•ç‰¹å®šæ›´æ–°ä¹‹å‰æˆ–ä¹‹åè¿è¡Œã€‚\n\t- å› æ­¤ï¼Œä¾èµ–äºDOMåœ¨ç‰¹å®šæ—¶åˆ»çš„çŠ¶æ€å¯èƒ½å¯¼è‡´ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚\n\t\t- ä¾‹å¦‚ï¼šå‡è®¾ä½ å¸Œæœ›åœ¨`useInsertionEffect`ä¸­æ£€æŸ¥æŸä¸ªå…ƒç´ çš„å°ºå¯¸ã€‚ä½†ç”±äº DOM å¯èƒ½å°šæœªæ›´æ–°ï¼Œæ‰€ä»¥ä½ å¾—åˆ°çš„å°ºå¯¸å¯èƒ½æ˜¯æ—§çš„æˆ–ä¸å‡†ç¡®çš„ã€‚\n\n","5d74a46f998c5fc1abdb481d64094b71":"\n# ä½¿ç”¨ useImperativeHandle ç²¾ç¡®æ§åˆ¶ç»„ä»¶å¯¹å¤–æš´éœ²èƒ½åŠ›\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å®šä¹‰å’ŒåŸºæœ¬æ¦‚å¿µ \n\nuseImperativeHandle æ˜¯ React æä¾›çš„ä¸€ä¸ªé«˜çº§ Hookï¼Œ**å®ƒå¯ä»¥è®©ä½ è‡ªå®šä¹‰é€šè¿‡ ref æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚å®ƒé€šå¸¸ä¸ forwardRef ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºå‘çˆ¶ç»„ä»¶æš´éœ²ç‰¹å®šçš„æ–¹æ³•æˆ–å±æ€§**\n\nuseImperativeHandle æ˜¯ä¸€ä¸ªå¼ºå¤§ä½†åº”è°¨æ…ä½¿ç”¨çš„ Hookã€‚å®ƒä¸»è¦ç”¨äºéœ€è¦ç²¾ç¡®æ§åˆ¶ç»„ä»¶å¯¹å¤–æš´éœ²çš„å®ä¾‹å€¼çš„åœºæ™¯ã€‚\n- åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥**ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ props å’ŒçŠ¶æ€ç®¡ç†æ¥å¤„ç†ç»„ä»¶é—´çš„é€šä¿¡**ã€‚\n- åªæœ‰åœ¨ç¡®å®éœ€è¦å‘½ä»¤å¼ç¼–ç¨‹æ¥å£æ—¶ï¼Œæ‰è€ƒè™‘ä½¿ç”¨ useImperativeHandleã€‚\n- ä½¿ç”¨æ—¶è¦æ³¨æ„æ€§èƒ½å½±å“ï¼Œå¹¶ä¿æŒä»£ç çš„å¯ç»´æŠ¤æ€§\n\n### 1.1. åŸºæœ¬è¯­æ³•\n\n```javascript\nuseImperativeHandle(ref, createHandle, dependencies?)\n```\n\n## 2. ä½¿ç”¨åŸåˆ™\n\n- å¦‚æœä½¿ç”¨ props å¯ä»¥è§£å†³çš„åœºæ™¯éƒ½ä¸è¦ä½¿ç”¨ refsï¼Œä¹Ÿå°±æ— éœ€ä½¿ç”¨`useImperativeHandle`\n- çŠ¶æ€æå‡å¯ä»¥è§£å†³çš„é—®é¢˜,ï¼Œå°±åˆ«ç”¨\n\n## 3. ä¸»è¦ä½¿ç”¨åœºæ™¯\n\n1. è‡ªå®šä¹‰æš´éœ²çš„ ref å†…å®¹\n   - é™åˆ¶å­ç»„ä»¶æš´éœ²çš„æ–¹æ³•\n   - æä¾›è‡ªå®šä¹‰çš„æ¥å£\n   - å°è£…å¤æ‚çš„æ“ä½œ\n2. ç»„ä»¶é€šä¿¡\n   - çˆ¶ç»„ä»¶éœ€è¦è°ƒç”¨å­ç»„ä»¶æ–¹æ³•\n   - è·¨ç»„ä»¶æ“ä½œ\n   - å‘½ä»¤å¼äº¤äº’\n3. DOM æ“ä½œå°è£…\n   - å°è£… DOM æ“ä½œ\n   - æä¾›ç»Ÿä¸€çš„æ¥å£\n   - æ§åˆ¶è®¿é—®æƒé™ \n\n## 4. å®é™…ä½¿ç”¨æ¡ˆä¾‹\n\n### 4.1. æ¡ˆä¾‹1ï¼šåŸºæœ¬çš„è¡¨å•æ§åˆ¶\n\næƒ³è±¡ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä½ æœ‰ä¸€ä¸ªè‡ªå®šä¹‰è¾“å…¥ç»„ä»¶ï¼Œä½ æƒ³ä¸ºå…¶æä¾›ä¸€ä¸ªæ–¹æ³•æ¥æ¸…é™¤è¾“å…¥å†…å®¹ï¼Œä½†ä¸æƒ³æš´éœ²æ•´ä¸ªç»„ä»¶æˆ– DOM èŠ‚ç‚¹\n\n```javascript hl:6,26,28\nimport React, { forwardRef, useImperativeHandle, useRef } from 'react';\n\nconst CustomInput = forwardRef((props, ref) => {\n  const inputRef = useRef();\n\n  useImperativeHandle(ref, () => ({\n    focus: () => {\n      inputRef.current.focus();\n    },\n    clear: () => {\n      inputRef.current.value = '';\n    },\n    getValue: () => {\n      return inputRef.current.value;\n    }\n  }));\n\n  return <input ref={inputRef} {...props} />;\n});\n\n// çˆ¶ç»„ä»¶ä½¿ç”¨\nfunction Form() {\n  const inputRef = useRef();\n\n  const handleSubmit = () => {\n    const value = inputRef.current.getValue();\n    console.log(value);\n    inputRef.current.clear();\n  };\n\n  return (\n    <div>\n      <CustomInput ref={inputRef} />\n      <button onClick={handleSubmit}>æäº¤</button>\n    </div>\n  );\n}\n```\n\n### 4.2. æ¡ˆä¾‹2ï¼šå¤æ‚åŠ¨ç”»æ§åˆ¶\n\n```javascript\nconst AnimatedComponent = forwardRef((props, ref) => {\n  const elementRef = useRef();\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  useImperativeHandle(ref, () => ({\n    play: () => {\n      setIsPlaying(true);\n      elementRef.current.classList.add('animate');\n    },\n    pause: () => {\n      setIsPlaying(false);\n      elementRef.current.classList.remove('animate');\n    },\n    reset: () => {\n      setIsPlaying(false);\n      elementRef.current.classList.remove('animate');\n      elementRef.current.style.transform = 'translateX(0)';\n    },\n    isPlaying: () => isPlaying\n  }));\n\n  return <div ref={elementRef}>{props.children}</div>;\n});\n```\n\n### 4.3. æ¡ˆä¾‹3ï¼šæ¨¡æ€æ¡†æ§åˆ¶\n\n```javascript\nconst Modal = forwardRef((props, ref) => {\n  const [isVisible, setIsVisible] = useState(false);\n  const [content, setContent] = useState('');\n\n  useImperativeHandle(ref, () => ({\n    open: (modalContent) => {\n      setContent(modalContent);\n      setIsVisible(true);\n    },\n    close: () => {\n      setIsVisible(false);\n    },\n    updateContent: (newContent) => {\n      setContent(newContent);\n    }\n  }));\n\n  if (!isVisible) return null;\n\n  return (\n    <div className=\"modal\">\n      <div className=\"modal-content\">\n        {content}\n        <button onClick={() => ref.current.close()}>å…³é—­</button>\n      </div>\n    </div>\n  );\n});\n```\n\n## 5. ä¸å…¶ä»–ç‰¹æ€§çš„é…åˆ\n\n1. ä¸ `forwardRef` é…åˆ\n   - å¿…é¡»é…åˆä½¿ç”¨\n   - ä¼ é€’ ref å¯¹è±¡\n   - å¤„ç† ref è½¬å‘\n2. ä¸ `useRef` é…åˆ\n   - å†…éƒ¨çŠ¶æ€ç®¡ç†\n   - DOM å¼•ç”¨\n   - å€¼çš„æŒä¹…åŒ– \n\n## 6. ä¼˜åŠ¿å’Œå±€é™\n\n### 6.1. ä¼˜åŠ¿\n\nä½¿ç”¨Â `useImperativeHandle`å¯ä»¥å¸¦æ¥çš„å¥½å¤„\n\n- **æ›´å¥½çš„å°è£…**ï¼šä½ å¯ä»¥åªæš´éœ²ä½ æƒ³è®©çˆ¶ç»„ä»¶è®¿é—®çš„ç‰¹å®šæ–¹æ³•æˆ–å±æ€§ã€‚\n- **æ›´å¤šçš„æ§åˆ¶**ï¼šä½ å¯ä»¥ç²¾ç¡®æ§åˆ¶ç»„ä»¶çš„è¡Œä¸ºï¼Œè€Œä¸æ˜¯ä¾èµ–äºçŠ¶æ€æˆ–å±æ€§çš„å˜åŒ–ã€‚\n\n### 6.2. é£é™©\n\nå®ƒçš„å±€é™æ€§åŠæ½œåœ¨é£é™©\n\n- **è¿‡åº¦ä½¿ç”¨**ï¼šè¿‡åº¦ä¾èµ–`useImperativeHandle`å¯èƒ½ä¼šå¯¼è‡´ä»£ç éš¾ä»¥ç†è§£å’Œç»´æŠ¤ã€‚\n- **å¯èƒ½å¼•èµ·ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“**ï¼šå¦‚æœä¾èµ–äºå¤–éƒ¨å˜é‡æˆ–çŠ¶æ€ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸å¿…è¦çš„ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ä½¿ç”¨`useCallback`æˆ–`useMemo`å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘è¿™æ ·çš„é‡æ–°æ¸²æŸ“ã€‚\n## 7. å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ\n\n### 7.1. ref ä¸ºç©ºçš„é—®é¢˜\n\n```javascript hl:11\n// é”™è¯¯ç¤ºä¾‹\nconst Component = forwardRef((props, ref) => {\n  useImperativeHandle(ref, () => {\n    // ç›´æ¥è¿”å›å¯¹è±¡\n  });\n});\n\n// æ­£ç¡®ç¤ºä¾‹\nconst Component = forwardRef((props, ref) => {\n  useImperativeHandle(ref, () => ({\n    // è¿”å›æ–¹æ³•å¯¹è±¡\n  }));\n});\n```\n\n### 7.2. ä¾èµ–é¡¹æ›´æ–°é—®é¢˜\n\n```javascript hl:4,11\n// é”™è¯¯ç¤ºä¾‹\nuseImperativeHandle(ref, () => ({\n  someMethod: () => {\n    // ä½¿ç”¨äº†å¤–éƒ¨å˜é‡ä½†æ²¡æœ‰æ·»åŠ ä¾èµ–\n  }\n}));\n\n// æ­£ç¡®ç¤ºä¾‹\nuseImperativeHandle(ref, () => ({\n  someMethod: () => {\n    // ä½¿ç”¨å¤–éƒ¨å˜é‡\n  }\n}), [dependency1, dependency2]);\n```\n\n","335bc1497d2755db91c1a1e0bf44a3ba":"\n# ä½¿ç”¨ useSyncExternalStore æ¥è¿æ¥å¤–éƒ¨çŠ¶æ€å’Œ React ç»„ä»¶\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å®šä¹‰å’ŒåŸºæœ¬æ¦‚å¿µ \n\n### 1.1. èƒŒæ™¯\n\n- éšç€ React v18 å¼•å…¥å¹¶å‘æ¨¡å¼ï¼ŒReact ä¹Ÿæ”¯æŒäº†åœ¨å¤„ç†å¤šä¸ªä»»åŠ¡æ—¶è¿›è¡Œä¼˜å…ˆçº§è°ƒæ•´ï¼Œè¿™æ„å‘³ç€ React å¯ä»¥â€œæš‚åœâ€ä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„æ¸²æŸ“ä»»åŠ¡ï¼Œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªæ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œç„¶åå†å›åˆ°åŸæ¥çš„ä»»åŠ¡ï¼Œè¿™ä½¿å¾—ç”¨æˆ·ç•Œé¢å“åº”æ›´å¿«ã€‚\n- ä½†ä¹Ÿå¸¦æ¥äº†æ–°çš„æŒ‘æˆ˜ï¼Œå°¤å…¶æ˜¯åœ¨çŠ¶æ€ç®¡ç†æ–¹é¢â€”â€”çŠ¶æ€ç®¡ç†åº“éœ€è¦**ç¡®ä¿å®ƒä»¬æä¾›çš„çŠ¶æ€å§‹ç»ˆæ˜¯æœ€æ–°çš„å’ŒåŒæ­¥çš„**ã€‚\n- `useSyncExternalStore`å°±æ˜¯ä¸ºè§£å†³å¹¶å‘æ¨¡å¼ä¸‹çš„çŠ¶æ€åŒæ­¥é—®é¢˜è€Œæ¨å‡ºçš„â€”â€”å®ƒæä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œç¡®ä¿å³ä½¿åœ¨å¹¶å‘æ›´æ–°çš„æƒ…å†µä¸‹ï¼Œç»„ä»¶ä¹Ÿå¯ä»¥åŒæ­¥åœ°ä»å¤–éƒ¨å­˜å‚¨ä¸­è·å–æ•°æ®ã€‚\n- useSyncExternalStore æ˜¯ React 18 å¼•å…¥çš„ä¸€ä¸ª Hookï¼Œå®ƒå…è®¸ä½ **è®¢é˜…å¤–éƒ¨æ•°æ®æº**ï¼Œå¹¶ç¡®ä¿åœ¨`å¹¶å‘æ¸²æŸ“ç‰¹æ€§`ä¸‹æ•°æ®çš„ä¸€è‡´æ€§ã€‚\n- è¿™ä¸ª Hook ä¸»è¦ç”¨äºè¿æ¥å¤–éƒ¨çŠ¶æ€ å’Œ React ç»„ä»¶\n\n### 1.2. åŸºæœ¬è¯­æ³•\n\n```javascript\nconst snapshot = useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot?)\n```\n\n### 1.3. å‚æ•°è¯´æ˜\n\nuseSyncExternalStore å®é™…ä¸Šæ˜¯ä¸€ä¸ªç”¨äºå®‰å…¨åœ°è¿æ¥`å¤–éƒ¨æ•°æ®æº`å’Œ `Reactç»„ä»¶`çš„æ¡¥ï¼Œå¦‚ä¸‹å›¾\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031.png)\n\n- subscribeï¼šè®¢é˜…å‡½æ•°ï¼Œå½“**å­˜å‚¨æ›´æ”¹æ—¶**è°ƒç”¨å›è°ƒ\n\t- å…¶ä½œç”¨æ˜¯è®¢é˜…å¤–éƒ¨å­˜å‚¨çš„å˜åŒ–ã€‚å½“å¤–éƒ¨å­˜å‚¨å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒåº”è¯¥è°ƒç”¨ä¼ å…¥çš„Â `callback`\n\t- è¿™ä¸ªå‡½æ•°åº”è¯¥`è¿”å›`ä¸€ä¸ªå–æ¶ˆè®¢é˜…çš„å‡½æ•°ã€‚è¿™æ ·ï¼Œå½“ç»„ä»¶è¢«å¸è½½æˆ–è®¢é˜…è¢«é‡æ–°åˆ›å»ºæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿æ²¡æœ‰å†…å­˜æ³„æ¼æˆ–æ— æ•ˆçš„å›è°ƒè°ƒç”¨\n- getSnapshotï¼šè¿”å›**å­˜å‚¨**å½“å‰å€¼çš„å‡½æ•°\n\t- å…¶ä½œç”¨æ˜¯ä»å¤–éƒ¨å­˜å‚¨ä¸­è·å–å½“å‰çš„æ•°æ®å¿«ç…§\n\t- æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œ`useSyncExternalStore`éƒ½ä¼šè°ƒç”¨æ­¤å‡½æ•°æ¥è¯»å–å½“å‰çš„æ•°æ®çŠ¶æ€\n- getServerSnapshotï¼šï¼ˆå¯é€‰ï¼‰è¿”å›æœåŠ¡å™¨ç«¯åˆå§‹å€¼çš„å‡½æ•°\n\t- ä¸Â `getSnapshot`Â ç±»ä¼¼ï¼Œä½†å®ƒæ˜¯ä¸ºæœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰æˆ–é¢„æ¸²æŸ“æ—¶ä½¿ç”¨çš„ã€‚\n\t- åœ¨å®¢æˆ·ç«¯é¦–æ¬¡æ¸²æŸ“æˆ– hydrate æ“ä½œæœŸé—´ï¼ŒReact ä¼šä½¿ç”¨æ­¤å‡½æ•°è€Œä¸æ˜¯`getSnapshot`æ¥è¯»å–æ•°æ®çš„åˆå§‹çŠ¶æ€ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿åœ¨æœåŠ¡ç«¯æ¸²æŸ“çš„å†…å®¹ä¸å®¢æˆ·ç«¯çš„åˆå§‹å†…å®¹åŒ¹é…ï¼Œä»è€Œé¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“å’Œé—ªçƒã€‚\n\t- å¦‚æœä½ çš„åº”ç”¨ä¸æ¶‰åŠæœåŠ¡ç«¯æ¸²æŸ“ï¼Œé‚£ä¹ˆä¸éœ€è¦è¿™ä¸ªå‚æ•°ã€‚\n\n## 2. ä¸»è¦ä½¿ç”¨åœºæ™¯\n\n1. å¤–éƒ¨çŠ¶æ€ç®¡ç†\n   - è®¢é˜…æµè§ˆå™¨ APIï¼ˆå¦‚ localStorageã€window sizeï¼‰\n   - é›†æˆç¬¬ä¸‰æ–¹çŠ¶æ€ç®¡ç†åº“\n   - è‡ªå®šä¹‰çŠ¶æ€ç®¡ç†ç³»ç»Ÿ\n2. å¹¶å‘æ¸²æŸ“å®‰å…¨\n   - éœ€è¦åœ¨å¹¶å‘ç‰¹æ€§ä¸‹ä¿æŒæ•°æ®ä¸€è‡´æ€§\n   - å¤„ç†å¤–éƒ¨æ•°æ®æºçš„è®¢é˜…\n   - ç¡®ä¿æ¸²æŸ“æœŸé—´æ•°æ®ä¸å˜ \n\n## 3. è¯¦ç»†ä½¿ç”¨æ¡ˆä¾‹\n\n### 3.1. æ¡ˆä¾‹1ï¼šç›‘å¬çª—å£å¤§å°\n\n```javascript\nfunction useWindowSize() {\n  const getSnapshot = () => ({\n    width: window.innerWidth,\n    height: window.innerHeight\n  });\n\n  const subscribe = (callback) => {\n    window.addEventListener('resize', callback);\n    return () => window.removeEventListener('resize', callback);\n  };\n\n  return useSyncExternalStore(subscribe, getSnapshot);\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nfunction WindowSizeComponent() {\n  const size = useWindowSize();\n  \n  return (\n    <div>\n      Current window size: {size.width} x {size.height}\n    </div>\n  );\n}\n```\n\n### 3.2. æ¡ˆä¾‹2ï¼šè‡ªå®šä¹‰å­˜å‚¨\n\n```javascript\nconst createStore = (initialState) => {\n  let state = initialState;\n  const listeners = new Set();\n\n  return {\n    subscribe(listener) {\n      listeners.add(listener);\n      return () => listeners.delete(listener);\n    },\n    getSnapshot() {\n      return state;\n    },\n    setState(newState) {\n      state = typeof newState === 'function' ? newState(state) : newState;\n      listeners.forEach(listener => listener());\n    }\n  };\n};\n\nconst store = createStore({ count: 0 });\n\nfunction Counter() {\n  const state = useSyncExternalStore(\n    store.subscribe,\n    store.getSnapshot\n  );\n\n  return (\n    <div>\n      Count: {state.count}\n      <button onClick={() => store.setState(s => ({ count: s.count + 1 }))}>\n        Increment\n      </button>\n    </div>\n  );\n}\n```\n\n### 3.3. æ¡ˆä¾‹3ï¼šlocalStorage åŒæ­¥\n\n```javascript\nfunction useLocalStorage(key, initialValue) {\n  const getSnapshot = () => {\n    try {\n      const item = window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.error(error);\n      return initialValue;\n    }\n  };\n\n  const subscribe = (callback) => {\n    window.addEventListener('storage', callback);\n    return () => window.removeEventListener('storage', callback);\n  };\n\n  const value = useSyncExternalStore(subscribe, getSnapshot);\n\n  const setValue = (newValue) => {\n    try {\n      const valueToStore = newValue instanceof Function ? newValue(value) : newValue;\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n      window.dispatchEvent(new Event('storage'));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return [value, setValue];\n}\n```\n\n## 4. æ³¨æ„äº‹é¡¹å’Œæœ€ä½³å®è·µ\n\n### 4.1. getSnapshot åº”è¯¥è¿”å›ä¸å¯å˜çš„å€¼\n\n`useSyncExternalStore`ä¾èµ–`getSnapshot`å‡½æ•°è¿”å›çš„å€¼æ¥å†³å®šæ˜¯å¦é‡æ–°æ¸²æŸ“\n\n```javascript hl:2,10\nfunction getSnapshot() {\n  // ğŸ”´ getSnapshot ä¸è¦æ€»æ˜¯è¿”å›ä¸åŒçš„å¯¹è±¡\n  return {\n    todos: myStore.todos\n  };\n}\n\n\nfunction getSnapshot() {\n  // âœ… ä½ å¯ä»¥è¿”å›ä¸å¯å˜æ•°æ®\n  return myStore.todos;\n}\n```\n### 4.2. é¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶åˆ›å»ºæ–°çš„è®¢é˜…å‡½æ•°ï¼Œæ‰€ä»¥ `subscribe`ä¸è¦æ”¾åœ¨ç»„ä»¶å†…å®šä¹‰\n\næ­£ç¡®çš„åšæ³•æ˜¯æŠŠÂ `subscribe`Â å‡½æ•°ç§»åˆ°ç»„ä»¶å¤–éƒ¨ï¼Œè¿™æ ·å®ƒåœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­éƒ½ä¿æŒä¸å˜ï¼›æˆ–è€…ä½¿ç”¨Â `useCallback`Â é’©å­æ¥ç¼“å­˜Â `subscribe`Â å‡½æ•°ã€‚\n\n### 4.3. æœåŠ¡å™¨ç«¯æ¸²æŸ“\n\n```javascript\nconst useStore = (store) => {\n  return useSyncExternalStore(\n    store.subscribe,\n    store.getSnapshot,\n    // æœåŠ¡å™¨ç«¯å¿«ç…§\n    () => store.getServerSnapshot()\n  );\n};\n```\n\n### 4.4. è®°å¾—é”™è¯¯å¤„ç†\n\n```javascript\nconst getSnapshot = () => {\n  try {\n    return someExternalAPI.getValue();\n  } catch (error) {\n    console.error('Failed to get snapshot:', error);\n    return defaultValue;\n  }\n};\n```\n\n## 5. æœ€å\n\nè™½ç„¶`useImperativeHandle`å¯¹äºåº”ç”¨å¼€å‘è€…æ¥è¯´ä¸æ˜¯å¿…è¦çš„ï¼Œä½†å¦‚æœä½ æƒ³æ‹“å±•å¯¹ React ç”Ÿæ€åœˆçš„è®¤è¯†ï¼Œä¾ç„¶æœ‰å¿…è¦äº†è§£ä¸€ä¸‹`useImperativeHandle`çš„ç”¨æ³•å’Œä½¿ç”¨åœºæ™¯ï¼Œå› ä¸ºå®ƒèƒ½å¸®åŠ©ä½ æœªæ¥æ›´å¥½åœ°ç†è§£ä¼˜ç§€çš„ç¬¬ä¸‰æ–¹åº“çš„è®¾è®¡ã€‚","fe06b1ec374b53bdaea38f7f47235d6c":"\n# ä½¿ç”¨ useId ç”Ÿæˆå”¯ä¸€çš„ ID æ ‡è¯†ç¬¦\n\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‰ç½®çŸ¥è¯†ï¼šReact çš„æœåŠ¡ç«¯æ¸²æŸ“å’Œå®¢æˆ·ç«¯æ¸²æŸ“ä¹‹é—´çš„å…³ç³» \n\nå½“ä½ çœ‹åˆ°ä¸€ä¸ªæœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨ï¼Œå®ƒçš„æ¸²æŸ“è¿‡ç¨‹ä¼šæ˜¯è¿™æ ·ï¼š\n- æœåŠ¡ç«¯ä¼šå…ˆç”Ÿæˆ HTMLï¼Œç„¶åå°†è¿™ä¸ª HTML å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œåœ¨å®¢æˆ·ç«¯ï¼ŒReact ä¼šè¿›è¡Œä¸€ä¸ªå«åš `hydration` çš„è¿‡ç¨‹ï¼Œå³å°†æœåŠ¡å™¨ç«¯ç”Ÿæˆçš„ HTML å’Œå®¢æˆ·ç«¯çš„ DOM è¿›è¡ŒåŒ¹é…ï¼Œå¹¶ç”Ÿæˆæœ€ç»ˆçš„ HTML\n- å¦‚æœåœ¨ `hydration` è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ç”Ÿæˆçš„ ID ä¸ä¸€è‡´ï¼Œï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´ hydration å¤±è´¥\n\n## 2. å®šä¹‰å’ŒåŸºæœ¬æ¦‚å¿µ\n\nuseId æ˜¯ React 18 å¼•å…¥çš„ä¸€ä¸ªæ–° Hookï¼Œç”¨äºç”Ÿæˆå”¯ä¸€çš„ ID æ ‡è¯†ç¬¦ã€‚å®ƒä¸»è¦ç”¨äºç”Ÿæˆå¯è®¿é—®æ€§å±æ€§çš„å”¯ä¸€ IDï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å…³è” HTML å…ƒç´ çš„åœºæ™¯ä¸­ã€‚\n\n```javascript\nconst id = useId()\n```\n\nè¿™ä¸ª Hook çš„ç‰¹ç‚¹ï¼š\n\n- è¿”å›ä¸€ä¸ªå”¯ä¸€çš„å­—ç¬¦ä¸² ID\n- åœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯æ¸²æŸ“æ—¶ä¿æŒä¸€è‡´\n- åœ¨åŒä¸€ä¸ªç»„ä»¶çš„å¤šä¸ªå®ä¾‹ä¸­ä¼šç”Ÿæˆä¸åŒçš„ ID\n- ä¸éœ€è¦ä»»ä½•å‚æ•°\n\n## 3. Â ID ç”Ÿæˆè§„åˆ™\n\n```javascript\n// React å†…éƒ¨å®ç°ï¼ˆç®€åŒ–ç‰ˆï¼‰\nclass IdGenerator {\n  constructor() {\n    this.clientId = 0;    // å®¢æˆ·ç«¯è®¡æ•°å™¨\n    this.serverId = 0;    // æœåŠ¡ç«¯è®¡æ•°å™¨\n  }\n\n  next() {\n    // åœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ä½¿ç”¨ç›¸åŒçš„è®¡æ•°é€»è¾‘\n    const id = this.isServer ? this.serverId++ : this.clientId++;\n    return `:r${id}:`;\n  }\n}\n\n```\n## 4. React å†…éƒ¨æ°´åˆè¿‡ç¨‹ï¼ˆç®€åŒ–ç¤ºæ„ï¼‰\n\n```javascript\n// React å†…éƒ¨æ°´åˆè¿‡ç¨‹ï¼ˆç®€åŒ–ç¤ºæ„ï¼‰\nfunction hydrateRoot(container, element) {\n  // 1. è·å–æœåŠ¡å™¨æ¸²æŸ“çš„ HTML\n  const serverHTML = container.innerHTML;\n\n  // 2. åˆ›å»ºæ–°çš„ React æ ‘\n  const root = createRoot(container);\n\n  // 3. å¼€å§‹æ°´åˆè¿‡ç¨‹\n  root.hydrate(element, {\n    onHydrationMismatch: (serverNode, clientNode) => {\n      // å¦‚æœå‘ç°ä¸åŒ¹é…ï¼Œä¼šè§¦å‘è­¦å‘Š\n      if (serverNode.id !== clientNode.id) {\n        console.error(\n          \"Hydration mismatch: Server generated ID\",\n          serverNode.id,\n          \"but client generated\",\n          clientNode.id,\n        );\n      }\n    },\n  });\n}\n\n\n```\n\n## 5. å¦‚ä½•ä¿è¯SSRå’ŒCSRå°±ä¼šç”Ÿæˆå®Œå…¨ç›¸åŒçš„ ID åºåˆ—\n\n1. æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä½¿ç”¨ç›¸åŒçš„éå†é¡ºåº\n2. ç›¸åŒä½ç½®çš„ useId è°ƒç”¨è·å¾—ç›¸åŒçš„æ§½ä½\n3. ç›¸åŒæ§½ä½ç”Ÿæˆç›¸åŒçš„ ID\n4. æ°´åˆè¿‡ç¨‹ä¸­å¯ä»¥å®Œç¾åŒ¹é…\n\n```jsx\n// 1. ç»„ä»¶å®šä¹‰\nfunction Layout() {\n  const id = useId(); // slot: \"Layout\"\n  return <Main />;\n}\n\nfunction Main() {\n  const id = useId(); // slot: \"Layout.Main\"\n  return <Form />;\n}\n\nfunction Form() {\n  const id = useId(); // slot: \"Layout.Main.Form\"\n  return (\n    <input id={`${id}-input`} />\n  );\n}\n\n// 2. æ¸²æŸ“è¿‡ç¨‹\nconst app = (\n  <Layout>\n    <Main>\n      <Form />\n    </Main>\n  </Layout>\n);\n\n// 3. æœåŠ¡ç«¯æ¸²æŸ“\n// - éå†ç»„ä»¶æ ‘\n// - ä¸ºæ¯ä¸ª useId è°ƒç”¨ç”Ÿæˆæ§½ä½\n// - ç”Ÿæˆ HTML\n\n// 4. å®¢æˆ·ç«¯æ°´åˆ\n// - ä½¿ç”¨ç›¸åŒçš„éå†é¡ºåº\n// - åŒ¹é…å·²æœ‰çš„ HTML\n// - å¤ç”¨ç›¸åŒçš„ ID\n\n```\n\n## 6. æ³¨æ„äº‹é¡¹\n\n### 6.1. è°ƒç”¨ä½ç½®é™åˆ¶\n\n- åªèƒ½åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨\n- ä¸èƒ½åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨\n   ```javascript\n   // âŒ é”™è¯¯ç¤ºä¾‹\n   if (condition) {\n     const id = useId();\n   }\n\n   // âœ… æ­£ç¡®ç¤ºä¾‹\n   const id = useId();\n   if (condition) {\n     // ä½¿ç”¨ id\n   }\n   ```\n\n### 6.2. ä¸è¦ç”¨äºåˆ—è¡¨ key\n\n   - useId ä¸æ˜¯ä¸ºç”Ÿæˆåˆ—è¡¨ key è€Œè®¾è®¡çš„\n   - åˆ—è¡¨ key åº”è¯¥ä½¿ç”¨æ•°æ®çš„å”¯ä¸€æ ‡è¯†ç¬¦\n   ```javascript\n   // âŒ é”™è¯¯ç¤ºä¾‹\n   items.map(() => {\n     const id = useId();\n     return <li key={id}>...</li>\n   });\n\n   // âœ… æ­£ç¡®ç¤ºä¾‹\n   items.map((item) => (\n     <li key={item.id}>...</li>\n   ));\n   ```\n\n### 6.3. å‰ç¼€ä½¿ç”¨\n   - å¯ä»¥æ·»åŠ å‰ç¼€æ¥é¿å…å‘½åå†²çª\n   ```javascript\n   const id = useId();\n   const prefix = 'app';\n   const elementId = `${prefix}-${id}`;\n   ```\n\n### 6.4. æœåŠ¡å™¨ç«¯æ¸²æŸ“æ³¨æ„äº‹é¡¹\n\n   - ç¡®ä¿æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä½¿ç”¨ç›¸åŒçš„ React ç‰ˆæœ¬\n   - ä¸è¦æ‰‹åŠ¨æ„é€  ID å­—ç¬¦ä¸²\n   - ä½¿ç”¨ç›¸åŒçš„ç»„ä»¶ç»“æ„\n","69a321159a3555309359703c5bf73011":"\n# æŠŠ useDebugValue åŠ å…¥ä½ çš„Reactè°ƒè¯•å·¥å…·åº“\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. useDebugValue åŸºæœ¬ä»‹ç» \n\nuseDebugValue æ˜¯ä¸€ä¸ªç”¨äºåœ¨ **React DevTools** ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰ hook æ ‡ç­¾çš„ Hookã€‚å®ƒçš„ä¸»è¦ç›®çš„æ˜¯å¸®åŠ©å¼€å‘è€…åœ¨è°ƒè¯•æ—¶æ›´å¥½åœ°ç†è§£è‡ªå®šä¹‰ Hook çš„å†…éƒ¨çŠ¶æ€ã€‚\n\n### 1.1. åŸºæœ¬è¯­æ³•\n\n```javascript\nuseDebugValue(value, formatFn?)\n```\n\nå‚æ•°è¯´æ˜ï¼š\n- value: è¦æ˜¾ç¤ºçš„è°ƒè¯•å€¼\n- formatFn: (å¯é€‰) æ ¼å¼åŒ–å‡½æ•°ï¼Œç”¨äºæ ¼å¼åŒ–è°ƒè¯•å€¼\n\n## 2. ä½¿ç”¨æ–¹æ³•\n\n### 2.1. åŸºæœ¬ä½¿ç”¨\n\n```javascript\nfunction useCustomHook(initialValue) {\n  const [value, setValue] = useState(initialValue);\n  \n  // åœ¨ DevTools ä¸­æ˜¾ç¤ºå½“å‰å€¼\n  useDebugValue(value);\n  \n  return [value, setValue];\n}\n\n// ä½¿ç”¨è¿™ä¸ª hook\nfunction MyComponent() {\n  const [value, setValue] = useCustomHook('initial');\n  return <div>{value}</div>;\n}\n```\n\n### 2.2. ä½¿ç”¨æ ¼å¼åŒ–å‡½æ•°\n\n```javascript\nfunction useUserStatus(userId) {\n  const [isOnline, setIsOnline] = useState(false);\n  \n  useDebugValue(isOnline, (online) => \n    online ? 'Online' : 'Offline'\n  );\n  \n  return isOnline;\n}\n```\n\n### 2.3. å¤æ‚å¯¹è±¡çš„æ ¼å¼åŒ–\n\n```javascript\nfunction useDataFetching(url) {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  \n  useDebugValue(\n    { data, loading, error },\n    state => ({\n      status: state.loading ? 'loading' : state.error ? 'error' : 'success',\n      dataLength: state.data?.length || 0,\n      errorMessage: state.error?.message\n    })\n  );\n  \n  useEffect(() => {\n    fetch(url)\n      .then(res => res.json())\n      .then(data => {\n        setData(data);\n        setLoading(false);\n      })\n      .catch(err => {\n        setError(err);\n        setLoading(false);\n      });\n  }, [url]);\n  \n  return { data, loading, error };\n}\n```\n\n## 3. å®é™…ç¤ºä¾‹ï¼šå¸¦å›¾\n\n```javascript\nexport function useOnlineStatus() {\n  const isOnline = useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot);\n  // useDebugValue\n  useDebugValue(isOnline ? \"âœ… Online(useDebugValue)\" : \"âŒ Disconnected(useDebugValue)\")\n  return isOnline;\n}\n```\n\n![undefined](#)","40a82f96b40e5552a0a171aebddb448f":"\n# è¯´è¯´ React 19 çš„æœ€æ–°çš„è¿›å±•\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. use hook \n\n- ä¸åŒäºæ‰€æœ‰å…¶ä»–çš„ React é’©å­ï¼Œ`use`Â å¯ä»¥åœ¨å¾ªç¯å’Œæ¡ä»¶è¯­å¥ä¸­è°ƒç”¨ï¼Œæ¯”å¦‚Â `if`\n\n### 1.1. use(Context)\n\n```tsx hl:4\nimport { use } from \"react\";\nfunction HorizontalRule({ show }) {\n  if (show) {\n    const theme = use(ThemeContext);\n    return <hr className={theme} />;\n  }\n  return false;\n}\n```\n### 1.2. use(Promise)\n\n```jsx\nimport { use } from 'react';\n\nfunction MessageComponent({ messagePromise }) {\n    const message = use(messagePromise);\n    // ...\n}\n\n```\n\n## 2. æ–°æŒ‡ä»¤\n\n- `'use client'`Â æ ‡è®°ä»…åœ¨å®¢æˆ·ç«¯è¿è¡Œçš„ä»£ç ã€‚\n- `'use server'`Â æ ‡è®°å¯ä»¥ä»å®¢æˆ·ç«¯ä»£ç è°ƒç”¨çš„æœåŠ¡å™¨ç«¯å‡½æ•°\n\n## 3. useActionState\n\nè¿™ä¸ªé’©å­ç®€åŒ–äº†è¡¨å•çŠ¶æ€å’Œè¡¨å•æäº¤çš„ç®¡ç†ã€‚é€šè¿‡ä½¿ç”¨ Actionsï¼Œå®ƒæ•è·è¡¨å•è¾“å…¥æ•°æ®ï¼Œå¤„ç†éªŒè¯å’Œé”™è¯¯çŠ¶æ€ï¼Œå‡å°‘äº†è‡ªå®šä¹‰çŠ¶æ€ç®¡ç†é€»è¾‘çš„éœ€æ±‚ã€‚è¿™ä¸ªé’©å­è¿˜æš´éœ²äº†ä¸€ä¸ªçŠ¶æ€ï¼Œå¯ä»¥åœ¨æ‰§è¡Œæ“ä½œæ—¶æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨\n\n```jsx hl:9\nimport { useActionState } from \"react\";\nimport { createUser } from \"./actions\";\n\nconst initialState = {\n  message: \"\",\n};\n\nexport function Signup() {\n  const [state, formAction, pending] = useActionState(createUser, initialState);\n\n  return (\n    <form action={formAction}>\n      <label htmlFor=\"email\">Email</label>\n      <input type=\"text\" id=\"email\" name=\"email\" required />\n      {/* ... */}\n      {state?.message && <p aria-live=\"polite\">{state.message}</p>}\n      <button aria-disabled={pending} type=\"submit\">\n        {pending ? \"Submitting...\" : \"Sign up\"}\n      </button>\n    </form>\n  );\n}\n\n```\n\n## 4. useFormStatus\n\nè¿™ä¸ªé’©å­ç®¡ç†æœ€åä¸€æ¬¡è¡¨å•æäº¤çš„çŠ¶æ€ï¼Œå¿…é¡»åœ¨ä¸€ä¸ªä¹Ÿåœ¨è¡¨å•å†…çš„ç»„ä»¶ä¸­è°ƒç”¨\n\n```tsx hl:1\nimport { useFormStatus } from \"react-dom\";\nimport action from \"./actions\";\n\nfunction Submit() {\n  const status = useFormStatus();\n  return <button disabled={status.pending}>Submit</button>;\n}\n\nexport default function App() {\n  return (\n    <form action={action}>\n      <Submit />\n    </form>\n  );\n}\n\n```\n\n## 5. useOptimistic ä¹è§‚æ›´æ–°\n\næ˜¯ä¸€ç§åœ¨å‰ç«¯å¼€å‘ä¸­`å¸¸ç”¨çš„å¤„ç†å¼‚æ­¥æ“ä½œåé¦ˆçš„ç­–ç•¥`ã€‚\n\nå®ƒåŸºäºä¸€ç§â€œä¹è§‚â€çš„å‡è®¾ï¼šå³å‡è®¾æ— è®ºæˆ‘ä»¬å‘æœåŠ¡å™¨å‘é€ä»€ä¹ˆè¯·æ±‚ï¼Œè¿™äº›æ“ä½œéƒ½å°†æˆåŠŸæ‰§è¡Œï¼Œå› æ­¤åœ¨å¾—åˆ°æœåŠ¡å™¨å“åº”ä¹‹å‰ï¼Œæˆ‘ä»¬å°±æå‰åœ¨ç”¨æˆ·ç•Œé¢ä¸Šæ¸²æŸ“è¿™äº›æ”¹å˜ã€‚\n\nä½¿ç”¨åœºæ™¯ï¼šç‚¹èµã€è¯„è®ºã€ä»»åŠ¡æ·»åŠ ç¼–è¾‘ç­‰ã€‚\n\nuseOptimistic ä¼šåœ¨å¼‚æ­¥æ“ä½œè¿›è¡Œæ—¶å…ˆæ¸²æŸ“é¢„æœŸçš„ç»“æœï¼Œç­‰åˆ°å¼‚æ­¥æ“ä½œå®Œæˆï¼ŒçŠ¶æ€æ›´æ–°åï¼Œå†æ¸²æŸ“çœŸå®çš„è¿”å›ç»“æœï¼ˆæ— è®ºæˆåŠŸå’Œå¤±è´¥ï¼‰\n\n## 6. é¢„åŠ è½½èµ„æº\n\n```javascript\n// React code\nimport { prefetchDNS, preconnect, preload, preinit} from \"react-dom\";\n\nfunction MyComponent() {\n  preinit(\"https://.../path/to/some/script.js\", { as: \"script\" });\n  preload(\"https://.../path/to/some/font.woff\", { as: \"font\" });\n  preload(\"https://.../path/to/some/stylesheet.css\", { as: \"style\" });\n  prefetchDNS(\"https://...\");\n  preconnect(\"https://...\");\n}\n```\n\n## 7. æ ·å¼åŠ è½½æ”¯æŒ\n\n```javascript hl:4\nfunction ComponentOne() {\n  return (\n    <Suspense fallback=\"loading...\">\n      <link rel=\"stylesheet\" href=\"one\" precedence=\"default\" />\n      <link rel=\"stylesheet\" href=\"two\" precedence=\"high\" />\n      <article>...</article>\n    </Suspense>\n  );\n}\n\nfunction ComponentTwo() {\n  return (\n    <div>\n      <p>...</p>\n      {/* Stylesheet \"three\" below will be inserted between \"one\" and \"two\" */}\n      <link rel=\"stylesheet\" href=\"three\" precedence=\"default\" />\n    </div>\n  );\n}\n\n```\n\n## 8. å¼‚æ­¥è„šæœ¬æ”¯æŒ\n\n```tsx hl:4\nfunction Component() {\n  return (\n    <div>\n      <script async={true} src=\"...\" />\n      // ...\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <html>\n      <body>\n        <Component>// ...</Component> // Won't duplicate script in the DOM\n      </body>\n    </html>\n  );\n}\n\n```\n\n## 9. æ›´å¥½çš„æ”¯æŒ web Componets \n\nè‡ªå®šä¹‰å…ƒç´ å…è®¸å¼€å‘è€…å°†è‡ªå·±çš„ HTML å…ƒç´ å®šä¹‰ä¸º Web Components è§„èŒƒçš„ä¸€éƒ¨åˆ†ã€‚\n\nåœ¨ä¹‹å‰çš„ React ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨è‡ªå®šä¹‰å…ƒç´ å¾ˆå›°éš¾ï¼Œå› ä¸º React å°†æœªè¯†åˆ«çš„å±æ€§è§†ä¸ºå±æ€§è€Œä¸æ˜¯å±æ€§ã€‚\n\n## 10. æœåŠ¡ç«¯ç»„ä»¶ï¼šSRC\n\næœåŠ¡ç«¯ç»„ä»¶å’ŒÂ `server actions`Â å°†æˆä¸ºç¨³å®šç‰¹æ€§ï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µå±äºç†Ÿæ‚‰ Next.js/Remix çš„äººå·²ç»çƒ‚ç†Ÿäºå¿ƒï¼Œè€Œä¸ç”¨ Next.js/Remix çš„äººæ ¹æœ¬ç”¨ä¸åˆ°\n\næ›´åˆ°å‚è€ƒ [40. React Server Components (RSC)](/post/9d1c160efd9751238dc492c36ed59d62.html)\n\n## 11. ref æŠ›å¼ƒ forwardRef\n\n## 12. æ”¯æŒåœ¨ React ä»£ç é‡Œç¼–å†™ document metadata\n\næ”¯æŒåœ¨ React ä»£ç é‡Œç¼–å†™ document metadataï¼Œå³åœ¨é¡µé¢ç»„ä»¶ç¼–å†™`<title>`Â `<link>`Â å’ŒÂ `<meta>`Â æ ‡ç­¾ä¼šè‡ªåŠ¨æ·»åŠ åº”ç”¨çš„Â `<head>`Â ä¸Šé¢\n\n## 13. context å¯å½“ä½œ provider\n\nä»åœ¨ React 19 å¼€å§‹ï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥å°†Â `<Context>`Â ç›´æ¥ä½œä¸º providerï¼Œè€Œä¸æ˜¯ä½¿ç”¨Â `<Context.Provider>`","ccf5104cd18450db9bab56bf2b3fad66":"\n# ä¸ºä»€ä¹ˆä¸åº”è¯¥åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­ä½¿ç”¨ Hooks\n\n`#React` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. Hooks çš„å·¥ä½œåŸç† \n\n- React Hooks ä¾èµ–äº`è°ƒç”¨é¡ºåº`æ¥ç»´æŠ¤å†…éƒ¨çŠ¶æ€\n- æ¯ä¸ªç»„ä»¶å†…éƒ¨ç»´æŠ¤ç€ä¸€ä¸ª \"`hooks é“¾è¡¨`\"\n- æ¯æ¬¡æ¸²æŸ“æ—¶ï¼ŒHooks éƒ½éœ€è¦æŒ‰ç…§å®Œå…¨ç›¸åŒçš„é¡ºåºè¢«è°ƒç”¨\n\n## 2. è§£å†³æ–¹æ¡ˆ\n\n- å°† Hook çš„è°ƒç”¨æ”¾åœ¨ç»„ä»¶çš„`æœ€é¡¶å±‚`\n- ä½¿ç”¨æ¡ä»¶æ¸²æŸ“è€Œä¸æ˜¯æ¡ä»¶å¼çš„ Hook\n- ä½¿ç”¨è‡ªå®šä¹‰ Hook å°è£…å¤æ‚é€»è¾‘\n- ä½¿ç”¨`æ•°ç»„å’Œå¯¹è±¡`å­˜å‚¨å¤šä¸ªç›¸å…³çŠ¶æ€\n\n## 3. ESLint è§„åˆ™\n\n- ä½¿ç”¨ `eslint-plugin-react-hooks` å¯ä»¥è‡ªåŠ¨æ£€æŸ¥è¿™äº›é—®é¢˜\n- è¯¥æ’ä»¶ä¼šå¼ºåˆ¶æ‰§è¡Œ Hooks çš„ä½¿ç”¨è§„åˆ™\n- æ¨èåœ¨é¡¹ç›®ä¸­é…ç½®è¿™ä¸ª ESLint æ’ä»¶\n\n## 4. ä¸ºä»€ä¹ˆè¿™ä¸ªè§„åˆ™è¿™ä¹ˆä¸¥æ ¼\n\n- ç¡®ä¿ Hook çŠ¶æ€çš„å¯é¢„æµ‹æ€§\n- ä¿è¯ç»„ä»¶çš„æ­£ç¡®æ¸²æŸ“\n- é¿å…éš¾ä»¥è°ƒè¯•çš„é—®é¢˜\n- ç»´æŠ¤ React çš„å†…éƒ¨çŠ¶æ€ç®¡ç†æœºåˆ¶\n\n## 5. æ€»ç»“\n\nä¸åœ¨å¾ªç¯ã€æ¡ä»¶å’ŒåµŒå¥—å‡½æ•°ä¸­ä½¿ç”¨ Hook çš„è§„åˆ™æ˜¯ä¸ºäº†ç¡®ä¿ Hooks åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä»¥ç›¸åŒçš„é¡ºåºè¢«è°ƒç”¨ã€‚è¿™æ˜¯ React Hooks å·¥ä½œæœºåˆ¶çš„æ ¸å¿ƒè¦æ±‚ï¼Œè¿åè¿™ä¸ªè§„åˆ™å¯èƒ½å¯¼è‡´çŠ¶æ€ç®¡ç†æ··ä¹±ã€ç»„ä»¶è¡Œä¸ºä¸å¯é¢„æµ‹ç­‰é—®é¢˜ã€‚é€šè¿‡éµå®ˆè¿™ä¸ªè§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿ç»„ä»¶çš„çŠ¶æ€ç®¡ç†å§‹ç»ˆä¿æŒæ­£ç¡®å’Œå¯é¢„æµ‹ã€‚","9d1c160efd9751238dc492c36ed59d62":"\n# React Server Components (RSC)\n\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. RSC åŸºæœ¬æ¦‚å¿µ \n\nReact Server Components å…è®¸å¼€å‘è€…ç¼–å†™åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œçš„ React ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥ï¼š\n- ç›´æ¥è®¿é—®æœåŠ¡å™¨èµ„æºï¼ˆæ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿç­‰ï¼‰\n- å‡å°‘å®¢æˆ·ç«¯ JavaScript åŒ…å¤§å°\n- ä¿æŒè‰¯å¥½çš„äº¤äº’æ€§\n\nRSC æ¯æ¬¡é¢„æ¸²æŸ“åæŠŠ HTML å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œç”±å®¢æˆ·ç«¯è¿›è¡Œæ°´åˆï¼ˆhydrateï¼‰å¹¶æ­£å¼æ¸²æŸ“ã€‚\n\nè¿™ç§åšæ³•çš„å¥½å¤„æ˜¯ï¼Œä¸€éƒ¨åˆ†åŸæœ¬è¦æ‰“åŒ…åœ¨å®¢æˆ·ç«¯ JavaScript æ–‡ä»¶é‡Œçš„ä»£ç ï¼Œç°åœ¨å¯ä»¥æ”¾åœ¨æœåŠ¡ç«¯è¿è¡Œäº†ï¼Œä»è€Œå‡è½»å®¢æˆ·ç«¯çš„è´Ÿæ‹…ï¼Œæå‡åº”ç”¨çš„æ•´ä½“æ€§èƒ½å’Œå“åº”é€Ÿåº¦ã€‚\n\nReact 19 å¸¦æ¥äº† RSC çš„ç¨³å®šç‰ˆæœ¬ï¼Œä¸»è¦ç‰¹æ€§åŒ…æ‹¬ï¼š\n\n1. ç¨³å®šæ€§æå‡ï¼šRSC åœ¨ React 19 ä¸­è¢«æ ‡è®°ä¸ºç¨³å®šç‰¹æ€§\n2. æ€§èƒ½ä¼˜åŒ–ï¼šé€šè¿‡é¢„å–æœºåˆ¶æå‡å®¢æˆ·ç«¯æ›´æ–°é€Ÿåº¦\n3. æ›´å¥½çš„å¼€å‘è€…ä½“éªŒï¼šæ”¹è¿›äº†é”™è¯¯å¤„ç†å’Œè°ƒè¯•åŠŸèƒ½\n\n## 2. ä¸€åˆ‡ä¸éœ€è¦äº¤äº’çš„å†…å®¹éƒ½åº”å½“æ”¾åˆ°æœåŠ¡ç«¯ï¼Ÿ\n\næ¯”å¦‚ markdown æ¸²æŸ“å°±å¾ˆé€‚åˆ\n\n```javascript hl:2,12\n\n// å®¢æˆ·ç«¯ç»„ä»¶æ¸²æŸ“\n\nimport marked from 'marked'; // 35.9K (11.2K gzipped)\nimport sanitizeHtml from 'sanitize-html'; // 206K (63.3K gzipped)\n\nfunction NoteWithMarkdown({text}) {\n  const html = sanitizeHtml(marked(text));\n  return (/* æ¸²æŸ“ */);\n}\n\n// æœåŠ¡å™¨ç»„ä»¶æ¸²æŸ“\n \nimport marked from 'marked'; // é›¶æ‰“åŒ…å¤§å°\nimport sanitizeHtml from 'sanitize-html'; // é›¶æ‰“åŒ…å¤§å°\n \nfunction NoteWithMarkdown({text}) {\n  // ä¸ä¹‹å‰ç›¸åŒ\n}\n```\n\n## 3. ä¸‰ç§ç»„ä»¶ç±»å‹\n\n### 3.1. æœåŠ¡å™¨ç»„ä»¶ (é»˜è®¤)\n\n```jsx\n// 1. æœåŠ¡å™¨ç»„ä»¶ (é»˜è®¤)\n// æ–‡ä»¶: app/page.js\nasync function ServerComponent() {\n  const data = await fetch('api/data');\n  return <div>{data}</div>;\n}\n```\n### 3.2. å®¢æˆ·ç«¯ç»„ä»¶\n\n```javascript\n// 2. å®¢æˆ·ç«¯ç»„ä»¶\n// æ–‡ä»¶: components/client.js\n'use client';\nfunction ClientComponent() {\n  const [count, setCount] = useState(0);\n  return <button onClick={() => setCount(count + 1)}>{count}</button>;\n}\n\n```\n\n### 3.3. å…±äº«ç»„ä»¶\n\n```tsx\n// 3. å…±äº«ç»„ä»¶\n// å¯åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½èƒ½ä½¿ç”¨çš„ç»„ä»¶\nfunction SharedComponent({ children }) {\n  return <div className=\"shared\">{children}</div>;\n}\n```\n\n### 3.4. ä¸»è¦åŒºåˆ«\n\n- æœåŠ¡å™¨ç»„ä»¶é™åˆ¶ï¼š\n\t- ä¸èƒ½ä½¿ç”¨ useStateã€useEffect ç­‰å®¢æˆ·ç«¯ hooks\n\t- ä¸èƒ½è®¿é—®æµè§ˆå™¨ API\n\t- ä¸èƒ½æ·»åŠ äº‹ä»¶å¤„ç†å™¨\n- å®¢æˆ·ç«¯ç»„ä»¶é™åˆ¶ï¼š\n\t- ä¸èƒ½ç›´æ¥å¯¼å…¥æœåŠ¡å™¨ç»„ä»¶\n\t- éœ€è¦é€šè¿‡ props æ¥æ”¶æœåŠ¡å™¨ç»„ä»¶\n- æ•°æ®è·å–æ³¨æ„äº‹é¡¹ï¼š\n\t- æœåŠ¡å™¨ç»„ä»¶ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ async/await\n\t- å®¢æˆ·ç«¯ç»„ä»¶éœ€è¦ä½¿ç”¨ä¼ ç»Ÿçš„æ•°æ®è·å–æ–¹å¼\n- æœåŠ¡å™¨ç»„ä»¶ä¸èƒ½ä½¿ç”¨åƒÂ `useState`Â å’ŒÂ `useEffect`Â è¿™æ ·çš„ React hookï¼›å®¢æˆ·ç«¯åˆ™å¯ä»¥\n- æœåŠ¡å™¨ç»„ä»¶æ— æƒè®¿é—®æµè§ˆå™¨ APIï¼›å®¢æˆ·ç«¯æœ‰å®Œæ•´çš„æµè§ˆå™¨ API æƒé™ï¼›\n- æœåŠ¡ç«¯æœ‰æƒé™ç›´æ¥è®¿é—®æœåŠ¡ç«¯ç¨‹åºå’Œ APIï¼›è€Œå®¢æˆ·ç«¯ç»„ä»¶åªèƒ½é€šè¿‡è¯·æ±‚è®¿é—®éƒ¨åˆ†ç¨‹åºã€‚\n- `UI = f(data, state)`\n\t- å®¢æˆ·ç«¯ç»„ä»¶çš„å·¥ä½œæ˜¯ UI = f(state)ï¼Œ\n\t- æœåŠ¡ç«¯ç»„ä»¶çš„å·¥ä½œæ˜¯ UI = f(data)ï¼Œ\n\t- React å¸Œæœ›ç»„åˆäºŒè€…çš„ä¼˜åŠ¿ï¼Œå®ç° UI = f(data, state)\n\n## 4. CSS å¤„ç†\n\n### 4.1. æœåŠ¡å™¨ç»„ä»¶ä¸­çš„ CSS\n\n- æ”¯æŒ CSS Modules\n- æ”¯æŒå…¨å±€ CSS å¯¼å…¥\n- æ”¯æŒ CSS-in-JS çš„é™æ€éƒ¨åˆ†\n\n### 4.2. å®¢æˆ·ç«¯ç»„ä»¶ä¸­çš„ CSS\n\n- æ”¯æŒæ‰€æœ‰ä¼ ç»Ÿçš„ CSS æ–¹æ¡ˆ\n- åŠ¨æ€æ ·å¼éœ€è¦åœ¨å®¢æˆ·ç«¯ç»„ä»¶ä¸­å¤„ç†\n\n## 5. Remix ä¸ Next.js\n\n- å½“å‰ React æ›´æ–°ç¼“æ…¢ï¼Œåè€Œæ˜¯ä¸¤ä¸ªä¸Šå±‚æ¡†æ¶Remixï¼ˆç”± Shopify èµ„åŠ©ï¼‰å’Œ Next.jsï¼ˆç”± Vercel èµ„åŠ©ï¼‰åœ¨æ¿€çƒˆç«äº‰ã€‚\n\n## 6. ç®€å•ç¤ºä¾‹\n\n```javascript\n// 1. æœåŠ¡å™¨ç«¯\nasync function BlogPost({ id }) {\n  // ç›´æ¥è®¿é—®æ•°æ®åº“\n  const post = await db.posts.findById(id);\n  const author = await db.users.findById(post.authorId);\n  \n  return (\n    <article>\n      <h1>{post.title}</h1>\n      <AuthorInfo author={author} />\n      {/* å®¢æˆ·ç«¯ç»„ä»¶å¤„ç†äº¤äº’ */}\n      <ClientLikeButton initialLikes={post.likes} />\n    </article>\n  );\n}\n\n// 2. å®¢æˆ·ç«¯ç»„ä»¶\n'use client';\nfunction ClientLikeButton({ initialLikes }) {\n  const [likes, setLikes] = useState(initialLikes);\n  \n  return (\n    <button onClick={() => setLikes(likes + 1)}>\n      Like ({likes})\n    </button>\n  );\n}\n```\n","46a9b184e4c455a8902239680c0fa982":"\n# React çš„ Diff ç®—æ³•\n\n\n\ndiffç®—æ³•çš„æœ¬è´¨å°±æ˜¯ï¼Œå¯¹æ¯” `current Filber` ä¸ JSX ç”Ÿæˆ `workInProgress Fiber`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åŸºæœ¬æµç¨‹ \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101.png)\n\n### 1.1. ç¤ºä¾‹ 1ï¼šåˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ `a`\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-1.png)\n\n### 1.2. ç¤ºä¾‹ 2ï¼š`vdom` åˆ° `çœŸå® DOM` ä»£ç ç¤ºä¾‹\n\n```javascript\n// 1. æ„å»ºè™šæ‹ŸDOM\nvar tree = el(\"div\", { id: \"container\" }, [\n  el(\"h1\", { style: \"color: blue\" }, [\"simple virtal dom\"]),\n  el(\"p\", [\"Hello, virtual-dom\"]),\n  el(\"ul\", [el(\"li\")]),\n]);\n\n// 2. é€šè¿‡è™šæ‹Ÿ DOM æ„å»ºçœŸæ­£çš„ DOM\nvar root = tree.render();\ndocument.body.appendChild(root);\n\n// åˆ é™¤äº†ä¸€ä¸ª li \n\n// 3. ç”Ÿæˆæ–°çš„è™šæ‹Ÿ DOM\nvar newTree = el(\"div\", { id: \"container\" }, [\n  el(\"h1\", { style: \"color: red\" }, [\"simple virtal dom\"]),\n  el(\"p\", [\"Hello, virtual-dom\"]),\n  el(\"ul\", [el(\"li\"), el(\"li\")]),\n]);\n\n// 4. æ¯”è¾ƒä¸¤æ£µè™šæ‹ŸDOMæ ‘çš„ä¸åŒ\nvar patches = diff(tree, newTree);\n\n// 5. åœ¨çœŸæ­£çš„DOMå…ƒç´ ä¸Šåº”ç”¨å˜æ›´\npatch(root, patches);\n```\n\n## 2. å¤æ‚åº¦ä¸ºä»€ä¹ˆæ˜¯O(n^3) åŠ æ€ä¹ˆåšåˆ° O(n^2) çš„ï¼Ÿ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-2.png)\n\nä¸‹é¢å±•å¼€è¯´è¯´\n\n### 2.1. åªåšåŒçº§æ¯”è¾ƒï¼štree diff\n\nå½“å‡ºç°èŠ‚ç‚¹`è·¨å±‚çº§çš„ç§»åŠ¨`æ—¶ï¼Œå¹¶ä¸ä¼šå‡ºç°æƒ³è±¡ä¸­ç§»åŠ¨æ“ä½œï¼Œè€Œæ˜¯`åˆ äº†é‡å»º`ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-4.png)\n\n> Web UI ä¸­ DOM èŠ‚ç‚¹è·¨å±‚çº§çš„ç§»åŠ¨æ“ä½œç‰¹åˆ«å°‘ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡\n\n### 2.2. åªåšç±»å‹æ¯”è¾ƒï¼šComponent Diff\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-5.png)\n\n### 2.3. Element Diffï¼šåŒçº§ä½¿ç”¨ `key`\n\n- åœ¨è¿›è¡Œç»„ä»¶å¯¹æ¯”çš„æ—¶å€™ï¼Œå¦‚æœ`ä¸¤ä¸ªç»„ä»¶ç±»å‹ç›¸åŒ`ï¼Œåˆ™éœ€è¦è¿›è¡Œå…ƒç´ çº§åˆ«çš„å¯¹æ¯”ï¼Œè¿™å«åš `Element Diff`\n- React æå‡ºä¼˜åŒ–ç­–ç•¥ï¼šå…è®¸å¼€å‘è€…å¯¹åŒä¸€å±‚çº§çš„åŒç»„å­èŠ‚ç‚¹ï¼Œæ·»åŠ å”¯ä¸€ key è¿›è¡ŒåŒºåˆ†\n\n#### 2.3.1. ç¤ºä¾‹\n\n- newListï¼š`['B', 'C', 'A', 'D']`\n- oldListï¼š`['A', 'B', 'C', 'D']`\n- Diff è¿‡ç¨‹ï¼š\n    - æ‰€ä»¥ `lastIndex` ä»£è¡¨è®¿é—®è¿‡çš„èŠ‚ç‚¹æœ€å¤§ç´¢å¼•\n    - éå† `newList`\n    - éå†åˆ° `B`\n        - åœ¨ `oldList` ä¸­æŸ¥æ‰¾ç›¸åŒçš„å…ƒç´  `B` çš„ä½ç½®æ˜¯ `1` \n            - å¦‚æœ`å½“å‰èŠ‚ç‚¹åœ¨è€é›†åˆä¸­çš„ä½ç½®`å°äº `lastIndex `ï¼Œè¯´æ˜éœ€è¦ç§»åŠ¨\n                - è€Œ `1 > 0` æ‰€ä»¥ä¸éœ€è¦ç§»åŠ¨\n            - å¦åˆ™ï¼Œä¸éœ€è¦ç§»åŠ¨ï¼Œæ›´æ–° `lastIndex = 1`\n        - æ‰€ä»¥ï¼Œ'B' ä½ç½®å˜åŒ–ï¼šä¸éœ€è¦ç§»åŠ¨ï¼ˆlastIndex = 1ï¼‰\n    - 'C' ä½ç½®å˜åŒ–ï¼šä¸éœ€è¦ç§»åŠ¨ï¼ˆlastIndex = 2ï¼‰\n    - 'A' å‘ç°éœ€è¦ç§»åŠ¨ï¼šå› ä¸ºå®ƒçš„åŸå§‹ä½ç½®(0)å°äº lastIndex(2)\n    - 'D' ä½ç½®ä¸å˜ï¼šä¿æŒä¸åŠ¨\n\n#### 2.3.2. å®Œæ•´ä»£ç å¦‚ä¸‹\n\n```javascript hl:6,10,37\n// ç®€åŒ–ç‰ˆçš„ React Diff ç®—æ³•ä¸­çš„ç§»åŠ¨é€»è¾‘\nfunction updateChildren(oldList, newList) {\n  // è®°å½•è®¿é—®è¿‡çš„èŠ‚ç‚¹æœ€å¤§ç´¢å¼•\n  let lastIndex = 0;\n\n  // éå†æ–°çš„å­å…ƒç´ \n  for (let i = 0; i < newList.length; i++) {\n    const newChild = newList[i];\n    let found = false;\n    // åœ¨è€çš„å­å…ƒç´ ä¸­æŸ¥æ‰¾ç›¸åŒçš„å…ƒç´ \n    for (let j = 0; j < oldList.length; j++) {\n      const prevChild = oldList[j];\n\n      // æ‰¾åˆ°ç›¸åŒçš„å…ƒç´ ï¼ˆé€šè¿‡ key åˆ¤æ–­ï¼‰\n      if (newChild.key === prevChild.key) {\n        found = true;\n\n        // å¦‚æœå½“å‰èŠ‚ç‚¹åœ¨è€é›†åˆä¸­çš„ä½ç½®å°äºæœ€å¤§ç´¢å¼•ï¼Œè¯´æ˜éœ€è¦ç§»åŠ¨\n        if (j < lastIndex) {\n          // éœ€è¦ç§»åŠ¨\n          // åœ¨å®é™… DOM æ“ä½œä¸­ï¼Œå°†è¿™ä¸ªèŠ‚ç‚¹ç§»åŠ¨åˆ°å½“å‰ä½ç½®\n          move(prevChild, currentPosition);\n        } else {\n          // ä¸éœ€è¦ç§»åŠ¨ï¼Œæ›´æ–° lastIndex\n          lastIndex = j;\n        }\n        break;\n      }\n    }\n\n    // å¦‚æœæ²¡æ‰¾åˆ°ï¼Œè¯´æ˜æ˜¯æ–°å…ƒç´ ï¼Œéœ€è¦æ’å…¥\n    if (!found) {\n      insert(newChild, currentPosition);\n    }\n  }\n\n  // ç§»é™¤è€é›†åˆä¸­å‰©ä½™çš„å…ƒç´ \n  for (let i = 0; i < oldList.length; i++) {\n    const prevChild = oldList[i];\n    if (!newList.find((child) => child.key === prevChild.key)) {\n      remove(prevChild);\n    }\n  }\n}\n\n```\n\n#### 2.3.3. ç®—æ³•åˆ†æ\n\n- é€šè¿‡é™åˆ¶ç§»åŠ¨æ–¹å‘ï¼Œç®€åŒ–äº†ç®—æ³•å¤æ‚åº¦\n- è™½ç„¶å¯èƒ½ä¸æ˜¯æœ€ä¼˜è§£ï¼Œä½†æ˜¯åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½èƒ½å¾—åˆ°ä¸é”™çš„æ€§èƒ½\n\n#### 2.3.4. æ³¨æ„ç‚¹\n\n1. å§‹ç»ˆä¸ºåˆ—è¡¨é¡¹æä¾›ç¨³å®šçš„ key\n2. é¿å…ä½¿ç”¨æ•°ç»„ç´¢å¼•ä½œä¸º key\n\n## 3. æºç ä¸­ Diff ç®—æ³•ä½ç½®\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-3.png)\n\n## 4. ä¸€ä¸ªç®€å•çš„ Diff ç®—æ³•\n\n```javascript\nconst vnode = {\n  tag: \"div\",\n  props: { id: \"app\" },\n  children: [\n    { tag: \"h1\", props: {}, children: [\"Hello World\"] },\n    {\n      tag: \"p\",\n      props: {},\n      children: [\"This is a simple React Diff implementation.\"],\n    },\n  ],\n};\n\n// æ¯”è¾ƒä¸¤ä¸ªè™šæ‹Ÿ DOM èŠ‚ç‚¹\nfunction diff(oldVNode, newVNode) {\n  // æ–°å¢èŠ‚ç‚¹\n  if (!oldVNode) {\n    return newVNode;\n  }\n  // åˆ é™¤èŠ‚ç‚¹\n  if (!newVNode) {\n    return null;\n  }\n  // å¦‚æœèŠ‚ç‚¹ç±»å‹ä¸åŒï¼Œç›´æ¥æ›¿æ¢æˆæ–°èŠ‚ç‚¹\n  if (oldVNode.tag !== newVNode.tag) {\n    return newVNode; // æ›¿æ¢èŠ‚ç‚¹\n  }\n  // æ¯”è¾ƒå±æ€§\n  const propDiff = diffProps(oldVNode.props, newVNode.props);\n  // é€’å½’æ¯”è¾ƒå­èŠ‚ç‚¹\n  const childrenDiff = diffChildren(oldVNode.children, newVNode.children);\n\n  // è¿”å›æ–°çš„è™šæ‹Ÿ DOM èŠ‚ç‚¹\n  return { ...newVNode, propDiff, childrenDiff };\n}\n\n// æ¯”è¾ƒå±æ€§,è¿”å›å±æ€§çš„å˜åŒ–\nfunction diffProps(oldProps, newProps) {\n  // æ¯”è¾ƒå±æ€§çš„å˜åŒ–\n  const changes = {};\n  for (const key in newProps) {\n    if (oldProps[key] !== newProps[key]) {\n      changes[key] = newProps[key];\n    }\n  }\n  return changes;\n}\n\n// é€’å½’æ¯”è¾ƒå­èŠ‚ç‚¹ï¼Œè¿™é‡Œåªæ¯”è¾ƒäº†å­èŠ‚ç‚¹çš„é•¿åº¦ï¼Œæ²¡æœ‰æ¯”è¾ƒå­èŠ‚ç‚¹çš„å†…å®¹\n// å®é™…ä¸Šè¿˜éœ€è¦é€’å½’è°ƒç”¨ diff å‡½æ•°\nfunction diffChildren(oldChildren, newChildren) {\n  const diffs = [];\n  const maxLength = Math.max(oldChildren.length, newChildren.length);\n  for (let i = 0; i < maxLength; i++) {\n    diffs.push(diff(oldChildren[i], newChildren[i]));\n  }\n  return diffs;\n}\n\n```\n\n## 5. ä¸åŒæ“ä½œçš„ä¼˜å…ˆçº§æ˜¯ä¸åŒçš„\n\næ¯”å¦‚ï¼Œ`æ›´æ–°`ç»„ä»¶å‘ç”Ÿé¢‘ç‡è¾ƒé«˜ï¼Œæ‰€ä»¥ Diff ç®—æ³•ä¼˜å…ˆä¼šçœ‹å½“å‰èŠ‚ç‚¹æ˜¯å¦å±äº`æ›´æ–°`ï¼Œæ‰€ä»¥ï¼Œ\n- ç¬¬ä¸€ééå†ï¼šä¼˜å…ˆçº§çœ‹å¤„ç† `æ›´æ–°` çš„èŠ‚ç‚¹\n- ç¬¬äºŒééå†ï¼šå¤„ç†ä¸å±äº `æ›´æ–°` çš„èŠ‚ç‚¹ï¼Œæ¯”å¦‚`æ–°å¢`ã€`åˆ é™¤`\n\n## 6. æ€»ç»“\n\n- å®Œå…¨å¯¹æ¯” O(nÂ³) æ— æ³•æ¥å—ï¼Œæ•…é™çº§ä¸ºåŒå±‚å¯¹æ¯”çš„ O(n) æ–¹æ¡ˆ\n\t- ä¸ºä»€ä¹ˆé™çº§å¯è¡Œï¼Ÿå› ä¸ºè·¨å±‚çº§å¾ˆå°‘å‘ç”Ÿï¼Œå¯ä»¥å¿½ç•¥\n- åŒå±‚çº§ä¹Ÿä¸ç®€å•ï¼Œéš¾ç‚¹æ˜¯å¦‚ä½•é«˜æ•ˆä½ç§»ï¼Œå³æœ€å°æ­¥æ•°å®Œæˆä½ç§»\n- vue ä¸ºäº†å°½é‡ä¸ç§»åŠ¨ï¼Œå…ˆå·¦å³å¤¹å‡»è·³è¿‡ä¸å˜çš„ï¼Œå†æ‰¾åˆ°æœ€é•¿è¿ç»­å­ä¸²ä¿æŒä¸åŠ¨ï¼Œç§»åŠ¨å…¶ä»–å…ƒç´ \n- React é‡‡ç”¨`ä»…å³ç§»`æ–¹æ¡ˆï¼Œåœ¨å¤§éƒ¨åˆ†ä»å·¦å¾€å³ç§»çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå¾—åˆ°äº†è¾ƒå¥½çš„æ€§èƒ½ã€‚","f07d9d82838a5746811741393d131fdc":"\n# React Hooks çš„åŸç†\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ•°æ®ç»“æ„ \n\n- Hooks çš„çŠ¶æ€å­˜å‚¨åœ¨ `Fiber èŠ‚`ç‚¹çš„ `memoizedState` å±æ€§ä¸­\n- React ä½¿ç”¨`é“¾è¡¨`ç»“æ„æ¥å­˜å‚¨ Hooks çŠ¶æ€ï¼š\n- æ¯ä¸ª Hook èŠ‚ç‚¹åŒ…å«ï¼š\n    - å½“å‰çŠ¶æ€ï¼š`state`\n    - æ›´æ–°é˜Ÿåˆ—:  `queue` ï¼Œå­˜å‚¨å¤šæ¬¡æ›´æ–°è¡Œä¸º\n    - ä¾èµ–é¡¹ï¼ˆå¯¹äº useEffect ç­‰ï¼‰\n    - nextï¼šæŒ‡å‘ä¸‹ä¸€ä¸ª Hook çš„æŒ‡é’ˆ\n\n### 1.1. ç¤ºä¾‹\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-6.png)\n\n- Hooks çŠ¶æ€å­˜å‚¨åœ¨ Fiber èŠ‚ç‚¹ä¸Š\n- é€šè¿‡ Fiber å®ç°æ—¶é—´åˆ‡ç‰‡å’Œä¼˜å…ˆçº§è°ƒåº¦\n- æ”¯æŒå¹¶å‘æ¨¡å¼ä¸‹çš„çŠ¶æ€ç®¡ç†\n\n## 2. Hooks è§„åˆ™\n\n1. **åªåœ¨é¡¶å±‚è°ƒç”¨ Hooks**\n    - ä¸èƒ½åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨\n    - ç¡®ä¿ Hooks çš„è°ƒç”¨é¡ºåºä¿æŒä¸€è‡´\n2. **åªåœ¨ React å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ Hooks**\n    - ä¸èƒ½åœ¨æ™®é€š JavaScript å‡½æ•°ä¸­è°ƒç”¨\n    - ä¸èƒ½åœ¨ç±»ç»„ä»¶ä¸­è°ƒç”¨\n\n## 3. useState çš„æºç åˆ†æ\n### 3.1. å…¥å£\n\næ‰€æœ‰çš„ Hooks åœ¨ React.js ä¸­è¢«å¼•å…¥ï¼ŒæŒ‚è½½åœ¨ React å¯¹è±¡ä¸­ï¼Œå¦‚ä¸‹ï¼š\n\n```javascript hl:12\n// React.js\nimport {\n  useCallback,\n  useContext,\n  useEffect,\n  useImperativeHandle,\n  useDebugValue,\n  useLayoutEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState,\n} from './ReactHooks';\n```\n\n### 3.2. Hook å¯¹è±¡çš„ç»“æ„\n\n```ts\n// ReactFiberHooks.js\nexport type Hook = {\n  memoizedState: any,\n\n  baseState: any,\n  baseUpdate: Update<any, any> | null,\n  queue: UpdateQueue<any, any> | null,\n\n  next: Hook | null,\n};\n```\n\n### 3.3. ä¸€ä¸ªç¤ºä¾‹\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241101-7.png)\n\n## 4. ç®€åŒ–ç‰ˆçš„ useState å®ç°\n\n### 4.1. å…ˆç»™å‡ºä¸€ä¸ªæ¶å­\n\n```javascript\nfunction useState(initialValue) {\n    let state = initialValue;\n    const setState = (newValue) => {\n        state = newValue;\n        // è¿™é‡Œå¯ä»¥è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“\n    };\n    return [state, setState];\n}\n\n```\n\nReact useState çš„æ ¸å¿ƒåŸç†ï¼š\n1. é€šè¿‡`é—­åŒ…`ä¿å­˜çŠ¶æ€\n2. ä½¿ç”¨`æ¸¸æ ‡`ç¡®ä¿ hooks çš„è°ƒç”¨é¡ºåº\n3. è§¦å‘é‡æ–°æ¸²æŸ“æ¥æ›´æ–°è§†å›¾\n4. ç»´æŠ¤çŠ¶æ€çš„ä¸€è‡´æ€§\n\n```javascript hl:29,34,35,14\n// ä¿å­˜çŠ¶æ€çš„æ•°ç»„\nlet states = [];\n// å½“å‰å¤„ç†çš„ hook ç´¢å¼•\nlet cursor = 0;\n\n// ç®€å•çš„ useState å®ç°\nfunction useState(initialState) {\n  // è·å–å½“å‰ hook çš„ç´¢å¼•\n  const currentCursor = cursor;\n\n  // åˆå§‹åŒ–çŠ¶æ€\n  states[currentCursor] = states[currentCursor] || initialState;\n\n  // æ›´æ–°å‡½æ•°\n  const setState = (newState) => {\n    // æ”¯æŒå‡½æ•°å¼æ›´æ–°\n    states[currentCursor] =\n      typeof newState === \"function\"\n        ? newState(states[currentCursor])\n        : newState;\n\n    // è§¦å‘é‡æ–°æ¸²æŸ“\n    render();\n  };\n\n  // ç§»åŠ¨æ¸¸æ ‡åˆ°ä¸‹ä¸€ä¸ªä½ç½®\n  cursor++;\n\n  return [states[currentCursor], setState];\n}\n\n// ç¤ºä¾‹ç»„ä»¶\nfunction Component() {\n  const [count, setCount] = useState(0);\n  const [text, setText] = useState(\"hello\");\n\n  return {\n    render: () => {\n      console.log(\"State:\", { count, text });\n    },\n    click: () => setCount(count + 1),\n    type: (newText) => setText(newText),\n  };\n}\n\n// æ¨¡æ‹Ÿ React çš„æ¸²æŸ“è¿‡ç¨‹\nfunction render() {\n  // é‡ç½®æ¸¸æ ‡\n  cursor = 0;\n  // æ¸²æŸ“ç»„ä»¶\n  const component = Component();\n  component.render();\n  return component;\n}\n\n// æµ‹è¯•ä»£ç \nconsole.log(\"Initial render:\");\nconst component = render();\n\nconsole.log(\"\\nAfter clicking:\");\ncomponent.click();\n\nconsole.log(\"\\nAfter typing:\");\ncomponent.type(\"world\");\n\n```\n\nåœ¨å®é™…çš„ React å®ç°ä¸­ï¼Œè¿˜åŒ…å«äº†æ›´å¤šçš„ç‰¹æ€§å’Œä¼˜åŒ–ï¼Œæ¯”å¦‚ï¼š\n\n- Fiber æ¶æ„çš„é›†æˆ\n- æ‰¹é‡æ›´æ–°çš„å¤„ç†\n- ä¼˜å…ˆçº§è°ƒåº¦\n- å†…å­˜ä¼˜åŒ–\n- å¼€å‘ç¯å¢ƒçš„è°ƒè¯•æ”¯æŒ\n\n## 5. æç®€ React Hooks å®ç°\n\n```javascript hl:9,15,31\n// å­˜å‚¨ hooks çŠ¶æ€\nlet hooks = [];\nlet currentHook = 0;\n\n// æ¨¡æ‹Ÿ React çš„å·¥ä½œåŸç†\nfunction createReactLike() {\n  // é‡ç½® hooks æ¸¸æ ‡\n  const render = (Component) => {\n    currentHook = 0;\n    const app = Component();\n    app.render();\n    return app;\n  }\n\n  // useState å®ç°\n  const useState = (initialValue) => {\n    const hookId = currentHook;\n    hooks[hookId] = hooks[hookId] || initialValue;\n\n    const setState = (newValue) => {\n      hooks[hookId] = typeof newValue === 'function' \n        ? newValue(hooks[hookId]) \n        : newValue;\n      reRender(); // è§¦å‘é‡æ–°æ¸²æŸ“\n    };\n\n    currentHook++;\n    return [hooks[hookId], setState];\n  }\n\n  // useEffect å®ç°\n  const useEffect = (callback, deps) => {\n    const hookId = currentHook;\n    const oldDeps = hooks[hookId];\n    \n    // æ£€æŸ¥ä¾èµ–æ˜¯å¦å˜åŒ–\n    const hasChanged = !oldDeps || \n      !deps || \n      deps.some((dep, i) => !Object.is(dep, oldDeps[i]));\n\n    if (hasChanged) {\n      // æ‰§è¡Œæ¸…ç†å‡½æ•°\n      if (hooks[hookId]?.cleanup) {\n        hooks[hookId].cleanup();\n      }\n      \n      // æ‰§è¡Œ effect å¹¶ä¿å­˜æ¸…ç†å‡½æ•°\n      hooks[hookId] = {\n        deps,\n        cleanup: callback()\n      };\n    }\n\n    currentHook++;\n  }\n\n  return {\n    useState,\n    useEffect,\n    render\n  }\n}\n\n// åˆ›å»º React å®ä¾‹\nconst React = createReactLike();\nlet reRender;\n\n// ç¤ºä¾‹ç»„ä»¶\nfunction Counter() {\n  const [count, setCount] = React.useState(0);\n  const [text, setText] = React.useState('hello');\n\n  React.useEffect(() => {\n    console.log(`Count changed to: ${count}`);\n    // è¿”å›æ¸…ç†å‡½æ•°\n    return () => console.log(`Cleaning up count: ${count}`);\n  }, [count]);\n\n  React.useEffect(() => {\n    console.log(`Text changed to: ${text}`);\n    // è¿”å›æ¸…ç†å‡½æ•°\n    return () => console.log(`Cleaning up text: ${text}`);\n  }, [text]);\n\n  return {\n    render: () => {\n      console.log('Render:', { count, text });\n    },\n    increment: () => setCount(c => c + 1),\n    decrement: () => setCount(c => c - 1),\n    updateText: (newText) => setText(newText)\n  };\n}\n\n// åˆå§‹æ¸²æŸ“\nconsole.log('=== Initial Render ===');\nconst component = React.render(Counter);\n// ä¿å­˜é‡æ–°æ¸²æŸ“å‡½æ•°\nreRender = () => React.render(Counter);\n\n// æµ‹è¯•çŠ¶æ€æ›´æ–°\nconsole.log('\\n=== After Increment ===');\ncomponent.increment();\n\nconsole.log('\\n=== After Text Update ===');\ncomponent.updateText('world');\n\nconsole.log('\\n=== After Decrement ===');\ncomponent.decrement();\n```\n\n","883f428337ae566fad86b69d1fa8f146":"\n# æ‰‹å†™è‡ªå®šä¹‰ Hooks\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. useRequestï¼šæ¨¡æ‹Ÿè¯·æ±‚ \n```javascript\nimport { useState, useEffect } from \"react\";\n\nconst useRequest = () => {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      setError(null);\n\n      try {\n        const res = await fetch(url);\n        if (!res.ok) {\n          throw new Error(\"Network response\");\n        }\n        const result = await res.json();\n        setData(result);\n      } catch (error) {\n        setError(error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [url]);\n\n  return { data, loading, error };\n};\n\n// ä½¿ç”¨\nconst MyComponent = () => {\n  const { data, loading, error } = useRequest(\"https://localhost:3000/api\");\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n\n  if (error) {\n    return <div>Error: {error}</div>;\n  }\n\n  return (\n    <div>\n      <h1>Data fetched:</h1>\n      <pre>{JSON.stringify(data, null, 2)}</pre>\n    </div>\n  );\n};\n\n```\n\n> æ¯”è¾ƒæˆç†Ÿçš„è¯·æ±‚ hooksï¼š[swr](https://swr.vercel.app/)\n\n## 2. useSetStateï¼šç®¡ç† object ç±»å‹çš„ state çš„ Hooks\n\n```javascript\nimport { useState } from \"react\";\n\nconst useSetState = (initialState) => {\n  const [state, setState] = useState(initialState);\n\n  const setMergeState = (key, value) => {\n    setState((prev) => ({ ...prev, [key]: value }));\n  };\n\n  return [state, setMergeState];\n};\n\n```\n\n## 3. useDidMountï¼šç±»ä¼¼äºç±»ç»„ä»¶ä¸­çš„Â `componentDidMount`ï¼Œç”¨äºç»„ä»¶æŒ‚è½½åçš„æ“ä½œ\n\n```javascript hl:12,6\nimport { useEffect } from \"react\";\n\nconst useDidMount = (callback) => {\n  useEffect(() => {\n    callback();\n    // ç©ºæ•°ç»„ï¼šè¡¨ç¤ºåªåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡\n  }, []);\n};\n\n// ä½¿ç”¨\nconst MyComponent = () => {\n  useDidMount(() => {\n    console.log(\"Component has mounted!\");\n  });\n\n  return (\n    <div>\n      <h1>Hello, World!</h1>\n    </div>\n  );\n};\n\n```\n\n## 4. useUnmountï¼šç±»ä¼¼äºç±»ç»„ä»¶ä¸­çš„Â `componentWillUnmount`ï¼Œç”¨äºç»„ä»¶å¸è½½æ—¶çš„æ“ä½œ\n\n```javascript hl:19\nimport { useEffect } from \"react\";\n\n// å®šä¹‰ï¼šç»„ä»¶å¸è½½æ—¶æ‰§è¡Œå›è°ƒ\n// å‚æ•°ï¼šcallback å›è°ƒå‡½æ•°ï¼Œç»„ä»¶å¸è½½æ—¶æ‰§è¡Œ\n// åŸç†ï¼šuseEffect ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œè¿”å›çš„å‡½æ•°\nconst useUnmount = (callback) => {\n  useEffect(() => {\n    // æ²¡å…¶ä»–é€»è¾‘ï¼Œå¦‚æœæœ‰ï¼Œä¼šåœ¨ç»„ä»¶åˆšæŒ‚è½½æ—¶æ‰§è¡Œ\n    // ä½†æ˜¯è¿™é‡Œæˆ‘ä»¬åªå…³å¿ƒç»„ä»¶å¸è½½æ—¶æ‰§è¡Œ\n    // æ¸…ç†å‡½æ•°\n    return () => {\n      callback();\n    };\n  }, []);\n};\n\n// ä½¿ç”¨\nconst MyComponent = () => {\n  useUnmount(() => {\n    console.log(\"Component has unmount!\");\n  });\n\n  return (\n    <div>\n      <h1>Hello, World!</h1>\n    </div>\n  );\n};\n\n```\n\n## 5. useDebounceï¼šç”¨äºå¤„ç†è¾“å…¥æ¡†å†…å®¹çš„é˜²æŠ–å¤„ç†ï¼Œé¿å…é¢‘ç¹è§¦å‘è¯·æ±‚\n\n```javascript hl:16\nimport { useState, useEffect } from \"react\";\n\nconst useDebounce = (stateValue, wait) => {\n  const [val, setVal] = useState(stateValue);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setVal(stateValue);\n    }, wait);\n\n    // æ¸…é™¤å®šæ—¶å™¨\n    return () => {\n      clearTimeout(timer);\n    };\n    // è¿™é‡Œä¾èµ– stateValueï¼Œå½“ stateValue å˜åŒ–æ—¶ï¼Œé‡æ–°è®¾ç½®å®šæ—¶å™¨\n    // æ‰€ä»¥ä¸éœ€è¦åƒ lodash.debounce é‚£æ ·ï¼Œæ¯æ¬¡éƒ½é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°\n  }, [stateValue, wait]);\n\n  return val;\n};\n\nconst MyComponent = () => {\n  const [value, setValue] = useState < string > \"\";\n  const debouncedValue = useDebounce(value, 500);\n\n  return (\n    <div>\n      <input\n        value={value}\n        onChange={(e) => setValue(e.target.value)}\n        placeholder=\"Typed value\"\n        style={{ width: 280 }}\n      />\n      <p style={{ marginTop: 16 }}>DebouncedValue: {debouncedValue}</p>\n    </div>\n  );\n};\n\n```\n\n## 6. useThrottleï¼šç”¨äºé™åˆ¶æŸä¸ªå‡½æ•°çš„è°ƒç”¨é¢‘ç‡\n\n```javascript \nimport { useState, useEffect } from \"react\";\n\n// æ–¹æ¡ˆä¸€ï¼šé˜²æŠ–å€¼\nfunction useDebounce(value, delay = 500) {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => clearTimeout(timer);\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\n// æ–¹æ¡ˆäºŒï¼šé˜²æŠ–å‡½æ•°\nfunction useDebounceFn(fn, delay = 500) {\n  const [timer, setTimer] = useState(null);\n\n  const debouncedFn = (...args) => {\n    // å¦‚æœæœ‰å®šæ—¶å™¨ï¼Œæ¸…é™¤å®šæ—¶å™¨\n    if (timer) clearTimeout(timer);\n\n    // è®¾ç½®å®šæ—¶å™¨\n    setTimer(\n      setTimeout(() => {\n        fn(...args);\n      }, delay),\n    );\n  };\n\n  return debouncedFn;\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nfunction SearchComponent() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  // ä½¿ç”¨é˜²æŠ–å€¼\n  const debouncedSearchTerm = useDebounce(searchTerm, 500);\n\n  // ä½¿ç”¨é˜²æŠ–å‡½æ•°\n  const handleSearch = useDebounceFn((value) => {\n    console.log(\"Searching for:\", value);\n  }, 500);\n\n  return (\n    <div>\n      {/* æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨é˜²æŠ–å€¼ */}\n      <input\n        value={searchTerm}\n        onChange={(e) => setSearchTerm(e.target.value)}\n        placeholder=\"ä½¿ç”¨é˜²æŠ–å€¼...\"\n      />\n      <p>é˜²æŠ–åçš„å€¼: {debouncedSearchTerm}</p>\n\n      {/* æ–¹æ¡ˆäºŒï¼šä½¿ç”¨é˜²æŠ–å‡½æ•° */}\n      <input\n        onChange={(e) => handleSearch(e.target.value)}\n        placeholder=\"ä½¿ç”¨é˜²æŠ–å‡½æ•°...\"\n      />\n    </div>\n  );\n}\n\n```\n\n## 7. useLocalStorageï¼šä¾¿æ·åœ°ä½¿ç”¨Â `localStorage`Â å­˜å‚¨æ•°æ®\n\n```javascript\nimport { useState } from 'react';\n\nconst useLocalStorage = (key, initialValue) => {\n    const [storedValue, setStoredValue] = useState(() => {\n        try {\n            const item = window.localStorage.getItem(key)\n            return item ? JSON.parse(item) : initialValue\n        } catch (error) {\n            console.log(error)\n            return initialValue\n        }\n    })\n    \n    const SetValue = (value) => {\n        try {\n            const valueToStore = \n                  value instanceof Function ? value(storedValue) : value;\n            setStoredValue(valueToStore);\n      \t\twindow.localStorage.setItem(key, JSON.stringify(valueToStore));\n        } catch (error) {\n            console.log(error)\n        }\n    }\n    \n    return [storedValue, setValue]\n}\n```\n\n> éœ€è¦JSON è§£ææˆ–è€…åºåˆ—åŒ–\n\n## 8. useEventListenerï¼šç”¨äºç®€åŒ–äº‹ä»¶ç›‘å¬å™¨çš„æ·»åŠ å’Œæ¸…ç†\n\n```javascript hl:4,22\nimport { useEffect , useRef } from 'react';\n\nconst useEventListener = (eventName, handler, element = window) => {\n    const savedHandle = useRef()\n    \n    useEffect(() => {\n        savedHandle.current = handle\n    }, [handle])\n    \n    useEffect(() => {\n        const isSupported = element && element.addEventListener\n        if (!isSupported) return;\n        \n        const eventListener = event => savedHandle.current(event)\n        \n       \telement.addEventListener(eventName, eventListener);\n        \n     \t// æ¸…ç†å‡½æ•°ï¼Œå¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬å™¨\n        return () => {\n          element.removeEventListener(eventName, eventListener);\n        };\n    }, [eventName, element])\n}\n\nconst MyComponent = () => {\n  const handleScroll = () => {\n    console.log('Scrolled!', window.scrollY);\n  };\n\n  useEventListener('scroll', handleScroll); // æ·»åŠ æ»šåŠ¨äº‹ä»¶ç›‘å¬\n\n  return (\n    <div style={{ height: '2000px', background: 'linear-gradient(#fff, `#000)'` }}>\n      <h1>Scroll down to see event listener in action!</h1>\n    </div>\n  );\n};\n```\n\n## 9. useScrollï¼šç”¨äºç›‘æµ‹æ»šåŠ¨ä½ç½®çš„å˜åŒ–\n\n```javascript\nimport { useEffect, useState } from 'react';\n\n/**\n * è‡ªå®šä¹‰ Hookï¼Œç”¨äºè·å–å½“å‰çš„æ»šåŠ¨ä½ç½®\n */\nconst useScroll = () => {\n  const [scrollPosition, setScrollPosition] = useState({ \n    scrollX: window.scrollX, \n    scrollY: window.scrollY \n  });\n\n  const handleScroll = () => {\n    setScrollPosition({ \n      scrollX: window.scrollX, \n      scrollY: window.scrollY \n    });\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll);\n\n    // ç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬å™¨\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, []);\n\n  return scrollPosition;\n};\n\n// ä½¿ç”¨\nconst MyComponent = () => {\n  const { scrollX, scrollY } = useScroll(); // ä½¿ç”¨è‡ªå®šä¹‰çš„æ»šåŠ¨ Hook\n\n  return (\n    <div style={{ height: '2000px', background: 'linear-gradient(#fff, `#000)'` }}>\n      <h1>Scroll to see scroll position!</h1>\n      <p>Scroll X: {scrollX}</p>\n      <p>Scroll Y: {scrollY}</p>\n    </div>\n  );\n};\n```\n\n## 10. æ›´å¤šï¼šé˜¿é‡Œ ahooks\n\nhttps://ahooks.js.org/zh-CN/hooks/use-request/index","fdfacf7b9e295604a8e276deb7a3c30b":"\n# React çš„ä¼˜å…ˆçº§è°ƒåº¦æœºåˆ¶å’Œæ‰“æ–­å¤„ç†\n\n`#react` \n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ€»ç»“ \n\næ€»ç»“ä¸€ä¸‹ React é˜²æ­¢ä½ä¼˜å…ˆçº§ä»»åŠ¡é¥¥é¥¿çš„ä¸»è¦æœºåˆ¶ï¼š\n1. è¿‡æœŸæ—¶é—´ï¼šæ¯ä¸ªä»»åŠ¡éƒ½æœ‰è¿‡æœŸæ—¶é—´ï¼Œä¸€æ—¦è¿‡æœŸä¼šè¢«å¼ºåˆ¶æ‰§è¡Œ\n2. ä¼˜å…ˆçº§æå‡ï¼šé•¿æ—¶é—´å¾—ä¸åˆ°æ‰§è¡Œçš„ä½ä¼˜ä»»åŠ¡ä¼šè¢«æå‡ä¼˜å…ˆçº§\n3. æ—¶é—´ç‰‡è½®è½¬ï¼šé€šè¿‡æ—¶é—´ç‰‡åˆ’åˆ†ï¼Œç¡®ä¿ä»»åŠ¡èƒ½å¤Ÿäº¤æ›¿æ‰§è¡Œ\n4. åŠ¨æ€ä¼˜å…ˆçº§ï¼šä»»åŠ¡ä¼˜å…ˆçº§ä¸æ˜¯å›ºå®šçš„ï¼Œä¼šæ ¹æ®ç­‰å¾…æ—¶é—´åŠ¨æ€è°ƒæ•´\n5. æ‰¹é‡æ›´æ–°ï¼šç›¸åŒä¼˜å…ˆçº§çš„æ›´æ–°ä¼šè¢«åˆå¹¶ï¼Œæé«˜æ‰§è¡Œæ•ˆç‡\n\nè¿™ç§æœºåˆ¶ç¡®ä¿äº†å³ä½¿åœ¨é«˜ä¼˜å…ˆçº§ä»»åŠ¡é¢‘ç¹æ’å…¥çš„æƒ…å†µä¸‹ï¼Œä½ä¼˜å…ˆçº§ä»»åŠ¡æœ€ç»ˆä¹Ÿèƒ½å¾—åˆ°æ‰§è¡Œï¼ŒåŒæ—¶åˆä¸ä¼šå½±å“ç”¨æˆ·äº¤äº’çš„æµç•…æ€§ã€‚\n\n## 2. ä¼˜å…ˆçº§æ‰“æ–­æœºåˆ¶\n\n```javascript\n// ç®€åŒ–çš„ä¼˜å…ˆçº§å®šä¹‰\nconst priorities = {\n  ImmediatePriority: 1,     // æœ€é«˜ä¼˜å…ˆçº§ï¼ŒåŒæ­¥ä»»åŠ¡\n  UserBlockingPriority: 2,  // ç”¨æˆ·äº¤äº’\n  NormalPriority: 3,        // æ™®é€šä¼˜å…ˆçº§\n  LowPriority: 4,          // ä½ä¼˜å…ˆçº§\n  IdlePriority: 5          // ç©ºé—²ä¼˜å…ˆçº§\n}\n```\n\næ‰“æ–­è¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n```javascript\nfunction workLoop(deadline) {\n  // æ˜¯å¦æœ‰å¾…å¤„ç†çš„é«˜ä¼˜å…ˆçº§ä»»åŠ¡\n  while (currentTask !== null && !shouldYield()) {\n    try {\n      // å¦‚æœæœ‰æ›´é«˜ä¼˜å…ˆçº§ä»»åŠ¡è¿›æ¥\n      if (hasHigherPriorityWork()) {\n        // ä¸­æ–­å½“å‰å·¥ä½œ\n        return suspendCurrentWork();\n      }\n      performUnitOfWork(currentTask);\n    } catch (err) {\n      // é”™è¯¯å¤„ç†\n    }\n  }\n}\n```\n\n## 3. é¥¥é¥¿é—®é¢˜è§£å†³æ–¹æ¡ˆ\n\nReact é€šè¿‡ä»¥ä¸‹æœºåˆ¶æ¥é˜²æ­¢ä½ä¼˜å…ˆçº§ä»»åŠ¡é¥¥é¥¿ï¼š\n\n### 3.1. A. è¿‡æœŸæ—¶é—´æœºåˆ¶\n\n```javascript\nfunction scheduleCallback(priorityLevel, callback) {\n  const currentTime = getCurrentTime();\n  \n  // æ ¹æ®ä¼˜å…ˆçº§è®¡ç®—è¿‡æœŸæ—¶é—´\n  const timeout = getTimeoutByPriorityLevel(priorityLevel);\n  const expirationTime = currentTime + timeout;\n  \n  const newTask = {\n    callback,\n    priorityLevel,\n    expirationTime,\n    startTime: currentTime,\n  };\n  \n  // å°†ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—\n  push(taskQueue, newTask);\n}\n\n// ä¸åŒä¼˜å…ˆçº§çš„è¶…æ—¶æ—¶é—´\nconst timeoutForPriorityLevel = {\n  [ImmediatePriority]: -1,  // ç«‹å³æ‰§è¡Œ\n  [UserBlockingPriority]: 250,\n  [NormalPriority]: 5000,\n  [LowPriority]: 10000,\n  [IdlePriority]: maxSigned31BitInt\n};\n```\n\n### 3.2. B. ä»»åŠ¡é¥¥é¥¿æ£€æµ‹\n\n```javascript\nfunction shouldYieldToHost() {\n  const currentTime = getCurrentTime();\n  \n  // æ£€æŸ¥æ˜¯å¦æœ‰è¿‡æœŸä»»åŠ¡\n  if (peek(taskQueue) !== null) {\n    const expiredTask = peek(taskQueue);\n    if (expiredTask.expirationTime <= currentTime) {\n      // å¦‚æœä»»åŠ¡è¿‡æœŸï¼Œå¼ºåˆ¶æ‰§è¡Œ\n      return true;\n    }\n  }\n  \n  return false;\n}\n```\n\n## 4. ä¼˜å…ˆçº§æå‡æœºåˆ¶\n\n```javascript\nfunction markTaskExpired(task) {\n  const currentTime = getCurrentTime();\n  \n  if (currentTime >= task.expirationTime) {\n    // è¿‡æœŸä»»åŠ¡æå‡ä¼˜å…ˆçº§\n    task.priorityLevel = ImmediatePriority;\n  }\n}\n```\n\n## 5. æ—¶é—´ç‰‡è½®è½¬\n\n```javascript\nfunction workLoopConcurrent() {\n  // å½“æœ‰å·¥ä½œè¦åšä¸”æ—¶é—´ç‰‡æœªç”¨å®Œ\n  while (workInProgress !== null && !shouldYield()) {\n    workInProgress = performUnitOfWork(workInProgress);\n  }\n}\n\nfunction shouldYield() {\n  // æ£€æŸ¥æ—¶é—´ç‰‡æ˜¯å¦ç”¨å®Œ\n  const currentTime = getCurrentTime();\n  return currentTime >= deadline;\n}\n```\n\n## 6. ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†\n\n```javascript\nclass Scheduler {\n  constructor() {\n    this.taskQueue = new MinHeap();      // æ™®é€šä»»åŠ¡é˜Ÿåˆ—\n    this.timerQueue = new MinHeap();     // å»¶æ—¶ä»»åŠ¡é˜Ÿåˆ—\n  }\n  \n  scheduleTask(task) {\n    const currentTime = getCurrentTime();\n    \n    if (task.startTime <= currentTime) {\n      // ç«‹å³æ‰§è¡Œçš„ä»»åŠ¡\n      this.taskQueue.push(task);\n    } else {\n      // å»¶æ—¶ä»»åŠ¡\n      this.timerQueue.push(task);\n    }\n  }\n  \n  // è·å–ä¸‹ä¸€ä¸ªè¦æ‰§è¡Œçš„ä»»åŠ¡\n  getNextTask() {\n    const currentTime = getCurrentTime();\n    \n    // å°†åˆ°æœŸçš„å»¶æ—¶ä»»åŠ¡ç§»åˆ°æ™®é€šé˜Ÿåˆ—\n    this.advanceTimers(currentTime);\n    \n    // è¿”å›æœ€é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡\n    return this.taskQueue.peek();\n  }\n}\n```\n\n## 7. å¯ä¸­æ–­æ¸²æŸ“çš„å®ç°\n\n```javascript\nfunction renderRoot(root, isYieldy) {\n  // æ˜¯å¦å¯ä»¥ä¸­æ–­\n  isWorkLoopConcurrent = isYieldy;\n  \n  do {\n    try {\n      workLoopConcurrent();\n    } catch (thrownValue) {\n      handleError(root, thrownValue);\n    }\n  } while (workInProgress !== null && !shouldYield());\n  \n  // å¦‚æœè¿˜æœ‰æœªå®Œæˆçš„å·¥ä½œ\n  if (workInProgress !== null) {\n    // è¿”å›æœªå®Œæˆæ ‡è®°\n    return RootIncomplete;\n  }\n  \n  // æ‰€æœ‰å·¥ä½œå®Œæˆ\n  return RootCompleted;\n}\n```\n\n## 8. ä¼˜å…ˆçº§ç»§æ‰¿\n\n```javascript\nfunction scheduleUpdateOnFiber(fiber, lane) {\n  const root = markUpdateLaneFromFiberToRoot(fiber);\n  \n  if (lane === SyncLane) {\n    // åŒæ­¥ä¼˜å…ˆçº§\n    ensureRootIsScheduled(root);\n  } else {\n    // å¼‚æ­¥ä¼˜å…ˆçº§\n    scheduleCallback(\n      schedulerPriorityLevel,\n      () => {\n        performConcurrentWorkOnRoot(root);\n      }\n    );\n  }\n}\n```\n\n## 9. æ‰¹é‡æ›´æ–°å¤„ç†\n\n```javascript\nfunction batchedUpdates(fn) {\n  const prevExecutionContext = executionContext;\n  executionContext |= BatchedContext;\n  try {\n    return fn();\n  } finally {\n    executionContext = prevExecutionContext;\n    // å¦‚æœæ²¡æœ‰å…¶ä»–å·¥ä½œæ­£åœ¨è¿›è¡Œï¼Œåˆ·æ–°åŒæ­¥é˜Ÿåˆ—\n    if (executionContext === NoContext) {\n      flushSyncCallbackQueue();\n    }\n  }\n}\n```\n\n","cbc732a09b7f5d17817eb9df28bc9d23":"\n# ä»»åŠ¡é¥¥é¥¿ï¼ˆTask Starvationï¼‰\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä»»åŠ¡é¥¥é¥¿çš„æ¦‚å¿µ \n\næƒ³è±¡ä¸€ä¸ªé¤å…åœºæ™¯ï¼š\n```javascript hl:7\nclass Restaurant {\n  constructor() {\n    this.vipOrders = [];    // é«˜ä¼˜å…ˆçº§è®¢å•\n    this.normalOrders = []; // æ™®é€šä¼˜å…ˆçº§è®¢å•\n  }\n\n  // æ¨¡æ‹Ÿä¼ ç»Ÿçš„å¤„ç†æ–¹å¼\n  processOrders() {\n    while(true) {\n      // æ€»æ˜¯ä¼˜å…ˆå¤„ç† VIP è®¢å•\n      if(this.vipOrders.length > 0) {\n        this.processVipOrder();\n      } else if(this.normalOrders.length > 0) {\n        this.processNormalOrder();\n      }\n    }\n  }\n}\n```\n\nå¦‚æœ VIP è®¢å•ä¸æ–­è¿›æ¥ï¼Œæ™®é€šè®¢å•å°±ä¼šä¸€ç›´å¾—ä¸åˆ°å¤„ç†ï¼Œè¿™å°±æ˜¯\"é¥¥é¥¿\"ç°è±¡ã€‚\n\n## 2. React ä¸­çš„ä»»åŠ¡é¥¥é¥¿\n\n```javascript hl:13,6\n// ç®€åŒ–çš„ React ä»»åŠ¡ç¤ºä¾‹\nconst tasks = {\n  // é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼šç”¨æˆ·ç‚¹å‡»æŒ‰é’®\n  highPriority: {\n    type: 'UserBlockingPriority',\n    expirationTime: 250, // 250ms è¶…æ—¶\n    work: () => updateButtonState()\n  },\n  \n  // ä½ä¼˜å…ˆçº§ä»»åŠ¡ï¼šæ•°æ®åˆ—è¡¨æ¸²æŸ“\n  lowPriority: {\n    type: 'NormalPriority',\n    expirationTime: 5000, // 5000ms è¶…æ—¶\n    work: () => renderDataList()\n  }\n}\n```\n\n## 3. é¥¥é¥¿é—®é¢˜çš„å…·ä½“è¡¨ç°\n\n```javascript\n// é—®é¢˜åœºæ™¯æ¨¡æ‹Ÿ\nfunction problematicScheduler() {\n  let highPriorityTasks = [];\n  let lowPriorityTasks = [];\n  \n  setInterval(() => {\n    // æ¨¡æ‹Ÿé¢‘ç¹çš„é«˜ä¼˜å…ˆçº§ä»»åŠ¡\n    highPriorityTasks.push(() => console.log('High priority task'));\n  }, 100);\n  \n  // ä½ä¼˜å…ˆçº§ä»»åŠ¡å¯èƒ½æ°¸è¿œæ— æ³•æ‰§è¡Œ\n  while(true) {\n    if(highPriorityTasks.length > 0) {\n      const task = highPriorityTasks.shift();\n      task();\n    } else if(lowPriorityTasks.length > 0) {\n      const task = lowPriorityTasks.shift();\n      task();\n    }\n  }\n}\n```\n\n## 4. React è§£å†³æ–¹æ¡ˆæ¼”ç¤º\n\n```javascript hl:22,30,35\nclass ImprovedScheduler {\n  constructor() {\n    this.tasks = new Map();\n    this.currentTime = 0;\n  }\n  \n  addTask(task) {\n    const expirationTime = this.currentTime + task.timeout;\n    this.tasks.set(task.id, {\n      ...task,\n      expirationTime,\n      startTime: this.currentTime\n    });\n  }\n  \n  // æ”¹è¿›çš„è°ƒåº¦å™¨\n  schedule() {\n    while(this.tasks.size > 0) {\n      const now = this.currentTime;\n      let nextTask = null;\n      \n      // 1. é¦–å…ˆæ£€æŸ¥æ˜¯å¦æœ‰è¿‡æœŸä»»åŠ¡\n      for(const [id, task] of this.tasks) {\n        if(now >= task.expirationTime) {\n          nextTask = task;\n          break;\n        }\n      }\n      \n      // 2. å¦‚æœæ²¡æœ‰è¿‡æœŸä»»åŠ¡ï¼Œåˆ™æŒ‰ä¼˜å…ˆçº§å¤„ç†\n      if(!nextTask) {\n        nextTask = this.getHighestPriorityTask();\n      }\n      \n      // 3. æ‰§è¡Œä»»åŠ¡\n      this.executeTask(nextTask);\n    }\n  }\n  \n  // ç¤ºä¾‹ï¼šæ‰§è¡Œä»»åŠ¡\n  executeTask(task) {\n    console.log(`Executing task: ${task.id}`);\n    // å®é™…æ‰§è¡Œä»»åŠ¡\n    task.work();\n    this.tasks.delete(task.id);\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst scheduler = new ImprovedScheduler();\n\n// æ·»åŠ ä¸€äº›ä»»åŠ¡\nscheduler.addTask({\n  id: 'button-click',\n  priority: 'high',\n  timeout: 250,\n  work: () => console.log('Button click handled')\n});\n\nscheduler.addTask({\n  id: 'data-fetch',\n  priority: 'low',\n  timeout: 5000,\n  work: () => console.log('Data fetched and rendered')\n});\n```\n\n## 5. å®é™…æ•ˆæœå¯¹æ¯”\n\næ²¡æœ‰è§£å†³é¥¥é¥¿é—®é¢˜çš„æƒ…å†µï¼š\n\n```javascript hl:6\n// ç³Ÿç³•çš„æƒ…å†µ\nTime 0ms: é«˜ä¼˜ä»»åŠ¡1å¼€å§‹æ‰§è¡Œ\nTime 100ms: é«˜ä¼˜ä»»åŠ¡2è¿›å…¥\nTime 200ms: é«˜ä¼˜ä»»åŠ¡3è¿›å…¥\nTime 300ms: é«˜ä¼˜ä»»åŠ¡4è¿›å…¥\n// ä½ä¼˜ä»»åŠ¡ä¸€ç›´å¾—ä¸åˆ°æ‰§è¡Œ\n```\n\nReact çš„è§£å†³æ–¹æ¡ˆï¼š\n\n```javascript hl:4\n// æ”¹è¿›åçš„æƒ…å†µ\nTime 0ms: é«˜ä¼˜ä»»åŠ¡1å¼€å§‹æ‰§è¡Œ\nTime 100ms: é«˜ä¼˜ä»»åŠ¡2æ‰§è¡Œ\nTime 250ms: ä½ä¼˜ä»»åŠ¡1å¾—åˆ°æ‰§è¡Œï¼ˆå› ä¸ºåˆ°è¾¾è¶…æ—¶æ—¶é—´ï¼‰\nTime 300ms: é«˜ä¼˜ä»»åŠ¡3æ‰§è¡Œ\nTime 500ms: ä½ä¼˜ä»»åŠ¡2å¾—åˆ°æ‰§è¡Œ\n```\n\n## 6. ç”ŸåŠ¨çš„ç±»æ¯”ï¼šæ’é˜Ÿ\n\nè¿™å°±åƒæ’é˜Ÿä¹°ç¥¨ï¼š\n\n- æ™®é€šçª—å£ï¼šæŒ‰å…ˆæ¥ååˆ°\n- VIPçª—å£ï¼šä¼˜å…ˆå¤„ç†\n\n- Reactçš„è§£å†³æ–¹æ¡ˆç›¸å½“äºï¼š\n  1. ç»™æ™®é€šç”¨æˆ·å‘æ”¾\"ç­‰å¾…æ—¶é—´è¿‡é•¿\"åŠ æ€¥åˆ¸\n  2. è¶…è¿‡ç­‰å¾…æ—¶é™çš„æ™®é€šç”¨æˆ·å¯ä»¥å»VIPçª—å£\n  3. ç¡®ä¿æ¯ä¸ªäººæœ€ç»ˆéƒ½èƒ½å¾—åˆ°æœåŠ¡\n\né€šè¿‡è¿™ç§æœºåˆ¶ï¼ŒReact ç¡®ä¿ï¼š\n\n1. é«˜ä¼˜å…ˆçº§ä»»åŠ¡èƒ½å¤Ÿå¿«é€Ÿå“åº”ï¼ˆæ¯”å¦‚ç”¨æˆ·äº¤äº’ï¼‰\n2. ä½ä¼˜å…ˆçº§ä»»åŠ¡ä¸ä¼šæ— é™æœŸç­‰å¾…ï¼ˆæ¯”å¦‚æ•°æ®æ›´æ–°ã€æ¸²æŸ“ï¼‰\n3. ç³»ç»Ÿæ•´ä½“è¿è¡Œæ›´åŠ å…¬å¹³å’Œé«˜æ•ˆ\n\nè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ React åº”ç”¨ä¸­ï¼Œå³ä½¿æœ‰å¤§é‡çš„æ›´æ–°ä»»åŠ¡ï¼Œç”¨æˆ·äº¤äº’ä¾ç„¶æµç•…ï¼Œè€Œä¸”åå°æ›´æ–°æœ€ç»ˆä¹Ÿéƒ½èƒ½å®Œæˆçš„åŸå› ã€‚","f6ed501b72355dd3b249abb75a48afd3":"\n# React çš„ Render Propsæ˜¯ä»€ä¹ˆï¼Ÿ\n\nRender Props æ˜¯ React ä¸­ä¸€ç§å¤ç”¨ç»„ä»¶é€»è¾‘çš„é«˜çº§æŠ€å·§ã€‚è®©æˆ‘è¯¦ç»†è§£é‡Šä¸€ä¸‹ï¼š\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åŸºæœ¬æ¦‚å¿µ \n\n```javascript\n// Render Props çš„åŸºæœ¬å½¢å¼\n<DataProvider render={data => (\n  <h1>Hello {data.name}</h1>\n)}/>\n```\n\nè¿™æ˜¯ä¸€ç§ç»„ä»¶**é€šè¿‡ä¸€ä¸ªå‡½æ•° prop æ¥ä¼ é€’éœ€è¦æ¸²æŸ“çš„å†…å®¹çš„æŠ€æœ¯**ã€‚è¿™ä¸ª prop é€šå¸¸å‘½åä¸º renderï¼Œä½†ä¸æ˜¯å¿…é¡»çš„ã€‚\n\n## 2. å…·ä½“ç¤ºä¾‹ï¼šä»¥ä¸€ä¸ªé¼ æ ‡è¿½è¸ªå™¨ä¸ºä¾‹\n\n```javascript hl:16\n// MouseTracker ç»„ä»¶\nclass MouseTracker extends React.Component {\n  state = { x: 0, y: 0 };\n\n  handleMouseMove = (event) => {\n    this.setState({\n      x: event.clientX,\n      y: event.clientY\n    });\n  }\n\n  render() {\n    return (\n      <div onMouseMove={this.handleMouseMove}>\n        {/* è°ƒç”¨ render prop */}\n        {this.props.render(this.state)}\n      </div>\n    );\n  }\n}\n\n// ä½¿ç”¨ MouseTracker\n<MouseTracker\n  render={({ x, y }) => (\n    <h1>é¼ æ ‡ä½ç½®ï¼š({x}, {y})</h1>\n  )}\n/>\n```\n\n## 3. children prop æ–¹å¼\n```javascript hl:8\n// ä¹Ÿå¯ä»¥ä½¿ç”¨ children ä½œä¸ºå‡½æ•°\nclass MouseTracker extends React.Component {\n  // ... åŒä¸Šçš„ state å’Œ handleMouseMove\n\n  render() {\n    return (\n      <div onMouseMove={this.handleMouseMove}>\n        {this.props.children(this.state)}\n      </div>\n    );\n  }\n}\n\n// ä½¿ç”¨æ–¹å¼\n<MouseTracker>\n  {({ x, y }) => (\n    <h1>é¼ æ ‡ä½ç½®ï¼š({x}, {y})</h1>\n  )}\n</MouseTracker>\n```\n\n## 4. ç°ä»£æ›¿ä»£æ–¹æ¡ˆç°ï¼šåœ¨æ›´æ¨èä½¿ç”¨ Hooks æ¥å®ç°ç±»ä¼¼åŠŸèƒ½\n```javascript\nfunction useMousePosition() {\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n\n  useEffect(() => {\n    const handleMouseMove = (event) => {\n      setPosition({ x: event.clientX, y: event.clientY });\n    };\n\n    window.addEventListener('mousemove', handleMouseMove);\n    return () => window.removeEventListener('mousemove', handleMouseMove);\n  }, []);\n\n  return position;\n}\n\n// ä½¿ç”¨\nfunction App() {\n  const { x, y } = useMousePosition();\n  return <h1>é¼ æ ‡ä½ç½®ï¼š({x}, {y})</h1>;\n}\n```\n\n## 5. Vue çš„è§£å†³æ–¹æ¡ˆ\n\nVue çš„ä½œç”¨åŸŸæ’æ§½å’Œ React çš„ Render Props æ˜¯è§£å†³ç›¸åŒé—®é¢˜çš„ä¸åŒæ–¹æ¡ˆ\n\n## 6. æœ€å\n\nRender Props æ˜¯ React æ—©æœŸä¸€ä¸ªé‡è¦çš„ä»£ç å¤ç”¨æ¨¡å¼ï¼Œè™½ç„¶ç°åœ¨æœ‰äº† Hooks è¿™æ ·æ›´ç°ä»£çš„è§£å†³æ–¹æ¡ˆï¼Œä½†ç†è§£ Render Props å¯¹äºç†è§£ React çš„ç»„ä»¶å¤ç”¨æ€æƒ³ä»ç„¶å¾ˆæœ‰å¸®åŠ©ã€‚è€Œä¸”åœ¨ä¸€äº›ç‰¹å®šåœºæ™¯ä¸‹ï¼ŒRender Props ä»ç„¶æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚\n\n","f083a7fafd2f5b58adefd5d4ccabc56a":"\n# React åŸç†ç¯‡ï¼ˆä¸€ï¼‰\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‰ç«¯æ¡†æ¶æ€§èƒ½é—®é¢˜éƒ½å¯ä»¥å½’å› ä»¥ä¸‹ä¸¤ä¸ª \n\n### 1.1. CPU ç“¶é¢ˆ\n\n- JavaScript æ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„\n- åœ¨ä¸»çº¿ç¨‹ä¸Šè¿›è¡Œå¤§é‡è®¡ç®—ä¼šé˜»å¡æ¸²æŸ“\n- é•¿ä»»åŠ¡ï¼ˆ>50msï¼‰ä¼šå¯¼è‡´é¡µé¢å“åº”è¿Ÿé’\n\t- æ¯”å¦‚åŒæ—¶æ¸²æŸ“ 30000 ä¸ª DOM\n\t- vdom ç›¸å…³çš„å¤„ç†\n\t\t- æ‰€ä»¥ï¼Œè¦æ±‚ React å…·æœ‰å°†é•¿ä»»åŠ¡æ‹†è§£çš„èƒ½åŠ›ï¼Œå³ æ—¶é—´åˆ‡ç‰‡ `time slice`\n\næœªä½¿ç”¨æ—¶é—´åˆ‡ç‰‡çš„æ•ˆæœå¦‚ä¸‹ï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241029.png)\n\nä½¿ç”¨æ—¶é—´åˆ‡ç‰‡çš„æ•ˆæœå¦‚ä¸‹ï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241029-1.png)\n### 1.2. I/O ç“¶é¢ˆ\n\n- ä¸»è¦çš„ `I/O ç“¶é¢ˆ`æ˜¯ç½‘ç»œ\n- åˆæ¯”å¦‚ è¾“å…¥æ‰“å­—\n- è§£å†³æ–¹æ¡ˆ\n\t- ç»“åˆäººæœºäº¤äº’ï¼Œç”¨æˆ·å¯¹ä¸åŒçš„æ“ä½œçš„æ„ŸçŸ¥æ•æ„Ÿåº¦ä¸ä¸€æ ·ï¼Œæ¯”å¦‚\n\t\t- é”®ç›˜è¾“å…¥åˆ°æ˜¾ç¤ºï¼Œç¨å¾®å»¶è¿Ÿï¼Œç”¨æˆ·ä¹Ÿèƒ½æ„Ÿè§‰åˆ°\n\t\t- é¼ æ ‡æ‚¬åœï¼Œç¨å¾®å»¶è¿Ÿï¼Œç”¨æˆ·ä¹Ÿèƒ½æ„Ÿè§‰åˆ°\n\t\t- ç‚¹å‡»æŒ‰é’®ï¼Œåˆ°æ•°æ®æ˜¾ç¤ºï¼Œæœ‰ç‚¹å»¶è¿Ÿç”¨æˆ·ä¹Ÿèƒ½æ¥å—\n\t- æ‰€ä»¥ï¼Œå¯¹ä¸åŒæ“ä½œï¼Œè¦æ±‚ React å…·æœ‰\n\t\t- æœ‰ä¼˜å…ˆçº§è°ƒåº¦çš„èƒ½åŠ›ï¼Œè¿™å°±è¦æ±‚\n\t\t\t- è°ƒç”¨ç®—æ³•\n\t\t\t- å¯ä¸­æ–­ VDOMï¼Œæ¯•ç«Ÿä¸ä¸­æ–­ï¼ŒCPU ä¸€ç›´å ç€\n\n## 2. React æ¶æ„æ¼”å˜\n\n### 2.1. React 15 ï¼šReconciler æ¶æ„\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-21.png)\n\n#### 2.1.1. Reconciler åè°ƒå™¨\n\nåŒæ­¥çš„ï¼ŒVDOM çš„å®ç°\n\n```javascript hl:3\n// React15 ä¸­çš„é€’å½’å¤„ç†ç¤ºæ„\nfunction reconcileChildrenArray(returnFiber, currentFirstChild, newChildren) {\n  // åŒæ­¥é€’å½’å¤„ç†ï¼Œæ— æ³•ä¸­æ–­\n  for (let i = 0; i < newChildren.length; i++) {\n    reconcileChildrenArray(/*...*/)\n  }\n}\n```\n\n#### 2.1.2. Renderer æ¸²æŸ“å™¨\n\nè´Ÿè´£å°† UIå˜åŒ–æ¸²æŸ“åˆ°å®¿ä¸»ç¯å¢ƒ\n\n### 2.2. React 16 ï¼šæ”¯æŒæ—¶é—´åˆ‡ç‰‡çš„ Fiber Reconciler\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241031-22.png)\n\n- æ–°å¼•å…¥ï¼š`Scheduler è°ƒåº¦å™¨`ï¼Œè°ƒåº¦ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œé«˜ä¼˜çš„ä¼˜å…ˆè¿›å…¥ Reconciler\n- `Reconciler åè°ƒå™¨`ï¼šVDOM çš„å®ç°ï¼Œè®¡ç®—å‡º UI çš„å˜åŒ–\n- Renderer æ¸²æŸ“å™¨ï¼šè´Ÿè´£å°† UIå˜åŒ–æ¸²æŸ“åˆ°å®¿ä¸»ç¯å¢ƒ\n\n#### 2.2.1. æ¼”ç¤ºæ›´æ–°æ•ˆæœ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241029-2.png)\n\n### 2.3. Legacyï¼ˆé—äº§ï¼‰ æ¨¡å¼ï¼ˆReact 16/17 é»˜è®¤æ¨¡å¼ï¼‰\n\nè¿™æ˜¯ React æœ€å¤è€çš„æ¸²æŸ“æ¨¡å¼ï¼Œé€šè¿‡ `ReactDOM.render()` åˆ›å»ºåº”ç”¨ã€‚\n\n```javascript\n// Legacy æ¨¡å¼\nimport ReactDOM from 'react-dom';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n```\n\nç‰¹ç‚¹ï¼š\n1. åŒæ­¥æ¸²æŸ“\n2. ä¸æ”¯æŒæ–°çš„å¹¶å‘ç‰¹æ€§\n3. æ›´æ–°æ˜¯åŒæ­¥çš„ä¸”ä¸å¯ä¸­æ–­\n\n### 2.4. Blocking æ¨¡å¼ï¼ˆReact 16.x å®éªŒæ€§ï¼‰\n\nè¿™æ˜¯å‘å¹¶å‘æ¨¡å¼è¿‡æ¸¡çš„ä¸­é—´æ¨¡å¼ã€‚\n\n```javascript hl:4\n// Blocking æ¨¡å¼\nimport ReactDOM from 'react-dom';\n\nReactDOM.createBlockingRoot(\n  document.getElementById('root')\n).render(<App />);\n```\n\nç‰¹ç‚¹ï¼š\n1. éƒ¨åˆ†å¹¶å‘æ¨¡å¼ç‰¹æ€§\n2. æ¯” Legacy æ¨¡å¼æ›´æ¥è¿‘å¹¶å‘\n3. ä½œä¸ºè¿‡æ¸¡é˜¶æ®µçš„æ¨¡å¼\n\n### 2.5. Concurrent æ¨¡å¼ï¼ˆReact 18+ï¼‰\n\næœ€æ–°çš„æ¸²æŸ“æ¨¡å¼ï¼Œæ”¯æŒæ‰€æœ‰æ–°ç‰¹æ€§ã€‚\n\n```javascript hl:5\n// Concurrent æ¨¡å¼\nimport ReactDOM from 'react-dom/client';\n\n// åˆ›å»ºæ ¹èŠ‚ç‚¹\nconst root = ReactDOM.createRoot(\n  document.getElementById('root')\n);\n\n// æ¸²æŸ“åº”ç”¨\nroot.render(<App />);\n```\n\nç‰¹ç‚¹ï¼š\n1. å®Œæ•´çš„å¹¶å‘ç‰¹æ€§æ”¯æŒ\n2. å¯ä¸­æ–­æ¸²æŸ“\n3. è‡ªåŠ¨æ‰¹å¤„ç†\n4. ä¼˜å…ˆçº§è°ƒåº¦\n\n```javascript hl:12,9\n// Concurrent æ¨¡å¼ç‰¹æ€§ç¤ºä¾‹\nfunction ConcurrentComponent() {\n  const [isPending, startTransition] = useTransition();\n  const [list, setList] = useState([]);\n  const [query, setQuery] = useState('');\n\n  // æœç´¢å¤„ç†\n  const handleSearch = (e) => {\n    // ç«‹å³æ›´æ–°è¾“å…¥å€¼ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰\n    setQuery(e.target.value);\n\n    // å°†æœç´¢ç»“æœæ›´æ–°æ ‡è®°ä¸ºè½¬æ¢ï¼ˆä½ä¼˜å…ˆçº§ï¼‰\n    startTransition(() => {\n      const searchResults = performExpensiveSearch(e.target.value);\n      setList(searchResults);\n    });\n  };\n\n  return (\n    <div>\n      <input\n        value={query}\n        onChange={handleSearch}\n        placeholder=\"Search...\"\n      />\n      \n      {isPending ? (\n        <div>Loading...</div>\n      ) : (\n        <ul>\n          {list.map(item => (\n            <li key={item.id}>{item.name}</li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n```\n\n## 3. æ¶æ„åˆ†å±‚ä¸æ ¸å¿ƒåŒ…çš„å…³ç³»\n\n![undefined](#)","51243e1615c051359859b0b32cb3322c":"\n# useMemo ä¸ useCallback çš„ä½œç”¨å’Œä½¿ç”¨åœºæ™¯\n\n`#React` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ‰§è¡Œæ—¶æœº \n\n- ç»„ä»¶`é¦–æ¬¡`æ¸²æŸ“æ—¶æ‰§è¡Œä¸€æ¬¡\n- å½“ä¸”ä»…å½“`ä¾èµ–é¡¹`å‘ç”Ÿå˜åŒ–æ—¶é‡æ–°æ‰§è¡Œ\n- å¦‚æœä¾èµ–é¡¹æ²¡æœ‰å˜åŒ–ï¼Œå³ä½¿ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä¹Ÿä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜çš„å€¼è€Œä¸æ‰§è¡Œå›è°ƒ\n\n## 2. æœ€ä½³å®è·µ\n\n- ç®€å•è®¡ç®—ä¸éœ€è¦ `useMemo`ï¼Œå› ä¸º\n\t- useMemo æœ¬èº«ä¹Ÿæœ‰å¼€é”€ï¼ˆåˆ›å»ºå‡½æ•°ã€ç»´æŠ¤ä¾èµ–åˆ—è¡¨ç­‰ï¼‰\n\t- ä¸»è¦ç”¨äºä¼˜åŒ–`å¤æ‚è®¡ç®—`æˆ–éœ€è¦`ä¿æŒå¼•ç”¨ç¨³å®š`çš„åœºæ™¯\n\t\t- å› ä¸ºåªåœ¨ä¾èµ–é¡¹æ”¹å˜æ—¶`åˆ›å»ºæ–°å¯¹è±¡`\n- æ­£ç¡®çš„ä¾èµ–é¡¹è®¾ç½®\n\t- æ¯”å¦‚ä¾èµ–é¡¹æ•°ç»„ä¸ºç©ºï¼Œä½†ä½¿ç”¨äº† `props.data`\n- é¿å…åœ¨ useMemo ä¸­è¿›è¡Œå‰¯ä½œç”¨æ“ä½œï¼Œæ¯”å¦‚è¯·æ±‚æ•°æ®\n\t- æ­£ç¡®çš„åšæ³•æ˜¯ï¼šä½¿ç”¨ `useEffect` å¤„ç†å‰¯ä½œç”¨ï¼Œç„¶åè¯·æ±‚å®Œæ•°æ®åï¼Œè®¾ç½® dataï¼Œç„¶åå†å°† data ä½œä¸ºä¾èµ–é¡¹\n\n## 3. æ³¨æ„äº‹é¡¹\n\n- ä¾èµ–é¡¹åˆ« `{ ...data }` ï¼Œæ¯æ¬¡éƒ½ä¸ä¸€æ ·ï¼Œå¯¼è‡´ç¼“å­˜å¤±è´¥ï¼Œå› ä¸ºæŒ‡å®šå…·ä½“ä¾èµ–å±æ€§å€¼ï¼Œæ¯”å¦‚ `data.id`\n- useMemo åˆ«æ”¾åˆ° if è¯­å¥ä¸­ï¼Œæ¸…åœ¨é¡¶å±‚ä½¿ç”¨\n- å¦‚æœéœ€è¦ä¾èµ–é¡¹çš„æ·±åº¦æ¯”è¾ƒ\n\t- å»ºè®® 1ï¼šä½¿ç”¨å…·ä½“å±æ€§\n\t- å»ºè®® 2ï¼šæ·±æ‹·è´ï¼Œä½†ä¸å»ºè®®\n- æ·»åŠ å¿…è¦ä¾èµ–é¡¹ï¼Œå¦åˆ™å¯èƒ½ä¼šé—­åŒ…é™·é˜±ï¼ˆå³ä½¿ç”¨äº†æ—§çš„å˜é‡ï¼‰\n\n## 4. é…åˆå…¶ä»– hooks ä½¿ç”¨\n\n```javascript\nfunction OptimizedComponent() {\n  // 1. ä¸ useState é…åˆ\n  const [data, setData] = useState([]);\n  \n  // 2. ä¸ useCallback é…åˆ\n  const memoizedData = useMemo(() => {\n    return processData(data);\n  }, [data]);\n  \n  const handleData = useCallback(() => {\n    doSomethingWith(memoizedData);\n  }, [memoizedData]); // ä½¿ç”¨ memoized å€¼ä½œä¸ºä¾èµ–\n}\n\n```\n\n## 5. å’Œ  vue çš„ computed çš„å¼‚åŒ\n\n- å“åº”å¼ç³»ç»Ÿï¼š\n   - Vue computed åŸºäºå“åº”å¼ç³»ç»Ÿï¼ˆref/reactiveï¼‰\n   - React useMemo åŸºäº`ä¾èµ–æ•°ç»„`æ¯”è¾ƒ\n- æ˜¯å¦`è‡ªåŠ¨`ä¾èµ–è¿½è¸ª\n   - Vue computed `è‡ªåŠ¨è¿½è¸ªä¾èµ–`ï¼Œæ›´ç¬¦åˆå“åº”å¼ç¼–ç¨‹\n   - React useMemo éœ€è¦æ‰‹`åŠ¨å£°æ˜ä¾èµ–`ï¼Œæ›´æ˜¾å¼\n- æ˜¯å¦æ”¯æŒå†™\n   - Vue computed æ”¯æŒ getter/setter\n   - React useMemo åªæ”¯æŒ getter\n- ä½¿ç”¨æ–¹å¼\n   - Vue computed è¿”å›å“åº”å¼å¼•ç”¨ï¼ˆéœ€è¦ .valueï¼‰\n   - React useMemo ç›´æ¥è¿”å›å€¼\n- é›†æˆåº¦ï¼š\n   - Vue computed ä¸å…¶ä»–ç»„åˆå¼ API ç´§å¯†é›†æˆ\n   - React useMemo ç›¸å¯¹ç‹¬ç«‹\n- å‰¯ä½œç”¨ï¼š\n\t- å‰¯ä½œç”¨ä½¿ç”¨ watch/watchEffect\n\t- å‰¯ä½œç”¨ä½¿ç”¨ useEffectï¼Œç„¶åä¿®æ”¹çŠ¶æ€å€¼ï¼Œå†å°†çŠ¶æ€å€¼ä½œä¸º useMemo çš„ä¾èµ–é¡¹\n- è®¡ç®—æ—¶æœº\n\t- vue åªæœ‰ä¾èµ–å˜åŒ–æ—¶é‡æ–°è®¡ç®—\n\t- react æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ£€æŸ¥ä¾èµ–æ•°ç»„ï¼Œä¾èµ–æœªå˜åŒ–æ—¶ä½¿ç”¨ç¼“å­˜å€¼\n\næœ€åï¼ŒVue çš„ç»„åˆå¼ API ä¸­çš„ computed æ›´ç¬¦åˆ`å“åº”å¼ç¼–ç¨‹èŒƒå¼`ï¼Œè€Œ React çš„ useMemo åˆ™æ›´ç¬¦åˆ`å‡½æ•°å¼ç¼–ç¨‹æ€ç»´`ã€‚\n\n## 6. ä¸ useCallback çš„åŒºåˆ«\n\nå®é™…ä¸Šï¼Œ`useCallback` æ˜¯ `useMemo` çš„ç‰¹æ®Šç”¨ä¾‹ï¼š\n\n```javascript\n// useCallback çš„å®ç°åŸç†ç­‰åŒäºï¼š\nconst callback = useCallback(fn, deps);\n// ç­‰ä»·äº\nconst callback = useMemo(() => fn, deps);\n```\n\n4. æ€§èƒ½ä¼˜åŒ–åœºæ™¯ï¼š\n\n```jsx\n// useMemo - æ˜‚è´µè®¡ç®—çš„ä¼˜åŒ–\nfunction DataGrid({ data, config }) {\n  // å¤æ‚æ•°æ®å¤„ç†çš„ç»“æœç¼“å­˜\n  const processedData = useMemo(() => {\n    return data.map(item => ({\n      ...item,\n      processed: expensiveOperation(item, config)\n    }));\n  }, [data, config]);\n\n  return <Table data={processedData} />;\n}\n\n// useCallback - é˜²æ­¢å­ç»„ä»¶é‡æ¸²æŸ“\nfunction TodoList() {\n  const [todos, setTodos] = useState([]);\n\n  // ç¼“å­˜æ·»åŠ  todo çš„å‡½æ•°\n  const handleAddTodo = useCallback((text) => {\n    setTodos(prev => [...prev, { id: Date.now(), text }]);\n  }, []); // ä¸ä¾èµ–ä»»ä½•çŠ¶æ€ï¼Œæ‰€ä»¥æ˜¯ç©ºæ•°ç»„\n\n  return (\n    <>\n      <TodoInput onAdd={handleAddTodo} /> \n      {/* å­ç»„ä»¶ä½¿ç”¨ React.memo */}\n      <TodoItems items={todos} />\n    </>\n  );\n}\n```\n\n5. å¸¸è§é”™è¯¯ç”¨æ³•ï¼š\n\n```javascript\n// âŒ é”™è¯¯ï¼šä¸å¿…è¦çš„ useMemo\nconst SimpleComponent = ({ name }) => {\n  // ç®€å•çš„å­—ç¬¦ä¸²æ‹¼æ¥ä¸éœ€è¦ useMemo\n  const greeting = useMemo(() => `Hello, ${name}!`, [name]);\n  return <div>{greeting}</div>;\n};\n\n// âŒ é”™è¯¯ï¼šä¸å¿…è¦çš„ useCallback\nconst SimpleButton = () => {\n  // ç®€å•ç»„ä»¶ä¸éœ€è¦ useCallback\n  const handleClick = useCallback(() => {\n    console.log('clicked');\n  }, []);\n  return <button onClick={handleClick}>Click me</button>;\n};\n\n// âœ… æ­£ç¡®ï¼šæœ‰æ€§èƒ½å½±å“æ—¶ä½¿ç”¨\nconst ExpensiveComponent = ({ data }) => {\n  // å¤æ‚è®¡ç®—éœ€è¦ç¼“å­˜\n  const processedData = useMemo(() => {\n    return heavyComputation(data);\n  }, [data]);\n\n  return <div>{processedData}</div>;\n};\n```\n\n6. ä¸ React.memo é…åˆä½¿ç”¨ï¼š\n\n```javascript\n// å­ç»„ä»¶ä½¿ç”¨ React.memo åŒ…è£¹\nconst ChildComponent = React.memo(({ onClick, data }) => {\n  console.log(\"Child rendered\");\n  return (\n    <button onClick={onClick}>\n      {data.text}\n    </button>\n  );\n});\n\n// çˆ¶ç»„ä»¶\nfunction ParentComponent() {\n  const [count, setCount] = useState(0);\n  \n  // ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°\n  const handleClick = useCallback(() => {\n    console.log('Button clicked');\n  }, []); // ç©ºä¾èµ–æ•°ç»„\n  \n  // ä½¿ç”¨ useMemo ç¼“å­˜æ•°æ®\n  const data = useMemo(() => ({\n    text: `Current count is ${count}`\n  }), [count]);\n\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={() => setCount(count + 1)}>Increment</button>\n      <ChildComponent onClick={handleClick} data={data} />\n    </div>\n  );\n}\n```\n\nä¸»è¦åŒºåˆ«æ€»ç»“ï¼š\n\n1. ç”¨é€”ï¼š\n   - useMemoï¼šç¼“å­˜`å‡½æ•°è®¡ç®—çš„ç»“æœ`\n   - useCallbackï¼šç¼“å­˜å‡½æ•°å¼•ç”¨\n2. è¿”å›å€¼ï¼š\n   - useMemoï¼šè¿”å›ç¼“å­˜çš„å€¼\n   - useCallbackï¼šè¿”å›ç¼“å­˜çš„å‡½æ•°\n3. ä½¿ç”¨åœºæ™¯ï¼š\n   - useMemoï¼š\n     - æ˜‚è´µçš„è®¡ç®—æ“ä½œ\n     - å¤æ‚çš„æ•°æ®å¤„ç†\n     - éœ€è¦ç¼“å­˜å¼•ç”¨çš„å¯¹è±¡\n   - useCallbackï¼š\n     - ä¼ é€’ç»™å­ç»„ä»¶çš„å›è°ƒå‡½æ•°\n     - é˜²æ­¢ä¸å¿…è¦çš„é‡æ¸²æŸ“\n     - éœ€è¦ä¿æŒå‡½æ•°å¼•ç”¨ç¨³å®šçš„åœºæ™¯\n4. æ€§èƒ½è€ƒè™‘ï¼š\n   - ä¸æ˜¯æ‰€æœ‰å€¼éƒ½éœ€è¦ useMemo\n   - ä¸æ˜¯æ‰€æœ‰å‡½æ•°éƒ½éœ€è¦ useCallback\n   - åº”è¯¥åœ¨å®é™…é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶æ‰ä½¿ç”¨\n\nä½¿ç”¨å»ºè®®ï¼š\n\n1. ä¼˜å…ˆè€ƒè™‘ä»£ç çš„å¯è¯»æ€§å’Œç»´æŠ¤æ€§ï¼Œè€Œä¸æ˜¯è¿‡æ—©ä¼˜åŒ–\n\n2. åœ¨ä»¥ä¸‹æƒ…å†µä½¿ç”¨ useMemoï¼š\n   - è®¡ç®—æˆæœ¬é«˜çš„æ“ä½œ\n   - éœ€è¦ä¿æŒå¼•ç”¨ç›¸ç­‰çš„å¯¹è±¡\n\n3. åœ¨ä»¥ä¸‹æƒ…å†µä½¿ç”¨ useCallbackï¼š\n   - ä¼ é€’ç»™ä½¿ç”¨ React.memo çš„å­ç»„ä»¶çš„å‡½æ•°\n   - å‡½æ•°ä½œä¸ºå…¶ä»– Hook çš„ä¾èµ–é¡¹\n\n4. é¿å…è¿‡åº¦ä½¿ç”¨ï¼š\n   - ç®€å•çš„è®¡ç®—ä¸éœ€è¦ useMemo\n   - ç®€å•çš„äº‹ä»¶å¤„ç†å‡½æ•°ä¸éœ€è¦ useCallback\n\n5. ç»“åˆ React.memo ä½¿ç”¨å¯ä»¥è·å¾—æœ€ä½³æ€§èƒ½ä¼˜åŒ–æ•ˆæœ\n\nè®°ä½ï¼Œè¿™äº› Hook ä¸»è¦æ˜¯ä¸ºäº†æ€§èƒ½ä¼˜åŒ–æœåŠ¡çš„ï¼Œä¸æ˜¯å¿…é¡»ä½¿ç”¨çš„ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒReact çš„é»˜è®¤è¡Œä¸ºå·²ç»è¶³å¤Ÿå¿«äº†ã€‚åªæœ‰åœ¨ç¡®å®é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶ï¼Œæ‰éœ€è¦è€ƒè™‘ä½¿ç”¨è¿™äº›ä¼˜åŒ–æ‰‹æ®µã€‚\n\n## 7. useCallback çš„å¸¸è§ä½¿ç”¨åœºæ™¯\n\n### 7.1. é˜²æ­¢å­ç»„ä»¶é‡å¤æ¸²æŸ“ï¼ˆæœ€å¸¸è§åœºæ™¯ï¼‰\n\n```javascript hl:1,12\n// å­ç»„ä»¶\nconst ExpensiveChild = React.memo(({ onItemClick }) => {\n  // é€šè¿‡è¿™ä¸ªæ—¥å¿—è§‚å¯Ÿæ¸²æŸ“æƒ…å†µ\n  console.log(\"Child render\"); \n  return (\n    <div>\n      <button onClick={() => onItemClick(1)}>Click me</button>\n    </div>\n  );\n});\n\n// çˆ¶ç»„ä»¶\nfunction Parent() {\n  const [count, setCount] = useState(0);\n  const [otherState, setOtherState] = useState(false);\n\n  // âœ… ä½¿ç”¨ useCallback ç¼“å­˜å›è°ƒå‡½æ•°\n  const handleItemClick = useCallback((id) => {\n    console.log('Item clicked:', id);\n    // ä¸€äº›å¤æ‚çš„æ“ä½œ\n  }, []); // ç©ºä¾èµ–æ•°ç»„å› ä¸ºè¿™ä¸ªå‡½æ•°ä¸ä¾èµ–ä»»ä½• props æˆ– state\n\n  return (\n    <div>\n      <button onClick={() => setCount(count + 1)}>\n        Count: {count}\n      </button>\n      <button onClick={() => setOtherState(!otherState)}>\n        Toggle: {otherState.toString()}\n      </button>\n      <ExpensiveChild onItemClick={handleItemClick} />\n    </div>\n  );\n}\n```\n\n### 7.2. åœ¨ useEffect ä¸­ä½¿ç”¨çš„å‡½æ•°\n\n```javascript\nfunction SearchComponent({ searchType }) {\n  const [results, setResults] = useState([]);\n  const [query, setQuery] = useState('');\n\n  // âœ… ç¼“å­˜æœç´¢å‡½æ•°ï¼Œé¿å… useEffect ä¸å¿…è¦çš„è§¦å‘\n  const handleSearch = useCallback(async (searchText) => {\n    try {\n      const response = await fetch(\n        `/api/search?type=${searchType}&q=${searchText}`\n      );\n      const data = await response.json();\n      setResults(data);\n    } catch (error) {\n      console.error('Search failed:', error);\n    }\n  }, [searchType]); // åªä¾èµ– searchType\n\n  // ç°åœ¨ useEffect åªä¼šåœ¨ query æˆ– handleSearch å˜åŒ–æ—¶æ‰§è¡Œ\n  useEffect(() => {\n    if (query) {\n      handleSearch(query);\n    }\n  }, [query, handleSearch]);\n\n  return (\n    <div>\n      <input\n        value={query}\n        onChange={(e) => setQuery(e.target.value)}\n        placeholder=\"Search...\"\n      />\n      <ul>\n        {results.map(item => (\n          <li key={item.id}>{item.name}</li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n```\n\n### 7.3. äº‹ä»¶ç›‘å¬å™¨çš„å¤„ç†\n\n```javascript\nfunction WindowResizeHandler() {\n  const [windowSize, setWindowSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight\n  });\n\n  // âœ… ç¼“å­˜ resize å¤„ç†å‡½æ•°\n  const handleResize = useCallback(() => {\n    setWindowSize({\n      width: window.innerWidth,\n      height: window.innerHeight\n    });\n  }, []); // ä¸ä¾èµ–ä»»ä½•å˜é‡\n\n  useEffect(() => {\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [handleResize]); // ä¾èµ– handleResize\n\n  return (\n    <div>\n      Window size: {windowSize.width} x {windowSize.height}\n    </div>\n  );\n}\n```\n\n### 7.4. åœ¨è‡ªå®šä¹‰ Hook ä¸­è¿”å›å‡½æ•°\n\n```javascript\n// è‡ªå®šä¹‰ Hook\nfunction useFormField(initialValue = '') {\n  const [value, setValue] = useState(initialValue);\n  const [error, setError] = useState('');\n\n  // âœ… ç¼“å­˜éªŒè¯å’Œæ›´æ–°å‡½æ•°\n  const handleChange = useCallback((e) => {\n    const newValue = e.target.value;\n    setValue(newValue);\n    \n    // éªŒè¯é€»è¾‘\n    if (newValue.length < 3) {\n      setError('Value must be at least 3 characters');\n    } else {\n      setError('');\n    }\n  }, []); // ä¸ä¾èµ–å¤–éƒ¨å˜é‡\n\n  const reset = useCallback(() => {\n    setValue(initialValue);\n    setError('');\n  }, [initialValue]);\n\n  return {\n    value,\n    error,\n    handleChange,\n    reset\n  };\n}\n\n// ä½¿ç”¨è‡ªå®šä¹‰ Hook\nfunction Form() {\n  const username = useFormField('');\n  const password = useFormField('');\n\n  return (\n    <form>\n      <div>\n        <input\n          value={username.value}\n          onChange={username.handleChange}\n          placeholder=\"Username\"\n        />\n        {username.error && <span>{username.error}</span>}\n      </div>\n      <div>\n        <input\n          type=\"password\"\n          value={password.value}\n          onChange={password.handleChange}\n          placeholder=\"Password\"\n        />\n        {password.error && <span>{password.error}</span>}\n      </div>\n      <button type=\"button\" onClick={() => {\n        username.reset();\n        password.reset();\n      }}>\n        Reset\n      </button>\n    </form>\n  );\n}\n```\n\n5. å¤„ç†é˜²æŠ–/èŠ‚æµå‡½æ•°ï¼š\n\n```javascript\nfunction SearchInput() {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [results, setResults] = useState([]);\n\n  // âœ… ç¼“å­˜é˜²æŠ–æœç´¢å‡½æ•°\n  const debouncedSearch = useCallback(\n    debounce(async (term) => {\n      if (term) {\n        const response = await fetch(`/api/search?q=${term}`);\n        const data = await response.json();\n        setResults(data);\n      } else {\n        setResults([]);\n      }\n    }, 500),\n    [] // ç©ºä¾èµ–æ•°ç»„ï¼Œå› ä¸ºè¿™ä¸ªå‡½æ•°ä¸éœ€è¦é‡æ–°åˆ›å»º\n  );\n\n  // âœ… ç¼“å­˜è¾“å…¥å¤„ç†å‡½æ•°\n  const handleInputChange = useCallback((e) => {\n    const value = e.target.value;\n    setSearchTerm(value);\n    debouncedSearch(value);\n  }, [debouncedSearch]);\n\n  return (\n    <div>\n      <input\n        type=\"text\"\n        value={searchTerm}\n        onChange={handleInputChange}\n        placeholder=\"Search...\"\n      />\n      <ul>\n        {results.map(result => (\n          <li key={result.id}>{result.title}</li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n```\n\n6. å¤æ‚è¡¨å•å¤„ç†ï¼š\n\n```javascript\nfunction ComplexForm() {\n  const [formData, setFormData] = useState({});\n  const [errors, setErrors] = useState({});\n\n  // âœ… ç¼“å­˜å­—æ®µéªŒè¯å‡½æ•°\n  const validateField = useCallback((name, value) => {\n    let error = '';\n    switch (name) {\n      case 'email':\n        if (!value.includes('@')) {\n          error = 'Invalid email address';\n        }\n        break;\n      case 'password':\n        if (value.length < 6) {\n          error = 'Password must be at least 6 characters';\n        }\n        break;\n      // æ›´å¤šéªŒè¯è§„åˆ™...\n    }\n    return error;\n  }, []);\n\n  // âœ… ç¼“å­˜å­—æ®µæ›´æ–°å¤„ç†å‡½æ•°\n  const handleFieldChange = useCallback((e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n\n    const error = validateField(name, value);\n    setErrors(prev => ({\n      ...prev,\n      [name]: error\n    }));\n  }, [validateField]);\n\n  // âœ… ç¼“å­˜è¡¨å•æäº¤å¤„ç†å‡½æ•°\n  const handleSubmit = useCallback(async (e) => {\n    e.preventDefault();\n    const hasErrors = Object.values(errors).some(error => error);\n    if (!hasErrors) {\n      try {\n        await fetch('/api/submit', {\n          method: 'POST',\n          body: JSON.stringify(formData)\n        });\n        // å¤„ç†æˆåŠŸ\n      } catch (error) {\n        // å¤„ç†é”™è¯¯\n      }\n    }\n  }, [formData, errors]);\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        <input\n          name=\"email\"\n          onChange={handleFieldChange}\n          value={formData.email || ''}\n        />\n        {errors.email && <span>{errors.email}</span>}\n      </div>\n      <div>\n        <input\n          name=\"password\"\n          type=\"password\"\n          onChange={handleFieldChange}\n          value={formData.password || ''}\n        />\n        {errors.password && <span>{errors.password}</span>}\n      </div>\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n```\n\nä½¿ç”¨å»ºè®®ï¼š\n\n1. ä¼˜å…ˆè€ƒè™‘ä»¥ä¸‹åœºæ™¯ä½¿ç”¨ useCallbackï¼š\n   - ä¼ é€’ç»™ä½¿ç”¨ React.memo() çš„å­ç»„ä»¶çš„å‡½æ•°\n   - ä½œä¸º useEffect çš„ä¾èµ–é¡¹çš„å‡½æ•°\n   - åœ¨è‡ªå®šä¹‰ Hook ä¸­è¿”å›çš„å‡½æ•°\n   - éœ€è¦ç¨³å®šå¼•ç”¨çš„äº‹ä»¶å¤„ç†å‡½æ•°\n\n2. é¿å…è¿‡åº¦ä½¿ç”¨ï¼š\n   - ç®€å•çš„å†…è”äº‹ä»¶å¤„ç†å™¨ä¸éœ€è¦ useCallback\n   - ç»„ä»¶å†…éƒ¨ä½¿ç”¨çš„å‡½æ•°é€šå¸¸ä¸éœ€è¦ useCallback\n   - åªæ¸²æŸ“ä¸€æ¬¡çš„ç»„ä»¶ä¸éœ€è¦ useCallback\n\n3. æ€§èƒ½ä¼˜åŒ–åŸåˆ™ï¼š\n   - å…ˆæµ‹é‡ï¼Œåä¼˜åŒ–\n   - ä½¿ç”¨ React DevTools Profiler æ£€æµ‹æ€§èƒ½é—®é¢˜\n   - å…³æ³¨å®é™…ç”¨æˆ·ä½“éªŒè€Œä¸æ˜¯ç†è®ºä¼˜åŒ–\n\n4. ç»“åˆå…¶ä»–ä¼˜åŒ–æŠ€æœ¯ï¼š\n   - é…åˆ React.memo ä½¿ç”¨\n   - è€ƒè™‘ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ\n   - é€‚å½“ä½¿ç”¨çŠ¶æ€æå‡å’Œç»„ä»¶æ‹†åˆ†\n\nè®°ä½ï¼ŒuseCallback æ˜¯ä¸€ä¸ªä¼˜åŒ–å·¥å…·ï¼Œä¸æ˜¯å¿…éœ€å“ã€‚åªæœ‰åœ¨ç¡®å®éœ€è¦ä¼˜åŒ–æ€§èƒ½çš„æ—¶å€™æ‰ä½¿ç”¨å®ƒï¼Œè¿‡åº¦ä½¿ç”¨åè€Œå¯èƒ½å¯¼è‡´ä»£ç å¤æ‚åº¦å¢åŠ è€Œæ€§èƒ½æ”¶ç›Šæœ‰é™ã€‚","f366fc3d350856d4b1561289fd99374a":"\n# useRefã€forwardRef çš„ç”¨æ³•åŠå®ç°åŸç†\n\n`#React` \n\n## ç›®å½•\n<!-- toc -->\n ## 1. useRef  \n### 1.1. useRef çš„ä½œç”¨\n\n- è·å– DOM å¼•ç”¨\n- åˆ›å»ºå…ƒç´ å¯¹è±¡ï¼Œåªè¦å‡½æ•°ç»„ä»¶æœªè¢«é”€æ¯ï¼ŒåŸå§‹å¯¹è±¡å°±ä¸€ç›´å­˜åœ¨ï¼Œæ•…å¯ä»¥ç”¨å®ƒæ¥`ä¿å­˜æ•°æ®`\n- ä¿å­˜å‰ä¸€æ¬¡çš„å€¼\n- è®°å¾—éƒ½å­˜åœ¨ `.current` é‡Œï¼Œæœ‰ç‚¹ç±»ä¼¼äº vue çš„ `.value`\n\t- å³`let domRef = useRef()` å§‹ç»ˆæ˜¯åŒä¸€ä¸ªå¯¹è±¡å¼•ç”¨ï¼Œåªæœ‰ ref.current å¯ä»¥æ”¹å˜\n- å¯ä»¥ç”¨æ¥å­˜å‚¨å®šæ—¶å™¨ï¼Œæ–¹ä¾¿ clear\n- ç¼“å­˜ä¸éœ€è¦è§¦å‘é‡æ–°æŸ“çš„å€¼\n- åŒæ ·ï¼Œåªèƒ½åœ¨é¡¶å±‚ä½¿ç”¨\n\n### 1.2. æ³¨æ„ç‚¹\n\n- ä¸è¦åœ¨æ¸²æŸ“æ—¶ï¼Œä¿®æ”¹ ref\n- ä¸è¦è¿‡æ¸¡ä½¿ç”¨ï¼Œéœ€è¦åŒºåˆ†å“ªäº›ä½¿ç”¨ `state` æ¥ç®¡ç†\n\n### 1.3. useRef vs useState çš„åŒºåˆ«\n\n```javascript hl:10\nfunction ComparisonExample() {\n  const [stateCount, setStateCount] = useState(0);\n  const refCount = useRef(0);\n  \n  const updateState = () => {\n    setStateCount(stateCount + 1); // è§¦å‘é‡æ¸²æŸ“\n  };\n  \n  const updateRef = () => {\n    refCount.current += 1; // ä¸ä¼šè§¦å‘é‡æ¸²æŸ“\n    console.log('ref count:', refCount.current);\n  };\n  \n  return (\n    <>\n      <p>State count: {stateCount}</p>\n      <p>Ref count: {refCount.current}</p>\n      <button onClick={updateState}>Update State</button>\n      <button onClick={updateRef}>Update Ref</button>\n    </>\n  );\n}\n\n```\n\n## 2. forwardRef  ä¸ useRef é…åˆä½¿ç”¨\n\n**React ä¸å…è®¸ç»„ä»¶è®¿é—®å…¶ä»–ç»„ä»¶çš„ DOM èŠ‚ç‚¹**ã€‚ç”šè‡³è‡ªå·±çš„å­ç»„ä»¶ä¹Ÿä¸è¡Œï¼Œä½¿ç”¨ `forwardRef` å¯ä»¥\n\n```javascript hl:3\nimport { forwardRef, useRef } from 'react';\n\n// å­ç»„ä»¶ä½¿ç”¨ forwardRef \nconst MyInput = forwardRef((props, ref) => {\n  return <input {...props} ref={ref} />;\n});\n\n\n// çˆ¶ç»„ä»¶\nexport default function Form() {\n  const inputRef = useRef(null);\n\n  function handleClick() {\n    inputRef.current.focus();\n  }\n\n  return (\n    <>\n      <MyInput ref={inputRef} />\n      <button onClick={handleClick}>\n        èšç„¦è¾“å…¥æ¡†\n      </button>\n    </>\n  );\n}\n```\n\n## 3. useRef ç”¨äºæ€§èƒ½ä¼˜åŒ–\n\n```javascript hl:7\nfunction SearchResults() {\n  const [query, setQuery] = useState('');\n  const lastQuery = useRef('');\n  \n  useEffect(() => {\n    // åªæœ‰å½“æŸ¥è¯¢çœŸæ­£æ”¹å˜æ—¶æ‰å‘èµ·è¯·æ±‚\n    if (query !== lastQuery.current) {\n      lastQuery.current = query;\n      // å‘èµ·æœç´¢è¯·æ±‚\n      fetchSearchResults(query);\n    }\n  }, [query]);\n  \n  return (\n    // ...\n  );\n}\n```\n\n## 4. useRef çš„å®ç°åŸç†\n\næœ¬è´¨ä¸Šæ˜¯ç»´æŠ¤äº†ä¸€ä¸ªåŒ…å« `current` å±æ€§çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡**åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ä¿æŒä¸å˜**ã€‚\n\n### 4.1. æ•°æ®ç»“æ„ä¸\n\n```typescript\ntype Hook = {\n  memoizedState: any; // ä¿å­˜ ref å¯¹è±¡\n  next: Hook | null; // æŒ‡å‘ä¸‹ä¸€ä¸ª Hook\n  queue: UpdateQueue<any> | null; // æ›´æ–°é˜Ÿåˆ—\n  baseState: any; // åŸºç¡€çŠ¶æ€\n  baseQueue: Update<any> | null; // åŸºç¡€æ›´æ–°é˜Ÿåˆ—\n};\n\n// ref å¯¹è±¡çš„ç»“æ„\ntype RefObject = {\n  current: any;\n};\n\ntype Fiber = {\n  // ...å…¶ä»–å±æ€§\n  memoizedState: Hook | null; // æŒ‡å‘ç¬¬ä¸€ä¸ª Hook\n  updateQueue: mixed;\n  stateNode: any;\n};\n\n```\n\n### 4.2. åœ¨ Fiber ä¸­çš„å­˜å‚¨\n\n```typescript\ntype Fiber = {\n  // ...å…¶ä»–å±æ€§\n  memoizedState: Hook | null,  // æŒ‡å‘ç¬¬ä¸€ä¸ª Hook\n  updateQueue: mixed,\n  stateNode: any,\n};\n\n// Hook é“¾è¡¨ç»“æ„ç¤ºæ„\nfunction Component() {\n  const ref1 = useRef(null);    // Hook1\n  const ref2 = useRef(null);    // Hook2\n  const [state, setState] = useState(null);  // Hook3\n  \n  // Hooks åœ¨ Fiber ä¸­å½¢æˆé“¾è¡¨\n  // Fiber.memoizedState -> Hook1 -> Hook2 -> Hook3\n}\n\n```\n\n### 4.3. åˆå§‹é˜¶æ®µ\n\n```typescript\nfunction createRef(initialValue) {\n  const refObject = {\n    current: initialValue,\n  };\n\n  // åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œæ·»åŠ ä¸€äº›é¢å¤–å±æ€§\n  if (__DEV__) {\n    Object.seal(refObject);\n  }\n\n  return refObject;\n}\n\n// åœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶\nfunction mountRef(initialValue) {\n  // 1. åˆ›å»º hook å¯¹è±¡\n  const hook = mountWorkInProgressHook();\n\n  // 2. åˆ›å»º ref å¯¹è±¡\n  const ref = createRef(initialValue);\n\n  // 3. å°† ref å¯¹è±¡å­˜å‚¨åœ¨ hook çš„ memoizedState ä¸­\n  hook.memoizedState = ref;\n\n  return ref;\n}\n```\n\n### 4.4. æ›´æ–°é˜¶æ®µ\n\n```typescript\nfunction updateRef(initialValue) {\n  // 1. è·å–å½“å‰çš„ hook\n  const hook = updateWorkInProgressHook();\n  \n  // 2. ç›´æ¥è¿”å›ä¹‹å‰å­˜å‚¨çš„ ref å¯¹è±¡\n  // æ³¨æ„ï¼šä¸ä¼šåˆ›å»ºæ–°çš„ ref å¯¹è±¡\n  return hook.memoizedState;\n}\n\n```\n\n","dbea03314cf85f43a62d42582fe17492":"\n# æ·±å…¥ç†è§£ JSX\n\n`#react` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. JSX çš„æœ¬è´¨ \n\nJSX æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå®ƒä¼šè¢«ç¼–è¯‘å·¥å…·ï¼ˆé€šå¸¸æ˜¯ Babelï¼‰è½¬æ¢ä¸ºæ™®é€šçš„ JavaScript å‡½æ•°è°ƒç”¨\n\n### 1.1. ç¼–è¯‘è½¬æ¢è¿‡ç¨‹\n\n```jsx\n// åŸå§‹ JSX ä»£ç \nconst element = (\n  <div className=\"container\">\n    <h1>Hello, World!</h1>\n  </div>\n);\n\n// ç»è¿‡ Babel è½¬æ¢åçš„ä»£ç \nconst element = React.createElement(\n  'div',\n  { className: 'container' },\n  React.createElement('h1', null, 'Hello, World!')\n);\n```\n\n## 2. React.createElement çš„å·¥ä½œåŸç†\n\n### 2.1. createElement å‡½æ•°çš„åŸºæœ¬ç»“æ„\n\n```javascript\nReact.createElement(type, props, ...children)\n```\n\nå‚æ•°è¯´æ˜ï¼š\n- type: å…ƒç´ ç±»å‹ï¼ˆå­—ç¬¦ä¸²æˆ– React ç»„ä»¶ï¼‰\n- props: å±æ€§å¯¹è±¡\n- children: å­å…ƒç´ \n\n### 2.2. createElement çš„ç®€åŒ–å®ç°\n\n```javascript\nfunction createElement(type, props, ...children) {\n  return {\n    type,\n    props: {\n      ...props,\n      children: children.map(child =>\n        typeof child === 'object' ? child : createTextElement(child)\n      )\n    }\n  };\n}\n\nfunction createTextElement(text) {\n  return {\n    type: 'TEXT_ELEMENT',\n    props: {\n      nodeValue: text,\n      children: []\n    }\n  };\n}\n```\n\n## 3. è™šæ‹Ÿ DOM çš„ç”Ÿæˆ\n\ncreateElement å‡½æ•°è¿”å›çš„å¯¹è±¡å°±æ˜¯è™šæ‹Ÿ DOMï¼ˆVirtual DOMï¼‰èŠ‚ç‚¹ï¼Œå®ƒçš„åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š\n\n```javascript\n{\n  type: 'div',\n  props: {\n    className: 'container',\n    children: [\n      {\n        type: 'h1',\n        props: {\n          children: [\n            {\n              type: 'TEXT_ELEMENT',\n              props: {\n                nodeValue: 'Hello, World!',\n                children: []\n              }\n            }\n          ]\n        }\n      }\n    ]\n  }\n}\n```\n\n## 4. JSX çš„ç¼–è¯‘è¿‡ç¨‹\n\n### 4.1. è¯æ³•åˆ†æï¼ˆLexical Analysisï¼‰\n\nå°† JSX ä»£ç åˆ†è§£æˆä¸€ä¸ªä¸ª tokenã€‚\n\n### 4.2. è¯­æ³•åˆ†æï¼ˆSyntactic Analysisï¼‰\n\nå°† token è½¬æ¢æˆ ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ã€‚\n\n### 4.3. ä»£ç ç”Ÿæˆï¼ˆCode Generationï¼‰\n\nå°† AST è½¬æ¢æˆæœ€ç»ˆçš„ JavaScript ä»£ç ã€‚\n\n## 5. Babel è½¬æ¢ç¤ºä¾‹\n\n```jsx\n// JSX ä»£ç \nfunction App() {\n  return (\n    <div>\n      <h1 className=\"title\">{message}</h1>\n      <button onClick={handleClick}>Click me</button>\n    </div>\n  );\n}\n\n// è½¬æ¢åçš„ä»£ç \nfunction App() {\n  return React.createElement(\n    \"div\",\n    null,\n    React.createElement(\n      \"h1\",\n      { className: \"title\" },\n      message\n    ),\n    React.createElement(\n      \"button\",\n      { onClick: handleClick },\n      \"Click me\"\n    )\n  );\n}\n```\n\n## 6. JSX çš„ç‰¹æ®Šå¤„ç†\n\n### 6.1. æ¡ä»¶æ¸²æŸ“çš„å¤„ç†\n\n```jsx\n// JSX ä¸­çš„æ¡ä»¶æ¸²æŸ“\n{condition && <div>Conditional Content</div>}\n\n// è½¬æ¢å\ncondition ? React.createElement(\"div\", null, \"Conditional Content\") : null\n```\n\n### 6.2. åˆ—è¡¨æ¸²æŸ“çš„å¤„ç†\n\n```jsx\n// JSX ä¸­çš„åˆ—è¡¨æ¸²æŸ“\n{items.map(item => <li key={item.id}>{item.text}</li>)}\n\n// è½¬æ¢å\nitems.map(item => \n  React.createElement(\"li\", { key: item.id }, item.text)\n)\n```\n\n## 7. æ€§èƒ½ä¼˜åŒ–åŸç†\n\n### 7.1. React.memo çš„å·¥ä½œåŸç†\n\n```javascript\n// React.memo çš„ç®€åŒ–å®ç°\nfunction memo(Component) {\n  return class Memoized extends React.Component {\n    shouldComponentUpdate(nextProps) {\n      return !shallowEqual(this.props, nextProps);\n    }\n\n    render() {\n      return <Component {...this.props} />;\n    }\n  };\n}\n```\n\n### 7.2. æ‰¹é‡æ›´æ–°\n\nReact ä¼šå°†å¤šä¸ª setState è°ƒç”¨åˆå¹¶æˆä¸€ä¸ªæ›´æ–°ï¼Œä»¥æé«˜æ€§èƒ½ï¼š\n\n```javascript\n// åœ¨ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ä¸­çš„å¤šä¸ª setState\nfunction handleClick() {\n  setCount(c => c + 1); // ä¸ä¼šç«‹å³æ›´æ–°\n  setFlag(f => !f);     // ä¸ä¼šç«‹å³æ›´æ–°\n  // React ä¼šåœ¨è¿™é‡Œæ‰¹é‡å¤„ç†ä¸Šè¿°æ›´æ–°\n}\n```\n\n## 8. æ€»ç»“\n\nJSX çš„åŸç†å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ä¸ªå…³é”®ç‚¹ï¼š\n\n1. JSX æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œæœ€ç»ˆä¼šè¢«è½¬æ¢ä¸º React.createElement() è°ƒç”¨\n2. è½¬æ¢è¿‡ç¨‹é€šè¿‡ Babel ç­‰å·¥å…·å®Œæˆï¼ŒåŒ…å«è¯æ³•åˆ†æã€è¯­æ³•åˆ†æå’Œä»£ç ç”Ÿæˆ\n3. createElement å‡½æ•°åˆ›å»ºè™šæ‹Ÿ DOM å¯¹è±¡\n4. è™šæ‹Ÿ DOM å¯¹è±¡æè¿°äº†çœŸå® DOM çš„ç»“æ„\n5. React ä½¿ç”¨è™šæ‹Ÿ DOM è¿›è¡Œé«˜æ•ˆçš„ DOM æ›´æ–°\n","60353df49fe15743a44072a5131f0e4d":"\n# å‰è¨€\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## ç›®å½• \n\n- [1.  å¸¸è§é¢è¯•é¢˜ä¸€](/post/be60ea0d4e295634b6a911cfdf0ab8e5.html)\n- [2. å¸¸è§é¢è¯•é¢˜äºŒ](/post/9422d96feaf353ac972b49e37dd3f1eb.html)\n- [3. å¸¸è§é¢è¯•é¢˜ä¸‰](/post/d574a7d46ec85579858a99f880a8064b.html)\n- [4. å¸¸è§é¢è¯•é¢˜å››](/post/1093cf1c5d02559986afbf6a24b9a36e.html)\n- [5. JavaScript å¯¹è±¡](/post/3fa46ad951945172839034a2279d2dcf.html)\n- [6. å¼‚æ­¥ç¼–ç¨‹](/post/0f16e63d7fbc53dcb8b0c58293099f11.html)\n- [7. æ¸²æŸ“ã€æ€§èƒ½ã€ç½‘ç»œ](/post/f5c1b385a49c5336b17d8f1e570cfe0a.html)\n- [1. Nodejs ç¯‡ï¼ˆç¯‡ä¸€ï¼‰](/post/eb26d0d3bd8e538ea252230895d96328.html)\n- [10. å‰ç«¯å·¥ç¨‹åŠæ¶æ„ï¼ˆç¯‡ä¸€ï¼‰](/post/58a22f48143d5a22af28addc7c5ab8bc.html)\n- [6.  React åŸç†ç¯‡ï¼ˆä¸€ï¼‰](/post/f083a7fafd2f5b58adefd5d4ccabc56a.html)\n- [13. é¢è¯•é¢˜](/post/2a7025614abe56c5b8b5a181dfa2a7ad.html)\n\n","be60ea0d4e295634b6a911cfdf0ab8e5":"\n# å¸¸è§é¢è¯•é¢˜ä¸€\n\n\n`#å‰ç«¯é¢è¯•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‰ç«¯æ€§èƒ½ä¸ç»´æŠ¤æ€§çš„å¹³è¡¡ \n\n- å£°æ˜å¼è¿˜æ˜¯å‘½ä»¤å¼çš„é€‰æ‹©\n- è™šæ‹Ÿ DOM æ˜¯æ€§èƒ½å’Œç»´æŠ¤æ€§çš„å¹³è¡¡\n- å…³æ³¨è¿‡ç¨‹è¿˜æ˜¯ç»“æœ\n\t- Jquery å…³æ³¨è¿‡ç¨‹\n\t- vue template å…³æ³¨ç»“æœ\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/20241023161531.png?imageSlim)\n\n## 2. `WeakMap` å’Œ `Map` çš„åŒºåˆ«\n\n- é”®å€¼ä¸åŒ\n\t- -`Map` å¯¹è±¡çš„é”®**å¯ä»¥æ˜¯ä»»ä½•ç±»å‹** ï¼Œæ˜¯**å¼ºå¼•ç”¨**\n\t- ä½† `WeakMap` å¯¹è±¡ä¸­çš„é”®**åªèƒ½æ˜¯å¯¹è±¡å¼•ç”¨**ï¼Œæ˜¯`å¼±å¼•ç”¨`\n- åƒåœ¾å›æ”¶ï¼šweakMap å¯ä»¥è‡ªåŠ¨å›æ”¶\n\n## 3. å‰ç«¯é¡¹ç›®å¦‚ä½•æ‰¾å‡ºæ€§èƒ½ç“¶é¢ˆ\n\n- ä¸»åŠ¨\n\t- è‡ªå·±ä½“éªŒ\n\t- ä½¿ç”¨å·¥å…·**åˆ†ææ”¶é›†**ï¼šchromeã€lighthouse ã€å†…å­˜åˆ†æã€æ¸²æŸ“æ‰å¸§æƒ…å†µ\n\t- çœŸå®ç¯å¢ƒã€çœŸå®æ•°æ®\n\t\t- åŸ‹ç‚¹ã€æ€§èƒ½æ•°æ®ä¸ŠæŠ¥\n- è¢«åŠ¨\n\t- å®¢æˆ·åé¦ˆï¼Œå…·ä½“æƒ…å†µï¼Œå…·ä½“åˆ†æ\n\n## 4. ä»‹ç»ä¸‹å‰ç«¯åŠ å¯†çš„å¸¸è§åœºæ™¯å’Œæ–¹æ³•\n\n- httpsï¼Œä½¿ç”¨TLS/SSLåŠ å¯†æ•´ä¸ªé€šä¿¡è¿‡ç¨‹ï¼Œä¼ è¾“å±‚åŠ å¯†\n- ç”¨æˆ·åå¯†ç ï¼Œtoken ç­‰\n- app store çƒ­æ›´æ–°æ–¹æ¡ˆ\n\n## 5. è¯·ä»‹ç» webpackçš„ä¸‰ç§hashæ¨¡å¼\n\n### 5.1. Hash\n\nåªè¦é¡¹ç›®ä¸­æœ‰ä»»ä½•æ–‡ä»¶å‘ç”Ÿå˜åŒ–ï¼Œæ‰€æœ‰æ–‡ä»¶çš„hashéƒ½ä¼šæ”¹å˜ã€‚\n\nç¤ºä¾‹ï¼š\n```javascript\noutput: {\n    filename: '[name].[hash].js'\n}\n```\n\nç¼ºç‚¹ï¼š\n- ä¸åˆ©äºæµè§ˆå™¨ç¼“å­˜ï¼Œå› ä¸ºå³ä½¿åªä¿®æ”¹äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰€æœ‰æ–‡ä»¶çš„ hash éƒ½ä¼šå˜åŒ–ã€‚\n- ä¸åˆ©ç”¨**ç‰ˆæœ¬ç®¡ç†**\n\n### 5.2. Chunkhash\n\nChunkhash åŸºäºä¸åŒçš„å…¥å£æ–‡ä»¶(entry)è¿›è¡Œä¾èµ–æ–‡ä»¶è§£æã€æ„å»ºå¯¹åº”çš„chunkï¼Œç”Ÿæˆå¯¹åº”çš„hashå€¼ã€‚\n\nç‰¹ç‚¹ï¼š\n- åŒä¸€ä¸ªchunkä¸­çš„æ–‡ä»¶hashå€¼ç›¸åŒã€‚\n- ä¸åŒchunkçš„hashå€¼ä¸åŒã€‚\n- é€‚ç”¨äºå¤šå…¥å£é¡¹ç›®ã€‚\n\nç¤ºä¾‹ï¼š\n\n```javascript\noutput: {\n    filename: '[name].[chunkhash].js'\n}\n```\n\nä¼˜ç‚¹ï¼š\n\n- ç›¸å¯¹äº hashï¼Œchunkhash èƒ½å¤Ÿæ›´å¥½åœ°åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ã€‚\n\n### 5.3. Contenthash\n\nContenthashæ˜¯æœ€ç²¾ç¡®çš„hashæ¨¡å¼ï¼Œå®ƒæ ¹æ®æ–‡ä»¶å†…å®¹æ¥ç”Ÿæˆhashå€¼ã€‚\n\nç‰¹ç‚¹ï¼š\n- åªæœ‰å½“æ–‡ä»¶å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¯¥æ–‡ä»¶çš„hashæ‰ä¼šæ”¹å˜ã€‚\n- æœ€é€‚åˆç”¨äºç¼“å­˜ã€‚\n\nç¤ºä¾‹ï¼š\n```javascript\noutput: {\n    filename: '[name].[contenthash].js'\n}\n```\n\nä¼˜ç‚¹ï¼š\n- èƒ½å¤Ÿæœ€å¤§åŒ–åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ã€‚\n- å³ä½¿æ˜¯åœ¨åŒä¸€ä¸ªchunkä¸­ï¼Œå¦‚æœæ–‡ä»¶å†…å®¹æ²¡æœ‰å˜åŒ–ï¼Œhashä¹Ÿä¸ä¼šæ”¹å˜ã€‚\n\n### 5.4. ä½¿ç”¨å»ºè®®\n\n1. å¯¹äºJavaScriptæ–‡ä»¶ï¼Œæ¨èä½¿ç”¨ chunkhash\n2. å¯¹äºCSSæ–‡ä»¶ï¼Œæ¨èä½¿ç”¨ contenthash\n\t1. å› ä¸ºä¸å¸Œæœ› css å†…å®¹å˜åŒ–å½±å“åˆ° js \n3. å¯¹äºå›¾ç‰‡å’Œå­—ä½“ç­‰èµ„æºæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ hash æˆ– contenthash \n\néœ€è¦ç¡®ä¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­**æœ€å¤§åŒ–åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜**ï¼Œæé«˜åº”ç”¨æ€§èƒ½ã€‚\n\nç†è§£å¹¶æ­£ç¡®ä½¿ç”¨è¿™ä¸‰ç§hashæ¨¡å¼å¯ä»¥å¸®åŠ©æ‚¨æ›´å¥½åœ°**ç®¡ç†æ–‡ä»¶ç‰ˆæœ¬å’Œä¼˜åŒ–ç¼“å­˜ç­–ç•¥**ï¼Œè¿™åœ¨å¤§å‹é¡¹ç›®ä¸­å°¤ä¸ºé‡è¦ã€‚\n\n## 6. webpackçš„ `module` / `chuck` / `bundle` æ˜¯ä»€ä¹ˆåŒºåˆ«\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/20241023165203.png?imageSlim)\n\n## 7. webpack çš„ resolve æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\n\n```javascript\n//webpackçš„ resolveæœ‰ä»€ä¹ˆç”¨ï¼Ÿ\n\nconst path = require(\"path\");\n\nmodule.exports = {\n  resolve: {\n    // è®¾ç½®åˆ«å, ä¼˜åŒ–è·¯å¾„, å‡å°‘æŸ¥æ‰¾æ—¶é—´\n    alias: {\n      \"@\": path.resolve(__dirname, \"src\"),\n      components: path.resolve(__dirname, \"src/components\"),\n    },\n\n    // è‡ªåŠ¨è§£ææ‰©å±•å,åº”è¯¥å°½é‡å‡å°‘åç¼€åˆ—è¡¨é•¿åº¦ï¼Œä»¥å‡å°‘å°è¯•æ¬¡æ•°\n    extensions: [\".js\", \".jsx\", \".ts\", \".tsx\", \".json\"],\n\n    // æ¨¡å—æœç´¢ç›®å½•ï¼Œå‡å°‘æœç´¢æ—¶é—´\n    // ä¼˜å…ˆæœç´¢srcç›®å½•ï¼Œç„¶åæ˜¯node_modules\n    // åº”è¯¥å°½é‡å‡å°‘æ¨¡å—æœç´¢ç›®å½•é•¿åº¦ï¼Œä»¥å‡å°‘å°è¯•æ¬¡æ•°\n    modules: [\"node_modules\", path.resolve(__dirname, \"src\")],\n\n    // package.jsonä¸­çš„ä¸»å­—æ®µ\n    // - æ ¹æ®ä¸åŒç¯å¢ƒå¯ä»¥é€‰æ‹©ä¸åŒçš„å…¥å£æ–‡ä»¶\n    // ä¼˜å…ˆä½¿ç”¨ module å­—æ®µï¼Œç„¶åæ˜¯browserå­—æ®µï¼Œæœ€åæ˜¯mainå­—æ®µ\n    mainFields: [\"browser\", \"module\", \"main\"],\n\n    // æ€§èƒ½ä¼˜åŒ–\n    // ä¼˜å…ˆä½¿ç”¨ç¼“å­˜ï¼Œå‡å°‘æ–‡ä»¶ç³»ç»Ÿè®¿é—®\n    // symlinks: æ˜¯å¦è·Ÿéšç¬¦å·é“¾æ¥è§£ææ¨¡å—,æ˜¯å¦è§£æç¬¦å·é“¾æ¥\n    // - åœ¨ä½¿ç”¨npm linkæ—¶å¾ˆæœ‰ç”¨- è®¾ä¸ºfalseå¯ä»¥æé«˜æ€§èƒ½\n    symlinks: false,\n    // cacheWithContext: æ˜¯å¦ç¼“å­˜æ¨¡å—ä¸Šä¸‹æ–‡è§£æ\n    cacheWithContext: false,\n\n    // å¼ºåˆ¶ä½¿ç”¨ require.resolve ä½œä¸ºè§£æå™¨\n    enforceModuleExtension: false,\n  },\n};\n\n```\n\n## 8. æ¥ä¸Šé¢˜`mainFields: [\"browser\", \"module\", \"main\"]`, å…³äºè¿™å‡ ä¸ªä¸»å­—æ®µçš„é€‰æ‹©ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ\n\n```javascript\n{\n  \"name\": \"my-library\",\n  \"main\": \"./dist/index.js\",         // Node.jsç¯å¢ƒä½¿ç”¨,é»˜è®¤ commonjs\n  \"module\": \"./dist/index.esm.js\",   // ç°ä»£æ‰“åŒ…å·¥å…·ä½¿ç”¨,é»˜è®¤ es module\n  \"browser\": \"./dist/index.umd.js\"   // æµè§ˆå™¨ç›´æ¥ä½¿ç”¨,é»˜è®¤ umd\n}\n\n```\n\n![|576](https://832-1310531898.cos.ap-beijing.myqcloud.com/20241023170802.png?imageSlim)\n\nå¦‚ä¸‹ï¼Œå°±æ²¡å¿…è¦å…¼å®¹æµè§ˆå™¨äº†ï¼Œä¼˜åŒ–æ‰“åŒ…æ€§èƒ½\n\n![|528](https://832-1310531898.cos.ap-beijing.myqcloud.com/20241023170845.png?imageSlim)\n\n## 9. ä¸‹é¢çš„TSä»£ç ï¼Œä¼šè­¦å‘Šï¼Œè¯·æ‰¾å‡ºé—®é¢˜å¹¶ä¿®å¤\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/20241023173738.png?imageSlim)\n\n### 9.1. è§£å†³æ–¹æ³•ä¸€\n\n![|544](https://832-1310531898.cos.ap-beijing.myqcloud.com/20241023173853.png?imageSlim)\n\n### 9.2. è§£å†³æ–¹æ³•äºŒ\n\n![|504](https://832-1310531898.cos.ap-beijing.myqcloud.com/20241023174023.png?imageSlim)\n## 10. ts ä¸­è¯·é—® type å’Œ interface çš„åŒºåˆ«ï¼Ÿ\n\nTypeScript ä¸­çš„ `type` å’Œ `interface` éƒ½ç”¨äºå®šä¹‰ç±»å‹\n\n### 10.1. è¯­æ³•å’Œç”¨é€”\n\n#### 10.1.1. type\n\n- å¯ä»¥ç”¨äºå®šä¹‰ä»»ä½•ç±»å‹çš„åˆ«åï¼ŒåŒ…æ‹¬åŸå§‹ç±»å‹ã€è”åˆç±»å‹ã€äº¤å‰ç±»å‹ç­‰\n- è¯­æ³•æ›´çµæ´»\n\n```typescript\ntype Name = string;\ntype NameOrAge = string | number;\ntype Point = { x: number; y: number };\ntype Callback = (data: string) => void;\n```\n\n#### 10.1.2. interface\n\n- ä¸»è¦ç”¨äºå®šä¹‰å¯¹è±¡çš„ç»“æ„\n- æ›´æ¥è¿‘ä¼ ç»Ÿé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„æ¥å£æ¦‚å¿µ\n\n```typescript\ninterface Person {\n  name: string;\n  age: number;\n}\n```\n\n### 10.2. æ‰©å±•å’Œå®ç°\n\n#### 10.2.1. type\n\n- ä½¿ç”¨äº¤å‰ç±»å‹ï¼ˆ&ï¼‰æ¥æ‰©å±•\n- ä¸èƒ½è¢«ç±»å®ç°ï¼ˆimplementsï¼‰æˆ–ç»§æ‰¿ï¼ˆextendsï¼‰\n\n```typescript\ntype Animal = {\n  name: string\n}\n\ntype Bear = Animal & { \n  honey: boolean \n}\n```\n\n#### 10.2.2. interface\n\n- å¯ä»¥ä½¿ç”¨ extends å…³é”®å­—æ‰©å±•å…¶ä»–æ¥å£æˆ–ç±»å‹\n- å¯ä»¥è¢«ç±»å®ç°ï¼ˆimplementsï¼‰æˆ–ç»§æ‰¿ï¼ˆextendsï¼‰\n\n```typescript\ninterface Animal {\n  name: string\n}\n\ninterface Bear extends Animal {\n  honey: boolean\n}\n\nclass Grizzly implements Bear {\n  name: string;\n  honey: boolean;\n}\n```\n\n### 10.3. åˆå¹¶å£°æ˜\n\n#### 10.3.1. type\n\n- ä¸æ”¯æŒå£°æ˜åˆå¹¶\n\n```typescript\ntype User = {\n  name: string\n}\n\n// é”™è¯¯ï¼šæ ‡è¯†ç¬¦\"User\"é‡å¤ã€‚\ntype User = {\n  age: number\n}\n```\n\n#### 10.3.2. interface\n\n- æ”¯æŒå£°æ˜åˆå¹¶ï¼Œå¤šæ¬¡å£°æ˜ä¼šè‡ªåŠ¨åˆå¹¶\n\n```typescript\ninterface User {\n  name: string\n}\n\ninterface User {\n  age: number\n}\n\n// ç»“æœç­‰åŒäºï¼š\n// interface User {\n//   name: string\n//   age: number\n// }\n```\n\n### 10.4. è®¡ç®—å±æ€§\n\n#### 10.4.1. type\n\n- æ”¯æŒä½¿ç”¨æ˜ å°„ç±»å‹ç­‰é«˜çº§ç±»å‹æ“ä½œ\n\n```typescript\ntype Keys = 'firstname' | 'surname'\n\ntype DudeType = {\n  [key in Keys]: string\n}\n```\n\n#### 10.4.2. interface\n\n- ä¸æ”¯æŒæ˜ å°„ç±»å‹ç­‰æ“ä½œ\n\n### 10.5. å…ƒç»„å’Œæ•°ç»„\n\n#### 10.5.1. type\n\n- å¯ä»¥æ›´å®¹æ˜“åœ°å®šä¹‰å…ƒç»„å’Œå¤æ‚çš„æ•°ç»„ç±»å‹\n\n```typescript\ntype StringNumberPair = [string, number];\ntype StringArray = string[];\n```\n\n#### 10.5.2. interface\n\n- å¯ä»¥å®šä¹‰æ•°ç»„ï¼Œä½†å®šä¹‰å…ƒç»„ç›¸å¯¹å¤æ‚\n\n```typescript\ninterface StringNumberPair {\n  0: string;\n  1: number;\n  length: 2;\n}\n```\n\n### 10.6. æ€§èƒ½\n\nåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ`type` å’Œ `interface` çš„æ€§èƒ½å·®å¼‚ä¸å¤§ã€‚ä½†åœ¨æŸäº›å¤æ‚çš„ç±»å‹æ“ä½œä¸­ï¼Œ`interface` å¯èƒ½ä¼šæœ‰è½»å¾®çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œå› ä¸ºå®ƒæ˜¯\"å¼€æ”¾çš„\"ï¼Œå¯ä»¥è¢«æ‰©å±•ã€‚\n\n### 10.7. ä½¿ç”¨å»ºè®®\n\n- å¦‚æœå®šä¹‰çš„ç±»å‹å¯èƒ½éœ€è¦æ‰©å±•æˆ–è€…å®ç°ï¼Œä½¿ç”¨ `interface`\n- å¦‚æœéœ€è¦ä½¿ç”¨è”åˆç±»å‹ã€äº¤å‰ç±»å‹ã€å…ƒç»„ç­‰ï¼Œæˆ–è€…éœ€è¦åˆ©ç”¨æ˜ å°„ç±»å‹ç­‰é«˜çº§ç±»å‹æ“ä½œï¼Œä½¿ç”¨ `type`\n- åœ¨åˆ›å»ºç¬¬ä¸‰æ–¹åº“æˆ–å…¬å…± API æ—¶ï¼Œæ¨èä½¿ç”¨ `interface`ï¼Œå› ä¸ºå®ƒæ›´å®¹æ˜“æ‰©å±•å’Œå…¼å®¹\n- åœ¨é¡¹ç›®å†…éƒ¨ï¼Œå¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚çµæ´»é€‰æ‹© `type` æˆ– `interface`\n\n## 11. å¹‚ç­‰è¯·æ±‚ä¸éå¹‚ç­‰è¯·æ±‚\n\n- å¹‚ç­‰\n\t- get \n\t- delete\n\t- put\n- éå¹‚ç­‰è¯·æ±‚\n\t-  post\n\n## 12. è¯´è¯´ XSS \n\n### 12.1. å¿…è¦æ¡ä»¶\n\nXSS æ”»å‡»æœ‰ `ä¸¤å¤§è¦ç´ `\n1. `æ”»å‡»è€…` æäº¤ `æ¶æ„ä»£ç `\n2. `æµè§ˆå™¨` æ‰§è¡Œ `æ¶æ„ä»£ç `\n### 12.2. ç¤ºä¾‹\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/20241023205929.png?imageSlim)\n\n### 12.3. å¦‚ä½•è§£å†³ï¼Ÿ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241023.png)\n\n### 12.4. å¦‚ä½•é˜²èŒƒ\n\n- éªŒè¯ç \n- è¾“å…¥å†…å®¹é•¿åº¦æ§åˆ¶\n- ä½¿ç”¨ escapeHTML ï¼ˆéœ€è¦è‡ªå·±å®ç°ï¼‰\n-  set HTTP-only Cookie \n\t- å½“ä¸€ä¸ª Cookie è¢«è®¾ç½®ä¸º HttpOnly æ—¶ï¼Œå®ƒä»…å¯é€šè¿‡ HTTP(S) åè®®è®¿é—®ã€‚JavaScript çš„ `document.cookie` API å°†æ— æ³•è¯»å–æˆ–ä¿®æ”¹è¿™äº› Cookie\n\t- `Set-Cookie: session=abcdef123456; HttpOnly; Secure`\n\t\t- è¿™é‡Œï¼Œ`HttpOnly` ç¡®ä¿ Cookie åªèƒ½é€šè¿‡ HTTP(S) è®¿é—®ï¼Œ`Secure` ç¡®ä¿ Cookie åªé€šè¿‡åŠ å¯†çš„ HTTPS è¿æ¥ä¼ è¾“ã€‚\n- å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰\n\t- å®æ–½ä¸¥æ ¼çš„å†…å®¹å®‰å…¨ç­–ç•¥ã€‚\n\t- é™åˆ¶å¯ä»¥åŠ è½½å’Œæ‰§è¡Œçš„èµ„æºã€‚\n\t- æ¯”å¦‚ `Content-Security-Policy: default-src 'self'; script-src 'self' https://trusted.cdn.com;`\n\n### 12.5. åˆ†ç±»\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/2024102310.png)\n\n## 13. è¯´è¯´ CSRF \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241023-2.png)\n\n### 13.1. ä¸€ä¸ªç¤ºä¾‹\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241023-3.png)\n\n### 13.2. ç‰¹ç‚¹\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241023-4.png)\n\n### 13.3. å¦‚ä½•è§„é¿\n\n- ä¸¥æ ¼çš„åŒæºç­–ç•¥ï¼Œä¸¤ç§ç­–ç•¥ strict å’Œ Lax \n\t- ç¤ºä¾‹ï¼š`Set-Cookie: session=abc123; SameSite=Strict; Secure`\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241023-6.png)\n- è¾ƒçŸ­çš„ä¼šè¯æ—¶é—´å¯ä»¥å‡å°‘ CSRF æ”»å‡»çš„çª—å£æœŸ\n- åŒé‡ cookie\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241023-5.png)\n- é‡è¦æ“ä½œè¿›è¡ŒäºŒæ¬¡éªŒè¯ï¼Œæ¯”å¦‚é‡æ–°è¾“å…¥å¯†ç \n- ä½¿ç”¨ CSRF Token\n\t- æœåŠ¡å™¨ä¸ºæ¯ä¸ªç”¨æˆ·ä¼šè¯ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ä»¤ç‰Œï¼Œå¹¶åœ¨æ¯ä¸ªè¡¨å•ä¸­åŒ…å«è¿™ä¸ªä»¤ç‰Œ\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241023-7.png)\n- é‡è¦æ“ä½œï¼Œéœ€è¦éªŒè¯ç æç¤º\n- å¯¹äº AJAX è¯·æ±‚ï¼Œå¯ä»¥æ·»åŠ è‡ªå®šä¹‰å¤´\n\t- ç›¸ç­‰äºé‡è¦å…¥å£å¿…é¡»é€šè¿‡ç‰¹å®šçš„è‡ªå·±çš„ js å‘èµ·Ajaxï¼Œç›´æ¥è®¿é—®ä¸è¡Œ\n- é¿å… get è¯·æ±‚ï¼Œè‡³å°‘é¿å…ç›´æ¥é€šè¿‡ a è·¨åŸŸè®¿é—®äº†\n- CSP ï¼Œé™åˆ¶å¯ä»¥åŠ è½½èµ„æºçš„æ¥æº\n- é£é™©å®‰å…¨æç¤ºï¼šå½“å‰ç”¨æˆ·æ‰“å¼€å…¶ä»–ç”¨æˆ·å¡«å†™çš„é“¾æ¥æ—¶ï¼Œéœ€å‘ŠçŸ¥é£é™©ï¼ˆ**çŸ¥ä¹è·³è½¬å¤–é“¾**ï¼Œç­‰ç­‰éƒ½ä¼šå‘ŠçŸ¥é£é™©ï¼‰\n\n### 13.4. ä¸ XSS çš„åŒºåˆ«\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241023-8.png)\n\n## 14. SSRFï¼ˆæœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ ï¼‰æ”»å‡»\n\nSSRFï¼ˆServer-Side Request Forgeryï¼‰æ˜¯ä¸€ç§å®‰å…¨æ¼æ´ï¼Œ\n\næ”»å‡»è€…èƒ½å¤Ÿä»æ˜“å—æ”»å‡»çš„æœåŠ¡å™¨å‘é€ç²¾å¿ƒæ„é€ çš„è¯·æ±‚åˆ°å…¶ä»–å†…éƒ¨èµ„æºæˆ–å¤–éƒ¨ç³»ç»Ÿã€‚è¿™ç§æ”»å‡»åˆ©ç”¨äº†æœåŠ¡å™¨å¯¹æŸäº›èµ„æºçš„è®¿é—®æƒé™ï¼Œå¯èƒ½å¯¼è‡´æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€å†…éƒ¨ç³»ç»Ÿè¢«è®¿é—®ï¼Œç”šè‡³æ˜¯è¿œç¨‹ä»£ç æ‰§è¡Œã€‚\n\nè®©æˆ‘ä»¬æ·±å…¥äº†è§£ SSRFï¼š\n\n### 14.1. SSRF çš„å·¥ä½œåŸç†\n\nSSRF æ”»å‡»é€šå¸¸éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š\n\na) æ”»å‡»è€…å‘ç°ä¸€ä¸ªå¯ä»¥è¢«æ“çºµçš„æœåŠ¡å™¨ç«¯è¯·æ±‚ã€‚\nb) æ”»å‡»è€…ä¿®æ”¹è¿™ä¸ªè¯·æ±‚ï¼Œä½¿å…¶æŒ‡å‘å†…éƒ¨èµ„æºæˆ–å¤–éƒ¨ç³»ç»Ÿã€‚\nc) æœåŠ¡å™¨æ‰§è¡Œè¿™ä¸ªè¢«ä¿®æ”¹çš„è¯·æ±‚ã€‚\nd) æ”»å‡»è€…å¯èƒ½è·å¾—å¯¹å†…éƒ¨èµ„æºçš„è®¿é—®æˆ–ä¿¡æ¯ã€‚\n\n### 14.2. SSRF çš„å¸¸è§åœºæ™¯\n\n- å›¾ç‰‡/æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½\n- ç½‘ç«™æ€§èƒ½æ£€æŸ¥å·¥å…·\n- PDF ç”Ÿæˆå™¨\n- ç½‘ç«™ä»£ç†åŠŸèƒ½\n- å¤–éƒ¨ API è°ƒç”¨\n\n### 14.3. SSRF çš„å±å®³\n\n- è®¿é—®å†…éƒ¨ç½‘ç»œèµ„æº\n- ç«¯å£æ‰«æå’ŒæœåŠ¡æšä¸¾\n- è¯»å–æœ¬åœ°æ–‡ä»¶\n- æ‰§è¡Œè¿œç¨‹ä»£ç ï¼ˆåœ¨æŸäº›æƒ…å†µä¸‹ï¼‰\n- ç»•è¿‡é˜²ç«å¢™é™åˆ¶\n\n### 14.4. SSRF æ”»å‡»ç¤ºä¾‹\n\nå‡è®¾æœ‰ä¸€ä¸ªç½‘ç«™å…è®¸ç”¨æˆ·é€šè¿‡ URL æäº¤å›¾ç‰‡ï¼š\n\n```\nhttps://example.com/fetch?url=https://user-image.com/pic.jpg\n```\n\næ”»å‡»è€…å¯èƒ½ä¼šå°è¯•ä¿®æ”¹ URL å‚æ•°ï¼š\n\n```\nhttps://example.com/fetch?url=file:///etc/passwd\n```\n\næˆ–\n\n```\nhttps://example.com/fetch?url=http://internal-server.local/sensitive-data\n```\n\nå¦‚æœæœåŠ¡å™¨æ²¡æœ‰properåœ°éªŒè¯å’Œé™åˆ¶è¿™ä¸ª URL å‚æ•°ï¼Œå®ƒå¯èƒ½ä¼šå°è¯•è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿæˆ–å†…éƒ¨ç½‘ç»œèµ„æºã€‚\n\n### 14.5. é˜²èŒƒ SSRF çš„æ–¹æ³•\n\na) è¾“å…¥éªŒè¯å’Œè¿‡æ»¤\n   - å®æ–½ä¸¥æ ¼çš„ URL éªŒè¯\n   - ä½¿ç”¨ç™½åå•è€Œä¸æ˜¯é»‘åå•\n\n```python\n# Python ç¤ºä¾‹\nimport re\n\ndef is_valid_url(url):\n    allowed_domains = ['example.com', 'trusted-domain.com']\n    pattern = re.compile(r'^https?://(?:' + '|'.join(map(re.escape, allowed_domains)) + ')/')\n    return bool(pattern.match(url))\n\nuser_url = request.args.get('url')\nif not is_valid_url(user_url):\n    abort(400, \"Invalid URL\")\n```\n\nb) ä½¿ç”¨å®‰å…¨çš„åº“å’Œæœ€æ–°çš„ä¾èµ–\n   - ç¡®ä¿ä½¿ç”¨çš„åº“èƒ½å¤Ÿæ­£ç¡®å¤„ç† URL å’Œç½‘ç»œè¯·æ±‚\n\nc) é™åˆ¶ç½‘ç»œè®¿é—®\n   - ä½¿ç”¨é˜²ç«å¢™è§„åˆ™é™åˆ¶æœåŠ¡å™¨çš„å‡ºç«™è¿æ¥\n   - å®æ–½ç½‘ç»œåˆ†æ®µ\n\nd) **ç¦ç”¨ä¸å¿…è¦çš„åè®®**\n   - åªå…è®¸ HTTP/HTTPSï¼Œç¦ç”¨ file://, gopher://, etc.\n\ne) ä½¿ç”¨ DNS è§£æç™½åå•\n\n```python\n# Python ç¤ºä¾‹\nimport socket\n\ndef is_allowed_host(hostname):\n    allowed_ips = ['192.168.1.1', '10.0.0.1']\n    try:\n        ip = socket.gethostbyname(hostname)\n        return ip in allowed_ips\n    except socket.gaierror:\n        return False\n\nuser_url = request.args.get('url')\nparsed_url = urlparse(user_url)\nif not is_allowed_host(parsed_url.hostname):\n    abort(400, \"Host not allowed\")\n```\n\nf) å®æ–½è¯·æ±‚è¶…æ—¶\n   - è®¾ç½®è¾ƒçŸ­çš„è¶…æ—¶æ—¶é—´å¯ä»¥å‡å°‘æŸäº› SSRF æ”»å‡»çš„å½±å“\n\ng) ä½¿ç”¨ SSRF ç‰¹å®šçš„ WAF è§„åˆ™\n   - é…ç½® Web åº”ç”¨é˜²ç«å¢™æ¥æ£€æµ‹å’Œé˜»æ­¢ SSRF å°è¯•\n\nh) ç›‘æ§å’Œæ—¥å¿—è®°å½•\n   - å®æ–½å…¨é¢çš„æ—¥å¿—è®°å½•å’Œç›‘æ§ï¼Œä»¥ä¾¿åŠæ—¶å‘ç°å¯ç–‘æ´»åŠ¨\n\ni) æœ€å°æƒé™åŸåˆ™\n   - ç¡®ä¿æœåŠ¡è¿è¡Œåœ¨æœ€å°å¿…è¦æƒé™ä¸‹\n\nj) ä½¿ç”¨å®‰å…¨çš„ API ç½‘å…³\n   - å¯¹äºéœ€è¦è®¿é—®å¤–éƒ¨èµ„æºçš„æƒ…å†µï¼Œè€ƒè™‘ä½¿ç”¨ä¸“é—¨çš„ API ç½‘å…³æ¥å¤„ç†è¿™äº›è¯·æ±‚\n\n### 14.6. æ€»ç»“\n\nSSRF æ˜¯ä¸€ç§å¤æ‚çš„æ”»å‡»ï¼Œå¯èƒ½å¯¼è‡´ä¸¥é‡çš„å®‰å…¨é—®é¢˜ã€‚é˜²èŒƒ SSRF éœ€è¦å¤šå±‚æ¬¡çš„å®‰å…¨æªæ–½ï¼ŒåŒ…æ‹¬ä¸¥æ ¼çš„è¾“å…¥éªŒè¯ã€ç½‘ç»œé™åˆ¶å’ŒæŒç»­çš„å®‰å…¨ç›‘æ§ã€‚éšç€äº‘æœåŠ¡å’Œå¾®æœåŠ¡æ¶æ„çš„æ™®åŠï¼ŒSSRF çš„é£é™©å¯èƒ½ä¼šå¢åŠ ï¼Œå› æ­¤äº†è§£å’Œé˜²èŒƒ SSRF å¯¹äºç°ä»£ web åº”ç”¨ç¨‹åºçš„å®‰å…¨è‡³å…³é‡è¦ã€‚\n\n## 15. è¯¦ç»†è§£é‡Šå†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆContent Security Policyï¼Œç®€ç§° CSPï¼‰\n\nCSP æ˜¯ä¸€ç§é¢å¤–çš„å®‰å…¨å±‚ï¼Œç”¨äºæ£€æµ‹å’Œç¼“è§£æŸäº›ç±»å‹çš„æ”»å‡»ï¼ŒåŒ…æ‹¬è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰å’Œæ•°æ®æ³¨å…¥æ”»å‡»ã€‚è¿™äº›æ”»å‡»å¯ç”¨äºå®ç°ä»æ•°æ®çªƒå–åˆ°ç½‘ç«™ç ´åæˆ–æ¶æ„è½¯ä»¶åˆ†å‘ç­‰ç›®çš„ã€‚\n\nè®©æˆ‘ä»¬æ·±å…¥äº†è§£ CSPï¼š\n\n### 15.1. CSP çš„å·¥ä½œåŸç†\n\nCSP é€šè¿‡å£°æ˜ä¸€ç³»åˆ—å†…å®¹é™åˆ¶æ¥å‘Šè¯‰**æµè§ˆå™¨ä»å“ªäº›æºåŠ è½½å†…å®¹æ˜¯å®‰å…¨çš„**ã€‚è¿™äº›é™åˆ¶é€šå¸¸é€šè¿‡ **HTTP å¤´éƒ¨æˆ– meta æ ‡ç­¾**æ¥å®ç°ã€‚\n\n### 15.2. CSP çš„ä¸»è¦ç›®æ ‡\n\n- ç¼“è§£ XSS æ”»å‡»\n- é˜²æ­¢æœªç»æˆæƒçš„æ•°æ®æ³¨å…¥\n- æ§åˆ¶èµ„æºåŠ è½½\n- æŠ¥å‘Šè¿è§„è¡Œä¸º\n\n### 15.3. CSP æŒ‡ä»¤\n\nCSP ä½¿ç”¨å¤šç§æŒ‡ä»¤æ¥æ§åˆ¶ä¸åŒç±»å‹çš„èµ„æºã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„æŒ‡ä»¤ï¼š\n\n- `default-src`: ä¸ºå…¶ä»– CSP æŒ‡ä»¤æä¾›ä¸€ä¸ªé»˜è®¤å€¼\n- `script-src`: æ§åˆ¶ JavaScript æº\n- `style-src`: æ§åˆ¶ CSS æº\n- `img-src`: æ§åˆ¶å›¾ç‰‡æº\n- `connect-src`: æ§åˆ¶å¯ä»¥é€šè¿‡è„šæœ¬æ¥å£åŠ è½½çš„ URL\n- `font-src`: æ§åˆ¶å­—ä½“æ–‡ä»¶æº\n- `object-src`: æ§åˆ¶æ’ä»¶æºï¼ˆå¦‚ Flashï¼‰\n- `media-src`: æ§åˆ¶éŸ³é¢‘å’Œè§†é¢‘æº\n- `frame-src`: æ§åˆ¶æ¡†æ¶æº\n\n### 15.4. CSP å®ç°ç¤ºä¾‹\n\n#### 15.4.1. é€šè¿‡ HTTP å¤´éƒ¨\n\n```http\nContent-Security-Policy: default-src 'self'; script-src 'self' https://trusted.cdn.com; img-src 'self' https://img.example.com; style-src 'self' 'unsafe-inline';\n```\n\n#### 15.4.2. é€šè¿‡ HTML meta æ ‡ç­¾\n\n```html\n<meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; script-src 'self' https://trusted.cdn.com; img-src 'self' https://img.example.com; style-src 'self' 'unsafe-inline';\">\n```\n\n### 15.5. CSP çš„ç‰¹æ®Šå…³é”®å­—\n\n- `'self'`: å…è®¸æ¥è‡ªåŒä¸€æºçš„å†…å®¹\n- `'unsafe-inline'`: å…è®¸å†…è”è„šæœ¬å’Œæ ·å¼\n- `'unsafe-eval'`: å…è®¸ä½¿ç”¨ eval() ç­‰åŠ¨æ€ä»£ç æ‰§è¡Œæ–¹æ³•\n- `'none'`: ä¸å…è®¸ä»»ä½•å†…å®¹\n\n### 15.6. CSP æŠ¥å‘Š\n\nCSP å¯ä»¥é…ç½®ä¸º**ä»…æŠ¥å‘Šè¿è§„**ï¼Œè€Œä¸å®é™…é˜»æ­¢å†…å®¹ï¼š\n\n```http\nContent-Security-Policy-Report-Only: default-src 'self'; report-uri /csp-violation-report-endpoint/\n```\n\n### 15.7. CSP çš„ä¼˜åŠ¿\n\n- å‡å°‘ XSS æ”»å‡»é¢\n- æ§åˆ¶èµ„æºåŠ è½½ï¼Œæé«˜å®‰å…¨æ€§\n- æä¾›è¿è§„æŠ¥å‘Šæœºåˆ¶\n- å¼ºåˆ¶æ‰§è¡Œæœ€ä½³å®‰å…¨å®è·µ\n\n### 15.8. CSP çš„æŒ‘æˆ˜\n\n- å¯èƒ½éœ€è¦å¤§é‡çš„åˆå§‹é…ç½®\n- å¯èƒ½å½±å“æŸäº›é—ç•™ä»£ç æˆ–ç¬¬ä¸‰æ–¹è„šæœ¬\n- éœ€è¦æŒç»­ç»´æŠ¤å’Œæ›´æ–°\n\n### 15.9. CSP å®æ–½å»ºè®®\n\na) ä»ä¸¥æ ¼ç­–ç•¥å¼€å§‹ï¼Œç„¶åæ ¹æ®éœ€è¦æ”¾å®½\n   \n```http\nContent-Security-Policy: default-src 'none'; script-src 'self'; connect-src 'self'; img-src 'self'; style-src 'self';\n```\n\nb) ä½¿ç”¨æŠ¥å‘Šæ¨¡å¼è¿›è¡Œæµ‹è¯•\n   \n```http\nContent-Security-Policy-Report-Only: default-src 'self'; report-uri /csp-violation-report-endpoint/\n```\n\nc) é€æ­¥å®æ–½ï¼Œå…ˆä»éå…³é”®é¡µé¢å¼€å§‹\n\nd) å®šæœŸå®¡æŸ¥å’Œæ›´æ–°ç­–ç•¥\n\ne) ä½¿ç”¨ CSP åˆ†æå·¥å…·æ¥å¸®åŠ©ç”Ÿæˆå’Œç»´æŠ¤ç­–ç•¥\n\n### 15.10. CSP ä¸å…¶ä»–å®‰å…¨æªæ–½çš„ç»“åˆ\n\n- ç»“åˆ HTTPS ä½¿ç”¨ä»¥ç¡®ä¿ç­–ç•¥çš„å®Œæ•´æ€§\n- ä¸ X-XSS-Protection å¤´éƒ¨ä¸€èµ·ä½¿ç”¨\n- é…åˆ Subresource Integrity (SRI) ä½¿ç”¨ï¼Œè¿›ä¸€æ­¥éªŒè¯å¤–éƒ¨èµ„æº\n\n### 15.11. CSP 3 çš„æ–°ç‰¹æ€§\n\n- ä¸¥æ ¼åŠ¨æ€ä»£ç æ‰§è¡Œï¼š`'strict-dynamic'`\n- å¤–éƒ¨è„šæœ¬æ•£åˆ—ï¼šå…è®¸ç‰¹å®šçš„å¤–éƒ¨è„šæœ¬\n- Worker æ”¯æŒï¼šæ§åˆ¶ Web Worker çš„è¡Œä¸º\n\nç¤ºä¾‹ä»£ç ï¼ˆä½¿ç”¨ Express.js è®¾ç½® CSPï¼‰ï¼š\n\n```javascript\nconst express = require('express');\nconst helmet = require('helmet');\n\nconst app = express();\n\napp.use(helmet.contentSecurityPolicy({\n    directives: {\n      defaultSrc: [\"'self'\"],\n      scriptSrc: [\"'self'\", \"'https://trusted.cdn.com'\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n      imgSrc: [\"'self'\", \"https://img.example.com\"],\n      connectSrc: [\"'self'\"],\n      fontSrc: [\"'self'\"],\n      objectSrc: [\"'none'\"],\n      mediaSrc: [\"'self'\"],\n      frameSrc: [\"'none'\"],\n    }\n}));\n\n// å…¶ä»–åº”ç”¨ç¨‹åºä»£ç ...\n\napp.listen(3000, () => console.log('Server running on port 3000'));\n```\n\n### 15.12. æ€»ç»“\n\nå†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥æ˜¾è‘—æé«˜ web åº”ç”¨ç¨‹åºçš„å®‰å…¨æ€§ã€‚å®ƒæä¾›äº†ä¸€ç§ç»†ç²’åº¦çš„æ–¹æ³•æ¥æ§åˆ¶èµ„æºçš„åŠ è½½å’Œæ‰§è¡Œï¼Œä»è€Œå¤§å¤§å‡å°‘äº† XSS å’Œå…¶ä»–æ³¨å…¥æ”»å‡»çš„é£é™©ã€‚ç„¶è€Œï¼Œå®æ–½ CSP éœ€è¦ä»”ç»†çš„è§„åˆ’å’ŒæŒç»­çš„ç»´æŠ¤ï¼Œä»¥ç¡®ä¿å®ƒæ—¢èƒ½æä¾›å¼ºå¤§çš„å®‰å…¨ä¿æŠ¤ï¼Œåˆä¸ä¼šç ´åç½‘ç«™çš„åŠŸèƒ½ã€‚éšç€ web æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒCSP ä¹Ÿåœ¨ä¸æ–­æ¼”è¿›ï¼Œä¸ºå¼€å‘è€…æä¾›æ›´å¤šçš„å·¥å…·æ¥ä¿æŠ¤ä»–ä»¬çš„åº”ç”¨ç¨‹åºå’Œç”¨æˆ·ã€‚\n\n## 16. è¯¦ç»†è§£é‡Š X-XSS-Protection å¤´éƒ¨å’Œ Subresource Integrity (SRI)\n\n### 16.1. X-XSS-Protection å¤´éƒ¨\n\nX-XSS-Protection æ˜¯ä¸€ä¸ª HTTP å“åº”å¤´ï¼Œç”¨äºå¯ç”¨æµè§ˆå™¨å†…ç½®çš„è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰è¿‡æ»¤å™¨ã€‚è¿™ä¸ªå¤´éƒ¨ä¸»è¦é’ˆå¯¹æ—§ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼Œå› ä¸ºç°ä»£æµè§ˆå™¨å·²ç»å†…ç½®äº†æ›´å…ˆè¿›çš„ XSS é˜²æŠ¤æœºåˆ¶ã€‚\n\na) è¯­æ³•ï¼š\n\n```http\nX-XSS-Protection: <value>\n```\n\nb) å¯èƒ½çš„å€¼ï¼š\n\n- 0: ç¦ç”¨ XSS è¿‡æ»¤å™¨\n- 1: å¯ç”¨ XSS è¿‡æ»¤å™¨ï¼ˆé€šå¸¸æ˜¯æµè§ˆå™¨é»˜è®¤å€¼ï¼‰\n- 1; mode=block: å¯ç”¨ XSS è¿‡æ»¤å™¨ï¼Œå¹¶åœ¨æ£€æµ‹åˆ° XSS æ”»å‡»æ—¶ï¼Œé˜»æ­¢é¡µé¢åŠ è½½\n- 1; `report=<reporting-URI>:` å¯ç”¨ XSS è¿‡æ»¤å™¨ï¼Œå¹¶åœ¨æ£€æµ‹åˆ° XSS æ”»å‡»æ—¶æŠ¥å‘Šè¿è§„è¡Œä¸º\n\nc) ç¤ºä¾‹ï¼š\n\n```http\nX-XSS-Protection: 1; mode=block\n```\n\nd) å®ç°ï¼ˆä½¿ç”¨ Express.jsï¼‰ï¼š\n\n```javascript\nconst express = require('express');\nconst helmet = require('helmet');\n\nconst app = express();\n\napp.use(helmet.xssFilter());\n\n// æˆ–è€…æ‰‹åŠ¨è®¾ç½®\napp.use((req, res, next) => {\n  res.setHeader('X-XSS-Protection', '1; mode=block');\n  next();\n});\n\n// å…¶ä»–åº”ç”¨ç¨‹åºä»£ç ...\n```\n\ne) æ³¨æ„äº‹é¡¹ï¼š\n- è¿™ä¸ªå¤´éƒ¨ä¸»è¦é’ˆå¯¹æ—§ç‰ˆæµè§ˆå™¨ï¼Œç°ä»£æµè§ˆå™¨å¯èƒ½ä¼šå¿½ç•¥å®ƒ\n- ä¸åº”è¯¥å•ç‹¬ä¾èµ–è¿™ä¸ªå¤´éƒ¨æ¥é˜²å¾¡ XSS æ”»å‡»\n- åº”è¯¥ä¸å…¶ä»–å®‰å…¨æªæ–½ï¼ˆå¦‚ CSPï¼‰ç»“åˆä½¿ç”¨\n\n### 16.2. Subresource Integrity (SRI)\n\nSRI æ˜¯ä¸€ç§å®‰å…¨ç‰¹æ€§ï¼Œå…è®¸**æµè§ˆå™¨æ£€æŸ¥è·å–çš„èµ„æºï¼ˆå¦‚ JavaScript æˆ– CSS æ–‡ä»¶ï¼‰æ˜¯å¦è¢«ç¯¡æ”¹**ã€‚å®ƒé€šè¿‡æä¾›ä¸€ä¸ªåŠ å¯†å“ˆå¸Œæ¥å·¥ä½œï¼Œæµè§ˆå™¨å¯ä»¥ç”¨è¿™ä¸ªå“ˆå¸Œæ¥éªŒè¯ä¸‹è½½çš„èµ„æºã€‚\n\na) å·¥ä½œåŸç†ï¼š\n- ä¸ºèµ„æºç”Ÿæˆä¸€ä¸ªåŠ å¯†å“ˆå¸Œ\n- åœ¨ HTML ä¸­å¼•ç”¨èµ„æºæ—¶åŒ…å«è¿™ä¸ªå“ˆå¸Œ\n\t- è¿™ä¸ªå±æ€§ ==integrity==\n- æµè§ˆå™¨ä¸‹è½½èµ„æºå¹¶éªŒè¯å…¶å®Œæ•´æ€§\n\nb) è¯­æ³•ï¼š\n\n```html\n<script src=\"https://example.com/example-framework.js\" \n        integrity=\"sha384-oqVuAfXRKap7fdgcCY5uykM6+R9GqQ8K/uxy9rx7HNQlGYl1kPzQho1wx4JwY8wC\"\n        crossorigin=\"anonymous\"></script>\n```\n\nc) ç”Ÿæˆ SRI å“ˆå¸Œï¼š\n\nå¯ä»¥ä½¿ç”¨åœ¨çº¿å·¥å…·æˆ–å‘½ä»¤è¡Œå·¥å…·ç”Ÿæˆ SRI å“ˆå¸Œã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ OpenSSLï¼š\n\n```bash\ncat FILENAME.js | openssl dgst -sha384 -binary | openssl base64 -A\n```\n\nd) å®ç°ç¤ºä¾‹ï¼š\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>SRI Example</title>\n    <link rel=\"stylesheet\" \n          href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" \n          integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" \n          crossorigin=\"anonymous\">\n</head>\n<body>\n    <!-- é¡µé¢å†…å®¹ -->\n    <script src=\"https://code.jquery.com/jquery-3.3.1.slim.min.js\" \n            integrity=\"sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo\" \n            crossorigin=\"anonymous\"></script>\n</body>\n</html>\n```\n\ne) SRI çš„ä¼˜åŠ¿ï¼š\n- é˜²æ­¢ç”±äº CDN é­åˆ°å…¥ä¾µæˆ–ä¸­é—´äººæ”»å‡»å¯¼è‡´çš„èµ„æºç¯¡æ”¹\n- å¢åŠ å¯¹ç¬¬ä¸‰æ–¹èµ„æºçš„ä¿¡ä»»\n- ä¸ CSP ç»“åˆä½¿ç”¨å¯ä»¥æä¾›æ›´å¼ºçš„å®‰å…¨ä¿éšœ\n\nf) æ³¨æ„äº‹é¡¹ï¼š\n- åªé€‚ç”¨äºé€šè¿‡ HTTPS æä¾›çš„èµ„æº\n- å¦‚æœèµ„æºç»å¸¸æ›´æ–°ï¼Œå¯èƒ½éœ€è¦é¢‘ç¹æ›´æ–°å®Œæ•´æ€§å“ˆå¸Œ\n- ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒ SRI\n\ng) æœåŠ¡å™¨ç«¯å®ç°ï¼ˆä½¿ç”¨ Express.jsï¼‰ï¼š\n\n```javascript\nconst express = require('express');\nconst crypto = require('crypto');\n\nconst app = express();\n\napp.use((req, res, next) => {\n  res.locals.generateSRI = (content) => {\n    const hash = crypto.createHash('sha384');\n    hash.update(content);\n    return `sha384-${hash.digest('base64')}`;\n  };\n  next();\n});\n\napp.get('/', (req, res) => {\n  const scriptContent = 'console.log(\"Hello, SRI!\");';\n  const integrity = res.locals.generateSRI(scriptContent);\n  \n  res.send(`\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <title>SRI Example</title>\n    </head>\n    <body>\n      <script integrity=\"${integrity}\">${scriptContent}</script>\n    </body>\n    </html>\n  `);\n});\n\napp.listen(3000, () => console.log('Server running on port 3000'));\n```\n\n### 16.3. æ€»ç»“\n\nX-XSS-Protection å¤´éƒ¨å’Œ Subresource Integrity (SRI) éƒ½æ˜¯å¢å¼º Web åº”ç”¨ç¨‹åºå®‰å…¨æ€§çš„é‡è¦å·¥å…·ã€‚X-XSS-Protection ä¸»è¦é’ˆå¯¹æ—§ç‰ˆæµè§ˆå™¨ï¼Œæä¾›äº†ä¸€ä¸ªé¢å¤–çš„ XSS é˜²æŠ¤å±‚ã€‚è€Œ SRI åˆ™æ˜¯ä¸€ç§æ›´ç°ä»£çš„å®‰å…¨ç‰¹æ€§ï¼Œå®ƒé€šè¿‡éªŒè¯èµ„æºçš„å®Œæ•´æ€§æ¥é˜²æ­¢èµ„æºè¢«ç¯¡æ”¹ã€‚\n\nè¿™ä¸¤ç§æœºåˆ¶åº”è¯¥ä¸å…¶ä»–å®‰å…¨æªæ–½ï¼ˆå¦‚å†…å®¹å®‰å…¨ç­–ç•¥ CSPã€HTTPSã€å®‰å…¨ Cookie è®¾ç½®ç­‰ï¼‰ç»“åˆä½¿ç”¨ï¼Œä»¥åˆ›å»ºä¸€ä¸ªå…¨é¢çš„ Web åº”ç”¨ç¨‹åºå®‰å…¨ç­–ç•¥ã€‚åœ¨å®æ–½è¿™äº›å®‰å…¨æªæ–½æ—¶ï¼Œå¼€å‘è€…éœ€è¦è€ƒè™‘å…¼å®¹æ€§ã€æ€§èƒ½å½±å“ä»¥åŠç»´æŠ¤æˆæœ¬ï¼Œä»¥ç¡®ä¿åœ¨æä¾›å¼ºå¤§å®‰å…¨ä¿æŠ¤çš„åŒæ—¶ä¸ä¼šå½±å“ç”¨æˆ·ä½“éªŒã€‚\n\n## 17. å¸¸è§çš„ HTTP çŠ¶æ€ç \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241023-9.png)\n\n## 18. åˆ—ä¸¾å¸¸è§çš„å‡ ç§ POST æ•°æ®æäº¤æ–¹å¼\n\n### 18.1. application/x-www-form-urlencodedï¼ˆé»˜è®¤ï¼‰\n\nè¿™æ˜¯æœ€å¸¸è§çš„ POST æäº¤æ•°æ®çš„æ–¹å¼ï¼Œæµè§ˆå™¨çš„åŸç”Ÿ **form è¡¨å•**å¦‚æœä¸è®¾ç½® `enctype å±æ€§`ï¼Œé»˜è®¤ä¼šä»¥è¿™ç§æ–¹å¼æäº¤æ•°æ®ã€‚\n\n```http\nContent-Type: application/x-www-form-urlencoded\n\nname=John+Doe&age=30\n```\n\n### 18.2. multipart/form-data\n\nè¿™ç§æ–¹å¼ä¸»è¦ç”¨äºä¸Šä¼ æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç”¨äºæäº¤æ™®é€šè¡¨å•æ•°æ®ã€‚\n\n```http\nContent-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW\n\n------WebKitFormBoundary7MA4YWxkTrZu0gW\nContent-Disposition: form-data; name=\"name\"\n\nJohn Doe\n------WebKitFormBoundary7MA4YWxkTrZu0gW\nContent-Disposition: form-data; name=\"file\"; filename=\"example.txt\"\nContent-Type: text/plain\n\n(file content here)\n------WebKitFormBoundary7MA4YWxkTrZu0gW--\n```\n\n### 18.3. application/json\n\nç°åœ¨è¶Šæ¥è¶Šå¤šçš„ API ä½¿ç”¨ JSON æ ¼å¼ä¼ è¾“æ•°æ®ã€‚\n\n```http\nContent-Type: application/json\n\n{\n  \"name\": \"John Doe\",\n  \"age\": 30\n}\n```\n\n### 18.4. text/plain\n\nçº¯æ–‡æœ¬æ ¼å¼ã€‚\n\n```http\nContent-Type: text/plain\n\nSome plain text content\n```\n\n### 18.5. application/xml\n\nXML æ ¼å¼ã€‚\n\n```http\nContent-Type: application/xml\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<user>\n  <name>John Doe</name>\n  <age>30</age>\n</user>\n```\n\n### 18.6. application/octet-stream\n\nç”¨äºå‘é€äºŒè¿›åˆ¶æ•°æ®ã€‚\n\n```http\nContent-Type: application/octet-stream\n\n(Binary data)\n```\n\n### 18.7. ç¤ºä¾‹\n\nè®©æˆ‘ä»¬çœ‹ä¸€äº›ä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ä¸åŒçš„æ–¹å¼å‘é€ POST è¯·æ±‚ï¼š\n\n1. ä½¿ç”¨ HTML è¡¨å•ï¼ˆapplication/x-www-form-urlencodedï¼‰ï¼š\n\n```html\n<form action=\"/submit\" method=\"post\">\n  <input type=\"text\" name=\"name\" value=\"John Doe\">\n  <input type=\"number\" name=\"age\" value=\"30\">\n  <input type=\"submit\" value=\"Submit\">\n</form>\n```\n\n2. ä½¿ç”¨ HTML è¡¨å•ï¼ˆmultipart/form-dataï¼‰ï¼š\n\n```html hl:2\n<form action=\"/upload\" method=\"post\" \n\t  enctype=\"multipart/form-data\">\n  <input type=\"text\" name=\"name\" value=\"John Doe\">\n  <input type=\"file\" name=\"file\">\n  <input type=\"submit\" value=\"Upload\">\n</form>\n```\n\n3. ä½¿ç”¨ JavaScript å‘é€ JSON æ•°æ®ï¼š\n\n```javascript\nfetch('/api/user', {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  body: JSON.stringify({\n    name: 'John Doe',\n    age: 30\n  })\n})\n.then(response => response.json())\n.then(data => console.log(data))\n.catch((error) => console.error('Error:', error));\n```\n\n4. ä½¿ç”¨ Python requests åº“å‘é€ä¸åŒç±»å‹çš„ POST è¯·æ±‚ï¼š\n\n```python\nimport requests\n\n# application/x-www-form-urlencoded\nresponse = requests.post('https://httpbin.org/post', data={'key': 'value'})\n\n# multipart/form-data\nfiles = {'file': open('example.txt', 'rb')}\nresponse = requests.post('https://httpbin.org/post', files=files)\n\n# application/json\nresponse = requests.post('https://httpbin.org/post', json={'key': 'value'})\n\n# text/plain\nheaders = {'Content-Type': 'text/plain'}\nresponse = requests.post('https://httpbin.org/post', data='Some text', headers=headers)\n\nprint(response.text)\n```\n\n5. ä½¿ç”¨ Node.js çš„ axios åº“å‘é€ POST è¯·æ±‚ï¼š\n\n```javascript\nconst axios = require('axios');\n\n// application/x-www-form-urlencoded\naxios.post('https://httpbin.org/post', 'name=John&age=30', {\n  headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\n})\n.then(response => console.log(response.data))\n.catch(error => console.error('Error:', error));\n\n// application/json\naxios.post('https://httpbin.org/post', {\n  name: 'John',\n  age: 30\n})\n.then(response => console.log(response.data))\n.catch(error => console.error('Error:', error));\n\n// multipart/form-data\nconst FormData = require('form-data');\nlet form = new FormData();\nform.append('name', 'John');\nform.append('file', fs.createReadStream('example.txt'));\n\naxios.post('https://httpbin.org/post', form, {\n  headers: form.getHeaders()\n})\n.then(response => console.log(response.data))\n.catch(error => console.error('Error:', error));\n```\n\nåœ¨é€‰æ‹© POST æ•°æ®æäº¤æ–¹å¼æ—¶ï¼Œéœ€è¦è€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š\n\n1. æœåŠ¡å™¨ç«¯çš„æ”¯æŒæƒ…å†µ\n2. æ•°æ®çš„ç±»å‹å’Œç»“æ„\n3. æ˜¯å¦éœ€è¦ä¸Šä¼ æ–‡ä»¶\n4. API çš„è®¾è®¡è§„èŒƒ\n5. å®¢æˆ·ç«¯çš„å…¼å®¹æ€§\n\nä¸åŒçš„æ•°æ®æäº¤æ–¹å¼é€‚ç”¨äºä¸åŒçš„åœºæ™¯ï¼Œé€‰æ‹©åˆé€‚çš„æ–¹å¼å¯ä»¥æé«˜æ•°æ®ä¼ è¾“çš„æ•ˆç‡å’Œå¯é æ€§ã€‚\n\n","58a22f48143d5a22af28addc7c5ab8bc":"\n# å‰ç«¯å·¥ç¨‹åŠæ¶æ„ï¼ˆç¯‡ä¸€ï¼‰\n\n`#å‰ç«¯é¢è¯•`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åˆ†å±‚ \n\næ ¸å¿ƒæ€æƒ³ï¼šå…³æ³¨ç‚¹åˆ†ç¦»ï¼Œæ¯å±‚åªè´Ÿè´£ç‰¹å®šåŠŸèƒ½ã€‚\n\næ²¡æœ‰ä»€ä¹ˆé—®é¢˜æ˜¯åˆ†å±‚è§£å†³ä¸äº†ï¼Œå¦‚æœè§£å†³ä¸äº†, å°±å†åŠ ä¸€å±‚\n\n- æ¯”å¦‚`ç½‘ç»œåè®®`ï¼Œè¶Šæ¥é«˜å±‚é¢å‘`äººç±»`ï¼Œåº•å±‚é¢å‘`æœºå™¨`\n- åˆæ¯”å¦‚ç°åœ¨æ‰€è°“çš„ `åå°ã€ä¸­å°ã€å‰å°`\n- åˆæ¯”å¦‚ï¼Œè¯­è¨€æŠ½è±¡çš„å±‚æ¬¡è¶Šé«˜ï¼Œä¸€èˆ¬è¿è¡Œæ•ˆç‡å¯èƒ½ä¼šæœ‰æ‰€è¡°å‡ï¼Œçœ‹`js/ts/c/æ±‡ç¼–/æœºå™¨ç `ç­‰ç­‰ç­‰\n- åˆæ¯”å¦‚ï¼Œmvc åˆ†å±‚\n\nå›åˆ°ï¼Œå‰ç«¯ï¼š\n- `V-dom`ï¼Œå°±æ˜¯ä¹‹å‰DOMä¸Šçš„ä¸€ä¸ªåˆ†å±‚ ï¼Œå¼€å‘æ–¹å¼ç”±ä¹‹å‰`jQueryæ–¹å¼` å˜æˆäº†`view=f(state)` æ–¹å¼\n\n## 2. ç®¡é“å’Œè¿‡æ»¤å™¨\n\næ ¸å¿ƒæ€æƒ³ï¼šæ•°æ®æµå¤„ç†ï¼Œæ¯ä¸ªå¤„ç†å•å…ƒç‹¬ç«‹ä¸”å¯ç»„åˆã€‚\n\n- æ¯”å¦‚åœ¨`Angular`é‡Œå°±æœ‰`ç®¡é“`æ¦‚å¿µ\n- gulpçš„ `pipe`\n- ç”šè‡³`koa`é‡Œçš„æ´‹è‘±æ¨¡å‹ä¹Ÿæœ‰`ç®¡é“`çš„å½±å­ï¼ˆä¸­é—´ä»¶ï¼‰\n- `vue`çš„`filter` å¦‚ `{{ message | capitalize }}`\n- Node ä¸­ `æµ` çš„æ¦‚å¿µ\n\n## 3. äº‹ä»¶é©±åŠ¨/å‘å¸ƒ-è®¢é˜…\n\næ ¸å¿ƒæ€æƒ³ï¼šé€šè¿‡äº‹ä»¶çš„å‘å¸ƒå’Œè®¢é˜…å®ç°**æ¾è€¦åˆ**ã€‚\n\n## 4. å¤åˆ¶ï¼šfork é£æ ¼\n\nFork é£æ ¼æ˜¯ä¸€ç§é€šè¿‡å¤åˆ¶å…±äº«çŠ¶æ€æˆ–èµ„æºæ¥å®ç°å¹¶è¡Œå¤„ç†çš„æ¶æ„æ¨¡å¼ã€‚åœ¨å‰ç«¯ä¸­ï¼Œä¸»è¦ç”¨äºï¼š\n\n- çŠ¶æ€ç®¡ç†\n- å¹¶è¡Œè®¡ç®—\n- æ•°æ®éš”ç¦»\n- å¤šçº¿ç¨‹å¤„ç†\n\n## 5. Web Worker ä¸­çš„ Fork\n\n### 5.1. æ¯”å¦‚`nodeJS`çš„`Clusteræ¨¡å—` \n\n- Node.js ä¸­çš„é›†ç¾¤æ¨¡å—ï¼Œå…è®¸åˆ›å»º`å¤šä¸ªå·¥ä½œè¿›ç¨‹`æ¥å¤„ç†å¹¶å‘è¯·æ±‚\n- 'Cluster' è¿™ä¸ªè¯åœ¨è®¡ç®—æœºç§‘å­¦ä¸­é€šå¸¸æŒ‡çš„æ˜¯ä¸€ç»„è®¡ç®—æœºæˆ–æœåŠ¡å™¨ï¼Œå®ƒä»¬ä¸€èµ·å·¥ä½œä»¥æä¾›æ›´é«˜çš„æ€§èƒ½å’Œå¯ç”¨æ€§\n\n```javascript hl:5,16\nconst cluster = require('cluster');\nconst http = require('http');\nconst numCPUs = require('os').cpus().length;\n\nif (cluster.isMaster) {\n  console.log(`Master ${process.pid} is running`);\n\n  // Fork workers.\n  for (let i = 0; i < numCPUs; i++) {\n    cluster.fork();\n  }\n\n  cluster.on('exit', (worker, code, signal) => {\n    console.log(`worker ${worker.process.pid} died`);\n  });\n} else {\n  // Workers å¯ä»¥å…±äº«ä»»æ„çš„TCPè¿æ¥ \n  // æ¯”å¦‚ å…±äº«HTTPæœåŠ¡å™¨ \n  http.createServer((req, res) => {\n    res.writeHead(200);\n    res.end('hello world\\n');\n  }).listen(8000);\n\n  console.log(`Worker ${process.pid} started`);\n}\n```\n\n## 6. ç»„ä»¶åŒ–æ¶æ„ï¼ˆComponent-Based Architectureï¼‰\n\næ ¸å¿ƒæ€æƒ³ï¼šå°†UIå’ŒåŠŸèƒ½å°è£…æˆç‹¬ç«‹ã€å¯é‡ç”¨çš„ç»„ä»¶ã€‚\n\n## 7. æ¨¡å—åŒ–æ¶æ„ï¼ˆModular Architectureï¼‰\n\næ ¸å¿ƒæ€æƒ³ï¼šå°†åº”ç”¨åˆ†è§£ä¸ºç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—ã€‚\n\n## 8. å¾®æœåŠ¡å‰ç«¯æ¶æ„ï¼ˆMicro-Frontend Architectureï¼‰\n\næ ¸å¿ƒæ€æƒ³ï¼šå°†å‰ç«¯åº”ç”¨åˆ†è§£ä¸ºå¤šä¸ªç‹¬ç«‹çš„å¾®å‰ç«¯åº”ç”¨ã€‚\n\n## 9. å•å‘æ•°æ®æµ\n\n## 10. å¾®å†…æ ¸æ¶æ„ï¼Œåˆç§°ä¸ºâ€æ’ä»¶æ¶æ„â€\n\n### 10.1. åŸºæœ¬æ¦‚å¿µ\n\nå¾®å†…æ ¸æ¶æ„ä¸»è¦åŒ…å«ä¸¤éƒ¨åˆ†ï¼š\n1. æ ¸å¿ƒç³»ç»Ÿï¼ˆMicrokernelï¼‰ï¼šæä¾›æœ€åŸºæœ¬çš„åŠŸèƒ½\n2. æ’ä»¶æ¨¡å—ï¼ˆPluginsï¼‰ï¼šæä¾›æ‰©å±•åŠŸèƒ½\n\n- å¾®å†…æ ¸ç»“æ„çš„éš¾ç‚¹åœ¨äºå»ºç«‹ä¸€å¥—ç²’åº¦åˆé€‚çš„**æ’ä»¶åè®®**ã€ä»¥åŠå¯¹æ’ä»¶ä¹‹é—´è¿›è¡Œé€‚å½“çš„`éš”ç¦»å’Œè§£è€¦`ã€‚ä»è€Œæ‰èƒ½ä¿è¯è‰¯å¥½çš„æ‰©å±•æ€§ã€çµæ´»æ€§å’Œå¯è¿ç§»æ€§ã€‚\n- å‰ç«¯é¢†åŸŸæ¯”è¾ƒå…¸å‹çš„ä¾‹å­æ˜¯`Webpackã€Babelã€PostCSS`ä»¥åŠ`ESLint`, è¿™äº›åº”ç”¨éœ€è¦åº”å¯¹å¤æ‚çš„å®šåˆ¶éœ€æ±‚ï¼Œè€Œä¸”è¿™äº›éœ€æ±‚æ—¶åˆ»åœ¨å˜ï¼Œåªæœ‰å¾®å†…æ ¸æ¶æ„æ‰èƒ½ä¿è¯çµæ´»å’Œå¯æ‰©å±•æ€§ã€‚\n- æ¯”å¦‚`jQuery`æ’ä»¶ï¼šç®€å•è¯´å°±æ˜¯`jQuery.prototype.extend`ç”¨äºæ‰©å±•æ’ä»¶\n\n```javascript\n// jQuery å…¥å£å‡½æ•°\nvar jQuery = function (selector, context) {\n    return new jQuery.init(selector, context);\n};\n\n// jQuery æ ¸å¿ƒåŸå‹å®šä¹‰ï¼Œä¹Ÿæ˜¯ jQuery plugin çš„æ‰©å±•æ¥å£\njQuery.fn = jQuery.prototype = {\n    hello: function hello() {\n        console.log(\"hello world\");\n    },\n    //... å…¶ä»–å®šä¹‰\n};\n\n// å¦ä¸€ç§æ‰©å±• plugin çš„ä¾¿æ·æ–¹æ³•ï¼Œæ¥æ”¶ä¸€ä¸ªå¯¹è±¡\njQuery.extend = jQuery.fn.extend = function(targetObj) {\n    // å…‹éš† targetObj\n}\n\n// jQuery çœŸæ­£çš„å®ä¾‹åŒ–æ„é€ å‡½æ•°\nvar init = function (selector, context) {\n    // init dom elements\n}\ninit.prototype = jQuery.fn;\njQuery.init = init;\n$ = jQuery;\n```\n\næˆ‘æ¥è¯¦ç»†ä»‹ç»å‰ç«¯å¾®å†…æ ¸æ¶æ„ï¼ˆPlugin Architectureï¼‰çš„è®¾è®¡æ€è·¯å’Œå®ç°æ–¹å¼ï¼š\n\n### 10.2. åŸºç¡€å¾®å†…æ ¸ç³»ç»Ÿå®ç°\n\n```javascript\n// åŸºç¡€å¾®å†…æ ¸ç³»ç»Ÿå®ç°\nclass Microkernel {\n    constructor() {\n        this.plugins = new Map();\n        this.hooks = new Map();\n    }\n\n    // æ³¨å†Œæ’ä»¶\n    registerPlugin(name, plugin) {\n        this.plugins.set(name, plugin);\n        // åˆå§‹åŒ–æ’ä»¶\n        plugin.apply(this);\n    }\n\n    // æ³¨å†Œé’©å­\n    addHook(name, callback) {\n        if (!this.hooks.has(name)) {\n            this.hooks.set(name, []);\n        }\n        this.hooks.get(name).push(callback);\n    }\n\n    // è§¦å‘é’©å­\n    async applyHooks(name, ...args) {\n        const hooks = this.hooks.get(name) || [];\n        for (const hook of hooks) {\n            await hook(...args);\n        }\n    }\n}\n```\n\n### 10.3. æ’ä»¶ç³»ç»Ÿå®ç°\n\n```javascript\n// æ’ä»¶åŸºç±»\nclass Plugin {\n    constructor(options = {}) {\n        this.options = options;\n    }\n\n    apply(kernel) {\n        // ç”±å…·ä½“æ’ä»¶å®ç°\n    }\n}\n\n// ç”Ÿå‘½å‘¨æœŸç®¡ç†\nclass LifecyclePlugin extends Plugin {\n    apply(kernel) {\n        kernel.addHook('beforeInit', () => {\n            console.log('Before initialization');\n        });\n\n        kernel.addHook('afterInit', () => {\n            console.log('After initialization');\n        });\n    }\n}\n\n// è·¯ç”±æ’ä»¶ç¤ºä¾‹\nclass RouterPlugin extends Plugin {\n    apply(kernel) {\n        kernel.addHook('route', (path) => {\n            // è·¯ç”±å¤„ç†é€»è¾‘\n            console.log(`Routing to ${path}`);\n        });\n    }\n}\n```\n\n### 10.4. Webpack é£æ ¼çš„æ’ä»¶ç³»ç»Ÿ\n\n```javascript\n// Webpacké£æ ¼çš„ç¼–è¯‘å™¨å®ç°\nclass Compiler {\n    constructor() {\n        this.hooks = {\n            start: new SyncHook(),\n            compile: new AsyncSeriesHook(['compilation']),\n            done: new SyncHook(['stats'])\n        };\n        this.plugins = [];\n    }\n\n    // åº”ç”¨æ’ä»¶\n    use(plugin) {\n        this.plugins.push(plugin);\n        plugin.apply(this);\n    }\n\n    // è¿è¡Œç¼–è¯‘\n    async run() {\n        this.hooks.start.call();\n        \n        const compilation = {};\n        await this.hooks.compile.promise(compilation);\n        \n        this.hooks.done.call({ success: true });\n    }\n}\n\n// Webpacké£æ ¼çš„æ’ä»¶ç¤ºä¾‹\nclass MyPlugin {\n    apply(compiler) {\n        compiler.hooks.start.tap('MyPlugin', () => {\n            console.log('å¼€å§‹ç¼–è¯‘');\n        });\n\n        compiler.hooks.compile.tapAsync('MyPlugin', async (compilation, callback) => {\n            console.log('ç¼–è¯‘ä¸­...');\n            await someAsyncTask();\n            callback();\n        });\n\n        compiler.hooks.done.tap('MyPlugin', (stats) => {\n            console.log('ç¼–è¯‘å®Œæˆ');\n        });\n    }\n}\n```\n\n### 10.5. UmiJS é£æ ¼çš„æ’ä»¶ç³»ç»Ÿ\n\n```javascript\n// UmiJSé£æ ¼çš„æœåŠ¡å®ç°\nclass UmiService {\n    constructor() {\n        this.plugins = [];\n        this.hooks = {};\n    }\n\n    // æ³¨å†Œæ’ä»¶\n    registerPlugin(plugin) {\n        this.plugins.push(plugin);\n    }\n\n    // åº”ç”¨æ’ä»¶\n    applyPlugins() {\n        this.plugins.forEach(plugin => {\n            plugin.apply({\n                api: this.getAPI(),\n                service: this\n            });\n        });\n    }\n\n    // è·å–APIæ¥å£\n    getAPI() {\n        return {\n            // ä¿®æ”¹é…ç½®\n            modifyConfig: (fn) => {\n                this.hooks.modifyConfig = fn;\n            },\n            // æ·»åŠ è·¯ç”±\n            addRoutes: (routes) => {\n                this.hooks.addRoutes = routes;\n            }\n        };\n    }\n}\n\n// UmiJSæ’ä»¶ç¤ºä¾‹\nclass UmiPlugin {\n    apply({ api }) {\n        // ä¿®æ”¹é…ç½®\n        api.modifyConfig((config) => {\n            return {\n                ...config,\n                // æ·»åŠ é…ç½®\n            };\n        });\n\n        // æ·»åŠ è·¯ç”±\n        api.addRoutes([\n            {\n                path: '/custom',\n                component: './CustomPage'\n            }\n        ]);\n    }\n}\n```\n\n### 10.6. äº‹ä»¶é©±åŠ¨çš„æ’ä»¶ç³»ç»Ÿ\n\n```javascript\n// äº‹ä»¶é©±åŠ¨çš„æ’ä»¶ç³»ç»Ÿ\nclass EventDrivenCore {\n    constructor() {\n        this.events = new Map();\n        this.plugins = new Set();\n    }\n\n    // æ³¨å†Œæ’ä»¶\n    use(plugin) {\n        this.plugins.add(plugin);\n        plugin.setup(this);\n    }\n\n    // æ³¨å†Œäº‹ä»¶ç›‘å¬\n    on(event, handler) {\n        if (!this.events.has(event)) {\n            this.events.set(event, new Set());\n        }\n        this.events.get(event).add(handler);\n    }\n\n    // è§¦å‘äº‹ä»¶\n    emit(event, ...args) {\n        const handlers = this.events.get(event);\n        if (handlers) {\n            handlers.forEach(handler => handler(...args));\n        }\n    }\n}\n\n// äº‹ä»¶é©±åŠ¨æ’ä»¶ç¤ºä¾‹\nclass LoggerPlugin {\n    setup(core) {\n        core.on('request', (req) => {\n            console.log(`${new Date()}: ${req.url}`);\n        });\n    }\n}\n```\n\n### 10.7. å¯é…ç½®çš„æ’ä»¶ç³»ç»Ÿ\n\n```javascript\n// é…ç½®ç³»ç»Ÿ\nclass Config {\n    constructor(initialConfig = {}) {\n        this.config = initialConfig;\n    }\n\n    get(key) {\n        return this.config[key];\n    }\n\n    set(key, value) {\n        this.config[key] = value;\n    }\n\n    merge(newConfig) {\n        this.config = {\n            ...this.config,\n            ...newConfig\n        };\n    }\n}\n\n// å¯é…ç½®çš„æ’ä»¶æ ¸å¿ƒ\nclass ConfigurableCore {\n    constructor() {\n        this.config = new Config();\n        this.plugins = new Map();\n    }\n\n    // ä½¿ç”¨æ’ä»¶\n    use(plugin, options = {}) {\n        const instance = new plugin(options);\n        this.plugins.set(plugin.name, instance);\n        instance.apply(this);\n    }\n\n    // è·å–é…ç½®\n    getConfig() {\n        return this.config;\n    }\n}\n\n// å¯é…ç½®æ’ä»¶ç¤ºä¾‹\nclass ThemePlugin {\n    constructor(options) {\n        this.options = options;\n    }\n\n    apply(core) {\n        core.getConfig().merge({\n            theme: this.options.theme || 'light'\n        });\n    }\n}\n```\n\n### 10.8. æ’ä»¶é€šä¿¡æœºåˆ¶\n\n```javascript\n// æ’ä»¶é—´é€šä¿¡ç³»ç»Ÿ\nclass PluginMessenger {\n    constructor() {\n        this.channels = new Map();\n    }\n\n    // åˆ›å»ºé€šä¿¡é€šé“\n    createChannel(name) {\n        if (!this.channels.has(name)) {\n            this.channels.set(name, new Set());\n        }\n        return {\n            send: (message) => this.broadcast(name, message),\n            subscribe: (handler) => this.subscribe(name, handler)\n        };\n    }\n\n    // å¹¿æ’­æ¶ˆæ¯\n    broadcast(channel, message) {\n        const subscribers = this.channels.get(channel);\n        if (subscribers) {\n            subscribers.forEach(handler => handler(message));\n        }\n    }\n\n    // è®¢é˜…æ¶ˆæ¯\n    subscribe(channel, handler) {\n        if (!this.channels.has(channel)) {\n            this.channels.set(channel, new Set());\n        }\n        this.channels.get(channel).add(handler);\n    }\n}\n\n// ä½¿ç”¨é€šä¿¡çš„æ’ä»¶ç¤ºä¾‹\nclass DataPlugin {\n    apply(core) {\n        const channel = core.messenger.createChannel('data');\n        \n        // å‘é€æ•°æ®\n        channel.send({ type: 'update', data: {} });\n    }\n}\n\nclass UIPlugin {\n    apply(core) {\n        const channel = core.messenger.createChannel('data');\n        \n        // æ¥æ”¶æ•°æ®\n        channel.subscribe((message) => {\n            if (message.type === 'update') {\n                this.updateUI(message.data);\n            }\n        });\n    }\n}\n```\n\nå¾®å†…æ ¸æ¶æ„çš„ä¼˜ç‚¹ï¼š\n1. é«˜åº¦å¯æ‰©å±•\n2. æ¨¡å—åŒ–ç¨‹åº¦é«˜\n3. æ ¸å¿ƒåŠŸèƒ½ç²¾ç®€\n4. æ’ä»¶æŒ‰éœ€åŠ è½½\n5. ç»´æŠ¤æˆæœ¬ä½\n\nä½¿ç”¨åœºæ™¯ï¼š\n1. æ„å»ºå·¥å…·ï¼ˆWebpackã€Rollupï¼‰\n2. æ¡†æ¶ï¼ˆUmiJSã€VuePressï¼‰\n3. ç¼–è¾‘å™¨æ’ä»¶ç³»ç»Ÿ\n4. åº”ç”¨æ‰©å±•ç³»ç»Ÿ\n\néœ€è¦æ³¨æ„çš„é—®é¢˜ï¼š\n1. æ’ä»¶ä¾èµ–ç®¡ç†\n2. æ’ä»¶åŠ è½½é¡ºåº\n3. æ’ä»¶å†²çªå¤„ç†\n4. æ€§èƒ½å¼€é”€æ§åˆ¶\n5. ç‰ˆæœ¬å…¼å®¹æ€§\n\n## 11. å®è·µå»ºè®®\n\n1. ä¸è¦è¿‡åº¦è®¾è®¡\n2. ä¿æŒæ¶æ„çš„çµæ´»æ€§\n3. è€ƒè™‘æœªæ¥çš„æ‰©å±•æ€§\n4. å…³æ³¨ä»£ç çš„å¯æµ‹è¯•æ€§\n5. æ³¨é‡å¼€å‘æ•ˆç‡å’Œç»´æŠ¤æˆæœ¬\n\n## 12. å¥½çš„æ¶æ„åº”è¯¥æ˜¯\n\n- æ¸…æ™°æ˜“æ‡‚\n- æ˜“äºç»´æŠ¤\n- ä¾¿äºæ‰©å±•\n- æ€§èƒ½ä¼˜è‰¯\n- é€‚åˆå›¢é˜Ÿ\n\n## 13. èŠèŠå‰ç«¯æ¡†æ¶\n\n### 13.1. Reactã€vueã€Angular\n\nReact æ˜¯ä¸€ä¸ªæ¡†æ¶å—ï¼Ÿ Vue æ˜¯ä¸€ä¸ªæ¡†æ¶å—ï¼Ÿ ä¸¥æ ¼æ¥è¯´ä¸æ˜¯ï¼Œå®ƒä»¬åªæ˜¯ä¸€ä¸ª `è§†å›¾è§£å†³æ–¹æ¡ˆ` ï¼Œè¿™é‡Œé¢ç®—å¾—ä¸Šæ˜¯æ¡†æ¶çš„ä¼°è®¡åªæœ‰ `Angular`ã€‚\n\n- åç«¯å›´ç»• `æ•°æ®å­˜å–`å±•å¼€ã€‚\n- å‰ç«¯å›´ç»• `â€œUIâ€å±•å¼€`ã€‚\n\n### 13.2. ä¸ºä½•ä¼ä¸šçº§æ¡†æ¶\n\né¢å‘ä¼ä¸šç”Ÿäº§ï¼Œç›®çš„æ˜¯æé«˜ä¼ä¸šçš„ç”Ÿäº§åŠ›ã€é«˜æ•ˆã€æˆç†Ÿã€çº¦æŸä¸é™åˆ¶æ¯”è¾ƒå¤šã€æ€§èƒ½ã€ç¨³å®šã€å¯ç”¨ã€å¥å£®ã€æ ‡å‡†åŒ–ã€ç”Ÿäº§éªŒè¯ã€ç”¨ä¾‹ä¿è¯ã€æ•´ä¸ªé“¾è·¯ç¯èŠ‚ã€‚\n\n- umi : å¯æ’æ‹”çš„ä¼ä¸šçº§ react åº”ç”¨æ¡†æ¶\n- egg ï¼Œä¼ä¸šçº§æ¡†æ¶\n- ngularï¼Œä¹Ÿå¯ä»¥è¯´\n- è€Œå…¶ä»– Reactã€Koaã€æ²¡æœ‰ä¼ä¸šçº§ï¼Ÿ\n\n### 13.3. å®šä¹‰\n\n- å‰ç«¯æ¡†æ¶ä½“ç³»çš„å»ºç«‹ç¦»ä¸å¼€`å‰ç«¯å·¥ç¨‹åŒ–æˆç†Ÿ`å’Œ`æœ€ä½³å®è·µçš„æ²‰æ·€`ã€‚\n- ä½ å¯ä»¥è®¤ä¸ºæ¡†æ¶å°±æ˜¯ä¸€ä¸ªæ•´åˆçš„æ–¹æ¡ˆï¼Œæä¾›ä¸€ä¸ªå‰ç«¯`æœ€ä½³çš„ç»„åˆé…ç½®`ã€‚\n- å¼€å‘è€…éœ€è¦åšçš„å°±æ˜¯åœ¨è¿™ä¸ªæ¡†æ¶çº¦æŸä¸‹å¡«å……è‡ªå·±ä¸šåŠ¡ä»£ç ã€‚\n\næ‰€ä»¥ä¸€ä¸ªæˆç†Ÿçš„æ¡†æ¶æˆ‘è®¤ä¸ºæœ‰ Umiã€Angular ã€ Next.jsã€Vue-CLIã€Create-React-App ç­‰\n\n## 14. å‰ç«¯è§£å†³æ–¹æ¡ˆçš„æ¼”å˜\n\n- ç¬¬ä¸€é˜¶æ®µï¼šå·¥ç¨‹åŒ–ã€åŸºç¡€è®¾æ–½\n\t- åº”ç”¨ç±»å‹ï¼šssr/csr/h5/pc/ä¸­åå°/Cç«¯\n\t- å¼€å‘\n\t- æ„å»º\n\t- éƒ¨ç½²å‘å¸ƒ\n\t- QA\n\t- ç ”å‘ä½“éªŒ\n- ç¬¬äºŒé˜¶æ®µï¼šæ–¹æ¡ˆæ•´åˆï¼Œæ–¹æ¡ˆæ²‰æ·€ã€‚\n\t- è§†å›¾æ¡†æ¶ã€é¡¹ç›®ç»„ç»‡ã€çŠ¶æ€ã€è·¯ç”±ã€æƒé™ã€è§†å›¾å±‚ç»„ä»¶\n- ç¬¬ä¸‰é˜¶æ®µï¼šç»„ä»¶èµ„äº§ä½“ç³»æ²‰æ·€\n- ç¬¬å››é˜¶æ®µï¼šæ‰“é€šä¸Šä¸‹æ¸¸\n\t- `ä¸Šæ¸¸ï¼Œå¯¹äº UIã€‚ä¸Šé¢è¯´çš„ç»„ä»¶ä½“ç³»`ï¼Œå…¶å®æ˜¯å»ºç«‹åœ¨ç¨³å®šçš„ã€ä¸€è‡´çš„ã€ç»Ÿä¸€çš„ UI è®¾è®¡è¯­è¨€ä¹‹ä¸Šçš„ã€‚å¦åˆ™ä¸€åˆ‡éƒ½æ˜¯ç©ºè°ˆã€‚æ‰€ä»¥æˆ‘ä»¬è¦æ±‚ UI è®¾è®¡å›¢é˜Ÿè¦æœ‰è‰¯å¥½çš„è®¾è®¡è§„èŒƒã€èƒ½å’Œå‰ç«¯ç»„ä»¶ä½“ç³»ç»‘å®šå¹¶è‰¯æ€§è¿­ä»£ã€‚\n\t- `ä¸‹æ¸¸ï¼Œå¯¹äº åç«¯`ã€‚å¯ä»¥ä¿ƒè¿›å»ºç«‹æ›´æ ‡å‡†çš„æ¥å£èŒƒå¼ã€å°è£…é€šç”¨çš„æœåŠ¡(æœ‰åˆ©äºä¸šåŠ¡ç»„ä»¶å¤ç”¨)ã€æ›´æ·±çš„æœ‰ä¸šåŠ¡ä¸­å°ã€BFFâ€¦\n\n## 15. å°å…¬å¸å¦‚ä½•è§£å†³ç ”å‘ç®¡ç†æ··ä¹±ï¼ŒåŸºç¡€è®¾æ–½è–„å¼±çš„é—®é¢˜\n\nä½œä¸ºä¸€ä¸ªå‰ç«¯æ¶æ„å¸ˆï¼Œæˆ‘ä¼šä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ç³»ç»Ÿæ€§åœ°è§£å†³è¿™äº›é—®é¢˜ï¼š\n\n### 15.1. **è¯„ä¼°ç°çŠ¶ï¼ˆ1-2å‘¨ï¼‰**\n\n   - è°ƒç ”ç°æœ‰é¡¹ç›®ä»£ç è´¨é‡å’Œæ¶æ„\n   - äº†è§£å›¢é˜Ÿæˆå‘˜æŠ€æœ¯æ ˆå’Œèƒ½åŠ›æ°´å¹³\n   - æ¢³ç†ç°æœ‰å¼€å‘æµç¨‹å’Œç—›ç‚¹\n   - æ”¶é›†å›¢é˜Ÿæˆå‘˜çš„åé¦ˆå’Œå»ºè®®\n\n### 15.2. **å»ºç«‹åŸºç¡€è®¾æ–½ï¼ˆ1-2ä¸ªæœˆï¼‰**\n\n#### 15.2.1. A. ä»£ç ç®¡ç†è§„èŒƒ\n   \n   - ç»Ÿä¸€Gitåˆ†æ”¯ç®¡ç†ç­–ç•¥ï¼ˆå¦‚Git Flowï¼‰\n   - åˆ¶å®šä»£ç æäº¤è§„èŒƒï¼ˆçº¦å®šå¼æäº¤ï¼‰\n   - å»ºç«‹Code Reviewæœºåˆ¶\n\n#### 15.2.2. B. æŠ€æœ¯æ ˆç»Ÿä¸€\n   - ç¡®å®šä¸»è¦æŠ€æœ¯æ ˆï¼ˆå¦‚React/Vueï¼‰\n   - ç»Ÿä¸€æ„å»ºå·¥å…·ï¼ˆå¦‚Viteï¼‰\n   - è§„èŒƒåŒ…ç®¡ç†å™¨ä½¿ç”¨ï¼ˆå¦‚pnpmï¼‰\n\n#### 15.2.3. C. å·¥ç¨‹åŒ–ä½“ç³»\n\n   - æ­å»ºè„šæ‰‹æ¶CLIå·¥å…·\n   - å¼•å…¥Monorepoç®¡ç†ï¼ˆå¦‚Turborepoï¼‰\n   - å»ºç«‹ç»„ä»¶åº“\n   - é…ç½®ESLint + Prettier + StyleLint\n   - å¼•å…¥TypeScript\n\n### 15.3. **è§„èŒƒåˆ¶å®šï¼ˆ2-3å‘¨ï¼‰**\n\n#### 15.3.1. A. å¼€å‘è§„èŒƒ\n\n- JavaScript/TypeScriptç¼–ç è§„èŒƒ\n- CSS/SCSSå‘½åè§„èŒƒï¼ˆå¦‚BEMï¼‰\n- ç»„ä»¶å¼€å‘è§„èŒƒ\n- ç›®å½•ç»“æ„è§„èŒƒ\n\n#### 15.3.2. B. æ–‡æ¡£è§„èŒƒ\n\n- æŠ€æœ¯æ–‡æ¡£æ¨¡æ¿\n- APIæ–‡æ¡£è§„èŒƒ\n- ç»„ä»¶æ–‡æ¡£è§„èŒƒ\n- READMEæ¨¡æ¿\n\n### 15.4. **æµç¨‹ä¼˜åŒ–ï¼ˆæŒç»­è¿›è¡Œï¼‰**\n\n#### 15.4.1. A. å¼€å‘æµç¨‹\n\n- å¼•å…¥æ•æ·å¼€å‘\n- å»ºç«‹ä»»åŠ¡ç®¡ç†ç³»ç»Ÿï¼ˆå¦‚Jiraï¼‰\n- è§„èŒƒå¼€å‘-æµ‹è¯•-éƒ¨ç½²æµç¨‹\n\n#### 15.4.2. B. CI/CD\n\n- é…ç½®è‡ªåŠ¨åŒ–æµ‹è¯•\n- é…ç½®è‡ªåŠ¨åŒ–éƒ¨ç½²\n- é…ç½®è‡ªåŠ¨åŒ–ç‰ˆæœ¬å‘å¸ƒ\n\n### 15.5. **è´¨é‡ä¿éšœï¼ˆæŒç»­è¿›è¡Œï¼‰**\n\n- å•å…ƒæµ‹è¯•è¦†ç›–ç‡è¦æ±‚\n- E2Eæµ‹è¯•\n- æ€§èƒ½ç›‘æ§\n- é”™è¯¯ç›‘æ§ï¼ˆå¦‚Sentryï¼‰\n- ä»£ç è´¨é‡æ£€æµ‹ï¼ˆå¦‚SonarQubeï¼‰\n### 15.6. **å›¢é˜Ÿå»ºè®¾ï¼ˆæŒç»­è¿›è¡Œï¼‰**\n\n- å®šæœŸæŠ€æœ¯åˆ†äº«\n- ä»£ç è¯„å®¡æ–‡åŒ–\n- å»ºç«‹æŠ€æœ¯æ–‡æ¡£åº“\n- æ–°äººåŸ¹è®­ä½“ç³»\n\n### 15.7. å®æ–½å»ºè®®\n\n#### 15.7.1. **å¾ªåºæ¸è¿›**\n\n   - ä¸è¦ä¸€æ¬¡æ€§æ¨åŠ¨æ‰€æœ‰å˜é©\n   - æŒ‰ä¼˜å…ˆçº§åˆ†æ­¥å®æ–½\n   - ç»™å›¢é˜Ÿé€‚åº”çš„æ—¶é—´\n\n#### 15.7.2. **è·å–æ”¯æŒ**\n\n   - äº‰å–ç®¡ç†å±‚æ”¯æŒ\n   - ä¸å›¢é˜Ÿå……åˆ†æ²Ÿé€š\n   - å±•ç¤ºæ”¹è¿›å¸¦æ¥çš„ä»·å€¼\n\n#### 15.7.3. **æŒç»­ä¼˜åŒ–**\n\n   - å®šæœŸæ”¶é›†åé¦ˆ\n   - åŠæ—¶è°ƒæ•´æ–¹æ¡ˆ\n   - ä¿æŒæŠ€æœ¯æ ˆæ›´æ–°\n\n#### 15.7.4. **æ³¨é‡å®æ•ˆ**\n\n   - é¿å…è¿‡åº¦è®¾è®¡\n   - å…³æ³¨æŠ•å…¥äº§å‡ºæ¯”\n   - ä¼˜å…ˆè§£å†³ä¸»è¦çŸ›ç›¾\n\n### 15.8. å…·ä½“å®æ–½è·¯çº¿å›¾\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028.png)\n\nè¿™ä¸ªè®¡åˆ’é¢„è®¡éœ€è¦3-4ä¸ªæœˆå®Œæˆä¸»è¦çš„åŸºç¡€å»ºè®¾ï¼Œåç»­æ˜¯æŒç»­ä¼˜åŒ–çš„è¿‡ç¨‹ã€‚åœ¨å®æ–½è¿‡ç¨‹ä¸­è¦æ³¨æ„ï¼š\n\n1. æ¯ä¸ªé˜¶æ®µéƒ½è¦è®¾å®šæ˜ç¡®çš„ç›®æ ‡å’Œå¯è¡¡é‡çš„æŒ‡æ ‡\n2. ä¿æŒä¸å›¢é˜Ÿçš„æ²Ÿé€šï¼Œé€‚æ—¶è°ƒæ•´è®¡åˆ’\n3. åšå¥½æ–‡æ¡£åŒ–å·¥ä½œï¼Œä¾¿äºåç»­ç»´æŠ¤å’Œæ–°äººèå…¥\n4. æ³¨é‡å®é™…æ•ˆæœï¼Œé¿å…è¿‡åº¦ç†æƒ³åŒ–\n\né€šè¿‡ä»¥ä¸Šæªæ–½ï¼Œå¯ä»¥é€æ­¥æ”¹å–„ç ”å‘ç®¡ç†æ··ä¹±çš„çŠ¶å†µï¼Œå»ºç«‹èµ·ç¨³å›ºçš„å‰ç«¯åŸºç¡€è®¾æ–½ï¼Œæé«˜å›¢é˜Ÿçš„å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ªåºæ¸è¿›çš„è¿‡ç¨‹ï¼Œéœ€è¦å›¢é˜Ÿæ‰€æœ‰æˆå‘˜çš„é…åˆå’Œè€å¿ƒã€‚\n\n### 15.9. å…¶ä»–\n\n- â€˜æ–‡æ¡£â€™ï¼Œé‡è¦æ€§ä¸è¨€è€Œå–»ã€‚`æœ‰äº‹å…ˆçœ‹æ–‡æ¡£ï¼Œå†é—®åˆ«äºº`\n- å¦‚æœæ²¡æœ‰`çº¦æŸæœºåˆ¶`ï¼Œè§„èŒƒæ°¸è¿œåªæ˜¯è§„èŒƒã€‚\n- é¿å…é»‘ç›’ï¼Œ`è§£å†³å•ç‚¹æ•…éšœ` çš„å”¯ä¸€åŠæ³•æ˜¯**è®©æ›´å¤šçš„æˆå‘˜äº¤å‰å‚ä¸ä¸åŒçš„é¡¹ç›®**ï¼Œä»£ç `review`æ–¹å¼ç­‰å¤šç§å›¾è§£ç†Ÿæ‚‰é¡¹ç›®ä»£ç ï¼Œè§„èŒƒå°±ä½“ç°çš„å¾ˆé‡è¦\n\n## 16. æ¢è®¨ Serverlessï¼ˆæ— æœåŠ¡å™¨è®¡ç®—ï¼‰\n\n### 16.1. **Serverless çš„æœ¬è´¨**\n\n- æ— éœ€å…³å¿ƒæœåŠ¡å™¨åŸºç¡€è®¾æ–½ï¼Œç”±äº‘æœåŠ¡å•†ç»´æŠ¤\n- æŒ‰å®é™…ä½¿ç”¨è®¡è´¹ï¼ˆPay as you goï¼‰ï¼šåªåœ¨éœ€è¦æ—¶è¿è¡Œï¼ŒæŒ‰å®é™…ä½¿ç”¨é‡è®¡è´¹\n- è‡ªåŠ¨å¼¹æ€§ä¼¸ç¼©ï¼šæ ¹æ®è´Ÿè½½è‡ªåŠ¨æ‰©å±•æˆ–æ”¶ç¼©èµ„æº\n- äº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œé€šå¸¸åŸºäºäº‹ä»¶è§¦å‘æ‰§è¡Œ\n- FaaSï¼ˆFunction as a Serviceï¼‰+ BaaSï¼ˆBackend as a Serviceï¼‰çš„ç»“åˆ\n\t- **FaaS (Function as a Service)**\n\t\t- AWS Lambda\n\t\t- Azure Functions\n\t\t- Google Cloud Functions\n\t\t- é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—\n\t-  BaaSï¼ˆBackend as a Serviceï¼‰\n\t\t- æ•°æ®åº“æœåŠ¡ï¼ˆå¦‚ DynamoDBï¼‰\n\t\t- èº«ä»½è®¤è¯æœåŠ¡\n\t\t- æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡\n\t\t- å¯¹è±¡å­˜å‚¨æœåŠ¡\n\n### 16.2. 2024å¹´ Serverless å‘å±•è¶‹åŠ¿\n\n1. **AI é›†æˆå¢å¼º**\n    - Serverless å¹³å°æ­£åœ¨æ·±åº¦é›†æˆ AI èƒ½åŠ›\n    - æ”¯æŒ AI æ¨¡å‹çš„éƒ¨ç½²å’Œæ¨ç†\n    - æä¾› AI ç›¸å…³çš„é¢„æ„å»ºå‡½æ•°Â \n2. **æµå¤„ç†å’Œå®æ—¶æ•°æ®**\n    - Serverless æµå¤„ç†æ¶æ„æ—¥ç›Šæ™®åŠ\n    - æ”¯æŒå®æ—¶æ•°æ®åˆ†æå’Œå¤„ç†\n    - äº‹ä»¶é©±åŠ¨æ¶æ„çš„æ·±åº¦æ•´åˆ\n3. **æ··åˆäº‘éƒ¨ç½²**\n    - æ”¯æŒè·¨äº‘å¹³å°éƒ¨ç½²\n    - ç»Ÿä¸€çš„ç®¡ç†å’Œç›‘æ§èƒ½åŠ›\n    - æ›´çµæ´»çš„èµ„æºè°ƒåº¦\n### 16.3. **ä¸»è¦ä¼˜åŠ¿**\n\n- é™ä½è¿ç»´æˆæœ¬\n\t- æ— éœ€ç®¡ç†æœåŠ¡å™¨\n\t- è‡ªåŠ¨æ‰©ç¼©å®¹\n\t- é™ä½äººåŠ›æˆæœ¬\n- æˆæœ¬ä¼˜åŒ–\n\t- æŒ‰ä½¿ç”¨é‡ä»˜è´¹\n\t- æ— éœ€ä¸º`é—²ç½®èµ„æº`ä»˜è´¹\n\t- æ›´ç²¾ç¡®çš„èµ„æºåˆ©ç”¨\n- å¼€å‘æ•ˆç‡\n\t- ä¸“æ³¨`ä¸šåŠ¡é€»è¾‘`\n\t- å¿«é€Ÿéƒ¨ç½²\n\t- å¤©ç„¶çš„`å¾®æœåŠ¡æ¶æ„`\n\n### 16.4. **å¸¸è§åº”ç”¨åœºæ™¯**\n\n   - äº‹ä»¶è§¦å‘å¤„ç†\n     - æ–‡ä»¶ä¸Šä¼ å¤„ç†\n     - æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†\n     - WebHook å¤„ç†\n   - Web åº”ç”¨\n     - API æ¥å£æœåŠ¡\n     - SSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ï¼‰\n     - é™æ€ç½‘ç«™æ‰˜ç®¡\n     - ç”¨æˆ·è®¤è¯æˆæƒ\n   - å®šæ—¶ä»»åŠ¡\n     - æ•°æ®åŒæ­¥\n     - å®šæ—¶å¤‡ä»½\n     - æŠ¥è¡¨ç”Ÿæˆ\n   - å®æ—¶æ•°æ®å¤„ç†\n     - æ—¥å¿—å¤„ç†\n     - IoT æ•°æ®å¤„ç†\n\t     - è®¾å¤‡æ§åˆ¶å‘½ä»¤ä¸‹å‘\n     - æµæ•°æ®åˆ†æ\n\n### 16.5. **æŠ€æœ¯æ¶æ„**\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-1.png)\n\n1. åŠŸèƒ½è§£è€¦ï¼Œä¿æŒå‡½æ•°å•ä¸€èŒè´£\n    - åˆç†è®¾è®¡è§¦å‘å™¨\n    - æ³¨æ„å†·å¯åŠ¨ä¼˜åŒ–\n    - ä½¿ç”¨åˆé€‚çš„çŠ¶æ€ç®¡ç†ç­–ç•¥\n2. **å¼€å‘æµç¨‹**\n    - é‡‡ç”¨åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰\n    - å®Œå–„çš„æµ‹è¯•ç­–ç•¥\n    - æœ¬åœ°å¼€å‘ç¯å¢ƒæ¨¡æ‹Ÿ\n    - ç›‘æ§å’Œæ—¥å¿—ä½“ç³»å»ºè®¾\n3. **æ€§èƒ½ä¼˜åŒ–**\n    - åˆç†è®¾ç½®å†…å­˜å’Œè¶…æ—¶æ—¶é—´\n    - åˆ©ç”¨ç¼“å­˜å‡å°‘å†·å¯åŠ¨\n    - ä»£ç åŒ…å¤§å°ä¼˜åŒ–\n    - å¹¶å‘æ§åˆ¶\n### 16.6. **ä¸»æµæœåŠ¡å•†å¯¹æ¯”**\n   \n| æœåŠ¡å•† | äº§å“åç§° | ç‰¹ç‚¹ |\n|-------|---------|------|\n| AWS | Lambda | æœ€æˆç†Ÿã€ç”Ÿæ€æœ€å®Œå–„ |\n| é˜¿é‡Œäº‘ | å‡½æ•°è®¡ç®— | å›½å†…å®Œå–„ã€é›†æˆåº¦é«˜ |\n| è…¾è®¯äº‘ | äº‘å‡½æ•° | æ€§ä»·æ¯”é«˜ã€æœ¬åœŸåŒ–æœåŠ¡ |\n| Google | Cloud Functions | å…¨çƒåŒ–ã€AIé›†æˆå¥½ |\n| Azure | Functions | ä¼ä¸šçº§æœåŠ¡å®Œå–„ |\n\n### 16.7. **å¼€å‘æœ€ä½³å®è·µ**\n\n   - å‡½æ•°è®¾è®¡\n     - å•ä¸€èŒè´£åŸåˆ™\n     - æ§åˆ¶æ‰§è¡Œæ—¶é—´\n     - åˆç†è®¾è®¡è§¦å‘å™¨\n     - åˆç†ä½¿ç”¨å†…å­˜\n     - æ³¨æ„`å†·å¯åŠ¨`ä¼˜åŒ–\n   - çŠ¶æ€ç®¡ç†\n     - ä½¿ç”¨**å¤–éƒ¨å­˜å‚¨**ä¿å­˜çŠ¶æ€\n     - ç¼“å­˜åˆç†åˆ©ç”¨\n     - æ³¨æ„æ•°æ®ä¸€è‡´æ€§\n   - ç›‘æ§å‘Šè­¦\n     - å®Œå–„çš„æ—¥å¿—è®°å½•\n     - æ€§èƒ½ç›‘æ§\n     - é”™è¯¯è¿½è¸ª\n     - æˆæœ¬ç›‘æ§\n\n### 16.8. **å¸¸è§æŒ‘æˆ˜å’Œè§£å†³æ–¹æ¡ˆ**\n\n   - æœ¬åœ°å¼€å‘å’Œè°ƒè¯•å›°éš¾\n   - å†·å¯åŠ¨é—®é¢˜\n     - é¢„çƒ­æœºåˆ¶\n     - ä»£ç ä¼˜åŒ–\n     - åˆç†è®¾ç½®å†…å­˜\n   - æœ¬åœ°å¼€å‘è°ƒè¯•\n     - ä½¿ç”¨æ¨¡æ‹Ÿå™¨\n     - æœ¬åœ°æµ‹è¯•æ¡†æ¶\n     - å®Œå–„çš„å¼€å‘å·¥å…·\n   - ä¾›åº”å•†é”å®šé£é™©ï¼švendor lock-in \n     - æŠ½è±¡åŒ–è®¾è®¡\n     - æ ‡å‡†åŒ–æ¥å£\n     - å¤šäº‘æ¶æ„è®¾è®¡\n - **å®‰å…¨æ€§**\n    - æƒé™æœ€å°åŒ–åŸåˆ™\n    - å®‰å…¨ç­–ç•¥é…ç½®\n    - æ•°æ®åŠ å¯†ä¼ è¾“\n    - å®¡è®¡æ—¥å¿—å®Œå–„\n\n### 16.9. å‰ç«¯å¼€å‘è€…çš„ Serverless å®è·µ\n\n1. **å‰ç«¯é›†æˆ**\n    - API ç½‘å…³é›†æˆ\n    - é™æ€èµ„æºéƒ¨ç½²\n    - èº«ä»½è®¤è¯\n    - å‰ç«¯`æ„å»ºæµç¨‹`\n2. **å¼€å‘å·¥å…·**\n    - Serverless Framework\n    - AWS SAM\n    - Vercel\n    - Netlify\n3. **æœ€ä½³å®è·µ**\n    - åˆç†çš„ API è®¾è®¡\n    - é”™è¯¯å¤„ç†æœºåˆ¶\n    - æ€§èƒ½ç›‘æ§\n    - å®‰å…¨é˜²æŠ¤\n### 16.10. **å‰ç«¯è§†è§’çš„ Serverless**\n\n   - SSR åº”ç”¨\n     ```typescript\n     // Next.js Serverless å‡½æ•°ç¤ºä¾‹\n     export async function getServerSideProps(context) {\n       const data = await fetchData();\n       return {\n         props: { data }\n       };\n     }\n     ```\n   - API è·¯ç”±\n     ```typescript\n     // Vercel Serverless å‡½æ•°ç¤ºä¾‹\n     export default async function handler(req, res) {\n       if (req.method === 'POST') {\n         const data = await processData(req.body);\n         res.status(200).json(data);\n       }\n     }\n     ```\n\n### 16.11. **æœªæ¥è¶‹åŠ¿**\n\n   - Edge Computing é›†æˆ\n   - `WebAssembly` æ”¯æŒ\n   - æ›´å¥½çš„å¼€å‘ä½“éªŒ\n   - æ··åˆäº‘æ¶æ„\n   - æ›´ä½çš„å»¶è¿Ÿ\n   - æ›´å¼ºçš„è®¡ç®—èƒ½åŠ›\n\n### 16.12. **æˆæœ¬ä¼˜åŒ–å»ºè®®**\n\n- åˆç†è®¾ç½®è¶…æ—¶æ—¶é—´\n- ä¼˜åŒ–å‡½æ•°æ‰§è¡Œæ•ˆç‡\n- ä½¿ç”¨ç¼“å­˜å‡å°‘è°ƒç”¨\n- é€‰æ‹©åˆé€‚çš„å†…å­˜é…ç½®\n- ç›‘æ§æˆæœ¬æ”¯å‡º\n\n### 16.13. **å·¥å…·ç”Ÿæ€**\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-2.png)\n\nServerless æ˜¯äº‘è®¡ç®—å‘å±•çš„é‡è¦æ–¹å‘ï¼Œå®ƒèƒ½å¤Ÿå¸®åŠ©å›¢é˜Ÿæ›´ä¸“æ³¨äºä¸šåŠ¡å¼€å‘ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œä¼˜åŒ–èµ„æºä½¿ç”¨ã€‚ä½†åœ¨é‡‡ç”¨ Serverless æ¶æ„æ—¶ï¼Œéœ€è¦å……åˆ†è€ƒè™‘å…¶ç‰¹ç‚¹å’Œé™åˆ¶ï¼Œé€‰æ‹©åˆé€‚çš„åœºæ™¯ï¼Œåšå¥½ç›¸åº”çš„ä¼˜åŒ–å’Œè§„åˆ’ã€‚éšç€æŠ€æœ¯çš„å‘å±•å’Œç”Ÿæ€çš„å®Œå–„ï¼ŒServerless çš„åº”ç”¨åœºæ™¯ä¼šè¶Šæ¥è¶Šå¹¿æ³›ï¼Œå€¼å¾—å›¢é˜ŸæŒç»­å…³æ³¨å’Œå®è·µã€‚\n\n## 17. è¯´è¯´ä¸Šé¢è¯´çš„`å†·å¯åŠ¨`\n\nè®©æˆ‘è¯¦ç»†è§£é‡Šä¸€ä¸‹å†·å¯åŠ¨ï¼ˆCold Startï¼‰çš„æ¦‚å¿µï¼š\n\n> å³`é¦–æ¬¡å¯åŠ¨` \n\n### 17.1. ä»€ä¹ˆæ˜¯å†·å¯åŠ¨ï¼Ÿ\n\nå†·å¯åŠ¨æ˜¯æŒ‡ Serverless å‡½æ•°åœ¨å®Œå…¨\"å†·\"çš„çŠ¶æ€ä¸‹ï¼ˆå³`é¦–æ¬¡è¿è¡Œæˆ–é•¿æ—¶é—´æœªè¿è¡Œ`ï¼‰è¢«è°ƒç”¨æ—¶ï¼Œéœ€è¦ç»å†çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬ï¼š\n\n1. **ç¯å¢ƒå‡†å¤‡**\n   - åˆ†é…è®¡ç®—èµ„æº\n   - å¯åŠ¨å®¹å™¨/è¿è¡Œæ—¶\n   - åŠ è½½è¿è¡Œç¯å¢ƒï¼ˆå¦‚ Node.jsã€Python ç­‰ï¼‰\n2. **ä»£ç åŠ è½½**\n   - ä¸‹è½½å‡½æ•°ä»£ç \n   - è§£å‹ä»£ç åŒ…\n   - åŠ è½½ä¾èµ–é¡¹\n3. **è¿è¡Œæ—¶åˆå§‹åŒ–**\n   - æ‰§è¡Œå…¨å±€ä»£ç \n   - å»ºç«‹æ•°æ®åº“è¿æ¥\n   - åˆå§‹åŒ–å¤–éƒ¨æœåŠ¡å®¢æˆ·ç«¯\n\n### 17.2. å†·å¯åŠ¨ vs çƒ­å¯åŠ¨\n\n1. **å†·å¯åŠ¨ï¼ˆCold Startï¼‰**\n   - å‡½æ•°å®Œå…¨ä»é›¶å¼€å§‹åˆå§‹åŒ–\n   - è€—æ—¶è¾ƒé•¿ï¼ˆå¯èƒ½å‡ ç™¾æ¯«ç§’åˆ°å‡ ç§’ï¼‰\n   - å‘ç”Ÿåœ¨é¦–æ¬¡è°ƒç”¨æˆ–é•¿æ—¶é—´æœªä½¿ç”¨æ—¶\n2. **çƒ­å¯åŠ¨ï¼ˆWarm Startï¼‰**\n   - å¤ç”¨å·²æœ‰çš„è¿è¡Œç¯å¢ƒ\n   - å“åº”é€Ÿåº¦å¿«ï¼ˆé€šå¸¸åœ¨æ¯«ç§’çº§ï¼‰\n   - å‘ç”Ÿåœ¨çŸ­æ—¶é—´å†…çš„é‡å¤è°ƒç”¨\n\nä¾‹å¦‚ï¼š\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-3.png)\n\n### 17.3. å†·å¯åŠ¨çš„å½±å“å› ç´ \n\n1. **è¿è¡Œæ—¶ç¯å¢ƒ**\n   - Node.js é€šå¸¸å¯åŠ¨è¾ƒå¿«\n   - Javaã€.NET ç­‰å¯åŠ¨è¾ƒæ…¢\n   - Pythonã€Go ä»‹äºä¸­é—´\n2. **ä»£ç åŒ…å¤§å°**\n   - ä»£ç åŒ…è¶Šå¤§ï¼ŒåŠ è½½æ—¶é—´è¶Šé•¿\n   - ä¾èµ–é¡¹æ•°é‡å½±å“åˆå§‹åŒ–æ—¶é—´\n3. **åˆå§‹åŒ–é€»è¾‘**\n   - æ•°æ®åº“è¿æ¥å»ºç«‹\n   - å¤–éƒ¨æœåŠ¡å®¢æˆ·ç«¯åˆå§‹åŒ–\n   - é…ç½®åŠ è½½\n\n### 17.4. ä¼˜åŒ–å†·å¯åŠ¨çš„ç­–ç•¥\n\n#### 17.4.1. **ä»£ç å±‚é¢ä¼˜åŒ–**\n\n   ```javascript hl:10\n   // ä¸æ¨è\n   function handler(event) {\n     // æ¯æ¬¡è°ƒç”¨éƒ½åˆå§‹åŒ–\n     const db = new Database();\n     const client = new APIClient();\n     // ...\n   }\n\n   // æ¨è\n   // å…¨å±€åˆå§‹åŒ–ï¼Œå¯ä»¥åœ¨çƒ­å¯åŠ¨æ—¶å¤ç”¨\n   const db = new Database();\n   const client = new APIClient();\n   \n   function handler(event) {\n     // ç›´æ¥ä½¿ç”¨å·²åˆå§‹åŒ–çš„è¿æ¥\n     // ...\n   }\n   ```\n\n#### 17.4.2. **ä¿æŒå‡½æ•°æ´»è·ƒ**\n\n   - ä½¿ç”¨`å®šæ—¶å™¨å®šæœŸè°ƒç”¨å‡½æ•°`\n   - `é¢„çƒ­å…³é”®è·¯å¾„`çš„å‡½æ•°\n   - ä½¿ç”¨`é¢„ç•™å¹¶`å‘ï¼ˆå¦‚ AWS Lambda æä¾›çš„åŠŸèƒ½ï¼‰\n\n#### 17.4.3. **ä¼˜åŒ–ä¾èµ–**\n\n   - ç²¾ç®€ä¾èµ–åŒ…\n   - ä½¿ç”¨è½»é‡çº§åº“\n   - æŒ‰éœ€åŠ è½½æ¨¡å—\n\n#### 17.4.4. **æ¶æ„ä¼˜åŒ–**\n\n   - ä½¿ç”¨`è¿æ¥æ± `\n   - `ç¼“å­˜`é¢‘ç¹è®¿é—®çš„æ•°æ®\n   - åˆç†è®¾ç½®`è¶…æ—¶æ—¶é—´`\n\n### 17.5. å®é™…å½±å“\n\nå‡è®¾ä¸€ä¸ªå…¸å‹çš„ Web API åœºæ™¯ï¼š\n\n1. **æ­£å¸¸æƒ…å†µï¼ˆçƒ­å¯åŠ¨ï¼‰**\n   - API å“åº”æ—¶é—´ï¼š~100ms\n   - ç”¨æˆ·ä½“éªŒè‰¯å¥½\n2. **å†·å¯åŠ¨æƒ…å†µ**\n   - Node.jsï¼šé¢å¤– 300-500ms\n   - Pythonï¼šé¢å¤– 500-800ms\n   - Javaï¼šé¢å¤– 1-3ç§’\n   - ç”¨æˆ·å¯èƒ½æ„ŸçŸ¥åˆ°æ˜æ˜¾å»¶è¿Ÿ\n\n### 17.6. ç›‘æ§å’Œåˆ†æ\n\n1. **å…³é”®æŒ‡æ ‡**\n   - åˆå§‹åŒ–æ—¶é—´\n   - æ‰§è¡Œæ—¶é—´\n   - å†·å¯åŠ¨é¢‘ç‡\n2. **ç›‘æ§å·¥å…·**\n   - äº‘å¹³å°è‡ªå¸¦çš„ç›‘æ§\n   - è‡ªå®šä¹‰æ—¥å¿—åˆ†æ\n   - APM å·¥å…·\n\n### 17.7. ä½¿ç”¨å»ºè®®\n\n1. **è¯„ä¼°ä¸šåŠ¡éœ€æ±‚**\n   - å¯¹å“åº”æ—¶é—´æ•æ„Ÿçš„æ¥å£éœ€è¦ç‰¹åˆ«å…³æ³¨\n   - è€ƒè™‘æ˜¯å¦éœ€è¦é¢„ç•™å¹¶å‘\n   - æƒè¡¡æˆæœ¬å’Œæ€§èƒ½\n2. **æµ‹è¯•ç­–ç•¥**\n   - æ¨¡æ‹Ÿå†·å¯åŠ¨åœºæ™¯\n   - å‹åŠ›æµ‹è¯•\n   - æ€§èƒ½åŸºå‡†æµ‹è¯•\n3. **åº”å¯¹æ–¹æ¡ˆ**\n   - å…³é”®æ¥å£ä½¿ç”¨é¢„ç•™å¹¶å‘\n   - éå…³é”®æ¥å£æ¥å—é€‚åº¦å†·å¯åŠ¨\n   - å®æ–½ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶\n\nå†·å¯åŠ¨æ˜¯ Serverless æ¶æ„ä¸­çš„ä¸€ä¸ªé‡è¦è€ƒè™‘å› ç´ ï¼Œé€šè¿‡åˆç†çš„è®¾è®¡å’Œä¼˜åŒ–ï¼Œå¯ä»¥å°†å…¶å½±å“é™åˆ°æœ€ä½ã€‚å¯¹äºå¤§å¤šæ•°åº”ç”¨æ¥è¯´ï¼Œå†·å¯åŠ¨çš„å½±å“æ˜¯å¯ä»¥æ¥å—çš„ï¼Œç‰¹åˆ«æ˜¯è€ƒè™‘åˆ° Serverless å¸¦æ¥çš„å…¶ä»–ä¼˜åŠ¿ï¼ˆå¦‚æˆæœ¬æ•ˆç›Šã€è‡ªåŠ¨æ‰©å±•ç­‰ï¼‰ã€‚\n\n## 18. Vendor Lock-inï¼ˆä¾›åº”å•†é”å®šï¼‰\n\nVendor Lock-inï¼ˆä¾›åº”å•†é”å®šï¼‰æ˜¯äº‘è®¡ç®—é¢†åŸŸä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œè®©æˆ‘è¯¦ç»†è§£é‡Šä¸€ä¸‹ï¼š\n\n### 18.1. ä»€ä¹ˆæ˜¯ Vendor Lock-inï¼Ÿ\n\nVendor Lock-in æŒ‡çš„æ˜¯ç”¨æˆ·ï¼ˆé€šå¸¸æ˜¯ä¼ä¸šï¼‰è¿‡åº¦ä¾èµ–ç‰¹å®šä¾›åº”å•†çš„äº§å“æˆ–æœåŠ¡ï¼Œå¯¼è‡´æ— æ³•è½»æ˜“åˆ‡æ¢åˆ°å…¶ä»–ä¾›åº”å•†çš„æƒ…å†µã€‚åœ¨ Serverless ç¯å¢ƒä¸­ï¼Œè¿™ç§æƒ…å†µå°¤ä¸ºæ˜æ˜¾ã€‚\n\n### 18.2. Serverless ä¸­çš„ Vendor Lock-in è¡¨ç°\n\n#### 18.2.1. **ä¸“æœ‰æœåŠ¡ä¾èµ–**\n\n```javascript\n// AWS ä¸“æœ‰æœåŠ¡ç¤ºä¾‹\nconst AWS = require('aws-sdk');\nconst dynamodb = new AWS.DynamoDB();\nconst s3 = new AWS.S3();\n\n// æ·±åº¦ç»‘å®š AWS æœåŠ¡\nasync function handleUser(userId) {\n    await dynamodb.putItem({\n        TableName: 'Users',\n        Item: { /* ... */ }\n    }).promise();\n    \n    await s3.putObject({\n        Bucket: 'user-files',\n        Key: `${userId}/profile`,\n        Body: data\n    }).promise();\n}\n```\n\n#### 18.2.2. **ä¸“æœ‰ API æ ¼å¼**\n\n```javascript\n// AWS Lambda ç‰¹å®šçš„å¤„ç†å™¨æ ¼å¼\nexports.handler = async (event, context) => {\n    // AWS ç‰¹å®šçš„äº‹ä»¶æ ¼å¼\n    const records = event.Records;\n    // ...\n}\n\n// Azure Functions çš„æ ¼å¼åˆ™å®Œå…¨ä¸åŒ\nmodule.exports = async function (context, myTimer) {\n    // Azure ç‰¹å®šçš„ä¸Šä¸‹æ–‡å’Œè§¦å‘å™¨\n    // ...\n};\n```\n\n### 18.3. Vendor Lock-in çš„å½±å“\n\n1. **è¿ç§»å›°éš¾**\n   - ä»£ç é‡å†™\n   - æ¶æ„è°ƒæ•´\n   - æ•°æ®è¿ç§»\n   - è¿ç»´æµç¨‹å˜æ›´\n2. **æˆæœ¬å½±å“**\n   - éš¾ä»¥è®®ä»·\n   - è¢«åŠ¨æ¥å—ä»·æ ¼è°ƒæ•´\n   - è¿ç§»æˆæœ¬é«˜\n3. **æŠ€æœ¯é™åˆ¶**\n   - å—é™äºä¾›åº”å•†çš„æŠ€æœ¯æ ˆ\n   - åˆ›æ–°å—é™\n   - æ€§èƒ½ä¼˜åŒ–å—é™\n\n### 18.4. å¦‚ä½•é™ä½ Vendor Lock-in é£é™©\n\n#### 18.4.1. **æŠ½è±¡å±‚è®¾è®¡**\n\n````JavaScript\n\n  // å®šä¹‰é€šç”¨æ¥å£\n  interface StorageService {\n    save(key: string, data: any): Promise<void>;\n    get(key: string): Promise<any>;\n    delete(key: string): Promise<void>;\n  }\n\n  // AWS S3 å®ç°\n  class S3StorageService implements StorageService {\n    private s3: AWS.S3;\n\n    constructor() {\n      this.s3 = new AWS.S3();\n    }\n\n    async save(key: string, data: any): Promise<void> {\n      await this.s3.putObject({\n        Bucket: 'my-bucket',\n        Key: key,\n        Body: data\n      }).promise();\n    }\n    // ... å…¶ä»–æ–¹æ³•å®ç°\n  }\n\n  // Azure Blob å®ç°\n  class AzureStorageService implements StorageService {\n    private blobService: azure.BlobService;\n\n    constructor() {\n      this.blobService = azure.createBlobService();\n    }\n\n    async save(key: string, data: any): Promise<void> {\n      await this.blobService.createBlockBlobFromText(\n        'my-container',\n        key,\n        data\n      );\n    }\n    // ... å…¶ä»–æ–¹æ³•å®ç°\n  }\n\n  // ä¸šåŠ¡ä»£ç ä½¿ç”¨æ¥å£ï¼Œä¸ç›´æ¥ä¾èµ–å…·ä½“å®ç°\n  class UserService {\n    constructor(private storage: StorageService) {}\n\n    async saveUserProfile(userId: string, data: any) {\n      await this.storage.save(`users/${userId}`, data);\n    }\n  }\n````\n\n#### 18.4.2. **ä½¿ç”¨æ ‡å‡†åŒ–æŠ€æœ¯**\n\n- ä½¿ç”¨å¼€æºæŠ€æœ¯æ ˆ\n- é‡‡ç”¨å®¹å™¨åŒ–éƒ¨ç½²\n- éµå¾ªäº‘åŸç”Ÿæ ‡å‡†\n\n#### 18.4.3. **å¤šäº‘ç­–ç•¥**\n\n   ```yaml\n   # ä½¿ç”¨ Serverless Framework æ”¯æŒå¤šäº‘éƒ¨ç½²\n   service: my-service\n\n   provider:\n     name: ${opt:provider, 'aws'} # å¯åˆ‡æ¢äº‘ä¾›åº”å•†\n     runtime: nodejs14.x\n\n   functions:\n     hello:\n       handler: handler.hello\n       events:\n         - http:\n             path: hello\n             method: get\n   ```\n\n#### 18.4.4. **æ•°æ®ç®¡ç†ç­–ç•¥**\n\n- ä½¿ç”¨æ ‡å‡†æ•°æ®æ ¼å¼\n- å®šæœŸæ•°æ®å¤‡ä»½\n- ä¿æŒæ•°æ®å¯ç§»æ¤æ€§\n\n### 18.5. å®é™…æ¡ˆä¾‹åˆ†æ\n\n#### 18.5.1. **é«˜è€¦åˆåœºæ™¯**\n\n```javascript\n// å¼ºä¾èµ– AWS æœåŠ¡çš„ä»£ç \nconst AWS = require('aws-sdk');\nconst lambda = new AWS.Lambda();\nconst dynamodb = new AWS.DynamoDB();\nconst sns = new AWS.SNS();\n\nasync function processOrder(order) {\n    // ç›´æ¥ä½¿ç”¨ AWS æœåŠ¡\n    await dynamodb.putItem({ /* ... */ });\n    await lambda.invoke({ /* ... */ });\n    await sns.publish({ /* ... */ });\n}\n```\n\n#### 18.5.2. **ä½è€¦åˆæ–¹æ¡ˆ**\n\n```javascript\n// ä½¿ç”¨é€‚é…å™¨æ¨¡å¼\nclass MessageQueue {\n    constructor(provider) {\n        this.provider = provider;\n    }\n\n    async publish(message) {\n        return this.provider.sendMessage(message);\n    }\n}\n\nclass AWSProvider {\n    async sendMessage(message) {\n        const sns = new AWS.SNS();\n        return sns.publish({\n            TopicArn: process.env.TOPIC_ARN,\n            Message: message\n        }).promise();\n    }\n}\n\nclass GCPProvider {\n    async sendMessage(message) {\n        const pubsub = new PubSub();\n        const topic = pubsub.topic(process.env.TOPIC_NAME);\n        return topic.publish(Buffer.from(message));\n    }\n}\n```\n\n### 18.6. é¢„é˜²æªæ–½æ¸…å•\n\n1. **æ¶æ„è®¾è®¡**\n   - æ¨¡å—åŒ–è®¾è®¡\n   - ä½¿ç”¨ä¾èµ–æ³¨å…¥\n   - æ¥å£æŠ½è±¡\n   - é…ç½®å¤–éƒ¨åŒ–\n2. **æŠ€æœ¯é€‰æ‹©**\n   - ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åè®®\n   - é€‰æ‹©å¼€æºè§£å†³æ–¹æ¡ˆ\n   - é¿å…ä½¿ç”¨ä¸“æœ‰API\n3. **å¼€å‘å®è·µ**\n   - ç¼–å†™å¯ç§»æ¤ä»£ç \n   - ä½¿ç”¨é…ç½®ç®¡ç†\n   - ä¿æŒæ–‡æ¡£å®Œå–„\n4. **è¿ç»´ç­–ç•¥**\n   - è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬\n   - ç»Ÿä¸€çš„ç›‘æ§æ–¹æ¡ˆ\n   - å¤‡ä»½å’Œæ¢å¤è®¡åˆ’\n\n### 18.7. è¯„ä¼°å’Œå†³ç­–\n\nåœ¨é€‰æ‹©äº‘æœåŠ¡æ—¶ï¼Œéœ€è¦è€ƒè™‘ï¼š\n\n1. **ä¸šåŠ¡éœ€æ±‚**\n   - åŠŸèƒ½éœ€æ±‚\n   - æ€§èƒ½è¦æ±‚\n   - æˆæœ¬é¢„ç®—\n2. **é£é™©è¯„ä¼°**\n   - ä¾›åº”å•†ç¨³å®šæ€§\n   - è¿ç§»éš¾åº¦\n   - é•¿æœŸæˆæœ¬\n3. **å¹³è¡¡å–èˆ**\n   - å¼€å‘æ•ˆç‡\n   - ç»´æŠ¤æˆæœ¬\n   - æŠ€æœ¯çµæ´»æ€§\n\nVendor Lock-in æ˜¯ä¸€ä¸ªéœ€è¦åœ¨é¡¹ç›®æ—©æœŸå°±å¼€å§‹è€ƒè™‘çš„é—®é¢˜ã€‚é€šè¿‡åˆç†çš„æ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰æ‹©ï¼Œå¯ä»¥åœ¨äº«å—äº‘æœåŠ¡ä¾¿åˆ©æ€§çš„åŒæ—¶ï¼Œé™ä½å¯¹ç‰¹å®šä¾›åº”å•†çš„ä¾èµ–ç¨‹åº¦ã€‚å…³é”®æ˜¯è¦åœ¨å®é™…ä¸šåŠ¡éœ€æ±‚å’ŒæŠ€æœ¯è‡ªç”±åº¦ä¹‹é—´æ‰¾åˆ°åˆé€‚çš„å¹³è¡¡ç‚¹ã€‚","b6fc3b39570b57978e3932f51327fe2c":"\n# å¸¸è§é¢è¯•é¢˜\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. a+++b ã€a++++b ã€ a+++++b çš„ç»“æœï¼Ÿ \n\n> [!danger]\n> å…³é”®æ˜¯çœ‹å¦‚ä½•æ–­å¥çš„ï¼Œå³ç©ºæ ¼åœ¨å“ªå„¿\n\n```javascript\nvar a = 1;\nvar b = 2;\nconsole.log(a++ + b); // 3\n\nvar a = 1;\nvar b = 2;\nconsole.log(a + ++b); // 4\n\nvar a = 1;\nvar b = 2;\nconsole.log(a ++++ b); // æŠ¥é”™\n\nvar a = 1;\nvar b = 2;\nconsole.log(a++ + ++b); // 4\n```\n\n## 2. è¯´è¯´ä½ å¹³æ—¶å¸¸ç”¨çš„å‘½ä»¤è¡Œ\n\n- `tail web.2016-06-06.log -n 300 -f` æŸ¥çœ‹åº•éƒ¨å³æœ€æ–°300æ¡æ—¥å¿—è®°å½•ï¼Œå¹¶å®æ—¶åˆ·æ–°\n- æ ¹æ®ç«¯å£æŸ¥è¿›ç¨‹å¹¶æ€æ­»è¿›ç¨‹ï¼š \n\t- `lsof -i tcp:8080`\n\t- `kill -9 pid`\n- æ¸…é™¤ Git ç¼“å­˜ï¼š`git rm --cached  .idea`\n\n## 3. æ ¹æ®ä»¥ä¸‹è¦æ±‚ï¼Œå†™ä¸€ä¸ªæ•°ç»„å»é‡å‡½æ•°\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-13.png)\n\n### 3.1. ä½¿ç”¨ JSON.stringify \n\n```javascript hl:6\nfunction fn(arr) {\n\t\n    let map = new Map();\n    for (let i = 0; i < arr.length; i++) {\n        let item = arr[i];\n        let itemStr = JSON.stringify(item, (k, v) => {\n            console.log('k:',k);\n            console.log('v:',v);\n        });\n        if (!map.get(itemStr)) {\n            map.set(itemStr, item);\n        }\n    }\n    return [...map.values()];\n}\n\n```\n\n### 3.2. å¯¹äºä¸‹é¢è¿™ç§æƒ…å†µå‘¢\n\n```javascript\nconst ss = [\n    {\n        a: 'c',\n        b: 'b',\n        c: 'c',\n    },\n    {\n        c: 'c',\n        b: 'b',\n        a: 'c',\n    }\n]\n```\n\n### 3.3. é€šç”¨æƒ…å†µ\n\n```javascript hl:2,5,9,18\nfunction isEqual(val1, val2) {\n  // å¤„ç†åŸºç¡€ç±»å‹\n  if (val1 === val2) return true;\n\n  // å¦‚æœä¸æ˜¯å¯¹è±¡ç±»å‹ï¼Œç›´æ¥è¿”å›false\n  if (typeof val1 !== \"object\" || typeof val2 !== \"object\") return false;\n  if (!val1 || !val2) return false;\n\n  // å¤„ç†æ•°ç»„\n  if (Array.isArray(val1) && Array.isArray(val2)) {\n    if (val1.length !== val2.length) return false;\n    for (let i = 0; i < val1.length; i++) {\n      if (!isEqual(val1[i], val2[i])) return false;\n    }\n    return true;\n  }\n\n  // å¤„ç†å¯¹è±¡\n  const keys1 = Object.keys(val1);\n  const keys2 = Object.keys(val2);\n  if (keys1.length !== keys2.length) return false;\n\n  for (let key of keys1) {\n    if (!isEqual(val1[key], val2[key])) return false;\n  }\n  return true;\n}\n```\n\n## 4. å¦‚ä½•é«˜æ€§èƒ½æ’å…¥ `100000` ä¸ª DOMèŠ‚ç‚¹\n\næœ‰å‡ ç§é«˜æ€§èƒ½æ’å…¥å¤§é‡ DOM èŠ‚ç‚¹çš„æ–¹æ³•ï¼Œæˆ‘æŒ‰æ€§èƒ½ä»é«˜åˆ°ä½æ’åºè¯´æ˜ï¼š\n\n### 4.1. DocumentFragment + è™šæ‹Ÿåˆ—è¡¨\n\n```javascript\nfunction renderList(total) {\n    const container = document.getElementById('container');\n    const fragment = document.createDocumentFragment();\n    const itemHeight = 20; // å‡è®¾æ¯é¡¹é«˜åº¦20px\n    const visibleCount = Math.ceil(window.innerHeight / itemHeight);\n    \n    // åˆ›å»ºè™šæ‹Ÿæ»šåŠ¨å®¹å™¨\n    const virtualContainer = document.createElement('div');\n    virtualContainer.style.height = `${total * itemHeight}px`;\n    virtualContainer.style.position = 'relative';\n    \n    // åˆå§‹åªæ¸²æŸ“å¯è§†åŒºåŸŸçš„å†…å®¹\n    function renderItems(startIndex) {\n        fragment.textContent = ''; // æ¸…ç©º\n        const endIndex = Math.min(startIndex + visibleCount, total);\n        \n        for(let i = startIndex; i < endIndex; i++) {\n            const div = document.createElement('div');\n            div.textContent = `Item ${i}`;\n            div.style.position = 'absolute';\n            div.style.top = `${i * itemHeight}px`;\n            fragment.appendChild(div);\n        }\n        \n        virtualContainer.textContent = '';\n        virtualContainer.appendChild(fragment);\n    }\n    \n    // ç›‘å¬æ»šåŠ¨äº‹ä»¶\n    container.addEventListener('scroll', () => {\n        const scrollTop = container.scrollTop;\n        const startIndex = Math.floor(scrollTop / itemHeight);\n        renderItems(startIndex);\n    });\n    \n    container.appendChild(virtualContainer);\n    renderItems(0);\n}\n```\n\n### 4.2. DocumentFragment + requestAnimationFrame åˆ†æ‰¹æ’å…¥\n\n```javascript hl:14,17\nfunction renderWithRAF(total) {\n    const container = document.getElementById('container');\n    const fragment = document.createDocumentFragment();\n    const batchSize = 500; // æ¯æ‰¹å¤„ç†500ä¸ª\n    let currentIndex = 0;\n    \n    function appendItems() {\n        const fragment = document.createDocumentFragment();\n        const end = Math.min(currentIndex + batchSize, total);\n        \n        for(let i = currentIndex; i < end; i++) {\n            const div = document.createElement('div');\n            div.textContent = `Item ${i}`;\n            fragment.appendChild(div);\n        }\n        \n        container.appendChild(fragment);\n        currentIndex = end;\n        \n        if(currentIndex < total) {\n            requestAnimationFrame(appendItems);\n        }\n    }\n    \n    requestAnimationFrame(appendItems);\n}\n```\n\n### 4.3. DocumentFragment ä¸€æ¬¡æ€§æ’å…¥\n\n```javascript hl:3,8,11\nfunction renderAll(total) {\n    const container = document.getElementById('container');\n    const fragment = document.createDocumentFragment();\n    \n    for(let i = 0; i < total; i++) {\n        const div = document.createElement('div');\n        div.textContent = `Item ${i}`;\n        fragment.appendChild(div);\n    }\n    \n    container.appendChild(fragment);\n}\n```\n\n### 4.4. innerHTML æ¨¡æ¿å­—ç¬¦ä¸²\n\n```javascript\nfunction renderWithInnerHTML(total) {\n    const container = document.getElementById('container');\n    const html = Array.from({ length: total }, (_, i) => \n        `<div>Item ${i}</div>`\n    ).join('');\n    \n    container.innerHTML = html;\n}\n```\n\n### 4.5. æ€§èƒ½ä¼˜åŒ–è¦ç‚¹\n\n- ä½¿ç”¨è™šæ‹Ÿåˆ—è¡¨ï¼ˆæœ€ä¼˜æ–¹æ¡ˆï¼‰\n\t- åªæ¸²æŸ“å¯è§†åŒºåŸŸçš„å†…å®¹\n\t- ç›‘å¬æ»šåŠ¨æŒ‰éœ€æ¸²æŸ“\n\t- å†…å­˜å ç”¨æœ€å°\n\t- æ€§èƒ½æœ€å¥½\n- åˆ†æ‰¹å¤„ç†\n\t- ä½¿ç”¨ `requestAnimationFrame` åˆ†æ‰¹æ’å…¥\n\t- é¿å…é•¿æ—¶é—´é˜»å¡ä¸»çº¿ç¨‹\n\t- ä¿æŒé¡µé¢å“åº”æ€§\n- DocumentFragment\n\t- å‡å°‘ DOM æ“ä½œæ¬¡æ•°\n\t- é¿å…é‡æ’é‡ç»˜\n\t- ä¸€æ¬¡æ€§æ’å…¥\n- æ‰¹é‡æ›´æ–°\n\t- ä½¿ç”¨ innerHTML æˆ–æ¨¡æ¿å­—ç¬¦ä¸²\n\t- å‡å°‘ DOM æ“ä½œ\n\t- æ³¨æ„ XSS é£é™©\n\n### 4.6. ä½¿ç”¨å»ºè®®\n\n- æ•°æ®é‡å¤§æ—¶ï¼ˆ>1000ï¼‰æ¨èä½¿ç”¨è™šæ‹Ÿåˆ—è¡¨\n- æ•°æ®é‡ä¸­ç­‰æ—¶ï¼ˆ100-1000ï¼‰å¯ä»¥ç”¨åˆ†æ‰¹å¤„ç†\n- æ•°æ®é‡å°æ—¶ï¼ˆ<100ï¼‰å¯ä»¥ç›´æ¥ç”¨ DocumentFragment\n- éœ€è¦è€ƒè™‘å†…å­˜å ç”¨æ—¶é¿å…ä½¿ç”¨ innerHTML\n\n### 4.7. ç¤ºä¾‹ç”¨æ³•\n\n```javascript\n// è™šæ‹Ÿåˆ—è¡¨ï¼ˆæ¨èï¼‰\nrenderList(100000);\n\n// åˆ†æ‰¹å¤„ç†\nrenderWithRAF(100000);\n\n// ä¸€æ¬¡æ€§æ’å…¥\nrenderAll(100000);\n\n// innerHTMLæ–¹å¼\nrenderWithInnerHTML(100000);\n```\n\n## 5. æ‰“å¹³ä¸€ä¸ªæ ‘å½¢ç»“æ„\n\n```javascript\nlet ss = [\n  {\n    id: \"1\",\n    name: \"1\",\n    pid: \"0\",\n    children: [\n      {\n        id: \"1-1\",\n        name: \"1-1\",\n        pid: \"1\",\n      },\n      {\n        id: \"1-2\",\n        name: \"1-2\",\n        pid: \"1\",\n        children: [\n          {\n            id: \"1-2-1\",\n            name: \"1-2-1\",\n            pid: \"1-2\",\n          },\n        ],\n      },\n    ],\n  },\n  {\n    id: \"2\",\n    name: \"2\",\n    pid: \"0\",\n    children: [\n      {\n        id: \"2-1\",\n        name: \"2-1\",\n        pid: \"2\",\n      },\n    ],\n  },\n];\n\n// æ‰“å¹³ä¸€ä¸ªæ ‘å½¢ç»“æ„\nfunction flatTree(tree) {\n  let res = [];\n\n  function traverse(tree) {\n    for (let i = 0; i < tree.length; i++) {\n      let item = tree[i];\n      res.push(item);\n      if (Array.isArray(item.children)) {\n        traverse(item.children);\n      }\n    }\n  }\n\n  return res;\n}\n\n```\n\n## 6. åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦æ˜¯ `ç´ æ•°` ï¼Œåˆ—ä¸¾å‡º `n` ä»¥å†…çš„`ç´ æ•°` çš„ä¸ªæ•°\n\n```javascript\n// æ–­ä¸€ä¸ªæ•°æ˜¯å¦æ˜¯ç´ æ•°\n\nfunction isPrime(n) {\n  if (n < 2) {\n    return false;\n  }\n  for (let i = 2; i * i < n; i++) {\n    if (n % i === 0) {\n      return false;\n    }\n  }\n  return true;\n}\n\n// åˆ—ä¸¾å‡º n ä»¥å†…çš„æ‰€æœ‰ç´ æ•°\n\nfunction listPrimes(n) {\n  const res = [];\n  for (let i = 2; i <= n; i++) {\n    if (isPrime(i)) {\n      res.push(i);\n    }\n  }\n  return res;\n}\n\n// :::: ä¼˜åŒ–\n//  é¦–å…ˆ 2 æ˜¯ä¸€ä¸ªç´ æ•°ï¼Œé‚£ä¹ˆ 2 Ã— 2 = 4, 3 Ã— 2 = 6, 4 Ã— 2 = 8â€¦ éƒ½ä¸å¯èƒ½æ˜¯ç´ æ•°äº†ã€‚\n//  ç„¶åæˆ‘ä»¬å‘ç° 3 ä¹Ÿæ˜¯ç´ æ•°ï¼Œé‚£ä¹ˆ 3 Ã— 2 = 6, 3 Ã— 3 = 9, 3 Ã— 4 = 12â€¦ ä¹Ÿéƒ½ä¸å¯èƒ½æ˜¯ç´ æ•°äº†\n\nfunction listPrimes(n) {\n  const res = [];\n  // primes.flll(true) ,è¡¨ç¤ºæ‰€æœ‰çš„æ•°éƒ½æ˜¯ç´ æ•°\n  const primes = new Array(n).fill(true);\n  for (let i = 2; i <= n; i++) {\n    // å¦‚æœ i æ˜¯ç´ æ•°, é‚£ä¹ˆ i çš„å€æ•°éƒ½ä¸æ˜¯ç´ æ•°\n    if (isPrime(i)) {\n      res.push(i);\n      for (let j = i * i; j < n; j += i) {\n        primes[j] = false;\n      }\n    }\n  }\n  return res;\n}\n\n```\n\n## 7. è·¨åŸŸ\n\n### 7.1. åˆ—ä¸¾ä¸‹è·¨é¡µé¢é€šè®¯çš„æ–¹å¼\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-15.png)\n\n### 7.2. è·¨åŸŸçš„è¡¨ç°ã€å¦‚ä½•è·¨åŸŸï¼Ÿ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-16.png)\n\n- ç®€å•è¯·æ±‚ï¼Œç›´æ¥åœ¨ origin ä¸­æ·»åŠ å­—æ®µ\n- éç®€å•è¯·æ±‚ï¼Œéœ€è¦é¢„æ£€\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-17.png)\n\n### 7.3. å…³äºè·¨åŸŸã€ä¸ºä»€ä¹ˆéç®€å•è¯·æ±‚ä¸éœ€è¦é¢„æ£€ï¼Œè€Œå…¶ä»–è¯·æ±‚éœ€è¦é¢„æ£€\n\nè®©æˆ‘è¯¦ç»†è§£é‡Šä¸€ä¸‹è·¨åŸŸè¯·æ±‚ä¸­çš„ç®€å•è¯·æ±‚å’Œé¢„æ£€è¯·æ±‚çš„æœºåˆ¶ï¼š\n\n### 7.4. ç®€å•è¯·æ±‚çš„æ¡ä»¶\n\nä¸€ä¸ªè¯·æ±‚å¿…é¡»åŒæ—¶æ»¡è¶³ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶æ‰æ˜¯ç®€å•è¯·æ±‚ï¼š\n\n1. è¯·æ±‚æ–¹æ³•ä»…é™äºï¼š\n   - GET\n   - POST\n   - HEAD\n\n2. å…è®¸çš„è¯·æ±‚å¤´ï¼š\n   - Accept\n   - Accept-Language\n   - Content-Language\n   - Content-Typeï¼ˆä»…é™äºä»¥ä¸‹ä¸‰ç§ï¼‰ï¼š\n     - text/plain\n     - multipart/form-data\n     - application/x-www-form-urlencoded\n   - DPR\n   - Downlink\n   - Save-Data\n   - Viewport-Width\n   - Width\n\n3. è¯·æ±‚ä¸­æ²¡æœ‰æ³¨å†Œä»»ä½•äº‹ä»¶ç›‘å¬å™¨\n4. è¯·æ±‚ä¸­æ²¡æœ‰ä½¿ç”¨ ReadableStream å¯¹è±¡\n\n### 7.5. ä¸ºä»€ä¹ˆéœ€è¦é¢„æ£€è¯·æ±‚ï¼Ÿ\n\né¢„æ£€è¯·æ±‚ï¼ˆPreflightï¼‰çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†**ä¿æŠ¤æœåŠ¡å™¨**ã€‚åŸå› å¦‚ä¸‹ï¼š\n\n#### 7.5.1. **å‘åå…¼å®¹**\n\n```javascript\n// æ—§æœåŠ¡å™¨åªçŸ¥é“å¤„ç†ç®€å•è¯·æ±‚\n// å¦‚æœç›´æ¥å‘é€å¤æ‚è¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æ„å¤–è¡Œä¸º\nfetch('api.example.com/data', {\n    method: 'DELETE',  // éç®€å•è¯·æ±‚\n    headers: {\n        'Content-Type': 'application/json'  // éç®€å•è¯·æ±‚çš„ Content-Type\n    }\n});\n```\n\n#### 7.5.2. **å®‰å…¨æ€§è€ƒè™‘**\n\n```javascript\n// é¢„æ£€è¯·æ±‚å¯ä»¥è®©æœåŠ¡å™¨äº‹å…ˆæ£€æŸ¥ï¼š\n// 1. è¯¥æºæ˜¯å¦è¢«å…è®¸\n// 2. è¯¥æ–¹æ³•æ˜¯å¦è¢«å…è®¸\n// 3. è¯¥å¤´éƒ¨æ˜¯å¦è¢«å…è®¸\nconst headers = new Headers({\n    'X-Custom-Header': 'value',  // è‡ªå®šä¹‰å¤´éƒ¨éœ€è¦é¢„æ£€\n    'Content-Type': 'application/json'\n});\n\nfetch('api.example.com/data', {\n    method: 'PUT',\n    headers: headers,\n    body: JSON.stringify({ key: 'value' })\n});\n```\n\n#### 7.5.3. **é¿å…æœåŠ¡å™¨ç«¯çš„å‰¯ä½œç”¨**\n\n```javascript\n// DELETE è¯·æ±‚å¯èƒ½ä¼šåˆ é™¤æ•°æ®\n// PUT è¯·æ±‚å¯èƒ½ä¼šä¿®æ”¹æ•°æ®\n// é¢„æ£€è¯·æ±‚å¯ä»¥åœ¨å®é™…æ“ä½œå‰éªŒè¯æƒé™\nasync function deleteResource() {\n    // ä¼šé¦–å…ˆå‘é€ OPTIONS è¯·æ±‚\n    const response = await fetch('api.example.com/resource/123', {\n        method: 'DELETE',\n        headers: {\n            'Authorization': 'Bearer token'\n        }\n    });\n}\n```\n\n### 7.6. é¢„æ£€è¯·æ±‚çš„è¿‡ç¨‹\n\n#### 7.6.1. **OPTIONS è¯·æ±‚**\n\n```http\nOPTIONS /resource/123 HTTP/1.1\nHost: api.example.com\nOrigin: https://example.com\nAccess-Control-Request-Method: DELETE\nAccess-Control-Request-Headers: Authorization\n```\n\n#### 7.6.2. **æœåŠ¡å™¨å“åº”**\n\n```http\nHTTP/1.1 200 OK\nAccess-Control-Allow-Origin: https://example.com\nAccess-Control-Allow-Methods: DELETE, PUT, POST, GET, OPTIONS\nAccess-Control-Allow-Headers: Authorization\nAccess-Control-Max-Age: 86400\n```\n\n#### 7.6.3. **å®é™…è¯·æ±‚**\n\n```http\nDELETE /resource/123 HTTP/1.1\nHost: api.example.com\nOrigin: https://example.com\nAuthorization: Bearer token\n```\n\n### 7.7. ä¸ºä»€ä¹ˆç®€å•è¯·æ±‚ä¸éœ€è¦é¢„æ£€ï¼Ÿ\n\n#### 7.7.1. **å†å²åŸå› **\n\n```html\n<!-- åœ¨ CORS å‡ºç°ä¹‹å‰ï¼Œè¿™äº›æ“ä½œå°±å·²ç»å¯ä»¥è·¨åŸŸäº† -->\n<form action=\"https://other-domain.com/form\" method=\"POST\">\n    <input type=\"text\" name=\"data\">\n    <button type=\"submit\">Submit</button>\n</form>\n\n<img src=\"https://other-domain.com/image.jpg\">\n```\n\n#### 7.7.2. **å®‰å…¨æ€§è€ƒè™‘**\n\n```javascript\n// ç®€å•è¯·æ±‚çš„ç‰¹ç‚¹ï¼š\n// 1. ä¸ä¼šæ”¹å˜æœåŠ¡å™¨æ•°æ®ï¼ˆGETï¼‰\n// 2. ä½¿ç”¨ä¼ ç»Ÿçš„æ•°æ®æ ¼å¼ï¼ˆform-dataï¼‰\n// 3. ä¸åŒ…å«è‡ªå®šä¹‰å¤´éƒ¨\nfetch('api.example.com/data', {\n    method: 'GET',\n    headers: {\n        'Accept': 'application/json'\n    }\n});\n```\n\n### 7.8. æœ€ä½³å®è·µï¼š **ç¼“å­˜é¢„æ£€è¯·æ±‚**\n\n```javascript\n// æœåŠ¡å™¨ç«¯è®¾ç½®é¢„æ£€è¯·æ±‚çš„ç¼“å­˜æ—¶é—´\napp.options('/api', (req, res) => {\n    res.header('Access-Control-Max-Age', '86400'); // 24å°æ—¶\n    res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE');\n    res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization');\n    res.send();\n});\n```\n\n## 8. å®ç° `å­å…ƒç´ å®½åº¦`æ°¸è¿œæ˜¯`çˆ¶å…ƒç´ çš„ä¸€åŠ`ï¼Œä¸”`å®½é«˜æ¯”`æ°¸è¿œä¸º `2 :1`\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-18.png)\n\n## 9. å…³äº DOM æ“ä½œçš„ä¸€äº›ç»†èŠ‚ç‚¹\n\n- isConnect è¡¨ç¤ºæ˜¯å¦åœ¨æ–‡æ¡£ä¸­\n- DOM æ ‘ä¸­æœ‰`å‰åå…„å¼ŸèŠ‚ç‚¹`çš„æŒ‡é’ˆå¼•ç”¨å±æ€§\n- `document.elementFromPoint(x,y)` æ–¹æ³•è¿”å›ä½äºé¡µé¢æŒ‡å®šä½ç½®`æœ€ä¸Šå±‚çš„å…ƒç´ èŠ‚ç‚¹`\n- `Event.composedPath()` è¿”å›å†’æ³¡ç»è¿‡çš„ DOM èŠ‚ç‚¹\n- `Navigator.sendBeacon()` å¸¸ä½¿ç”¨åœ¨åŸ‹ç‚¹åœºæ™¯ï¼Œæµè§ˆå™¨ä¼šæŠŠæ”¾åœ¨é˜Ÿåˆ—é‡Œï¼Œæ‰€ä»¥é¡µé¢å…³é—­ä¹Ÿä¼šæ­£å¸¸å‘é€\n\n## 10. æ™®é€šå‡½æ•°å’Œç®­å¤´å‡½æ•°åœ¨ this ç»‘å®šä¸Šçš„åŒºåˆ«\n\n### 10.1. æ™®é€šå‡½æ•°çš„ this\n\næ™®é€šå‡½æ•°çš„ this æ˜¯**åŠ¨æ€ç»‘å®š**çš„ï¼Œå–å†³äº**å‡½æ•°çš„è°ƒç”¨æ–¹å¼**ï¼š\n\n```javascript hl:1,7,16,23\n// 1. ç›´æ¥è°ƒç”¨ï¼šthis æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆéä¸¥æ ¼æ¨¡å¼ï¼‰æˆ– undefinedï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰\nfunction normalFunc() {\n    console.log(this);\n}\nnormalFunc(); // window æˆ– undefined\n\n// 2. ä½œä¸ºå¯¹è±¡æ–¹æ³•è°ƒç”¨ï¼šthis æŒ‡å‘è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡\nconst obj = {\n    name: 'object',\n    method: function() {\n        console.log(this.name);\n    }\n};\nobj.method(); // 'object'\n\n// 3. æ„é€ å‡½æ•°è°ƒç”¨ï¼šthis æŒ‡å‘æ–°åˆ›å»ºçš„å®ä¾‹\nfunction Person(name) {\n    this.name = name;\n}\nconst person = new Person('John');\nconsole.log(person.name); // 'John'\n\n// 4. call/apply/bind è°ƒç”¨ï¼šthis æŒ‡å‘æŒ‡å®šçš„å¯¹è±¡\nconst context = { name: 'custom' };\nnormalFunc.call(context);   // { name: 'custom' }\nnormalFunc.apply(context);  // { name: 'custom' }\nconst boundFunc = normalFunc.bind(context);\nboundFunc();               // { name: 'custom' }\n```\n\n### 10.2. ç®­å¤´å‡½æ•°çš„ this\n\nç®­å¤´å‡½æ•°çš„ this æ˜¯**è¯æ³•ç»‘å®š**çš„ï¼Œ**ç»§æ‰¿è‡ªå®šä¹‰æ—¶æ‰€åœ¨çš„ä¸Šä¸‹æ–‡**ï¼š\n\n```javascript hl:1,20\n// 1. ç»§æ‰¿å¤–å±‚ä½œç”¨åŸŸçš„ this\nconst obj = {\n    name: 'object',\n    normalMethod: function() {\n        // ç®­å¤´å‡½æ•°ç»§æ‰¿ normalMethod çš„ this\n        const arrowFunc = () => {\n            console.log(this.name);\n        };\n        arrowFunc();\n    },\n    arrowMethod: () => {\n        // è¿™é‡Œçš„ this ç»§æ‰¿å…¨å±€ä½œç”¨åŸŸçš„ this\n        console.log(this.name);\n    }\n};\n\nobj.normalMethod(); // 'object'\nobj.arrowMethod();  // undefined\n\n// 2. ä¸èƒ½é€šè¿‡ call/apply/bind æ”¹å˜ this\nconst arrowFunc = () => {\n    console.log(this);\n};\n\nconst context = { name: 'custom' };\narrowFunc.call(context);   // window\narrowFunc.apply(context);  // window\nconst boundFunc = arrowFunc.bind(context);\nboundFunc();              // window\n```\n\n### 10.3. å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ\n\n#### 10.3.1. **å®šæ—¶å™¨ä¸­çš„ this**\n\n```javascript hl:1,11,21\n// é—®é¢˜ï¼šæ™®é€šå‡½æ•°\nconst obj = {\n    name: 'object',\n    delayLog: function() {\n        setTimeout(function() {\n            console.log(this.name); // undefined\n        }, 1000);\n    }\n};\n\n// è§£å†³æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ç®­å¤´å‡½æ•°\nconst obj1 = {\n    name: 'object',\n    delayLog: function() {\n        setTimeout(() => {\n            console.log(this.name); // 'object'\n        }, 1000);\n    }\n};\n\n// è§£å†³æ–¹æ¡ˆ 2ï¼šä¿å­˜ this\nconst obj2 = {\n    name: 'object',\n    delayLog: function() {\n        const self = this;\n        setTimeout(function() {\n            console.log(self.name); // 'object'\n        }, 1000);\n    }\n};\n```\n\n#### 10.3.2. **äº‹ä»¶å¤„ç†ä¸­çš„ this**\n\n```javascript hl:1,15,26\n// é—®é¢˜ï¼šç±»æ–¹æ³•ä½œä¸ºäº‹ä»¶å¤„ç†å™¨\nclass Handler {\n    constructor() {\n        this.name = 'handler';\n    }\n    \n    handleClick() {\n        console.log(this.name);\n    }\n}\n\nconst handler = new Handler();\nbutton.addEventListener('click', handler.handleClick); // undefined\n\n// è§£å†³æ–¹æ¡ˆ 1ï¼šç®­å¤´å‡½æ•°\nclass Handler1 {\n    constructor() {\n        this.name = 'handler';\n    }\n    \n    handleClick = () => {\n        console.log(this.name);\n    }\n}\n\n// è§£å†³æ–¹æ¡ˆ 2ï¼šbind\nclass Handler2 {\n    constructor() {\n        this.name = 'handler';\n        this.handleClick = this.handleClick.bind(this);\n    }\n    \n    handleClick() {\n        console.log(this.name);\n    }\n}\n```\n\n#### 10.3.3. **å›è°ƒå‡½æ•°ä¸­çš„ this**\n\n```javascript hl:1,10,16\n// é—®é¢˜ï¼šå›è°ƒå‡½æ•°ä¸­çš„ this ä¸¢å¤±\nclass DataFetcher {\n    constructor() {\n        this.data = [];\n    }\n    \n    fetchData() {\n        fetch('api/data')\n            .then(function(response) {\n                // this æŒ‡å‘ undefined æˆ– window\n                this.data = response.json();\n            });\n    }\n}\n\n// è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ç®­å¤´å‡½æ•°\nclass DataFetcher1 {\n    constructor() {\n        this.data = [];\n    }\n    \n    fetchData() {\n        fetch('api/data')\n            .then(response => {\n                // this æ­£ç¡®æŒ‡å‘ DataFetcher å®ä¾‹\n                this.data = response.json();\n            });\n    }\n}\n```\n\n### 10.4. æ€»ç»“\n\n1. æ™®é€šå‡½æ•°çš„ this æ˜¯åŠ¨æ€çš„ï¼Œå–å†³äºè°ƒç”¨æ–¹å¼\n2. ç®­å¤´å‡½æ•°çš„ this æ˜¯é™æ€çš„ï¼Œç»§æ‰¿å®šä¹‰æ—¶çš„ä¸Šä¸‹æ–‡\n3. é€‰æ‹©ä½¿ç”¨å“ªç§å‡½æ•°å–å†³äºä½ æ˜¯å¦éœ€è¦åŠ¨æ€çš„ this ç»‘å®š\n4. åœ¨éœ€è¦ä¿æŒ this ä¸Šä¸‹æ–‡çš„åœºæ™¯ï¼ˆå¦‚å›è°ƒã€äº‹ä»¶å¤„ç†å™¨ï¼‰ä¸­ï¼Œç®­å¤´å‡½æ•°å¾ˆæœ‰ç”¨\n5. åœ¨éœ€è¦åŠ¨æ€ this çš„åœºæ™¯ï¼ˆå¦‚å¯¹è±¡æ–¹æ³•ã€åŸå‹æ–¹æ³•ï¼‰ä¸­ï¼Œä½¿ç”¨æ™®é€šå‡½æ•°æ›´åˆé€‚\n\n## 11. js å®ç°ç»§æ‰¿çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ\n\n### 11.1. es6\n\n```javascript\nclass Parent {\n  constructor(name) {\n    this.name = name;\n    this.colors = [\"red\", \"blue\"];\n  }\n\n  getName() {\n    return this.name;\n  }\n}\n\nclass Child extends Parent {\n  constructor(name, age) {\n    super(name);\n    this.age = age;\n  }\n\n  getAge() {\n    return this.age;\n  }\n}\n\n```\n### 11.2. es5ï¼šåŸå‹é“¾ç»§æ‰¿\n\n```javascript\n// ç¼ºç‚¹ï¼šå¼•ç”¨ç±»å‹å±æ€§è¢«æ‰€æœ‰ç¤ºä¾‹å…±äº«\nChild.prototype = new Parent();\n```\n\n### 11.3. es5ï¼šå€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿\n\n```javascript\n/*********************************************\n // 832: å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿\n ä¼˜ç‚¹1ï¼šé¿å…å¼•ç”¨ç±»å‹å±æ€§è¢«æ‰€æœ‰ç¤ºä¾‹å…±äº«\n ä¼˜ç‚¹2ï¼šå¯ä»¥åœ¨ Child ä¸­å‘ Parent ä¼ å‚\n ç¼ºç‚¹ï¼šæ¯æ¬¡åˆ›å»ºå®ä¾‹éƒ½ä¼šåˆ›å»ºä¸€éæ–¹æ³•\n *********************************************/\nfunction Child(name) {\n    // 832: ä½¿ç”¨callå‡½æ•°\n    Parent.call(this, name);\n}\n```\n\n### 11.4. es5ï¼šåŸå‹é“¾ç»§æ‰¿ + å€Ÿç”¨æ„é€ å‡½æ•°\n\n```javascript\n/*********************************************\n // 832: åŸå‹é“¾ç»§æ‰¿ + å€Ÿç”¨æ„é€ å‡½æ•°\n ä¼˜ç‚¹1ï¼šé¿å…å¼•ç”¨ç±»å‹å±æ€§è¢«æ‰€æœ‰ç¤ºä¾‹å…±äº«\n ä¼˜ç‚¹2ï¼šå¯ä»¥åœ¨ Child ä¸­å‘ Parent ä¼ å‚\n ä¼˜ç‚¹3ï¼šæ–¹æ³•ä¸ç”¨é‡æ–°åˆ›å»ºï¼Œåœ¨åŸå‹é“¾ä¸Š\n *********************************************/\n// å…³é”®ç‚¹1ï¼š\nfunction Child(name) {\n    Parent.call(this, name);\n}\n\n// å…³é”®ç‚¹2ï¼š\nChild.prototype = new Parent();\nChild.prototype.constructor = Child;\n```\n\n### 11.5. ES5ï¼š Object.create\n\n```javascript\n/*********************************************\n // 832: å³ES5 Object.create ï¼Œ å°†ä¼ å…¥çš„å¯¹è±¡ä½œä¸ºåˆ›å»ºçš„å¯¹è±¡çš„åŸå‹\n ç¼ºç‚¹ï¼šå¼•ç”¨ç±»å‹å±æ€§è¢«æ‰€æœ‰ç¤ºä¾‹å…±äº«ï¼Œå’ŒåŸå‹é“¾ä¸€æ ·\n *********************************************/\nfunction myCreate(o) {\n    function F() {\n    }\n\n    F.prototype = o;\n    return new F();\n}\n```\n\n### 11.6. es5ï¼šå¯„ç”Ÿå¼ç»§æ‰¿\n\n```javascript\n/*********************************************\n // 832: å¯„ç”Ÿå¼ç»§æ‰¿\n ç¼ºç‚¹ï¼šæ¯æ¬¡åˆ›å»ºå®ä¾‹éƒ½ä¼šåˆ›å»ºä¸€éæ–¹æ³•\n *********************************************/\nfunction createObj(o) {\n    let clone = Object.create(o);\n    clone.sayName = function () {\n        console.log('hi');\n    }\n    return clone;\n}\n```\n\n### 11.7. es5ï¼šå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿\n\n```javascript\n/*********************************************\n // 832: å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿\n ä¼˜ç‚¹1ï¼šè¿™ç§æ–¹å¼çš„é«˜æ•ˆç‡ä½“ç°å®ƒåªè°ƒç”¨äº†ä¸€æ¬¡ Parent æ„é€ å‡½æ•°ï¼Œ\n ä¼˜ç‚¹2ï¼šå¹¶ä¸”å› æ­¤é¿å…äº†åœ¨ Parent.prototype ä¸Šé¢åˆ›å»ºä¸å¿…è¦çš„ã€å¤šä½™çš„å±æ€§ã€‚\n ä¼˜ç‚¹3ï¼šä¸æ­¤åŒæ—¶ï¼ŒåŸå‹é“¾è¿˜èƒ½ä¿æŒä¸å˜ï¼›å› æ­¤ï¼Œè¿˜èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ instanceof å’Œ isPrototypeOfã€‚\n *********************************************/\nfunction prototype(child, parent) {\n    let p = Object.create(parent.prototype);\n    p.constructor = child;\n    child.prototype = p;\n}\n```\n\n## 12. æ‰‹å†™ promise.all ã€race ã€retry\n\n```javascript hl:4,26,53\nPromise._race = (tasks) => {\n  return new Promise((resolve, reject) => {\n    for (let i = 0; i < arr.length; i++) {\n      // ::::Promise.resolve åŒ…ä¸€å±‚ï¼Œä»¥å…¼å®¹épromiseçš„æƒ…å†µ\n      Promise.resolve(arr[i])\n        .then((res) => {\n          // æŸä¸€promiseå®Œæˆåç›´æ¥è¿”å›å…¶å€¼\n          // åªè¦æœ‰ä¸€ä¸ªpromiseå®Œæˆï¼Œå°±è¿”å›\n          resolve(res);\n        })\n        .catch((e) => {\n          //å¦‚æœæœ‰é”™è¯¯åˆ™ç›´æ¥ç»“æŸå¾ªç¯ï¼Œå¹¶è¿”å›é”™è¯¯\n          reject(e);\n        });\n    }\n  });\n};\n\nPromise.retry = function (promiseFn, times = 3) {\n  return new Promise(async (resolve, reject) => {\n    // times: é‡è¯•æ¬¡æ•°\n    while (times--) {\n      try {\n        let ret = await promiseFn();\n        resolve(ret);\n        // 832: å¦‚æœæˆåŠŸäº†ï¼Œå°±ç›´æ¥breakäº†\n        break;\n      } catch (error) {\n        if (!times) reject(error);\n      }\n    }\n  });\n};\n\nPromise._all = (tasks) => {\n  return new Promise((resolve, reject) => {\n    let length = arr.length; //ä¼ å…¥çš„promiseçš„ä¸ªæ•°\n    let count = 0; // è¿›å…¥fullfilled çš„promiseä¸ªæ•°\n    const result = []; //åˆ›å»ºä¸€ä¸ªç­‰é•¿çš„æ•°ç»„,æ”¾ç½®ç»“æœ\n    // å½“ä¼ é€’æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ï¼Œè¿”å›ä¸€ä¸ªä¸ºfulfilledçŠ¶æ€çš„promise\n    if (arr.length === 0) {\n      return new Promise.resolve([]);\n    }\n    // éå†æ•°ç»„\n    for (let i = 0; i < arr.length; i++) {\n      // ::::Promise.resolve åŒ…ä¸€å±‚ï¼Œä»¥å…¼å®¹épromiseçš„æƒ…å†µ\n      Promise.resolve(arr[i])\n        .then((res) => {\n          //// ::::è¿™é‡Œæ˜¯å…³é”®é€»è¾‘\n          result[i] = res; //å°†æ¯æ¬¡ç»“æœä¿å­˜åœ¨resultæ•°ç»„ä¸­\n          count++; //ä¸ªæ•°åŠ 1\n          //æ˜¯å¦æ‰€æœ‰çš„promiseéƒ½è¿›å…¥fullfilledçŠ¶æ€\n          if (count === length) {\n            resolve(result); //è¿”å›ç»“æœ\n          }\n        })\n        .catch((e) => {\n          reject(e); //å¦‚æœæœ‰é”™è¯¯åˆ™ç›´æ¥ç»“æŸå¾ªç¯ï¼Œå¹¶è¿”å›é”™è¯¯\n        });\n    }\n  });\n};\n\n```\n\n## 13. æ·±æ‹·è´æœ€ç»ˆå®ç°\n\n```javascript\nfunction fn(obj, map = new WeakMap()) {\n  // åŸºæœ¬æ•°æ®ç±»å‹\n  if (\n    [\"String\", \"Boolean\", \"Number\", \"Null\", \"Undefined\"].includes(getType(obj))\n  ) {\n    return obj;\n  }\n\n  // å¦‚æœæ˜¯å¯¹è±¡\n  if (map.get(obj)) {\n    return obj;\n  }\n\n  let target = Array.isArray(obj) ? [] : {};\n  map.set(obj, target);\n\n  // TODO è¿™ä¸ªä¸ä¼šæ£€æµ‹å‡ºsymbol\n  // 1ã€å¯ä»¥ä½¿ç”¨Reflect.keys å…¨éƒ¨èƒ½æ£€æµ‹å‡ºå…¨éƒ¨keys\n  // 2ã€å¯ä»¥ä½¿ç”¨ Object.getOwnPropertySymbols(obj) æ£€æµ‹å‡ºsymbol keys\n  Reflect.ownKeys(obj).forEach((key) => {\n    // æ”¹åŠ¨\n    if (isObject(obj[key])) {\n      target[key] = fn(obj[key], map);\n    } else {\n      target[key] = obj[key];\n    }\n  });\n\n  return target;\n}\n\n```\n\n## 14. éå†å¯¹è±¡çš„æ–¹å¼éƒ½æœ‰å“ªäº›ï¼Ÿ\n\n- ä½¿ç”¨ `Object.keys()` å½“ï¼š\n    - åªéœ€è¦`å¯æšä¸¾`å±æ€§\n    - ä¸è¿”å›ç»§æ‰¿çš„å±æ€§\n    - ä¸éœ€è¦ Symbol å±æ€§\n    - æ€§èƒ½æ˜¯ä¸»è¦è€ƒè™‘å› ç´ \n        - `Object.keys()`Â é€šå¸¸æ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºå®ƒåªå¤„ç†å¯æšä¸¾å±æ€§\n- ä½¿ç”¨ `Reflect.ownKeys()` å½“ï¼š\n    - éœ€è¦å®Œæ•´çš„å±æ€§åˆ—è¡¨\n    - ä¸è¿”å›ç»§æ‰¿çš„å±æ€§\n    - éœ€è¦åŒ…å« Symbol å±æ€§\n    - éœ€è¦ä¸å¯æšä¸¾å±æ€§\n    - éœ€è¦ç¡®ä¿ç‰¹å®šçš„å±æ€§é¡ºåº\n- **for...in å¾ªç¯**\n\t- è¿”å›**æ‰€æœ‰å¯æšä¸¾**å±æ€§ï¼ŒåŒ…æ‹¬**ç»§æ‰¿**çš„\n\t- ä¸è¿”å› Symbol å±æ€§\n- åœ¨å¼€å‘å·¥å…·ã€æ¡†æ¶æˆ–éœ€è¦å®Œæ•´åå°„åŠŸèƒ½çš„åœºæ™¯ä¸­ï¼Œ`Reflect.ownKeys()` æ˜¯æ›´å¥½çš„é€‰æ‹©\n\n### 14.1. é€‰æ‹©æŒ‡å—\n\n1. **éœ€è¦éå†ç»§æ‰¿çš„å±æ€§**\n    - ä½¿ç”¨Â `for...in`\n2. **åªéœ€è¦è‡ªèº«å¯æšä¸¾å±æ€§**\n    - ä½¿ç”¨Â `Object.keys()`\n3. **éœ€è¦æ‰€æœ‰å±æ€§ï¼ˆåŒ…æ‹¬ä¸å¯æšä¸¾ï¼‰**\n    - ä½¿ç”¨Â `Object.getOwnPropertyNames()`\n4. **éœ€è¦ Symbol å±æ€§**\n    - ä½¿ç”¨Â `Object.getOwnPropertySymbols()`\n5. **éœ€è¦æ‰€æœ‰ç±»å‹çš„å±æ€§**\n    - ä½¿ç”¨Â `Reflect.ownKeys()`\n6. **éœ€è¦é”®å€¼å¯¹**\n    - ä½¿ç”¨Â `Object.entries()`\n7. **åªéœ€è¦å€¼**\n    - ä½¿ç”¨Â `Object.values()`\n\n## 15. æŸ¯é‡ŒåŒ–\n\n### 15.1. å‚æ•°å›ºå®šåœºæ™¯\n\nå®ç° add(1)(2)(3) æˆ–è€… add(1,2)(3) ç­‰ç­‰éƒ½ç›¸ç­‰\n\n```javascript hl:4,8\nfunction curry(fn, ...arg1) {\n  // fn.length å‡½æ•°çš„å½¢å‚ä¸ªæ•°\n  // arg1.length ä¼ å…¥çš„å®å‚ä¸ªæ•°\n  // å¦‚æœä¼ å…¥çš„å®å‚ä¸ªæ•°å¤§äºç­‰äºå‡½æ•°çš„å½¢å‚ä¸ªæ•°ï¼Œåˆ™ç›´æ¥æ‰§è¡Œå‡½æ•°\n  if (arg1.length >= fn.length) {\n    return fn(...arg1);\n  }\n  // å¦åˆ™ï¼Œè¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œæ¥æ”¶å‰©ä½™çš„å‚æ•°\n  return (...arg2) => {\n    return curry(fn, ...arg1, ...arg2);\n  };\n}\n\n// ä¸‰ä¸ªå‚æ•°çš„å‡½æ•°\nfunction add(a, b, c) {\n  return a + b + c;\n}\n\nconst curryAdd = curry(add);\n\nconsole.log(curryAdd(1)(2)(3)); // 6\nconsole.log(curryAdd(1, 2)(3)); // 6\nconsole.log(curryAdd(1)(2, 3)); // 6\n\n// å››ä¸ªå‚æ•°çš„å‡½æ•°\nfunction add2(a, b, c, d) {\n  return a + b + c + d;\n}\n\nconst curryAdd2 = curry(add2);\n\nconsole.log(curryAdd2(1)(2)(3)(4)); // 10\nconsole.log(curryAdd2(1, 2)(3)(4)); // 10\nconsole.log(curryAdd2(1)(2, 3)(4)); // 10\nconsole.log(curryAdd2(1)(2)(3, 4)); // 10\nconsole.log(curryAdd2(1, 2, 3)(4)); // 10\nconsole.log(curryAdd2(1, 2)(3, 4)); // 10\nconsole.log(curryAdd2(1)(2, 3, 4)); // 10\n\n```\n\n### 15.2.  å‚æ•°ä¸å›ºå®šåœºæ™¯\n\né—­åŒ…å‡½æ•°ä¸­å®ç°çœŸæ­£çš„é€»è¾‘\n\n```javascript hl:8,17,26\nfunction add(...args) {\n  let vars = [];\n  // é—­åŒ…,è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”æŠŠæ‰€æœ‰å‚æ•°éƒ½ä¿å­˜åœ¨varsä¸­\n  const curry = (...args2) => {\n    vars = [...vars, ...args2];\n    return curry;\n  };\n  // çœŸæ­£çš„æ±‚å’Œå‡½æ•°\n  curry.sumof = () => {\n    let res = 0;\n    for (let i = 0; i < vars.length; i++) {\n      res += vars[i];\n    }\n    return res;\n  };\n\n  // çœŸæ­£çš„æ±‚ç§¯å‡½æ•°\n  curry.product = () => {\n    let res = 1;\n    for (let i = 0; i < vars.length; i++) {\n      res *= vars[i];\n    }\n    return res;\n  };\n\n  // è¿”å›ä¸€ä¸ªè¿™ä¸ªé—­åŒ…å‡½æ•°\n  return curry(...args);\n}\n\nconsole.log(add(1, 2, 3).sumof()); // 6\nconsole.log(add(1, 2, 3)(4).sumof()); // 10\nconsole.log(add(1, 2, 3)(4, 5).sumof()); // 15\nconsole.log(add(1, 2, 3)(4, 5)(6).sumof()); // 21\n\nconsole.log(add(1, 2, 3).product()); // 6\nconsole.log(add(1, 2, 3)(4).product()); // 24\nconsole.log(add(1, 2, 3)(4, 5).product()); // 120\nconsole.log(add(1, 2, 3)(4, 5)(6).product()); // 720\nconsole.log(add(1)(2)(3)(4)(5)(6).product()); // 720\n\n```\n\n### 15.3. æ€»ç»“\n\næŸ¯é‡ŒåŒ–æ˜¯å°†ä¸€ä¸ªå¤šå‚æ•°å‡½æ•°è½¬æ¢ä¸ºä¸€ç³»åˆ—å•å‚æ•°å‡½æ•°çš„è¿‡ç¨‹ï¼Œä½¿ç”¨åœºæ™¯ä¸ºï¼š\n- å‚æ•°å¤ç”¨\n- å»¶è¿Ÿè®¡ç®—\n- åŠ¨æ€åˆ›å»ºå‡½æ•°\n- å‚æ•°éªŒè¯\n- æ—¥å¿—ç³»ç»Ÿ\n\nä½†å…¶å®ï¼Œé—®é¢˜æ›´å¤šï¼Œæ¯”å¦‚\n- è¿‡åº¦ä½¿ç”¨æŸ¯é‡ŒåŒ–å¯èƒ½é™ä½ä»£ç `å¯è¯»æ€§`\n- æŸ¯é‡ŒåŒ–ä¼šåˆ›å»ºå¤šä¸ªé—­åŒ…ï¼Œå¯èƒ½å½±å“æ€§èƒ½\n- è°ƒè¯•å›°éš¾\n\n## 16. æ‰‹å†™å•ä¾‹æ¨¡å¼\n\n```javascript\n// classçš„æ–¹å¼\nclass Single {\n  show() {\n    console.log(\"æˆ‘æ˜¯ä¸€ä¸ªå•ä¾‹å¯¹è±¡\");\n  }\n  // é™æ€æ–¹æ³•, ç”¨æ¥è·å–Singleç±»çš„å”¯ä¸€å®ä¾‹\n  static getInstance() {\n    // åˆ¤æ–­æ˜¯å¦å·²ç»newè¿‡1ä¸ªå®ä¾‹\n    if (!Single.instance) {\n      // è‹¥è¿™ä¸ªå”¯ä¸€çš„å®ä¾‹ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå…ˆåˆ›å»ºå®ƒ\n      Single.instance = new Single();\n    }\n    // å¦‚æœè¿™ä¸ªå”¯ä¸€çš„å®ä¾‹å·²ç»å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›\n    return Single.instance;\n  }\n}\n\n```\n\n## 17. ç™»å½•å•ä¾‹\n\n```javascript hl:50\nclass Login {\n  //æ„é€ å™¨\n  constructor() {\n    this.init();\n  }\n\n  //åˆå§‹åŒ–æ–¹æ³•\n  init() {\n    //æ–°å»ºdiv\n    let mask = document.createElement(\"div\");\n    //æ·»åŠ æ ·å¼\n    mask.classList.add(\"mask-layer\");\n    //æ·»åŠ æ¨¡æ¿å­—ç¬¦ä¸²\n    mask.innerHTML = `<div class=\"login-wrapper\">\n      <div class=\"username-input user-input\">\n        <span class=\"login-text\">ç”¨æˆ·å:</span>\n        <input type=\"text\">\n      </div>\n      <div class=\"pwd-input user-input\">\n        <span class=\"login-text\">å¯†ç :</span>\n        <input type=\"password\">\n      </div>\n      <div class=\"btn-wrapper\">\n        <button class=\"confrim-btn\">ç¡®å®š</button>\n        <button class=\"clear-btn\">æ¸…ç©º</button>\n      </div>\n    </div>\n    `;\n    //æ’å…¥å…ƒç´ \n    document.body.insertBefore(mask, document.body.childNodes[0]);\n    //æ³¨å†Œå…³é—­ç™»å½•æ¡†äº‹ä»¶\n    Login.addCloseLoginEvent();\n  }\n\n  //é™æ€æ–¹æ³•: è·å–å…ƒç´ \n  static getLoginDom(cls) {\n    return document.querySelector(cls);\n  }\n\n  //é™æ€æ–¹æ³•: æ³¨å†Œå…³é—­ç™»å½•æ¡†äº‹ä»¶\n  static addCloseLoginEvent() {\n    this.getLoginDom(\".close-btn\").addEventListener(\"click\", () => {\n      //ç»™é®ç½©å±‚æ·»åŠ style, ç”¨äºéšè—é®ç½©å±‚\n      this.getLoginDom(\".mask-layer\").style = \"display: none\";\n    });\n  }\n\n  //é™æ€æ–¹æ³•: è·å–å®ä¾‹(å•ä¾‹)\n  // æˆ‘ä»¬è°ƒç”¨Login.getInstance()å®ä¾‹åŒ–äº†ä¸€ä¸ªç™»é™†æ¡†ï¼Œ\n  // ä¸”åœ¨ä¹‹åçš„ç‚¹å‡»ä¸­ï¼Œå¹¶æ²¡æœ‰é‡æ–°åˆ›å»ºæ–°çš„ç™»é™†æ¡†ï¼Œåªæ˜¯ç§»é™¤æ‰äº†\"display: none\"è¿™ä¸ªæ ·å¼æ¥æ˜¾ç¤ºç™»é™†æ¡†ï¼ŒèŠ‚çœäº†å†…å­˜å¼€é”€ã€‚\n  static getInstance() {\n    // :å¦‚æœå®ä¾‹ä¸å­˜åœ¨, åˆ™åˆ›å»ºå®ä¾‹\n    if (!this.instance) {\n      this.instance = new Login();\n      // å¦åˆ™ï¼Œå±•ç¤ºé®ç½©å±‚ï¼Œå³æ˜¾ç¤ºç™»é™†æ¡†\n    } else {\n      // ç§»é™¤é®ç½©å±‚style, ç”¨äºæ˜¾ç¤ºé®ç½©å±‚\n      this.getLoginDom(\".mask-layer\").removeAttribute(\"style\");\n    }\n    // è¿”å›å®ä¾‹\n    return this.instance;\n  }\n}\n\n```\n\n## 18. å®ç°ä¸€ä¸ªç®€å•çš„classname\n\n### 18.1. ä½¿ç”¨ç¤ºä¾‹\n\n```javascript\n// ä½¿ç”¨ç¤ºä¾‹\nconsole.log(\n  className(\n    \"button\",\n    {\n      \"btn-primary   btn-large\": true,\n      \"btn-disabled\": false,\n    },\n    [\"active\", [\"nested\", \"  multiple   spaces  \"]],\n    null,\n    undefined,\n    { error: true },\n  ),\n); // 'button btn-primary btn-large active nested multiple spaces error\n```\n\n### 18.2. å®ç°ä¸€ä¸ªclassname\n\n```javascript hl:4,9,15,18\nfunction classNames(...args) {\n  let res = [];\n  // éå†å‚æ•°\n  for (let item of args) {\n    // å¦‚æœæ˜¯å­—ç¬¦ä¸²æˆ–è€…æ•°å­—ï¼Œç›´æ¥æ”¾åˆ°arré‡Œé¢ï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºçœŸ\n    if (typeof item === \"string\" || typeof item === \"number\" && !!item) {\n      res.push(item);\n      // å¦‚æœæ˜¯æ•°ç»„ï¼Œé€’å½’è°ƒç”¨,ä½¿ç”¨ item.flat(Infinity)\n    } else if (Array.isArray(item)) {\n      item.flat(Infinity).forEach((it) => {\n        res.push(it);\n      });\n    }\n    //  å¦‚æœæ˜¯å¯¹è±¡ï¼Œéœ€è¦è¿‡æ»¤æ‰ null\n    else if (typeof item === \"object\" && item !== null) {\n      Object.entries(item).forEach(([k, v]) => {\n        if (v) {\n          res.push(k);\n        }\n      });\n    }\n  }\n\n  // è¿”å›\n  return res;\n}\n```\n\n## 19. å®ç°ä¸€ä¸ª Array.map\n\n```javascript hl:1,15\n// ä¸æŒ‡å®šæŒ‡å®šä¸Šä¸‹æ–‡å‚æ•°\nArray.prototype._map = function (fn) {\n  // é”™è¯¯å¤„ç†\n  if (!Array.isArray(this) || typeof fn != \"function\") {\n    throw new Error(\"has Error, please check!\");\n  }\n  let arr = this;\n  let res = [];\n  for (let i = 0; i < arr.length; i++) {\n    res[i] = fn(arr[i], i, arr);\n  }\n  return res;\n};\n\n// æŒ‡å®šä¸Šä¸‹æ–‡å‚æ•°\nArray.prototype._map1 = function (fn, context) {\n  // é”™è¯¯å¤„ç†\n  if (!Array.isArray(this) || typeof fn !== \"function\") {\n    throw new Error(\"has Error, please check!\");\n  }\n\n  let arr = this;\n  let res = [];\n  for (let i = 0; i < arr.length; i++) {\n    res[i] = fn.call(context, arr[i], i, arr);\n  }\n  return res;\n};\n\n```\n\n## 20. å®ç°ä¸€ä¸ªåŒå‘ç»‘å®š\n\n### 20.1. ä½¿ç”¨ proxy \n\n```javascript\n`<input id=\"input\" type=\"text\"/>\n<div id=\"text\"></div>\n`;\n\nlet input = document.getElementById(\"input\");\nlet text = document.getElementById(\"text\");\n\nlet data = { value: \"\" };\n\nnew Proxy(data, {\n  /**\n   * @param target æŒ‡å‘data\n   * @param p å±æ€§å€¼ï¼Œæ¯”å¦‚value\n   * */\n  get(target, p, receiver) {\n    return input.value;\n  },\n  set(target, p, value, receiver) {\n    target[p] = value;\n    // ç›´æ¥åšæ¸²æŸ“,æ›´å¥½åšæ³•æ˜¯å†™ä¸€ä¸ªrenderå‡½æ•°æ”¾å¤–é¢å»\n    text.innerHTML = target[p];\n    input.value = target[p];\n  },\n});\n\n// éœ€è¦ç›‘å¬onkeyupäº‹ä»¶\ninput.onkeyup = function (e) {\n  data.value = e.target.value;\n};\n\n```\n\n### 20.2. ä½¿ç”¨ `Object.defineProperty`\n\n```javascript\n`\n<input id=\"input\" type=\"text\"/>\n<div id=\"text\"></div>\n`;\nlet input = document.getElementById(\"input\");\nlet text = document.getElementById(\"text\");\n\nlet data = { value: \"\" };\n\nObject.defineProperty(data, \"value\", {\n  set: function (val) {\n    text.innerHTML = val;\n    input.value = val;\n  },\n  get: function () {\n    return input.value;\n  },\n});\n\n// éœ€è¦ç›‘å¬onkeyupäº‹ä»¶\ninput.onkeyup = function (e) {\n  data.value = e.target.value;\n};\n\n```\n\n## 21. å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡ä¸­æ˜¯å¦å¾ªç¯å¼•ç”¨äº†\n\n### 21.1. æ–¹æ³•1ï¼šç›´æ¥éå†ï¼Œå€ŸåŠ©ä¸€ä¸ª `weakSet` å¯¹è±¡ï¼Œå¦‚æœå·²ç»å‘½ä¸­äº†ï¼Œåˆ™è¯´æ˜å¾ªç¯å¼•ç”¨äº†\n\n```javascript\nfunction hasCircularReference(obj) {\n    const seen = new WeakSet();\n    \n    function detect(value) {\n        // å¤„ç†åŸºç¡€ç±»å‹\n        if (value === null || typeof value !== 'object') {\n            return false;\n        }\n        \n        // æ£€æµ‹å¾ªç¯å¼•ç”¨\n        if (seen.has(value)) {\n            return true;\n        }\n        \n        seen.add(value);\n        \n        // å¤„ç†æ•°ç»„\n        if (Array.isArray(value)) {\n            return value.some(item => detect(item));\n        }\n        \n        // å¤„ç†å¯¹è±¡\n        return Object.values(value).some(item => detect(item));\n    }\n    \n    return detect(obj);\n}\n\n// æµ‹è¯•ç”¨ä¾‹\n// 1. ç®€å•å¾ªç¯å¼•ç”¨\nconst obj1 = { a: 1 };\nobj1.b = obj1;\nconsole.log(hasCircularReference(obj1));  // true\n\n// 2. æ•°ç»„å¾ªç¯å¼•ç”¨\nconst arr = [1, 2, 3];\narr.push(arr);\nconsole.log(hasCircularReference(arr));  // true\n\n// 3. æ·±å±‚å¾ªç¯å¼•ç”¨\nconst obj2 = {\n    a: {\n        b: {\n            c: {}\n        }\n    }\n};\nobj2.a.b.c.d = obj2.a;\nconsole.log(hasCircularReference(obj2));  // true\n\n// 4. æ— å¾ªç¯å¼•ç”¨\nconst obj3 = {\n    a: 1,\n    b: {\n        c: 2,\n        d: [1, 2, 3]\n    }\n};\nconsole.log(hasCircularReference(obj3));  // false\n\n```\n\n### 21.2. æ–¹æ³•äºŒï¼šå€ŸåŠ©`JSON.toString()` æ•è·æŠ¥é”™ä¿¡æ¯\n\n## 22. æ‰‹å†™ä¸€ä¸ª new\n\n```javascript\nfunction _new(fn, ...args) {\n  const obj = Object.create(fn.prototype);\n  const ret = fn.apply(obj, args);\n  return ret instanceof Object ? ret : obj;\n}\n\n```\n\n## 23. å®ç°ä¸€ä¸ªæ‹–æ‹½ä¼šè¯æ¡†\n\n### 23.1. è½®å»“ä»£ç \n\n```javascript\nclass Dialog {\n  constructor(text) {\n    this.lastX = 0;\n    this.lastY = 0;\n    this.x;\n    this.y;\n    this.text = text || \"\";\n    this.isMoving = false;\n    this.dialog;\n  }\n  // æ‰“å¼€å¯¹è¯æ¡†\n  open() {}\n  // å…³é—­å¯¹è¯æ¡†\n  close() {}\n  // é¼ æ ‡æŒ‰ä¸‹\n  handleMousedown(e) {}\n  // é¼ æ ‡ç§»åŠ¨\n  handleMousemove(e) {}\n  // é¼ æ ‡æŠ¬èµ·\n  handleMouseup(e) {}\n}\n\nlet dialog = new Dialog(\"Hello\");\ndialog.open();\n\n```\n\n### 23.2. å…·ä½“å®ç°å’Œä½¿ç”¨\n\n```javascript\nclass Dialog {\n  constructor(text) {\n    this.lastX = 0;\n    this.lastY = 0;\n    this.x;\n    this.y;\n    this.text = text || \"\";\n    this.isMoving = false;\n    this.dialog;\n  }\n  open() {\n    const model = document.createElement(\"div\");\n    model.id = \"model\";\n    model.style = `\n        position:absolute;\n        top:0;\n        left:0;\n        bottom:0;\n        right:0;\n        background-color:rgba(0,0,0,.3);\n        display:flex;\n        justify-content: center;\n        align-items: center;`;\n    model.addEventListener(\"click\", this.close.bind(this));\n    document.body.appendChild(model);\n    this.dialog = document.createElement(\"div\");\n    this.dialog.style = `\n        padding:20px;\n        background-color:white`;\n    this.dialog.innerText = this.text;\n    this.dialog.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n    });\n    this.dialog.addEventListener(\"mousedown\", this.handleMousedown.bind(this));\n    document.addEventListener(\"mousemove\", this.handleMousemove.bind(this));\n    document.addEventListener(\"mouseup\", this.handleMouseup.bind(this));\n    model.appendChild(this.dialog);\n  }\n  close() {\n    this.dialog.removeEventListener(\"mousedown\", this.handleMousedown);\n    document.removeEventListener(\"mousemove\", this.handleMousemove);\n    document.removeEventListener(\"mouseup\", this.handleMouseup);\n    document.body.removeChild(document.querySelector(\"#model\"));\n  }\n  handleMousedown(e) {\n    this.isMoving = true;\n    this.x = e.clientX;\n    this.y = e.clientY;\n  }\n  handleMousemove(e) {\n    if (this.isMoving) {\n      this.dialog.style.transform = `translate(${e.clientX - this.x + this.lastX}px,${e.clientY - this.y + this.lastY}px)`;\n    }\n  }\n  handleMouseup(e) {\n    this.lastX = e.clientX - this.x + this.lastX;\n    this.lastY = e.clientY - this.y + this.lastY;\n    this.isMoving = false;\n  }\n}\nlet dialog = new Dialog(\"Hello\");\ndialog.open();\n\n```","5cc4d991b2f65a31b26469d06dd9adcb":"\n# å‰ç«¯å·¥ç¨‹åŠæ¶æ„ï¼ˆç¯‡äºŒï¼‰\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ€»ç»“ä¸‹åšå‰ç«¯å·¥ç¨‹åŒ–çš„æ–¹æ³•è®ºï¼ˆæˆ–è€…sopï¼‰ \n\n### 1.1. é¡¹ç›®åˆå§‹åŒ–ä¸è§„èŒƒåˆ¶å®š\n\n#### 1.1.1. **æŠ€æœ¯æ ˆé€‰å‹**\n\n   ```javascript\n   // ç¤ºä¾‹æŠ€æœ¯æ ˆé…ç½®\n   {\n     \"frontend\": {\n       \"framework\": \"React/Vue/Angular\",\n       \"buildTool\": \"Vite/Webpack\",\n       \"cssFramework\": \"TailwindCSS/SCSS\",\n       \"stateManagement\": \"Redux/Vuex/Pinia\"\n     }\n   }\n   ```\n\n#### 1.1.2. **é¡¹ç›®ç»“æ„è§„èŒƒ**\n\n```bash\n\n  src/\n  â”œâ”€â”€ assets/          # é™æ€èµ„æº\n  â”œâ”€â”€ components/      # å…¬å…±ç»„ä»¶\n  â”‚   â”œâ”€â”€ basic/      # åŸºç¡€ç»„ä»¶\n  â”‚   â””â”€â”€ business/   # ä¸šåŠ¡ç»„ä»¶\n  â”œâ”€â”€ hooks/          # è‡ªå®šä¹‰ hooks\n  â”œâ”€â”€ pages/          # é¡µé¢ç»„ä»¶\n  â”œâ”€â”€ services/       # API æœåŠ¡\n  â”œâ”€â”€ store/          # çŠ¶æ€ç®¡ç†\n  â”œâ”€â”€ styles/         # æ ·å¼æ–‡ä»¶\n  â”œâ”€â”€ types/          # TypeScript ç±»å‹\n  â””â”€â”€ utils/          # å·¥å…·å‡½æ•°```\n\n````\n\n#### 1.1.3. **ä»£ç è§„èŒƒé…ç½®**\n\n```javascript hl:1,13\n// .eslintrc.js\nmodule.exports = {\n  extends: [\n    'eslint:recommended',\n    'plugin:@typescript-eslint/recommended',\n    'prettier'\n  ],\n  rules: {\n    // é¡¹ç›®ç‰¹å®šè§„åˆ™\n  }\n};\n\n// .prettierrc\n{\n  \"semi\": true,\n  \"singleQuote\": true,\n  \"tabWidth\": 2,\n  \"printWidth\": 80\n}\n```\n\n### 1.2. å¼€å‘æµç¨‹è§„èŒƒ\n\n#### 1.2.1. **Git å·¥ä½œæµè§„èŒƒ**\n\n#### 1.2.2. **æäº¤ä¿¡æ¯è§„èŒƒ**\n\n#### 1.2.3. **ç‰ˆæœ¬ç®¡ç†è§„èŒƒ**\n\n```json\n{\n  \"version\": \"1.2.3\",\n  \"versionStrategy\": {\n    \"major\": \"é‡å¤§æ›´æ–°ï¼Œä¸å…¼å®¹çš„ API ä¿®æ”¹\",\n    \"minor\": \"æ–°åŠŸèƒ½ï¼Œå‘ä¸‹å…¼å®¹\",\n    \"patch\": \"é—®é¢˜ä¿®å¤ï¼Œå‘ä¸‹å…¼å®¹\"\n  }\n}\n```\n\n### 1.3. ç»„ä»¶å¼€å‘è§„èŒƒ\n\n#### 1.3.1. **ç»„ä»¶è®¾è®¡åŸåˆ™**\n\n- ç»„ä»¶å¼€å‘è§„èŒƒ\n- ç»„ä»¶æ–‡æ¡£ç¤ºä¾‹\n\n```javascript\n// æ ‡å‡†ç»„ä»¶ç»“æ„\ninterface Props {\n  // æ˜ç¡®çš„ç±»å‹å®šä¹‰\n  data: UserData;\n  onAction: (id: string) => void;\n}\n\nconst Component: React.FC<Props> = ({ data, onAction }) => {\n  // 1. Hookså£°æ˜\n  const [state, setState] = useState();\n  \n  // 2. ä¸šåŠ¡é€»è¾‘å¤„ç†\n  const handleClick = useCallback(() => {\n    // å¤„ç†é€»è¾‘\n  }, []);\n  \n  // 3. æ¸²æŸ“é€»è¾‘\n  return (\n    <div>\n      {/* JSXç»“æ„ */}\n    </div>\n  );\n};\n\n// å¯¼å‡º\nexport default memo(Component);\n```\n\n#### 1.3.2. **çŠ¶æ€ç®¡ç†è§„èŒƒ** \n\n### 1.4. æ„å»ºä¸éƒ¨ç½²è§„èŒƒ\n\n#### 1.4.1. **æ„å»ºé…ç½®**\n\n#### 1.4.2. **ç¯å¢ƒé…ç½®**\n\n#### 1.4.3. **CI/CD é…ç½®**\n\n### 1.5. æµ‹è¯•è§„èŒƒ\n\n#### 1.5.1. **å•å…ƒæµ‹è¯•**\n\n#### 1.5.2. **é›†æˆæµ‹è¯•è§„èŒƒ**\n\n### 1.6. æ€§èƒ½ä¼˜åŒ–è§„èŒƒ\n\n#### 1.6.1. **æ€§èƒ½æŒ‡æ ‡**\n\n```javascript\n// æ€§èƒ½ç›‘æ§é…ç½®\n{\n  \"metrics\": {\n    \"FCP\": \"First Contentful Paint < 1.8s\",\n    \"LCP\": \"Largest Contentful Paint < 2.5s\",\n    \"FID\": \"First Input Delay < 100ms\",\n    \"CLS\": \"Cumulative Layout Shift < 0.1\"\n  }\n}\n```\n\n1. **æ€§èƒ½ç›‘æ§**\n    - é¦–å±åŠ è½½æ—¶é—´\n    - äº¤äº’å“åº”æ—¶é—´\n    - èµ„æºåŠ è½½æ€§èƒ½\n    - å†…å­˜ä½¿ç”¨æƒ…å†µ\n2. **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**\n    - åŠ è½½çŠ¶æ€å¤„ç†\n    - é”™è¯¯è¾¹ç•Œå¤„ç†\n    - å“åº”å¼è®¾è®¡\n    - å¯è®¿é—®æ€§ä¼˜åŒ–\n#### 1.6.2. **ä¼˜åŒ–æ¸…å•**\n\n  åŠ è½½ä¼˜åŒ–\n  - [ ] è·¯ç”±æ‡’åŠ è½½\n  - [ ] å›¾ç‰‡æ‡’åŠ è½½\n  - [ ] ä»£ç åˆ†å‰²\n  - [ ] èµ„æºé¢„åŠ è½½\n  æ¸²æŸ“ä¼˜åŒ–\n  - [ ] è™šæ‹Ÿåˆ—è¡¨\n  - [ ] é˜²æŠ–èŠ‚æµ\n  - [ ] ç»„ä»¶ç¼“å­˜\næ„å»ºä¼˜åŒ–\n  - [ ] Tree Shaking\n  - [ ] å‹ç¼©èµ„æº\n  - [ ] ç¼“å­˜ç­–ç•¥\n  - [ ] CDN éƒ¨ç½²\n\n### 1.7. æ–‡æ¡£è§„èŒƒ\n\n#### 1.7.1. **ä»£ç æ³¨é‡Šè§„èŒƒ**\n```typescript\n/**\n * @function formatDate\n * @description æ ¼å¼åŒ–æ—¥æœŸ\n * @param {Date} date - è¦æ ¼å¼åŒ–çš„æ—¥æœŸ\n * @param {string} [format='YYYY-MM-DD'] - æ—¥æœŸæ ¼å¼\n * @returns {string} æ ¼å¼åŒ–åçš„æ—¥æœŸå­—ç¬¦ä¸²\n * @example\n * formatDate(new Date(), 'YYYY/MM/DD')\n */\n```\n\n#### 1.7.2. **API æ–‡æ¡£è§„èŒƒ**\n\n### 1.8. ç›‘æ§ä¸æ—¥å¿—è§„èŒƒï¼ˆè´¨é‡ä¿è¯ä½“ç³»ï¼‰\n\n#### 1.8.1. **é”™è¯¯ç›‘æ§**\n```typescript\n// é”™è¯¯ç›‘æ§é…ç½®\nwindow.onerror = function(message, source, lineno, colno, error) {\n  // ä¸ŠæŠ¥é”™è¯¯ä¿¡æ¯\n  reportError({\n    type: 'javascript',\n    message,\n    source,\n    lineno,\n    colno,\n    error: error?.stack\n  });\n};\n\n// React é”™è¯¯è¾¹ç•Œ\nclass ErrorBoundary extends React.Component {\n  componentDidCatch(error, errorInfo) {\n    // ä¸ŠæŠ¥é”™è¯¯ä¿¡æ¯\n    reportError({\n      type: 'react',\n      error,\n      errorInfo\n    });\n  }\n}\n\n// ç›‘æ§é…ç½®ç¤ºä¾‹\nconst monitor = {\n  error: (error: Error) => {\n    // é”™è¯¯ä¸ŠæŠ¥\n    errorTracker.capture(error);\n    // æ—¥å¿—è®°å½•\n    logger.error(error);\n  },\n  \n  performance: (metrics: PerformanceMetrics) => {\n    // æ€§èƒ½æŒ‡æ ‡ä¸ŠæŠ¥\n    performanceTracker.track(metrics);\n  }\n};\n\n```\n\n#### 1.8.2. **æ€§èƒ½ç›‘æ§**\n\n```typescript\n// æ€§èƒ½ç›‘æ§å®ç°\nconst performanceObserver = new PerformanceObserver((list) => {\n  const entries = list.getEntries();\n  entries.forEach((entry) => {\n    // ä¸ŠæŠ¥æ€§èƒ½æŒ‡æ ‡\n    reportPerformance({\n      name: entry.name,\n      value: entry.startTime,\n      type: entry.entryType\n    });\n  });\n});\n\nperformanceObserver.observe({ entryTypes: ['paint', 'largest-contentful-paint'] });\n```\n\n### 1.9. å‘å¸ƒæµç¨‹è§„èŒƒ\n\n#### 1.9.1. **å‘å¸ƒæ¸…å•**\n\n  å‘å¸ƒå‰æ£€æŸ¥\n  - [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡\n  - [ ] ä»£ç å®¡æŸ¥å®Œæˆ\n  - [ ] æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡\n  - [ ] æ–‡æ¡£æ›´æ–°å®Œæˆ\n  å‘å¸ƒæ­¥éª¤\n  1. æ›´æ–°ç‰ˆæœ¬å·\n  2. ç”Ÿæˆæ›´æ–°æ—¥å¿—\n  3. æ„å»ºç”Ÿäº§åŒ…\n  4. æ‰§è¡Œéƒ¨ç½²è„šæœ¬\n  5. éªŒè¯éƒ¨ç½²ç»“æœ\n  å‘å¸ƒåç¡®è®¤\n  - [ ] åŠŸèƒ½éªŒè¯\n  - [ ] ç›‘æ§æ­£å¸¸\n  - [ ] å¤‡ä»½ç¡®è®¤\n\n#### 1.9.2. **ç‰ˆæœ¬å‘å¸ƒè„šæœ¬**\n\n```bash\n`#!/bin/bash`\n# release.sh\n\n# æ›´æ–°ç‰ˆæœ¬å·\nnpm version patch\n\n# ç”Ÿæˆæ›´æ–°æ—¥å¿—\nconventional-changelog -p angular -i CHANGELOG.md -s\n\n# æ„å»º\nnpm run build\n\n# éƒ¨ç½²\nnpm run deploy\n```\n\n### 1.10. å›¢é˜Ÿåä½œè§„èŒƒ\n\n#### 1.10.1. **ä»£ç å®¡æŸ¥æ¸…å•**\n\n  - ä»£ç å®¡æŸ¥è¦ç‚¹\n\t  - åŠŸèƒ½æ€§\n\t\t  - [ ] åŠŸèƒ½æ˜¯å¦å®Œæ•´å®ç°\n\t\t  - [ ] è¾¹ç•Œæ¡ä»¶æ˜¯å¦å¤„ç†\n\t\t  - [ ] é”™è¯¯å¤„ç†æ˜¯å¦å®Œå–„\n\t  - ä»£ç è´¨é‡\n\t\t  - [ ] ä»£ç é£æ ¼ç¬¦åˆè§„èŒƒ\n\t\t  - [ ] å‘½åæ˜¯å¦åˆç†\n\t\t  - [ ] æ˜¯å¦æœ‰é‡å¤ä»£ç \n\t\t  - [ ] TypeScriptç±»å‹å®Œæ•´æ€§\n\t    - [ ] Â å•å…ƒæµ‹è¯•è¦†ç›–ç‡\n\t    - [ ] Â ä»£ç å¤æ‚åº¦æ£€æŸ¥\n\t    - [ ] Â æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡\n\t  - æ€§èƒ½\n\t\t  - [ ] æ˜¯å¦æœ‰æ€§èƒ½éšæ‚£\n\t\t  - [ ] èµ„æºä½¿ç”¨æ˜¯å¦åˆç†\n\t  - å®‰å…¨æ€§\n\t\t  - [ ] ä¾èµ–åŒ…å®‰å…¨å®¡æŸ¥\n\t\t  - [ ] XSSé˜²æŠ¤\n\t\t  - [ ] CSRFé˜²æŠ¤\n\t\t  - [ ] æ˜¯å¦æœ‰å®‰å…¨æ¼æ´\n\t\t  - [ ] æ•æ„Ÿä¿¡æ¯æ˜¯å¦åŠ å¯†\n\t  - å¯ç»´æŠ¤æ€§\n\t\t  - [ ] ä»£ç æ˜¯å¦æ˜“äºç†è§£\n\t\t  - [ ] æ³¨é‡Šæ˜¯å¦å……åˆ†\n\t\t  - [ ] æ˜¯å¦éµå¾ªè®¾è®¡æ¨¡å¼\n\t- **å·¥ç¨‹è§„èŒƒ**\n\t    - [ ] Â Gitæäº¤è§„èŒƒ\n\t    - [ ] Â ä»£ç å®¡æŸ¥æµç¨‹\n\t    - [ ] Â æ–‡æ¡£å®Œæ•´æ€§\n\t    - [ ] Â æ„å»ºæµç¨‹ç¨³å®šæ€§\n\n#### 1.10.2. **å›¢é˜Ÿåä½œå·¥å…·é…ç½®**\n\n```json\n{\n  \"husky\": {\n    \"hooks\": {\n      \"pre-commit\": \"lint-staged\",\n      \"commit-msg\": \"commitlint -E HUSKY_GIT_PARAMS\"\n    }\n  },\n  \"lint-staged\": {\n    \"*.{js,jsx,ts,tsx}\": [\n      \"eslint --fix\",\n      \"prettier --write\"\n    ]\n  }\n}\n```\n\n### 1.11. å·¥ç¨‹åŒ–å·¥å…·é“¾\n\n1. **å¼€å‘å·¥å…·**\n    - VS Code + æ’ä»¶é…ç½®\n    - Chrome DevTools\n    - Postman/Insomnia\n2. **è‡ªåŠ¨åŒ–å·¥å…·**\n    - CI/CDï¼šJenkins/GitHub Actions\n    - è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šJest/Cypress\n    - ä»£ç åˆ†æï¼šSonarQube\n\n### 1.12. æœ€å\n\nè¿™ä¸ªæ–¹æ³•è®ºæ¡†æ¶æ¶µç›–äº†å‰ç«¯å·¥ç¨‹åŒ–çš„ä¸»è¦æ–¹é¢ï¼Œå¯ä»¥æ ¹æ®å…·ä½“é¡¹ç›®éœ€æ±‚è¿›è¡Œè°ƒæ•´å’Œæ‰©å±•ã€‚å…³é”®æ˜¯è¦ç¡®ä¿å›¢é˜Ÿæˆå‘˜éƒ½ç†è§£å¹¶éµå¾ªè¿™äº›è§„èŒƒï¼ŒæŒç»­æ”¹è¿›å·¥ç¨‹åŒ–æµç¨‹ã€‚å»ºè®®å°†**è¿™äº›è§„èŒƒæ–‡æ¡£åŒ–ï¼Œå¹¶å®šæœŸæ›´æ–°å’Œä¼˜åŒ–**ã€‚\n\nå…ˆæ¢³ç†å¥½æˆ‘ä»¬è‡ªå·±çš„ä¸œè¥¿ï¼Œæ¯”å¦‚`æ•´ä¸ªç ”å‘ç”Ÿå‘½å‘¨æœŸæµç¨‹`é“¾è·¯ï¼›ç„¶ååœ¨æµç¨‹é‡Œ`æ‰¾å¯ä¼˜åŒ–çš„ç‚¹`ï¼Œå¹¶å»è°ƒç ”æˆ–è€…çœ‹ç¤¾åŒºæœ‰æ²¡æœ‰èƒ½å€ŸåŠ›çš„ï¼Œçœ‹æ˜¯å¦éœ€è¦äºŒæ¬¡å¼€å‘\n\n![528](#)","51b75e8c7eb551e1bd5a729efa9d7af9":"\n# é€šç”¨é—®é¢˜\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## ç»“åˆä¹‹å‰é¡¹ç›®ï¼Œè°ˆè°ˆé‡åˆ°çš„éš¾ç‚¹ \n\n\n## ç»“åˆä¹‹å‰é¡¹ç›®ï¼Œè°ˆè°ˆåšè¿‡çš„ä¼˜åŒ–\n\n\n\n","2a7025614abe56c5b8b5a181dfa2a7ad":"\n# é¢è¯•é¢˜\n\n`#å‰ç«¯é¢è¯•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. mouseenter ä¸ mouseover çš„åŒºåˆ« \n\n### 1.1. äº‹ä»¶å†’æ³¡è¡Œä¸º\n\n   - mouseoverï¼šä¼šå†’æ³¡\n   - mouseenterï¼šä¸ä¼šå†’æ³¡ã€‚å®ƒåªåœ¨é¼ æ ‡æŒ‡é’ˆè¿›å…¥ç»‘å®šäº‹ä»¶çš„å…ƒç´ æ—¶è§¦å‘ï¼Œä¸ä¼šåœ¨è¿›å…¥å…¶å­å…ƒç´ æ—¶é‡å¤è§¦å‘ã€‚\n\n### 1.2. è§¦å‘é¢‘ç‡\n\n   - mouseoverï¼šå½“é¼ æ ‡ç§»åŠ¨åˆ°å…ƒç´ æˆ–å…¶å­å…ƒç´ ä¸Šæ—¶éƒ½ä¼šè§¦å‘ã€‚\n\t   - è¿™æ„å‘³ç€ï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ æœ‰å­å…ƒç´ ï¼Œç§»åŠ¨åˆ°å­å…ƒç´ ä¸Šä¹Ÿä¼šè§¦å‘çˆ¶å…ƒç´ çš„ mouseover äº‹ä»¶ã€‚\n   - mouseenterï¼š\n\t   - åªæœ‰å½“é¼ æ ‡ä»å…ƒç´ å¤–éƒ¨é¦–æ¬¡è¿›å…¥å…ƒç´ æ—¶æ‰ä¼šè§¦å‘ã€‚\n\t   - ç§»åŠ¨åˆ°å…¶å­å…ƒç´ ä¸Šä¸ä¼šé‡å¤è§¦å‘è¯¥äº‹ä»¶ã€‚\n\n### 1.3. ç›¸åº”çš„ç¦»å¼€äº‹ä»¶\n\n   - mouseover å¯¹åº”çš„ç¦»å¼€äº‹ä»¶æ˜¯ `mouseout`\n   - mouseenter å¯¹åº”çš„ç¦»å¼€äº‹ä»¶æ˜¯ `mouseleave`\n\n### 1.4. æ€§èƒ½å½±å“\n\n   - mouseoverï¼šç”±äºå…¶å†’æ³¡ç‰¹æ€§å’Œé¢‘ç¹è§¦å‘çš„æ€§è´¨ï¼Œåœ¨å¤æ‚çš„ DOM ç»“æ„ä¸­å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚\n   - mouseenterï¼šé€šå¸¸å…·æœ‰æ›´å¥½çš„æ€§èƒ½ï¼Œå› ä¸ºå®ƒä¸ä¼šåœ¨å­å…ƒç´ é—´ç§»åŠ¨æ—¶é‡å¤è§¦å‘ã€‚\n\n### 1.5. ä½¿ç”¨åœºæ™¯\n\n   - mouseoverï¼š\n\t   - é€‚ç”¨äº**éœ€è¦ç²¾ç¡®è·Ÿè¸ªé¼ æ ‡åœ¨å…ƒç´ å†…éƒ¨ç§»åŠ¨çš„æƒ…å†µ**ï¼Œ\n\t   - æˆ–è€…å½“ä½ éœ€è¦åˆ©ç”¨äº‹ä»¶å†’æ³¡æ¥å¤„ç†å¤§é‡å…ƒç´ çš„æƒ…å†µã€‚\n   - mouseenterï¼šé€‚ç”¨äºåªéœ€è¦çŸ¥é“é¼ æ ‡æ˜¯å¦è¿›å…¥äº†æ•´ä¸ªå…ƒç´ åŒºåŸŸçš„æƒ…å†µï¼Œè€Œä¸å…³å¿ƒå†…éƒ¨çš„ç§»åŠ¨ã€‚\n\n## 2. å¦‚ä½•ä½¿å¾—`var [a,b] = {a:1,b:2}` è§£æ„æˆåŠŸ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-14.png)\n\n## 3. Vue3 ä¸­ created å’Œ mounted è¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­çš„åŒºåˆ«\n\n### 3.1. æ‰§è¡Œæ—¶æœºä¸åŒ\n\n```javascript hl:18\n// Options API æ–¹å¼\nexport default {\n  created() {\n    // åœ¨å®ä¾‹åˆ›å»ºå®Œæˆåè¢«ç«‹å³è°ƒç”¨\n    // æ­¤æ—¶ç»„ä»¶å®ä¾‹å·²ç»åˆ›å»ºå®Œæˆï¼Œä½†è¿˜æ²¡æœ‰æŒ‚è½½åˆ° DOM\n  },\n  mounted() {\n    // åœ¨ç»„ä»¶è¢«æŒ‚è½½åˆ° DOM åè°ƒç”¨\n    // æ­¤æ—¶å¯ä»¥è®¿é—®åˆ°çœŸå®çš„ DOM å…ƒç´ \n  }\n}\n\n// Composition API æ–¹å¼\nimport { onMounted } from 'vue'\n\nexport default {\n  setup() {\n    // ç›¸å½“äº created\n    console.log('setupæ‰§è¡Œï¼Œç»„ä»¶åˆ›å»ºå®Œæˆ')\n    \n    onMounted(() => {\n      // ç»„ä»¶æŒ‚è½½åˆ° DOM åæ‰§è¡Œ\n      console.log('ç»„ä»¶å·²æŒ‚è½½åˆ° DOM')\n    })\n  }\n}\n```\n\n### 3.2. å¯è®¿é—®çš„å†…å®¹ä¸åŒ\n\n```javascript\nexport default {\n  data() {\n    return {\n      message: 'Hello'\n    }\n  },\n  created() {\n    // âœ… å¯ä»¥è®¿é—®å“åº”å¼æ•°æ®\n    console.log(this.message)\n    \n    // âŒ ä¸èƒ½è®¿é—® DOM\n    console.log(this.$el) // undefined\n    \n    // âœ… å¯ä»¥è¿›è¡Œæ•°æ®è¯·æ±‚\n    this.fetchData()\n  },\n  mounted() {\n    // âœ… å¯ä»¥è®¿é—®å“åº”å¼æ•°æ®\n    console.log(this.message)\n    \n    // âœ… å¯ä»¥è®¿é—® DOM\n    console.log(this.$el)\n    console.log(document.getElementById('app'))\n    \n    // âœ… å¯ä»¥è¿›è¡Œ DOM æ“ä½œ\n    this.$el.querySelector('.title').style.color = 'red'\n  }\n}\n```\n\n### 3.3. ä½¿ç”¨åœºæ™¯ä¸åŒ\n\n```javascript\nexport default {\n  created() {\n    // é€‚åˆåšçš„äº‹æƒ…ï¼š\n    // 1. åˆå§‹åŒ–æ•°æ®\n    this.initData()\n    \n    // 2. è¿›è¡Œæ•°æ®è¯·æ±‚\n    this.fetchUserInfo()\n    \n    // 3. æ·»åŠ äº‹ä»¶ç›‘å¬ï¼ˆä¸æ¶‰åŠ DOMï¼‰\n    window.addEventListener('resize', this.handleResize)\n  },\n  mounted() {\n    // é€‚åˆåšçš„äº‹æƒ…ï¼š\n    // 1. DOM æ“ä½œ\n    this.$refs.myInput.focus()\n    \n    // 2. ç¬¬ä¸‰æ–¹åº“åˆå§‹åŒ–ï¼ˆéœ€è¦ DOMï¼‰\n    new Chart(this.$refs.chart)\n    \n    // 3. éœ€è¦å…ƒç´ å°ºå¯¸çš„è®¡ç®—\n    this.elementWidth = this.$el.offsetWidth\n  }\n}\n```\n\n### 3.4. åœ¨å¼‚æ­¥ç»„ä»¶ä¸­çš„è¡¨ç°\n\n```javascript hl:7\n// AsyncComponent.vue\nexport default {\n  async setup() {\n    const data = await fetchData() // å¼‚æ­¥æ“ä½œ\n    \n    onMounted(() => {\n      // åªæœ‰åœ¨å¼‚æ­¥æ“ä½œå®Œæˆå¹¶ç»„ä»¶æŒ‚è½½åæ‰ä¼šæ‰§è¡Œ\n      console.log('ç»„ä»¶æŒ‚è½½å®Œæˆ')\n    })\n    \n    return { data }\n  }\n}\n```\n\n### 3.5. çˆ¶å­ç»„ä»¶çš„æ‰§è¡Œé¡ºåº\n\n```javascript\n// Parent.vue\nexport default {\n  created() {\n    console.log('Parent created')\n  },\n  mounted() {\n    console.log('Parent mounted')\n  }\n}\n\n// Child.vue\nexport default {\n  created() {\n    console.log('Child created')\n  },\n  mounted() {\n    console.log('Child mounted')\n  }\n}\n\n// æ‰§è¡Œé¡ºåºï¼š\n// 1. Parent created\n// 2. Child created\n// 3. Child mounted\n// 4. Parent mounted\n```\n\n### 3.6. ä¸»è¦åŒºåˆ«æ€»ç»“\n\n1. æ‰§è¡Œæ—¶æœºï¼š\n   - createdï¼šåœ¨ç»„ä»¶å®ä¾‹åˆ›å»ºå®Œæˆåç«‹å³æ‰§è¡Œ\n   - mountedï¼šåœ¨ç»„ä»¶æŒ‚è½½åˆ° DOM åæ‰§è¡Œ\n2. DOM è®¿é—®ï¼š\n   - createdï¼šæ— æ³•è®¿é—® DOMï¼Œå› ä¸ºç»„ä»¶è¿˜æœªæŒ‚è½½\n   - mountedï¼šå¯ä»¥è®¿é—® DOMï¼Œç»„ä»¶å·²ç»æŒ‚è½½å®Œæˆ\n3. é€‚ç”¨åœºæ™¯ï¼š\n   - createdï¼š\n     * åˆå§‹åŒ–æ•°æ®\n     * æ•°æ®è¯·æ±‚\n     * è®¾ç½®äº‹ä»¶ç›‘å¬ï¼ˆä¸æ¶‰åŠ DOMï¼‰\n   - mountedï¼š\n     * DOM æ“ä½œ\n     * ç¬¬ä¸‰æ–¹åº“åˆå§‹åŒ–ï¼ˆéœ€è¦ DOMï¼‰\n     * éœ€è¦è®¿é—®å­ç»„ä»¶\n     * éœ€è¦å…ƒç´ å°ºå¯¸è®¡ç®—\n4. Composition API ä¸­ï¼š\n   - created é’©å­å¯¹åº” setup å‡½æ•°æœ¬èº«\n   - mounted é’©å­å¯¹åº” onMounted å‡½æ•°\n5. æ³¨æ„äº‹é¡¹ï¼š\n   - åœ¨ created ä¸­è¿›è¡Œçš„æ•°æ®è¯·æ±‚å¯èƒ½å¯¼è‡´**é¡µé¢é—ªçƒ**\n   - mounted ä¸ä¿è¯**æ‰€æœ‰å­ç»„ä»¶éƒ½å·²æŒ‚è½½å®Œæˆ**ï¼Œå¦‚éœ€è¦å¯ä»¥ä½¿ç”¨ nextTick\n\n### 3.7. ä½¿ç”¨å»ºè®®\n\n1. å¦‚æœä¸éœ€è¦è®¿é—® DOMï¼Œä¼˜å…ˆåœ¨ created ä¸­è¿›è¡Œæ•°æ®åˆå§‹åŒ–å’Œè¯·æ±‚\n2. æ¶‰åŠ DOM æ“ä½œçš„é€»è¾‘éƒ½æ”¾åœ¨ mounted ä¸­\n3. ä½¿ç”¨ Composition API æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ setup + onMounted çš„ç»„åˆ\n4. éœ€è¦åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æ—¶ï¼Œè¦æ³¨æ„ mounted é’©å­åªä¼šåœ¨å®¢æˆ·ç«¯æ‰§è¡Œ\n\n## 4. Node.js åœ¨ä½¿ç”¨ ES modules æ—¶è¦æ±‚åŠ ä¸Šæ–‡ä»¶æ‰©å±•åæœ‰å‡ ä¸ªé‡è¦åŸå› \n\n### 4.1. æ˜ç¡®æ€§å’Œæ€§èƒ½\n\nNode.js è¦æ±‚åœ¨å¯¼å…¥ ES modules æ—¶ä½¿ç”¨æ–‡ä»¶æ‰©å±•åï¼Œä¸»è¦æ˜¯ä¸ºäº†æé«˜æ¨¡å—è§£æçš„æ˜ç¡®æ€§å’Œæ€§èƒ½ã€‚\n\n```javascript\n// æ­£ç¡®çš„å¯¼å…¥æ–¹å¼\nimport { someFunction } from './myModule.js';\n\n// é”™è¯¯çš„å¯¼å…¥æ–¹å¼ï¼ˆåœ¨ ES modules ä¸­ï¼‰\nimport { someFunction } from './myModule'; // è¿™å°†å¯¼è‡´é”™è¯¯\n```\n\né€šè¿‡æ˜ç¡®æŒ‡å®šæ–‡ä»¶æ‰©å±•åï¼ŒNode.js å¯ä»¥ç›´æ¥å®šä½åˆ°æ­£ç¡®çš„æ–‡ä»¶ï¼Œè€Œä¸éœ€è¦å°è¯•å¤šç§å¯èƒ½çš„æ–‡ä»¶æ‰©å±•åã€‚è¿™æ ·å¯ä»¥å‡å°‘æ–‡ä»¶ç³»ç»Ÿçš„æŸ¥æ‰¾æ¬¡æ•°ï¼Œæé«˜æ¨¡å—åŠ è½½çš„æ•ˆç‡ã€‚\n\n### 4.2. ä¸æµè§ˆå™¨ç¯å¢ƒçš„ä¸€è‡´æ€§\n\nåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œä½¿ç”¨ ES modules æ—¶é€šå¸¸éœ€è¦æŒ‡å®šå®Œæ•´çš„æ–‡ä»¶åï¼ˆåŒ…æ‹¬æ‰©å±•åï¼‰ã€‚Node.js é‡‡ç”¨ç›¸åŒçš„æ–¹å¼å¯ä»¥ä¿æŒä¸æµè§ˆå™¨ç¯å¢ƒçš„ä¸€è‡´æ€§ï¼Œä½¿å¾—ä»£ç åœ¨ä¸åŒç¯å¢ƒä¸­çš„è¡Œä¸ºæ›´åŠ ä¸€è‡´ã€‚\n\n```html hl:2\n<!-- åœ¨æµè§ˆå™¨ä¸­ -->\n<script type=\"module\" src=\"./myModule.js\"></script>\n```\n\n### 4.3. é¿å…æ­§ä¹‰\n\nåœ¨ Node.js ä¸­ï¼Œä¸åŒçš„æ–‡ä»¶æ‰©å±•åå¯èƒ½å¯¹åº”ä¸åŒçš„æ¨¡å—ç±»å‹æˆ–å¤„ç†æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œ`.js`ã€`.mjs`ã€`.cjs` åˆ†åˆ«å¯èƒ½è¡¨ç¤ºä¸åŒçš„æ¨¡å—ç³»ç»Ÿã€‚é€šè¿‡æ˜ç¡®æŒ‡å®šæ‰©å±•åï¼Œå¯ä»¥é¿å…æ½œåœ¨çš„æ­§ä¹‰ã€‚\n\n```javascript\nimport { func1 } from './module1.js';  // ES module\nimport { func2 } from './module2.mjs'; // ES moduleï¼ˆæ˜¾å¼ï¼‰\nconst { func3 } = require('./module3.cjs'); // CommonJS module\n```\n\n### 4.4. ç®€åŒ–æ¨¡å—è§£æé€»è¾‘\n\né€šè¿‡è¦æ±‚æ˜ç¡®çš„æ–‡ä»¶æ‰©å±•åï¼ŒNode.js å¯ä»¥ç®€åŒ–å…¶æ¨¡å—è§£æé€»è¾‘ã€‚è¿™ä¸ä»…æé«˜äº†æ€§èƒ½ï¼Œè¿˜å‡å°‘äº†å¯èƒ½çš„é”™è¯¯å’Œæ„å¤–è¡Œä¸ºã€‚\n\n### 4.5. åŒºåˆ†æ–‡ä»¶ç±»å‹\n\nåœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œå¯èƒ½å­˜åœ¨åŒåä½†ä¸åŒç±»å‹çš„æ–‡ä»¶ï¼ˆå¦‚ `data.json` å’Œ `data.js`ï¼‰ã€‚å¼ºåˆ¶ä½¿ç”¨æ‰©å±•åå¯ä»¥æ˜ç¡®æŒ‡å®šè¦å¯¼å…¥çš„ç¡®åˆ‡æ–‡ä»¶ã€‚\n\n```javascript\nimport data from './data.json';\nimport { processData } from './data.js';\n```\n\n### 4.6. æœªæ¥å…¼å®¹æ€§\n\nè¿™ç§åšæ³•ä¸ºæœªæ¥å¯èƒ½å‡ºç°çš„æ–°æ–‡ä»¶ç±»å‹æˆ–æ¨¡å—ç³»ç»Ÿç•™ä¸‹äº†æ‰©å±•ç©ºé—´ï¼Œè€Œä¸ä¼šç ´åç°æœ‰çš„å¯¼å…¥è¯­å¥ã€‚\n\n## 5. package.json æ–‡ä»¶ä¸­çš„ devDependencies å’Œ dependencies\n\n### 5.1. ä¸»è¦åŒºåˆ«\n\n- dependenciesï¼š\n  * **è¿è¡Œæ—¶**å¿…éœ€çš„ä¾èµ–\n  * ä¼šè¢«æ‰“åŒ…åˆ°ç”Ÿäº§ç¯å¢ƒ\n  * é¡¹ç›®è¿è¡Œå¿…é¡»çš„åŒ…\n- devDependenciesï¼š\n  * **å¼€å‘æ—¶**éœ€è¦çš„ä¾èµ–\n  * ä¸ä¼šè¢«æ‰“åŒ…åˆ°ç”Ÿäº§ç¯å¢ƒ\n  * ä»…åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨çš„åŒ…\n\n### 5.2. å®‰è£…å‘½ä»¤çš„åŒºåˆ«\n\n```bash\n# å®‰è£…åˆ° dependencies\nnpm install axios --save\n# æˆ–\nnpm install axios -S\n# æˆ–\nnpm install axios\n\n# å®‰è£…åˆ° devDependencies\nnpm install webpack --save-dev\n# æˆ–\nnpm install webpack -D\n```\n\n### 5.3. å…¸å‹ä½¿ç”¨åœºæ™¯\n\ndependencies é€‚ç”¨äºï¼š\n```json\n{\n  \"dependencies\": {\n    // è¿è¡Œæ—¶æ¡†æ¶\n    \"vue\": \"^3.3.0\",\n    \"react\": \"^18.2.0\",\n    \n    // åŠŸèƒ½æ€§åº“\n    \"axios\": \"^1.5.0\",\n    \"lodash\": \"^4.17.21\",\n    \n    // UI ç»„ä»¶åº“\n    \"element-plus\": \"^2.3.0\",\n    \"ant-design-vue\": \"^4.0.0\",\n    \n    // è·¯ç”±\n    \"vue-router\": \"^4.2.0\",\n    \n    // çŠ¶æ€ç®¡ç†\n    \"vuex\": \"^4.1.0\"\n  }\n}\n```\n\ndevDependencies é€‚ç”¨äºï¼š\n```json\n{\n  \"devDependencies\": {\n    // æ„å»ºå·¥å…·\n    \"webpack\": \"^5.88.0\",\n    \"vite\": \"^4.4.0\",\n    \n    // ä»£ç æ£€æŸ¥\n    \"eslint\": \"^8.45.0\",\n    \"prettier\": \"^3.0.0\",\n    \n    // æµ‹è¯•å·¥å…·\n    \"jest\": \"^29.6.0\",\n    \"vitest\": \"^0.34.0\",\n    \n    // ç±»å‹å®šä¹‰\n    \"@types/node\": \"^20.4.0\",\n    \n    // å¼€å‘æœåŠ¡å™¨\n    \"webpack-dev-server\": \"^4.15.0\",\n    \n    // ç¼–è¯‘å™¨/è½¬è¯‘å™¨\n    \"typescript\": \"^5.1.0\",\n    \"babel-loader\": \"^9.1.0\"\n  }\n}\n```\n\n### 5.4. ç¯å¢ƒå½±å“\n\nå¼€å‘ç¯å¢ƒï¼š\n```bash\n# å®‰è£…æ‰€æœ‰ä¾èµ–\nnpm install\n# ä¼šåŒæ—¶å®‰è£… dependencies å’Œ devDependencies ä¸­çš„æ‰€æœ‰åŒ…\n```\n\nç”Ÿäº§ç¯å¢ƒï¼š\n```bash\n# åªå®‰è£… dependencies\nnpm install --production\n# æˆ–\nNODE_ENV=production npm install\n```\n\n### 5.5. é¡¹ç›®éƒ¨ç½²è€ƒè™‘\n\n```json hl:4\n{\n  \"scripts\": {\n    \"build\": \"webpack --mode production\",\n    \"deploy\": \"npm ci --production && node server.js\"\n  }\n}\n```\n\nåœ¨éƒ¨ç½²æ—¶ï¼Œé€šå¸¸åªéœ€è¦å®‰è£… dependenciesï¼Œå¯ä»¥å‡å°‘å®‰è£…åŒ…çš„å¤§å°å’Œæ—¶é—´ã€‚\n\n### 5.6. ä¾èµ–åˆ†ç±»çš„å»ºè®®\n\n```json\n{\n  \"dependencies\": {\n    // 1. é¡¹ç›®è¿è¡Œå¿…éœ€çš„æ¡†æ¶å’Œåº“\n    \"vue\": \"^3.3.0\",\n    // 2. ç”Ÿäº§ç¯å¢ƒéœ€è¦çš„åŠŸèƒ½æ¨¡å—\n    \"axios\": \"^1.5.0\",\n    // 3. ç”¨æˆ·äº¤äº’å¿…éœ€çš„UIç»„ä»¶\n    \"element-plus\": \"^2.3.0\"\n  },\n  \"devDependencies\": {\n    // 1. å¼€å‘å·¥å…·å’Œæ„å»ºå·¥å…·\n    \"webpack\": \"^5.88.0\",\n    // 2. ä»£ç è´¨é‡å’Œæµ‹è¯•å·¥å…·\n    \"eslint\": \"^8.45.0\",\n    // 3. ç±»å‹å®šä¹‰æ–‡ä»¶\n    \"@types/node\": \"^20.4.0\"\n  }\n}\n```\n\n### 5.7. æ³¨æ„äº‹é¡¹\n\n#### 5.7.1. ä¾èµ–ç‰ˆæœ¬ç®¡ç†\n\n```json\n{\n  \"dependencies\": {\n    \"package1\": \"^1.0.0\",  // è‡ªåŠ¨æ›´æ–°å°ç‰ˆæœ¬å’Œè¡¥ä¸ç‰ˆæœ¬\n    \"package2\": \"~1.0.0\",  // åªæ›´æ–°è¡¥ä¸ç‰ˆæœ¬\n    \"package3\": \"1.0.0\"    // å›ºå®šç‰ˆæœ¬\n  }\n}\n```\n\n#### 5.7.2. å®‰å…¨è€ƒè™‘\n\n```bash hl:2,3\n# å®šæœŸæ›´æ–°ä¾èµ–ä»¥ä¿®å¤å®‰å…¨æ¼æ´\nnpm audit\nnpm audit fix\n\n# ä½¿ç”¨ package-lock.json é”å®šç‰ˆæœ¬\nnpm ci\n\n# å¼€å‘ç¯å¢ƒ\nnpm install  # å¯ä»¥ä½¿ç”¨ npm install\n\n# æµ‹è¯•/æ„å»º/éƒ¨ç½²ç¯å¢ƒ\nnpm ci  # æ¨èä½¿ç”¨ npm ci\n\n# å›¢é˜Ÿåä½œ\ngit add package-lock.json  # ç¡®ä¿å°† package-lock.json æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶\n\n```\n\n### 5.8. ä½¿ç”¨ npm ci \n\n```markdown hl:7,6\n# npm install\n- ä¼šä¿®æ”¹ package-lock.json\n- å¯ä»¥å®‰è£…å•ä¸ªåŒ…\n- å¯ä»¥åœ¨æ²¡æœ‰ package-lock.json çš„æƒ…å†µä¸‹å·¥ä½œ\n\n# npm ci\n- ä¸¥æ ¼æŒ‰ç…§ package-lock.json å®‰è£…\n- ä¸èƒ½å®‰è£…å•ä¸ªåŒ…\n- å¿…é¡»æœ‰ package-lock.json\n- å®‰è£…å‰ä¼šåˆ é™¤ node_modules\n\n```\n\n## 6. ä¸ºä»€ä¹ˆ React éœ€è¦ Fiber æ¶æ„ï¼Œè€Œ Vue ä¼¼ä¹ä¸éœ€è¦ç±»ä¼¼çš„æœºåˆ¶\n\n### 6.1. React çš„ç‰¹ç‚¹å’ŒæŒ‘æˆ˜\n\nReact çš„æ ¸å¿ƒç†å¿µæ˜¯ï¼š\n\n```javascript\nUI = f(state)\n```\n\nè¿™æ„å‘³ç€ React åœ¨**æ¯æ¬¡çŠ¶æ€å˜åŒ–æ—¶éƒ½ä¼šé‡æ–°æ¸²æŸ“æ•´ä¸ªç»„ä»¶æ ‘**ã€‚\n\nè¿™ç§æ–¹æ³•ç®€å•ç›´æ¥ï¼Œä½†ä¹Ÿå¸¦æ¥äº†ä¸€äº›æŒ‘æˆ˜ï¼š\n\n```jsx\n// React ç»„ä»¶ç¤ºä¾‹\nfunction App() {\n  const [count, setCount] = useState(0);\n  \n  return (\n    <div>\n      <h1>Count: {count}</h1>\n      <button onClick={() => setCount(count + 1)}>Increment</button>\n      <LargeList items={generateItems(1000)} />\n    </div>\n  );\n}\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå³ä½¿åªæ˜¯æ›´æ–°äº† `count`ï¼ŒReact ä¹Ÿä¼šé‡æ–°æ¸²æŸ“æ•´ä¸ªç»„ä»¶æ ‘ï¼ŒåŒ…æ‹¬ `LargeList`ã€‚\n\n### 6.2. Fiber æ¶æ„çš„å¿…è¦æ€§\n\nFiber æ¶æ„ä¸»è¦è§£å†³äº†ä»¥ä¸‹é—®é¢˜ï¼š\n\n#### 6.2.1. å¤§å‹åº”ç”¨çš„æ€§èƒ½é—®é¢˜\n\n```javascript\n// æ¨¡æ‹Ÿå¤§é‡è®¡ç®—\nfunction heavyComputation() {\n  let result = 0;\n  for (let i = 0; i < 1000000000; i++) {\n    result += Math.random();\n  }\n  return result;\n}\n\nfunction SlowComponent() {\n  const result = heavyComputation();\n  return <div>{result}</div>;\n}\n```\n\nåœ¨æ—§çš„æ¶æ„ä¸­ï¼Œè¿™ç§è®¡ç®—å¯èƒ½ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œå¯¼è‡´é¡µé¢å¡é¡¿ã€‚\n\n#### 6.2.2. ä¼˜å…ˆçº§è°ƒåº¦\n\n```jsx\n<div>\n  <UserInfo />  // é«˜ä¼˜å…ˆçº§\n  <Newsfeed />  // ä½ä¼˜å…ˆçº§\n  <Sidebar />   // ä½ä¼˜å…ˆçº§\n</div>\n```\n\nFiber å…è®¸ React æ ¹æ®ä¼˜å…ˆçº§è°ƒåº¦æ›´æ–°ã€‚\n\n#### 6.2.3. å¯ä¸­æ–­çš„æ¸²æŸ“è¿‡ç¨‹\n\n```javascript\n// Fiber å…è®¸å°†æ¸²æŸ“å·¥ä½œåˆ†è§£æˆå°å•å…ƒ\nlet nextUnitOfWork = null;\n\nfunction workLoop(deadline) {\n  while (nextUnitOfWork && deadline.timeRemaining() > 0) {\n    nextUnitOfWork = performUnitOfWork(nextUnitOfWork);\n  }\n  requestIdleCallback(workLoop);\n}\n\nrequestIdleCallback(workLoop);\n```\n\n### 6.3. Vue çš„ä¸åŒä¹‹å¤„\n\nVue é‡‡ç”¨äº†ä¸åŒçš„ç­–ç•¥ï¼š\n\n#### 6.3.1. ç»†ç²’åº¦çš„ä¾èµ–è¿½è¸ª\n\n```vue\n<template>\n  <div>\n    <h1>{{ count }}</h1>\n    <button @click=\"increment\">Increment</button>\n    <large-list :items=\"items\" />\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      count: 0,\n      items: []\n    }\n  },\n  methods: {\n    increment() {\n      this.count++\n    }\n  }\n}\n</script>\n```\n\nVue èƒ½å¤Ÿ**ç²¾ç¡®åœ°çŸ¥é“**å“ªäº›ç»„ä»¶ä¾èµ–äº `count`ï¼Œåªæ›´æ–°å¿…è¦çš„éƒ¨åˆ†ã€‚\n\n#### 6.3.2. å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—\n\n```javascript\n// Vue å†…éƒ¨çš„æ›´æ–°é˜Ÿåˆ—æœºåˆ¶\nlet queue = [];\nlet waiting = false;\n\nfunction queueJob(job) {\n  if (!queue.includes(job)) {\n    queue.push(job);\n    if (!waiting) {\n      waiting = true;\n      Promise.resolve().then(flushJobs);\n    }\n  }\n}\n\nfunction flushJobs() {\n  for (let i = 0; i < queue.length; i++) {\n    queue[i]();\n  }\n  queue = [];\n  waiting = false;\n}\n```\n\nVue é€šè¿‡è¿™ç§æœºåˆ¶æ¥æ‰¹é‡å¤„ç†æ›´æ–°ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ã€‚\n\n#### 6.3.3. ç¼–è¯‘æ—¶ä¼˜åŒ–\n\n```vue\n<template>\n  <div>\n    <p>Static content</p>\n    <p>{{ dynamicContent }}</p>\n  </div>\n</template>\n```\n\nVue çš„æ¨¡æ¿ç¼–è¯‘å™¨å¯ä»¥åœ¨ç¼–è¯‘æ—¶è¯†åˆ«é™æ€å†…å®¹ï¼Œä»è€Œå‡å°‘è¿è¡Œæ—¶çš„å·¥ä½œã€‚\n\n### 6.4. æ€»ç»“æ¯”è¾ƒ\n\nReactï¼ˆä½¿ç”¨ Fiberï¼‰:\n- é€‚åˆå¤§å‹ã€å¤æ‚çš„åº”ç”¨\n- æä¾›æ›´ç»†ç²’åº¦çš„æ§åˆ¶å’Œè°ƒåº¦\n- èƒ½å¤Ÿå¤„ç†é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡è€Œä¸é˜»å¡ UI\nVue:\n- ä¾èµ–è¿½è¸ªç³»ç»Ÿæ›´ç²¾ç¡®\n- é»˜è®¤æƒ…å†µä¸‹æ€§èƒ½å·²ç»å¾ˆå¥½\n- ç¼–è¯‘æ—¶ä¼˜åŒ–å‡å°‘äº†è¿è¡Œæ—¶çš„å·¥ä½œé‡\n\n### 6.5. ç»“è®º\n\nReact éœ€è¦ Fiber æ¶æ„ä¸»è¦æ˜¯å› ä¸ºå®ƒçš„è®¾è®¡ç†å¿µï¼ˆ**æ•´ä½“é‡æ–°æ¸²æŸ“**ï¼‰å¸¦æ¥çš„æŒ‘æˆ˜ã€‚Fiber ä½¿ React èƒ½å¤Ÿæ›´å¥½åœ°æ§åˆ¶æ¸²æŸ“è¿‡ç¨‹ï¼Œæé«˜å¤§å‹åº”ç”¨çš„æ€§èƒ½ã€‚\n\nVue é€šè¿‡å…¶å“åº”å¼ç³»ç»Ÿå’Œç¼–è¯‘æ—¶ä¼˜åŒ–ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å·²ç»èƒ½å¤Ÿæä¾›è‰¯å¥½çš„æ€§èƒ½ï¼Œå› æ­¤ä¸éœ€è¦åƒ Fiber è¿™æ ·å¤æ‚çš„æ¶æ„ã€‚\n\nç„¶è€Œï¼Œè¿™å¹¶ä¸æ„å‘³ç€ Vue å®Œå…¨ä¸éœ€è¦ç±»ä¼¼çš„ä¼˜åŒ–ã€‚äº‹å®ä¸Šï¼ŒVue 3 å¼•å…¥äº† Composition API å’ŒåŸºäº Proxy çš„å“åº”å¼ç³»ç»Ÿï¼Œè¿™äº›ä¹Ÿæ˜¯ä¸ºäº†æé«˜æ€§èƒ½å’Œçµæ´»æ€§ã€‚ä½†æ€»çš„æ¥è¯´ï¼ŒVue çš„è®¾è®¡ä½¿å¾—å®ƒä¸éœ€è¦åƒ Fiber è¿™æ ·å½»åº•çš„æ¶æ„æ”¹å˜ã€‚\n\n## 7. React ä¸­çš„ Portal  çš„ç‚¹å‡»äº‹ä»¶ï¼ŒåŒæ ·å†’æ³¡åˆ°åœ¨äº‹ä»¶å†’æ³¡æ–¹é¢\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-15.png)\n\né¦–å…ˆï¼Œè®©æˆ‘ä»¬æ˜ç¡®ä¸€ä¸‹ä»€ä¹ˆæ˜¯ Portalï¼š\n\n```jsx\nimport ReactDOM from 'react-dom';\n\nfunction Modal({ children }) {\n  return ReactDOM.createPortal(\n    children,\n    document.getElementById('modal-root')\n  );\n}\n```\n\nPortal å…è®¸æˆ‘ä»¬å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°å­˜åœ¨äºçˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹ä¸­ã€‚\n\nç°åœ¨ï¼Œå…³äºä½ çš„é—®é¢˜ï¼š**åœ¨ React ä¸­ï¼Œå³ä½¿å­ç»„ä»¶æ˜¯ä¸€ä¸ª Portalï¼Œå‘ç”Ÿåœ¨å…¶ä¸­çš„ç‚¹å‡»äº‹ä»¶ä»ç„¶èƒ½å¤Ÿå†’æ³¡åˆ°çˆ¶ç»„ä»¶ã€‚**\n\nè¿™çœ‹èµ·æ¥å¯èƒ½æœ‰ç‚¹åç›´è§‰ï¼Œå› ä¸ºåœ¨ DOM ç»“æ„ä¸­ï¼ŒPortal çš„å†…å®¹å®é™…ä¸Šæ˜¯åœ¨çˆ¶ç»„ä»¶ä¹‹å¤–çš„ã€‚ä½†æ˜¯ React ç‰¹æ„è®¾è®¡äº†è¿™ç§è¡Œä¸ºï¼Œä»¥ä¿æŒä¸€è‡´æ€§å’Œæ–¹ä¾¿æ€§ã€‚\n\nè¿™ç§è¡Œä¸ºæœ‰å‡ ä¸ªé‡è¦çš„ç‰¹ç‚¹ï¼š\n\n1. **ä¸€è‡´æ€§**ï¼šæ— è®ºå­ç»„ä»¶æ˜¯å¦é€šè¿‡ Portal æ¸²æŸ“ï¼Œäº‹ä»¶å†’æ³¡çš„è¡Œä¸ºéƒ½æ˜¯ä¸€è‡´çš„ã€‚è¿™ä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´å®¹æ˜“åœ°ç†è§£å’Œé¢„æµ‹äº‹ä»¶çš„æµåŠ¨ã€‚\n2. **çµæ´»æ€§**ï¼šä½ å¯ä»¥åœ¨ Portal å†…éƒ¨å¤„ç†äº‹ä»¶ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥è®©äº‹ä»¶å†’æ³¡åˆ° Portal ä¹‹å¤–çš„çˆ¶ç»„ä»¶ã€‚\n3. **æ§åˆ¶**ï¼šå¦‚æœä½ ä¸æƒ³è®©äº‹ä»¶å†’æ³¡åˆ° Portal å¤–éƒ¨ï¼Œä½ å¯ä»¥åœ¨ Portal å†…éƒ¨çš„äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è°ƒç”¨ `e.stopPropagation()`ã€‚\n4. **æ³¨æ„ DOM ç»“æ„**ï¼šè™½ç„¶åœ¨ React çš„äº‹ä»¶ç³»ç»Ÿä¸­äº‹ä»¶ä¼šå†’æ³¡ï¼Œä½†åœ¨å®é™…çš„ DOM ç»“æ„ä¸­ï¼ŒPortal çš„å†…å®¹æ˜¯åœ¨çˆ¶ç»„ä»¶ä¹‹å¤–çš„ã€‚è¿™æ„å‘³ç€å¦‚æœä½ ä½¿ç”¨åŸç”Ÿ DOM äº‹ä»¶ç›‘å¬å™¨ï¼Œè¡Œä¸ºå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚\n\næ€»ç»“ï¼š\n- åœ¨ React ä¸­ï¼ŒPortal å†…éƒ¨çš„äº‹ä»¶å¯ä»¥å†’æ³¡åˆ° Portal å¤–éƒ¨çš„çˆ¶ç»„ä»¶ã€‚\n- è¿™æ˜¯ React ç‰¹æ„è®¾è®¡çš„è¡Œä¸ºï¼Œä¸ºäº†ä¿æŒä¸€è‡´æ€§å’Œæ–¹ä¾¿æ€§ã€‚\n- ä½ å¯ä»¥ä½¿ç”¨ `e.stopPropagation()` æ¥é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œå¦‚æœéœ€è¦çš„è¯ã€‚\n- è¿™ä¸ªè¡Œä¸ºæ˜¯ React äº‹ä»¶ç³»ç»Ÿçš„ç‰¹æ€§ï¼Œä¸å®é™…çš„ DOM ç»“æ„æ— å…³ã€‚\n\nè¿™ç§è®¾è®¡ä½¿å¾— Portal åœ¨ä¿æŒçµæ´»æ€§çš„åŒæ—¶ï¼Œä¹Ÿèƒ½å¤Ÿä¸ React çš„ç»„ä»¶æ ‘ç»“æ„ä¿æŒä¸€è‡´çš„äº‹ä»¶ä¼ æ’­è¡Œä¸ºã€‚\n\n## 8. React ä¸ºä»€ä¹ˆè¦åºŸå¼ƒ componentwillMountã€componentWillReceivePropsã€componentWillUpdate è¿™ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ï¼Ÿå®ƒä»¬æœ‰å“ªäº›é—®é¢˜å‘¢ï¼Ÿ React åˆæ˜¯å¦‚ä½•è§£å†³çš„å‘¢ï¼Ÿ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-16.png)\n\n## 9. React render æ–¹æ³•çš„åŸç†å’Œè§¦å‘æ—¶æœº\n\n### 9.1. Render æ–¹æ³•çš„åŸºæœ¬åŸç†\n\nReact çš„ render æ–¹æ³•ä¸»è¦è´Ÿè´£å°†ç»„ä»¶è½¬æ¢ä¸ºè™šæ‹Ÿ DOMï¼ˆVirtual DOMï¼‰ï¼š\n\n```jsx hl:3,15\n// ç±»ç»„ä»¶ä¸­çš„ render\nclass MyComponent extends React.Component {\n  render() {\n    return (\n      <div>\n        <h1>{this.props.title}</h1>\n        <p>{this.props.content}</p>\n      </div>\n    );\n  }\n}\n\n// å‡½æ•°ç»„ä»¶\nfunction MyFunctionalComponent(props) {\n  // æ•´ä¸ªå‡½æ•°ä½“ç›¸å½“äº render æ–¹æ³•\n  return (\n    <div>\n      <h1>{props.title}</h1>\n      <p>{props.content}</p>\n    </div>\n  );\n}\n```\n\n### 9.2. Render çš„æ‰§è¡Œè¿‡ç¨‹\n\n```jsx\n// ç®€åŒ–çš„ render è¿‡ç¨‹\nconst render = (Component, props) => {\n  // 1. æ‰§è¡Œ render æ–¹æ³•ï¼Œè·å–è™šæ‹Ÿ DOM\n  const vdom = Component(props);\n  \n  // 2. å¯¹æ¯”è™šæ‹Ÿ DOMï¼ˆDiffingï¼‰\n  const patches = diff(previousVDOM, vdom);\n  \n  // 3. æ›´æ–°çœŸå® DOM\n  patch(realDOM, patches);\n}\n```\n\n### 9.3. Render çš„è§¦å‘æ—¶æœº\n\n#### 9.3.1. é¦–æ¬¡æ¸²æŸ“\n\n```jsx\n// ç»„ä»¶é¦–æ¬¡æŒ‚è½½æ—¶\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n```\n\n#### 9.3.2. Props æ”¹å˜\n\n```jsx\nfunction Parent() {\n  const [count, setCount] = useState(0);\n  \n  return (\n    <Child count={count} /> // props æ”¹å˜ä¼šè§¦å‘ Child é‡æ–°æ¸²æŸ“\n  );\n}\n```\n\n#### 9.3.3. State æ”¹å˜\n\n```jsx\nfunction Counter() {\n  const [count, setCount] = useState(0);\n  \n  return (\n    <div>\n      <p>{count}</p>\n      <button onClick={() => setCount(count + 1)}>\n        Increment\n      </button>\n    </div>\n  );\n}\n```\n\n#### 9.3.4. çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“\n\n```jsx\nfunction Parent() {\n  const [update, setUpdate] = useState(0);\n  \n  return (\n    <div>\n      <Child /> {/* Parent é‡æ–°æ¸²æŸ“ä¼šå¯¼è‡´ Child ä¹Ÿé‡æ–°æ¸²æŸ“ */}\n      <button onClick={() => setUpdate(update + 1)}>\n        Update Parent\n      </button>\n    </div>\n  );\n}\n```\n\n#### 9.3.5. æ€§èƒ½ä¼˜åŒ–æ–¹æ³•\n\n##### 9.3.5.1. React.memo ç”¨äºå‡½æ•°ç»„ä»¶\n```jsx\nconst MemoizedComponent = React.memo(function MyComponent(props) {\n  return (\n    <div>{props.value}</div>\n  );\n});\n```\n\n##### 9.3.5.2. PureComponent ç”¨äºç±»ç»„ä»¶\n\n```jsx\nclass MyPureComponent extends React.PureComponent {\n  render() {\n    return (\n      <div>{this.props.value}</div>\n    );\n  }\n}\n```\n\n##### 9.3.5.3. shouldComponentUpdate ç”¨äºè‡ªå®šä¹‰æ›´æ–°é€»è¾‘\n\n```jsx\nclass MyComponent extends React.Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    return this.props.value !== nextProps.value;\n  }\n  \n  render() {\n    return (\n      <div>{this.props.value}</div>\n    );\n  }\n}\n```\n\n### 9.4. å¸¸è§çš„æ¸²æŸ“ä¼˜åŒ–é—®é¢˜\n\n#### 9.4.1. é¿å…åœ¨æ¸²æŸ“ä¸­åˆ›å»ºæ–°å¯¹è±¡æˆ–å‡½æ•°\n```jsx\n// ä¸å¥½çš„å†™æ³•\nfunction BadComponent() {\n  return (\n    <button onClick={() => console.log('clicked')}>  // æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å‡½æ•°\n      Click me\n    </button>\n  );\n}\n\n// å¥½çš„å†™æ³•\nfunction GoodComponent() {\n  const handleClick = useCallback(() => {\n    console.log('clicked');\n  }, []);\n  \n  return (\n    <button onClick={handleClick}>\n      Click me\n    </button>\n  );\n}\n```\n\n#### 9.4.2. ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ\n```jsx\nfunction ExpensiveComponent({ data }) {\n  const processedData = useMemo(() => {\n    return data.map(item => expensiveCalculation(item));\n  }, [data]);\n  \n  return <div>{processedData}</div>;\n}\n```\n\n### 9.5. æ¸²æŸ“é˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸ\n\nå¯¹äºç±»ç»„ä»¶ï¼Œrender ç›¸å…³çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ‰§è¡Œé¡ºåºï¼š\n```jsx\nclass LifecycleComponent extends React.Component {\n  // 1. åœ¨ render ä¹‹å‰\n  static getDerivedStateFromProps(props, state) {\n    return null;\n  }\n  \n  // 2. åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°\n  shouldComponentUpdate(nextProps, nextState) {\n    return true;\n  }\n  \n  // 3. render æ–¹æ³•\n  render() {\n    return <div>Content</div>;\n  }\n  \n  // 4. render åï¼Œæ›´æ–°å‰\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    return null;\n  }\n  \n  // 5. æ›´æ–°å\n  componentDidUpdate(prevProps, prevState, snapshot) {\n  }\n}\n```\n\n### 9.6. æ€»ç»“\n\n1. Render æ–¹æ³•æ˜¯ React ç»„ä»¶çš„æ ¸å¿ƒï¼Œè´Ÿè´£ç”Ÿæˆè™šæ‹Ÿ DOMã€‚\n2. è§¦å‘æ—¶æœºåŒ…æ‹¬ï¼šé¦–æ¬¡æ¸²æŸ“ã€props å˜åŒ–ã€state å˜åŒ–ã€çˆ¶ç»„ä»¶é‡æ¸²æŸ“ã€‚\n3. React æä¾›äº†å¤šç§ä¼˜åŒ–æ–¹æ³•æ¥é¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚\n4. åˆç†ä½¿ç”¨è¿™äº›ä¼˜åŒ–æ–¹æ³•å¯ä»¥æ˜¾è‘—æå‡åº”ç”¨æ€§èƒ½ã€‚\n5. ç†è§£æ¸²æŸ“åŸç†å’Œè§¦å‘æ—¶æœºå¯¹äºç¼–å†™é«˜æ€§èƒ½çš„ React åº”ç”¨è‡³å…³é‡è¦ã€‚\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-18.png)\n\n## 10. è¯¦ç»†è§£é‡Š RESTful æ¥å£è§„èŒƒ\n\nRESTfulï¼ˆRepresentational State Transferï¼‰æ˜¯ä¸€ç§è®¾è®¡ Web æœåŠ¡çš„æ¶æ„é£æ ¼ï¼Œå®ƒæä¾›äº†ä¸€å¥—è§„åˆ™æ¥åˆ›å»ºå¯æ‰©å±•çš„ Web APIã€‚ä»¥ä¸‹æ˜¯ RESTful æ¥å£è§„èŒƒçš„ä¸»è¦æ–¹é¢ï¼š\n\n### 10.1. èµ„æºï¼ˆResourcesï¼‰\n\nRESTful API çš„æ ¸å¿ƒæ¦‚å¿µæ˜¯**èµ„æº**ã€‚æ¯ä¸ªèµ„æºéƒ½åº”è¯¥æœ‰ä¸€ä¸ªå”¯ä¸€çš„ URIï¼ˆç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰ã€‚\n\n**ç³»ç»Ÿä¸­æ‰€æœ‰äº‹åŠ¡éƒ½æ˜¯èµ„æº**\n\nä¾‹å¦‚ï¼š\n```\n/users         // ç”¨æˆ·é›†åˆ\n/users/123     // ç‰¹å®šç”¨æˆ·\n/articles      // æ–‡ç« é›†åˆ\n/articles/456  // ç‰¹å®šæ–‡ç« \n```\n\n### 10.2. HTTP æ–¹æ³•ï¼ˆHTTP Methodsï¼‰\n\nä½¿ç”¨æ ‡å‡†çš„ HTTP æ–¹æ³•æ¥å¯¹èµ„æºè¿›è¡Œæ“ä½œï¼š\n\n- GETï¼šè·å–èµ„æº\n- POSTï¼šåˆ›å»ºæ–°èµ„æº\n- PUTï¼šæ›´æ–°èµ„æºï¼ˆå…¨é‡æ›´æ–°ï¼‰\n- PATCHï¼šéƒ¨åˆ†æ›´æ–°èµ„æº\n- DELETEï¼šåˆ é™¤èµ„æº\n\nä¾‹å¦‚ï¼š\n\n```\nGET /users         // è·å–æ‰€æœ‰ç”¨æˆ·\nPOST /users        // åˆ›å»ºæ–°ç”¨æˆ·\nGET /users/123     // è·å–ç‰¹å®šç”¨æˆ·\nPUT /users/123     // æ›´æ–°ç‰¹å®šç”¨æˆ·\nDELETE /users/123  // åˆ é™¤ç‰¹å®šç”¨æˆ·\n```\n\n### 10.3. æ— çŠ¶æ€ï¼ˆStatelessï¼‰\n\næ¯ä¸ªè¯·æ±‚åº”è¯¥åŒ…å«æ‰€æœ‰å¿…è¦çš„ä¿¡æ¯ï¼ŒæœåŠ¡å™¨ä¸åº”è¯¥åœ¨ä¸åŒè¯·æ±‚ä¹‹é—´ä¿å­˜å®¢æˆ·ç«¯çŠ¶æ€ã€‚\n\n### 10.4. ç»Ÿä¸€æ¥å£ï¼ˆUniform Interfaceï¼‰\n\nAPI åº”è¯¥æœ‰ä¸€ä¸ªä¸€è‡´çš„æ¥å£ï¼Œè¿™åŒ…æ‹¬ï¼š\n\n- èµ„æºæ ‡è¯†\n- é€šè¿‡è¡¨è¿°æ¥æ“ä½œèµ„æº\n- è‡ªæè¿°æ¶ˆæ¯\n- è¶…åª’ä½“ä½œä¸ºåº”ç”¨çŠ¶æ€å¼•æ“ï¼ˆHATEOASï¼‰\n\n### 10.5. å“åº”çŠ¶æ€ç ï¼ˆResponse Status Codesï¼‰\n\nä½¿ç”¨é€‚å½“çš„ HTTP çŠ¶æ€ç æ¥è¡¨ç¤ºè¯·æ±‚çš„ç»“æœï¼š\n\n```\n200 OK              // æˆåŠŸ\n201 Created         // åˆ›å»ºæˆåŠŸ\n204 No Content      // æˆåŠŸä½†æ— è¿”å›å†…å®¹\n400 Bad Request     // å®¢æˆ·ç«¯é”™è¯¯\n401 Unauthorized    // æœªæˆæƒ\n403 Forbidden       // ç¦æ­¢è®¿é—®\n404 Not Found       // èµ„æºä¸å­˜åœ¨\n500 Internal Server Error  // æœåŠ¡å™¨é”™è¯¯\n```\n\n### 10.6. æ•°æ®æ ¼å¼ï¼ˆData Formatsï¼‰\n\né€šå¸¸ä½¿ç”¨ JSON ä½œä¸ºæ•°æ®äº¤æ¢æ ¼å¼ï¼Œä½†ä¹Ÿå¯ä»¥æ”¯æŒå…¶ä»–æ ¼å¼å¦‚ XMLã€‚\n\n```json\n{\n  \"id\": 123,\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\"\n}\n```\n\n### 10.7. ç‰ˆæœ¬æ§åˆ¶ï¼ˆVersioningï¼‰\n\nåœ¨ URI ä¸­åŒ…å« API ç‰ˆæœ¬ï¼š\n\n```\n/api/v1/users\n/api/v2/users\n```\n\n### 10.8. è¿‡æ»¤ã€æ’åºå’Œåˆ†é¡µï¼ˆFiltering, Sorting, and Paginationï¼‰\n\nä½¿ç”¨æŸ¥è¯¢å‚æ•°æ¥å®ç°ï¼š\n\n```\n/users?role=admin          // è¿‡æ»¤\n/users?sort=name_asc       // æ’åº\n/users?page=2&limit=20     // åˆ†é¡µ\n```\n\n### 10.9. é”™è¯¯å¤„ç†ï¼ˆError Handlingï¼‰\n\næä¾›æ¸…æ™°å’Œä¸€è‡´çš„é”™è¯¯æ¶ˆæ¯ï¼š\n\n```json\n{\n  \"error\": {\n    \"code\": 404,\n    \"message\": \"User not found\"\n  }\n}\n```\n\n### 10.10. å®‰å…¨æ€§ï¼ˆSecurityï¼‰\n\nä½¿ç”¨ HTTPS æ¥åŠ å¯†æ‰€æœ‰é€šä¿¡ã€‚å¯¹äºéœ€è¦è®¤è¯çš„ç«¯ç‚¹ï¼Œä½¿ç”¨ token æˆ– OAuth ç­‰æœºåˆ¶ã€‚\n\n### 10.11. æ–‡æ¡£ï¼ˆDocumentationï¼‰\n\næä¾›å®Œæ•´å’Œæ¸…æ™°çš„ API æ–‡æ¡£ï¼ŒåŒ…æ‹¬æ¯ä¸ªç«¯ç‚¹çš„æè¿°ã€å‚æ•°ã€å“åº”æ ¼å¼ç­‰ã€‚\n\n### 10.12. å®é™…åº”ç”¨ç¤ºä¾‹\n\nå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåšå®¢ APIï¼Œä¸‹é¢æ˜¯ä¸€äº›ç¬¦åˆ RESTful è§„èŒƒçš„ç«¯ç‚¹è®¾è®¡ï¼š\n\n```\nGET /api/v1/posts           // è·å–æ‰€æœ‰æ–‡ç« \nGET /api/v1/posts?author=john&sort=date_desc  // è·å– John çš„æ–‡ç« ï¼ŒæŒ‰æ—¥æœŸé™åºæ’åˆ—\nPOST /api/v1/posts          // åˆ›å»ºæ–°æ–‡ç« \nGET /api/v1/posts/789       // è·å–ç‰¹å®šæ–‡ç« \nPUT /api/v1/posts/789       // æ›´æ–°ç‰¹å®šæ–‡ç« \nDELETE /api/v1/posts/789    // åˆ é™¤ç‰¹å®šæ–‡ç« \nGET /api/v1/posts/789/comments  // è·å–ç‰¹å®šæ–‡ç« çš„è¯„è®º\nPOST /api/v1/posts/789/comments // ä¸ºç‰¹å®šæ–‡ç« æ·»åŠ è¯„è®º\n```\n\néµå¾ªè¿™äº› RESTful æ¥å£è§„èŒƒå¯ä»¥ä½¿ä½ çš„ API æ›´åŠ ä¸€è‡´ã€å¯é¢„æµ‹å’Œæ˜“äºä½¿ç”¨ï¼Œä»è€Œæé«˜å¼€å‘æ•ˆç‡å’Œç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚\n\n## 11. å®ç°ä¸€ä¸ªå‹ç¼©ç®—æ³•ï¼Œæ¯”å¦‚ aabcccccaaaä¼šå˜ä¸ºa2b1c5a3\n\n### 11.1. æ–¹æ³•ä¸€ï¼šåˆ†å‰²æˆæ•°ç»„éå†\n\n### 11.2. æ–¹æ³•äºŒï¼šç›´æ¥éå†å­—ç¬¦ä¸²\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-19.png)\n\n## 12. new æ“ä½œå…·ä½“å¹²äº†ä»€ä¹ˆ\n\nå¦‚ä¸‹å›¾ï¼šå‘ç”Ÿäº† 4 ä»¶äº‹æƒ…\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-20.png)\n\n## 13. Webpack 5 çš„ä¸»è¦æ›´æ–°å’Œæ–°ç‰¹æ€§\n\n### 13.1. æŒä¹…åŒ–ç¼“å­˜ï¼ˆPersistent Cachingï¼‰\n\nWebpack 5 å¼•å…¥äº†æ›´å¥½çš„**æŒä¹…åŒ–ç¼“å­˜æœºåˆ¶**ï¼Œå¯ä»¥æ˜¾è‘—æå‡æ„å»ºæ€§èƒ½ï¼š\n\n```javascript hl:4\n// webpack.config.js\nmodule.exports = {\n  cache: {\n    type: 'filesystem', // ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿç¼“å­˜\n    buildDependencies: {\n      config: [__filename] // æ„å»ºä¾èµ–\n    },\n    name: 'my-cache' // ç¼“å­˜åç§°\n  }\n}\n```\n\n### 13.2. èµ„æºæ¨¡å—ï¼ˆAsset Modulesï¼‰\n\nå–ä»£äº† file-loaderã€url-loader å’Œ raw-loaderï¼Œç›´æ¥å†…ç½®æ”¯æŒèµ„æºæ–‡ä»¶ï¼š\n\n```javascript hl:7\n// webpack.config.js\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.(png|jpg|gif)$/i,\n        type: 'asset', // å¯é€‰ 'asset/resource'ã€'asset/inline'ã€'asset/source'\n        parser: {\n          dataUrlCondition: {\n            maxSize: 8 * 1024 // 8kb\n          }\n        }\n      }\n    ]\n  }\n}\n```\n\n### 13.3. æ¨¡å—è”é‚¦ï¼ˆModule Federationï¼‰ \n\nå…è®¸å¤šä¸ªç‹¬ç«‹çš„æ„å»ºå¯ä»¥ç»„æˆä¸€ä¸ªåº”ç”¨ç¨‹åºï¼š\n\n```javascript\n// host/webpack.config.js\nconst ModuleFederationPlugin = require('webpack/lib/container/ModuleFederationPlugin');\n\nmodule.exports = {\n  plugins: [\n    new ModuleFederationPlugin({\n      name: 'host',\n      remotes: {\n        app1: 'app1@http://localhost:3001/remoteEntry.js'\n      }\n    })\n  ]\n}\n\n// remote/webpack.config.js\nmodule.exports = {\n  plugins: [\n    new ModuleFederationPlugin({\n      name: 'app1',\n      filename: 'remoteEntry.js',\n      exposes: {\n        './Button': './src/Button'\n      }\n    })\n  ]\n}\n```\n\n#### 13.3.1. Tree Shaking ä¼˜åŒ–\n\næ”¹è¿›äº† Tree Shaking æœºåˆ¶ï¼Œæ”¯æŒæ›´å¤šåœºæ™¯ï¼š\n\n```javascript\n// package.json\n{\n  \"sideEffects\": [\n    \"*.css\",\n    \"*.scss\"\n  ]\n}\n\n// webpack.config.js\nmodule.exports = {\n  optimization: {\n    usedExports: true,\n    minimize: true\n  }\n}\n```\n\n### 13.4. æ›´å¥½çš„ä»£ç ç”Ÿæˆ\n\næ”¯æŒ ECMAScript æ¨¡å—çš„è¾“å‡ºï¼š\n\n```javascript hl:6,7\nmodule.exports = {\n  experiments: {\n    outputModule: true\n  },\n  output: {\n    library: {\n      type: 'module'\n    }\n  }\n}\n```\n\n### 13.5. Node.js Polyfills è‡ªåŠ¨åŠ è½½è¢«ç§»é™¤\n\nä¸å†è‡ªåŠ¨å¼•å…¥ Node.js polyfillsï¼š\n\n```javascript\n// webpack.config.js\nmodule.exports = {\n  resolve: {\n    fallback: {\n      \"http\": require.resolve(\"stream-http\"),\n      \"https\": require.resolve(\"https-browserify\"),\n      \"stream\": require.resolve(\"stream-browserify\")\n    }\n  }\n}\n```\n\n### 13.6. é¡¶å±‚ await æ”¯æŒ\n\næ”¯æŒåœ¨å¼‚æ­¥æ¨¡å—ä¸­ä½¿ç”¨é¡¶å±‚ awaitï¼š\n\n```javascript\n// æ”¯æŒç›´æ¥åœ¨æ¨¡å—é¡¶å±‚ä½¿ç”¨ await\nconst data = await fetch('https://api.example.com/data');\nexport { data };\n```\n\n### 13.7. æ”¹è¿›çš„å¼€å‘ä½“éªŒ\n\næ›´å¥½çš„é”™è¯¯æç¤ºå’Œå¼€å‘å·¥å…·æ”¯æŒï¼š\n\n```javascript\nmodule.exports = {\n  stats: {\n    errorDetails: true\n  }\n}\n```\n\n### 13.8. æ–°çš„ WebAssembly æ”¯æŒ\n\næ”¹è¿›äº†å¯¹ WebAssembly çš„æ”¯æŒï¼š\n\n```javascript\nmodule.exports = {\n  experiments: {\n    asyncWebAssembly: true,\n    syncWebAssembly: true\n  }\n}\n```\n\n### 13.9. æ”¹è¿›çš„é•¿æœŸç¼“å­˜\n\né€šè¿‡ç¡®å®šæ€§çš„æ¨¡å— ID å’Œ chunk ID ç”Ÿæˆç®—æ³•ï¼š\n\n```javascript\nmodule.exports = {\n  optimization: {\n    moduleIds: 'deterministic',\n    chunkIds: 'deterministic'\n  }\n}\n```\n\n### 13.10. æ›´æ–°çš„é…ç½®éªŒè¯\n\næ›´ä¸¥æ ¼çš„é…ç½®éªŒè¯ï¼š\n\n```javascript\nmodule.exports = {\n  mode: 'production', // å¿…é¡»æŒ‡å®š mode\n  entry: './src/index.js',\n  output: {\n    clean: true // æ„å»ºå‰æ¸…ç†è¾“å‡ºç›®å½•çš„æ–°é€‰é¡¹\n  }\n}\n```\n\n### 13.11. æ”¹è¿›çš„æ‰“åŒ…ä½“ç§¯\n\nä¼˜åŒ–äº†æ‰“åŒ…ä½“ç§¯ï¼Œç§»é™¤äº†ä¸€äº›å†…éƒ¨ç»“æ„ï¼š\n\n```javascript\nmodule.exports = {\n  optimization: {\n    minimize: true,\n    splitChunks: {\n      chunks: 'all',\n      minSize: 20000\n    }\n  }\n}\n```\n\n### 13.12. ä¸»è¦ä¼˜åŠ¿æ€»ç»“\n\n1. æ€§èƒ½æå‡ï¼š\n   - æŒä¹…åŒ–ç¼“å­˜æå‡æ„å»ºé€Ÿåº¦\n   - æ”¹è¿›çš„ Tree Shaking\n   - æ›´ä¼˜çš„é•¿æœŸç¼“å­˜ç­–ç•¥\n\n2. å¼€å‘ä½“éªŒï¼š\n   - å†…ç½®èµ„æºæ¨¡å—å¤„ç†\n   - æ›´å¥½çš„é”™è¯¯æç¤º\n   - æ›´ä¸¥æ ¼çš„é…ç½®éªŒè¯\n\n3. æ–°åŠŸèƒ½ï¼š\n   - æ¨¡å—è”é‚¦æ”¯æŒå¾®å‰ç«¯æ¶æ„\n   - åŸç”Ÿæ”¯æŒ WebAssembly\n   - æ”¯æŒé¡¶å±‚ await\n\n4. åŒ…ä½“ç§¯ä¼˜åŒ–ï¼š\n   - ç§»é™¤è‡ªåŠ¨çš„ Node.js polyfills\n   - ä¼˜åŒ–å†…éƒ¨ç»“æ„\n   - æ›´å¥½çš„ä»£ç ç”Ÿæˆ\n\n## 14. try-catchä¸èƒ½æ•è·å¼‚æ­¥é”™è¯¯\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-22.png)\n\n## 15. å¦‚ä½•å®ç° Tab ä¹‹é—´é€šè®¯ï¼Œä¸èƒ½ websocket\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-23.png)\n\n## 16. e.target å’Œ e.currentTarget çš„åŒºåˆ«ï¼Ÿ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-24.png)\n\n## 17. å¦‚ä½•ç¡®ä¿ä½ çš„æ„é€ å‡½æ•°åªèƒ½è¢« `new` è°ƒç”¨\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-25.png)\n\n## 18. Reactçš„åˆæˆäº‹ä»¶(Synthetic Event)å’ŒåŸç”Ÿäº‹ä»¶(Native Event)çš„æ‰§è¡Œé¡ºåº\n\n### 18.1. äº‹ä»¶æ‰§è¡Œé¡ºåº\n\n```javascript\nfunction App() {\n  const divRef = useRef(null);\n\n  useEffect(() => {\n    const div = divRef.current;\n    \n    // æ·»åŠ åŸç”Ÿäº‹ä»¶ç›‘å¬å™¨\n    div.addEventListener('click', () => {\n      console.log('åŸç”Ÿäº‹ä»¶ï¼šå†’æ³¡é˜¶æ®µ');\n    });\n\n    div.addEventListener('click', () => {\n      console.log('åŸç”Ÿäº‹ä»¶ï¼šæ•è·é˜¶æ®µ');\n    }, true);  // trueè¡¨ç¤ºæ•è·é˜¶æ®µ\n\n    return () => {\n      // æ¸…ç†äº‹ä»¶ç›‘å¬\n      div.removeEventListener('click');\n    };\n  }, []);\n\n  return (\n    <div \n      ref={divRef}\n      onClick={() => console.log('Reactäº‹ä»¶ï¼šå†’æ³¡é˜¶æ®µ')}\n      onClickCapture={() => console.log('Reactäº‹ä»¶ï¼šæ•è·é˜¶æ®µ')}\n    >\n      ç‚¹å‡»æˆ‘\n    </div>\n  );\n}\n```\n\nå½“ç‚¹å‡»divæ—¶ï¼Œäº‹ä»¶æ‰§è¡Œé¡ºåºä¸ºï¼š\n\n1. åŸç”Ÿäº‹ä»¶ï¼ˆæ•è·é˜¶æ®µï¼‰\n2. Reactäº‹ä»¶ï¼ˆæ•è·é˜¶æ®µï¼‰\n3. Reactäº‹ä»¶ï¼ˆå†’æ³¡é˜¶æ®µï¼‰\n4. åŸç”Ÿäº‹ä»¶ï¼ˆå†’æ³¡é˜¶æ®µï¼‰\n\n### 18.2. æ›´å¤æ‚çš„åµŒå¥—ç»“æ„æ¥å±•ç¤ºäº‹ä»¶ä¼ æ’­\n\n```javascript\nfunction Parent() {\n  useEffect(() => {\n    document.addEventListener('click', () => {\n      console.log('document åŸç”Ÿäº‹ä»¶ï¼šæ•è·é˜¶æ®µ');\n    }, true);\n\n    document.addEventListener('click', () => {\n      console.log('document åŸç”Ÿäº‹ä»¶ï¼šå†’æ³¡é˜¶æ®µ');\n    });\n  }, []);\n\n  return (\n    <div \n      onClick={() => console.log('çˆ¶å…ƒç´  Reactäº‹ä»¶ï¼šå†’æ³¡')}\n      onClickCapture={() => console.log('çˆ¶å…ƒç´  Reactäº‹ä»¶ï¼šæ•è·')}\n    >\n      <Child />\n    </div>\n  );\n}\n\nfunction Child() {\n  const childRef = useRef(null);\n\n  useEffect(() => {\n    const child = childRef.current;\n    child.addEventListener('click', () => {\n      console.log('å­å…ƒç´  åŸç”Ÿäº‹ä»¶ï¼šå†’æ³¡é˜¶æ®µ');\n    });\n\n    child.addEventListener('click', () => {\n      console.log('å­å…ƒç´  åŸç”Ÿäº‹ä»¶ï¼šæ•è·é˜¶æ®µ');\n    }, true);\n  }, []);\n\n  return (\n    <button \n      ref={childRef}\n      onClick={() => console.log('å­å…ƒç´  Reactäº‹ä»¶ï¼šå†’æ³¡')}\n      onClickCapture={() => console.log('å­å…ƒç´  Reactäº‹ä»¶ï¼šæ•è·')}\n    >\n      ç‚¹å‡»æˆ‘\n    </button>\n  );\n}\n```\n\nç‚¹å‡»æŒ‰é’®æ—¶çš„æ‰§è¡Œé¡ºåºï¼š\n\n```\n1. document åŸç”Ÿäº‹ä»¶ï¼šæ•è·é˜¶æ®µ\n2. å­å…ƒç´  åŸç”Ÿäº‹ä»¶ï¼šæ•è·é˜¶æ®µ\n3. çˆ¶å…ƒç´  Reactäº‹ä»¶ï¼šæ•è·\n4. å­å…ƒç´  Reactäº‹ä»¶ï¼šæ•è·\n5. å­å…ƒç´  Reactäº‹ä»¶ï¼šå†’æ³¡\n6. çˆ¶å…ƒç´  Reactäº‹ä»¶ï¼šå†’æ³¡\n7. å­å…ƒç´  åŸç”Ÿäº‹ä»¶ï¼šå†’æ³¡é˜¶æ®µ\n8. document åŸç”Ÿäº‹ä»¶ï¼šå†’æ³¡é˜¶æ®µ\n```\n\n### 18.3. ä¸»è¦åŒºåˆ«\n\n#### 18.3.1. äº‹ä»¶å§”æ‰˜æœºåˆ¶\n\n- Reactäº‹ä»¶æ˜¯å§”æ‰˜åˆ°rootèŠ‚ç‚¹ç»Ÿä¸€ç®¡ç†\n- åŸç”Ÿäº‹ä»¶æ˜¯ç›´æ¥ç»‘å®šåˆ°DOMå…ƒç´ ä¸Š\n\n#### 18.3.2. äº‹ä»¶å¯¹è±¡\n\n```javascript hl:4,3,6\nfunction HandleEvent({ onClick }) {\n  const handleClick = (e) => {\n    console.log('Reactåˆæˆäº‹ä»¶å¯¹è±¡ï¼š', e); // SyntheticEvent\n    console.log('åŸç”Ÿäº‹ä»¶å¯¹è±¡ï¼š', e.nativeEvent); // åŸç”ŸEvent\n    \n    // React 17ä¹‹åï¼Œe.persist()ä¸å†éœ€è¦\n    // äº‹ä»¶å¯¹è±¡å¯ä»¥è¢«å¼‚æ­¥è®¿é—®\n    setTimeout(() => {\n      console.log('å¼‚æ­¥è®¿é—®äº‹ä»¶å¯¹è±¡ï¼š', e);\n    }, 0);\n    \n  };\n\n  return <button onClick={handleClick}>ç‚¹å‡»</button>;\n}\n```\n\n### 18.4. é˜»æ­¢äº‹ä»¶ä¼ æ’­\n\n```javascript hl:7,8\nfunction StopPropagation() {\n  const handleParentClick = (e) => {\n    console.log('çˆ¶å…ƒç´ è¢«ç‚¹å‡»');\n  };\n\n  const handleChildClick = (e) => {\n    e.stopPropagation(); // é˜»æ­¢Reactäº‹ä»¶ä¼ æ’­\n    e.nativeEvent.stopImmediatePropagation(); // é˜»æ­¢åŸç”Ÿäº‹ä»¶ä¼ æ’­\n    console.log('å­å…ƒç´ è¢«ç‚¹å‡»');\n  };\n\n  return (\n    <div onClick={handleParentClick}>\n      <button onClick={handleChildClick}>ç‚¹å‡»æˆ‘</button>\n    </div>\n  );\n}\n```\n\n### 18.5. å®é™…åº”ç”¨åœºæ™¯\n\n```javascript hl:3,4\nfunction Modal({ onClose }) {\n  const handleBackdropClick = (e) => {\n    // ç¡®ä¿åªæœ‰ç‚¹å‡»èƒŒæ™¯æ—¶æ‰å…³é—­\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  const handleContentClick = (e) => {\n    // é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œé¿å…è§¦å‘èƒŒæ™¯ç‚¹å‡»\n    e.stopPropagation();\n  };\n\n  return (\n    <div className=\"backdrop\" onClick={handleBackdropClick}>\n      <div className=\"modal-content\" onClick={handleContentClick}>\n        æ¨¡æ€æ¡†å†…å®¹\n      </div>\n    </div>\n  );\n}\n```\n\n### 18.6. æ³¨æ„äº‹é¡¹\n\n#### 18.6.1. åœ¨ä½¿ç”¨åŸç”Ÿäº‹ä»¶æ—¶ï¼Œè®°å¾—åœ¨ç»„ä»¶å¸è½½æ—¶æ¸…ç†\n\n```javascript\nuseEffect(() => {\n  const handler = () => console.log('åŸç”Ÿäº‹ä»¶');\n  element.addEventListener('click', handler);\n  return () => element.removeEventListener('click', handler);\n}, []);\n```\n\n### 18.7. React 17 å‰åçš„äº‹ä»¶å§”æ‰˜å˜åŒ–\n\n- äº‹ä»¶ä¸å†ç»‘å®šåˆ° `document`ï¼Œè€Œæ˜¯ç»‘å®šåˆ°`rootèŠ‚ç‚¹`\n- è¿™ä½¿å¾—å¤šä¸ª React ç‰ˆæœ¬å…±å­˜æˆä¸ºå¯èƒ½\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-26.png)\n\n### 18.8. æ€§èƒ½è€ƒè™‘\n\n- ä¼˜å…ˆä½¿ç”¨Reactçš„åˆæˆäº‹ä»¶ç³»ç»Ÿ\n- åªåœ¨ç‰¹æ®Šæƒ…å†µä¸‹ä½¿ç”¨åŸç”Ÿäº‹ä»¶ï¼ˆå¦‚éœ€è¦æ•è·ç‰¹å®šçš„é”®ç›˜äº‹ä»¶ï¼‰\n\n## 19. Vue3 çš„é¡µé¢æ¸²æŸ“æµç¨‹\n\n### 19.1. åˆå§‹åŒ–é˜¶æ®µ\n\n```javascript\n// åˆ›å»ºåº”ç”¨å®ä¾‹\nconst app = createApp({\n  setup() {\n    const count = ref(0)\n    return { count }\n  },\n  template: '<div>{{ count }}</div>'\n})\n\n// æŒ‚è½½åº”ç”¨\napp.mount('#app')\n```\n\næ¸²æŸ“æµç¨‹ï¼š\n\n#### 19.1.1. åˆ›å»ºåº”ç”¨å®ä¾‹\n```javascript\n// ç®€åŒ–çš„createAppå®ç°\nfunction createApp(rootComponent) {\n  const app = {\n    mount(selector) {\n      // åˆ›å»ºæ ¹ç»„ä»¶çš„ vnode\n      const vnode = createVNode(rootComponent)\n      \n      // è·å–å®¹å™¨å…ƒç´ \n      const container = document.querySelector(selector)\n      \n      // æ¸²æŸ“vnode\n      render(vnode, container)\n    }\n  }\n  return app\n}\n```\n\n#### 19.1.2. ç¼–è¯‘æ¨¡æ¿\n\n```javascript\n// template ä¼šè¢«ç¼–è¯‘æˆ render å‡½æ•°\nfunction render() {\n  return createVNode('div', null, [ctx.count])\n}\n```\n\n#### 19.1.3. åˆ›å»ºè™šæ‹ŸDOM\n\n```javascript\nfunction createVNode(type, props, children) {\n  return {\n    type,\n    props,\n    children,\n    el: null,\n    shapeFlag: getShapeFlag(type)\n  }\n}\n```\n\n### 19.2. å“åº”å¼ç³»ç»Ÿåˆå§‹åŒ–\n\n```javascript\n// åˆ›å»ºå“åº”å¼å¯¹è±¡\nconst state = reactive({\n  count: 0\n})\n\n// åˆ›å»ºè®¡ç®—å±æ€§\nconst double = computed(() => state.count * 2)\n\n// åˆ›å»ºå‰¯ä½œç”¨\nwatchEffect(() => {\n  console.log('count changed:', state.count)\n})\n```\n\n### 19.3. æŒ‚è½½è¿‡ç¨‹\n\n```javascript\nfunction mount(vnode, container) {\n  // åˆ›å»ºDOMå…ƒç´ \n  const el = document.createElement(vnode.type)\n  \n  // å¤„ç†props\n  if (vnode.props) {\n    for (const key in vnode.props) {\n      patchProp(el, key, null, vnode.props[key])\n    }\n  }\n  \n  // å¤„ç†children\n  if (vnode.children) {\n    mountChildren(vnode.children, el)\n  }\n  \n  // æ’å…¥åˆ°å®¹å™¨\n  container.appendChild(el)\n  \n  // ä¿å­˜çœŸå®DOMå¼•ç”¨\n  vnode.el = el\n}\n```\n\n### 19.4. æ›´æ–°æµç¨‹\n\n```javascript\nfunction patch(n1, n2, container) {\n  if (n1 && !isSameVNodeType(n1, n2)) {\n    unmount(n1)\n    n1 = null\n  }\n  \n  const { type } = n2\n  \n  if (typeof type === 'string') {\n    // å¤„ç†æ™®é€šå…ƒç´ \n    processElement(n1, n2, container)\n  } else if (typeof type === 'object') {\n    // å¤„ç†ç»„ä»¶\n    processComponent(n1, n2, container)\n  }\n}\n```\n\n### 19.5. diff ç®—æ³•\n\n```javascript\nfunction patchChildren(n1, n2, container) {\n  const c1 = n1.children\n  const c2 = n2.children\n  \n  // æ–°æ—§å­èŠ‚ç‚¹çš„å¤„ç†\n  if (typeof c2 === 'string') {\n    // æ–‡æœ¬èŠ‚ç‚¹çš„å¤„ç†\n    if (Array.isArray(c1)) {\n      unmountChildren(c1)\n    }\n    if (c1 !== c2) {\n      container.textContent = c2\n    }\n  } else if (Array.isArray(c2)) {\n    // æ•°ç»„èŠ‚ç‚¹çš„å¤„ç†\n    if (Array.isArray(c1)) {\n      // åŒç«¯diffç®—æ³•\n      patchKeyedChildren(c1, c2, container)\n    } else {\n      container.textContent = ''\n      mountChildren(c2, container)\n    }\n  }\n}\n```\n\n### 19.6. å®Œæ•´çš„æ¸²æŸ“ç¤ºä¾‹\n\n```javascript\n// ç»„ä»¶å®šä¹‰\nconst MyComponent = {\n  setup() {\n    const count = ref(0)\n    \n    const increment = () => {\n      count.value++\n    }\n    \n    // ç›‘å¬å˜åŒ–\n    watch(count, (newVal, oldVal) => {\n      console.log(`Count changed from ${oldVal} to ${newVal}`)\n    })\n    \n    return {\n      count,\n      increment\n    }\n  },\n  \n  template: `\n    <div>\n      <p>Count: {{ count }}</p>\n      <button @click=\"increment\">Increment</button>\n    </div>\n  `\n}\n\n// åˆ›å»ºåº”ç”¨å¹¶æŒ‚è½½\nconst app = createApp(MyComponent)\napp.mount('#app')\n```\n\n### 19.7. ç”Ÿå‘½å‘¨æœŸé’©å­çš„æ‰§è¡Œé¡ºåº\n\n```javascript\nconst MyComponent = {\n  setup() {\n    onBeforeMount(() => {\n      console.log('Before Mount')\n    })\n    \n    onMounted(() => {\n      console.log('Mounted')\n    })\n    \n    onBeforeUpdate(() => {\n      console.log('Before Update')\n    })\n    \n    onUpdated(() => {\n      console.log('Updated')\n    })\n    \n    return {}\n  }\n}\n```\n\n### 19.8. å¼‚æ­¥ç»„ä»¶çš„æ¸²æŸ“\n\n```javascript\nconst AsyncComponent = defineAsyncComponent({\n  loader: () => import('./components/MyComponent.vue'),\n  loadingComponent: LoadingComponent,\n  errorComponent: ErrorComponent,\n  delay: 200,\n  timeout: 3000\n})\n```\n\n### 19.9. æ€§èƒ½ä¼˜åŒ–ç›¸å…³\n\n```javascript hl:1,8,13\n// 1. ä½¿ç”¨v-memoä¼˜åŒ–åˆ—è¡¨æ¸²æŸ“\n<template>\n  <div v-for=\"item in list\" :key=\"item.id\" v-memo=\"[item.id, item.name]\">\n    {{ item.name }}\n  </div>\n</template>\n\n// 2. ä½¿ç”¨shallowRef/shallowReactiveä¼˜åŒ–å¤§æ•°æ®\nconst state = shallowRef({\n  deepNestedData: {...}\n})\n\n// 3. ä½¿ç”¨v-onceä¼˜åŒ–é™æ€å†…å®¹\n<template>\n  <div v-once>\n    {{ staticContent }}\n  </div>\n</template>\n```\n\n### 19.10. é”™è¯¯å¤„ç†\n\n```javascript\napp.config.errorHandler = (err, vm, info) => {\n  // å¤„ç†æ¸²æŸ“è¿‡ç¨‹ä¸­çš„é”™è¯¯\n  console.error('Render Error:', err)\n  console.log('Error Component:', vm)\n  console.log('Error Info:', info)\n}\n```\n\n### 19.11. æ•´ä¸ªæ¸²æŸ“æµç¨‹å¯ä»¥æ€»ç»“ä¸º\n\n1. åˆå§‹åŒ–\n   - åˆ›å»ºåº”ç”¨å®ä¾‹\n   - åˆå§‹åŒ–å“åº”å¼ç³»ç»Ÿ\n   - ç¼–è¯‘æ¨¡æ¿\n2. æŒ‚è½½\n   - åˆ›å»ºè™šæ‹ŸDOM\n   - æ¸²æŸ“çœŸå®DOM\n   - å»ºç«‹å“åº”å¼è”ç³»\n3. æ›´æ–°\n   - è§¦å‘å“åº”å¼æ›´æ–°\n   - diffç®—æ³•æ¯”è¾ƒ\n   - æœ€å°åŒ–DOMæ“ä½œ\n4. å¸è½½\n   - æ¸…ç†å‰¯ä½œç”¨\n   - ç§»é™¤äº‹ä»¶ç›‘å¬\n   - åˆ é™¤DOMèŠ‚ç‚¹\n\n## 20. js çš„ `==` æœºåˆ¶\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-27.png)\n\n> å®é™…å·¥ç¨‹ä¸­è¿˜æ˜¯ä½¿ç”¨ `===` å§\n\n\n","ed099bc330f85df09ebd371286fb3354":"\n# é¢è¯•é¢˜\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. éå†æ•°ç»„çš„å¿«æ…¢æ¯”è¾ƒ \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-29.png)\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-28.png)\n\n## 2. ä½¿ç”¨ setTimeout(fn,0) çš„åœºæ™¯æœ‰ï¼Ÿ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-30.png)\n\n## 3. resolve æˆ–è€… return ä¸€ä¸ª promise å¯¹è±¡æ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å¾®ä»»åŠ¡\n\n```javascript  hl:5,7\nPromise.resolve()\n  .then(() => {\n    console.log(0);\n    // ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ Promiseï¼Œå³äº§ç”Ÿä¸€ä¸ªæ–°çš„å¾®ä»»åŠ¡\n    return Promise.resolve(1); // ç­‰ä»·äºä¸‹é¢æ³¨é‡Šä¸­\n  })\n  // ç­‰ä»·äº\n  // .then(() => {})\n  // .then(() => {})\n  .then((res) => {\n    console.log(res);\n  });\n\nPromise.resolve()\n  .then(() => {\n    console.log(2);\n  })\n  .then(() => {\n    console.log(3);\n  })\n  .then(() => {\n    console.log(4);\n  })\n  .then(() => {\n    console.log(5);\n  })\n  .then(() => {\n    console.log(6);\n  });\n\n```\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-31.png)\n\n### 3.1. é‡ç‚¹\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-32.png)\n\n## 4. å¦‚ä½•å®ç°å¤§æ–‡ä»¶ä¸Šä¼ \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-33.png)\n\n### 4.1. å…¶ä»–æ³¨æ„ç‚¹\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-34.png)\n\n## 5. åˆ—ä¸¾ ES6ï¼ˆES2015ï¼‰ åˆ° ES2024 çš„ä¸»è¦ç‰¹æ€§ï¼ŒæŒ‰é‡è¦æ€§æ’åº\n\nå…·ä½“å“ªä¸ªæ˜¯é‚£å¹´è®°ä¸æ¸…ï¼Œå› ä¸ºå¾ˆå¤šä¸œè¥¿è™½ç„¶åœ¨ææ¡ˆé˜¶æ®µï¼Œä½†å·²ç»è¢« babel ä¹‹ç±»çš„å·¥å…·æè¯·ç»™å®ç°äº†\n\n### 5.1. ES6 (ES2015) - æœ€é‡è¦çš„ç‰ˆæœ¬\n\n```javascript\n// 1. let å’Œ const\nlet x = 1;\nconst y = 2;\n\n// 2. ç®­å¤´å‡½æ•°\nconst fn = () => {};\n\n// 3. è§£æ„èµ‹å€¼\nconst [a, b] = [1, 2];\nconst {name} = {name: 'test'};\n\n// 4. æ¨¡æ¿å­—ç¬¦ä¸²\nconst str = `Hello ${name}`;\n\n// 5. Class è¯­æ³•\nclass Person {\n    constructor() {}\n}\n\n// 6. Promise\nnew Promise((resolve, reject) => {});\n\n// 7. æ¨¡å—åŒ–\nimport/export\n\n// 8. é»˜è®¤å‚æ•°\nfunction fn(x = 1) {}\n\n// 9. å±•å¼€è¿ç®—ç¬¦\n[...array]\n```\n\n### 5.2. ES2016\n\n```javascript\n// 1. æŒ‡æ•°è¿ç®—ç¬¦\n2 ** 3\n\n// 2. Array.includes()\n[1,2].includes(1)\n```\n\n### 5.3. ES2017\n\n```javascript\n// 1. async/await\nasync function fn() {\n    await promise;\n}\n\n// 2. Object.values/entries\nObject.values({a: 1})\nObject.entries({a: 1})\n\n// 3. String padding\n'1'.padStart(2, '0')\n```\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-35.png)\n\n### 5.4. ES2018\n\n```javascript\n// 1. Rest/Spread å±æ€§\nconst {a, ...rest} = obj;\n\n// 2. å¼‚æ­¥è¿­ä»£ for-of\nfor await (const x of array) {}\n\n// 3. Promise.finally()\npromise.finally()\n```\n\n### 5.5. ES2019\n```javascript\n// 1. Array.flat/flatMap\n[1, [2]].flat()\narray.flatMap()\n\n// 2. Object.fromEntries\nObject.fromEntries(['a', 1](/post/ed099bc330f85df09ebd371286fb3354.html#'a',-1))\n\n// 3. String.trimStart/trimEnd\nstr.trimStart()\n```\n\n### 5.6. ES2020\n\n```javascript\n// 1. å¯é€‰é“¾æ“ä½œç¬¦\nobj?.prop\n\n// 2. ç©ºå€¼åˆå¹¶æ“ä½œç¬¦\nnull ?? 'default'\n\n// 3. BigInt\nconst big = 9007199254740991n\n\n// 4. Promise.allSettled\nPromise.allSettled([p1, p2])\n```\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-36.png)\n\n### 5.7. ES2021\n\n```javascript\n// 1. é€»è¾‘èµ‹å€¼è¿ç®—ç¬¦\nx ||= y\nx &&= y\nx ??= y\n\n// 2. String.replaceAll\n'abc'.replaceAll('a', 'b')\n\n// 3. Promise.any\nPromise.any([p1, p2])\n```\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-37.png)\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-38.png)\n### 5.8. ES2022\n\n```javascript\n// 1. Class å­—æ®µ\nclass A {\n    x = 1;\n    `#private` = 2;\n    static y = 3;\n}\n\n// 2. Top-level await\nawait promise;\n\n// 3. Array.at()\narray.at(-1)\n```\n\n### 5.9. ES2023\n\n```javascript\n// 1. Array æŸ¥æ‰¾ä»åå‘å‰\narray.findLast()\narray.findLastIndex()\n\n// 2. Hashbang Grammar\n`#!/usr/bin/env` node\n\n// 3. WeakMap æ”¯æŒ Symbol é”®\n```\n\nES2024 (ææ¡ˆé˜¶æ®µ)\n```javascript\n// 1. Promise.withResolvers\nconst {promise, resolve, reject} = Promise.withResolvers()\n\n// 2. æ–°å¢ RegExp v flag\n/foo/v.test('foo')\n\n// 3. String.prototype.isWellFormed\nstr.isWellFormed()\nstr.toWellFormed()\n```\n\né‡è¦æ€§æ’åºï¼ˆTOP 10ï¼‰ï¼š\n1. let/const\n2. ç®­å¤´å‡½æ•°\n3. async/await\n4. è§£æ„èµ‹å€¼\n5. Promise\n6. æ¨¡å—åŒ–(import/export)\n7. Classè¯­æ³•\n8. å¯é€‰é“¾(?.)\n9. å±•å¼€è¿ç®—ç¬¦(...)\n10. æ¨¡æ¿å­—ç¬¦ä¸²\n\nä½¿ç”¨å»ºè®®ï¼š\n1. ä¼˜å…ˆæŒæ¡ ES6 çš„ç‰¹æ€§ï¼Œè¿™æ˜¯åŸºç¡€\n2. async/await æ˜¯é‡ç‚¹ï¼Œå› ä¸ºå¼‚æ­¥å¤„ç†å¾ˆå¸¸è§\n3. å¯é€‰é“¾å’Œç©ºå€¼åˆå¹¶æ˜¯æé«˜ä»£ç å¥å£®æ€§çš„åˆ©å™¨\n4. Class è¯­æ³•å¯¹é¢å‘å¯¹è±¡ç¼–ç¨‹å¾ˆé‡è¦\n5. æ³¨æ„æ–°ç‰¹æ€§çš„æµè§ˆå™¨å…¼å®¹æ€§\n\nè®°å¿†æŠ€å·§ï¼š\n- ES6 æ˜¯æœ€å¤§æ›´æ–°ï¼Œé‡ç‚¹æŒæ¡\n- ä¹‹åçš„ç‰ˆæœ¬ä¸»è¦æ˜¯ç»†èŠ‚æ”¹è¿›\n- æŒ‰ç…§è§£å†³çš„é—®é¢˜åˆ†ç±»è®°å¿†ï¼š\n  - è¯­æ³•ç³–ï¼šç®­å¤´å‡½æ•°ã€è§£æ„èµ‹å€¼\n  - å¼‚æ­¥å¤„ç†ï¼šPromiseã€async/await\n  - é¢å‘å¯¹è±¡ï¼šClass\n  - å®‰å…¨æ€§ï¼šå¯é€‰é“¾ã€ç©ºå€¼åˆå¹¶\n  - å·¥å…·æ–¹æ³•ï¼šArrayã€Objectæ–°æ–¹æ³•\n\n## 6. WeakRef \n\nWeakRefï¼ˆå¼±å¼•ç”¨ï¼‰æ˜¯ ECMAScript 2021 (ES12) å¼•å…¥çš„ä¸€ä¸ªæ–°ç‰¹æ€§ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯å…è®¸ä½ ä¿æŒå¯¹å¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œä¸é˜»æ­¢è¯¥å¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚è¿™åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ã€‚è®©æˆ‘è¯¦ç»†è§£é‡Šä¸€ä¸‹ WeakRef çš„ä½œç”¨å’Œä½¿ç”¨åœºæ™¯ï¼š\n\n### 6.1. ä¸»è¦ä½œç”¨\n\nWeakRef çš„ä¸»è¦ä½œç”¨æ˜¯åˆ›å»ºå¯¹å¯¹è±¡çš„å¼±å¼•ç”¨ã€‚è¿™æ„å‘³ç€ï¼š\n\n- å¦‚æœä¸€ä¸ªå¯¹è±¡åªè¢« WeakRef å¼•ç”¨ï¼Œå®ƒå¯ä»¥è¢«åƒåœ¾å›æ”¶ã€‚\n- WeakRef ä¸ä¼šé˜»æ­¢å…¶å¼•ç”¨çš„å¯¹è±¡è¢«åƒåœ¾å›æ”¶ã€‚\n\n### 6.2. ä½¿ç”¨æ–¹æ³•\n\n```javascript hl:2\nlet obj = { data: \"some data\" };\nlet weakRef = new WeakRef(obj);\n\n// ç¨åä½¿ç”¨\nlet objAgain = weakRef.deref();\nif (objAgain) {\n    console.log(objAgain.data);\n} else {\n    console.log(\"Object has been garbage collected\");\n}\n```\n\n### 6.3. ä¸»è¦ä½¿ç”¨åœºæ™¯\n\n#### 6.3.1. ç¼“å­˜ç³»ç»Ÿ\n```javascript\nconst cache = new Map();\n\nfunction getDataForKey(key) {\n    let weakRef = cache.get(key);\n    if (weakRef) {\n        let data = weakRef.deref();\n        if (data) return data;\n    }\n    \n    // å¦‚æœæ•°æ®ä¸å­˜åœ¨æˆ–å·²è¢«å›æ”¶ï¼Œé‡æ–°è·å–æ•°æ®\n    let newData = expensiveOperation(key);\n    cache.set(key, new WeakRef(newData));\n    return newData;\n}\n```\n\n#### 6.3.2. è§‚å¯Ÿè€…æ¨¡å¼\n```javascript\nclass Subject {\n    constructor() {\n        this.observers = new Set();\n    }\n\n    addObserver(observer) {\n        this.observers.add(new WeakRef(observer));\n    }\n\n    notifyObservers() {\n        for (let weakRef of this.observers) {\n            const observer = weakRef.deref();\n            if (observer) {\n                observer.update();\n            } else {\n                this.observers.delete(weakRef);\n            }\n        }\n    }\n}\n```\n\n#### 6.3.3. å¤§å‹å¯¹è±¡çš„ä¸´æ—¶å¼•ç”¨\n\n```javascript\nfunction processLargeObject(obj) {\n    let weakRef = new WeakRef(obj);\n    \n    // åšä¸€äº›å…¶ä»–æ“ä½œ...\n    \n    // å½“éœ€è¦æ—¶å†æ¬¡è®¿é—®å¯¹è±¡\n    let objAgain = weakRef.deref();\n    if (objAgain) {\n        // ä½¿ç”¨å¯¹è±¡\n    }\n}\n```\n\n### 6.4. ä¼˜ç‚¹\n\n- å†…å­˜æ•ˆç‡ï¼šå…è®¸åƒåœ¾å›æ”¶å™¨å›æ”¶ä¸å†éœ€è¦çš„å¯¹è±¡ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚\n- çµæ´»æ€§ï¼šå¯ä»¥ä¿æŒå¯¹å¯¹è±¡çš„å¼•ç”¨ï¼ŒåŒæ—¶å…è®¸è¯¥å¯¹è±¡åœ¨å¿…è¦æ—¶è¢«å›æ”¶ã€‚\n\n### 6.5. æ³¨æ„äº‹é¡¹\n\n- ä¸ç¡®å®šæ€§ï¼š**æ— æ³•é¢„æµ‹å¯¹è±¡ä½•æ—¶ä¼šè¢«å›æ”¶**ã€‚\n- æ€§èƒ½å¼€é”€ï¼šé¢‘ç¹æ£€æŸ¥å¯¹è±¡æ˜¯å¦ä»ç„¶å­˜åœ¨å¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚\n- å¤æ‚æ€§ï¼šå¢åŠ äº†ä»£ç çš„å¤æ‚æ€§ï¼Œä½¿ç”¨æ—¶éœ€è¦é¢å¤–çš„æ£€æŸ¥ã€‚\n\n### 6.6. ä¸ WeakMap å’Œ WeakSet çš„å…³ç³»\n\nWeakRef ä¸ WeakMap å’Œ WeakSet ç±»ä¼¼ï¼Œéƒ½æ˜¯å¤„ç†å¯¹è±¡çš„å¼±å¼•ç”¨ã€‚ä½† WeakRef æ›´åŠ çµæ´»ï¼Œå…è®¸ä½ ç›´æ¥æ“ä½œå¼±å¼•ç”¨ã€‚\n\n### 6.7. æœ€ä½³å®è·µ\n\n- ä»…åœ¨çœŸæ­£éœ€è¦æ—¶ä½¿ç”¨ WeakRefã€‚\n- æ€»æ˜¯æ£€æŸ¥ `deref()` çš„ç»“æœæ˜¯å¦ä¸º nullã€‚\n- è€ƒè™‘ä½¿ç”¨ `FinalizationRegistry` æ¥æ¸…ç†ç›¸å…³èµ„æºã€‚\n\n```javascript\nconst registry = new FinalizationRegistry(heldValue => {\n    console.log(`Object with ${heldValue} has been garbage collected.`);\n});\n\nlet obj = { data: \"important data\" };\nlet weakRef = new WeakRef(obj);\nregistry.register(obj, \"my object\");\n\n// ä½¿ç”¨å®Œæ¯•å\nobj = null; // å…è®¸å¯¹è±¡è¢«å›æ”¶\n```\n\n### 6.8. æ€»ç»“\n\nWeakRef æ˜¯ä¸€ä¸ªå¼ºå¤§ä½†éœ€è°¨æ…ä½¿ç”¨çš„ç‰¹æ€§ã€‚å®ƒä¸»è¦ç”¨äºéœ€è¦ä¸´æ—¶å¼•ç”¨å¤§å‹å¯¹è±¡æˆ–éœ€è¦åœ¨å¯¹è±¡å¯èƒ½è¢«å›æ”¶çš„æƒ…å†µä¸‹ç»´æŠ¤å¼•ç”¨çš„åœºæ™¯ã€‚æ­£ç¡®ä½¿ç”¨å¯ä»¥æé«˜å†…å­˜æ•ˆç‡ï¼Œä½†ä¹Ÿå¢åŠ äº†ä»£ç çš„å¤æ‚æ€§ã€‚\n\n## 7. FinalizationRegistry æ¦‚è¿°\n\nFinalizationRegistry å¯¹è±¡å¯ä»¥è®©ä½ **åœ¨å¯¹è±¡è¢«åƒåœ¾å›æ”¶æ—¶è¯·æ±‚ä¸€ä¸ªå›è°ƒ**ã€‚è¿™ä¸ªæœºåˆ¶æä¾›äº†ä¸€ç§æ–¹å¼æ¥ä¸ºé‚£äº›ä¸å†è¢«ä½¿ç”¨çš„å¯¹è±¡æ‰§è¡Œä¸€äº›æ¸…ç†æ“ä½œã€‚\n\n```javascript\nconst registry = new FinalizationRegistry(heldValue => {\n  console.log('å¯¹è±¡è¢«å›æ”¶äº†ï¼Œå…³è”å€¼ä¸º:', heldValue);\n});\n\nlet obj = {};\nregistry.register(obj, \"è‡ªå®šä¹‰æ•°æ®\");\n\n// å½“ obj è¢«åƒåœ¾å›æ”¶æ—¶ï¼Œå›è°ƒå‡½æ•°ä¼šè¢«è°ƒç”¨\n```\n\n### 7.1. FinalizationRegistry ä¸èƒ½ä¸»åŠ¨è§¦å‘åƒåœ¾å›æ”¶\n\nè™½ç„¶ FinalizationRegistry ç¡®å®ä¸åƒåœ¾å›æ”¶ï¼ˆGCï¼‰å¯†åˆ‡ç›¸å…³ï¼Œä½†å®ƒå¹¶ä¸èƒ½ç›´æ¥è§¦å‘åƒåœ¾å›æ”¶\n\nFinalizationRegistry ä¸»è¦ç”¨äºåœ¨å¯¹è±¡è¢«åƒåœ¾å›æ”¶åæ‰§è¡Œä¸€äº›æ¸…ç†æ“ä½œã€‚å®ƒå…è®¸ä½ æ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šåœ¨æŸä¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶åè¢«è°ƒç”¨ã€‚\n\nFinalizationRegistry æ˜¯ä¸€ä¸ª**è¢«åŠ¨æœºåˆ¶**ã€‚å®ƒä¾èµ–äº JavaScript å¼•æ“çš„åƒåœ¾å›æ”¶å™¨æ¥è§¦å‘å›è°ƒï¼Œè€Œä¸æ˜¯ä¸»åŠ¨è§¦å‘åƒåœ¾å›æ”¶\n\n## 8. æ˜¯å¦æœ‰ä»€ä¹ˆåŠæ³•èƒ½å¤Ÿä¸»åŠ¨è§¦å‘åƒåœ¾å›æ”¶ï¼Ÿ\n\nåœ¨å¸¸è§„ JavaScript ä¸­ï¼Œä¸èƒ½ç›´æ¥ã€å¯é åœ°è§¦å‘åƒåœ¾å›æ”¶ï¼ˆGarbage Collectionï¼ŒGCï¼‰ï¼Œå› ä¸ºè¿™æ˜¯ç”± JavaScript å¼•æ“è‡ªåŠ¨ç®¡ç†çš„ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£ä¸€äº›ç›¸å…³çš„æ–¹æ³•å’Œæ³¨æ„äº‹é¡¹ï¼š\n\n### 8.1. å¼€å‘ç¯å¢ƒä¸‹çš„è°ƒè¯•æ–¹æ³•\n\n```javascript\n// Chrome DevTools\n// 1. æ‰“å¼€å¼€å‘è€…å·¥å…·\n// 2. æ‰“å¼€ Memory é¢æ¿\n// 3. ç‚¹å‡»åƒåœ¾æ¡¶å›¾æ ‡ \"Collect garbage\"\n\n// Node.js ç¯å¢ƒ\nif (global.gc) {\n    global.gc();\n}\n// éœ€è¦ä½¿ç”¨ --expose-gc å‚æ•°å¯åŠ¨ Node.js\n// node --expose-gc script.js\n```\n\n### 8.2. é—´æ¥è§¦å‘ GC çš„å¸¸è§åšæ³•\n\n```javascript\n// 1. è§£é™¤å¼•ç”¨\nlet obj = { data: \"some data\" };\nobj = null;  // è§£é™¤å¼•ç”¨ï¼Œä½¿å¯¹è±¡å¯è¢«å›æ”¶\n\n// 2. ä½¿ç”¨ WeakRef å’Œ WeakMap\nlet weakRef = new WeakRef(obj);\nobj = null;  // åŸå¯¹è±¡å¯èƒ½è¢«å›æ”¶\n\n// 3. é—­åŒ…å†…çš„å˜é‡\nfunction createClosure() {\n    let largeData = new Array(1000000);\n    return function() {\n        // largeData åœ¨è¿™é‡Œè¢«å¼•ç”¨\n    };\n}\nlet closure = createClosure();\nclosure = null; // æ¸…é™¤é—­åŒ…å¼•ç”¨\n```\n\n### 8.3. å†…å­˜ç›‘æ§æ–¹æ³•\n\n```javascript\n// 1. Node.js ç¯å¢ƒ\nconst used = process.memoryUsage();\nconsole.log({\n    heapTotal: `${Math.round(used.heapTotal / 1024 / 1024 * 100) / 100} MB`,\n    heapUsed: `${Math.round(used.heapUsed / 1024 / 1024 * 100) / 100} MB`\n});\n\n// 2. æµè§ˆå™¨ç¯å¢ƒ\nconsole.log(performance.memory); // Chrome only\n```\n\n### 8.4. å¼€å‘å»ºè®®\n\n- é¿å…å…¨å±€å˜é‡\n- åŠæ—¶æ¸…é™¤äº‹ä»¶ç›‘å¬å™¨\n- åŠæ—¶æ¸…é™¤å®šæ—¶å™¨\n- é¿å…å¾ªç¯å¼•ç”¨\n- ä½¿ç”¨é€‚å½“çš„æ•°æ®ç»“æ„ï¼ˆWeakMapã€WeakSet ç­‰ï¼‰\n- åˆ†æ‰¹å¤„ç†å¤§é‡æ•°æ®\n- æ³¨æ„é—­åŒ…çš„ä½¿ç”¨\n\n```javascript\n// é”™è¯¯ç¤ºä¾‹\nwindow.globalData = { /* å¤§é‡æ•°æ® */ };\n\n// æ­£ç¡®ç¤ºä¾‹\nfunction processData() {\n    const data = { /* å¤§é‡æ•°æ® */ };\n    // å¤„ç†æ•°æ®\n    // å‡½æ•°ç»“æŸå data å¯è¢«å›æ”¶\n}\n```\n\n### 8.5. è°ƒè¯•å·¥å…·\n\n- Chrome DevTools çš„ Memory é¢æ¿\n- Node.js çš„ --inspect è°ƒè¯•æ¨¡å¼\n- å†…å­˜æ³„æ¼æ£€æµ‹å·¥å…·ï¼ˆå¦‚ heapdumpï¼‰\n\n## 9. IndexedDB ä¸¥æ ¼éµå¾ªåŒæºç­–ç•¥ï¼ˆSame-Origin Policyï¼‰\n\n## 10. èƒ½å¤Ÿåƒ storage ä¸€æ ·ç›‘å¬åˆ° indexDB çš„æ•°æ®å˜åŒ–äº†å—ï¼Ÿ\n\nä¸åŒäº localStorage å’Œ sessionStorageï¼ŒIndexedDB å¹¶æ²¡æœ‰å†…ç½®çš„äº‹ä»¶æœºåˆ¶æ¥ç›´æ¥ç›‘å¬æ•°æ®å˜åŒ–ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›æŠ€æœ¯å’Œæ¨¡å¼æ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚è®©æˆ‘ä¸ºæ‚¨è¯¦ç»†è§£é‡Šå‡ ç§æ–¹æ³•ï¼š\n\n### 10.1. ä½¿ç”¨äº‹åŠ¡ï¼ˆTransactionï¼‰å’Œå¯¹è±¡å­˜å‚¨ï¼ˆObject Storeï¼‰äº‹ä»¶\n\nIndexedDB æä¾›äº†ä¸€äº›äº‹ä»¶ï¼Œå¯ä»¥åœ¨äº‹åŠ¡çº§åˆ«ç›‘å¬å˜åŒ–ï¼š\n\n```javascript\nfunction openDatabase() {\n    return new Promise((resolve, reject) => {\n        const request = indexedDB.open('MyDatabase', 1);\n        request.onerror = (event) => reject(event.target.error);\n        request.onsuccess = (event) => resolve(event.target.result);\n        request.onupgradeneeded = (event) => {\n            const db = event.target.result;\n            db.createObjectStore('MyStore', { keyPath: 'id' });\n        };\n    });\n}\n\nasync function monitorChanges() {\n    const db = await openDatabase();\n    const transaction = db.transaction(['MyStore'], 'readwrite');\n    const store = transaction.objectStore('MyStore');\n\n    store.addEventListener('add', (event) => {\n        console.log('æ•°æ®æ·»åŠ :', event);\n    });\n\n    store.addEventListener('put', (event) => {\n        console.log('æ•°æ®æ›´æ–°:', event);\n    });\n\n    store.addEventListener('delete', (event) => {\n        console.log('æ•°æ®åˆ é™¤:', event);\n    });\n\n    // ä½¿ç”¨\n    store.add({ id: 1, value: 'test' });\n}\n\nmonitorChanges();\n```\n\nè¿™ç§æ–¹æ³•çš„å±€é™æ€§åœ¨äºå®ƒåªèƒ½ç›‘å¬å½“å‰äº‹åŠ¡ä¸­çš„å˜åŒ–ã€‚\n\n### 10.2. ä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶å’Œå‘å¸ƒ-è®¢é˜…æ¨¡å¼\n\næˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…è£…å™¨æ¥å‘å‡ºè‡ªå®šä¹‰äº‹ä»¶ï¼š\n\n```javascript\nclass IndexedDBWrapper {\n    constructor(dbName, version) {\n        this.dbName = dbName;\n        this.version = version;\n        this.db = null;\n        this.listeners = {};\n    }\n\n    async open() {\n        return new Promise((resolve, reject) => {\n            const request = indexedDB.open(this.dbName, this.version);\n            request.onerror = (event) => reject(event.target.error);\n            request.onsuccess = (event) => {\n                this.db = event.target.result;\n                resolve(this.db);\n            };\n            // å¤„ç† onupgradeneeded...\n        });\n    }\n\n    async put(storeName, data) {\n        const transaction = this.db.transaction([storeName], 'readwrite');\n        const store = transaction.objectStore(storeName);\n        await store.put(data);\n        this.emit('change', { type: 'put', storeName, data });\n    }\n\n    async delete(storeName, key) {\n        const transaction = this.db.transaction([storeName], 'readwrite');\n        const store = transaction.objectStore(storeName);\n        await store.delete(key);\n        this.emit('change', { type: 'delete', storeName, key });\n    }\n\n    on(eventName, callback) {\n        if (!this.listeners[eventName]) {\n            this.listeners[eventName] = [];\n        }\n        this.listeners[eventName].push(callback);\n    }\n\n    emit(eventName, data) {\n        if (this.listeners[eventName]) {\n            this.listeners[eventName].forEach(callback => callback(data));\n        }\n    }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nasync function useIndexedDBWrapper() {\n    const dbWrapper = new IndexedDBWrapper('MyDatabase', 1);\n    await dbWrapper.open();\n\n    dbWrapper.on('change', (event) => {\n        console.log('æ•°æ®å˜åŒ–:', event);\n    });\n\n    await dbWrapper.put('MyStore', { id: 1, value: 'test' });\n    await dbWrapper.delete('MyStore', 1);\n}\n\nuseIndexedDBWrapper();\n```\n\n### 10.3. ä½¿ç”¨ Proxy æˆ– Observable æ¨¡å¼\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Proxy æ¥åŒ…è£… IndexedDB æ“ä½œï¼Œä»è€Œå®ç°è‡ªåŠ¨ç›‘å¬ï¼š\n\n```javascript\nfunction createObservableStore(db, storeName) {\n    return new Proxy({}, {\n        get: (target, prop) => {\n            if (prop === 'get') {\n                return async (key) => {\n                    const transaction = db.transaction([storeName], 'readonly');\n                    const store = transaction.objectStore(storeName);\n                    return await store.get(key);\n                };\n            }\n            if (prop === 'put') {\n                return async (data) => {\n                    const transaction = db.transaction([storeName], 'readwrite');\n                    const store = transaction.objectStore(storeName);\n                    await store.put(data);\n                    console.log('æ•°æ®æ›´æ–°:', data);\n                };\n            }\n            if (prop === 'delete') {\n                return async (key) => {\n                    const transaction = db.transaction([storeName], 'readwrite');\n                    const store = transaction.objectStore(storeName);\n                    await store.delete(key);\n                    console.log('æ•°æ®åˆ é™¤:', key);\n                };\n            }\n        }\n    });\n}\n\nasync function useObservableStore() {\n    const db = await openDatabase(); // å‡è®¾è¿™ä¸ªå‡½æ•°å·²ç»å®šä¹‰\n    const store = createObservableStore(db, 'MyStore');\n\n    await store.put({ id: 1, value: 'test' });\n    const data = await store.get(1);\n    console.log('è·å–çš„æ•°æ®:', data);\n    await store.delete(1);\n}\n\nuseObservableStore();\n```\n\n### 10.4. ä½¿ç”¨ Service Worker è¿›è¡Œè·¨æ ‡ç­¾é¡µé€šä¿¡\n\nå¦‚æœéœ€è¦åœ¨å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´åŒæ­¥ IndexedDB çš„å˜åŒ–ï¼Œå¯ä»¥ä½¿ç”¨ Service Workerï¼š\n\n```javascript\n// service-worker.js\nself.addEventListener('message', (event) => {\n    if (event.data && event.data.type === 'DB_CHANGE') {\n        self.clients.matchAll().then(clients => {\n            clients.forEach(client => {\n                if (client.id !== event.source.id) {\n                    client.postMessage(event.data);\n                }\n            });\n        });\n    }\n});\n\n// main.js\nif ('serviceWorker' in navigator) {\n    navigator.serviceWorker.register('/service-worker.js');\n}\n\nfunction notifyDBChange(change) {\n    if (navigator.serviceWorker.controller) {\n        navigator.serviceWorker.controller.postMessage({\n            type: 'DB_CHANGE',\n            change: change\n        });\n    }\n}\n\nnavigator.serviceWorker.addEventListener('message', (event) => {\n    if (event.data && event.data.type === 'DB_CHANGE') {\n        console.log('å…¶ä»–æ ‡ç­¾é¡µçš„ IndexedDB å˜åŒ–:', event.data.change);\n    }\n});\n\n// åœ¨ IndexedDB æ“ä½œåè°ƒç”¨\nnotifyDBChange({ type: 'put', key: 1, value: 'new data' });\n```\n\n### 10.5. æ€»ç»“\n\nè™½ç„¶ IndexedDB æ²¡æœ‰åƒ localStorage é‚£æ ·çš„å†…ç½®äº‹ä»¶ç›‘å¬æœºåˆ¶ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸Šè¿°æ–¹æ³•æ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼š\n\n1. ä½¿ç”¨äº‹åŠ¡å’Œå¯¹è±¡å­˜å‚¨äº‹ä»¶ï¼ˆå±€é™äºå•ä¸ªäº‹åŠ¡ï¼‰\n2. å®ç°è‡ªå®šä¹‰çš„å‘å¸ƒ-è®¢é˜…æ¨¡å¼\n3. ä½¿ç”¨ Proxy æˆ– Observable æ¨¡å¼åŒ…è£… IndexedDB æ“ä½œ\n4. åˆ©ç”¨ Service Worker å®ç°è·¨æ ‡ç­¾é¡µçš„æ•°æ®å˜åŒ–é€šçŸ¥\n\n## 11. å‰ç«¯é¡µé¢é€šè®¯çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-39.png)\n\n## 12. map å’Œ foreach çš„åŒºåˆ«\n\n### 12.1. å¿«æ…¢\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-40.png)\n\n### 12.2. æ˜¯å¦ä¿®æ”¹åŸæ•°ç»„\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-41.png)\n\n## 13. é˜¿æ‹‰ä¼¯è®¡æ•°è½¬æˆä¸­æ–‡ï¼š101 â†’ ä¸€ç™¾é›¶ä¸€\n\næ€è·¯ï¼šç›´æ¥æ•°ç»„å¯¹åº”å…ˆåŒ¹é…å‡ºæ¥ï¼Œå†å¤„ç†ç‰¹æ®Šæƒ…å†µ\n\n```javascript hl:1,14\nconst numberMap = {\n  0: \"é›¶\",\n  1: \"ä¸€\",\n  2: \"äºŒ\",\n  3: \"ä¸‰\",\n  4: \"å››\",\n  5: \"äº”\",\n  6: \"å…­\",\n  7: \"ä¸ƒ\",\n  8: \"å…«\",\n  9: \"ä¹\",\n};\n\nconst unitMap = {\n  0: \"\", // ä¸ªä½\n  1: \"å\", // åä½\n  2: \"ç™¾\", // ç™¾ä½\n  3: \"åƒ\", // åƒä½\n  4: \"ä¸‡\", // ä¸‡ä½\n  5: \"å\", // åä¸‡ä½\n  6: \"ç™¾\", // ç™¾ä¸‡ä½\n  7: \"åƒ\", // åƒä¸‡ä½\n  8: \"äº¿\", // äº¿ä½\n};\n\nfunction numberToChinese(num) {\n  // è½¬æ¢ä¸ºå­—ç¬¦ä¸²\n  const numStr = num.toString();\n  // ç»“æœæ•°ç»„\n  const result = [];\n  // æ•°å­—é•¿åº¦\n  const length = numStr.length;\n\n  // å¤„ç†é›¶çš„ç‰¹æ®Šæƒ…å†µ\n  if (num === 0) return numberMap[0];\n\n  for (let i = 0; i < length; i++) {\n    const digit = parseInt(numStr[i]);\n    const position = length - 1 - i; // ä½ç½®ï¼ˆä»å³å¾€å·¦ï¼‰\n\n    // è·³è¿‡é›¶çš„å¤„ç†\n    if (digit === 0) {\n      // å½“å‰æ•°å­—æ˜¯0ï¼Œä¸”ä¸æ˜¯æœ€åä¸€ä½ï¼Œä¸”åé¢çš„æ•°å­—ä¸æ˜¯0\n      if (i < length - 1 && numStr[i + 1] !== \"0\") {\n        result.push(numberMap[digit]);\n      }\n      continue;\n    }\n\n    // å¤„ç†åä½æ•°çš„ç‰¹æ®Šæƒ…å†µï¼ˆå¦‚ï¼šä¸€å => åï¼‰\n    if (position === 1 && digit === 1 && i === 0) {\n      result.push(unitMap[position]);\n    } else {\n      result.push(numberMap[digit]);\n      result.push(unitMap[position]);\n    }\n  }\n\n  return result.join(\"\");\n}\n\n// æµ‹è¯•\nconsole.log(numberToChinese(0)); // é›¶\nconsole.log(numberToChinese(10)); // å\nconsole.log(numberToChinese(11)); // åä¸€\nconsole.log(numberToChinese(111)); // ä¸€ç™¾ä¸€åä¸€\nconsole.log(numberToChinese(1001)); // ä¸€åƒé›¶ä¸€\nconsole.log(numberToChinese(10001)); // ä¸€ä¸‡é›¶ä¸€\nconsole.log(numberToChinese(10101)); // ä¸€ä¸‡é›¶ä¸€ç™¾é›¶ä¸€\nconsole.log(numberToChinese(100000)); // åä¸‡\nconsole.log(numberToChinese(1000001)); // ä¸€ç™¾ä¸‡é›¶ä¸€\n\n```\n\n\n## 14. å°†ç±»æ•°ç»„å¯¹è±¡è½¬æˆçœŸæ­£æ•°ç»„çš„ 4 ç§æ–¹æ³•\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-42.png)\n\n## 15. è™šæ‹Ÿ DOM æ¸²æŸ“åˆ°é¡µé¢æ—¶ï¼Œæ¡†æ¶ä¼šåšé‚£äº›å¤„ç†ï¼Ÿ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-43.png)\n\n## 16. `reduce` æ–¹æ³•åŠå…¶å¸¸è§çš„ä½¿ç”¨åœºæ™¯\n\n### 16.1. reduce æ–¹æ³•åŸºæœ¬è¯­æ³•\n\n```javascript\narray.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue])\n```\n\n- `callback`: æ‰§è¡Œæ•°ç»„ä¸­æ¯ä¸ªå€¼çš„å‡½æ•°ï¼ŒåŒ…å«å››ä¸ªå‚æ•°ï¼š\n\t- `accumulator`: ç´¯åŠ å™¨ï¼Œç´¯åŠ å›è°ƒçš„è¿”å›å€¼\n\t- `currentValue`: æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å…ƒç´ \n\t- `index`ï¼ˆå¯é€‰ï¼‰: æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•\n\t- `array`ï¼ˆå¯é€‰ï¼‰: è°ƒç”¨ `reduce()` çš„æ•°ç»„\n- `initialValue`ï¼ˆå¯é€‰ï¼‰: ä½œä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ `callback` å‡½æ•°æ—¶çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼\n\t- ==æ³¨æ„ï¼šå¦‚æœä¸ä¼ æ—¶ï¼Œè°ƒç”¨ç©ºæ•°ç»„ä¼šæŠ¥é”™==\n\n### 16.2. ä½¿ç”¨åœºæ™¯\n\n#### 16.2.1. æ•°ç»„æ±‚å’Œ\n\n```javascript\nconst numbers = [1, 2, 3, 4, 5];\nconst sum = numbers.reduce((acc, cur) => acc + cur, 0);\nconsole.log(sum); // è¾“å‡º: 15\n```\n\n#### 16.2.2. æ•°ç»„ä¸­æœ€å¤§å€¼\n\n```javascript\nconst numbers = [5, 2, 8, 1, 9];\nconst max = numbers.reduce((acc, cur) => Math.max(acc, cur));\nconsole.log(max); // è¾“å‡º: 9\n```\n\n#### 16.2.3. æ•°ç»„æ‰å¹³åŒ–\n\n```javascript\nconst nestedArray = [1, 2], [3, 4], [5, 6](/post/ed099bc330f85df09ebd371286fb3354.html#1,-2],-[3,-4],-[5,-6);\nconst flatArray = nestedArray.reduce((acc, cur) => acc.concat(cur), []);\nconsole.log(flatArray); // è¾“å‡º: [1, 2, 3, 4, 5, 6]\n```\n\n#### 16.2.4. è®¡ç®—æ•°ç»„ä¸­å…ƒç´ å‡ºç°çš„æ¬¡æ•°\n\n```javascript\nconst fruits = ['apple', 'banana', 'apple', 'orange', 'banana', 'apple'];\nconst count = fruits.reduce((acc, cur) => {\n    acc[cur] = (acc[cur] || 0) + 1;\n    return acc;\n}, {});\nconsole.log(count); // è¾“å‡º: { apple: 3, banana: 2, orange: 1 }\n```\n\n#### 16.2.5. æŒ‰æ¡ä»¶åˆ†ç»„\n\n```javascript\nconst people = [\n    { name: 'Alice', age: 25 },\n    { name: 'Bob', age: 30 },\n    { name: 'Charlie', age: 25 },\n    { name: 'David', age: 30 }\n];\n\nconst groupedByAge = people.reduce((acc, person) => {\n    (acc[person.age] = acc[person.age] || []).push(person);\n    return acc;\n}, {});\n\nconsole.log(groupedByAge);\n// è¾“å‡º: { \n//   25: [{ name: 'Alice', age: 25 }, { name: 'Charlie', age: 25 }],\n//   30: [{ name: 'Bob', age: 30 }, { name: 'David', age: 30 }]\n// }\n```\n\n#### 16.2.6. ä¸²è” Promise\n\n```javascript\nconst asyncTasks = [\n    () => new Promise(resolve => setTimeout(() => resolve('Task 1'), 1000)),\n    () => new Promise(resolve => setTimeout(() => resolve('Task 2'), 500)),\n    () => new Promise(resolve => setTimeout(() => resolve('Task 3'), 800))\n];\n\nasyncTasks.reduce((acc, task) => \n    acc.then(results => \n        task().then(result => [...results, result])\n    ), \n    Promise.resolve([])\n).then(console.log);\n// è¾“å‡º: ['Task 1', 'Task 2', 'Task 3']\n```\n\n#### 16.2.7. å®ç° pipe æˆ– compose å‡½æ•°\n\n```javascript\nconst pipe = (...fns) => (x) => fns.reduce((v, f) => f(v), x);\n\nconst addOne = (x) => x + 1;\nconst double = (x) => x * 2;\nconst square = (x) => x * x;\n\nconst compute = pipe(addOne, double, square);\nconsole.log(compute(3)); // è¾“å‡º: 64 ((3 + 1) * 2)^2\n```\n\n#### 16.2.8. æå–å¯¹è±¡ä¸­çš„ç‰¹å®šå­—æ®µ\n\n```javascript\nconst users = [\n    { id: 1, name: 'Alice', age: 25 },\n    { id: 2, name: 'Bob', age: 30 },\n    { id: 3, name: 'Charlie', age: 35 }\n];\n\nconst names = users.reduce((acc, user) => [...acc, user.name], []);\nconsole.log(names); // è¾“å‡º: ['Alice', 'Bob', 'Charlie']\n```\n\n## 17. ç»‘å®š this æŒ‡å‘çš„çš„æ–¹æ³•éƒ½æœ‰å“ªäº›ï¼Ÿ\n\n- bind\n- ç®­å¤´å‡½æ•°ï¼šæŒ‡å‘å®šä¹‰æ—¶çš„ä¸Šä¸‹æ–‡\n- apply/call\n\n## 18. addEventListenser çš„ä¸‰ä¸ªå‚æ•°\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-44.png)\n## 19. `??`  ä¸ `||` çš„åŒºåˆ«ï¼Ÿ\n\n- `||`Â è¿ç®—ç¬¦åœ¨å·¦ä¾§ä¸ºä»»ä½• `false` å€¼æ—¶éƒ½ä¼šè¿”å›å³ä¾§çš„å€¼ã€‚\n- `??`Â è¿ç®—ç¬¦åªåœ¨å·¦ä¾§ä¸º `null æˆ– undefined` æ—¶æ‰ä¼šè¿”å›å³ä¾§çš„å€¼ã€‚\n\n```javascript hl:2,5,8\nconsole.log(0 || 42);     // è¾“å‡º: 42\nconsole.log(0 ?? 42);     // è¾“å‡º: 0\n\nconsole.log('' || 'default');  // è¾“å‡º: \"default\"\nconsole.log('' ?? 'default');  // è¾“å‡º: \"\"\n\nconsole.log(false || true);    // è¾“å‡º: true\nconsole.log(false ?? true);    // è¾“å‡º: false\n\n```\n\n## 20. this æŒ‡å‘é—®é¢˜\n\n```javascript\nconst obj = {\n  fn1: () => {\n    // this æŒ‡å‘å®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œå³ window\n    // å¦‚æœ new è°ƒç”¨ï¼Œåˆ™æŠ¥é”™\n    console.log(this);\n  },\n  fn2: function () {\n    console.log(this);\n  },\n};\n\nobj.fn1(); // Window {...}\nobj.fn2(); // { fn1: [Function: fn1], fn2: [Function: fn2] }\n\nconst x = new obj.fn1(); //  Uncaught TypeError: obj.fn1 is not a constructor\nconst y = new obj.fn2(); // fn2Â {}\n\n```\n\n## 21. cookie çš„æœ‰æ•ˆæœŸè®¾ç½®ä¸º 0 ä¼šæ€ä¹ˆæ ·ï¼Ÿ\n\n### 21.1. ä¼šè¯ Cookieï¼ˆSession Cookieï¼‰\n\nå½“ä½ å°† cookie çš„æœ‰æ•ˆæœŸè®¾ç½®ä¸º 0 æ—¶ï¼Œå®é™…ä¸Šæ˜¯åˆ›å»ºäº†ä¸€ä¸ªä¼šè¯ cookieï¼ˆsession cookieï¼‰ã€‚è¿™ç§ cookie æ²¡æœ‰æ˜ç¡®çš„è¿‡æœŸæ—¶é—´ã€‚\n\n### 21.2. æµè§ˆå™¨å…³é—­æ—¶åˆ é™¤\n\nä¼šè¯ cookie ä¼šåœ¨ç”¨æˆ·å…³é—­æµè§ˆå™¨æ—¶è‡ªåŠ¨åˆ é™¤ã€‚è¿™æ„å‘³ç€å½“ç”¨æˆ·ç»“æŸå½“å‰çš„æµè§ˆä¼šè¯ï¼ˆå…³é—­æ‰€æœ‰æµè§ˆå™¨çª—å£ï¼‰æ—¶ï¼Œè¿™ä¸ª cookie å°±ä¼šè¢«æ¸…é™¤ã€‚\n\n### 21.3. ç”Ÿå‘½å‘¨æœŸ\n\n- åœ¨æµè§ˆå™¨æ‰“å¼€æœŸé—´ï¼Œè¿™ä¸ª cookie ä¼šä¸€ç›´å­˜åœ¨å¹¶å¯ç”¨ã€‚\n- åªè¦æµè§ˆå™¨ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œ**å³ä½¿ç”¨æˆ·å…³é—­äº†ç‰¹å®šçš„æ ‡ç­¾é¡µæˆ–çª—å£ï¼Œcookie ä»ç„¶æœ‰æ•ˆ**ã€‚\n\n### 21.4. ç”¨é€”\n\nä¼šè¯ cookie é€šå¸¸ç”¨äº**å­˜å‚¨ä¸´æ—¶ä¿¡æ¯**ï¼Œæ¯”å¦‚ï¼š\n- ç”¨æˆ·çš„ç™»å½•çŠ¶æ€\n- è´­ç‰©è½¦å†…å®¹\n- ç”¨æˆ·åœ¨ç½‘ç«™ä¸Šçš„ä¸´æ—¶è®¾ç½®æˆ–åå¥½\n\n### 21.5. è®¾ç½®æ–¹æ³•\n\nåœ¨ JavaScript ä¸­ï¼Œä½ å¯ä»¥è¿™æ ·è®¾ç½®ä¸€ä¸ªä¼šè¯ cookieï¼š\n\n```javascript\ndocument.cookie = \"username=John Doe; path=/\";\n```\n\næ³¨æ„è¿™é‡Œæ²¡æœ‰è®¾ç½® `expires` æˆ– `max-age` å±æ€§ã€‚\n\n### 21.6. ä¸æŒä¹… Cookie çš„åŒºåˆ«\n\n- æŒä¹… cookie æœ‰æ˜ç¡®çš„è¿‡æœŸæ—¶é—´ï¼Œä¼šè¢«ä¿å­˜åœ¨ç”¨æˆ·çš„**ç¡¬ç›˜ä¸Š**ã€‚\n- ä¼šè¯ cookie åªå­˜åœ¨äº**å†…å­˜**ä¸­ï¼Œæµè§ˆå™¨å…³é—­åå°±ä¼šæ¶ˆå¤±ã€‚\n\n### 21.7. å®‰å…¨è€ƒè™‘\n\n- ä¼šè¯ cookie ç›¸å¯¹æ›´å®‰å…¨ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¼šé•¿æœŸå­˜å‚¨åœ¨ç”¨æˆ·çš„è®¾å¤‡ä¸Šã€‚\n- ä½†å®ƒä»¬ä»ç„¶å¯èƒ½è¢«ä¸­é—´äººæ”»å‡»æˆ–è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰æ”»å‡»åˆ©ç”¨ã€‚\n\n### 21.8. æµè§ˆå™¨è¡Œä¸ºå·®å¼‚\n\nä¸åŒçš„æµè§ˆå™¨å¯èƒ½å¯¹ä¼šè¯ cookie æœ‰ç•¥å¾®ä¸åŒçš„å¤„ç†æ–¹å¼ã€‚ä¾‹å¦‚ï¼ŒæŸäº›æµè§ˆå™¨çš„\"æ¢å¤ä¼šè¯\"åŠŸèƒ½å¯èƒ½ä¼šåœ¨æµè§ˆå™¨é‡æ–°æ‰“å¼€æ—¶æ¢å¤ä¼šè¯ cookieã€‚\n\n### 21.9. æ— æ³•ä¿è¯ç²¾ç¡®çš„ç”Ÿå‘½å‘¨æœŸ\n\nç”±äºä¼šè¯ cookie çš„ç”Ÿå‘½å‘¨æœŸä¾èµ–äºç”¨æˆ·ä½•æ—¶å…³é—­æµè§ˆå™¨ï¼Œå› æ­¤æ— æ³•ç²¾ç¡®æ§åˆ¶å®ƒçš„æœ‰æ•ˆæœŸã€‚\n\n### 21.10. ä¸å½±å“å·²å­˜åœ¨çš„åŒåæŒä¹… Cookie\n\nå¦‚æœå·²ç»å­˜åœ¨ä¸€ä¸ªåŒåçš„æŒä¹… cookieï¼Œè®¾ç½®æœ‰æ•ˆæœŸä¸º 0 çš„æ–° cookie ä¸ä¼šè¦†ç›–æˆ–åˆ é™¤åŸæœ‰çš„æŒä¹… cookieã€‚\n\n### 21.11. æ€»ç»“\n\nå°† cookie çš„æœ‰æ•ˆæœŸè®¾ç½®ä¸º 0 å®é™…ä¸Šæ˜¯åˆ›å»ºäº†ä¸€ä¸ªä¼šè¯ cookieï¼Œå®ƒåœ¨æµè§ˆå™¨ä¼šè¯æœŸé—´æœ‰æ•ˆï¼Œå¹¶åœ¨ç”¨æˆ·å…³é—­æµè§ˆå™¨æ—¶è‡ªåŠ¨åˆ é™¤ã€‚è¿™ç§ cookie é€‚ç”¨äºéœ€è¦ä¸´æ—¶å­˜å‚¨ä¿¡æ¯ä½†ä¸å¸Œæœ›é•¿æœŸä¿ç•™åœ¨ç”¨æˆ·è®¾å¤‡ä¸Šçš„åœºæ™¯ã€‚\n\n## 22. ä¸‹é¢ä»£ç çš„è¾“å‡ºæ˜¯ï¼Ÿ\n\n```javascript\nconsole.log(typeof typeof typeof null);\n\nconsole.log(typeof console.log(1));\n\n```\n\n### 22.1. åˆ†æ\n\n```javascript\n// åˆ†æ\n// 1. typeof null è¿”å›çš„æ˜¯ \"object\"\n// 2. typeof typeof nullï¼šå³ typeof \"object\" è¿”å›çš„æ˜¯ \"string\"\n// 3. typeof typeof typeof nullï¼šå³ typeof \"string\" è¿”å›çš„ \"string\"\nconsole.log(typeof typeof typeof null);\n\n// åˆ†æï¼š\n// 1. console.log(1) è¿”å›çš„æ˜¯ undefined\n// 2. typeof undefined è¿”å›çš„æ˜¯ \"undefined\"\nconsole.log(typeof console.log(1));\n\n// æ‰€ä»¥ output:\n// string\n// 1  å› ä¸º console.log(1) ä¼šæ‰§è¡Œçš„ï¼Œè¾“å‡º 1ï¼Œç„¶åè¿”å› undefined\n// undefined\n\n```\n\n## 23. å‰ç«¯æµè§ˆå™¨å®ç°æˆªå›¾åŠŸèƒ½ä¸»è¦æœ‰å‡ ç§å®ç°æ–¹å¼\n\n### 23.1. HTML5 Canvas æˆªå›¾\n\nè¿™æ˜¯æœ€åŸºæœ¬å’Œå¸¸ç”¨çš„æ–¹æ³•ï¼Œä¸»è¦ä½¿ç”¨ Canvas API æ¥å®ç°ã€‚\n\n```javascript hl:21\n// åŸºæœ¬å®ç°æ­¥éª¤\nfunction captureElement(element) {\n    // 1. åˆ›å»º canvas\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    \n    // 2. è®¾ç½® canvas å°ºå¯¸\n    canvas.width = element.offsetWidth;\n    canvas.height = element.offsetHeight;\n    \n    // 3. å°†ç›®æ ‡å…ƒç´ ç»˜åˆ¶åˆ° canvas\n    const html2canvas = new html2canvas(element);\n    \n    // 4. è½¬æ¢ä¸ºå›¾ç‰‡\n    const image = canvas.toDataURL('image/png');\n    \n    // 5. ä¸‹è½½æˆ–ä½¿ç”¨å›¾ç‰‡\n    const link = document.createElement('a');\n    link.download = 'screenshot.png';\n    link.href = image;\n    link.click();\n}\n```\n\n### 23.2. MediaDevices API (å±å¹•å½•åˆ¶)\n\nç”¨äºæ•è·å±å¹•å†…å®¹ï¼Œå¯ä»¥å®ç°æ›´å¤æ‚çš„å±å¹•æˆªå›¾åŠŸèƒ½ã€‚\n\n```javascript\nasync function captureScreen() {\n    try {\n        // 1. è¯·æ±‚å±å¹•æ•è·æƒé™\n        const stream = await navigator.mediaDevices.getDisplayMedia({\n            video: {\n                mediaSource: 'screen'\n            }\n        });\n        \n        // 2. åˆ›å»º video å…ƒç´ \n        const video = document.createElement('video');\n        video.srcObject = stream;\n        \n        // 3. ç­‰å¾…è§†é¢‘åŠ è½½\n        await new Promise(resolve => video.onloadedmetadata = resolve);\n        video.play();\n        \n        // 4. åˆ›å»º canvas å¹¶æˆªå›¾\n        const canvas = document.createElement('canvas');\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n        \n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(video, 0, 0);\n        \n        // 5. åœæ­¢æ‰€æœ‰è½¨é“\n        stream.getTracks().forEach(track => track.stop());\n        \n        // 6. è½¬æ¢ä¸ºå›¾ç‰‡\n        return canvas.toDataURL('image/png');\n    } catch (err) {\n        console.error('Error: ' + err);\n    }\n}\n```\n\n### 23.3. ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ html2canvas\n\nhtml2canvas æ˜¯ä¸€ä¸ªæµè¡Œçš„åº“ï¼Œå¯ä»¥å°† DOM å…ƒç´ è½¬æ¢ä¸º canvasã€‚\n\n```javascript\nimport html2canvas from 'html2canvas';\n\nfunction captureElementWithHtml2canvas(element) {\n    html2canvas(element, {\n        // é…ç½®é€‰é¡¹\n        useCORS: true,            // å¤„ç†è·¨åŸŸå›¾ç‰‡\n        scale: window.devicePixelRatio, // è®¾å¤‡åƒç´ æ¯”\n        logging: true,            // å¯ç”¨æ—¥å¿—\n        allowTaint: true,         // å…è®¸åŠ è½½è·¨åŸŸå›¾ç‰‡\n        backgroundColor: null     // èƒŒæ™¯è‰²\n    }).then(canvas => {\n        // è½¬æ¢ä¸ºå›¾ç‰‡\n        const image = canvas.toDataURL('image/png');\n        // å¤„ç†å›¾ç‰‡...\n    });\n}\n```\n\n### 23.4. æµè§ˆå™¨æ‰©å±• API\n\nå¦‚æœæ˜¯å¼€å‘æµè§ˆå™¨æ‰©å±•ï¼Œå¯ä»¥ä½¿ç”¨æµè§ˆå™¨æä¾›çš„æˆªå›¾ APIï¼š\n\n```javascript\n// Chrome æ‰©å±•ç¤ºä¾‹\nchrome.tabs.captureVisibleTab(null, {}, function(image) {\n    // image æ˜¯ base64 ç¼–ç çš„å›¾ç‰‡æ•°æ®\n});\n```\n\n### 23.5. å®ç°ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜\n\n#### 23.5.1. è·¨åŸŸèµ„æºå¤„ç†\n\n```javascript hl:3\n// å¤„ç†è·¨åŸŸå›¾ç‰‡\nconst img = new Image();\nimg.crossOrigin = 'anonymous';\nimg.src = url;\n```\n\n#### 23.5.2. é«˜åˆ†è¾¨ç‡å±å¹•æ”¯æŒ\n\n```javascript\n// è€ƒè™‘è®¾å¤‡åƒç´ æ¯”\ncanvas.width = element.offsetWidth * window.devicePixelRatio;\ncanvas.height = element.offsetHeight * window.devicePixelRatio;\ncontext.scale(window.devicePixelRatio, window.devicePixelRatio);\n```\n\n#### 23.5.3. å¼‚æ­¥å†…å®¹å¤„ç†\n\n```javascript\n// ç­‰å¾…å›¾ç‰‡åŠ è½½å®Œæˆ\nasync function waitForImages(element) {\n    const images = element.getElementsByTagName('img');\n    const promises = Array.from(images).map(img => {\n        if (img.complete) return Promise.resolve();\n        return new Promise(resolve => {\n            img.onload = resolve;\n            img.onerror = resolve;\n        });\n    });\n    await Promise.all(promises);\n}\n```\n\n#### 23.5.4. æ€§èƒ½ä¼˜åŒ–\n```javascript\n// ä½¿ç”¨ requestAnimationFrame ä¼˜åŒ–æ€§èƒ½\nrequestAnimationFrame(() => {\n    // æ‰§è¡Œæˆªå›¾æ“ä½œ\n});\n```\n\n### 23.6. å¸¸è§åº”ç”¨åœºæ™¯\n\n1. ç½‘é¡µå†…å®¹åˆ†äº«\n2. ç”Ÿæˆç¼©ç•¥å›¾\n3. é¡µé¢bugæˆªå›¾åé¦ˆ\n4. ç”Ÿæˆå›¾ç‰‡æŠ¥å‘Š\n5. ä¿å­˜canvasç»˜åˆ¶å†…å®¹\n\n### 23.7. æ€»ç»“\n\nå‰ç«¯å®ç°æˆªå›¾åŠŸèƒ½ä¸»è¦ä¾èµ–ï¼š\n- Canvas API è¿›è¡Œå›¾åƒå¤„ç†\n- MediaDevices API æ•è·å±å¹•å†…å®¹\n- ç¬¬ä¸‰æ–¹åº“æä¾›çš„åŠŸèƒ½\n- æµè§ˆå™¨æ‰©å±• API\n\n\n## 24. ä¸‹é¢ä»£ç çš„æ‰§è¡Œé¡ºåº\n\n```javascript hl:12\nvar a = 3;\nfunction c() {\n  alert(a);\n}\n\n(function () {\n  // ç«‹å³æ‰§è¡Œå‡½æ•°çš„å˜é‡åªåœ¨å‡½æ•°å†…éƒ¨æœ‰æ•ˆ\n  // è¿™é‡Œçš„ a æ˜¯å±€éƒ¨å˜é‡\n  // ä½†æ˜¯ c å‡½æ•°ä¸­çš„ a æ˜¯å…¨å±€å˜é‡\n  // æ‰€ä»¥ c å‡½æ•°ä¸­çš„ a ä»å…¨å±€å˜é‡ä¸­å–å€¼\n  var a = 4;\n  c(); // 3\n})();\n```\n\n## 25. æµè§ˆå™¨ç¼“å­˜çš„ä¼˜å…ˆçº§\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-45.png)\n\n## 26. promise.finnly å®ç°\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-46.png)\n\n\n## 27. promise then çš„ç¬¬äºŒä¸ªå‚æ•°å’Œ catch çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\n\n### 27.1. é”™è¯¯æ•è·èŒƒå›´\n\n1. `.then(onFulfilled, onRejected)` çš„ç¬¬äºŒä¸ªå‚æ•° (onRejected):\n\t- åªèƒ½æ•è·åœ¨å½“å‰ Promise å¯¹è±¡ä¸­å‘ç”Ÿçš„é”™è¯¯ã€‚\n\t- ä¸èƒ½æ•è· onFulfilled å‡½æ•°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰ä¸­æŠ›å‡ºçš„é”™è¯¯ã€‚\n2. `.catch(onRejected)`:\n\t- å¯ä»¥æ•è·åœ¨é“¾å¼è°ƒç”¨ä¸­**å‰é¢æ‰€æœ‰ Promise äº§ç”Ÿçš„é”™è¯¯**ã€‚\n\t- ä¹Ÿå¯ä»¥æ•è·å‰é¢ `.then()` ä¸­ onFulfilled å‡½æ•°é‡ŒæŠ›å‡ºçš„é”™è¯¯ã€‚\n\n### 27.2. ä»£ç ç¤ºä¾‹\n\n```javascript hl:6,20\n// ä½¿ç”¨ .then() çš„ç¬¬äºŒä¸ªå‚æ•°\npromise\n  .then(\n    result => {\n      console.log(result);\n      throw new Error('Error in onFulfilled'); // è¿™ä¸ªé”™è¯¯ä¸ä¼šè¢«æ•è·\n    },\n    error => {\n      console.error('Error caught by second argument of then:', error);\n    }\n  );\n\n// ä½¿ç”¨ .catch()\npromise\n  .then(result => {\n    console.log(result);\n    throw new Error('Error in onFulfilled');\n  })\n  .catch(error => {\n    console.error('Error caught by catch:', error); // è¿™é‡Œå¯ä»¥æ•è·ä¸Šé¢æŠ›å‡ºçš„é”™è¯¯\n  });\n```\n\n### 27.3. é“¾å¼è°ƒç”¨ä¸­çš„è¡Œä¸º\n\n1. `.then()` çš„ç¬¬äºŒä¸ªå‚æ•°ï¼š\n\t- åœ¨é“¾å¼è°ƒç”¨ä¸­ï¼Œæ¯ä¸ª `.then()` éƒ½å¯ä»¥æœ‰è‡ªå·±çš„é”™è¯¯å¤„ç†å‡½æ•°ã€‚\n\t- å¦‚æœä¸€ä¸ª `.then()` çš„ç¬¬äºŒä¸ªå‚æ•°å¤„ç†äº†é”™è¯¯ï¼Œé”™è¯¯ä¸ä¼šç»§ç»­ä¼ æ’­ã€‚\n1. `.catch()`:\n\t- é€šå¸¸æ”¾åœ¨ Promise é“¾çš„æœ«å°¾ï¼Œå¯ä»¥æ•è·æ•´ä¸ªé“¾ä¸­çš„ä»»ä½•é”™è¯¯ã€‚\n\t- æ›´ç¬¦åˆ\"å…ˆæ‰§è¡Œæ‰€æœ‰æ“ä½œï¼Œæœ€åç»Ÿä¸€å¤„ç†é”™è¯¯\"çš„æ¨¡å¼ã€‚\n\n### 27.4. ä»£ç å¯è¯»æ€§\n\n- `.catch()` é€šå¸¸æä¾›æ›´å¥½çš„ä»£ç å¯è¯»æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤šä¸ª Promise çš„é“¾å¼è°ƒç”¨æ—¶ã€‚\n- ä½¿ç”¨ `.catch()` å¯ä»¥å°†é”™è¯¯å¤„ç†é€»è¾‘é›†ä¸­åœ¨ä¸€å¤„ï¼Œè€Œä¸æ˜¯åˆ†æ•£åœ¨æ¯ä¸ª `.then()` ä¸­ã€‚\n\n### 27.5. ç¤ºä¾‹å¯¹æ¯”\n\n```javascript\n// ä½¿ç”¨ .then() çš„ç¬¬äºŒä¸ªå‚æ•°\nsomePromise\n  .then(result => processResult(result), error => handleError(error))\n  .then(newResult => furtherProcess(newResult), error => handleAnotherError(error));\n\n// ä½¿ç”¨ .catch()\nsomePromise\n  .then(result => processResult(result))\n  .then(newResult => furtherProcess(newResult))\n  .catch(error => handleAllErrors(error));\n```\n\n### 27.6. æœ€ä½³å®è·µ\n\n- é€šå¸¸æ¨èä½¿ç”¨ `.catch()` è€Œä¸æ˜¯ `.then()` çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œé™¤éä½ æœ‰ç‰¹å®šåŸå› éœ€è¦åœ¨æŸä¸ªç‰¹å®šçš„ Promise ä¸­å•ç‹¬å¤„ç†é”™è¯¯ã€‚\n- åœ¨å¤æ‚çš„ Promise é“¾ä¸­ï¼Œå¯ä»¥åœ¨å…³é”®ç‚¹ä½¿ç”¨ `.catch()`ï¼Œç„¶åç»§ç»­é“¾å¼è°ƒç”¨ï¼Œè¿™æ ·å¯ä»¥è¿›è¡Œæ›´ç»†ç²’åº¦çš„é”™è¯¯æ§åˆ¶ã€‚\n\n### 27.7. æ³¨æ„äº‹é¡¹\n\n- `.catch()` æœ¬èº«è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œå¦‚æœ `.catch()` ä¸­æ²¡æœ‰æŠ›å‡ºé”™è¯¯ï¼Œåç»­çš„ `.then()` ä»ä¼šè¢«è°ƒç”¨ã€‚\n- å¦‚æœåœ¨ `.catch()` ä¸­æŠ›å‡ºæ–°çš„é”™è¯¯ï¼Œå¯ä»¥è¢«åç»­çš„ `.catch()` æ•è·ã€‚\n\n### 27.8. æ€»ç»“ï¼š\n\n- `.then()` çš„ç¬¬äºŒä¸ªå‚æ•°é€‚ç”¨äºéœ€è¦å¯¹ç‰¹å®š Promise çš„é”™è¯¯è¿›è¡Œç²¾ç¡®å¤„ç†çš„æƒ…å†µã€‚\n- `.catch()` æ›´é€‚åˆå…¨å±€é”™è¯¯å¤„ç†ï¼Œæä¾›äº†æ›´å¥½çš„é“¾å¼è°ƒç”¨é”™è¯¯å¤„ç†èƒ½åŠ›å’Œä»£ç å¯è¯»æ€§ã€‚\n- åœ¨å®é™…å¼€å‘ä¸­ï¼Œ`.catch()` ä½¿ç”¨æ›´ä¸ºæ™®éï¼Œå› ä¸ºå®ƒæ›´çµæ´»ä¸”èƒ½å¤„ç†æ›´å¹¿æ³›çš„é”™è¯¯æƒ…å†µã€‚\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-47.png)\n\n\n## 28. this çš„é—®é¢˜\n\n```javascript hl:5,8,14\nvar name = 123;\nvar obj = {\n  name: 456,\n  print: function () {\n    // è¿™é‡Œçš„ this æŒ‡å‘ objï¼Œä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨\n    console.log(this.name);\n    function a() {\n      console.log(this.name);\n    }\n    a();\n  },\n};\n\n// æ™®é€šå‡½æ•°çš„ this æŒ‡å‘å–å†³äºåœ¨ä½•å¤„è¢«è°ƒç”¨ï¼Œè¿™é‡Œ a å‡½æ•°æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸè¢«è°ƒç”¨çš„ï¼Œæ‰€ä»¥ this æŒ‡å‘å…¨å±€å¯¹è±¡\nobj.print(); // 123\n\n```\n\n## 29. generator å‡½æ•°æ˜¯å¦‚ä½•åšåˆ°ä¸­æ–­å’Œæ¢å¤æ‰§è¡Œçš„ï¼Ÿ\n\n### 29.1. åŸºæœ¬åŸç†\n\nGenerator å‡½æ•°çš„æ ¸å¿ƒæœºåˆ¶åŒ…æ‹¬ï¼š\n\n1. **å‡½æ•°çŠ¶æ€ä¿å­˜**ï¼šGenerator å‡½æ•°å¯ä»¥ä¿å­˜å…¶å†…éƒ¨çŠ¶æ€ã€‚\n2. **yield å…³é”®å­—**ï¼šç”¨äºæš‚åœå‡½æ•°æ‰§è¡Œå¹¶å¯èƒ½è¿”å›ä¸€ä¸ªå€¼ã€‚\n3. **è¿­ä»£å™¨å¯¹è±¡**ï¼šGenerator å‡½æ•°è¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œç”¨äºæ§åˆ¶å‡½æ•°çš„æ‰§è¡Œã€‚\n\n### 29.2. è¯¦ç»†å®ç°æœºåˆ¶\n\n#### 29.2.1. å‡½æ•°å¯¹è±¡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡\n\nå½“å®šä¹‰ä¸€ä¸ª Generator å‡½æ•°æ—¶ï¼ŒJavaScript å¼•æ“ä¼šåˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡åŒ…å«ï¼š\n\n- å‡½æ•°ä½“ä»£ç \n- é—­åŒ…å˜é‡\n- ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆï¼ŒæŒ‡å‘å½“å‰çš„æ‰§è¡Œä½ç½®\n\n#### 29.2.2. yield è¯­å¥çš„ä½œç”¨\n\n`yield` è¯­å¥åœ¨ Generator å‡½æ•°ä¸­èµ·åˆ°å…³é”®ä½œç”¨ï¼š\n\n- å®ƒæ ‡è®°äº†å‡½æ•°çš„æš‚åœç‚¹\n- å¯ä»¥è¿”å›ä¸€ä¸ªå€¼ç»™è°ƒç”¨è€…\n- ä¿å­˜å½“å‰çš„æ‰§è¡ŒçŠ¶æ€ï¼ŒåŒ…æ‹¬å±€éƒ¨å˜é‡å’Œè¡¨è¾¾å¼çš„å€¼\n\n#### 29.2.3. è¿­ä»£å™¨å¯¹è±¡\n\nå½“è°ƒç”¨ Generator å‡½æ•°æ—¶ï¼Œå®ƒä¸ä¼šç«‹å³æ‰§è¡Œå‡½æ•°ä½“ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ª `next()` æ–¹æ³•ï¼Œç”¨äºæ§åˆ¶ Generator çš„æ‰§è¡Œï¼š\n\n```javascript\nfunction* exampleGenerator() {\n    yield 1;\n    yield 2;\n    return 3;\n}\n\nconst gen = exampleGenerator();\nconsole.log(gen.next()); // { value: 1, done: false }\nconsole.log(gen.next()); // { value: 2, done: false }\nconsole.log(gen.next()); // { value: 3, done: true }\n```\n\n#### 29.2.4. æ‰§è¡Œè¿‡ç¨‹\n\n1. **åˆå§‹åŒ–**ï¼šè°ƒç”¨ Generator å‡½æ•°åˆ›å»ºè¿­ä»£å™¨å¯¹è±¡ï¼Œä½†ä¸æ‰§è¡Œå‡½æ•°ä½“ã€‚\n2. **æ‰§è¡Œ**ï¼šæ¯æ¬¡è°ƒç”¨ `next()` æ–¹æ³•ï¼Œå‡½æ•°ä»å½“å‰ä½ç½®æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ª `yield` è¯­å¥ã€‚\n3. **æš‚åœ**ï¼šé‡åˆ° `yield` æ—¶ï¼Œå‡½æ•°æ‰§è¡Œæš‚åœï¼Œä¿å­˜å½“å‰çŠ¶æ€ï¼Œå¹¶è¿”å› `yield` åçš„è¡¨è¾¾å¼å€¼ã€‚\n4. **æ¢å¤**ï¼šä¸‹ä¸€æ¬¡è°ƒç”¨ `next()` æ—¶ï¼Œä»ä¸Šæ¬¡æš‚åœçš„ä½ç½®ç»§ç»­æ‰§è¡Œã€‚\n\n### 29.3. å†…éƒ¨å®ç°ç»†èŠ‚\n\nè™½ç„¶å…·ä½“å®ç°å¯èƒ½å›  JavaScript å¼•æ“è€Œå¼‚ï¼Œä½†åŸºæœ¬åŸç†å¦‚ä¸‹ï¼š\n\n#### 29.3.1. çŠ¶æ€æœº\n\nGenerator å‡½æ•°å†…éƒ¨å®é™…ä¸Šæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œæ¯ä¸ª `yield` è¯­å¥å¯¹åº”ä¸€ä¸ªçŠ¶æ€ï¼š\n\n```javascript\nfunction* generatorFunction() {\n    yield 1;\n    yield 2;\n    yield 3;\n}\n\n// å¯ä»¥è¢«æ¦‚å¿µåŒ–ä¸ºï¼š\nfunction generatorFunction() {\n    let state = 0;\n    return {\n        next() {\n            switch (state) {\n                case 0:\n                    state = 1;\n                    return { value: 1, done: false };\n                case 1:\n                    state = 2;\n                    return { value: 2, done: false };\n                case 2:\n                    state = 3;\n                    return { value: 3, done: false };\n                case 3:\n                    return { value: undefined, done: true };\n            }\n        }\n    };\n}\n```\n\n#### 29.3.2. é—­åŒ…å’Œä¸Šä¸‹æ–‡ä¿å­˜\n\nGenerator ä½¿ç”¨é—­åŒ…æ¥ä¿å­˜å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬å±€éƒ¨å˜é‡å’Œæ‰§è¡Œä½ç½®ï¼š\n\n```javascript\nfunction* counter() {\n    let count = 0;\n    while (true) {\n        yield ++count;\n    }\n}\n\n// å¯ä»¥è¢«æ¦‚å¿µåŒ–ä¸ºï¼š\nfunction counter() {\n    let count = 0;\n    return {\n        next() {\n            count++;\n            return { value: count, done: false };\n        }\n    };\n}\n```\n\n#### 29.3.3. å¼‚æ­¥æ“ä½œå¤„ç†\n\nGenerator ç‰¹åˆ«é€‚åˆå¤„ç†å¼‚æ­¥æ“ä½œï¼Œé€šè¿‡ä¸ Promise ç»“åˆä½¿ç”¨ï¼š\n\n```javascript\nfunction* fetchData() {\n    try {\n        const response = yield fetch('https://api.example.com/data');\n        const data = yield response.json();\n        console.log(data);\n    } catch (error) {\n        console.error('Error:', error);\n    }\n}\n\nfunction runGenerator(genFn) {\n    const gen = genFn();\n    function step(result) {\n        if (result.done) return result.value;\n        return Promise.resolve(result.value).then(\n            value => step(gen.next(value)),\n            error => step(gen.throw(error))\n        );\n    }\n    return step(gen.next());\n}\n\nrunGenerator(fetchData);\n```\n\n### 29.4. æ€§èƒ½è€ƒè™‘\n\n- Generator å‡½æ•°çš„ä¸­æ–­å’Œæ¢å¤æ“ä½œæ¯”æ™®é€šå‡½æ•°è°ƒç”¨è¦æ…¢ä¸€äº›ã€‚\n- ä½†åœ¨å¤„ç†å¤§é‡æ•°æ®æˆ–å¤æ‚å¼‚æ­¥æµç¨‹æ—¶ï¼ŒGenerator å¯ä»¥æä¾›æ›´å¥½çš„å†…å­˜æ•ˆç‡å’Œä»£ç ç»„ç»‡ã€‚\n\n### 29.5. æ€»ç»“\n\nGenerator å‡½æ•°é€šè¿‡å·§å¦™çš„çŠ¶æ€ç®¡ç†å’Œé—­åŒ…æœºåˆ¶ï¼Œå®ç°äº†å‡½æ•°æ‰§è¡Œçš„ä¸­æ–­å’Œæ¢å¤ã€‚è¿™ç§æœºåˆ¶ä¸ºå¤„ç†å¤æ‚çš„åŒæ­¥å’Œå¼‚æ­¥æµç¨‹æä¾›äº†å¼ºå¤§è€Œçµæ´»çš„å·¥å…·ï¼Œå°½ç®¡åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šå¸¦æ¥è½»å¾®çš„æ€§èƒ½å¼€é”€ã€‚ç†è§£ Generator çš„å·¥ä½œåŸç†æœ‰åŠ©äºæ›´å¥½åœ°åˆ©ç”¨è¿™ä¸€å¼ºå¤§ç‰¹æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¼‚æ­¥æ“ä½œå’Œå¤æ‚æ•°æ®æµæ—¶ã€‚\n\n## 30. åˆ—ä¸¾æµè§ˆå™¨çš„å‡ ä¸ªå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡\n\n- dom äº‹ä»¶\n- script æ ‡ç­¾çš„åŠ è½½ä¸æ‰§è¡Œ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-48.png)\n\n\n## 31. è¯´è¯´ toPrimitive çš„ç†è§£\n\n`toPrimitive` æ˜¯ JavaScript ä¸­ä¸€ä¸ªé‡è¦çš„å†…éƒ¨æ“ä½œï¼Œç”¨äºå°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼\n\n### 31.1. åŸºæœ¬æ¦‚å¿µ\n\n`Symbol.toPrimitive` æ˜¯ä¸€ä¸ªå†…ç½®çš„ Symbol å€¼ï¼Œå®ƒæŒ‡å®šäº†ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼ã€‚å½“éœ€è¦å°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼æ—¶ï¼ŒJavaScript å¼•æ“ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚\n\n### 31.2. è½¬æ¢è§„åˆ™\n\nå¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼æ—¶æœ‰ä¸‰ç§æ¨¡å¼ï¼ˆ`hint`ï¼‰ï¼š\n\n1. **\"number\"** - æœŸæœ›å¾—åˆ°ä¸€ä¸ªæ•°å­—\n2. **\"string\"** - æœŸæœ›å¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²\n3. **\"default\"** - æ²¡æœ‰æ˜ç¡®æœŸæœ›ï¼Œç”±å¯¹è±¡è‡ªè¡Œå†³å®š\n\n### 31.3. å®ç°ç¤ºä¾‹\n\n```javascript\n// è‡ªå®šä¹‰å¯¹è±¡çš„ toPrimitive è¡Œä¸º\nconst obj = {\n    [Symbol.toPrimitive](hint) {\n        switch (hint) {\n            case 'number':\n                return 42;\n            case 'string':\n                return 'hello';\n            case 'default':\n                return 'default';\n            default:\n                throw new Error('Invalid hint');\n        }\n    }\n};\n\n// æµ‹è¯•ä¸åŒè½¬æ¢åœºæ™¯\nconsole.log(+obj);          // 42 (number hint)\nconsole.log(`${obj}`);      // \"hello\" (string hint)\nconsole.log(obj + '');      // \"default\" (default hint)\n```\n\n### 31.4. é»˜è®¤è½¬æ¢è¿‡ç¨‹\n\nå¦‚æœæ²¡æœ‰å®ç° `Symbol.toPrimitive`ï¼ŒJavaScript ä¼šæŒ‰ç…§ä»¥ä¸‹é¡ºåºå°è¯•è½¬æ¢ï¼š\n\n#### 31.4.1. å¯¹äº hint \"string\":\n\n1. å…ˆè°ƒç”¨ `toString()`\n2. å¦‚æœè¿”å›çš„ä¸æ˜¯åŸå§‹å€¼ï¼Œåˆ™è°ƒç”¨ `valueOf()`\n3. å¦‚æœè¿˜ä¸æ˜¯åŸå§‹å€¼ï¼Œåˆ™æŠ›å‡º TypeError\n\n```javascript\nconst obj = {\n    toString() {\n        return \"Custom String\";\n    },\n    valueOf() {\n        return 100;\n    }\n};\n\nconsole.log(String(obj)); // \"Custom String\"\n```\n\n#### 31.4.2. å¯¹äº hint \"number\" æˆ– \"default\":\n\n1. å…ˆè°ƒç”¨ `valueOf()`\n2. å¦‚æœè¿”å›çš„ä¸æ˜¯åŸå§‹å€¼ï¼Œåˆ™è°ƒç”¨ `toString()`\n3. å¦‚æœè¿˜ä¸æ˜¯åŸå§‹å€¼ï¼Œåˆ™æŠ›å‡º TypeError\n\n```javascript\nconst obj = {\n    toString() {\n        return \"Custom String\";\n    },\n    valueOf() {\n        return 100;\n    }\n};\n\nconsole.log(Number(obj)); // 100\n```\n\n### 31.5. å¸¸è§ä½¿ç”¨åœºæ™¯\n\n#### 31.5.1. æ•°å­¦è¿ç®—\n\n```javascript\nconst obj = {\n    value: 42,\n    [Symbol.toPrimitive](hint) {\n        if (hint === 'number') {\n            return this.value;\n        }\n        return null;\n    }\n};\n\nconsole.log(obj * 2); // 84\n```\n\n#### 31.5.2. å­—ç¬¦ä¸²æ‹¼æ¥\n\n```javascript\nconst obj = {\n    firstName: 'John',\n    lastName: 'Doe',\n    [Symbol.toPrimitive](hint) {\n        if (hint === 'string') {\n            return `${this.firstName} ${this.lastName}`;\n        }\n        return null;\n    }\n};\n\nconsole.log(`Name: ${obj}`); // \"Name: John Doe\"\n```\n\n### 31.6. æ—¥æœŸå¯¹è±¡ç¤ºä¾‹\n\nDate å¯¹è±¡æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å†…ç½® toPrimitive å®ç°ç¤ºä¾‹ï¼š\n\n```javascript\nconst date = new Date();\n\n// string hint\nconsole.log(String(date)); // å½“å‰æ—¥æœŸçš„å­—ç¬¦ä¸²è¡¨ç¤º\n\n// number hint\nconsole.log(+date); // æ—¶é—´æˆ³\n\n// default hint\nconsole.log(date + ''); // å½“å‰æ—¥æœŸçš„å­—ç¬¦ä¸²è¡¨ç¤º\n```\n\n\n\n### 31.9. æ€»ç»“\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-49.png)\n\n","a0faf9b510d151a2b11bb8581cdca994":"\n# ç³»ç»Ÿè®¾è®¡é¢˜\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å¦‚ä½•è®¾è®¡ä¸€ä¸ªè½¬ç›˜ç»„ä»¶ï¼Œéœ€è¦è€ƒè™‘å“ªäº›æ–¹é¢ï¼Ÿ \n\n### 1.1. ä¸šåŠ¡éœ€æ±‚ç»†èŠ‚\n\né¦–å…ˆï¼Œå½“ç„¶éœ€è¦å’Œå„æ–¹å¯¹å…¶ä¸šåŠ¡éœ€æ±‚ç»†èŠ‚\n\n### 1.2. æŠ€æœ¯å®ç°è€ƒè™‘\n\n#### 1.2.1. æ¸²æŸ“æ–¹å¼é€‰æ‹©\n\n##### 1.2.1.1. **Canvas æ–¹æ¡ˆ**\n\n```typescript\nclass WheelCanvas {\n    private canvas: HTMLCanvasElement;\n    private ctx: CanvasRenderingContext2D;\n    \n    constructor(config: WheelConfig) {\n        this.canvas = document.createElement('canvas');\n        this.ctx = this.canvas.getContext('2d')!;\n        this.initCanvas(config);\n    }\n    \n    private drawSector(startAngle: number, endAngle: number, color: string) {\n        this.ctx.beginPath();\n        this.ctx.moveTo(this.centerX, this.centerY);\n        this.ctx.arc(this.centerX, this.centerY, this.radius, startAngle, endAngle);\n        this.ctx.fillStyle = color;\n        this.ctx.fill();\n    }\n    \n    private drawPrizes() {\n        // ç»˜åˆ¶å¥–å“æ–‡å­—å’Œå›¾ç‰‡\n    }\n}\n```\n\n##### 1.2.1.2. **CSS Transform æ–¹æ¡ˆ**\n\n```typescript\nclass WheelCSS {\n    private container: HTMLElement;\n    \n    constructor(config: WheelConfig) {\n        this.container = document.createElement('div');\n        this.initWheel(config);\n    }\n    \n    private rotate(degree: number) {\n        this.container.style.transform = `rotate(${degree}deg)`;\n    }\n}\n```\n\n#### 1.2.2. åŠ¨ç”»å®ç°\n\n```typescript\nclass WheelAnimation {\n    private currentRotation: number = 0;\n    private isSpinning: boolean = false;\n    \n    spin(targetDegree: number) {\n        if (this.isSpinning) return;\n        \n        this.isSpinning = true;\n        const startTime = performance.now();\n        const duration = 5000; // 5ç§’\n        \n        const animate = (currentTime: number) => {\n            const elapsed = currentTime - startTime;\n            const progress = Math.min(elapsed / duration, 1);\n            \n            // ä½¿ç”¨ç¼“åŠ¨å‡½æ•°\n            const easeProgress = this.easeInOutQuad(progress);\n            const currentDegree = this.currentRotation + (targetDegree * easeProgress);\n            \n            this.rotate(currentDegree);\n            \n            if (progress < 1) {\n                requestAnimationFrame(animate);\n            } else {\n                this.isSpinning = false;\n                this.currentRotation = targetDegree % 360;\n            }\n        };\n        \n        requestAnimationFrame(animate);\n    }\n    \n    private easeInOutQuad(t: number): number {\n        return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n    }\n}\n```\n\n### 1.3. äº¤äº’ä½“éªŒä¼˜åŒ–&æ€§èƒ½\n\n- æ€§èƒ½ä¿è¯\n- å¼±ç½‘ç¯å¢ƒ\n- loading \n- è®¾å¤‡å…¼å®¹æ€§\n- å¦‚æœ åœ¨ APP ä¸­éœ€è¦åŸç”Ÿ APP èƒ½åŠ›çš„ä¸€äº›æ”¯æŒ\n- æ·»åŠ éŸ³æ•ˆ\n- åŠ¨ç”»æ€§èƒ½ä¿è¯\n- ä¸»é¢˜è®¾ç½®ç­‰\n- å•å…ƒæµ‹è¯•\n- å®¹é”™åŠå¼‚å¸¸æƒ…å†µèƒ½åŠ›\n\n### 1.4. API è®¾è®¡\n\n```typescript\nclass LuckyWheel {\n    constructor(config: WheelConfig) {\n        this.init(config);\n    }\n    \n    // å…¬å…±æ–¹æ³•\n    public spin(targetIndex?: number): Promise<Prize> {\n        return new Promise((resolve, reject) => {\n            // å®ç°è½¬ç›˜æ—‹è½¬é€»è¾‘\n        });\n    }\n    \n    public stop() {\n        // åœæ­¢è½¬ç›˜\n    }\n    \n    public updatePrizes(prizes: Prize[]) {\n        // æ›´æ–°å¥–å“é…ç½®\n    }\n    \n    // äº‹ä»¶ç›‘å¬\n    public on(event: WheelEvent, callback: Function) {\n        // æ·»åŠ äº‹ä»¶ç›‘å¬\n    }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst wheel = new LuckyWheel({\n    prizes: [...],\n    size: 400,\n    duration: 5000,\n    rotations: 6,\n    easing: 'easeInOutQuad'\n});\n\nwheel.on('spinStart', () => console.log('å¼€å§‹æ—‹è½¬'));\nwheel.on('spinEnd', (prize) => console.log('åœæ­¢æ—‹è½¬ï¼Œä¸­å¥–ï¼š', prize));\n\nwheel.spin().then(prize => {\n    console.log('æ­å–œè·å¾—ï¼š', prize.name);\n});\n```\n\n\n\n### 1.5. åç«¯äº¤äº’è®¾è®¡\n\n#### 1.5.1. API è®¾è®¡\n\n```typescript\ninterface SpinResult {\n    prizeId: string;\n    angle: number;\n    message: string;\n}\n\nclass WheelBackendInteraction {\n    private apiUrl: string;\n\n    constructor(apiUrl: string) {\n        this.apiUrl = apiUrl;\n    }\n\n    async requestSpin(): Promise<SpinResult> {\n        try {\n            const response = await fetch(`${this.apiUrl}/spin`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${this.getToken()}`\n                },\n                body: JSON.stringify({\n                    userId: this.getUserId(),\n                    timestamp: Date.now()\n                })\n            });\n\n            if (!response.ok) {\n                throw new Error('Spin request failed');\n            }\n\n            return await response.json();\n        } catch (error) {\n            console.error('Spin request error:', error);\n            throw error;\n        }\n    }\n\n    private getToken(): string {\n        // è·å–ç”¨æˆ·è®¤è¯token\n        return localStorage.getItem('authToken') || '';\n    }\n\n    private getUserId(): string {\n        // è·å–ç”¨æˆ·ID\n        return localStorage.getItem('userId') || '';\n    }\n}\n```\n\n#### 1.5.2. ç»“æœéªŒè¯\n\n```typescript\nclass ResultVerification {\n    verifyResult(clientResult: SpinResult, serverResult: SpinResult): boolean {\n        return clientResult.prizeId === serverResult.prizeId &&\n               Math.abs(clientResult.angle - serverResult.angle) < 1; // å…è®¸å°è¯¯å·®\n    }\n}\n```\n\n### 1.6. å®‰å…¨æªæ–½\n\n- è¯·æ±‚ç­¾å\n- æ£€æŸ¥ç”¨æˆ·æƒé™å’Œèµ„æ ¼\n- è¯·æ±‚é™æµ\n- é˜²åˆ·å’Œä½œå¼Šé¢„é˜²\n\t- å‰ç«¯é˜²åˆ·\n\t- è®¾å¤‡æŒ‡çº¹\n\t- æ•°æ®åŠ å¯†\n- é”™è¯¯å¤„ç†å’Œæ—¥å¿—\n- å®æ–½ IP å°ç¦æˆ–è´¦æˆ·å†»ç»“æœºåˆ¶\n- ä¸­å¥–ç®—æ³•\n- å®æ–½å®æ—¶ç›‘æ§ç³»ç»Ÿï¼Œå¯¹å¼‚å¸¸è¡Œä¸ºè¿›è¡Œå¿«é€Ÿå“åº”ã€‚\n\n### å…¶ä»–\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-51.png)\n\n\n","b263fc493e18562c96e2119a812773c3":"\n# é¢è¯•é¢˜ 12\n\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä¸‹é¢å‡½æ•°çš„æ‰§è¡Œæƒ…å†µ \n\n```javascript hl:3\nvar b = 10;\n(function b() {\n  // åœ¨å…·åå‡½æ•°è¡¨è¾¾å¼ä¸­ï¼Œå‡½æ•°åæ ‡è¯†ç¬¦åœ¨å‡½æ•°å†…éƒ¨æ˜¯åªè¯»çš„ï¼ˆread-onlyï¼‰\n  // ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™ // TypeError: Assignment to constant variable\n  // æ‰€ä»¥è¿™é‡Œä¿®æ”¹ b çš„å€¼æ˜¯æ— æ•ˆçš„\n  b = 20;\n  console.log(b);\n});\n\nconsole.log(b); // 10\n```\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-52.png)\n\n### 1.1. ä¸¥æ ¼æ¨¡å¼ä¸‹çš„è¡Œä¸º\n\nåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå°è¯•ä¿®æ”¹åªè¯»æ ‡è¯†ç¬¦ä¼šæŠ›å‡ºé”™è¯¯ï¼š\n\n```javascript\nvar b = 10;\n(function b() {\n    'use strict';\n    b = 20;  // TypeError: Assignment to constant variable\n    console.log(b);\n})();\n```\n\n### 1.2. ä½¿ç”¨ä¸åŒçš„å˜é‡å\n\n```javascript\nvar b = 10;\n(function c() {\n    b = 20;\n    console.log(b);  // è¾“å‡º 20\n})();\nconsole.log(b);  // è¾“å‡º 20\n```\n\n### 1.3. åœ¨å‡½æ•°å†…éƒ¨å£°æ˜åŒåå˜é‡\n\n```javascript hl:3\nvar b = 10;\n(function b() {\n    var b = 20;  // åˆ›å»ºæ–°çš„å±€éƒ¨å˜é‡\n    console.log(b);  // è¾“å‡º 20\n})();\nconsole.log(b);  // è¾“å‡º 10\n```\n\n## 2. è¯·ç®€è¿° Reflect ä½œç”¨\n\nReflect æ˜¯ ES6 (ECMAScript 2015) å¼•å…¥çš„ä¸€ä¸ªæ–°çš„å…¨å±€å¯¹è±¡ï¼Œå®ƒæä¾›äº†ä¸€ç»„æ–¹æ³•æ¥æ“ä½œå¯¹è±¡ã€‚Reflect çš„ä¸»è¦ä½œç”¨å¯ä»¥æ¦‚æ‹¬å¦‚ä¸‹ï¼š\n\n### 2.1. ç»Ÿä¸€æ“ä½œå¯¹è±¡çš„ API\n\nReflect æä¾›äº†ä¸€å¥—ç»Ÿä¸€çš„æ–¹æ³•æ¥æ‰§è¡Œ JavaScript å¯¹è±¡çš„å¸¸è§æ“ä½œï¼Œå¦‚å±æ€§çš„è¯»å–ã€è®¾ç½®ã€åˆ é™¤ç­‰ã€‚è¿™äº›æ–¹æ³•ä¸å¯¹åº”çš„ Object æ–¹æ³•ç›¸ä¼¼ï¼Œä½†æ›´åŠ è§„èŒƒåŒ–å’ŒåŠŸèƒ½ç»Ÿä¸€ã€‚\n\n### 2.2. ç®€åŒ–ä»£ç†ï¼ˆProxyï¼‰çš„åˆ›å»º\n\nReflect çš„æ–¹æ³•ä¸ Proxy çš„å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œä½¿å¾—åœ¨å®ç°ä»£ç†æ—¶æ›´åŠ æ–¹ä¾¿å’Œç›´è§‚ã€‚\n\n### 2.3. æä¾›å‡½æ•°å¼ç¼–ç¨‹é£æ ¼çš„å¯¹è±¡æ“ä½œ\nReflect çš„æ–¹æ³•éƒ½æ˜¯å‡½æ•°ï¼Œå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œæœ‰åˆ©äºå‡½æ•°å¼ç¼–ç¨‹ã€‚\n\n### 2.4. æ›¿ä»£ä¸€äº› Object çš„æ–¹æ³•\n\næŸäº› Object ä¸Šçš„æ–¹æ³•åœ¨ Reflect ä¸­æœ‰å¯¹åº”çš„ã€æ›´åˆç†çš„å®ç°ã€‚\n\n### 2.5. è¿”å›æ›´åˆç†çš„ç»“æœ\n\næŸäº›æ“ä½œï¼ˆå¦‚ definePropertyï¼‰åœ¨ Reflect ä¸­ä¼šè¿”å›å¸ƒå°”å€¼è¡¨ç¤ºæˆåŠŸä¸å¦ï¼Œè€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸ã€‚\n\nè®©æˆ‘ä»¬é€šè¿‡ä¸€äº›ä¾‹å­æ¥å…·ä½“è¯´æ˜ Reflect çš„ä½œç”¨ï¼š\n\n```javascript\n// 1. è·å–å±æ€§\nconst obj = { x: 1, y: 2 };\nconsole.log(Reflect.get(obj, 'x')); // 1\n\n// 2. è®¾ç½®å±æ€§\nReflect.set(obj, 'z', 3);\nconsole.log(obj); // { x: 1, y: 2, z: 3 }\n\n// 3. åˆ é™¤å±æ€§\nReflect.deleteProperty(obj, 'y');\nconsole.log(obj); // { x: 1, z: 3 }\n\n// 4. æ£€æŸ¥å¯¹è±¡æ˜¯å¦æœ‰æŸä¸ªå±æ€§\nconsole.log(Reflect.has(obj, 'x')); // true\n\n// 5. è·å–å¯¹è±¡çš„æ‰€æœ‰å±æ€§\nconsole.log(Reflect.ownKeys(obj)); // ['x', 'z']\n\n// 6. åˆ›å»ºæ–°å¯¹è±¡\nconst newObj = Reflect.construct(function(a, b) {\n  this.sum = a + b;\n}, [1, 2]);\nconsole.log(newObj.sum); // 3\n\n// 7. è°ƒç”¨å‡½æ•°å¹¶æŒ‡å®š this\nfunction greet() {\n  return `Hello, ${this.name}!`;\n}\nconsole.log(Reflect.apply(greet, { name: 'Alice' }, [])); // \"Hello, Alice!\"\n\n// 8. å®šä¹‰æ–°å±æ€§\nReflect.defineProperty(obj, 'w', {\n  value: 4,\n  writable: true,\n  enumerable: true,\n  configurable: true\n});\nconsole.log(obj.w); // 4\n```\n\n### 2.6. å…¶ä»–\n\n1. Reflect ä¸»è¦ç”¨äºæ“ä½œæ™®é€šå¯¹è±¡ï¼Œä¸ç›´æ¥æ”¯æŒ Mapã€Set ç­‰é›†åˆç±»å‹\n2. Map ç­‰é›†åˆç±»å‹æœ‰è‡ªå·±çš„å®ä¾‹æ–¹æ³•è¿›è¡Œæ“ä½œ\n3. å¦‚æœéœ€è¦ä½¿ç”¨ Reflect æ“ä½œ Mapï¼Œå¯ä»¥ï¼š\n    - é€šè¿‡ Reflect.apply è°ƒç”¨ `Map çš„åŸå‹æ–¹æ³•`\n    - ä½¿ç”¨ `Proxy` ä»£ç† Map çš„æ“ä½œ\n\n## 3. ä»£ç æ‰§è¡Œ\n\n```javascript hl:11\nPromise.reject(1)\n  .then(\n    (res) => {\n      console.log(2, res);\n    },\n    (err) => {\n      console.log(3, err);\n    },\n  )\n  .catch((err) => {\n    // è¿™é‡Œä¸ä¼šæ‰§è¡Œï¼Œå› ä¸ºå‰é¢å·²ç»æœ‰äº†é”™è¯¯å¤„ç†\n    console.log(4, err);\n  });\n\n```\n\n## 4. å¦‚ä½•æŠŠä¸€ä¸ªå¯¹è±¡å˜æˆå¯è¿­ä»£å¯¹è±¡\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-7.png)\n\n## 5. å¦‚ä½•åœ¨ Canvas è·å–è·¨åŸŸçš„å›¾ç‰‡\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-8.png)\n\nå½“ç„¶ï¼Œéœ€è¦è®¾ç½®å›¾ç‰‡çš„å“åº”å¤´ï¼Œå…è®¸è·¨åŸŸ\n\n## 6. WebSocket åè®®æœ¬èº«æ˜¯æ²¡æœ‰è·¨åŸŸé™åˆ¶çš„\n\n### 6.1. å®šä¹‰\n\n1. WebSocket æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ã€å®Œæ•´çš„åè®®ï¼Œä¸ HTTP åè®®æ˜¯å¹³è¡Œçš„å…³ç³»ã€‚è™½ç„¶ WebSocket è¿æ¥çš„å»ºç«‹éœ€è¦ä¾èµ– HTTP åè®®è¿›è¡Œä¸€æ¬¡æ¡æ‰‹ï¼ˆupgradeï¼‰ï¼Œä½†æ˜¯ä¸€æ—¦ WebSocket è¿æ¥å»ºç«‹æˆåŠŸåï¼Œåç»­çš„æ•°æ®ä¼ è¾“å°±ä¸ HTTP æ— å…³äº†ã€‚\n2. æµè§ˆå™¨åœ¨å®ç° WebSocket åè®®æ—¶ï¼Œé»˜è®¤å°±æ˜¯å…è®¸è·¨åŸŸçš„ã€‚è¿™æ„å‘³ç€ï¼š\n\t- ä½ å¯ä»¥ä»ä»»ä½•åŸŸåä¸‹çš„é¡µé¢è¿æ¥åˆ°ä»»ä½•æœåŠ¡å™¨çš„ WebSocket æœåŠ¡\n\t- ä¸éœ€è¦åƒ HTTP è¯·æ±‚é‚£æ ·é…ç½® CORSï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰ç›¸å…³çš„å¤´éƒ¨\n\n### 6.2. æ¡æ‰‹é˜¶æ®µçš„é™åˆ¶\n\n- åœ¨ WebSocket è¿æ¥å»ºç«‹æ—¶çš„ HTTP æ¡æ‰‹é˜¶æ®µï¼Œæµè§ˆå™¨ä¼šå‘é€ Origin å¤´éƒ¨\n- æœåŠ¡å™¨å¯ä»¥é€šè¿‡æ£€æŸ¥ Origin å¤´éƒ¨æ¥å†³å®šæ˜¯å¦å…è®¸è¿æ¥\n- è¿™æ˜¯ä¸€ç§æœåŠ¡å™¨ç«¯çš„å®‰å…¨æœºåˆ¶ï¼Œè€Œä¸æ˜¯æµè§ˆå™¨çš„è·¨åŸŸé™åˆ¶\n\n### 6.3. æœ€ä½³å®è·µ\n   ```javascript\n   // å®¢æˆ·ç«¯ä»£ç ç¤ºä¾‹\n   const ws = new WebSocket('ws://example.com/socketserver');\n   \n   // æœåŠ¡å™¨ç«¯å¯ä»¥æ£€æŸ¥ Originï¼ˆä»¥ Node.js ä¸ºä¾‹ï¼‰\n   wss.on('connection', function connection(ws, request) {\n     const origin = request.headers.origin;\n     if (origin !== 'https://trusted-site.com') {\n       ws.close();\n       return;\n     }\n     // å¤„ç†æ­£å¸¸è¿æ¥...\n   });\n   ```\n\n### 6.4. å®‰å…¨è€ƒè™‘\n   - è™½ç„¶ WebSocket æ²¡æœ‰è·¨åŸŸé™åˆ¶ï¼Œä½†å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œ**æœåŠ¡å™¨ç«¯åº”è¯¥å®ç°è‡ªå·±çš„éªŒè¯æœºåˆ¶**\n   - å¯ä»¥é€šè¿‡ tokenã€session ç­‰æ–¹å¼è¿›è¡Œèº«ä»½éªŒè¯\n   - å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ WSSï¼ˆWebSocket Secureï¼‰åè®®ï¼Œå³åŸºäº SSL/TLS çš„å®‰å…¨ WebSocket è¿æ¥\n\n### 6.5. æ€»ç»“\n\nWebSocket åè®®æœ¬èº«ä¸å—æµè§ˆå™¨åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œå¯ä»¥è‡ªç”±åœ°è¿›è¡Œè·¨åŸŸé€šä¿¡ã€‚ä½†ä¸ºäº†å®‰å…¨æ€§ï¼ŒæœåŠ¡å™¨ç«¯åº”è¯¥å®ç°é€‚å½“çš„éªŒè¯æœºåˆ¶æ¥æ§åˆ¶è¿æ¥æƒé™ã€‚\n\n## 7. åœ¨ JavaScript ä¸­è·å–å­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦ï¼Œå°¤å…¶æ˜¯è¦æ”¯æŒè¡¨æƒ…ç¬¦å·ï¼ˆemojiï¼‰\n\n### 7.1. ä½¿ç”¨ Blob å¯¹è±¡ï¼ˆæœ€ç®€å•æ¨èçš„æ–¹å¼ï¼‰\n\n```javascript hl:3,2\nfunction getByteLength(str) {\n    // åˆ›å»ºä¸€ä¸ª Blob å¯¹è±¡ï¼Œå¹¶æŒ‡å®šç¼–ç ä¸º UTF-8\n    const blob = new Blob([str], { type: 'text/plain' });\n    return blob.size;\n}\n\n// æµ‹è¯•\nconsole.log(getByteLength('hello')); // 5\nconsole.log(getByteLength('ä½ å¥½')); // 6\nconsole.log(getByteLength('ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦')); // 25\nconsole.log(getByteLength('ğŸŒ')); // 4\n```\n\n### 7.2. ä½¿ç”¨ TextEncoderï¼ˆç°ä»£æµè§ˆå™¨æ¨èï¼‰\n\n```javascript\nfunction getByteLength(str) {\n    return new TextEncoder().encode(str).length;\n}\n\n// æµ‹è¯•\nconsole.log(getByteLength('hello')); // 5\nconsole.log(getByteLength('ä½ å¥½')); // 6\nconsole.log(getByteLength('ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦')); // 25\nconsole.log(getByteLength('ğŸŒ')); // 4\n```\n\n### 7.3. æ‰‹åŠ¨è®¡ç®—ï¼ˆå…¼å®¹æ€§æœ€å¥½ï¼Œä½†ä¸æ¨èï¼‰\n\n```javascript\nfunction getByteLength(str) {\n    let length = 0;\n    for (let i = 0; i < str.length; i++) {\n        const code = str.charCodeAt(i);\n        if (code <= 0x7f) {\n            length += 1;\n        } else if (code <= 0x7ff) {\n            length += 2;\n        } else if (code <= 0xffff) {\n            length += 3;\n        } else {\n            length += 4;\n        }\n    }\n    return length;\n}\n\n// æ³¨æ„ï¼šè¿™ç§æ–¹æ³•å¯¹äºæŸäº›ç‰¹æ®Šçš„emojiå¯èƒ½ä¸å¤Ÿå‡†ç¡®\n```\n\n### 7.4. å®Œæ•´çš„æµ‹è¯•ç¤ºä¾‹\n```javascript\nfunction compareByteLength() {\n    const testStrings = [\n        'hello',                    // æ™®é€šè‹±æ–‡\n        'ä½ å¥½',                     // ä¸­æ–‡\n        'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',                      // å¤æ‚emojiï¼ˆå®¶åº­ï¼‰\n        'ğŸŒ',                       // ç®€å•emoji\n        'ä½ å¥½ğŸ‘‹world',              // æ··åˆå­—ç¬¦ä¸²\n        'â¤ï¸',                       // ç‰¹æ®Šemoji\n        'ğŸ³ï¸â€ğŸŒˆ'                     // å½©è™¹æ——emoji\n    ];\n\n    const methods = {\n        'Blobæ–¹æ³•': str => new Blob([str]).size,\n        'TextEncoderæ–¹æ³•': str => new TextEncoder().encode(str).length\n    };\n\n    console.log('å­—ç¬¦ä¸²\\t\\tå­—ç¬¦é•¿åº¦\\tBlobå­—èŠ‚\\tEncoderå­—èŠ‚');\n    console.log('----------------------------------------');\n\n    testStrings.forEach(str => {\n        console.log(\n            `${str}\\t\\t` +\n            `${str.length}\\t\\t` +\n            `${methods['Blobæ–¹æ³•'](str)}\\t\\t` +\n            `${methods['TextEncoderæ–¹æ³•'](str)}`\n        );\n    });\n}\n\ncompareByteLength();\n```\n\n### 7.5. é‡è¦è¯´æ˜\n\n#### 7.5.1. **ç¼–ç è¯´æ˜**\n\n   - ä»¥ä¸Šæ–¹æ³•éƒ½æ˜¯åŸºäº UTF-8 ç¼–ç è®¡ç®—å­—èŠ‚é•¿åº¦\n   - UTF-8 æ˜¯ä¸€ç§å˜é•¿ç¼–ç ï¼š\n     - ASCII å­—ç¬¦å  1 å­—èŠ‚\n     - ä¸­æ–‡å­—ç¬¦é€šå¸¸å  3 å­—èŠ‚\n     - emoji å¯èƒ½å  4 å­—èŠ‚æˆ–æ›´å¤š\n\n#### 7.5.2. **æ–¹æ³•é€‰æ‹©å»ºè®®**\n\n   - ä¼˜å…ˆä½¿ç”¨ `TextEncoder`ï¼Œå®ƒæ˜¯ä¸“é—¨ç”¨äºå¤„ç†æ–‡æœ¬ç¼–ç çš„æ ‡å‡† API\n   - å¦‚æœéœ€è¦è€ƒè™‘å…¼å®¹æ€§ï¼Œå¯ä»¥ä½¿ç”¨ `Blob` æ–¹æ³•\n   - é¿å…ä½¿ç”¨æ‰‹åŠ¨è®¡ç®—çš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒå¯èƒ½åœ¨å¤„ç†æŸäº›ç‰¹æ®Šå­—ç¬¦æ—¶ä¸å¤Ÿå‡†ç¡®\n\n#### 7.5.3. **æ³¨æ„äº‹é¡¹**\n\n   - æŸäº›å¤æ‚çš„ emojiï¼ˆå¦‚å®¶åº­ emojiï¼‰å®é™…ä¸Šæ˜¯å¤šä¸ª emoji ç»„åˆè€Œæˆçš„\n   - æŸäº› emoji å¯èƒ½åŒ…å«å˜ä½“é€‰æ‹©ç¬¦ï¼ˆVS16ï¼‰ç­‰ç‰¹æ®Šå­—ç¬¦\n   - åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»ºè®®æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ³•å¹¶è¿›è¡Œå……åˆ†æµ‹è¯•\n\n#### 7.5.4. **æµè§ˆå™¨å…¼å®¹æ€§**\n\n   - `TextEncoder`: ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒ\n   - `Blob`: IE10+ éƒ½æ”¯æŒ\n   - æ‰‹åŠ¨è®¡ç®—æ–¹æ³•: æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒï¼Œä½†å‡†ç¡®æ€§å¯èƒ½æœ‰é™\n\n## 8. Mapã€WeakMapã€Object çš„åŒºåˆ«\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-9.png)\n\n## 9. pnpmï¼ˆperformant npmï¼‰åŒ…ç®¡ç†å™¨  çš„ä¸»è¦ç‰¹ç‚¹å’Œä¼˜åŠ¿\n\n### 9.1. é«˜æ•ˆçš„ç£ç›˜ç©ºé—´åˆ©ç”¨\n\npnpm ä½¿ç”¨`ç¡¬é“¾æ¥å’Œç¬¦å·é“¾æ¥`æ¥å…±äº«é¡¹ç›®é—´çš„ä¾èµ–ï¼Œè¿™æ„å‘³ç€ï¼š\n\n- ç›¸åŒçš„ä¾èµ–åŒ…åªä¼šåœ¨ç£ç›˜ä¸Šå­˜å‚¨ä¸€æ¬¡\n- å¤§å¤§å‡å°‘äº†ç£ç›˜ç©ºé—´çš„ä½¿ç”¨\n- å®‰è£…é€Ÿåº¦æ›´å¿«ï¼Œå› ä¸ºè®¸å¤šåŒ…å¯èƒ½å·²ç»å­˜åœ¨äºå…¨å±€å­˜å‚¨ä¸­\n\n```\n.pnpm-store/\n  |-- node_modules/\n      |-- packageA@1.0.0\n      |-- packageB@2.0.0\n      ...\n```\n\n### 9.2. ä¸¥æ ¼çš„ä¾èµ–ç»“æ„\n\npnpm åˆ›å»ºäº†ä¸€ä¸ª**éå¹³é“º**çš„ `node_modules` ç»“æ„ï¼š\n\n- æ¯ä¸ªåŒ…åªèƒ½è®¿é—®å…¶ç›´æ¥ä¾èµ–\n- é˜²æ­¢ä¾èµ–æå‡ï¼Œé¿å…\"å¹½çµä¾èµ–\"é—®é¢˜\n- æé«˜äº†é¡¹ç›®çš„å¯é¢„æµ‹æ€§å’Œå®‰å…¨æ€§\n\n``` hl:2\nnode_modules/\n  |-- .pnpm/\n      |-- packageA@1.0.0/\n      |-- packageB@2.0.0/\n  |-- packageA -> .pnpm/packageA@1.0.0/node_modules/packageA\n  |-- packageB -> .pnpm/packageB@2.0.0/node_modules/packageB\n```\n\n### 9.3. å¿«é€Ÿå®‰è£…\n\n- å¹¶è¡Œå®‰è£…å¤šä¸ªåŒ…\n- åˆ©ç”¨ç¼“å­˜å’Œç¡¬é“¾æ¥ï¼Œå‡å°‘ç½‘ç»œå’Œç£ç›˜ I/O\n\n### 9.4. æ”¯æŒ monorepo\n\npnpm å†…ç½®äº†å¯¹ monorepoï¼ˆå•ä»“å¤šåŒ…ï¼‰é¡¹ç›®çš„æ”¯æŒï¼š\n\n- ä½¿ç”¨ `pnpm-workspace.yaml` å®šä¹‰å·¥ä½œç©ºé—´\n- æä¾› `pnpm add -w` å‘½ä»¤æ¥å®‰è£…æ ¹ä¾èµ–\n- æ”¯æŒ `--filter` å‚æ•°æ¥æ“ä½œç‰¹å®šçš„åŒ…\n\n### 9.5. å…¼å®¹æ€§\n\n- ä¸ npm å’Œ Yarn çš„ `package.json` æ ¼å¼å®Œå…¨å…¼å®¹\n- å¯ä»¥ç›´æ¥æ›¿æ¢ç°æœ‰çš„ npm æˆ– Yarn é¡¹ç›®\n\n### 9.6. å…¶ä»–ç‰¹æ€§\n\n- å†…ç½®å¯¹ Node.js ç‰ˆæœ¬ç®¡ç†çš„æ”¯æŒ\n- æ”¯æŒæ’ä»¶ç³»ç»Ÿ\n- æä¾›äº†è®¸å¤šæœ‰ç”¨çš„å‘½ä»¤ï¼Œå¦‚ `pnpm why` ç”¨äºåˆ†æä¾èµ–å…³ç³»\n\n### 9.7. ä½¿ç”¨ç¤ºä¾‹\n\n```bash\n# å®‰è£…ä¾èµ–\npnpm install\n\n# æ·»åŠ ä¾èµ–\npnpm add react\n\n# è¿è¡Œè„šæœ¬\npnpm run build\n\n# åœ¨å·¥ä½œç©ºé—´ä¸­æ·»åŠ ä¾èµ–\npnpm add -w typescript\n\n# åœ¨ç‰¹å®šåŒ…ä¸­æ·»åŠ ä¾èµ–\npnpm add lodash --filter package-name\n```\n\n### 9.8. pnpm.lock æ–‡ä»¶\n\npnpm ä½¿ç”¨ `pnpm-lock.yaml` æ–‡ä»¶æ¥é”å®šä¾èµ–ç‰ˆæœ¬ï¼Œç¡®ä¿å›¢é˜Ÿæˆå‘˜å’Œ CI ç¯å¢ƒä½¿ç”¨ç›¸åŒçš„ä¾èµ–ç‰ˆæœ¬ã€‚\n\n### 9.9. æ€§èƒ½å¯¹æ¯”\n\nåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œpnpm çš„å®‰è£…é€Ÿåº¦æ¯” npm å’Œ Yarn å¿«ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§å‹é¡¹ç›®æˆ– monorepo æ—¶ã€‚\n\n## 10. å¦‚ä½•åˆ¤æ–­æ˜¯ PC è¿˜æ˜¯ç§»åŠ¨ç«¯\n\n- ua\n- touch äº‹ä»¶æ˜¯å¦åœ¨ documentä¸­\n- æ¨ªç«–å±å¹•\n- ç‰¹å®šå±æ€§ï¼Œæ¯”å¦‚é€šè¿‡ js åˆ¤æ–­åª’ä½“æŸ¥è¯¢æ˜¯å¦ç”Ÿæ•ˆ\n- æœ€å¥½è¿˜æ˜¯ä½¿ç”¨ä¸‰æ–¹å·¥å…·åŒ…\n- ç­‰ç­‰\n\n## 11. js å¦‚ä½•åŠ¨æ€ç”Ÿæˆæµ·æŠ¥\n\n- dom - canvas - image\n- dom - svg - canvas  - image\n- nodejs è°ƒç”¨ pupper æ— å¤´æµè§ˆå™¨\n\n## 12. å¦‚ä½•é¡ºåºæ‰§è¡Œ 10 ä¸ªä»»åŠ¡\n\n- æ–¹æ³•ä¸€ï¼šfor/for-of  - await\n- æ–¹æ³•äºŒï¼šreduce\n\t- prev task\n\t- current task\n\n## 13. åˆå¹¶è¿ç»­çš„æ•°å­—\n\néå† +  ä¸´æ—¶å˜é‡\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-10.png)\n\n## 14. å¦‚ä½•è§£å†³ promise.all æœ‰ä¸€ä¸ªä»»åŠ¡æŠ¥é”™äº†ï¼Œå…¶ä»–ä»»åŠ¡ç»“æœéƒ½æŠ›å¼ƒäº†ï¼Ÿ\n\n- æ–¹æ¡ˆä¸€ï¼špromise.allSetteled\n- æ–¹æ¡ˆäºŒï¼šå®¹é”™ä¸‹ï¼Œåˆ«è®© promise æŠ¥é”™\n- æ–¹æ¡ˆä¸‰ï¼š\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-11.png)\n\n## 15. `[\"1\", \"2\", \"3\"].map(parseInt)`\n\n### 15.1. åˆ†æ\n\n```javascript hl:8,14,15\n[\"1\", \"2\", \"3\"].map(parseInt);\n\n// ==> 1, NaN, NaN\n// parseInt() å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯è¦è¢«è§£æçš„å­—ç¬¦ä¸²ï¼Œç¬¬äºŒä¸ªæ˜¯è¿›åˆ¶æ•°ã€‚\n// map() æ–¹æ³•ä¼šç»™å›è°ƒå‡½æ•°ä¼ é€’ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ ã€å½“å‰ç´¢å¼•ã€æ•´ä¸ªæ•°ç»„ã€‚\n\n// parseInt(\"1\", 0, [\"1\", \"2\", \"3\"]); // 1 ï¼Œ 0è¿›åˆ¶ï¼Œè‡ªåŠ¨åˆ¤æ–­\n// // ç¬¬äºŒä¸ªå‚æ•°ä¼  0 çš„è§„åˆ™ï¼š\n// 1. å¦‚æœå­—ç¬¦ä¸²ä»¥ \"0x\" æˆ– \"0X\" å¼€å¤´ï¼ŒæŒ‰ 16 è¿›åˆ¶è§£æ\n// 2. åœ¨ç°ä»£ JavaScriptï¼ˆES5+ï¼‰ä¸­ï¼Œå…¶ä»–æƒ…å†µä¸€å¾‹æŒ‰ 10 è¿›åˆ¶è§£æ\n// 3. åœ¨è€ç‰ˆæœ¬ JavaScript ä¸­ï¼Œå¦‚æœå­—ç¬¦ä¸²ä»¥ \"0\" å¼€å¤´ï¼Œä¼šæŒ‰ 8 è¿›åˆ¶è§£æ\n// 4. å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œä¼šæŒ‰ 10 è¿›åˆ¶è§£æï¼Œå’Œä¸ä¼ ç¬¬äºŒä¸ªå‚æ•°ä¸€æ ·\n\n// parseInt(\"2\", 1, [\"1\", \"2\", \"3\"]); // NaN, æ²¡æœ‰1è¿›åˆ¶ï¼Œå¿…é¡»å–å€¼èŒƒå›´åœ¨2-36ä¹‹é—´\n// parseInt(\"3\", 2, [\"1\", \"2\", \"3\"]); // NaN ï¼Œ3ä¸æ˜¯2è¿›åˆ¶æ•°\n\n```\n\n### 15.2. å…³äº parseInt çš„ç¬¬äºŒä¸ªå‚æ•°\n\n```javascript hl:1,13\n// è¿›åˆ¶å¿…é¡»åœ¨ 2-36 ä¹‹é—´\nconsole.log(parseInt(\"123\", 1));    // NaN\nconsole.log(parseInt(\"123\", 37));   // NaN\n\n// ä¸åŒè¿›åˆ¶çš„è§£æ\nconsole.log(parseInt(\"100\", 2)); // 4 (äºŒè¿›åˆ¶)\nconsole.log(parseInt(\"100\", 8)); // 64 (å…«è¿›åˆ¶)\nconsole.log(parseInt(\"100\", 10)); // 100 (åè¿›åˆ¶)\nconsole.log(parseInt(\"100\", 16)); // 256 (åå…­è¿›åˆ¶)\n\n// ä¸åŒè¿›åˆ¶ä¸‹çš„ç›¸åŒå­—ç¬¦ä¸²å¯èƒ½å¾—åˆ°ä¸åŒç»“æœ\nconsole.log(parseInt(\"19\", 10)); // 19 (åè¿›åˆ¶)\nconsole.log(parseInt(\"19\", 8)); // 1 (å…«è¿›åˆ¶ï¼Œ9ä¸æ˜¯æœ‰æ•ˆçš„å…«è¿›åˆ¶æ•°å­—)\n```\n\n## 16. å‡½æ•°ä½¿ç”¨ `bind`è¿ç»­ç»‘å®šå¤šæ¬¡ï¼Œåé¢ç»‘å®šçš„éƒ½æ— æ•ˆ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-12.png)\n\n## 17. new fn ä¸ new fn() çš„åŒºåˆ«\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-13.png)\n\n## 18. ajax  fetch axios\n\n- ajax\n\t- åŸºäº  XHR å¯¹è±¡\n- fetch \n\t- æ²¡æœ‰åŸºäº XHRï¼Œä¸æ˜¯å¯¹ XHRçš„è¿›ä¸€æ­¥å°è£…\n\t- ä½¿ç”¨çš„åŸç”Ÿçš„ js \n\t- åŸºäº Promise\n-  axios\n\t- æµè§ˆå™¨ï¼šåŸºäº XHR\n\t- nodejsï¼šåŸºäº http æ¨¡å—\n\t- å…¶ä»–çš„åŒ…è£…æ¯”å¦‚ promise\n\t- å®‰å…¨æœºåˆ¶\n\n## 19. æµè§ˆå™¨çš„è·¨æ ‡ç­¾é¡µï¼ˆCross-tabï¼‰é€šä¿¡\n\n### 19.1. é—®é¢˜ï¼šä¸åŒçš„Tabï¼Œä¸åŒçš„åŸŸåï¼Œä¸€ä¸ª Tab ä¸‹é¢çš„é¡µé¢ä½¿ç”¨ postMessageï¼Œå¦å¤–ä¸€ä¸ª Tab ç›‘å¬ message èƒ½å¤Ÿç›‘å¬å¾—åˆ°å—ï¼Ÿ\n\n- ä¸åŒçš„ Tabï¼Œä¸åŒçš„åŸŸå\n\t- å½“ä¸¤ä¸ªæ ‡ç­¾é¡µå±äºä¸åŒçš„åŸŸåæ—¶ï¼Œå®ƒä»¬æ˜¯è¿è¡Œåœ¨å®Œå…¨éš”ç¦»çš„ä¸Šä¸‹æ–‡ä¸­çš„ã€‚è¿™æ˜¯ç”±äºæµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼ˆSame-Origin Policyï¼‰æ‰€å¯¼è‡´çš„å®‰å…¨é™åˆ¶ã€‚\n- postMessage å’Œ message äº‹ä»¶\n\t- postMessage æ–¹æ³•æ˜¯ä¸€ç§å®‰å…¨çš„è·¨æºé€šä¿¡æ–¹å¼ï¼Œè€Œ message äº‹ä»¶ç”¨äºæ¥æ”¶é€šè¿‡ postMessage å‘é€çš„æ¶ˆæ¯ã€‚\n- èƒ½å¦ç›‘å¬åˆ°ï¼Ÿ\n\t- åœ¨ä½ æè¿°çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ª Tab ä¸‹çš„é¡µé¢ä½¿ç”¨ postMessageï¼Œå¦ä¸€ä¸ª Tab ç›‘å¬ message äº‹ä»¶ï¼Œ**é€šå¸¸æƒ…å†µä¸‹æ˜¯æ— æ³•ç›‘å¬åˆ°çš„**ã€‚\n\n åŸå› å¦‚ä¸‹ï¼š\n1. **çª—å£å¼•ç”¨é—®é¢˜**ï¼špostMessage éœ€è¦ä¸€ä¸ªç›®æ ‡çª—å£çš„å¼•ç”¨ã€‚ä¸åŒ Tab ä¹‹é—´é»˜è®¤æ˜¯æ²¡æœ‰è¿™ç§å¼•ç”¨çš„ã€‚æ¯”å¦‚ä½¿ç”¨ `window.open`\n2. **åŸŸåä¸åŒ**ï¼š**å³ä½¿æœ‰çª—å£å¼•ç”¨**ï¼Œä¸åŒåŸŸåä¹‹é—´çš„é€šä¿¡ä¹Ÿéœ€è¦æ˜ç¡®æŒ‡å®šç›®æ ‡æºã€‚\n3. **äº‹ä»¶ä¼ æ’­èŒƒå›´**ï¼šmessage äº‹ä»¶é€šå¸¸åªåœ¨ç›®æ ‡çª—å£å†…ä¼ æ’­ï¼Œä¸ä¼šè·¨è¶Šåˆ°å…¶ä»–æœªç›¸å…³çš„æ ‡ç­¾é¡µã€‚\n\n\n### 19.2. å®‰å…¨ç­–ç•¥\n\n- å¦‚æœä½ ä¸éœ€è¦æ¥å—å…¶ä»–ç½‘ç«™çš„messageï¼Œè¯·ä¸è¦ç›‘å¬ message äº‹ä»¶\n- å³ä½¿ç›‘å¬ï¼Œè¯·åŠ¡å¿…å¤‡æ³¨ origin å’Œ source æ¥éªŒè¯å‘ä»¶äººçš„èº«ä»½\n\n### 19.3. æœ‰ä¸€äº›ç‰¹æ®Šæƒ…å†µå’Œè§£å†³æ–¹æ¡ˆ\n\n1. **opener å…³ç³»**ï¼šå¦‚æœä¸€ä¸ªæ ‡ç­¾é¡µæ˜¯ç”±å¦ä¸€ä¸ªæ ‡ç­¾é¡µæ‰“å¼€çš„ï¼ˆä½¿ç”¨ window.open()ï¼‰ï¼Œåˆ™å®ƒä»¬ä¹‹é—´å¯ä»¥é€šè¿‡ opener å’Œ postMessage è¿›è¡Œé€šä¿¡ã€‚\n2. **å…±äº«å­˜å‚¨**ï¼šå¯ä»¥ä½¿ç”¨ localStorage æˆ– IndexedDB ç­‰å…±äº«å­˜å‚¨æ–¹å¼ï¼Œé…åˆ storage äº‹ä»¶æ¥å®ç°è·¨æ ‡ç­¾é¡µé€šä¿¡ã€‚\n3. **Broadcast Channel API**ï¼šè¿™æ˜¯ä¸€ä¸ªè¾ƒæ–°çš„ APIï¼Œå…è®¸**åŒæºçš„ä¸åŒä¸Šä¸‹æ–‡**ï¼ˆå¦‚ä¸åŒçš„æ ‡ç­¾é¡µï¼‰ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚\n4. **Service Worker**ï¼šå¯ä»¥ä½¿ç”¨ Service Worker ä½œä¸ºä¸­é—´äººæ¥åè°ƒä¸åŒæ ‡ç­¾é¡µä¹‹é—´çš„é€šä¿¡ã€‚\n5. **WebSocket**ï¼šå¯ä»¥é€šè¿‡æœåŠ¡å™¨ç«¯çš„ WebSocket è¿æ¥æ¥åè°ƒä¸åŒæ ‡ç­¾é¡µä¹‹é—´çš„é€šä¿¡ã€‚\n\n## 20. ç»™ä¸€ä¸ª DOM å…ƒç´ ç»‘å®šå¤šæ¬¡ clickï¼Œä¸€ä¸ªæ•è·ï¼Œä¸€ä¸ªå†’æ³¡ï¼Œå¦‚ä½•æ‰§è¡Œï¼Ÿ\n\n- ç»‘å®šå¤šå°‘æ¬¡å°±æ‰§è¡Œå¤šå°‘æ¬¡\n- å…ˆæ•è·ï¼Œåå†’æ³¡\n\n## 21. å¦‚ä½•è·å–ä¸€ä¸ªå¯¹è±¡çš„åŸå‹å¯¹è±¡\n\n- `æ„é€ å‡½æ•°.prototype`\n- `å®ä¾‹å¯¹è±¡.__proto__`\n- `Object.getProtoTypeof(å¯¹è±¡å®ä¾‹)`\n\n## 22. ç§»åŠ¨ç«¯é€‚é…åŸç†\n\næ¯”å¦‚ flexible.js  ä¸å±•å¼€äº†ï¼Œå’Œ rem ä¸€ä¸ªé“ç†\n\néœ€è¦æ³¨æ„çš„äº‹ï¼Œå¦‚ä½•åˆ¤æ–­æ˜¯å¦ `0.5`\n- å¾ˆç®€å• `dpr >= 2` å³å¯\n\n\n## 23. å¦‚ä½•å®ç° repeat å®ç°å­—ç¬¦ä¸²æ‹¼æ¥\n\n```javascript hl:2,5,10\n// æœ€ç®€å•ç›´æ¥çš„æ–¹æ³•\nconst str1 = \"abc\".repeat(3); // \"abcabcabc\"\n\nconst str2 = Array(4).join(\"abc\"); // \"abcabcabc\"\n// è§£é‡Šï¼šåˆ›å»ºé•¿åº¦ä¸º4çš„æ•°ç»„ï¼Œjoinä¼šæ‰§è¡Œ3æ¬¡ï¼Œæ‰€ä»¥é‡å¤3æ¬¡\n// Array(4) åˆ›å»º [empty Ã— 4]\n// join(\"abc\") ä¼šåœ¨æ•°ç»„å…ƒç´ ä¹‹é—´æ’å…¥\"abc\"\n\n\nconst str3 = Array(3).fill(\"abc\").join(\"\"); // \"abcabcabc\"\n// æˆ–è€…\nconst str3_2 = new Array(3).fill(\"abc\").join(\"\");\n\n```\n\n\n## 24. å®ç° mergePromise å‡½æ•°ï¼ŒæŠŠä¼ è¿›å»çš„æ•°ç»„æŒ‰é¡ºåºå…ˆåæ‰§è¡Œï¼Œå¹¶ä¸”æŠŠè¿”å›çš„æ•°æ®å…ˆåæ”¾åˆ°æ•°ç»„ data ä¸­\n\n```javascript hl:10,17,25\n// mergePromise å‡½æ•°ï¼ŒæŠŠä¼ è¿›å»çš„æ•°ç»„æŒ‰é¡ºåºå…ˆåæ‰§è¡Œï¼Œå¹¶ä¸”æŠŠè¿”å›çš„æ•°æ®å…ˆåæ”¾åˆ°æ•°ç»„ data ä¸­\nmergePromise([ajax1, ajax2, ajax3]).then((data) => {\n  console.log(\"done\");\n  console.log(data); // data ä¸º [1, 2, 3]\n});\n\nfunction mergePromise(arr) {\n  // åœ¨è¿™é‡Œå†™ä»£ç \n  const data = [];\n  let promise = Promise.resolve();\n  // ä¾æ¬¡æ‰§è¡Œä¼ å…¥çš„å‡½æ•°\n  // è¿™é‡Œçš„ promise.then æ˜¯ä¸ºäº†ä¿è¯é¡ºåºæ‰§è¡Œ\n  arr.forEach((fn) => {\n    // æ¯æ¬¡éå†æ—¶ï¼Œpromise éƒ½æ˜¯ä¸Šä¸€ä¸ª promise.then è¿”å›çš„ promise\n    // ä½†æ˜¯ï¼Œè¿™é‡Œ promise ä¸ä¼šè¢«è¦†ç›–å—ï¼Ÿ\n    // ä¸ä¼šï¼Œå› ä¸º promise.then è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ promise\n    promise = promise.then(fn).then((res) => {\n      data.push(res);\n      // è¿”å› res ä¿è¯ä¸‹ä¸€ä¸ª then ä¸­çš„ res æ˜¯ä¸Šä¸€ä¸ªçš„ç»“æœ\n      return data;\n    });\n  });\n}\n\n// åŒºåˆ«äº Promise.allï¼ŒPromise.all æ˜¯å¹¶è¡Œæ‰§è¡Œï¼Œè€Œè¿™é‡Œéœ€è¦ä¸²è¡Œæ‰§è¡Œ\n\n```\n\n\n## 25. Promise ç›¸å…³é—®é¢˜\n\n### 25.1. finnalyï¼šæ— è®ºå¤±è´¥æˆ–è€…æˆåŠŸéƒ½ä¼šæ‰§è¡Œï¼Œä¸”æ¥å—ä¸åˆ°ç»“æœ\n\n### 25.2. æ³¨æ„é¡ºåº\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-14.png)\n\n### 25.3. reject åŒ…åœ¨ try é‡Œé¢ä¹Ÿä¼šè¢«æ•è·åˆ°\n\n```javascript hl:3,5\nasync function asyncl() {\n  try {\n    await Promise.reject(\"error!!!\");\n  } catch (e) {\n    console.log(e); // ä¼šæ‰§è¡Œåˆ°\n  }\n}\n\nasyncl();\n```\n\n#### 25.3.1. æ²¡æœ‰æ•è·ä¼šæŠ¥é”™\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-15.png)\n\n### 25.4. then å’Œ .catch è¿”å›çš„å€¼ä¸èƒ½ä½¿ promise å¯¹è±¡æœ¬èº«ï¼Œå¦åˆ™ä¼šæ­»å¾ªç¯\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-16.png)\n\n\n\n## 26. await æ²¡æŠ¥é”™å°±ä¼šå¾€ä¸‹èµ°ï¼Œåˆ«å’Œ promise ææ··äº†\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-18.png)\n\n\nå› ä¸º å¦‚æœ async å‡½æ•°æ²¡æœ‰æ˜¾å¼çš„è¿”å›å€¼ï¼Œå®ƒä»ç„¶ä¼šè¿”å›ä¸€ä¸ª Promiseï¼Œå…·ä½“è¡Œä¸ºå¦‚ä¸‹ï¼š\n\n```javascript\n// æ²¡æœ‰ return è¯­å¥\nasync function noReturn() {\n    console.log(\"Hello\");\n}\n// ç­‰ä»·äºè¿”å› Promise<undefined>\nconsole.log(noReturn()); // Promise {<fulfilled>: undefined}\n\n\n// ç©º return è¯­å¥\nasync function emptyReturn() {\n    console.log(\"Hello\");\n    return;\n}\n// åŒæ ·è¿”å› Promise<undefined>\nconsole.log(emptyReturn()); // Promise {<fulfilled>: undefined}\n\n\n// å³ä½¿å‡½æ•°ä½“ä¸ºç©º\nasync function empty() {}\nconsole.log(empty()); // Promise {<fulfilled>: undefined}\n```\n\n\n### 26.1. ä¸‹é¢çš„ä»£ç å°±ä¸€ç›´ä¼š pengding ä½äº†\n\n![472](#)","469b4db133335a5aa32d429548ee011e":"\n# é¢è¯•é¢˜\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. PCç«¯é€šè¿‡äºŒç»´ç æ‰«æç™»å½• \n\n- pc å±•ç¤ºå±•ç¤ºäºŒç»´ç åï¼Œä¼šä¸€ç›´**è½®è¯¢**ï¼Œè¯·æ±‚äºŒç»´ç æ‰«æçš„çŠ¶æ€\n\n## 2. `toFixed()` å’Œ `toPrecision()` çš„åŒºåˆ«\n\n### 2.1. toFixed()\n\n`toFixed()` æ–¹æ³•ç”¨äºæŒ‡å®šå°æ•°ç‚¹åçš„ä½æ•°ã€‚\n\nç‰¹ç‚¹ï¼š\n- è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²\n- å‚æ•°æŒ‡å®šå°æ•°ç‚¹åçš„ä½æ•°\n- ä¼šè¿›è¡Œå››èˆäº”å…¥\n- å¦‚æœå¿…è¦ï¼Œä¼šç”¨0å¡«å……å°æ•°éƒ¨åˆ†\n\nç¤ºä¾‹ï¼š\n```javascript\nlet num = 12.3456;\n\nconsole.log(num.toFixed(2));  // \"12.35\"\nconsole.log(num.toFixed(0));  // \"12\"\nconsole.log(num.toFixed(6));  // \"12.345600\"\n\nlet bigNum = 1234.5;\nconsole.log(bigNum.toFixed(2));  // \"1234.50\"\n```\n\n### 2.2. toPrecision()\n\n`toPrecision()` æ–¹æ³•ç”¨äºæŒ‡å®šæ•°å­—çš„æ€»ä½æ•°ï¼ˆåŒ…æ‹¬æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†ï¼‰ã€‚\n\nç‰¹ç‚¹ï¼š\n- è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²\n- å‚æ•°æŒ‡å®šæ•°å­—çš„æ€»ä½æ•°ï¼ˆç²¾åº¦ï¼‰\n- ä¼šè¿›è¡Œå››èˆäº”å…¥\n- å¯èƒ½ä¼šä½¿ç”¨ç§‘å­¦è®°æ•°æ³•è¡¨ç¤ºç»“æœ\n\nç¤ºä¾‹ï¼š\n```javascript\nlet num = 12.3456;\n\nconsole.log(num.toPrecision(2));  // \"12\"\nconsole.log(num.toPrecision(3));  // \"12.3\"\nconsole.log(num.toPrecision(6));  // \"12.3456\"\n\nlet bigNum = 1234.5;\nconsole.log(bigNum.toPrecision(2));  // \"1.2e+3\"\nconsole.log(bigNum.toPrecision(4));  // \"1235\"\n```\n\n### 2.3. ä¸»è¦åŒºåˆ«\n\n1. ç²¾åº¦èŒƒå›´ï¼š\n   - `toFixed()` åªå¤„ç†å°æ•°éƒ¨åˆ†\n   - `toPrecision()` è€ƒè™‘æ•´ä¸ªæ•°å­—çš„ä½æ•°\n\n2. ç»“æœæ ¼å¼ï¼š\n   - `toFixed()` å§‹ç»ˆè¿”å›å›ºå®šå°æ•°ç‚¹æ ¼å¼\n   - `toPrecision()` å¯èƒ½è¿”å›ç§‘å­¦è®°æ•°æ³•æ ¼å¼\n\n3. å‚æ•°å«ä¹‰ï¼š\n   - `toFixed(n)` ä¸­çš„ n è¡¨ç¤ºå°æ•°ç‚¹åçš„ä½æ•°\n   - `toPrecision(n)` ä¸­çš„ n è¡¨ç¤ºæ€»çš„æœ‰æ•ˆæ•°å­—ä½æ•°\n\n4. å¯¹æ•´æ•°çš„å¤„ç†ï¼š\n   - `toFixed()` ä¼šåœ¨æ•´æ•°åæ·»åŠ å°æ•°ç‚¹å’ŒæŒ‡å®šæ•°é‡çš„é›¶\n   - `toPrecision()` å¯èƒ½ä¼šå°†æ•´æ•°è½¬æ¢ä¸ºç§‘å­¦è®°æ•°æ³•\n\n5. å¤§æ•°å¤„ç†ï¼š\n   - `toFixed()` å¯¹äºéå¸¸å¤§çš„æ•°å­—å¯èƒ½ä¼šè¿”å›æŒ‡æ•°å½¢å¼\n   - `toPrecision()` æ›´å®¹æ˜“å¯¹å¤§æ•°ä½¿ç”¨ç§‘å­¦è®°æ•°æ³•\n\nç¤ºä¾‹æ¯”è¾ƒï¼š\n```javascript\nlet num = 123.456;\n\nconsole.log(num.toFixed(2));       // \"123.46\"\nconsole.log(num.toPrecision(2));   // \"1.2e+2\"\n\nconsole.log(num.toFixed(5));       // \"123.45600\"\nconsole.log(num.toPrecision(5));   // \"123.46\"\n\nlet smallNum = 0.000123;\nconsole.log(smallNum.toFixed(5));       // \"0.00012\"\nconsole.log(smallNum.toPrecision(5));   // \"0.00012300\"\n\nlet bigNum = 1234567.89;\nconsole.log(bigNum.toFixed(2));       // \"1234567.89\"\nconsole.log(bigNum.toPrecision(2));   // \"1.2e+6\"\n```\n\nä½¿ç”¨å»ºè®®ï¼š\n- å½“ä½ éœ€è¦æ§åˆ¶å°æ•°ç‚¹åçš„ä½æ•°æ—¶ï¼Œä½¿ç”¨ `toFixed()`\n- å½“ä½ éœ€è¦æ§åˆ¶æ•°å­—çš„æ€»ä½“ç²¾åº¦æ—¶ï¼Œä½¿ç”¨ `toPrecision()`\n- å¯¹äºè´§å¸è®¡ç®—ï¼Œé€šå¸¸ä½¿ç”¨ `toFixed()`\n- å¯¹äºç§‘å­¦è®¡ç®—æˆ–éœ€è¦æ§åˆ¶æœ‰æ•ˆæ•°å­—çš„åœºæ™¯ï¼Œä½¿ç”¨ `toPrecision()`\n\næ³¨æ„äº‹é¡¹ï¼š\n1. ä¸¤ç§æ–¹æ³•éƒ½å¯èƒ½å› ä¸ºå››èˆäº”å…¥å¯¼è‡´ç²¾åº¦æŸå¤±ã€‚\n2. è¿”å›çš„éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå¦‚æœéœ€è¦è¿›è¡Œæ•°å­¦è¿ç®—ï¼Œè¦å…ˆè½¬æ¢å›æ•°å­—ã€‚\n3. åœ¨å¤„ç†é‡‘èæ•°æ®æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„ JavaScript çš„æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ä¸“é—¨çš„åº“æ¥å¤„ç†é«˜ç²¾åº¦è®¡ç®—ã€‚\n\n## 3. JS å¦‚ä½•ç»„é˜»æ­¢äº‹ä»¶å†’æ³¡\n\n- `return false`\n\t- ä»£è¡¨åŒæ—¶è°ƒç”¨äº† `e.stopPropagation` å’Œ `e.preventDefault`\n\n## 4. `123['toString'].length + 123` çš„è¾“å‡ºå€¼ä¸ºå¤šå°‘ï¼Ÿ\n\n- `123['toString'] ` æ˜¯ä¸ª toString å‡½æ•°\n-  fn.length ä»£è¡¨`ç¬¬ä¸€ä¸ªå…·æœ‰é»˜è®¤å€¼ä¹‹å‰`çš„å‚æ•°ä¸ªæ•°\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-20.png)\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-21.png)\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-22.png)\n\nè¯´æ˜ `toString` æ–¹æ³•çš„å½¢å‚ä¸ªæ•°ä¸º 1 \n\n## 5. å¦‚ä½•å»¶è¿Ÿè„šæœ¬æ‰§è¡Œ\n\n- deferï¼šjs ä¸‹è½½å’Œæ–‡æ¡£è§£æåŒæ­¥ï¼Œæ–‡æ¡£è§£æå¥½äº†åå†æ‰§è¡Œè„šæœ¬\n- asyncï¼šå¼‚æ­¥ä¸‹è½½è„šæœ¬ï¼Œä¸é˜»å¡æ–‡æ¡£è§£æï¼Œä½†è„šæœ¬ä¸‹è½½å¥½äº†åï¼Œæš‚åœè§£ææ–‡æ¡£ï¼Œæ‰§è¡Œè„šæœ¬\n- åŠ¨æ€ DOM æ’å…¥è„šæœ¬\n- setTimeout\n- è„šæœ¬æ”¾æœ€å\n\n## 6. æ„é€ å‡½æ•°å±æ€§\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-23.png)\n\n## 7. å†è¯´è¯´ Reflect \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-24.png)\n\n## 8. å°¾é€’å½’ä¼˜åŒ–\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-25.png)\n\n## 9. ç®€è¿° Iterator\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-26.png)\n\nè¦ç‚¹ï¼š\n- next()\n\t- {done,value}\n- for-of\n\n## 10. å¦‚ä½•ä¸­æ–­ promise\n\npromiseä¸€æ—¦åˆ›å»ºï¼Œæ˜¯æ— æ³•ç»ˆæ­¢ï¼Œä½†ä»¥ä¸‹å‡ ç§æ–¹å¼å¯ä»¥ä¸­æ–­\n- thenä¸­æŠ›é”™\n- then è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œä¸”å·²çŸ¥æ˜¯ pending çŠ¶æ€ï¼Œä¹Ÿç®—æ˜¯ä¸­æ–­äº†\n- æ€»ä¹‹ï¼šåœ¨åˆé€‚çš„æ—¶å€™ï¼ŒæŠŠ pendingçš„çŠ¶æ€ç»™ reject ä¹Ÿå°±ä¸­æ–­äº†\n\n## 11. ç®­å¤´å‡½æ•°\n\n- ä¸èƒ½ç”¨ä½œ generator å‡½æ•°ï¼Œä¸ç”¨ä½¿ç”¨ yield å…³é”®å­—\n- æ²¡æœ‰åŸå‹\n- æ²¡æœ‰ arguments å¯¹è±¡ï¼Œå¦‚æœæœ‰ï¼ŒæŒ‡å‘å½“å‰å¤–å±‚å‡½æ•°\n- ä¸èƒ½ä½¿ç”¨æ„é€ å‡½æ•°ä½¿ç”¨\n- ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ `this`\n\n## 12. å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯ç©ºå¯¹è±¡\n\n- `keys`\n- JSON\n\n## 13. Object.is ä¸ == ã€=== çš„åŒºåˆ«\n\n## 14. + 0.2 !== 0.3 \n\nåœ¨è®¡ç®—æœºä¸­ï¼Œæ•°å­—éƒ½æ˜¯ä»¥äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨çš„ã€‚æŸäº›åè¿›åˆ¶å°æ•°åœ¨è½¬æ¢æˆäºŒè¿›åˆ¶æ—¶ä¼šäº§ç”Ÿæ— é™å¾ªç¯å°æ•°ã€‚\n\nç”±äºå­˜å‚¨ä½æ•°æœ‰é™ï¼Œè¿™äº›æ— é™å¾ªç¯çš„äºŒè¿›åˆ¶æ•°å¿…é¡»åœ¨æŸä¸ªä½ç½®æˆªæ–­ï¼Œè¿™å°±å¯¼è‡´äº†**ç²¾åº¦æŸå¤±**ã€‚\n\n```javascript\n0.1 + 0.2 = 0.30000000000000004\n```\n\n### 14.1. è§£å†³æ–¹æ¡ˆ\n\n#### 14.1.1. ä½¿ç”¨ toFixed() è¿›è¡Œæ˜¾ç¤º\n```javascript\n(0.1 + 0.2).toFixed(1) === '0.3' // true\n```\n\n#### 14.1.2. ä½¿ç”¨ä¸€ä¸ªæå°çš„è¯¯å·®èŒƒå›´ï¼ˆepsilonï¼‰æ¥æ¯”è¾ƒ\n\n```javascript\nconst epsilon = 0.00000000001;\nMath.abs((0.1 + 0.2) - 0.3) < epsilon // true\n```\n\n#### 14.1.3. ä½¿ç”¨ä¸“é—¨çš„åº“\n\n- decimal.js\n- big.js\n- bignumber.js\n\n","9422d96feaf353ac972b49e37dd3f1eb":"\n# å¸¸è§é¢è¯•é¢˜äºŒ\n\n\n`#å‰ç«¯é¢è¯•`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å‡½æ•°å£°æ˜ä¼šè¢«æå‡åˆ°ä½œç”¨åŸŸçš„é¡¶éƒ¨ \n\n```javascript hl:5\n// ä¸ºä»€ä¹ˆä¸ä¼šæŠ¥é”™ï¼Ÿ\n// å› ä¸ºå‡½æ•°å£°æ˜ä¼šè¢«æå‡åˆ°ä½œç”¨åŸŸçš„é¡¶éƒ¨ï¼Œ\nconsole.log(832, foo);\n\n// å¦‚æœæ”¹æˆ var foo = function åˆ™ä¼šæŠ¥é”™\nfunction foo() {\n  console.log(\"foo\");\n}\n\nvar foo = 1;\n\n```\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241024.png)\n\n\n## 2. this çš„æŒ‡å‘é—®é¢˜\n\n### 2.1. éä¸¥æ ¼æ¨¡å¼\n\n```javascript hl:18,21,24\n// éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œthis çš„å€¼ä¸º undefined çš„æ—¶å€™ï¼Œå…¶å€¼ä¼šè¢«éšå¼è½¬æ¢ä¸ºå…¨å±€å¯¹è±¡ã€‚\nvar value = 1;\n\nvar foo = {\n  value: 2,\n  bar: function () {\n    return this.value;\n  },\n};\n\n//ç¤ºä¾‹1\nconsole.log(foo.bar()); // 2\n//ç¤ºä¾‹2\nconsole.log(foo.bar()); // 2\n//ç¤ºä¾‹3ï¼š\n// ä¸ºä»€ä¹ˆè¿™é‡Œä¼šæ˜¯ 1 å‘¢ï¼Ÿ å› ä¸º foo.bar èµ‹å€¼ç»™äº†ä¸€ä¸ªå˜é‡ï¼Œç„¶åè°ƒç”¨è¿™ä¸ªå˜é‡ï¼Œç›¸å½“äºè°ƒç”¨å…¨å±€çš„ bar å‡½æ•°\nconsole.log((foo.bar = foo.bar)()); // 1\n//ç¤ºä¾‹4ï¼šfalse || foo.bar è¿”å›çš„æ˜¯å‡½æ•° foo.barï¼Œæ‰€ä»¥è°ƒç”¨åï¼Œè¾“å‡ºçš„æ˜¯ 1\nconsole.log((false || foo.bar)()); // 1\n\n//ç¤ºä¾‹5: true && foo.bar è¿”å›çš„æ˜¯å‡½æ•° foo.barï¼Œæ‰€ä»¥è°ƒç”¨åï¼Œè¾“å‡ºçš„æ˜¯ 1\n(true && foo.bar)(); // 1\n\n//ç¤ºä¾‹6: é€—å·æ“ä½œç¬¦è¿”å›æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œæ‰€ä»¥è¿™é‡Œè¿”å›çš„æ˜¯ foo.bar å‡½æ•°ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°ç›¸å½“äºè°ƒç”¨å…¨å±€çš„ bar å‡½æ•°ï¼Œæ‰€ä»¥è¾“å‡ºçš„æ˜¯ 1\nconsole.log((foo.bar, foo.bar)()); // 1\n\n```\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-1.png)\n\n\n### 2.2. ä¸¥æ ¼æ¨¡å¼\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-2.png)\n\n\n## 3. æ¨¡å—æ¨¡å¼\n\n```javascript\n// å°±æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œè¿”å›ä¸€äº›æ–¹æ³•\n// ç«‹å³æ‰§è¡Œå‡½æ•°\nvar counter = (function(){\n    var i = 0;\n    return {\n        get: function(){\n            return i;\n        },\n        set: function(val){\n            i = val;\n        },\n        increment: function(){\n            return ++i;\n        }\n    }\n}());\n```\n\n\n## 4. apply/call/bind çš„åŒºåˆ«åŠç®€æ˜“å®ç°\n\n### 4.1. åŒºåˆ«\n\n1. call å’Œ apply çš„åŒºåˆ«ä¸»è¦åœ¨äºå‚æ•°çš„ä¼ é€’æ–¹å¼:\n    - call æ¥å—ä¸€ç³»åˆ—å‚æ•°ï¼š`fn.call(obj,arg1,arg2)`\n    - apply æ¥å—ä¸€ä¸ªå‚æ•°æ•°ç»„ï¼š`fn.apply(obj,[arg1,arg2])`\n2. bind ä¸ call/apply çš„ä¸»è¦åŒºåˆ«:\n    - call å’Œ apply ä¼š**ç«‹å³æ‰§è¡Œ**å‡½æ•°\n    - bind è¿”å›ä¸€ä¸ªæ–°å‡½æ•°,å¯ä»¥ç¨åæ‰§è¡Œ\n3. ä½¿ç”¨åœºæ™¯:\n    - call/apply: å½“ä½ æƒ³**ç«‹å³è°ƒç”¨å‡½æ•°**,å¹¶`ä¸´æ—¶`æ”¹å˜ this æŒ‡å‘æ—¶ä½¿ç”¨\n    - bind: å½“ä½ æƒ³åˆ›å»ºä¸€ä¸ª**æ°¸ä¹…æ”¹å˜ this æŒ‡å‘**çš„æ–°å‡½æ•°æ—¶ä½¿ç”¨,å¸¸ç”¨äºå›è°ƒå‡½æ•°ä¸­ä¿æŒ this æŒ‡å‘\n\n### 4.2. æ‰‹å†™ apply\n\n```javascript\n// ä½¿ç”¨ES6è¯­æ³•å®ç°çš„apply \nFunction.prototype._apply = function (context = window, args) {\n  // é¦–å…ˆè¦è·å–é‚£ä¸ªå‡½æ•°è°ƒç”¨äº† apply ï¼Œå³ this\n  // æ¯”å¦‚ foo.apply(bar, [1, 2, 3]) , è¿™é‡Œçš„ this å°±æ˜¯ foo\n  context.fn = this;\n\n  let res;\n  if (Array.isArray(args)) {\n    res = context.fn(...args);\n  } else {\n    // none args\n    res = context.fn();\n  }\n\n  delete context.fn;\n  return res;\n};\n\n```\n\n### 4.3. æ‰‹å†™ call\n\n```javascript\n// ä½¿ç”¨ES6è¯­æ³•å®ç°çš„call: è®°å¾—ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦\nFunction.prototype._call = function (context = window, ...args) {\n  // é¦–å…ˆè¦è·å–é‚£ä¸ªå‡½æ•°è°ƒç”¨äº† call ï¼Œå³ this\n  // æ¯”å¦‚ foo.call(bar, 1, 2, 3) , è¿™é‡Œçš„ this å°±æ˜¯ foo\n  context.fn = this;\n\n  let res = context.fn(...args);\n\n  delete context.fn;\n  return res;\n};\n```\n\n### 4.4. æ‰‹å†™ bind\n\n```javascript hl:4,7\n// ä½¿ç”¨ES6è¯­æ³•å®ç°çš„bind\nFunction.prototype._bind = function (context = window, ...args) {\n  let fn = this;\n  // è¿”å›çš„ä¸€ä¸ªæ–°å‡½æ•°: æ³¨æ„è¿™é‡Œéœ€è¦åˆå¹¶å‚æ•°\n  return function (...newArgs) {\n    return fn.apply(context, args.concat(newArgs));\n    // å¦‚æœè¦æ±‚ä¸èƒ½ä½¿ç”¨ apply, é‚£ä¹ˆå°±ä½¿ç”¨ ä¸Šé¢å®šä¹‰çš„ _apply\n    // return fn._apply(context, args.concat(newArgs));\n  };\n};\n```\n\n## 5. è·å–å‡½æ•°å‚æ•°çš„æ–¹æ³•\n\n- ä½¿ç”¨ `arguments` å¯¹è±¡\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-3.png)\n- ä½¿ç”¨**æ‰©å±•è¿ç®—ç¬¦**\n\t- `function fn(first, ...args) {}`\n\n\n## 6. è‡ªå·±å®ç° myInstanceof\n\n\n```javascript hl:3,5\nfunction myInstanceof(left, right) {\n\n  // è·å–å¯¹è±¡çš„åŸå‹ï¼Œä½¿ç”¨ Object.getPrototypeOf()\n  let proto = Object.getPrototypeOf(left); \n  // æˆ–è€…ä½¿ç”¨ left.__proto__\n  // let proto = left.__proto__; \n  let prototype = right.prototype; // è·å–æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡\n\n  while (true) {\n    // æŸ¥æ‰¾åˆ°å°½å¤´ï¼Œè¿˜æ²¡æ‰¾åˆ°, è¿”å› false\n    if (proto === null) {\n      return false;\n    }\n    // æ‰¾åˆ°ç›¸åŒçš„åŸå‹å¯¹è±¡ï¼Œè¿”å› true\n    if (proto === prototype) {\n      return true;\n    }\n    // ç»§ç»­æŸ¥æ‰¾, ç›´åˆ°æ‰¾åˆ°ç›¸åŒçš„åŸå‹å¯¹è±¡\n    proto = Object.getPrototypeOf(proto);\n  }\n}\n```\n\n\n## 7. åŸå‹é“¾\n\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-4.png)\n\n## 8. å¦‚ä½•æ¸…é™¤æµ®åŠ¨\n\n- å­å…ƒç´ è®¾ç½®æµ®åŠ¨æ—¶ï¼Œçˆ¶å…ƒç´ è®¾ç½®ä¸º BFCï¼Œæ¯”å¦‚ `overflow:hidden`\n- å‰åä¸¤ä¸ªå…„å¼Ÿå…ƒç´ ï¼Œå‰ä¸€ä¸ªè®¾ç½®äº†æµ®åŠ¨  `float:left`ï¼Œåä¸€ä¸ªæŠŠå‰ä¸€ä¸ªè¦†ç›–äº†\n\t- åä¸€ä¸ªè®¾ç½®ä¸º BFC å³å¯ï¼Œæ¯”å¦‚ `overflow:hidden\n\n## 9. z-index çš„è§„åˆ™\n\n- åœ¨åŒä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡é¢†åŸŸï¼Œ**è°å¤§è°ä¸Š**\n- å½“å…ƒç´ çš„å±‚å æ°´å¹³ä¸€è‡´æ—¶ï¼Œ**åæ¥å±…ä¸Š**\n\n## 10. CSS æ€§èƒ½ä¼˜åŒ–\n\n- æ–‡ä»¶å‹ç¼©\n- css åŠ¨ç”»å¯ç”¨`GPU`åŠ é€Ÿï¼Œä¸€äº›å›¾å½¢æ¸²æŸ“çš„`æ”¾å¿ƒäº¤ç»™GPU`\n- é¿å…`@import`\n- å‡å°‘`cssåµŒå¥—`\n- å‡å°‘è¿‡åˆ†`é‡æ’`\n- `ä¸è¦tableå¸ƒå±€`ï¼Œä¸€ä¸ªå¾ˆå°çš„æ”¹åŠ¨ä¼šå¯¼è‡´ `è‡´tableé‡æ–°å¸ƒå±€`\n- `css é€‰æ‹©å™¨ï¼Œä¸è¦é€šé…ç¬¦`\n\n## 11. css ä¼˜å…ˆçº§è®¡ç®—è§„åˆ™\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-5.png)\n\n## 12. CSS çš„ç¼–å†™æ–¹å¼æœ‰å“ªäº›ï¼Ÿ\n\n- æ‰‹å†™æºç”Ÿ CSS\n- ä½¿ç”¨é¢„å¤„ç†å™¨ `Sass/Less`\n- ä½¿ç”¨åå¤„ç†å™¨ `PostCSS` ã€`css`çš„`babel` ï¼ˆç±»æ¯”äºjsï¼‰\n- ä½¿ç”¨ **css modules**\n- ä½¿ç”¨ **css in js**\n\n## 13. å®ç°å­—ç¬¦ä¸²çš„ç¿»è½¬\n\nä¸‰ç§æ–¹æ³•ï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-6.png)\n\n\n## 14. å®ç° trim\n\nä¸¤ç§å†™æ³•ï¼š `/^\\s+|\\s+$/`  ï¼Œæ³¨æ„ä½¿ç”¨ `^`  å’Œ `$`\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-7.png)\n\n## 15. å®ç°åƒåˆ†ä½\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-8.png)\n\nå…³é”®ç‚¹ï¼š\n- ä½¿ç”¨ replace çš„ç¬¬äºŒä¸ªå‡½æ•°å‚æ•°\n- `x(?=y)`  \n- `$` åŒ¹é…ç»“æŸï¼Œåº”è¯¥ä»åå¾€å‰åŒ¹é…\n- éå†çš„è¯ï¼Œéœ€è¦è½¬æˆæ•°ç»„\n\t- éå†éœ€è¦ reverse \n\t- æˆ–è€… å€’ç€éå†\n\n## 16. é˜²æŠ–å’ŒèŠ‚æµçš„å®ç°\n\n- é˜²æŠ–ï¼šå³ `åªæ‰§è¡Œæœ€åä¸€æ¬¡` ï¼Œ æ¯”å¦‚ resize å’Œ sug ï¼ŒæŒ‰é’®æäº¤ã€è¡¨å•éªŒè¯ã€\n- èŠ‚æµï¼šå³`å•ä½æ—¶é—´åªæ‰§è¡Œä¸€æ¬¡`ï¼Œæ¯”å¦‚æ»šåŠ¨åŠ è½½æ›´å¤šï¼Œæ‹–æ‹½ç§»åŠ¨äº‹ä»¶\n\n\n```javascript hl:3,15\nfunction debounce(fn, ms) {\n  let timer = null;\n  // è¿”å›ä¸€ä¸ªå‡½æ•°\n  return function (...args) {\n    timer && clearTimeout(timer);\n    // æ¸…é™¤ï¼Œé‡æ–°settimeout\n    timer = setTimeout(() => {\n      fn.apply(this, args);\n    }, ms);\n  };\n}\n\nfunction throttle(fn, ms) {\n  let timer = null;\n  // è¿”å›ä¸€ä¸ªå‡½æ•°\n  return function (...args) {\n    // ä¿è¯ä¸€æ®µæ—¶é—´åªæ‰§è¡Œä¸€æ¬¡\n    // å¦‚æœ timer å­˜åœ¨ï¼Œè¯´æ˜å·²ç»æ‰§è¡Œè¿‡äº†ï¼Œç›´æ¥è¿”å›\n    if (!timer) {\n      timer = setTimeout(() => {\n        fn.apply(this, args);\n        timer = null;\n      }, ms);\n    }\n  };\n}\n\nfunction throttle(fn, ms) {\n  let start = 0;\n  return function (...args) {\n    if (Date.now() - start > ms) {\n      start = Date.now();\n      fn.apply(this, args);\n    }\n  }\n}\n\n```\n\n\n## 17. å®ç°ä¸€ä¸ªç®€æ˜“çš„å‘å¸ƒè®¢é˜…æ¨¡å¼\n\n### 17.1. ç®€æ˜“å®ç°\n\n```javascript\nclass Event {\n  constructor(props) {\n    // äº‹ä»¶å¯¹è±¡, äº‹ä»¶ç±»å‹, å›è°ƒå‡½æ•°é˜Ÿåˆ—\n    this._events = Object.create(null);\n  }\n\n  //è®¢é˜…äº‹ä»¶\n  on(type, fn) {\n    this._events[type].push(fn);\n  }\n\n  // å–æ¶ˆè®¢é˜…\n  off(type, fn) {\n    // æ‰¾this._events[type]ä¸‹çš„fnï¼Œremove å®ƒ\n    // å¦‚æœè¯¥ç±»å‹çš„äº‹ä»¶å­˜åœ¨ï¼Œä¸”æ˜¯æ•°ç»„\n    if (Array.isArray(this._events[type])) {\n      this._events[type] = this._events[type].filter((event) => {\n        return event !== fn && event.origin !== fn;\n      });\n    }\n  }\n\n  // åªè®¢é˜…ä¸€æ¬¡\n  once(type, fn) {\n    const only = (...args) => {\n      fn.apply(this, args);\n      this.off(type, fn);\n    };\n    only.origin = fn;\n    this.add(type, only);\n  }\n\n  // è§¦å‘äº‹ä»¶ï¼Œtype ä¸ºäº‹ä»¶ç±»å‹ï¼Œargs ä¸ºä¼ é€’çš„å‚æ•°\n  emit(type, ...args) {\n    // éå†æ‰§è¡Œ\n    if (Array.isArray(this._events[type])) {\n      this._events[type].forEach((fn) => {\n        fn.apply(this, args);\n      });\n    }\n  }\n}\n```\n\n### 17.2. ä½¿ç”¨\n\n```javascript\n// ä½¿ç”¨\n// ä½¿ç”¨ç¤ºä¾‹\nconst eventEmitter = new Event();\n\n// è®¢é˜…äº‹ä»¶\nfunction onMessage(data) {\n  console.log(\"Received message:\", data);\n}\neventEmitter.on(\"message\", onMessage);\n\n// å‘å¸ƒäº‹ä»¶\neventEmitter.emit(\"message\", \"Hello, World!\");\n\n// å–æ¶ˆè®¢é˜…\neventEmitter.off(\"message\", onMessage);\n\n```\n\n## 18. ç®€æ˜“çš„è§‚å¯Ÿè€…æ¨¡å¼\n\n```javascript\n// ä¸»é¢˜ç±»ï¼ˆå°å®å®ï¼‰\nclass Subject {\n  constructor(name) {\n    this.name = name;\n    this.observers = []; // å­˜å‚¨è§‚å¯Ÿè€…çš„æ•°ç»„\n    // å°å®å®çš„çŠ¶æ€\n    this.state = \"å¼€å¿ƒ\"; // éš¾å—ã€å¼€å¿ƒã€ç”Ÿæ°”\n  }\n\n  // æ·»åŠ è§‚å¯Ÿè€…\n  add(observer) {\n    this.observers.push(observer);\n  }\n\n  // ç§»é™¤è§‚å¯Ÿè€…\n  remove(observer) {\n    const index = this.observers.indexOf(observer);\n    if (index > -1) {\n      this.observers.splice(index, 1);\n    }\n  }\n\n  // é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…\n  notify(data) {\n    this.observers.forEach((observer) => observer.update(data));\n  }\n\n  // æŸäº›çŠ¶æ€å˜åŒ–æ—¶è°ƒç”¨ï¼Œç”¨äºé€šçŸ¥è§‚å¯Ÿè€…\n  setState(state) {\n    this.state = state;\n    this.notify(this.state);\n  }\n}\n\n// è§‚å¯Ÿè€…ç±»\nclass Observer {\n  constructor(name) {\n    this.name = name;\n  }\n\n  // å½“æ”¶åˆ°ä¸»é¢˜çš„é€šçŸ¥æ—¶è°ƒç”¨\n  update(data) {\n    console.log(`${this.name} è§‚å¯Ÿåˆ°äº†å°å®å®çŠ¶æ€: ${data}`);\n  }\n}\n\n// æµ‹è¯•ä»£ç \n// åˆ›å»ºä¸€ä¸ªå°å®å®ä¸»é¢˜\nconst baby = new Subject(\"å°å®å®\");\n\n// åˆ›å»ºçˆ¸çˆ¸å’Œå¦ˆå¦ˆä¸¤ä¸ªè§‚å¯Ÿè€…\nconst father = new Observer(\"çˆ¸çˆ¸\");\nconst mother = new Observer(\"å¦ˆå¦ˆ\");\n\n// çˆ¸çˆ¸å’Œå¦ˆå¦ˆè®¢é˜…å°å®å®ï¼Œå…³å¿ƒå°å®å®çš„çŠ¶æ€\nbaby.add(father);\nbaby.add(mother);\n\n// å°å®å®çŠ¶æ€å˜åŒ–ï¼Œé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…\nbaby.setState(\"éš¾å—\");\n\n// è¾“å‡ºï¼š\n// çˆ¸çˆ¸ è§‚å¯Ÿåˆ°äº†å°å®å®çŠ¶æ€: éš¾å—\n// å¦ˆå¦ˆ è§‚å¯Ÿåˆ°äº†å°å®å®çŠ¶æ€: éš¾å—\n\n// å°å®å®çŠ¶æ€å˜åŒ–ï¼Œé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…\nbaby.setState(\"å¼€å¿ƒ\");\n\n// è¾“å‡ºï¼š\n// çˆ¸çˆ¸ è§‚å¯Ÿåˆ°äº†å°å®å®çŠ¶æ€: å¼€å¿ƒ\n// å¦ˆå¦ˆ è§‚å¯Ÿåˆ°äº†å°å®å®çŠ¶æ€: å¼€å¿ƒ\n\n// ç§»é™¤è§‚å¯Ÿè€…\nbaby.remove(father);\n```\n\n## 19. å•ä¾‹æ¨¡å¼\n\n### 19.1. ä½¿ç”¨åœºæ™¯\n\n- `window`å¯¹è±¡\n- ç™»å½•æ¨¡æ€æ¡†\n- å…¨å±€ç¼“å­˜æ± \n- çŠ¶æ€ç®¡ç†åº“ï¼šç†è®ºä¸Šéƒ½æ˜¯ä¸€ä¸ªå•ä¾‹\n- æ—¥å¿—è®°å½•å™¨ï¼š å•ä¾‹æ¨¡å¼å¯ä»¥ç”¨äºåˆ›å»ºä¸€ä¸ªå…¨å±€çš„æ—¥å¿—è®°å½•å™¨ï¼Œç¡®ä¿æ‰€æœ‰æ—¥å¿—éƒ½é€šè¿‡åŒä¸€ä¸ªå®ä¾‹å¤„ç†\n- æ•°æ®åº“è¿æ¥æ± ï¼šåœ¨éœ€è¦ç®¡ç†æ•°æ®åº“è¿æ¥çš„åº”ç”¨ä¸­ï¼Œå•ä¾‹æ¨¡å¼å¯ä»¥ç”¨æ¥åˆ›å»ºå’Œç®¡ç†è¿æ¥æ± ï¼Œç¡®ä¿é«˜æ•ˆåœ°é‡ç”¨è¿æ¥\n\n### 19.2. ç®€æ˜“å®ç°\n\n```javascript hl:3,10,23\nclass Singleton {\n  constructor() {\n    // å¦‚æœæ²¡æœ‰å®ä¾‹ï¼Œåˆ™åˆ›å»ºå®ä¾‹\n    if (!Singleton.instance) {\n      // åˆå§‹åŒ–ä»£ç \n      this.data = [];\n      // ä¿å­˜å®ä¾‹çš„å¼•ç”¨\n      Singleton.instance = this;\n    }\n    // å¦‚æœæœ‰åˆ™è¿”å›\n    return Singleton.instance;\n  }\n\n  // å®ä¾‹æ–¹æ³•\n  addItem(item) {\n    this.data.push(item);\n  }\n\n  getItems() {\n    return this.data;\n  }\n  \n  // é™æ€æ–¹æ³•ï¼šæƒ°æ€§å•ä¾‹çš„å®ç°å…³é”®ç‚¹\n  static getInstance() {\n    // å¦‚æœæ²¡æœ‰å®ä¾‹ï¼Œåˆ™åˆ›å»ºå®ä¾‹\n    if (!Singleton.instance) {\n      Singleton.instance = new Singleton();\n    }\n    // å¦‚æœæœ‰åˆ™è¿”å›\n    return Singleton.instance;\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst instance1 = new Singleton();\nconst instance2 = new Singleton();\n\nconsole.log(instance1 === instance2); // è¾“å‡º: true\n\ninstance1.addItem(\"Item 1\");\ninstance2.addItem(\"Item 2\");\n\nconsole.log(instance1.getItems()); // è¾“å‡º: [\"Item 1\", \"Item 2\"]\nconsole.log(instance2.getItems()); // è¾“å‡º: [\"Item 1\", \"Item 2\"]\n\n```\n\n\n### 19.3. ä½¿ç”¨åœºæ™¯ï¼šç®€æ˜“çŠ¶æ€ç®¡ç†\n\n```javascript hl:7,6\nclass StateManager {\n  constructor() {\n    if (StateManager.instance) {\n      return StateManager.instance;\n    }\n    this.state = {};\n    StateManager.instance = this;\n  }\n\n  setState(key, value) {\n    this.state[key] = value;\n  }\n\n  getState(key) {\n    return this.state[key];\n  }\n\n  static getInstance() {\n    if (!StateManager.instance) {\n      StateManager.instance = new StateManager();\n    }\n    return StateManager.instance;\n  }\n}\n\n// ä½¿ç”¨\nconst stateManager = StateManager.getInstance();\nstateManager.setState('user', { name: 'John', id: 1 });\nconsole.log(stateManager.getState('user')); // { name: 'John', id: 1 }\n\n```\n\n### 19.4. åœºæ™¯ï¼šæ—¥å¿—è®°å½•\n\n```javascript hl:6,7\nclass Logger {\n  constructor() {\n    if (Logger.instance) {\n      return Logger.instance;\n    }\n    this.logs = [];\n    Logger.instance = this;\n  }\n\n  log(message) {\n    const timestamp = new Date().toISOString();\n    this.logs.push(`${timestamp}: ${message}`);\n    console.log(`${timestamp}: ${message}`);\n  }\n\n  getLogs() {\n    return this.logs;\n  }\n\n  static getInstance() {\n    if (!Logger.instance) {\n      Logger.instance = new Logger();\n    }\n    return Logger.instance;\n  }\n}\n\n// ä½¿ç”¨\nconst logger = Logger.getInstance();\nlogger.log(\"User logged in\");\nlogger.log(\"API call failed\");\nconsole.log(logger.getLogs());\n\n```\n\n### 19.5. æ¨¡æ€æ¡†\n\n```javascript hl:6,10,15,22\nclass ModalManager {\n  constructor() {\n    if (ModalManager.instance) {\n      return ModalManager.instance;\n    }\n    this.modal = null;\n    ModalManager.instance = this;\n  }\n\n  openModal(content) {\n    this.modal = { content, isOpen: true };\n    this.render();\n  }\n\n  closeModal() {\n    if (this.modal) {\n      this.modal.isOpen = false;\n      this.render();\n    }\n  }\n\n  render() {\n    // å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šæ›´æ–°DOM\n    console.log(this.modal ? \"Modal is open\" : \"Modal is closed\");\n  }\n\n  static getInstance() {\n    if (!ModalManager.instance) {\n      ModalManager.instance = new ModalManager();\n    }\n    return ModalManager.instance;\n  }\n}\n\n// ä½¿ç”¨\nconst modalManager = ModalManager.getInstance();\n// æ‰“å¼€æ¨¡æ€æ¡†\nmodalManager.openModal(\"Hello World\");\n// å…³é—­æ¨¡æ€æ¡†\nmodalManager.closeModal();\n\n```\n\n### 19.6. æ¨¡æ‹Ÿç™»å½•\n\né€šè¿‡**å•ä¾‹æ¨¡å¼**æ¥å®ç°, ä¿è¯é¡µé¢ä¸­åªæœ‰ä¸€ä¸ªç™»å½•æ¡†, ä¸”åªèƒ½é€šè¿‡`getInstance`æ–¹æ³•è·å–\n\n```javascript hl:7,40,45,53\nclass Login {\n  //æ„é€ å™¨\n  constructor() {\n    this.init();\n  }\n  //åˆå§‹åŒ–æ–¹æ³•\n  init() {\n    //æ–°å»ºdiv\n    let mask = document.createElement(\"div\");\n    //æ·»åŠ æ ·å¼\n    mask.classList.add(\"mask-layer\");\n    //æ·»åŠ æ¨¡æ¿å­—ç¬¦ä¸²\n    mask.innerHTML = `\n          <div class=\"login-wrapper\">\n            <div class=\"username-input user-input\">\n              <span class=\"login-text\">ç”¨æˆ·å:</span>\n              <input type=\"text\">\n            </div>\n            <div class=\"pwd-input user-input\">\n              <span class=\"login-text\">å¯†ç :</span>\n              <input type=\"password\">\n            </div>\n            <div class=\"btn-wrapper\">\n              <button class=\"confrim-btn\">ç¡®å®š</button>\n              <button class=\"clear-btn\">æ¸…ç©º</button>\n            </div>\n          </div>\n  \t\t  `;\n    //æ’å…¥å…ƒç´ \n    document.body.insertBefore(mask, document.body.childNodes[0]);\n    //æ³¨å†Œå…³é—­ç™»å½•æ¡†äº‹ä»¶\n    Login.closeLogin();\n  }\n  //é™æ€æ–¹æ³•: è·å–å…ƒç´ \n  static getLoginDom(cls) {\n    return document.querySelector(cls);\n  }\n\n  // é™æ€æ–¹æ³•: æ‰“å¼€ç™»å½•æ¡†\n  static openLogin() {\n    this.getLoginDom(\".mask-layer\").style = \"display: block\";\n  }\n\n  //é™æ€æ–¹æ³•: æ³¨å†Œå…³é—­ç™»å½•æ¡†äº‹ä»¶\n  static closeLogin() {\n    this.getLoginDom(\".close-btn\").addEventListener(\"click\", () => {\n      //ç»™é®ç½©å±‚æ·»åŠ style, ç”¨äºéšè—é®ç½©å±‚\n      this.getLoginDom(\".mask-layer\").style = \"display: none\";\n    });\n  }\n\n  //é™æ€æ–¹æ³•: è·å–å®ä¾‹(å•ä¾‹)\n  static getInstance() {\n    if (!this.instance) {\n      this.instance = new Login();\n    } else {\n      //ç§»é™¤é®ç½©å±‚style, ç”¨äºæ˜¾ç¤ºé®ç½©å±‚\n      this.getLoginDom(\".mask-layer\").removeAttribute(\"style\");\n    }\n    return this.instance;\n  }\n}\n\n\n```\n\n\n### 19.7. ä½¿ç”¨æ–¹æ³•\n\n```javascript\n// ä½¿ç”¨æ–¹æ³•:\n// 1. é€šè¿‡getInstanceæ–¹æ³•è·å–å®ä¾‹\nlet login1 = Login.getInstance();\n// 2. é€šè¿‡openLoginæ–¹æ³•æ‰“å¼€ç™»å½•æ¡†\nlogin1.openLogin();\n// 3. é€šè¿‡closeLoginæ–¹æ³•å…³é—­ç™»å½•æ¡†\nlogin1.closeLogin();\n\nlet login2 = Login.getInstance();\nlogin2.openLogin();\nlogin2.closeLogin();\n\nlogin1 === login2; // true\n\n```\n\n## 20. è¯´è¯´å¸¸è§çš„è®¾è®¡æ¨¡å¼\n\n- å•ä¾‹ï¼šå¦‚`jQueryåº“`ã€`ç™»é™†çš„å¼¹çª—` ï¼Œæƒ°æ€§å•ä¾‹ç­‰\n- åŸå‹æ¨¡å¼ï¼šå¦‚ `js çš„åŸå‹é“¾`\n- é€‚é…å™¨æ¨¡å¼ï¼šå¦‚`nodeJS`åšèšåˆ\n- ä»£ç†æ¨¡å¼ï¼Œæ¯”å¦‚`new Proxy`\n- è£…é¥°å™¨æ¨¡å¼ï¼Œå¦‚tsä¸­ï¼Œæˆ–è€… angular æˆ–è€… react çš„è¯ï¼Œæ¯”å¦‚`@connect` reduxçš„ç”¨æ³•\n- ç»„åˆæ¨¡å¼ï¼šæˆ‘ç†è§£åƒVueçš„ç»„åˆå¼APIï¼Œæˆ–è€… react è‡ªå®šä¹‰`hooks` ä¹Ÿæœ‰ç»„åˆæ¨¡å¼çš„å½±å­\n- è¿­ä»£å™¨æ¨¡å¼\n- å‘å¸ƒ-è®¢é˜…æ¨¡å¼ ã€ è§‚å¯Ÿè€…æ¨¡å¼","d574a7d46ec85579858a99f880a8064b":"\n# å¸¸è§é¢è¯•é¢˜ä¸‰\n\n`#å‰ç«¯é¢è¯•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. shadow dom  \n\n### 1.1. ä¸¤ç§ DOM\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-9.png)\næ‰€ä»¥ï¼Œæœ‰ä¸¤ç§ DOMï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-10.png)\n\n### 1.2. å®šä¹‰\n\nShadow DOMæ˜¯Web Componentsæ ‡å‡†çš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†ï¼Œå®ƒæä¾›äº†ä¸€ç§å°è£…å’Œéš”ç¦»Webç»„ä»¶çš„æ–¹æ³•\n\n### 1.3. ä¼˜åŠ¿\n\n- æ ·å¼éš”ç¦»\n- æ€§èƒ½ä¼˜åŒ–ï¼Œå› ä¸ºæµè§ˆå™¨å¯ä»¥ç‹¬ç«‹æ¸²æŸ“æ›´æ–°ä»–ä»¬\n- å®‰å…¨æ€§ï¼šæ¯”å¦‚  `dom.attachShadow({mode: 'closed'})` ï¼Œå¤–éƒ¨ js æ— æ³•è®¿é—®ä»–ä»¬\n- å°è£…æ€§ä¸å¯ç»´æŠ¤æ€§\n\n## 2. èŠèŠ Web Component\n\n> å®ƒé‡Œé¢çš„ï¼Œä¸€äº›æ¦‚å¿µå¦‚`template` ä¸ `æ’æ§½slot` å½±å“å¦‚`Vue`ç±»çš„æ¡†æ¶\n\n- `window.customElements.define()` æ–¹æ³•æ¥è‡ªå®šä¹‰ `ç»„ä»¶` ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•å®ç° `<user-card>`\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-11.png)\n\t\t- è¦ç‚¹ 1ï¼š`<template id=\"userCardTemplate\"/>`\n\t\t- è¦ç‚¹ 2ï¼šå®šä¹‰  `window.customElements.define('user-card',UserCard)`\n\t\t- è¦ç‚¹ 3ï¼šå®šä¹‰ `UserCard`\n\nWeb Components çš„æ ¸å¿ƒç‰¹æ€§ï¼š\n- è‡ªå®šä¹‰å…ƒç´ ï¼šåˆ›å»ºæ–°çš„ HTML æ ‡ç­¾\n- Shadow DOMï¼šå°è£…ç»„ä»¶çš„å†…éƒ¨ç»“æ„å’Œæ ·å¼\n- HTML æ¨¡æ¿ï¼šå®šä¹‰ç»„ä»¶çš„ç»“æ„\n\n### 2.1. å®ç°ä¸€ä¸ª  custom-counter \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-13.png)\n\n```html hl:17,15,36,34\n<!doctype html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"UTF-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n        <title>Custom Counter Web Component</title>\n    </head>\n    <body>\n        <custom-counter></custom-counter>\n        <script>\n            class CustomCounter extends HTMLElement {\n                constructor() {\n                    super();\n                    this.count = 0;\n                    this.attachShadow({ mode: \"open\" });\n                }\n                // connectedCallbackæ˜¯Web Components ç”Ÿå‘½å‘¨æœŸä¸­çš„ä¸€ä¸ªå…³é”®é’©å­å‡½æ•°ã€‚\n                // å®ƒæ˜¯è‡ªå®šä¹‰å…ƒç´ è§„èŒƒå®šä¹‰çš„å››ä¸ªç”Ÿå‘½å‘¨æœŸå›è°ƒä¹‹ä¸€\n                // å¦å¤–ä¸‰ä¸ªæ˜¯ï¼šconnectedCallbackã€disconnectedCallback å’Œ adoptedCallback\n                // å½“è‡ªå®šä¹‰å…ƒç´ è¢«ç§»é™¤æ—¶ï¼ŒdisconnectedCallback ä¼šè¢«è°ƒç”¨\n                // å½“è‡ªå®šä¹‰å…ƒç´ é¦–æ¬¡è¢«æ’å…¥åˆ°æ–‡æ¡£çš„ DOM ä¸­æ—¶ï¼ŒconnectedCallback ä¼šè¢«è‡ªåŠ¨è°ƒç”¨\n                // é€šå¸¸åœ¨è¿™é‡Œè¿›è¡Œä¸€äº›åˆå§‹åŒ–çš„æ“ä½œï¼Œæ¯”å¦‚åˆ›å»º shadow DOMã€æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ç­‰\n                connectedCallback() {\n                    this.render();\n                    this.shadowRoot\n                        .querySelector(\"#increment\")\n                        .addEventListener(\"click\", () => this.increment());\n                    this.shadowRoot\n                        .querySelector(\"#decrement\")\n                        .addEventListener(\"click\", () => this.decrement());\n                }\n\n                render() {\n                    this.shadowRoot.innerHTML = `\n\t\t\t\t\t\t\t\t          <style>\n\t\t\t\t\t\t\t\t            :host {\n\t\t\t\t\t\t\t\t              display: block;\n\t\t\t\t\t\t\t\t              font-family: Arial, sans-serif;\n\t\t\t\t\t\t\t\t              background-color: `#f0f0f0;`\n\t\t\t\t\t\t\t\t              padding: 20px;\n\t\t\t\t\t\t\t\t              border-radius: 5px;\n\t\t\t\t\t\t\t\t            }\n\t\t\t\t\t\t\t\t            `#counter` {\n\t\t\t\t\t\t\t\t              font-size: 24px;\n\t\t\t\t\t\t\t\t              margin-bottom: 10px;\n\t\t\t\t\t\t\t\t            }\n\t\t\t\t\t\t\t\t            button {\n\t\t\t\t\t\t\t\t              font-size: 16px;\n\t\t\t\t\t\t\t\t              margin: 0 5px;\n\t\t\t\t\t\t\t\t              padding: 5px 10px;\n\t\t\t\t\t\t\t\t              cursor: pointer;\n\t\t\t\t\t\t\t\t            }\n\t\t\t\t\t\t\t\t          </style>\n\t\t\t\t\t\t\t\t          <div id=\"counter\">Count: ${this.count}</div>\n\t\t\t\t\t\t\t\t          <button id=\"decrement\">-</button>\n\t\t\t\t\t\t\t\t          <button id=\"increment\">+</button>\n\t\t\t\t\t\t\t\t        `;\n                }\n\n                increment() {\n                    this.count++;\n                    this.updateCounter();\n                }\n\n                decrement() {\n                    this.count--;\n                    this.updateCounter();\n                }\n\n                updateCounter() {\n                    this.shadowRoot.querySelector(\"#counter\").textContent =\n                        `Count: ${this.count}`;\n                }\n            }\n\n            customElements.define(\"custom-counter\", CustomCounter);\n        </script>\n    </body>\n</html>\n\n\n```\n\n## 3. Web Components å®šä¹‰ç»„ä»¶æ ·å¼æ—¶ï¼Œ`:host`çš„ä½œç”¨æ˜¯ï¼Ÿ\n\n`\":host\" é€‰æ‹©å™¨`ç”¨äºé€‰æ‹©è‡ªå®šä¹‰å…ƒç´ æœ¬èº«ï¼Œå³**ç»„ä»¶çš„æ ¹å…ƒç´ **\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-12.png)\n\n## 4. ä½¿ç”¨ React Hooks å®ç°ä¸€ä¸ª useFetchData\n\n> å’Œ vue çš„ hooks çœŸçš„å¾ˆåƒ\n\n```javascript  hl:16,28,37\n// ä½¿ç”¨ React Hooks å®ç°ä¸€ä¸ª useFetchData\n// åœ¨æˆ‘ä»¬çš„ä¸šåŠ¡ä¸­ç»å¸¸ä¼šé‡åˆ°åˆ—è¡¨æˆ–è€…è¡¨æ ¼é¡µé¢\n// éœ€è¦æ”¯æŒç¿»é¡µï¼ŒåŠ è½½æ›´å¤šï¼Œé”™è¯¯å¤„ç†ï¼Œ loading çš„åŠŸèƒ½ã€‚å¸Œæœ›èƒ½å¤Ÿå®ç°ä¸€ä¸ª Hook æ¥æŠ½è±¡è¿™éƒ¨åˆ†é€»è¾‘\n\nfunction useFetchData() {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  // è¿™äº›å‚æ•°é€‚åˆéƒ½æ”¾åˆ° options é‡Œé¢\n  const [page, setPage] = useState(1);\n  const [total, setTotal] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n  const [reload, setReload] = useState(false);\n\n  // ç”¨äºä¿å­˜ ref çš„å¼•ç”¨\n  const ref = useRef();\n  // ç”¨äºä¿å­˜ AbortController çš„å¼•ç”¨, ç”¨äºå–æ¶ˆè¯·æ±‚\n  const abortControllerRef = useRef();\n\n  function destroy() {\n    ref.current = true;\n    setData([]);\n    setLoading(false);\n    setError(null);\n    \n    setPage(1);\n    setTotal(0);\n    setPageSize(10);\n    setReload(false);\n    // é”€æ¯æ—¶å–æ¶ˆè¯·æ±‚\n    abortControllerRef.current && abortControllerRef.current.abort();\n  }\n\n  useEffect(() => {\n    setLoading(true);\n\n    // ä¿å­˜ AbortController çš„å¼•ç”¨\n    abortControllerRef.current = new AbortController();\n    const { signal } = abortControllerRef.current;\n\n    fetch(\n      \"https://api.example.com/data?page=\" + page + \"&pageSize=\" + pageSize,\n      { signal },\n    )\n      .then((res) => res.json())\n      .then((res) => {\n        setData(res.data);\n        setTotal(res.total);\n        setLoading(false);\n      })\n      .catch((err) => {\n        setError(err);\n        setLoading(false);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n\n    return () => {\n      destroy();\n    };\n  }, [page, pageSize, reload]);\n\n  return {\n    data,\n    loading,\n    error,\n  };\n}\n\nexport default useFetchData;\n\n```\n\n## 5. git merge ä¸ git rebase æœ‰ä»€ä¹ˆåŒºåˆ«\n\n- æäº¤å†å²\n\t- `git merge` ä¼šä¿ç•™å†å²è®°å½•\n\t-  `git rebase`  ä¼šåˆå¹¶è®°å½•ï¼Œå¯ä»¥æœ‰**çº¿æ€§**çš„æäº¤å†å²ï¼Œèƒ½å¤Ÿæ‰€ä»¥ä¼šä¸¢å†å²è®°å½•\n- æˆ‘ä¹‹å‰æ‰€åœ¨çš„å›¢é˜Ÿéƒ½æ˜¯ç¦ç”¨`git rebase`  çš„\n\n## 6. æ·±æ‹·è´ä¸æµ…æ‹·è´\n\n### 6.1. å¸¸è§çš„æµ…æ‹·è´æ–¹å¼\n\n```javascript\nfunction shadowCopy(obj) {\n  const newObj = {};\n  for (let prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      newObj[prop] = obj[prop];\n    }\n  }\n  return newObj;\n}\n\nObject.assign({}, {});\n\nArray.prototype.slice();\n\nArray.prototype.concat();\n\nlet a = [...b];\n```\n\n### 6.2. æ·±æ‹·è´çš„ç®€æ˜“å®ç°\n\n```javascript\nfunction deepCopy(obj) {\n  if (typeof obj !== \"object\") {\n    return obj;\n  }\n  const newObj = Array.isArray(obj) ? [] : {};\n  for (let key in obj) {\n    newObj[key] = deepCopy(obj[key]);\n  }\n  return newObj;\n}\n```\n\n### 6.3. å¦‚ä½•è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ï¼šWeakMap\n\n```javascript hl:5,9,2\nfunction deepCopy(obj, hash = new WeakMap()) {\n  // åŸºæœ¬ç±»å‹\n  if (typeof obj !== \"object\") {\n    return obj;\n  }\n  if (hash.has(obj)) {\n    return hash.get(obj);\n  }\n  const newObj = Array.isArray(obj) ? [] : {};\n  hash.set(obj, newObj);\n  for (let key in obj) {\n    newObj[key] = deepCopy(obj[key], hash);\n  }\n  return newObj;\n}\n```\n\n\n### 6.4. è€ƒè™‘å…¶ä»–ç±»å‹\n\n```javascript hl:15\n// è€ƒè™‘ \bRegExpã€Dateã€Functionã€Symbolã€Mapã€Setã€WeakMapã€WeakSetã€Errorã€Promiseã€BigInt ç­‰ç‰¹æ®Šå¯¹è±¡\nfunction deepCopy(obj, hash = new WeakMap()) {\n  if (obj instanceof RegExp) return new RegExp(obj);\n  if (obj instanceof Date) return new Date(obj);\n  if (obj instanceof Function) return new Function(obj);\n  if (obj instanceof Symbol) return new Symbol(obj);\n  if (obj instanceof Map) return new Map(obj);\n  if (obj instanceof Set) return new Set(obj);\n  if (obj instanceof WeakMap) return new WeakMap(obj);\n  if (obj instanceof WeakSet) return new WeakSet(obj);\n  if (obj instanceof Error) return new Error(obj);\n  if (obj instanceof Promise) return new Promise(obj);\n  if (obj instanceof BigInt) return new BigInt(obj);\n\n  // åŸºæœ¬ç±»å‹\n  if (typeof obj !== \"object\") {\n    return obj;\n  }\n  if (hash.has(obj)) {\n    return hash.get(obj);\n  }\n  const newObj = Array.isArray(obj) ? [] : {};\n  hash.set(obj, newObj);\n  for (let key in obj) {\n    newObj[key] = deepCopy(obj[key], hash);\n  }\n  return newObj;\n}\n```\n\n### 6.5. ä¸Šé¢çš„ä»£ç è‚¯å®šæœ‰é—®é¢˜çš„ï¼Œæ¯”å¦‚å‡½æ•°ï¼Œsymbol ï¼Œ map ã€set ç­‰\n\n```javascript\nfunction deepCopy(obj, hash = new WeakMap()) {\n  // å¤„ç†nullå’Œundefined\n  if (obj === null || typeof obj === 'undefined') return obj;\n\n  // å¤„ç†åŸºæœ¬ç±»å‹\n  if (typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return obj;\n  }\n\n  // å¤„ç†å·²ç»å¤åˆ¶è¿‡çš„å¯¹è±¡ï¼ˆå¾ªç¯å¼•ç”¨ï¼‰\n  if (hash.has(obj)) {\n    return hash.get(obj);\n  }\n\n  // å¤„ç†ç‰¹æ®Šå¯¹è±¡ç±»å‹\n  if (obj instanceof Date) return new Date(obj);\n  if (obj instanceof RegExp) return new RegExp(obj);\n  if (obj instanceof Error) return new Error(obj.message);\n\n  // å¤„ç†å‡½æ•°\n  if (typeof obj === 'function') {\n    return function() {\n      return obj.apply(this, arguments);\n    };\n  }\n\n  // å¤„ç† Symbol\n  if (typeof obj === 'symbol') return Object(Symbol.prototype.valueOf.call(obj));\n\n  // å¤„ç† Map\n  if (obj instanceof Map) {\n    const newMap = new Map();\n    hash.set(obj, newMap);\n    obj.forEach((value, key) => {\n      newMap.set(deepCopy(key, hash), deepCopy(value, hash));\n    });\n    return newMap;\n  }\n\n  // å¤„ç† Set\n  if (obj instanceof Set) {\n    const newSet = new Set();\n    hash.set(obj, newSet);\n    obj.forEach(value => {\n      newSet.add(deepCopy(value, hash));\n    });\n    return newSet;\n  }\n\n  // å¤„ç† WeakMap å’Œ WeakSet\n  if (obj instanceof WeakMap || obj instanceof WeakSet) {\n    // è¿™äº›å¯¹è±¡ä¸èƒ½è¢«æ·±æ‹·è´ï¼Œè¿”å›æ–°çš„ç©ºå®ä¾‹\n    return new obj.constructor();\n  }\n\n  // å¤„ç† Promise\n  if (obj instanceof Promise) {\n    return new Promise((resolve, reject) => {\n      obj.then(\n        value => resolve(deepCopy(value, hash)),\n        error => reject(deepCopy(error, hash))\n      );\n    });\n  }\n\n  // å¤„ç† BigInt\n  if (typeof obj === 'bigint') return BigInt(obj.toString());\n\n  // å¤„ç†æ™®é€šå¯¹è±¡å’Œæ•°ç»„\n  const newObj = Array.isArray(obj) ? [] : {};\n  hash.set(obj, newObj);\n  \n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      newObj[key] = deepCopy(obj[key], hash);\n    }\n  }\n\n  // å¤„ç†ä¸å¯æšä¸¾å±æ€§\n  const symbolProperties = Object.getOwnPropertySymbols(obj);\n  for (const sym of symbolProperties) {\n    newObj[sym] = deepCopy(obj[sym], hash);\n  }\n\n  return newObj;\n}\n\n```\n\n### 6.6. JSON çš„æ–¹å¼å®ç°\n\n`json`çš„æ–¹å¼ä¼šä¸¢å¤±å¾ˆå¤šå†…å®¹ï¼Œæ¯”å¦‚ mapã€regexpã€setã€dateã€setã€å‡½æ•°ä»¥åŠå¾ªç¯å¼•ç”¨çš„é—®é¢˜\n\n\n### 6.7. æœ€å\n\nè¿˜æ˜¯ä½¿ç”¨ loadsh ã€Ramda ç­‰åº“å§ ï¼Œç»†èŠ‚è¿˜æœ‰å¾ˆå¤šéœ€è¦è€ƒè™‘çš„ \n\n## 7. å®ç°ä¸€ä¸ª Object.create(null)\n\n```javascript\nObject.myCreate = function (proto) {\n  function F() {}\n  F.prototype = proto;\n  return new F();\n};\n\nObject.myCreate = function (proto) {\n  return Object.setPrototypeOf({}, proto);\n};\n\n```\n\n## 8. ç»Ÿè®¡HTMLæ ‡ç­¾ä¸­ä»¥`b`å¼€å¤´çš„æ ‡ç­¾æ•°é‡\n\n```javascript hl:2,10\n// æ–¹æ³•ä¸€ï¼šå¾ªç¯\nconst tags = document.getElementsByTagName('*');\n// tagsæ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Œå†…éƒ¨å®ç°äº†ï¼Œéƒ¨ç½² Iterator æ¥å£ï¼Œå¯ä»¥ä½¿ç”¨æ‰©å¼ è¿ç®—ç¬¦ï¼Œå¦åˆ™ä¸èƒ½ä½¿ç”¨æ‰©å¼ è¿ç®—ç¬¦\n// è¦ä½¿ç”¨æ•°ç»„çš„æ–¹æ³•å¿…é¡»å°†ç±»æ•°ç»„è½¬ä¸ºçœŸæ­£çš„æ•°ç»„\n// tagName éƒ½æ˜¯å¤§å†™çš„\nconst value = [...tags].filter((item) => item.tagName.startsWith('B'))\n\n// æ–¹æ³•äºŒï¼šæ ‘æŸ¥æ‰¾\nconst prefixBElements = [];\nfunction dfs(ele) {\n    if (ele.tagName.startsWith('B')) {\n        prefixBElements.push(ele);\n    }\n    for (const child of ele.children) {\n        dfs(child);\n    }\n}\n// ä»HTMLæ ¹èŠ‚ç‚¹å¼€å§‹æ‰¾\ndfs(document.documentElement);\nconsole.log(prefixBElements);\n```\n\n\n## 9. ç»Ÿè®¡HTMLæ ‡ç­¾ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„æ ‡ç­¾\n\n```javascript hl:1,11,13\nconst tags = document.getElementsByTagName('*');\n\n\nlet map = new Map();\nlet maxStr = '';\nlet max = 0;\n// åªæ˜¯ä½¿ç”¨ä¸‹æ ‡æ¥è·å–ï¼Œæ²¡æœ‰ä½¿ç”¨æ•°ç»„çš„æ–¹æ³•ï¼Œæ‰€ä»¥ä¸éœ€è¦å°†ç±»æ•°ç»„è½¬ä¸ºæ•°ç»„\nfor(let i = 0; i < tags.length; i++) {\n    let value = map.get(tags[i].tagName)\n    if(value) {\n        map.set(tags[i].tagName, ++value)\n    } else {\n        map.set(tags[i].tagName, 1);\n    }\n    // ç»Ÿè®¡ï¼Œè®¡ç®—æœ€å¤§ï¼Œå®æ—¶æ›´æ–°ï¼Œmaxå’ŒmaxStr\n    if(value > max) {\n        maxStr = tags[i].tagName;\n        max = value;\n    }\n}\nconsole.log(`å½“å‰æœ€å¤šçš„æ ‡ç­¾ä¸º ${maxStr}ï¼Œä¸ªæ•°ä¸º ${max}` );\n```\n\n\n## 10. ç»™ä¸€æ®µ HTML å­—ç¬¦ä¸²åˆ¤æ–­åˆæ³•æ€§\n\n```javascript hl:2\n// åˆ¤æ–­é—­åˆæ ‡ç­¾\n// \\1 çš„ä½¿ç”¨\nlet tagClose = /<([a-zA-Z]+)[\\s\\S]*>[\\s\\S]*?<\\/\\1>/\n\nlet tagCloseNoContent = /<[a-zA-Z]+[\\s\\S]*\\/>/\n\n// éå†ï¼Œconst tags = document.getElementsByTagName('*'); æ¥ç»Ÿä¸€åˆ¤æ–­ï¼Œæ ¡éªŒå„ç§åˆç†æ€§\n// æˆ–è€…é€šè¿‡æŸ¥æ‰¾æ ‘ï¼Œé€’å½’æ¥å¤„ç†ï¼Œæ ¡éªŒåˆç†æ€§\n\nâ‘  æ ‡ç­¾æ­£åˆ™ï¼šé—­åˆæˆ–è€…éé—­åˆçš„\nâ‘¡ span ä¸­ä¸èƒ½åŒ…å« div , table td tr çš„åµŒå¥—åˆç†æ€§\nâ‘¢ æ‰€ä»¥ï¼Œè¿˜æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œå¾ˆå¤šéœ€è¦è€ƒè™‘çš„ç‚¹\n```\n\n\n## 11. è‡ªå·±å®ç°ä¸€ä¸ªæ¨¡æ¿å¼•æ“\n\nçŸ­æ—¶é—´å†…å†™ä¸å‡ºæ¥çš„ï¼Œä½†éœ€è¦è€ƒè™‘çš„ç‚¹\n\n- æ¨¡æ¿æ­£åˆ™åŒ¹é…\n- å¯ä½¿ç”¨ `with` æ³¨å…¥å˜é‡ï¼Œæ”¹å˜ä½œç”¨åŸŸ\n- å¯ä½¿ç”¨ `new Function` æ‰§è¡Œç‰¹å®šè§„åˆ™åçš„ä»£ç \n- ä½¿ç”¨ replace ï¼Œå¯èƒ½éœ€è¦åµŒå¥—ä½¿ç”¨ replace ç­‰ç­‰\n- å¯ä»¥å‚è€ƒçš„ï¼š\n\t- vue template\n\t- handlebar \n\t- ejs\n\t- ç­‰ç­‰\n\næ‰€ä»¥ï¼Œè¿™ä¸ªåˆ«æµªè´¹æ—¶é—´äº†ï¼Œpass å§ï¼ŒçœŸé‡åˆ° é‚£ä¹ˆå°±è¯´è¯´æ€è·¯ï¼Œé™¤éåšå°æŠ„ï¼Œä¸ç„¶å¾ˆéš¾æ®µæ—¶é—´å†™å‡ºæ¥çš„\n\n## 12. è·¨é¡µé¢é€šè®¯çš„æ–¹å¼éƒ½æœ‰å“ªäº›ï¼Ÿ\n\n### 12.1. åŒæº\n\n#### 12.1.1. BroadCast Channel\n\n```javascript hl:1,3,9\nconst bc = new BroadcastChannel('AlienZHOU');\n// å¤åˆ¶ä»£ç å„ä¸ªé¡µé¢å¯ä»¥é€šè¿‡ onmessage æ¥ç›‘å¬è¢«å¹¿æ’­çš„æ¶ˆæ¯ï¼š\nbc.onmessage = function (e) {\n    const data = e.data;\n    const text = '[receive] ' + data.msg + ' â€”â€” tab ' + data.from;\n    console.log('[BroadcastChannel] receive message:', text);\n};\n// å¤åˆ¶ä»£ç è¦å‘é€æ¶ˆæ¯æ—¶åªéœ€è¦è°ƒç”¨å®ä¾‹ä¸Šçš„postMessageæ–¹æ³•å³å¯ï¼š\nbc.postMessage(mydata);\n```\n\n#### 12.1.2. `sw` ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æ£€æµ‹é¡µé¢æ˜¯å¦å´©æºƒ\n\n```javascript hl:2,7,23\n/* é¡µé¢é€»è¾‘ */\nnavigator.serviceWorker.register('../util.sw.js').then(function () {\n    console.log('Service Worker æ³¨å†ŒæˆåŠŸ');\n});\n\n/* ../util.sw.js Service Worker é€»è¾‘ */\nself.addEventListener('message', function (e) {\n    console.log('service worker receive message', e.data);\n    e.waitUntil(\n        self.clients.matchAll().then(function (clients) {\n            if (!clients || clients.length === 0) {\n                return;\n            }\n            // é€šè¿‡è°ƒç”¨æ¯ä¸ª clientï¼ˆå³é¡µé¢ï¼‰çš„ postMessage æ–¹æ³•ï¼Œå‘é¡µé¢å‘é€æ¶ˆæ¯ã€‚\n            clients.forEach(function (client) {\n                client.postMessage(e.data);\n            });\n        })\n    );\n});\n\n/* é¡µé¢é€»è¾‘ */\nnavigator.serviceWorker.addEventListener('message', function (e) {\n    const data = e.data;\n    const text = '[receive] ' + data.msg + ' â€”â€” tab ' + data.from;\n    console.log('[Service Worker] receive message:', text);\n});\n```\n\n#### 12.1.3. storageäº‹ä»¶\n\n- localStorage â†’ window.addEventListener('storage' , fun)\n- â€œå…±äº«å­˜å‚¨+é•¿è½®è¯¢â€ â†’ å…¶å®åªç”¨åœ¨ Tab A ä¸­ç›‘å¬`visibilitychange`è¿™æ ·çš„äº‹ä»¶ï¼Œæ¥åšä¸€æ¬¡ä¿¡æ¯åŒæ­¥å³å¯\n\n#### 12.1.4. Shared Worker\n\nShared Worker æ˜¯ Web Workers API çš„ä¸€ç§ç‰¹æ®Šç±»å‹ï¼Œå®ƒå…è®¸å¤šä¸ªæµè§ˆå™¨ä¸Šä¸‹æ–‡ï¼ˆå¦‚çª—å£ã€æ ‡ç­¾é¡µæˆ– iframeï¼‰å…±äº«åŒä¸€ä¸ª worker å®ä¾‹ã€‚è¿™ä½¿å¾—ä¸åŒçš„é¡µé¢å¯ä»¥é€šè¿‡è¿™ä¸ªå…±äº«çš„ worker è¿›è¡Œé€šä¿¡å’Œæ•°æ®å…±äº«\n\n```javascript\n// åœ¨é¡µé¢ä¸­åˆ›å»º Shared Worker\nconst worker = new SharedWorker('sharedworker.js');\n\n// åœ¨ worker ä¸­\nself.onconnect = function(e) {\n  const port = e.ports[0];\n  port.onmessage = function(e) {\n    // å¤„ç†æ¶ˆæ¯\n  }\n};\n\n```\n\n- Shared Workers éµå¾ªåŒæºç­–ç•¥\n- ä¸èƒ½è®¿é—® DOM\n\n\n#### 12.1.5. window.open ä¸ window.opener \n\n- å½“æˆ‘ä»¬ä½¿ç”¨`window.open`æ‰“å¼€é¡µé¢æ—¶ï¼Œæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªè¢«æ‰“å¼€é¡µé¢`window`çš„å¼•ç”¨ã€‚\n- è€Œåœ¨æœªæ˜¾ç¤ºæŒ‡å®š`noopener`æ—¶ï¼Œè¢«æ‰“å¼€çš„é¡µé¢å¯ä»¥é€šè¿‡`window.opener`è·å–åˆ°æ‰“å¼€å®ƒçš„é¡µé¢çš„å¼•ç”¨\n\n#### 12.1.6. æœåŠ¡ä¸­è½¬\n\nå¦‚`websocket`ç­‰\n\n#### 12.1.7. è½®è¯¢ + indexedDB\n\n`IndexedDB`ï¼Œæ¶ˆæ¯å‘é€æ–¹å°†æ¶ˆæ¯å­˜è‡³ `IndexedDB` ä¸­ï¼›æ¥æ”¶æ–¹ï¼ˆä¾‹å¦‚æ‰€æœ‰é¡µé¢ï¼‰åˆ™é€šè¿‡**è½®è¯¢**å»è·å–æœ€æ–°çš„ä¿¡æ¯\n\n### 12.2. éåŒæº\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-14.png)\n\n\n## 13. iframe é€šè®¯çš„æ–¹æ³•æœ‰å“ªäº›\n\n- 1. **å¯¹äºä¸»åŸŸç›¸åŒè€Œå­åŸŸä¸åŒçš„ä¾‹å­**ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®`document.domain`çš„åŠæ³•æ¥è§£å†³ã€‚\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-15.png)\n- ä½¿ç”¨ window.postMessageï¼Œ**ä¸åŒåŸŸä¹Ÿå¯ä»¥**\n\t- `window.frames[0].postMessage('Hello from parent!', 'https://child-domain.com')`\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-16.png)\n- åˆ©ç”¨ window.name å±æ€§åœ¨**ä¸åŒåŸŸ**ä¹‹é—´ä¼ é€’ä¿¡æ¯\n- **åŒåŸŸ**ä¸‹ï¼Œä½¿ç”¨ Web Storage (localStorage æˆ– sessionStorage) æ¥é€šè®¯\n- ä¸¤ä¸ª**ä¸åŒåŸŸ**çš„é¡µé¢å¯ä»¥é€šè¿‡å‘**åŒä¸€ä¸ªæœåŠ¡å™¨**å‘é€è¯·æ±‚æ¥é—´æ¥é€šä¿¡\n\n> ä½¿ç”¨ postMessage æ–¹æ³•æ˜¯æœ€æ¨èçš„è·¨åŸŸ iframe é€šä¿¡æ–¹å¼ï¼Œå› ä¸ºå®ƒæ—¢å®‰å…¨åˆç®€å•ã€‚\n> - å®ƒå…è®¸ä½ æŒ‡å®šç›®æ ‡æºï¼Œä»è€Œé˜²æ­¢ä¿¡æ¯è¢«å‘é€åˆ°ä¸ä¿¡ä»»çš„ç›®æ ‡ã€‚\n> - åŒæ—¶ï¼Œæ¥æ”¶æ–¹ä¹Ÿå¯ä»¥éªŒè¯æ¶ˆæ¯çš„æ¥æºï¼Œè¿›ä¸€æ­¥å¢å¼ºå®‰å…¨æ€§\n\n## 14. CORS ï¼š é¢„æ£€ option è¯·æ±‚ , å³å¹³æ—¶çœ‹åˆ°çš„ `PreFlight`\n\næµè§ˆå™¨ä¸€æ—¦å‘ç°AJAXè¯·æ±‚è·¨æºï¼Œå°±ä¼š`è‡ªåŠ¨æ·»åŠ ä¸€äº›é™„åŠ çš„å¤´ä¿¡æ¯`ï¼Œ`æœ‰æ—¶è¿˜ä¼šå¤šå‡ºä¸€æ¬¡é™„åŠ çš„è¯·æ±‚ï¼Œä½†ç”¨æˆ·ä¸ä¼šæœ‰æ„Ÿè§‰`\n\nå®ç°CORSé€šä¿¡çš„å…³é”®æ˜¯æœåŠ¡å™¨ã€‚åªè¦æœåŠ¡å™¨å®ç°äº†CORSæ¥å£ï¼Œå°±å¯ä»¥è·¨æºé€šä¿¡\n\n- **ç®€å•è¯·æ±‚\n\t- æµè§ˆå™¨å‘ç°è·¨åŸŸäº†ï¼Œå°±ç›´æ¥åœ¨è¯·æ±‚å¤´åŠ  `Origin`å­—æ®µ\n\t- `severç«¯` **åˆ¤æ–­** `Origin` **æ˜¯å¦ç»™æ•°æ®**\n- éç®€å•è¯·æ±‚ï¼šæ¯”å¦‚ `put/delete åŠ application/json`\n\t- æµè§ˆå™¨é¢„æ£€ `OPTIONS` è¯·æ±‚\n\t- è¯·æ±‚å¤´ä¸‰ä¸ªå­—æ®µ:\n\t\t- **Access-Control-Request-Method**\n\t\t- **Access-Control-Request-Headers**\n\t\t- `Origin`\n\t- å“åº”å¤´è¿”å›\n\t\t- **Access-Control-Allow-Methods**\n\t\t- **Access-Control-Allow-Credentials**\n\t\t- **Access-Control-Allow-Headers**\n\t\t- **Access-Control-Max-Age**\n\t- ä¹‹åå°±è·Ÿç®€å•è¯·æ±‚ä¸€æ ·äº†\n\n## 15. å®ç°ä¸€ä¸ªç®€æ˜“ç‰ˆæœ¬çš„å‰ç«¯è·¯ç”±\n\n### 15.1. å“ˆå¸Œè·¯ç”±ç®€æ˜“å®ç°\n\n- å…³é”®ç‚¹\n\t- ç›‘å¬ä¸¤ä¸ªäº‹ä»¶\n\t\t- DOMContentLoaded ->  onLoad\n\t\t\t- ä¸»åŠ¨è§¦å‘ä¸€æ¬¡ onHashChange\n\t\t- hashchange  ->  onHashChange\n\t\t\t- æ¯æ¬¡æ›´æ–°ç›´æ¥ä¿®æ”¹ `#app` çš„ `innerHtml`\n\n```html\n<body>\n    <ul>\n        <!-- å®šä¹‰è·¯ç”± -->\n        <li><a href=\"#/home\">home</a></li>\n        <li><a href=\"#/about\">about</a></li>\n    </ul>\n    <!-- æ¸²æŸ“è·¯ç”±å¯¹åº”çš„ UI -->\n    <div id=\"app\"></div>\n</body>\n\n<script type=\"text/javascript\">\n    // é¡µé¢åŠ è½½å®Œä¸ä¼šè§¦å‘ hashchange\n    // æ‰€ä»¥è¿™é‡Œéœ€è¦ä¸»åŠ¨è§¦å‘ä¸€æ¬¡ hashchange äº‹ä»¶\n    window.addEventListener(\"DOMContentLoaded\", onLoad);\n    // ç›‘å¬è·¯ç”±å˜åŒ–\n    window.addEventListener(\"hashchange\", onHashChange);\n\n    // è·¯ç”±è§†å›¾ï¼Œç”¨äºæ¸²æŸ“è·¯ç”±å¯¹åº”çš„ UI\n    var routerView = null;\n\n    function onLoad() {\n        routerView = document.querySelector(\"#app\");\n        onHashChange();\n    }\n\n    // è·¯ç”±å˜åŒ–æ—¶ï¼Œæ ¹æ®è·¯ç”±æ¸²æŸ“å¯¹åº” UI\n    function onHashChange() {\n        switch (window.location.hash) {\n            case \"#/home\":\n                routerView.innerHTML = \"Home\";\n                return;\n            case \"#/about\":\n                routerView.innerHTML = \"About\";\n                return;\n            default:\n                return;\n        }\n    }\n</script>\n\n```\n\n### 15.2. history è·¯ç”±ç®€æ˜“å®ç°\n\n- å…³é”®ç‚¹\n\t- ç›‘å¬ä¸¤ä¸ªäº‹ä»¶\n\t\t- DOMContentLoaded ->  onLoad\n\t\t\t- ä¸»åŠ¨è§¦å‘ä¸€æ¬¡ onPopState\n\t\t- popstate  ->  onPopState\n\t\t\t- æ¯æ¬¡æ›´æ–°ç›´æ¥ä¿®æ”¹ `#app` çš„ `innerHtml`\n\t\t\t- æ‹¦æˆª a æ ‡ç­¾çš„é»˜è®¤è¡Œä¸º\n\n```html\n<body>\n    <ul>\n        <!-- å®šä¹‰è·¯ç”± -->\n        <li><a href=\"#/home\">home</a></li>\n        <li><a href=\"#/about\">about</a></li>\n    </ul>\n    <!-- æ¸²æŸ“è·¯ç”±å¯¹åº”çš„ UI -->\n    <div id=\"app\"></div>\n</body>\n\n<script type=\"text/javascript\">\n    // é¡µé¢åŠ è½½å®Œä¸ä¼šè§¦å‘ hashchange\n    // è¿™é‡Œä¸»åŠ¨è§¦å‘ä¸€æ¬¡ hashchange äº‹ä»¶\n    window.addEventListener(\"DOMContentLoaded\", onLoad);\n    // ç›‘å¬è·¯ç”±å˜åŒ–\n    window.addEventListener(\"popstate\", onPopState);\n\n    // è·¯ç”±è§†å›¾\n    var routerView = null;\n\n    function onLoad() {\n        routerView = document.querySelector(\"#app\");\n        onPopState();\n\n        // æ‹¦æˆª <a> æ ‡ç­¾ç‚¹å‡»äº‹ä»¶é»˜è®¤è¡Œä¸ºï¼Œ ç‚¹å‡»æ—¶ä½¿ç”¨ pushState ä¿®æ”¹ URLå¹¶æ›´æ–°æ‰‹åŠ¨ UIï¼Œ\n        // ä»è€Œå®ç°ç‚¹å‡»é“¾æ¥æ›´æ–° URL å’Œ UI çš„æ•ˆæœã€‚\n        var linkList = document.querySelectorAll(\"a[href]\");\n        linkList.forEach((el) =>\n            el.addEventListener(\"click\", function (e) {\n                e.preventDefault();\n                history.pushState(null, \"\", el.getAttribute(\"href\"));\n                onPopState();\n            }),\n        );\n    }\n\n    // è·¯ç”±å˜åŒ–æ—¶ï¼Œæ ¹æ®è·¯ç”±æ¸²æŸ“å¯¹åº” UI\n    function onPopState() {\n        switch (location.pathname) {\n            case \"/home\":\n                routerView.innerHTML = \"Home\";\n                return;\n            case \"/about\":\n                routerView.innerHTML = \"About\";\n                return;\n            default:\n                return;\n        }\n    }\n</script>\n\n```\n\n#### 15.2.1. é™„ï¼špopstate äº‹ä»¶\n\n- ä»…ä»…è°ƒç”¨`pushState()`æ–¹æ³•æˆ–`replaceState()`æ–¹æ³• ï¼Œå¹¶ä¸ä¼šè§¦å‘è¯¥äº‹ä»¶; \n\t- åªæœ‰ç”¨æˆ·`ç‚¹å‡»æµè§ˆå™¨å€’é€€æŒ‰é’®å’Œå‰è¿›æŒ‰é’®`ï¼Œ\n\t- æˆ–è€…ä½¿ç”¨ JavaScript è°ƒç”¨`History.back()ã€History.forward()ã€History.go()` æ–¹æ³•æ—¶æ‰ä¼šè§¦å‘ã€‚\n\t- æˆ–è€…ç‚¹å‡» `a æ ‡ç­¾`çš„è·³è½¬\n- å¦å¤–ï¼Œè¯¥äº‹ä»¶åªé’ˆå¯¹åŒä¸€ä¸ªæ–‡æ¡£ï¼Œå¦‚æœæµè§ˆå†å²çš„åˆ‡æ¢ï¼Œå¯¼è‡´åŠ è½½ä¸åŒçš„æ–‡æ¡£ï¼Œè¯¥äº‹ä»¶ä¹Ÿä¸ä¼šè§¦å‘ã€‚\n- é¡µé¢ `ç¬¬ä¸€æ¬¡åŠ è½½çš„æ—¶å€™`ï¼Œæµè§ˆå™¨ä¸ä¼šè§¦å‘`popstate`äº‹ä»¶\n- `pushState ä¸ replaceState` è°ƒç”¨å History å¯¹è±¡ä¼šå˜åŒ–ï¼Œåœ°å€æ ä¼šå˜åŒ–ï¼Œä½†ä¸ä¼šè§¦å‘é¡µé¢åˆ·æ–°äº‹ä»¶\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-17.png)\n\n\n### 15.3. ä¸€ä¸ªç®€å•çš„ Router ç±»å®ç°\n\n#### 15.3.1. å…¥å£\n\n```html\n<!DOCTYPE html>\n<html>\n<body>\n  <nav>\n    <a href=\"/\" data-link>Home</a>\n    <a href=\"/about\" data-link>About</a>\n    <a href=\"/contact\" data-link>Contact</a>\n  </nav>\n  <div id=\"app\"></div>\n  <script src=\"router.js\"></script>\n</body>\n</html>\n\n```\n\n#### 15.3.2. Router å®ç°\n\n```javascript\nclass Router {\n  constructor(routes) {\n    this.routes = routes;\n    this.rootElement = document.getElementById(\"app\");\n    this.init();\n  }\n\n  init() {\n    window.addEventListener(\"popstate\", this.handlePopState.bind(this));\n    this.handleRouteChange();\n    this.bindLinks();\n  }\n\n  // ä¸ºæ‰€æœ‰å¸¦æœ‰ data-link å±æ€§çš„é“¾æ¥æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨\n  // é˜»æ­¢é»˜è®¤è¡Œä¸ºå¹¶è°ƒç”¨ navigateTo æ–¹æ³•\n  bindLinks() {\n    document.addEventListener(\"click\", (e) => {\n      if (e.target.matches(\"[data-link]\")) {\n        e.preventDefault();\n        this.navigateTo(e.target.href);\n      }\n    });\n  }\n\n  handlePopState() {\n    this.handleRouteChange();\n  }\n\n  // è·å–å½“å‰è·¯å¾„\n  // æŸ¥æ‰¾åŒ¹é…çš„è·¯ç”±\n  // å¦‚æœæ‰¾åˆ°åŒ¹é…çš„è·¯ç”±ï¼Œæ¸²æŸ“å¯¹åº”çš„ç»„ä»¶\n  // å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„è·¯ç”±ï¼Œæ˜¾ç¤º 404 é¡µé¢\n  handleRouteChange() {\n    // è·å–å½“å‰è·¯å¾„\n    const path = window.location.pathname;\n    const route = this.routes.find((route) => route.path === path);\n\n    if (route) {\n      this.rootElement.innerHTML = route.component();\n    } else {\n      this.rootElement.innerHTML = \"<h1>404 Not Found</h1>\";\n    }\n  }\n\n  // ä½¿ç”¨ History API æ›´æ–° URL\n  // è§¦å‘è·¯ç”±å˜åŒ–å¤„ç†\n  navigateTo(url) {\n    history.pushState(null, null, url);\n    this.handleRouteChange();\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst routes = [\n  {\n    path: \"/\",\n    component: () => \"<h1>Home Page</h1>\",\n  },\n  {\n    path: \"/about\",\n    component: () => \"<h1>About Page</h1>\",\n  },\n  {\n    path: \"/contact\",\n    component: () => \"<h1>Contact Page</h1>\",\n  },\n];\n\nconst router = new Router(routes);\n\n\n```\n\n### 15.4. mini-react-router-dom çš„ç®€æ˜“å®ç°\n\n> ä½¿ç”¨æœ€æ–°çš„ Hooks çš„æ–¹å¼å®ç°\n\n`#todo` \n\nå¾ˆå¤šç»†èŠ‚éœ€è¦æ…¢æ…¢å®ç°ï¼Œæ¯”å¦‚\n- åµŒå¥—è·¯ç”±ç­‰\n- è·¯ç”±å®ˆå«\n- æ”¯æŒå‚æ•°æŸ¥è¯¢\n- è·¯ç”±è¿‡æ¸¡åŠ¨ç”»\n- è·¯ç”±æ‡’åŠ è½½\n- æ›´å¤æ‚çš„è·¯å¾„åŒ¹é…æ¨¡å¼\n- è·¯ç”±å…ƒä¿¡æ¯\n- è·¯ç”±é’©å­ï¼ˆbeforeEach, afterEachï¼‰ç­‰\n\n## 16. å¦‚ä½•ç»ˆæ­¢æˆ–å–æ¶ˆä¸€ä¸ªè¯·æ±‚ï¼šAbortController \n\n`AbortController` æ¥å£è¡¨ç¤ºä¸€ä¸ªæ§åˆ¶å™¨å¯¹è±¡ï¼Œå…è®¸ä½ æ ¹æ®éœ€`è¦ä¸­æ­¢ä¸€ä¸ªæˆ–å¤šä¸ª Web è¯·æ±‚`ã€‚\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-19.png)\n\n### 16.1. ä½¿ç”¨ \n\n```javascript\n// `AbortController` æ˜¯ JavaScript ä¸­çš„ä¸€ä¸ªå…¨å±€ç±»ï¼Œ\nconstÂ controllerÂ =Â newÂ AbortController();  \n\n// å¯ä»¥å°†å®ƒä¼ é€’ç»™è¦ä¸­æ–­çš„ APIï¼Œæ¥å“åº”ä¸­æ–­äº‹ä»¶å¹¶è¿›è¡Œç›¸åº”å¤„ç†ï¼Œä¾‹å¦‚ï¼Œä¼ é€’ç»™ `fetch()` æ–¹æ³•å°±å¯ä»¥ç»ˆæ­¢è¿™ä¸ªè¯·æ±‚äº†\ncontroller.signal;  \n// è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¼šè§¦å‘ `signal` ä¸Šçš„ä¸­æ­¢äº‹ä»¶ï¼Œå¹¶å°†ä¿¡å·æ ‡è®°ä¸ºå·²ä¸­æ­¢\ncontroller.abort();\n\n// ç›‘å¬ abort äº‹ä»¶\ncontroller.signal.addEventListener('abort',Â ()Â =>Â {  \nÂ Â //Â å®ç°ä¸­æ­¢é€»è¾‘  \n});\n```\n\n\n### 16.2. ä¸ä»…å¯ä»¥ä½¿ç”¨è¯·æ±‚ï¼Œè¿˜å¯ä»¥ç”¨äºå„ç±»äº‹ä»¶\n\n```javascript hl:14\nuseEffect(()Â =>Â {  \nÂ Â constÂ controllerÂ =Â newÂ AbortController();  \n  \nÂ Â window.addEventListener('resize',Â handleResize,Â {  \nÂ Â Â Â signal:Â controller.signal,  \nÂ Â });  \nÂ Â window.addEventListener('hashchange',Â handleHashChange,Â {  \nÂ Â Â Â signal:Â controller.signal,  \nÂ Â });  \nÂ Â window.addEventListener('storage',Â handleStorageChange,Â {  \nÂ Â Â Â signal:Â controller.signal,  \nÂ Â });  \n\n // åœ¨æ¸…ç†å‡½æ•°ä¸­ï¼Œæˆ‘åªéœ€è°ƒç”¨ä¸€æ¬¡ `controller.abort()` å°±å¯ä»¥åˆ é™¤æ‰€æœ‰æ·»åŠ çš„ç›‘å¬å™¨\nÂ Â returnÂ ()Â =>Â {  \nÂ Â Â Â //Â è°ƒç”¨Â `.abort()`Â ä¼šåˆ é™¤æ‰€æœ‰å…³è”çš„äº‹ä»¶ç›‘å¬å™¨  \nÂ Â Â Â controller.abort();  \nÂ Â };  \n},Â []);\n```\n\n\n### 16.3. Node.js ä¸­ç”± `http` æ¨¡å—å‘å‡ºçš„è¯·æ±‚ä¹Ÿæ”¯æŒ `signal` å±æ€§\n\n\n### 16.4. ä¸€ä¸ªç¤ºä¾‹ï¼šç»ˆæ­¢é”™è¯¯åŸå› \n\n```javascript\nasync function fetchData() {\n  const controller = new AbortController();\n  const signal = controller.signal; //Â ç›‘å¬Â abortÂ äº‹ä»¶ï¼Œå¹¶æ‰“å°ä¸­æ­¢åŸå› \n\n  signal.addEventListener(\"abort\", () => {\n    console.log(\"è¯·æ±‚ä¸­æ­¢åŸå› :\", signal.reason); //Â æ‰“å°è‡ªå®šä¹‰çš„ä¸­æ­¢åŸå› \n  });\n\n  try {\n    const response = await fetch(\n      \"https://jsonplaceholder.typicode.com/posts/1\",\n      { signal },\n    );\n    const data = await response.json();\n    console.log(\"è¯·æ±‚æˆåŠŸ:\", data);\n  } catch (error) {\n    if (error.name === \"AbortError\") {\n      console.error(\"è¯·æ±‚å› ä¸­æ­¢è¢«å–æ¶ˆ:\", error.message);\n    } else {\n      console.error(\"è¯·æ±‚å‡ºé”™:\", error.message);\n    }\n  } //Â ä¿å­˜Â controllerÂ ä»¥ä¾¿å–æ¶ˆæ“ä½œ\n  window.currentAbortController = controller;\n}\n\nfetchData(); //Â ç›‘å¬å–æ¶ˆæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶\n\ndocument.getElementById(\"cancelButton\").addEventListener(\"click\", () => {\n  if (window.currentAbortController) {\n    window.currentAbortController.abort(\"ç”¨æˆ·å–æ¶ˆäº†è¯·æ±‚\"); //Â æä¾›è‡ªå®šä¹‰çš„ä¸­æ­¢åŸå› \n    console.log(\"ç‚¹å‡»äº†å–æ¶ˆè¯·æ±‚æŒ‰é’®\");\n  } else {\n    console.log(\"æ²¡æœ‰æ­£åœ¨è¿›è¡Œçš„è¯·æ±‚\");\n  }\n});\n\n```","1093cf1c5d02559986afbf6a24b9a36e":"\n# å¸¸è§é¢è¯•é¢˜å››\n\n`#å‰ç«¯é¢è¯•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä¼ªç±»ä¸ä¼ªå…ƒç´  \n\n- **ä¼ªç±»**ä½¿ç”¨å•å†’å·Â `:`\n- **ä¼ªå…ƒç´ **ä½¿ç”¨åŒå†’å·Â `::`ï¼ˆCSS3 è§„èŒƒï¼‰\n    - æ³¨ï¼šä¸ºäº†å…¼å®¹æ—§æµè§ˆå™¨ï¼Œä¸€äº›ä¼ªå…ƒç´ ä¹Ÿå¯ä»¥ä½¿ç”¨å•å†’å·ï¼Œæ¯”å¦‚ `:after` å’Œ `::after` éƒ½è¡Œ\n\n### 1.1. å¸¸è§ä¼ªç±»\n\n```less\n/* æœªè®¿é—®çš„é“¾æ¥ */\na:link {\n    color: blue;\n}\n\n/* å·²è®¿é—®çš„é“¾æ¥ */\na:visited {\n    color: purple;\n}\n\n/* é¼ æ ‡æ‚¬åœ */\nbutton:hover {\n    background-color: yellow;\n}\n\n/* æ¿€æ´»çŠ¶æ€ */\nbutton:active {\n    background-color: red;\n}\n\n/* è·å¾—ç„¦ç‚¹ */\ninput:focus {\n    border-color: blue;\n}\n\n/* ç¬¬ä¸€ä¸ªå­å…ƒç´  */\nli:first-child {\n    font-weight: bold;\n}\n\n/* æœ€åä¸€ä¸ªå­å…ƒç´  */\nli:last-child {\n    margin-bottom: 0;\n}\n\n/* å¥‡æ•°é¡¹ */\ntr:nth-child(odd) {\n    background-color: `#f2f2f2;`\n}\n\n```\n\n### 1.2. å¸¸è§ä¼ªå…ƒç´ \n\n```less\n/* åœ¨å…ƒç´ å†…å®¹ä¹‹å‰æ’å…¥ */\n.element::before {\n    content: \"â˜…\";\n    color: red;\n}\n\n/* åœ¨å…ƒç´ å†…å®¹ä¹‹åæ’å…¥ */\n.element::after {\n    content: \"â†’\";\n    margin-left: 5px;\n}\n\n/* é€‰æ‹©ç¬¬ä¸€è¡Œ */\np::first-line {\n    font-weight: bold;\n    color: blue;\n}\n\n/* é€‰æ‹©ç¬¬ä¸€ä¸ªå­—æ¯ */\np::first-letter {\n    font-size: 2em;\n    float: left;\n}\n\n/* é€‰æ‹©æ–‡æœ¬ */\np::selection {\n    background-color: yellow;\n    color: black;\n}\n\n```\n\n\n## 2. `è¡Œå†…å…ƒç´ `çš„ padding å’Œ margin æ˜¯å¦æœ‰æ•ˆ\n\n- æ°´å¹³æœ‰æ•ˆ\n- å‚ç›´æ— æ•ˆ\n\n## 3. `link` å’Œ `@import` æœ‰ä»€ä¹ˆåŒºåˆ«\n\n- `@import` åªèƒ½å¼•å…¥æ ·å¼ï¼Œå¹¶ä¸”é¡µé¢åŠ è½½å®Œæˆæ‰ä¼šåŠ è½½\n- `link` å¯å¼•å…¥æ ·å¼ã€rssã€`rel`ï¼Œç½‘ç«™å›¾æ ‡ç­‰ï¼›\n\t- æ¯”å¦‚ `<link rel=\"preload\" href=\"critical.css\" as=\"style\"> `\n\t- rel è¿˜å¯ä»¥ä¸º icon  modulepreload  manifest next/prev   preconnect   dns-prefetch   prefetch ç­‰ç­‰\n\t- CSS æ–‡ä»¶ä¼š**å¹¶è¡Œä¸‹è½½**ï¼Œä¸ä¼šé˜»å¡å…¶ä»– CSS æ–‡ä»¶çš„ä¸‹è½½\n\t- ä½†ä¼šé˜»å¡é¡µé¢æ¸²æŸ“ï¼ˆrender-blockingï¼‰\n\n\n## 4. min-width > max-width > width \n\nå³ä½¿è®¾ç½®äº† important\n\n\n## 5. CSS ä¸­å“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-20.png)\n\n## 6. å¸¸è§çš„æµè§ˆå™¨å†…æ ¸\n\n- safariï¼šwebkit\n- chromeï¼š blink ï¼Œwebkit çš„ä¸€ä¸ªåˆ†æ”¯\n- edge ä¹Ÿä½¿ç”¨  webkit äº†\n- firfox: Gecko å†…æ ¸\n\n## 7. å¦‚ä½•åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒ webp æ ¼å¼\n\n`image.src = 'xxx.wep'` ï¼Œå¦‚æœèƒ½è·å–åˆ°å®½é«˜ï¼Œåˆ™æ”¯æŒ\n\n\n## 8. srcã€hrefåŒºåˆ«\n\n- `src` ï¼Œèµ„æºå¼•ç”¨ï¼Œå¦‚scriptã€imageã€videoã€audioç­‰\n- `href`ï¼Œè¶…æ–‡æœ¬å¼•ç”¨ï¼Œå¯`å¹¶è¡Œä¸‹è½½è¯·æ±‚`ï¼Œ`link/a` ç­‰æ ‡ç­¾\n\n## 9. label çš„ä½œç”¨\n\nç‚¹å‡» label æ—¶ï¼Œå¯¹åº”çš„è¡¨å•è·å¾—ç„¦ç‚¹\n\n## 10. titleä¸h1çš„åŒºåˆ«ã€bä¸strongçš„åŒºåˆ«ã€iä¸emçš„åŒºåˆ«\n\n- å¼ºè°ƒï¼š`strongã€em`ï¼Œseo ä¾§é‡äº›\n- åªæ˜¯æ ·å¼æ–œä½“æˆ–è€…åŠ ç²—ï¼š`bã€i`\n- `title`å°±æ˜¯ç½‘é¡µæ ‡é¢˜\n- `H1`æœ‰å±‚æ¬¡çš„æ ‡é¢˜\n\n## 11. imgçš„`srcset`å±æ€§çš„ä½œâ½¤\n\né€‚é…è§†ç½‘è†œå±ï¼Œæ¯”å¦‚`2xã€3x`ç­‰ç­‰\n\n## 12. svg ä¸ canvas\n\n- svg æœ¬è´¨è¿˜æ˜¯ dom\n- canvas é€‚åˆç¼–ç¨‹\n\n## 13. è¯´è¯´`defer`/`async`çš„åŒºåˆ«\n\n- ä¸¤è€…éƒ½æ²¡æœ‰\n\t- ç«‹å³åŠ è½½å¹¶æ‰§è¡Œï¼Œä¸ç­‰å¾…åç»­çš„æ–‡æ¡£æ˜¯å¦åŠ è½½å¥½\n- defer : å»¶è¿Ÿ\n\t- æ–‡æ¡£è§£æå’Œè„šæœ¬åŠ è½½æ˜¯å¼‚æ­¥çš„\n\t- ç­‰ DOM è§£æå®Œåæ‰å¼€å§‹æ‰§è¡Œè„šæœ¬\n\t- ç±»ä¼¼äº script æ ‡ç­¾æ”¾åˆ° body ä¹‹å\n- async \n\t- æ–‡æ¡£è§£æå’Œè„šæœ¬åŠ è½½æ˜¯å¼‚æ­¥çš„\n\t- ä½†ä¸‹è½½åè„šæœ¬åä¼šåœæ­¢ HTML è§£æï¼Œå¼€å§‹æ‰§è¡Œè„šæœ¬ï¼Œè„šæœ¬æ‰§è¡Œå®Œåç»§ç»­è§£æ HTML\n- åŒæ—¶æœ‰ï¼Œasync ä¼˜å…ˆçº§æ›´é«˜\n\n## 14. `æ ‡ç­¾`é€šå¸¸ä¸ `breakè¯­å¥` å’Œ `continueè¯­å¥` é…åˆä½¿ç”¨ï¼Œè·³å‡ºç‰¹å®šçš„å¾ªç¯\n\n\n## 15. åˆ¤æ–­æ•°æ®ç±»å‹\n\n- typeof \n\t- undefined ----> object \n\t- lfunction symbol\n- instanceof\n- Object.prototype.toString.call æ–¹æ³•\n\n## 16. åŸºæœ¬ç±»å‹ï¼š8 ç§\n\n`Undefinedã€Nullã€Booleanã€Numberã€ String å’Œ Symbolã€Objectã€bigIng`\n\n\n## 17. é”™è¯¯å¤„ç†\n\n```javascript hl:6\n// å¯ä»¥è¿”å› false æ¥é˜»æ­¢æµè§ˆå™¨é»˜ è®¤æŠ¥å‘Šé”™è¯¯çš„è¡Œä¸º, \n// è¿™ä¸ªå‡½æ•°å®é™…ä¸Šå°±å˜æˆäº†æ•´ä¸ªæ–‡æ¡£çš„ try/catch è¯­å¥,\n// æœ€å¥½åˆ«è¿™ä¹ˆæ\nwindow.onerror = (message, url, line) => { \n  console.log(message);\n  return false;\n};\n```\n\n\n## 18. try/catch/finally\n\n- **try é‡Œé¢è¿˜å¯ä»¥**`try`\n- `finally`**æ— è®ºæ­£å¸¸é”™è¯¯éƒ½ä¼šæ‰§è¡Œ**\n\n## 19. å·¦ç»“åˆ ä¸ å³ç»“åˆ\n\n```javascript\n\n// å·¦ç»“åˆ\nx + y + z\n===ã€‹ (x + y) + z\n\n// å°‘æ•°è¿ç®—ç¬¦æ˜¯â€œå³ç»“åˆâ€ï¼Œå…¶ä¸­æœ€ä¸»è¦çš„æ˜¯èµ‹å€¼è¿ç®—ç¬¦ï¼ˆ=ï¼‰å’Œä¸‰å…ƒæ¡ä»¶è¿ç®—ç¬¦ï¼ˆ?:ï¼‰ å’Œ ** \n\n// èµ‹å€¼è¿ç®—ç¬¦ï¼ˆ=ï¼‰\nw = x = y = z;\n===ã€‹  w = (x = (y = z));\n\n// ä¸‰å…ƒæ¡ä»¶è¿ç®—ç¬¦ï¼ˆ?:ï¼‰ \nq = a ? b : c ? d : e ? f : g;\n===ã€‹\nq = a ? b : (c ? d : (e ? f : g));\n\n// æŒ‡æ•°è¿ç®—ç¬¦ï¼ˆ**ï¼‰ä¹Ÿæ˜¯å³ç»“åˆ\n2 ** 3 ** 2\n// ç›¸å½“äº 2 ** (3 ** 2)\n// 512\n```\n\n\n## 20. é‡‡ç”¨`function`å‘½ä»¤å’Œ`var`èµ‹å€¼è¯­å¥å£°æ˜åŒä¸€ä¸ªå‡½æ•°ï¼Œç”±äºå­˜åœ¨å‡½æ•°æå‡ï¼Œæœ€ç»ˆä»¥ var å®šä¹‰çš„ä¸ºå‡†\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241024-21.png)\n\n\n## 21. é—®ï¼šæ€ä¹ˆç”¨å¥½Chrome Devtoolså·¥å…·\n\n- ä½¿ç”¨`console.table` å¯ä»¥æ›´ç›´è§‚çš„æ‰“å°å‡ºæ•°ç»„æˆ–è€…å¯¹è±¡\n- ä½¿ç”¨ `console.dir` é€’å½’æ‰“å°å‡ºæ‰€æœ‰å¯¹è±¡ï¼Œæ¯”å¦‚æ‰“å°å‡ºä¸€ä¸ªDOMå…ƒç´ ï¼Œä»¥å‰éƒ½ä¸èƒ½ç›´æ¥çœ‹é‡Œé¢çš„å…ƒç´ \n- ä½¿ç”¨`coverage`æ£€æŸ¥æ²¡ç”¨çš„css/jså æ¯”ï¼Œæ²¡ç”¨çš„çº¢è‰²æ ‡è¯†ï¼Œç”¨åˆ°çš„ä½¿ç”¨ç»¿è‰²æ ‡è¯†ï¼Œå¦‚ä¸‹å›¾\n- ä½¿ç”¨`console.trace` è¿½è¸ªå‘ Webæ§åˆ¶å° è¾“å‡ºä¸€ä¸ªå †æ ˆè·Ÿè¸ª\n\n## 22. è¯´è¯´å°¾è°ƒç”¨ä¼˜åŒ–\n\n**å°¾è°ƒç”¨**ï¼š æ˜¯æŒ‡ä¸€ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªåŠ¨ä½œæ˜¯è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°\n\n```javascript\n// å¯¹ `g(x)` çš„è°ƒç”¨å°±æ˜¯ä¸€ä¸ªå°¾è°ƒç”¨\nfunction f(x) {\n  return g(x);\n}\n```\n\n**å°¾è°ƒç”¨ä¼˜åŒ–**ï¼šæ˜¯æŒ‡ç¼–è¯‘å™¨æˆ–è§£é‡Šå™¨èƒ½å¤Ÿä¼˜åŒ–å°¾è°ƒç”¨ï¼Œä½¿å…¶ä¸åœ¨è°ƒç”¨æ ˆä¸Šåˆ›å»ºæ–°çš„æ ˆå¸§ã€‚ç›¸åï¼Œ**å®ƒä¼šæ¸…é™¤å½“å‰æ ˆå¸§å¹¶é‡ç”¨å®ƒ**ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢æ ˆæº¢å‡ºï¼Œå¹¶ä¸”å¯ä»¥ä½¿æŸäº›é€’å½’ç®—æ³•åœ¨å¸¸é‡ç©ºé—´å†…è¿è¡Œ\n\n### 22.1. æ­£å¸¸çš„ fib\n\n```javascript\nfunction fib(n) {\n  if (n <= 1) {\n    return 1;\n  }\n  return fib(n - 1) + fib(n - 2);\n}\n\nfib(0); // 1\nfib(1); // 1\nfib(2); // 2\nfib(3); // 3\nfib(4); // 5\nfib(5); // 8\nfib(6); // 13\nfib(7); // 21\nfib(8); // 34\nfib(9); // 55\nfib(10); // 89\nfib(100); // è¶…æ—¶\nfib(500); // è¶…æ—¶\n```\n\n### 22.2. å°¾è°ƒç”¨ä¼˜åŒ–\n\n```javascript\n// å°¾è°ƒç”¨ä¼˜åŒ–\nfunction fibTail(n, prev = 1, curr = 1) {\n  // n ä¸º 0 æ—¶ï¼Œè¿”å› prev\n  if (n === 0) return prev;\n  // é€’å½’è°ƒç”¨\n  return fibTail(n - 1, curr, prev + curr); // å°¾è°ƒç”¨\n}\n```\n\n### 22.3. å°¾è°ƒç”¨ä¼˜åŒ–ï¼šbigInt\n\n```javascript\nfunction fibBigInt(n, prev = 1n, curr = 1n) {\n  if (n === 0) return prev;\n  return fibBigInt(n - 1, curr, prev + curr);\n}\n```\n\n>  ä½¿ç”¨ `1n` \n\n\n## 23. ä»‹ç»ä¸€ä¸‹ JavaScript ä¸­çš„ BigInt ç±»å‹\n\n### 23.1. BigInt åŸºç¡€\n\n> [!danger]\n> æ•°å­—åé¢ + `n`\n\nBigInt æ˜¯ JavaScript ä¸­çš„ä¸€ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºä»»æ„ç²¾åº¦çš„æ•´æ•°ã€‚å®ƒæ˜¯ ES2020 (ES11) æ–°å¢çš„ç‰¹æ€§ã€‚\n\n```javascript\n// åˆ›å»º BigInt çš„ä¸¤ç§æ–¹å¼\nconst a = 123n;                    // å­—é¢é‡è¯­æ³•ï¼Œæ•°å­—ååŠ  'n'\nconst b = BigInt(123);            // æ„é€ å‡½æ•°\nconst c = BigInt(\"123456789\");    // ä»å­—ç¬¦ä¸²åˆ›å»º\n\nconsole.log(typeof a);  // 'bigint'\n```\n\n### 23.2. ä¸ºä»€ä¹ˆéœ€è¦ BigIntï¼Ÿ\n\nJavaScript çš„ Number ç±»å‹ä½¿ç”¨ 64 ä½åŒç²¾åº¦æµ®ç‚¹æ•°ï¼ˆIEEE 754ï¼‰ï¼Œè¿™å¯¼è‡´ï¼š\n- æœ€å¤§å®‰å…¨æ•´æ•°ï¼š`Number.MAX_SAFE_INTEGER` (2^53 - 1)\n- æœ€å°å®‰å…¨æ•´æ•°ï¼š`Number.MIN_SAFE_INTEGER` (-(2^53 - 1))\n\n```javascript\n// Number ç±»å‹çš„é™åˆ¶\nconsole.log(Number.MAX_SAFE_INTEGER);  // 9007199254740991\nconsole.log(9007199254740991 + 1);     // 9007199254740992\nconsole.log(9007199254740991 + 2);     // 9007199254740992 (é”™è¯¯!)\n\n// BigInt æ²¡æœ‰è¿™ä¸ªé™åˆ¶\nconsole.log(9007199254740991n + 1n);   // 9007199254740992n\nconsole.log(9007199254740991n + 2n);   // 9007199254740993n\n```\n\n## 24. å‡½æ•°ä½œç”¨åŸŸ\n\nä¸€å¥è¯ï¼Œå‡½æ•°æ‰§è¡Œæ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œæ˜¯**å®šä¹‰æ—¶**çš„ä½œç”¨åŸŸï¼Œè€Œ**ä¸æ˜¯è°ƒç”¨æ—¶**æ‰€åœ¨çš„ä½œç”¨åŸŸ\n\n```javascript hl:3\nvar a = 1;\nvar x = function () {\n  // å®šä¹‰æ—¶æ²¡æœ‰ varï¼Œæ‰€ä»¥æ˜¯å…¨å±€å˜é‡ a\n  console.log(a);\n};\n\nfunction f() {\n  var a = 2;\n  x();\n}\n\nf(); // 1\n\n```\n\n\n```javascript\n// å‡½æ•°xæ˜¯åœ¨å‡½æ•°yä½“å¤–å£°æ˜çš„ï¼Œä½œç”¨åŸŸç»‘å®šå¤–å±‚ï¼Œå› æ­¤æ‰¾ä¸åˆ°å‡½æ•°yçš„å†…éƒ¨å˜é‡aï¼Œå¯¼è‡´æŠ¥é”™\nvar x = function () {\n  console.log(a);\n};\n\nfunction y(f) {\n  var a = 2;\n  f();\n}\n\ny(x);\n// ReferenceError: a is not defined\n```\n\n## 25. è¯´è¯´é—­åŒ…\n\né—­åŒ…çš„æœ€å¤§ç”¨å¤„æœ‰ä¸¤ä¸ª\n\n- ä¸€ä¸ªæ˜¯å¯ä»¥è¯»å–**å¤–å±‚å‡½æ•°å†…éƒ¨çš„å˜é‡**ï¼Œ\n- å¦ä¸€ä¸ªå°±æ˜¯**è®©è¿™äº›å˜é‡å§‹ç»ˆä¿æŒåœ¨å†…å­˜**ä¸­ï¼Œå³é—­åŒ…å¯ä»¥ä½¿å¾—å®ƒè¯ç”Ÿç¯å¢ƒä¸€ç›´å­˜åœ¨\n\n## 26. JavaScript å‡½æ•°å†…éƒ¨çš„å˜é‡æå‡ï¼ˆHoistingï¼‰æœºåˆ¶\n\n### 26.1. var å˜é‡æå‡\n```javascript\nfunction example() {\n    console.log(a); // è¾“å‡ºï¼šundefined\n    var a = 1;\n    console.log(a); // è¾“å‡ºï¼š1\n}\n// ç­‰ä»·äº\nfunction example() {\n    var a;           // å˜é‡å£°æ˜è¢«æå‡åˆ°å‡½æ•°é¡¶éƒ¨\n    console.log(a);  // undefined\n    a = 1;          // èµ‹å€¼æ“ä½œä¿æŒåœ¨åŸä½ç½®\n    console.log(a);  // 1\n}\n```\n\n### 26.2. å‡½æ•°å£°æ˜çš„æå‡\n\n```javascript\nfunction example() {\n    sayHello(); // è¾“å‡ºï¼š\"Hello!\"\n    \n    function sayHello() {\n        console.log(\"Hello!\");\n    }\n}\n\n```\n\n### 26.3. let ä¸ const \n\nlet å’Œ const å£°æ˜çš„å˜é‡ä¹Ÿä¼šæå‡ï¼Œä½†æ˜¯å­˜åœ¨\"æš‚æ—¶æ€§æ­»åŒº\"ï¼ˆTemporal Dead Zoneï¼ŒTDZï¼‰ï¼Œåœ¨å£°æ˜ä¹‹å‰è®¿é—®ä¼šæŠ›å‡ºé”™è¯¯ã€‚\n\n```javascript\nfunction example() {\n    console.log(a); // æŠ¥é”™ï¼šReferenceError\n    let a = 1;\n}\n```\n\n> `æš‚æ—¶æ€§æ­»åŒº`çš„æœ¬è´¨å°±æ˜¯ï¼Œåªè¦ä¸€è¿›å…¥å½“å‰ä½œç”¨åŸŸï¼Œæ‰€è¦ä½¿ç”¨çš„å˜é‡å°±å·²ç»å­˜åœ¨äº†ï¼Œä½†æ˜¯ä¸å¯è·å–ï¼Œ**åªæœ‰ç­‰åˆ°å£°æ˜å˜é‡çš„é‚£ä¸€è¡Œä»£ç å‡ºç°**ï¼Œæ‰å¯ä»¥è·å–å’Œä½¿ç”¨è¯¥å˜é‡\n\n### 26.4. æ³¨æ„äº‹é¡¹\n\n- å‡½æ•°å£°æ˜ä¼šè¢«æå‡åˆ°å˜é‡å£°æ˜ä¹‹å‰ï¼Œæ¯”å¦‚ foo åŒæ—¶æ˜¯ä¸€ä¸ªå‡½æ•°å’Œå˜é‡\n- å‡½æ•°è¡¨è¾¾å¼ä¸ä¼šè¢«æå‡\n- ä½¿ç”¨ let å’Œ const ä»£æ›¿ var\n- åœ¨ä½œç”¨åŸŸé¡¶éƒ¨å£°æ˜å˜é‡\n- å…ˆå£°æ˜åä½¿ç”¨\n- é¿å…ä¾èµ–å˜é‡æå‡æœºåˆ¶\n\n> [!tip]\n> è™½ç„¶ JavaScript å¼•æ“ä¼šå¸®æˆ‘ä»¬å¤„ç†æå‡ï¼Œä½†æ˜¯**æ˜¾å¼åœ°å£°æ˜å’Œåˆå§‹åŒ–å˜é‡å¯ä»¥è®©ä»£ç æ›´æ¸…æ™°ã€æ›´æ˜“äºç†è§£**\n\n## 27. `new.target` æ ‡è¯†å‡½æ•°åªèƒ½ä½œä¸ºæ„é€ å‡½æ•°\n\n```javascript hl:2\nfunction King() {\n      if (!new.target) {\n        throw 'King must be instantiated using \"new\"'\n      }\n      console.log('King instantiated using \"new\"');\n}\n\nnew King(); // King instantiated using \"new\"\nKing();     // Error: King must be instantiated using \"new\"\n```\n\n## 28. å‡½æ•°çš„ caller å±æ€§\n\n```javascript hl:5,6,9\nfunction outer() {\n  inner();\n}\nfunction inner() {\n  // è¿™é‡Œçš„calleræ˜¯outerå‡½æ•°ï¼Œå› ä¸ºinnerå‡½æ•°æ˜¯ç”±outerå‡½æ•°è°ƒç”¨çš„\n  // ä½†æ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œcallerå±æ€§ä¼šæŠ›å‡ºé”™è¯¯\n  console.log(inner.caller);\n\n  // åŒä¸Š\t\n  // console.log(arguments.callee.caller);\n}\nouter();\n\n```\n\n\n\n## 29. es6ä¸­çš„å˜é‡ç”³æ˜æœ‰å“ªäº›ï¼Ÿ\n\n- `var`å‘½ä»¤\n- `function`å‘½ä»¤\n- `let`\n- `const`\n- `import`å‘½ä»¤\n- `class`å‘½ä»¤\n\n\n## 30. åƒåœ¾å›æ”¶æœºåˆ¶ï¼šä¸€èˆ¬å°±ä¸¤ç§\n\n- `æ ‡è®°æ¸…ç†`\n\t- **ç¦»å¼€ä½œç”¨åŸŸçš„å€¼** ä¼šè¢«è‡ªåŠ¨æ ‡è®°ä¸ºå¯å›æ”¶ï¼Œç„¶ååœ¨**åƒåœ¾å›æ”¶æœŸé—´**è¢«åˆ é™¤\n- `å¼•ç”¨è®¡æ•°`æ˜¯å¦ä¸€ç§åƒåœ¾å›æ”¶ç­–ç•¥ï¼Œéœ€è¦è®°å½•å€¼è¢«å¼•ç”¨äº†å¤šå°‘æ¬¡\n\t- å¾ªç¯å¼•ç”¨åœºæ™¯ä¼šå‡ºé—®é¢˜\n\n## 31. ä»‹ç»å‡ ä¸ªå¸¸è§çš„ JavaScript å†…å­˜æ³„æ¼åœºæ™¯åŠå…¶è§£å†³æ–¹æ¡ˆ\n\n### 31.1. é—­åŒ…å¯¼è‡´çš„å†…å­˜æ³„æ¼\n\n```javascript\nfunction createClosure() {\n  const largeData = new Array(1000000);  // ä¸€ä¸ªå¤§æ•°ç»„\n  \n  return function() {\n    // è¿™ä¸ªå†…éƒ¨å‡½æ•°å¼•ç”¨äº†å¤–éƒ¨çš„ largeData\n    console.log(largeData.length);\n  }\n}\n\n// åˆ›å»ºé—­åŒ…\nconst closure = createClosure();  // largeData ä¼šä¸€ç›´ä¿ç•™åœ¨å†…å­˜ä¸­\n```\n\nè§£å†³æ–¹æ¡ˆï¼š\n```javascript\nfunction createClosure() {\n  const largeData = new Array(1000000);\n  \n  const result = function() {\n    console.log(largeData.length);\n  }\n  \n  // ä½¿ç”¨å®Œåæ‰‹åŠ¨è§£é™¤å¼•ç”¨\n  result.cleanup = function() {\n    largeData = null;\n  }\n  \n  return result;\n}\n\nconst closure = createClosure();\n// ä½¿ç”¨å®Œåè°ƒç”¨æ¸…ç†æ–¹æ³•\nclosure.cleanup();\n```\n\n### 31.2. äº‹ä»¶ç›‘å¬å™¨æœªç§»é™¤\n\n```javascript\nfunction addHandler() {\n  const element = document.getElementById('button');\n  \n  element.addEventListener('click', () => {\n    // å¤„ç†ç‚¹å‡»äº‹ä»¶\n    doSomething();\n  });\n}\n\n// æ¯æ¬¡è°ƒç”¨éƒ½ä¼šæ·»åŠ æ–°çš„äº‹ä»¶ç›‘å¬å™¨ï¼Œè€Œä¸ä¼šç§»é™¤æ—§çš„\naddHandler();\naddHandler();\n```\n\nè§£å†³æ–¹æ¡ˆï¼š\n```javascript\nfunction addHandler() {\n  const element = document.getElementById('button');\n  const handler = () => {\n    doSomething();\n  };\n  \n  element.addEventListener('click', handler);\n  \n  // åœ¨é€‚å½“çš„æ—¶æœºç§»é™¤äº‹ä»¶ç›‘å¬å™¨\n  return () => {\n    element.removeEventListener('click', handler);\n  };\n}\n\nconst removeHandler = addHandler();\n// ä¸éœ€è¦æ—¶ç§»é™¤ç›‘å¬å™¨\nremoveHandler();\n```\n\n### 31.3. å®šæ—¶å™¨æœªæ¸…é™¤\n\n```javascript\nfunction startTimer() {\n  const data = { /* ä¸€äº›æ•°æ® */ };\n  \n  setInterval(() => {\n    // ä½¿ç”¨ data è¿›è¡Œæ“ä½œ\n    console.log(data);\n  }, 1000);\n}\n\n// å®šæ—¶å™¨ä¼šä¸€ç›´è¿è¡Œï¼Œdata å¯¹è±¡æ— æ³•è¢«åƒåœ¾å›æ”¶\nstartTimer();\n```\n\nè§£å†³æ–¹æ¡ˆï¼š\n```javascript\nfunction startTimer() {\n  const data = { /* ä¸€äº›æ•°æ® */ };\n  \n  const timerId = setInterval(() => {\n    console.log(data);\n  }, 1000);\n  \n  // è¿”å›æ¸…ç†å‡½æ•°\n  return () => {\n    clearInterval(timerId);\n  };\n}\n\nconst stopTimer = startTimer();\n// åœ¨é€‚å½“çš„æ—¶å€™åœæ­¢å®šæ—¶å™¨\nstopTimer();\n```\n\n### 31.4. DOM å¼•ç”¨\n\n```javascript\nconst elements = {\n  button: document.getElementById('button'),\n  image: document.getElementById('image'),\n  text: document.getElementById('text')\n};\n\n// å³ä½¿å…ƒç´ ä» DOM ä¸­ç§»é™¤ï¼Œä»ç„¶ä¿ç•™åœ¨å†…å­˜ä¸­\nfunction removeButton() {\n  document.body.removeChild(document.getElementById('button'));\n  // elements.button ä»ç„¶å¼•ç”¨ç€å·²åˆ é™¤çš„ DOM å…ƒç´ \n}\n```\n\nè§£å†³æ–¹æ¡ˆï¼š\n```javascript\nconst elements = {\n  button: document.getElementById('button'),\n  image: document.getElementById('image'),\n  text: document.getElementById('text')\n};\n\nfunction removeButton() {\n  document.body.removeChild(document.getElementById('button'));\n  // ç§»é™¤å¼•ç”¨\n  elements.button = null;\n}\n```\n\n### 31.5. å…¨å±€å˜é‡\n\n```javascript\nfunction createGlobalVar() {\n  // æ„å¤–åˆ›å»ºå…¨å±€å˜é‡\n  leakedVariable = 'I am leaked';  // æ²¡æœ‰ä½¿ç”¨ var/let/const\n}\n\n// æˆ–è€…\nwindow.globalVar = { /* å¤§é‡æ•°æ® */ };\n```\n\nè§£å†³æ–¹æ¡ˆï¼š\n```javascript\nfunction createGlobalVar() {\n  // ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼\n  'use strict';\n  \n  // ç°åœ¨è¿™ä¼šæŠ›å‡ºé”™è¯¯è€Œä¸æ˜¯åˆ›å»ºå…¨å±€å˜é‡\n  leakedVariable = 'I am leaked';  // ReferenceError\n  \n  // æ­£ç¡®çš„å£°æ˜æ–¹å¼\n  const localVar = 'I am local';\n}\n\n// å¦‚æœç¡®å®éœ€è¦å…¨å±€å˜é‡ï¼Œåœ¨ä½¿ç”¨å®Œåè®°å¾—æ¸…ç†\nwindow.globalVar = { /* å¤§é‡æ•°æ® */ };\n// ä½¿ç”¨å®Œå\nwindow.globalVar = null;\n```\n\n### 31.6. ç¼“å­˜æœªæ¸…ç†\n\n```javascript\nconst cache = new Map();\n\nfunction addToCache(key, value) {\n  cache.set(key, value);\n}\n\n// ç¼“å­˜ä¸æ–­å¢é•¿ï¼Œæ²¡æœ‰æ¸…ç†æœºåˆ¶\n```\n\nè§£å†³æ–¹æ¡ˆï¼š\n```javascript\nclass Cache {\n  constructor(maxSize = 100) {\n    this.cache = new Map();\n    this.maxSize = maxSize;\n  }\n  \n  set(key, value) {\n    if (this.cache.size >= this.maxSize) {\n      // åˆ é™¤æœ€æ—©çš„é¡¹ç›®\n      const firstKey = this.cache.keys().next().value;\n      this.cache.delete(firstKey);\n    }\n    this.cache.set(key, value);\n  }\n  \n  clear() {\n    this.cache.clear();\n  }\n}\n\nconst cache = new Cache(100);\n```\n\n### 31.7. WeakMap/WeakSet çš„ä½¿ç”¨åœºæ™¯\n\nå½“éœ€è¦åœ¨å¯¹è±¡ä¸Šå­˜å‚¨é¢å¤–æ•°æ®æ—¶ï¼Œä½¿ç”¨ WeakMap å¯ä»¥é˜²æ­¢å†…å­˜æ³„æ¼ï¼š\n\n```javascript\n// ä¸å¥½çš„åšæ³•\nconst cache = new Map();\n\nfunction process(obj) {\n  cache.set(obj, { /* some data */ });  // obj çš„å¼•ç”¨ä¼šè¢«ä¿ç•™\n}\n\n// å¥½çš„åšæ³•\nconst cache = new WeakMap();\n\nfunction process(obj) {\n  cache.set(obj, { /* some data */ });  // å½“ obj ä¸å†è¢«ä½¿ç”¨æ—¶ï¼Œç¼“å­˜æ•°æ®ä¼šè¢«è‡ªåŠ¨æ¸…ç†\n}\n```\n\n### 31.8. é˜²æ­¢å†…å­˜æ³„æ¼çš„æœ€ä½³å®è·µï¼š\n\n1. **ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼**ï¼šé¿å…æ„å¤–åˆ›å»ºå…¨å±€å˜é‡\n2. **åŠæ—¶æ¸…ç†**ï¼š\n   - æ¸…é™¤å®šæ—¶å™¨\n   - ç§»é™¤äº‹ä»¶ç›‘å¬å™¨\n   - è§£é™¤ DOM å¼•ç”¨\n3. **ä½¿ç”¨ WeakMap/WeakSet**ï¼šå­˜å‚¨å¯¹è±¡å¼•ç”¨\n4. **å®ç°æ¸…ç†æœºåˆ¶**ï¼šä¸ºé•¿æœŸè¿è¡Œçš„ç¨‹åºå®ç°ç¼“å­˜æ¸…ç†\n5. **å¼€å‘å·¥å…·**ï¼š\n   - ä½¿ç”¨ Chrome DevTools çš„ Memory é¢æ¿\n   - ä½¿ç”¨å†…å­˜åˆ†æå·¥å…·å®šæœŸæ£€æŸ¥\n6. **ä»£ç å®¡æŸ¥**ï¼šå…³æ³¨å¯èƒ½é€ æˆå†…å­˜æ³„æ¼çš„ä»£ç æ¨¡å¼\n\né€šè¿‡æ³¨æ„è¿™äº›åœºæ™¯å¹¶é‡‡å–ç›¸åº”çš„é¢„é˜²æªæ–½ï¼Œå¯ä»¥æœ‰æ•ˆé¿å… JavaScript åº”ç”¨ä¸­çš„å†…å­˜æ³„æ¼é—®é¢˜ã€‚","3fa46ad951945172839034a2279d2dcf":"\n# JavaScript å¯¹è±¡\n\n`#å‰ç«¯é¢è¯•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. è¯´è¯´Mapã€WeakMapçš„åŒºåˆ« \n\n- `WeakMap`åªæ¥å—`å¯¹è±¡`ä½œä¸ºé”®åï¼ˆ`null`é™¤å¤–ï¼‰ï¼Œä¸æ¥å—å…¶ä»–ç±»å‹çš„å€¼ä½œä¸ºé”®åã€‚\n- å…¶æ¬¡ï¼Œ`WeakMap`çš„é”®åæ‰€æŒ‡å‘çš„å¯¹è±¡ï¼Œä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ‰€ä»¥\n\t- `WeakMap`çš„ä¸“ç”¨åœºåˆå°±æ˜¯ï¼Œå®ƒçš„é”®æ‰€å¯¹åº”çš„å¯¹è±¡ï¼Œå¯èƒ½ä¼šåœ¨å°†æ¥æ¶ˆå¤±ã€‚WeakMap ç»“æ„æœ‰åŠ©äº**é˜²æ­¢å†…å­˜æ³„æ¼**\n- set æ–¹æ³•è¿”å›çš„æ˜¯å½“å‰çš„Mapå¯¹è±¡ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨**é“¾å¼å†™æ³•** \n\t- `0` å’Œ `-0` å°±æ˜¯**åŒä¸€ä¸ªé”®**\n\t- è™½ç„¶`NaN`ä¸ä¸¥æ ¼ç›¸ç­‰äºè‡ªèº«ï¼Œä½† Map å°†å…¶è§†ä¸º**åŒä¸€ä¸ªé”®**\n\n```javascript hl:1,8\n// WeakMap å¼±å¼•ç”¨çš„åªæ˜¯é”®åï¼Œè€Œä¸æ˜¯é”®å€¼ã€‚é”®å€¼ä¾ç„¶æ˜¯æ­£å¸¸å¼•ç”¨ã€‚\n\nconst wm = new WeakMap();\nlet key = {};\nlet obj = {foo: 1};\n\nwm.set(key, obj);\nobj = null;\nwm.get(key)\n// Object {foo: 1}\n// ä¸Šé¢ä»£ç ä¸­ï¼Œé”®å€¼objæ˜¯æ­£å¸¸å¼•ç”¨ã€‚æ‰€ä»¥ï¼Œå³ä½¿åœ¨ WeakMap å¤–éƒ¨æ¶ˆé™¤äº†objçš„å¼•ç”¨ï¼ŒWeakMap å†…éƒ¨çš„å¼•ç”¨ä¾ç„¶å­˜åœ¨ã€‚\n```\n\n> chrome ä¸­ Memory é¢æ¿ï¼Œæœ‰ä¸€ä¸ªåƒåœ¾æ¡¶çš„æŒ‰é’®ï¼Œå¯ä»¥**å¼ºåˆ¶åƒåœ¾å›æ”¶ï¼ˆgarbage collectï¼‰**ã€‚è¿™ä¸ªæŒ‰é’®ä¹Ÿèƒ½ç”¨æ¥è§‚å¯Ÿ WeakMap é‡Œé¢çš„å¼•ç”¨æ˜¯å¦æ¶ˆå¤±\n\n## 2. FinalizationRegistry ä¸ WeakRef\n\n```javascript hl:2,5\n// ES2021 å¼•å…¥äº†æ¸…ç†å™¨æ³¨å†Œè¡¨åŠŸèƒ½ FinalizationRegistryï¼Œç”¨æ¥æŒ‡å®šç›®æ ‡å¯¹è±¡è¢«åƒåœ¾å›æ”¶æœºåˆ¶æ¸…é™¤ä»¥åï¼Œæ‰€è¦æ‰§è¡Œçš„å›è°ƒå‡½æ•°ã€‚\nconst registry = new FinalizationRegistry(heldValue => {\n  // ....\n});\n// ES2021æ”¯æŒ WeakRef å¯¹è±¡ï¼Œç”¨äºç›´æ¥åˆ›å»ºå¯¹è±¡çš„å¼±å¼•ç”¨ã€‚\nlet target = {};\nlet wr = new WeakRef(target);\n```\n\n## 3. Set ä¸ WeakSet\n\n- åœ¨ Set å†…éƒ¨ï¼Œä¸¤ä¸ª `NaN` æ˜¯ç›¸ç­‰çš„\n- WeakSet \n\t- æˆå‘˜**åªèƒ½æ˜¯å¯¹è±¡**ï¼Œè€Œä¸èƒ½æ˜¯å…¶ä»–ç±»å‹çš„å€¼\n\t- WeakSet ä¸­çš„å¯¹è±¡éƒ½æ˜¯**å¼±å¼•ç”¨**ï¼Œå³åƒåœ¾å›æ”¶æœºåˆ¶ä¸è€ƒè™‘ WeakSet å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨\n\t- **åªæœ‰ä¸‰ä¸ªæ–¹æ³•**  addã€deleteã€has \n\t- WeakSet çš„ä¸€ä¸ªç”¨å¤„ï¼Œæ˜¯**å‚¨å­˜ DOM èŠ‚ç‚¹**ï¼Œè€Œä¸ç”¨æ‹…å¿ƒè¿™äº›èŠ‚ç‚¹ä»æ–‡æ¡£ç§»é™¤æ—¶ï¼Œä¼šå¼•å‘å†…å­˜æ³„æ¼\n\n## 4. è‡ªå·±å®ç°ä¸€ä¸ª isObject\n\n> ä½¿ç”¨ `Object` åŒ…è£…ä¸‹\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241025.png)\n\n## 5. ä½¿ç”¨ `Object.prototype.toString.call` æ¥åˆ¤æ–­ç±»å‹ ï¼Œå¦‚ä¸‹\n\n```javascript hl:19,7,4\n/*æ•°å€¼ï¼šè¿”å›[object Number]ã€‚\nå­—ç¬¦ä¸²ï¼šè¿”å›[object String]ã€‚\nå¸ƒå°”å€¼ï¼šè¿”å›[object Boolean]ã€‚\nundefinedï¼šè¿”å›[object Undefined]ã€‚\nnullï¼šè¿”å›[object Null]ã€‚\næ•°ç»„ï¼šè¿”å›[object Array]ã€‚\narguments å¯¹è±¡ï¼šè¿”å›[object Arguments]ã€‚\nå‡½æ•°ï¼šè¿”å›[object Function]ã€‚\nError å¯¹è±¡ï¼šè¿”å›[object Error]ã€‚\nDate å¯¹è±¡ï¼šè¿”å›[object Date]ã€‚\nRegExp å¯¹è±¡ï¼šè¿”å›[object RegExp]ã€‚\nå…¶ä»–å¯¹è±¡ï¼šè¿”å›[object Object]ã€‚*/\n\nObject.prototype.toString.call(2) // \"[object Number]\"\nObject.prototype.toString.call('') // \"[object String]\"\nObject.prototype.toString.call(true) // \"[object Boolean]\"\nObject.prototype.toString.call(undefined) // \"[object Undefined]\"\nObject.prototype.toString.call(null) // \"[object Null]\"\nObject.prototype.toString.call(Math) // \"[object Math]\"\nObject.prototype.toString.call({}) // \"[object Object]\"\nObject.prototype.toString.call([]) // \"[object Array]\"\n\n'[object Function]'\n```\n\n## 6. å±æ€§æè¿°å¯¹è±¡\n\n```javascript\n// 6ä¸ªï¼Œå¦‚ä¸‹\n{\n  value: 123,\n  writable: false,\n  enumerable: true,\n  configurable: false,\n  get: undefined,\n  set: undefined\n}\n```\n\nå¸¸ç”¨æ–¹æ³•ï¼š\n- Object.getOwnPropertyDescriptor\n-  Object.defineProperties\n-  Object.definePropertie\n\n## 7. å­˜å–å™¨\n\n```javascript hl:1,15,25,3,17,27\n// å†™æ³•ä¸€ï¼Œå±æ€§pçš„configurableå’Œenumerableéƒ½ä¸ºfalseï¼Œä»è€Œå¯¼è‡´å±æ€§pæ˜¯ä¸å¯éå†çš„\nvar obj = Object.defineProperty({}, \"p\", {\n  get: function () {\n    return \"getter\";\n  },\n  set: function (value) {\n    console.log(\"setter: \" + value);\n  },\n});\n\nobj.p; // \"getter\"\nobj.p = 123; // \"setter: 123\"\nobj.p; // è¿˜æ˜¯ \"getter\"\n\n// å†™æ³•äºŒï¼Œå±æ€§pçš„configurableå’Œenumerableéƒ½ä¸ºtrueï¼Œå› æ­¤å±æ€§pæ˜¯å¯éå†çš„\nvar obj = {\n  get p() {\n    return \"getter\";\n  },\n  set p(value) {\n    console.log(\"setter: \" + value);\n  },\n};\n\n// åº”ç”¨ï¼Œå­˜å–å™¨å¾€å¾€ç”¨äºï¼Œå±æ€§çš„å€¼ä¾èµ–å¯¹è±¡å†…éƒ¨æ•°æ®çš„åœºåˆã€‚\nvar obj = {\n  $n: 5,\n  get next() {\n    return this.$n++;\n  },\n  set next(n) {\n    if (n >= this.$n) this.$n = n;\n    else throw new Error(\"æ–°çš„å€¼å¿…é¡»å¤§äºå½“å‰å€¼\");\n  },\n};\n\nobj.next; // 5\n\nobj.next = 10;\nobj.next; // 10\n\nobj.next = 5;\n// Uncaught Error: æ–°çš„å€¼å¿…é¡»å¤§äºå½“å‰å€¼\n\n```\n\n## 8. æœ‰å“ªäº›æ§åˆ¶å¯¹è±¡çŠ¶æ€çš„æ–¹æ³•\n\n```javascript\n// Object.preventExtensions æ–¹æ³•å¯ä»¥ä½¿å¾—ä¸€ä¸ªå¯¹è±¡æ— æ³•å†æ·»åŠ æ–°çš„å±æ€§ã€‚\n// Object.isExtensible æ–¹æ³•ç”¨äºæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä½¿ç”¨äº†Object.preventExtensionsæ–¹æ³•\n// Object.seal  æ–¹æ³•ä½¿å¾—ä¸€ä¸ªå¯¹è±¡æ—¢æ— æ³•æ·»åŠ æ–°å±æ€§ï¼Œä¹Ÿæ— æ³•åˆ é™¤æ—§å±æ€§ã€‚å¯ä»¥å…è®¸ä¿®æ”¹\n// Object.isSealed  æ–¹æ³•ç”¨äºæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä½¿ç”¨äº†Object.sealæ–¹æ³•ã€‚\n// Object.freeze  æ–¹æ³•å¯ä»¥ä½¿å¾—ä¸€ä¸ªå¯¹è±¡æ— æ³•æ·»åŠ æ–°å±æ€§ã€æ— æ³•åˆ é™¤æ—§å±æ€§ã€ä¹Ÿæ— æ³•æ”¹å˜å±æ€§çš„å€¼ï¼Œä½¿å¾—è¿™ä¸ªå¯¹è±¡å®é™…ä¸Šå˜æˆäº†å¸¸é‡ã€‚\n// Object.isFrozen  æ–¹æ³•ç”¨äºæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä½¿ç”¨äº†Object.freezeæ–¹æ³•ã€‚\n```\n\n## 9. ä½¿ç”¨ `Object.assign` æ¥å®ç°ç»§æ‰¿\n\n```javascript hl:9\nObject.assign(SomeClass.prototype, {\n  someMethod(arg1, arg2) {\n    // Â·Â·Â·\n  },\n  anotherMethod() {\n    // Â·Â·Â·\n  },\n});\n// ç­‰åŒäºä¸‹é¢çš„å†™æ³•\nSomeClass.prototype.someMethod = function (arg1, arg2) {\n  // Â·Â·Â·\n};\nSomeClass.prototype.anotherMethod = function () {\n  // Â·Â·Â·\n};\n\n```\n\n## 10. `Object.fromEntries()`æ–¹æ³•æ˜¯`Object.entries()`çš„é€†æ“ä½œ\n\n```javascript\n// Object.fromEntries()æ–¹æ³•æ˜¯Object.entries()çš„é€†æ“ä½œ\nObject.fromEntries([\n  ['foo', 'bar'],\n  ['baz', 42]\n])\n// { foo: \"bar\", baz: 42 }\n```\n\n## 11. concat åªèƒ½è§£æä¸€å±‚ï¼Œå†ä¸€å±‚å°±ä¸ä¼šæ‰“å¹³äº†\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241025-1.png)\n\n## 12. array çš„ reverse æ–¹æ³• æ˜¯åŸåœ°çš„\n\n## 13. slice() æ–¹æ³•çš„ä¸€ä¸ªé‡è¦åº”ç”¨ï¼Œæ˜¯å°†**ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡**è½¬ä¸º**çœŸæ­£çš„æ•°ç»„**\n\n```javascript\n// slice()æ–¹æ³•çš„ä¸€ä¸ªé‡è¦åº”ç”¨ï¼Œæ˜¯å°†ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚\n\nArray.prototype.slice.call({ 0: 'a', 1: 'b', length: 2 })\n// ['a', 'b']\n\nArray.prototype.slice.call(document.querySelectorAll(\"div\"));\nArray.prototype.slice.call(arguments);\n```\n\n## 14. sort æ–¹æ³•æ˜¯åŸåœ°çš„\n\n```javascript hl:3,14,23,26\n// sortæ–¹æ³•å¯¹æ•°ç»„æˆå‘˜è¿›è¡Œæ’åº\n// é»˜è®¤æ˜¯æŒ‰ç…§å­—å…¸é¡ºåºæ’åºã€‚\n// æ’åºåï¼ŒåŸæ•°ç»„å°†è¢«æ”¹å˜ã€‚\n['d', 'c', 'b', 'a'].sort(); // ['a', 'b', 'c', 'd']\n\n[4, 3, 2, 1].sort()  // [1, 2, 3, 4]\n\n[11, 101].sort()  // [101, 11]\n\n[10111, 1101, 111].sort()  // [10111, 1101, 111]\n\n// sortçš„å‚æ•°å‡½æ•°æœ¬èº«æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¿›è¡Œæ¯”è¾ƒçš„ä¸¤ä¸ªæ•°ç»„æˆå‘˜ã€‚\n// å¦‚æœè¯¥å‡½æ•°çš„è¿”å›å€¼å¤§äº0ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªæˆå‘˜æ’åœ¨ç¬¬äºŒä¸ªæˆå‘˜åé¢ï¼›\n// å…¶ä»–æƒ…å†µä¸‹ <=0 ï¼Œéƒ½æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ æ’åœ¨ç¬¬äºŒä¸ªå…ƒç´ å‰é¢ã€‚\n\n \n[10111, 1101, 111].sort(function (a, b) {\n  return a - b;\n}) // [111, 1101, 10111]\n\n// è‡ªå®šä¹‰çš„æ’åºå‡½æ•°åº”è¯¥è¿”å›æ•°å€¼ï¼Œå¦åˆ™ä¸åŒçš„æµè§ˆå™¨å¯èƒ½æœ‰ä¸åŒçš„å®ç°ï¼Œä¸èƒ½ä¿è¯ç»“æœéƒ½ä¸€è‡´ã€‚\n// bad\n[1, 4, 2, 6, 0, 6, 2, 6].sort((a, b) => a > b)\n\n// good\n[1, 4, 2, 6, 0, 6, 2, 6].sort((a, b) => a - b)\n\n```\n\n## 15. map()æ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°\n\n```javascript hl:3\n// map()æ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°\nvar arr = ['a', 'b', 'c'];\n// map()æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå°†å›è°ƒå‡½æ•°å†…éƒ¨çš„thiså¯¹è±¡ï¼ŒæŒ‡å‘arræ•°ç»„ã€‚\n[1, 2].map(function (e) {\n  return this[e];\n}, arr)\n// ['b', 'c']\n```\n\n## 16. forEachä¹Ÿæ¥å—ä¸¤ä¸ªå‚æ•°\n\n```javascript hl:4,7\nvar out = [];\n\n[1, 2, 3].forEach(function(elem) {\n  this.push(elem * elem);\n}, out);\n\nout // [1, 4, 9]\n```\n\n## 17. æ‰©å±•è¿ç®—æ³•\n\n```javascript hl:17,31,38,57\nconsole.log(...[1, 2, 3])\n// 1 2 3\n\nconsole.log(1, ...[2, 3, 4], 5)\n// 1 2 3 4 5\n\nfunction add(x, y) {\n  return x + y;\n}\n\nconst numbers = [4, 38];\nadd(...numbers) // 42\n\n[...[], 1]\n// [1]\n\næ³¨æ„ï¼Œåªæœ‰å‡½æ•°è°ƒç”¨æ—¶ï¼Œæ‰©å±•è¿ç®—ç¬¦æ‰å¯ä»¥æ”¾åœ¨åœ†æ‹¬å·ä¸­ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚\n\n(...[1, 2])\n// Uncaught SyntaxError: Unexpected number\n\nconsole.log((...[1, 2]))\n// Uncaught SyntaxError: Unexpected number\n\nconsole.log(...[1, 2])\n// 1 2\n\n// ES5 çš„å†™æ³•\nMath.max.apply(null, [14, 3, 77])\n// ES6 çš„å†™æ³•\nMath.max(...[14, 3, 77])\n// ç­‰åŒäº\nMath.max(14, 3, 77);\n\nconsole.log([...5]) // [0, 1, 2, 3, 4]\n\n// æ‰©å±•è¿ç®—ç¬¦è¿˜å¯ä»¥å°†å­—ç¬¦ä¸²è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚\n[...'hello']\n// [ \"h\", \"e\", \"l\", \"l\", \"o\" ]\n\nlet map = new Map([\n  [1, 'one'],\n  [2, 'two'],\n  [3, 'three'],\n]);\n\nlet arr = [...map.keys()]; // [1, 2, 3]\n\nconst go = function*(){\n  yield 1;\n  yield 2;\n  yield 3;\n};\n\n[...go()] // [1, 2, 3]\n\n// å¦‚æœå¯¹æ²¡æœ‰ Iterator æ¥å£çš„å¯¹è±¡ï¼Œä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼Œå°†ä¼šæŠ¥é”™ã€‚\n\nconst obj = {a: 1, b: 2};\nlet arr = [...obj]; // TypeError: Cannot spread non-iterable object\n\n```\n\n\n> [!danger]\n> æ‰©å±•è¿ç®—ç¬¦è¿˜å¯ä»¥å°†å­—ç¬¦ä¸²è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼Œ`[...'hello']`  æˆ–è€… `Array.from('hello')`ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ `split`\n\n\n\n## 18. `Array.from()`æ–¹æ³•ç”¨äºå°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„\n\n- ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆarray-like objectï¼‰\n\t- NodeList å¯¹è±¡ï¼šdocument.querySelectorAll('p')\n\t- arguments å¯¹è±¡\n- å¯éå†ï¼ˆiterableï¼‰çš„å¯¹è±¡\n\t- Map\n\n## 19. `Array.of()` æ–¹æ³•ç”¨äº`å°†ä¸€ç»„å€¼`ï¼Œè½¬æ¢ä¸ºæ•°ç»„\n\n\n```javascript hl:5\nArray.of(3, 11, 8); // [3,11,8]\nArray.of(3); // [3]\nArray.of(); // []\n\n// å«ç‰‡\nfunction ArrayOf(){\n  return [].slice.call(arguments);\n}\n```\n\n\n## 20. indexOf ä¸ includes\n\n```javascript\n[NaN].indexOf(NaN)\n// -1\n\n// includesä½¿ç”¨çš„æ˜¯ä¸ä¸€æ ·çš„åˆ¤æ–­ç®—æ³•ï¼Œå°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚\n[NaN].includes(NaN)\n// true\n```\n\n\n## 21. æ‰“å¹³ä¸€ä¸ªæ•°ç»„\n\n```javascript hl:7\n[1, 2, [3, 4]].flat()\n// [1, 2, 3, 4]\n\n[1, 2, [3, [4, 5]]].flat()\n// [1, 2, 3, [4, 5]]\n\n// flat()çš„å‚æ•°ä¸º2ï¼Œè¡¨ç¤ºè¦â€œæ‹‰å¹³â€ä¸¤å±‚çš„åµŒå¥—æ•°\n[1, 2, [3, [4, 5]]].flat(2)\n// [1, 2, 3, 4, 5]\n```\n\n\n## 22. Array.fill\n\n```javascript hl:5,10\n['a', 'b', 'c'].fill(7)  // [7, 7, 7]\n\nnew Array(3).fill(7)   // [7, 7, 7]\n\nfillæ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šå¡«å……çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚\n\n['a', 'b', 'c'].fill(7, 1, 2)\n// ['a', 7, 'c']\n\nå¦‚æœå¡«å……çš„ç±»å‹ä¸ºå¯¹è±¡ï¼Œé‚£ä¹ˆè¢«èµ‹å€¼çš„æ˜¯åŒä¸€ä¸ªå†…å­˜åœ°å€çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ·±æ‹·è´å¯¹è±¡ã€‚\n\nlet arr = new Array(3).fill({name: \"Mike\"});\narr[0].name = \"Ben\";\narr\n// [{name: \"Ben\"}, {name: \"Ben\"}, {name: \"Ben\"}]\n\n```\n\n\n## 23. JSON.stringify å’Œ JSON.parse å¯æ¥å—é¢å¤–å‚æ•°\n\n\n## 24. Stringå¯¹è±¡\n\n- `'a'.concat('b', 'c') // \"abc\"`\n- `splitæ–¹æ³•`è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œé™å®šè¿”å›æ•°ç»„çš„æœ€å¤§æˆå‘˜æ•°\n- `indexOfæ–¹æ³•`è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä»è¯¥ä½ç½®å¼€å§‹å‘ååŒ¹é…\n- `at()`æ–¹æ³•æ¥å—ä¸€ä¸ªæ•´æ•°ä½œä¸ºå‚æ•°ï¼Œè¿”å›å‚æ•°æŒ‡å®šä½ç½®çš„å­—ç¬¦ï¼Œæ”¯æŒè´Ÿç´¢å¼•ï¼ˆå³å€’æ•°çš„ä½ç½®ï¼‰\n\n\n## 25. Math å¯¹è±¡\n\n```javascript hl:4,5,7\nMath.max(2, -1, 5) // 5\nMath.min(2, -1, 5) // -1\n\nMath.min() // Infinity\nMath.max() // -Infinity\n\nåè¿‡æ¥äº†ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ\n```\n\n## 26. è¿”å› `[min,max]` ä¹‹é—´çš„éšæœºæ•´æ•°\n\n```javascript\nMath.floor(Math.random() * (max - min + 1)) + min;\n```\n\n## 27. è¿”å›ä¸€ä¸ªéšæœºå­—ç¬¦\n\n```javascript\n// å­—ç¬¦\nvar str = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\" + \"abcdefghijklmnopqrstuvwxyz\" + \"0123456789-_\";\n\n// éšæœºæ•°\nlet random = Math.random(Math.floor() * str.length);\n\n// éšæœºå­—ç¬¦ä¸²\nlet randomStr = str[random];\n```\n\n\n## 28. æ­£åˆ™\n\n### 28.1. å®šä¹‰\n\n```javascript\nvar regex = /xyz/;\nvar regex = new RegExp(\"xyz\");\n\nvar regex = new RegExp(\"xyz\", \"i\");\n// ç­‰ä»·äº\nvar regex = /xyz/i;\n\n\nvar r = /abc/gim;\n\nr.ignoreCase; // true\nr.global; // true\nr.multiline; // true\nr.flags; // 'gim'\n```\n\n### 28.2. replace çš„ä½¿ç”¨\n\n```javascript hl:12\nvar prices = {\n  p1: \"$1.99\",\n  p2: \"$9.99\",\n  p3: \"$5.00\",\n};\n\nvar template =\n  '<span id=\"p1\"></span>' + '<span id=\"p2\"></span>' + '<span id=\"p3\"></span>';\n\ntemplate.replace(\n  /(<span id=\")(.*?)(\">)(<\\/span>)/g,\n  // å‚æ•°åˆ†åˆ«ä¸ºï¼šåŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ã€ç¬¬ä¸€ä¸ªæ‹¬å·åŒ¹é…åˆ°çš„å†…å®¹ã€ç¬¬äºŒä¸ªæ‹¬å·åŒ¹é…åˆ°çš„å†…å®¹ã€ç¬¬ä¸‰ä¸ªæ‹¬å·åŒ¹é…åˆ°çš„å†…å®¹ã€ç¬¬å››ä¸ªæ‹¬å·åŒ¹é…åˆ°çš„å†…å®¹\n  function (match, $1, $2, $3, $4) {\n    return $1 + $2 + $3 + prices[$2] + $4;\n  },\n);\n// <span id=\"p1\">$1.99</span>\n// <span id=\"p2\">$9.99</span>\n// <span id=\"p3\">$5.00</span>\n\n```\n\n### 28.3. è‡ªå·±ä¸ç†Ÿçš„\n\n```javascript hl:5,11\n/cat|dog/.test('cat') // true\n\n// å­—ç¬¦ä¸²bbc newsåŒ…å«aã€bã€cä»¥å¤–çš„å…¶ä»–å­—ç¬¦ï¼Œæ‰€ä»¥è¿”å›true\n/[^abc]/.test('bbc news') // true\n// å­—ç¬¦ä¸²bbcä¸åŒ…å«aã€bã€cä»¥å¤–çš„å…¶ä»–å­—ç¬¦ï¼Œæ‰€ä»¥è¿”å›false\n/[^abc]/.test('bbc') // false\n\n[0-9.,]\n[0-9a-fA-F]\n[a-zA-Z0-9-]\n[1-31] // ä¸ä»£è¡¨1åˆ°31ï¼Œåªä»£è¡¨1åˆ°3\n\né‡å¤ç±»\n/lo{2}k/.test('look') // true\n/lo{2,5}k/.test('looook') // true\n\nè´ªå©ªæ¨¡å¼\n// t å‡ºç°0æ¬¡æˆ–1æ¬¡\n/t?est/.test('test') // true\n/t?est/.test('est') // true\n\n// t å‡ºç°1æ¬¡æˆ–å¤šæ¬¡\n/t+est/.test('test') // true\n/t+est/.test('tttttttttttttest') // true\n/t+est/.test('est') // false\n\n// t å‡ºç°0æ¬¡æˆ–å¤šæ¬¡\n/t*est/.test('test') // true\n/t*est/.test('ttttttttest') // true\n/t*est/.test('tttest') // true\n/t*est/.test('tttttttttttttttttest') // true\n\n+?ï¼šè¡¨ç¤ºæŸä¸ªæ¨¡å¼å‡ºç°1æ¬¡æˆ–å¤šæ¬¡ï¼ŒåŒ¹é…æ—¶é‡‡ç”¨éè´ªå©ªæ¨¡å¼ã€‚\n*?ï¼šè¡¨ç¤ºæŸä¸ªæ¨¡å¼å‡ºç°0æ¬¡æˆ–å¤šæ¬¡ï¼ŒåŒ¹é…æ—¶é‡‡ç”¨éè´ªå©ªæ¨¡å¼ã€‚\n??ï¼šè¡¨æ ¼æŸä¸ªæ¨¡å¼å‡ºç°0æ¬¡æˆ–1æ¬¡ï¼ŒåŒ¹é…æ—¶é‡‡ç”¨éè´ªå©ªæ¨¡å¼ã€‚\n\n(?:x)ç§°ä¸º éæ•è·ç»„\n\nx(?=y) ç§°ä¸ºå…ˆè¡Œæ–­è¨€ï¼Œx åªæœ‰åœ¨y å‰é¢æ‰åŒ¹é…ï¼Œy ä¸ä¼šè¢«è®¡å…¥è¿”å›ç»“æœ\nx(?!y) ç§°ä¸ºå…ˆè¡Œå¦å®šæ–­è¨€ï¼Œxåªæœ‰ä¸åœ¨yå‰é¢æ‰åŒ¹é…ï¼Œy ä¸ä¼šè¢«è®¡å…¥è¿”å›ç»“æœ\n```\n\n\n\n\n\n","32e0ed7246db507082c888fdb0b974ed":"\n# å¸¸è§é¢è¯•é¢˜\n\n`#å‰ç«¯é¢è¯•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æµè§ˆå™¨æœ¬åœ°å¦‚ä½•`è¯»å–å¹¶å¤„ç†`æœ¬åœ°ç‰¹åˆ«å¤§çš„æ–‡ä»¶ \n\næˆ‘æ¥æ€»ç»“å‡ ç§åœ¨æµè§ˆå™¨æœ¬åœ°è¯»å–å¹¶å¤„ç†å¤§æ–‡ä»¶çš„ä¸»è¦æ–¹æ³•ï¼ŒæŒ‰ç…§æ•ˆç‡ä»é«˜åˆ°ä½æ’åºï¼š\n\n### 1.1. ä½¿ç”¨ WebAssembly æ¥å¤„ç†å¤§æ–‡ä»¶\n\nä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ Rust + WebAssembly å®ç°çš„ä¾‹å­ï¼š\n\n#### 1.1.1. é¦–å…ˆåˆ›å»º Rust é¡¹ç›®\n\n```bash\ncargo new --lib wasm-file-processor\ncd wasm-file-processor\n```\n\n#### 1.1.2. ä¿®æ”¹ `Cargo.toml`\n\n````toml\n[package]\nname = \"wasm-file-processor\"\nversion = \"0.1.0\"\nedition = \"2021\"\n\n[lib]\ncrate-type = [\"cdylib\"]\n\n[dependencies]\nwasm-bindgen = \"0.2\"\njs-sys = \"0.3\"\nweb-sys = { version = \"0.3\", features = [\"console\"] }\n````\n\n#### 1.1.3. Rust ä»£ç å®ç°ï¼ˆ`src/lib.rs`ï¼‰\n\n````rust\nuse wasm_bindgen::prelude::*;\n\n`#[wasm_bindgen]`\npub struct FileProcessor {\n    buffer: Vec<u8>,\n    position: usize,\n}\n\n`#[wasm_bindgen]`\nimpl FileProcessor {\n    `#[wasm_bindgen(constructor)]`\n    pub fn new() -> FileProcessor {\n        FileProcessor {\n            buffer: Vec::new(),\n            position: 0,\n        }\n    }\n\n    pub fn process_chunk(&mut self, chunk: &[u8]) {\n        self.buffer.extend_from_slice(chunk);\n    }\n\n    pub fn get_processed_data(&self) -> Vec<u8> {\n        self.buffer.clone()\n    }\n\n    // ç¤ºä¾‹ï¼šè®¡ç®—æ–‡ä»¶ä¸­ç‰¹å®šå­—èŠ‚çš„å‡ºç°æ¬¡æ•°\n    pub fn count_byte(&self, target: u8) -> u32 {\n        self.buffer.iter().filter(|&&b| b == target).count() as u32\n    }\n}\n````\n\n#### 1.1.4. JavaScript ä»£ç å®ç°\n\n````javascript\n// å¯¼å…¥ WebAssembly æ¨¡å—\nimport init, { FileProcessor } from './pkg/wasm_file_processor.js';\n\nasync function processLargeFile(file) {\n    // åˆå§‹åŒ– WebAssembly\n    await init();\n    \n    const chunkSize = 1024 * 1024; // 1MB chunks\n    const fileProcessor = new FileProcessor();\n    let offset = 0;\n\n    while (offset < file.size) {\n        const chunk = await readChunk(file, offset, chunkSize);\n        \n        // å°† chunk ä¼ é€’ç»™ WebAssembly å¤„ç†\n        fileProcessor.process_chunk(new Uint8Array(chunk));\n        \n        offset += chunkSize;\n        // æ›´æ–°è¿›åº¦\n        const progress = Math.round((offset / file.size) * 100);\n        console.log(`Processing: ${progress}%`);\n    }\n\n    return fileProcessor;\n}\n\nfunction readChunk(file, offset, size) {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = reject;\n        \n        const slice = file.slice(offset, offset + size);\n        reader.readAsArrayBuffer(slice);\n    });\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\ndocument.querySelector('input').addEventListener('change', async (e) => {\n    const file = e.target.files[0];\n    try {\n        const processor = await processLargeFile(file);\n        \n        // ç¤ºä¾‹ï¼šè®¡ç®—æ–‡ä»¶ä¸­å­—æ¯ 'a' çš„å‡ºç°æ¬¡æ•°\n        const count = processor.count_byte(97); // 97 æ˜¯å­—æ¯ 'a' çš„ ASCII ç \n        console.log(`Letter 'a' appears ${count} times`);\n        \n    } catch (error) {\n        console.error('Error processing file:', error);\n    }\n});\n````\n\n#### 1.1.5. æ›´å¤æ‚çš„å¤„ç†ç¤ºä¾‹ï¼ˆåœ¨ Rust ä¸­æ·»åŠ æ›´å¤šåŠŸèƒ½ï¼‰\n\nçœç•¥\n\n#### 1.1.6. åœ¨ JavaScript ä¸­ä½¿ç”¨å¢å¼ºçš„åŠŸèƒ½\n\n#### 1.1.7. æ€»ç»“\n\nä½¿ç”¨ WebAssembly çš„ä¼˜åŠ¿ï¼š\n\n1. **æ€§èƒ½æ›´å¥½**ï¼šRust ä»£ç ç¼–è¯‘æˆ WebAssembly åï¼Œ**æ‰§è¡Œé€Ÿåº¦æ¥è¿‘åŸç”Ÿä»£ç **\n2. **å†…å­˜å®‰å…¨**ï¼šRust çš„å†…å­˜å®‰å…¨æœºåˆ¶å¯ä»¥é¿å…å¾ˆå¤šå¸¸è§çš„å†…å­˜é—®é¢˜\n3. **å¹¶è¡Œå¤„ç†**ï¼šå¯ä»¥é…åˆ Web Workers å®ç°çœŸæ­£çš„å¹¶è¡Œå¤„ç†\n4. **ç±»å‹å®‰å…¨**ï¼šRust çš„å¼ºç±»å‹ç³»ç»Ÿå¯ä»¥åœ¨ç¼–è¯‘æ—¶æ•è·å¾ˆå¤šé”™è¯¯\n\næ³¨æ„äº‹é¡¹ï¼š\n\n1. éœ€è¦é…ç½®é€‚å½“çš„æ„å»ºå·¥å…·é“¾ï¼ˆwasm-packï¼‰\n2. è€ƒè™‘æµè§ˆå™¨å¯¹ WebAssembly çš„æ”¯æŒæƒ…å†µ\n3. å¤§æ–‡ä»¶å¤„ç†æ—¶ä»éœ€è¦è€ƒè™‘å†…å­˜ç®¡ç†\n4. åœ¨å¼€å‘æ—¶æ³¨æ„ Rust å’Œ JavaScript ä¹‹é—´çš„æ•°æ®è½¬æ¢å¼€é”€\n\nè¿™ä¸ªå®ç°å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚è¿›è¡Œæ‰©å±•ï¼Œæ¯”å¦‚æ·»åŠ æ›´å¤šçš„æ–‡ä»¶å¤„ç†åŠŸèƒ½ã€å‹ç¼©è§£å‹ç¼©ã€å›¾åƒå¤„ç†ç­‰ã€‚\n\n### 1.2. ä½¿ç”¨ File System Access API\n\n````javascript hl:4\nasync function processLargeFile() {\n    try {\n        // æ‰“å¼€æ–‡ä»¶\n        const [fileHandle] = await window.showOpenFilePicker();\n        const file = await fileHandle.getFile();\n        \n        // åˆ›å»ºæ–‡ä»¶æµ\n        const stream = await file.stream();\n        const reader = stream.getReader();\n        \n        // å¤„ç†æ•°æ®\n        while (true) {\n            const { done, value } = await reader.read();\n            if (done) break;\n            \n            // value æ˜¯ Uint8Array ç±»å‹\n            processChunk(value);\n        }\n    } catch (err) {\n        console.error('Error:', err);\n    }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nbutton.onclick = processLargeFile;\n````\n\n### 1.3. ä½¿ç”¨ Streams API\n\n````javascript hl:6\nasync function processLargeFile(file) {\n    const stream = file.stream();\n    const reader = stream.getReader();\n\n    // åˆ›å»ºè½¬æ¢æµæ¥å¤„ç†æ•°æ®\n    const transform = new TransformStream({\n        transform(chunk, controller) {\n            // åœ¨è¿™é‡Œå¤„ç†æ•°æ®å—\n            const processed = processChunk(chunk);\n            controller.enqueue(processed);\n        }\n    });\n\n    // è¯»å–å¹¶å¤„ç†\n    try {\n        await reader\n            .pipeThrough(transform)\n            .pipeTo(new WritableStream({\n                write(chunk) {\n                    // å¤„ç†è½¬æ¢åçš„æ•°æ®\n                    console.log('Processed chunk:', chunk);\n                }\n            }));\n    } catch (err) {\n        console.error('Error:', err);\n    }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\ninput.onchange = e => processLargeFile(e.target.files[0]);\n````\n\n### 1.4. ä½¿ç”¨ Blob åˆ‡ç‰‡ + Web Workerï¼ˆé€‚åˆéœ€è¦å¤§é‡è®¡ç®—çš„åœºæ™¯ï¼‰\n\n````javascript\n// main.js\nfunction processLargeFile(file) {\n    const CHUNK_SIZE = 2 * 1024 * 1024; // 2MB chunks\n    let offset = 0;\n    \n    // åˆ›å»º Worker\n    const worker = new Worker('worker.js');\n    \n    function readNextChunk() {\n        const slice = file.slice(offset, offset + CHUNK_SIZE);\n        const reader = new FileReader();\n        \n        reader.onload = function(e) {\n            worker.postMessage({\n                chunk: e.target.result,\n                offset: offset,\n                done: offset >= file.size\n            });\n            \n            offset += CHUNK_SIZE;\n            if (offset < file.size) {\n                readNextChunk();\n            }\n        };\n        \n        reader.readAsArrayBuffer(slice);\n    }\n    \n    // å¤„ç† Worker è¿”å›çš„ç»“æœ\n    worker.onmessage = function(e) {\n        console.log('Processed result:', e.data);\n    };\n    \n    readNextChunk();\n}\n\n// worker.js\nself.onmessage = function(e) {\n    const { chunk, offset, done } = e.data;\n    \n    // åœ¨ Worker ä¸­å¤„ç†æ•°æ®\n    const result = processChunk(chunk);\n    \n    self.postMessage({\n        result,\n        offset,\n        done\n    });\n};\n````\n\n### 1.5. ä½¿ç”¨ IndexedDB å­˜å‚¨å’Œå¤„ç†ï¼ˆé€‚åˆéœ€è¦æŒä¹…åŒ–çš„åœºæ™¯ï¼‰\n\n````javascript\nasync function processWithIndexedDB(file) {\n    const db = await openDB('FileDB', 1, {\n        upgrade(db) {\n            db.createObjectStore('chunks');\n        }\n    });\n\n    // åˆ†å—å­˜å‚¨\n    const CHUNK_SIZE = 2 * 1024 * 1024;\n    let offset = 0;\n    \n    while (offset < file.size) {\n        const chunk = file.slice(offset, offset + CHUNK_SIZE);\n        const buffer = await chunk.arrayBuffer();\n        \n        // å­˜å‚¨åˆ° IndexedDB\n        await db.put('chunks', buffer, offset);\n        \n        // å¤„ç†æ•°æ®\n        await processChunk(buffer);\n        \n        offset += CHUNK_SIZE;\n    }\n}\n\n// å¤„ç†å•ä¸ªæ•°æ®å—\nasync function processChunk(buffer) {\n    // ç¤ºä¾‹ï¼šè®¡ç®—æ•°æ®å—çš„å“ˆå¸Œ\n    const hashBuffer = await crypto.subtle.digest('SHA-256', buffer);\n    return new Uint8Array(hashBuffer);\n}\n````\n\n### 1.6. å®é™…ä½¿ç”¨å»ºè®®\n\n#### 1.6.1. é€‰æ‹©ç­–ç•¥\n\n- å¦‚æœéœ€è¦å®æ—¶å¤„ç†ï¼šä½¿ç”¨ Streams API\n- å¦‚æœéœ€è¦å¤§é‡è®¡ç®—ï¼šä½¿ç”¨ Web Worker\n- å¦‚æœéœ€è¦æŒä¹…åŒ–ï¼šä½¿ç”¨ IndexedDB\n- å¦‚æœéœ€è¦æœ€æ–°ç‰¹æ€§ï¼šä½¿ç”¨ File System Access API\n#### 1.6.2. æ€§èƒ½ä¼˜åŒ–\n\n```javascript\n// æ·»åŠ è¿›åº¦æ˜¾ç¤º\nconst total = file.size;\nlet processed = 0;\n\nfunction updateProgress(chunkSize) {\n    processed += chunkSize;\n    const progress = (processed / total) * 100;\n    console.log(`Progress: ${progress.toFixed(2)}%`);\n}\n\n// æ·»åŠ å†…å­˜ç®¡ç†\nfunction cleanupMemory() {\n    // æ‰‹åŠ¨è§¦å‘åƒåœ¾å›æ”¶\n    if (global.gc) {\n        global.gc();\n    }\n}\n\n// æ·»åŠ é”™è¯¯å¤„ç†\ntry {\n    // å¤„ç†ä»£ç \n} catch (err) {\n    console.error('Error processing file:', err);\n    // æ¸…ç†èµ„æº\n    reader.cancel();\n    worker.terminate();\n}\n```\n\n#### 1.6.3. æœ€ä½³å®è·µ\n\n- å§‹ç»ˆæ˜¾ç¤ºè¿›åº¦ä¿¡æ¯\n- æä¾›å–æ¶ˆæ“ä½œçš„èƒ½åŠ›\n- åšå¥½é”™è¯¯å¤„ç†\n- æ³¨æ„å†…å­˜ç®¡ç†\n- è€ƒè™‘ä½¿ç”¨ Web Worker é¿å…é˜»å¡ä¸»çº¿ç¨‹\n\n#### 1.6.4. é€‰æ‹©å»ºè®®\n\né€‰æ‹©åˆé€‚çš„æ–¹æ³•å–å†³äºä½ çš„å…·ä½“éœ€æ±‚ï¼š\n\n- æ–‡ä»¶å¤§å°\n- å¤„ç†å¤æ‚åº¦\n- æµè§ˆå™¨å…¼å®¹æ€§è¦æ±‚\n- æ˜¯å¦éœ€è¦æŒä¹…åŒ–\n- æ˜¯å¦éœ€è¦å®æ—¶å¤„ç†\n## 2. worker ä¸­æ— æ³•è¯»å–æœ¬åœ°æ–‡ä»¶ï¼Œé™åˆ¶å¦‚ä¸‹\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-19.png)\n\n## 3. ä»‹ç»ä¸€ä¸‹ WebAssembly (Wasm) åŠå…¶åº”ç”¨åœºæ™¯\n\n### 3.1. WebAssembly åŸºæœ¬æ¦‚å¿µ\n\nWebAssembly æ˜¯ä¸€ç§ä½çº§çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå¯ä»¥åœ¨ç°ä»£æµè§ˆå™¨ä¸­è¿è¡Œï¼Œæä¾›æ¥è¿‘åŸç”Ÿçš„æ€§èƒ½ã€‚ä¸»è¦ç‰¹ç‚¹ï¼š\n\n- å¿«é€Ÿæ‰§è¡Œ\n- è·¨å¹³å°\n- æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ˆC++ã€Rustã€Goç­‰ï¼‰\n- ä¸JavaScriptäº’æ“ä½œ\n- å®‰å…¨çš„æ²™ç®±ç¯å¢ƒ\n\n### 3.2. åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ï¼ˆä½¿ç”¨Rustï¼‰ï¼šfib\n\n````rust\n// Rustä»£ç  (lib.rs)\nuse wasm_bindgen::prelude::*;\n\n`#[wasm_bindgen]`\npub fn fibonacci(n: u32) -> u32 {\n    if n <= 1 {\n        return n;\n    }\n    fibonacci(n - 1) + fibonacci(n - 2)\n}\n````\n\nå¯¹åº”çš„JavaScriptè°ƒç”¨ï¼š\n\n````javascript\nimport init, { fibonacci } from './pkg/my_wasm.js';\n\nasync function run() {\n    await init();\n    console.log(fibonacci(10)); // è¾“å‡ºç¬¬10ä¸ªæ–æ³¢é‚£å¥‘æ•°\n}\n\nrun();\n````\n\n### 3.3. å¸¸è§ä½¿ç”¨æ¡ˆä¾‹\n\n#### 3.3.1. å›¾åƒå¤„ç†\n\n````rust\n// Rustä»£ç \n`#[wasm_bindgen]`\npub fn apply_grayscale(data: &mut [u8]) {\n    for pixel in data.chunks_mut(4) {\n        let avg = (pixel[0] as u32 + pixel[1] as u32 + pixel[2] as u32) / 3;\n        pixel[0] = avg as u8;\n        pixel[1] = avg as u8;\n        pixel[2] = avg as u8;\n    }\n}\n````\n\nJavaScriptè°ƒç”¨ï¼š\n\n````javascript\nasync function processImage(imageData) {\n    const { memory, apply_grayscale } = await init();\n    \n    // åˆ›å»ºå…±äº«å†…å­˜\n    const array = new Uint8ClampedArray(memory.buffer, imageData.data.byteOffset, imageData.data.length);\n    \n    // å¤„ç†å›¾åƒ\n    apply_grayscale(array);\n    \n    // æ›´æ–°canvas\n    ctx.putImageData(imageData, 0, 0);\n}\n````\n\n#### 3.3.2. æ¸¸æˆå¼•æ“\n\n````rust\n// Rustæ¸¸æˆé€»è¾‘\n`#[wasm_bindgen]`\npub struct GameState {\n    players: Vec<Player>,\n    world: World,\n}\n\n`#[wasm_bindgen]`\nimpl GameState {\n    pub fn new() -> GameState {\n        // åˆå§‹åŒ–æ¸¸æˆçŠ¶æ€\n    }\n\n    pub fn update(&mut self) {\n        // æ›´æ–°æ¸¸æˆé€»è¾‘\n    }\n\n    pub fn render(&self) -> Vec<u8> {\n        // è¿”å›æ¸²æŸ“æ•°æ®\n    }\n}\n````\n\nJavaScripté›†æˆï¼š\n\n````javascript\nimport { GameState } from './pkg/game_wasm.js';\n\nclass Game {\n    constructor() {\n        this.gameState = GameState.new();\n        this.canvas = document.getElementById('game-canvas');\n        this.ctx = this.canvas.getContext('2d');\n    }\n\n    gameLoop() {\n        this.gameState.update();\n        const renderData = this.gameState.render();\n        this.draw(renderData);\n        requestAnimationFrame(() => this.gameLoop());\n    }\n}\n````\n\n#### 3.3.3. éŸ³é¢‘å¤„ç†\n\n````rust\n`#[wasm_bindgen]`\npub struct AudioProcessor {\n    buffer: Vec<f32>,\n}\n\n`#[wasm_bindgen]`\nimpl AudioProcessor {\n    pub fn new() -> AudioProcessor {\n        AudioProcessor {\n            buffer: Vec::new(),\n        }\n    }\n\n    pub fn process_audio(&mut self, samples: &[f32]) -> Vec<f32> {\n        // éŸ³é¢‘å¤„ç†é€»è¾‘\n        samples.iter().map(|&x| x * 0.5).collect()\n    }\n}\n````\n\nJavaScriptéŸ³é¢‘å¤„ç†ï¼š\n\n````javascript hl:3\nclass AudioHandler {\n    async init() {\n        const { AudioProcessor } = await import('./pkg/audio_wasm.js');\n        this.processor = AudioProcessor.new();\n        \n        const audioContext = new AudioContext();\n        const source = audioContext.createBufferSource();\n        const processor = audioContext.createScriptProcessor(2048, 1, 1);\n        \n        processor.onaudioprocess = (e) => {\n            const input = e.inputBuffer.getChannelData(0);\n            const output = e.outputBuffer.getChannelData(0);\n            \n            // ä½¿ç”¨WASMå¤„ç†éŸ³é¢‘\n            const processed = this.processor.process_audio(input);\n            output.set(processed);\n        };\n    }\n}\n````\n\n#### 3.3.4. å¯†ç å­¦åº”ç”¨\n\n````rust\n`#[wasm_bindgen]`\npub fn hash_password(password: &str, salt: &str) -> String {\n    use argon2::{self, Config};\n    \n    let config = Config::default();\n    argon2::hash_encoded(\n        password.as_bytes(),\n        salt.as_bytes(),\n        &config\n    ).unwrap()\n}\n````\n\nJavaScriptä½¿ç”¨ï¼š\n\n````javascript\nasync function hashPassword(password) {\n    const { hash_password } = await init();\n    const salt = crypto.getRandomValues(new Uint8Array(16));\n    return hash_password(password, salt);\n}\n````\n\n#### 3.3.5. 3Dæ¸²æŸ“\n\n````rust\n`#[wasm_bindgen]`\npub struct Renderer {\n    vertices: Vec<f32>,\n    indices: Vec<u32>,\n}\n\n`#[wasm_bindgen]`\nimpl Renderer {\n    pub fn new() -> Renderer {\n        Renderer {\n            vertices: Vec::new(),\n            indices: Vec::new(),\n        }\n    }\n\n    pub fn render_scene(&self) -> Vec<u8> {\n        // 3Dæ¸²æŸ“é€»è¾‘\n    }\n}\n````\n\nä¸WebGLé›†æˆï¼š\n\n````javascript\nclass Scene {\n    async init() {\n        const { Renderer } = await import('./pkg/renderer_wasm.js');\n        this.renderer = Renderer.new();\n        \n        const gl = canvas.getContext('webgl');\n        // è®¾ç½®WebGLä¸Šä¸‹æ–‡\n        \n        this.animate();\n    }\n    \n    animate() {\n        const renderData = this.renderer.render_scene();\n        // æ›´æ–°WebGLç¼“å†²åŒº\n        requestAnimationFrame(() => this.animate());\n    }\n}\n````\n\n### 3.4. æ€§èƒ½ä¼˜åŒ–å»ºè®®\n\n````javascript hl:1,5,9,17\n// 1. é¿å…é¢‘ç¹çš„å†…å­˜å¤åˆ¶\nconst memory = new WebAssembly.Memory({ initial: 10 });\nconst sharedArray = new Uint8Array(memory.buffer);\n\n// 2. ä½¿ç”¨Web Workers\nconst worker = new Worker('wasm-worker.js');\nworker.postMessage({ type: 'init' });\n\n// 3. æ‰¹é‡å¤„ç†æ•°æ®\nfunction batchProcess(data, batchSize = 1000) {\n    for (let i = 0; i < data.length; i += batchSize) {\n        const batch = data.slice(i, i + batchSize);\n        wasmModule.processBatch(batch);\n    }\n}\n\n// 4. ä½¿ç”¨å…±äº«å†…å­˜\nconst shared = new SharedArrayBuffer(1024);\nconst sharedInt32 = new Int32Array(shared);\n````\n\n### 3.5. æœ€ä½³å®è·µ\n\n- å°†è®¡ç®—å¯†é›†å‹ä»»åŠ¡äº¤ç»™WebAssembly\n- ä¿æŒJavaScriptæ¥å£ç®€å•æ¸…æ™°\n- é€‚å½“ä½¿ç”¨ Web Workers\n- æ³¨æ„å†…å­˜ç®¡ç†\n- ä¼˜åŒ–æ•°æ®ä¼ è¾“\n- ä½¿ç”¨é€‚å½“çš„å·¥å…·é“¾ï¼ˆwasm-packã€emscriptenç­‰ï¼‰\n- è¿›è¡Œæ€§èƒ½æµ‹è¯•å’Œå¯¹æ¯”\n\n### 3.6. å®é™…æ¡ˆä¾‹\n\n- a. AutoCAD Webï¼š\n\t- å°†å¤æ‚çš„ CAD è½¯ä»¶ç§»æ¤åˆ°ç½‘é¡µ\n\t- å®ç°æ¥è¿‘æ¡Œé¢çº§çš„æ€§èƒ½\n\t- æ”¯æŒå¤§å‹å·¥ç¨‹å›¾çº¸å¤„ç†\n- b. Google Earthï¼š\n\t- 3D åœ°å›¾æ¸²æŸ“\n\t- å¤æ‚åœ°ç†æ•°æ®å¤„ç†\n\t- æµç•…çš„ç”¨æˆ·äº¤äº’\n- c. Figmaï¼š\n\t- å®æ—¶å›¾å½¢å¤„ç†\n\t- å¤æ‚çš„å¸ƒå±€è®¡ç®—\n\t- å¿«é€Ÿçš„ç•Œé¢å“åº”\n- Unity WebGLï¼šæ¸¸æˆå¼•æ“é€šè¿‡ WebAssembly éƒ¨ç½²åˆ°ç½‘é¡µ\n- Autodesk AutoCAD Webï¼šä½¿ç”¨ C++ ç¼–è¯‘åˆ° WebAssembly\n- Photoshop Web ç‰ˆæœ¬ä½¿ç”¨ WebAssembly\n### 3.7. WebAssembly ç‰¹åˆ«é€‚åˆ\n\n- æ¸¸æˆå¼€å‘\n- å›¾åƒ/è§†é¢‘å¤„ç†\n- 3Dæ¸²æŸ“\n- ç§‘å­¦è®¡ç®—\n- åŠ å¯†ç®—æ³•\n- éŸ³é¢‘å¤„ç†\n- æ¨¡æ‹Ÿå™¨\n- å¤§æ•°æ®å¤„ç†\n- éœ€è¦é«˜æ€§èƒ½çš„ Web åº”ç”¨\n- ç°æœ‰åŸç”Ÿåº”ç”¨çš„ Web è¿ç§»\n\né€šè¿‡åˆç†ä½¿ç”¨WebAssemblyï¼Œå¯ä»¥æ˜¾è‘—æå‡Webåº”ç”¨çš„æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨è®¡ç®—å¯†é›†å‹ä»»åŠ¡ä¸­ã€‚\n\n","23fd276580b25a4b9f8dd4300a0e0cdd":"\n# å¸¸è§é¢è¯•é¢˜\n\n`#å‰ç«¯é¢è¯•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å¦‚ä½•å®ç°å¸é¡¶æ•ˆæœ \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-21.png)\n\n## 2. `Element.getBoundingClientRect()` çš„ 6 ä¸ªå±æ€§\n\nè¿”å›ç›¸å¯¹è§†å£çš„ 6 ä¸ªå±æ€§ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-20.png)\n\n## 3. å®ç°æ¨¡ç³Šæœç´¢ç»“æœçš„å…³é”®è¯é«˜äº®æ˜¾ç¤º\n\n```javascript hl:3,5\nlet value = \"åŒ—äº¬\";\nlet str = \"åŒ—äº¬è°¢è°¢ä½ ï¼ŒåŒ—äº¬å†è§\";\n// ä½¿ç”¨ new RegExp() åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡,å› ä¸º value æ˜¯å˜é‡\nlet reg = new RegExp(`\\(${value}\\)`, \"g\");\n// è¿™æ˜¯å…³é”®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²\nlet s = str.replace(reg, \"<i>$1</i>\");\nconsole.log(s); \n// <i>åŒ—äº¬</i>è°¢è°¢ä½ ï¼Œ<i>åŒ—äº¬</i>å†è§\n\n```\n\n## 4. å¦‚ä½•å®ç° `(5).add(3).minus(2)`\n\n```javascript hl:5,11\nNumber.prototype.add = function (i) {\n  if (typeof i !== \"number\") {\n    throw new Error(\"è¯·è¾“å…¥æ•°å­—ï½\");\n  }\n  return this + i;\n};\nNumber.prototype.minus = function (i) {\n  if (typeof i !== \"number\") {\n    throw new Error(\"è¯·è¾“å…¥æ•°å­—ï½\");\n  }\n  return this + i;\n};\n\nlet s = (5).add(3).minus(2);\n\nconsole.log(s);\n\n```\n\n## 5. å®ç°ä¸‹é¢çš„è¯‰æ±‚ï¼ˆ`==`ï¼‰\n\n```javascript\n/**\n * ä¸‹é¢çš„ä»£ç ä»€ä¹ˆæƒ…å†µä¸‹æ‰“å°1\n * var a = ?; èƒ½ä¿è¯ä¸‹é¢log å‡º 1\n * if(a == 1 && a == 2 && a == 3){\n *  \tconsole.log(1);\n * }\n * */\n\n```\n\n### 5.1. ä½¿ç”¨ valueOf æ–¹æ³•\n\n```javascript\nvar a = {\n    value: 0,\n    valueOf: function() {\n        return ++this.value;\n    }\n};\n\nif(a == 1 && a == 2 && a == 3) {\n    console.log(1); // ä¼šæ‰“å° 1\n}\n```\n\n### 5.2. ä½¿ç”¨ toString æ–¹æ³•\n\n```javascript\nvar a = {\n    value: 0,\n    toString: function() {\n        return ++this.value;\n    }\n};\n\nif(a == 1 && a == 2 && a == 3) {\n    console.log(1); // ä¼šæ‰“å° 1\n}\n```\n\n### 5.3. ä½¿ç”¨ getter (Object.defineProperty)\n\n```javascript hl:2\nvar value = 0;\nObject.defineProperty(window, 'a', {\n    get: function() {\n        return ++value;\n    }\n});\n\nif(a == 1 && a == 2 && a == 3) {\n    console.log(1); // ä¼šæ‰“å° 1\n}\n```\n\n### 5.4. ä½¿ç”¨æ•°ç»„å’Œ toString\n\n```javascript hl:2\nvar a = [1,2,3];\na.toString = a.shift;\n\nif(a == 1 && a == 2 && a == 3) {\n    console.log(1); // ä¼šæ‰“å° 1\n}\n```\n\n### 5.5. ä½¿ç”¨ Symbol.toPrimitive\n\n```javascript\nvar a = {\n    [Symbol.toPrimitive]: function(hint) {\n        if (this.value === undefined) {\n            this.value = 0;\n        }\n        return ++this.value;\n    }\n};\n\nif(a == 1 && a == 2 && a == 3) {\n    console.log(1); // ä¼šæ‰“å° 1\n}\n```\n\n### 5.6. ä½¿ç”¨ Proxy\n\n```javascript\nlet value = 0;\nvar a = new Proxy({}, {\n    get: function(target, property) {\n        return () => ++value;\n    }\n});\n\nif(a == 1 && a == 2 && a == 3) {\n    console.log(1); // ä¼šæ‰“å° 1\n}\n```\n\nåŸç†è§£é‡Šï¼š\n\n1. è¿™äº›æ–¹æ³•éƒ½åˆ©ç”¨äº† JavaScript çš„ç±»å‹è½¬æ¢æœºåˆ¶ã€‚å½“ä½¿ç”¨ `==` è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œå¦‚æœæ“ä½œæ•°ç±»å‹ä¸åŒï¼ŒJavaScript ä¼šè¿›è¡Œç±»å‹è½¬æ¢ã€‚\n2. åœ¨è¿›è¡Œç±»å‹è½¬æ¢æ—¶ï¼ŒJavaScript ä¼šæŒ‰ä»¥ä¸‹é¡ºåºè°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ï¼š\n   - é¦–å…ˆæ£€æŸ¥ `Symbol.toPrimitive`\n   - ç„¶åæ˜¯ `valueOf()`\n   - æœ€åæ˜¯ `toString()`\n3. æ¯æ¬¡è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œéƒ½ä¼šè§¦å‘è¿™äº›è½¬æ¢æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™äº›æ–¹æ³•ä¸­è¿”å›é€’å¢çš„å€¼ã€‚\n4. getter æ–¹æ³•çš„å®ç°åˆ©ç”¨äº†å±æ€§è®¿é—®æ—¶ä¼šè°ƒç”¨ get æ–¹æ³•çš„ç‰¹æ€§ã€‚\n5. Proxy æ–¹æ¡ˆåˆ©ç”¨äº†ä»£ç†å¯¹è±¡å¯ä»¥æ‹¦æˆªå„ç§æ“ä½œçš„ç‰¹æ€§ã€‚\n\n### 5.7. æ³¨æ„äº‹é¡¹\n\n- è¿™äº›å®ç°éƒ½æ˜¯ä¸€äº›æŠ€å·§æ€§çš„ä»£ç ï¼Œåœ¨å®é™…å¼€å‘ä¸­**åº”è¯¥é¿å…ä½¿ç”¨**\n- è¿™ç±»ä»£ç å¯èƒ½ä¼šå¯¼è‡´ä»£ç éš¾ä»¥ç†è§£å’Œç»´æŠ¤\n- ä¸»è¦ç”¨äºç†è§£ JavaScript çš„`ç±»å‹è½¬æ¢æœºåˆ¶`å’Œå¯¹è±¡å±æ€§è®¿é—®æœºåˆ¶\n\n## 6. å®ç°ä¸‹é¢çš„è¯‰æ±‚ï¼ˆ`===`ï¼‰\n\n```javascript\n/**\n * ä¸‹é¢çš„ä»£ç ä»€ä¹ˆæƒ…å†µä¸‹æ‰“å°1\n * var a = ?; èƒ½ä¿è¯ä¸‹é¢log å‡º 1\n * if(a === 1 && a === 2 && a === 3){\n *  \tconsole.log(1);\n * }\n * */\n\n```\n\nå¦‚æœä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰ `===`ï¼Œæƒ…å†µä¼šæ›´åŠ å—é™ï¼Œå› ä¸º `===` ä¸ä¼šè¿›è¡Œç±»å‹è½¬æ¢ï¼Œå®ƒè¦æ±‚ç±»å‹å’Œå€¼éƒ½ç›¸ç­‰ã€‚ä¸è¿‡ä»ç„¶æœ‰å‡ ç§æ–¹æ³•å¯ä»¥å®ç°ï¼š\n\n### 6.1. ä½¿ç”¨ Object.defineProperty å®šä¹‰ getter\n\n```javascript\nlet value = 0;\nObject.defineProperty(window, 'a', {\n    get: function() {\n        return ++value;\n    }\n});\n\nif(a === 1 && a === 2 && a === 3) {\n    console.log(1); // ä¼šæ‰“å° 1\n}\n```\n\n### 6.2. ä½¿ç”¨å…¨å±€å˜é‡å’Œ Proxy\n\n```javascript\nlet value = 0;\nconst a = new Proxy({}, {\n    get: function(target, property) {\n        return ++value;\n    }\n});\n\nif(a === 1 && a === 2 && a === 3) {\n    console.log(1); // ä¼šæ‰“å° 1\n}\n```\n\n### 6.3. ä½¿ç”¨ç±»çš„ getter\n\n```javascript\nclass NumberClass {\n    constructor() {\n        this._value = 0;\n    }\n    \n    get a() {\n        return ++this._value;\n    }\n}\n\nconst obj = new NumberClass();\nif(obj.a === 1 && obj.a === 2 && obj.a === 3) {\n    console.log(1); // ä¼šæ‰“å° 1\n}\n```\n\n### 6.4. ä½¿ç”¨é—­åŒ…\n\n```javascript\nlet getA = (function() {\n    let value = 0;\n    return function() {\n        return ++value;\n    }\n})();\n\nif(getA() === 1 && getA() === 2 && getA() === 3) {\n    console.log(1); // ä¼šæ‰“å° 1\n}\n```\n\n## 7. è¯´è¯´ `Symbol.toPrimitive`\n\n`Symbol.toPrimitive` ä»å­—é¢æ„æ€æ‹†è§£æ¥çœ‹ï¼š\n\n1. **Symbol**ï¼š\n   - è¿™æ˜¯ JavaScript ä¸­çš„ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹\n   - ç”¨äºåˆ›å»ºå”¯ä¸€çš„æ ‡è¯†ç¬¦\n   - ES6 å¼•å…¥çš„æ–°ç‰¹æ€§\n2. **toPrimitive**ï¼š\n   - \"to\" è¡¨ç¤ºè½¬æ¢åˆ°\n   - \"Primitive\" è¡¨ç¤º`åŸå§‹å€¼/åŸºæœ¬ç±»å‹`\n   - åˆèµ·æ¥å°±æ˜¯\"è½¬æ¢ä¸ºåŸå§‹å€¼\"\n\næ‰€ä»¥ `Symbol.toPrimitive` å­—é¢æ„æ€å°±æ˜¯\"`è½¬æ¢ä¸ºåŸå§‹å€¼çš„ç¬¦å·`\"ã€‚å®ƒæ˜¯ä¸€ä¸ªå†…ç½®çš„ Symbol å€¼ï¼Œä½œä¸ºå¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼Œç”¨æ¥æŒ‡å®šå°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼çš„æ–¹æ³•ã€‚\n\nåœ¨ JavaScript ä¸­ï¼ŒåŸå§‹å€¼ï¼ˆprimitive valuesï¼‰åŒ…æ‹¬ï¼š\n- æ•°å­—ï¼ˆNumberï¼‰\n- å­—ç¬¦ä¸²ï¼ˆStringï¼‰\n- å¸ƒå°”å€¼ï¼ˆBooleanï¼‰\n- undefined\n- null\n- Symbol\n- BigInt\n\nä½¿ç”¨ç¤ºä¾‹ï¼š\n```javascript\n// Symbol.toPrimitive çš„åŸºæœ¬ä½¿ç”¨\nconst obj = {\n    // å®šä¹‰å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼çš„è¡Œä¸º\n    [Symbol.toPrimitive](hint) {\n        console.log(`Converting to ${hint}`);\n        switch(hint) {\n            case 'number':  // éœ€è¦è½¬æ¢ä¸ºæ•°å­—æ—¶\n                return 42;\n            case 'string':  // éœ€è¦è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶\n                return 'hello';\n            default:        // é»˜è®¤è½¬æ¢è¡Œä¸º\n                return 'default';\n        }\n    }\n};\n\n// ä¸åŒåœºæ™¯ä¸‹çš„è½¬æ¢\nNumber(obj);    // æ‰“å° \"Converting to number\" è¿”å› 42\nString(obj);    // æ‰“å° \"Converting to string\" è¿”å› \"hello\"\nobj + '';       // æ‰“å° \"Converting to default\" è¿”å› \"default\"\n```\n\nhint å‚æ•°å¯èƒ½çš„å€¼ï¼š\n1. `\"number\"` - å½“éœ€è¦è½¬æ¢ä¸ºæ•°å­—æ—¶\n2. `\"string\"` - å½“éœ€è¦è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶\n3. `\"default\"` - å½“è½¬æ¢å¯ä»¥æ˜¯ä»»æ„ç±»å‹æ—¶\n\n```javascript\n// å®é™…åº”ç”¨ç¤ºä¾‹\nconst date = {\n    day: 1,\n    month: 12,\n    year: 2024,\n    [Symbol.toPrimitive](hint) {\n        switch(hint) {\n            case 'number':\n                // è½¬æ¢ä¸ºæ—¶é—´æˆ³\n                return new Date(this.year, this.month - 1, this.day).getTime();\n            case 'string':\n                // è½¬æ¢ä¸ºæ—¥æœŸå­—ç¬¦ä¸²\n                return `${this.year}-${this.month}-${this.day}`;\n            default:\n                // é»˜è®¤è¡Œä¸º\n                return `${this.day}/${this.month}/${this.year}`;\n        }\n    }\n};\n\nconsole.log(+date);         // æ—¶é—´æˆ³\nconsole.log(`${date}`);     // \"2024-12-1\"\nconsole.log(date + '');     // \"1/12/2024\"\n```\n\næ€»ç»“ï¼š\n1. Symbol.toPrimitive æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ Symbol å€¼\n2. å®ƒç”¨ä½œå¯¹è±¡çš„æ–¹æ³•åï¼Œå®šä¹‰å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼çš„è¡Œä¸º\n3. è¿™ä¸ªåå­—ç›´è§‚åœ°è¡¨æ˜äº†å…¶åŠŸèƒ½ï¼šå°†å¯¹è±¡è½¬æ¢ï¼ˆtoï¼‰ä¸ºåŸå§‹å€¼ï¼ˆprimitiveï¼‰\n4. å®ƒæ˜¯ JavaScript ç±»å‹è½¬æ¢ç³»ç»Ÿä¸­çš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†\n\n## 8. ç¼–ç¨‹é¢˜ï¼šè¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸ºæ•°æ® data å’Œ idï¼Œè¾“å‡ºä¸ºä»æ ¹èŠ‚ç‚¹åˆ° id çš„å®Œæ•´è·¯å¾„\n\næœ¬è´¨æ˜¯`å¤šå‰æ ‘`çš„éå†ï¼Œæ‰¾åˆ°ä¸€æ¡è·¯å¾„å³å¯\n\n```javascript\nconst data = [\n  {\n    id: \"1\",\n    name: \"test1\",\n    children: [\n      {\n        id: \"11\",\n        name: \"test11\",\n        children: [\n          {\n            id: \"111\",\n            name: \"test111\",\n          },\n          {\n            id: \"112\",\n            name: \"test112\",\n          },\n        ],\n      },\n      {\n        id: \"12\",\n        name: \"test12\",\n        children: [\n          {\n            id: \"121\",\n            name: \"test121\",\n          },\n          {\n            id: \"122\",\n            name: \"test122\",\n          },\n        ],\n      },\n    ],\n  },\n];\n\n\n```\n\n### 8.1. å®ç°\n\n```javascript hl:10\n// è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸ºæ•°æ® data å’Œ idï¼Œè¾“å‡ºä¸ºä»æ ¹èŠ‚ç‚¹åˆ° id çš„å®Œæ•´è·¯å¾„\nfunction findPath(data, id) {\n  const res = [];\n\n  function dfs(data, id, path) {\n    for (let i = 0; i < data.length; i++) {\n      // é€‰æ‹©\n      path.push(data[i].id);\n      if (data[i].id === id) {\n        res.push(...path); // æµ…æ‹·è´ä¸‹ï¼Œå¦åˆ™æœ‰é—®é¢˜\n        return;\n      }\n      if (data[i].children) {\n        dfs(data[i].children, id, path);\n      }\n      // æ’¤é”€é€‰æ‹©\n      path.pop();\n    }\n  }\n\n  dfs(data, id, []);\n\n  return res;\n}\n\nconsole.log(findPath(data, \"122\")); // [\"1\", \"12\", \"122\"]\nconsole.log(findPath(data, \"111\")); // [\"1\", \"11\", \"111\"]\n```\n\n## 9. å…³äºå¼‚æ­¥çš„ä¸€äº›ç»†èŠ‚ç‚¹\n\n- `then(console.log(1))` ï¼Œ è¡¨è¾¾å¼ä¼šåŒæ­¥æ‰§è¡Œ\n- å¦‚æœæ²¡æœ‰ `resolve`ï¼Œæ°¸è¿œä¸ä¼šå¾€ä¸‹æ‰§è¡Œ\n- æ³¨æ„å±‚çº§\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-22.png)\n\nå¦‚ä¸‹å›¾ï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-23.png)\n\n- ä¸Šé¢ `7` ä¸æ‰“å°ï¼Œæ˜¯å› ä¸ºè¿™ä¸ªå‚æ•°å¤šä½™\n- `8` ä¸æ‰“å°ï¼Œæ˜¯å› ä¸ºå·²ç»åœ¨ä¸Šé¢ `catch` äº† \n\n## 10. Promise çš„ then æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241028-24.png)\n\n## 11. promise é‡Œ `return 2` ç›¸ç­‰äº `resolve(2)`\n\n```javascript hl:4\nPromise.resolve(1)\n  .then((res) => {\n    console.log(res);\n    //  è¿”å› return 2 å®é™…ä¸Šæ˜¯åŒ…è£…æˆäº† resolve(2)\n    return 2;\n  })\n  .catch((err) => {\n    return 3;\n  })\n  .then((res) => {\n    console.log(res);\n  });\n\n```\n\n## 12. å†çœ‹ä¸€æ®µä»£ç \n\n```javascript hl:4,26\nconsole.log(1);\nsetTimeout(() => {\n  console.log(5);\n  // process.nextTick å¯æ˜¯ä¼˜å…ˆçº§é«˜äº promise çš„ then çš„\n  process.nextTick(() => {\n    console.log(7);\n  });\n  new Promise((resolve) => {\n    console.log(6);\n    resolve();\n  }).then(() => {\n    console.log(8);\n  });\n});\nnew Promise((resolve) => {\n  console.log(2);\n  resolve();\n}).then(() => {\n  console.log(3);\n});\n\nprocess.nextTick(() => {\n  console.log(4);\n});\n\n// è¿™é‡Œæœ‰ä¸¤ä¸ªsettimeout ï¼Œå®Œå…¨åˆ†å¼€å§ï¼Œè™½ç„¶æ—¶é—´éƒ½æ˜¯ 0ms\nsetTimeout(() => {\n  console.log(9);\n  // :::: nextTick å¯æ˜¯é«˜äº promise çš„\n  process.nextTick(() => {\n    console.log(11);\n  });\n  new Promise((resolve) => {\n    console.log(10);\n    resolve();\n  }).then(() => {\n    console.log(12);\n  });\n});\n\n```\n\n## 13. è‡ªå·±å®ç° Promiseï¼šsetTimeout æ¨¡æ‹Ÿ\n\n```javascript hl:5,34,56\nconst PENDING = \"pending\";\nconst FULFILLED = \"fulfilled\";\nconst REJECTED = \"rejected\";\n\n// ä¼ å…¥å‚æ•°ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯resolveå’Œreject\nfunction MyPromise(executor) {\n  this.state = PENDING;\n  this.value = null;\n  this.reason = null;\n  this.onFulfilledCallbacks = [];\n  this.onRejectedCallbacks = [];\n\n  const resolve = (value) => {\n    if (this.state === PENDING) {\n      this.state = FULFILLED;\n      this.value = value;\n      this.onFulfilledCallbacks.forEach((fun) => {\n        fun();\n      });\n    }\n  };\n\n  const reject = (reason) => {\n    if (this.state === PENDING) {\n      this.state = REJECTED;\n      this.reason = reason;\n      this.onRejectedCallbacks.forEach((fun) => {\n        fun();\n      });\n    }\n  };\n\n  try {\n    // æ‰§è¡Œä¼ å…¥çš„å‡½æ•°, ä¼ å…¥ä¸Šé¢å®šä¹‰å¥½çš„resolveå’Œreject\n    executor(resolve, reject);\n  } catch (reason) {\n    reject(reason);\n  }\n}\n\n// thenæ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼ŒonFulfilledå’ŒonRejectedï¼Œåˆ†åˆ«æ˜¯æˆåŠŸå’Œå¤±è´¥çš„å›è°ƒ\nMyPromise.prototype.then = function (onFulfilled, onRejected) {\n  // å¦‚æœonFulfilledä¸æ˜¯å‡½æ•°ï¼Œå°±è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šæŠŠå€¼ä¼ é€’ä¸‹å»\n  if (typeof onFulfilled != \"function\") {\n    onFulfilled = function (value) {\n      return value;\n    };\n  }\n  // å¦‚æœonRejectedä¸æ˜¯å‡½æ•°ï¼Œå°±è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šæŠŠé”™è¯¯ä¼ é€’ä¸‹å»\n  if (typeof onRejected != \"function\") {\n    onRejected = function (reason) {\n      throw reason;\n    };\n  }\n\n  // è¿”å›ä¸€ä¸ªæ–°çš„Promise, ç”¨äºé“¾å¼è°ƒç”¨\n  const promise2 = new MyPromise((resolve, reject) => {\n    switch (this.state) {\n      case FULFILLED:\n        // ä½¿ç”¨setTimeoutæ¥æ¨¡æ‹Ÿå¼‚æ­¥\n        setTimeout(() => {\n          try {\n            const x = onFulfilled(this.value);\n            resolve(x);\n          } catch (reason) {\n            reject(reason);\n          }\n        }, 0);\n        break;\n      case REJECTED:\n        setTimeout(() => {\n          try {\n            const x = onRejected(this.reason);\n            resolve(x);\n          } catch (reason) {\n            reject(reason);\n          }\n        }, 0);\n        break;\n      case PENDING:\n        // å¦‚æœçŠ¶æ€æ˜¯PENDINGï¼Œè¯´æ˜æ˜¯å¼‚æ­¥æ“ä½œï¼Œå°†å›è°ƒå‡½æ•°å­˜èµ·æ¥\n        this.onFulfilledCallbacks.push(() => {\n          setTimeout(() => {\n            try {\n              const x = onFulfilled(this.value);\n              resolve(x);\n            } catch (reason) {\n              reject(reason);\n            }\n          }, 0);\n        });\n        // å¦‚æœçŠ¶æ€æ˜¯PENDINGï¼Œè¯´æ˜æ˜¯å¼‚æ­¥æ“ä½œï¼Œå°†å›è°ƒå‡½æ•°å­˜èµ·æ¥\n        this.onRejectedCallbacks.push(() => {\n          setTimeout(() => {\n            try {\n              const x = onRejected(this.reason);\n              resolve(x);\n            } catch (reason) {\n              reject(reason);\n            }\n          }, 0);\n        });\n        break;\n    }\n  });\n  return promise2;\n};\n\n// catchæ–¹æ³•æ˜¯thenæ–¹æ³•çš„è¯­æ³•ç³–ï¼Œåªä¼ å…¥onRejected\nMyPromise.prototype.catch = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\n// finallyæ–¹æ³•æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œï¼Œä¸ä¼šæ”¹å˜Promiseçš„çŠ¶æ€\nMyPromise.prototype.finally = function (fn) {\n  return this.then(\n    (value) => {\n      fn();\n      return value;\n    },\n    (reason) => {\n      fn();\n      throw reason;\n    },\n  );\n};\n\n// resolveæ–¹æ³•è¿”å›ä¸€ä¸ªæˆåŠŸçš„Promise\nMyPromise.resolve = function (value) {\n  return new MyPromise((resolve, reject) => {\n    resolve(value);\n  });\n};\n\n// rejectæ–¹æ³•è¿”å›ä¸€ä¸ªå¤±è´¥çš„Promise\nMyPromise.reject = function (reason) {\n  return new MyPromise((resolve, reject) => {\n    reject(reason);\n  });\n};\n\n// allæ–¹æ³•æ¥å—ä¸€ä¸ªPromiseæ•°ç»„ï¼Œåªæœ‰æ‰€æœ‰çš„Promiseéƒ½æˆåŠŸæ‰ä¼šè¿”å›æˆåŠŸï¼Œå¦åˆ™è¿”å›å¤±è´¥\nMyPromise.all = function (promises) {\n  return new Promise((resolve, reject) => {\n    if (promises.length === 0) {\n      resolve([]);\n    } else {\n      let result = [];\n      let index = 0;\n      for (let i = 0; i < promises.length; i++) {\n        promises[i].then(\n          (data) => {\n            result[i] = data;\n            if (++index === promises.length) {\n              resolve(result);\n            }\n          },\n          (err) => {\n            reject(err);\n            return;\n          },\n        );\n      }\n    }\n  });\n};\n\n// raceæ–¹æ³•æ¥å—ä¸€ä¸ªPromiseæ•°ç»„ï¼Œåªè¦æœ‰ä¸€ä¸ªPromiseæˆåŠŸå°±è¿”å›æˆåŠŸï¼Œå¦åˆ™è¿”å›å¤±è´¥\nMyPromise.race = function (promises) {\n  return new Promise((resolve, reject) => {\n    if (promises.length === 0) {\n      resolve();\n    } else {\n      let index = 0;\n      for (let i = 0; i < promises.length; i++) {\n        promises[i].then(\n          (data) => {\n            resolve(data);\n          },\n          (err) => {\n            reject(err);\n            return;\n          },\n        );\n      }\n    }\n  });\n};\n\n```\n\n## 14. è‡ªå·±å®ç° Promise ï¼š class\n\næ ¸å¿ƒç‰¹æ€§ï¼š\n1. ä¸‰ç§çŠ¶æ€ï¼ˆPENDINGã€FULFILLEDã€REJECTEDï¼‰\n2. çŠ¶æ€åªèƒ½ç”± PENDING è½¬å˜ä¸º FULFILLED æˆ– REJECTEDï¼Œä¸”çŠ¶æ€è½¬å˜ä¸å¯é€†\n3. then æ–¹æ³•æ”¯æŒé“¾å¼è°ƒç”¨\n4. ä½¿ç”¨ `queueMicrotask` ç¡®ä¿å›è°ƒåœ¨å¾®ä»»åŠ¡ä¸­æ‰§è¡Œ\n\n```javascript\nclass MyPromise {\n  static PENDING = 'pending';\n  static FULFILLED = 'fulfilled';\n  static REJECTED = 'rejected';\n\n  constructor(executor) {\n    // åˆå§‹çŠ¶æ€ä¸º pending\n    this.status = MyPromise.PENDING;\n    // å­˜å‚¨æˆåŠŸå€¼\n    this.value = undefined;\n    // å­˜å‚¨å¤±è´¥åŸå› \n    this.reason = undefined;\n    // å­˜å‚¨æˆåŠŸå›è°ƒå‡½æ•°\n    this.onFulfilledCallbacks = [];\n    // å­˜å‚¨å¤±è´¥å›è°ƒå‡½æ•°\n    this.onRejectedCallbacks = [];\n\n    // resolve å‡½æ•°\n    const resolve = (value) => {\n      if (this.status === MyPromise.PENDING) {\n        this.status = MyPromise.FULFILLED;\n        this.value = value;\n        // æ‰§è¡Œæ‰€æœ‰æˆåŠŸå›è°ƒ\n        this.onFulfilledCallbacks.forEach(fn => fn());\n      }\n    };\n\n    // reject å‡½æ•°\n    const reject = (reason) => {\n      if (this.status === MyPromise.PENDING) {\n        this.status = MyPromise.REJECTED;\n        this.reason = reason;\n        // æ‰§è¡Œæ‰€æœ‰å¤±è´¥å›è°ƒ\n        this.onRejectedCallbacks.forEach(fn => fn());\n      }\n    };\n\n    try {\n      // ç«‹å³æ‰§è¡Œexecutor\n      executor(resolve, reject);\n    } catch (error) {\n      // å‘ç”Ÿå¼‚å¸¸æ—¶æ‰§è¡Œreject\n      reject(error);\n    }\n  }\n\n  then(onFulfilled, onRejected) {\n    // å‚æ•°æ ¡éªŒï¼Œç¡®ä¿ä¸€å®šæ˜¯å‡½æ•°\n    onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : value => value;\n    onRejected = typeof onRejected === 'function' ? onRejected : reason => { throw reason };\n\n    // è¿”å›æ–°çš„Promiseä»¥å®ç°é“¾å¼è°ƒç”¨\n    const promise2 = new MyPromise((resolve, reject) => {\n      if (this.status === MyPromise.FULFILLED) {\n        // åˆ›å»ºå¾®ä»»åŠ¡\n        queueMicrotask(() => {\n          try {\n            const x = onFulfilled(this.value);\n            resolve(x);\n          } catch (error) {\n            reject(error);\n          }\n        });\n      }\n\n      if (this.status === MyPromise.REJECTED) {\n        queueMicrotask(() => {\n          try {\n            const x = onRejected(this.reason);\n            resolve(x);\n          } catch (error) {\n            reject(error);\n          }\n        });\n      }\n\n      if (this.status === MyPromise.PENDING) {\n        // å¦‚æœæ˜¯pendingçŠ¶æ€ï¼Œå°†å›è°ƒå­˜å‚¨èµ·æ¥\n        this.onFulfilledCallbacks.push(() => {\n          queueMicrotask(() => {\n            try {\n              const x = onFulfilled(this.value);\n              resolve(x);\n            } catch (error) {\n              reject(error);\n            }\n          });\n        });\n\n        this.onRejectedCallbacks.push(() => {\n          queueMicrotask(() => {\n            try {\n              const x = onRejected(this.reason);\n              resolve(x);\n            } catch (error) {\n              reject(error);\n            }\n          });\n        });\n      }\n    });\n\n    return promise2;\n  }\n}\n\n```\n\n### 14.1. å¾…å®Œå–„\n\n1. å®ç° Promise çš„ resolve å’Œ reject é™æ€æ–¹æ³•\n2. å®ç° catch æ–¹æ³•\n3. å®ç° finally æ–¹æ³•\n4. å®ç° allã€raceã€allSettled ç­‰é™æ€æ–¹æ³•\n\t- Promise.allSettled() æ‰€æœ‰å¼‚æ­¥æ“ä½œéƒ½å®Œæˆï¼Œè€Œä¸ç®¡æˆåŠŸæˆ–å¤±è´¥ï¼Œä¸»è¦ç”¨äºç§»é™¤ `loading` æ•ˆæœ\n5. å®Œå–„ Promise è§£å†³è¿‡ç¨‹ï¼ˆPromise Resolution Procedureï¼‰\n6. å¤„ç† thenable å¯¹è±¡\n\n## 15. åŒ…è£…è¯·æ±‚å›¾ç‰‡ä¸º Promise\n\n```javascript\nfunction loadImageAsync(url) {\n  return new Promise(function (resolve, reject) {\n    const image = new Image();\n\n    image.onload = function () {\n      resolve(image);\n    };\n\n    image.onerror = function () {\n      reject(new Error(\"Could not load image at \" + url));\n    };\n\n    image.src = url;\n  });\n}\n\nconst preloadImage = function (url) {\n  return new Promise(function (resolve, reject) {\n    const image = new Image();\n    image.onload = resolve;\n    image.onerror = reject;\n    image.src = url;\n  });\n};\n\n```\n\n## 16. åŒ…è£… XHR ä¸º Promise\n\n```javascript\nconst getJSON = function (url) {\n  const promise = new Promise(function (resolve, reject) {\n    const handler = function () {\n      if (this.readyState !== 4) {\n        return;\n      }\n      if (this.status === 200) {\n        resolve(this.response);\n      } else {\n        reject(new Error(this.statusText));\n      }\n    };\n    const client = new XMLHttpRequest();\n    client.open(\"GET\", url);\n    client.onreadystatechange = handler;\n    client.responseType = \"json\";\n    client.setRequestHeader(\"Accept\", \"application/json\");\n    client.send();\n  });\n\n  return promise;\n};\n\ngetJSON(\"/posts.json\").then(\n  function (json) {\n    console.log(\"Contents: \" + json);\n  },\n  function (error) {\n    console.error(\"å‡ºé”™äº†\", error);\n  },\n);\n\n```\n\n","0f16e63d7fbc53dcb8b0c58293099f11":"\n# å¼‚æ­¥ç¼–ç¨‹\n\n`#å‰ç«¯é¢è¯•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. setInterval çš„ç¼ºé™· \n\n- å®šæ—¶å™¨æŒ‡å®šçš„æ—¶é—´é—´éš”ï¼Œè¡¨ç¤ºçš„æ˜¯**ä½•æ—¶å°†å®šæ—¶å™¨çš„ä»£ç æ·»åŠ åˆ°é˜Ÿåˆ—ï¼Œè€Œä¸æ˜¯ä½•æ—¶æ‰§è¡Œä»£ç **ã€‚ æ‰€ä»¥çœŸæ­£ä½•æ—¶æ‰§è¡Œä»£ç çš„æ—¶é—´æ˜¯ä¸èƒ½ä¿è¯çš„ï¼Œå–å†³äºä½•æ—¶è¢«ä¸»çº¿ç¨‹çš„äº‹ä»¶å¾ªç¯å–åˆ°ï¼Œå¹¶æ‰§è¡Œ\n- ç»¼ä¸Šæ‰€è¿°ï¼Œ`setInterval` æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼š\n\t- ä½¿ç”¨ `setInterval` æ—¶ï¼ŒæŸäº›é—´éš”ä¼šè¢«è·³è¿‡ï¼›\n\t- å¯èƒ½`å¤šä¸ªå®šæ—¶å™¨`ä¼šè¿ç»­æ‰§è¡Œï¼›\n- å¯ä»¥è¿™ä¹ˆç†è§£ï¼š\n\t- æ¯ä¸ª `setTimeout` äº§ç”Ÿçš„ä»»åŠ¡ä¼šç›´æ¥ `push` åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼›\n\t- è€Œ `setInterval` åœ¨æ¯æ¬¡æŠŠä»»åŠ¡ `push` åˆ°ä»»åŠ¡é˜Ÿåˆ—å‰ï¼Œéƒ½è¦è¿›**è¡Œä¸€ä¸‹åˆ¤æ–­**(çœ‹ä¸Šæ¬¡çš„ä»»åŠ¡æ˜¯å¦ä»åœ¨é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœæœ‰åˆ™ä¸æ·»åŠ ï¼Œæ²¡æœ‰åˆ™æ·»åŠ )\n\t\t- `setInterval(fn(), N);` // ä¸Šé¢è¿™å¥ä»£ç çš„æ„æ€å…¶å®æ˜¯`fn()`å°†ä¼šåœ¨ `N ç§’ä¹‹å`è¢«æ¨å…¥ä»»åŠ¡é˜Ÿåˆ—\n\n### 1.1. ä½¿ç”¨ setTimeout å®ç° setInterval\n\n```javascript\nfunction mySetInterval(fn, timeout) {\n  // :::: å…³é”®ï¼Œæ ‡è¯†æ˜¯å¦ç»§ç»­,å¹¶è¿”å›\n  let timer = {\n    flag: true,\n  };\n  // :::: ä¸¤æ¬¡ settimeoutï¼Œéœ€è¦é—­åŒ…å®šä¹‰ä¸€ä¸ªå‡½æ•°\n  function func() {\n    if (timer.flag) {\n      fn();\n      setTimeout(func, timeout);\n    }\n  }\n  setTimeout(func, timeout);\n  // è¿”å› timerï¼Œæ–¹ä¾¿å¤–éƒ¨æ§åˆ¶\n  return timer;\n}\n\n// æµ‹è¯•\nconst timer = mySetInterval(() => {\n  console.log(\"log 1\");\n}, 1000);\n\n// 5såï¼Œåœæ­¢å®šæ—¶å™¨\nsetTimeout(() => {\n  timer.flag = false;\n}, 5000);\n```\n\n## 2. å•æ ¸ã€å¤šæ ¸ã€è¿›ç¨‹ã€çº¿ç¨‹ã€äº’æ–¥é”ã€ä¿¡å·é‡\n\n### 2.1. å•æ ¸ä¸å¤šæ ¸\n\næƒ³è±¡ä¸€ä¸ªå·¥å‚çš„**ç”Ÿäº§çº¿**ï¼š\n- å•æ ¸CPUï¼šå°±åƒä¸€æ¡ç”Ÿäº§çº¿**åªæœ‰ä¸€ä¸ªå·¥äºº**ã€‚è¿™ä¸ªå·¥äººéœ€è¦ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°å®Œæˆæ‰€æœ‰ä»»åŠ¡ã€‚\n- å¤šæ ¸CPUï¼šç›¸å½“äºä¸€æ¡ç”Ÿäº§çº¿ä¸Š**æœ‰å¤šä¸ªå·¥äºº**ã€‚æ¯ä¸ªå·¥äººï¼ˆæ ¸å¿ƒï¼‰å¯ä»¥åŒæ—¶å¤„ç†ä¸åŒçš„ä»»åŠ¡ï¼Œå¤§å¤§æé«˜äº†æ•´ä½“æ•ˆç‡ã€‚\n\n### 2.2. è¿›ç¨‹\n\næŠŠè¿›ç¨‹æƒ³è±¡æˆä¸€ä¸ªç‹¬ç«‹çš„çƒ¹é¥ªé¡¹ç›®ã€‚æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„\"å¨æˆ¿\"ï¼ˆå†…å­˜ç©ºé—´ï¼‰å’Œ\"é£Ÿæ\"ï¼ˆèµ„æºï¼‰ã€‚\n- æ¯”å¦‚ï¼ŒåŒæ—¶çƒ¤è›‹ç³•å’Œç…®æ±¤ï¼Œè¿™ä¸¤ä¸ªå°±å¯ä»¥çœ‹ä½œæ˜¯ä¸¤ä¸ªä¸åŒçš„è¿›ç¨‹ã€‚\n\n### 2.3. çº¿ç¨‹\n\nå¦‚æœè¿›ç¨‹æ˜¯ä¸€ä¸ªçƒ¹é¥ªé¡¹ç›®ï¼Œé‚£ä¹ˆçº¿ç¨‹å°±æ˜¯å®Œæˆè¿™ä¸ªé¡¹ç›®çš„**å…·ä½“æ­¥éª¤**ã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼Œå°±åƒçƒ¤è›‹ç³•è¿™ä¸ªè¿›ç¨‹å¯èƒ½åŒ…å«\"æ…æ‹Œé¢ç³Š\"ã€\"é¢„çƒ­çƒ¤ç®±\"ã€\"å€’å…¥æ¨¡å…·\"ç­‰å¤šä¸ªæ­¥éª¤ï¼ˆçº¿ç¨‹ï¼‰ã€‚è¿™äº›æ­¥éª¤å¯ä»¥ç”±ä¸€ä¸ªå¨å¸ˆè½®æµè¿›è¡Œï¼Œä¹Ÿå¯ä»¥ç”±å¤šä¸ªåŠ©æ‰‹åŒæ—¶è¿›è¡Œã€‚\n\n### 2.4. äº’æ–¥é”\n\næƒ³è±¡ä¸€æŠŠ**é’¥åŒ™**ï¼Œç”¨æ¥é”ä½ä¸€ä¸ªèµ„æºã€‚å½“ä¸€ä¸ªçº¿ç¨‹éœ€è¦ä½¿ç”¨è¿™ä¸ªèµ„æºæ—¶ï¼Œå®ƒå¿…é¡»å…ˆè·å¾—è¿™æŠŠé’¥åŒ™ã€‚ä½¿ç”¨å®Œåï¼Œå®ƒä¼šå½’è¿˜é’¥åŒ™ï¼Œè®©å…¶ä»–çº¿ç¨‹ä½¿ç”¨ã€‚è¿™å°±ä¿è¯äº†åœ¨ä»»ä½•æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è®¿é—®è¿™ä¸ªèµ„æºï¼Œé˜²æ­¢äº†èµ„æºçš„æ··ä¹±ä½¿ç”¨ã€‚\n\nä¾‹å¦‚ï¼Œåœ¨å¨æˆ¿é‡Œ**åªæœ‰ä¸€ä¸ªçƒ¤ç®±**ã€‚å½“ä¸€ä¸ªå¨å¸ˆåœ¨ä½¿ç”¨çƒ¤ç®±æ—¶ï¼Œä»–ä¼š\"é”ä½\"çƒ¤ç®±ï¼Œå…¶ä»–å¨å¸ˆå°±éœ€è¦ç­‰å¾…ï¼Œç›´åˆ°çƒ¤ç®±ç©ºé—²ã€‚\n\n### 2.5. ä¿¡å·é‡\n\nä¿¡å·é‡å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªç®¡ç†å‘˜ï¼Œæ§åˆ¶ç€å¯åŒæ—¶è®¿é—®æŸä¸ªèµ„æºçš„çº¿ç¨‹æ•°é‡ã€‚æƒ³è±¡ä¸€ä¸ª**åœè½¦åœº**ï¼Œä¿¡å·é‡å°±åƒæ˜¯è´Ÿè´£ç®¡ç†è½¦ä½çš„å·¥ä½œäººå‘˜ï¼š\n\n- å¦‚æœè¿˜æœ‰ç©ºä½ï¼ˆèµ„æºå¯ç”¨ï¼‰ï¼Œä»–ä¼šå…è®¸è½¦è¾†ï¼ˆçº¿ç¨‹ï¼‰è¿›å…¥ã€‚\n- å¦‚æœè½¦ä½å·²æ»¡ï¼ˆèµ„æºè€—å°½ï¼‰ï¼Œä»–ä¼šè¦æ±‚æ–°æ¥çš„è½¦è¾†ç­‰å¾…ã€‚\n- å½“æœ‰è½¦ç¦»å¼€æ—¶ï¼ˆèµ„æºè¢«é‡Šæ”¾ï¼‰ï¼Œä»–ä¼šå…è®¸ç­‰å¾…çš„è½¦è¾†è¿›å…¥ã€‚\n\nä¿¡å·é‡æ¯”äº’æ–¥é”æ›´çµæ´»ï¼Œå› ä¸ºå®ƒå¯ä»¥å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®èµ„æºï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªã€‚\n\n### 2.6. å¹¶å‘ä¸å¹¶è¡Œ\n\n- å¹¶å‘ï¼šåœ¨`å•æ ¸CPU`ä¸Šï¼Œé€šè¿‡å¿«é€Ÿåˆ‡æ¢ä¸åŒçš„ä»»åŠ¡ï¼Œç»™äººä¸€ç§\"åŒæ—¶\"è¿›è¡Œçš„**é”™è§‰**ã€‚å°±åƒä¸€ä¸ªå¨å¸ˆå¿«é€Ÿåœ°åœ¨çƒ¤è›‹ç³•å’Œç…®æ±¤ä¹‹é—´åˆ‡æ¢å·¥ä½œã€‚\n- å¹¶è¡Œï¼šåœ¨`å¤šæ ¸CPU`ä¸Šï¼Œä¸åŒçš„æ ¸å¿ƒå¯ä»¥çœŸæ­£åŒæ—¶æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚å°±åƒå¤šä¸ªå¨å¸ˆåœ¨åŒä¸€æ—¶é—´åˆ†åˆ«å¤„ç†ä¸åŒçš„èœå“ã€‚\n\n### 2.7. æ€»ç»“\n\næ“ä½œç³»ç»Ÿçš„è®¾è®¡ï¼Œå› æ­¤å¯ä»¥å½’ç»“ä¸ºä¸‰ç‚¹\n\nï¼ˆ1ï¼‰ä»¥`å¤šè¿›ç¨‹`å½¢å¼ï¼Œå…è®¸å¤šä¸ªä»»åŠ¡åŒæ—¶è¿è¡Œï¼›\nï¼ˆ2ï¼‰ä»¥`å¤šçº¿ç¨‹`å½¢å¼ï¼Œå…è®¸å•ä¸ªä»»åŠ¡åˆ†æˆä¸åŒçš„éƒ¨åˆ†è¿è¡Œï¼›\nï¼ˆ3ï¼‰**æä¾›**`åè°ƒæœºåˆ¶`\n- ä¸€æ–¹é¢é˜²æ­¢è¿›ç¨‹ä¹‹é—´å’Œçº¿ç¨‹ä¹‹é—´äº§ç”Ÿå†²çª\n- å¦ä¸€æ–¹é¢å…è®¸è¿›ç¨‹ä¹‹é—´å’Œçº¿ç¨‹ä¹‹é—´å…±äº«èµ„æº\n\n## 3. è¿›ç¨‹ä¸çº¿ç¨‹çš„ä¸»è¦åŒºåˆ«\n\n1. `è¿›ç¨‹`è¦åˆ†é…**ä¸€å¤§éƒ¨åˆ†çš„**`å†…å­˜`ï¼Œè€Œ`çº¿ç¨‹`åªéœ€è¦åˆ†é…`ä¸€éƒ¨åˆ†æ ˆ`å°±å¯ä»¥äº†.\n2. ä¸€ä¸ª `ç¨‹åº`è‡³å°‘æœ‰ä¸€ä¸ª`è¿›ç¨‹`, ä¸€ä¸ª`è¿›ç¨‹`è‡³å°‘æœ‰ä¸€ä¸ª`çº¿ç¨‹`.\n3. `è¿›ç¨‹`æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œ`çº¿ç¨‹`æ˜¯ç¨‹åº`æ‰§è¡Œçš„æœ€å°å•ä½`ã€‚\n4. ä¸€ä¸ª`çº¿ç¨‹`å¯ä»¥åˆ›å»ºå’Œæ’¤é”€å¦ä¸€ä¸ª`çº¿ç¨‹`ï¼ŒåŒä¸€ä¸ª`è¿›ç¨‹`ä¸­çš„å¤šä¸ª`çº¿ç¨‹`ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œ.\n\n## 4. ç°ä»£ Chrome æµè§ˆå™¨æ¶æ„è®¾è®¡\n### 4.1. Chrome å¤šè¿›ç¨‹æ¶æ„ï¼šæµè§ˆå™¨çš„ 6 ä¸ªä¸»è¦è¿›ç¨‹\n\n1. æµè§ˆå™¨ä¸»è¿›ç¨‹/ UI è¿›ç¨‹ï¼ˆBrowser Processï¼‰ï¼šè´Ÿè´£ç®¡ç†ç”¨æˆ·ç•Œé¢ã€åœ°å€æ ã€ä¹¦ç­¾æ ç­‰ï¼Œä»¥åŠåè°ƒå…¶ä»–è¿›ç¨‹\n2. æ¸²æŸ“è¿›ç¨‹ï¼ˆRenderer Processï¼‰ï¼šè´Ÿè´£å°†HTMLã€CSSå’ŒJavaScriptè½¬æ¢ä¸ºç”¨æˆ·å¯ä»¥äº¤äº’çš„ç½‘é¡µ\n\t- æ¸²æŸ“è¿›ç¨‹è´Ÿè´£ç«™ç‚¹çš„æ¸²æŸ“ï¼Œå…¶ä¸­ä¹ŸåŒ…æ‹¬ `JavaScript ä»£ç çš„è¿è¡Œ`ï¼Œ`web worker` çš„ç®¡ç†ç­‰ã€‚\n\t- æ ¸å¿ƒä»»åŠ¡æ˜¯å°† ` HTMLã€CSS å’Œ JavaScript` è½¬æ¢ä¸ºç”¨æˆ·å¯ä»¥ä¸ä¹‹äº¤äº’çš„ç½‘é¡µï¼Œæ’ç‰ˆå¼•æ“Blinkå’ŒJavaScriptå¼•æ“V8éƒ½æ˜¯è¿è¡Œåœ¨è¯¥è¿›ç¨‹\n3. æ’ä»¶è¿›ç¨‹ï¼šè¿è¡Œç½‘é¡µæ’ä»¶ï¼Œå¦‚Flash\n4. GPU è¿›ç¨‹ï¼šå¤„ç†GPUç›¸å…³çš„ä»»åŠ¡ï¼ŒåŠ é€Ÿç½‘é¡µæ¸²æŸ“\n5. ç½‘ç»œè¿›ç¨‹ï¼ˆNetwork Processï¼‰ï¼šå¤„ç†ç½‘ç»œè¯·æ±‚\n\t1. Chromeæœ‰ä¸ªæœºåˆ¶ï¼Œ**åŒä¸€ä¸ªåŸŸååŒæ—¶**`æœ€å¤šåªèƒ½å»ºç«‹6ä¸ªTCPè¿æ¥`ï¼Œå¦‚æœåœ¨åŒä¸€ä¸ªåŸŸåä¸‹åŒæ—¶æœ‰10ä¸ªè¯·æ±‚å‘ç”Ÿï¼Œé‚£ä¹ˆå…¶ä¸­ 4ä¸ªè¯·æ±‚ä¼šè¿›å…¥æ’é˜Ÿç­‰å¾…çŠ¶æ€ï¼Œç›´è‡³è¿›è¡Œä¸­çš„è¯·æ±‚å®Œæˆ\n6. æ‰©å±•è¿›ç¨‹ï¼ˆExtension Processï¼‰ï¼šè¿è¡Œæµè§ˆå™¨æ‰©å±•\n\n### 4.2. åœ¨æ¯ä¸ªæ¸²æŸ“è¿›ç¨‹ä¸­ï¼ŒåˆåŒ…å«å¤šä¸ªçº¿ç¨‹\n\n- a) ä¸»çº¿ç¨‹ï¼šæ‰§è¡Œ JavaScriptï¼Œå¤„ç† DOMã€CSSç­‰\n\t- JavaScriptä¸»è¦åœ¨æ¸²æŸ“è¿›ç¨‹çš„ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œæ‰€ä»¥é•¿æ—¶é—´è¿è¡Œçš„JavaScriptä¼šé˜»å¡é¡µé¢æ¸²æŸ“\n- b) å·¥ä½œçº¿ç¨‹ï¼ˆWorker Threadï¼‰ï¼šæ‰§è¡ŒWeb Workeræˆ–Service Workerã€‚ \n- c) åˆæˆçº¿ç¨‹ï¼ˆCompositor Threadï¼‰ï¼šè´Ÿè´£å°†é¡µé¢å„ä¸ªéƒ¨åˆ†åˆæˆä¸ºæœ€ç»ˆæ˜¾ç¤ºçš„å›¾åƒã€‚ \n- d) å…‰æ …çº¿ç¨‹ï¼ˆRaster Threadï¼‰ï¼šå°†é¡µé¢å…ƒç´ è½¬æ¢ä¸ºä½å›¾\n\n### 4.3. Chrome çš„è¿›ç¨‹æ¨¡å‹\n\nChromeæœ‰å››ç§è¿›ç¨‹æ¨¡å‹ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯Process-per-site-instanceæ¨¡å‹\n\n- åŒä¸€ç«™ç‚¹ï¼ˆç›¸åŒåè®®å’ŒåŸŸåï¼‰çš„å¤šä¸ªæ ‡ç­¾é¡µé€šå¸¸ä¼š**å…±ç”¨ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹**\n- ä¸åŒç«™ç‚¹çš„æ ‡ç­¾é¡µä¼šä½¿ç”¨**ä¸åŒçš„æ¸²æŸ“è¿›ç¨‹**\n\nå…¶ä»–çš„è¿˜æœ‰\n- Process-per-site\n- Process-per-tab\n- Single Process\n\nChromeä¼šæ ¹æ®ç³»ç»Ÿçš„èµ„æºæƒ…å†µ**åŠ¨æ€è°ƒæ•´**è¿›ç¨‹çš„åˆ†é…ï¼š\n- åœ¨èµ„æºå……è¶³çš„ç³»ç»Ÿä¸Šï¼Œå®ƒå¯èƒ½ä¼šä¸ºæ¯ä¸ªæ ‡ç­¾é¡µåˆ†é…ç‹¬ç«‹çš„è¿›ç¨‹ã€‚\n- åœ¨èµ„æºå—é™çš„ç³»ç»Ÿä¸Šï¼Œå®ƒå¯èƒ½ä¼šåˆå¹¶ä¸€äº›è¿›ç¨‹ä»¥èŠ‚çœèµ„æº\n\nChromeå…è®¸ç”¨æˆ·æˆ–ç®¡ç†å‘˜é€šè¿‡**å‘½ä»¤è¡Œå‚æ•°**æ¥é€‰æ‹©ä¸åŒçš„è¿›ç¨‹æ¨¡å‹\n\n### 4.4. åˆ—ä¸¾ Chrome å¸¸è§çš„çº¿ç¨‹\n\nChrome é‡‡ç”¨**å¤šè¿›ç¨‹å¤šçº¿ç¨‹æ¶æ„**ï¼Œæ¯ä¸ªè¿›ç¨‹å†…éƒ¨éƒ½æœ‰å¤šä¸ªçº¿ç¨‹ååŒå·¥ä½œã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸»è¦çš„çº¿ç¨‹ï¼š\n\n1. ä¸»çº¿ç¨‹ï¼ˆMain threadï¼‰ï¼š\n   - è´Ÿè´£å¤„ç†å¤§éƒ¨åˆ†çš„æ¸²æŸ“å·¥ä½œï¼ŒåŒ…æ‹¬ DOM æ ‘çš„æ„å»ºã€æ ·å¼è®¡ç®—ã€å¸ƒå±€è®¡ç®—ç­‰ã€‚\n   - æ‰§è¡Œ JavaScript ä»£ç ã€‚\n   - å¤„ç†ç”¨æˆ·äº¤äº’äº‹ä»¶ã€‚\n2. åˆæˆçº¿ç¨‹ï¼ˆCompositor threadï¼‰ï¼š\n   - è´Ÿè´£å°†é¡µé¢çš„å„ä¸ªéƒ¨åˆ†åˆæˆä¸ºæœ€ç»ˆæ˜¾ç¤ºçš„å›¾åƒã€‚\n   - å¤„ç†ä¸€äº›ä¸æ»šåŠ¨ç›¸å…³çš„æ“ä½œï¼Œæé«˜é¡µé¢æ»šåŠ¨çš„æµç•…åº¦ã€‚\n3. æ¸²æŸ“çº¿ç¨‹ï¼ˆRenderer threadï¼‰ï¼š\n   - åœ¨ Renderer è¿›ç¨‹ä¸­ï¼Œè´Ÿè´£é¡µé¢æ¸²æŸ“çš„ä¸»è¦å·¥ä½œã€‚\n   - ä¸ä¸»çº¿ç¨‹å¯†åˆ‡åä½œï¼Œå¤„ç†é¡µé¢çš„å¯è§†åŒ–å‘ˆç°ã€‚\n4. IO çº¿ç¨‹ï¼š\n   - è´Ÿè´£å¤„ç†æ–‡ä»¶ç³»ç»Ÿæ“ä½œå’Œç½‘ç»œè¯·æ±‚ã€‚\n   - åœ¨æµè§ˆå™¨ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¸­éƒ½å­˜åœ¨ IO çº¿ç¨‹ã€‚\n5. å·¥ä½œçº¿ç¨‹ï¼ˆWorker threadsï¼‰ï¼š\n   - ç”¨äºæ‰§è¡Œ Web Workersï¼Œå…è®¸åœ¨åå°è¿è¡Œ JavaScript ä»£ç è€Œä¸å½±å“ä¸»çº¿ç¨‹ã€‚\n6. å…‰æ …åŒ–çº¿ç¨‹ï¼ˆRaster threadsï¼‰ï¼š\n   - è´Ÿè´£å°†é¡µé¢çš„å„ä¸ªéƒ¨åˆ†è½¬æ¢ä¸ºä½å›¾ã€‚\n   - é€šå¸¸æœ‰å¤šä¸ªå…‰æ …åŒ–çº¿ç¨‹å¹¶è¡Œå·¥ä½œï¼Œä»¥æé«˜æ€§èƒ½ã€‚\n7. GPU çº¿ç¨‹ï¼š\n   - åœ¨ GPU è¿›ç¨‹ä¸­ï¼Œè´Ÿè´£ä¸ GPU ç¡¬ä»¶äº¤äº’ï¼ŒåŠ é€Ÿå›¾å½¢æ¸²æŸ“ã€‚\n8. ç½‘ç»œçº¿ç¨‹ï¼š\n   - åœ¨ç½‘ç»œè¿›ç¨‹ä¸­ï¼Œå¤„ç†æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚å’Œå“åº”ã€‚\n      - æ¯”å¦‚`Ajax`è¯·æ±‚ã€Fetchç­‰éƒ½æ˜¯\n9. å®šæ—¶å™¨çº¿ç¨‹ï¼š\n   - è´Ÿè´£å¤„ç† setTimeout å’Œ setInterval ç­‰è®¡æ—¶å™¨åŠŸèƒ½ã€‚\n   - è®°ä½ï¼Œæµè§ˆå™¨çš„`setInterval`å’Œ`setTimeout`ä¸æ˜¯jså¼•æ“é‡Œçš„ï¼Œè€Œ`æ˜¯æµè§ˆå™¨è‡ªå·±å¼€äº†ä¸ªçº¿ç¨‹æ¥å¤„ç†`\n10. äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼š\n    - ç®¡ç†äº‹ä»¶é˜Ÿåˆ—ï¼Œå½“äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œå°†å…¶æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ç­‰å¾…ä¸»çº¿ç¨‹å¤„ç†ã€‚\n        - JSå¼•æ“è‡ªå·±å¿™ä¸è¿‡æ¥ï¼Œéœ€è¦æµè§ˆå™¨å¦å¼€çº¿ç¨‹ååŠ©\n11. åƒåœ¾å›æ”¶çº¿ç¨‹ï¼š\n    - è´Ÿè´£ JavaScript çš„å†…å­˜åƒåœ¾å›æ”¶ï¼Œä»¥é‡Šæ”¾ä¸å†ä½¿ç”¨çš„å†…å­˜ã€‚\n12. æ’ä»¶çº¿ç¨‹ï¼š\n    - ç”¨äºè¿è¡Œæµè§ˆå™¨æ’ä»¶ï¼Œæ¯ä¸ªæ’ä»¶å¯èƒ½åœ¨è‡ªå·±çš„çº¿ç¨‹ä¸­è¿è¡Œã€‚\n13. è°ƒè¯•çº¿ç¨‹ï¼š\n    - ç”¨äºæ”¯æŒå¼€å‘è€…å·¥å…·å’Œæ—¥å¿—è®°å½•ï¼Œå¸®åŠ©è¯Šæ–­é—®é¢˜å’Œæ€§èƒ½åˆ†æã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶ Chrome æ˜¯å¤šçº¿ç¨‹çš„ï¼Œä½† JavaScript åœ¨æµè§ˆå™¨ä¸­ä»ç„¶æ˜¯**å•çº¿ç¨‹**æ‰§è¡Œçš„ï¼ˆé™¤éä½¿ç”¨ Web Workersï¼‰ã€‚è¿™ç§è®¾è®¡æ˜¯ä¸ºäº†ç®€åŒ–ç¼–ç¨‹æ¨¡å‹ï¼Œé¿å…å¤æ‚çš„çº¿ç¨‹åŒæ­¥é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿä¸ JavaScript çš„ä¸»è¦ç”¨é€”â€”â€”å¤„ç†ç”¨æˆ·äº¤äº’å’Œæ“ä½œ DOMâ€”â€”ç›¸ç¬¦åˆã€‚\n\n### 4.5. JavaScript å¼•æ“ä¸ Chrome å…¶ä»–çº¿ç¨‹çš„å…³ç³»\n\næ€»çš„æ¥è¯´ï¼ŒJavaScript å¼•æ“ï¼ˆV8ï¼‰æ˜¯ Chrome æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ã€‚å®ƒ**åœ¨ä¸“é—¨çš„çº¿ç¨‹ä¸Šè¿è¡Œï¼Œè´Ÿè´£æ‰§è¡Œ JavaScript ä»£ç ï¼Œä½†åŒæ—¶ä¹Ÿä¸æµè§ˆå™¨çš„å…¶ä»–éƒ¨åˆ†ï¼ˆå¦‚ GUI æ¸²æŸ“ã€äº‹ä»¶å¤„ç†ã€ç½‘ç»œè¯·æ±‚ç­‰ï¼‰ç´§å¯†åä½œ**ã€‚è¿™ç§è®¾è®¡æ—¢ä¿è¯äº† JavaScript çš„æ‰§è¡Œæ•ˆç‡ï¼Œåˆç»´æŠ¤äº†æµè§ˆå™¨çš„æ•´ä½“æ€§èƒ½å’Œå®‰å…¨æ€§ã€‚ç†è§£ JavaScript å¼•æ“ä¸æµè§ˆå™¨è¿›ç¨‹çº¿ç¨‹æ¶æ„çš„å…³ç³»ï¼Œå¯¹äºå¼€å‘é«˜æ€§èƒ½çš„ Web åº”ç”¨å’Œç†è§£æµè§ˆå™¨çš„å·¥ä½œåŸç†éƒ½éå¸¸é‡è¦ã€‚\n\n1. JavaScript å¼•æ“ä¸æ¸²æŸ“è¿›ç¨‹ï¼š\n   - JavaScript å¼•æ“ï¼ˆV8ï¼‰è¿è¡Œåœ¨æµè§ˆå™¨çš„æ¸²æŸ“è¿›ç¨‹ï¼ˆRenderer Processï¼‰ä¸­ã€‚\n   - æ¸²æŸ“è¿›ç¨‹æ˜¯è´Ÿè´£å°† HTMLã€CSS å’Œ JavaScript è½¬æ¢ä¸ºç”¨æˆ·å¯ä»¥ä¸ä¹‹äº¤äº’çš„ç½‘é¡µçš„æ ¸å¿ƒè¿›ç¨‹ã€‚\n   - åœ¨åŒä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ä¸­ï¼Œé™¤äº† JavaScript å¼•æ“ï¼Œè¿˜åŒ…æ‹¬æ’ç‰ˆå¼•æ“ï¼ˆå¦‚ Blinkï¼‰ã€‚\n2. JavaScript å¼•æ“çº¿ç¨‹ï¼š\n   - JavaScript å¼•æ“åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­è¿è¡Œåœ¨ä¸€ä¸ªä¸“é—¨çš„çº¿ç¨‹ä¸Šï¼Œé€šå¸¸è¢«ç§°ä¸º JS å¼•æ“çº¿ç¨‹æˆ–ä¸»çº¿ç¨‹ã€‚\n   - è¿™ä¸ªçº¿ç¨‹è´Ÿè´£è§£æå’Œæ‰§è¡Œ JavaScript ä»£ç ã€‚\n3. ä¸ **GUI æ¸²æŸ“çº¿ç¨‹**çš„å…³ç³»ï¼š\n   - JavaScript å¼•æ“çº¿ç¨‹å’Œ GUI æ¸²æŸ“çº¿ç¨‹æ˜¯**äº’æ–¥**çš„ã€‚è¿™æ„å‘³ç€å½“ JS å¼•æ“æ‰§è¡Œæ—¶ï¼ŒGUI æ¸²æŸ“çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ã€‚\n   - è¿™ç§è®¾è®¡æ˜¯ä¸ºäº†é˜²æ­¢æ¸²æŸ“å‡ºç°ä¸å¯é¢„æœŸçš„ç»“æœã€‚\n   - å½“ JavaScript æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œå¯èƒ½ä¼šå¯¼è‡´é¡µé¢æ¸²æŸ“çš„å¡é¡¿ã€‚\n4. äº‹ä»¶å¾ªç¯å’Œæ¶ˆæ¯é˜Ÿåˆ—ï¼š\n   - JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œä½†é€šè¿‡äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰å’Œæ¶ˆæ¯é˜Ÿåˆ—æ¥å¤„ç†å¼‚æ­¥æ“ä½œã€‚\n   - äº‹ä»¶å¾ªç¯å’Œæ¶ˆæ¯é˜Ÿåˆ—çš„æœºåˆ¶å…è®¸ JavaScript åœ¨ä¸é˜»å¡ä¸»çº¿ç¨‹çš„æƒ…å†µä¸‹å¤„ç† I/O æ“ä½œã€å®šæ—¶å™¨ç­‰å¼‚æ­¥ä»»åŠ¡ã€‚\n5. ä¸å…¶ä»–è¿›ç¨‹çš„äº¤äº’ï¼š\n   - è™½ç„¶ JavaScript å¼•æ“è¿è¡Œåœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ï¼Œä½†å®ƒå¯ä»¥é€šè¿‡è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ä¸å…¶ä»–è¿›ç¨‹ï¼ˆå¦‚æµè§ˆå™¨ä¸»è¿›ç¨‹ã€ç½‘ç»œè¿›ç¨‹ç­‰ï¼‰è¿›è¡Œäº¤äº’ã€‚\n   - è¿™ç§äº¤äº’å…è®¸ JavaScript æ‰§è¡Œç½‘ç»œè¯·æ±‚ã€è®¿é—®æœ¬åœ°å­˜å‚¨ç­‰æ“ä½œã€‚\n6. Web Workersï¼š\n   - ä¸ºäº†è§£å†³ JavaScript å•çº¿ç¨‹çš„é™åˆ¶ï¼Œç°ä»£æµè§ˆå™¨æ”¯æŒ Web Workersã€‚\n   - Web Workers å…è®¸åœ¨åå°çº¿ç¨‹ä¸­è¿è¡Œ JavaScriptï¼Œä¸ä¼šç›´æ¥å½±å“ä¸»çº¿ç¨‹çš„æ‰§è¡Œã€‚\n   - ä½†æ˜¯ï¼ŒWeb Workers ä¸èƒ½ç›´æ¥æ“ä½œ DOMï¼Œå®ƒä»¬ä¸»è¦ç”¨äºæ‰§è¡Œè€—æ—¶çš„è®¡ç®—ä»»åŠ¡ã€‚\n7. V8 å¼•æ“çš„ä¼˜åŒ–ï¼š\n   - V8 å¼•æ“å†…éƒ¨æœ‰å¤šä¸ªçº¿ç¨‹ååŒå·¥ä½œï¼Œå¦‚ç¼–è¯‘çº¿ç¨‹ã€ä¼˜åŒ–çº¿ç¨‹å’Œåƒåœ¾å›æ”¶çº¿ç¨‹ã€‚\n   - è¿™äº›å†…éƒ¨çº¿ç¨‹å¸®åŠ© V8 å®ç° JITï¼ˆå³æ—¶ç¼–è¯‘ï¼‰ã€ä»£ç ä¼˜åŒ–å’Œå†…å­˜ç®¡ç†ï¼Œæé«˜ JavaScript çš„æ‰§è¡Œæ•ˆç‡ã€‚\n8. æ²™ç®±éš”ç¦»ï¼š\n   - JavaScript å¼•æ“åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­è¿è¡Œï¼Œè¿™ç§è®¾è®¡æä¾›äº†ä¸€å®šç¨‹åº¦çš„å®‰å…¨éš”ç¦»ã€‚\n   - æ¯ä¸ªæ ‡ç­¾é¡µé€šå¸¸è¿è¡Œåœ¨ç‹¬ç«‹çš„æ¸²æŸ“è¿›ç¨‹ä¸­ï¼Œè¿™æ„å‘³ç€ä¸€ä¸ªæ ‡ç­¾é¡µä¸­çš„ JavaScript ä»£ç ä¸èƒ½ç›´æ¥è®¿é—®æˆ–å½±å“å…¶ä»–æ ‡ç­¾é¡µã€‚\n\n## 5. å¦‚ä½•ç†è§£ JavaScript çš„å•çº¿ç¨‹ï¼Ÿ\n\n### 5.1. å†å²åŸå› \n\nJavaScript æœ€åˆæ˜¯ä¸ºäº†åœ¨æµè§ˆå™¨ä¸­æ“ä½œ DOM è€Œè®¾è®¡çš„\n\n### 5.2. å¦‚æœæ˜¯å¤šçº¿ç¨‹çš„\n\nä¸€ä¸ªçº¿ç¨‹åœ¨æŸä¸ªDOMèŠ‚ç‚¹ä¸Šæ·»åŠ å†…å®¹ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹åˆ é™¤äº†è¿™ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ—¶æµè§ˆå™¨åº”è¯¥ä»¥å“ªä¸ªçº¿ç¨‹ä¸ºå‡†\n\n### 5.3. ç¼ºç‚¹\n\n- æ€§èƒ½é™åˆ¶ï¼šåœ¨å¤„ç† CPU å¯†é›†å‹ä»»åŠ¡æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´é¡µé¢å¡é¡¿\n- ä¸èƒ½å……åˆ†åˆ©ç”¨å¤šæ ¸ CPU çš„ä¼˜åŠ¿\n- å¯é æ€§è¾ƒä½ï¼šå¦‚æœæŸä¸ªä»»åŠ¡å´©æºƒï¼Œå¯èƒ½ä¼šå½±å“æ•´ä¸ªåº”ç”¨ç¨‹åº\n\n### 5.4. å¦‚ä½•å…‹æœå•çº¿ç¨‹çš„é™åˆ¶\n\n- a. äº‹ä»¶å¾ªç¯å’Œå¼‚æ­¥ç¼–ç¨‹ï¼šJavaScript ä½¿ç”¨äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰å’Œå›è°ƒå‡½æ•°æ¥å¤„ç†å¼‚æ­¥æ“ä½œ\n- b. Web Workers : å¯ä»¥æ–°å¼€çº¿ç¨‹\n- c. å¼‚æ­¥ APIï¼šè®¸å¤šæµè§ˆå™¨ API å’Œ Node.js API éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå…è®¸éé˜»å¡æ“ä½œ\n- d. æœåŠ¡å™¨ç«¯è§£å†³æ–¹æ¡ˆï¼šåœ¨ Node.js ç¯å¢ƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨**é›†ç¾¤ï¼ˆClusterï¼‰æ¨¡å—**æˆ– **PM2** ç­‰**è¿›ç¨‹ç®¡ç†å·¥å…·**æ¥åˆ›å»ºå¤šä¸ªè¿›ç¨‹ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸ CPU\n\n### 5.5. Web Worker çº¿ç¨‹\n\n- å…è®¸ JavaScript è„šæœ¬ åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯å­çº¿ç¨‹å®Œå…¨å—ä¸»çº¿ç¨‹æ§åˆ¶ï¼Œä¸”ä¸å¾—æ“ä½œDOMã€‚\n- æ‰€ä»¥ï¼Œè¿™ä¸ªæ–°æ ‡å‡†å¹¶æ²¡æœ‰æ”¹å˜ JavaScript å•çº¿ç¨‹çš„æœ¬è´¨ \n\n## 6. äº‹ä»¶å¾ªç¯ä¸æ¶ˆæ¯é˜Ÿåˆ—\n\n- **æ¶ˆæ¯é˜Ÿåˆ—ï¼š** æ¶ˆæ¯é˜Ÿåˆ—æ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„ `é˜Ÿåˆ—`ï¼Œå®ƒé‡Œé¢å­˜æ”¾ç€å„ç§æ¶ˆæ¯\n- **äº‹ä»¶å¾ªç¯ï¼š** \n\t- äº‹ä»¶å¾ªç¯æ˜¯æŒ‡ `ä¸»çº¿ç¨‹` é‡å¤ä»**æ¶ˆæ¯é˜Ÿåˆ—**ä¸­å–æ¶ˆæ¯ã€æ‰§è¡Œçš„è¿‡ç¨‹\n\t- äº‹ä»¶å¾ªç¯ æ˜¯ JavaScript å¼•æ“ç­‰å¾…ä»»åŠ¡ã€æ‰§è¡Œä»»åŠ¡å’Œè¿›å…¥ä¼‘çœ çŠ¶æ€ç­‰å¾…æ›´å¤šä»»åŠ¡çš„ä¸€ç§æœºåˆ¶\n\t- JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œ**äº‹ä»¶å¾ªç¯**ä½¿å¾—å®ƒèƒ½å¤Ÿéé˜»å¡åœ°æ‰§è¡Œ I/O æ“ä½œ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241025-3.png)\n\nç±»ä¼¼äºä¸‹é¢ä»£ç ï¼š\n\n```javascript\nwhile(true) {     \n  var message = queue.shift();     \n  execute(message); \n}\n```\n\n## 7. å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡\n\n```javascript hl:1\nå³ åŒæ­¥ä»£ç ï¼Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ‰€æœ‰å¾®ä»»åŠ¡ï¼Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ‰€æœ‰å¾®ä»»åŠ¡......\nwhile (true) {\n  å®ä»»åŠ¡é˜Ÿåˆ—.shift()\n  å¾®ä»»åŠ¡é˜Ÿåˆ—å…¨éƒ¨ä»»åŠ¡()\n}\n```\n\n- è°å‘èµ·çš„\n\t- å®ä»»åŠ¡ï¼šç”±å®¿ä¸»ï¼ˆNode æˆ–è€… æµè§ˆå™¨ï¼‰å‘èµ·\n\t- å¾®ä»»åŠ¡ï¼šjs å¼•æ“å‘èµ·\n- å¾®ä»»åŠ¡ æ˜¯ å®ä»»åŠ¡çš„ç»„æˆéƒ¨åˆ†ï¼Œä¸èƒ½åˆ†å¼€è°ˆ\n- DOM æ“ä½œæ˜¯åŒæ­¥ä»»åŠ¡\n- `window.requestAnimationFrame()` ä¸èƒ½ç®—å®ä»»åŠ¡ä¹Ÿä¸èƒ½ç®—å¾®ä»»åŠ¡ï¼Œè€Œæ˜¯ä¸€ä¸ª**ç‰¹å®šæ—¶æœº**\n\t- ä½ å¸Œæœ›æ‰§è¡Œä¸€ä¸ªåŠ¨ç”»ï¼Œå¹¶ä¸”è¦æ±‚æµè§ˆå™¨åœ¨**ä¸‹æ¬¡é‡ç»˜ä¹‹å‰**è°ƒç”¨æŒ‡å®šçš„å›è°ƒå‡½æ•°æ›´æ–°åŠ¨ç”»\n\t- æ‰§è¡Œæ—¶æœºæ˜¯åœ¨å½“å‰å®ä»»åŠ¡èŒƒå›´å†…,  æ‰§è¡Œå®Œ**åŒæ­¥ä»£ç å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—å**å†æ‰§è¡Œ\n\t\t- å®ƒä»ç„¶å±äºå®ä»»åŠ¡èŒƒå›´å†…ï¼Œä½†æ˜¯æ˜¯åœ¨å¾®ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œæ¯•åæ‰æ‰§è¡Œ\n- å¸¸è§çš„**å®ä»»åŠ¡**åŒ…æ‹¬ï¼š\n\t- scriptï¼ˆ**æ•´ä½“ä»£ç **ï¼‰\n\t- setTimeout/setInterval\n\t- I/O\n\t- UI æ¸²æŸ“\n\t- postMessage\n\t- setImmediateï¼ˆNode.js ç¯å¢ƒï¼‰\n- å¸¸è§çš„å¾®ä»»åŠ¡åŒ…æ‹¬ï¼š\n\t- `Promise.then/catch/finally`\n\t- process.nextTickï¼ˆNode.js ç¯å¢ƒï¼‰\n\t- MutationObserver\n\t- queueMicrotask()\n- æ‰§è¡Œé¡ºåºï¼š\n\t- a. æ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œè¿™å±äºå®ä»»åŠ¡ã€‚\n\t- b. æ‰§è¡Œæ ˆä¸ºç©ºï¼ŒæŸ¥è¯¢æ˜¯å¦æœ‰å¾®ä»»åŠ¡éœ€è¦æ‰§è¡Œã€‚\n\t- c. æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡ã€‚\n\t- d. å¿…è¦çš„è¯è¿›è¡Œ UI æ¸²æŸ“ã€‚\n\t- e. ç„¶åå¼€å§‹ä¸‹ä¸€è½®äº‹ä»¶å¾ªç¯ï¼Œæ‰§è¡Œå®ä»»åŠ¡ä¸­çš„å¼‚æ­¥ä»£ç \n\n## 8. Node.js ç‰ˆæœ¬ï¼ˆv12 åŠä»¥åï¼‰ä¸æµè§ˆå™¨ç¯å¢ƒä¸­å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡çš„åŒºåˆ«\n\n- äº‹ä»¶å¾ªç¯çš„åŸºæœ¬ç»“æ„ï¼š\n\t- æµè§ˆå™¨ï¼šäº‹ä»¶å¾ªç¯ç›¸å¯¹ç®€å•ï¼Œä¸»è¦åŒ…æ‹¬å®ä»»åŠ¡é˜Ÿåˆ—å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚\n\t- Node.jsï¼šäº‹ä»¶å¾ªç¯æ›´å¤æ‚ï¼ŒåŒ…å«**å¤šä¸ªé˜¶æ®µ**ï¼ˆtimersã€pending callbacksã€idleã€prepareã€pollã€checkã€close callbacksï¼‰\n- å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡çš„æ‰§è¡Œé¡ºåº\n\t- éƒ½æ˜¯åœ¨æ¯ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œä¼šç«‹å³æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡\n- Node.js ä¸­çš„ `process.nextTick` æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¾®ä»»åŠ¡ï¼Œ**å®ƒçš„ä¼˜å…ˆçº§é«˜äºå…¶ä»–å¾®ä»»åŠ¡**ã€‚åœ¨æ¯ä¸ªé˜¶æ®µç»“æŸæ—¶ï¼Œå¦‚æœå­˜åœ¨ nextTick é˜Ÿåˆ—ï¼Œä¼šä¼˜å…ˆæ‰§è¡Œå®Œ nextTick é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰ä»»åŠ¡ï¼Œç„¶åæ‰ä¼šæ‰§è¡Œå…¶ä»–å¾®ä»»åŠ¡\n- Nodejs  ä¸­ ï¼š åŒæ­¥ä»»åŠ¡ > `process.nextTick()` > å¾®ä»»åŠ¡\n- å¦‚æœåœ¨ä¸€ä¸ª I/O å‘¨æœŸå†…è°ƒç”¨ï¼ŒsetImmediate æ€»æ˜¯å…ˆäº setTimeout æ‰§è¡Œï¼Œå¦åˆ™ä¸ç¡®å®š\n\n## 9. requestIdleCallback çš„ç‰¹ç‚¹ã€ç”¨æ³•å’Œåº”ç”¨åœºæ™¯\n\n`requestIdleCallback` å…è®¸å¼€å‘è€…åœ¨**æµè§ˆå™¨çš„ç©ºé—²æ—¶é—´**æ‰§è¡Œåå°æˆ–ä½ä¼˜å…ˆçº§çš„ä»»åŠ¡ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯åˆ©ç”¨**æµè§ˆå™¨çš„ç©ºé—²å‘¨æœŸ**æ¥æ‰§è¡Œä»»åŠ¡ï¼Œè€Œä¸ä¼šå½±å“å…³é”®çš„æ¸²æŸ“å’Œäº¤äº’æ“ä½œ\n\nAPIï¼š `window.requestIdleCallback(callback[, options])`\n \n```javascript\nrequestIdleCallback(myNonEssentialWork);\n\n// éå¿…è¦ä»»åŠ¡\nfunction myNonEssentialWork(deadline) {\n  // timeRemaining()ï¼š è¿”å›å½“å‰ç©ºé—²æœŸè¿˜å‰©ä½™çš„æ¯«ç§’æ•°\n  // didTimeoutï¼š ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºä»»åŠ¡æ˜¯å¦å·²ç»è¶…æ—¶\n  while (deadline.timeRemaining() > 0 && tasks.length > 0) {\n    doWorkIfNeeded();\n  }\n  if (tasks.length > 0) {\n    requestIdleCallback(myNonEssentialWork);\n  }\n}\n\n```\n\nrequestIdleCallback ä¸»è¦ç”¨äºæ‰§è¡Œéå¿…è¦çš„åå°ä»»åŠ¡æˆ–è®¡ç®—ï¼Œä¾‹å¦‚ï¼š\n- æ•°æ®é¢„åŠ è½½\n- é•¿åˆ—è¡¨çš„æ¸è¿›å¼æ¸²æŸ“\n- å¤æ‚è®¡ç®—çš„åˆ†å‰²æ‰§è¡Œ\n- éå…³é”®æ•°æ®çš„å¤„ç†å’Œåˆ†æ\n- å¤§é‡ DOM æ“ä½œï¼šä¾‹å¦‚ï¼ŒåŠ¨æ€æ’å…¥å¤§é‡ DOM å…ƒç´ æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ requestIdleCallback åˆ†æ‰¹å¤„ç†ï¼Œé¿å…é•¿æ—¶é—´é˜»å¡ä¸»çº¿ç¨‹ã€‚\n- æ•°æ®å¤„ç†ï¼šå¤„ç†å¤§é‡æ•°æ®æˆ–æ‰§è¡Œå¤æ‚è®¡ç®—æ—¶ï¼Œå¯ä»¥å°†ä»»åŠ¡åˆ†å‰²å¹¶åœ¨ç©ºé—²æ—¶æ‰§è¡Œã€‚\n- é¢„åŠ è½½ï¼šåœ¨ç”¨æˆ·ä¸æ´»è·ƒæ—¶é¢„åŠ è½½èµ„æºæˆ–æ•°æ®\n\nReact çš„ **Fiber æ¶æ„** åœ¨å†…éƒ¨å®ç°äº†ç±»ä¼¼ requestIdleCallback çš„æœºåˆ¶ï¼Œç”¨äºå°†æ¸²æŸ“å·¥ä½œåˆ†å‰²æˆå°å—ï¼Œåœ¨æµè§ˆå™¨ç©ºé—²æ—¶æ‰§è¡Œã€‚è¿™å…è®¸ React åœ¨ä¸é˜»å¡ä¸»çº¿ç¨‹çš„æƒ…å†µä¸‹è¿›è¡Œå¤æ‚çš„æ›´æ–°æ“ä½œ\n\næ³¨æ„ï¼š\n- ä¸è¦åœ¨ requestIdleCallback ä¸­æ‰§è¡Œ DOM æ“ä½œï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šè§¦å‘é‡æ’æˆ–é‡ç»˜ï¼Œå½±å“æ€§èƒ½\n- å¯¹äºæœ‰**æ—¶é—´é™åˆ¶**çš„ä»»åŠ¡ï¼Œåº”è¯¥ä½¿ç”¨ setTimeout æˆ– requestAnimationFrameï¼Œè€Œä¸æ˜¯ requestIdleCallback\n\n## 10. è¯´å‡ºä¸‹é¢ä»£ç çš„æ‰§è¡Œé¡ºåº\n\n```javascript hl:14,15\nsetTimeout(() => {\n  console.log(\"1\");\n  Promise.resolve().then(function () {\n    console.log(\"2\");\n  });\n}, 0);\nsetTimeout(() => {\n  console.log(\"3\");\n  Promise.resolve().then(function () {\n    console.log(\"4\");\n  });\n}, 0);\n\n// 1 2 3 4\n// nodejs 12 ä»¥ä¸Š å’Œ æµè§ˆå™¨ä¸€æ ·\n```\n\n## 11. ä¸‹é¢ä»£ç çš„æ‰§è¡Œé¡ºåº\n\nsetTimeout å’Œ setImmediate éƒ½æ˜¯å®ä»»åŠ¡\n- setTimeout **é€šå¸¸**ä¼šå…ˆäº setImmediate æ‰§è¡Œ\n- ä½†å¦‚æœæ¶‰åŠåˆ° I/O æ“ä½œï¼ŒsetImmediate è¿™æ›´å¿«æ‰§è¡Œï¼Œå› ä¸ºsetImmediate æ€»æ˜¯åœ¨ I/O æ“ä½œä¹‹åæ‰§è¡Œ\n\n```javascript hl:2,18,22\nsetImmediate(function () {\n  console.log(6);\n});\nsetTimeout(function () {\n  console.log(7);\n}, 0);\n\nsetTimeout(function () {\n  console.log(\"7-1s\");\n}, 1);\n\nsetTimeout(function () {\n  console.log(\"7-2s\");\n}, 2);\n\nsetTimeout(function () {\n  console.log(\"7-4s\");\n}, 4);\n\nsetTimeout(function () {\n  console.log(\"7-100s\");\n}, 100);\n\nconsole.log(1);\n\nprocess.nextTick(() => {\n  console.log(4);\n});\nnew Promise(function (resolve, rejected) {\n  console.log(2);\n  resolve();\n}).then((res) => {\n  console.log(5);\n});\n\nconsole.log(3);\n\n// 1\n// 2\n// 3\n// 4\n// 5\n// 7\n// 7-1s\n// 7-2s\n// 7-4s\n// 6\n// 7-100s\n```\n\nä¸‹é¢ä»£ç å°±ä¼šå¾ˆ**ç¨³å®šçš„è¾“å‡º**ï¼Œå› ä¸ºä»£ç ä¼šè¿›å…¥ I/O callbacké˜¶æ®µï¼Œç„¶åchecké˜¶æ®µï¼Œå†ç„¶åæ˜¯timersé˜¶æ®µ\n\n```javascript \n\nconst fs = require('fs');\n\nfs.readFile('test.js', () => {\n  setTimeout(() => console.log(1));\n  setImmediate(() => console.log(2));\n});\n\n// 2 1 \n```\n\n## 12. promiseçš„å…¼å®¹æ€§ï¼šes6\n\n## 13. Vue çš„ nextTick å¦‚ä½•å®ç°çš„ï¼Ÿ\n\nç”±äº Vue çš„å¼‚æ­¥æ›´æ–°ç­–ç•¥ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ä¿®æ”¹æ•°æ®åç«‹å³æ“ä½œ DOMï¼Œå¯èƒ½ä¼šå¾—åˆ°æ›´æ–°å‰çš„æ—§ DOMã€‚nextTick æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œç¡®ä¿æˆ‘ä»¬çš„ä»£ç åœ¨ DOM æ›´æ–°åæ‰§è¡Œ\n\næ‰€ä»¥å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒVue ä¸ä¼šç«‹å³æ›´æ–° DOMï¼Œè€Œæ˜¯å°†æ›´æ–°æ“ä½œæ¨å…¥ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œè¿™ç§åšæ³•å¯ä»¥æé«˜æ€§èƒ½\n\nVueä¼šå°è¯•ä½¿ç”¨åŸç”Ÿçš„ Promise.thenã€MutationObserver å’Œ setImmediateï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒä¸æ”¯æŒï¼Œåˆ™ä¼šé‡‡ç”¨`setTimeout(fn, 0)` ä»£æ›¿\n\nnextTick çš„**æ ¸å¿ƒæ€æƒ³**ï¼šåˆ©ç”¨ JavaScript çš„äº‹ä»¶å¾ªç¯ï¼Œå°†å›è°ƒæ¨è¿Ÿåˆ° `ä¸‹ä¸€ä¸ª\"tick\"`æ‰§è¡Œ\n\n```javascript\n// ä¸€ä¸ªç®€å•çš„ nextTick å®ç°\n\n// ç”¨äºå­˜å‚¨å›è°ƒå‡½æ•°çš„æ•°ç»„\nlet callbacks = [];\n\n// ä»£è¡¨æ˜¯å¦æ­£åœ¨æ‰§è¡Œå›è°ƒ\nlet pending = false;\n\nfunction nextTick(cb) {\n  callbacks.push(cb);\n\n  if (!pending) {\n    pending = true;\n    // ä½¿ç”¨setTimeoutæ¥è°ƒåº¦ä¸€ä¸ªåˆ·æ–°æ“ä½œ\n    setTimeout(flushCallbacks, 0);\n  }\n}\n\n// flushCallbackså‡½æ•°è´Ÿè´£æ‰§è¡Œæ‰€æœ‰çš„å›è°ƒ\nfunction flushCallbacks() {\n  pending = false;\n  const copies = callbacks.slice(0);\n  callbacks.length = 0;\n  for (let i = 0; i < copies.length; i++) {\n    copies[i]();\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nnextTick(() => {\n  console.log(\"è¿™æ˜¯åœ¨ä¸‹ä¸€ä¸ªtickæ‰§è¡Œçš„å›è°ƒ\");\n});\n\nconsole.log(\"è¿™æ˜¯åŒæ­¥ä»£ç \");\n\n\n```\n\n## 14. queueMicrotask\n\n`queueMicrotask` æ˜¯ä¸€ä¸ªç”¨äºå°†å›è°ƒå‡½æ•°ä½œä¸º**å¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰** æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å…¨å±€å‡½æ•°ï¼Œ nodejs ç¯å¢ƒå’Œæµè§ˆå™¨ç¯å¢ƒéƒ½å¯ç”¨\n\n`queueMicrotask` å¯ç”¨äºæ‰¹é‡å¤„ç†çŠ¶æ€æ›´æ–°ï¼Œç¡®ä¿ DOM åªæ›´æ–°ä¸€æ¬¡ï¼Œè€Œä¸æ˜¯æ¯æ¬¡çŠ¶æ€å˜åŒ–éƒ½æ›´æ–°ï¼Œå¦‚ä¸‹ä»£ç \n\n```javascript hl:9,22,23,24\nlet state = { count: 0 };\nlet updateScheduled = false;\n\nfunction updateState(newState) {\n  Object.assign(state, newState);\n\n  if (!updateScheduled) {\n    updateScheduled = true;\n    queueMicrotask(() => {\n      updateDOM();\n      updateScheduled = false;\n    });\n  }\n}\n\nfunction updateDOM() {\n  console.log(\"Updating DOM with state:\", state);\n  // å®é™…çš„ DOM æ›´æ–°æ“ä½œ\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nupdateState({ count: 1 });\nupdateState({ count: 2 });\nupdateState({ count: 3 });\n\nconsole.log(\"Current state:\", state);\n\n```\n\n## 15. `async`å’Œ`await`çš„ä¸²è¡Œå¹¶è¡Œé—®é¢˜\n\n```javascript hl:2,7,10\nasync function main() {\n  // ä¸²è¡Œ\n  var name1 = await foo();\n  // è¿™é‡Œä¼šç­‰å¾…fooæ‰§è¡Œå®Œååœ¨æ‰§è¡Œ\n  var name2 = await bar();\n\n  // å¹¶è¡Œ\n  var [name1, name2] = await Promise.all([foo(), bar()]);\n\n  // å¹¶è¡Œ\n  var foo2 = foo();\n  var bar2 = bar();\n  var name1 = await foo2;\n  var name2 = await bar2;\n}\n\n```\n\n## 16. å‡è®¾æœ¬åœ°æœºå™¨æ— æ³•åšåŠ å‡ä¹˜é™¤æ³•ï¼Œéœ€è¦é€šè¿‡è¿œç¨‹è¯·æ±‚è®©æœåŠ¡ç«¯æ¥å®ç°\n\n```javascript hl:12,27,49\n// å‡è®¾æœ¬åœ°æœºå™¨æ— æ³•åšåŠ å‡ä¹˜é™¤æ³•ï¼Œéœ€è¦é€šè¿‡è¿œç¨‹è¯·æ±‚è®©æœåŠ¡ç«¯æ¥å®ç°\n\n// æœ¬åœ°æ¨¡æ‹Ÿè¿œç¨‹è¯·æ±‚\nasync function addRemote(a, b) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve(a + b);\n    }, 1000);\n  });\n}\n\n// åŸºæœ¬å®ç°\nasync function add(...args) {\n  let res = 0;\n\n  // base case\n  if (args.length === 0) return res;\n  if (args.length === 1) return args[0];\n\n  for (const item of args) {\n    res = await addRemote(res, item);\n  }\n\n  return res;\n}\n\n// ä¼˜åŒ– 1ï¼šåˆ†ç»„å¹¶è¡Œè¯·æ±‚\nasync function add(...args) {\n  let res = 0;\n\n  // base case\n  if (args.length === 0) return res;\n  if (args.length === 1) return args[0];\n\n  const tasks = [];\n  for (const item of args) {\n    tasks.push(addRemote(res, item));\n  }\n\n  const values = await Promise.all(tasks);\n\n  values.forEach((value) => {\n    res += value;\n  });\n\n  return res;\n}\n\n// ä¼˜åŒ– 2ï¼šç¼“å­˜è¯·æ±‚ï¼Œå‡å°‘è¯·æ±‚æ¬¡æ•°\nasync function add(...args) {\n  let res = 0;\n\n  // base case\n  if (args.length === 0) return res;\n  if (args.length === 1) return args[0];\n\n  const cache = new Map();\n  for (const item of args) {\n    if (cache.has(item)) {\n      res = cache.get(item);\n    } else {\n      res = await addRemote(res, item);\n      cache.set(item, res);\n    }\n  }\n\n  return res;\n}\n\n```\n\n## 17. åœ¨å¾ªç¯ä¸­ä½¿ç”¨ asyncã€await çš„æ³¨æ„äº‹é¡¹\n\n- `forEach` ä¸èƒ½å¾ˆå¥½åœ°ä¸ `async/await` é…åˆä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¸ä¼šç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆï¼›å¦‚æœä¸€å®šä½¿ç”¨ï¼Œæ³¨æ„ä½¿ç”¨**ç«‹å³æ‰§è¡Œå‡½æ•°**åŒ…è£…\n- `map` å¯ä»¥é…åˆ `Promise.all` ä½¿ç”¨\n- `for...of` æ˜¯åœ¨å¾ªç¯ä¸­ä½¿ç”¨ async/await **æœ€è‡ªç„¶å’Œæ¨è**çš„æ–¹å¼\n- `while` å¾ªç¯å¯ä»¥å¾ˆå¥½åœ°ä¸ async/await é…åˆä½¿ç”¨\n- `for...in` ä¸»è¦ç”¨äºéå†å¯¹è±¡çš„å¯æšä¸¾å±æ€§ï¼Œä¸€èˆ¬ä¸ç”¨ï¼Œå¦‚æœä½¿ç”¨ï¼Œæ³¨æ„ä½¿ç”¨**ç«‹å³æ‰§è¡Œå‡½æ•°**åŒ…è£…\n- ä¼ ç»Ÿçš„ `for å¾ªç¯`ä¹Ÿå¯ä»¥ä¸ async/await ä¸€èµ·ä½¿ç”¨\n- ä½¿ç”¨`filter`ï¼Œå®Œå…¨æ²¡ç”¨ï¼Œå› ä¸ºå›è°ƒè¿”å› `éƒ½æ˜¯promiseå¯¹è±¡ï¼Œéƒ½ä¸ºtrue`\n\n## 18. ä¸€ä¸ªç»å…¸çš„å¾ªç¯ä¸é—­åŒ…çš„é—®é¢˜\n\n```javascript hl:8\n// å¯èƒ½å‡ºç°é—®é¢˜çš„ä»£ç \nfor (var i = 0; i < 5; i++) {\n  setTimeout(async () => {\n    await someAsyncOperation(i);\n  }, 1000);\n}\n\n// ä¿®æ­£åçš„ä»£ç ï¼Œä½¿ç”¨ letï¼Œä¸ä½¿ç”¨ var\nfor (let i = 0; i < 5; i++) {\n  setTimeout(async () => {\n    await someAsyncOperation(i);\n  }, 1000);\n}\n\n```\n\n## 19. è¯´è¯´ Nginx\n\n### 19.1. æ­£å‘ä»£ç†ä¸åå‘ä»£ç†\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241025-4.png)\n\n### 19.2. ä¸€äº›åŸºæœ¬è®¾ç½®\n\n- é’ˆå¯¹ ç‰¹å®šè·¯å¾„ï¼Œç‰¹å®šæ–‡ä»¶åç¼€ï¼Œå¼€å¯ `gzip on`\n- è¯·æ±‚é™åˆ¶ï¼šå¯¹ `åŒä¸€ ip` çš„è¿æ¥æ•° å’Œ å¹¶å‘æ•°è¿›è¡Œé™åˆ¶\n\t- imit_conn_module `è¿æ¥é¢‘ç‡`é™åˆ¶\n\t- limit_req_module `è¯·æ±‚é¢‘ç‡`é™åˆ¶\n- é’ˆå¯¹ç‰¹å®šè·¯å¾„ï¼Œç‰¹å®šæ–‡ä»¶åç¼€ï¼Œæ£€æŸ¥ referer æ¥æºï¼Œå¼€å¯**é˜²ç›—é“¾**\n\n### 19.3. è´Ÿè½½å‡è¡¡\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241025-5.png)\n\n## 20. PaaS ã€SaaS ç­‰\n- PaaSæ˜¯ï¼ˆPlatform as a Serviceï¼‰çš„ç¼©å†™\n- SaaS\n- Faas\n- åŸºç¡€è®¾æ–½å³æœåŠ¡(IaaS) ï¼Œ`IaaS`æ˜¯æŒ‡åŸºç¡€è®¾æ–½æœåŠ¡ï¼ŒInfrastructure-as-a-service\n- `BaaS`æ˜¯æŒ‡åç«¯å³æœåŠ¡ï¼ŒBackend as a Service\n- `DaaS`æ˜¯æŒ‡å‡½æ•°å³æœåŠ¡ï¼ŒData as a Serviceã€‚\n- `NaaS`æ˜¯æŒ‡ç½‘ç»œå³æœåŠ¡ï¼ŒNetwork as a Service\n- XPaaS æ˜¯æŒ‡å„ç§ç±»å‹çš„ PaaSï¼Œå®ƒå’Œ XaaS ä¸€æ ·ï¼Œç±»çš„æœ¯è¯­ï¼Œè¿™é‡Œæ˜¯ PaaS ç±»çš„ç»Ÿç§°\n- `UIPaaS`æ˜¯UIå¹³å°å³æœåŠ¡ï¼ŒUser Interface PaaSã€‚äº§å“ç•Œé¢è®¾è®¡ä¸ç ”å‘ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆ\n\n## 21. æœ€åæ¥ä¸€æ®µä»£ç çš„æ‰§è¡Œé¡ºåº\n\n```javascript\nasync function async1() {\n  console.log(\"2\");\n  await async2();\n  console.log(\"9\");\n}\nasync function async2() {\n  console.log(\"3\");\n}\nconsole.log(1);\n\nsetTimeout(function () {\n  console.log(\"11\");\n}, 0);\nsetTimeout(function () {\n  console.log(\"13\");\n}, 300);\n\nsetImmediate(() => console.log(\"12\"));\n\nprocess.nextTick(() => console.log(\"7\"));\n\nasync1();\n\nprocess.nextTick(() => console.log(\"8\"));\n\nnew Promise(function (resolve) {\n  console.log(\"4\");\n  resolve();\n  console.log(\"5\");\n}).then(function () {\n  console.log(\"10\");\n});\nconsole.log(\"6\");\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n```\n\n## 22. åŒçº§çš„å…ˆæ¸…ç©ºï¼Œç„¶åå†åˆ°ä¸‹ä¸€çº§\n\n```javascript\n// 111\n// 222\n// 333\n// 444\n// 555\n// 666\n// 777\n\n// :::: åŒçº§çš„å…ˆæ¸…ç©ºï¼Œç„¶åå†åˆ°ä¸‹ä¸€çº§\nnew Promise(resolve => {\n    setTimeout(() => {\n        console.log(666);\n        new Promise(resolve => {\n            resolve();\n        }).then(() => {\n            console.log(777);\n        })\n    })\n    resolve();\n}).then(() => {\n    new Promise(resolve => {\n        resolve(); // æ‰€ä»¥ç»§ç»­æ‰§è¡Œ111 ã€ 222\n    }).then(() => {\n        console.log('111');\n    }).then(() => {\n        console.log('222');\n    });\n}).then(() => {\n    new Promise((resolve) => {\n        resolve()\n    }).then(() => {\n        // ::::åˆå¤šäº†ä¸€å±‚\n        new Promise((resolve) => {\n            resolve()\n        }).then(() => {\n            console.log(444)\n        })\n    }).then(() => {\n        console.log(555);\n    })\n}).then(() => {\n    console.log(333);\n})\n\n```","f5c1b385a49c5336b17d8f1e570cfe0a":"\n# æ¸²æŸ“ã€æ€§èƒ½ã€ç½‘ç»œ\n\n`#å‰ç«¯é¢è¯•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. è¯´è¯´æµè§ˆå™¨æ˜¯å¦‚ä½•æŠŠç½‘é¡µæ¸²æŸ“åˆ°æ˜¾ç¤ºå™¨ä¸Šçš„ \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241025-6.png)\n\n## 2. é‡æ’ã€é‡ç»˜ã€ç›´æ¥åœ¨éä¸»çº¿ç¨‹ä¸Šæ‰§è¡ŒåˆæˆåŠ¨ç”»æ“ä½œ\n\næ³¨æ„ç‚¹ï¼š\n- ä¸»çº¿ç¨‹ä¸éä¸»çº¿ç¨‹\n- æ¸²æŸ“è·¯å¾„ï¼šé‡æ’ >  é‡ç»˜ > åˆæˆï¼Œå¦‚ä¸‹å›¾\n- åˆæˆ\n\t- åˆæˆå±‚çš„transformã€opacityä¿®æ”¹ï¼Œåªéœ€è¦å°†å¤šä¸ªå›¾å±‚å†æ¬¡åˆå¹¶ï¼Œè€Œåç”Ÿæˆä½å›¾ï¼Œæœ€ç»ˆå±•ç¤ºåˆ°å±å¹•ä¸Š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241025-8.png)\n\n## 3. æ¸²æŸ“æµç¨‹ã€æ¸²æŸ“å±‚ã€åˆæˆå±‚ã€å¼€å¯ GPU åŠ é€Ÿçš„å…³ç³»\n\n### 3.1. æ¸²æŸ“è¿‡ç¨‹æ¦‚è¿°\n\né¦–å…ˆ,è®©æˆ‘ä»¬ç®€è¦å›é¡¾ä¸€ä¸‹æµè§ˆå™¨çš„åŸºæœ¬æ¸²æŸ“è¿‡ç¨‹:\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241025-9.png)\n\n1) è§£æHTMLæ„å»ºDOMæ ‘\n2) è§£æCSSæ„å»ºCSSOMæ ‘\n3) å°†DOMå’ŒCSSOMåˆå¹¶æˆæ¸²æŸ“æ ‘(Render Tree)\n4) å¸ƒå±€(Layout):è®¡ç®—æ¯ä¸ªå¯è§å…ƒç´ çš„å‡ ä½•ä¿¡æ¯\n5) ç»˜åˆ¶(Paint):å°†æ¸²æŸ“æ ‘ä¸­çš„å„ä¸ªèŠ‚ç‚¹ç»˜åˆ¶åˆ°å±å¹•ä¸Š\n6) åˆæˆ(Compositing):  å°†ä¸åŒçš„ç»˜åˆ¶å±‚åˆæˆåˆ°ä¸€èµ·\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241025-11.png)\n### 3.2. æ¸²æŸ“å±‚å’Œåˆæˆå±‚ä¸»è¦åŒºåˆ«\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241025-13.png)\n### 3.3. æ¸²æŸ“å±‚\n\næ¸²æŸ“å±‚çš„æ¦‚å¿µè·Ÿâ€œå±‚å ä¸Šä¸‹æ–‡â€å¯†åˆ‡ç›¸å…³ï¼Œç®€å•æ¥è¯´ï¼Œæ‹¥æœ‰z-indexå±æ€§çš„å®šä½å…ƒç´ ä¼šç”Ÿæˆä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡ï¼Œä¸€ä¸ªç”Ÿæˆå±‚å ä¸Šä¸‹æ–‡çš„å…ƒç´ å°±ç”Ÿæˆäº†ä¸€ä¸ªæ¸²æŸ“å±‚\n\nå½¢æˆ`æ¸²æŸ“å±‚`çš„æ¡ä»¶ä¹Ÿå°±æ˜¯å½¢æˆå±‚å ä¸Šä¸‹æ–‡çš„æ¡ä»¶\n\n- document å…ƒç´ \n- æ‹¥æœ‰z-index å±æ€§çš„å®šä½å…ƒç´ ï¼ˆposition: relative|fixed|sticky|absoluteï¼‰\n- å¼¹æ€§å¸ƒå±€çš„å­é¡¹ï¼ˆçˆ¶å…ƒç´ display:flex|inline-flex)ï¼Œå¹¶ä¸” z-index ä¸æ˜¯autoæ—¶\n- opacity é 1 çš„å…ƒç´ \n- transform é noneçš„å…ƒç´ \n- filterénoneçš„å…ƒç´ \n- will-change = opacity | transform | filter\n- æ­¤å¤–éœ€è¦å‰ªè£çš„å…ƒç´ ä¹Ÿä¼šå½¢æˆä¸€ä¸ªæ¸²æŸ“å±‚ï¼Œä¹Ÿå°±æ˜¯overflowä¸æ˜¯visibleçš„å…ƒç´ \n\n### 3.4. åˆæˆå±‚(Compositing Layer)\n\n- å®šä¹‰: **å¯ä»¥ç‹¬ç«‹äºæ™®é€šæ–‡æ¡£æµä¸­çš„å…¶ä»–å±‚è¿›è¡Œç»˜åˆ¶å’Œç¼“å­˜**ã€‚\n- ç‰¹ç‚¹:  åˆæˆå±‚çš„å†…å®¹ä¼šè¢«**ç¼“å­˜**ä¸ºä¸€ä¸ªç‹¬ç«‹çš„å›¾åƒ,å¯ä»¥ç›´æ¥ç”¨äºæ˜¾ç¤ºã€‚\n- ä¼˜åŠ¿:   åˆæˆå±‚çš„æ›´æ–°ä¸ä¼šå½±å“å…¶ä»–å±‚,å¯ä»¥æé«˜æ¸²æŸ“æ€§èƒ½ã€‚\n\n#### 3.4.1. åœ¨å¼€å‘è€…å·¥å…·çœ‹åˆ°çš„å…¨éƒ¨éƒ½æ˜¯åˆæˆå±‚\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241025-12.png)\n\n#### 3.4.2. åˆ›å»ºåˆæˆå±‚çš„æ¡ä»¶\n\nä¸‹é¢è¿™äº›æ¡ä»¶å±äºç”Ÿæˆæ¸²æŸ“å±‚çš„â€œåŠ å¼ºç‰ˆâ€ï¼Œä¹Ÿå°±æ˜¯è¯´å½¢æˆåˆæˆå±‚çš„æ¡ä»¶è¦æ›´è‹›åˆ»\n\n| æ¡ä»¶                             | è¯´æ˜                             | ç¤ºä¾‹                                                                                                   |\n| ------------------------------ | ------------------------------ | ---------------------------------------------------------------------------------------------------- |\n| 3D æˆ–é€è§†å˜æ¢ CSS å±æ€§                | ä½¿ç”¨ 3D å˜æ¢å¯ä»¥åˆ›å»ºåˆæˆå±‚                | `transform: translateZ(0);`<br>`transform: translate3d(0,0,0);`<br>`transform: perspective(1000px);` |\n| åŒ…å«ç¡¬ä»¶åŠ é€Ÿçš„ 2D å˜æ¢                  | æŸäº› 2D å˜æ¢ä¹Ÿå¯èƒ½è§¦å‘åˆæˆå±‚               | `transform: translateZ(0);`                                                                          |\n| `will-change` å±æ€§               | é¢„å…ˆå‘ŠçŸ¥æµè§ˆå™¨å…ƒç´ å¯èƒ½å‘ç”Ÿçš„å˜åŒ–               | `will-change: transform;`<br>`will-change: opacity;`<br>`will-change: top, left, bottom, right;`     |\n| åº”ç”¨ `animation` æˆ– `transition`  | å¯¹ç‰¹å®šå±æ€§åº”ç”¨åŠ¨ç”»æˆ–è¿‡æ¸¡æ•ˆæœ                 | é€‚ç”¨äº `opacity`, `transform`, `filter`, `backdrop-filter`                                              |\n| `position: fixed`              | å›ºå®šå®šä½çš„å…ƒç´ ä¼šåˆ›å»ºåˆæˆå±‚                  | `position: fixed;`                                                                                   |\n| å…·æœ‰ `alpha` é€šé“æˆ–ä½¿ç”¨ `mask`/`clip` | åŠé€æ˜å…ƒç´ æˆ–ä½¿ç”¨é®ç½©/å‰ªåˆ‡çš„å…ƒç´                | `opacity: 0.9;`<br>`mask-image: url(mask.png);`                                                      |\n| ä½¿ç”¨ CSS `filter` å±æ€§             | åº”ç”¨æ»¤é•œæ•ˆæœ                         | `filter: blur(5px);`                                                                                 |\n| åä»£å…ƒç´ ä¸­å­˜åœ¨åˆæˆå±‚                     | å¦‚åŒ…å« `<video>` æˆ– `<iframe>` ç­‰æ ‡ç­¾ | `<div><video src=\"...\"></video></div>`                                                               |\n| CSS `reflection` å±æ€§            | ä½¿ç”¨å€’å½±æ•ˆæœ                         | `-webkit-box-reflect: below 1px linear-gradient(transparent, `#0004);``                                |\n| `mix-blend-mode` å±æ€§            | è®¾ç½®å…ƒç´ çš„å†…å®¹åº”è¯¥ä¸çˆ¶å…ƒç´ çš„å†…å®¹æ··åˆ             | `mix-blend-mode: multiply;`                                                                          |\n| CSS åŠ¨ç”»çš„ `@keyframe` è§„åˆ™         | ä½¿ç”¨å…³é”®å¸§åŠ¨ç”»                        | `@keyframes example { ... }`                                                                         |\n| `<video>` å…ƒç´                    | è§†é¢‘å…ƒç´ é€šå¸¸ä¼šåˆ›å»ºåˆæˆå±‚                   | `<video src=\"...\"></video>`                                                                          |\n| ä½¿ç”¨ WebGL çš„ `<canvas>` å…ƒç´        | WebGL å†…å®¹ä¼šè§¦å‘åˆæˆå±‚                 | `<canvas id=\"webgl-canvas\"></canvas>`                                                                |\n| ç¡¬ä»¶åŠ é€Ÿçš„ `<iframe>` å…ƒç´             | åµŒå…¥çš„ iframe å¯èƒ½åˆ›å»ºåˆæˆå±‚             | `<iframe src=\"...\"></iframe>`                                                                        |\n| ä½¿ç”¨å‰ªè£ï¼ˆclipï¼‰æˆ–é®ç½©ï¼ˆmaskï¼‰å±æ€§          | åº”ç”¨å¤æ‚çš„å‰ªè£æˆ–é®ç½©æ•ˆæœ                   | `clip-path: circle(50%);`                                                                            |\n| CSS å¤šåˆ—å¸ƒå±€                       | ä½¿ç”¨å¤šåˆ—å¸ƒå±€å¯èƒ½è§¦å‘åˆæˆå±‚                  | `column-count: 3;`<br>`column-width: 100px;`                                                         |\n| CSS regions                    | ä½¿ç”¨åŒºåŸŸå¸ƒå±€                         | è¾ƒå°‘ä½¿ç”¨ï¼Œä¸»è¦åœ¨ç‰¹å®šå¸ƒå±€ä¸­                                                                                        |\n| CSS `isolation` å±æ€§             | åˆ›å»ºæ–°çš„å †å ä¸Šä¸‹æ–‡                      | `isolation: isolate;`                                                                                |\n| `z-index` å±æ€§                   | åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½è§¦å‘åˆæˆå±‚                  | `z-index: 100;`                                                                                      |\n\n### 3.5. GPUåŠ é€Ÿ\n\n- å®šä¹‰:  GPUåŠ é€Ÿæ˜¯æŒ‡åˆ©ç”¨å›¾å½¢å¤„ç†å™¨(GPU)æ¥åŠ é€Ÿé¡µé¢æ¸²æŸ“å’ŒåŠ¨ç”»æ‰§è¡Œã€‚\n- åŸç†:  é€šè¿‡å°†æŸäº›æ¸²æŸ“ä»»åŠ¡è½¬ç§»åˆ°GPUä¸Šå¤„ç†,å¯ä»¥æ˜¾è‘—æé«˜æ€§èƒ½ã€‚\n- è§¦å‘: **åˆ›å»ºåˆæˆå±‚é€šå¸¸ä¼šè§¦å‘GPUåŠ é€Ÿ**ã€‚\n\nåˆ›å»ºåˆæˆå±‚çš„æ¡ä»¶å’Œå¼€å¯ GPU 3D åŠ é€Ÿçš„æ¡ä»¶è™½ç„¶æœ‰å¾ˆå¤§çš„é‡å ï¼Œä½†å¹¶ä¸å®Œå…¨ç›¸åŒï¼Œå…·ä½“å¦‚ä¸‹è¡¨ï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241025-10.png)\n\n### 3.6. æ–°å¼€GPUåŠ é€Ÿ\n\n\"æ–°å¼€GPUåŠ é€Ÿ\"é€šå¸¸æŒ‡çš„æ˜¯æŸä¸ªå…ƒç´ å› ä¸ºç‰¹å®šçš„CSSå±æ€§æˆ–DOMæ“ä½œè€Œåˆ›å»ºäº†æ–°çš„åˆæˆå±‚,ä»è€Œè§¦å‘äº†GPUåŠ é€Ÿã€‚è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬:\n\n1) å…ƒç´ è¢«æå‡ä¸ºç‹¬ç«‹çš„**åˆæˆå±‚**\n2) è¯¥å±‚çš„æ¸²æŸ“è¢«è½¬ç§»åˆ°GPUä¸Šå¤„ç†\n3) GPUç‹¬ç«‹å¤„ç†è¯¥å±‚çš„ç»˜åˆ¶å’Œåˆæˆ\n\n### 3.7. å®é™…åº”ç”¨å’Œæ³¨æ„äº‹é¡¹\n\n- æ€§èƒ½ä¼˜åŒ–: åˆç†ä½¿ç”¨åˆæˆå±‚å¯ä»¥æé«˜åŠ¨ç”»æ€§èƒ½å’Œé¡µé¢æ»šåŠ¨æµç•…åº¦ã€‚\n- è¿‡åº¦ä½¿ç”¨çš„é—®é¢˜:  åˆ›å»ºè¿‡å¤šçš„åˆæˆå±‚å¯èƒ½ä¼šå¢åŠ å†…å­˜ä½¿ç”¨,åè€Œé™ä½æ€§èƒ½ã€‚\n- è°ƒè¯•å·¥å…·:  Chrome DevToolsçš„ \"Layers\"  é¢æ¿å¯ä»¥å¸®åŠ©å¯è§†åŒ–å’Œè°ƒè¯•å¤åˆå±‚\n\n### 3.8. ä»£ç ç¤ºä¾‹\n\nè§¦å‘GPUåŠ é€Ÿçš„CSSç¤ºä¾‹:\n\n```css\n.gpu-accelerated {\n  transform: translateZ(0);\n  will-change: transform;\n}\n```\n\nè¿™æ®µCSSä¼šå¼ºåˆ¶åˆ›å»ºä¸€ä¸ªæ–°çš„åˆæˆå±‚,å¹¶è§¦å‘GPUåŠ é€Ÿã€‚\n\n### 3.9. æœ€ä½³å®è·µ\n\n- åªåœ¨éœ€è¦çš„åœ°æ–¹ä½¿ç”¨GPUåŠ é€Ÿ\n- ä½¿ç”¨ will-change å±æ€§æ¥æå‰å‘ŠçŸ¥æµè§ˆå™¨å³å°†å‘ç”Ÿçš„å˜åŒ–\n- é¿å…å¤§é‡ä½¿ç”¨å›ºå®šå®šä½å…ƒç´ \n- å¯¹äºä¸éœ€è¦é¢‘ç¹é‡ç»˜çš„å…ƒç´ , è€ƒè™‘ä½¿ç”¨ opacity å’Œ transform æ¥å®ç°åŠ¨ç”»æ•ˆæœ\n\n### 3.10. æ³¨æ„é¡¹\n\nå¦‚æœæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒçš„å…„å¼Ÿå…ƒç´ åœ¨å¤åˆå±‚ä¸­æ¸²æŸ“ï¼Œè€Œè¿™ä¸ªå…„å¼Ÿå…ƒç´ çš„`z-index`æ¯”è¾ƒå°ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ ï¼ˆä¸ç®¡æ˜¯ä¸æ˜¯åº”ç”¨äº†ç¡¬ä»¶åŠ é€Ÿæ ·å¼ï¼‰ä¹Ÿä¼šè¢«æ”¾åˆ°å¤åˆå±‚\n\næ¢è¨€ä¹‹ï¼Œæµè§ˆå™¨æœ‰å¯èƒ½ç»™å¤åˆå±‚ä¹‹åçš„æ‰€æœ‰ç›¸å¯¹æˆ–ç»å¯¹å®šä½çš„å…ƒç´ éƒ½åˆ›å»ºä¸€ä¸ª`å¤åˆå±‚`æ¥æ¸²æŸ“\n\næ‰€ä»¥ï¼Œä½¿ç”¨3Dç¡¬ä»¶åŠ é€Ÿæå‡åŠ¨ç”»æ€§èƒ½æ—¶ï¼Œæœ€å¥½ç»™å…ƒç´ å¢åŠ ä¸€ä¸ª`z-index`å±æ€§ï¼Œ**äººä¸ºå¹²æ‰°å¤åˆå±‚çš„æ’åº**ï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘chromeåˆ›å»ºä¸å¿…è¦çš„å¤åˆå±‚ï¼Œæå‡æ¸²æŸ“æ€§èƒ½ï¼Œç§»åŠ¨ç«¯ä¼˜åŒ–æ•ˆæœå°¤ä¸ºæ˜æ˜¾\n\n### 3.11. å¤åˆå±‚ = åˆæˆå±‚\n\n## 4. æ¸²æŸ“ç›¸å…³çš„å¯ä¼˜åŒ–ç‚¹\n\n- DOMå…ƒç´ `è¯»å†™åˆ†ç¦»`\n- è®©è¿›è¡Œå¤§é‡åŠ¨ç”»çš„å…ƒç´ `è„±ç¦»æ–‡æ¡£æµï¼Œ`å‡å°‘é‡æ’å¼€é”€\n- é€šè¿‡æ”¹å˜å…ƒç´ çš„`classæˆ–csstextä¸€``æ¬¡æ€§çš„æ›´æ”¹æ ·å¼`\n- `ç¼“å­˜DOMå…ƒç´ çš„ä½ç½®ä¿¡æ¯`ï¼Œé¿å…ä¸å¿…è¦çš„å±æ€§è¯»å–\n- å°½é‡ä½¿ç”¨`ç¦»çº¿DOM`\n- ä½¿ç”¨`css3 transform`ä¼˜åŒ–åŠ¨ç”»æ€§èƒ½\n- ç²¾ç®€DOMï¼Œåˆç†å¸ƒå±€\n- ä½¿ç”¨`transform`ä»£æ›¿`left`ã€`top`å‡å°‘ä½¿ç”¨å¼•èµ·é¡µé¢é‡æ’çš„å±æ€§\n- å¼€å¯`ç¡¬ä»¶åŠ é€Ÿ`\n- å°½é‡`é¿å…æµè§ˆå™¨åˆ›å»ºä¸å¿…è¦çš„å›¾å½¢å±‚`\n- å°½é‡å‡å°‘`jsåŠ¨ç”»`ï¼Œå¦‚éœ€è¦ï¼Œä½¿ç”¨å¯¹æ€§èƒ½å‹å¥½çš„`requestAnimationFrame`\n- ä½¿ç”¨`chrome performanceå·¥`å…·è°ƒè¯•åŠ¨ç”»æ€§èƒ½\n- `requestIdleCallback(fn);`\n\n## 5. RAIL  æ¨¡å‹\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241025-14.png)\n\n- ç”¨æˆ·çš„è¾“å…¥åˆ°å“åº”çš„æ—¶é—´ä¸è¶…è¿‡`100ms`ï¼Œç»™ç”¨æˆ·çš„æ„Ÿå—æ˜¯ç¬é—´å°±å®Œæˆäº†\n\t- äº‹ä»¶å¤„ç†å‡½æ•°åœ¨`50ms`å†…å®Œæˆ\n- äº§ç”Ÿæ¯ä¸€å¸§çš„æ—¶é—´ä¸è¦è¶…è¿‡`10ms`\n\t- ä¸ºäº†ä¿è¯æµè§ˆå™¨`60å¸§ï¼Œ`æ¯ä¸€å¸§çš„æ—¶é—´åœ¨`16ms`å·¦å³ï¼Œ\n\t- ä½†æµè§ˆå™¨éœ€è¦ç”¨`6ms`æ¥æ¸²æŸ“æ¯ä¸€å¸§\n-  æœ€å¤§åŒ–ç©ºé—²æ—¶é—´ï¼Œä»¥å¢å¤§`50ms`å†…å“åº”ç”¨æˆ·è¾“å…¥çš„å‡ ç‡\n- æ‰“å¼€æ—¶é—´ä¸è¶…è¿‡5ç§’\n\t- å¯¹äºç¬¬äºŒæ¬¡æ‰“å¼€ï¼Œå°½é‡ä¸è¶…è¿‡2ç§’\n\n## 6. æ€§èƒ½ä¼˜åŒ–æ€è·¯\n\n### 6.1. ç¼“å­˜\n\n- æœ¬åœ°ç¼“å­˜ï¼šlocalStorageã€sessionStorageã€indexedDB\n- å†…å­˜ç¼“å­˜ï¼šMemory Cache\n- Cache APIï¼šService Worker\n- HTTP ç¼“å­˜\n\t- å¼ºç¼“å­˜ï¼š\n\t\t-  æ§åˆ¶å¼ºåˆ¶ç¼“å­˜çš„å­—æ®µåˆ†åˆ«æ˜¯`Expires`å’Œ`Cache-Control`ï¼Œå…¶ä¸­ `Cache-Controlï¼šmax-age=xxx`ä¼˜å…ˆçº§æ›´é«˜\n\t\t- æµè§ˆå™¨ä¼šåœ¨`jså’Œå›¾ç‰‡ç­‰æ–‡ä»¶`è§£ææ‰§è¡Œåç›´æ¥å­˜å…¥`å†…å­˜ç¼“å­˜`ä¸­ï¼Œå³ `from Memory Cache`\n\t\t- cssæ–‡ä»¶ï¼šæ¯æ¬¡æ¸²æŸ“é¡µé¢éƒ½éœ€è¦ä»ç¡¬ç›˜è¯»å–ç¼“å­˜ï¼Œå³ from disk cache\n\t- åå•†ç¼“å­˜ï¼š\n\t\t- å³ é—®ä¸€é—®æœåŠ¡å™¨æœ¬åœ°èµ„æºå¯ä»¥ç”¨å—\n\t\t\t- 200 æ›´æ–°äº†\n\t\t\t- 304 æ²¡æ›´æ–°ï¼Œç›´æ¥ç”¨å§\n\t\t- `Etag / If-None-Match`çš„ä¼˜å…ˆçº§æ¯” `Last-Modified / If-Modified-Since`é«˜\n\t- Push Cache ï¼š HTTP2 æ”¯æŒï¼Œè®¿é—® index.html ï¼ŒåŒæ—¶æ¨é€å¿…è¦css å’Œ js ç­‰\n\t\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241025-15.png)\n\n### 6.2. å®¢æˆ·ç«¯è¯·æ±‚\n\n- é¿å…è¿‡å¤šå¤šä½™é‡é‡å®šå‘\n- `<link rel=\"dns-prefetch\" href=\"//yourwebsite.com\">`\n- `<link rel=\"preconnect\" href=\"//sample.com\" crossorigin>`\n\n### 6.3. æœåŠ¡ç«¯å“åº”\n\n- æµå“åº”\n- å‰ç«¯èšåˆä¸åç«¯èšåˆï¼šnodejs å±€åŸŸç½‘å†…èšåˆåç«¯å¤šä¸ªæœåŠ¡è‚¯å®šå¿«äº å‰ç«¯èšåˆï¼Œå¦å¤–æ³¨æ„é¦–å±æ•°æ®å°±å¥½\n- Nodejs\n\t- èƒ½å¹¶è¡Œçš„å¹¶è¡Œï¼Œå°‘ä¸²è¡Œï¼šasync await \n\t- å®ˆæŠ¤è¿›ç¨‹ï¼ˆpm2/supervisorï¼‰åˆå°†è¿›ç¨‹é‡å¯\n\t- å¼‚å¸¸ç›‘æ§ï¼Œå°‘é‡å¯\n\t- ä»£ç é—®é¢˜\n\t\t- JSON.parse å¤§å¯¹è±¡\n\t\t- é—­åŒ…ï¼Œå†…å­˜æ³„æ¼\n\n### 6.4. é™æ€èµ„æº\n\n#### 6.4.1. js  \n- æ‹†ã€æŒ‰éœ€åŠ è½½  \n- åˆå¹¶å‹ç¼©  \n- Tree Shaking  \n- é¿å… Long Task  \n- åå…¶é“è€Œè¡Œä¹‹ï¼Œä¸ç”¨æ¡†æ¶  \n- åŸºç¡€åº“ä»£ç æ‰“åŒ…åˆå¹¶  \n#### 6.4.2. css  \n\n- é¿å…ä½¿ç”¨æ˜‚è´µçš„å±æ€§ ï¼šborder-radius box-shadow opacity transform filter position: fixed  \n- flex å¸ƒå±€å–ä»£ float  \n- é€‰æ‹©å™¨ç®€åŒ–  \n\n#### 6.4.3. å›¾ç‰‡\n\n- æ ¹æ®è®¾å¤‡çš„åˆ†è¾¨ç‡ä¼˜åŒ–å›¾ç‰‡å¤§å°  \n- ä½¿ç”¨å›¾ç‰‡çš„ ç¼©ç•¥å›¾  \n- é¦–å±ä¼˜å…ˆåŠ è½½ï¼Œæ‡’åŠ è½½\n\t- background-url  æ‡’åŠ è½½è§„åˆ™\n\t\t- è¿™ä¸ªæ ·å¼è§„åˆ™ï¼Œå¦‚æœä¸åº”ç”¨åˆ°å…·ä½“çš„å…ƒç´ ï¼Œæµè§ˆå™¨ä¸ä¼šå»ä¸‹è½½è¯¥å›¾ç‰‡ã€‚\n\t\t- æ‰€ä»¥ä½ å¯ä»¥é€šè¿‡åˆ‡æ¢ className çš„æ–¹å¼ï¼Œæ”¾å¿ƒå¾—è¿›è¡Œ CSS ä¸­å›¾ç‰‡çš„æ‡’åŠ è½½ã€‚\n\t- è‡ªå·±å®ç°\n\t\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241025-16.png)\n- é€‰æ‹©é€‚åˆå¤§å°å’Œåˆ†è¾¨ç‡\n- å›¾ç‰‡å‹ç¼©ï¼Œåˆ é™¤å†—ä½™ä¿¡æ¯ï¼Œæ¯”å¦‚jpgå¤§å°èƒ½å‡å°‘15%\n- webp\n- `svg`å‹ç¼©\n\n#### 6.4.4. å­—ä½“\n\n- æœ€ç®€å•çš„ä¼˜åŒ–æ–¹å¼æ˜¯å°½å¯èƒ½ä½¿ç”¨**ç³»ç»Ÿå­—ä½“**ã€‚è¿™æ ·å¯ä»¥é¿å…é¢å¤–çš„å­—ä½“æ–‡ä»¶ä¸‹è½½ï¼Œä»è€Œæé«˜é¡µé¢åŠ è½½é€Ÿåº¦\n- å†…è”å…³é”®å­—ä½“ï¼Œ`base64`\n- å­—ä½“å­é›†åŒ–ï¼ˆSubsettingï¼‰\n\t- å¦‚æœå¿…é¡»ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“ï¼Œå¯ä»¥è€ƒè™‘å­—ä½“å­é›†åŒ–ã€‚è¿™æ„å‘³ç€åªåŒ…å«ç½‘ç«™å®é™…ä½¿ç”¨çš„å­—ç¬¦ï¼Œè€Œä¸æ˜¯æ•´ä¸ªå­—ä½“æ–‡ä»¶\n\t- ä¸å°‘å·¥å…·æ”¯æŒ\n- ä½¿ç”¨ WOFF2 æ ¼å¼çš„å­—ä½“æ–‡ä»¶ã€‚è¿™æ˜¯ç›®å‰å‹ç¼©ç‡æœ€é«˜çš„å­—ä½“æ ¼å¼ï¼Œå¯ä»¥æ˜¾è‘—å‡å°æ–‡ä»¶å¤§å°\n- å­—ä½“é¢„åŠ è½½ï¼šä½¿ç”¨ `<link rel=\"preload\">` æ¥é¢„åŠ è½½å…³é”®å­—ä½“æ–‡ä»¶ï¼Œè¿™å¯ä»¥ç¡®ä¿å­—ä½“å°½æ—©å¼€å§‹ä¸‹è½½\n- ä½¿ç”¨ `font-display` å±æ€§æ¥æ§åˆ¶å­—ä½“åŠ è½½æ—¶çš„æ˜¾ç¤ºè¡Œä¸º\n- å¼‚æ­¥åŠ è½½éå…³é”®å­—ä½“ï¼šä½¿ç”¨ `new FontFace` ç±»ä¼¼äº `new Image`\n\n#### 6.4.5. è§†é¢‘\n\n- å‹ç¼©\n- é€‰æ‹©åˆé€‚æ ¼å¼\n- ä½¿ç”¨æµ\n\n### 6.5. è¿è¡Œæ—¶&é¡µé¢æ¸²æŸ“\n\n- ä½¿ç”¨ window.requestAnimationFrame é¿å…**åŒæ­¥å¸ƒå±€**\n- æ‰¹é‡åŒ–æ“ä½œï¼Œæˆ–è€…è¯´æ˜¯ è¯»å†™åˆ†ç¦»\n- é•¿åˆ—è¡¨ä¼˜åŒ–\n- ä»»åŠ¡åˆ†è§£ï¼šæŠŠ 10 äº¿æ¬¡åˆ†æ•£ä¸ºåä¸ª 1 äº¿æ¬¡çš„å­ä»»åŠ¡\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241025-17.png)\n- éå…³é”®è·¯å¾„å»¶è¿Ÿæ‰§è¡Œï¼š`setTimeout()/ requestIdleCallback`\n- æ–°å¼€çº¿ç¨‹è¾…åŠ©è®¡ç®—: `worker`\n- å–„ç”¨åˆæˆï¼š `Composite`\n\t- ä¼šäº¤ç”± GPU åˆæˆï¼Œæ¯” CPU å¤„ç†è¦å¿«\n- èŠ‚æµ å’Œ é˜²æŠ–\n- Passive event listeners ä¼˜åŒ–æ»šåŠ¨æ€§èƒ½\n\t- éšç€ç§»åŠ¨ç«¯æ™®åŠï¼Œæµè§ˆå™¨åœ¨å¤„ç†æŸäº›äº‹ä»¶ï¼ˆå¦‚ scrollã€touchstartã€touchmove ç­‰ï¼‰æ—¶é¢ä¸´ä¸€ä¸ª**å›°å¢ƒ**ï¼š\n\t\t- æµè§ˆå™¨ä¸çŸ¥é“äº‹ä»¶ç›‘å¬å™¨æ˜¯å¦ä¼šè°ƒç”¨ preventDefault()\n\t\t- ä¸ºäº†å®‰å…¨èµ·è§ï¼Œæµè§ˆå™¨å¿…é¡»ç­‰å¾…äº‹ä»¶ç›‘å¬å™¨æ‰§è¡Œå®Œæ¯•\n\t\t- è¿™å¯¼è‡´äº†ä¸»çº¿ç¨‹é˜»å¡ï¼Œé€ æˆæ»šåŠ¨å“åº”å»¶è¿Ÿ\n\t- æµè§ˆå™¨å¼€å‘è€…é¢ä¸´ä¸€ä¸ªä¸¤éš¾é€‰æ‹©ï¼š\n\t\t- ç­‰å¾… JavaScript æ‰§è¡Œå®Œæ¯•å†æ»šåŠ¨ï¼Œä¿è¯æ­£ç¡®æ€§ä½†ç‰ºç‰²æ€§èƒ½\n\t\t- ç«‹å³æ»šåŠ¨ï¼Œæé«˜æ€§èƒ½ä½†å¯èƒ½å¯¼è‡´ä¸æ­£ç¡®çš„è¡Œä¸º\n\t- è§£å†³æ–¹æ¡ˆï¼š\n\t\t- å½“æ·»åŠ äº‹ä»¶ç›‘å¬å™¨æ—¶ï¼ŒæŒ‡å®šÂ `{passive: true}`Â é€‰é¡¹\n\t\t\t- å…è®¸å¼€å‘è€…æ˜ç¡®å‘ŠçŸ¥æµè§ˆå™¨ï¼šäº‹ä»¶ç›‘å¬å™¨ä¸ä¼šè°ƒç”¨ preventDefault()\n\t\t\t\t- å³ä½¿ JavaScript å°è¯•è°ƒç”¨ preventDefault()ï¼Œä¹Ÿä¼šè¢«å¿½ç•¥\n\t\t\t- æµè§ˆå™¨å¯ä»¥ç«‹å³å¼€å§‹æ»šåŠ¨ï¼Œè€Œä¸å¿…ç­‰å¾… JavaScript æ‰§è¡Œ\n\n### 6.6. é¢„åŠ è½½ ä¸ é¢„æ¸²æŸ“\n\n- `<link rel=\"preload\" href=\"./nextpage.js\" as=\"script\">`\n- `<link rel=\"preload\" as=\"video\" href=\"/static/sample.mp4\">\n- `<link rel=\"prerender\" href=\"//sample.com/nextpage.html\">`\n\n### 6.7. å…¶ä»–\n\n- CI/CD é›†æˆåˆ†æå·¥å…· lighthouse ç­‰\n- æ¥å…¥æ€§èƒ½ç›‘æ§å¹³å°\n\n## 7. websocket ä¸ HTTP çš„åŒºåˆ«\n\n- è¿æ¥æ–¹å¼\n\t- wsï¼šé•¿è¿æ¥ã€æœ‰çŠ¶æ€\n\t- httpï¼šçŸ­è¿æ¥ã€æ— çŠ¶æ€\n- éƒ½åŸºäº TCPï¼Œéƒ½ä½¿ç”¨ res/req æ¨¡å‹\n- wss ä¸ https\n- ä¼ é€’æ–¹å¼ï¼š\n\t- httpï¼šæ–‡æœ¬ \n\t- http2ï¼šäºŒè¿›åˆ¶\n\t- wsï¼š åè®®å¸§\n- ws ä½¿ç”¨ HTTP å»ºç«‹è¿æ¥ï¼Œå¦‚ä¸‹å›¾\n\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241025-18.png)\n\n## 8. è¯´è¯´ HTTP1.0 ã€http1.1ã€httpsã€http2 ã€ http3 çš„åŒºåˆ«\n\n- `HTTP1.0` \n\t- æ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦å»ºç«‹ TCP è¿æ¥\n\t- éƒ½æ˜¯ä¸²è¡Œè¯·æ±‚\n\t- æ˜¯ä¸€ä¸ªå¿…é¡»è¢«æ·˜æ±°çš„åè®®\n- HTTP 1.1 \n\t- å¯ä»¥è®¾ç½® `keepalive` æ¥è®©HTTP**é‡ç”¨**TCPé“¾æ¥ï¼Œå³æ‰€è°“çš„ HTTP  é•¿è¿æ¥ï¼Œçœå» ä¸‰æ¬¡æ¡æ‰‹çš„å·¨å¤§å¼€é”€\n\t- æ”¯æŒ`pipeline`ç½‘ç»œä¼ è¾“ï¼Œå³\n\t\t- å®¢æˆ·ç«¯å¯ä»¥è¿ç»­å‘é€å¤šä¸ªè¯·æ±‚ï¼Œè€Œä¸éœ€è¦ç­‰å¾…æœåŠ¡å™¨çš„å“åº”ã€‚\n\t\t- æœåŠ¡å™¨å¿…é¡»æŒ‰ç…§æ¥æ”¶è¯·æ±‚çš„é¡ºåºè¿”å›å“åº”ã€‚\n\t\t- æ‰€æœ‰çš„è¯·æ±‚å’Œå“åº”éƒ½é€šè¿‡åŒä¸€ä¸ª TCP è¿æ¥ä¼ è¾“\n\t\t- pipeline çš„**å¯¹å¤´é˜»å¡**é—®é¢˜\n\t\t\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241026-1.png)\n- HTTP 2.0 \n\t- æ”¯æŒæœåŠ¡ç«¯ push \n\t- äºŒè¿›åˆ¶åˆ†å¸§åè®®\n\t- å¤šè·¯å¤ç”¨\n\t\t-  åœ¨åŒä¸€ä¸ª TCP è¿æ¥ä¸­ï¼Œå¯ä»¥åŒæ—¶å‘é€å’Œæ¥æ”¶å¤šä¸ª HTTP è¯·æ±‚/å“åº”ã€‚\n\t\t- æ‰€æœ‰è¯·æ±‚éƒ½æ˜¯å¹¶è¡Œçš„ï¼Œä¸éœ€è¦æŒ‰é¡ºåºç­‰å¾…\n\t\t- å·¥ä½œåŸç†\n\t\t\t- è¯·æ±‚è¢«åˆ†æˆå°çš„æ•°æ®å¸§\n\t\t\t- æ¯ä¸ªå¸§éƒ½å¸¦æœ‰**æ ‡è¯†**ï¼Œè¡¨æ˜å±äºå“ªä¸ªè¯·æ±‚\n\t\t\t- æœåŠ¡å™¨å¯ä»¥åŒæ—¶å¤„ç†è¿™äº›å¸§ï¼Œå¹¶ä»¥ä»»æ„é¡ºåºè¿”å›\n\t\t\t- å®¢æˆ·ç«¯æ ¹æ®æ ‡è¯†é‡ç»„è¿™äº›å¸§\n\t- äºŒè¿›åˆ¶çš„`æµ`ä¸`å¸§`\n\t\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241026.png)\n\t- HTTP 2.0 çš„ **é˜Ÿå¤´é˜»å¡**ï¼ˆHead-of-Line Blockingï¼‰é—®é¢˜\n\t\t- é—®é¢˜åŸå› ï¼š\n\t\t\t- è™½ç„¶ HTTP/2 åœ¨åº”ç”¨å±‚å®ç°äº†å¤šè·¯å¤ç”¨ï¼Œä½†å®ƒä»ç„¶ä¾èµ–äº TCP è¿™ä¸ªå¯é çš„ä¼ è¾“å±‚åè®®ï¼Œå¹¶ä¸” HTTP/2 çš„å¤šè·¯å¤ç”¨å»ºç«‹åœ¨`å•ä¸ª TCP è¿æ¥ä¹‹ä¸Š`\n\t\t\t- å½“ TCP ä¸¢åŒ…æ—¶ï¼Œæ•´ä¸ª TCP æµéƒ½ä¼šæš‚åœï¼Œç­‰å¾…ä¸¢å¤±çš„åŒ…è¢«é‡ä¼ \n\t\t\t- è¿™æ„å‘³ç€æ‰€æœ‰çš„ HTTP/2 æµéƒ½ä¼šè¢«é˜»å¡ï¼Œå³ä½¿å®ƒä»¬æ˜¯ç›¸äº’ç‹¬ç«‹çš„\n- HTTP 3.0 \n\t- æ— è®º http1.0  çš„ pipleine å’Œ http2.0 çš„å¤šè·¯å¤ç”¨ï¼Œéƒ½ä¼šå‡ºç° **é˜Ÿå¤´é˜»å¡**\n\t- å› ä¸º TCPæ˜¯æ— è§£äº†ï¼Œä½†æ˜¯UDPæ˜¯æœ‰è§£çš„ \n\t\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241026-2.png)\n\n## 9. è¯·ç®€è¿° HTTP/3.0 å¦‚ä½•è§£å†³é˜Ÿå¤´é˜»å¡é—®é¢˜\n\nHTTP/3.0 é€šè¿‡ä»¥ä¸‹å‡ ä¸ªå…³é”®æœºåˆ¶è§£å†³äº†é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼š\n\n### 9.1. åŸºäº QUIC çš„è®¾è®¡\n\n- HTTP/3 å®Œå…¨åŸºäº QUIC åè®®ï¼Œè€Œä¸æ˜¯ TCP\n- QUIC æ˜¯å»ºç«‹åœ¨ UDP ä¹‹ä¸Šçš„ä¼ è¾“å±‚åè®®\n- è¿™ä½¿å¾—åè®®èƒ½å¤Ÿå®ç°çœŸæ­£çš„å¤šè·¯å¤ç”¨ï¼Œ**æ¯ä¸ªæµéƒ½æ˜¯å®Œå…¨ç‹¬ç«‹çš„**Â \n\n### 9.2. ç‹¬ç«‹çš„æµå¤„ç†\n\n- æ¯ä¸ª HTTP è¯·æ±‚éƒ½åœ¨ç‹¬ç«‹çš„ QUIC æµä¸­å¤„ç†\n- ä¸€ä¸ªæµçš„åŒ…ä¸¢å¤±åªä¼šå½±å“è¯¥æµï¼Œä¸ä¼šå½±å“å…¶ä»–æµ\n- æ•°æ®å¯ä»¥æŒ‰**ä»»æ„é¡ºåº**åˆ°è¾¾ï¼Œ**ä¸éœ€è¦ä¸¥æ ¼æ’åº**\n\n### 9.3. å…·ä½“å·¥ä½œæœºåˆ¶\n\n- å½“å‘ç”Ÿä¸¢åŒ…æ—¶ï¼Œåªæœ‰ä¸¢åŒ…çš„é‚£ä¸ªç‰¹å®šæµä¼šç­‰å¾…é‡ä¼ \n- å…¶ä»–æµå¯ä»¥ç»§ç»­æ­£å¸¸ä¼ è¾“æ•°æ®\n- æ¯ä¸ªæµéƒ½æœ‰è‡ªå·±çš„æµæ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶æœºåˆ¶\n\n### 9.4. ä¼˜åŠ¿ä½“ç°\n\n- åœ¨é«˜ä¸¢åŒ…ç‡çš„ç½‘ç»œç¯å¢ƒä¸‹æ€§èƒ½æ›´å¥½\n- ç‰¹åˆ«é€‚åˆç§»åŠ¨ç½‘ç»œç­‰ä¸ç¨³å®šçš„ç½‘ç»œç¯å¢ƒ\n- æ˜¾è‘—å‡å°‘äº†æ•´ä½“çš„å»¶è¿Ÿæ—¶é—´\n\n### 9.5. å®é™…åº”ç”¨åœºæ™¯ï¼š å‡è®¾ä¸€ä¸ªç½‘é¡µåŒæ—¶åŠ è½½å¤šä¸ªèµ„æº\n\n- å›¾ç‰‡æµä¸¢åŒ… â†’ **åªå½±å“è¯¥å›¾ç‰‡çš„åŠ è½½**\n- CSS æ–‡ä»¶ç»§ç»­æ­£å¸¸åŠ è½½\n- JavaScript æ–‡ä»¶ç»§ç»­æ­£å¸¸åŠ è½½\n- HTML å†…å®¹ç»§ç»­æ­£å¸¸ä¼ è¾“\n\n### 9.6. ä¸ HTTP/2 çš„å¯¹æ¯”\n\n- HTTP/2ï¼šä¸€ä¸ª TCP åŒ…ä¸¢å¤±ä¼š**é˜»å¡æ‰€æœ‰æµ**\n- HTTP/3ï¼šä¸€ä¸ªåŒ…ä¸¢å¤±åªå½±å“ç›¸å…³çš„å•ä¸ªæµ\n- è¿™ç§å·®å¼‚åœ¨é«˜å»¶è¿Ÿæˆ–ä¸ç¨³å®šçš„ç½‘ç»œä¸­ç‰¹åˆ«æ˜æ˜¾ \n\n### 9.7. é¢å¤–ä¼˜åŒ–\n\n- 0-RTT è¿æ¥å»ºç«‹\n- æ”¹è¿›çš„æ‹¥å¡æ§åˆ¶\n- è¿æ¥è¿ç§»æ”¯æŒï¼ˆæ¯”å¦‚ä» WiFi åˆ‡æ¢åˆ° 4G æ—¶ä¿æŒè¿æ¥\n\n## 10. è¯·ç®€è¿° QUIC \nQUICï¼ˆQuick UDP Internet Connectionsï¼‰æ˜¯ä¸€ä¸ªå»ºç«‹åœ¨ UDP ä¹‹ä¸Šçš„ä¼ è¾“å±‚åè®®ï¼Œå®ƒ**è§£å†³äº† UDP çš„ä¸å¯é æ€§**\n\n### 10.1. åŸºç¡€æ¶æ„\n\n- åŸºäº UDP æ„å»ºï¼Œä½†æä¾›äº†ç±»ä¼¼ TCP çš„å¯é æ€§\n- å°†ä¼ è¾“å±‚å’ŒåŠ å¯†å±‚åˆäºŒä¸ºä¸€\n- åœ¨åº”ç”¨å±‚å®ç°äº†æ‹¥å¡æ§åˆ¶å’Œå¯é ä¼ è¾“\n\n### 10.2. æ ¸å¿ƒç‰¹æ€§\n\n- 0-RTT è¿æ¥å»ºç«‹ï¼šåœ¨å·²çŸ¥æœåŠ¡å™¨çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç«‹å³å‘é€æ•°æ®\n- å†…ç½®åŠ å¯†ï¼šæ‰€æœ‰ QUIC æ•°æ®éƒ½é»˜è®¤åŠ å¯†ï¼Œä½¿ç”¨ TLS 1.3\n- è¿æ¥è¿ç§»ï¼šæ”¯æŒç½‘ç»œåˆ‡æ¢ï¼ˆå¦‚ä» WiFi åˆ‡æ¢åˆ° 4Gï¼‰è€Œä¿æŒè¿æ¥\n\n### 10.3. å¤šè·¯å¤ç”¨ä¼˜åŠ¿\n\n- ç‹¬ç«‹çš„æµå¤„ç†ï¼šæ¯ä¸ªæµéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œé¿å…é˜Ÿå¤´é˜»å¡\n- å¹¶è¡Œä¼ è¾“ï¼šå¤šä¸ªæµå¯ä»¥åŒæ—¶ä¼ è¾“æ•°æ®\n- çµæ´»çš„æµæ§åˆ¶ï¼šæ¯ä¸ªæµéƒ½æœ‰è‡ªå·±çš„æµæ§åˆ¶æœºåˆ¶ \n\n### 10.4. å®‰å…¨ç‰¹æ€§\n\n- æ‰€æœ‰æ•°æ®å¼ºåˆ¶åŠ å¯†\n- åŠ å¯†å’Œä¼ è¾“åè®®é›†æˆ\n- æ›´å¥½çš„éšç§ä¿æŠ¤ï¼šå‡å°‘äº†æ˜æ–‡å…ƒæ•°æ® \n\n### 10.5. æ€§èƒ½ä¼˜åŒ–\n\n- å¿«é€Ÿæ¡æ‰‹ï¼šå‡å°‘è¿æ¥å»ºç«‹æ—¶é—´\n- æ”¹è¿›çš„æ‹¥å¡æ§åˆ¶\n- æ›´å¥½çš„ä¸¢åŒ…æ¢å¤æœºåˆ¶ \n\n### 10.6. å®é™…åº”ç”¨ä¼˜åŠ¿\n\n- å‡å°‘å»¶è¿Ÿï¼šç‰¹åˆ«æ˜¯åœ¨å»ºç«‹è¿æ¥æ—¶\n- æ›´å¥½çš„ç§»åŠ¨æ”¯æŒï¼šæ”¯æŒç½‘ç»œåˆ‡æ¢ï¼Œæé«˜ç§»åŠ¨åœºæ™¯ä¸‹çš„æ€§èƒ½\n- æ›´å¥½çš„æµåª’ä½“å’Œå®æ—¶é€šä¿¡æ”¯æŒ \n- æ”¹è¿›çš„å®‰å…¨æ€§ï¼šé»˜è®¤åŠ å¯†æ‰€æœ‰é€šä¿¡\n- æé«˜å¯é æ€§ï¼šç‰¹åˆ«æ˜¯åœ¨ä¸ç¨³å®šçš„ç½‘ç»œç¯å¢ƒä¸‹\n\n### 10.7. ä¸ä¼ ç»Ÿåè®®çš„åŒºåˆ«\n\n- TCPï¼šä¸¥æ ¼çš„é¡ºåºä¼ è¾“ï¼Œå­˜åœ¨é˜Ÿå¤´é˜»å¡\n- QUICï¼šçµæ´»çš„æ•°æ®ä¼ è¾“ï¼Œé¿å…é˜Ÿå¤´é˜»å¡\n- UDPï¼šä¸å¯é ä¼ è¾“\n- QUICï¼š**åœ¨ UDP ä¹‹ä¸Šæ„å»ºå¯é ä¼ è¾“**\n\nQUIC åè®®çš„è¿™äº›ç‰¹æ€§ä½¿å®ƒç‰¹åˆ«é€‚åˆç°ä»£äº’è”ç½‘åº”ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨ç§»åŠ¨ç½‘ç»œç¯å¢ƒä¸‹ã€‚å®ƒå·²ç»æˆä¸º HTTP/3 çš„åŸºç¡€ï¼Œå¹¶ä¸”æ­£åœ¨è¢«è¶Šæ¥è¶Šå¤šçš„å¤§å‹ç½‘ç«™å’ŒæœåŠ¡é‡‡ç”¨ã€‚\n\n## 11. è¯·ç®€è¿° HTTPS  åè®®\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241026-5.png)\n\n- è¯ä¹¦æœºåˆ¶ï¼š\n\t- ç½‘ç«™éœ€è¦è·å– SSL/TLS è¯ä¹¦\n\t- è¯ä¹¦åŒ…å«ç½‘ç«™çš„å…¬é’¥å’Œèº«ä»½ä¿¡æ¯\n\t- ç”±å¯ä¿¡çš„è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ç­¾å‘\n- åŠ å¯†æœºåˆ¶ï¼š\n\t- ä½¿ç”¨**éå¯¹ç§°åŠ å¯†**ï¼ˆå…¬é’¥/ç§é’¥ï¼‰**å»ºç«‹åˆå§‹è¿æ¥**\n\t- ä½¿ç”¨**å¯¹ç§°åŠ å¯†**è¿›è¡Œå®é™…æ•°æ®ä¼ è¾“\n\t- ç»“åˆä¸¤ç§åŠ å¯†æ–¹å¼çš„ä¼˜åŠ¿\n- é€šä¿¡è¿‡ç¨‹\n\t- å®¢æˆ·ç«¯å‘èµ· HTTPS è¯·æ±‚\n\t- æœåŠ¡å™¨å‘é€ SSL è¯ä¹¦\n\t- éªŒè¯è¯ä¹¦å¹¶äº¤æ¢å¯†é’¥\n\t- å»ºç«‹åŠ å¯†é€šä¿¡é€šé“\n\t- å®‰å…¨ä¼ è¾“æ•°æ®\n- ä¸¤ä¸ªé˜¶æ®µï¼š\n\t- â‘  è¯ä¹¦éªŒè¯\n\t\t- ä¸‰æ–¹ CA è¯ä¹¦è®¤è¯\n\t- â‘¡ æ•°æ®ä¼ è¾“\n\t\t- éå¯¹ç§°åŠ å¯†ï¼šéœ€è¦äº§å‡º å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å…±äº«çš„ `éšæœºç  key` ï¼Œç”¨äºä¸‹é¢çš„å¯¹ç§°åŠ å¯†\n\t\t\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241026-4.png)\n\t\t- å¯¹ç§°åŠ å¯†\n\t\t\t- æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å…±äº« `éšæœºç  key` ï¼Œåˆ†åˆ«ç”¨å®ƒåŠ å¯†å’Œè§£å¯†\n\n## 12. ç®€è¿°ç½‘ç»œä¸ƒå±‚åè®®\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241026-6.png)\n\n## 13. å¦‚ä½•æŸ¥æ‰¾å†…å­˜æ³„æ¼\n\n- å†…å­˜æ³„æ¼æ˜¯æŒ‡ç¨‹åºä¸­å·²åˆ†é…çš„å†…å­˜ç”±äºæŸäº›åŸå› æ— æ³•è¢«æ­£å¸¸é‡Šæ”¾ã€‚\n- åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œå¸¸è§çš„å†…å­˜æ³„æ¼åœºæ™¯åŒ…æ‹¬æœªæ¸…é™¤çš„äº‹ä»¶ç›‘å¬å™¨ã€å®šæ—¶å™¨ã€é—­åŒ…å¼•ç”¨ç­‰ã€‚\n- æˆ‘ä»¬å¯ä»¥é€šè¿‡ \n\t- Chrome DevTools çš„ Memory é¢æ¿æ¥æ£€æµ‹å†…å­˜æ³„æ¼\n\t\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241026-7.png)\n\t- ç¼–ç æ£€æµ‹\n\t\t- ![å›¾ç‰‡&æ–‡ä»¶](./files/20241026-8.png)\n- åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä¼šç‰¹åˆ«æ³¨æ„åœ¨ç»„ä»¶å¸è½½æ—¶æ¸…ç†å‰¯ä½œç”¨ï¼Œä½¿ç”¨ WeakMap/WeakSet æ¥å¤„ç†ç¼“å­˜ï¼Œé¿å…é—­åŒ…æ»¥ç”¨ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬å›¢é˜Ÿä¹Ÿå»ºç«‹äº†å®Œæ•´çš„**æ€§èƒ½ç›‘æ§ä½“ç³»**ï¼ŒåŒ…æ‹¬è‡ªåŠ¨åŒ–çš„å†…å­˜æ³„æ¼æ£€æµ‹\n\n## 14. tcpæ€ä¹ˆåœ¨`ä¸å¯é çš„ä¼ è¾“`ä¸Šä¿è¯`å¯é ` çš„\n\nå…¶å®å°±æ˜¯`ä½ç½®æ ‡è®°` ï¼Œä»–å¯ä»¥æ ‡è®°ä½ç½®\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241026-9.png)\n\n## 15. ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹\n\n- ä¸€ä¸ªç”¨äº**è¿æ¥**ï¼Œä¸€ä¸ªç”¨äº**å…³é—­**\n- è¿æ¥ä¸‰æ¬¡æ¡æ‰‹çš„å¿…è¦æ€§\n\t- ç¡®è®¤åŒæ–¹çš„æ”¶å‘èƒ½åŠ›\n\t\t- ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šè¡¨æ˜`å®¢æˆ·ç«¯`æœ‰å‘é€èƒ½åŠ›\n\t\t- ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šè¡¨æ˜`æœåŠ¡å™¨`æœ‰æ¥æ”¶å’Œå‘é€èƒ½åŠ›\n\t\t- ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šè¡¨æ˜`å®¢æˆ·ç«¯`æœ‰æ¥æ”¶èƒ½åŠ›\n\t- é˜²æ­¢å†å²è¿æ¥çš„å»ºç«‹\n\t- åŒæ­¥åŒæ–¹çš„åˆå§‹åºåˆ—å·\n- å…³é—­å››æ¬¡æŒ¥æ‰‹çš„å¿…è¦æ€§\n\t- ç¡®ä¿æ•°æ®å®Œæ•´ä¼ è¾“\n\t\t- ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šè¡¨ç¤ºå®¢æˆ·ç«¯ä¸å†å‘é€æ•°æ®ï¼Œ ä½†ä»å¯æ¥æ”¶æ•°æ®\n\t\t- ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šè¡¨ç¤ºæœåŠ¡å™¨çŸ¥é“å®¢æˆ·ç«¯ä¸å†å‘é€æ•°æ®\n\t\t- ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šè¡¨ç¤ºæœåŠ¡å™¨æ•°æ®å‘é€å®Œæ¯•ï¼Œå‡†å¤‡å…³é—­è¿æ¥\n\t\t- ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šç¡®è®¤æ”¶åˆ°æœåŠ¡å™¨çš„ FINï¼Œå®¢æˆ·ç«¯å‘é€ ACK åŒ…ï¼Œè¿›å…¥ TIME_WAIT çŠ¶æ€\n\t- æ”¯æŒåŠå…³é—­\n\t- å¤„ç†å»¶è¿Ÿå’Œé‡ä¼ \n\t- é˜²æ­¢æ—§è¿æ¥å¹²æ‰°\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241026-10.png)\n\n## 16. è¯´è¯´HTTPåè®®çš„ç†è§£\n\nHTTP æ˜¯ä¸€ä¸ªåœ¨`è®¡ç®—æœºä¸–ç•Œ`é‡Œä¸“é—¨åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰è¶…æ–‡æœ¬æ•°æ®çš„çº¦å®šå’Œè§„èŒƒ\n\n## 17. å¸¸è§çš„ HTTP è¯·æ±‚\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241026-11.png)\n\n## 18. ç®€è¿° HTTP å†…å®¹åå•†\n\næ ¹æ®è¯·æ±‚ä¸­çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒæœåŠ¡å™¨å¯ä»¥æœ‰ä¸åŒå“åº”\n\n## 19. HTTP ç¼“å­˜æœºåˆ¶\n\n![568](#)","23891ecf97ad5f0b8b465d2c1d406476":"\n# å‰è¨€\n\n\nç®—æ³•ã€æ•°æ®ç»“æ„ã€åŠ LeetCode åˆ·é¢˜\n","ab8dc56d12b75a90a955e582f5e6dca2":"\n# æ ¸å¿ƒæ¡†æ¶\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## ä¸€å¥è¯æ€»ç»“ \n\n- æ•°æ®ç»“æ„åŸºç¡€çš„å°±ä¸¤ç§\n\t- æ•°ç»„ï¼šé¡ºåºå‚¨å­˜\n\t- é“¾è¡¨ï¼šé“¾å¼å­˜å‚¨\n- ä¸¤ç§æ•°æ®ç»“æ„åªåšä¸¤ä»¶äº‹æƒ…ï¼Œæˆ–è€…è¯´åªåšå¢åˆ æŸ¥æ”¹\n\t- éå†\n\t- è®¿é—®\n- ä¸€èµ·ç®—æ³•çš„æœ¬è´¨æ˜¯**ç©·ä¸¾**\n\n## æœ¬æ–‡ç”»æ¿\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/è®¡ç®—æœºç®—æ³•æ¡†æ¶æ€ç»´.jpg)\n\n## æ•°æ®ç»“æ„çš„å­˜å‚¨æ–¹å¼å°±ä¸¤ç§ï¼šæ•°ç»„å’Œé“¾è¡¨\n\n- å“ˆå¸Œè¡¨\n\t- æ‹‰é“¾æ³•ï¼šé“¾è¡¨\n\t- çº¿æ€§æ¢æµ‹æ³•ï¼šæ•°ç»„\n- æ ˆå’Œé˜Ÿåˆ—\n\t- éƒ½å¯ä½¿ç”¨é“¾è¡¨å’Œæ•°ç»„æ¥å®ç°\n- å †\n\t- ä½¿ç”¨æ•°ç»„å®ç°ï¼Œå› ä¸ºæ˜¯å®Œå…¨äºŒå‰æ ‘\n- æ ‘\n\t- å®Œå…¨äºŒå‰æ ‘ï¼Œé€‚åˆä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨\n\t- éå®Œå…¨äºŒå‰æ ‘ï¼Œé€‚åˆä½¿ç”¨é“¾è¡¨å­˜å‚¨\n- å›¾\n\t- é‚»æ¥è¡¨ï¼šé“¾è¡¨\n\t- é‚»æ¥çŸ©é˜µï¼šäºŒç»´æ•°ç»„\n\n## æ‰€æœ‰æ•°æ®ç»“æ„çš„æ“ä½œï¼Œåªæœ‰è®¿é—®+éå†ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰\n\n- å†æ‹†è§£ï¼Œéå†+è®¿é—®åªæœ‰ä¸¤ç§å½¢å¼\n\t- çº¿æ€§çš„ï¼š for/while\n\t\t- æ•°ç»„éå†\n\t\t- é“¾è¡¨éå†ï¼šåŒæ—¶å…·å¤‡çº¿æ€§å’Œéçº¿æ€§çš„éå†æ–¹å¼\n\t- éçº¿æ€§çš„ï¼šå³é€’å½’\n\t\t- é“¾è¡¨éå†ï¼šåŒæ—¶å…·å¤‡çº¿æ€§å’Œéçº¿æ€§çš„éå†æ–¹å¼\n\t\t- äºŒå‰æ ‘çš„éå†æ˜¯éçº¿æ€§çš„\n\t\t- å¤šå‰æ ‘çš„éå†æ˜¯éçº¿æ€§çš„\n\t\t- å›¾çš„éå†ä¹Ÿæ˜¯éçº¿æ€§çš„\n\nä»¥ä¸‹æ˜¯ä»£ç ç¤ºä¾‹ï¼š\n\n### çº¿æ€§ï¼šæ•°ç»„çš„éå†æ¡†æ¶\n\n```javascript\n/*****************************************\n * çº¿æ€§ï¼šæ•°ç»„çš„éå†æ¡†æ¶\n *****************************************/\nfunction traverse(arr) {\n  for (let i = 0; i < arr.length; i++) {\n    // å¯¹å½“å‰å…ƒç´ è¿›è¡Œæ“ä½œ\n    console.log(arr[i]);\n  }\n}\n```\n\n### çº¿æ€§ï¼šé“¾è¡¨çš„éå†æ¡†æ¶ï¼ˆè®°å¾—ä½¿ç”¨ p å˜é‡ï¼‰\n\n```javascript hl:10,17,22\n/*****************************************\n * çº¿æ€§ï¼šé“¾è¡¨çš„éå†æ¡†æ¶ï¼ˆè®°å¾—ä½¿ç”¨ p å˜é‡ï¼‰\n *****************************************/\nclass ListNode {\n  constructor(val) {\n    this.val = val;\n    this.next = null;\n  }\n}\n// ä½¿ç”¨ for å¾ªç¯\nfunction traverse(node) {\n  for (let p = node; p !== null; p = p.next) {\n    // å¯¹å½“å‰èŠ‚ç‚¹è¿›è¡Œæ“ä½œ\n    console.log(p.val);\n  }\n}\n// ä½¿ç”¨ while å¾ªç¯\nfunction traverse(node) {\n  let p = node;\n  while (p !== null) {\n    // å¯¹å½“å‰èŠ‚ç‚¹è¿›è¡Œæ“ä½œ\n    // æœ‰ç‚¹ç±»ä¼¼äº å‰åºä½ç½®\n    console.log(p.val);\n    p = p.next;\n  }\n}\n\n```\n\n### éçº¿æ€§ï¼ˆé€’å½’ï¼‰ï¼šé“¾è¡¨çš„éå†æ¡†æ¶\n\n```javascript\n/*****************************************\n * éçº¿æ€§ï¼ˆé€’å½’ï¼‰ï¼šé“¾è¡¨çš„éå†æ¡†æ¶\n *****************************************/\nclass ListNode {\n  constructor(val) {\n    this.val = val;\n    this.next = null;\n  }\n}\n// é€’å½’éå†é“¾è¡¨\nfunction traverse(node) {\n  if (node === null) return;\n  console.log(node.val);\n  traverse(node.next);\n}\n\n```\n\n### éçº¿æ€§ï¼ˆé€’å½’ï¼‰ï¼šäºŒå‰æ ‘çš„éå†æ¡†æ¶\n\n```js\n/*****************************************\n * éçº¿æ€§ï¼ˆé€’å½’ï¼‰ï¼šäºŒå‰æ ‘çš„éå†æ¡†æ¶\n *****************************************/\nclass TreeNode {\n  constructor(val) {\n    this.val = val;\n    this.left = this.right = null;\n  }\n}\n// é€’å½’éå†é“¾è¡¨\nfunction traverse(node) {\n  if (node === null) {\n    return;\n  }\n  // å‰åºéå†\n  traverse(node.left);\n  // ä¸­åºéå†\n  traverse(node.right);\n  // ååºéå†\n}\n\n```\n\n### éçº¿æ€§ï¼ˆé€’å½’ï¼‰ï¼šå¤šå‰æ ‘çš„éå†æ¡†æ¶\n\n```js\n/*****************************************\n * éçº¿æ€§ï¼ˆé€’å½’ï¼‰ï¼šå¤šå‰æ ‘çš„éå†æ¡†æ¶\n *****************************************/\nclass Node {\n  constructor(value) {\n    this.value = value;\n    this.children = [];\n  }\n}\n// é€’å½’éå†é“¾è¡¨\nfunction traverse(node) {\n  if (!node) return;\n  console.log(node.value);\n  //å‰åºä½ç½®\n  for (let i = 0; i < node.children.length; i++) {\n    traverse(node.children[i]);\n  }\n  //ååºä½ç½®\n}\n\n```\n\n### éçº¿æ€§ï¼ˆé€’å½’ï¼‰ï¼šå›¾çš„éå†æ¡†æ¶\n\n`N`Â å‰æ ‘çš„éå†åˆå¯ä»¥æ‰©å±•ä¸ºå›¾çš„éå†ï¼Œå› ä¸ºå›¾å°±æ˜¯å¥½å‡ Â `N`Â å‰æ£µæ ‘çš„ç»“åˆä½“ã€‚ä½ è¯´å›¾æ˜¯å¯èƒ½å‡ºç°ç¯çš„ï¼Ÿè¿™ä¸ªå¾ˆå¥½åŠï¼Œç”¨ä¸ªå¸ƒå°”æ•°ç»„Â `visited`Â åšæ ‡è®°å°±è¡Œäº†\n\n## ç®—æ³•çš„æœ¬è´¨æ˜¯ç©·ä¸¾\n\n- æ•°å­¦ç®—æ³•å’Œè®¡ç®—æœºç®—æ³•æ˜¯æœ‰åŒºåˆ«çš„\n\t- æ•°å­¦ç®—æ³•å¯ä»¥æ¨å¯¼å‡ºå…¬å¼\n\t- ä½†è®¡ç®—æœºç®—æ³•ä¸èƒ½ï¼Œåˆ«ä¸€ä¸Šæ¥å°±æƒ³ç€æ¨å¯¼å‡ºå…¬å¼ï¼Œä¸ç„¶å¿…ç„¶æ­»ç¿˜ç¿˜\n- è®¡ç®—æœºæœ€ç‰›é€¼çš„ä¸å°±æ˜¯ç®—çš„å¿«å—ï¼Œ1s è½¬å‡ ä¸‡æ¬¡ï¼Œä½†äººè„‘ä¸è¡Œå•Šï¼Œæ‰€ä»¥æ‰è¯´åˆ«æƒ³ç€åƒè®¡ç®—æœºä¸€æ ·é€’å½’\n- ç©·ä¸¾çš„ä¸¤ä¸ªéš¾ç‚¹\n\t- æ— é—æ¼\n\t\t- å›æº¯ç®—æ³•ï¼šéå†çš„æ€ç»´\n\t\t- åŠ¨æ€è§„åˆ’ç®—æ³•ï¼šåˆ†è§£é—®é¢˜æ€ç»´\n\t\t\t- ä¸ºä½•åˆ†è§£é—®é¢˜çš„æ€ç»´ï¼Ÿ\n\t\t\t\t- æ ‘ä¸Šåªæœ‰ä¸€ç‰‡å¶å­ï¼Œå’Œå‰©ä¸‹çš„å¶å­ \n\t\t\t\t\t- å†åˆ†è§£ï¼šæ ‘ä¸Šåªæœ‰ä¸€ç‰‡å¶å­ï¼Œå’Œå‰©ä¸‹çš„å¶å­ \n\t\t\t\t\t\t- å†åˆ†è§£ï¼šæ ‘ä¸Šåªæœ‰ä¸€ç‰‡å¶å­ï¼Œå’Œå‰©ä¸‹çš„å¶å­ \n\t- å¦‚ä½•é¿å…é‡å¤çš„ç©·ä¸¾ï¼ˆèªæ˜åœ°ç©·ä¸¾ï¼‰\n\t\t- å¤‡å¿˜å½•\n\t\t- ç©ºé—´å‹ç¼©æŠ€å·§\n\t\t- äºŒåˆ†\n\t\t- è¿é€šåˆ†é‡æŠ€å·§ï¼Ÿ\n\t\t- è´ªå¿ƒç­‰\n\t\t- åŒæŒ‡é’ˆ\n\t\t\t- å¿«æ…¢æŒ‡é’ˆ\n\t\t- å‰ç¼€å’Œ\n\t\t- å·®åˆ†æ•°ç»„\n\n## äºŒå‰æ ‘ç®—æ³•ï¼šäºŒå‰æ ‘æ¨¡å‹æ˜¯æ‰€æœ‰é«˜çº§ç®—æ³•çš„åŸºç¡€\n\n- éå†çš„æ€ç»´æ¨¡å¼\n- åˆ†è§£é—®é¢˜çš„æ€ç»´æ¨¡å¼\n\n## å†å›æ¥çœ‹\n\n\n## å‚è€ƒ\n\n\nhttps://www.yuque.com/liguwe/agorithms/eouyflbx4yuu5945\nhttps://labuladong.online/algo/essential-technique/algorithm-summary/\n","797c3950003751ffbbaea5480c3ef007":"\n# è®¡ç®—æœºç®—æ³•çš„æ¡†æ¶æ€ç»´\n\n\n`#2024/01/27`  `#ç®—æ³•` `#ç®—æ³•æ¡†æ¶` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å…ˆåˆ†æ¸…ä¸¤ç§ç®—æ³• \n\nå…ˆåˆ†æ¸…ï¼Œä¸¤ç§ç®—æ³•ï¼Œä»–ä»¬æ˜¯**å®Œå…¨ä¸åŒçš„æ€ç»´**\n\n- è®¡ç®—æœºç®—æ³•\n   - æœ¬è´¨æ˜¯ **ç©·ä¸¾** ï¼Œå› ä¸ºè®¡ç®—æœºå°±æ˜¯**å¿«**\n   - éš¾ç‚¹\n      - ä¸€äº›ç®—æ³•çš„**éš¾ç‚¹**æ˜¯**å¦‚ä½•â€æ— é—æ¼â€œçš„ç©·ä¸¾æ‰€æœ‰å¯èƒ½**\n      - ä¸€äº›ç®—æ³•çš„éš¾ç‚¹æ˜¯**å¦‚ä½•â€èªæ˜â€œçš„ç©·ä¸¾**\n- æ•°å­¦ç®—æ³•\n   - æœ¬è´¨æ˜¯ **æ•°å­¦**\n   - å­¦æ•°å­¦çš„ **åé—ç—‡**  ï¼Œ åˆ«æƒ³ç€Â èƒ½ä¸èƒ½æ¨å¯¼å‡ºä¸€ä¸ªä»€ä¹ˆæ•°å­¦å…¬å¼\n\n## 2. å¦‚ä½•â€æ— é—æ¼â€œçš„ç©·ä¸¾æ‰€æœ‰\n\nå¦‚é€’å½’ç±»é—®é¢˜ï¼Œæœ€å…¸å‹çš„æ˜¯åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œå®ƒçš„**çŠ¶æ€è½¬ç§»æ–¹ç¨‹**æ˜¯**æœ€éš¾**å†™å‡ºæ¥çš„\n\n## 3. æŠ€å·§ï¼šå¦‚ä½•â€èªæ˜â€œçš„ç©·ä¸¾\n\nè‡³å°‘  äºŒåˆ†æŸ¥æ‰¾ã€å¿«æ…¢æŒ‡é’ˆã€å·¦å³æŒ‡é’ˆã€æ»‘åŠ¨çª—å£ã€å‰ç¼€å’Œæ•°ç»„ã€å·®åˆ†æ•°ç»„ï¼Œè¿™äº›ä½ å¾—çŸ¥é“\n\n### 3.1. æ•°ç»„é“¾è¡¨æŠ€å·§\n\n- åŒæŒ‡é’ˆ**æŠ€å·§**\n\t- å¿«æ…¢æŒ‡é’ˆ**æŠ€å·§**\n\t- å‰åæŒ‡é’ˆ**æŠ€å·§**\n- äºŒåˆ†æœç´¢**æŠ€å·§**\n- å‰ç¼€å’Œ**æŠ€å·§**\n- å·®åˆ†æ•°ç»„**æŠ€å·§**\n\nå¦‚ä¸‹å›¾ï¼š\n\n![|544](https://832-1310531898.cos.ap-beijing.myqcloud.com/10ee0eeaec12dd9492b1239016f1a879.png)\n\n### 3.2. äºŒå‰æ ‘æŠ€å·§\n\n#### 3.2.1. ä¸¤ç§æ€è·¯\n\n- éå†çš„æ€è·¯\n- åˆ†è§£é—®é¢˜çš„æ€è·¯\n\n ![|584](https://832-1310531898.cos.ap-beijing.myqcloud.com/0aeb39bf2040492719a58c0d0869c9ba.png)\n\n#### 3.2.2. å‰åºéå†çš„ **éå†æ€è·¯** å’Œ **åˆ†è§£é—®é¢˜æ€è·¯**\n\n![|536](https://832-1310531898.cos.ap-beijing.myqcloud.com/6c39cfaaa276e6a1e1ef17f0873ac762.png)\n\n> [!bug]\næ˜¯çš„ï¼Œé¿å…æ­»ç£•ï¼Œéš¾é“ç”¨é”¯å­å»æŒ–çŸ³å¤´ï¼Œå› ä¸ºæŠ€å·§å‚¨å¤‡è¿˜ä¸å¤Ÿï¼Œä¸€åˆ‡æ˜¯å¾’åŠ³ï¼Œå¾ˆå¤šå±äºä¼šè€…ä¸éš¾ã€‚\n\n## 4. ç®—æ³•ä¸æ•°æ®ç»“æ„\n\n- å„ç§ç®—æ³•åƒæ˜¯ç²¾ç¾çš„**æ‹¼å›¾**\n- è€Œæ•°æ®ç»“æ„æ˜¯ç»„æˆè¿™äº›æ‹¼å›¾çš„**æ¨¡å—**\n\n### 4.1. å…¶å®åº•å±‚å°±ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼šé“¾è¡¨ + æ•°ç»„\n\n- é“¾è¡¨ï¼ˆé“¾å¼å­˜å‚¨ï¼‰\n\t- æ ˆã€é˜Ÿåˆ—ï¼šå¯ç”¨ `é“¾è¡¨`å®ç°\n\t- æ•£åˆ—è¡¨ï¼š å¯ç”¨`é“¾è¡¨ï¼šæ‹‰é“¾æ³•`å®ç°\n\t- å›¾ï¼šå¯ä½¿ç”¨ `é“¾è¡¨ï¼šé‚»æ¥è¡¨`å®ç°\n- æ ‘\n\t- å †ï¼ˆå®Œå…¨äºŒå‰æ ‘ï¼‰\n\t\t- å¯ä½¿ç”¨`æ•°ç»„`å®ç°å—\n\t- éå®Œå…¨äºŒå‰æ ‘\n\t\t- å¯ä½¿ç”¨`é“¾è¡¨`å®ç°\n- æ•°ç»„ï¼ˆé¡ºåºå­˜å‚¨ï¼‰\n\t- æ ˆã€é˜Ÿåˆ—ï¼šä¹Ÿå¯ä»¥`æ•°ç»„`å®ç°\n\t- æ•£åˆ—è¡¨ï¼š ä¹Ÿå¯ç”¨`æ•°ç»„ï¼šçº¿æ€§æ¢æµ‹æ³•`å®ç°\n\t- å›¾ï¼šå¯ä½¿ç”¨ `æ•°ç»„ï¼šé‚»æ¥çŸ©é˜µ` å®ç°\n\t- æ ‘\n\t  - å †ï¼ˆå®Œå…¨äºŒå‰æ ‘ï¼‰\n\t\t - å¯ä½¿ç”¨`æ•°ç»„`å®ç°\n\n> [!info]\n 1ã€ä¸Šé¢çš„å¯¹åº”å…³ç³»ï¼Œæ—¨åœ¨è¯´æ˜ æ•°æ®å­˜å‚¨ åº•å±‚å°±ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼šæ•°ç»„ å’Œ é“¾è¡¨\n>  \n>  2ã€æ•°ç»„å’Œé“¾è¡¨æ‰æ˜¯ã€Œç»“æ„åŸºç¡€ã€\n\n### 4.2. æ•°æ®ç»“æ„æ“ä½œï¼šå…¶å®å°±**éå† + è®¿é—®ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰** ä¸¤ç§\n\n- ä¸¤ç§åŸºæœ¬æ“ä½œ\n\t- éå† ï¼Œéå†åˆåˆ†ä¸¤ç§\n\t\t- çº¿æ€§è¿­ä»£éå†\n\t\t- éçº¿æ€§é€’å½’éå†\n\t- è®¿é—®ï¼ˆå¢åˆ æŸ¥æ”¹ï¼‰\n\t\t- æ•°æ®ç»“æ„å­˜åœ¨çš„ä½¿å‘½ï¼Œä¸å°±æ˜¯ å°½å¯èƒ½é«˜æ•ˆçš„å¢åˆ æŸ¥æ”¹\n\n#### 4.2.1. æ‰€æœ‰çš„éå†æ¡†æ¶\n\n![|616](https://832-1310531898.cos.ap-beijing.myqcloud.com/8e9df48672be419728cc8bb2539d99ee.png)\n","31d17bfdff5d5d53b3604500cb1da48f":"\n# åŸºç¡€æ•°æ®ç»“æ„\n\n\n`#ç®—æ³•/æ•°æ®ç»“æ„`  `#2023/07/30` \n\n\n## ç›®å½•\n<!-- toc -->\n ## ä¸€ã€æ•°æ®ç»“æ„çš„åˆ†ç±» \n\næ•°æ®ç»“æ„å¯ä»¥ä»`é€»è¾‘ç»“æ„`å’Œ`ç‰©ç†ç»“æ„`ä¸¤ä¸ªç»´åº¦è¿›è¡Œåˆ†ç±»\n\n### ï¼ˆä¸€ï¼‰`çº¿æ€§`ä¸`éçº¿æ€§`ï¼šæŒ‰ç»„æˆæ•°æ®å…ƒç´ ä¹‹å‰çš„é€»è¾‘ç»“æ„å…³ç³»åˆ†ç±»\n\nå³ï¼š**æ•°æ®å…ƒç´ ä¹‹é—´çš„é€»è¾‘å…³ç³»æ˜¯çº¿æ€§çš„æˆ–è€…éçº¿æ€§çš„**ï¼Œ å¦‚\n\n- æ•°ç»„ä¸é“¾è¡¨ æ˜¯`çº¿æ€§`çš„\n- æ ‘ï¼Œä½“ç°ç¥–å…ˆä¸åä»£ä¹‹é—´çš„æ´¾ç”Ÿå…³ç³»ï¼Œæ˜¯`éçº¿æ€§`çš„\n- å›¾ï¼Œç”±èŠ‚ç‚¹å’Œè¾¹æ„æˆï¼Œåæ˜ äº†å¤æ‚çš„ç½‘ç»œå…³ç³»ï¼Œä¹Ÿæ˜¯`éçº¿æ€§`çš„\n\nå…·ä½“åˆ†ç±»å¦‚ä¸‹å›¾ï¼š\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/6aeacad0d7561d5f2597cbdc70d72f0a.png)\n\n**éçº¿æ€§æ•°æ®ç»“æ„**å¯ä»¥è¿›ä¸€æ­¥è¢«åˆ’åˆ†ä¸º `æ ‘å½¢ç»“æ„` å’Œ Â `ç½‘çŠ¶ç»“æ„`ã€‚\n\næ€»ç»“ï¼šæŒ‰é€»è¾‘ç»“æ„åˆ†ç±»ï¼šçº¿æ€§ä¸éçº¿æ€§\n\n> - çº¿æ€§ç»“æ„ ï¼šæ•°ç»„ã€é“¾è¡¨ã€é˜Ÿåˆ—ã€æ ˆã€å“ˆå¸Œè¡¨ï¼Œå…ƒç´ å­˜åœ¨`**ä¸€å¯¹ä¸€**`çš„é¡ºåºå…³ç³»ã€‚\n> - éçº¿æ€§ç»“æ„ï¼š \n>    - æ ‘å½¢ç»“æ„ ï¼šæ ‘ã€å †ã€å“ˆå¸Œè¡¨ï¼Œå…ƒç´ å­˜åœ¨`**ä¸€å¯¹å¤š**`çš„å…³ç³»ã€‚\n>    - ç½‘çŠ¶ç»“æ„ ï¼šå›¾ï¼Œå…ƒç´ å­˜åœ¨`**å¤šå¯¹å¤š**`çš„å…³ç³»ã€‚\n\n### ï¼ˆäºŒï¼‰è¿ç»­ä¸ç¦»æ•£ï¼šæŒ‰ç‰©ç†ç»“æ„åˆ†ç±»\n\nåœ¨æ•°æ®ç»“æ„ä¸ç®—æ³•çš„è®¾è®¡ä¸­ï¼Œç®—æ³•æ‰€å ç”¨çš„`**å†…å­˜å³°å€¼**`ä¸åº”è¶…è¿‡ `**ç³»ç»Ÿå‰©ä½™ç©ºé—²å†…å­˜**`ï¼›æ‰€ä»¥å¦‚æœè¿è¡Œçš„ç¨‹åºå¾ˆå¤šå¹¶ä¸”ç¼ºå°‘å¤§é‡è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œé‚£ä¹ˆæ‰€é€‰ç”¨çš„æ•°æ®ç»“æ„å¿…é¡»èƒ½å¤Ÿå­˜å‚¨åœ¨**ç¦»æ•£çš„å†…å­˜ç©ºé—´å†…**ã€‚ç›¸åï¼Œå¯ä»¥å­˜å‚¨åˆ°`**è¿ç»­çš„å†…å­˜ç©ºé—´**`\n\n**ã€Œç‰©ç†ç»“æ„ã€** åæ˜ äº†æ•°æ®åœ¨è®¡ç®—æœºå†…å­˜ä¸­çš„**å­˜å‚¨æ–¹å¼** ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/3bea47250c1ae6402c1c25bc35f11b05.png)\n\n> æ³¨æ„ä¸Šå›¾ä¸­çš„ `èŠ‚ç‚¹æŒ‡é’ˆ` ä¸ `èŠ‚ç‚¹å€¼`\n\n**æ‰€æœ‰æ•°æ®ç»“æ„éƒ½æ˜¯åŸºäºæ•°ç»„ã€é“¾è¡¨æˆ–äºŒè€…çš„ç»„åˆå®ç°çš„**\n\n> - åŸºäº`æ•°ç»„`å¯å®ç° ï¼šæ ˆã€é˜Ÿåˆ—ã€å“ˆå¸Œè¡¨ã€æ ‘ã€å †ã€å›¾ã€çŸ©é˜µã€å¼ é‡ï¼ˆç»´åº¦çš„æ•°ç»„ï¼‰ç­‰\n> - åŸºäº`é“¾è¡¨`å¯å®ç° ï¼šæ ˆã€é˜Ÿåˆ—ã€å“ˆå¸Œè¡¨ã€æ ‘ã€å †ã€å›¾ç­‰ã€‚\n\næŒ‰ç…§æ•°æ®ç»“æ„åœ¨åˆå§‹åŒ–åï¼Œæ˜¯å¦å¯å¯¹å…¶é•¿åº¦è¿›è¡Œè°ƒæ•´ï¼Œåˆå¯ä»¥åˆ†ä¸ºï¼š\n\n- **é™æ€æ•°æ®ç»“æ„**ï¼Œå³ åŸºäºæ•°ç»„å®ç°çš„æ•°æ®ç»“æ„\n- **åŠ¨æ€æ•°æ®ç»“æ„**ï¼Œå³ åŸºäºé“¾è¡¨å®ç°çš„æ•°æ®ç»“æ„\n\n## äºŒã€åŸºæœ¬æ•°æ®ç±»å‹\n\n**åŸºæœ¬æ•°æ®ç±»å‹**æä¾›äº†æ•°æ®çš„ **å†…å®¹ç±»å‹**ï¼Œè€Œ **æ•°æ®ç»“æ„** æä¾›äº†æ•°æ®çš„ **ç»„ç»‡æ–¹å¼**ï¼Œå¦‚ï¼š\n\n```javascript\n// JavaScript çš„æ•°ç»„æ•°æ®ç»“æ„ å¯ä»¥è‡ªç”±å­˜å‚¨å„ç§ ã€åŸºæœ¬æ•°æ®ç±»å‹ã€‘ å’Œ å¯¹è±¡\nconst array = [0, 0.0, 'a', false];\n```\n\n**åŸºæœ¬æ•°æ®ç±»å‹æ˜¯ CPU å¯ä»¥ç›´æ¥è¿›è¡Œè¿ç®—çš„ç±»å‹ï¼Œåœ¨ç®—æ³•ä¸­ç›´æ¥è¢«ä½¿ç”¨**ï¼Œä¸‹è¡¨åˆ—ä¸¾äº†`**å„ç§åŸºæœ¬æ•°æ®ç±»å‹**`** **çš„å ç”¨ç©ºé—´ã€å–å€¼èŒƒå›´å’Œé»˜è®¤å€¼\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/c85e009fb908c7eb08587ad9e1633918.png)\n\n> 1ã€ç°ä»£è®¡ç®—æœº CPU Â é€šå¸¸å°† `1 å­—èŠ‚`ä½œä¸º Â `æœ€å°å¯»å€å†…å­˜å•å…ƒ`ã€‚å› æ­¤ï¼Œå³ä½¿è¡¨ç¤º`å¸ƒå°”é‡`ä»…éœ€ 1 ä½ï¼ˆ0 æˆ– 1 ï¼‰ï¼Œ å®ƒåœ¨å†…å­˜ä¸­é€šå¸¸è¢«å­˜å‚¨ä¸º 1 å­—èŠ‚ã€‚\n>  \n> 2ã€`1 bytes = 8 bits` , å¯ä»¥è¡¨ç¤º `2^8` ä¸ªä¸åŒçš„æ•°å­—\n\n## ä¸‰ã€æ•°å­—ç¼–ç \n\n> `1 byte` çš„å–å€¼èŒƒå›´æ˜¯ `[-128,127]` ä¸ºä»€ä¹ˆä¸æ˜¯ `[-128,128]`ï¼Ÿ å®ƒ å†…åœ¨åŸå› æ¶‰åŠåˆ°**åŸç ã€åç ã€è¡¥ç **çš„ç›¸å…³çŸ¥è¯†\n\n### ï¼ˆä¸€ï¼‰åŸç ã€åç ã€è¡¥ç \n\n- åŸç ï¼š \n   - **æœ€é«˜ä½**ï¼šè§†ä¸º`ç¬¦å·ä½`ï¼Œå…¶ä¸­ `0` è¡¨ç¤ºæ­£æ•°ï¼Œ`1` è¡¨ç¤ºè´Ÿæ•°\n   - **å…¶ä½™ä½**ï¼šè¡¨ç¤ºæ•°å­—çš„\n- åç ï¼š \n   - `**æ­£æ•°**`** **çš„åç ä¸å…¶åŸç ç›¸åŒ\n   - `**è´Ÿæ•°**`** **çš„åç æ˜¯å¯¹å…¶åŸç é™¤ç¬¦å·ä½å¤–çš„æ‰€æœ‰ä½å–åã€‚\n- è¡¥ç ï¼š \n   - `**æ­£æ•°**`çš„è¡¥ç ä¸å…¶åŸç ç›¸åŒ\n   - `**è´Ÿæ•°**`çš„è¡¥ç æ˜¯åœ¨å…¶åç çš„åŸºç¡€ä¸ŠåŠ  `1`\n\nä»¥ä¸Šæ€»ç»“å°±æ˜¯ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n- æ­£æ•°çš„åŸç ã€åç ã€è¡¥ç ç›¸åŒ\n- è´Ÿæ•°çš„åŸç ã€åç ã€è¡¥ç éœ€è¦è½¬åŒ– \n   - åç ï¼šé™¤ç¬¦å·ä½å¤–çš„æ‰€æœ‰ä½`å–å`\n   - è¡¥ç ï¼šåç çš„åŸºç¡€ä¸ŠåŠ  `1`\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/7a428419ec7a8b880d1accde153d13cc.png)\n\n**åŸç ** æœ€ç›´è§‚ï¼Œä½†æ•°å­—ä»¥**è¡¥ç **å­˜åˆ°è®¡ç®—æœºä¸­ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿè¿™æ˜¯å› ä¸º**åŸç çš„ 2 ä¸ªå±€é™æ€§**\n\n1ã€ `è´Ÿæ•°çš„åŸç `ä¸èƒ½ç›´æ¥ç”¨äºè¿ç®—ï¼Œå¦‚ `1 + (-2)` ä¸åº”è¯¥ç­‰äº `-1` å— ï¼Ÿä½†ä½¿ç”¨åŸç è®¡ç®—ä¸º `-3`\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/89d0d312c18f68ae9e728e99449a621e.png)\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/23e1a2b5c9cabedd0cba022864901f61.png)\n\n2ã€æ•°å­—`é›¶` çš„åŸç æœ‰ `+0` å’Œ `-0` ä¸¤ç§è¡¨ç¤ºæ–¹å¼ ï¼Œ å³ **æ­£ 0 å’Œ è´Ÿ 0 çš„åŸç ä¸åŒï¼Œä½†è¡¥ç ç›¸åŒ**\n\n### ï¼ˆäºŒï¼‰ä¸ºä»€ä¹ˆæ˜¯ `[-128,127]` ï¼Œ128 çš„ç‰¹æ®Šæ€§\n\nè¿™é‡Œï¼Œå†æ¥å›ç­” `1 byte` çš„å–å€¼èŒƒå›´æ˜¯ `[-128,127]` Â ä¸ºä»€ä¹ˆä¸æ˜¯ `[-127,127]`ï¼Ÿ\n\nå› ä¸ºï¼Œ `[-127,127]` åŒºé—´å†…ï¼Œæ‰€æœ‰æ•´æ•°çš„æºç ï¼Œåç ã€åŠè¡¥ç éƒ½å¯ä»¥ç›¸äº’è½¬åŒ–ï¼Œä½†æ˜¯ `-128` çš„è¡¥ç æ˜¯ `1000 0000` Â ï¼Œä¸ `+0` çš„è¡¥ç ç›¸åŒï¼Œæ‰€ä»¥è®¡ç®—æœºè§„å®š **è¡¥ç 1000 0000 æ²¡æœ‰åŸç ï¼Œå®ƒä»£è¡¨ -128**\n\næ€»ä¹‹ï¼Œ`-128`çš„è¡¥ç æ¯”è¾ƒç‰¹æ®Šï¼Œå’Œ `+0` å†²çªäº†ï¼Œè®¡ç®—æœºåšç‰¹æ®Šå¤„ç†ã€‚\n\n### ï¼ˆä¸‰ï¼‰è®¡ç®—æœºæ‰€æœ‰è¿ç®—éƒ½æ˜¯åŠ æ³•\n\n**è®¡ç®—æœºå†…éƒ¨çš„ç¡¬ä»¶ç”µè·¯ä¸»è¦æ˜¯åŸºäºåŠ æ³•è¿ç®—è®¾è®¡çš„**ã€‚è¿™æ˜¯å› ä¸ºåŠ æ³•è¿ç®—ç›¸å¯¹äºå…¶ä»–è¿ç®—ï¼ˆæ¯”å¦‚ä¹˜æ³•ã€é™¤æ³•å’Œå‡æ³•ï¼‰æ¥è¯´ï¼Œç¡¬ä»¶å®ç°èµ·æ¥æ›´ç®€å•ï¼Œæ›´å®¹æ˜“è¿›è¡Œå¹¶è¡ŒåŒ–å¤„ç†ï¼Œä»è€Œæé«˜è¿ç®—é€Ÿåº¦ï¼›å¦‚ï¼š\n\n- å‡æ³•ï¼šå¦‚ Â `a - b` å…¶å®å°±æ˜¯ `a + (-b)`\n- ä¹˜æ³•å’Œé™¤æ³•ï¼šå¯ä»¥è½¬æ¢ä¸ºè®¡ç®—å¤šæ¬¡åŠ æ³•æˆ–å‡æ³•\n\n### ï¼ˆå››ï¼‰è®¡ç®—æœºä½¿ç”¨è¡¥ç çš„åŸå› \n\næˆ‘ä»¬å¯ä»¥æ€»ç»“å‡º**è®¡ç®—æœºä½¿ç”¨è¡¥ç çš„åŸå› **ï¼šåŸºäºè¡¥ç è¡¨ç¤ºï¼Œè®¡ç®—æœºå¯ä»¥ç”¨åŒæ ·çš„**ç”µè·¯**å’Œæ“ä½œæ¥å¤„ç†æ­£æ•°å’Œè´Ÿæ•°çš„åŠ æ³•ï¼Œä¸éœ€è¦è®¾è®¡ç‰¹æ®Šçš„ç¡¬ä»¶ç”µè·¯æ¥å¤„ç†å‡æ³•ï¼Œå¹¶ä¸”æ— éœ€ç‰¹åˆ«å¤„ç†æ­£è´Ÿé›¶çš„æ­§ä¹‰é—®é¢˜ã€‚è¿™å¤§å¤§ç®€åŒ–äº†ç¡¬ä»¶è®¾è®¡ï¼Œå¹¶æé«˜äº†è¿ç®—æ•ˆç‡ã€‚\n\n### ï¼ˆäº”ï¼‰æµ®ç‚¹æ•°ç¼–ç ï¼šfloat ä¸ double\n\nä¸€ä¸ªè¿åç›´è§‰çš„äº‹æƒ…ï¼š`int` å’Œ `float` é•¿åº¦ç›¸åŒï¼Œéƒ½æ˜¯ `4 bytes`ï¼Œä½† **ä¸ºä»€ä¹ˆ float çš„å–å€¼èŒƒå›´è¿œå¤§äº int ï¼Ÿ** è¿™éå¸¸åç›´è§‰ï¼Œå› ä¸ºæŒ‰ç†è¯´ float éœ€è¦è¡¨ç¤ºå°æ•°ï¼Œå–å€¼èŒƒå›´åº”è¯¥å˜å°æ‰å¯¹\n\nç®€å•æ¥è¯´å°±æ˜¯ï¼Œ`float` é‡‡ç”¨äº†ä¸åŒçš„è¡¨ç¤ºæ–¹å¼ã€‚å¦‚ä¸‹\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/8848b451c9932afb71fb6d460b7d6d76.png)\n\nå…·ä½“çš„ä¸å¿…å±•å¼€äº†ï¼ŒçœŸæœ‰éœ€è¦å¯ä»¥å‚è€ƒ [https://www.hello-algo.com/chapter_data_structure/number_encoding/#332](https://www.hello-algo.com/chapter_data_structure/number_encoding/#332)\n\n> [!info]\n1ã€å°½ç®¡æµ®ç‚¹æ•° `float` æ‰©å±•äº†å–å€¼èŒƒå›´ï¼Œä½†å…¶å‰¯ä½œç”¨æ˜¯ç‰ºç‰²äº†ç²¾åº¦\n2ã€åŒç²¾åº¦ `double` ä¹Ÿé‡‡ç”¨ç±»ä¼¼ `float` çš„è¡¨ç¤ºæ–¹æ³•ï¼Œå…·ä½“çš„éœ€è¦å†å»æŸ¥å§ï¼Œè¿™é‡Œç‚¹åˆ°å³å¯\n\n## å››ã€å­—ç¬¦ç¼–ç \n\n### ï¼ˆä¸€ï¼‰ASCII å­—ç¬¦é›†\n\nã€ŒASCII ç ã€æ˜¯æœ€æ—©å‡ºç°çš„å­—ç¬¦é›†ï¼Œå…¨ç§°ä¸ºâ€œç¾å›½æ ‡å‡†ä¿¡æ¯äº¤æ¢ä»£ç â€ ï¼Œé‡‡ç”¨ **7 ä½äºŒè¿›åˆ¶** ï¼Œæ‰€ä»¥æœ€å¤šèƒ½å¤Ÿè¡¨ç¤º **128 ä¸ªä¸åŒçš„å­—ç¬¦** ï¼Œå¦‚ä¸‹å›¾\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/8163e2b24c6b4bc277ee3211f8ad877c.png)\n\n### ï¼ˆäºŒï¼‰GBK å­—ç¬¦é›†\n\n- æ±‰å­—å¤§çº¦æœ‰è¿‘åä¸‡ä¸ª\n- `GB2312` æ— æ³•å¤„ç†éƒ¨åˆ†çš„ç½•è§å­—å’Œç¹ä½“å­—ï¼Œæ‰€ä»¥æ‰©å±•å¾—åˆ°äº† **GBK å­—ç¬¦é›†**\n- ASCII å­—ç¬¦ä½¿ç”¨`ä¸€ä¸ªå­—èŠ‚`è¡¨ç¤ºï¼Œæ±‰å­—ä½¿ç”¨`ä¸¤ä¸ªå­—èŠ‚`è¡¨ç¤ºã€‚\n\n### ï¼ˆä¸‰ï¼‰Unicode å­—ç¬¦é›†ã€UTF-8/16/32 ç¼–ç \n\n#### 1ã€ä¸ºä½•éœ€è¦ Unicode å­—ç¬¦é›†ï¼Ÿ\n\nå¦‚æœæ¨å‡ºä¸€ä¸ªè¶³å¤Ÿå®Œæ•´çš„å­—ç¬¦é›†ï¼Œ**å°†ä¸–ç•ŒèŒƒå›´å†…çš„æ‰€æœ‰è¯­è¨€å’Œç¬¦å·éƒ½æ”¶å½•å…¶ä¸­**ï¼Œä¸å°±å¯ä»¥è§£å†³è·¨è¯­è¨€ç¯å¢ƒå’Œä¹±ç é—®é¢˜äº†å—ï¼Ÿ\n\n#### 2ã€UTF-8/16/32 ç¼–ç \n\n- UTF-8 å·²æˆä¸ºå›½é™…ä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„ `Unicode ç¼–ç æ–¹æ³•`ã€‚å®ƒæ˜¯ä¸€ç§**å¯å˜é•¿**çš„ç¼–ç \n- é™¤äº† `UTF-8` ä¹‹å¤–ï¼Œå¸¸è§çš„ç¼–ç æ–¹å¼è¿˜åŒ…æ‹¬ `UTF-16` å’Œ `UTF-32`\n- `UTF-16` ç¼–ç ï¼šä½¿ç”¨ 2 æˆ– 4 ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦\n- `UTF-32` ç¼–ç ï¼šæ¯ä¸ªå­—ç¬¦éƒ½ä½¿ç”¨ 4 ä¸ªå­—èŠ‚\n- ä»**å­˜å‚¨ç©ºé—´**çš„è§’åº¦çœ‹ \n   - ä½¿ç”¨ `UTF-8` è¡¨ç¤ºè‹±æ–‡å­—ç¬¦éå¸¸é«˜æ•ˆï¼Œå› ä¸ºå®ƒä»…éœ€ 1 ä¸ªå­—èŠ‚\n   - ä½¿ç”¨ `UTF-16` ç¼–ç æŸäº›éè‹±æ–‡å­—ç¬¦ï¼ˆä¾‹å¦‚ä¸­æ–‡ï¼‰ä¼šæ›´åŠ é«˜æ•ˆï¼Œå› ä¸ºå®ƒåªéœ€è¦ 2 ä¸ªå­—èŠ‚ï¼Œè€Œ UTF-8 å¯èƒ½éœ€è¦ 3 ä¸ªå­—èŠ‚\n- ä»**å…¼å®¹æ€§**çš„è§’åº¦çœ‹ï¼Œ`UTF-8` çš„é€šç”¨æ€§æœ€ä½³ï¼Œæ‰€ä»¥è®¸å¤šå·¥å…·å’Œåº“éƒ½ä¼˜å…ˆæ”¯æŒ `UTF-8`\n\n#### 3ã€å„è¯­è¨€ä½¿ç”¨çš„ç¼–ç æƒ…å†µ\n\n- Java çš„ `String ç±»å‹`ä½¿ç”¨ `UTF-16 ç¼–ç `ï¼Œæ¯ä¸ªå­—ç¬¦å ç”¨ 2 å­—èŠ‚\n- JavaScript å’Œ TypeScript çš„å­—ç¬¦ä¸²ä½¿ç”¨ `UTF-16 ç¼–ç `çš„åŸå› ä¸ Java ç±»ä¼¼\n- C# ä½¿ç”¨ `UTF-16 ç¼–ç `\n- Python 3 ä½¿ç”¨ä¸€ç§çµæ´»çš„å­—ç¬¦ä¸²è¡¨ç¤º ï¼Œ å¦‚ å¯¹äºå…¨éƒ¨æ˜¯ ASCII å­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå­—ç¬¦å ç”¨ 1 ä¸ªå­—èŠ‚\n- Go è¯­è¨€çš„ string ç±»å‹åœ¨å†…éƒ¨ä½¿ç”¨ UTF-8 ç¼–ç ã€‚Go è¯­è¨€è¿˜æä¾›äº† rune ç±»å‹ï¼Œå®ƒç”¨äºè¡¨ç¤ºå•ä¸ª Unicode ç ç‚¹ã€‚\n- Rust è¯­è¨€çš„ str å’Œ String ç±»å‹åœ¨å†…éƒ¨ä½¿ç”¨ UTF-8 ç¼–ç ï¼ŒRust ä¹Ÿæä¾›äº† char ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºå•ä¸ª Unicode ç ç‚¹ã€‚\n\n#### 4ã€æ–‡ä»¶å­˜å‚¨æˆ–ç½‘ç»œä¼ è¾“åœºæ™¯ä¸­\n\n**å­—ç¬¦ä¸²åœ¨ç¼–ç¨‹è¯­è¨€ä¸­çš„å­˜å‚¨æ–¹å¼ Â å’Œ Â åœ¨æ–‡ä»¶ä¸­å­˜å‚¨æˆ–åœ¨ç½‘ç»œä¸­ä¼ è¾“ Â æ˜¯ä¸¤ä¸ªä¸åŒçš„é—®é¢˜**ã€‚åœ¨æ–‡ä»¶å­˜å‚¨æˆ–ç½‘ç»œä¼ è¾“ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå°†å­—ç¬¦ä¸²ç¼–ç ä¸º UTF-8 æ ¼å¼ï¼Œä»¥è¾¾åˆ°æœ€ä¼˜çš„å…¼å®¹æ€§å’Œç©ºé—´æ•ˆç‡ã€‚\n\n## æœ€åï¼šQA\n\n**1ã€ä¸ºä»€ä¹ˆå“ˆå¸Œè¡¨åŒæ—¶åŒ…å«çº¿æ€§æ•°æ®ç»“æ„å’Œéçº¿æ€§æ•°æ®ç»“æ„ï¼Ÿ**\n\nå“ˆå¸Œè¡¨å¯èƒ½åŒæ—¶åŒ…å«çº¿æ€§ï¼ˆæ•°ç»„ã€é“¾è¡¨ï¼‰å’Œéçº¿æ€§ï¼ˆæ ‘ï¼‰æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚ æ‹‰é“¾æ³•ï¼Ÿ\n\n**2ã€char ç±»å‹çš„é•¿åº¦æ˜¯ 1 byte å—ï¼Ÿ**\n\nè·Ÿå…·ä½“ç¼–ç¨‹è¯­è¨€æœ‰å…³ï¼Œæ¯”å¦‚ Java, JS, TS, C# éƒ½é‡‡ç”¨ UTF-16 ç¼–ç ï¼ˆä¿å­˜ Unicode ç ç‚¹ï¼‰ï¼Œå› æ­¤ char ç±»å‹çš„é•¿åº¦ä¸º 2 bytes ã€‚\n\n**3ã€ä¸ºä»€ä¹ˆå‡ºç°äº†ä¸åŒçš„ç¼–ç å­—ç¬¦ç¼–ç ï¼Œæ¯”å¦‚ ascii utf8/16/32 ç­‰ ï¼Ÿ**\n\n`èƒ½è¡¨ç¤ºæ›´å¤šå­—ç¬¦` Â å’Œ `å­˜å‚¨æˆæœ¬` çš„ å¹³è¡¡ï¼›\n\n**4ã€å¦‚ä½• UTF-8 æ˜¯ä¸€ç§å¯å˜é•¿çš„ç¼–ç ï¼Ÿ** Â è§ä¸‹å›¾ï¼š\n\n- å¯¹äºé•¿åº¦ä¸º `1å­—èŠ‚`çš„å­—ç¬¦ï¼Œå°†æœ€é«˜ä½è®¾ç½®ä¸º 0 Â ã€å…¶ä½™ 7 ä½è®¾ç½®ä¸º **Unicode ç ç‚¹**ï¼Œå³**å‘ä¸‹å…¼å®¹äº† ascii ç **\n- å‰©ä½™çš„å¯¹äºé•¿åº¦ä¸º `nå­—èŠ‚`çš„å­—ç¬¦ï¼Œå¦‚ä¸‹ï¼š\n- æ‰€ä»¥è¯´ Unicode æ˜¯ä¸€ç§å­—ç¬¦é›†æ ‡å‡†ï¼Œæœ¬è´¨ä¸Šæ˜¯ç»™æ¯ä¸ªå­—ç¬¦åˆ†é…ä¸€ä¸ªç¼–å·ï¼ˆç§°ä¸ºâ€œç ç‚¹â€ï¼‰ï¼Œä½† Â **å®ƒå¹¶æ²¡æœ‰è§„å®šåœ¨è®¡ç®—æœºä¸­å¦‚ä½•å­˜å‚¨è¿™äº›å­—ç¬¦ç ç‚¹**\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/a643995d558c19d0971dce7138e4d274.png)\n\n**5ã€UTF-32 ç¼–ç ï¼šæ¯ä¸ªå­—ç¬¦éƒ½ä½¿ç”¨ 4 ä¸ªå­—èŠ‚ï¼Œè™½ç„¶å ç©ºé—´ï¼Œä½†å¾ˆå¥½ç†è§£ï¼Œå¦‚ä¸‹å›¾**\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/196bc7de47e9a0e2ad3f88f18f68e88c.png)\n\n> ä¸Šå›¾åªæ˜¯è¡¨è¾¾è¿™ç§ç¼–ç æ–¹å¼éƒ½æœ‰ ç­‰é•¿å­—èŠ‚\n\n## å‚è€ƒ\n\n- [https://www.hello-algo.com/chapter_data_structure/](https://www.hello-algo.com/chapter_data_structure/)\n","67486858109959e5ab0df57f281b89cc":"\n# ç®—æ³•å¤æ‚åº¦\n\n\n`#2023/07/27`  `#ç®—æ³•/åŸºç¡€`\n\n> [!info]\n> - ç©ºé—´å¤æ‚åº¦çš„è®¡ç®—çš„æ–¹å¼å¯ä»¥å†è¯»è¯»ï¼ŒæŒºæœ‰æ„æ€\n\n\n## ç›®å½•\n<!-- toc -->\n ## ä¸€ã€ç»¼è¿° \n\n1. æ•°æ®ç»“æ„å’Œç®—æ³•è§£å†³æ˜¯  â€œå¦‚ä½•è®©è®¡ç®—æœºæ›´å¿«æ—¶é—´ã€æ›´çœç©ºé—´çš„è§£å†³é—®é¢˜â€ã€‚\n2. å› æ­¤éœ€ä»`æ‰§è¡Œæ—¶é—´`å’Œ`å ç”¨ç©ºé—´`ä¸¤ä¸ªç»´åº¦æ¥è¯„ä¼°æ•°æ®ç»“æ„å’Œç®—æ³•çš„æ€§èƒ½ã€‚\n3. åˆ†åˆ«ç”¨`æ—¶é—´å¤æ‚åº¦`å’Œ `ç©ºé—´å¤æ‚åº¦` ä¸¤ä¸ªæ¦‚å¿µæ¥æè¿°æ€§èƒ½é—®é¢˜ï¼ŒäºŒè€…ç»Ÿç§°ä¸º`å¤æ‚åº¦`ã€‚\n4. å¤æ‚åº¦æè¿°çš„æ˜¯ç®—æ³•`æ‰§è¡Œæ—¶é—´`ï¼ˆæˆ–`å ç”¨ç©ºé—´`ï¼‰ä¸ `æ•°æ®è§„æ¨¡`çš„  `å¢é•¿è¶‹åŠ¿` å…³ç³»ã€‚\n\n## äºŒã€æ—¶é—´å¤æ‚åº¦\n\n### ï¼ˆä¸€ï¼‰ä»€ä¹ˆæ˜¯æ—¶é—´å¤æ‚åº¦\nç»Ÿè®¡çš„æ˜¯ ç®—æ³•è¿è¡Œæ—¶é—´éšç€æ•°æ®é‡å˜å¤§æ—¶çš„  `å¢é•¿è¶‹åŠ¿` ï¼Œè€Œä¸æ˜¯ `å…·ä½“è¿è¡Œæ—¶é—´`\nä¸‹é¢å‡½æ•°å±•ç¤ºäº†éšç€ `n` çš„å¢åŠ ï¼Œç®—æ³•çš„ `æ—¶é—´çš„å¤æ‚åº¦`\n```javascript\n// ç®—æ³• A æ—¶é—´å¤æ‚åº¦ï¼šå¸¸æ•°é˜¶\nfunction algorithm_A(n) {\n    console.log(0);\n}\n// ç®—æ³• B æ—¶é—´å¤æ‚åº¦ï¼šçº¿æ€§é˜¶\nfunction algorithm_B(n) {\n    for (let i = 0; i < n; i++) {\n        console.log(0);\n    }\n}\n// ç®—æ³• C æ—¶é—´å¤æ‚åº¦ï¼šå¸¸æ•°é˜¶\nfunction algorithm_C(n) {\n    for (let i = 0; i < 1000000; i++) {\n        console.log(0);\n    }\n}\n```\nä¸Šé¢ä»£ç çš„çš„**å¢é•¿è¶‹åŠ¿**å¦‚ä¸‹å›¾ï¼š\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/ea5f6229f7163afc408a23aef0728791.png)\næ—¶é—´å¤æ‚åº¦ç”±å¤šé¡¹å¼ `T(n)` ä¸­æœ€é«˜é˜¶çš„é¡¹æ¥å†³å®šã€‚è¿™æ˜¯å› ä¸ºåœ¨è¶‹äºæ— ç©·å¤§æ—¶ï¼Œæœ€é«˜é˜¶çš„é¡¹å°†å‘æŒ¥ä¸»å¯¼ä½œç”¨ï¼Œå…¶ä»–é¡¹çš„å½±å“éƒ½å¯ä»¥è¢«å¿½ç•¥ã€‚å³ **â€œç³»æ•°æ— æ³•æ’¼åŠ¨é˜¶æ•°â€** ï¼Œ å½“è¶‹äºæ— ç©·å¤§æ—¶ï¼Œè¿™äº›å¸¸æ•°å˜å¾—æ— è¶³è½»é‡ï¼Œå¦‚ä¸‹å›¾ï¼š\n![|337](https://832-1310531898.cos.ap-beijing.myqcloud.com/dfa3c541c8fde0817d043413d5a96f39.png)\n\n### ï¼ˆäºŒï¼‰å¦‚ä½•è®¡ç®—æ—¶é—´å¤æ‚åº¦\n```javascript\nfunction aFun() {\n    console.log(\"Hello, World!\");      //  éœ€è¦æ‰§è¡Œ 1 æ¬¡\n    return 0;       // éœ€è¦æ‰§è¡Œ 1 æ¬¡\n}\n\n// éœ€è¦æ‰§è¡Œ 2 æ¬¡è¿ç®—\nfunction bFun(n) {\n    for(let i = 0; i < n; i++) {         // éœ€è¦æ‰§è¡Œ (n + 1) æ¬¡\n        console.log(\"Hello, World!\");      // éœ€è¦æ‰§è¡Œ n æ¬¡\n    }\n    return 0;       // éœ€è¦æ‰§è¡Œ 1 æ¬¡\n}\n// éœ€è¦æ‰§è¡Œ ( n + 1 + n + 1 ) = 2n +2 æ¬¡è¿ç®—\n\n function cal(n) {\n   let sum = 0; // 1 æ¬¡\n   let i = 1; // 1 æ¬¡\n   let j = 1; // 1 æ¬¡\n   for (; i <= n; ++i) {  // n æ¬¡\n     j = 1;  // n æ¬¡\n     for (; j <= n; ++j) {  // n * n ï¼Œä¹Ÿå³æ˜¯  nå¹³æ–¹æ¬¡\n       sum = sum +  i * j;  // n * n ï¼Œä¹Ÿå³æ˜¯  nå¹³æ–¹æ¬¡\n     }\n   }\n }\n// é‚£ä¹ˆè¿™ä¸ªæ–¹æ³•éœ€è¦æ‰§è¡Œ ( n^2 + n^2 + n + n + 1 + 1 +1 ) = 2n^2 +2n + 3\n```\nå¦‚ä¸‹å›¾ï¼š\n![|528](https://832-1310531898.cos.ap-beijing.myqcloud.com/4e79ed2e30c215179f648fdd5000f363.png)\n\n### ï¼ˆä¸‰ï¼‰å‡ ä¸ªæ—¶é—´å¤æ‚åº¦çš„åˆ†æåŸåˆ™\n\n- åªå…³æ³¨ `å¾ªç¯æ‰§è¡Œæ¬¡æ•°æœ€å¤š`çš„ä¸€æ®µä»£ç ï¼Œå³ **â€œç³»æ•°æ— æ³•æ’¼åŠ¨é˜¶æ•°â€**\n- åŠ æ³•æ³•åˆ™ï¼šæ€»å¤æ‚åº¦  ç­‰äº  **é‡çº§æœ€å¤§** çš„é‚£æ®µä»£ç çš„å¤æ‚åº¦\n- ä¹˜æ³•æ³•åˆ™ï¼šåµŒå¥—ä»£ç çš„å¤æ‚åº¦ç­‰äº **åµŒå¥—å†…å¤–ä»£ç å¤æ‚åº¦çš„ä¹˜ç§¯**\n- å¤šä¸ªè§„æ¨¡æ±‚åŠ æ³•ï¼š`O(m+n)`\n- å¤šä¸ªè§„æ¨¡æ±‚ä¹˜æ³•ï¼š`O(m*n)`\n\n### ï¼ˆå››ï¼‰å¸¸è§çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦\n\n#### 1ã€å¸¸æ•°é˜¶ï¼šO(1)\n```javascript\n/* å¸¸æ•°é˜¶ */\nfunction constant(n) {\n    let count = 0;\n    const size = 100000; // size æ˜¯å›ºå®šçš„\n    for (let i = 0; i < size; i++) count++;\n    return count;\n}\n```\n\n#### 2ã€çº¿æ€§é˜¶ï¼šO(n)\né€šå¸¸å‡ºç°åœ¨å•å±‚å¾ªç¯ä¸­ï¼Œ`éå†æ•°ç»„å’Œéå†é“¾è¡¨`ç­‰æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å‡ä¸º `O(n)`\n\n#### 3ã€å¹³æ–¹é˜¶ï¼šO(n^2)\né€šå¸¸å‡ºç°åœ¨ `åµŒå¥—å¾ªç¯` ä¸­ï¼Œå¦‚å†’æ³¡æ’åºã€‚\n> [!info]\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/88cb8b3a7d878706742e70be0d6f2b23.png)\n\n#### 4ã€æŒ‡æ•°é˜¶ï¼šO(2^n)\n\n- å®é™…åœºæ™¯ï¼Œ**ç»†èƒåˆ†è£‚**ï¼šåˆå§‹çŠ¶æ€ä¸º `1` ä¸ªç»†èƒï¼Œåˆ†è£‚ä¸€è½®åå˜ä¸º `2` ä¸ªï¼Œåˆ†è£‚`ä¸¤è½®`åå˜ä¸ª`4` ç»†èƒ ...\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/ac00b7799791dc9505590961d2bbb4bb.png)\n\n- `æŒ‡æ•°é˜¶`å¸¸å‡ºç°äº`é€’å½’å‡½æ•°` ä¸­ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n```javascript\n/* æŒ‡æ•°é˜¶ï¼ˆé€’å½’å®ç°ï¼‰ */\nfunction expRecur(n) {\n    if (n == 1) return 1;\n    return expRecur(n - 1) + expRecur(n - 1) + 1;\n}\n```\n\n#### 5ã€å¯¹æ•°é˜¶ï¼šO(log n)\n\n- ä¸`æŒ‡æ•°é˜¶`ç›¸åï¼Œå¯¹æ•°é˜¶åæ˜ äº†  **â€œæ¯è½®ç¼©å‡åˆ°ä¸€åŠçš„æƒ…å†µâ€**\n- å¸¸å‡ºäºã€ŒäºŒåˆ†æŸ¥æ‰¾ã€å’Œã€Œåˆ†æ²»ç®—æ³•ã€ä¸­\n- `æ¯è½®ç¼©å‡åˆ°ä¸€åŠ`çš„ä»£ç ç¤ºä¾‹åŠå›¾ä¾‹å¦‚ä¸‹ï¼š\n```javascript\n/* å¯¹æ•°é˜¶ï¼ˆå¾ªç¯å®ç°ï¼‰ */\nfunction logarithmic(n) {\n    let count = 0;\n    while (n > 1) {\n        n = n / 2;\n        count++;\n    }\n    return count;\n}\n```\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/3ff8899588e1ffa4f4b94073eabdef94.png)\n\n- ä¸ `æŒ‡æ•°é˜¶` ä¸€æ ·ï¼Œå¯¹æ•°é˜¶ä¹Ÿå¸¸å‡ºäº `é€’å½’å‡½æ•°` ä¸­ï¼Œå¦‚ä¸‹ä»£ç \n```javascript\n/* å¯¹æ•°é˜¶ï¼ˆé€’å½’å®ç°ï¼‰ */\nfunction logRecur(n) {\n    if (n <= 1) return 0;\n    return logRecur(n / 2) + 1;\n}\n```\n\n#### 6ã€çº¿æ€§å¯¹æ•°é˜¶ï¼š`O(n*log n)`\n\nå¦‚ä¸»æµæ’åºç®—æ³• å¿«é€Ÿæ’åºã€å½’å¹¶æ’åºã€å †æ’åºç­‰\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/27ec8375a419fee15f4b37ce2a8cc49f.png)\n\n#### 7ã€é˜¶ä¹˜é˜¶ï¼šO(n!)\nå³ `ã€Œå…¨æ’åˆ—ã€` é—®é¢˜\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/ae31393acb0b846e96cc6e127721d0d1.png)\n> [!question]\nç”»å‡ºä¸€å¼  `é˜¶ä¹˜é˜¶` çš„ åˆ†è£‚å›¾ï¼Ÿ\n\n### ï¼ˆäº”ï¼‰æœ€å·®ã€æœ€ä½³ã€å¹³å‡æ—¶é—´å¤æ‚åº¦\n\n- `ã€Œæœ€å·®æ—¶é—´å¤æ‚åº¦ã€`æ›´ä¸ºå®ç”¨ï¼Œå› ä¸ºå®ƒç»™å‡ºäº†ä¸€ä¸ª **â€œæ•ˆç‡å®‰å…¨å€¼â€**\n- è‡³äºå…¶ä»–ï¼Œå¦‚ `å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦`  ç­‰å¿½ç•¥å§\n\n## ä¸‰ã€ç©ºé—´å¤æ‚åº¦\nã€Œç©ºé—´å¤æ‚åº¦ Space Complexityã€ç”¨äºè¡¡é‡ç®—æ³•ä½¿ç”¨**å†…å­˜ç©ºé—´éšç€æ•°æ®é‡å˜å¤§æ—¶çš„å¢é•¿è¶‹åŠ¿**\n\n### ï¼ˆä¸€ï¼‰ç®—æ³•ç›¸å…³ `ç©ºé—´`\n\n- **ã€Œè¾“å…¥ç©ºé—´ã€** ç”¨äºå­˜å‚¨ç®—æ³•çš„è¾“å…¥æ•°æ®ã€‚\n- **ã€Œæš‚å­˜ç©ºé—´ã€** ç”¨äºå­˜å‚¨ç®—æ³•è¿è¡Œè¿‡ç¨‹ä¸­çš„å˜é‡ã€å¯¹è±¡ã€å‡½æ•°ä¸Šä¸‹æ–‡ç­‰æ•°æ®ã€‚\n   - ã€Œæš‚å­˜æ•°æ®ã€ç”¨äºä¿å­˜ç®—æ³•è¿è¡Œè¿‡ç¨‹ä¸­çš„å„ç§å¸¸é‡ã€å˜é‡ã€å¯¹è±¡ç­‰ã€‚\n   - ã€Œæ ˆå¸§ç©ºé—´ã€ç”¨äºä¿å­˜è°ƒç”¨å‡½æ•°çš„ä¸Šä¸‹æ–‡æ•°æ®ã€‚\n      - ç³»ç»Ÿåœ¨æ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶éƒ½ä¼šåœ¨æ ˆé¡¶éƒ¨`åˆ›å»º`ä¸€ä¸ªæ ˆå¸§ï¼Œ\n      - å‡½æ•°è¿”å›åï¼Œæ ˆå¸§ç©ºé—´ä¼šè¢«`é‡Šæ”¾`ã€‚\n   - ã€ŒæŒ‡ä»¤ç©ºé—´ã€ç”¨äºä¿å­˜ç¼–è¯‘åçš„ç¨‹åºæŒ‡ä»¤ï¼Œåœ¨å®é™…ç»Ÿè®¡ä¸­`é€šå¸¸å¿½ç•¥ä¸è®¡`ã€‚\n- **ã€Œè¾“å‡ºç©ºé—´ã€** ç”¨äºå­˜å‚¨ç®—æ³•çš„è¾“å‡ºæ•°æ®ã€‚\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/4c8a91efffc89dcd586e114161a7ea49.png)\n```javascript\n/* ç±» */\nclass Node {\n    val;\n    next;\n    constructor(val) {\n        this.val = val === undefined ? 0 : val; // èŠ‚ç‚¹å€¼\n        this.next = null;                       // æŒ‡å‘ä¸‹ä¸€èŠ‚ç‚¹çš„å¼•ç”¨\n    }\n}\n\n/* å‡½æ•° */\nfunction constFunc() {\n    // do something\n    return 0;\n}\n\nfunction algorithm(n) {       // è¾“å…¥æ•°æ®: è¾“å…¥ç©ºé—´ï¼Œå³å‡½æ•°\n    const a = 0;              // æš‚å­˜æ•°æ®ï¼ˆå¸¸é‡ï¼‰\n    let b = 0;                // æš‚å­˜æ•°æ®ï¼ˆå˜é‡ï¼‰\n    const node = new Node(0); // æš‚å­˜æ•°æ®ï¼ˆå¯¹è±¡ï¼‰\n    const c = constFunc();    // æ ˆå¸§ç©ºé—´ï¼ˆè°ƒç”¨å‡½æ•°ï¼‰\n    return a + b + c;         // è¾“å‡ºæ•°æ®ï¼šè¿”å›æ•°æ®ï¼Œå³ return\n}\n\n```\n\n### ï¼ˆäºŒï¼‰å¦‚ä½•æ¨ç®—ç©ºé—´å¤æ‚åº¦\né€šå¸¸åªå…³æ³¨ `æœ€å·®ç©ºé—´å¤æ‚åº¦` , çœ‹ä¸‹é¢ä»£ç å°±æ‡‚äº†ï¼Œå› ä¸ºæˆ‘ä»¬å¿…é¡»è¦æœ‰ è¶³å¤Ÿçš„å†…å­˜ç©ºé—´é¢„ç•™ï¼Œæ‰€ä»¥ï¼š\n\n- ä»¥`æœ€å·®`è¾“å…¥æ•°æ®ä¸ºå‡†\n- ä»¥ç®—æ³•è¿è¡Œè¿‡ç¨‹ä¸­çš„`å³°å€¼å†…å­˜`ä¸ºå‡†\n```javascript\nfunction algorithm(n) {\n    const a = 0;                   // O(1)\n    const b = new Array(10000);    // O(1)\n    if (n > 10) {\n        const nums = new Array(n); // O(n)\n    }\n}\n```\nä»¥ä¸‹ä»£ç çš„ç©ºé—´å¤æ‚åº¦åˆ†æï¼š\n```javascript\nfunction constFunc() {\n    // do something\n    return 0;\n}\n/* å¾ªç¯ O(1) */\n// å› ä¸ºæ¯è½®å¾ªç¯åï¼Œè°ƒç”¨çš„å‡½æ•°éƒ½ä¼š é‡Šæ”¾äº†æ ˆå¸§ç©ºé—´ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¸º O(1)\nfunction loop(n) {\n    for (let i = 0; i < n; i++) {\n        constFunc();\n    }\n}\n/* é€’å½’ O(n) */\n// é€’å½’å‡½æ•° recur() åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¼šåŒæ—¶å­˜åœ¨ ä¸ªæœªè¿”å›çš„ recur()\n// æ‰€ä»¥ï¼Œä¼šæœ‰ O(n) çš„æ ˆå¸§ç©ºé—´\nfunction recur(n) {\n    if (n === 1) return;\n    return recur(n - 1);\n}\n\n```\n\n### ï¼ˆä¸‰ï¼‰å¸¸è§çš„ç©ºé—´å¤æ‚åº¦ç±»å‹\n\n#### 1ã€å¸¸æ•°é˜¶ï¼šO(1)\nå¸¸æ•°é˜¶å¸¸è§äº **æ•°é‡ä¸è¾“å…¥æ•°æ®å¤§å° n æ— å…³çš„å¸¸é‡ã€å˜é‡ã€å¯¹è±¡**\n```javascript\n/* å¸¸æ•°é˜¶ */\nfunction constant(n) {\n    // å¸¸é‡ã€å˜é‡ã€å¯¹è±¡å ç”¨ O(1) ç©ºé—´\n    const a = 0;\n    const b = 0;\n    const nums = new Array(10000);\n    const node = new ListNode(0);\n    // å¾ªç¯ä¸­çš„å˜é‡å ç”¨ O(1) ç©ºé—´\n    for (let i = 0; i < n; i++) {\n        const c = 0;\n    }\n    // å¾ªç¯ä¸­çš„å‡½æ•°å ç”¨ O(1) ç©ºé—´\n    for (let i = 0; i < n; i++) {\n        constFunc();\n    }\n}\n```\n> [!tip]\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¾ªç¯ä¸­åˆå§‹åŒ–å˜é‡æˆ–è°ƒç”¨å‡½æ•°è€Œå ç”¨çš„å†…å­˜ï¼Œåœ¨è¿›å…¥ä¸‹ä¸€å¾ªç¯åå°±ä¼šè¢«é‡Šæ”¾ï¼Œå³ä¸ä¼šç´¯ç§¯å ç”¨ç©ºé—´ï¼Œç©ºé—´å¤æ‚åº¦ä»ä¸º`O(1)`\n\n#### 2ã€çº¿æ€§é˜¶ï¼šO(n)\nçº¿æ€§é˜¶å¸¸è§äº **å…ƒç´ æ•°é‡ä¸ è¾“å…¥æ•°æ®å¤§å° **`n`** æˆæ­£æ¯”çš„æ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—ç­‰ã€‚**\n```javascript\n/* çº¿æ€§é˜¶ */\nfunction linear(n) {\n    // é•¿åº¦ä¸º n çš„æ•°ç»„å ç”¨ O(n) ç©ºé—´\n    const nums = new Array(n);\n    // é•¿åº¦ä¸º n çš„åˆ—è¡¨å ç”¨ O(n) ç©ºé—´\n    const nodes = [];\n    for (let i = 0; i < n; i++) {\n        nodes.push(new ListNode(i));\n    }\n    // é•¿åº¦ä¸º n çš„å“ˆå¸Œè¡¨å ç”¨ O(n) ç©ºé—´\n    const map = new Map();\n    for (let i = 0; i < n; i++) {\n        map.set(i, i.toString());\n    }\n}\n```\n\nä»¥ä¸‹é€’å½’å‡½æ•°ä¼šåŒæ—¶å­˜åœ¨ `n` ä¸ªæœªè¿”å›çš„ `algorithm()` å‡½æ•°ï¼Œ ä¼šå ç”¨ `O(n)`å¤§å°çš„æ ˆå¸§ç©ºé—´ï¼š\n```javascript\n/* çº¿æ€§é˜¶ï¼ˆé€’å½’å®ç°ï¼‰ */\nfunction linearRecur(n) {\n    console.log(`é€’å½’ n = ${n}`);\n    if (n === 1) return;\n    linearRecur(n - 1);\n}\n```\nå¦‚ä¸‹å›¾ï¼š\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/dfe9b1eb0d0a84c7053f69f794a367b6.png)\n\n#### 3ã€å¹³æ–¹é˜¶ï¼šO(n^2)\nå¹³æ–¹é˜¶å¸¸è§äº**çŸ©é˜µ å’Œ å›¾** ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n```javascript\n/* å¹³æ–¹é˜¶ */\nfunction quadratic(n) {\n    // çŸ©é˜µå ç”¨ O(n^2) ç©ºé—´\n    const numMatrix = Array(n)\n        .fill(null)\n        .map(() => Array(n).fill(null));\n\n    // äºŒç»´åˆ—è¡¨å ç”¨ O(n^2) ç©ºé—´\n    const numList = [];\n    for (let i = 0; i < n; i++) {\n        const tmp = [];\n        for (let j = 0; j < n; j++) {\n            tmp.push(0);\n        }\n        numList.push(tmp);\n    }\n}\n```\nçœ‹çœ‹é€’å½’çš„åœºæ™¯ï¼šæ³¨æ„ï¼Œéœ€è¦å…³æ³¨ `nums` çš„é•¿åº¦ã€‚\n```javascript\n/* å¹³æ–¹é˜¶ï¼ˆé€’å½’å®ç°ï¼‰ */\nfunction quadraticRecur(n) {\n    if (n <= 0) return 0;\n    const nums = new Array(n);\n    console.log(`é€’å½’ n = ${n} ä¸­çš„ nums é•¿åº¦ = ${nums.length}`);\n    return quadraticRecur(n - 1);\n}\n\n```\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/f6b5154844af6165acfa600c31d34e64.png)\n\n#### 4ã€æŒ‡æ•°é˜¶ï¼šO(2^n)\nå¸¸è§ä¸æ„é€ äºŒå‰æ ‘ï¼Œä¸”å…³æ³¨æœ€ç»ˆçš„ `èŠ‚ç‚¹ä¸ªæ•°`ï¼Œå³å ç”¨çš„ç©ºé—´ã€‚\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/5147e79065e5fab121c166b6a62a25ac.png)\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/4f6e32f2f25b2223ae034964af127da9.png)\n\n#### 5ã€å¯¹æ•°é˜¶ï¼šO(log n)\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/1061ba6d1caec553eef45ce34c47290b.png)\n> [!question]\n æœ€åï¼Œæ•°å­—è½¬æˆå­—ç¬¦ä¸²çš„è¡¨è¿°ï¼Œå…¶å®æ²¡å¤ªç†è§£ã€‚\n\n## å››ã€å…¶ä»–\n\n- ç†è®ºä¸Šï¼Œå°¾é€’å½’å‡½æ•°çš„ç©ºé—´å¤æ‚åº¦å¯ä»¥è¢«ä¼˜åŒ–ä¸º `O(1)` ï¼Œä½†è·Ÿç¼–ç¨‹è¯­è¨€æœ‰å…³ç³»\n- å½“å‰çš„è®¡ç®—æœºç³»ç»Ÿï¼Œä»¥ç©ºé—´æ¢æ—¶é—´åœºæ™¯è¾ƒå¤š\n\n## å‚è€ƒ\n[https://www.hello-algo.com/chapter_computational_complexity/time_complexity/#222](https://www.hello-algo.com/chapter_computational_complexity/time_complexity/#222)\n\n","fb3cc7cc5b595137bca393c777a3302b":"\n# å‰è¨€\n\n\nBFS ç®—æ³•\n\nç›®å½•ï¼š\n- ","9c65dd4258cd51b892244514520117a5":"\n# BFS ç®—æ³•æ¡†æ¶\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## BFS ç®—æ³•æ¡†æ¶ \n\nBFS çš„æ ¸å¿ƒæ€æƒ³ï¼šå°±æ˜¯æŠŠä¸€äº›é—®é¢˜æŠ½è±¡æˆ`å›¾`ï¼Œä»ä¸€ä¸ªç‚¹å¼€å§‹ï¼Œå‘å››å‘¨å¼€å§‹æ‰©æ•£ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å†™ BFS ç®—æ³•éƒ½æ˜¯ç”¨ã€Œ`é˜Ÿåˆ—`ã€è¿™ç§æ•°æ®ç»“æ„ï¼Œæ¯æ¬¡å°†ä¸€ä¸ªèŠ‚ç‚¹å‘¨å›´çš„æ‰€æœ‰èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—ã€‚\n\nBFS ç›¸å¯¹ DFS çš„æœ€ä¸»è¦çš„åŒºåˆ«æ˜¯ï¼šBFS æ‰¾åˆ°çš„è·¯å¾„ä¸€å®šæ˜¯**æœ€çŸ­çš„**ï¼Œä½†ä»£ä»·å°±æ˜¯ç©ºé—´å¤æ‚åº¦å¯èƒ½æ¯” DFS å¤§å¾ˆå¤š\n\n\n```javascript hl:12,14,20\nvar BFS = function (start, target) {\n  // æ ¸å¿ƒæ•°æ®ç»“æ„\n  var q = [];\n  // é¿å…èµ°å›å¤´è·¯\n  var visited = new Set();\n  var step = 0;\n\n  // å°†èµ·ç‚¹åŠ å…¥é˜Ÿåˆ—\n  q.push(start);\n  visited.add(start);\n\n  while (q.length > 0) {\n    var sz = q.length;\n    // å°†å½“å‰é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹å‘å››å‘¨æ‰©æ•£\n    for (var i = 0; i < sz; i++) {\n      var cur = q.shift();\n      // åˆ’é‡ç‚¹ï¼šè¿™é‡Œåˆ¤æ–­æ˜¯å¦åˆ°è¾¾ç»ˆç‚¹\n      if (cur == target) return step;\n      // å°† cur çš„ç›¸é‚»èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—\n      var adj = cur.adj();\n      for (var j = 0; j < adj.length; j++) {\n        var x = adj[j];\n        if (!visited.has(x)) {\n          q.push(x);\n          visited.add(x);\n        }\n      }\n    }\n    step++;\n  }\n  // å¦‚æœèµ°åˆ°è¿™é‡Œï¼Œè¯´æ˜åœ¨å›¾ä¸­æ²¡æœ‰æ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹\n};\n\n```\n\n## ç¤ºä¾‹ä¸€ï¼šäºŒå‰æ ‘æœ€å°æ·±åº¦\n\n> åŠ›æ‰£ç¬¬ 111 é¢˜ã€Œ[äºŒå‰æ ‘çš„æœ€å°æ·±åº¦](https://leetcode.cn/problems/minimum-depth-of-binary-tree)ã€\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241113-7.png)\n\n```javascript\nvar minDepth = function (root) {\n  if (root == null) return 0;\n  let queue = [];\n  queue.push(root);\n  // root æœ¬èº«å°±æ˜¯ä¸€å±‚ï¼Œdepth åˆå§‹åŒ–ä¸º 1\n  let depth = 1;\n\n  while (queue.length != 0) {\n    let size = queue.length;\n    // å°†å½“å‰é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹å‘å››å‘¨æ‰©æ•£\n    for (let i = 0; i < size; i++) {\n      let cur = queue.shift();\n      // åˆ¤æ–­æ˜¯å¦åˆ°è¾¾ç»ˆç‚¹\n      if (cur.left == null && cur.right == null) return depth;\n      // å°† cur çš„ç›¸é‚»èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—\n      if (cur.left != null) queue.push(cur.left);\n      if (cur.right != null) queue.push(cur.right);\n    }\n    // è¿™é‡Œå¢åŠ æ­¥æ•°\n    depth++;\n  }\n  return depth;\n};\n```\n\n## ç¤ºä¾‹äºŒï¼šè§£å¼€å¯†ç æœ€å°‘æ¬¡æ•°\n\n>  åŠ›æ‰£ç¬¬ 752 é¢˜ã€Œ[æ‰“å¼€è½¬ç›˜é”](https://leetcode.cn/problems/open-the-lock)ã€\n\n\n","e3c86d6c2a7554ab90a2764439e6348a":"\n# å‰è¨€\n\n\n\n- åŠ¨æ€è§„åˆ’\n- è´ªå¿ƒç®—æ³•\n","e10d4c3ba6f75565a35927af6a420b84":"\n# æ–æ³¢é‚£å¥‘æ•°åˆ—\n\n\n`#ç®—æ³•/åŠ¨æ€è§„åˆ’` \n\n> å®ƒä¸æ˜¯`åŠ¨æ€è§„åˆ’é—®é¢˜`ï¼Œä½†æ˜¯å¯¹`äºç†è§£åŠ¨æ€è§„åˆ’`å¾ˆæœ‰å¸®åŠ©ï¼\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›® \n\n| LeetCode                                                                 | åŠ›æ‰£                                                           | éš¾åº¦  |\n| ------------------------------------------------------------------------ | ------------------------------------------------------------ | --- |\n| [509. Fibonacci Number](https://leetcode.com/problems/fibonacci-number/) | [509. æ–æ³¢é‚£å¥‘æ•°](https://leetcode.cn/problems/fibonacci-number/) | ğŸŸ¢  |\n|                                                                          |                                                              |     |\n\n\n![|496](https://od-1310531898.cos.ap-beijing.myqcloud.com/202303181734365.png)\n\n## 2. `è‡ªé¡¶å‘ä¸‹`çš„æš´åŠ›é€’å½’è§£æ³•\n\n```typescript\nvar fib = function (n) {\n  if (n === 0) return 0;\n  if (n === 1) return 1;\n  return fib(n - 1) + fib(n - 2);\n};\n```\n\nç®—æ³•å¤æ‚åº¦ï¼Œå¦‚ä¸‹å›¾ï¼Œå³`å­é—®é¢˜çš„ä¸ªæ•° = O(2^n)` Â æŒ‡æ•°çº§åˆ«ï¼Œ`çˆ†ç‚¸`ï¼Œå› ä¸ºæœ‰`é‡å å­é—®é¢˜` \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111.png)\n\n## 3. `è‡ªé¡¶å‘ä¸‹`çš„é€’å½’è§£æ³•ï¼šå¸¦å¤‡å¿˜å½•ä¼˜åŒ–\n\næ‰€è°“è‡ªé¡¶å‘ä¸‹ï¼Œå³ `åŸé—®é¢˜` æ‹†è§£ä¸º`å­é—®é¢˜` ï¼Œ`é€’å½’`å­é—®é¢˜ï¼Œæœ€ç»ˆå¾—å‡º`åŸé—®é¢˜`çš„ç­”æ¡ˆ\n\n```typescript hl:22\n\n// è§£å†³é‡å å­é—®é¢˜ - å¸¦å¤‡å¿˜å½•çš„é€’å½’è§£æ³•\nvar fib = function (n) {\n  // å¤‡å¿˜å½•å…¨åˆå§‹åŒ–ä¸º 0\n  let memo = new Array(n + 1).fill(0);\n  // æ³¨æ„ï¼Œè¿™é‡Œåˆ©ç”¨äº†é—­åŒ…ï¼ŒæŠŠmemoä¼ å…¥ï¼Œèƒ½å¤Ÿä¿è¯ä¸é”€æ¯\n  // è¿›è¡Œå¸¦å¤‡å¿˜å½•çš„é€’å½’\n  return dp(memo, n);\n};\n\n// å¸¦ç€å¤‡å¿˜å½•è¿›è¡Œé€’å½’\n// ä¸¤ä¸ªå‚æ•°ï¼Œä¼ å…¥ memo æ•°ç»„ï¼Œæ·»åŠ ä¸€ä¸ªå‚æ•°\nvar dp = function (memo, n) {\n\n  // base case\n  if (n === 0 || n === 1) return n;\n  // å·²ç»è®¡ç®—è¿‡ï¼Œä¸ç”¨å†è®¡ç®—äº†\n  if (memo[n] !== 0) return memo[n];\n  // å¦åˆ™ï¼Œé‡æ–°è®¡ç®—ï¼Œå¹¶ä¸”å­˜åˆ°memoä¸­\n  \n  // è¿™é‡Œåˆ©ç”¨äº†é—­åŒ…ï¼ŒæŠŠmemoä¼ å…¥\n  memo[n] = dp(memo, n - 1) + dp(memo, n - 2);\n  return memo[n];\n  \n};\n```\n\nç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼Œå³ `å­é—®é¢˜çš„ä¸ªæ•° = O(n)` ï¼Œ ç©ºé—´å¤æ‚åº¦ `O(n)`\n\n****\n\n**å¦‚ä¸‹å›¾ï¼š**\n\n![1000](#)      \n\n## 4. è‡ªä½å‘ä¸Šçš„è¿­ä»£è§£æ³•ï¼š `dpæ•°ç»„`\n\n![|592](https://cdn.nlark.com/yuque/0/2024/png/687303/1709475955927-3df209e7-9318-4f7d-848f-cc79870f904d.png)\n\n```typescript\n/*************************************************\n *</div>:è§£æ³•3ï¼š DP table ã€è‡ªä½å‘ä¸Šã€‘dp æ•°ç»„çš„è¿­ä»£ï¼ˆé€’æ¨ï¼‰è§£æ³•\n * //</div>:æ‰€è°“ ã€è‡ªä½å‘ä¸Šã€‘ å³ æ¨å€’è¿‡ç¨‹ï¼Œä»0ï¼Œ1 æ¨å€’å‡º f(2)ç­‰\n * ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n) ï¼Œç©ºé—´å¤æ‚åº¦O(n)\n ************************************************/\nfunction fib (N) {\n  // init var\n  if (N === 0) return 0;\n  let dp = new Array(N + 1).fill(0);\n  \n  // base case\n  dp[0] = 0;\n  dp[1] = 1;\n  \n  //// çŠ¶æ€è½¬ç§»æ–¹ç¨‹\n  for (let i = 2; i <= N; i++) {\n    dp[i] = dp[i - 1] + dp[i - 2];\n  }\n  return dp[N];\n};\n```\n\nç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯`O(n)` ï¼Œç©ºé—´å¤æ‚åº¦`O(n)`\n\n## 5. çŠ¶æ€è½¬ç§»æ–¹ç¨‹\n\nå…¶å®ï¼Œå°±æ˜¯`è½¬æ€è½¬ç§»æ–¹ç¨‹`çš„å®ç°ï¼Œå¦‚ä¸‹ï¼š\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-2.png)\n\n## 6. ç©ºé—´å¤æ‚åº¦é™ä¸º `O(1)`\n```typescript\n// è¿›ä¸€æ­¥ä¼˜åŒ–ï¼ŒæŠŠäºŒç»´çš„dp table å‹æˆä¸€ç»´çš„,å³åªè¦ç»´æŠ¤ä¸¤ä¸ªå˜é‡ prev  curr\nfunction fib (n) {\n  if (n === 0 || n === 1) return n;\n  let prev = 1, curr = 1;\n  \n  for (let i = 2; i < n; i++) {\n    let sum = prev + curr;\n    prev = curr;\n    curr = sum;\n  }\n\n  return curr;\n};\n```\n\n## 7. æœ€å\n\n1. `dpæ•°ç»„`è§£æ³•å¯èƒ½è¿›ä¸€æ­¥å‹ç¼©ç©ºé—´å¤æ‚åº¦ï¼Œè€Œé€šè¿‡`é€’å½’å‡½æ•°è§£æ³•`ä¸ä¸€å®šèƒ½å¤Ÿå‹ç¼©\n2. è¯´è¯´ `dpæ•°ç»„` ä¸ `dpå‡½æ•°` åŒºåˆ« ï¼Ÿ\n\n","52415a8f8ad552459e3174a652e42ba9":"\n# å­åºåˆ—ï¼šæœ€å°ç¼–è¾‘è·ç¦»\n\n\n`#ç®—æ³•/åŠ¨æ€è§„åˆ’` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›® \n\n- [https://leetcode.cn/problems/edit-distance/](https://leetcode.cn/problems/edit-distance/)\n\n![|552](https://832-1310531898.cos.ap-beijing.myqcloud.com/121c9f2c19ea847e86dd4ff23298597e.png)\n\n\n## åˆ†æ\n\n**è§£å†³ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åŠ¨æ€è§„åˆ’é—®é¢˜**ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨ä¸¤ä¸ªæŒ‡é’ˆ `i, j` åˆ†åˆ«æŒ‡å‘ä¸¤ä¸ªå­—ç¬¦ä¸²çš„`æœ€å`ï¼Œç„¶åä¸€æ­¥æ­¥`å¾€å‰ç§»åŠ¨`ï¼Œç¼©å°é—®é¢˜çš„è§„æ¨¡ï¼Œå¦‚ä¸‹é¢åŠ¨åŠ¨å›¾ï¼š\n\n- `s1 = \"rad\"`\n- `s2 = \"apple\"`\n\næŠŠ `s1` å˜æˆ `s2`\n\n![|600](https://832-1310531898.cos.ap-beijing.myqcloud.com/01f8b13eb391c5e181c9625ae00f1ddb.gif)\n\nå…¶å®ä¸€å…± **4 ç§æ“ä½œ**ï¼š\n\n- å•¥éƒ½åˆ«åšï¼ˆ`skip`ï¼‰ï¼Œç›´æ¥ç§»åŠ¨ `i` å’Œ `j` å³å¯ã€‚\n- æ’å…¥ï¼ˆ`insert`ï¼‰\n- åˆ é™¤ï¼ˆ`delete`ï¼‰\n- æ›¿æ¢ï¼ˆ`replace`ï¼‰\n\n**å®šä¹‰ dp å‡½æ•°**ï¼š`dp(s1, i, s2, j)`  ï¼Œä»£è¡¨ `s1[0..i]` å’Œ `s2[0..j]` çš„æœ€å°ç¼–è¾‘è·ç¦»ï¼Œå³` s1` å˜æˆ `s2` çš„ `æœ€çŸ­ç¼–è¾‘è·ç¦»`ã€‚\n\n> æ³¨æ„ï¼šè¿™é‡Œæ˜¯å€’ç€é€’å½’\n\n\n## è‡ªé¡¶å‘ä¸‹çš„é€’å½’è§£æ³• - æš´åŠ›\n\n```javascript\nvar minDistance = function (s1, s2) {\n    var m = s1.length, n = s2.length;\n    // iï¼Œj åˆå§‹åŒ–æŒ‡å‘æœ€åä¸€ä¸ªç´¢å¼•\n    return dp(s1, m - 1, s2, n - 1);\n};\n\n// å®šä¹‰ï¼šè¿”å› s1[0..i] å’Œ s2[0..j] çš„æœ€å°ç¼–è¾‘è·ç¦»\nvar dp = function (s1, i, s2, j) {\n    // base case\n    // :::: å³ s1 = '' ,æ‰€ä»¥ s1 å˜æˆ s2 çš„æœ€å°ç¼–è¾‘è·ç¦»å°±æ˜¯ s2 çš„é•¿åº¦,\n    //  å³ä¸€ç›´æ’å…¥\n    if (i === -1) return j + 1;\n    // :::: å³ s2 = '' ,æ‰€ä»¥ s1 å˜æˆ s2 çš„æœ€å°ç¼–è¾‘è·ç¦»å°±æ˜¯ s1 çš„é•¿åº¦ï¼Œ\n    //  å³ä¸€ç›´åˆ é™¤\n    if (j === -1) return i + 1;\n    \n    // skip, æ‰€ä»¥ i-1, j-1\n    if (s1[i] === s2[j]) {\n        return dp(s1, i - 1, s2, j - 1);\n    }\n    \n    return Math.min(\n        // æ’å…¥, s1[i] æ’å…¥åˆ° s2[j] å‰é¢, æ‰€ä»¥ j-1\n        dp(s1, i, s2, j - 1) + 1,\n        // åˆ é™¤ï¼Œs1[i] åˆ é™¤ï¼Œæ‰€ä»¥ i-1\n        dp(s1, i - 1, s2, j) + 1,\n        // æ›¿æ¢, s2[j] æ›¿æ¢ä¸º s1[i], æ‰€ä»¥ i-1, j-1\n        dp(s1, i - 1, s2, j - 1) + 1\n    );\n};\n\nconsole.log(minDistance('horse', 'ros')); // 3\nconsole.log(minDistance('intention', 'execution')); // 5\n```\n\n> [!tip]\næ³¨æ„çœ‹**æ³¨é‡Š**ï¼Œå¦å¤–è¿™é‡Œçš„`çŠ¶æ€` ä¸ `é€‰æ‹©` åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\n> [!tip]\nLeetCode æ‰§è¡Œè¶…æ—¶ï¼\n\n\n## è‡ªé¡¶å‘ä¸‹çš„é€’å½’è§£æ³•  - å¤‡å¿˜å½•ä¼˜åŒ–\n\n```javascript\nvar minDistance = function (s1, s2) {\n    var m = s1.length, n = s2.length;\n    const memo = [];\n    for (let i = 0; i < m; i++) {\n        memo[i] = new Array(n).fill(-1);\n    }\n    // iï¼Œj åˆå§‹åŒ–æŒ‡å‘æœ€åä¸€ä¸ªç´¢å¼•\n    return dp(s1, m - 1, s2, n - 1, memo);\n};\n\n// å®šä¹‰ï¼šè¿”å› s1[0..i] å’Œ s2[0..j] çš„æœ€å°ç¼–è¾‘è·ç¦»\nvar dp = function (s1, i, s2, j, memo) {\n    // base case\n    // :::: å³ s1 = '' ,æ‰€ä»¥ s1 å˜æˆ s2 çš„æœ€å°ç¼–è¾‘è·ç¦»å°±æ˜¯ s2 çš„é•¿åº¦,\n    //  å³ä¸€ç›´æ’å…¥\n    if (i === -1) return j + 1;\n    // :::: å³ s2 = '' ,æ‰€ä»¥ s1 å˜æˆ s2 çš„æœ€å°ç¼–è¾‘è·ç¦»å°±æ˜¯ s1 çš„é•¿åº¦ï¼Œ\n    //  å³ä¸€ç›´åˆ é™¤\n    if (j === -1) return i + 1;\n\n    // memo[i][j] å·²ç»è®¡ç®—è¿‡\n    if (memo[i][j] !== -1) return memo[i][j];\n\n    // skip, æ‰€ä»¥ i-1, j-1\n    if (s1[i] === s2[j]) {\n        return memo[i][j] = dp(s1, i - 1, s2, j - 1, memo);\n    }\n    return memo[i][j] = Math.min(\n        // æ’å…¥, s1[i] æ’å…¥åˆ° s2[j] å‰é¢, æ‰€ä»¥ j-1\n        dp(s1, i, s2, j - 1, memo) + 1,\n        // åˆ é™¤ï¼Œs1[i] åˆ é™¤ï¼Œæ‰€ä»¥ i-1\n        dp(s1, i - 1, s2, j, memo) + 1,\n        // æ›¿æ¢, s2[j] æ›¿æ¢ä¸º s1[i], æ‰€ä»¥ i-1, j-1\n        dp(s1, i - 1, s2, j - 1, memo) + 1\n    );\n};\n\nconsole.log(minDistance('horse', 'ros'));\nconsole.log(minDistance('intention', 'execution'));\n\n```\n\nä¹Ÿç›´æ¥ä½¿ç”¨`memo={}` æˆ–è€… `memo=new Map()`  æ¥ä¼˜åŒ–ï¼Œé¿å…åˆå§‹åŒ–äºŒç»´æ•°ç»„ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```javascript\nvar minDistance = function (s1, s2) {\n    var m = s1.length, n = s2.length;\n    // ç›´æ¥ä½¿ç”¨å¯¹è±¡ï¼Œè€Œä¸æ˜¯äºŒç»´æ•°ç»„\n    const memo = {};\n    // iï¼Œj åˆå§‹åŒ–æŒ‡å‘æœ€åä¸€ä¸ªç´¢å¼•\n    return dp(s1, m - 1, s2, n - 1, memo);\n};\n\n// å®šä¹‰ï¼šè¿”å› s1[0..i] å’Œ s2[0..j] çš„æœ€å°ç¼–è¾‘è·ç¦»\nvar dp = function (s1, i, s2, j, memo) {\n    // base case\n    // :::: å³ s1 = '' ,æ‰€ä»¥ s1 å˜æˆ s2 çš„æœ€å°ç¼–è¾‘è·ç¦»å°±æ˜¯ s2 çš„é•¿åº¦,\n    //  å³ä¸€ç›´æ’å…¥\n    if (i === -1) return j + 1;\n    // :::: å³ s2 = '' ,æ‰€ä»¥ s1 å˜æˆ s2 çš„æœ€å°ç¼–è¾‘è·ç¦»å°±æ˜¯ s1 çš„é•¿åº¦ï¼Œ\n    //  å³ä¸€ç›´åˆ é™¤\n    if (j === -1) return i + 1;\n\n    // memo[i][j] å·²ç»è®¡ç®—è¿‡\n    if (memo[`${i}-${j}`] !== undefined) return memo[`${i}-${j}`];\n\n    // skip, æ‰€ä»¥ i-1, j-1\n    if (s1[i] === s2[j]) {\n        return memo[`${i}-${j}`] = dp(s1, i - 1, s2, j - 1, memo);\n    }\n    return memo[`${i}-${j}`] = Math.min(\n        // æ’å…¥, s1[i] æ’å…¥åˆ° s2[j] å‰é¢, æ‰€ä»¥ j-1\n        dp(s1, i, s2, j - 1, memo) + 1,\n        // åˆ é™¤ï¼Œs1[i] åˆ é™¤ï¼Œæ‰€ä»¥ i-1\n        dp(s1, i - 1, s2, j, memo) + 1,\n        // æ›¿æ¢, s2[j] æ›¿æ¢ä¸º s1[i], æ‰€ä»¥ i-1, j-1\n        dp(s1, i - 1, s2, j - 1, memo) + 1\n    );\n};\n\nconsole.log(minDistance('horse', 'ros'));\nconsole.log(minDistance('intention', 'execution'));\n```\n\n> [!danger]\næ³¨æ„ï¼šä¸€ç‚¹è¦åœ¨æ‰€æœ‰éœ€è¦èµ‹å€¼ç»™ `memo` çš„åœ°æ–¹èµ‹å€¼ï¼Œæäº†åŠå¤©ï¼Œå‘ç°å°‘äº†èµ‹å€¼äº†\n\n> [!info]\nå¦‚æœè¯´ `memo` ä¸º`å¯¹è±¡`æ—¶ï¼Œå¯ä»¥å°‘äº†åˆå§‹åŒ–å·¥ä½œï¼Œå¦‚æœæ˜¯`æ•°ç»„`æ—¶ï¼Œåˆå§‹åŒ–æ•°ç»„æ—¶ï¼Œå…¶å®ä¿è¯äºŒç»´æ•°ç»„é•¿åº¦å’Œå®½åº¦**å¤§ä¸€ç‚¹ä¹Ÿæ²¡å…³ç³»**ã€‚\n\n\n## è‡³åº•å‘ä¸Šçš„ dp table è§£æ³•\n\n![|584](https://832-1310531898.cos.ap-beijing.myqcloud.com/07695c5c20b4168dbaa64e0a984c3eb9.png)\n> \n> [!warning]\n`dp å‡½æ•°`çš„ base case æ˜¯ i, j ç­‰äº `-1`ï¼Œè€Œ **dpæ•°ç»„ç´¢å¼•è‡³å°‘æ˜¯ 0**ï¼Œæ‰€ä»¥ dp æ•°ç»„ä¼šåç§»ä¸€ä½ã€‚\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\nlet minDistance = function (s1, s2) {\n    let m = s1.length, n = s2.length;\n    // å®šä¹‰ï¼šs1[0..i] å’Œ s2[0..j] çš„æœ€å°ç¼–è¾‘è·ç¦»æ˜¯ dp[i+1][j+1]\n    let dp = [];\n    for (let i = 0; i <= m; i++) {\n        dp[i] = new Array(n + 1).fill(0);\n    }\n    // base case\n    // ::::å³ s2 = '' \n    for (let i = 1; i <= m; i++) {\n        dp[i][0] = i;\n    }\n    // ::::å³ s1 = ''\n    for (let j = 1; j <= n; j++) {\n        dp[0][j] = j;\n    }\n    // è‡ªåº•å‘ä¸Šæ±‚è§£\n    for (let i = 1; i <= m; i++) {\n        for (let j = 1; j <= n; j++) {\n            if (s1[i - 1] === s2[j - 1]) {\n                dp[i][j] = dp[i - 1][j - 1];\n            } else {\n                dp[i][j] = Math.min(\n                    dp[i - 1][j] + 1,\n                    dp[i][j - 1] + 1,\n                    dp[i - 1][j - 1] + 1\n                );\n            }\n        }\n    }\n    // å‚¨å­˜ç€æ•´ä¸ª s1 å’Œ s2 çš„æœ€å°ç¼–è¾‘è·ç¦»\n    return dp[m][n];\n};\n```\n\n> [!failure]\nå…¶å®ï¼Œdpæ•°ç»„ï¼Œä¿è¯å¼€å§‹ç´¢å¼•`å¤§äº 0`ï¼Œ`æœ€å¤§ç­‰äº length + 1` å³èƒ½ä¿è¯èŒƒå›´æ­£å¸¸ï¼Œè™½ç„¶å¤§ä¸€ç‚¹ä¹Ÿè¡Œ\n\n\n## ç©ºé—´å¤æ‚åº¦å‹ç¼©æˆ `O(min(M, N))`\n![|600](https://832-1310531898.cos.ap-beijing.myqcloud.com/9208e921f753e3b70a2a30c144931263.png)\n\nå¦‚ä¸Šå›¾ï¼Œæ—¢ç„¶æ¯ä¸ª `dp[i][j]` åªå’Œå®ƒé™„è¿‘çš„ä¸‰ä¸ªçŠ¶æ€æœ‰å…³ï¼Œ`ç©ºé—´å¤æ‚åº¦`æ˜¯å¯ä»¥å‹ç¼©æˆ `O(min(M, N))` çš„ï¼ˆ`M`ï¼Œ`N` æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ï¼‰\næ•°æ®ç»“æ„æ„é€ å¦‚ä¸‹ï¼š\n\n```javascript\nfunction Node() {\n    this.val = 0;\n    this.choice = 0; // 0 ä»£è¡¨å•¥éƒ½ä¸åš\n                     // 1 ä»£è¡¨æ’å…¥\n                     // 2 ä»£è¡¨åˆ é™¤\n                     // 3 ä»£è¡¨æ›¿æ¢\n}\n```\n\n`val` å±æ€§å°±æ˜¯ä¹‹å‰çš„ `dp æ•°ç»„`çš„æ•°å€¼ï¼Œ`choice` å±æ€§ä»£è¡¨æ“ä½œã€‚åœ¨åšæœ€ä¼˜é€‰æ‹©æ—¶ï¼Œé¡ºä¾¿æŠŠæ“ä½œè®°å½•ä¸‹æ¥ï¼Œç„¶åå°±ä»ç»“æœåæ¨å…·ä½“æ“ä½œã€‚\næˆ‘ä»¬çš„æœ€ç»ˆç»“æœä¸æ˜¯ `dp[m][n]` å—ï¼Œè¿™é‡Œçš„ `val` å­˜ç€`æœ€å°ç¼–è¾‘è·ç¦»`ï¼Œchoice å­˜ç€`æœ€åä¸€ä¸ªæ“ä½œ`ï¼Œæ¯”å¦‚è¯´æ˜¯`æ’å…¥æ“ä½œ`ï¼Œé‚£ä¹ˆå°±å¯ä»¥`å·¦ç§»ä¸€æ ¼`\næœ€ç»ˆï¼Œåˆ° `dp[0][0]`ï¼Œå¦‚ä¸‹å›¾è¿™æ ·ï¼š\n\n![|544](https://832-1310531898.cos.ap-beijing.myqcloud.com/418ac76556402886b7105d0d45974274.png)\n\n\n> å…·ä½“å®ç°ä¸å±•å¼€ï¼Œç‚¹åˆ°ä¸ºæ­¢ï¼\n\n\n## æœ€å\n\n- è¿™ä¸ªé¢˜ä¸»è¦æ˜¯`å€’ç€éå†`\n- è¿˜æ˜¯`é€’å½’å¤‡å¿˜å½•`ï¼Œä¸å®¹æ˜“å†™å‡ºé—®é¢˜ï¼Œdp æ•°ç»„ç»†èŠ‚æ¯”è¾ƒå¤š\n- æœ€åï¼Œè¿˜æœ‰ä¸ªæ€è·¯æ˜¯å¦‚ä½•`å‹ç¼©ç©ºé—´å¤æ‚åº¦`ï¼Œå–å†³äºçŠ¶æ€å¦‚ä½•è½¬ç§»ï¼Ÿ å¾ˆå¤šåŠ¨æ€è§„åˆ’çš„é—®é¢˜éƒ½å¯ä»¥å‹ç¼©ç©ºé—´å¤æ‚åº¦\n","92d9516630bf5022933f770597975679":"\n# å­åºåˆ—ï¼šæœ€å¤§å­æ•°ç»„\n\n`#ç®—æ³•/åŠ¨æ€è§„åˆ’` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›® \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-6.png)\n\n## 2. è§£æ³•ä¸€ï¼šæ»‘åŠ¨çª—å£è§£æ³•\n\n- åœ¨çª—å£å†…å…ƒç´ ä¹‹å’Œ`å¤§äºç­‰äº 0 æ—¶`æ‰©å¤§çª—å£\n- åœ¨çª—å£å†…å…ƒç´ ä¹‹å’Œ`å°äº 0 æ—¶`ç¼©å°çª—å£\n- åœ¨æ¯æ¬¡ç§»åŠ¨çª—å£æ—¶æ›´æ–°ç­”æ¡ˆ\n\nè¯·é—®ï¼šæœ‰æ­£æ•°æœ‰è´Ÿæ•°ä¸ºä»€ä¹ˆä¹Ÿèƒ½å¾—åˆ°æ­£ç¡®ç­”æ¡ˆï¼Ÿ\n\n```javascript hl:23\n/**\n * @description æœ€å¤§å­æ•°ç»„å’Œï¼Œæ»‘åŠ¨çª—å£æ€è·¯\n * @param {number[]} nums\n * @return {number} è¿”å›æœ€å¤§å­æ•°ç»„å’Œ\n */\nvar maxSubArray = function (nums) {\n  // é¢˜è®¾ä¸­çš„æœ€å°å€¼\n  let res = -10000 * 100000;\n  // â‘   åˆå§‹åŒ–å·¦æŒ‡é’ˆï¼Œå³æŒ‡é’ˆï¼Œçª—å£å†…å…ƒç´ çš„å’Œ\n  let left = 0; // å·¦æŒ‡é’ˆ\n  let right = 0; // å³æŒ‡é’ˆ\n  let windowSum = 0; // çª—å£å†…å…ƒç´ çš„å’Œ\n\n  // â‘¡  éå†ï¼Œä½¿ç”¨æ»‘åŠ¨çª—å£æ€è·¯\n  while (right < nums.length) {\n    // â‘¢  æ›´æ–° windowSum\n    windowSum += nums[right];\n    // â‘£  æ›´æ–°å³æŒ‡é’ˆ\n    right++;\n    // â‘¤  æ›´æ–°ç»“æœ\n    res = Math.max(res, windowSum);\n    // â‘¥  åˆ¤æ–­æ˜¯å¦éœ€è¦æ”¶ç¼©å·¦æŒ‡é’ˆ\n    // å¦‚æœ windowSum å°äº 0ï¼Œè¯´æ˜ windowSum å¯¹ç»“æœæ˜¯å‡å°‘çš„ï¼Œéœ€è¦æ”¶ç¼©å·¦æŒ‡é’ˆ\n    while (windowSum < 0) {\n      // â‘¦  æ›´æ–° windowSum\n      windowSum -= nums[left];\n      left++;\n    }\n  }\n\n  return res;\n};\n\n```\n\n## 3. è§£æ³•äºŒï¼šåŠ¨æ€è§„åˆ’è§£æ³•\n\nä»¥Â `nums[i]`Â ä¸º**ç»“å°¾**çš„ã€Œæœ€å¤§å­æ•°ç»„å’Œã€ä¸ºÂ `dp[i]`\n\n`dp[i]`Â æœ‰ä¸¤ç§ã€Œé€‰æ‹©ã€\n- è¦ä¹ˆä¸å‰é¢çš„ç›¸é‚»å­æ•°ç»„è¿æ¥ï¼Œå½¢æˆä¸€ä¸ªå’Œæ›´å¤§çš„å­æ•°ç»„ï¼›\n- è¦ä¹ˆä¸ä¸å‰é¢çš„å­æ•°ç»„è¿æ¥ï¼Œè‡ªæˆä¸€æ´¾ï¼Œè‡ªå·±ä½œä¸ºä¸€ä¸ªå­æ•°ç»„\n\n```javascript\nvar maxSubArray = function (nums) {\n  var n = nums.length;\n  if (n === 0) return 0;\n  // å®šä¹‰ï¼šdp[i] è®°å½•ä»¥ nums[i] ä¸ºç»“å°¾çš„ã€Œæœ€å¤§å­æ•°ç»„å’Œã€\n  var dp = new Array(n);\n  // base case\n  // ç¬¬ä¸€ä¸ªå…ƒç´ å‰é¢æ²¡æœ‰å­æ•°ç»„\n  dp[0] = nums[0];\n  // çŠ¶æ€è½¬ç§»æ–¹ç¨‹\n  for (var i = 1; i < n; i++) {\n    dp[i] = Math.max(nums[i], nums[i] + dp[i - 1]);\n  }\n  // å¾—åˆ° nums çš„æœ€å¤§å­æ•°ç»„\n  var res = -Infinity;\n  for (var i = 0; i < n; i++) {\n    res = Math.max(res, dp[i]);\n  }\n  return res;\n};\n\n```\n\n> è¿˜å¯ä»¥è¿›ä¸€æ­¥å‹ç¼©ç©ºé—´ï¼Œç•¥ï¼\n\n## 4. è§£æ³•ä¸‰ï¼šå‰ç¼€å’Œæ€è·¯\n\n```javascript\n// å‰ç¼€å’ŒæŠ€å·§è§£é¢˜\nvar maxSubArray = function (nums) {\n  var n = nums.length;\n  var preSum = new Array(n + 1).fill(0);\n  preSum[0] = 0;\n  // æ„é€  nums çš„å‰ç¼€å’Œæ•°ç»„\n  for (var i = 1; i <= n; i++) {\n    preSum[i] = preSum[i - 1] + nums[i - 1];\n  }\n\n  var res = Number.NEGATIVE_INFINITY;\n  var minVal = Number.POSITIVE_INFINITY;\n  for (var i = 0; i < n; i++) {\n    // ç»´æŠ¤ minVal æ˜¯ preSum[0..i] çš„æœ€å°å€¼\n    minVal = Math.min(minVal, preSum[i]);\n    // ä»¥ nums[i] ç»“å°¾çš„æœ€å¤§å­æ•°ç»„å’Œå°±æ˜¯ preSum[i+1] - min(preSum[0..i])\n    res = Math.max(res, preSum[i + 1] - minVal);\n  }\n  return res;\n};\n\n```\n\n","fa7515bd583459fcac3bb6d2d99610ff":"\n# å­åºåˆ—ï¼šæœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜\n\n`#ç®—æ³•/åŠ¨æ€è§„åˆ’` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æœ€é•¿å…¬å…±å­åºåˆ— \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-7.png)\n\n> https://leetcode.cn/problems/longest-common-subsequence/description/\n\næ¯”å¦‚è¯´è¾“å…¥Â `s1 = \"zabcde\", s2 = \"acez\"`ï¼Œå®ƒä¿©çš„æœ€é•¿å…¬å…±å­åºåˆ—æ˜¯Â `lcs = \"ace\"`ï¼Œé•¿åº¦ä¸º 3ï¼Œæ‰€ä»¥ç®—æ³•è¿”å› 3ã€‚\n\n### 1.1. dp å‡½æ•°å®šä¹‰\n\n```javascript\n// å®šä¹‰ï¼šè®¡ç®— s1[i..] å’Œ s2[j..] çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦\nvar dp = function(s1, i, s2, j) {\n\n};\n```\n\n- æ ¹æ®è¿™ä¸ªÂ `dp`Â å‡½æ•°çš„å®šä¹‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬æƒ³è¦çš„ç­”æ¡ˆå°±æ˜¯Â `dp(s1, 0, s2, 0)`\n- ä¸” base case å°±æ˜¯Â `i == len(s1)`Â æˆ–Â `j == len(s2)`Â æ—¶ï¼Œå› ä¸ºè¿™æ—¶å€™Â `s1[i..]`Â æˆ–Â `s2[j..]`Â å°±ç›¸å½“äºç©ºä¸²äº†ï¼Œæœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦æ˜¾ç„¶æ˜¯ 0\n\n```javascript\n// å®šä¹‰ï¼šè®¡ç®— s1[i..] å’Œ s2[j..] çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦\nvar dp = function(s1, i, s2, j) {\n    if (s1.charAt(i) == s2.charAt(j)) {\n       // s1[i] å’Œ s2[j] å¿…ç„¶åœ¨ lcs ä¸­ï¼Œ \n       // åŠ ä¸Š s1[i+1..] å’Œ s2[j+1..] ä¸­çš„ lcs é•¿åº¦ï¼Œå°±æ˜¯ç­”æ¡ˆ\n        return 1 + dp(s1, i + 1, s2, j + 1);\n    } else {\n        // s1[i] å’Œ s2[j] ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå­—ç¬¦ä¸åœ¨ lcs ä¸­ï¼Œ\n        // ç©·ä¸¾ä¸‰ç§æƒ…å†µçš„ç»“æœï¼Œå–å…¶ä¸­çš„æœ€å¤§ç»“æœ\n        return Math.max(\n            // æƒ…å†µä¸€ã€s1[i] ä¸åœ¨ lcs ä¸­\n            dp(s1, i + 1, s2, j),\n            // æƒ…å†µäºŒã€s2[j] ä¸åœ¨ lcs ä¸­\n            dp(s1, i, s2, j + 1),\n            // æƒ…å†µä¸‰ã€éƒ½ä¸åœ¨ lcs ä¸­\n            dp(s1, i + 1, s2, j + 1)\n        );\n    }\n};\n```\n\n### 1.2. æœ€ç»ˆä»£ç \n\n```javascript hl:9,41\nvar longestCommonSubsequence = function (s1, s2) {\n  // å¤‡å¿˜å½•ï¼Œæ¶ˆé™¤é‡å å­é—®é¢˜\n  let memo = [];\n\n  // ä¸»å‡½æ•°\n  const m = s1.length,\n    n = s2.length;\n  // å¤‡å¿˜å½•å€¼ä¸º -1 ä»£è¡¨æœªæ›¾è®¡ç®—\n  // åˆå§‹åŒ–äºŒç»´æ•°ç»„ memo,ç›´æ¥ä½¿ç”¨ forå§ï¼Œåˆ«ç”¨å…¶ä»–çš„äº†\n  // è¿™æ ·ä¸å®¹æ˜“å‡ºé”™\n  for (let i = 0; i < m; i++) {\n    memo[i] = [];\n    for (let j = 0; j < n; j++) {\n      memo[i][j] = -1;\n    }\n  }\n\n  // è®¡ç®— s1[0..] å’Œ s2[0..] çš„ lcs é•¿åº¦\n  return dp(s1, 0, s2, 0);\n\n  // å®šä¹‰ï¼šè®¡ç®— s1[i..] å’Œ s2[j..] çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦\n  function dp(s1, i, s2, j) {\n    // base caseï¼šä»»ä½•ä¸€ä¸ªå­—ç¬¦ä¸²åˆ°å¤´äº†ï¼Œè¿”å› 0\n    // å› ä¸ºè¿™ä¸ªæ—¶å€™ï¼Œlcs çš„é•¿åº¦æ˜¯ç©ºå­—ç¬¦ä¸²\n    if (i === s1.length || j === s2.length) {\n      return 0;\n    }\n    // å¦‚æœä¹‹å‰è®¡ç®—è¿‡ï¼Œåˆ™ç›´æ¥è¿”å›å¤‡å¿˜å½•ä¸­çš„ç­”æ¡ˆ\n    if (memo[i][j] !== -1) {\n      return memo[i][j];\n    }\n    // æ ¹æ® s1[i] å’Œ s2[j] çš„æƒ…å†µåšé€‰æ‹©\n    if (s1.charAt(i) === s2.charAt(j)) {\n      // s1[i] å’Œ s2[j] å¿…ç„¶åœ¨ lcs ä¸­\n      memo[i][j] = 1 + dp(s1, i + 1, s2, j + 1);\n    } else {\n      // s1[i] å’Œ s2[j] è‡³å°‘æœ‰ä¸€ä¸ªä¸åœ¨ lcs ä¸­\n      memo[i][j] = Math.max(\n        dp(s1, i + 1, s2, j), // æƒ…å†µä¸€ï¼š s2[j] ä¸åœ¨ lcs ä¸­\n        dp(s1, i, s2, j + 1), // æƒ…å†µäºŒï¼š s1[i] ä¸åœ¨ lcs ä¸­\n        // dp(s1, i + 1, s2, j + 1), // æƒ…å†µä¸‰ï¼š éƒ½ä¸åœ¨ lcs ä¸­\n      );\n    }\n    return memo[i][j];\n  }\n};\n\n```\n\n> æƒ…å†µä¸‰å¯ä»¥æ³¨é‡Šæ‰ï¼Œå› ä¸ºè¢« æƒ…å†µä¸€ å’Œ æƒ…å†µäºŒåŒ…å«äº†\n\n## 2. ä¸¤ä¸ªå­—ç¬¦ä¸²åŒæ—¶åˆ é™¤åç›¸ç­‰ï¼Œæœ€å°‘éœ€è¦å‡ æ­¥ï¼Ÿ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-8.png)\n\nåˆ é™¤çš„ç»“æœä¸å°±æ˜¯å®ƒä¿©çš„`æœ€é•¿å…¬å…±å­åºåˆ—`å˜›ï¼Œ\n\né‚£ä¹ˆï¼Œè¦è®¡ç®—åˆ é™¤çš„æ¬¡æ•°ï¼Œå°±å¯ä»¥é€šè¿‡æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦**æ¨å¯¼**å‡ºæ¥ï¼š\n\n```javascript hl:4\nvar minDistance = function(s1, s2) {\n    var m = s1.length, n = s2.length;\n    // å¤ç”¨å‰æ–‡è®¡ç®— lcs é•¿åº¦çš„å‡½æ•°\n    var lcs = longestCommonSubsequence(s1, s2);\n    return m - lcs + n - lcs;\n};\n```\n\n## 3. ä½¿ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰æ‰€éœ€åˆ é™¤å­—ç¬¦çš„Â `ASCIIÂ å€¼`çš„æœ€å°å’Œ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-9.png)\n\næ¯”å¦‚è¾“å…¥Â `s1 = \"sea\", s2 = \"eat\"`ï¼Œç®—æ³•è¿”å› 231ã€‚\n- å› ä¸ºåœ¨Â `\"sea\"`Â ä¸­åˆ é™¤Â `\"s\"`\n- åœ¨Â `\"eat\"`Â ä¸­åˆ é™¤Â `\"t\"`ï¼Œå¯ä½¿å¾—ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰ï¼Œä¸”**åˆ æ‰å­—ç¬¦çš„ ASCII ç ä¹‹å’Œæœ€å°**\n\t- å³Â `s(115) + t(116) = 231`\n\n### 3.1. dp å‡½æ•°å®šä¹‰\n\n```javascript\n  // å®šä¹‰ï¼šå°† s1[i..] å’Œ s2[j..] åˆ é™¤æˆç›¸åŒå­—ç¬¦ä¸²ï¼Œ\n  // æœ€å°çš„ ASCII ç ä¹‹å’Œä¸º dp(s1, i, s2, j)ã€‚\n  function dp(s1, i, s2, j) {\n  \n  }\n```\n\n### 3.2. ä»£ç å®ç°\n\n```javascript hl:19,26,43\nvar minimumDeleteSum = function (s1, s2) {\n  // å¤‡å¿˜å½•\n  let memo = [];\n  const m = s1.length,\n    n = s2.length;\n\n  // å¤‡å¿˜å½•å€¼ä¸º -1 ä»£è¡¨æœªæ›¾è®¡ç®—\n  for (let i = 0; i < m; i++) {\n    memo.push(new Array(n).fill(-1));\n  }\n\n  // å®šä¹‰ï¼šå°† s1[i..] å’Œ s2[j..] åˆ é™¤æˆç›¸åŒå­—ç¬¦ä¸²ï¼Œ\n  // æœ€å°çš„ ASCII ç ä¹‹å’Œä¸º dp(s1, i, s2, j)ã€‚\n  function dp(s1, i, s2, j) {\n    let res = 0;\n    // base case start:\n    // å¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²åˆ°å¤´äº†, å¦ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰å­—ç¬¦éƒ½å¾—åˆ é™¤\n    // ASCII ç ä¹‹å’Œå°±æ˜¯åˆ é™¤çš„å­—ç¬¦ ASCII ç ä¹‹å’Œ\n    if (i === s1.length) {\n      // å¦‚æœ s1 åˆ°å¤´äº†ï¼Œé‚£ä¹ˆ s2 å‰©ä¸‹çš„éƒ½å¾—åˆ é™¤\n      for (; j < s2.length; j++) {\n        res += s2.charCodeAt(j);\n      }\n      return res;\n    }\n    if (j === s2.length) {\n      // å¦‚æœ s2 åˆ°å¤´äº†ï¼Œé‚£ä¹ˆ s1 å‰©ä¸‹çš„éƒ½å¾—åˆ é™¤\n      for (; i < s1.length; i++) {\n        res += s1.charCodeAt(i);\n      }\n      return res;\n    }\n    // base case end\n\n    if (memo[i][j] !== -1) {\n      return memo[i][j];\n    }\n\n    if (s1.charAt(i) === s2.charAt(j)) {\n      // s1[i] å’Œ s2[j] éƒ½æ˜¯åœ¨ lcs ä¸­çš„ï¼Œä¸ç”¨åˆ é™¤\n      memo[i][j] = dp(s1, i + 1, s2, j + 1);\n    } else {\n      // s1[i] å’Œ s2[j] è‡³å°‘æœ‰ä¸€ä¸ªä¸åœ¨ lcs ä¸­ï¼Œåˆ ä¸€ä¸ª\n      memo[i][j] = Math.min(\n        s1.charCodeAt(i) + dp(s1, i + 1, s2, j),\n        s2.charCodeAt(j) + dp(s1, i, s2, j + 1),\n      );\n    }\n    return memo[i][j];\n  }\n\n  return dp(s1, 0, s2, 0);\n};\n\n```\n\n","17f74d5ef69d55d1a3673f60587680c6":"\n# å­åºåˆ—ï¼š åŠ¨æ€è§„åˆ’ä¹‹å­åºåˆ—é—®é¢˜è§£é¢˜æ¨¡æ¿ï¼ˆæœ€é•¿å›æ–‡å­åºåˆ—ï¼‰\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å­åºåˆ—ä¸å¥½è§£å†³ \n\n- å­åºåˆ—é—®é¢˜æœ¬èº«å°±ç›¸å¯¹å­ä¸²ã€å­æ•°ç»„æ›´å›°éš¾ä¸€äº›\n\t- å› ä¸ºåºå­åºåˆ—æ˜¯ä¸è¿ç»­çš„\n\n## 2. ä¸¤ç§è§£é¢˜æ¨¡æ¿\n\n### 2.1. ä¸€ç»´ dp æ•°ç»„\n\nå®šä¹‰ï¼šåœ¨å­æ•°ç»„Â `arr[0..i]`Â ä¸­ï¼Œä»¥Â `arr[i]`Â **ç»“å°¾**çš„å­åºåˆ—çš„é•¿åº¦æ˜¯Â `dp[i]`\n\nè¿™æ ·ç¬¦åˆ**å½’çº³æ³•**ï¼Œå¯ä»¥æ‰¾åˆ°**çŠ¶æ€è½¬ç§»**çš„å…³ç³»\n\n```javascript hl:5\nint n = array.length;\nint[] dp = new int[n];\n\nfor (int i = 1; i < n; i++) {\n    for (int j = 0; j < i; j++) {\n        dp[i] = æœ€å€¼(dp[i], dp[j] + ...)\n    }\n}\n```\n\n> æ³¨æ„æ˜¯ä¸Šé¢æ ‡æ³¨çš„ `j < i`\n\n### 2.2. äºŒç»´çš„Â `dp`Â æ•°ç»„\n\nè¿™ç§æ€è·¯è¿ç”¨ç›¸å¯¹æ›´å¤šä¸€äº›\n- å°¤å…¶æ˜¯æ¶‰åŠ**ä¸¤ä¸ªå­—ç¬¦ä¸²/æ•°ç»„çš„å­åºåˆ—**æ—¶\n\t- åœ¨å­æ•°ç»„Â `arr1[0..i]`Â å’Œå­æ•°ç»„Â `arr2[0..j]`Â ä¸­ï¼Œæˆ‘ä»¬è¦æ±‚çš„å­åºåˆ—é•¿åº¦ä¸ºÂ `dp[i][j]`\n\t\t- æ³¨æ„ä¸Šé¢çš„ `i å’Œ j` åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Ÿ\n- ä¹Ÿå¯ä»¥ç”¨äºåªæ¶‰åŠ**ä¸€ä¸ªå­—ç¬¦ä¸²/æ•°ç»„**çš„æƒ…æ™¯ï¼Œæ¯”å¦‚å›æ–‡å­åºåˆ—é—®é¢˜\n\t- åœ¨å­æ•°ç»„Â `array[i..j]`Â ä¸­ï¼Œæˆ‘ä»¬è¦æ±‚çš„å­åºåˆ—çš„é•¿åº¦ä¸ºÂ `dp[i][j]`\n\t\t- æ³¨æ„ä¸Šé¢çš„ `i å’Œ j` åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Ÿ\n\n## 3. æœ€é•¿å›æ–‡å­åºåˆ—\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-10.png)\n\næ¯”å¦‚è¯´è¾“å…¥Â `s = \"aecda\"`ï¼Œç®—æ³•è¿”å› 3ï¼Œå› ä¸ºæœ€é•¿å›æ–‡å­åºåˆ—æ˜¯Â `\"aca\"`ï¼Œé•¿åº¦ä¸º 3ã€‚\n### 3.1. dp æ•°ç»„å®šä¹‰\n\nÂ `dp`Â æ•°ç»„çš„å®šä¹‰æ˜¯ï¼š\nÂ - åœ¨å­ä¸²Â `s[i..j]`Â ä¸­ï¼Œæœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦ä¸ºÂ `dp[i][j]`\n\n```javascript\nif (s[i] == s[j])\n    // å®ƒä¿©ä¸€å®šåœ¨æœ€é•¿å›æ–‡å­åºåˆ—ä¸­\n    dp[i][j] = dp[i + 1][j - 1] + 2;\nelse\n    // s[i+1..j] å’Œ s[i..j-1] è°çš„å›æ–‡å­åºåˆ—æ›´é•¿ï¼Ÿ\n    dp[i][j] = max(\n\t    dp[i + 1][j], \n\t    dp[i][j - 1]\n    );\n```\n\n### 3.2. ä¸ºä»€ä¹ˆæ˜¯ `dp[i][j] = dp[i + 1][j - 1]` \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-13.png)\n\nå¦‚ä¸Šå›¾ï¼Œå¦‚æœ `i=j` ï¼Œé‚£ä¹ˆå°±å¯ä»¥\n- i æŒ‡é’ˆå‘å³ç§»åŠ¨ï¼Œi + 1\n- j æŒ‡é’ˆå‘å·¦ç§»åŠ¨ï¼Œj - 1\n\n### 3.3. éå†é¡ºåº\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-11.png)\n### 3.4. æœ€ç»ˆä»£ç \n\n```javascript\nvar longestPalindromeSubseq = function (s) {\n  var n = s.length;\n  // dp æ•°ç»„å…¨éƒ¨åˆå§‹åŒ–ä¸º 0\n  var dp = Array.from({ length: n }, () => Array(n).fill(0));\n  // base caseï¼ši å’Œ j ç›¸ç­‰çš„è¯ dp[i][j] å¿…ç„¶ç­‰äº 1\n  // ä¸ºä»€ä¹ˆï¼šå› ä¸ºæ­¤æ—¶ s[i..j] åªæœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œé‚£å°±æ˜¯å®ƒè‡ªå·±\n  for (var i = 0; i < n; i++) {\n    dp[i][i] = 1;\n  }\n  // åç€éå†ä¿è¯æ­£ç¡®çš„çŠ¶æ€è½¬ç§»\n  // å› ä¸º dp[i][j] ä¾èµ– dp[i + 1][j - 1]ï¼Œéœ€è¦çŸ¥é“ dp[i + 1][j - 1] æ‰èƒ½ç®—å‡º dp[i][j]\n  for (var i = n - 1; i >= 0; i--) {\n    // j ä» i + 1 å¼€å§‹,å› ä¸º dp[i][j] æ˜¯ä» dp[i + 1][j - 1] è½¬ç§»è¿‡æ¥çš„\n    for (var j = i + 1; j < n; j++) {\n      // çŠ¶æ€è½¬ç§»æ–¹ç¨‹\n      if (s.charAt(i) == s.charAt(j)) {\n        // s[i] å’Œ s[j] å¿…ç„¶åœ¨æœ€é•¿å›æ–‡å­åºåˆ—ä¸­ï¼Œç›´æ¥ +2\n        dp[i][j] = dp[i + 1][j - 1] + 2;\n      } else {\n        dp[i][j] = Math.max(\n          dp[i + 1][j], // s[i] ä¸åœ¨æœ€é•¿å›æ–‡å­åºåˆ—ä¸­\n          dp[i][j - 1], // s[j] ä¸åœ¨æœ€é•¿å›æ–‡å­åºåˆ—ä¸­\n        );\n      }\n    }\n  }\n  // æ•´ä¸ª s çš„æœ€é•¿å›æ–‡å­ä¸²é•¿åº¦\n  return dp[0][n - 1];\n};\n\n```\n\n## 4. è®©å­—ç¬¦ä¸²æˆä¸ºå›æ–‡ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-12.png)\n\n- æ¯”å¦‚è¯´è¾“å…¥Â `s = \"abcea\"`ï¼Œç®—æ³•è¿”å› 2ï¼Œå› ä¸ºå¯ä»¥ç»™Â `s`Â æ’å…¥ 2 ä¸ªå­—ç¬¦ `ba` å˜æˆå›æ–‡ä¸²Â `\"abeceba\"`Â æˆ–è€…Â `\"aebcbea\"`ã€‚\n- å¦‚æœè¾“å…¥Â `s = \"aba\"`ï¼Œåˆ™ç®—æ³•è¿”å› 0ï¼Œå› ä¸ºÂ `s`Â å·²ç»æ˜¯å›æ–‡ä¸²ï¼Œä¸ç”¨æ’å…¥ä»»ä½•å­—ç¬¦\n\n### 4.1. dp å®šä¹‰\n\nå¯¹å­—ç¬¦ä¸²Â `s[i..j]`ï¼Œæœ€å°‘éœ€è¦è¿›è¡ŒÂ `dp[i][j]`Â æ¬¡æ’å…¥æ‰èƒ½å˜æˆå›æ–‡ä¸²\n\n```javascript hl:3\nif (s[i] == s[j]) {\n    // ä¸éœ€è¦æ’å…¥ä»»ä½•å­—ç¬¦\n    dp[i][j] = dp[i + 1][j - 1];\n} else {\n    // æŠŠ s[i+1..j] å’Œ s[i..j-1] å˜æˆå›æ–‡ä¸²ï¼Œé€‰æ’å…¥æ¬¡æ•°è¾ƒå°‘çš„\n    // ç„¶åè¿˜è¦å†æ’å…¥ä¸€ä¸ª s[i] æˆ– s[j]ï¼Œä½¿ s[i..j] é…æˆå›æ–‡ä¸²\n    dp[i][j] = min(\n\t    dp[i + 1][j],  // å†æ’å…¥ä¸€ä¸ª s[i]\n\t    dp[i][j - 1]   // å†æ’å…¥ä¸€ä¸ª s[j]\n\t) + 1;\n}\n```\n\n### 4.2. æœ€ç»ˆä»£ç \n\n```javascript\nvar minInsertions = function (s) {\n  var n = s.length;\n  // dp[i][j] è¡¨ç¤ºæŠŠå­—ç¬¦ä¸² s[i..j] å˜æˆå›æ–‡ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°\n  // dp æ•°ç»„å…¨éƒ¨åˆå§‹åŒ–ä¸º 0\n  var dp = Array.from(Array(n), () => Array(n).fill(0));\n  // åç€éå†ä¿è¯æ­£ç¡®çš„çŠ¶æ€è½¬ç§»\n  for (var i = n - 1; i >= 0; i--) {\n    for (var j = i + 1; j < n; j++) {\n      // çŠ¶æ€è½¬ç§»æ–¹ç¨‹\n      // å¦‚æœ s[i] == s[j]ï¼Œè¯´æ˜ä¸ç”¨æ’å…¥ï¼Œdp[i][j] = dp[i + 1][j - 1]\n      if (s.charAt(i) === s.charAt(j)) {\n        dp[i][j] = dp[i + 1][j - 1];\n      } else {\n        dp[i][j] =\n          Math.min(\n            dp[i + 1][j], // æ’å…¥ s[i]ï¼Œä½¿å¾— s[i,j] å˜æˆå›æ–‡ä¸²\n            dp[i][j - 1], // æ’å…¥ s[j]ï¼Œä½¿å¾— s[i,j] å˜æˆå›æ–‡ä¸²\n          ) + 1;\n      }\n    }\n  }\n  // æ•´ä¸ª s çš„æœ€å°‘æ’å…¥æ¬¡æ•°\n  return dp[0][n - 1];\n};\n\n```\n\n### 4.3. å¤ç”¨æœ€é•¿å›æ–‡å­åºåˆ—çš„ä»£ç \n\n```javascript hl:2\nvar minInsertions = function(s) {\n    return s.length - longestPalindromeSubseq(s);\n};\n\n// è®¡ç®— s ä¸­çš„æœ€é•¿å›æ–‡å­åºåˆ—é•¿åº¦\nvar longestPalindromeSubseq = function(s) {\n    // è§ä¸Šæ–‡\n};\n```\n\n","68c7d9849d4f5850b97c9a49c188f811":"\n# èƒŒåŒ…ï¼š0-1 èƒŒåŒ…é—®é¢˜\n\n`#ç®—æ³•/åŠ¨æ€è§„åˆ’` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›® \n\n![image.png|504](https://832-1310531898.cos.ap-beijing.myqcloud.com/eb326f45af47c14e2417fcafa7d685ef.png)\n\n![image.png|464](https://832-1310531898.cos.ap-beijing.myqcloud.com/b3d4ee3af6a14a7325c4cc7d902898b3.png)\n\nä¸¾ä¾‹è¯´æ˜ï¼š\n\n- `N = 3` è¡¨ç¤ºå¯é€‰æ‹©çš„ç‰©å“æœ‰ `ä¸‰ä»¶`\n- `W = 4`  è¡¨ç¤ºåŒ…èƒ½è£… `4kg` çš„ç‰©å“\n- `wt = [2, 1, 3]`  è¡¨ç¤ºæ¯ä»¶ç‰©å“çš„é‡é‡\n- `val = [4, 2, 3]` è¡¨ç¤ºæ¯ä»¶ç‰©å“çš„ä»·å€¼\n\né‚£ä¹ˆæœ€å¤§ä»·å€¼æ˜¯ï¼šé€‰æ‹©å‰ä¸¤ä¸ªç‰©å“ï¼Œå› ä¸ºæœ€å¤§ä»·å€¼æ˜¯ 6 \n\n## æ˜ç¡® `çŠ¶æ€` ä¸ `é€‰æ‹©`\n\nçŠ¶æ€ï¼Œ å³ä»€ä¹ˆåœ¨å˜åŒ–ï¼Ÿï¼Œæœ‰ä¸¤ä¸ª**çŠ¶æ€\n- åŒ…è¿˜èƒ½è£…å¤šå°‘ï¼Ÿ\n- è¿˜å¯é€‰æ‹©çš„ç‰©å“\n\n**é€‰æ‹©**ï¼Œå¯¹äºä¸€ä¸ªç‰©å“ï¼Œä½ è£…è¿˜æ˜¯ä¸è£…ï¼Ÿ\n- è£…\n- ä¸è£…\n\n## æ˜ç¡® `dpæ•°ç»„` çš„å®šä¹‰\n\n- çŠ¶æ€æœ‰å¤šå°‘ä¸ªï¼Œå†³å®š `dpæ•°ç»„` æ˜¯ `å‡ ç»´`æ•°ç»„\n- `dp[i][w]` çš„å®šä¹‰å¦‚ä¸‹ï¼š\n   - å¯¹äºå‰ `i` ä¸ªç‰©å“ï¼Œ`å½“å‰èƒŒåŒ…çš„ å‰©ä½™ å®¹é‡` ä¸º `w`ï¼Œ è¿™ç§æƒ…å†µä¸‹å¯ä»¥è£…çš„æœ€å¤§ä»·å€¼æ˜¯ `dp[i][w]`\n   - `dp[3][5] = 6`ï¼Œå…¶å«ä¹‰ä¸ºï¼š\n      - å¯¹äºç»™å®šçš„ä¸€ç³»åˆ—ç‰©å“ä¸­ï¼Œè‹¥åªå¯¹`å‰ 3 ä¸ªç‰©å“`è¿›è¡Œé€‰æ‹©ï¼Œå½“èƒŒåŒ…å‰©ä½™å®¹é‡ä¸º `5` æ—¶ï¼Œæœ€å¤šå¯ä»¥è£…ä¸‹çš„ä»·å€¼ä¸º `6`\n- æ‰€ä»¥\n   - base caseï¼š\n      - `dp[i][0] = 0 `ï¼Œ `dp[0][w] = 0` \n      - æ ¹æ®ä¸€å®šè§„åˆ™ï¼ˆ`çŠ¶æ€è½¬ç§»æ–¹ç¨‹`ï¼‰\n   -   æ¨å¯¼å‡º  =>   `dp[N][W]` å³æ˜¯æ‰€è¦æ±‚çš„å€¼\n\n## æ ¹æ®`åŠ¨æ€è§„åˆ’æ¡†æ¶` å†™å‡º æ­¤é¢˜çš„`ä¼ªç ` \n\n```javascript\n// base caseï¼š\ndp[0][...] = base case\n\n// æ ¹æ®çŠ¶æ€çš„ä¸ªæ•°ï¼ŒåµŒå¥—éå†ï¼š\nfor çŠ¶æ€1 in çŠ¶æ€1çš„æ‰€æœ‰å–å€¼ï¼š\n    for çŠ¶æ€2 in çŠ¶æ€2çš„æ‰€æœ‰å–å€¼ï¼š\n        for ...\n            dp[çŠ¶æ€1][çŠ¶æ€2][...] = æ‹©ä¼˜(é€‰æ‹©1ï¼Œé€‰æ‹©2...)\n```\n\n```javascript\n// åˆå§‹åŒ– äºŒç»´ dp æ•°ç»„\ndp[N+1][W+1]\n\n// base case : æ— è®ºå“ªä¸ªæŒ‡æ ‡ä¸º 0ï¼Œdp æ•°ç»„éƒ½ä¸º 0\ndp[0][..] = 0\ndp[..][0] = 0\n\n// æ ¹æ®çŠ¶æ€ï¼ŒåµŒå¥—éå†ï¼Œä¸‹æ ‡ä» 1 å¼€å§‹ï¼Œ=>  æ¨å¯¼å‡º dp[N][W]\nfor i in [1..N]:\n    for w in [1..W]:\n        dp[i][w] = max(\n            æŠŠç‰©å“ i è£…è¿›èƒŒåŒ…,\n            ä¸æŠŠç‰©å“ i è£…è¿›èƒŒåŒ…\n        )\n\nreturn dp[N][W]\n```\n\nå¯¹äº `dp[i][w]` ï¼Œæ¥è‡ªäºä¸¤ä¸ªé€‰æ‹©\n\n- é€‰æ‹©ä¸€ï¼š ç¬¬ `i` ç‰©å“ä¸è£…å…¥\n\t- `dp[i][w]`  =   å‰©ä½™é‡é‡ä¸º `w` çš„åŒ…é€‰æ‹©å‰ `i-1` ä¸ªç‰©å“çš„ä»·å€¼ï¼Œå³`dp[i-1][w]` \n- é€‰æ‹©äºŒï¼š ç¬¬ `i` ä¸ªç‰©å“è£…å…¥\n\t- `dp[i][w]`  =   \n\t\t- åœ¨å‰©ä½™é‡é‡ä¸º `w - wt[i-1]`é™åˆ¶ä¸‹ï¼Œ é€‰æ‹©è£…å‰ `i-1` ä¸ªç‰©å“çš„ä»·å€¼  +   ç¬¬ `i` ä¸ªç‰©å“çš„ä»·å€¼ `val[i]` ï¼Œå³\n\t\t- `dp[i-1][w - wt[i-1]]`  + `val[i-1]`\n\n> æ•°ç»„ç´¢å¼•é—®é¢˜å¯¼è‡´çš„è¯¯è§£ï¼š\n> - å› ä¸ºæ•°ç»„ç´¢å¼•é—®é¢˜ï¼š `val[i-1]` å’Œ  `wt[i-1]` è¡¨ç¤ºç¬¬ `i` ä¸ªç‰©å“çš„ä»·å€¼å’Œé‡é‡\n> \n> æ‰€ä»¥å¯¹äºç¬¬ `i` ä¸ªç‰©å“ï¼Œæˆ‘ä»¬é€‰æ‹©è£…å…¥ï¼Œä¹Ÿå°±æ˜¯è¯´å‰`i-1` ä¸ªç‰©å“ï¼Œåªèƒ½è£…åˆ° `å‰©ä½™é‡é‡` ä¸º `w - wt[i-1]` ï¼Œå³ `dp[i-1][w-[w-1]`\n\n## æœ€ç»ˆä»£ç \n```javascript\n/**\n* @description 0/1 Knapsack Problem\n* */\nfunction fn(N, W, wt, val) {\n    // ::::1ã€åˆå§‹åŒ–dpæ•°ç»„\n    const dp = [];\n    for (let i = 0; i <= N; i++) {\n        dp[i] = [];\n        for (let j = 0; j <= W; j++) {\n            dp[i][j] = 0;\n        }\n    }\n\n    // ::::2ã€base case\n    for (let i = 0; i <= N; i++) {\n        dp[i][0] = 0;\n    }\n    for (let i = 0; i <= W; i++) {\n        dp[0][i] = 0;\n    }\n\n    // ::::3ã€åŠ¨æ€è§„åˆ’æ¡†æ¶ï¼Œæ ¹æ®çŠ¶æ€ä¸ªæ•°ï¼Œå†³å®šåµŒå¥—å±‚æ•°\n    for (let i = 1; i <= N; i++) {\n        for (let w = 1; w <= W; w++) {\n            // å‰©ä½™å®¹é‡å·²ç»å°äº 0 äº†ï¼Œåªèƒ½é€‰æ‹©ä¸è£…å…¥\n            if (w - wt[i - 1] < 0) {\n                dp[i][w] = dp[i - 1][w];\n            } else {\n                // é€‰æ‹©ï¼šè£…å…¥ æˆ–è€… ä¸è£…å…¥\n                dp[i][w] = Math.max(\n                    // ä¸è£…å…¥\n                    dp[i - 1][w],\n                    // è£…å…¥\n                    dp[i - 1][w - wt[i - 1]] + val[i - 1]\n                )\n            }\n        }\n    }\n\n    console.log(dp)\n\n    return dp[N][W];\n}\n\n// const N = 3, W = 4,\n//     wt = [2, 1, 3],\n//     val = [4, 2, 3];\nconst N = 5, W = 50,\n    wt = [10, 20, 30, 40, 50],\n    val = [50, 120, 150, 210, 240];\n\nconsole.log(fn(N, W, wt, val));\n\n```\n\n## é”™è¯¯è®°å½•\n\n![image.png|552](https://832-1310531898.cos.ap-beijing.myqcloud.com/d012e8b84c3fd6834fedff33acd4144c.png)\n\n-  éœ€è¦ ä» `1` å¼€å§‹éå†\n- æ³¨æ„ä¸¤ä¸ªå˜é‡ `w` å’Œ `wt` åˆ«ææ··äº†\n\n","871ba7f218f15700b4782237645ff4fc":"\n# èƒŒåŒ…ï¼šæ•°ç»„æ˜¯å¦å¯ä»¥åˆ†å‰²ä¸¤ä¸ªå­é›†ï¼Œä½¿å¾—è¿™ä¸¤å­é›†çš„å…ƒç´ å’Œç›¸ç­‰\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›® \n\n> [åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/partition-equal-subset-sum/description/)\n\n![image.png|704](https://832-1310531898.cos.ap-beijing.myqcloud.com/04774a23f90d397bbb8af286c8b1cde9.png)\n\n## é¢˜è§£\n\nè¿™é“é¢˜æ˜¯  [14. èƒŒåŒ…ï¼š0-1 èƒŒåŒ…é—®é¢˜](/post/68c7d9849d4f5850b97c9a49c188f811.html) çš„å˜ç§ï¼š\n\n- ç»™ä¸€ä¸ªå¯è£…è½½é‡é‡ä¸º `sum / 2 ` çš„èƒŒåŒ…å’Œ `N` ä¸ªç‰©å“ï¼Œæ¯ä¸ªç‰©å“çš„é‡é‡ä¸º`nums[i]`ã€‚ç°åœ¨è®©ä½ è£…ç‰©å“ï¼Œæ˜¯å¦å­˜åœ¨ä¸€ç§è£…æ³•ï¼Œèƒ½å¤Ÿæ°å¥½å°†èƒŒåŒ…è£…æ»¡ã€‚\n\n## æ˜ç¡® `çŠ¶æ€` å’Œ `é€‰æ‹©`\n\n**çŠ¶æ€ï¼š**\n- èƒŒåŒ…è¿˜èƒ½è£…å¤šå°‘é‡é‡çš„ç‰©å“\n- è¿˜èƒ½é€‰æ‹©çš„ç‰©å“\n**é€‰æ‹©ï¼š**\n- `è£…`è¿›èƒŒåŒ…\n- `ä¸è£…`è¿›èƒŒåŒ…\n\n## æ˜ç¡® `dpæ•°ç»„` çš„å®šä¹‰\n\n###  å®šä¹‰\n\n`dp[i][w] = x` è¡¨ç¤ºï¼š\n- å¯¹äºå‰ `i` ä¸ªç‰©å“ï¼ˆ i ä» 1 å¼€å§‹è®¡æ•°ï¼‰ï¼Œå½“å‰èƒŒåŒ…çš„å®¹é‡ä¸º `w` æ—¶ï¼Œæ˜¯å¦èƒ½è£…æ»¡èƒŒåŒ…\n   - è‹¥ `x` ä¸º `true`ï¼Œåˆ™è¯´æ˜ `å¯ä»¥`æ°å¥½å°†èƒŒåŒ…`è£…æ»¡`\n   - è‹¥ `x` ä¸º `false`ï¼Œåˆ™è¯´æ˜`ä¸èƒ½`æ°å¥½å°†èƒŒåŒ…`è£…æ»¡`\n\n\n> æ‰€ä»¥ï¼Œæœ¬é¢˜çš„é¢˜è§£å°±æ˜¯æ±‚ï¼š`dp[N][sum/2]`\n\n### base case\n\n- `dp[...][0] = true` ï¼Œè¡¨ç¤ºæ²¡æœ‰å®¹é‡ï¼Œ`è£…æ»¡äº†`\n- `dp[0][...]= false` ï¼Œè¡¨ç¤ºæ²¡æœ‰å¯é€‰æ‹©çš„ç‰©å“ï¼Œ`ä¸èƒ½è£…æ»¡`\n\n## æ ¹æ® `é€‰æ‹©` ç¡®å®š `çŠ¶æ€è½¬ç§»æ–¹ç¨‹`\n\n### 1. é€‰æ‹©ä¸€ï¼šä¸é€‰\n\n```javascript\ndp[i][w] = dp[i-1][w]\n```\n\nè§£é‡Šï¼š\n\n> ä½ ä¸æŠŠç¬¬`i` è£…å…¥åŒ…ä¸­æ—¶ï¼Œ`æ˜¯å¦è£…æ»¡`åªå–å†³äº `å‰ i-1 ä¸ªç‰©å“` æ˜¯å¦è£…æ»¡å‰©ä½™å®¹é‡ä¸º `w` çš„èƒŒåŒ…\n\n### 2. é€‰æ‹©äºŒï¼šé€‰æ‹©\n\n```javascript\ndp[i][w] = dp[i-1][w-num[i-1]]\n```\n\nè§£é‡Šï¼š\n\n> ä½ æŠŠç¬¬`i` è£…å…¥åŒ…ä¸­æ—¶ï¼Œ`æ˜¯å¦è£…æ»¡`åªå–å†³äº `å‰ i-1 ä¸ªç‰©å“` æ˜¯å¦è£…æ»¡å‰©ä½™å®¹é‡ä¸º `w - num[i-1]` çš„èƒŒåŒ…\n> \n> æ¢å¥è¯è¯´ï¼Œå¦‚æœ `w - nums[i-1]` çš„ é‡é‡å¯ä»¥è¢«æ°å¥½è£…æ»¡ï¼Œé‚£ä¹ˆåªè¦æŠŠç¬¬ `i` ä¸ªç‰©å“**èƒ½è£…è¿›å»**ï¼Œä¹Ÿå¯æ°å¥½è£…æ»¡ `w` çš„é‡é‡\n\n## æ ¹æ® `åŠ¨æ€è§„åˆ’æ¡†æ¶` å†™å‡º `æœ€ç»ˆä»£ç `\n\n```javascript hl:9\n/**\n * @description åˆ†å‰²ç­‰å’Œå­é›†, 0/1èƒŒåŒ…çš„å˜ç§\n * @url https://leetcode-cn.com/problems/partition-equal-subset-sum/\n * @param {number} N\n * @param {number} W\n * @param {number[]} wt\n * */\nfunction fn(N, W, wt) {\n    // :::: åˆå§‹åŒ–dpæ•°ç»„ åŠå…¶ base case\n    const dp = [];\n    for (let i = 0; i <= N; i++) {\n        dp[i] = [];\n        for (let w = 0; w <= W; w++) {\n            // ::::é‡é‡ä¸º0æ—¶ï¼Œè¡¨ç¤ºèƒ½å¤Ÿè£…å…¥\n            if (w === 0) {\n                dp[i][w] = true;\n            }\n            // ::::å¯é€‰æ‹©çš„ç‰©å“ä¸º0æ—¶ï¼Œè¡¨ç¤ºä¸èƒ½è£…å…¥\n            else if (i === 0) {\n                dp[i][w] = false;\n            }\n            // ::::å…¶ä½™æƒ…å†µï¼Œåˆå§‹åŒ–ä¸ºfalse\n            else {\n                dp[i][w] = false;\n            }\n        }\n    }\n    // ::::æ ¹æ®çŠ¶æ€ä¸ªæ•°ï¼Œå†³å®šåµŒå¥—å±‚æ•°ï¼Œ\n    // ::::ä½¿ç”¨åŠ¨æ€è§„åˆ’æ¡†æ¶æ¨¡æ¿ä»£ç éå†\n    for (let i = 1; i <= N; i++) {\n        for (let w = 1; w <= W; w++) {\n            // ::::å‰©ä½™å®¹é‡å·²ç»å°äº 0 äº†ï¼Œåªèƒ½å–å†³äºä¸Šä¸€ä¸ªç‰©å“çš„çŠ¶æ€ï¼Œæ˜¯å¦è£…æ»¡äº†\n            if (w - wt[i - 1] < 0) {\n                dp[i][w] = dp[i - 1][w];\n            } else {\n                // ::::é€‰æ‹©\n                dp[i][w] =\n                    // ::::ä¸è£…å…¥\n                    dp[i - 1][w] ||\n                    // ::::è£…å…¥\n                    dp[i - 1][w - wt[i - 1]];\n            }\n        }\n    }\n    return dp[N][W];\n}\n\n\n/**\n * @param {number[]} nums\n * @return {boolean}\n */\nvar canPartition = function (nums) {\n    const sum = nums.reduce((a, b) => a + b, 0);\n    // ::::å¦‚æœæ€»å’Œä¸ºå¥‡æ•°ï¼Œç›´æ¥è¿”å›false\n    if (sum % 2 !== 0) return false;\n    // ::::èƒŒåŒ…å®¹é‡\n    const W = sum / 2;\n    // ::::ç‰©å“æ•°é‡\n    const N = nums.length;\n    return fn(N, W, nums);\n};\n\n```\n\n## ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦\n\n```javascript\nvar canPartition = function (nums) {\n    let W = 0;\n    for (let num of nums) W += num;\n    // å’Œä¸ºå¥‡æ•°æ—¶ï¼Œä¸å¯èƒ½åˆ’åˆ†æˆä¸¤ä¸ªå’Œç›¸ç­‰çš„é›†åˆ\n    if (W % 2 !== 0) return false;\n    let N = nums.length;\n    W = W / 2;\n\n    let dp = new Array(W + 1).fill(false);\n\n    // base case\n    dp[0] = true;\n\n    for (let i = 0; i < N; i++) {\n        // ::::: ä»åå¾€å‰éå†\n        for (let w = W; w >= 0; w--) {\n            if (w - nums[i] >= 0) {\n                dp[w] = dp[w] || dp[w - nums[i]];\n            }\n        }\n    }\n    return dp[W];\n};\n```\n\næ—¶é—´å¤æ‚åº¦ `O(n*sum)`ï¼Œç©ºé—´å¤æ‚åº¦ `O(sum)`\n\n> - æ³¨æ„æ˜¯`å€’åº`ï¼Œè®°ä½æ­£å¸¸çš„è§£æ³•å°±è¡Œï¼Œè¿™ç§å‹ç¼©ç©ºé—´å¤æ‚åº¦çš„è§£æ³•ï¼Œè¿˜æ²¡ç†è§£é€\n\n\n","fb8ad30f1da45deebe863cc528c94680":"\n# å®Œå…¨èƒŒåŒ…é—®é¢˜ï¼šé›¶é’±å…‘æ¢\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›® \n\n![image.png|560](https://832-1310531898.cos.ap-beijing.myqcloud.com/0325474c4e8392cb53b049cbb6a6ce07.png)\n\n## é¢˜è§£ï¼šèƒŒåŒ…é—®é¢˜çš„å˜ç§\n\næœ‰ä¸€ä¸ªèƒŒåŒ…ï¼Œæœ€å¤§å®¹é‡ä¸º `amount`ï¼Œæœ‰ä¸€ç³»åˆ—ç‰©å“ `coins`ï¼Œæ¯ä¸ªç‰©å“çš„é‡é‡ä¸º `coins[i]`ï¼Œæ¯ä¸ªç‰©å“çš„**æ•°é‡æ— é™**ã€‚è¯·é—®æœ‰`å¤šå°‘ç§`æ–¹æ³•ï¼Œèƒ½å¤ŸæŠŠèƒŒåŒ…æ°å¥½è£…æ»¡ï¼Ÿ\n\n> æ¯ä¸ªç‰©å“çš„æ•°é‡æ˜¯æ— é™ï¼Œæ‰€ä»¥å«åš **å®Œå…¨èƒŒåŒ…é—®é¢˜\n\n## ä¸‰ã€æ˜ç¡®`çŠ¶æ€`ä¸`é€‰æ‹©`\n\n### çŠ¶æ€\n\n- `èƒŒåŒ…çš„å‰©ä½™å®¹é‡`ï¼Œå³è¿˜èƒ½è£…å¤šå°‘é‡é‡çš„ç‰©ä»¶\n- å¯é€‰æ‹©çš„ç‰©å“\n\n### é€‰æ‹©\n\n- é€‰æ‹©`æ”¾å…¥`èƒŒåŒ…\n- é€‰æ‹©`ä¸æ”¾å…¥`èƒŒåŒ…\n\n## æ˜ç¡® `dp æ•°ç»„`çš„å®šä¹‰\n\n\n`dp[i][w]` çš„å®šä¹‰å¦‚ä¸‹ï¼š\n\nèƒŒåŒ…å˜ç§çš„è§£é‡Šï¼š\n- è‹¥åªä½¿ç”¨`å‰ i ä¸ªç‰©å“`ï¼ˆå¯ä»¥é‡å¤ä½¿ç”¨ï¼‰ï¼Œå½“èƒŒåŒ…å‰©ä½™å®¹é‡ä¸º`w` æ—¶ï¼Œæœ‰ `dp[i][w]` ç§æ–¹æ³•å¯ä»¥`è£…æ»¡`èƒŒåŒ…\nå›åˆ°åŸé¢˜ï¼š\n- è‹¥åªä½¿ç”¨ `coins` ä¸­çš„`å‰ i ä¸ª`ï¼ˆi ä» 1 å¼€å§‹è®¡æ•°ï¼‰ç¡¬å¸çš„é¢å€¼ï¼Œè‹¥æƒ³å‡‘å‡ºé‡‘é¢ `w`ï¼Œæœ‰ `dp[i][w]` ç§`å‡‘æ³•`\n\n\n## æ ¹æ® `åŠ¨æ€è§„åˆ’å¥—è·¯æ¡†æ¶` å†™å‡º`ä¼ªç `\n\n### base case\n\n```javascript hl:1,4\n// é¢å€¼ä¸º 0ï¼Œä»€ä¹ˆä¸ç”¨åšï¼Œå°±æ˜¯ä¸€ç§å‡‘æ³•\ndp[...][0] = 1;\n\n// ä¸ä½¿ç”¨ä»»ä½•ç¡¬å¸é¢å€¼ï¼Œå‡‘æ³•ä¸º 0 \ndp[0][...] = 0;\n```\n\n### æ ¹æ® `æ¡†æ¶` å†™å‡º `ä¼ªç `\n\n```javascript\nâ‘  åˆå§‹åŒ– dp æ•°ç»„\ndp = [][]\n\n  \nâ‘¡ base case\ndp[0][..] = 0\ndp[..][0] = 1\n\nâ‘¢ æ ¹æ®çŠ¶æ€ï¼ŒåµŒå¥—éå†\nfor i in [1..N]:\n    for j in [1..amount]:\n        é€‰æ‹© 1ï¼š\n            æŠŠç‰©å“ i è£…è¿›èƒŒåŒ…,\n        é€‰æ‹© 2ï¼š\n            ä¸æŠŠç‰©å“ i è£…è¿›èƒŒåŒ…\nâ‘£ è¿”å› dp\nreturn dp[N][amount]\n```\n\n## æ ¹æ® `é€‰æ‹©` å†™å‡º `çŠ¶æ€è½¬ç§»æ–¹ç¨‹`\n\n- å¦‚æœä½ ä¸æŠŠè¿™ç¬¬Â `i`Â ä¸ªç‰©å“è£…å…¥èƒŒåŒ…ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ ä¸ä½¿ç”¨Â `coins[i-1]`Â è¿™ä¸ªé¢å€¼çš„ç¡¬å¸\n\t- é‚£ä¹ˆå‡‘å‡ºé¢é¢Â `j`Â çš„æ–¹æ³•æ•°Â `dp[i][j]`Â åº”è¯¥ç­‰äºÂ `dp[i-1][j]`ï¼Œç»§æ‰¿ä¹‹å‰çš„ç»“æœã€‚\n- å¦‚æœä½ æŠŠè¿™ç¬¬Â `i`Â ä¸ªç‰©å“è£…å…¥äº†èƒŒåŒ…ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ ä½¿ç”¨Â `coins[i-1]`Â è¿™ä¸ªé¢å€¼çš„ç¡¬å¸ï¼Œ\n\t- é‚£ä¹ˆÂ `dp[i][j]`Â åº”è¯¥ç­‰äºÂ `dp[i][j-coins[i-1]]`ã€‚\n\n\n## æœ€ç»ˆä»£ç \n\n```javascript\nvar change = function (amount, coins) {\n  var n = coins.length;\n  // åˆå§‹åŒ– dp åŠbase case\n  var dp = [];\n\n  for (var i = 0; i <= n; i++) {\n    dp[i] = [];\n    for (var w = 0; w <= amount; w++) {\n      // é¢å€¼ä¸º 0ï¼Œä»€ä¹ˆä¸ç”¨åšï¼Œå°±æ˜¯ä¸€ç§å‡‘æ³•\n      if (w === 0) {\n        dp[i][w] = 1;\n      } else {\n        dp[i][w] = 0;\n      }\n    }\n  }\n\n  // çŠ¶æ€å†³å®š for å¾ªç¯åµŒå¥—å±‚æ•°\n  for (var i = 1; i <= n; i++) {\n    for (var w = 1; w <= amount; w++) {\n      // å¦‚æœ w - coins[i - 1] >= 0ï¼Œè¯´æ˜å¯ä»¥é€‰æ‹©å½“å‰ç¡¬å¸\n      if (w - coins[i - 1] >= 0) {\n        // é€‰æ‹©å½“å‰ç¡¬å¸å’Œä¸é€‰æ‹©å½“å‰ç¡¬å¸ä¸¤ç§é€‰æ‹©\n        dp[i][w] =\n          dp[i - 1][w] + // ä¸é€‰æ‹©å½“å‰ç¡¬å¸\n          dp[i][w - coins[i - 1]]; // é€‰æ‹©å½“å‰ç¡¬å¸\n      } else {\n        // å¦‚æœ w - coins[i - 1] < 0ï¼Œè¯´æ˜å½“å‰ç¡¬å¸æ— æ³•é€‰æ‹©\n        // å› ä¸ºå½“å‰ç¡¬å¸é¢å€¼æ¯” w å¤§ï¼Œæ ¹æœ¬å‡‘ä¸å‡º w\n        dp[i][w] = dp[i - 1][w];\n      }\n    }\n  }\n  return dp[n][amount];\n};\n\n```\n\n","2889d23a673257459c0c64c7657a4e9c":"\n# èƒŒåŒ…é—®é¢˜ï¼šç›®æ ‡å’Œ\n\n`#ç®—æ³•/åŠ¨æ€è§„åˆ’` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›® \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112.png)\n\n## 2. å›æº¯ç®—æ³•æ€è·¯\n\n### 2.1. å›æº¯ç®—æ³•æ¡†æ¶\n\n```python hl:6\ndef backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨):\n    if æ»¡è¶³ç»“æŸæ¡ä»¶:\n        result.add(è·¯å¾„)\n        return\n    \n    for é€‰æ‹© in é€‰æ‹©åˆ—è¡¨:\n        åšé€‰æ‹©\n        backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨)\n        æ’¤é”€é€‰æ‹©\n```\n\n### 2.2. é€‰æ‹©åˆ—è¡¨\n\nå¯¹äºæ¯ä¸ªæ•°å­—Â `nums[i]`ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©\n- ç»™ä¸€ä¸ªæ­£å·Â `+`Â \n- æˆ–è€…ä¸€ä¸ªè´Ÿå·Â `-`\n\n### 2.3. æœ€ç»ˆä»£ç \n```javascript hl:14,29,36\nvar findTargetSumWays = function (nums, target) {\n  if (nums.length === 0) return 0;\n\n  var result = 0;\n  /**\n   * @description å›æº¯ç®—æ³•æ¨¡æ¿\n   * @param {*} nums å¾…åšé€‰æ‹©çš„æ•°\n   * @param {*} i  ä»£è¡¨å½“å‰åšé€‰æ‹©çš„æ•°çš„ä¸‹æ ‡\n   * @param {*} remain  ä»£è¡¨å‰©ä½™çš„ç›®æ ‡å€¼\n   * @returns void  æ— è¿”å›å€¼\n   */\n  function backtrack(nums, i, remain) {\n    // base caseï¼šå¦‚æœæ‰€æœ‰æ•°éƒ½è®¡ç®—å®Œäº†ï¼Œçœ‹çœ‹ç»“æœæ˜¯å¦ç­‰äº target\n    // ç”±äº remain æ˜¯ç´¯åŠ çš„ï¼Œæ‰€ä»¥å½“ i === nums.length æ—¶ï¼Œremain === 0 è¯´æ˜æ°å¥½å‡‘å‡º target\n    // æ›´æ–°ç»“æœ result\n    if (i === nums.length) {\n      if (remain === 0) {\n        // è¯´æ˜æ°å¥½å‡‘å‡º target\n        result++;\n      }\n      return;\n    }\n\n    /******** ç»™ nums[i] é€‰æ‹© - å· ********/\n    // é€‰æ‹© - , åšåŠ æ³•ï¼Œ\n    // å› ä¸ºç›®æ ‡æ˜¯å‡‘å‡º targetï¼Œæ‰€ä»¥ remain éœ€è¦åŠ ä¸Šå½“å‰çš„ nums[i]\n    remain += nums[i];\n    // ç©·ä¸¾ nums[i + 1]\n    backtrack(nums, i + 1, remain);\n    // æ’¤é”€é€‰æ‹©\n    remain -= nums[i];\n\n    /******** ç»™ nums[i] é€‰æ‹© + å· ********/\n    remain -= nums[i];\n    // ç©·ä¸¾ nums[i + 1]\n    backtrack(nums, i + 1, remain);\n    // æ’¤é”€é€‰æ‹©\n    remain += nums[i];\n  }\n\n  backtrack(nums, 0, target);\n  return result;\n};\n\n```\n\n## 3. åŠ¨æ€è§„åˆ’æ€è·¯\n\n### 3.1. dp å‡½æ•°å®šä¹‰\n\n```js\n// å®šä¹‰ï¼šdp(i, remain) è¡¨ç¤ºï¼Œåˆ©ç”¨ nums[i..] è¿™äº›å…ƒç´ ï¼Œèƒ½å¤Ÿç»„æˆå’Œä¸º remain çš„æ–¹æ³•æ•°é‡\ndp(nums, i, remain)\n```\n\n### 3.2. å®Œæ•´ä»£ç \n\n```javascript\nvar findTargetSumWays = function (nums, target) {\n  if (nums.length === 0) return 0;\n  // å¤‡å¿˜å½•\n  const memo = new Map();\n\n  // å®šä¹‰ï¼šåˆ©ç”¨ nums[i..] è¿™äº›å…ƒç´ ï¼Œèƒ½å¤Ÿç»„æˆå’Œä¸º remain çš„æ–¹æ³•æ•°é‡\n  function dp(nums, i, remain) {\n    // base case\n    if (i === nums.length) {\n      if (remain === 0) return 1;\n      return 0;\n    }\n\n    // æŠŠå®ƒä¿©è½¬æˆå­—ç¬¦ä¸²æ‰èƒ½ä½œä¸ºå“ˆå¸Œè¡¨çš„é”®\n    const key = `${i},${remain}`;\n\n    // é¿å…é‡å¤è®¡ç®—\n    if (memo.has(key)) {\n      return memo.get(key);\n    }\n\n    // è¿˜æ˜¯ç©·ä¸¾\n    const result =\n      dp(nums, i + 1, remain - nums[i]) + // é€‰æ‹© - å·\n      dp(nums, i + 1, remain + nums[i]); // é€‰æ‹© + å·\n\n    // è®°å…¥å¤‡å¿˜å½•\n    memo.set(key, result);\n    return result;\n  }\n\n  return dp(nums, 0, target);\n};\n\n```\n\n## 4. è½¬æˆèƒŒåŒ…é—®é¢˜\n\nå¦‚æœæˆ‘ä»¬æŠŠÂ `nums`Â åˆ’åˆ†æˆä¸¤ä¸ªå­é›†Â `A`Â å’ŒÂ `B`ï¼Œåˆ†åˆ«ä»£è¡¨åˆ†é…Â `+`Â çš„æ•°å’Œåˆ†é…Â `-`Â çš„æ•°ï¼Œé‚£ä¹ˆä»–ä»¬å’ŒÂ `target`Â å­˜åœ¨å¦‚ä¸‹å…³ç³»ï¼š\n\n```javascript\nsum(A) - sum(B) = target\nsum(A) = target + sum(B)\nsum(A) + sum(A) = target + sum(B) + sum(A)\n2 * sum(A) = target + sum(nums)\n```\n\næ‰€ä»¥é—®é¢˜è½¬æˆæˆï¼š`nums`Â ä¸­å­˜åœ¨å‡ ä¸ªå­é›†Â `A`ï¼Œä½¿å¾—Â `A`Â ä¸­å…ƒç´ çš„å’Œä¸ºÂ `(target + sum(nums)) / 2`ï¼Ÿ\n\n> å…·ä½“çœç•¥ï¼Œæ›´å¤šå¯å‚è€ƒ  https://labuladong.online/algo/dynamic-programming/target-sum/ , æœ¬æ–‡åªè¦å†™å‡ºå›æº¯ç®—æ³•å³å¯\n\n## 5. æ€»ç»“\n\n- å›æº¯ç®—æ³•è™½å¥½ï¼Œä½†æ˜¯å¤æ‚åº¦é«˜ï¼Œå³ä¾¿æ¶ˆé™¤ä¸€äº›å†—ä½™è®¡ç®—ï¼Œä¹Ÿåªæ˜¯ã€Œå‰ªæã€ï¼Œæ²¡æœ‰æœ¬è´¨çš„æ”¹è¿›ã€‚\n\t- ä½†æœ‰çš„é—®é¢˜å¦‚æœå®åœ¨æƒ³ä¸å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå°è¯•ç”¨å›æº¯ç®—æ³•æš´åŠ›è§£å†³ä¹Ÿæ˜¯ä¸€ä¸ªèªæ˜çš„ç­–ç•¥ï¼Œæ€»æ¯”å†™ä¸å‡ºæ¥è§£æ³•å¼º\n- è€ŒåŠ¨æ€è§„åˆ’å°±æ¯”è¾ƒç„å­¦äº†ï¼Œç»è¿‡å„ç§æ”¹é€ ï¼Œä»ä¸€ä¸ªåŠ å‡æ³•é—®é¢˜å˜æˆå­é›†é—®é¢˜ï¼Œåˆå˜æˆèƒŒåŒ…é—®é¢˜ï¼Œç»è¿‡å„ç§å¥—è·¯å†™å‡ºè§£æ³•ï¼Œåˆæå‡ºç©ºé—´å‹ç¼©ï¼Œè¿˜å¾—åå‘éå†ã€‚\n\n","ab2edf3cddc95f8c90755d51dddbc724":"\n# æœ€å°è·¯å¾„å’Œ\n\n`#ç®—æ³•/åŠ¨æ€è§„åˆ’` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›® \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-1.png)\n\n## 2. åˆ†æ\n\nä¸€èˆ¬æ¥è¯´ï¼Œè®©ä½ åœ¨äºŒç»´çŸ©é˜µä¸­æ±‚æœ€ä¼˜åŒ–é—®é¢˜ï¼ˆæœ€å¤§å€¼æˆ–è€…æœ€å°å€¼ï¼‰ï¼Œè‚¯å®šéœ€è¦**é€’å½’ + å¤‡å¿˜å½•**ï¼Œä¹Ÿå°±æ˜¯åŠ¨æ€è§„åˆ’æŠ€å·§\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-2.png)\n\nã€Œä»Â `D`Â èµ°åˆ°Â `B`Â çš„æœ€å°è·¯å¾„å’Œè¿™ä¸ªé—®é¢˜è½¬åŒ–æˆäº†\n- ä»Â `D`Â èµ°åˆ°Â `A`Â çš„æœ€å°è·¯å¾„å’Œ\n- ä»Â `D`Â èµ°åˆ°Â `C`Â çš„æœ€å°è·¯å¾„å’Œ è¿™ä¸¤ä¸ªé—®é¢˜\n\n### 2.1. çŠ¶æ€è½¬ç§»æ–¹æ³•å®šä¹‰\n\n```javascript\n// ä»å·¦ä¸Šè§’ä½ç½®Â `(0, 0)`Â èµ°åˆ°ä½ç½®Â `(i, j)`Â çš„æœ€å°è·¯å¾„å’Œä¸ºÂ `dp(grid, i, j)`\nvar dp = function(grid, i, j) {}\n```\n\n### 2.2. æ‰€ä»¥è¿™ä¸ªé¢˜çš„æ¡†æ¶ä»£ç ä¸º\n\n```javascript hl:5\nvar minPathSum = function(grid) {\n    var m = grid.length;\n    var n = grid[0].length;\n    // è®¡ç®—ä»å·¦ä¸Šè§’èµ°åˆ°å³ä¸‹è§’çš„æœ€å°è·¯å¾„å’Œ\n    return dp(grid, m - 1, n - 1);\n};\n```\n\n## 3. è‡ªé¡¶å‘ä¸‹åŠ¨æ€è§„åˆ’è§£æ³•ï¼šä¼šè¶…æ—¶\n\n```javascript hl:18,15\nvar minPathSum = function (grid) {\n  var m = grid.length;\n  var n = grid[0].length;\n  // è®¡ç®—ä»å·¦ä¸Šè§’èµ°åˆ°å³ä¸‹è§’çš„æœ€å°è·¯å¾„å’Œ\n  return dp(grid, m - 1, n - 1);\n\n  function dp(grid, i, j) {\n    // base caseï¼šå¦‚æœæ²¡æœ‰æ ¼å­ï¼Œå–æœ€å·¦è¾¹å’Œæœ€ä¸Šè¾¹çš„æ ¼å­\n    if (i == 0 && j == 0) {\n      return grid[0][0];\n    }\n    // å¦‚æœç´¢å¼•å‡ºç•Œï¼Œè¿”å›ä¸€ä¸ªå¾ˆå¤§çš„å€¼ï¼Œ\n    // ä¿è¯åœ¨å– min çš„æ—¶å€™ä¸ä¼šè¢«å–åˆ°\n    if (i < 0 || j < 0) {\n      return Number.MAX_VALUE;\n    }\n    return (\n      Math.min(\n        dp(grid, i - 1, j), // å·¦è¾¹çš„æ ¼å­\n        dp(grid, i, j - 1), // ä¸Šè¾¹çš„æ ¼å­\n      ) + grid[i][j] // å½“å‰æ ¼å­çš„å€¼\n    );\n  }\n};\n\n```\n\n## 4. è‡ªé¡¶å‘ä¸‹åŠ¨æ€è§„åˆ’è§£æ³•ï¼šä½¿ç”¨å¤‡å¿˜å½•ä¼˜åŒ–\n\n```javascript hl:5\nvar minPathSum = function (grid) {\n  var m = grid.length;\n  var n = grid[0].length;\n\n  let memo = new Array(m).fill(-1).map(() => new Array(n).fill(-1));\n\n  // è®¡ç®—ä»å·¦ä¸Šè§’èµ°åˆ°å³ä¸‹è§’çš„æœ€å°è·¯å¾„å’Œ\n  return dp(grid, m - 1, n - 1);\n\n  function dp(grid, i, j) {\n    // base caseï¼šå¦‚æœæ²¡æœ‰æ ¼å­ï¼Œå–æœ€å·¦è¾¹å’Œæœ€ä¸Šè¾¹çš„æ ¼å­\n    if (i == 0 && j == 0) {\n      return grid[0][0];\n    }\n    // å¦‚æœç´¢å¼•å‡ºç•Œï¼Œè¿”å›ä¸€ä¸ªå¾ˆå¤§çš„å€¼ï¼Œ\n    // ä¿è¯åœ¨å– min çš„æ—¶å€™ä¸ä¼šè¢«å–åˆ°\n    if (i < 0 || j < 0) {\n      return Number.MAX_VALUE;\n    }\n\n    // å¦‚æœè®¡ç®—è¿‡è¿™ä¸ªçŠ¶æ€ï¼Œå°±ä¸è¦é‡å¤è®¡ç®—\n    if (memo[i][j] != -1) {\n      return memo[i][j];\n    }\n\n    return (memo[i][j] =\n      Math.min(\n        dp(grid, i - 1, j), // å·¦è¾¹çš„æ ¼å­\n        dp(grid, i, j - 1), // ä¸Šè¾¹çš„æ ¼å­\n      ) + grid[i][j]); // å½“å‰æ ¼å­çš„å€¼\n  }\n};\n\n```\n\n## 5. è‡ªåº•å‘ä¸Šçš„è¿­ä»£è§£æ³•\n\n```javascript\nvar minPathSum = function (grid) {\n  var m = grid.length;\n  var n = grid[0].length;\n\n  let memo = new Array(m).fill(-1).map(() => new Array(n).fill(-1));\n\n  // è®¡ç®—ä»å·¦ä¸Šè§’èµ°åˆ°å³ä¸‹è§’çš„æœ€å°è·¯å¾„å’Œ\n  return dp(grid, m - 1, n - 1);\n\n  function dp(grid, i, j) {\n    // base caseï¼šå¦‚æœæ²¡æœ‰æ ¼å­ï¼Œå–æœ€å·¦è¾¹å’Œæœ€ä¸Šè¾¹çš„æ ¼å­\n    if (i == 0 && j == 0) {\n      return grid[0][0];\n    }\n    // å¦‚æœç´¢å¼•å‡ºç•Œï¼Œè¿”å›ä¸€ä¸ªå¾ˆå¤§çš„å€¼ï¼Œ\n    // ä¿è¯åœ¨å– min çš„æ—¶å€™ä¸ä¼šè¢«å–åˆ°\n    if (i < 0 || j < 0) {\n      return Number.MAX_VALUE;\n    }\n\n    // å¦‚æœè®¡ç®—è¿‡è¿™ä¸ªçŠ¶æ€ï¼Œå°±ä¸è¦é‡å¤è®¡ç®—\n    if (memo[i][j] != -1) {\n      return memo[i][j];\n    }\n\n    return (memo[i][j] =\n      Math.min(\n        dp(grid, i - 1, j), // å·¦è¾¹çš„æ ¼å­\n        dp(grid, i, j - 1), // ä¸Šè¾¹çš„æ ¼å­\n      ) + grid[i][j]); // å½“å‰æ ¼å­çš„å€¼\n  }\n};\n\n```","3ac5e4c6018a5632a938c2e404ec5523":"\n# åœ°ä¸‹åŸæ¸¸æˆ\n\n`#ç®—æ³•/åŠ¨æ€è§„åˆ’` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›® \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-3.png)\n\n\n### 1.1. åˆ†æ\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-4.png)\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-5.png)\n\næ‰€ä»¥ï¼Œå…³é”®ä¸åœ¨äºåƒæœ€å¤šçš„è¡€ç“¶ï¼Œè€Œæ˜¯åœ¨äº**å¦‚ä½•æŸå¤±æœ€å°‘çš„ç”Ÿå‘½å€¼**\n\n## 2. dp å‡½æ•°å®šä¹‰\n\nä»Â `grid[i][j]`Â åˆ°è¾¾ç»ˆç‚¹ï¼ˆå³ä¸‹è§’ï¼‰æ‰€éœ€çš„**æœ€å°‘ç”Ÿå‘½å€¼**æ˜¯Â `dp(grid, i, j)`\n\nä»Â `A`Â åˆ°è¾¾å³ä¸‹è§’çš„æœ€å°‘ç”Ÿå‘½å€¼åº”è¯¥ç”±ä¸‹é¢ä¸¤ä¸ªå€¼å†³å®š\n- ä»Â `B`Â åˆ°è¾¾å³ä¸‹è§’çš„æœ€å°‘ç”Ÿå‘½å€¼\n- ä»Â `C`Â åˆ°è¾¾å³ä¸‹è§’çš„æœ€å°‘ç”Ÿå‘½å€¼\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241112-6.png)\n\n- Bï¼šä» `(i, j+1)` å‡ºå‘ï¼Œåˆ°è¾¾å³ä¸‹è§’ï¼Œéœ€è¦çš„æœ€å°åˆå§‹è¡€é‡\n- Cï¼šä» `(i+1, j)` å‡ºå‘ï¼Œåˆ°è¾¾å³ä¸‹è§’ï¼Œéœ€è¦çš„æœ€å°åˆå§‹è¡€é‡\n- æ‰€ä»¥ï¼Œé€‰æ‹© **B å’Œ C ä¸­çš„æœ€å°å€¼**ï¼Œå³ `min(B,C)`\n\t- å‡è®¾Â `Bï¼šdp(0, 1) = 5, Cï¼šdp(1, 0) = 4`ï¼Œé‚£ä¹ˆå¯ä»¥è‚¯å®šè¦ä»Â `A`Â èµ°å‘Â `C`ï¼Œå› ä¸º 4 å°äº 5 å˜›\n\t\t- å‡è®¾Â `A = 1 ` Â \n\t\t\t- æ—¢ç„¶çŸ¥é“ä¸‹ä¸€æ­¥è¦å¾€Â `C`Â èµ°ï¼Œä¸”Â `dp(1, 0) = 4`Â æ„å‘³ç€èµ°åˆ°Â `grid[1][0]`Â çš„æ—¶å€™è‡³å°‘è¦æœ‰ 4 ç‚¹ç”Ÿå‘½å€¼ï¼Œ\n\t\t\t- é‚£ä¹ˆå°±å¯ä»¥ç¡®å®šéª‘å£«å‡ºç°åœ¨Â `A`Â ç‚¹æ—¶éœ€è¦ `4 - 1 = 3` ç‚¹åˆå§‹ç”Ÿå‘½å€¼\n\t\t- é‚£å¦‚æœÂ `A = 10`Â çš„å€¼ä¸º 10ï¼Œè½åœ°å°±èƒ½æ¡åˆ°ä¸€ä¸ªå¤§è¡€ç“¶ï¼Œè¶…å‡ºäº†åç»­éœ€æ±‚ï¼Œ`4 - 10 = -6` æ„å‘³ç€éª‘å£«çš„åˆå§‹ç”Ÿå‘½å€¼ä¸ºè´Ÿæ•°ï¼Œ\n\t\t\t- è¿™æ˜¾ç„¶ä¸å¯ä»¥ï¼Œéª‘å£«çš„ç”Ÿå‘½å€¼å°äº 1 å°±æŒ‚äº†ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¸‹éª‘å£«çš„åˆå§‹ç”Ÿå‘½å€¼åº”è¯¥æ˜¯ 1ã€‚\n\næ‰€ä»¥çŠ¶æ€è½¬ç§»æ–¹ç¨‹\n\n```javascript\nint res = min(\n    dp(i + 1, j),\n    dp(i, j + 1)\n) - grid[i][j];\n\ndp(i, j) = res <= 0 ? 1 : res;\n```\n\n## 3. æœ€ç»ˆä»£ç \n\n```javascript hl:28,29\nvar calculateMinimumHP = function (grid) {\n  const m = grid.length;\n  const n = grid[0].length;\n  // å¤‡å¿˜å½•ä¸­éƒ½åˆå§‹åŒ–ä¸º -1\n  const memo = new Array(m).fill(0).map(() => new Array(n).fill(-1));\n\n  return dp(grid, 0, 0, memo);\n};\n\n// å®šä¹‰ï¼šä» (i, j) åˆ°è¾¾å³ä¸‹è§’ï¼Œéœ€è¦çš„åˆå§‹è¡€é‡è‡³å°‘æ˜¯å¤šå°‘\nvar dp = function (grid, i, j, memo) {\n  const m = grid.length;\n  const n = grid[0].length;\n  // base case\n  if (i == m - 1 && j == n - 1) {\n    return grid[i][j] >= 0 ? 1 : -grid[i][j] + 1;\n  }\n  if (i == m || j == n) {\n    return Number.MAX_SAFE_INTEGER;\n  }\n  // é¿å…é‡å¤è®¡ç®—\n  if (memo[i][j] != -1) {\n    return memo[i][j];\n  }\n  // çŠ¶æ€è½¬ç§»é€»è¾‘\n  // è§£é‡Šï¼šä¿è¯å“ªæ€•å³è¾¹æˆ–è€…ä¸‹è¾¹çš„è¡€é‡ä¸ºè´Ÿï¼Œéª‘å£«çš„è¡€é‡è‡³å°‘ä¸º 1\n  const res =\n    Math.min(\n      dp(grid, i, j + 1, memo), // ä» (i, j+1) å‡ºå‘ï¼Œåˆ°è¾¾å³ä¸‹è§’ï¼Œéœ€è¦çš„æœ€å°åˆå§‹è¡€é‡\n      dp(grid, i + 1, j, memo), // ä» (i+1, j) å‡ºå‘ï¼Œåˆ°è¾¾å³ä¸‹è§’ï¼Œéœ€è¦çš„æœ€å°åˆå§‹è¡€é‡\n    ) - grid[i][j];\n  memo[i][j] = res <= 0 ? 1 : res;\n\n  return memo[i][j];\n};\n\n```","6f4af001c3e55accbb669b6ff37a3108":"\n# åŠ¨æ€è§„åˆ’è§£é¢˜å¥—è·¯æ¡†æ¶ï¼ˆæœ€å°é›¶é’±ï¼‰\n\n`#ç®—æ³•/åŠ¨æ€è§„åˆ’` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›® \n\n| LeetCode                                                                 | åŠ›æ‰£                                                           | éš¾åº¦  |\n| ------------------------------------------------------------------------ | ------------------------------------------------------------ | --- |\n| [322. Coin Change](https://leetcode.com/problems/coin-change/)           | [322. é›¶é’±å…‘æ¢](https://leetcode.cn/problems/coin-change/)       | ğŸŸ   |\n| [509. Fibonacci Number](https://leetcode.com/problems/fibonacci-number/) | [509. æ–æ³¢é‚£å¥‘æ•°](https://leetcode.cn/problems/fibonacci-number/) | ğŸŸ¢  |\n\n![|504](https://od-1310531898.cos.ap-beijing.myqcloud.com/202303181621816.png)\n\n## 2. åŠ¨æ€è§„åˆ’çš„ `è¦ç‚¹`\n\nè¿™æ˜¯ä¸€ä¸ªç»å…¸çš„åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œå› ä¸ºå®ƒå…·æœ‰`ã€Œæœ€ä¼˜å­ç»“æ„ã€`çš„ã€‚å³å­é—®é¢˜é—´ `äº’ç›¸ç‹¬ç«‹`\n\n+ åŠ¨æ€è§„åˆ’é—®é¢˜çš„ä¸€èˆ¬å½¢å¼å°±æ˜¯ `æ±‚æœ€å€¼`\n+ æ±‚è§£åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒé—®é¢˜æ˜¯ `ç©·ä¸¾`\n+ å…·å¤‡ã€Œæœ€ä¼˜å­ç»“æ„ã€ï¼Œå³æ˜¯å¦èƒ½å¤Ÿé€šè¿‡å­é—®é¢˜çš„æœ€å€¼å¾—åˆ°åŸé—®é¢˜çš„æœ€å€¼\n+ æ˜¯å¦å­˜åœ¨`ã€Œé‡å å­é—®é¢˜ã€`ï¼Œå¦‚æœå­˜åœ¨éœ€è¦ ä½¿ç”¨`ã€Œå¤‡å¿˜å½•ã€`æˆ–è€… `ã€ŒDP tableã€` æ¥ä¼˜åŒ–ç©·ä¸¾è¿‡ç¨‹\n+ `é‡å å­é—®é¢˜`ã€`æœ€ä¼˜å­ç»“æ„`ã€`çŠ¶æ€è½¬ç§»æ–¹ç¨‹`å°±æ˜¯ **åŠ¨æ€è§„åˆ’ä¸‰è¦ç´ **\n\n## 3. å¦‚ä½•åˆ—å‡º `çŠ¶æ€è½¬ç§»æ–¹ç¨‹`\n\ndp å‡½æ•°ï¼š`dp(n)` è¡¨ç¤ºï¼Œè¾“å…¥ä¸€ä¸ªç›®æ ‡é‡‘é¢ `n`ï¼Œè¿”å›å‡‘å‡ºç›®æ ‡é‡‘é¢ `n` æ‰€éœ€çš„æœ€å°‘ç¡¬å¸æ•°é‡\n\n![|592](https://od-1310531898.cos.ap-beijing.myqcloud.com/202303170806731.png)\n\n### 3.1. ç¬¬ä¸€æ­¥ã€ç¡®å®š `base case` Â \n\næ¯”å¦‚éœ€è¦æ‰¾é›¶ Â `0å…ƒ` ï¼Œé‚£ä¹ˆæœ€å°çš„ç¡¬å¸æ•°å°±ä¸º `0`\n\n### 3.2. ç¬¬äºŒæ­¥ã€ç¡®å®š`çŠ¶æ€` ä¸ `é€‰æ‹©`\n\n+ çŠ¶æ€ ï¼Œå³`åŸé—®é¢˜ å’Œ å­é—®é¢˜`ä¸­ä¼šå˜åŒ–çš„å˜é‡ Â ï¼Œ æ‰€ä»¥ï¼Œè¯¥é—®é¢˜çš„çŠ¶æ€ ä¸º `æ‰¾é›¶å¤šå°‘é’±`\n+ é€‰æ‹© Â \n    - å³ å¯¼è‡´çŠ¶æ€å˜åŒ–çš„è¡Œä¸º \n    - å³ `éœ€è¦æ‰¾é›¶å¤šå°‘é’±` ä¼šå˜åŒ–å‘¢ï¼Ÿå› ä¸ºæ¯æ¬¡é€‰æ‹©äº†ä¸€æšç¡¬å¸ï¼Œæ¯”å¦‚ä¼šå¯¼è‡´ `çŠ¶æ€`çš„å˜åŒ–\n\n### 3.3. ç¬¬ä¸‰æ­¥ã€æ˜ç¡® `dpå‡½æ•°` æˆ– `dpæ•°ç»„` \n\n+ dpå‡½æ•°\n    - è‡ªé¡¶å‘ä¸‹ `é€’å½’` çš„åŠ¨æ€è§„åˆ’è§£æ³• ï¼Œçœ‹ä¸‹é¢æ¨¡æ¿\n+ dpæ•°ç»„ \n    -  è‡ªåº•å‘ä¸Š`è¿­ä»£`çš„åŠ¨æ€è§„åˆ’ï¼Œçœ‹ä¸‹é¢æ¨¡æ¿\n\n## 4. è‡ªé¡¶å‘ä¸‹çš„`é€’å½’`è§£æ³•\n\n### 4.1. æ¨¡æ¿ä»£ç \n\n```javascript hl:3,11\n// æ¨¡æ¿\nfunction dp('æ‰€æœ‰å¯èƒ½çš„é€‰æ‹©', 'çŠ¶æ€ 1','çŠ¶æ€ 2 ...'){\n    // ::::base case\n    if('çŠ¶æ€' === 1) return 'xxx'\n    if('çŠ¶æ€' === 1) return 'xxx'\n    \n    // ::::éœ€è¦è¿”å›çš„æœ€å€¼\n    let res = ''\n    for (let 'é€‰æ‹©' of 'æ‰€æœ‰å¯èƒ½çš„é€‰æ‹©'){\n        // # æ­¤æ—¶çš„çŠ¶æ€å·²ç»å› ä¸ºåšäº†é€‰æ‹©è€Œæ”¹å˜\n        res =  dp('æ‰€æœ‰å¯èƒ½çš„é€‰æ‹©', 'çŠ¶æ€ 1','çŠ¶æ€ 2 ...')\n    }\n    return res;\n}\n```\n\n### 4.2. å®é™…ä»£ç \n\n```javascript hl:18\n// å‚æ•°ä¸€ï¼šæ‰€æœ‰å¯èƒ½çš„é€‰æ‹© coins\n// å‚æ•°äºŒï¼šçŠ¶æ€ï¼Œä¼šå˜çš„ä¸œè¥¿\nfunction dp (coins, amount) {\n    // base case\n    if (amount === 0) {\n        return 0;\n    }\n    if (amount < 0) {\n        return -1\n    }\n    // ::::resä¸ºæœ€ç»ˆè¿”å›çš„ç»“æœï¼Œå³æœ€å°‘å‡ æšç¡¬å¸\n    let res = Infinity;\n    for (let coin of coins) {\n        // è®¡ç®—å­é—®é¢˜çš„ç»“æœ\n        let subProblem = dp(coins, amount - coin);\n      \n        // å­é—®é¢˜æ— è§£åˆ™è·³è¿‡\n        if (subProblem === -1) continue;\n      \n        // èƒ½åˆ°è¿™å„¿ï¼Œè¯´æ˜èƒ½å¤Ÿç»§ç»­\n        // åœ¨å­é—®é¢˜ä¸­é€‰æ‹©æœ€ä¼˜è§£ï¼Œç„¶ååŠ ä¸€\n        res = Math.min(res, subProblem + 1);\n    }\n    return res === Infinity ? -1 : res;\n};\n```\n\n### 4.3. åˆ†æä¸€ä¸‹`æ—¶é—´å¤æ‚åº¦`\n\n![|584](https://od-1310531898.cos.ap-beijing.myqcloud.com/202303181714402.png)\n\nä¸‹é¢çœ‹çœ‹`ç®—æ³•å¤æ‚åº¦`ï¼š\n\n+ `å­é—®é¢˜`æ€»æ•°ä¸º `é€’å½’æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°`ï¼Œä½†æ˜¯å¦‚ä½•`å‰ªæ` ä¾èµ–äº ç¡¬å¸çš„`åé¢`ï¼Œç®—å‡ºæœ‰å¤šå°‘å­é—®é¢˜æ¯”è¾ƒå›°éš¾ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±æŒ‰ç…§`æœ€åæƒ…å†µ`æ¥ä¼°è®¡å¤æ‚åº¦ï¼Œ`æœ€åæƒ…å†µ`æ˜¯`å…¨ç”¨é¢é¢ä¸º 1 çš„ç¡¬å¸` \n    - ç±»æ¯” `fib æ•°åˆ—` ï¼Œå¦‚ä½•`å‰ªæ` å°±æ¯”è¾ƒæ–¹ä¾¿ï¼Œ å³ `fib(n-1) + fib(n-2)` , Â å¯å‚è€ƒ [æ–æ³¢é‚£å¥‘æ•°åˆ—](https://www.yuque.com/liguwe/agorithms/lqm69gi8zhp789mf) é‡Œçš„ `é€’å½’æ ‘`\n+ å‡è®¾ç›®æ ‡é‡‘é¢ä¸º `n`ï¼Œç»™å®šçš„ç¡¬å¸ä¸ªæ•°ä¸º `k`ï¼Œé‚£ä¹ˆ`é€’å½’æ ‘`æœ€åæƒ…å†µä¸‹é«˜åº¦ä¸º `n`ï¼ˆå…¨ç”¨é¢é¢ä¸º 1 çš„ç¡¬å¸ï¼‰ å³ `æœ€ç»ˆé€’å½’å®Œæˆéœ€è¦åˆ°æ ‘çš„æœ€åº•éƒ¨`ï¼Œ ç„¶åå†å‡è®¾è¿™æ˜¯ ä¸€æ£µæ»¡kå‰æ ‘ ï¼Œåˆ™èŠ‚ç‚¹çš„æ€»æ•°åœ¨ `k^n` è¿™ä¸ªæ•°é‡çº§ã€‚\n+ æ¥ä¸‹æ¥çœ‹`æ¯ä¸ªå­é—®é¢˜çš„å¤æ‚åº¦`ï¼Œç”±äºæ¯æ¬¡é€’å½’åŒ…å«ä¸€ä¸ª for å¾ªç¯ï¼Œå¤æ‚åº¦ä¸º `O(k)`ï¼Œç›¸ä¹˜å¾—åˆ°æ€»æ—¶é—´å¤æ‚åº¦ä¸º `O(k*k^n) ===> O(k^n)`\n\nç®€å•æ€»ç»“å°±æ˜¯ï¼š `å¤æ‚åº¦ç­‰äºå­é—®é¢˜ä¸ªæ•° * æ¯ä¸ªå­é—®é¢˜çš„å¤æ‚åº¦`  \næ‰€ä»¥ï¼Œå› ä¸ºè¿™ä¸ªé—®é¢˜çš„`å­é—®é¢˜ä¸ªæ•°`å°±æ˜¯`æŒ‡æ•°çº§åˆ«`ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯æŒ‡æ•°çº§åˆ«çš„å¤æ‚åº¦\n\n>  å…¶å®ï¼ŒçŸ¥é“`æ¨¡æ¿ä»£ç `åï¼Œåªéœ€è¦é€‰ `çŠ¶æ€` ä¸ `é€‰æ‹©`\n\n## 5. è‡ªé¡¶å‘ä¸‹çš„`é€’å½’`è§£æ³•ï¼šå¸¦å¤‡å¿˜å½•\n\n### 5.1. å…·ä½“ä»£ç å®ç°\n\n```javascript hl:11\n// å…·ä½“å®ç°\nfunction fn(coins, amount) {\n    const memo = new Array(amount+1).fill(-999);\n    function dp(coins, amount) {\n        // :::: base case\n        if (amount === 0) return 0;\n        if (amount < 0) return -1;\n        // ::::å·²ç»è¢«å­˜å‚¨è¿‡äº†ï¼Œå°±æ”¾åœ¨è¿™å„¿\n        if (memo[amount] !== -999) return memo[amount];\n        // ::::resä¸ºæœ€ç»ˆè¿”å›çš„ç»“æœï¼Œå³æœ€å°‘å‡ æšç¡¬å¸\n        let res = Infinity;\n        for (let coin of coins) {\n            let subProblem = dp(coins, amount - coin);\n            if (subProblem === -1) continue;\n            res = Math.min(res, subProblem + 1);\n        }\n        memo[amount] = (res === Infinity ? -1 : res);\n        return memo[amount];\n    }\n    return dp(coins, amount);\n}\n\nconsole.log(fn([1, 2, 5], 10));  // 2\nconsole.log(fn([1, 24, 100], 200));  //  2\nconsole.log(fn([5, 10, 20, 50], 201)); // -1\n```\n\n### 5.2. å¤æ‚åº¦åˆ†æ\n\nå¾ˆæ˜¾ç„¶ã€Œå¤‡å¿˜å½•ã€å¤§å¤§å‡å°äº†`å­é—®é¢˜æ•°ç›®`ï¼Œå®Œå…¨æ¶ˆé™¤äº†`å­é—®é¢˜çš„å†—ä½™`ï¼Œæ‰€ä»¥å­é—®é¢˜æ€»æ•°ä¸ä¼šè¶…è¿‡é‡‘é¢æ•° `n`ï¼Œå³å­é—®é¢˜æ•°ç›®ä¸º `O(n)`ã€‚å¤„ç†ä¸€ä¸ªå­é—®é¢˜çš„æ—¶é—´ä¸å˜ï¼Œä»æ˜¯ `O(k)`ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(kn)`\n\n## 6. è‡ªåº•å‘ä¸Šçš„ `dpæ•°ç»„` çš„è¿­ä»£è§£æ³•\n\n+ `dp å‡½æ•°` ä½“ç°åœ¨ `å‡½æ•°å‚æ•°`\n+ `dp æ•°ç»„` ä½“ç°åœ¨ `æ•°ç»„ç´¢å¼•`\n\n### 6.1. æ˜ç¡® `dp æ•°ç»„`çš„å®šä¹‰\n\nå½“ç›®æ ‡é‡‘é¢ä¸º `i` æ—¶ï¼Œè‡³å°‘éœ€è¦ `dp[i]` æšç¡¬å¸å‡‘å‡º\n\n### 6.2. æ¨¡æ¿ä»£ç \n\n```javascript\n# è‡ªåº•å‘ä¸Šè¿­ä»£çš„åŠ¨æ€è§„åˆ’\n\n# åˆå§‹åŒ– base case\ndp[0][0][...] = base case\n\n# è¿›è¡ŒçŠ¶æ€è½¬ç§»\nfor çŠ¶æ€1 in çŠ¶æ€1çš„æ‰€æœ‰å–å€¼ï¼š\n    for çŠ¶æ€2 in çŠ¶æ€2çš„æ‰€æœ‰å–å€¼ï¼š\n        for ...\n            dp[çŠ¶æ€1][çŠ¶æ€2][...] = æ±‚æœ€å€¼(é€‰æ‹©1ï¼Œé€‰æ‹©2...)\n```\n\n### 6.3. å…·ä½“ä»£ç \n\n```javascript hl:22,30\n/**\n * @description æœ€å°ç¡¬å¸æ•°\n * @url https://leetcode-cn.com/problems/coin-change/\n * */\n/**\n * @param {number[]} coins\n * @param {number} amount\n * @return {number}\n */\nvar coinChange = function(coins, amount) {\n\n    // ::::åˆå§‹åŒ– dp æ•°ç»„\n    // ::::dp[i] ä»£è¡¨éœ€è¦æ‰¾é›¶é‡‘é¢ä¸º i æ—¶ï¼Œéœ€è¦æœ€å°çš„ç¡¬å¸æ•°\n    const dp = [];\n    for (let i = 0; i <= amount; i++) {\n        dp[i] = Infinity;\n    }\n\n    // ::::base case\n    dp[0] = 0;\n\n    // ::::æ ¹æ®çŠ¶æ€ä¸ªæ•°ï¼Œå†³å®šåµŒå¥—å±‚æ•°ï¼Œ\n    // ::::è¿™é‡Œçš„çŠ¶æ€ä¸ªæ•°æ˜¯é‡‘é¢æ•°ï¼Œæ‰€ä»¥æ˜¯ amount\n    for (let i = 0; i <= amount; i++) {\n        // :::: é€‰æ‹©ï¼šå»éå†æ‰€æœ‰çš„ç¡¬å¸ï¼Œç„¶ååšé€‰æ‹©\n        for (let coin of coins) {\n            // ::::é€‰æ‹©çš„ç¡¬å¸é‡‘é¢ä¸º coin, è€Œéœ€è¦æ‰¾é›¶é‡‘é¢ä¸º i ï¼Œæ‰€ä»¥ i - coin ä»£è¡¨å‰©ä½™é‡‘é¢\n\n            // ::::å¦‚æœå‰©ä½™é‡‘é¢å°äº0ï¼Œè¯´æ˜è¿™ä¸ªç¡¬å¸ä¸èƒ½ç”¨,ç»§ç»­\n            if (i - coin < 0) continue;\n\n            // è¯´æ˜è¿™ä¸ªç¡¬å¸å¯ä»¥ç”¨ï¼Œæ‰€ä»¥éœ€è¦æ‰¾é›¶é‡‘é¢ä¸º i æ—¶ï¼Œéœ€è¦æœ€å°çš„ç¡¬å¸æ•°ä¸º 1 + dp[i - coin]\n            // æ‰€ä»¥æœ€ç»ˆéœ€è¦å–æœ€å°å€¼ï¼Œæ‰€ä»¥æ˜¯ Math.min(dp[i], 1 + dp[i - coin])\n            dp[i] = Math.min(dp[i], 1 + dp[i - coin]);\n        }\n    }\n\n\n    // :::::è¿”å›ç»“æœ\n    return dp[amount] === Infinity ? -1 : dp[amount];\n};\n\n```\n\n### 6.4. å¤æ‚åº¦åˆ†æ\n\n+ æ—¶é—´å¤æ‚åº¦çœ‹`å‡ å±‚éå†`ï¼Œ æ‰€ä»¥æ˜¯ Â `O(kn)`ï¼ˆå‡è®¾ `k` ä¸º ç¡¬å¸æ•°ï¼Œ`n` ä¸ºæ‰¾é›¶å¤šå°‘é’±ï¼‰\n+ ç©ºé—´å¤æ‚åº¦ `O(n)`\n\n## 7. æ€»ç»“\n\n+ åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œå°±ä¸¤ç§è§£å†³æ€è·¯\n    - `dp é€’å½’å‡½æ•° - å¤‡å¿˜å½•`\t\n    - `dp æ•°ç»„è¿­ä»£ï¼ˆDP table`\n+  åœ¨è¿½æ±‚â€œ`å¦‚ä½•èªæ˜åœ°ç©·ä¸¾`â€ã€‚`ç”¨ç©ºé—´æ¢æ—¶é—´`çš„æ€è·¯ï¼Œæ˜¯é™ä½æ—¶é—´å¤æ‚åº¦çš„ä¸äºŒæ³•é—¨\n+ é…åˆ [æ–æ³¢é‚£å¥‘æ•°åˆ—](https://www.yuque.com/liguwe/agorithms/lqm69gi8zhp789mf) å¤šç†è§£ï¼Œå¤šåŠ¨æ‰‹\n+ `è‡ªé¡¶å‘ä¸‹`å’Œ`è‡ªåº•å‘ä¸Š` \n    - `è‡ªé¡¶å‘ä¸‹` ï¼Œæœ¬è´¨æ˜¯é€’å½’ï¼Œå³\"`é¡¶`\"é—®é¢˜ï¼Œæ‹†è§£ä¸º\"å­é—®é¢˜\" å»è§£å†³ï¼Œå¤æ‚åº¦ä¾èµ–äº `å­é—®é¢˜ä¸ªæ•°`\n    - `è‡ªåº•å‘ä¸Š` ï¼Œæœ¬è´¨æ˜¯æ•°ç»„è¿­ä»£ï¼Œå¤æ‚åº¦ä¾èµ–äº`å‡ é‡è¿­ä»£`\n+ åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œæ ¸å¿ƒçš„æ˜¯å†™å‡º `æš´åŠ›è§£æ³•` ï¼Œç„¶åæ‰æ˜¯  `ç©ºé—´æ¢æ—¶é—´` çš„ä¼˜åŒ–æ€è·¯\n\n","87560ff5435d5427ab9cbf5a44ab15c6":"\n# å¦‚ä½•æŸ¥æ‰¾çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼ˆæœ€é•¿é€’å¢å­åºåˆ—ä¸ä¿„ç½—æ–¯å¥—å¨ƒï¼‰\n\n`#ç®—æ³•/åŠ¨æ€è§„åˆ’` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›® \n\n| LeetCode                                                                                             | åŠ›æ‰£                                                                           | éš¾åº¦  |\n| ---------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------- | --- |\n| [300. Longest Increasing Subsequence](https://leetcode.com/problems/longest-increasing-subsequence/) | [300. æœ€é•¿é€’å¢å­åºåˆ—](https://leetcode.cn/problems/longest-increasing-subsequence/) | ğŸŸ   |\n| [354. Russian Doll Envelopes](https://leetcode.com/problems/russian-doll-envelopes/)                 | [354. ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜](https://leetcode.cn/problems/russian-doll-envelopes/)       | ğŸ”´  |\n\n## 2. æœ€é•¿é€’å¢å­åºåˆ—\n\n![|504](https://od-1310531898.cos.ap-beijing.myqcloud.com/202303250743194.png)\n\nã€Œå­åºåˆ—ã€å’Œã€Œå­ä¸²ã€çš„åŒºåˆ«ï¼š\n\n- `å­ä¸²`ä¸€å®šæ˜¯`è¿ç»­`çš„\n- è€Œ`å­åºåˆ—`ä¸ä¸€å®šæ˜¯`è¿ç»­`çš„\n\n## 3. æ•°å­¦å½’çº³æ³•æ‰¾ `dpæ•°ç»„` çš„å…³ç³»\n\n**å®šä¹‰ dp æ•°ç»„**ï¼š Â `dp[i]`**è¡¨ç¤ºä»¥** `nums[i]`**è¿™ä¸ªæ•°** ç»“å°¾**çš„æœ€é•¿é€’å¢å­åºåˆ—çš„**é•¿åº¦\n\n- base case : `dp[0] = 1`\n\t- å…¶ä»–çš„ï¼Œå¦‚ä¸‹å›¾ï¼Œå…³é”®æ˜¯éœ€è¦ç”»å‡º `index` , `nums` , `dp` ä¸‰è€…çš„å¯¹åº”å…³ç³»\n\t- å‡è®¾å·²çŸ¥ `dp[0...4]` éœ€è¦æ¨å¯¼å‡º => `dp[5]`\n\t- å…ˆæ‰¾åˆ°æ‰€æœ‰æ¯” `nums[5]` å°çš„ ï¼Œå³ `nums[0] = 1` å’Œ `nums[4] = 2`\n\t\t- ç„¶åï¼Œå†æ¯”è¾ƒ Â `dp[0] + 1` å’Œ Â  `dp[4] + 1` Â ï¼Œå“ªä¸ªæ›´å¤§ï¼Ÿ æœ€å¤§å€¼å°±æ˜¯ `dp[5]` çš„å€¼\n\n![|560](https://od-1310531898.cos.ap-beijing.myqcloud.com/202303250744477.png)\n\næœ€ç»ˆä»£ç å¦‚ä¸‹ï¼š\n\n```js hl:17,13\n/**\n * @description æœ€é•¿é€’å¢å­åºåˆ—\n * @url https://leetcode-cn.com/problems/longest-increasing-subsequence/\n * */\nvar lengthOfLIS = function(nums) {\n    // å®šä¹‰dpæ•°ç»„\n    const dp = [];\n    // :::::åˆå§‹åŒ–dpæ•°ç»„,\n    // :::: dp[i] ä»£è¡¨ä»¥ nums[i] ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦ï¼Œæ‰€ä»¥åˆå§‹åŒ–ä¸º 1ï¼Œå³ä»¥è‡ªå·±ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦è‡³å°‘ä¸º 1\n    for (let i = 0; i < nums.length; i++) {\n        dp[i] = 1;\n    }\n    // æ ¹æ®çŠ¶æ€ä¸ªæ•°ï¼Œå†³å®šåµŒå¥—å±‚æ•°\n    // è¿™é‡Œçš„çŠ¶æ€ä¸ªæ•°æ˜¯æ•°ç»„é•¿åº¦ï¼Œæ‰€ä»¥æ˜¯ nums.length\n    for (let i = 0; i < nums.length; i++) {\n        // :::::é€‰æ‹©ï¼šéå†æ‰€æœ‰çš„å­é—®é¢˜\n        for (let j = 0; j < i; j++) {\n            // :::::nums[i] > nums[j] è¯´æ˜ nums[i] å¯ä»¥æ¥åœ¨ nums[j] åé¢ï¼Œå½¢æˆä¸€ä¸ªæ›´é•¿çš„é€’å¢å­åºåˆ—\n            if (nums[i] > nums[j]) {\n                // :::::çŠ¶æ€è½¬ç§»æ–¹ç¨‹\n                dp[i] = Math.max(dp[i], dp[j] + 1);\n            }\n        }\n    }\n\n    // :::::è¿”å›ç»“æœ\n    return Math.max(...dp);\n};\n```\n\n## 4. `åŠ¨æ€å½’çº³æ³•` æ‰¾ `çŠ¶æ€è½¬ç§»å…³ç³»` çš„å¥—è·¯æ€»ç»“\n\n1ã€æ˜ç¡® `dp æ•°ç»„`çš„å®šä¹‰ã€‚è¿™ä¸€æ­¥å¯¹äºä»»ä½•åŠ¨æ€è§„åˆ’é—®é¢˜éƒ½å¾ˆé‡è¦ï¼Œå¦‚æœä¸å¾—å½“æˆ–è€…ä¸å¤Ÿæ¸…æ™°ï¼Œä¼šé˜»ç¢ä¹‹åçš„æ­¥éª¤ã€‚\n\né‡è¦éå¸¸é‡è¦ï¼Œå®šä¹‰é”™è¯¯å°±æ²¡æ³•å¾€ä¸‹èµ°äº†ï¼Œå¦‚æœé”™è¯¯ï¼Œå¾ˆå¯èƒ½å°±æ˜¯ `dp æ•°ç»„`çš„å®šä¹‰ä¸å¤Ÿæ°å½“ï¼Œéœ€è¦é‡æ–°å®šä¹‰ dp æ•°ç»„çš„å«ä¹‰ï¼›æˆ–è€…å¯èƒ½æ˜¯ `dp æ•°ç»„å­˜å‚¨çš„ä¿¡æ¯è¿˜ä¸å¤Ÿ`ï¼Œä¸è¶³ä»¥æ¨å‡ºä¸‹ä¸€æ­¥çš„ç­”æ¡ˆï¼Œéœ€è¦æŠŠ `dp æ•°ç»„æ‰©å¤§æˆäºŒç»´æ•°ç»„ç”šè‡³ä¸‰ç»´æ•°ç»„`\n\n2ã€æ ¹æ® `dp æ•°ç»„`çš„å®šä¹‰ï¼Œè¿ç”¨æ•°å­¦å½’çº³æ³•çš„æ€æƒ³ï¼Œå‡è®¾ `dp[0...i-1]` éƒ½å·²çŸ¥ï¼Œæƒ³åŠæ³•æ±‚å‡º `dp[i]`ï¼Œä¸€æ—¦è¿™ä¸€æ­¥å®Œæˆï¼Œæ•´ä¸ªé¢˜ç›®åŸºæœ¬å°±è§£å†³äº†\n\n## 5. `O(NlogN)` çš„è§£æ³•\n\nç±»ä¼¼æ‰‘å…‹ç‰Œï¼Œå…¶å®æœ€é•¿é€’å¢å­åºåˆ—å’Œä¸€ç§å«åš `patience game` çš„çº¸ç‰Œæ¸¸æˆæœ‰å…³ï¼Œç”šè‡³æœ‰ä¸€ç§æ’åºæ–¹æ³•å°±å«åš `patience sortingï¼ˆè€å¿ƒæ’åºï¼‰` ï¼Œå¯ä»¥åˆ©ç”¨åˆ°`äºŒåˆ†æŸ¥æ‰¾æ³•`ï¼Œå…·ä½“ä¸å±•å¼€äº†ï¼Œå¯å‚è€ƒä¸‹é¢é“¾æ¥ã€‚\n\nè¿™ç§è§£æ³•åº”ç”¨äº [ä¿„ç½—æ–¯å¥—å¨ƒï¼šäºŒç»´æœ€é•¿é€’å¢å­åºåˆ—](https://www.yuque.com/liguwe/agorithms/xh82rz1hu7r84xl4 \"ä¿„ç½—æ–¯å¥—å¨ƒï¼šäºŒç»´æœ€é•¿é€’å¢å­åºåˆ—\") ï¼Œè¿™æ ·æ‰èƒ½é€šè¿‡ leetcode æµ‹è¯•\n\n\n## æ‰©å±•åˆ°äºŒç»´ - ä¿„ç½—æ–¯å¥—å¨ƒ\n\n- [https://leetcode.cn/problems/russian-doll-envelopes/](https://leetcode.cn/problems/russian-doll-envelopes/)\n\n![|528](https://832-1310531898.cos.ap-beijing.myqcloud.com/395e584dee98c2424eaf6360398e0aeb.png)\n\nè§£æ³•æ¯”è¾ƒå·§å¦™ï¼š\n\n- å…ˆå¯¹å®½åº¦ `w` è¿›è¡Œ`å‡åº`æ’åºï¼Œ \n   - å¦‚æœé‡åˆ° `w ç›¸åŒ`çš„æƒ…å†µï¼Œåˆ™æŒ‰ç…§é«˜åº¦ `h` Â `é™åº` æ’åºï¼›\n- ä¹‹åæŠŠæ‰€æœ‰çš„ `h` ä½œä¸ºä¸€ä¸ªæ•°ç»„ï¼Œåœ¨è¿™ä¸ªæ•°ç»„ä¸Šè®¡ç®— `LIS çš„é•¿åº¦`å°±æ˜¯ç­”æ¡ˆã€‚\n\nå¦‚ä¸‹å›¾ï¼Œåªéœ€è¦å¯¹ `[8,3,4,2,7]` æŸ¥æ‰¾ `æœ€é•¿é€’å¢å­åºåˆ—` å³å¯ï¼Œ ä¸å¥½ç†è§£çš„è¯çœ‹ä¸‹é¢ä¸¤å¼ å›¾\n\n![|480](https://832-1310531898.cos.ap-beijing.myqcloud.com/24098ee53be356c7b43e38ad34229b34.png)\n\nå¦‚ä¸‹å›¾ï¼Œæœ€é•¿é€’å¢å­åºåˆ— `[3 4 7]`\n\n![|374](https://832-1310531898.cos.ap-beijing.myqcloud.com/36da8b6d16a4d0334f52544cda98e823.png)\n\nå…·ä½“ä»£ç å¦‚ä¸‹ï¼š\n\n```javascript hl:8,9\n/**\n * @param {number[][]} envelopes\n * @return {number}\n */\nfunction maxEnvelopes(envelopes) {\n    let n = envelopes.length;\n    // æŒ‰å®½åº¦å‡åºæ’åˆ—ï¼Œå¦‚æœå®½åº¦ä¸€æ ·ï¼Œåˆ™æŒ‰é«˜åº¦é™åºæ’åˆ—\n    envelopes.sort((a, b) => {\n        return a[0] === b[0] ?\n            b[1] - a[1] : a[0] - b[0];\n    });\n    // å¯¹é«˜åº¦æ•°ç»„å¯»æ‰¾ LIS\n    let height = new Array(n);\n    for (let i = 0; i < n; i++) {\n        height[i] = envelopes[i][1];\n    }\n    return lengthOfLIS(height);\n}\n\nfunction lengthOfLIS(nums) {\n    // dp[i] è¡¨ç¤ºä»¥ nums[i] è¿™ä¸ªæ•°ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦\n    // base caseï¼šdp æ•°ç»„å…¨éƒ½åˆå§‹åŒ–ä¸º 1\n    let dp = new Array(nums.length).fill(1);\n    for (let i = 0; i < nums.length; i++) {\n        for (let j = 0; j < i; j++) {\n            if (nums[i] > nums[j])\n                dp[i] = Math.max(dp[i], dp[j] + 1);\n        }\n    }\n    let res = 0;\n    for (let i = 0; i < dp.length; i++) {\n        res = Math.max(res, dp[i]);\n    }\n    return res;\n}\n```\n\n> [!danger]\næ³¨æ„ï¼šä»¥ä¸Šæ–¹å¼ä¸èƒ½é€šè¿‡ LeetCode çš„æ‰€æœ‰ç”¨ä¾‹ï¼Œéœ€è¦ä½¿ç”¨äºŒåˆ†æ³•æ‰èƒ½é€šè¿‡\n\n\n","37f52e9ffde553c686d0ceed064857a9":"\n# è´ªå¿ƒç®—æ³•ï¼šåŒºé—´è°ƒåº¦é—®é¢˜\n\n\n`#ç®—æ³•`  `#ç®—æ³•/åŠ¨æ€è§„åˆ’` \n \n\n## ç›®å½•\n<!-- toc -->\n ## è´ªå¿ƒç®—æ³•çš„`ç‰¹æ€§` \n\n### ç‰¹æ€§ 1ï¼šå±€éƒ¨æœ€ä¼˜ â†’ å…¨å±€æœ€ä¼˜\n\n**ä¸¾ä¸ªä¾‹å­ï¼š**  æ¯”å¦‚ä½ é¢å‰æ”¾ç€ 100 å¼ äººæ°‘å¸ï¼Œä½ åªèƒ½æ‹¿`åå¼ `ï¼Œæ€ä¹ˆæ‰èƒ½æ‹¿æœ€å¤šçš„é¢é¢ï¼Ÿæ˜¾ç„¶æ¯æ¬¡é€‰æ‹©å‰©ä¸‹é’ç¥¨ä¸­é¢å€¼æœ€å¤§çš„ä¸€å¼ ï¼Œæœ€åä½ çš„é€‰æ‹©ä¸€å®šæ˜¯æœ€ä¼˜çš„ã€‚\n\nä¸Šé¢çš„`ä¾‹å­` ï¼Œ æ¯ä¸€æ­¥éƒ½åšå‡ºä¸€ä¸ª`å±€éƒ¨æœ€ä¼˜`çš„é€‰æ‹©ï¼Œæœ€ç»ˆçš„ç»“æœå°±æ˜¯`å…¨å±€æœ€ä¼˜`\n\n### ç‰¹æ€§ 2ï¼šç¬¦åˆè´ªå¿ƒç®—æ³•çš„çº¿æ€§è§„åˆ’é—®é¢˜å¤æ‚åº¦æ¯”è¾ƒä½\n\n- ä¸€ä¸ªç®—æ³•é—®é¢˜ä½¿ç”¨æš´åŠ›è§£æ³•éœ€è¦`æŒ‡æ•°çº§`æ—¶é—´\n- å¦‚æœèƒ½ä½¿ç”¨åŠ¨æ€è§„åˆ’æ¶ˆé™¤é‡å å­é—®é¢˜ï¼Œå°±å¯ä»¥é™åˆ°`å¤šé¡¹å¼çº§åˆ«`çš„æ—¶é—´\n- å¦‚æœæ»¡è¶³**è´ªå¿ƒé€‰æ‹©**æ€§è´¨ï¼Œé‚£ä¹ˆå¯ä»¥è¿›ä¸€æ­¥é™ä½æ—¶é—´å¤æ‚åº¦ï¼Œè¾¾åˆ°`çº¿æ€§çº§åˆ«`çš„ã€‚\n\n\n## ç¬¬ 1 é¢˜ï¼šæ— é‡å åŒºé—´é—®é¢˜ \n\nhttps://leetcode.cn/problems/non-overlapping-intervals/\n\n![image.png|533](https://832-1310531898.cos.ap-beijing.myqcloud.com/11acaca424e010615da55841318f8763.png)\n\n**éœ€è¦ç§»é™¤åŒºé—´çš„ `æœ€å°æ•°é‡`ï¼Œä½¿å‰©ä½™åŒºé—´äº’ä¸é‡å ** ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæ‰¾ç©¶ç«Ÿ `æœ‰å¤šå°‘åŒºé—´ä¸é‡å ?` \n\n### ç¬¬ä¸€æ­¥ï¼šæœ‰å¤šå°‘ä¸ªåŒºé—´äº’ä¸é‡å å‘¢ï¼Ÿ\n\n1. å…ˆæŒ‰ç…§ `end` æ’åºï¼Œé€‰å‡ºåŒºé—´ `x` \n\t\ta. `count`  ä»£è¡¨ `ä¸é‡å åŒºé—´çš„ä¸ªæ•°` ï¼Œ\n\t\tb.  æ‰€æœ‰**ä¸ä¸** `x` ç›¸äº¤çš„  ï¼Œ`count + 1`\n2. é‡å¤ä¸Šé¢çš„  a ã€b\n\n\n> [!danger]\n>  æ³¨æ„ï¼Œä¸‹é¢åŠ¨å›¾çš„`ç»¿è‰²çš„åŒºé—´`ä¸ªæ•°ä½¿æˆ‘ä»¬éœ€è¦çš„ï¼Œå³ `count`ï¼Œåˆ«ç®¡`çº¢çº¿åŒºé—´`\n\n\nå¦‚ä¸‹åŠ¨å›¾ï¼š\n\n![1 (1).gif|549](https://832-1310531898.cos.ap-beijing.myqcloud.com/40a0023c6191e2f0923c48337d98db69.gif)\n\nä¸‹é¢çš„ `start` ä»£è¡¨å½“å‰éå†åˆ°`åŒºé—´çš„å·¦è¾¹çš„å€¼` , æ‰€ä»¥è¿™é‡Œåˆ¤æ–­ä¸ç›¸äº¤çš„æ¡ä»¶æ˜¯æ˜¯ `start >= end` ï¼Œçœ‹ä¸‹å›¾å°±æ˜ç™½äº†äº†\n\n![image.png|547](https://832-1310531898.cos.ap-beijing.myqcloud.com/346a3fe7d81477fa75bf1a2e3a23ecb7.png)\n\næ‰€ä»¥å¾—å‡ºä»¥ä¸‹ä»£ç ï¼š\n\n```javascript\nvar notCrossingIntervals = function (intervals) {\n    // base case\n    if (intervals.length === 0) return 0;\n    // ::::ç¬¬ä¸€æ­¥ï¼šå…ˆæŒ‰ç…§ `end` æ’åºï¼Œå¹¶é€‰å‡ºåŒºé—´ `x` ï¼Œ`å³` ç¬¬ä¸€ä¸ªåŒºé—´\n    // å‡åºæ’åˆ—\n    intervals.sort((a, b) => a[1] - b[1]);\n\n    //  :::: è‡³å°‘æœ‰ä¸€ä¸ªåŒºé—´ä¸ç›¸äº¤\n    let count = 1;\n    // æ’åºåï¼Œç¬¬ä¸€ä¸ªåŒºé—´å°±æ˜¯ x\n    let x = intervals[0][1];\n\n    // ::::ç¬¬äºŒæ­¥ï¼šæ‰€æœ‰ä¸ `x`  ç›¸äº¤çš„ï¼Œ`ç§»é™¤ä¸ªæ•° + 1`\n    for (let i = 1; i < intervals.length; i++) {\n        let start = intervals[i][0];\n        // ä¸ç›¸äº¤ï¼Œä¸ç›¸äº¤ï¼Œä¸ç›¸äº¤ï¼Œä¸ç›¸äº¤\n        if (start >= x) {\n            console.log('ä¸ç›¸äº¤');\n            count++;\n            x = intervals[i][1];\n        }\n    }\n    // è¿”å›ç›¸äº¤çš„ä¸ªæ•°ï¼Œå³ä¸ºè¦ç§»é™¤çš„ä¸ªæ•°\n    return count;\n};\n```\n\n\n### ç¬¬äºŒæ­¥ï¼šéœ€è¦ç§»é™¤çš„ä¸ªæ•°ï¼Œç®€å•åŠ å‡æ³•å³å¯\n\n```javascript\n\n/**\n * @param {number[][]} intervals\n * @return {number}\n */\nvar eraseOverlapIntervals = function (intervals) {\n    return intervals.length - notCrossingIntervals(intervals);\n};\n```\n\n## ç¬¬ 2 é¢˜ï¼šç”¨æœ€å°‘æ•°é‡çš„ç®­å¼•çˆ†æ°”çƒ\n\nhttps://leetcode.cn/problems/minimum-number-of-arrows-to-burst-balloons/\n\n![image.png|600](https://832-1310531898.cos.ap-beijing.myqcloud.com/f39e0bd05d070bc6b302ca860d32b6f6.png)\n\næ˜¯çš„ï¼Œè¿™ä¸ªå’Œä¸Šé¢˜[#ç¤ºä¾‹ 1ï¼šæ— é‡å åŒºé—´é—®é¢˜](/post/37f52e9ffde553c686d0ceed064857a9.html#ç¤ºä¾‹-1æ— é‡å åŒºé—´é—®é¢˜) ä¸€æ¨¡ä¸€æ ·ï¼Œé™¤äº†`æ“¦è¾¹`ä¹Ÿä¼šçˆ†ç‚¸ä¹‹å¤–ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![image.png|600](https://832-1310531898.cos.ap-beijing.myqcloud.com/3d002efc335db040d469797519f648c0.png)\n\n\n![image.png|600](https://832-1310531898.cos.ap-beijing.myqcloud.com/a7f8849be07e5398e0052c023da7bb97.png)\n\nä¸‹é¢æ˜¯ä»£ç ï¼š\n\n```javascript\nvar findMinArrowShots = function(points) {\n    if (!points.length) return 0\n    points.sort((a, b) => {\n        return a[1] - b[1]\n    })\n    let count = 1;\n    let x = points[0][1];\n    for (let i = 1; i < points.length; i++) {\n        // :::: ä¸ç›¸äº¤\n        if (points[i][0] > x) {\n            x = points[i][1]\n            count += 1\n        }\n    }\n    return count\n};\n\n```\n\næˆ–è€…ä¹Ÿè¡Œï¼š\n\n> [!question]\n> è¯·æ€è€ƒï¼Œä¸Šé¢çš„ä¸ç›¸äº¤åˆ¤æ–­ï¼Œä¸ºä»€ä¹ˆä¸éœ€è¦`|| x > points[i][1]` ä¹Ÿè¡Œï¼Ÿ\n\n\n```javascript\nvar findMinArrowShots = function(points) {\n    if (!points.length) return 0\n    points.sort((a, b) => {\n        return a[1] - b[1]\n    })\n    let count = 1;\n    let x = points[0][1];\n    for (let i = 1; i < points.length; i++) {\n        // :::: ä¸ç›¸äº¤\n        if (points[i][0] > x || x > points[i][1]) {\n            x = points[i][1]\n            count += 1\n        }\n    }\n    return count\n};\n\n```\n\n## ç¬¬ 3 é¢˜ï¼šè·³è·ƒæ¸¸æˆ I \n\nhttps://leetcode.cn/problems/jump-game/\n\n## ç¬¬ 4 é¢˜ï¼šè·³è·ƒæ¸¸æˆ II\n\nhttps://leetcode.cn/problems/jump-game-ii/\n\n\n\n\n\n\n\n\n\n\n","7a0f8a8ed2fd588187caee84e5cad591":"\n# base case å’Œå¤‡å¿˜å½•çš„åˆå§‹å€¼æ€ä¹ˆå®šï¼ˆä¸‹é™è·¯å¾„çš„æœ€å°å’Œï¼‰\n\n\n`#ç®—æ³•/åŠ¨æ€è§„åˆ’` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜è§£ \n\n- https://leetcode.cn/problems/minimum-falling-path-sum/\n\nç®€å•è¯´å°±æ˜¯ï¼Œè¾“å…¥ä¸ºä¸€ä¸ª `n * n` çš„äºŒç»´æ•°ç»„ `matrix`ï¼Œè¯·ä½ è®¡ç®—ä»`ç¬¬ä¸€è¡Œ`è½åˆ°`æœ€åä¸€è¡Œ`ï¼Œç»è¿‡çš„`è·¯å¾„å’Œæœ€å°`ä¸ºå¤šå°‘ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![image.png|504](https://832-1310531898.cos.ap-beijing.myqcloud.com/7fbfb0c72dfb093f3c028ac1d41924d2.png)\n\n## 2. dp å‡½æ•°å®šä¹‰\n\n- ä»ç¬¬ä¸€è¡Œ`matrix[0][?]`å‘ä¸‹è½ï¼Œè½åˆ°ä½ç½® `matrix[i][j]` çš„æœ€`å°è·¯å¾„å’Œ`ä¸º `dp(matrix, i, j)`\n- æ¯æ¬¡ä¸‹é™ï¼Œå¯ä»¥`å‘ä¸‹`ã€`å‘å·¦ä¸‹`ã€`å‘å³ä¸‹`ä¸‰ä¸ªæ–¹å‘ç§»åŠ¨ä¸€æ ¼ã€‚\n\t- ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥ä» `matrix[i][j]` é™åˆ° `matrix[i+1][j]` æˆ– `matrix[i+1][j-1]` æˆ– `matrix[i+1][j+1]` ä¸‰ä¸ªä½ç½®ã€‚\n\t- å¦‚ä¸‹å›¾ï¼š`æ©˜è‰²çš„æ ¼å­`åªèƒ½ä»`ä¸‰ä¸ªè“è‰²çš„æ ¼å­` è½¬ç§»è€Œæ¥ã€‚å¦‚ä¸‹å›¾ï¼š\n\n![image.png|544](https://832-1310531898.cos.ap-beijing.myqcloud.com/736082a26402922ebd21bf34f8136d34.png)\n\næ‰€ä»¥ï¼Œåªè¦çŸ¥é“åˆ°è¾¾ `dp(i-1, j)`, `dp(i-1, j-1)`, `dp(i-1, j+1)` è¿™ä¸‰ä¸ªä½ç½®çš„`æœ€å°è·¯å¾„å’Œ`ï¼ŒåŠ ä¸Š `matrix[i][j]` çš„å€¼ï¼Œå°±èƒ½å¤Ÿè®¡ç®—å‡ºæ¥åˆ°è¾¾`ä½ç½® (i, j)` çš„æœ€å°è·¯å¾„å’Œï¼š\n\n## 3. è‡ªé¡¶å‘ä¸‹çš„é€’å½’è§£æ³• - æš´åŠ›\n\n> [!info]\n> 1ã€ä»¥ä¸‹è§£æ³•ï¼ŒLeetCode ä¼šè¶…æ—¶\n> \n> 2ã€æ³¨æ„ä¸‹é¢çš„æ‰€æœ‰æ³¨é‡Šï¼Œè®°å½•å¾—å¾ˆè¯¦ç»†äº†\n\n```javascript\nlet minFallingPathSum = function (matrix) {\n    let n = matrix.length;\n    let res = Number.MAX_VALUE;\n    // ç»ˆç‚¹å¯èƒ½åœ¨æœ€åä¸€è¡Œçš„ä»»æ„ä¸€åˆ—\n    for (let j = 0; j < n; j++) {\n        // n-1 å³æœ€åä¸€è¡Œï¼Œj å³æœ€åä¸€è¡Œçš„ä»»æ„ä¸€åˆ—\n        // æ‰€ä»¥ï¼Œåªè¦ã€éå†ã€‘æ‰¾å‡ºè½åˆ°æœ€åä¸€è¡Œçš„æœ€å°è·¯å¾„å’Œï¼Œå°±æ˜¯æœ€ç»ˆç»“æœ\n        res = Math.min(res, dp(matrix, n - 1, j));\n    }\n    return res;\n};\n\n// ä»ç¬¬ä¸€è¡Œ matrix[0][?]  å‘ä¸‹è½ï¼Œ\n// è½åˆ°ä½ç½® matrix[i][j] çš„æœ€å°è·¯å¾„å’Œä¸º dp(matrix, i, j)\nfunction dp(matrix, i, j) {\n    // ::::éæ³•ç´¢å¼•ï¼Œè¿”å›ç‰¹æ®Šå€¼\n    if (i < 0 || i >= matrix.length || j < 0 || j >= matrix.length) {\n        return 99999;\n    }\n    // ::::base case é€’å½’ç»“æŸæ¡ä»¶, è½åˆ°ç¬¬ä¸€è¡Œçš„ä»»æ„ä¸€åˆ—ï¼Œè¿”å›è¯¥åˆ—çš„å€¼\n    // base: å€’ç€éå†çš„ï¼Œi=0 æ„å‘³ç€éå†ç»“æŸäº†ï¼Œè§¦å‘  base caseäº†\n    if (i === 0) return matrix[i][j];\n\n    // ::::çŠ¶æ€è½¬ç§»æ–¹ç¨‹\n    // ::::ä» matrix[i][j] ç”±ä¸‰ä¸ªå€¼è½¬ç§»è€Œæ¥ï¼Œ\n    //  å³ matrix[i-1][j]ã€matrix[i-1][j-1]ã€matrix[i-1][j+1] ä¸‰ä¸ªä½ç½®\n    // :::: æ³¨æ„ï¼šéƒ½æ˜¯ i-1ï¼Œå³ä¸Šä¸€è¡Œ, j-1ã€j, j+1 ä¸ºä¸Šä¸€è¡Œçš„å·¦ã€ä¸­ã€å³ä¸‰ä¸ªä½ç½®\n    return matrix[i][j] + Math.min(\n        dp(matrix, i - 1, j),\n        dp(matrix, i - 1, j - 1),\n        dp(matrix, i - 1, j + 1)\n    )\n}\n\nconst matrix1 = [2, 1, 3], [6, 5, 4], [7, 8, 9](/post/7a0f8a8ed2fd588187caee84e5cad591.html#2,-1,-3],-[6,-5,-4],-[7,-8,-9);\nconst matrix2 = [-19, 57], [-40, -5](/post/7a0f8a8ed2fd588187caee84e5cad591.html#-19,-57],-[-40,--5);\n\nconsole.log(minFallingPathSum(matrix1)); // 13\nconsole.log(minFallingPathSum(matrix2)); // -59\n\n```\n\n### 3.1. é—®ï¼šä¸ºä»€ä¹ˆè¦å¤„ç†`éæ³•ç´¢å¼•`ï¼Œä»¥åŠè¿”å›`ç‰¹æ®Šå€¼`ä¸ºä»€ä¹ˆæ˜¯ `99999` ï¼Ÿ \n\né¦–å…ˆï¼Œé€’å½’è¿‡ç¨‹ä¸­ï¼Œ `i-1`  `j-1`  `j+1` è¿™ä¸‰ç§è¿ç®—å¯èƒ½ä¼šå¯¼è‡´è¶Šç•Œï¼Œæ‰€ä»¥éœ€è¦ç‰¹æ®Šå¤„ç†\n\nè‡³äºï¼Œä¸ºä»€ä¹ˆæ˜¯ `99999` ï¼Œçœ‹é¢˜ç›®ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![image.png|496](https://832-1310531898.cos.ap-beijing.myqcloud.com/a38cfd9dd07105d8cc22998e1ccd9397.png)\n\næ‰€ä»¥ï¼Œåˆæ³•ç­”æ¡ˆçš„åŒºé—´æ˜¯ `[-10000, 10000]`ï¼Œ`ç‰¹æ®Šå€¼`åªè¦ä¿è¯æ˜¯ä¸€ä¸ª`æ°¸è¿œä¸ä¼šè¢«å–åˆ°çš„æœ€å¤§å€¼`å³å¯ï¼ˆå› ä¸ºé€’å½’çš„è¿‡ç¨‹ä¸­ï¼Œä¼šé‡å¤æ¯”è¾ƒæœ€å°å€¼ï¼‰ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨ `> 10001 çš„ä»»æ„å€¼`éƒ½è¡Œï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬ `99999` \n\n### 3.2. base case ä¸­ï¼Œä¸ºä»€ä¹ˆæ˜¯ `i===0` ?\n\n`dpå‡½æ•°`å®šä¹‰æ‰€å†³å®šçš„ï¼Œå³ ä»`ç¬¬ä¸€è¡Œ`ä¸‹è½çš„ä»»æ„ä½ç½®ä¸‹è½åˆ°ä½ç½® `matrix[i][j]` çš„æœ€å°è·¯å¾„å’Œä¸º `dp(matrix, i, j)`\n\næ‰€ä»¥ï¼Œ`i === 0` \n\n## 4. è‡ªé¡¶å‘ä¸‹çš„é€’å½’è§£æ³• - å¤‡å¿˜å½•ä¼˜åŒ–\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```javascript hl:29,25\n/**\n * @param {number[][]} matrix\n * @return {number}\n */\nlet minFallingPathSum = function (matrix) {\n    let n = matrix.length;\n    let res = Number.MAX_VALUE;\n    // ::::add åˆå§‹åŒ–å¤‡å¿˜å½•\n    let memo = new Array(n).fill([]);\n    for (let i = 0; i < n; i++) {\n        memo[i] = new Array(n).fill(66666);\n    }\n    // ç»ˆç‚¹å¯èƒ½åœ¨æœ€åä¸€è¡Œçš„ä»»æ„ä¸€åˆ—\n    for (let j = 0; j < n; j++) {\n        // ::::n-1 å³æœ€åä¸€è¡Œï¼Œj å³æœ€åä¸€è¡Œçš„ä»»æ„ä¸€åˆ—\n        // ::::æ‰€ä»¥ï¼Œåªè¦ã€éå†ã€‘æ‰¾å‡ºè½åˆ°æœ€åä¸€è¡Œçš„æœ€å°è·¯å¾„å’Œï¼Œå°±æ˜¯æœ€ç»ˆç»“æœ\n        res = Math.min(res, dp(matrix, n - 1, j, memo));\n    }\n    return res;\n};\n\n// ä»ç¬¬ä¸€è¡Œ matrix[0][?]  å‘ä¸‹è½ï¼Œè½åˆ°ä½ç½® matrix[i][j] çš„æœ€å°è·¯å¾„å’Œä¸º dp(matrix, i, j)\nfunction dp(matrix, i, j, memo) {\n    // ::::1ã€éæ³•ç´¢å¼•ï¼Œè¿”å›ç‰¹æ®Šå€¼\n    if (i < 0 || i >= matrix.length || j < 0 || j >= matrix.length) {\n        return 99999;\n    }\n    // 2ã€base case é€’å½’ç»“æŸæ¡ä»¶, è½åˆ°ç¬¬ä¸€è¡Œçš„ä»»æ„ä¸€åˆ—ï¼Œè¿”å›è¯¥åˆ—çš„å€¼\n    // i = 0 ä»£è¡¨è½åˆ°ç¬¬ä¸€åˆ—ï¼Œæ˜¯å€’ç€éå†çš„ï¼Œæ‰€ä»¥æ˜¯  base case äº†\n    if (i === 0) return memo[i][j] = matrix[i][j];\n    // ::::3ã€å¤‡å¿˜å½•\n    if (memo[i][j] !== 66666) return memo[i][j];\n    // ::::çŠ¶æ€è½¬ç§»æ–¹ç¨‹\n    // ::::ä» matrix[i][j] ç”±ä¸‰ä¸ªå€¼è½¬ç§»è€Œæ¥ï¼Œ\n    //  å³ matrix[i-1][j]ã€matrix[i-1][j-1]ã€matrix[i-1][j+1] ä¸‰ä¸ªä½ç½®\n    // :::: æ³¨æ„ï¼šéƒ½æ˜¯ i-1ï¼Œå³ä¸Šä¸€è¡Œ, j-1ã€j, j+1 ä¸ºä¸Šä¸€è¡Œçš„å·¦ã€ä¸­ã€å³ä¸‰ä¸ªä½ç½®\n    return memo[i][j] = matrix[i][j] + Math.min(\n        dp(matrix, i - 1, j, memo),\n        dp(matrix, i - 1, j - 1, memo),\n        dp(matrix, i - 1, j + 1, memo)\n    )\n}\n\nconst matrix1 = [2, 1, 3], [6, 5, 4], [7, 8, 9](/post/7a0f8a8ed2fd588187caee84e5cad591.html#2,-1,-3],-[6,-5,-4],-[7,-8,-9);\nconst matrix2 = [-19, 57], [-40, -5](/post/7a0f8a8ed2fd588187caee84e5cad591.html#-19,-57],-[-40,--5);\n\nconsole.log(minFallingPathSum(matrix1)); // 13\nconsole.log(minFallingPathSum(matrix2)); // -59\n\n```\n\n### 4.1. å¦‚ä½•åˆå§‹åŒ–ä¸€ä¸ª`äºŒç»´æ•°ç»„`ï¼Œç«Ÿç„¶æä¸ä¼šäº†ï¼Ÿ\n\nï¼Œå‡å¦‚è®¾ç½®ä¸€ä¸ª `m*n` çš„äºŒç»´æ•°ç»„\n- ç¬¬ä¸€ã€è®¾ç½®`è¡Œ`ï¼Œåˆå§‹åŒ–å…ƒç´ ä¸ºç©ºæ•°ç»„ `new Array(m).fill([])`\n- ç¬¬äºŒï¼Œè®¾ç½®`åˆ—`ï¼Œæ ¹æ®åˆ— `m` éå†ï¼Œè®¾ç½®æ¯ä¸ªå…ƒç´ çš„å€¼ä¸º `new Array(n).fill(666)`\n\n```javascript\nlet m = 3;\nlet n = 4;\n\n// :::: é¦–æ¬¡ï¼Œnew Array(m).fill([])\nlet memo = new Array(m).fill([]);\n\n// :::: å…¶æ¬¡: æ ¹æ® n éå†ï¼Œå¹¶ fill(666)\nfor (let i = 0; i < m; i++) {\n    memo[i] = new Array(n).fill(666);\n}\nconsole.log(memo);\n\n// è¾“å‡ºå¦‚ä¸‹ï¼Œ3 è¡Œ 4 åˆ—\n[\n  [ 666, 666, 666, 666 ],\n  [ 666, 666, 666, 666 ],\n  [ 666, 666, 666, 666 ]\n] \n\n```\n\n> [!danger]\n> æ³¨æ„ï¼šæ¯æ¬¡éƒ½ä½¿ç”¨ `è¡Œæ•° m` æ¥éå†ï¼Œæœ€åæ‰ä¼šä½¿ç”¨ `åˆ—æ•° n`\n\n### 4.2. ä¸ºä»€ä¹ˆ `memo` çš„åˆå§‹åŒ–å€¼ä¸º `66666` ï¼Ÿ \n\nåŒæ ·ï¼Œè¿™ä¸ª==é—®é¢˜==çš„ åˆæ³•åŒºåŸŸæ˜¯ `[-10000, 10000]` ï¼Œæ‰€ä»¥ï¼Œåˆå§‹åŒ–å€¼åªè¦`é¿å¼€è¿™ä¸ªåŒºé—´`å³å¯ï¼Œå½“ç„¶ï¼Œ`66666` å°±æ˜¯åœ¨è¿™ä¸ª`åŒºé—´å¤–` \n\n## 5. è‡ªä½å‘ä¸Šçš„ `dpæ•°ç»„` è§£æ³•\n\n> å¾…è¡¥å……ï¼\n\n## 6. å‚è€ƒ\n\n- https://labuladong.github.io/algo/di-er-zhan-a01c6/dong-tai-g-a223e/basecase-h-de925/\n- https://leetcode.cn/problems/minimum-falling-path-sum/","4756eb172afd5534abe552c9d4fb4bab":"\n# æœ€ä¼˜å­ç»“æ„åŸç† å’Œ DP æ•°ç»„éå†æ–¹å‘\n\n\n`#ç®—æ³•/åŠ¨æ€è§„åˆ’` \n\n\n## ç›®å½•\n<!-- toc -->\n ## å¦‚ä½•åˆ¤æ–­æ˜¯å¦å¤åˆ `æœ€ä¼˜å­ç»“æ„` \n\n- æ‰¾`å…¨æ ¡æœ€é«˜åˆ†`ï¼Œ ==>  é‚£ä¹ˆ`æ¯ä¸ªç­çš„æœ€é«˜åˆ†`ï¼Œè¿™æ˜¯å¤åˆ`æœ€ä¼˜å­ç»“æ„`çš„\n- æ‰¾`å…¨æ ¡æœ€å¤§åˆ†å·®`ï¼Œå¹¶ä¸èƒ½é€šè¿‡æ‰¾`æ¯ä¸ªç­æœ€å¤§åˆ†å·®`æ¥å®ç°ï¼Œè¿™`ä¸ç¬¦åˆæœ€ä¼˜å­ç»“æ„`\n\t- æœ€ä¼˜å­ç»“æ„å¤±æ•ˆæƒ…å†µ => **æ”¹é€ é—®é¢˜** ï¼Œå³æ‰¾å‡ºå…¨æ ¡æœ€é«˜åˆ† å’Œ æœ€ä½åˆ† ï¼Œä¸å°±å¯ä»¥`è½¬åŒ–ä¸ºç¬¬ä¸€ä¸ªé—®é¢˜å—ï¼Ÿ`\n\n\n>  ä¸€æ£µäºŒå‰æ ‘çš„æœ€å¤§å€¼ï¼Œé€šè¿‡åˆ†è§£ä¸ºæ±‚`å·¦å³å­æ ‘ï¼ˆå­é—®é¢˜`ï¼‰çš„æœ€å¤§å€¼ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯`ç¬¦åˆæœ€ä¼˜å­ç»“æ„`çš„ï¼Œä½†æ˜¯å®ƒä¸æ˜¯åŠ¨æ€è§„åˆ’é—®é¢˜ã€‚ `æœ€ä¼˜å­ç»“æ„`æ˜¯åŠ¨æ€è§„åˆ’çš„`å¿…è¦æ¡ä»¶`ï¼Œå³åŠ¨æ€è§„åˆ’ä¸€å®šæ˜¯`æœ‰æœ€ä¼˜å­ç»“æ„`çš„ï¼Œä¸€å®šæ˜¯è®©ä½ `æ±‚æœ€å€¼`çš„ã€‚ \n\n\n## å¦‚ä½•åˆ¤æ–­æ˜¯å¦æœ‰`é‡å å­é—®é¢˜`\n\n1ã€ç”»å›¾ï¼Œé€’å½’å›¾ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰`é‡å¤èŠ‚ç‚¹`ï¼Œå¦‚ `fib` é—®é¢˜ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![|544](https://832-1310531898.cos.ap-beijing.myqcloud.com/37c23ab67a80007f1861229e24b2bf8d.png)\n\n2ã€é€šè¿‡`é€’å½’æ¡†æ¶`åˆ¤æ–­ï¼Œæ¯”å¦‚`çŠ¶æ€ (i, j)` è½¬ç§»åˆ° `(i-1, j-1)` ï¼Œæœ‰`å‡ ç§è·¯å¾„`ï¼Ÿ\n\n- `çŠ¶æ€ (i, j)` â†’ `dp(i - 1, j)` â†’ `dp(i - 1, j - 1)`\n-  `çŠ¶æ€ (i, j)` â†’ `dp(i, j - 1)` â†’ `dp(i - 1, j - 1)`\n\n![|552](https://832-1310531898.cos.ap-beijing.myqcloud.com/c7281993ba6194128ae2e841e3711650.png)\n\næ‰€ä»¥ `dp(i-1, j-1)` ä¼šè¢«å¤šæ¬¡è®¡ç®—ï¼Œä¸€å®šå­˜åœ¨ `é‡å å­é—®é¢˜`ï¼Œå¯ä»¥é€šè¿‡ `ã€Œå¤‡å¿˜å½•ã€`æˆ–è€…`ã€ŒDP tableã€` æ¥ä¼˜åŒ–ã€‚\n\n\n## ä¸ºä»€ä¹ˆç»å¸¸çœ‹åˆ°å°† `dp æ•°ç»„`çš„å¤§å°è®¾ç½®ä¸º `n + 1` è€Œä¸æ˜¯ `n` ?\n\n- å…¶å® `dpæ•°ç»„`å¤§å°è®¾ç½®å¤šå¤§ï¼Œ**å–å†³äºæ˜¯å¦èƒ½å¤Ÿæ­£ç¡®å¤„ç† base case** ,  \n- å¦å¤–ï¼Œå…¶å®è®¾ç½®å¤§ä¸€ç‚¹ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚\n\n## ä¸ºä»€ä¹ˆåŠ¨æ€è§„åˆ’éå† `dp æ•°ç»„`çš„æ–¹å¼äº”èŠ±å…«é—¨ï¼Œæœ‰çš„`æ­£ç€éå†`ï¼Œæœ‰çš„`å€’ç€éå†`ï¼Œæœ‰çš„`æ–œç€éå†`ã€‚\n\nå…¶å®åªéœ€è¦å…³æ³¨`ä¸¤ç‚¹`ï¼š\n\n1ã€`éå†çš„è¿‡ç¨‹ä¸­`ï¼Œæ‰€éœ€çš„çŠ¶æ€å¿…é¡»æ˜¯å·²ç»è®¡ç®—å‡ºæ¥çš„ã€‚\n2ã€`éå†ç»“æŸå`ï¼Œå­˜å‚¨ç»“æœçš„é‚£ä¸ªä½ç½®å¿…é¡»å·²ç»è¢«è®¡ç®—å‡ºæ¥ã€‚\n\næ¯”å¦‚è¿˜æ˜¯  [10. å­åºåˆ—ï¼šæœ€å°ç¼–è¾‘è·ç¦»](/post/52415a8f8ad552459e3174a652e42ba9.html) çš„ç¤ºä¾‹ï¼Œ`dp[m][n]` ç»“æœæ˜¯é€šè¿‡ `dp[i-1][j]`, `dp[i][j-1],` `dp[i-1][j-1]` è½¬ç§»è€Œæ¥ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯`æ­£ç€éå†` ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![|600](https://832-1310531898.cos.ap-beijing.myqcloud.com/b67cadcca89e5d789190d70ab50298d0.png)\n\n\n\n\n## å‚è€ƒ\n\n- [https://labuladong.github.io/algo/di-er-zhan-a01c6/dong-tai-g-a223e/zui-you-zi-fbef6/](https://labuladong.github.io/algo/di-er-zhan-a01c6/dong-tai-g-a223e/zui-you-zi-fbef6/)\n","d441d6684a2954099a077e49ae61afff":"\n# åŠ¨æ€è§„åˆ’ç©·ä¸¾çš„ä¸¤ç§è§†è§’ï¼šä¸åŒçš„å­åºåˆ—ä¸ªæ•°\n\n\n`#ç®—æ³•/åŠ¨æ€è§„åˆ’`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å…ˆå›é¡¾ä¸‹åŠ¨æ€è§„åˆ’çš„è§£é¢˜è¦ç‚¹ \n\n- æ˜ç¡® `dp å‡½æ•°æˆ–æ•°ç»„`çš„å®šä¹‰ï¼Œä»`å·²çŸ¥çš„ã€ŒçŠ¶æ€ã€`ä¸­`æ¨å¯¼`å‡º`æœªçŸ¥çš„ã€ŒçŠ¶æ€ã€`\n- å°±ç®— `dp å‡½æ•°/æ•°ç»„`çš„å®šä¹‰ç›¸åŒï¼Œå¦‚æœä½ ä½¿ç”¨`ä¸åŒçš„ã€Œè§†è§’ã€`è¿›è¡Œç©·ä¸¾ï¼Œæ•ˆç‡ä¹Ÿä¸è§å¾—æ˜¯ç›¸åŒçš„\n\t- è§æœ¬æ–‡\n\n## 2. ä¸¤ç§ç©·ä¸¾çš„æ€è·¯ï¼ˆæ’åˆ—ç»„åˆçš„ä¸¤ä¸ªè§†è§’ï¼‰\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/1b0252f2059f869dc667fb00931a7571.png)\n\n### 2.1. çƒç›’æ¨¡å‹\n\nå¦‚ä¸‹å›¾ï¼š\n\n![|512](https://832-1310531898.cos.ap-beijing.myqcloud.com/7936c202a574509aca13dd0c848ab576.png)\n\n### 2.2. è§†è§’ 1ï¼š ç›’å­çš„è§†è§‰\n\né€‰æ‹©ï¼š\n- é€‰æ‹©å“ªä¸ªç›’å­\n\t- é€‰æ‹©ä¹‹åä¸èƒ½å†è¢«é€‰æ‹©\n\n![|672](https://832-1310531898.cos.ap-beijing.myqcloud.com/45fc7d6729e977ba87c2128b01fd9543.png)\n\n> ä¸€ç›´æ¨å¯¼ï¼Œæœ€ç»ˆç»“è®ºï¼Œå¦‚ä¸Šé¢çš„å…¬å¼\n\n### 2.3. è§†è§’ 2ï¼šçƒçš„è§†è§’\n\né€‰æ‹©ï¼š\n- æ”¾å…¥\n- ä¸æ”¾å…¥\n\n![|520](https://832-1310531898.cos.ap-beijing.myqcloud.com/0e5325aa3c46b849764ed679c9f13d00.png)\n\n## 3. è¯¥é¢˜åˆ†æ\n\n![|552](https://832-1310531898.cos.ap-beijing.myqcloud.com/a8bac35da79575b04fc5d3cad04ef71f.png)\n\n> æ³¨æ„æ˜¯ `å­åºåˆ—`\n\n### æš´åŠ›è§£æ³•\n\nä¸€ä¸ªæ€è·¯æ˜¯ï¼š `s` çš„`å­åºåˆ—`ä¸­æœ‰å¤šå°‘ä¸ª `t` , æ‰€ä»¥æ‰¾å‡ºæ‰€æœ‰çš„`å­åºåˆ—`å³å¯ï¼Œè¿™æ˜¯ä¸€ä¸ªæš´åŠ›è§£æ³•\n\n### æ‹†è§£é—®é¢˜\n\næ‰€ä»¥ï¼Œè€ƒè™‘æ˜¯å¦èƒ½å¤Ÿæ‹†è§£æˆ `è§„æ¨¡æ›´å°çš„å­é—®é¢˜` ï¼Œæ‰€ä»¥ï¼Œ**æ›´å°çš„å­é—®é¢˜æ˜¯**ï¼Ÿ\n\n`s[i..]` çš„`å­åºåˆ—`ä¸­ `t[j..]` å‡ºç°çš„æ¬¡æ•°ä¸º `dp(s, i, t, j)`\n\næ‰€ä»¥ï¼Œ`åŸé¢˜`æƒ³è¦çš„ç»“æœæ˜¯ `dp(s, 0, t, 0)` ï¼Œå¯å†™å¦‚ä¸‹ä»£ç ï¼š\n\n![|504](https://832-1310531898.cos.ap-beijing.myqcloud.com/7af5e2cc42c33fc1c5b453c3c3ed63c3.png)\n\n> å­åºåˆ—æ˜¯éœ€è¦ä¿è¯é¡ºåºçš„ï¼Œæ‰€ä»¥æ˜¯ `s[i...]` æˆ–è€… `t[j...]`\n\nå‚è€ƒä¸Šé¢ï¼Œè¯·é—®ï¼š**ç›’å­å¤šè¿˜æ˜¯å°çƒå¤šï¼Ÿ**\n- `t` ä»£è¡¨`ç›’å­`\n- `s` ä»£è¡¨ `å°çƒ`\n\næ‰€ä»¥ï¼Œè¦åšçš„äº‹æƒ…å°±æ˜¯æŠŠ`æ‰€æœ‰ç›’å­éƒ½è£…ä¸Šä¸€ä¸ªå°çƒ`\n\n## 4. ç›’å­çš„è§†è§’ ï¼Œ å³ `t çš„è§†è§’`\n\n`dp(s, 0, t, 0)` å¦‚ä½•`è½¬ç§»`å‘¢ï¼Ÿ \n- ä»¥ `s = \"babgbag\", t = \"bag\"` ä¸ºä¾‹ï¼š\n\t- `t[0]` åœ¨ `s` ä¸­çš„ä»€ä¹ˆä½ç½® ï¼Ÿ\n\t\t- `s[0]` å’Œ `s[2]` åŠ `s[4]`\n\t\t- æ‰€ä»¥ `è½¬åŒ–ä¸ºï¼š` Â `s[0...] , s[2...] , s[4...]` Â ä¸­å‡ºç° `t[1...]` çš„ä¸ªæ•°\n\nä¸Šé¢çš„æè¿°`ç¿»è¯‘`æˆä»£ç å¦‚ä¸‹ï¼š\n\n![|416](https://832-1310531898.cos.ap-beijing.myqcloud.com/43ae65d42c0ca29aaf7d83a08fdb7a15.png)\n\n### 4.1. æœ€ç»ˆå¯æ‰§è¡Œä»£ç \n\n```javascript\n/**\n * @param {string} s\n * @param {string} t\n * @return {number}\n */\nvar numDistinct = function(s, t) {\n    // ::::dp(s, i, t, j) è¡¨ç¤º s[i..] ä¸­ t[j..] å‡ºç°çš„ä¸ªæ•°\n    return dp(s, 0, t, 0);\n};\nfunction dp(s,i,t,j) {\n    //// :::: base case 1\n    if (j === t.length) {\n        // t å·²ç»å…¨éƒ¨åŒ¹é…å®Œæˆ\n        return 1;\n    }\n    // :::: base case 2\n    if (s.length - i < t.length - j) {\n        // s[i..] æ¯” t[j..] è¿˜çŸ­ï¼Œå¿…ç„¶æ²¡æœ‰åŒ¹é…çš„å­åºåˆ—\n        return 0;\n    }\n    // ::::ä»£è¡¨å‡ºç°çš„æ¬¡æ•°\n    let res = 0;\n    // :::: åœ¨ s[i..] ä¸­å¯»æ‰¾ kï¼Œä½¿å¾— s[k] == t[j]\n    for (let k = i; k < s.length; k++) {\n        if (s[k] === t[j]) {\n            // ç´¯åŠ ç»“æœ\n            res += dp(s, k + 1, t, j + 1);\n        }\n    }\n    return res;\n}\n\nconsole.log(numDistinct('rabbbit', 'rabbit')); // 3\nconsole.log(numDistinct('babgbag', 'bag'));    // 5\n```\n\n### 4.2. å¤‡å¿˜å½•ä¼˜åŒ–\n\n```javascript\n/**\n * @param {string} s\n * @param {string} t\n * @return {number}\n */\nvar numDistinct = function(s, t) {\n    // ::::add memo\n    const memo = new Array(s.length).fill([]);\n    for (let i = 0; i < s.length; i++) {\n        // :::: ä¸ºä»€ä¹ˆæ˜¯ -1 ï¼Ÿï¼Ÿï¼Ÿå› ä¸ºå‚¨å­˜çš„å€¼æ˜¯ å‡ºç°æ¬¡æ•°\n        memo[i] = new Array(t.length).fill(-1);\n    }\n    return dp(s, 0, t, 0,memo);\n};\nfunction dp(s,i,t,j,memo) {\n    if (j === t.length) {\n        return 1;\n    }\n    if (s.length - i < t.length - j) {\n        return 0;\n    }\n    // :::: æŸ¥å¤‡å¿˜å½•é˜²æ­¢å†—ä½™è®¡ç®—\n    if (memo[i][j] !== -1) {\n        return memo[i][j];\n    }\n    let res = 0;\n    for (let k = i; k < s.length; k++) {\n        if (s[k] === t[j]) {\n            // ç´¯åŠ ç»“æœ\n            res += dp(s, k + 1, t, j + 1,memo);\n        }\n    }\n    memo[i][j] = res;\n    return res;\n}\n\nconsole.log(numDistinct('rabbbit', 'rabbit'));// 3\nconsole.log(numDistinct('babgbag', 'bag')); // 5\n```\n\n## 5. ç®—æ³•å¤æ‚åº¦åˆ†æ\n\n- å¸¦å¤‡å¿˜å½•çš„åŠ¨æ€è§„åˆ’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦\n\n   - = `å­é—®é¢˜çš„ä¸ªæ•°` Â * Â `å‡½æ•°æœ¬èº«çš„æ—¶é—´å¤æ‚åº¦`\n   - = `ã€ŒçŠ¶æ€ã€çš„ä¸ªæ•°` Â * `å‡½æ•°æœ¬èº«çš„æ—¶é—´å¤æ‚åº¦`\n   - = `O(MN) * O(M)`\n   - = `O(N * M^2)`\n\n> `M, N` åˆ†åˆ«ä»£è¡¨ `s, t` çš„é•¿åº¦ï¼Œç®—æ³•çš„`ã€ŒçŠ¶æ€ã€`å°±æ˜¯ `dp å‡½æ•°`å‚æ•° `i, j çš„ç»„åˆ`\n\n## 6. å°çƒçš„è§†è§’ å³ `s çš„è§†è§’`\n\nåŸé—®é¢˜æ˜¯è®¡ç®— `s[0..]` çš„æ‰€æœ‰å­åºåˆ—ä¸­ `t[0..]` å‡ºç°çš„æ¬¡æ•°\n\n- `s[0] = t[0]ï¼Œå³èƒ½å¤ŸåŒ¹é…`ï¼Œ åˆæœ‰`ä¸¤ç§æƒ…å†µ`\n\t- æƒ…å†µ 1ï¼šå»åŒ¹é…ï¼š`=>` Â  Â `s[1..]` çš„æ‰€æœ‰`å­åºåˆ—`ä¸­è®¡ç®— `t[1..]` å‡ºç°çš„æ¬¡æ•°\n\t- æƒ…å†µ 2ï¼šä¸åŒ¹é…ï¼š`=>` Â  `s[1..]` çš„æ‰€æœ‰`å­åºåˆ—`ä¸­è®¡ç®— `t[0..]` å‡ºç°çš„æ¬¡æ•°\n- `s[0] != t[0]` åœ¨ `s[1..]` çš„`å­åºåˆ—`ä¸­è®¡ç®— `t[0...]` çš„å‡ºç°æ¬¡æ•°\n\nç¿»è¯‘æˆä»£ç ï¼Œå³ï¼š\n\n```javascript\n/**\n *   // ::::è½¬æ€è½¬ç§»æ–¹ç¨‹å®šä¹‰ï¼š\n *    s[i..] çš„å­åºåˆ—ä¸­ t[j..] å‡ºç°çš„æ¬¡æ•°ä¸º dp(s, i, t, j)\n */\nvar dp = function(s, i, t, j){\n    if(s[i] === t[j]){\n        // åŒ¹é…ï¼Œä¸¤ç§æƒ…å†µï¼Œç´¯åŠ å…³ç³»\n        // 1ã€å»åŒ¹é… j+1  \n        // 2ã€ä¸å»åŒ¹é… j\n        return dp(s, i + 1, t, j + 1) + dp(s, i + 1, t, j);\n    } else {\n        // ä¸åŒ¹é…ï¼Œåœ¨ s[i+1..] çš„å­åºåˆ—ä¸­è®¡ç®— t[j..] çš„å‡ºç°æ¬¡æ•°\n        return dp(s, i + 1, t, j);\n    }\n}\n```\n\n> ä¸ºå•¥æ˜æ˜ `s[0]` å¯ä»¥åŒ¹é… `t[0]`ï¼Œè¿˜ä¸è®©å®ƒä¿©åŒ¹é…å‘¢ï¼Ÿä¸»è¦æ˜¯ä¸ºäº†ç»™ `s[0]` ä¹‹åçš„å…ƒç´ åŒ¹é…çš„æœºä¼š\n\n### 6.1. å¸¦å¤‡å¿˜å½•çš„è§£æ³•\n\n```javascript\n/**\n * @param {string} s\n * @param {string} t\n * @return {number}\n */\nvar numDistinct = function(s, t) {\n    const memo = new Array(s.length).fill([]);\n    for (let i = 0; i < s.length; i++) {\n        memo[i] = new Array(t.length).fill(-1);\n    }\n    return dp(s, 0, t, 0, memo);\n};\n\n// å®šä¹‰ï¼šs[i..] çš„å­åºåˆ—ä¸­ t[j..] å‡ºç°çš„æ¬¡æ•°ä¸º dp(s, i, t, j, memo)\nvar dp = function(s, i, t, j, memo) {\n    // base case 1\n    if (j === t.length) {\n        return 1;\n    }\n    // base case 2\n    if (s.length - i < t.length - j) {\n        return 0;\n    }\n    // æŸ¥å¤‡å¿˜å½•é˜²æ­¢å†—ä½™è®¡ç®—\n    if (memo[i][j] !== -1) {\n        return memo[i][j];\n    }\n    let res = 0;\n    // æ‰§è¡ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹\n    if (s[i] === t[j]) {\n        // åŒ¹é…ï¼Œä¸¤ç§æƒ…å†µï¼Œç´¯åŠ å…³ç³»\n        res += dp(s, i + 1, t, j + 1, memo) + dp(s, i + 1, t, j, memo);\n    } else {\n        // ä¸åŒ¹é…ï¼Œåœ¨ s[i+1..] çš„å­åºåˆ—ä¸­è®¡ç®— t[j..] çš„å‡ºç°æ¬¡æ•°\n        res += dp(s, i + 1, t, j, memo);\n    }\n    // ç»“æœå­˜å…¥å¤‡å¿˜å½•\n    memo[i][j] = res;\n    return res;\n};\n\nconsole.log(numDistinct('rabbbit', 'rabbit'));// 3\nconsole.log(numDistinct('babgbag', 'bag')); // 5\n```\n\n### 6.2. å¤æ‚åº¦åˆ†æ\n\n- å¸¦å¤‡å¿˜å½•çš„åŠ¨æ€è§„åˆ’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦\n\n   - = `å­é—®é¢˜çš„ä¸ªæ•°` Â * Â `å‡½æ•°æœ¬èº«çš„æ—¶é—´å¤æ‚åº¦`\n   - = `ã€ŒçŠ¶æ€ã€çš„ä¸ªæ•°` Â * `å‡½æ•°æœ¬èº«çš„æ—¶é—´å¤æ‚åº¦`\n   - = `O(MN) * O(1)`\n   - = `O(N * M)`\n\n> `M, N` åˆ†åˆ«ä»£è¡¨ `s, t` çš„é•¿åº¦ï¼Œç®—æ³•çš„`ã€ŒçŠ¶æ€ã€`å°±æ˜¯ `dp å‡½æ•°`å‚æ•° `i, j çš„ç»„åˆ`\n\næ˜æ˜¾æ¯”æ€§èƒ½æ›´å¥½\n\n## 7. æ€»ç»“\n\nå°±ç®— `dp å‡½æ•°/æ•°ç»„`çš„å®šä¹‰ç›¸åŒï¼Œå¦‚æœä½ ä½¿ç”¨ä¸åŒçš„`ã€Œè§†è§’ã€`è¿›è¡Œç©·ä¸¾ï¼Œæ•ˆç‡ä¹Ÿä¸è§å¾—æ˜¯ç›¸åŒçš„\n\n## 8. æ€è€ƒ\n\né‚£ä¹ˆä¸å¦¨è¿›ä¸€æ­¥æ€è€ƒä¸€ä¸‹ï¼Œä»€ä¹ˆæ ·çš„åŠ¨æ€è§„åˆ’é¢˜ç›®å¯èƒ½äº§ç”Ÿã€Œç©·ä¸¾è§†è§’ã€ä¸Šçš„å·®å¼‚ï¼Ÿæ¢å¥è¯è¯´ï¼Œä»€ä¹ˆæ ·çš„åŠ¨æ€è§„åˆ’é—®é¢˜èƒ½å¤ŸæŠ½è±¡æˆç»å…¸çš„ã€Œçƒç›’æ¨¡å‹ã€å‘¢ï¼Ÿ\n\n## 9. å‚è€ƒ\n\n- [https://labuladong.github.io/algo/di-er-zhan-a01c6/dong-tai-g-a223e/dong-tai-g-2526f/](https://labuladong.github.io/algo/di-er-zhan-a01c6/dong-tai-g-a223e/dong-tai-g-2526f/)\n- [https://leetcode.cn/problems/distinct-subsequences/](https://leetcode.cn/problems/distinct-subsequences/)\n","05eae9c537465a31bd8224cf3e74bfb6":"\n# åŠ¨æ€è§„åˆ’å’Œå›æº¯ç®—æ³•çš„æ€ç»´è½¬æ¢ï¼ˆå•è¯æ‹†åˆ†ï¼‰\n\n`#ç®—æ³•/åŠ¨æ€è§„åˆ’`  `#å›æº¯ç®—æ³•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å•è¯æ‹†åˆ† \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-4.png)\n\n### 1.1. å›æº¯ç®—æ³•æ€è·¯\n\n```javascript hl:8,28,32\nvar wordBreak = function (s, wordDict) {\n  let found = false;\n  // è®°å½•æœç´¢è¿‡ç¨‹ä¸­çš„è·¯å¾„\n  let track = [];\n\n  // å‚æ•° s è¡¨ç¤ºå½“å‰æœç´¢åˆ°çš„å­—ç¬¦ä¸²\n  // å‚æ•° i è¡¨ç¤ºå½“å‰æœç´¢åˆ° s ä¸­çš„ç¬¬ i ä¸ªå­—ç¬¦\n  // é€’å½’å‡½æ•°çš„å®šä¹‰ï¼šå¯¹äº s[i..] è¿™ä¸ªåç¼€å­—ç¬¦ä¸²ï¼Œä» s[i] å¼€å§‹æœç´¢ wordDict\n  function backtrack(s, i) {\n    // base case\n    if (found) {\n      // å¦‚æœå·²ç»æ‰¾åˆ°ç­”æ¡ˆï¼Œå°±ä¸è¦å†é€’å½’æœç´¢äº†\n      return;\n    }\n    if (i == s.length) {\n      // æ•´ä¸ª s éƒ½è¢«åŒ¹é…å®Œæˆï¼Œæ‰¾åˆ°ä¸€ä¸ªåˆæ³•ç­”æ¡ˆ\n      found = true;\n      return;\n    }\n    // å›æº¯ç®—æ³•æ¡†æ¶\n    for (let word of wordDict) {\n      // çœ‹çœ‹å“ªä¸ªå•è¯èƒ½å¤ŸåŒ¹é… s[i..] çš„å‰ç¼€\n      let len = word.length;\n      // ä»£è¡¨ä» i å¼€å§‹çš„ä¸€ä¸ªå•è¯ï¼Œé•¿åº¦ä¸º lenï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯ç­‰äº word\n      let newWord = s.substring(i, i + len);\n      if (i + len <= s.length && newWord == word) {\n        // æ‰¾åˆ°ä¸€ä¸ªå•è¯åŒ¹é… s[i..i+len)\n        // åšé€‰æ‹©\n        track.push(word);\n        // è¿›å…¥å›æº¯æ ‘çš„ä¸‹ä¸€å±‚ï¼Œç»§ç»­åŒ¹é… s[i+len..]\n        backtrack(s, i + len);\n        // æ’¤é”€é€‰æ‹©\n        track.pop();\n      }\n    }\n  }\n\n  backtrack(s, 0);\n  return found;\n};\n```\n\nè¿™æ®µä»£ç æ— æ³•é€šè¿‡æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹\n\n### 1.2. åˆ©ç”¨åç»­ä½ç½®ä¼˜åŒ–ï¼šå‰ªæ\n\n```javascript hl:6,27,26,48\nvar wordBreak = function (s, wordDict) {\n  let found = false;\n  // è®°å½•æœç´¢è¿‡ç¨‹ä¸­çš„è·¯å¾„\n  let track = [];\n\n  // è®°å½•ä¸èƒ½åˆ‡åˆ†çš„å­ä¸²\n  let memo = new Set();\n\n  // å‚æ•° s è¡¨ç¤ºå½“å‰æœç´¢åˆ°çš„å­—ç¬¦ä¸²\n  // å‚æ•° i è¡¨ç¤ºå½“å‰æœç´¢åˆ° s ä¸­çš„ç¬¬ i ä¸ªå­—ç¬¦\n  // é€’å½’å‡½æ•°çš„å®šä¹‰ï¼šå¯¹äº s[i..] è¿™ä¸ªåç¼€å­—ç¬¦ä¸²ï¼Œä» s[i] å¼€å§‹æœç´¢ wordDict\n  function backtrack(s, i) {\n    // base case\n    if (found) {\n      // å¦‚æœå·²ç»æ‰¾åˆ°ç­”æ¡ˆï¼Œå°±ä¸è¦å†é€’å½’æœç´¢äº†\n      return;\n    }\n    if (i == s.length) {\n      // æ•´ä¸ª s éƒ½è¢«åŒ¹é…å®Œæˆï¼Œæ‰¾åˆ°ä¸€ä¸ªåˆæ³•ç­”æ¡ˆ\n      found = true;\n      return;\n    }\n\n    // å½“å‰å­ä¸²ï¼ˆå­æ ‘ï¼‰ä¸èƒ½è¢«åˆ‡åˆ†ï¼Œå°±ä¸ç”¨ç»§ç»­é€’å½’äº†\n    // æ–°å¢çš„å‰ªæé€»è¾‘ï¼ŒæŸ¥è¯¢å­ä¸²ï¼ˆå­æ ‘ï¼‰æ˜¯å¦å·²ç»è®¡ç®—è¿‡\n    let suffix = s.substring(i);\n    if (memo.has(suffix)) {\n      // å½“å‰å­ä¸²ï¼ˆå­æ ‘ï¼‰ä¸èƒ½è¢«åˆ‡åˆ†ï¼Œå°±ä¸ç”¨ç»§ç»­é€’å½’äº†\n      return;\n    }\n\n    // å›æº¯ç®—æ³•æ¡†æ¶\n    for (let word of wordDict) {\n      // çœ‹çœ‹å“ªä¸ªå•è¯èƒ½å¤ŸåŒ¹é… s[i..] çš„å‰ç¼€\n      let len = word.length;\n      // ä»£è¡¨ä» i å¼€å§‹çš„ä¸€ä¸ªå•è¯ï¼Œé•¿åº¦ä¸º lenï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯ç­‰äº word\n      let newWord = s.substring(i, i + len);\n\n      if (i + len <= s.length && newWord == word) {\n        // æ‰¾åˆ°ä¸€ä¸ªå•è¯åŒ¹é… s[i..i+len)\n        // åšé€‰æ‹©\n        track.push(word);\n        // è¿›å…¥å›æº¯æ ‘çš„ä¸‹ä¸€å±‚ï¼Œç»§ç»­åŒ¹é… s[i+len..]\n        backtrack(s, i + len);\n        // æ’¤é”€é€‰æ‹©\n        track.pop();\n\n        // ååºä½ç½®ï¼Œå°†ä¸èƒ½åˆ‡åˆ†çš„å­ä¸²ï¼ˆå­æ ‘ï¼‰è®°å½•åˆ°å¤‡å¿˜å½•\n        if (!found) {\n          memo.add(suffix);\n        }\n      }\n    }\n  }\n\n  backtrack(s, 0);\n  return found;\n};\n\n```\n\n### 1.3. è½¬æˆåŠ¨æ€è§„åˆ’é—®é¢˜ï¼ˆåˆ†è§£é—®é¢˜çš„æ€è·¯ï¼‰\n\n> [!danger]\n> æ—¶é—´å…³ç³»ï¼ŒçŸ¥é“æœ‰è¿™ç§æ€è·¯å°±å¥½äº†ï¼Œæ²¡å¤ªç»†æ·±ç©¶\n\nå¯¹äºè¾“å…¥çš„å­—ç¬¦ä¸²Â `s`ï¼Œå¦‚æœæˆ‘èƒ½å¤Ÿä»å•è¯åˆ—è¡¨Â `wordDict`Â ä¸­æ‰¾åˆ°ä¸€ä¸ªå•è¯åŒ¹é…Â `s`Â çš„å‰ç¼€Â `s[0..k]`ï¼Œé‚£ä¹ˆåªè¦æˆ‘èƒ½æ‹¼å‡ºÂ `s[k+1..]`ï¼Œå°±ä¸€å®šèƒ½æ‹¼å‡ºæ•´ä¸ªÂ `s`ã€‚\n\næ¢å¥è¯è¯´ï¼Œæˆ‘æŠŠè§„æ¨¡è¾ƒå¤§çš„åŸé—®é¢˜Â `wordBreak(s[0..])`Â åˆ†è§£æˆäº†è§„æ¨¡è¾ƒå°çš„å­é—®é¢˜Â `wordBreak(s[k+1..])`ï¼Œç„¶åé€šè¿‡å­é—®é¢˜çš„è§£åæ¨å‡ºåŸé—®é¢˜çš„è§£ã€‚\n\n#### 1.3.1. dp å‡½æ•°å®šä¹‰\n\n```javascript\n// å®šä¹‰ï¼šè¿”å› s[i..] æ˜¯å¦èƒ½å¤Ÿè¢«æ‹¼å‡º\nfunction dp(s, i) {}\n\n// è®¡ç®—æ•´ä¸ª s æ˜¯å¦èƒ½è¢«æ‹¼å‡ºï¼Œè°ƒç”¨ dp(s, 0)\n```\n\n#### 1.3.2. å®Œæ•´ä»£ç \n\n```javascript\nvar wordBreak = function(s, wordDict) {\n    // ç”¨å“ˆå¸Œé›†åˆæ–¹ä¾¿å¿«é€Ÿåˆ¤æ–­æ˜¯å¦å­˜åœ¨\n    let wordSet = new Set(wordDict);\n    // å¤‡å¿˜å½•ï¼Œ-1 ä»£è¡¨æœªè®¡ç®—ï¼Œ0 ä»£è¡¨æ— æ³•å‡‘å‡ºï¼Œ1 ä»£è¡¨å¯ä»¥å‡‘å‡º\n    let memo = Array(s.length).fill(-1);\n\n    // ä¸»å‡½æ•°\n    function dp(i) {\n        // base case\n        if (i == s.length)\n            return true;\n        // é˜²æ­¢å†—ä½™è®¡ç®—\n        if (memo[i] !== -1)\n            return memo[i] == 0 ? false : true;\n\n        // éå† s[i..] çš„æ‰€æœ‰å‰ç¼€\n        for (let j = i + 1; j <= s.length; j++) {\n            // çœ‹çœ‹å“ªäº›å‰ç¼€å­˜åœ¨ wordDict ä¸­\n            let prefix = s.substring(i, j);\n            if (wordSet.has(prefix)) {\n                // æ‰¾åˆ°ä¸€ä¸ªå•è¯åŒ¹é… s[i..j)\n                // åªè¦ s[j..] å¯ä»¥è¢«æ‹¼å‡ºï¼Œs[i..] å°±èƒ½è¢«æ‹¼å‡º\n                if (dp(j)) {\n                    memo[i] = 1;\n                    return true;\n                }\n            }\n        }\n\n        // s[i..] æ— æ³•è¢«æ‹¼å‡º\n        memo[i] = 0;\n        return false;\n    }\n\n    return dp(0);\n};\n```\n\n## 2. å•è¯æ‹†åˆ† II\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241111-5.png)\n\nè¿™é“é¢˜ä¸æ˜¯å•å•é—®ä½ Â `s`Â æ˜¯å¦èƒ½è¢«æ‹¼å‡ºï¼Œè¿˜è¦é—®ä½ æ˜¯`æ€ä¹ˆæ‹¼`çš„\n\n### 2.1. å›æº¯ç®—æ³•æ€è·¯ï¼ˆéå†çš„æ€è·¯ï¼‰\n\nåŸºäºä¸Šé¢çš„ä»£ç ï¼Œæ·»åŠ ä»¥ä¸‹è¡Œå³å¯\n\n```javascript hl:4,23,12\nvar wordBreak = function (s, wordDict) {\n  // è®°å½•ç»“æœ\n  let res = [];\n  // è®°å½•å›æº¯ç®—æ³•çš„è·¯å¾„\n  let track = [];\n\n  // å›æº¯ç®—æ³•æ¡†æ¶\n  function backtrack(i) {\n    // base case\n    if (i === s.length) {\n      // æ‰¾åˆ°ä¸€ä¸ªåˆæ³•ç»„åˆæ‹¼å‡ºæ•´ä¸ª sï¼Œè½¬åŒ–æˆå­—ç¬¦ä¸²\n      res.push(track.join(\" \"));\n      return;\n    }\n\n    // å›æº¯ç®—æ³•æ¡†æ¶\n    for (let word of wordDict) {\n      // çœ‹çœ‹å“ªä¸ªå•è¯èƒ½å¤ŸåŒ¹é… s[i..] çš„å‰ç¼€\n      let length = word.length;\n      if (i + length <= s.length && s.substring(i, i + length) === word) {\n        // æ‰¾åˆ°ä¸€ä¸ªå•è¯åŒ¹é… s[i..i+len)\n        // åšé€‰æ‹©\n        track.push(word);\n        // è¿›å…¥å›æº¯æ ‘çš„ä¸‹ä¸€å±‚ï¼Œç»§ç»­åŒ¹é… s[i+len..]\n        backtrack(i + length);\n        // æ’¤é”€é€‰æ‹©\n        track.pop();\n      }\n    }\n  }\n\n  // æ‰§è¡Œå›æº¯ç®—æ³•ç©·ä¸¾æ‰€æœ‰å¯èƒ½çš„ç»„åˆ\n  backtrack(0);\n  return res;\n};\n\n```\n\n### 2.2. ä¸èƒ½åˆ©ç”¨åç»­ä½ç½®ä¼˜åŒ–ï¼šå‰ªæ\n\nä¸èƒ½ä½¿ç”¨å¤‡å¿˜å½•ä¼˜åŒ–\n\nå› ä¸ºå›æº¯ç®—æ³•çš„Â `track`Â å˜é‡ä»…ç»´æŠ¤äº†ä»æ ¹èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹èµ°è¿‡çš„è·¯å¾„ï¼Œå¹¶æ²¡æœ‰è®°å½•å­æ ‘çš„ä¿¡æ¯ã€‚\n\n### 2.3. ä½†å¯ä»¥ä½¿ç”¨åˆ†è§£é—®é¢˜ï¼ˆåŠ¨æ€è§„åˆ’ï¼‰å¯ä»¥å‰ªæ\n\n```javascript\nvar wordBreak = function(s, wordDict) {\n    const wordDictSet = new Set(wordDict);\n    // å¤‡å¿˜å½•\n    const memo = new Map();\n    \n    // å®šä¹‰ï¼šè¿”å›ç”¨ wordDict æ„æˆ s[i..] çš„æ‰€æœ‰å¯èƒ½\n    const dp = (i) => {\n        const res = [];\n        if (i === s.length) {\n            res.push(\"\");\n            return res;\n        }\n        // é˜²æ­¢å†—ä½™è®¡ç®—\n        if (memo.has(i)) {\n            return memo.get(i);\n        }\n        \n        // éå† s[i..] çš„æ‰€æœ‰å‰ç¼€\n        for (let j = i + 1; j <= s.length; j++) {\n            // çœ‹çœ‹å“ªäº›å‰ç¼€å­˜åœ¨ wordDict ä¸­\n            const prefix = s.slice(i, j);\n            if (wordDictSet.has(prefix)) {\n                // æ‰¾åˆ°ä¸€ä¸ªå•è¯åŒ¹é… s[i..i+len)\n                const suffixList = dp(j);\n                // æ„æˆ s[i+len..] çš„æ‰€æœ‰ç»„åˆåŠ ä¸Š prefix \n                // å°±æ˜¯æ„æˆæ„æˆ s[i] çš„æ‰€æœ‰ç»„åˆ\n                suffixList.forEach((suffix) => {\n                    const space = suffix === \"\" ? \"\" : \" \";\n                    res.push(prefix + space + suffix);\n                });\n            }\n        }\n        // å­˜å…¥å¤‡å¿˜å½•\n        memo.set(i, res);\n        \n        return res;\n    };\n    \n    return dp(0);\n};\n```\n\nè¿™ä¸ªè§£æ³•ä¾ç„¶ç”¨`å¤‡å¿˜å½•`æ¶ˆé™¤äº†`é‡å å­é—®é¢˜`ï¼Œæ‰€ä»¥Â `dp`Â å‡½æ•°é€’å½’è°ƒç”¨çš„æ¬¡æ•°å‡å°‘ä¸ºÂ O(N)O(N)ï¼Œä½†Â `dp`Â å‡½æ•°æœ¬èº«çš„æ—¶é—´å¤æ‚åº¦ä¸Šå‡äº†ï¼Œå› ä¸ºÂ `subProblem`Â æ˜¯ä¸€ä¸ªå­é›†åˆ—è¡¨ï¼Œå®ƒçš„é•¿åº¦æ˜¯æŒ‡æ•°çº§çš„ã€‚\n\nå†åŠ ä¸Šæ‹¼æ¥å­—ç¬¦ä¸²çš„æ•ˆç‡å¹¶ä¸é«˜ï¼Œä¸”è¿˜è¦æ¶ˆè€—å¤‡å¿˜å½•å»å­˜å‚¨æ‰€æœ‰å­é—®é¢˜çš„ç»“æœï¼Œæ‰€ä»¥ä» Big O çš„è§’åº¦æ¥åˆ†æï¼Œè¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å¹¶ä¸æ¯”å›æº¯ç®—æ³•ä½ï¼Œä¾ç„¶æ˜¯æŒ‡æ•°çº§åˆ«ï¼›ä½†è¿™ä¸ªè§£æ³•ç¡®å®æ¶ˆé™¤äº†é‡å å­é—®é¢˜ï¼Œæ‰€ä»¥æ˜¯è¦æ¯”å›æº¯ç®—æ³•é«˜æ˜ä¸€äº›ã€‚\n\n## 3. æœ€å\n\n- åŠ¨æ€è§„åˆ’çš„æ€è·¯ä¹Ÿå¯ä»¥å»è§£å†³å›æº¯ç®—æ³•\n- æˆ‘ä»¬å¤„ç†æ’åˆ—ç»„åˆé—®é¢˜æ—¶**ä¸€èˆ¬ä½¿ç”¨å›æº¯ç®—æ³•å»ã€Œéå†ã€å›æº¯æ ‘ï¼Œè€Œä¸ç”¨ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€è·¯å»å¤„ç†**ï¼Œå› ä¸ºå­˜å‚¨å­é—®é¢˜çš„ç»“æœå°±éœ€è¦å¤§é‡çš„æ—¶é—´å’Œç©ºé—´ï¼Œé™¤éé‡å å­é—®é¢˜çš„æ•°é‡è¾ƒå¤šçš„æç«¯æƒ…å†µï¼Œå¦åˆ™å¾—ä¸å¿å¤±ã€‚\n\n","2c001d9aff1f523ba698d43953fb6f81":"\n# å¯¹åŠ¨æ€è§„åˆ’è¿›è¡Œç©ºé—´å‹ç¼©\n\n`#ç®—æ³•/åŠ¨æ€è§„åˆ’` \n\nèƒ½å¤Ÿä½¿ç”¨ç©ºé—´å‹ç¼©æŠ€å·§çš„åŠ¨æ€è§„åˆ’éƒ½æ˜¯äºŒç»´Â `dp`Â é—®é¢˜ï¼Œ\n- å®ƒçš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå¦‚æœè®¡ç®—çŠ¶æ€Â `dp[i][j]`Â éœ€è¦çš„éƒ½æ˜¯Â `dp[i][j]`Â **ç›¸é‚»**çš„çŠ¶æ€ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ç©ºé—´å‹ç¼©æŠ€å·§ï¼Œå°†**äºŒç»´**çš„Â `dp`Â æ•°ç»„è½¬åŒ–æˆ**ä¸€ç»´**ï¼Œå°†ç©ºé—´å¤æ‚åº¦ä» `O(N^2)` é™ä½åˆ° `O(N)`ã€‚\n\nä½†ä½¿ç”¨ç©ºé—´å‹ç¼©æŠ€å·§å¯¹äºŒç»´Â `dp`Â æ•°ç»„è¿›è¡Œé™ç»´æ‰“å‡»ä¹‹åï¼Œè§£æ³•ä»£ç çš„**å¯è¯»æ€§å˜å¾—éå¸¸å·®**äº†ï¼Œå¦‚æœç›´æ¥çœ‹è¿™ç§è§£æ³•ï¼Œä»»ä½•äººéƒ½æ˜¯ä¸€è„¸æ‡µé€¼çš„ã€‚\n\nç®—æ³•çš„ä¼˜åŒ–å°±æ˜¯è¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹ï¼Œå…ˆå†™å‡ºå¯è¯»æ€§å¾ˆå¥½çš„æš´åŠ›é€’å½’ç®—æ³•ï¼Œç„¶åå°è¯•è¿ç”¨åŠ¨æ€è§„åˆ’æŠ€å·§ä¼˜åŒ–é‡å å­é—®é¢˜ï¼Œæœ€åå°è¯•ç”¨ç©ºé—´å‹ç¼©æŠ€å·§ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦ã€‚\n\næ›´å¤šå‚è€ƒï¼š https://labuladong.online/algo/dynamic-programming/space-optimization/","f90ffc9488eb525284e69bfd132cbd85":"\n# æ’åºç®—æ³•ï¼ˆåŸºç¡€ï¼‰\n\n`#ç®—æ³•` `#æ’åº`  \n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ’åºç®—æ³•çš„å‡ ä¸ªé‡è¦æŒ‡æ ‡ \n\n- å¤æ‚åº¦\n- æ˜¯å¦æ˜¯**åŸåœ°**æ’åº\n- æ˜¯å¦æ˜¯**ç¨³å®š**çš„\n- æ˜¯å¦**è‡ªé€‚åº”**çš„ï¼Œå³èƒ½å¤Ÿåˆ©ç”¨è¾“å…¥æ•°æ®**å·²æœ‰çš„é¡ºåºä¿¡æ¯**æ¥å‡å°‘è®¡ç®—é‡\n\n## 2. åˆ©ç”¨è¯­è¨€æœ¬èº«çš„ API æ’åº\n\n### 2.1. Python æ’åºæ–¹æ³•\n\nPython æä¾›äº†ä¸¤ç§ä¸»è¦çš„æ’åºæ–¹æ³•ï¼š`sort()` å’Œ `sorted()`ã€‚\n\n#### 2.1.1. `sort()` æ–¹æ³•\n\n   - è¿™æ˜¯åˆ—è¡¨ï¼ˆlistï¼‰å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•ã€‚\n   - å®ƒ**ä¼šç›´æ¥ä¿®æ”¹åŸåˆ—è¡¨**ï¼Œä¸è¿”å›æ–°çš„å¯¹è±¡ã€‚\n   - é»˜è®¤æŒ‰å‡åºæ’åˆ—ã€‚\n\nç¤ºä¾‹ï¼š\n```python\nnumbers = [3, 1, 4, 1, 5, 9, 2, 6]\nnumbers.sort()\nprint(numbers)  # è¾“å‡º: [1, 1, 2, 3, 4, 5, 6, 9]\n\n# é™åºæ’åˆ—\nnumbers.sort(reverse=True)\nprint(numbers)  # è¾“å‡º: [9, 6, 5, 4, 3, 2, 1, 1]\n```\n\n#### 2.1.2. `sorted()` å‡½æ•°\n\n   - è¿™æ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œå¯ä»¥å¯¹ä»»ä½•å¯è¿­ä»£å¯¹è±¡è¿›è¡Œæ’åºã€‚\n   - å®ƒè¿”å›ä¸€ä¸ªæ–°çš„æ’åºåçš„åˆ—è¡¨ï¼Œä¸ä¿®æ”¹åŸå¯¹è±¡ã€‚\n   - é»˜è®¤æŒ‰å‡åºæ’åˆ—ã€‚\n\nç¤ºä¾‹ï¼š\n\n```python\nnumbers = [3, 1, 4, 1, 5, 9, 2, 6]\nsorted_numbers = sorted(numbers)\nprint(sorted_numbers)  # è¾“å‡º: [1, 1, 2, 3, 4, 5, 6, 9]\nprint(numbers)  # åŸåˆ—è¡¨ä¸å˜ï¼Œè¾“å‡º: [3, 1, 4, 1, 5, 9, 2, 6]\n\n# é™åºæ’åˆ—\nsorted_numbers_desc = sorted(numbers, reverse=True)\nprint(sorted_numbers_desc)  # è¾“å‡º: [9, 6, 5, 4, 3, 2, 1, 1]\n```\n\n### 2.2. JavaScript æ’åºæ–¹æ³•\n\nJavaScript ä¸»è¦ä½¿ç”¨ `Array.prototype.sort()` æ–¹æ³•è¿›è¡Œæ’åºã€‚\n\n- è¿™ä¸ªæ–¹æ³•ä¼šç›´æ¥ä¿®æ”¹åŸæ•°ç»„ã€‚\n- é»˜è®¤æƒ…å†µä¸‹ï¼Œ`sort()` æ–¹æ³•æŒ‰**å­—ç¬¦ä¸²é¡ºåºæ’åº**ï¼Œè¿™å¯èƒ½å¯¼è‡´æ•°å­—æ’åºå‡ºç°é—®é¢˜ã€‚\n\nç¤ºä¾‹ï¼š\n\n```javascript\n// ç®€å•ä½¿ç”¨\nlet fruits = ['banana', 'apple', 'orange', 'mango'];\nfruits.sort();\nconsole.log(fruits); // è¾“å‡º: ['apple', 'banana', 'mango', 'orange']\n\n// æ•°å­—æ’åºï¼ˆå‡åºï¼‰\nlet numbers = [3, 1, 4, 1, 5, 9, 2, 6];\nnumbers.sort((a, b) => a - b);\nconsole.log(numbers); // è¾“å‡º: [1, 1, 2, 3, 4, 5, 6, 9]\n\n// æ•°å­—æ’åºï¼ˆé™åºï¼‰\nnumbers.sort((a, b) => b - a);\nconsole.log(numbers); // è¾“å‡º: [9, 6, 5, 4, 3, 2, 1, 1]\n```\n\nåœ¨ JavaScript ä¸­ï¼Œ`sort()` æ–¹æ³•å¯ä»¥æ¥å—ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰æ’åºé€»è¾‘ã€‚\n\n#### 2.2.1. æ€»ç»“\n\n- `a-b` å‡åº\n- `b-a` é™åº\n\n## 3. é€‰æ‹©æ’åº\n\n```javascript hl:26\n/**\n * @param {*} arr  å¾…æ’åºæ•°ç»„\n * @returns arr æ’åºåçš„æ•°ç»„\n * é€‰æ‹©æ’åºæ­¥éª¤ï¼š\n * 1. é€‰å–åŒºé—´ [0,len-1] ä¸­çš„æœ€å°å…ƒç´ ï¼Œå°†å…¶ä¸ ç´¢å¼• 0 å¤„çš„å…ƒç´ äº¤æ¢ã€‚\n *    å®Œæˆåï¼Œæ•°ç»„å‰ 1 ä¸ªå…ƒç´ å·²æ’åº\n * 2. é€‰å–åŒºé—´ [1,len-1] ä¸­çš„æœ€å°å…ƒç´ ï¼Œå°†å…¶ä¸ ç´¢å¼• 1 å¤„çš„å…ƒç´ äº¤æ¢ã€‚\n *    å®Œæˆåï¼Œæ•°ç»„å‰ 2 ä¸ªå…ƒç´ å·²æ’åº\n * 3. é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°åŒºé—´ [len-2,len-1] ä¸­çš„æœ€å°å…ƒç´ ä¸ ç´¢å¼• len-2 å¤„çš„å…ƒç´ äº¤æ¢ã€‚\n *    å®Œæˆåï¼Œæ•°ç»„å‰ len-1 ä¸ªå…ƒç´ å·²æ’åº\n */\nfunction selectSort(arr) {\n  let len = arr.length;\n  for (let i = 0; i < len - 1; i++) {\n    // å‡è®¾å½“å‰ä¸‹æ ‡ä¸ºæœ€å°å€¼, ä¸åé¢çš„å…ƒç´ æ¯”è¾ƒ, å¦‚æœæœ‰æ›´å°çš„, åˆ™äº¤æ¢\n    let minIndex = i;\n    // j = i + 1, ä»å½“å‰å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ å¼€å§‹æ¯”è¾ƒ\n    for (let j = i + 1; j < len; j++) {\n      if (arr[j] < arr[minIndex]) {\n        minIndex = j;\n      }\n    }\n\n    // å¦‚æœæœ€å°å€¼ä¸æ˜¯å½“å‰å…ƒç´ , åˆ™äº¤æ¢\n    if (minIndex !== i) {\n      [arr[i], arr[minIndex]] = [arr[minIndex], arr[i]];\n    }\n  }\n  return arr;\n}\n\n```\n\n### 3.1. åˆ†æ\n\n- åŸåœ°æ’åº\n- éç¨³å®šæ’åºï¼Œå¦‚ä¸‹å›¾\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240927082355.png)\n\n## 4. å†’æ³¡æ’åº\n\n1. é¦–å…ˆï¼Œå¯¹Â nÂ ä¸ªå…ƒç´ æ‰§è¡Œâ€œå†’æ³¡â€ï¼Œå°†æ•°ç»„çš„`æœ€å¤§å…ƒç´ `äº¤æ¢è‡³æ­£ç¡®ä½ç½®ã€‚\n2. æ¥ä¸‹æ¥ï¼Œå¯¹å‰©ä½™Â nâˆ’1Â ä¸ªå…ƒç´ æ‰§è¡Œâ€œå†’æ³¡â€ï¼Œå°†`ç¬¬äºŒå¤§å…ƒç´ `äº¤æ¢è‡³æ­£ç¡®ä½ç½®ã€‚\n3. ä»¥æ­¤ç±»æ¨ï¼Œç»è¿‡Â nâˆ’1Â è½®â€œå†’æ³¡â€åï¼Œ`å‰Â nâˆ’1Â å¤§çš„å…ƒç´ `éƒ½è¢«äº¤æ¢è‡³æ­£ç¡®ä½ç½®ã€‚\n4. ä»…å‰©çš„ä¸€ä¸ªå…ƒç´ å¿…å®šæ˜¯æœ€å°å…ƒç´ ï¼Œæ— é¡»æ’åºï¼Œå› æ­¤æ•°ç»„æ’åºå®Œæˆã€‚\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240927083448.png)\n\n```javascript\nfunction bubbleSort(arr) {\n  let len = arr.length;\n  for (let i = 0; i < len; i++) {\n    // j < len - 1 - i æ˜¯å› ä¸ºæ¯æ¬¡å†’æ³¡éƒ½ä¼šå°†æœ€å¤§çš„æ•°å†’æ³¡åˆ°æœ€å\n    // æ‰€ä»¥æ¯æ¬¡å†’æ³¡éƒ½ä¼šå°†ä¸€ä¸ªæ•°æ’å¥½åºï¼Œæ‰€ä»¥ä¸éœ€è¦å†æ¬¡æ¯”è¾ƒ\n    // æ‰€ä»¥ -i\n    for (let j = 0; j < len - 1 - i; j++) {\n      // å¦‚æœå‰ä¸€ä¸ªæ•°æ¯”åä¸€ä¸ªæ•°å¤§ï¼Œåˆ™äº¤æ¢ä½ç½®\n      // å¦åˆ™ï¼Œä¸åšä»»ä½•æ“ä½œ\n      if (arr[j] > arr[j + 1]) {\n        let temp = arr[j];\n        arr[j] = arr[j + 1];\n        arr[j + 1] = temp;\n      }\n    }\n  }\n  return arr;\n}\n\n```\n\n### 4.1. æ³¨æ„ç‚¹\n\n- `i < len`\n- `i < len - 1  - i `\n\t- å…¶å®ç›´æ¥ `j < len` ä¹Ÿè¡Œå•Š\n\t- `len - 1`Â æ˜¯å› ä¸ºæˆ‘ä»¬æ¯”è¾ƒç›¸é‚»å…ƒç´ ï¼Œæ‰€ä»¥æœ€åä¸€ä¸ªå…ƒç´  (indexÂ `len - 1`) ä¼šå’Œå®ƒå‰é¢çš„å…ƒç´ æ¯”è¾ƒï¼Œä¸éœ€è¦å•ç‹¬æ¯”è¾ƒ\n- æœ€é‡Œå±‚çš„å¾ªç¯ï¼Œéƒ½ä½¿ç”¨ `j` \n\n### 4.2. åˆ†æ\n\n- å†’æ³¡æ˜¯\n\t- ç¨³å®šçš„\n\t- åŸåœ°çš„\n\n## 5. æ’å…¥æ’åº\n\n1. åˆå§‹çŠ¶æ€ä¸‹ï¼Œæ•°ç»„çš„**ç¬¬ 1 ä¸ª**å…ƒç´ å·²å®Œæˆæ’åºã€‚\n2. é€‰å–æ•°ç»„çš„**ç¬¬ 2 ä¸ª**å…ƒç´ ä½œä¸ºÂ `base`Â ï¼Œå°†å…¶æ’å…¥åˆ°æ­£ç¡®ä½ç½®åï¼Œ**æ•°ç»„çš„å‰ 2 ä¸ªå…ƒç´ å·²æ’åº**ã€‚\n3. é€‰å–**ç¬¬ 3 ä¸ª**å…ƒç´ ä½œä¸ºÂ `base`Â ï¼Œå°†å…¶æ’å…¥åˆ°æ­£ç¡®ä½ç½®åï¼Œ**æ•°ç»„çš„å‰ 3 ä¸ªå…ƒç´ å·²æ’åº**ã€‚\n4. ä»¥æ­¤ç±»æ¨ï¼Œåœ¨æœ€åä¸€è½®ä¸­ï¼Œé€‰å–æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºÂ `base`Â ï¼Œå°†å…¶æ’å…¥åˆ°æ­£ç¡®ä½ç½®åï¼Œ**æ‰€æœ‰å…ƒç´ å‡å·²æ’åº**ã€‚\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240927211304.png)\n\n```javascript\nfunction insertSort(arr) {\n  let len = arr.length;\n  for (let i = 1; i < len; i++) {\n    // ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹\n    let base = arr[i];\n    // éœ€è¦éå†å·²æ’åºçš„éƒ¨åˆ†ï¼Œæ‰¾åˆ°åˆé€‚çš„ä½ç½®æ’å…¥\n    // ä»åå¾€å‰éå†\n    // j ä¸ºå·²æ’åºéƒ¨åˆ†çš„æœ€åä¸€ä¸ªå…ƒç´ \n    let j = i - 1;\n    // å¦‚æœå·²æ’åºéƒ¨åˆ†çš„å…ƒç´ å¤§äº baseï¼Œåˆ™å°†å…ƒç´ åç§»\n    while (j >= 0 && arr[j] > base) {\n      arr[j + 1] = arr[j];\n      j--;\n    }\n    // ç§»åŠ¨å®Œæ¯•ï¼Œæ’å…¥ baseå³å¯\n    arr[j + 1] = base;\n  }\n}\n\n```\n\n### 5.1. æ³¨æ„ç‚¹\n\n- â‘   for å¤–å±‚ï¼Œ while å†…å±‚\n\t- `j = i - 1`  \n\t\t- å› ä¸º `j` ä¸ºå·²æ’åºçš„æœ€åä¸€ä¸ªæ•°çš„ä¸‹æ ‡\n\t\t- è€Œ `i` ä»£è¡¨æœ€åç¬¬å‡ ä¸ªå…ƒç´ ä¹‹å‰å·²ç»æ’å·åºäº†\n- â‘¡ ä»åå‘å‰éå†å·²ç»æ’åºçš„æ•°ç»„ï¼Œå¦‚æœå‘ç°éœ€è¦æ’å…¥ï¼Œæ•´ä½“åç§»\n- â‘¢ ç§»åŠ¨å®Œæ¯•ï¼Œç„¶åæ’å…¥å½“å‰çš„ `base` å³å¯\n\n### 5.2. åˆ†æ\n\n- ç¨³å®šçš„ï¼Œå› ä¸ºæ•´ä½“ç§»åŠ¨ï¼Œä¸ä¼šæ”¹å˜ç›¸å¯¹é¡ºåº\n- åŸåœ°çš„\n\n## 6. å¿«æ’\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240927212535.png)\n\n```javascript hl:7\nfunction quickSort(arr) {\n  // base case: æ•°ç»„ä¸ºç©ºæˆ–åªåŒ…å«ä¸€ä¸ªå…ƒç´ æ—¶\n  if (arr.length <= 1) {\n    return arr;\n  }\n  var midIndex = Math.floor(arr.length / 2);\n  var mid = arr.splice(midIndex, 1)[0];\n  \n  var left = [];\n  var right = [];\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i] < mid) {\n      left.push(arr[i]);\n    } else {\n      right.push(arr[i]);\n    }\n  }\n  return quickSort(left).concat([mid], quickSort(right));\n}\n```\n\n### 6.1. æ³¨æ„ç‚¹\n\n- æ²¡æœ‰æ´—ç‰Œ\n- ä½¿ç”¨æ•°ç»„çš„ `splice` æ–¹æ³•ï¼Œ\n- ä½¿ç”¨æ•°ç»„çš„ `concat` æ–¹æ³•\n- éåŸåœ°æ’åº\n- éç¨³å®šç®—æ³•\n\n## 7. å½’å¹¶æ’åº\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240928110206.png)\n\n```javascript\nfunction mergeSort(arr) {\n  // base case: æ•°ç»„ä¸ºç©ºæˆ–åªåŒ…å«ä¸€ä¸ªå…ƒç´ æ—¶\n  if (arr.length < 2) {\n    return arr;\n  }\n  const middle = Math.floor(arr.length / 2);\n  const left = arr.slice(0, middle);\n  const right = arr.slice(middle);\n  return merge(mergeSort(left), mergeSort(right));\n}\n\n/**\n * @description: åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„\n * @param {Array} left å·¦æ•°ç»„ï¼Œæœ‰åº\n * @param {Array} right å³æ•°ç»„ï¼Œæœ‰åº\n */\nfunction merge(left, right) {\n  const result = [];\n  // ä¸¤ä¸ªæ•°ç»„éƒ½æœ‰å€¼\n  while (left.length && right.length) {\n    // ä¸¤ä¸ªæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ è¿›è¡Œæ¯”è¾ƒ\n    // å°çš„å…ƒç´ å‡ºé˜Ÿåˆ—ï¼Œæ”¾å…¥ç»“æœæ•°ç»„\n    if (left[0] <= right[0]) {\n      result.push(left.shift());\n    } else {\n      result.push(right.shift());\n    }\n  }\n  // ä¸¤ä¸ªæ•°ç»„æœ‰ä¸€ä¸ªä¸ºç©º, å¦ä¸€ä¸ªä¸ä¸ºç©º\n  while (left.length) {\n    result.push(left.shift());\n  }\n  while (right.length) {\n    result.push(right.shift());\n  }\n  return result;\n}\n\n```\n\n### 7.1. æ³¨æ„ç‚¹\n\n- åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œæ‰€è°“æœ‰åºï¼Œåªæœ‰ä¸€ä¸ªæ•°ç»„é‚£è‚¯å®šæ˜¯æœ‰åºçš„\n- æ³¨æ„æ˜¯ä½¿ç”¨ `shift` ï¼Œé˜Ÿé¦–å‡ºé˜Ÿ\n- æ›¾å‡ ä½•æ—¶ï¼Œä½¿ç”¨å„ç§ `while` æŠŠç›´æ¥ç»•è¿›å»äº†ï¼Œç°åœ¨ç»•è¿›å»äº†å—ï¼Ÿ\n- ç¨³å®šçš„\n- éåŸåœ°çš„\n\n","02bd971436db5bfcb16ea526d0a71083":"\n# æ’åºç®—æ³•ï¼ˆé«˜çº§ï¼‰\n\n`#ç®—æ³•` `#æ’åº`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å †æ’åº \n\n`å»ºå †`æ“ä½œ å’Œ å…ƒç´ `å‡ºå †`æ“ä½œ  å®ç°`å †æ’åº`\n1. è¾“å…¥æ•°ç»„å¹¶å»ºç«‹`å°é¡¶å †`ï¼Œæ­¤æ—¶æœ€å°å…ƒç´ ä½äºå †é¡¶ã€‚\n2. ä¸æ–­æ‰§è¡Œ`å‡ºå †`æ“ä½œï¼Œä¾æ¬¡è®°å½•å‡ºå †å…ƒç´ ï¼Œå³å¯å¾—åˆ°ä»å°åˆ°å¤§æ’åºçš„åºåˆ—ã€‚\n\næ˜¯`éç¨³å®š`\n\n\n## 2. æ¡¶æ’åº\n\n- æ¡¶æ’åºé€‚ç”¨äºå¤„ç†`ä½“é‡å¾ˆå¤§çš„æ•°æ®`\n- æ³¨æ„ä¸‹å›¾ä¸­é¢œè‰²\n- **éåŸåœ°æ’åº**ï¼šéœ€è¦å€ŸåŠ©Â kÂ ä¸ªæ¡¶å’Œæ€»å…±Â nÂ ä¸ªå…ƒç´ çš„é¢å¤–ç©ºé—´\n- æ¡¶æ’åº**æ˜¯å¦ç¨³å®š**å–å†³äºæ’åºæ¡¶å†…å…ƒç´ çš„ç®—æ³•æ˜¯å¦ç¨³å®š\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240928113826.png)\n\n## 3. è®¡æ•°æ’åºï¼šæ•´æ•°æ•°ç»„\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240928114041.png)\n\n- åªé’ˆå¯¹éè´Ÿæ•´æ•°\n- éåŸåœ°çš„\n- ç¨³å®šçš„ï¼Ÿçœ‹å…·ä½“å®ç°ï¼Œå¦‚æœå€’åºéå†Â `nums`Â å¯ä»¥é¿å…æ”¹å˜ç›¸ç­‰å…ƒç´ ä¹‹é—´çš„ç›¸å¯¹ä½ç½®\n\n## 4. åŸºæ•°æ’åº\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240928121628.png)\n\n## 5. å¯¹æ¯”\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240928121734.png)\n","00a7ef9bc2825d4f98c4df2afc803801":"\n# æ·±å…¥ç†è§£å¿«é€Ÿæ’åº\n\n\n\n\n`#ç®—æ³•/æ’åº`\n\n\n## ç›®å½•\n<!-- toc -->\n ## å¿«é€Ÿæ’åº \n\n### ä¸€å¥è¯æ€»ç»“ `å¿«æ’æ’åº` \n\n- `ä¸€å¥è¯æ€»ç»“`äº†å½’å¹¶æ’åºï¼š\n\t- å…ˆæŠŠ`å·¦åŠè¾¹æ•°ç»„`æ’å¥½åº\n\t\t- base caseï¼š`lo === hi`\n\t- å†æŠŠ`å³åŠè¾¹æ•°ç»„`æ’å¥½åº\n\t\t-  base caseï¼š`lo === hi`\n\t- ç„¶åæŠŠä¸¤åŠæ•°ç»„`åˆå¹¶`\n\t\t- `merge` ä¸¤ä¸ªæœ‰åºæ•°ç»„\n- é‚£ä¹ˆï¼Œä¸€å¥è¯æ€»ç»“ `å¿«æ’` å‘¢ï¼Ÿ\n\t- `å…ˆå°†ä¸€ä¸ªå…ƒç´ æ’å¥½åº`ï¼Œ\n\t- ç„¶åå†å°†`å‰©ä¸‹çš„å…ƒç´ `æ’å¥½åºã€‚å¦‚ä½•ç†è§£ï¼Ÿå¦‚ä¸‹å›¾ï¼š\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/6b859d6a4f606a9b67f4a8709d846c4d.png)\n\n\n###  `å¿«é€Ÿæ’åº`çš„è¿‡ç¨‹æ˜¯ä¸€ä¸ª `æ„é€ äºŒå‰æœç´¢æ ‘`çš„è¿‡ç¨‹\n\nçœ‹ä¸‹å›¾å°±æ˜ç™½äº†ï¼š\n\n![1.gif](https://832-1310531898.cos.ap-beijing.myqcloud.com/3badc5c4acc77559a890b8727b5d3b8a.gif)\n\næœ€åï¼Œå¯ä¸å°±æ˜¯ä¸€ä¸ª`äºŒå‰æœç´¢æ ‘`å—ï¼Ÿå¦‚ä¸‹å›¾\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/bebbe199c49050edc38883000dd8e5b3.png)\n\n\næ„é€ æ—¶ï¼Œå¦‚æœè¿æ°”ç‰¹åˆ«ä¸å¥½ï¼Œæ„é€ å‡ºä¸€ä¸ª`ç‰¹åˆ«ä¸å¹³è¡¡çš„äºŒå‰æ ‘` ï¼Œå¦‚ä¸‹å›¾ï¼Œ`è§£å†³æ–¹æ¡ˆ`æ˜¯ï¼šæ„é€ å‰æ´—ç‰Œæ•°ç»„å…ˆã€‚\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/2347ca1cb56ea865f2b4fd67c83226c4.png)\n\n\n### å¦‚ä½•ç†è§£å¿«é€Ÿæ’åºæ˜¯ `äºŒå‰æ ‘å‰åºéå†` ? \n\nçœ‹åŠ¨å›¾ï¼Œè¿™ä¸å°±æ˜¯ `äºŒå‰æ ‘çš„å‰åºéå†` å—ï¼Ÿ\n\n![1.gif](https://832-1310531898.cos.ap-beijing.myqcloud.com/3badc5c4acc77559a890b8727b5d3b8a.gif)\n\nå†çœ‹`ä»£ç æ¡†æ¶`\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/729c31fd9d52a3db6fae97365c74e347.png)\n\n> ä¸Šé¢ä»£ç  `p ã€ p-1 ã€ p+1` åˆ†åˆ«éƒ½æœ‰å…·ä½“å«ä¹‰çš„ï¼\n\n### å®ç°æ–¹å¼1ï¼šjsçš„ç®€æ˜“å®ç°\n\n```javascript\n// 1ã€æ‰¾åŸºå‡†å€¼ï¼Œç„¶ååˆ†æˆä¸¤ä¸ªæ•°ç»„\n// 2ã€ä¸è¯¥åŸºå‡†ç‚¹æ•°æ®æ¯”è¾ƒï¼Œå¦‚æœæ¯”å®ƒå°ï¼Œæ”¾å·¦è¾¹ï¼›åä¹‹ï¼Œæ”¾å³è¾¹ã€‚\n// 3ã€å·¦å³åˆ†åˆ«ç”¨ä¸€ä¸ªç©ºæ•°ç»„å»å­˜å‚¨æ¯”è¾ƒåçš„æ•°æ®ã€‚\n// 4ã€æœ€åé€’å½’æ‰§è¡Œä¸Šè¿°æ“ä½œï¼Œç›´åˆ°æ•°ç»„é•¿åº¦ <= 1\nconst quickSort1 = arr => {\n    if (arr.length <= 1) {\n        return arr;\n    }\n    // å–åŸºå‡†ç‚¹\n    const midIndex = Math.floor(arr.length / 2);\n    // å–åŸºå‡†ç‚¹çš„å€¼ï¼Œsplice(index,1) åˆ™è¿”å›çš„æ˜¯å«æœ‰è¢«åˆ é™¤çš„å…ƒç´ çš„æ•°ç»„ã€‚\n    const midIndexVal = arr.splice(midIndex, 1)[0];\n    const left = []; // å­˜æ”¾æ¯”åŸºå‡†ç‚¹å°çš„æ•°ç»„\n    const right = []; // å­˜æ”¾æ¯”åŸºå‡†ç‚¹å¤§çš„æ•°ç»„\n    // éå†æ•°ç»„ï¼Œè¿›è¡Œåˆ¤æ–­åˆ†é…\n    for (let i = 0; i < arr.length; i++) {\n        if (arr[i] < midIndexVal) {\n            left.push(arr[i]); //æ¯”åŸºå‡†ç‚¹å°çš„æ”¾åœ¨å·¦è¾¹æ•°ç»„\n        } else {\n            right.push(arr[i]); //æ¯”åŸºå‡†ç‚¹å¤§çš„æ”¾åœ¨å³è¾¹æ•°ç»„\n        }\n    }\n    //é€’å½’æ‰§è¡Œä»¥ä¸Šæ“ä½œï¼Œå¯¹å·¦å³ä¸¤ä¸ªæ•°ç»„è¿›è¡Œæ“ä½œï¼Œç›´åˆ°æ•°ç»„é•¿åº¦ä¸º <= 1\n    return quickSort1(left).concat(midIndexVal, quickSort1(right));\n};\nconst array2 = [5, 4, 3, 2, 1];\nconsole.log('quickSort1 ', quickSort1(array2));\n\n```\n\nä½¿ç”¨ `splice` å°±è¡Œåˆ†å‰²ï¼Œç„¶åæœ€åé€’å½’ï¼Œéå†\n\nå¦å¤–ï¼Œè¯¥å®ç°æ²¡æœ‰å®Œå…¨å‚è€ƒä¸Šé¢çš„ä»£ç æ¨¡æ¿ï¼Œä½¿ç”¨äº†JavaScript ä¸€äº›è¯­è¨€ç‰¹æ€§ï¼Œä½†æ˜¯ï¼Œæ²¡æœ‰è§£å†³ å‰åºéå†æ„é€ äºŒå‰æ ‘æœç´¢æ ‘æ—¶ï¼Œ`è¿æ°”ç‰¹åˆ«å·®`çš„åœºæ™¯ã€‚\n\n#### ç®—æ³•å¤æ‚æ—¶åˆ†æ\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/04672262505df16cb349fab68a47b775.png)\n\n\n### å®ç°æ–¹å¼2ï¼šå¥—ç”¨ä¸Šé¢çš„æ¨¡æ¿ï¼Œtodo\n\n\n## ä½¿ç”¨å¿«æ’æ€è·¯ï¼Œå®ç°æ‰¾åˆ°æ•°ç»„ä¸­ç¬¬`k`å¤§å…ƒç´ \n\n[Loading Question... - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/kth-largest-element-in-an-array/)\n\n## å¿«æ’ä¸å½’å¹¶æ’åºçš„å¯¹æ¯”\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/bf815141e6fa6394b88af03dc7f2cc05.png)\n\n- `å½’å¹¶æ’åº` æ˜¯ `è‡ªä¸‹è€Œä¸Š` çš„ï¼Œå ç”¨å†…å­˜é«˜äº›ï¼Œæ²¡æ³•åŸåœ°ï¼Œä½† **ç¨³å®š**\n- å¿«æ’ æ˜¯ è‡ªä¸‹è€Œä¸Šçš„ï¼Œä»–åˆ†è§£`å­é—®é¢˜`ï¼ŒåŸåœ°æ’åºï¼Œä¸ç¨³å®š\n\n\n\n","633d99dc7f745afb85732943bb878e1c":"\n# æ·±å…¥ç†è§£å½’å¹¶æ’åº\n\n\n`#ç®—æ³•/æ’åº` \n\n\næ‰€æœ‰`é€’å½’`çš„ç®—æ³•ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨éå†ä¸€æ£µï¼ˆé€’å½’ï¼‰æ ‘ï¼Œç„¶ååœ¨èŠ‚ç‚¹ï¼ˆå‰ä¸­ååºä½ç½®ï¼‰ä¸Šæ‰§è¡Œä»£ç ï¼Œä½ è¦å†™é€’å½’ç®—æ³•ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯è¦å‘Šè¯‰æ¯ä¸ªèŠ‚ç‚¹éœ€è¦åšä»€ä¹ˆã€‚\n\n\n## ç›®å½•\n<!-- toc -->\n ## å¦‚ä½•ç†è§£`å½’å½’æ’åº`æ˜¯`äºŒå‰æ ‘çš„ååºéå†` \n\n- é¦–å…ˆï¼Œä¸€å¥è¯æè¿° å½’å¹¶æ’åºï¼Ÿ\n\t- å…ˆæŠŠ`å·¦åŠè¾¹æ•°ç»„`æ’å¥½åºï¼Œå†æŠŠ`å³åŠè¾¹æ•°ç»„`æ’å¥½åºï¼Œæœ€å`merge` ä¸¤ä¸ªæœ‰åºæ•°ç»„ã€‚\n\nä¸‹å›¾æ˜¯ï¼Œéå†é€šè¿‡`äºŒå‰æ ‘éå†æ€è·¯`ï¼Œå³éçº¿æ€§çš„æ–¹å¼ï¼ŒäºŒå‰æ ‘çš„å‰åºéå†ï¼Œæ¥éå†æ•°ç»„ï¼Œç„¶åå†ç¦»å¼€èŠ‚ç‚¹çš„æ—¶å€™ï¼Œåšmergeæ“ä½œï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/347117ca1383f1435bdc75dd5a50aa2b.png)\n\nä¸‹é¢æ˜¯ merge çš„`åŠ¨å›¾`ï¼š\n\n![4.gif](https://832-1310531898.cos.ap-beijing.myqcloud.com/c6b314119f840e94f23b110c6f04cc72.gif)\n\nå®Œå…¨æµç¨‹ï¼š`å…ˆ`æ‹†è§£ï¼Œæ‹†åˆ°å¶å­èŠ‚ç‚¹ï¼Œ`ç„¶å`å†merge ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![image.png|675](https://832-1310531898.cos.ap-beijing.myqcloud.com/e9bf2abb5511f922a3c70ef49e278d4d.png)\n\n\n### ä»£ç éƒ¨åˆ†\n\næµ‹è¯•ç”¨ä¾‹ï¼šçœ‹ [ åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/sort-an-array/)\n\n```javascript\n/**\n * https://leetcode.cn/problems/sort-an-array/\n * */\n\nfunction sort(nums, left, right) {\n    if (left === right) {\n        return;\n    }\n    const mid = Math.floor((left + right) / 2);\n    // åˆ©ç”¨å®šä¹‰ï¼Œæ’åº nums[left..mid]\n    sort(nums, left, mid);\n    // åˆ©ç”¨å®šä¹‰ï¼Œæ’åº nums[mid+1..right]\n    sort(nums, mid + 1, right);\n    // ::::ååºä½ç½®::::\n    /*************************************************\n     * ::::å³ï¼Œæ­¤æ—¶ä¸¤éƒ¨åˆ†å­æ•°ç»„å·²ç»è¢«æ’å¥½åº\n     * ::::   åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œä½¿ nums[left..right] æœ‰åº\n     ************************************************/\n    merge(nums, left, mid, right);\n}\n\n// ä½¿ç”¨ ã€æ•°ç»„åŒæŒ‡é’ˆæŠ€å·§ã€‘ï¼Œåˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„\nfunction merge(nums, left, mid, right) {\n    //  copy åˆ° temp æ•°ç»„\n    // ::::notice ä¸æ˜¯ temp=[...nums]\n    const temp = []\n    for (let i = left; i <= right; i++) {\n        temp[i] = nums[i];\n    }\n    //// ::::ä½¿ç”¨ ã€æ•°ç»„åŒæŒ‡é’ˆæŠ€å·§ã€‘ï¼Œåˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„\n    let i = left, j = mid + 1;\n    for (let p = left; p <= right; p++) {\n        // å·¦åŠè¾¹æ•°ç»„å·²å…¨éƒ¨è¢«åˆå¹¶\n        if (i === mid + 1) { // :::: notice i === mid + 1    \n            nums[p] = temp[j++];\n         // å³åŠè¾¹æ•°ç»„å·²å…¨éƒ¨è¢«åˆå¹¶   \n        } else if (j === right + 1) {\n            nums[p] = temp[i++];\n        } else if (temp[i] > temp[j]) {\n            nums[p] = temp[j++];\n        } else {\n            nums[p] = temp[i++];\n        }\n    }\n};\n\nconst arr = [5, 12, 13, 14, 4, 3, 15, 16, 2, 1, 2, 0, 2, 3, 9, 10, 11, 9, 17, 18, 19, 20, 21, 22];\nsort(arr, 0, arr.length - 1);\nconsole.log(arr);\n\n```\n\n- éƒ½æ˜¯`åŸåœ°`æ’åº\n- æ³¨æ„ï¼Œ`sort` å’Œ `merge` å‡½æ•°çš„`å…¥å‚`åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\n### çœŸæ­£ç†è§£ä¸Šé¢ä»£ç çš„`åŒæŒ‡é’ˆæŠ€å·§`å—ï¼Ÿ\n\nå¯¹äº `merge` çš„åŒæŒ‡é’ˆï¼Œä¸ä¸€å®šçœŸçš„çš„ç†è§£ï¼Œä¸‹é¢æ¢³ç†ä¸‹ï¼š\n\nä»¥ä¸‹å›¾ä¸ºä¾‹ï¼š\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/a3cde51c1457f331092c5bb9fbed1230.png)\n\næ€»ä¹‹:\n- éƒ½æ˜¯åŸåœ°ç›´æ¥ä¿®æ”¹ `nums`\n- left , right , mid éƒ½æ˜¯é€’å½’å‡½æ•°ä¼ å…¥çš„ï¼Œå›ºå®šçš„\n- `åŒæŒ‡é’ˆ`æ ¹æ® `left` å’Œ `mid` æ¥åˆå§‹åŒ–\n- `å·¦æŒ‡é’ˆi` æ ¹æ® `mid` æ¥åˆ¤æ–­ è¾¹ç•Œæ¡ä»¶\n- `jå³æŒ‡é’ˆ`  æ ¹æ® `right` æ¥åˆ¤æ–­åˆ¤æ–­è¾¹ç•Œæ¡ä»¶\n\n> [!info]\n> å¯¹äº `é€’å½’çš„ç†è§£`ï¼Œè¿˜æ˜¯ä¸€æ ·ï¼Œè®°ä½`æ¨¡æ¿`æå°±æ˜¯äº†ï¼Œå°è„‘è¢‹ç“œå­ï¼Œèƒ½é€’å½’å‡ æ¬¡ï¼Ÿ\n\n### å¦å¤–ä¸€ç§è§£æ³•ï¼šä½¿ç”¨ `js` çš„è¯­æ³•ç‰¹æ€§\n\n```javascript\nconst mergeSort = arr => {\n    // é‡‡ç”¨è‡ªä¸Šè€Œä¸‹çš„é€’å½’æ–¹æ³•\n    const len = arr.length;\n    // é€’å½’æ¡ä»¶\n    if (len < 2) {\n        return arr;\n    }\n    let middle = Math.floor(len / 2),\n        left = arr.slice(0, middle),\n        right = arr.slice(middle); // æ‹†åˆ†ä¸ºä¸¤ä¸ªå­æ•°ç»„\n\n    const leftArr = mergeSort(left);\n    const rightArr = mergeSort(right);\n    \n    // ::::ååºä½ç½®\n    return merge(leftArr, rightArr);\n};\n\n// åˆå¹¶ä¸¤ä¸ªå·²ç»æ’å¥½åºçš„æ•°ç»„ï¼Œæ— è®ºleftæˆ–è€…righté‡Œæœ‰å¤šå°‘å…ƒç´ \nconst merge = (left, right) => {\n    const result = [];\n    // :::: leftå’Œrightéƒ½æœ‰å…ƒç´ ï¼Œè¿™åˆ¤æ–­å¤§å°åï¼Œå–æœ€å°çš„æ”¾å…¥ç»“æœé›†ï¼Œæ³¨æ„ä½¿ç”¨shiftäº†çš„å‰¯ä½œç”¨\n    while (left.length && right.length) {\n        //// :::: æ³¨æ„: åˆ¤æ–­çš„æ¡ä»¶æ˜¯å°äºæˆ–ç­‰äºï¼Œå¦‚æœåªæ˜¯å°äºï¼Œé‚£ä¹ˆæ’åºå°†ä¸ç¨³å®š.\n        if (left[0] <= right[0]) {\n            result.push(left.shift());\n        } else {\n            result.push(right.shift());\n        }\n    }\n    // èµ°åˆ°è¿™é‡Œï¼Œè¯´æ˜leftå’Œrightå…¶ä¸­ä¸€ä¸ªä¸ºç©ºï¼Œå¦ä¸€ä¸ªä¸ä¸ºç©ºï¼Œéå†å‰©ä¸‹çš„å…ƒç´ ï¼Œæ”¾å…¥ç»“æœé›†\n    // :::: æ¯æ¬¡éƒ½å–æœ€å°çš„æ”¾å…¥ç»“æœé›†ï¼Œæ³¨æ„ä½¿ç”¨shiftäº†çš„å‰¯ä½œç”¨\n    while (left.length) result.push(left.shift());\n    while (right.length) result.push(right.shift());\n    return result;\n};\n\nconst array = [5, 4, 3, 2, 1, 32, 2, 1, 0];\nconsole.log('mergeSort ', mergeSort(array));\n\n```\n\n> [!bug]\n> å½“åˆé¢è¯•ï¼Œå°±å†™ä¸å‡ºæ¥ï¼Œä¸çŸ¥é“æ˜¯ `shift` ï¼Œè¿˜æ˜¯ `left` ,`right` è¿™å‡ ä¸ªå˜å‚»åˆ†ä¸æ¸…äº†\n\n### ä¸‹é¢ï¼Œåˆ†æä¸€ä¸‹å¤æ‚åº¦\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/9a65219541e4465dd0511a68ce401a66.png)\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/c5edbd21aa83ab7bc69c4efc19d786d1.png)\n\n## åº”ç”¨1ï¼šåŠ›æ‰£ç¬¬ 315 é¢˜ã€Œ è®¡ç®—å³ä¾§å°äºå½“å‰å…ƒç´ çš„ä¸ªæ•°ã€\n\n\n## åº”ç”¨2ï¼šåŠ›æ‰£ç¬¬ 493 é¢˜ã€Œ ç¿»è½¬å¯¹ã€\n\n\n## åº”ç”¨3ï¼šåŠ›æ‰£ç¬¬ 327 é¢˜ã€Œ åŒºé—´å’Œçš„ä¸ªæ•°ã€\n\n\n## å‚è€ƒ\n\n[å½’å¹¶æ’åºè¯¦è§£åŠåº”ç”¨ :: labuladongçš„ç®—æ³•å°æŠ„](https://labuladong.github.io/algo/di-yi-zhan-da78c/shou-ba-sh-66994/gui-bing-p-1387f/)\n[912. æ’åºæ•°ç»„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/sort-an-array/)\n","38dce2e33b805f9c9995545b6a4c3e56":"\n# æœç´¢ç®—æ³•\n\n\n","b78fa682fb125447856debb37a85deb6":"\n# äºŒåˆ†æŸ¥æ‰¾\n\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ€»ç»“ \n\n- æ³¨æ„ä¸‹é¢çš„é¡ºåº â‘  â‘¡ â‘¢\n\t- left â†’  right  â†’ left\n\t- right â†’  left  â†’ right\n- éƒ½ä½¿ç”¨ `elseif`\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240926210526.png)\n\n\n## 2. æŸ¥æ‰¾ç›®æ ‡å€¼\n\n```javascript\n// äºŒåˆ†æŸ¥æ‰¾\nfunction binarySearch(arr, target) {\n  // å·¦å³æŒ‡é’ˆ\n  let left = 0;\n  let right = arr.length - 1;\n\n  // å½“å·¦æŒ‡é’ˆå°äºç­‰äºå³æŒ‡é’ˆæ—¶ï¼Œç»§ç»­æŸ¥æ‰¾\n  while (left <= right) {\n    let mid = Math.floor((left + right) / 2);\n\n    if (arr[mid] < target) {\n      // å¦‚æœç›®æ ‡å€¼å°äºä¸­é—´å€¼ï¼Œåˆ™è¯´æ˜ç›®æ ‡å€¼åœ¨å³ä¾§ï¼Œæ›´æ–°å·¦æŒ‡é’ˆ\n      // åœ¨å³åŠè¾¹æŸ¥æ‰¾\n      left = mid + 1;\n    } else if (arr[mid] > target) {\n      // å¦‚æœç›®æ ‡å€¼å¤§äºä¸­é—´å€¼ï¼Œåˆ™è¯´æ˜ç›®æ ‡å€¼åœ¨å·¦ä¾§ï¼Œæ›´æ–°å³æŒ‡é’ˆ\n      // åœ¨å·¦åŠè¾¹æŸ¥æ‰¾\n      right = mid - 1;\n    } else if (arr[mid] === target) {\n      // å¦‚æœæ‰¾åˆ°ç›®æ ‡ï¼Œç›´æ¥è¿”å›å³å¯\n      return mid;\n    }\n  }\n  // æœªæ‰¾åˆ°\n  return -1;\n}\n```\n\n\n```python\n# äºŒåˆ†æŸ¥æ‰¾\ndef binary_search(list, target):\n    left = 0\n    right = len(list) - 1\n    while left <= right:\n        ## // æ˜¯æ•´æ•°é™¤æ³•è¿ç®—ç¬¦ï¼ˆå‘ä¸‹å–æ•´é™¤æ³•ï¼‰\n        mid_index = (left + right) // 2\n        mid = list[mid_index]\n        # å¦‚æœç›®æ ‡å€¼å¤§äºä¸­é—´å€¼ï¼Œåˆ™æ›´æ–°å³è¾¹ç•Œ\n        # åœ¨å·¦åŠè¾¹æŸ¥æ‰¾\n        if target > mid:\n            right = mid - 1\n        # å¦‚æœç›®æ ‡å€¼å°äºä¸­é—´å€¼ï¼Œåˆ™æ›´æ–°å·¦è¾¹ç•Œ\n        # åœ¨å³åŠè¾¹æŸ¥æ‰¾\n        elif target < mid:\n            left = mid + 1\n        elif target == mid:\n            return mid\n    return None\n\n```\n\n## 3. æŸ¥æ‰¾æœ€å·¦è¾¹çš„ç›®æ ‡å€¼\n\n```javascript\nfunction searchLeftIndex(arr, target) {\n  var left = 0,\n    right = nums.length - 1;\n  while (left <= right) {\n    var mid = left + Math.floor((right - left) / 2);\n    if (nums[mid] < target) {\n      left = mid + 1;\n    } else if (nums[mid] > target) {\n      right = mid - 1;\n    } else if (nums[mid] == target) {\n      // åˆ«è¿”å›ï¼Œé”å®šå·¦ä¾§è¾¹ç•Œ\n      right = mid - 1;\n    }\n  }\n  // åˆ¤æ–­ target æ˜¯å¦å­˜åœ¨äº nums ä¸­\n  if (left < 0 || left >= nums.length) {\n    return -1;\n  }\n  // åˆ¤æ–­ä¸€ä¸‹ nums[left] æ˜¯ä¸æ˜¯ target\n  return nums[left] == target ? left : -1;\n}\n```\n\n\n## 4. æŸ¥æ‰¾æœ€å³è¾¹çš„ç›®æ ‡å€¼\n\n```javascript\nvar searchRightIndex = function (nums, target) {\n  var left = 0,\n    right = nums.length - 1;\n  while (left <= right) {\n    var mid = left + Math.floor((right - left) / 2);\n    if (nums[mid] < target) {\n      left = mid + 1;\n    } else if (nums[mid] > target) {\n      right = mid - 1;\n    } else if (nums[mid] == target) {\n      // åˆ«è¿”å›ï¼Œé”å®šå³ä¾§è¾¹ç•Œ\n      left = mid + 1;\n    }\n  }\n  // ç”±äº while çš„ç»“æŸæ¡ä»¶æ˜¯ right == left - 1ï¼Œä¸”ç°åœ¨åœ¨æ±‚å³è¾¹ç•Œ\n  // æ‰€ä»¥ç”¨ right æ›¿ä»£ left - 1 æ›´å¥½è®°\n  if (right < 0 || right >= nums.length) {\n    return -1;\n  }\n  return nums[right] == target ? right : -1;\n};\n\n```\n\n","91f9c407dcb558c9bdf002698bd512cc":"\n# æœç´¢ç®—æ³•æ€»ç»“\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## æš´åŠ›æœç´¢ \n\n- éå†æ•°ç»„\n- éå†é“¾è¡¨\n- éå†äºŒå‰æ ‘\n\t- BFSã€DFS\n- éå†å¤šå‰æ ‘\n\t- BFSã€DFS\n- éå†å›¾\n\t- BFSã€DFS\n\n## åˆ©ç”¨æ•°æ®çš„ç‰¹æœ‰å±æ€§ï¼ˆä¾‹å¦‚æœ‰åºæ€§ï¼‰æ¥ä¼˜åŒ–æœç´¢è¿‡ç¨‹\n\n\n- **äºŒåˆ†æŸ¥æ‰¾** åˆ©ç”¨æ•°æ®çš„**æœ‰åºæ€§**å®ç°é«˜æ•ˆæŸ¥æ‰¾ï¼Œä»…é€‚ç”¨äºæ•°ç»„ã€‚\n- **å“ˆå¸ŒæŸ¥**æ‰¾åˆ©ç”¨å“ˆå¸Œè¡¨å°†æœç´¢æ•°æ®å’Œç›®æ ‡æ•°æ®å»ºç«‹ä¸º**é”®å€¼å¯¹**æ˜ å°„ï¼Œä»è€Œå®ç°æŸ¥è¯¢æ“ä½œã€‚\n\t- ä»¥ç©ºé—´æ¢æ—¶é—´\n- **æ ‘æŸ¥æ‰¾**åœ¨ç‰¹å®šçš„æ ‘ç»“æ„ï¼ˆä¾‹å¦‚**äºŒå‰æœç´¢æ ‘**ï¼‰ä¸­ï¼ŒåŸºäºæ¯”è¾ƒèŠ‚ç‚¹å€¼æ¥å¿«é€Ÿæ’é™¤èŠ‚ç‚¹ï¼Œä»è€Œå®šä½ç›®æ ‡å…ƒç´ \n\n","527e4db121ab543991a11a53aea68f8e":"\n# å…¶ä»–å¸¸è§ç®—æ³•ç¯‡\n\n\n\n- å…¶ä»–ç®—æ³•\n","540d67d46bdb5f348307411abce64fe1":"\n# åŒºé—´é—®é¢˜\n\n\n`#leetcode`   `#2024/08/18`  `#ç®—æ³•/åŒºé—´é—®é¢˜`  `#ç®—æ³•/åŒæŒ‡é’ˆ`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åŒºé—´é—®é¢˜è§£é¢˜æ€è·¯ \n\næ‰€è°“**åŒºé—´é—®é¢˜**ï¼Œå°±æ˜¯**çº¿æ®µé—®é¢˜**ï¼Œè®©ä½ åˆå¹¶æ‰€æœ‰çº¿æ®µã€æ‰¾å‡ºçº¿æ®µçš„äº¤é›†ç­‰ç­‰ã€‚ä¸»è¦æœ‰**ä¸¤ä¸ªæŠ€å·§**ï¼š\n1. **æ’åº**\n    - å…ˆæŒ‰ç…§èµ·ç‚¹**å‡åº**æ’åºï¼Œ\n    - è‹¥èµ·ç‚¹ç›¸åŒï¼Œåˆ™æŒ‰ç…§ç»ˆç‚¹**é™åº**æ’åºã€‚\n2. **ç”»å›¾**ã€‚å°±æ˜¯è¯´ä¸è¦å·æ‡’ï¼Œå‹¤åŠ¨æ‰‹ï¼Œä¸¤ä¸ªåŒºé—´çš„ç›¸å¯¹ä½ç½®åˆ°åº•æœ‰å‡ ç§å¯èƒ½ï¼Œä¸åŒçš„ç›¸å¯¹ä½ç½®æˆ‘ä»¬çš„ä»£ç åº”è¯¥æ€ä¹ˆå»å¤„ç†\n\n## 2. ç¤ºä¾‹ä¸€ï¼šåˆ é™¤è¢«è¦†ç›–åŒºé—´\n\n### 2.1. é¢˜ç›®\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240818213325.png)\n\n### 2.2. æ€è·¯\n\nå…ˆ**æ’åº**ï¼Œå¦‚ä¸‹å›¾\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240818213541.png)\n\næ’å®Œåºåï¼Œåªæœ‰ä¸‹é¢**ä¸‰ç§æƒ…å†µ**\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240818213758.png)\n\nç®—æ³•çš„**å…³é”®ç‚¹**ï¼š\n1. æ’åºç­–ç•¥ï¼šæŒ‰èµ·å§‹ä½ç½®å‡åºï¼Œç›¸åŒèµ·å§‹ä½ç½®æ—¶æŒ‰ç»“æŸä½ç½®é™åºã€‚è¿™ç¡®ä¿äº†åœ¨å¤„ç†é‡å æ—¶çš„æ­£ç¡®æ€§ã€‚\n2. ä¸‰ç§æƒ…å†µçš„å¤„ç†ï¼Œä¸‹é¢ä¸‰ç§æƒ…å†µæ¶µç›–äº†æ‰€æœ‰å¯èƒ½çš„åŒºé—´å…³ç³»\n\t1. å®Œå…¨è¦†ç›–\n\t2. å¯åˆå¹¶\n\t3. å®Œå…¨ä¸ç›¸äº¤\n3. éå†æ—¶ä½¿ç”¨äº†**åŒæŒ‡é’ˆ**ï¼Œæ ¹æ®ä¸Šé¢ä¸‰ç§æƒ…å†µ**æ›´æ–°åŒæŒ‡é’ˆ**\n4. è®°ä½ï¼Œè¿”å›çš„**å‰©ä½™çš„åŒºé—´æ•°**\n\n### 2.3. ä»£ç å®ç°\n\n```javascript\n/**\n * @description åŒºé—´åˆ—è¡¨çš„åˆ é™¤ï¼šåŒºé—´é—®é¢˜\n * @param {number[][]} intervals\n * @return {number}\n */\nvar removeCoveredIntervals = function (intervals) {\n  let res = 0;\n  // â‘  æŒ‰ç…§åŒºé—´çš„èµ·å§‹ä½ç½®æ’åºï¼Œå‡åºæ’åº,å¦‚æœèµ·å§‹ä½ç½®ç›¸åŒï¼Œåˆ™æŒ‰ç…§ç»“æŸä½ç½®é™åºæ’åº\n  intervals.sort((a, b) => a[0] - b[0] || b[1] - a[1]);\n\n  // â‘¡  åˆå§‹åŒ–å·¦æŒ‡é’ˆï¼Œå³æŒ‡é’ˆ,\n  //      å·¦æŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ªåŒºé—´çš„èµ·å§‹ä½ç½®\n  //      å³æŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ªåŒºé—´çš„ç»“æŸä½ç½®\n  let left = intervals[0][0];\n  let right = intervals[0][1];\n\n  // â‘¢  éå†åŒºé—´æ•°ç»„\n  for (let i = 1; i < intervals.length; i++) {\n    let currInterval = intervals[i];\n    // æƒ…å†µä¸€ï¼šæœ‰é‡å \n    if (left <= currInterval[0] && right >= currInterval[1]) {\n      res++;\n    }\n    // æƒ…å†µäºŒï¼šå¯ä»¥åˆå¹¶\n    if (right < currInterval[1]) {\n      left = currInterval[0];\n      right = currInterval[1];\n    }\n    // æƒ…å†µä¸‰ï¼šå®Œå…¨ä¸ç›¸äº¤\n    if (right < currInterval[0]) {\n      left = currInterval[0];\n      right = currInterval[1];\n    }\n  }\n\n  // è¿”å›ç»“æœï¼šåŒºé—´åˆ—è¡¨çš„åˆ é™¤ï¼Œå³æ€»åŒºé—´æ•°å‡å»å¯ä»¥åˆ é™¤çš„åŒºé—´æ•°\n  // ::::é¢˜è®¾ä¸­éœ€è¦è¿”å›ã€å‰©ä½™åŒºé—´çš„æ•°ç›®ã€‘\n  return intervals.length - res;\n};\n\n```\n\n### 2.4. å¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦åˆ†æï¼š\n1. æ’åºï¼šä½¿ç”¨äº† JavaScript çš„å†…ç½®æ’åºæ–¹æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º `O(n log n)`ï¼Œå…¶ä¸­ n æ˜¯åŒºé—´çš„æ•°é‡ã€‚\n2. éå†åŒºé—´ï¼šä¸€æ¬¡çº¿æ€§éå†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ã€‚\n3. æ€»çš„æ—¶é—´å¤æ‚åº¦ï¼šO(n log n) + O(n) = `O(n log n)`ï¼Œä¸»è¦ç”±æ’åºæ­¥éª¤å†³å®šã€‚\n\nç©ºé—´å¤æ‚åº¦åˆ†æï¼š\n1. æ’åºï¼šJavaScript çš„æ’åºç®—æ³•é€šå¸¸ä½¿ç”¨é¢å¤–çš„ O(log n) åˆ° O(n) çš„ç©ºé—´ã€‚\n2. å…¶ä»–å˜é‡ï¼ˆleft, right, resï¼‰ï¼šä½¿ç”¨å¸¸æ•°é¢å¤–ç©ºé—´ã€‚\n3. æ€»çš„ç©ºé—´å¤æ‚åº¦ï¼š`O(log n) åˆ° O(n)`ï¼Œ==ä¸»è¦å–å†³äºæ’åºç®—æ³•çš„å®ç°==ã€‚\n\n### 2.5. é”™è¯¯è®°å½•\n\n> [!danger]\n> å…³äº**åŒºé—´æ’åº**ï¼Œä¸€ç›´è§‰å¾—æ˜¯ sort é‡Œé¢åµŒå¥— sortï¼Œå…¶å®ä¸æ˜¯ï¼Œ**ä¸€ä¸ª sort å›è°ƒå³å¯**\n\n****\n```javascript\narr.sort((a, b) => {  \n    if (a[0] == b[0]) {  \n        return b[1] - a[1];  \n    }  \n    return a[0] - b[0];  \n});\n\n// ç®€å†™\narr.sort((a, b) => a[0] - b[0] || b[1] - a[1]);\n```\n\n## 3. ç¤ºä¾‹äºŒï¼šåŒºé—´åˆå¹¶é—®é¢˜\n\n> è¯¦è§ [12. ç®—æ³•/3. åˆ·é¢˜ç¯‡/2. LeetCode çƒ­é¢˜ 100 é¢˜/12.  åˆå¹¶åŒºé—´|12.  åˆå¹¶åŒºé—´](/post/540d67d46bdb5f348307411abce64fe1.html#12-ç®—æ³•/3-åˆ·é¢˜ç¯‡/2-LeetCode-çƒ­é¢˜-100-é¢˜/12--åˆå¹¶åŒºé—´|12--åˆå¹¶åŒºé—´)\n\n## 4. ç¤ºä¾‹ä¸‰ï¼šåŒºé—´åˆ—è¡¨çš„äº¤é›†\n\n### 4.1. é¢˜ç›®\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240818220146.png)\n\n> https://leetcode.cn/problems/interval-list-intersections/description/\n\n### 4.2. æ€è·¯\n\n- æˆ‘ä»¬ç”¨Â `[a1, a2]`Â å’ŒÂ `[b1, b2]`Â è¡¨ç¤ºåœ¨Â `A`Â å’ŒÂ `B`Â ä¸­çš„ä¸¤ä¸ªåŒºé—´ï¼Œ\n\t- å¦‚æœè¿™ä¸¤ä¸ªåŒºé—´æœ‰äº¤é›†ï¼Œéœ€æ»¡è¶³Â `b2 >= a1 && a2 >= b1`ï¼Œåˆ†ä¸‹é¢å››ç§æƒ…å†µï¼š\n\t\t- ![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240818220516.png)\n\t\t- æ ¹æ®ä¸Šå›¾å¯ä»¥å‘ç°è§„å¾‹ï¼Œå‡è®¾äº¤é›†åŒºé—´æ˜¯Â `[c1, c2]`\n\t\t\t- é‚£ä¹ˆÂ `c1 = max(a1, b1), c2 = min(a2, b2)`ï¼Œå¦‚ä¸‹å›¾\n\t\t\t- ![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240818220652.png)\n\nç»“åˆåŠ¨å›¾çœ‹çœ‹ï¼š\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Interval Problem Solution.gif|504)\n\n### 4.3. ä»£ç å®ç°\n\n```javascript\n/**\n * @description åŒºé—´åˆ—è¡¨çš„äº¤é›†\n * @param {number[][]} firstList\n * @param {number[][]} secondList\n * @return {number[][]}\n */\nvar intervalIntersection = function (firstList, secondList) {\n  let res = [];\n  // åŒæŒ‡é’ˆ\n  let i = 0,\n    j = 0;\n  while (i < firstList.length && j < secondList.length) {\n    let a1 = firstList[i][0],\n      a2 = firstList[i][1];\n    let b1 = secondList[j][0],\n      b2 = secondList[j][1];\n    // â‘  äº¤é›†å­˜åœ¨çš„æƒ…å†µï¼š\n    //   å³ b åŒºé—´çš„èµ·å§‹ä½ç½®å°äºç­‰äº a åŒºé—´çš„ç»“æŸä½ç½®\n    // å¹¶ä¸” a åŒºé—´çš„èµ·å§‹ä½ç½®å°äºç­‰äº b åŒºé—´çš„ç»“æŸä½ç½®\n    if (b2 >= a1 && a2 >= b1) {\n      res.push([Math.max(a1, b1), Math.min(a2, b2)]);\n    }\n\n    // â‘¡ æ›´æ–°æŒ‡é’ˆ\n    //   å¦‚æœ a åŒºé—´çš„ç»“æŸä½ç½®å°äº b åŒºé—´çš„ç»“æŸä½ç½®ï¼Œåˆ™ a åŒºé—´çš„æŒ‡é’ˆå‘åç§»åŠ¨\n    if (a2 < b2) {\n      i++;\n      //  å¦‚æœ b åŒºé—´çš„ç»“æŸä½ç½®å°äº a åŒºé—´çš„ç»“æŸä½ç½®ï¼Œåˆ™ b åŒºé—´çš„æŒ‡é’ˆå‘åç§»åŠ¨\n    } else {\n      j++;\n    }\n  }\n  return res;\n};\n\n```\n\n### 4.4. å¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼š\n- å‡è®¾ä¸¤ä¸ªæ•°ç»„çš„é•¿åº¦éƒ½æ˜¯ nã€‚\n- ç®—æ³•éå†ä¸¤ä¸ªæ•°ç»„ä¸€æ¬¡ï¼Œæ¯æ¬¡å¾ªç¯æœ€å¤šæ‰§è¡Œä¸€æ¬¡ã€‚\n- å› æ­¤ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`ã€‚\n\nç©ºé—´å¤æ‚åº¦ï¼š\n- ç»“æœæ•°ç»„ resï¼šåœ¨æœ€åæƒ…å†µä¸‹ï¼ˆæ‰€æœ‰åŒºé—´éƒ½æœ‰äº¤é›†ï¼‰ï¼Œ**å¯èƒ½éœ€è¦å­˜å‚¨ n ä¸ªäº¤é›†åŒºé—´**ã€‚\n- å…¶ä»–å˜é‡ä½¿ç”¨å¸¸æ•°é¢å¤–ç©ºé—´ã€‚\n- æ€»çš„ç©ºé—´å¤æ‚åº¦ï¼š`O(n)`ï¼Œä¸»è¦ç”±ç»“æœæ•°ç»„å†³å®šã€‚\n\nç®—æ³•çš„ä¼˜ç‚¹ï¼ˆè€ƒè™‘åˆ°æ•°ç»„é•¿åº¦ç›¸åŒï¼‰ï¼š\n1. é«˜æ•ˆï¼šæ—¶é—´å¤æ‚åº¦ O(n) æ˜¯çº¿æ€§çš„ï¼Œè¿™æ˜¯è§£å†³æ­¤é—®é¢˜çš„æœ€ä¼˜å¤æ‚åº¦ã€‚\n2. ä¸€æ¬¡éå†ï¼šé€šè¿‡ä¸€æ¬¡éå†å°±èƒ½æ‰¾å‡ºæ‰€æœ‰äº¤é›†ã€‚\n3. æ— éœ€æ’åºï¼šå‡è®¾è¾“å…¥åˆ—è¡¨å·²ç»æŒ‰åŒºé—´èµ·å§‹æ—¶é—´æ’åºã€‚\n\nå…³é”®ç‚¹ï¼š\n1. **åŒæŒ‡é’ˆæŠ€å·§**ï¼šä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆåŒæ­¥éå†ä¸¤ä¸ªåˆ—è¡¨ã€‚\n2. äº¤é›†åˆ¤æ–­å’ŒæŒ‡é’ˆç§»åŠ¨ç­–ç•¥ä¿æŒä¸å˜ã€‚\n\næ€»ç»“ï¼š è€ƒè™‘åˆ°ä¸¤ä¸ªè¾“å…¥æ•°ç»„é•¿åº¦ç›¸åŒï¼Œè¿™ä¸ªç®—æ³•çš„æ€§èƒ½ç‰¹å¾æ›´åŠ æ˜ç¡®ã€‚å®ƒä»¥ O(n) çš„æ—¶é—´å¤æ‚åº¦å’Œ O(n) çš„ç©ºé—´å¤æ‚åº¦é«˜æ•ˆåœ°è§£å†³äº†é—®é¢˜ï¼Œå…¶ä¸­ n æ˜¯æ¯ä¸ªè¾“å…¥æ•°ç»„çš„é•¿åº¦ã€‚è¿™ä¸ªæ–¹æ³•å¯¹äºæŸ¥æ‰¾ä¸¤ä¸ªç­‰é•¿æ’åºåŒºé—´åˆ—è¡¨çš„äº¤é›†æ˜¯æœ€ä¼˜è§£ã€‚\n\n### 4.5. æ³¨æ„ç‚¹\n\n- åˆ©ç”¨**åŒæŒ‡é’ˆ** æŠ€å·§\n- å¦å¤– `a1 ã€a2 ã€b1ã€b2 ã€c1 ã€ c2` è¿™å‡ ä¸ªå˜é‡çš„å…³ç³»ä¸€å®šè¦ææ¸…æ¥šï¼Œä¸ç„¶ä¼šå‡ºé—®é¢˜\n\n","4f1cdfa1d77955d0b54e550ef8b7546c":"\n# å¿«é€Ÿæ’åºç®—æ³•çš„åŸç†åŠè¿ç”¨\n\n`#ç®—æ³•/å¿«æ’` `#2024/09/16`  `#ç®—æ³•/æ’åº`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å¿«æ’ç®—æ³• \n### 1.1. ä¸€å¥è¯æ€»ç»“å¿«æ’ç®—æ³•\n\nå¿«é€Ÿæ’åºæ˜¯**å…ˆå°†**ä¸€ä¸ªå…ƒç´ æ’å¥½åºï¼Œç„¶åå†å°†**å‰©ä¸‹çš„å…ƒç´ **æ’å¥½åº\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240916104326.png)\n\n> è¿™å°±åƒæ˜¯åœ¨æ•´ç†ä¸€å¤§å †æ‚ä¹±çš„ç‰©å“ï¼Œæˆ‘ä»¬å…ˆé€‰ä¸€ä¸ªæ ‡å‡†ï¼ŒæŠŠç‰©å“åˆ†æˆä¸¤å †ï¼Œç„¶åå†åˆ†åˆ«æ•´ç†è¿™ä¸¤å †ï¼Œå¦‚æ­¤åå¤ï¼Œæœ€ç»ˆå°±èƒ½å¾—åˆ°ä¸€ä¸ªäº•ç„¶æœ‰åºçš„ç»“æœã€‚\n### 1.2. å¿«æ’å°±æ˜¯æ„é€  BST çš„è¿‡ç¨‹\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/å¿«é€Ÿæ’åº.gif|432)\n\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240916104516.png)\n\n--- \n\nä¸€ç§æç«¯åœºæ™¯ï¼šä½ ä¸å¯èƒ½æ¯æ¬¡éƒ½é€‰ä¸­äº†**åˆé€‚çš„åˆ‡åˆ†ç‚¹**å§ï¼Œæ¯”å¦‚ä¸Šå›¾ä¸­çš„ `4` ï¼Œæ‰€ä»¥å¦‚æœæœ‰ä¸€è¾¹çš„å…ƒç´ ç‰¹åˆ«å°‘çš„è¯ï¼Œä¼šå¯¼è‡´äºŒå‰æ ‘ç”Ÿé•¿ä¸å¹³è¡¡ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240917105205.png)\n\næ‰€ä»¥éœ€è¦**éšæœºæ€§**ï¼Œä¸¤ç§æ–¹æ³•\n- æ´—ç‰Œæ•°ç»„\n- éšæœºé€‰ä¸­**åˆ‡åˆ†ç‚¹**\n\n> ç»è¿‡éšæœºåŒ–çš„Â `partition`Â å‡½æ•°å¾ˆéš¾å‡ºç°æç«¯æƒ…å†µ\n\n### 1.3. å¿«æ’ä¸äºŒå‰æ ‘çš„éå†çš„å…³ç³»\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240917132719.png)\n\n### 1.4. ä»£ç å®ç°ä¸€ï¼šç®€å•å®ç°\n\n```javascript\nvar quickSort = function (nums) {\n  if (nums.length <= 1) {\n    return nums;\n  }\n\n  let midIndex = Math.floor(nums.length / 2);\n\n  let left = [];\n  let right = [];\n  let mid = [];\n\n  let midValue = nums[midIndex];\n  // ä»æ•°ç»„ä¸­åˆ é™¤ä¸­é—´å€¼\n  nums.splice(midIndex, 1);\n  for (let i = 0; i < nums.length; i++) {\n    if (nums[i] < midValue) {\n      left.push(nums[i]);\n    } else if (nums[i] > midValue) {\n      right.push(nums[i]);\n    } else {\n      mid.push(nums[i]);\n    }\n  }\n\n  //**********************\n  //  å‰åºä½ç½®\n  //**********************\n  let sortLeft = quickSort(left);\n  let sortRight = quickSort(right);\n\n  return [...sortLeft, ...mid, ...sortRight];\n};\n\n/**\n * @param {number[]} nums\n * @param {number} k\n * @return {number}\n */\nvar findKthLargest = function (nums, k) {\n  let sorted = quickSort(nums);\n  return sorted[sorted.length - k];\n};\n\n```\n\n#### 1.4.1. å¤æ‚åº¦åˆ†æ\n\n1. æ—¶é—´å¤æ‚åº¦ï¼š\n\t- å¿«é€Ÿæ’åºçš„å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ O(n log n)ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚\n\t- æœ€åæƒ…å†µä¸‹ï¼ˆå½“æ•°ç»„å·²ç»æ’åºæˆ–è€…æ¥è¿‘æ’åºæ—¶ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦å¯èƒ½é€€åŒ–åˆ° O(n^2)ã€‚\n\t- æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ï¼šO(n^2)\n\t- æ€»çš„å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n log n)\n2. ç©ºé—´å¤æ‚åº¦ï¼š\n   - å¿«é€Ÿæ’åºçš„ç©ºé—´å¤æ‚åº¦ä¸»è¦æ¥è‡ª**é€’å½’è°ƒç”¨æ ˆ**å’Œåˆ›å»ºçš„æ–°æ•°ç»„ã€‚\n   - å¹³å‡æƒ…å†µä¸‹ï¼Œé€’å½’æ·±åº¦ä¸º O(log n)ã€‚\n   - æ¯æ¬¡é€’å½’éƒ½åˆ›å»ºäº†æ–°çš„ leftã€right å’Œ mid æ•°ç»„ï¼Œæœ€åæƒ…å†µä¸‹å¯èƒ½éœ€è¦ `O(n)` çš„é¢å¤–ç©ºé—´ã€‚\n   - æ€»çš„ç©ºé—´å¤æ‚åº¦ï¼šO(n log n)\n   - æœ€åæƒ…å†µç©ºé—´å¤æ‚åº¦ï¼šO(n^2)\n3. é¢å¤–è¯´æ˜ï¼š\n   - è¿™ä¸ªå®ç°ä½¿ç”¨äº†é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œè€Œ**ä¸æ˜¯åŸåœ°æ’åº**ï¼Œè¿™å¢åŠ äº†ç©ºé—´å¤æ‚åº¦ã€‚\n   - å¯¹äºæ‰¾ç¬¬kå¤§å…ƒç´ çš„é—®é¢˜ï¼Œå…¶å®ä¸éœ€è¦å®Œå…¨æ’åºæ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨å¿«é€Ÿé€‰æ‹©ç®—æ³•ï¼ˆQuickSelectï¼‰æ¥ä¼˜åŒ–ï¼Œä½¿å¹³å‡æ—¶é—´å¤æ‚åº¦é™ä½åˆ° O(n)ã€‚\n4. ä¼˜åŒ–å»ºè®®ï¼š\n   - å¯ä»¥è€ƒè™‘ä½¿ç”¨åŸåœ°å¿«é€Ÿæ’åºæ¥å‡å°‘ç©ºé—´ä½¿ç”¨ã€‚\n\n### 1.5. ä»£ç å®ç°äºŒï¼šåŸåœ°æ’åº\n\n> [!danger]\n> è¯´å®è¯ï¼Œå®Œå…¨å†™å‡ºæ¥è¿˜æ˜¯æŒºéš¾çš„ï¼ŒæŒæ¡åŸç†å°±è¡Œäº†ï¼Œèƒ½å¤Ÿå†™å‡ºæ¥æˆæœ¬æ”¶ç›Šåˆå¦‚ä½•å‘¢ï¼Ÿ\n\n```javascript\nvar quickSort = function (nums) {\n  // ä¸ºäº†é¿å…å‡ºç°è€—æ—¶çš„æç«¯æƒ…å†µï¼Œå…ˆéšæœºæ‰“ä¹±\n  shuffle(nums);\n  // æ’åºæ•´ä¸ªæ•°ç»„ï¼ˆåŸåœ°ä¿®æ”¹ï¼‰\n  sort(nums, 0, nums.length - 1);\n};\n\n// æ´—ç‰Œç®—æ³•ï¼Œå°†è¾“å…¥çš„æ•°ç»„éšæœºæ‰“ä¹±\nvar shuffle = function (nums) {\n  for (let i = nums.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    // ES6 çš„è§£æ„èµ‹å€¼\n    [nums[i], nums[j]] = [nums[j], nums[i]];\n  }\n};\n\nvar sort = function (nums, lo, hi) {\n  // é€’å½’çš„ç»ˆæ­¢æ¡ä»¶, lo >= hi æ—¶è¿”å›\n  if (lo >= hi) {\n    return;\n  }\n  // å¯¹ nums[lo..hi] è¿›è¡Œåˆ‡åˆ†\n  // ä½¿å¾— nums[lo..p-1] <= nums[p] < nums[p+1..hi]\n  var p = partition(nums, lo, hi);\n  sort(nums, lo, p - 1);\n  sort(nums, p + 1, hi);\n};\n\n/**\n *@description å¯¹æ•°ç»„ nums çš„å­åŒºé—´ [lo, hi] è¿›è¡Œåˆ‡åˆ†æ“ä½œ\n *   ä»[lo,hi]ä¸­xé€‰æ‹© pivot = nums[lo] ä½œä¸ºåˆ‡åˆ†ç‚¹\n *      å°†å°äº pivot çš„å…ƒç´ æ”¾åœ¨å·¦ä¾§ï¼Œå¤§äº pivot çš„å…ƒç´ æ”¾åœ¨å³ä¾§\n *@param {number[]} nums å¾…åˆ‡åˆ†çš„æ•°ç»„\n *@param {number} lo åˆ‡åˆ†çš„å·¦è¾¹ç•Œ\n *@param {number} hi åˆ‡åˆ†çš„å³è¾¹ç•Œ\n *@return {number} è¿”å› p, ä½¿å¾— nums[lo..p-1] <= nums[p] < nums[p+1..hi]\n */\nvar partition = function (nums, lo, hi) {\n  var pivot = nums[lo];\n  var i = lo + 1, // i ä» lo + 1 å¼€å§‹ï¼Œé€æ¸å‘å³é€¼è¿‘\n    j = hi; // j ä» hi å¼€å§‹,é€æ¸å‘å·¦é€¼è¿‘\n  // å½“ i > j æ—¶ç»“æŸå¾ªç¯ï¼Œä»¥ä¿è¯åŒºé—´ [lo, hi] éƒ½è¢«è¦†ç›–\n  while (i <= j) {\n    while (i < hi && nums[i] <= pivot) {\n      i++;\n      // æ­¤ while ç»“æŸæ—¶æ°å¥½ nums[i] > pivot\n    }\n    while (j > lo && nums[j] > pivot) {\n      j--;\n      // æ­¤ while ç»“æŸæ—¶æ°å¥½ nums[j] <= pivot\n    }\n\n    // è¿™ä¸ªæ—¶å€™å¯ä»¥è‡ªå·±è·³å‡ºå¾ªç¯äº†\n    if (i >= j) {\n      break;\n    }\n    // æ­¤æ—¶ [lo, i) <= pivot && (j, hi] > pivot\n    // äº¤æ¢ nums[j] å’Œ nums[i]\n    [nums[i], nums[j]] = [nums[j], nums[i]];\n    // æ­¤æ—¶ [lo, i] <= pivot && [j, hi] > pivot\n  }\n  // æœ€åå°† pivot æ”¾åˆ°åˆé€‚çš„ä½ç½®ï¼Œå³ pivot å·¦è¾¹å…ƒç´ è¾ƒå°ï¼Œå³è¾¹å…ƒç´ è¾ƒå¤§\n  [nums[lo], nums[j]] = [nums[j], nums[lo]];\n\n  return j;\n};\n\n```\n\n## 2. å¿«é€Ÿé€‰æ‹©ç®—æ³•\n\nå¿«é€Ÿé€‰æ‹©ç®—æ³•æ˜¯ä¸€ç§ç”¨äº**æ‰¾åˆ°æ•°ç»„ä¸­ç¬¬kå°ï¼ˆæˆ–ç¬¬kå¤§ï¼‰å…ƒç´ **çš„é«˜æ•ˆç®—æ³•ã€‚å®ƒçš„æ€æƒ³æºè‡ªäºå¿«é€Ÿæ’åºç®—æ³•ï¼Œä½†é€šå¸¸æ¯”å®Œæ•´çš„æ’åºæ›´å¿«ï¼Œå› ä¸ºå®ƒåªéœ€è¦éƒ¨åˆ†æ’åºæ•°ç»„ã€‚\n\nè®©æˆ‘ä»¬æ·±å…¥äº†è§£å¿«é€Ÿé€‰æ‹©ç®—æ³•ï¼š\n\n1. ç®—æ³•æ¦‚è¿°ï¼š\n   å¿«é€Ÿé€‰æ‹©çš„ä¸»è¦æ€æƒ³æ˜¯ä½¿ç”¨ç±»ä¼¼å¿«é€Ÿæ’åºçš„åˆ†åŒºç­–ç•¥ï¼Œä½†åªé€’å½’åœ°æœç´¢åŒ…å«ç¬¬kå°å…ƒç´ çš„é‚£ä¸€éƒ¨åˆ†ã€‚\n2. ç®—æ³•æ­¥éª¤ï¼š\n   a. é€‰æ‹©ä¸€ä¸ªåŸºå‡†å…ƒç´ ï¼ˆpivotï¼‰\n   b. å°†æ•°ç»„åˆ†åŒºï¼Œä½¿å¾—å°äºåŸºå‡†çš„å…ƒç´ åœ¨å·¦è¾¹ï¼Œå¤§äºåŸºå‡†çš„å…ƒç´ åœ¨å³è¾¹\n   c. æ ¹æ®åˆ†åŒºä½ç½®å’Œkçš„å…³ç³»ï¼Œå†³å®šæ˜¯è¿”å›ç»“æœï¼Œè¿˜æ˜¯ç»§ç»­åœ¨å·¦è¾¹æˆ–å³è¾¹é€’å½’æŸ¥æ‰¾\n3. JavaScript å®ç°ï¼š\n\n```javascript\nfunction quickSelect(arr, k) {\n    // kåº”è¯¥åœ¨1åˆ°arr.lengthä¹‹é—´\n    if (k < 1 || k > arr.length) {\n        return null;\n    }\n    return select(arr, 0, arr.length - 1, k);\n}\n\nfunction select(arr, left, right, k) {\n    // å¦‚æœå·¦å³æŒ‡é’ˆç›¸é‡ï¼Œè¯´æ˜æ‰¾åˆ°äº†ç¬¬kå°çš„å…ƒç´ \n    if (left === right) {\n        return arr[left];\n    }\n    \n    // é€‰æ‹©åŸºå‡†å¹¶åˆ†åŒº\n    let pivotIndex = partition(arr, left, right);\n    \n    // è®¡ç®—åŸºå‡†çš„ç§©ï¼ˆå³å®ƒæ˜¯ç¬¬å‡ å°çš„å…ƒç´ ï¼‰\n    let rank = pivotIndex - left + 1;\n    \n    if (k === rank) {\n        // å¦‚æœåŸºå‡†çš„ç§©æ­£å¥½æ˜¯kï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ç¬¬kå°çš„å…ƒç´ \n        return arr[pivotIndex];\n    } else if (k < rank) {\n        // å¦‚æœkå°äºrankï¼Œåœ¨å·¦åŠéƒ¨åˆ†ç»§ç»­æŸ¥æ‰¾\n        return select(arr, left, pivotIndex - 1, k);\n    } else {\n        // å¦‚æœkå¤§äºrankï¼Œåœ¨å³åŠéƒ¨åˆ†ç»§ç»­æŸ¥æ‰¾\n        return select(arr, pivotIndex + 1, right, k - rank);\n    }\n}\n\nfunction partition(arr, left, right) {\n    let pivot = arr[right]; // é€‰æ‹©æœ€å³è¾¹çš„å…ƒç´ ä½œä¸ºåŸºå‡†\n    let i = left - 1;\n    \n    for (let j = left; j < right; j++) {\n        if (arr[j] <= pivot) {\n            i++;\n            [arr[i], arr[j]] = [arr[j], arr[i]]; // äº¤æ¢å…ƒç´ \n        }\n    }\n    \n    [arr[i + 1], arr[right]] = [arr[right], arr[i + 1]]; // å°†åŸºå‡†æ”¾åˆ°æ­£ç¡®çš„ä½ç½®\n    return i + 1;\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nlet arr = [3, 2, 1, 5, 6, 4];\nconsole.log(quickSelect(arr, 2)); // è¾“å‡ºï¼š2ï¼ˆç¬¬2å°çš„å…ƒç´ ï¼‰\nconsole.log(quickSelect(arr, 4)); // è¾“å‡ºï¼š4ï¼ˆç¬¬4å°çš„å…ƒç´ ï¼‰\n```\n\n4. ç®—æ³•åˆ†æï¼š\n   - æ—¶é—´å¤æ‚åº¦ï¼š\n     * å¹³å‡æƒ…å†µï¼šO(n)\n     * æœ€åæƒ…å†µï¼šO(nÂ²)ï¼ˆä½†è¿™ç§æƒ…å†µå¾ˆå°‘å‘ç”Ÿï¼Œå°¤å…¶æ˜¯å¦‚æœæˆ‘ä»¬éšæœºé€‰æ‹©åŸºå‡†ï¼‰\n   - ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œå› ä¸ºå®ƒæ˜¯åŸåœ°æ“ä½œçš„\n5. ä¼˜ç‚¹ï¼š\n   - åœ¨å¹³å‡æƒ…å†µä¸‹ï¼Œå®ƒæ¯”æ’åºæ•´ä¸ªæ•°ç»„ç„¶åé€‰æ‹©ç¬¬kä¸ªå…ƒç´ è¦å¿«å¾—å¤š\n   - å®ƒæ˜¯ä¸€ä¸ªåŸåœ°ç®—æ³•ï¼Œä¸éœ€è¦é¢å¤–çš„ç©ºé—´\n   - å¯¹äºå¤§å‹æ•°æ®é›†å¯»æ‰¾ä¸­ä½æ•°æˆ–è€…å…¶ä»–ç™¾åˆ†ä½æ•°éå¸¸æœ‰æ•ˆ\n6. åº”ç”¨åœºæ™¯ï¼š\n   - å¯»æ‰¾æ•°ç»„ä¸­çš„ä¸­ä½æ•°\n   - å¯»æ‰¾ç¬¬kå¤§ï¼ˆæˆ–ç¬¬kå°ï¼‰çš„å…ƒç´ \n   - è§£å†³ Top K é—®é¢˜\n   - åœ¨æŸäº›æ•°æ®æµç®—æ³•ä¸­ç”¨äºç»´æŠ¤è¿è¡Œæ—¶çš„ç»Ÿè®¡ä¿¡æ¯\n7. ä¼˜åŒ–ï¼š\n   - ä½¿ç”¨éšæœºé€‰æ‹©åŸºå‡†å¯ä»¥è¿›ä¸€æ­¥æ”¹å–„æœ€åæƒ…å†µçš„æ€§èƒ½\n   - å¯¹äºå°è§„æ¨¡å­æ•°ç»„ï¼Œå¯ä»¥åˆ‡æ¢åˆ°æ’å…¥æ’åºç­‰ç®€å•ç®—æ³•æ¥æé«˜æ•ˆç‡\n\nå¿«é€Ÿé€‰æ‹©ç®—æ³•æ˜¯ä¸€ä¸ªå¼ºå¤§è€Œä¼˜é›…çš„ç®—æ³•ï¼Œå®ƒå±•ç¤ºäº†å¦‚ä½•é€šè¿‡åªè§£å†³é—®é¢˜çš„ä¸€éƒ¨åˆ†æ¥é«˜æ•ˆåœ°å¾—åˆ°ç­”æ¡ˆã€‚ç†è§£å’ŒæŒæ¡è¿™ä¸ªç®—æ³•ä¸ä»…èƒ½å¸®åŠ©è§£å†³ç‰¹å®šçš„é—®é¢˜ï¼Œè¿˜èƒ½æä¾›ä¸€ç§è§£å†³æ›´å¹¿æ³›é—®é¢˜çš„æ€è·¯ã€‚\n\n## 3. ç›¸å…³é¢˜ç›®\n\n|LeetCode|åŠ›æ‰£|éš¾åº¦|\n|---|---|---|\n|[215. Kth Largest Element in an Array](https://leetcode.com/problems/kth-largest-element-in-an-array/)|[215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ ](https://leetcode.cn/problems/kth-largest-element-in-an-array/)|ğŸŸ |\n|[912. Sort an Array](https://leetcode.com/problems/sort-an-array/)|[912. æ’åºæ•°ç»„](https://leetcode.cn/problems/sort-an-array/)|ğŸŸ |\n|-|[å‰‘æŒ‡ Offer II 076. æ•°ç»„ä¸­çš„ç¬¬ k å¤§çš„æ•°å­—](https://leetcode.cn/problems/xx4gT2/)|ğŸŸ |\n\n## 4. å‚è€ƒ\n\nhttps://labuladong.online/algo/practice-in-action/quick-sort/\n","a96bf7626854547cbdc43299f79eb7bb":"\n# äºŒç»´æ•°ç»„çš„éå†æŠ€å·§\n\n`#2023/05/27` `#ç®—æ³•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## ä¸ºä»€ä¹ˆéœ€è¦å•ç‹¬èŠèŠè¿™ä¸ªè¯é¢˜ \n\n- åŠ¨æ€è§„åˆ’ ç»å¸¸éœ€è¦ éå†`äºŒç»´ dp æ•°ç»„`\n- äºŒç»´éå†ï¼Œæ—¢è€ƒéªŒç¼–ç¨‹èƒ½åŠ›ï¼Œä¹Ÿè€ƒéªŒä¸€äº›æŠ€å·§æ€§æ€è·¯\n\n## å¦‚ä½•åˆå§‹åŒ–ä¸€ä¸ªäºŒç»´æ•°ç»„\n```javascript\n/**\n * @description åˆå§‹åŒ–ä¸€ä¸ª 3* 5 çš„äºŒç»´æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯'.'\n * *\n */\nconst row = 3;\nconst col = 5;\nconst matrix = Array.from({length: row}, () => Array(col).fill('*'));\nconsole.log(array);\n\n\n\n// æˆ–è€…å¦‚ä¸‹\n\n// n*n\nlet matrix = new Array(n).fill().map(() => new Array(n).fill(0));\n// m*n\nlet matrix = new Array(m).fill().map(() => new Array(n).fill(0));\n\n```\n\n\n### å…³äº Array.fill çš„ç”¨æ³•\n\n```javascript\nfill(value)\nfill(value, start)\nfill(value, start, end)\n\næ¯”å¦‚ï¼š\nconsole.log([1, 2, 3].fill()); // [undefined, undefined, undefined]\n\nconst array1 = [1, 2, 3, 4];\n\n// Fill with 0 from position 2 until position 4\nconsole.log(array1.fill(0, 2, 4));\n// Expected output: Array [1, 2, 0, 0]\n\n// Fill with 5 from position 1\nconsole.log(array1.fill(5, 1));\n// Expected output: Array [1, 5, 5, 5]\n\nconsole.log(array1.fill(6));\n// Expected output: Array [6, 6, 6, 6]\n\n```\n\n## ç¬¬ 48 é¢˜ã€Œ æ—‹è½¬å›¾åƒã€\n[https://leetcode.cn/problems/rotate-image/](https://leetcode.cn/problems/rotate-image/)\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/4d0161a82c1385f3d0a19ae0f6d5d7a7.png)\nè¿™é‡Œè¦æ±‚åŸåœ°ï¼Œå‚è€ƒ [#`åŸåœ°`åè½¬æ‰€æœ‰å•è¯çš„é¡ºåº](/post/a96bf7626854547cbdc43299f79eb7bb.html#`åŸåœ°`åè½¬æ‰€æœ‰å•è¯çš„é¡ºåº) , æ‰€ä»¥ï¼Œè¿™é‡Œå¸¸è§„æ€è·¯æä¸å®šï¼Œå¾—æ¢ä¸€ç§æ€è·¯ï¼Œå¦‚ä¸‹å›¾ï¼š\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/e5e22046d222a014b97696f67742a6f3.png)\n[https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=147-180&t=sZSmw8G9XgtflSer-4](https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=147-180&t=sZSmw8G9XgtflSer-4)\n\n```javascript\nlet rotate = function (matrix) {\n    let n = matrix.length;\n    // å…ˆæ²¿ã€å¯¹è§’çº¿ã€‘é•œåƒå¯¹ç§°äºŒç»´çŸ©é˜µ\n    // :::: äº¤æ¢ matrix[i][j] å’Œ matrix[j][i]\n    for (let i = 0; i < n; i++) {\n        // ::::è¿™é‡Œ j=iï¼Œéå†ç¬¬ i è¡Œåï¼Œåªéœ€è¦äº¤æ¢å¯¹ç§°çº¿å³ä¸Šæ–¹çš„å…ƒç´ å³å¯\n        //  å¦‚æœ j ä» 0 å¼€å§‹ï¼Œä¼šæŠŠå¯¹ç§°çº¿å·¦ä¸‹æ–¹çš„å…ƒç´ ä¹Ÿäº¤æ¢äº†ï¼Œå³ç›¸å½“äºæ ¹æœ¬å°±æ²¡æœ‰äº¤äº’\n        for (let j = i ; j < n; j++) {\n            let temp = matrix[i][j];\n            matrix[i][j] = matrix[j][i];\n            matrix[j][i] = temp;\n        }\n    }\n    // ç„¶ååè½¬äºŒç»´çŸ©é˜µçš„ã€æ¯ä¸€è¡Œã€‘\n    for (let row of matrix) {\n        reverse(row);\n    }\n}\n\n/**\n * åŒæ ·ä½¿ç”¨åŒæŒ‡é’ˆæŠ€å·§å®ç°æ•°ç»„çš„ç¿»è½¬\n * */\nlet reverse = function (arr) {\n    let i = 0,\n        j = arr.length - 1;\n    while (j > i) {\n        let temp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = temp;\n        i++;\n        j--;\n    }\n}\n\n\nlet matrix = [1, 2, 3], [4, 5, 6], [7, 8, 9](/post/a96bf7626854547cbdc43299f79eb7bb.html#1,-2,-3],-[4,-5,-6],-[7,-8,-9);\nlet matrix2 = [5,1,9,11],[2,4,8,10],[13,3,6,7],[15,14,12,16](/post/a96bf7626854547cbdc43299f79eb7bb.html#5,1,9,11],[2,4,8,10],[13,3,6,7],[15,14,12,16)\n// åŸåœ°ä¿®æ”¹ä¸¤ä¸ªæ•°ç»„\nrotate(matrix);\nrotate(matrix2);\nconsole.log(matrix);\nconsole.log(matrix2);\n\n```\n\n> [!question]\næ³¨æ„ç‚¹ï¼šä¸ºä»€ä¹ˆäº¤æ¢ `matrix[i][j]` å’Œ `matrix[j][i]` æ—¶ï¼Œ`å†…å±‚å¾ªç¯`  ä» `j = i`  å¼€å§‹ï¼Ÿ \n\nä¸Šé¢çš„é—®é¢˜å¯ä»¥è§ä»£ç æ³¨é‡Šéƒ¨åˆ†ï¼Œå¦å¤–è¿™é‡Œè¡¥å……ä¸‹ï¼Œå…¶å®åªéœ€è¦éå†`çŸ©é˜µçš„å³ä¸Šè§’`çš„èŠ‚ç‚¹å³å¯ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/78b544d487864599f32230c85f8b5653.png)\n\n\n### å»¶ä¼¸ï¼šé€†æ—¶é’ˆå‘¢ï¼Ÿ\nåŒç†ï¼Œåˆ†ä¸ºä¸¤æ­¥éª¤ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n- `ã€å¯¹è§’çº¿ã€‘`å¦‚ä¸‹å›¾è¿›è¡Œæ—‹è½¬\n- æŒ‰ `æ¯è¡Œ`è¿›è¡Œç¿»è½¬å³å¯\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/38251901ae383aee191c67ff3215c5dd.png)\n\næ‰€ä»¥æ ¹æ®ä¸Šé¢çš„ä»£ç ï¼Œä¿®æ”¹å¦‚ä¸‹å³å¯ï¼š\n```javascript\nlet rotate = function (matrix) {\n    let n = matrix.length;\n    // å…ˆæ²¿ã€å¯¹è§’çº¿ã€‘é•œåƒå¯¹ç§°äºŒç»´çŸ©é˜µ\n    for (let i = 0; i < n; i++) {\n        //   é—®é¢˜ 1ï¼š è¿™é‡Œä¸ºä»€ä¹ˆæ˜¯ j < n-i  ?\n        //   é—®é¢˜ 2 ï¼š ä¸ºä»€ä¹ˆæ˜¯ matrix[n - j - 1][n - i - 1] ï¼Ÿ \n        for (let j = 0; j < n - i; j++) {\n            let temp = matrix[i][j];\n            matrix[i][j] = matrix[n - j - 1][n - i - 1];\n            matrix[n - j - 1][n - i - 1] = temp;\n        }\n    }\n\n    // ç„¶ååè½¬äºŒç»´çŸ©é˜µçš„ã€æ¯ä¸€è¡Œã€‘\n    for (let row of matrix) {\n        reverse(row);\n    }\n}\n\n/**\n * åŒæ ·ä½¿ç”¨åŒæŒ‡é’ˆæŠ€å·§å®ç°æ•°ç»„çš„ç¿»è½¬\n * */\nlet reverse = function (arr) {\n    let i = 0,\n        j = arr.length - 1;\n    while (j > i) {\n        let temp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = temp;\n        i++;\n        j--;\n    }\n}\n\n\nlet matrix = [1, 2, 3], [4, 5, 6], [7, 8, 9](/post/a96bf7626854547cbdc43299f79eb7bb.html#1,-2,-3],-[4,-5,-6],-[7,-8,-9);\nlet matrix2 = [5,1,9,11],[2,4,8,10],[13,3,6,7],[15,14,12,16](/post/a96bf7626854547cbdc43299f79eb7bb.html#5,1,9,11],[2,4,8,10],[13,3,6,7],[15,14,12,16)\n// åŸåœ°ä¿®æ”¹ä¸¤ä¸ªæ•°ç»„\nrotate(matrix);\nrotate(matrix2);\nconsole.log(matrix);\nconsole.log(matrix2);\n\n```\n\n\n#### é—®é¢˜ 1ï¼š è¿™é‡Œä¸ºä»€ä¹ˆæ˜¯ `j < n-i` ?\nåŒç†ï¼Œä¸»éœ€è¦éå†å·¦ä¸Šæ–¹çš„å…ƒç´ å³å¯ï¼Œå¦‚ä¸‹å›¾\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/5c79091c2e1c0d40a6753f3562be1baf.png)\n\n\n#### é—®é¢˜ 2ï¼šé—®é¢˜ 2 ï¼š ä¸ºä»€ä¹ˆæ˜¯ `matrix[n - j - 1][n - i - 1]`  ï¼Ÿ\nä»¥ `i = 0  j = 1` ä¸ºä¾‹ï¼Œ   `è¿™é‡Œ 2 = matrix[0][1]  å¯¹åº”ç€ æœ€ä¸‹æ–¹ 4 å³ä½ç½® matrix[2][3]`  ï¼Œå³  `matrix[n - j - 1][n - i - 1]` ï¼Œå¦‚ä¸‹å›¾ï¼š\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/83fbccd21fc08bfecf9349db5c1b0172.png)\n\n\n## ç¬¬ 151 é¢˜ã€Œ é¢ å€’å­—ç¬¦ä¸²ä¸­çš„å•è¯ã€\n[https://leetcode.cn/problems/reverse-words-in-a-string/submissions/](https://leetcode.cn/problems/reverse-words-in-a-string/submissions/)\n[https://leetcode.cn/problems/fan-zhuan-dan-ci-shun-xu-lcof/](https://leetcode.cn/problems/fan-zhuan-dan-ci-shun-xu-lcof/)\n\n### `åŸåœ°`åè½¬æ‰€æœ‰å•è¯çš„é¡ºåº\n```javascript\ns = \"hello world labuladong\"\n// ä½ çš„ç®—æ³•éœ€è¦åŸåœ°åè½¬è¿™ä¸ªå­—ç¬¦ä¸²ä¸­çš„å•è¯é¡ºåº,å¦‚ä¸‹ï¼š\ns = \"labuladong world hello\"\n```\nå¸¸è§„çš„åšæ³•è‚¯å®šæä¸å®šï¼Œæ¯”å¦‚ `split(â€˜ â€™)` æˆæ•°ç»„ï¼Œç„¶å `reverse` åå† `join`, å®ƒä½¿ç”¨äº†é¢å¤–çš„ç©ºé—´ï¼Œ`éåŸåœ°` , æ­£ç¡®çš„æ€è·¯å¦‚ä¸‹ï¼š\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/a449923b54462a1f483662d7e0307f77.png)\næ˜¯å¦èƒ½å¤Ÿå®ç°åŸåœ°ï¼Œä¸»è¦çš„å·®åˆ«æ˜¯æœ‰äº›è¯­è¨€çš„`å­—ç¬¦ä¸²ä¸å¯å˜`ï¼ˆå¦‚ Java å’Œ Pythonã€`JavaScript` )ï¼Œæœ‰äº›è¯­è¨€çš„`å­—ç¬¦ä¸²å¯å˜`ï¼ˆå¦‚ C++) ï¼Œå¦‚ä¸‹å›¾ï¼š\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/4daff65b60b2e2646a5d50249575c0ed.png)\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/d13fa9892c9afb82460184b95475fc36.png)\næ‰€ä»¥ï¼Œè¿˜æ˜¯éœ€è¦å€ŸåŠ©é¢å¤–çš„ç©ºé—´ï¼Œä»¥ä¸‹æ˜¯å…¶ä¸­ä¸€ç§è§£æ³•ï¼Œå½“ç„¶å®ƒä¸æ˜¯åŸåœ°çš„\n```javascript\nlet s1 = \"hello   world    labuladong  \";\n\n/**\n * å»é™¤å¤šä½™ç©ºæ ¼\n * */\nfunction removeSpace(s1) {\n    return s1.trim().replace(/\\s+/g,' ');\n}\n\n/**\n * ä½¿ç”¨åŒæŒ‡é’ˆæŠ€å·§å®ç°å­—ç¬¦ä¸²çš„ç¿»è½¬\n * */\nfunction reverseString(str) {\n    let left = 0;  // å·¦æŒ‡é’ˆ\n    let right = str.length - 1;  // å³æŒ‡é’ˆ\n    let arr = removeSpace(str).split('');  // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„\n    while (left < right) {\n        // äº¤æ¢å·¦å³æŒ‡é’ˆæŒ‡å‘çš„å­—ç¬¦\n        const temp = arr[left];\n        arr[left] = arr[right];\n        arr[right] = temp;\n        // ç§»åŠ¨æŒ‡é’ˆ\n        left++;\n        right--;\n    }\n    return arr.join('');  // å°†å­—ç¬¦æ•°ç»„è½¬æ¢å›å­—ç¬¦ä¸²\n}\nconsole.log(reverseString(s1)); // gnodulab dlrow olleh\n\n\n/**\n * @param {string} s\n * @return {string}\n */\nvar reverseWords = function(s) {\n    const newStr = reverseString(s);\n    const arr = newStr.split(' ');\n    const res = [];\n    for (let i = 0; i < arr.length; i++) {\n        res.push(reverseString(arr[i]));\n    }\n    return res.join(' ');\n};\n\nconsole.log(reverseWords(s1)); // labuladong world hello\n\n```\n\n\n### é”™è¯¯æ—¥å¿—\nå› ä¸ºé«˜äº®äº†å§ï¼Œæ­£åˆ™ç«Ÿç„¶åŠ äº†ä¸€ä¸ª`''` \n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/6b83a36798533f50597fb8d739149975.png)\n\n\n### å¤æ‚åº¦åˆ†æ\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/6722480a16c8d523ba166e6eda60cdab.png)\n\n### é‚£ä¹ˆjs ç‰ˆæœ¬çš„åŸåœ°ç®—æ³•å‘¢ï¼Ÿ\nTODO \n\n\n\n## ç¬¬ 54 é¢˜ã€Œ èºæ—‹çŸ©é˜µã€\n[https://leetcode.cn/problems/spiral-matrix/](https://leetcode.cn/problems/spiral-matrix/)\næ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 54 é¢˜ç›¸åŒï¼š [https://leetcode-cn.com/problems/spiral-matrix/](https://leetcode-cn.com/problems/spiral-matrix/)\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/41214baa7400a69c0456e10418deac3b.png)\nåˆ†æï¼Œå¦‚`fj`\n[https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=151-215&t=ONxyxYCCotSe5XMX-4](https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=151-215&t=ONxyxYCCotSe5XMX-4) \n\n> [!info]\n ä¸Šå›¾ä¸­ï¼Œå…¶å®æŒ‰ç…§åºå·åŠå›¾ç¤ºéå†å³å¯ï¼Œæ¯ä¸ªå˜é‡åº”è¯¥å¦‚ä½•éå†ï¼Œæ˜¯ `++` è¿˜æ˜¯ `--` ï¼Œä¸Šå›¾ä¸­éƒ½æœ‰æ ‡æ³¨ï¼Œæ‰€ä»¥æŠŠä¸Šé¢çš„æ€è·¯ç¿»è¯‘æˆä»£ç å³å¯\n\nä»¥ä¸‹æ˜¯==ä»£ç ==éƒ¨åˆ†ï¼š\n```javascript\nlet spiralOrder = function (matrix) {\n    let m = matrix.length, n = matrix[0].length;\n    let top = 0, bottom = m - 1;\n    let left = 0, right = n - 1;\n    let res = [];\n    // res.length == m * n åˆ™éå†å®Œæ•´ä¸ªæ•°ç»„\n    while (res.length < m * n) {\n        if (top <= bottom) {\n            // åœ¨é¡¶éƒ¨ä»å·¦å‘å³éå†\n            for (let j = left; j <= right; j++) {\n                res.push(matrix[top][j]);\n            }\n            // ä¸Šè¾¹ç•Œä¸‹ç§»\n            top++;\n        }\n        if (left <= right) {\n            // åœ¨å³ä¾§ä»ä¸Šå‘ä¸‹éå†\n            for (let i = top; i <= bottom; i++) {\n                res.push(matrix[i][right]);\n            }\n            // å³è¾¹ç•Œå·¦ç§»\n            right--;\n        }\n        if (top <= bottom) {\n            // åœ¨åº•éƒ¨ä»å³å‘å·¦éå†\n            for (let j = right; j >= left; j--) {\n                res.push(matrix[bottom][j]);\n            }\n            // ä¸‹è¾¹ç•Œä¸Šç§»\n            bottom--;\n        }\n        if (left <= right) {\n            // åœ¨å·¦ä¾§ä»ä¸‹å‘ä¸Šéå†\n            for (let i = bottom; i >= top; i--) {\n                res.push(matrix[i][left]);\n            }\n            // å·¦è¾¹ç•Œå³ç§»\n            left++;\n        }\n    }\n    return res;\n};\n\n```\n\n## ç¬¬ 59 é¢˜ã€Œ èºæ—‹çŸ©é˜µ IIã€\n[https://leetcode.cn/problems/spiral-matrix/submissions/](https://leetcode.cn/problems/spiral-matrix/submissions/)\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/97b95ae85185a62c14542dd767684e44.png)\n\n\n## æœ€åæ€»ç»“\n\n- æ³¨æ„å¦‚ä½•åˆå§‹åŒ–ä¸€ä¸ª`äºŒç»´æ•°ç»„`ï¼Œå¸¸ç”¨ä¸¤ç§æ–¹å¼\n- æ— è®ºé¡ºæ—¶é’ˆè¿˜æ˜¯é€†æ—¶é’ˆï¼ŒæŒ‰å¯¹è§’çº¿æ—‹è½¬ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œä¸¤ä¸ªæ­¥éª¤\n   - è®°å¾—æŒ‰å¯¹è§’çº¿ `äº¤æ¢å…ƒç´ `\n   - ç„¶åæŒ‰ç…§`åˆ—`ç¿»è½¬\n- é¡ºæ—¶é’ˆæˆ–é€†æ—¶é’ˆ æ‰“å°äºŒç»´æ•°ç»„ï¼Œ**è®°å¾—ç”»å›¾**ï¼Œæ›´æ–°å››ä¸ªå˜é‡å³å¯\n\n\n## å‚è€ƒ\n[https://labuladong.github.io/algo/di-yi-zhan-da78c/shou-ba-sh-48c1d/er-wei-shu-150fb/](https://labuladong.github.io/algo/di-yi-zhan-da78c/shou-ba-sh-48c1d/er-wei-shu-150fb/)\n","db637944b237599db339d1e2d7a443a3":"\n# LeetCode çƒ­é¢˜ 100 é¢˜\n\n`#leetcode` \n\n> LeetCode çƒ­é¢˜ 100 é¢˜ï¼š[https://leetcode.cn/studyplan/top-100-liked/](https://leetcode.cn/studyplan/top-100-liked/)\n\n","0007c0e827bb5aa2b1e767b06ad1c5e9":"\n# LeetCode ç²¾å 75 é¢˜\n\n`#leetcode` \n\n>  LeetCode ç²¾å 75 é¢˜ï¼š[https://leetcode.cn/studyplan/leetcode-75/](https://leetcode.cn/studyplan/leetcode-75/)\n\n","9c505ea354c457b5bbf848e979831f0c":"\n# LeetCode ç»å…¸ 150 é¢˜\n\n`#leetcode` \n\n> LeetCode ç»å…¸ 150 é¢˜ï¼š[https://leetcode.cn/studyplan/top-interview-150/](https://leetcode.cn/studyplan/top-interview-150/)\n\n","40f86fdb84db59a2b33753bd6cc46db7":"\n# å…¶ä»–ç®—æ³•æŠ€å·§æ€»ç»“\n\n\n\n\n- ä»£ç åˆ†å±‚\n\t- åº”è¯¥ç®—æ˜¯ä¸€ç§æ¯”è¾ƒå¥½çš„ä¹ æƒ¯å¯ä»¥å¢åŠ å†™ä»£ç çš„é€Ÿåº¦å’Œé™ä½è°ƒè¯•çš„éš¾åº¦ã€‚\n\t- è‡³å°‘èƒ½å¤ŸæŠŠé—®é¢˜åˆ†è§£åˆ°ä¸åŒçš„åœ°æ–¹ï¼Œè€Œä¸æ˜¯ä¸€æŠŠæ¢­ï¼Œä¸ç„¶å‡ºé—®é¢˜å¾ˆéš¾å®šä½é—®é¢˜çš„\n- é€’å½’å‡½æ•°æœ€å¥½ä»ä¸€ä¸ªå…¨å±€çš„è§’åº¦ç†è§£ï¼Œè€Œä¸è¦è·³è¿›å…·ä½“çš„ç»†èŠ‚ã€‚\n\t- ä¸ä¸€å®šè¦debug ,ç”šè‡³é…åˆæ‰“å°ç©ºæ ¼ç¼©è¿›å¯ä»¥ç›´æ¥åœ¨æ§åˆ¶å°æ‰“å‡ºæ ‘ç»“æ„\n- è€ƒå‰å°±åˆ«å’ŒæŸä¸€é“ç®—æ³•é¢˜æ­»ç£•äº†ï¼Œä¸åˆ’ç®—\n\t- åº”è¯¥å°½å¯èƒ½å¤šçš„çœ‹å„ç§å„æ ·çš„é¢˜ç›®ï¼Œæ€è€ƒäº”åˆ†é’Ÿï¼Œæƒ³ä¸å‡ºæ¥è§£æ³•çš„è¯ç›´æ¥çœ‹åˆ«äººçš„ç­”æ¡ˆã€‚çœ‹æ‡‚æ€è·¯å°±è¡Œäº†ï¼Œç”šè‡³è‡ªå·±å†™ä¸€ééƒ½æ²¡å¿…è¦ï¼Œå› ä¸ºæ¯”è¾ƒæµªè´¹æ—¶é—´\n\n\n## ç›®å½•\n<!-- toc -->\n ## å‚è€ƒ \n\n > labuladong ç®—æ³•çš„åˆ·é¢˜ç¬”è®°ï¼š[labuladong çš„ç®—æ³•ç¬”è®°](https://labuladong.online/algo/)\n\n","c8fe0957d9f156d6895cc22f78185514":"\n# åˆ·é¢˜ç¯‡\n\n\n`#leetcode` \n\n- LeetCode ç²¾å 75 é¢˜ï¼š[https://leetcode.cn/studyplan/leetcode-75/](https://leetcode.cn/studyplan/leetcode-75/)\n- LeetCode ç»å…¸ 150 é¢˜ï¼š[https://leetcode.cn/studyplan/top-interview-150/](https://leetcode.cn/studyplan/top-interview-150/)\n- LeetCode çƒ­é¢˜ 100 é¢˜ï¼š[https://leetcode.cn/studyplan/top-100-liked/](https://leetcode.cn/studyplan/top-100-liked/)\n- labuladong ç®—æ³•åˆ·é¢˜ï¼š[labuladong çš„ç®—æ³•ç¬”è®°](https://labuladong.online/algo/)\n\n ","1def329a9eea572f9be917b4ba46bb9c":"\n# ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV\n\n\n`#leetcode`   `#2024/08/10` `#ç®—æ³•/åŠ¨æ€è§„åˆ’` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240810100713.png)\n\nè¿™é¢˜æ˜¯è‚¡ç¥¨ä¹°å–æœ€é€šç”¨çš„ä¸€é¢˜ï¼Œå¯ä»¥ä»¥ä»–åŸºå‡†è§£å†³å…¶ä»–è‚¡ç¥¨ç›¸å…³çš„é—®é¢˜ï¼Œå¦‚ä¸‹å›¾\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240810101116.png)\n\n- ç¬¬ä¸€é¢˜æ˜¯åªè¿›è¡Œä¸€æ¬¡äº¤æ˜“ï¼Œç›¸å½“äºÂ `k = 1`ï¼›\n- ç¬¬äºŒé¢˜æ˜¯ä¸é™äº¤æ˜“æ¬¡æ•°ï¼Œç›¸å½“äºÂ `k = +infinity`ï¼ˆæ­£æ— ç©·ï¼‰ï¼›\n- ç¬¬ä¸‰é¢˜æ˜¯åªè¿›è¡Œ 2 æ¬¡äº¤æ˜“ï¼Œç›¸å½“äºÂ `k = 2`ï¼›\n- å‰©ä¸‹ä¸¤é“ä¹Ÿæ˜¯ä¸é™æ¬¡æ•°ï¼Œä½†æ˜¯åŠ äº†äº¤æ˜“ã€Œå†·å†»æœŸã€å’Œã€Œæ‰‹ç»­è´¹ã€çš„é¢å¤–æ¡ä»¶ï¼Œå…¶å®å°±æ˜¯ç¬¬äºŒé¢˜çš„å˜ç§ï¼Œéƒ½å¾ˆå®¹æ˜“å¤„ç†\n\n## è§£é¢˜æ€è·¯\n\n### æ€è·¯ä¸€ï¼šåŠ¨æ€è§„åˆ’\n\n#### æ¡†æ¶ï¼šæ˜ç¡®çŠ¶æ€å’Œé€‰æ‹©\n\n```javascript\nfor çŠ¶æ€1 in çŠ¶æ€1çš„æ‰€æœ‰å–å€¼ï¼š\n    for çŠ¶æ€2 in çŠ¶æ€2çš„æ‰€æœ‰å–å€¼ï¼š\n        for ...\n            dp[çŠ¶æ€1][çŠ¶æ€2][...] = æ‹©ä¼˜(é€‰æ‹©1ï¼Œé€‰æ‹©2...)\n```\n\n- é€‰æ‹©ï¼šæ¯å¤©éƒ½æœ‰ä¸‰ç§é€‰æ‹©ï¼šä¹°å…¥ã€å–å‡ºã€æ— æ“ä½œ\n\t- ç”¨Â `buy`,Â `sell`,Â `rest`Â è¡¨ç¤ºè¿™ä¸‰ç§é€‰æ‹©ã€‚\n- çŠ¶æ€ï¼š**è¿™ä¸ªé—®é¢˜çš„ã€ŒçŠ¶æ€ã€æœ‰ä¸‰ä¸ª**ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨`ä¸‰ç»´æ•°ç»„`æ¥ç»„è£…ä¸‹æ‰€æœ‰ç»„åˆ\n\t- â‘  ç¬¬ä¸€ä¸ªæ˜¯`å¤©æ•°`\n\t- â‘¡ ç¬¬äºŒä¸ªæ˜¯`å…è®¸äº¤æ˜“çš„æœ€å¤§æ¬¡æ•°`\n\t- â‘¢ ç¬¬ä¸‰ä¸ªæ˜¯`å½“å‰çš„æŒæœ‰çŠ¶æ€`\n\t\t- å³ä¹‹å‰è¯´çš„Â `rest`Â çš„çŠ¶æ€\n\t\t\t- ç”¨ `1` è¡¨ç¤º`æŒæœ‰`\n\t\t\t- `0` è¡¨ç¤º`æ²¡æœ‰æŒæœ‰`\n\nå†çœ‹æœ€æ–°çš„æ¡†æ¶\n\n```javascript\ndp[i][k][0 or 1]\n\nâ‘  i:  0 <= i <= n - 1 ï¼Œ n è¡¨ç¤º `å¤©æ•°`\nâ‘¡ k:  1 <= k <= K ï¼ŒK è¡¨ç¤º`å…è®¸äº¤æ˜“çš„æœ€å¤§æ¬¡æ•°`\nâ‘¢ 0 or  1 ï¼š ä»£è¡¨`å½“å‰çš„æŒæœ‰çŠ¶æ€` ï¼Œ 0 å’Œ 1 ä»£è¡¨æ˜¯å¦æŒæœ‰è‚¡ç¥¨ã€‚\n\næ‰€ä»¥ æ­¤é—®é¢˜å…± n Ã— K Ã— 2 ç§çŠ¶æ€ï¼Œå…¨éƒ¨ç©·ä¸¾å°±èƒ½æå®šã€‚\n\nfor 0 <= i < n:\n    for 1 <= k <= K:\n        for s in {0, 1}:\n            dp[i][k][s] = max(buy, sell, rest)\n```\n\nä¸¾ä¾‹ï¼š\n\n Â - `dp[3][2][1]`Â çš„å«ä¹‰å°±æ˜¯ï¼šä»Šå¤©æ˜¯ç¬¬ä¸‰å¤©ï¼Œæˆ‘ç°åœ¨æ‰‹ä¸ŠæŒæœ‰ç€è‚¡ç¥¨ï¼Œè‡³ä»Šæœ€å¤šè¿˜å¯ä»¥è¿›è¡Œ 2 æ¬¡äº¤æ˜“ã€‚\n Â - Â `dp[2][3][0]`Â çš„å«ä¹‰ï¼šä»Šå¤©æ˜¯ç¬¬äºŒå¤©ï¼Œæˆ‘ç°åœ¨æ‰‹ä¸Šæ²¡æœ‰æŒæœ‰è‚¡ç¥¨ï¼Œè‡³ä»Šæœ€å¤šè¿˜å¯ä»¥è¿›è¡Œ 3 æ¬¡äº¤æ˜“\n\næˆ‘ä»¬æƒ³æ±‚çš„**æœ€ç»ˆç­”æ¡ˆ**æ˜¯Â `dp[n - 1][K][0]`ï¼Œå³æœ€åä¸€å¤©ï¼Œæœ€å¤šå…è®¸Â `K`Â æ¬¡äº¤æ˜“ï¼Œæœ€å¤šè·å¾—å¤šå°‘åˆ©æ¶¦ã€‚\n\nè¯»è€…å¯èƒ½é—®ä¸ºä»€ä¹ˆä¸æ˜¯Â `dp[n - 1][K][1]`ï¼Ÿ\n\n- å› ä¸ºÂ `dp[n - 1][K][1]`Â ä»£è¡¨åˆ°æœ€åä¸€å¤©æ‰‹ä¸Šè¿˜æŒæœ‰è‚¡ç¥¨\n- `dp[n - 1][K][0]`Â è¡¨ç¤ºæœ€åä¸€å¤©æ‰‹ä¸Šçš„è‚¡ç¥¨å·²ç»å–å‡ºå»äº†\n- å¾ˆæ˜¾ç„¶åè€…å¾—åˆ°çš„åˆ©æ¶¦ä¸€å®šå¤§äºå‰è€…\n\n#### çŠ¶æ€è½¬ç§»æ¡†æ¶\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240810103019.png)\n\n##### ä»Šå¤©æ²¡æœ‰æŒæœ‰è‚¡ç¥¨ï¼š `dp[i][k][0]`\n\n1. æ˜¨å¤©æ²¡æœ‰æŒæœ‰ï¼Œä»Šå¤©é€‰æ‹©ä¸ä¹°ï¼Œ`k` ä¸ä¼šå˜\n2. æ˜¨å¤©æŒæœ‰ï¼Œä»Šå¤©é€‰æ‹©å–æ‰ï¼Œ`k` ä¸ä¼šå˜\n\n```javascript\n// ä»Šå¤©æˆ‘æ²¡æœ‰æŒæœ‰è‚¡ç¥¨ï¼Œæœ‰ä¸¤ç§å¯èƒ½ï¼Œæˆ‘ä»è¿™ä¸¤ç§å¯èƒ½ä¸­æ±‚æœ€å¤§åˆ©æ¶¦,å¦‚ä¸‹ä»£ç ï¼š\n\ndp[i][k][0] = max( â‘  dp[i-1][k][0],           â‘¡ dp[i-1][k][1] + prices[i]  ) \n            = max( â‘  æ˜¨å¤©æ²¡æœ‰æŒæœ‰ï¼Œä»Šå¤©é€‰æ‹©ä¸ä¹°   â‘¡ æ˜¨å¤©æŒæœ‰ï¼Œä»Šå¤©é€‰æ‹©å–æ‰ sell    )\n```\n\nâ‘   `dp[i-1][k][0]` ï¼Œå³æˆ‘æ˜¨å¤©å°±æ²¡æœ‰æŒæœ‰ï¼Œä¸”æˆªè‡³æ˜¨å¤©æœ€å¤§äº¤æ˜“æ¬¡æ•°é™åˆ¶ä¸ºÂ `k`ï¼›ç„¶åæˆ‘ä»Šå¤©é€‰æ‹©Â `rest`ï¼Œæ‰€ä»¥æˆ‘ä»Šå¤©è¿˜æ˜¯æ²¡æœ‰æŒæœ‰ï¼Œæœ€å¤§äº¤æ˜“æ¬¡æ•°é™åˆ¶ä¾ç„¶ä¸ºÂ `k`\n\nâ‘¡  `dp[i-1][k][1] + prices[i]` ï¼Œæˆ‘æ˜¨å¤©æŒæœ‰è‚¡ç¥¨ï¼Œä¸”æˆªè‡³æ˜¨å¤©æœ€å¤§äº¤æ˜“æ¬¡æ•°é™åˆ¶ä¸ºÂ `k`ï¼›ä½†æ˜¯ä»Šå¤©æˆ‘Â `sell`Â äº†ï¼Œæ‰€ä»¥æˆ‘ä»Šå¤©æ²¡æœ‰æŒæœ‰è‚¡ç¥¨äº†ï¼Œæœ€å¤§äº¤æ˜“æ¬¡æ•°é™åˆ¶ä¾ç„¶ä¸ºÂ `k`\n\n##### ä»Šå¤©æŒæœ‰è‚¡ç¥¨ï¼š `dp[i][k][1]`\n\n- æ˜¨å¤©æŒæœ‰ï¼Œä»Šå¤©è¿˜æ˜¯ç»§ç»­æŒæœ‰ï¼Œ`k` ä¸å˜\n- æ˜¨å¤©æ²¡æœ‰æŒæœ‰ï¼Œä»Šå¤©é€‰æ‹©ä¹°ï¼Œ`k` ä» `k-1` è€Œæ¥\n\n```javascript\ndp[i][k][1] = max( â‘  dp[i-1][k][1],             â‘¡ dp[i-1][k-1][0] - prices[i] )\n              max( â‘  æ˜¨å¤©æŒæœ‰ï¼Œä»Šå¤©è¿˜æ˜¯ç»§ç»­æŒæœ‰,    â‘¡ æ˜¨å¤©æ²¡æœ‰æŒæœ‰ï¼Œä»Šå¤©é€‰æ‹©ä¹°        )\n```\n\nâ‘  `dp[i-1][k][1]` ï¼Œæˆ‘æ˜¨å¤©å°±æŒæœ‰ç€è‚¡ç¥¨ï¼Œä¸”æˆªè‡³æ˜¨å¤©æœ€å¤§äº¤æ˜“æ¬¡æ•°é™åˆ¶ä¸ºÂ `k`ï¼›ç„¶åä»Šå¤©é€‰æ‹©Â `rest`ï¼Œæ‰€ä»¥æˆ‘ä»Šå¤©è¿˜æŒæœ‰ç€è‚¡ç¥¨ï¼Œæœ€å¤§äº¤æ˜“æ¬¡æ•°é™åˆ¶ä¾ç„¶ä¸ºÂ `k`ã€‚\n\nâ‘¡ `dp[i-1][k-1][0] - prices[i]` æˆ‘æ˜¨å¤©æœ¬æ²¡æœ‰æŒæœ‰ï¼Œä¸”æˆªè‡³æ˜¨å¤©æœ€å¤§äº¤æ˜“æ¬¡æ•°é™åˆ¶ä¸ºÂ `k - 1`ï¼›ä½†ä»Šå¤©æˆ‘é€‰æ‹©Â `buy`ï¼Œæ‰€ä»¥ä»Šå¤©æˆ‘å°±æŒæœ‰è‚¡ç¥¨äº†ï¼Œæœ€å¤§äº¤æ˜“æ¬¡æ•°é™åˆ¶ä¸ºÂ `k`ã€‚\n\n##### æ³¨æ„ç‚¹\n\n- å¦‚æœÂ `buy`ï¼Œå°±è¦ä»åˆ©æ¶¦ä¸­å‡å»Â `prices[i]`\n- å¦‚æœÂ `sell`ï¼Œå°±è¦ç»™åˆ©æ¶¦å¢åŠ Â `prices[i]`ã€‚\n- ä»Šå¤©çš„æœ€å¤§åˆ©æ¶¦å°±æ˜¯è¿™ä¸¤ç§å¯èƒ½é€‰æ‹©ä¸­è¾ƒå¤§çš„é‚£ä¸ªã€‚\n- æ³¨æ„Â `k`Â çš„é™åˆ¶ï¼Œåœ¨é€‰æ‹©Â `buy`Â çš„æ—¶å€™ç›¸å½“äºå¼€å¯äº†ä¸€æ¬¡äº¤æ˜“ï¼Œé‚£ä¹ˆå¯¹äºæ˜¨å¤©æ¥è¯´ï¼Œäº¤æ˜“æ¬¡æ•°çš„ä¸Šé™Â `k`Â åº”è¯¥å‡å° 1ã€‚\n\n##### base case\n\n```javascript\ndp[-1][0 ~ k][0] = 0\nè§£é‡Šï¼šå› ä¸º i æ˜¯ä» 0 å¼€å§‹çš„ï¼Œæ‰€ä»¥ i = -1 æ„å‘³ç€è¿˜æ²¡æœ‰å¼€å§‹ï¼Œè¿™æ—¶å€™çš„åˆ©æ¶¦å½“ç„¶æ˜¯ 0ã€‚\n\ndp[-1][0 ~ k][1] = -infinity\nè§£é‡Šï¼šè¿˜æ²¡å¼€å§‹çš„æ—¶å€™ï¼Œæ˜¯ä¸å¯èƒ½æŒæœ‰è‚¡ç¥¨çš„ã€‚\nå› ä¸ºæˆ‘ä»¬çš„ç®—æ³•è¦æ±‚ä¸€ä¸ªæœ€å¤§å€¼ï¼Œæ‰€ä»¥åˆå§‹å€¼è®¾ä¸ºä¸€ä¸ªæœ€å°å€¼ï¼Œæ–¹ä¾¿å–æœ€å¤§å€¼ã€‚\n\ndp[...][0][0] = 0\nè§£é‡Šï¼šå› ä¸º k æ˜¯ä» 1 å¼€å§‹çš„ï¼Œæ‰€ä»¥ k = 0 æ„å‘³ç€æ ¹æœ¬ä¸å…è®¸äº¤æ˜“ï¼Œè¿™æ—¶å€™åˆ©æ¶¦å½“ç„¶æ˜¯ 0ã€‚\n\ndp[...][0][1] = -infinity\nè§£é‡Šï¼šä¸å…è®¸äº¤æ˜“çš„æƒ…å†µä¸‹ï¼Œæ˜¯ä¸å¯èƒ½æŒæœ‰è‚¡ç¥¨çš„ã€‚\nå› ä¸ºæˆ‘ä»¬çš„ç®—æ³•è¦æ±‚ä¸€ä¸ªæœ€å¤§å€¼ï¼Œæ‰€ä»¥åˆå§‹å€¼è®¾ä¸ºä¸€ä¸ªæœ€å°å€¼ï¼Œæ–¹ä¾¿å–æœ€å¤§å€¼ã€‚\n```\n\n##### æœ€åæ€»ç»“\n\n```javascript\nbase caseï¼š\ndp[-1][...][0] = dp[...][0][0] = 0\ndp[-1][...][1] = dp[...][0][1] = -infinity\n\nçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š\ndp[i][k][0] = max(dp[i-1][k][0], dp[i-1][k][1] + prices[i])\ndp[i][k][1] = max(dp[i-1][k][1], dp[i-1][k-1][0] - prices[i])\n```\n\n#### ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number} k\n * @param {number[]} prices\n * @return {number}\n */\nvar maxProfit = function (k, prices) {\n  let n = prices.length;\n  // åˆ©æ¶¦\n  let res = 0;\n  // å¦‚æœ n ä¸º 0ï¼Œè¿”å› 0, æ— éœ€äº¤æ˜“ï¼Œåˆ©æ¶¦ä¸º 0\n  // å¦‚æœ k ä¸º 0ï¼Œè¿”å› 0, æ— æ³•äº¤æ˜“ï¼Œåˆ©æ¶¦ä¸º 0\n  if (n === 0 || k === 0) {\n    return 0;\n  }\n\n  // åˆå§‹åŒ– dp æ•°ç»„ï¼Œä¸‰ç»´æ•°ç»„\n  // dp[i][k][0/1] è¡¨ç¤ºç¬¬ i å¤©ï¼Œæœ€å¤šè¿›è¡Œ k æ¬¡äº¤æ˜“ï¼ŒæŒæœ‰/ä¸æŒæœ‰è‚¡ç¥¨æ—¶çš„åˆ©æ¶¦\n  let dp = [];\n  for (let i = 0; i < n; i++) {\n    dp[i] = [];\n    for (let j = 0; j <= k; j++) {\n      dp[i][j] = [];\n      for (let l = 0; l < 2; l++) {\n        dp[i][j][l] = 0;\n      }\n    }\n  }\n\n  // base case 1\n  // å¦‚æœ k ä¸º 0 , ä¸”æ²¡æœ‰è‚¡ç¥¨ï¼Œåˆ©æ¶¦ä¸º 0\n  // å¦‚æœ k ä¸º 0, ä¸”æœ‰è‚¡ç¥¨ï¼Œåˆ©æ¶¦ä¸º -Infinityï¼Œç”¨äºè¡¨ç¤ºä¸å¯èƒ½çš„æƒ…å†µï¼Œæ–¹ä¾¿åç»­å–æœ€å¤§å€¼\n  for (let i = 0; i < n; i++) {\n    dp[i][0][0] = 0;\n    dp[i][0][1] = -Infinity;\n  }\n\n  // éå† prices\n  for (let i = 0; i < n; i++) {\n    for (let j = 1; j <= k; j++) {\n      // base case, i ä¸º -1 æ—¶ï¼Œè¶Šç•Œ\n      if (i === 0) {\n        dp[i][j][0] = 0;\n        dp[i][j][1] = -prices[i];\n        continue;\n      }\n      dp[i][j][0] = Math.max(dp[i - 1][j][0], dp[i - 1][j][1] + prices[i]);\n      dp[i][j][1] = Math.max(dp[i - 1][j][1], dp[i - 1][j - 1][0] - prices[i]);\n    }\n  }\n\n  res = Math.max(dp[n - 1][k][0], dp[n - 1][k][1]);\n\n  // è¿”å›æœ€å¤§åˆ©æ¶¦\n  return res;\n};\n\n```\n\n#### å¤æ‚åº¦åˆ†æ\n\n1. æ—¶é—´å¤æ‚åº¦ï¼š`O(n * k)`\n    - æˆ‘ä»¬æœ‰ä¸¤ä¸ªä¸»è¦çš„åµŒå¥—å¾ªç¯ï¼š\n        - å¤–å±‚å¾ªç¯éå† `prices` æ•°ç»„ï¼Œå…± `n` æ¬¡ï¼›\n        - å†…å±‚å¾ªç¯éå† `k` æ¬¡äº¤æ˜“ã€‚\n    - åœ¨æ¯æ¬¡å¾ªç¯ä¸­ï¼Œæˆ‘ä»¬è¿›è¡Œå¸¸æ•°æ¬¡æ“ä½œï¼ˆæ¯”è¾ƒå’Œèµ‹å€¼ï¼‰ã€‚\n    - å› æ­¤ï¼Œæ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n * k)`ã€‚\n2. ç©ºé—´å¤æ‚åº¦ï¼š`O(n * k)`\n    - æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªä¸‰ç»´æ•°ç»„ dpï¼Œå…¶å¤§å°ä¸º `n * (k+1) * 2`ã€‚\n    - è™½ç„¶æœ€åä¸€ä¸ªç»´åº¦æ˜¯`å¸¸æ•°ï¼ˆ2`ï¼‰ï¼Œä½†åœ¨å¤§ O è¡¨ç¤ºæ³•ä¸­æˆ‘ä»¬é€šå¸¸å¿½ç•¥å¸¸æ•°å› å­ã€‚\n    - å› æ­¤ï¼Œç©ºé—´å¤æ‚åº¦ä¸º `O(n * k)`\n\n### æ€è·¯äºŒ\n\n#### ä»£ç å®ç°\n\n#### å¤æ‚åº¦åˆ†æ\n\n## é”™è¯¯è®°å½•ä¸€\n\néœ€è¦ç§»é™¤äº†Â `dp[-1]`Â çš„åˆå§‹åŒ–ï¼Œå› ä¸ºè¿™åœ¨ JavaScript ä¸­æ˜¯æ— æ•ˆçš„ï¼Œåœ¨éå†æ—¶ç‰¹æ®Šå¤„ç†å§ï¼Œå¦‚ä¸‹å›¾\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240810114525.png)\n\n## é”™è¯¯è®°å½•äºŒ\n\nåˆå§‹åŒ–ä¸€ä¸ª`äºŒç»´æ•°ç»„`æˆ–è€…`ä¸‰ç»´æ•°ç»„`ï¼Œåˆ«ä½¿ç”¨ `Array.form({lenght:n})` ä¹‹ç±»çš„äº†ï¼Œä½¿ç”¨ä¸‹é¢ä»£ç è‚¯å®šä¸ä¼šå‡ºé—®é¢˜\n\n```javascript\n  // åˆå§‹åŒ– dp æ•°ç»„ï¼Œä¸‰ç»´æ•°ç»„\n  // dp[i][k][0/1] è¡¨ç¤ºç¬¬ i å¤©ï¼Œæœ€å¤šè¿›è¡Œ k æ¬¡äº¤æ˜“ï¼ŒæŒæœ‰/ä¸æŒæœ‰è‚¡ç¥¨æ—¶çš„åˆ©æ¶¦\n  let dp = [];\n  for (let i = 0; i < n; i++) {\n    dp[i] = [];\n    for (let j = 0; j <= k; j++) {\n      dp[i][j] = [];\n      for (let l = 0; l < 2; l++) {\n        dp[i][j][l] = 0;\n      }\n    }\n  }\n```\n\n","e6838ffb9d705b299ebb23a3fb9bcbbf":"\n# ä¸¤æ•°ä¹‹å’Œ\n\n\n`#ç®—æ³•/å“ˆå¸Œ` `#leetcode`  `#2024/07/28` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›® \n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407281617385.png?imageSlim)\n\n### é¢˜ç›®é‡ç‚¹\n\n- è¿”å›ä¸‹æ ‡\n- å¤æ‚åº¦å°äº `O(n^2)` \n- å¯èƒ½ä¼šé‡å¤ï¼Œæ¯”å¦‚`[3,3]` \n\n## æ€è·¯\n\n- æ€è·¯ä¸€ï¼šæ’åºæ€è·¯ï¼Œæ•°ç»„æ’åºååŒæŒ‡é’ˆä¼šæ›´å¥½ï¼Œä½†ä¼šç ´ååŸæ•°ç»„ç´¢å¼•ï¼Œé¢˜è®¾ä¸­éœ€è¦è¿”å›ä¸‹æ ‡\n- æ€è·¯äºŒï¼š**å“ˆå¸Œå­˜å‚¨**\n\n## ä»£ç å®ç°\n\n### é”™é¢˜ä¸€\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407281617386.png?imageSlim)\n\n> æƒ³ç€ä¸¤ä¸ª `for` é€»è¾‘æ›´æ¸…æ™°ï¼Œä½†æœ‰`ä¸¤ä¸ªé—®é¢˜`ï¼Œå¦‚ä¸‹å›¾ï¼š\n> ![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407281617387.png?imageSlim)\n\n### é”™è¯¯äºŒ\n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407281617388.png?imageSlim)\n\n### æ ‡å‡†ç­”æ¡ˆ\n\n```javascript\n/**\n * @param {number[]} nums\n * @param {number} target\n * @return {number[]}\n */\nvar twoSum = function (nums, target) {\n\n    // ç»´æŠ¤ val-index çš„ map\n    let valToIndexMap = new Map();\n\n    // éå†æ¯ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œè¿™æ ·çš„ç»„åˆ\n    for (let i = 0; i < nums.length; i++) {\n        let need = target - nums[i];\n        if (valToIndexMap.has(need)) {\n            // å­˜åœ¨ï¼Œç›´æ¥è¿”å›\n            return [valToIndexMap.get(need), i];\n        }\n        // ä¹‹å‰çš„è®°å½•åˆ° map é‡Œï¼Œ ä¾›åç»­å…ƒç´ æ£€æŸ¥\n        valToIndexMap.set(nums[i], i);\n    }\n\n    // ä¸å­˜åœ¨ï¼Œè¿”å› null\n    return null;\n\n};\n```\n\n## å‚è€ƒ\n\n- [ä¸€ä¸ªæ–¹æ³•å›¢ç­ nSum é—®é¢˜](https://labuladong.online/algo/practice-in-action/nsum/#%E4%B8%80%E3%80%81twosum-%E9%97%AE%E9%A2%98)\n- [https://leetcode.cn/problems/two-sum/description/?envType=study-plan-v2&envId=top-100-liked](https://leetcode.cn/problems/two-sum/description/?envType=study-plan-v2&envId=top-100-liked)\n\n","9132d94582565b619b1d3f94599e767a":"\n# åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„\n\n\n`#2024/07/28` `#leetcode`  `#ç®—æ³•/åŒæŒ‡é’ˆ` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›® \n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407281626632.png?imageSlim)\n\n> [!danger]\n> æ³¨æ„ï¼šnums åé¢ä¼šä½¿ç”¨ `0` å ä½\n\n## è§£é¢˜æ€è·¯\n\n- åŒæŒ‡é’ˆæŠ€å·§ï¼Œåˆ†åˆ«æŒ‡å‘æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ \n- æ³¨æ„é¢˜è®¾ä¸­  `num1` çš„é•¿åº¦ä¸€å®šå¤§äº `num2`çš„é•¿åº¦\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} nums1\n * @param {number} m\n * @param {number[]} nums2\n * @param {number} n\n * @return {void} Do not return anything, modify nums1 in-place instead.\n */\nvar merge = function (nums1, m, nums2, n) {\n  let i = m - 1; // å®é™…é•¿åº¦ï¼Œä¸åŒ…æ‹¬å ä½\n  let p = nums1.length - 1; // å®é™…é•¿åº¦ï¼ŒåŒ…æ‹¬å ä½ 0 ï¼Œæ¸¸æ ‡\n  let j = n - 1; // å®é™…é•¿åº¦\n\n  while (i >= 0 && j >= 0) {\n    // å³æ¯”è¾ƒä»–ä»¬ä¹‹é—´çš„æœ€åä¸€ä¸ªï¼Œæœ€åä¸€ä¸ªè‚¯å®šæ˜¯æœ€å¤§çš„å˜›\n    if (nums1[i] > nums2[j]) {\n      nums1[p] = nums1[i];\n      i--;\n    } else {\n      nums1[p] = nums2[j];\n      j--;\n    }\n    p--;\n  }\n\n  // ä¸€å®šæ˜¯ j æœ€å¤§\n  while (j >= 0) {\n    nums1[p] = nums2[j];\n    j--;\n    p--;\n  }\n\n};\n```\n\n## å‚è€ƒ\n\n- [https://leetcode.cn/problems/merge-sorted-array/?envType=study-plan-v2&envId=top-interview-150](https://leetcode.cn/problems/merge-sorted-array/?envType=study-plan-v2&envId=top-interview-150)\n\n","b402f85034985d1a8c0932898fe1b61f":"\n# ç¡®å®šä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ¥è¿‘\n\n\n`#leetcode` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png600|622](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407260859792.png?imageSlim)\n\n## è§£é¢˜æ€è·¯\n\néœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ï¼š\n\n- åŒ…å«çš„å­—ç¬¦é›†éœ€è¦ç›¸åŒ\n- **æ¯ç§å­—ç¬¦å‡ºç°çš„é¢‘ç‡æ’åºåç›¸åŒ**\n\t- å¦‚ä½•ç†è§£å‘¢ï¼Ÿ\n\t\t- `word1 = \"cabbba\" `  å¯¹åº”çš„é¢‘ç‡  `[ 2, 3, 1 , 0, 0, ..., 0]`\n\t\t- `word2 = \"abbccc\"`    å¯¹åº”çš„é¢‘ç‡  `[1, 2, 3, 0, 0, ..., 0]`\n\n## ä»£ç å®ç°\n\n```javascript\n/**  \n * @param {string} word1  \n * @param {string} word2  \n * @return {boolean}  \n */  \nvar closeStrings = function (word1, word2) {  \n  // ä¸¤ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ä¸ç›¸ç­‰ï¼Œç›´æ¥è¿”å› false  if (word1.length !== word2.length) {  \n    return false;  \n  }  \n  \n  // ç”¨äºè®°å½•ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­å­—ç¬¦å‡ºç°çš„æ¬¡æ•°  \n  const arr1 = new Array(26).fill(0);  \n  const arr2 = new Array(26).fill(0);  \n  \n  // éå†ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œè®°å½•å­—ç¬¦å‡ºç°çš„æ¬¡æ•°  \n  for (let i = 0; i < word1.length; i++) {  \n    arr1[word1.charCodeAt(i) - 97]++;  \n  }  \n  for (let i = 0; i < word2.length; i++) {  \n    arr2[word2.charCodeAt(i) - 97]++;  \n  }  \n  \n  // åŒ…å«ç›¸åŒå­—ç¬¦  \n  // è½¬æˆæ•°ç»„ï¼Œæ’åºï¼Œè½¬æˆå­—ç¬¦ä¸²ï¼Œå»é‡  \n  const str1 = arr1.sort().join(\"\");  \n  const str2 = arr2.sort().join(\"\");  \n  \n  return str1 === str2;  \n};\n```\n\n> [!info]\n> `word1.charCodeAt(i) - 97` è¿™ä¸ªå¹³æ—¶ä¸æ€ä¹ˆå¸¸ç”¨ï¼Œéœ€è¦èƒ½å¤Ÿå†™å‡ºæ¥ï¼\n\n## é”™è¯¯æ—¥å¿—\n\n> [!danger]\n> é¢˜æ„ç†è§£æœ‰è¯¯ï¼Œä¸€å®šæ˜¯éœ€è¦ä¿è¯`äº’ç›¸æ›´æ¢ç›¸åŒçš„æ¬¡æ•°`åèƒ½å¤Ÿ`äº’ç›¸å¾—åˆ°`\n\n```javascript\n/**\n * @param {string} word1\n * @param {string} word2\n * @return {boolean}\n */\nvar closeStrings = function (word1, word2) {\n  // ä¸¤ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ä¸ç›¸ç­‰ï¼Œç›´æ¥è¿”å› false\n  if (word1.length !== word2.length) {\n    return false;\n  }\n  // åŒ…å«ç›¸åŒå­—ç¬¦\n  // è½¬æˆæ•°ç»„ï¼Œæ’åºï¼Œè½¬æˆå­—ç¬¦ä¸²ï¼Œå»é‡\n  const str1 = word1.split(\"\").sort().join(\"\");\n  const str2 = word2.split(\"\").sort().join(\"\");\n  return str1 === str2;\n};\n\n```","f27a09aa9dc350dc8f2a089583f8642e":"\n# æœ€å°è¦†ç›–å­ä¸²\n\n\n`#leetcode`   `#2024/08/11`  `#ç®—æ³•/æ»‘åŠ¨çª—å£`  `#ç®—æ³•/åŒæŒ‡é’ˆ` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240811134319.png)\n\n## 2. è§£é¢˜æ€è·¯ï¼šæ»‘åŠ¨çª—å£\n\n- å®šä¹‰ 7 ä¸ªå˜é‡\n\t- ä¸¤ä¸ª Mapï¼š`need` å’Œ `window`\n\t\t- `need` å­˜å‚¨ `t` ä¸­æ¯ä¸ªå­—ç¬¦éœ€è¦çš„æ•°é‡\n\t\t- `window` å­˜å‚¨å½“å‰çª—å£ä¸­æ¯ä¸ªå­—ç¬¦çš„æ•°é‡\n\t- ä¸¤ä¸ªæŒ‡é’ˆ `left` å’Œ `right` ï¼šç”¨äºå®šä¹‰æ»‘åŠ¨çª—å£\n\t-  `valid å˜é‡`æ¥è®°å½•å½“å‰çª—å£ä¸­**å·²ç»æ»¡è¶³æ¡ä»¶çš„å­—ç¬¦æ•°é‡**\n\t- `start` å’Œ `len` è®°å½•æœ€å°è¦†ç›–å­ä¸²çš„èµ·å§‹ç´¢å¼•åŠé•¿åº¦\n- æ»‘åŠ¨çª—å£\n\t-  `å³æŒ‡é’ˆ right` ä¸æ–­å‘å³ç§»åŠ¨ï¼Œ**æ‰©å¤§çª—å£**ï¼Œå°†å­—ç¬¦åŠ å…¥ `window`ã€‚\n\t- å½“ `valid === need` æ—¶\n\t\t- è¯´æ˜çª—å£ä¸­å·²ç»åŒ…å«äº† `t` çš„æ‰€æœ‰å­—ç¬¦ï¼Œæ­¤æ—¶å¼€å§‹å°è¯•**ç¼©å°çª—å£**\n\t\t\t- å½“ä¸€ä¸ªå­—ç¬¦åŠ å…¥ window åï¼Œå¦‚æœå®ƒçš„æ•°é‡ä¸ need ä¸­çš„æ•°é‡ç›¸ç­‰ï¼Œåˆ™ valid åŠ  1ã€‚\n\t\t\t\t- `å·¦æŒ‡é’ˆ left` å‘å³ç§»åŠ¨ï¼Œç¼©å°çª—å£ï¼ŒåŒæ—¶æ›´æ–° window å’Œ validã€‚\n\t\t\t\t- åœ¨æ¯æ¬¡æ‰¾åˆ°å¯è¡Œè§£æ—¶ï¼Œæ›´æ–°æœ€å°è¦†ç›–å­ä¸²çš„`èµ·å§‹ä½ç½®`å’Œ`é•¿åº¦`ã€‚\n- æœ€åè¿”å›æœ€å°è¦†ç›–å­ä¸²ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚\n\n## 3. ä»£ç å®ç°\n\n```javascript hl:8,27,43\n/**\n * @param {string} s\n * @param {string} t\n * @return {string}\n */\nvar minWindow = function (s, t) {\n    /*************************************************\n     * ::::â‘  ç¬¬ä¸€æ­¥ï¼š å®šä¹‰ 7 ä¸ªå˜é‡å¹¶åˆå§‹åŒ–\n     ************************************************/\n        // è®°å½•çª—å£æ‰€éœ€è¦çš„å­—ç¬¦åŠå…¶ä¸ªæ•°\n    const need = new Map();\n    // åˆå§‹åŒ– need\n    for (const c of t) {\n        need.set(c, (need.get(c) || 0) + 1);\n    }\n    // è®°å½•å½“å‰çª—å£ä¸­çš„å­—ç¬¦åŠå…¶ä¸ªæ•°\n    const window = new Map();\n    // åŒæŒ‡é’ˆ\n    let left = 0;\n    let right = 0;\n    // å·²ç»ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸ªæ•°\n    let valid = 0;\n    // è®°å½•æœ€å°è¦†ç›–å­ä¸²çš„èµ·å§‹ç´¢å¼•åŠé•¿åº¦\n    let start = 0;\n    let len = Infinity;\n    /*************************************************\n     * :::::â‘¡ ç¬¬äºŒæ­¥ï¼šå¼€å§‹ç§»åŠ¨å³æŒ‡é’ˆï¼Œæ‰©å¤§çª—å£\n     ************************************************/\n    for (let i = 0; i < s.length; i++) {\n        const c = s[i]; // c æ˜¯å°†ç§»å…¥çª—å£çš„å­—ç¬¦\n        right++;// å³ç§»çª—å£\n        // å¦‚æœ c æ˜¯æ‰€éœ€å­—ç¬¦ï¼Œåˆ™æ›´æ–°çª—å£æ•°æ®\n        if (need.has(c)) {\n            window.set(c, (window.get(c) || 0) + 1);\n            // å¦‚æœ window ä¸­å­—ç¬¦ c çš„æ•°é‡è¾¾åˆ° need ä¸­å­—ç¬¦ c çš„æ•°é‡ï¼Œåˆ™ valid++\n            // valid è¡¨ç¤ºçª—å£ä¸­æ»¡è¶³ need æ¡ä»¶çš„å­—ç¬¦ä¸ªæ•°ï¼Œæ‰€ä»¥å®ƒæ˜¯å»é‡çš„\n            // ä¾‹å¦‚ need ä¸­æœ‰ 2 ä¸ª aï¼Œwindow ä¸­ä¹Ÿæœ‰ 2 ä¸ª aï¼Œé‚£ä¹ˆ valid åªä¼šåŠ  1\n            if (window.get(c) === need.get(c)) {\n                valid++;\n            }\n        }\n        /*************************************************\n         * ::::â‘¢ ç¬¬ä¸‰æ­¥ï¼šåˆ¤æ–­å·¦ä¾§çª—å£æ˜¯å¦è¦æ”¶ç¼©ï¼Œæ¡ä»¶æ˜¯ valid === need.size\n         ************************************************/\n        while (valid === need.size) {\n            // è¿™ä¸ªæ—¶å€™æ»¡è¶³æ¡ä»¶ï¼Œè®°å½•æœ€å°è¦†ç›–å­ä¸²\n            // æ›´æ–° start å’Œ len, ç”¨äºæœ€åè¿”å›ç»“æœ\n            if (right - left < len) {\n                start = left;\n                len = right - left;\n            }\n\n            const d = s[left];// d æ˜¯å°†ç§»å‡ºçª—å£çš„å­—ç¬¦\n            // å·¦ç§»çª—å£\n            left++;\n\n            // å¦‚æœ d æ˜¯æ‰€éœ€å­—ç¬¦ï¼ŒåŒäº‹éœ€è¦æ›´æ–°çª—å£æ•°æ® å’Œ valid å€¼\n            if (need.has(d)) {\n                if (window.get(d) === need.get(d)) {\n                    valid--;\n                }\n                window.set(d, window.get(d) - 1);\n            }\n        }\n    }\n    return len === Infinity ? '' : s.substr(start, len);\n};\n\n```\n\n### 3.1. å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`ï¼Œå…¶ä¸­ n æ˜¯**å­—ç¬¦ä¸² s çš„é•¿åº¦**ã€‚\n- ç©ºé—´å¤æ‚åº¦æ˜¯ `O(k)`ï¼Œå…¶ä¸­ k æ˜¯**å­—ç¬¦é›†çš„å¤§å°**ï¼ˆåœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œ**k æœ€å¤§ä¸º 52**ï¼Œå› ä¸ºå­—æ¯åŒºåˆ†å¤§å°å†™ï¼‰\n\n","6f2f481d27b15402abf8528ea65bfe36":"\n# å®šé•¿å­ä¸²ä¸­å…ƒéŸ³çš„æœ€å¤§æ•°ç›®\n\n\n`#2024/07/28` `#leetcode`  `#ç®—æ³•/æ»‘åŠ¨çª—å£`\n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/019ec18db0ccfeb560170c4fd4b24b5a.png)\n\n## è§£é¢˜æ€è·¯\n\n1. ä½¿ç”¨`æ»‘åŠ¨çª—å£`æŠ€æœ¯ï¼Œç»´æŠ¤ä¸€ä¸ª`å›ºå®šé•¿åº¦ä¸º k çš„çª—å£`ã€‚\n2. åœ¨çª—å£å†…ç»Ÿè®¡å…ƒéŸ³å­—æ¯çš„æ•°é‡ã€‚\n3. éšç€çª—å£çš„æ»‘åŠ¨ï¼Œæ›´æ–°å…ƒéŸ³å­—æ¯çš„æ•°é‡ï¼Œå¹¶è®°å½•æœ€å¤§å€¼ã€‚\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {string} s\n * @param {number} k\n * @return {number}\n */\n\nvar maxVowels = function (s, k) {\n  // è¾…åŠ©å‡½æ•°ï¼šåˆ¤æ–­å­—ç¬¦æ˜¯å¦ä¸ºå…ƒéŸ³\n  const isVowel = (c) => {\n    return [\"a\", \"e\", \"i\", \"o\", \"u\"].includes(c);\n  };\n\n  // ç»“æœ\n  let res = 0;\n  // è®°å½•æ»‘åŠ¨çª—å£ä¸­çš„å…ƒéŸ³å­—æ¯ä¸ªæ•°ï¼Œå³ã€æ»‘åŠ¨çª—å£ã€‘ä¸­çš„å…ƒéŸ³å­—æ¯ä¸ªæ•°ï¼Œç”¨äºæ›´æ–° res çš„å€¼\n  let count = 0;\n\n  // åˆå§‹åŒ–æ»‘åŠ¨çª—å£,å…ˆç»Ÿè®¡å‰ k ä¸ªå…ƒç´ ä¸­çš„å…ƒéŸ³å­—æ¯ä¸ªæ•°\n  for (let i = 0; i < k; i++) {\n    if (isVowel(s[i])) {\n      count++;\n    }\n  }\n\n  // æ›´æ–° res çš„å€¼\n  res = count;\n\n  // å¼€å§‹æ»‘åŠ¨çª—å£ï¼Œä» k å¼€å§‹ï¼Œæ¯æ¬¡ç§»åŠ¨ä¸€ä½ï¼ŒåŠ¨æ€ç»´æŠ¤ count å’Œ res çš„å€¼\n  for (let i = k; i < s.length; i++) {\n    // å…ˆç§»é™¤æ»‘åŠ¨çª—å£çš„å‰ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœæ˜¯å…ƒéŸ³å­—æ¯ï¼Œåˆ™ count å‡ä¸€\n    if (isVowel(s[i - k])) {\n      count--;\n    }\n    // æ–°æ·»åŠ çš„å…ƒç´ æ˜¯å…ƒéŸ³å­—æ¯ï¼Œåˆ™ count åŠ ä¸€\n    if (isVowel(s[i])) {\n      count++;\n    }\n\n    // æ›´æ–° res çš„å€¼\n    res = Math.max(res, count);\n\n    // å¦‚æœ res ç­‰äº kï¼Œç›´æ¥è¿”å› k,å¯ä»¥æå‰ç»“æŸå¾ªç¯\n    if (res === k) {\n      break;\n    }\n  }\n\n  return res;\n};\n\n```\n\n> - çœŸæ­£æ»‘åŠ¨çª—å£æ—¶ï¼Œ\n>    - éœ€è¦å…ˆåˆ¤æ–­ä¸Šä¸€ä¸ªå­—æ¯æ˜¯å¦å…ƒéŸ³ï¼Œæ˜¯çš„è¯ï¼Œ`count --`\n>    - ç„¶åå†åˆ¤æ–­å½“å‰çš„å…ƒç´ ï¼Œæ˜¯çš„è¯ï¼Œ`count++`\n\n### å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œå…¶ä¸­ n æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚æˆ‘ä»¬åªéœ€è¦éå†ä¸€æ¬¡å­—ç¬¦ä¸²ã€‚\n- ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)ï¼Œå› ä¸ºæˆ‘ä»¬åªä½¿ç”¨äº†å‡ ä¸ªå˜é‡æ¥å­˜å‚¨çŠ¶æ€ï¼Œä¸éœ€è¦é¢å¤–çš„æ•°æ®ç»“æ„ã€‚\n\nä¼˜åŒ–ç‚¹ï¼š\n\n1. ä½¿ç”¨`**Set**`æ¥å­˜å‚¨å…ƒéŸ³å­—æ¯é›†åˆï¼Œå¯ä»¥ç¨å¾®æé«˜æŸ¥æ‰¾æ•ˆç‡ã€‚\n2. å½“æ‰¾åˆ°é•¿åº¦ä¸º k çš„å…¨æ˜¯å…ƒéŸ³çš„å­ä¸²æ—¶ï¼Œ`**å¯ä»¥æå‰ç»“æŸå¾ªç¯**`ï¼Œå› ä¸ºè¿™å·²ç»æ˜¯æœ€å¤§å¯èƒ½å€¼ã€‚\n\n## é”™è¯¯è®°å½•\n\n","1960e62a3711585bb2c0846a552dddf0":"\n# è·³è·ƒæ¸¸æˆ II\n\n\n`#leetcode`   `#2024/08/17` `#ç®—æ³•/åŠ¨æ€è§„åˆ’`   `#ç®—æ³•/è´ªå¿ƒç®—æ³•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240817091058.png)\n\nä¿è¯ä½ ä¸€å®šå¯ä»¥è·³åˆ°æœ€åä¸€æ ¼ï¼Œè¯·é—®ä½ **æœ€å°‘è¦è·³å¤šå°‘æ¬¡**ï¼Œæ‰èƒ½è·³è¿‡å»\n\n## 2. è§£é¢˜æ€è·¯\n\n### 2.1. è§£é¢˜æ€è·¯ä¸€ï¼šåŠ¨æ€è§„åˆ’\n\n#### 2.1.1. `dp`Â å‡½æ•°å®šä¹‰\n\nä»`ç´¢å¼• p` è·³åˆ°æœ€åä¸€æ ¼ï¼Œè‡³å°‘éœ€è¦ `dp(nums, p)` æ­¥\n\n#### 2.1.2. åŠ¨æ€è§„åˆ’æ¡†æ¶æ¨¡æ¿\n\n```javascript\n/**  \n * @param {number[]} nums  \n * @return {number}  \n */  \nvar jump = function (nums) {  \n  \n    const len = nums.length;  \n    // é»˜è®¤å€¼æ˜¯ len, å› ä¸ºæœ€åçš„æƒ…å†µå°±æ˜¯æ¯æ¬¡åªè·³ 1 æ­¥,æœ€å¤§æ­¥æ•°å°±æ˜¯ len - 1\n    // len ä»£è¡¨ä¸å¯è¾¾  \n    const memo = new Array(len).fill(len);  \n  \n    return dp(nums, 0, memo);  \n  \n};  \n  \n  \n/**  \n * @description dp(nums, i, memo) è¡¨ç¤ºä»ç¬¬ i ä¸ªä½ç½®è·³åˆ°æœ€åä¸€ä¸ªä½ç½®æ‰€éœ€è¦çš„æœ€å°‘æ­¥æ•°  \n * @param {number[]} nums è·³è·ƒæ•°ç»„  \n * @param {number} i å½“å‰ä½ç½®  \n * @param {number[]} memo å¤‡å¿˜å½•  \n * */  \nfunction dp(nums, i, memo) {  \n    // ... å¾…è¡¥å……  \n}\n```\n\n#### 2.1.3. ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} nums\n * @return {number}\n */\nvar jump = function (nums) {\n\n    const len = nums.length;\n    // é»˜è®¤å€¼æ˜¯ len, å› ä¸ºæœ€åçš„æƒ…å†µå°±æ˜¯æ¯æ¬¡åªè·³ 1 æ­¥,æœ€å¤§æ­¥æ•°å°±æ˜¯ len - 1\n    // len ä»£è¡¨ä¸å¯è¾¾\n    const memo = new Array(len).fill(len);\n\n    return dp(nums, 0, memo);\n\n};\n\n/**\n * @description dp(nums, i, memo) è¡¨ç¤ºä»ç¬¬ i ä¸ªä½ç½®è·³åˆ°æœ€åä¸€ä¸ªä½ç½®æ‰€éœ€è¦çš„æœ€å°‘æ­¥æ•°\n * @param {number[]} nums è·³è·ƒæ•°ç»„\n * @param {number} i å½“å‰ä½ç½®\n * @param {number[]} memo å¤‡å¿˜å½•\n * */\nfunction dp(nums, i, memo) {\n    // base case\n    const len = nums.length;\n    if (i >= len - 1) {\n        return 0;\n    }\n    // ä¹‹å‰å·²ç»è®¡ç®—è¿‡ï¼Œç›´æ¥è¿”å›å¤‡å¿˜å½•çš„å€¼\n    if (memo[i] !== len) {\n        return memo[i];\n    }\n    // å½“å‰ä½ç½®æœ€å¤šèƒ½è·³çš„æ­¥æ•°\n    const steps = nums[i];\n    // ä»å½“å‰ä½ç½®è·³ steps æ­¥\n    for (let step = 1; step <= steps; step++) {\n        // ä¸‹ä¸€ä¸ªä½ç½®\n        const next = i + step;\n        // é€’å½’æ±‚è§£\n        const subProblem = dp(nums, next, memo);\n        // æ›´æ–° memo\n        memo[i] = Math.min(memo[i], 1 + subProblem);\n    }\n\n    // è¿”å› memo[i]\n    return memo[i];\n}\n\n```\n\n#### 2.1.4. å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼š`O(n * m)`ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„é•¿åº¦ï¼Œm æ˜¯æ•°ç»„ä¸­çš„æœ€å¤§å€¼ã€‚ä½†ç”±äºä½¿ç”¨äº†è®°å¿†åŒ–ï¼Œå®é™…è¿è¡Œæ—¶é—´é€šå¸¸ä¼šæ›´ä¼˜ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼š`O(n)`\n\n> ä¸Šé¢çš„å¤æ‚åº¦å¾ˆé«˜çš„ï¼Œæœ‰æ²¡æœ‰æ›´é«˜æ•ˆçš„ç®—æ³•ï¼Œè§ä¸‹é¢çš„è´ªå¿ƒç®—æ³•é¢˜è§£\n\n### 2.2.       è§£é¢˜æ€è·¯äºŒï¼šè´ªå¿ƒç®—æ³•\n\næˆ‘ä»¬ä¸éœ€è¦åƒ[#2.1. è§£é¢˜æ€è·¯ä¸€ï¼šåŠ¨æ€è§„åˆ’](/post/1960e62a3711585bb2c0846a552dddf0.html#21-è§£é¢˜æ€è·¯ä¸€åŠ¨æ€è§„åˆ’) é‚£æ ·çœŸçš„ã€Œé€’å½’åœ°ã€ç©·ä¸¾å‡ºæ‰€æœ‰é€‰æ‹©çš„å…·ä½“ç»“æœæ¥æ¯”è¾ƒæ±‚æœ€å€¼ï¼Œè€Œ**åªéœ€è¦æ¯æ¬¡é€‰æ‹©é‚£ä¸ªæœ€æœ‰æ½œåŠ›çš„å±€éƒ¨æœ€ä¼˜è§£**ï¼Œæœ€ç»ˆå°±èƒ½å¾—åˆ°**å…¨å±€æœ€ä¼˜è§£**ã€‚\n\n#### 2.2.1.1. ä¸€ä¸ªå½¢è±¡çš„ä¾‹å­\n\n- æƒ³è±¡ä½ æ­£åœ¨ç©ä¸€ä¸ªè·³çŸ³å¤´è¿‡æ²³çš„æ¸¸æˆï¼š\n\t- æ²³é¢ä¸Šæœ‰ä¸€æ’çŸ³å¤´ï¼Œæ¯ä¸ªçŸ³å¤´ä¸Šæœ‰ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºä½ ä»è¿™ä¸ªçŸ³å¤´æœ€è¿œå¯ä»¥è·³å¤šè¿œã€‚\n\t- ä½ çš„ç›®æ ‡æ˜¯ç”¨æœ€å°‘çš„è·³è·ƒæ¬¡æ•°åˆ°è¾¾æœ€åä¸€ä¸ªçŸ³å¤´ã€‚\n\t- ä½ æ€»æ˜¯å¯ä»¥åˆ°è¾¾æœ€åä¸€ä¸ªçŸ³å¤´ã€‚\n- **è´ªå¿ƒç®—æ³•çš„æ ¸å¿ƒæ€æƒ³**æ˜¯ï¼šæ¯æ¬¡è·³è·ƒæ—¶ï¼Œéƒ½è¦é€‰æ‹©èƒ½å¤Ÿä½¿ä½ **åœ¨ä¸‹ä¸€è·³åˆ°è¾¾æœ€è¿œä½ç½®çš„çŸ³å¤´**ã€‚\n- ä¾‹å­ï¼š\n\t- å‡è®¾çŸ³å¤´ä¸Šçš„æ•°å­—æ˜¯ `[2, 3, 1, 1, 4]`\n\t- ç¬¬ 0 ä¸ªçŸ³å¤´ï¼ˆå€¼ä¸º 2ï¼‰ï¼š\n\t\t- ä½ ç«™åœ¨ç¬¬ä¸€ä¸ªçŸ³å¤´ä¸Šï¼Œå¯ä»¥è·³ 1 æ­¥ æˆ–  2 æ­¥ã€‚\n\t\t- å¦‚æœè·³ 1 æ­¥åˆ°ç´¢å¼• 1ï¼Œ**ä¸‹ä¸€è·³**æœ€è¿œå¯ä»¥åˆ°è¾¾ç´¢å¼• 4ï¼ˆ`1 + 3 = 4`ï¼‰ã€‚\n\t\t- å¦‚æœè·³ 2 æ­¥åˆ°ç´¢å¼• 2ï¼Œ**ä¸‹ä¸€è·³**æœ€è¿œåªèƒ½åˆ°è¾¾ç´¢å¼• 3ï¼ˆ`2 + 1 = 3`ï¼‰ã€‚\n\t\t- **è´ªå¿ƒé€‰æ‹©**ï¼šè·³åˆ°ç´¢å¼• 1ï¼ˆå€¼ä¸º 3 çš„çŸ³å¤´ï¼‰ï¼Œ**å› ä¸ºå®ƒèƒ½è®©ä½ ä¸‹ä¸€è·³åˆ°è¾¾æœ€è¿œ**ã€‚\n\t- ç¬¬ 1 ä¸ªçŸ³å¤´ï¼ˆå€¼ä¸º 3ï¼‰ï¼š\n\t\t- ä½ ç°åœ¨åœ¨ç´¢å¼• 1ï¼Œå¯ä»¥è·³ 1ã€2 æˆ– 3 æ­¥ã€‚\n\t\t- ä½†æ˜¯ä¸ç®¡è·³å‡ æ­¥ï¼Œéƒ½èƒ½ç›´æ¥åˆ°è¾¾æœ€åä¸€ä¸ªçŸ³å¤´ã€‚\n\t\t- è´ªå¿ƒé€‰æ‹©ï¼šç›´æ¥è·³åˆ°æœ€åä¸€ä¸ªçŸ³å¤´ã€‚\n\t- æ€»è·³è·ƒæ¬¡æ•°ï¼š2 æ¬¡\n\nè¿™å°±åƒæ˜¯åœ¨ç©**çœ‹å¾—æœ€è¿œè·³å¾—æœ€è¿œ** çš„æ¸¸æˆã€‚æ¯æ¬¡è·³è·ƒï¼Œä½ éƒ½é€‰æ‹©ä¸€ä¸ªèƒ½è®©ä½ åœ¨ä¸‹ä¸€è·³çœ‹å¾—æœ€è¿œçš„åœ°æ–¹ã€‚è¿™æ ·ï¼Œä½ å°±èƒ½ç”¨æœ€å°‘çš„è·³è·ƒæ¬¡æ•°åˆ°è¾¾ç»ˆç‚¹ã€‚\n\nè¿™ä¸ªè´ªå¿ƒç­–ç•¥ä¹‹æ‰€ä»¥æœ‰æ•ˆï¼Œæ˜¯å› ä¸ºé¢˜ç›®ä¿è¯äº†æ€»æ˜¯å¯ä»¥åˆ°è¾¾æœ€åä¸€ä¸ªä½ç½®ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦æ‹…å¿ƒä¼šè·³åˆ°ä¸€ä¸ª\"æ­»èƒ¡åŒ\"ï¼Œåªéœ€è¦ä¸“æ³¨äºå¦‚ä½•è·³å¾—æœ€è¿œã€‚\n\n#### 2.2.1.2. å†çœ‹ä¾‹å­ï¼Œå¦‚ä¸‹å›¾\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240817110226.png)\n\n### 2.2.2. ä»£ç å®ç°\n\n```javascript hl:19\n/**\n * @description è´ªå¿ƒç®—æ³•è§£æ³•\n * @param {number[]} nums\n * @return {number}\n */\nvar jump = function (nums) {\n    const len = nums.length;\n    // å½“å‰ä½ç½®ï¼Œè¡¨ç¤ºå½“å‰æ‰€åœ¨çš„ä½ç½®ï¼Œå·²ç»è·³åˆ°äº†å“ªé‡Œï¼Œå³ç´¢å¼•\n    let currentPosition = 0;\n    // æ­¥æ•°ï¼Œä¸æ˜¯æ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ªæ•°\n    let stepsNum = 0;\n    // èƒ½è·³çš„æœ€è¿œè·ç¦»\n    let maxJump = 0;\n\n    // æ³¨æ„è¿™é‡Œæ˜¯å°äº len - 1, å› ä¸ºæœ€åä¸€ä¸ªä½ç½®ä¸ç”¨è·³\n    // æ¯æ¬¡è·³è·ƒéƒ½é€‰æ‹©ã€ä¸‹ä¸€ä¸ªä½ç½®ã€‘èƒ½è·³çš„æœ€è¿œçš„åœ°æ–¹\n    for (let i = 0; i < len - 1; i++) {\n        // æ›´æ–° maxJump\n        // ä¸‹ä¸ªè·³è·ƒä½ç½®èƒ½å¤Ÿåˆ°è¾¾çš„æœ€è¿œè·ç¦»ä¸º ã€i + nums[i]ã€‘\n        maxJump = Math.max(maxJump, i + nums[i]);\n        // åˆ°è¾¾å½“å‰ä½ç½®çš„æ—¶å€™ï¼Œæ›´æ–° currentPosition\n        if (i === currentPosition) {\n            currentPosition = maxJump;\n            stepsNum++;\n        }\n    }\n    // è¿”å›ç»“æœ\n    return stepsNum;\n};\n\n```\n\n### 2.2.3. å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n\t- å…¶ä¸­ n æ˜¯è¾“å…¥æ•°ç»„çš„é•¿åº¦ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\t- ç®—æ³•åªä½¿ç”¨äº†å‡ ä¸ªé¢å¤–çš„å˜é‡ï¼ˆcurrentPosition, stepsNum, maxJumpï¼‰ï¼Œè¿™äº›éƒ½æ˜¯å¸¸æ•°çº§çš„é¢å¤–ç©ºé—´ã€‚\n\t- æ²¡æœ‰ä½¿ç”¨ä»»ä½•ä¸è¾“å…¥è§„æ¨¡ç›¸å…³çš„é¢å¤–æ•°æ®ç»“æ„ã€‚\n\n","87f700f130fa58ceaafa5d74cad6cdc8":"\n# H æŒ‡æ•°\n\n\n`#leetcode`   `#2024/08/19`  `#ç®—æ³•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240819065111.png)\n\n## æ€è·¯\n\n- å°†å¼•ç”¨æ¬¡æ•°**é™åº**æ’åº\n- ä»å‰å‘åéå†ï¼Œå½“**å¼•ç”¨æ¬¡æ•°å¤§äºå½“å‰ç´¢å¼•**æ—¶ï¼Œh æŒ‡æ•°åŠ  1 \n\n### ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} citations\n * @return {number}\n */\nvar hIndex = function (citations) {\n  let res = 0;\n  // â‘  å…ˆæ’åºï¼Œé™åºæ’åº\n  citations.sort((a, b) => b - a);\n\n  // â‘¡  ä»å‰å‘åéå†ï¼Œå½“**å¼•ç”¨æ¬¡æ•°å¤§äºå½“å‰ç´¢å¼•**æ—¶ï¼Œh æŒ‡æ•°åŠ  1 \n  for (let i = 0; i < citations.length; i++) {\n    //  å¦‚æœå½“å‰å¼•ç”¨æ•°å¤§äºç­‰äºå½“å‰ä¸‹æ ‡å€¼ï¼Œåˆ™ h å€¼ä¸ºå½“å‰ä¸‹æ ‡å€¼\n    if (citations[i] >= i + 1) {\n      res = i + 1;\n      // å¦åˆ™ï¼Œç›´æ¥è·³å‡ºå¾ªç¯\n    } else {\n      break;\n    }\n  }\n\n  return res;\n};\n\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦åˆ†æï¼š\n\t1. æ’åºæ­¥éª¤ï¼š\n\t    - ä½¿ç”¨äº† JavaScript çš„å†…ç½®æ’åºæ–¹æ³•Â `sort()`ã€‚\n\t    - å¤§å¤šæ•°ç°ä»£æµè§ˆå™¨çš„Â `sort()`Â æ–¹æ³•å®ç°ä¸ºå¿«é€Ÿæ’åºçš„å˜ä½“ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(n log n)ã€‚\n\t2. éå†æ­¥éª¤ï¼š\n\t    - æœ€åæƒ…å†µä¸‹ï¼Œéœ€è¦éå†æ•´ä¸ªæ•°ç»„ï¼Œå¤æ‚åº¦ä¸º O(n)ã€‚\n\t3. æ€»ä½“æ—¶é—´å¤æ‚åº¦ï¼š\n\t    - O(n log n) + O(n) = `O(n log n)`\n\t    - æ’åºæ­¥éª¤å†³å®šäº†æ•´ä½“çš„æ—¶é—´å¤æ‚åº¦ã€‚\n- ç©ºé—´å¤æ‚åº¦åˆ†æï¼š\n    1. æ’åºï¼š\n        - å–å†³äºå…·ä½“çš„æ’åºç®—æ³•å®ç°ã€‚\n        - æœ€å¥½æƒ…å†µä¸‹æ˜¯ O(1)ï¼Œä½†æŸäº›å®ç°å¯èƒ½éœ€è¦ O(log n) æˆ– O(n) çš„é¢å¤–ç©ºé—´ã€‚\n    2. å…¶ä»–å˜é‡ï¼š\n        - ä½¿ç”¨äº†å¸¸æ•°çº§é¢å¤–ç©ºé—´ï¼ˆres å’Œ iï¼‰ã€‚\n    3. æ€»ä½“ç©ºé—´å¤æ‚åº¦ï¼š\n        - ä¸»è¦å–å†³äºæ’åºç®—æ³•çš„å®ç°ï¼Œä¸€èˆ¬ä¸º `O(1) åˆ° O(n)` ä¹‹é—´ã€‚\n\n### é”™è¯¯è®°å½•\n\n## å…¶ä»–æ€è·¯\n\n- è®¡æ•°æ’åº\n- äºŒåˆ†æŸ¥æ‰¾æ³•\n\n> [!danger]\n> ä½†å¿½ç•¥äº†ï¼Œç¬¬ä¸€ç§å¾ˆç›´æ¥äº†ï¼Œåˆ«å¿˜äº†ç›®çš„ä½•åœ¨ï¼Œåˆä¸æ˜¯åšç ”ç©¶ï¼Œæ²¡å¿…è¦æ·±ç©¶äº†\n\n","34393326344b561a93657bb52356c6ca":"\n# æœ€å¤§å­æ•°ç»„å’Œ\n\n\n`#leetcode`   `#2024/08/18` `#ç®—æ³•/åŠ¨æ€è§„åˆ’`  `#ç®—æ³•/æ»‘åŠ¨çª—å£`  `#ç®—æ³•/å‰ç¼€å’Œ` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240818180606.png)\n\n## 2. æ€è·¯ä¸€ï¼šå‰ç¼€å’Œæ€è·¯\n\n### 2.1. æ€è·¯æè¿°\n\nå‰ç¼€å’Œæ•°ç»„Â `preSum`Â å°±æ˜¯Â `nums`Â å…ƒç´ çš„ç´¯åŠ å’Œ\n- `preSum[i+1] - preSum[j]`Â å…¶å®å°±æ˜¯å­æ•°ç»„Â `nums[j..i]`Â ä¹‹å’Œï¼ˆæ ¹æ®Â `preSum`Â æ•°ç»„çš„å®ç°ï¼Œç´¢å¼• 0 æ˜¯å ä½ç¬¦ï¼Œæ‰€ä»¥Â `i`Â æœ‰ä¸€ä½ç´¢å¼•åç§»ï¼‰\n- é‚£ä¹ˆåè¿‡æ¥æƒ³ï¼Œä»¥Â `nums[i]`Â ä¸ºç»“å°¾çš„æœ€å¤§å­æ•°ç»„ä¹‹å’Œæ˜¯å¤šå°‘ï¼Ÿ\n\t- å…¶å®å°±æ˜¯Â `preSum[i+1] - min(preSum[0..i])`\n\t- **æœ€å¤§å­æ•°ç»„å’Œ = å½“å‰ä½ç½®çš„å‰ç¼€å’Œ - æœ€å°å‰ç¼€å’Œ**ï¼Œ æ‰€ä»¥è®¾ç½®ä¸¤ä¸ªå˜é‡\n\t\t- `res` ä»£è¡¨ `æœ€å¤§å­æ•°ç»„å’Œ`\n\t\t- `minPreSum` ä»£è¡¨ `å½“å‰ä½ç½®ä¹‹å‰çš„æœ€å°å‰ç¼€å’Œ`\n\n > [!danger]\n>   æ³¨æ„æ˜¯ï¼š`preSum[i+1] - minPreSum ` ï¼Œä¸æ˜¯ `preSum[i]`\n\n### 2.2. ä»£ç å®ç°\n\n```javascript\n/**  \n * @description æœ€å¤§å­æ•°ç»„å’Œï¼Œå‰ç¼€å’Œæ€è·¯  \n * @param {number[]} nums  \n * @return {number} è¿”å›æœ€å¤§å­æ•°ç»„å’Œ  \n */  \nvar maxSubArray = function (nums) {  \n    /*************************************************  \n     * ::::::::::::::::: æ„é€ å‰ç¼€å’Œ ::::::::::::::::::  \n     ************************************************/  \n    let preSum = [0];  \n    /*************************************************  \n     * ::::â‘  æ³¨æ„ i ä» 1 å¼€å§‹ï¼Œå› ä¸ºå‰ç¼€å’Œæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ 0::::  \n     * ::::â‘¡ i <= nums.lengthï¼Œå› ä¸ºå‰ç¼€å’Œæ•°ç»„çš„é•¿åº¦æ˜¯ nums.length + 1::::  \n     ************************************************/  \n    for (let i = 1; i <= nums.length; i++) {  \n        preSum[i] = preSum[i - 1] + nums[i - 1];  \n    }  \n    /*************************************************  \n     * ::::å½“å‰çš„æœ€å¤§å­æ•°ç»„å’Œï¼Œåˆå§‹åŒ–ä¸ºæœ€å°å€¼::::  \n     * ::::å³ Number.MIN_VALUE æˆ–è€… åˆå§‹åŒ–é¢˜è®¾ä¸­çš„æœ€å°å€¼å³å¯::::  \n     ************************************************/  \n    let res = -10000 * 100000;  \n    /*************************************************  \n     * ::::å½“å‰ä½ç½®ä¹‹å‰çš„æœ€å°å‰ç¼€å’Œï¼Œåˆå§‹åŒ–æœ€å¤§å€¼ ::::  \n     ************************************************/  \n    let minPreSum = 10000 * 100000;  \n    // æœ€å¤§å­æ•°ç»„å’Œ = å½“å‰ä½ç½®å…ƒç´ çš„å‰ç¼€å’Œ - æœ€å°å‰ç¼€å’Œ  \n    for (let i = 0; i < nums.length; i++) {  \n        // æ›´æ–°æœ€å°å‰ç¼€å’Œ  \n        minPreSum = Math.min(minPreSum, preSum[i]);  \n        //å…¬å¼ï¼šæœ€å¤§å­æ•°ç»„å’Œ = å½“å‰ä½ç½®å…ƒç´ çš„å‰ç¼€å’Œ - æœ€å°å‰ç¼€å’Œ  \n        res = Math.max(res, preSum[i + 1] - minPreSum);  \n    }  \n    return res;  \n};\n```\n \n### 2.3. å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œå› ä¸ºæˆ‘ä»¬åªéå†äº†æ•°ç»„ä¸€æ¬¡\n- ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)ï¼Œå› ä¸ºæˆ‘ä»¬åªä½¿ç”¨äº†å¸¸æ•°é¢å¤–ç©ºé—´\n\n### 2.4. é”™è¯¯è®°å½•\n\n- å¦‚ä½•åˆå§‹åŒ–ä¸€ä¸ª preSum ?  **å¾—æ²¡æœ‰æ„è¯†çš„å°±å¾—å†™å¯¹**\n\n## 3. æ€è·¯äºŒï¼šåŠ¨æ€è§„åˆ’æ€è·¯\n\n### 3.1. dp å®šä¹‰\n\n- ä»¥Â `nums[i]`Â ä¸ºç»“å°¾çš„ã€Œæœ€å¤§å­æ•°ç»„å’Œã€ä¸ºÂ `dp[i]`ã€‚\n- `dp[i]`Â æœ‰ä¸¤ç§ã€Œé€‰æ‹©ã€ï¼Œ\n\t- è¦ä¹ˆä¸å‰é¢çš„ç›¸é‚»å­æ•°ç»„è¿æ¥ï¼Œå½¢æˆä¸€ä¸ªå’Œæ›´å¤§çš„å­æ•°ç»„\n\t- è¦ä¹ˆä¸ä¸å‰é¢çš„å­æ•°ç»„è¿æ¥ï¼Œè‡ªæˆä¸€æ´¾ï¼Œè‡ªå·±ä½œä¸ºä¸€ä¸ªå­æ•°ç»„\n\n### 3.2. çŠ¶æ€è½¬ç§»æ–¹ç¨‹\n\nä¾ç„¶ä½¿ç”¨æ•°å­¦å½’çº³æ³•æ¥æ‰¾çŠ¶æ€è½¬ç§»å…³ç³»ï¼šå‡è®¾æˆ‘ä»¬å·²ç»ç®—å‡ºäº†Â `dp[i-1]`ï¼Œå¦‚ä½•æ¨å¯¼å‡ºÂ `dp[i]`Â å‘¢ï¼Ÿ\n\n```javascript\n// è¦ä¹ˆè‡ªæˆä¸€æ´¾ï¼Œè¦ä¹ˆå’Œå‰é¢çš„å­æ•°ç»„åˆå¹¶ \nvar dp[i] = Math.max(nums[i], nums[i] + dp[i - 1]);\n```\n\n### 3.3. ä»£ç å®ç°\n\n- â‘   `dp[i]` è¡¨ç¤ºä»¥ `nums[i]` ç»“å°¾çš„è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œ\n- â‘¡  base case\n- â‘¢ éå†ï¼Œä½¿ç”¨çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¾—åˆ° dp æ•°ç»„\n- â‘£  éå† dp æ•°ç»„ï¼Œæ‰¾åˆ°æœ€å¤§å€¼\n\n```javascript\n/**  \n * @description æœ€å¤§å­æ•°ç»„å’Œï¼ŒåŠ¨æ€è§„åˆ’æ€è·¯  \n * @param {number[]} nums  \n * @return {number} è¿”å›æœ€å¤§å­æ•°ç»„å’Œ  \n */  \nvar maxSubArray = function (nums) {  \n    // â‘   dp[i] è¡¨ç¤ºä»¥ nums[i] ç»“å°¾çš„è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œ  \n    let dp = new Array(nums.length);  \n    // â‘¡  base case    dp[0] = nums[0];  \n    // â‘¢ éå†ï¼Œä½¿ç”¨çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¾—åˆ° dp æ•°ç»„  \n    for (let i = 1; i < nums.length; i++) {  \n        dp[i] = Math.max(nums[i], dp[i - 1] + nums[i]);  \n    }  \n    // â‘£  éå† dp æ•°ç»„ï¼Œæ‰¾åˆ°æœ€å¤§å€¼ \n    let res = -10000 * 100000;   \n    for (let i = 0; i < dp.length; i++) {  \n        res = Math.max(res, dp[i]);  \n    }  \n    return res;  \n};\n```\n\n### 3.4. å¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦åˆ†æï¼š\n1. ç¬¬ä¸€ä¸ªå¾ªç¯ï¼šéå†æ•°ç»„å¡«å…… dp æ•°ç»„ï¼Œéœ€è¦ O(n) æ—¶é—´ã€‚\n2. ç¬¬äºŒä¸ªå¾ªç¯ï¼šéå† dp æ•°ç»„æ‰¾æœ€å¤§å€¼ï¼Œä¹Ÿéœ€è¦ O(n) æ—¶é—´ã€‚\n3. æ€»çš„æ—¶é—´å¤æ‚åº¦ï¼š`O(n) + O(n) = O(n)`ï¼Œå…¶ä¸­ n æ˜¯è¾“å…¥æ•°ç»„çš„é•¿åº¦ã€‚\n\nç©ºé—´å¤æ‚åº¦åˆ†æï¼š\n- ä½¿ç”¨äº†ä¸€ä¸ªé¢å¤–çš„ dp æ•°ç»„ï¼Œé•¿åº¦ä¸è¾“å…¥æ•°ç»„ç›¸åŒã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼š`O(n)`\n\n## 4. æ€è·¯ä¸‰ï¼šæ»‘åŠ¨çª—å£\n\n### 4.1. æ€è·¯\n\n- **çª—å£å†…å…ƒç´ ä¹‹å’Œå¤§äºç­‰äº 0 æ—¶**æ‰©å¤§çª—å£\n- **åœ¨çª—å£å†…å…ƒç´ ä¹‹å’Œå°äº 0 æ—¶**ç¼©å°çª—å£\n- åœ¨æ¯æ¬¡ç§»åŠ¨çª—å£æ—¶æ›´æ–°ç­”æ¡ˆ\n\n### 4.2. ä»£ç å®ç°\n\n```javascript\n/**\n * @description æœ€å¤§å­æ•°ç»„å’Œï¼Œæ»‘åŠ¨çª—å£æ€è·¯\n * @param {number[]} nums\n * @return {number} è¿”å›æœ€å¤§å­æ•°ç»„å’Œ\n */\nvar maxSubArray = function (nums) {\n  let res = -10000 * 100000;\n  // â‘   åˆå§‹åŒ–å·¦æŒ‡é’ˆï¼Œå³æŒ‡é’ˆï¼Œçª—å£å†…å…ƒç´ çš„å’Œ\n  let left = 0; // å·¦æŒ‡é’ˆ\n  let right = 0; // å³æŒ‡é’ˆ\n  let windowSum = 0; // çª—å£å†…å…ƒç´ çš„å’Œ\n\n  // â‘¡  éå†ï¼Œä½¿ç”¨æ»‘åŠ¨çª—å£æ€è·¯\n  while (right < nums.length) {\n    // â‘¢  æ›´æ–° windowSum\n    windowSum += nums[right];\n    // â‘£  æ›´æ–°å³æŒ‡é’ˆ\n    right++;\n    // â‘¤  æ›´æ–°ç»“æœ\n    res = Math.max(res, windowSum);\n    // â‘¥  åˆ¤æ–­æ˜¯å¦éœ€è¦æ”¶ç¼©å·¦æŒ‡é’ˆ\n    while (windowSum < 0) {\n      // â‘¦  æ›´æ–° windowSum\n      windowSum -= nums[left];\n      left++;\n    }\n  }\n  return res;\n};\n\n```\n\n### 4.3. å¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦åˆ†æï¼š\n1. å¤–å±‚ while å¾ªç¯ï¼šå³æŒ‡é’ˆ right ä» 0 ç§»åŠ¨åˆ° nums.lengthï¼Œè¿™éœ€è¦ O(n) æ—¶é—´ã€‚\n2. å†…å±‚ while å¾ªç¯ï¼šå·¦æŒ‡é’ˆ left æœ€å¤šä¹Ÿåªä¼šä» 0 ç§»åŠ¨åˆ° nums.lengthã€‚\n3. è™½ç„¶æœ‰åµŒå¥—çš„å¾ªç¯ï¼Œä½†æ¯ä¸ªå…ƒç´ æœ€å¤šè¢«è®¿é—®ä¸¤æ¬¡ï¼ˆä¸€æ¬¡è¢«åŠ å…¥çª—å£ï¼Œä¸€æ¬¡è¢«ç§»å‡ºçª—å£ï¼‰ã€‚\n4. æ€»çš„æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯è¾“å…¥æ•°ç»„çš„é•¿åº¦ã€‚\nç©ºé—´å¤æ‚åº¦åˆ†æï¼š\n- ä½¿ç”¨äº†å¸¸æ•°é¢å¤–ç©ºé—´ï¼ˆleft, right, windowSum, resï¼‰ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\n## 5. å‚è€ƒ\n\n- https://labuladong.online/algo/dynamic-programming/maximum-subarray\n\n","3804aeb931b657bda3ee2f64ae5a7e25":"\n# ç‹¬ä¸€æ— äºŒçš„å‡ºç°æ¬¡æ•°\n\n`#2024/07/28` `#leetcode` `#ç®—æ³•/å“ˆå¸Œ` \n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/51c99350178f71d2c19ebb91fce2e509.png)\n\n## è§£é¢˜æ€è·¯\n\n- ä½¿ç”¨  `å“ˆå¸Œ`\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} arr\n * @return {boolean}\n */\nvar uniqueOccurrences = function (arr) {\n  const map = new Map();\n  for (let i = 0; i < arr.length; i++) {\n    map.set(arr[i], (map.get(arr[i]) || 0) + 1);\n  }\n  const set = new Set();\n  for (const value of map.values()) {\n    // å¦‚æœ set ä¸­å·²ç»å­˜åœ¨ valueï¼Œè¯´æ˜å‡ºç°æ¬¡æ•°é‡å¤,ç›´æ¥è¿”å› false\n    if (set.has(value)) {\n      return false;\n    }\n    set.add(value);\n  }\n  // å¦‚æœæ²¡æœ‰å‡ºç°æ¬¡æ•°é‡å¤ï¼Œè¿”å› true\n  return true;\n};\n\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n## é”™è¯¯è®°å½•\n\n","4ed723bc942553bb96c29857b65ef740":"\n# åˆå¹¶åŒºé—´\n\n\n`#leetcode`   `#2024/08/18`  `#ç®—æ³•/åŒºé—´é—®é¢˜`   \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240818205928.png)\n\n## 2. æ€è·¯ä¸€ï¼šåŒºé—´é—®é¢˜\n\næ‰€è°“**åŒºé—´é—®é¢˜**ï¼Œå°±æ˜¯**çº¿æ®µé—®é¢˜**ï¼Œè®©ä½ åˆå¹¶æ‰€æœ‰çº¿æ®µã€æ‰¾å‡ºçº¿æ®µçš„äº¤é›†ç­‰ç­‰ã€‚ä¸»è¦æœ‰**ä¸¤ä¸ªæŠ€å·§**ï¼š\n\n1. **æ’åº**\n\t- å…ˆæŒ‰ç…§èµ·ç‚¹**å‡åº**æ’åºï¼Œ\n\t- è‹¥èµ·ç‚¹ç›¸åŒï¼Œåˆ™æŒ‰ç…§ç»ˆç‚¹**é™åº**æ’åºã€‚\n\t- ![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240818211143.png)\n2. **ç”»å›¾**ã€‚å°±æ˜¯è¯´ä¸è¦å·æ‡’ï¼Œå‹¤åŠ¨æ‰‹ï¼Œä¸¤ä¸ªåŒºé—´çš„ç›¸å¯¹ä½ç½®åˆ°åº•æœ‰å‡ ç§å¯èƒ½ï¼Œä¸åŒçš„ç›¸å¯¹ä½ç½®æˆ‘ä»¬çš„ä»£ç åº”è¯¥æ€ä¹ˆå»å¤„ç†ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Interval Problems.gif|600)\n\næœ€ç»ˆå¦‚ä¸‹å›¾ï¼š\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240818210720.png)\n### 2.1. ä»£ç å®ç°\n\n```javascript hl:8,13,19,22,26\n/**\n * @description åˆå¹¶åŒºé—´\n * @param {number[][]} intervals\n * @return {number[][]}\n */\nvar merge = function (intervals) {\n  let res = [];\n  //:::: â‘  å…ˆæŒ‰ç…§åŒºé—´çš„èµ·å§‹ä½ç½®æ’åºï¼Œå‡åºæ’åº,å¦‚æœèµ·å§‹ä½ç½®ç›¸åŒï¼Œåˆ™æŒ‰ç…§ç»“æŸä½ç½®é™åºæ’åº\n  intervals.sort((a, b) => a[0] - b[0] || b[1] - a[1]);\n\n  // å› ä¸ºå·²ç»æŒ‰ç…§åŒºé—´çš„èµ·å§‹ä½ç½®æ’åºäº†ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å°†ç¬¬ä¸€ä¸ªåŒºé—´æ”¾å…¥ç»“æœæ•°ç»„ä¸­\n  res.push(intervals[0]);\n  //:::: â‘¡ éå†åŒºé—´æ•°ç»„\n  for (let i = 1; i < intervals.length; i++) {\n    let currInterval = intervals[i];\n    // è·å–ç»“æœæ•°ç»„ä¸­æœ€åä¸€ä¸ªåŒºé—´\n    let lastInterval = res[res.length - 1];\n\n    //:::: â‘¢ åˆ¤æ–­å½“å‰åŒºé—´çš„èµ·å§‹ä½ç½®æ˜¯å¦å°äºç­‰äºç»“æœæ•°ç»„ä¸­æœ€åä¸€ä¸ªåŒºé—´çš„ç»“æŸä½ç½®\n    // å¦‚æœå°äºç­‰äºï¼Œåˆ™è¯´æ˜ä¸¤ä¸ªåŒºé—´æœ‰é‡å ï¼Œå¯ä»¥åˆå¹¶\n    if (currInterval[0] <= lastInterval[1]) {\n      //:::: â‘£ æ›´æ–°ç»“æœæ•°ç»„ä¸­æœ€åä¸€ä¸ªåŒºé—´çš„ç»“æŸä½ç½®\n      // æ›´æ–°ä¸ºå½“å‰åŒºé—´çš„ç»“æŸä½ç½®å’Œç»“æœæ•°ç»„ä¸­æœ€åä¸€ä¸ªåŒºé—´çš„ç»“æŸä½ç½®çš„æœ€å¤§å€¼\n      lastInterval[1] = Math.max(lastInterval[1], currInterval[1]);\n    } else {\n      //:::: â‘¤ å¦‚æœä¸é‡å ï¼Œåˆ™ç›´æ¥å°†å½“å‰åŒºé—´æ”¾å…¥ç»“æœæ•°ç»„ä¸­\n      res.push(currInterval);\n    }\n  }\n  return res;\n};\n\n```\n\n### 2.2. å¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦åˆ†æï¼š\n1. æ’åºï¼šä½¿ç”¨äº† JavaScript çš„**å†…ç½®æ’åºæ–¹æ³•**ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º `O(n log n)`ï¼Œå…¶ä¸­ n æ˜¯åŒºé—´çš„æ•°é‡ã€‚\n2. éå†åŒºé—´ï¼šä¸€æ¬¡çº¿æ€§éå†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ã€‚\n3. æ€»çš„æ—¶é—´å¤æ‚åº¦ï¼š`O(n log n) + O(n) = O(n log n)`ï¼Œä¸»è¦ç”±æ’åºæ­¥éª¤å†³å®šã€‚\n\nç©ºé—´å¤æ‚åº¦åˆ†æï¼š\n1. ç»“æœæ•°ç»„ resï¼šåœ¨æœ€åæƒ…å†µä¸‹ï¼ˆæ²¡æœ‰é‡å çš„åŒºé—´ï¼‰ï¼Œå¯èƒ½éœ€è¦å­˜å‚¨æ‰€æœ‰çš„è¾“å…¥åŒºé—´ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(n)ã€‚\n2. æ’åºï¼šJavaScript çš„æ’åºç®—æ³•é€šå¸¸ä½¿ç”¨é¢å¤–çš„ O(log n) åˆ° O(n) çš„ç©ºé—´ã€‚\n3. æ€»çš„ç©ºé—´å¤æ‚åº¦ï¼š`O(n)`ï¼Œä¸»è¦ç”±ç»“æœæ•°ç»„å’Œæ’åºè¿‡ç¨‹å†³å®šã€‚\n\n## 3. é”™è¯¯è®°å½•\n\n> [!danger]\n> `Array.sort`  å‡åºä¸º `a - b` ï¼Œé™åºä¸º `b - a `\n\n- å…ˆå‡\n- è‹¥ç›¸åŒï¼Œå†é™åº `a[0] - b[0] || b[1] - a[1]`\n\n```javascript hl:1\n// æŒ‰ç…§åŒºé—´çš„èµ·å§‹ä½ç½®æ’åºï¼Œå‡åºæ’åº,å¦‚æœèµ·å§‹ä½ç½®ç›¸åŒï¼Œåˆ™æŒ‰ç…§ç»“æŸä½ç½®é™åºæ’\nintervals.sort((a, b) => a[0] - b[0] || b[1] - a[1]);\n```\n\n","d5accfa733565b598a516b98ad5d5666":"\n# åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯\n\n`#2024/07/28` `#leetcode` `#ç®—æ³•/åè½¬` \n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/08a29ef8ddbb835cf3d278a38cfa500a.png)\n\n## è§£é¢˜æ€è·¯\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/8b5f7205a78d8eedaed7e17010c7aff6.png)\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {string} s\n * @return {string}\n */\nvar reverseWords = function (s) {\n  // 1ã€å»é™¤é¦–å°¾ç©ºæ ¼ï¼Œå¹¶å°†å¤šä¸ªç©ºæ ¼æ›¿æ¢ä¸ºå•ä¸ªç©ºæ ¼\n  s = s.trim().replace(/\\s+/g, \" \");\n  // 2ã€å°†å­—ç¬¦ä¸²åè½¬\n  s = s.split(\"\").reverse().join(\"\");\n  // 3ã€å°†å­—ç¬¦ä¸²æŒ‰ç©ºæ ¼åˆ†å‰²ä¸ºæ•°ç»„\n  const words = s.split(\" \");\n  // 4ã€éå†æ•°ç»„ï¼Œå°†æ¯ä¸ªå•è¯åè½¬\n  for (let i = 0; i < words.length; i++) {\n    words[i] = words[i].split(\"\").reverse().join(\"\");\n  }\n  // 5ã€å°†åè½¬åçš„å•è¯æ•°ç»„é‡æ–°ç»„åˆæˆå­—ç¬¦ä¸²\n  return words.join(\" \");\n};\n\n```\n\n> - å¦‚æœä¸èƒ½ä½¿ç”¨ `Array.reverse`ï¼Œåˆ™å¯ä»¥ä½¿ç”¨`åŒæŒ‡é’ˆ`è‡ªå·±å†™ä¸€ä¸ª`è¾…åŠ©å‡½æ•°`\n\n","01dac0e752c05537b3bf0af5d321576a":"\n# åè½¬å­—ç¬¦ä¸²ä¸­çš„å…ƒéŸ³å­—æ¯\n\n`#2024/07/28` `#leetcode`  `#ç®—æ³•/åŒæŒ‡é’ˆ`  \n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/e0cc283efc425dcc42f1db528e1cf695.png)\n\n## è§£é¢˜æ€è·¯\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/c3bf82b3e851ebcc70cdaeda2ff02021.png)\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {string} s\n * @return {string}\n */\nvar reverseVowels = function (s) {\n  // å…ƒéŸ³å­—æ¯\n  const vowels = \"aeiouAEIOU\";\n  // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°ç»„\n  const arr = s.split(\"\");\n  // å·¦æŒ‡é’ˆ\n  let left = 0;\n  // å³æŒ‡é’ˆ\n  let right = arr.length - 1;\n  // å½“å·¦æŒ‡é’ˆå°äºå³æŒ‡é’ˆæ—¶ï¼Œæ‰§è¡Œå¾ªç¯\n  while (left < right) {\n    // å½“å·¦æŒ‡é’ˆå¯¹åº”çš„å­—ç¬¦ä¸æ˜¯å…ƒéŸ³å­—æ¯æ—¶ï¼Œå·¦æŒ‡é’ˆå³ç§»\n    while (left < right && vowels.indexOf(arr[left]) === -1) {\n      left++;\n    }\n    // å½“å³æŒ‡é’ˆå¯¹åº”çš„å­—ç¬¦ä¸æ˜¯å…ƒéŸ³å­—æ¯æ—¶ï¼Œå³æŒ‡é’ˆå·¦ç§»\n    while (left < right && vowels.indexOf(arr[right]) === -1) {\n      right--;\n    }\n    // è¿™æ—¶ï¼Œå·¦æŒ‡é’ˆå¯¹åº”çš„å­—ç¬¦æ˜¯å…ƒéŸ³å­—æ¯ï¼Œå³æŒ‡é’ˆå¯¹åº”çš„å­—ç¬¦ä¹Ÿæ˜¯å…ƒéŸ³å­—æ¯\n    // äº¤æ¢å·¦å³æŒ‡é’ˆå¯¹åº”çš„å­—ç¬¦\n    [arr[left], arr[right]] = [arr[right], arr[left]];\n    // å·¦æŒ‡é’ˆå³ç§»\n    left++;\n    // å³æŒ‡é’ˆå·¦ç§»\n    right--;\n  }\n  return arr.join(\"\");\n};\n\n```\n\n## é”™è¯¯è®°å½•\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/10e8be78b37b1a4031f14dae7dcab7e5.png)\n\n","cc3465a6ef9c576c979ded33cd91a4d8":"\n# è½®è½¬æ•°ç»„\n\n\n`#leetcode`   `#2024/08/25`  `#ç®—æ³•`  \n\n> å¦å¤–è§ [12. ç®—æ³•/3. åˆ·é¢˜ç¯‡/3. LeetCode ç»å…¸ 150 é¢˜/6.  è½®è½¬æ•°ç»„|6.  è½®è½¬æ•°ç»„](/post/cc3465a6ef9c576c979ded33cd91a4d8.html#12-ç®—æ³•/3-åˆ·é¢˜ç¯‡/3-LeetCode-ç»å…¸-150-é¢˜/6--è½®è½¬æ•°ç»„|6--è½®è½¬æ•°ç»„)\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›®åŠç†è§£ \n\nhttps://leetcode.cn/problems/rotate-array/\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825091019.png)\n\nè¦æ±‚ï¼š\n-  ä½¿ç”¨ç©ºé—´å¤æ‚åº¦ä¸ºÂ `O(1)`Â çš„Â **åŸåœ°**Â ç®—æ³•è§£å†³\n\n## 2. æ€è·¯ä¸€ï¼šä½¿ç”¨é¢å¤–çš„æ•°ç»„éå†æˆ–è€…ä½¿ç”¨Array çš„æ–¹æ³•\n\n- ä½¿ç”¨é¢å¤–çš„æ•°ç»„éå†è§£å†³\n- ç›´æ¥ Array.splice æˆ– Array.slice è§£å†³\n\nä½†ä»¥ä¸Šç©ºé—´å¤æ‚åº¦ä¸ç¬¦åˆè¦æ±‚ï¼Œéƒ½æ˜¯ `O(n)`\n\n## 3. æ€è·¯äºŒï¼šä¸‰æ¬¡ç¿»è½¬å³å¯\n\n> [!danger]\n>  ä¸‰æ¬¡ç¿»è½¬çš„æ•ˆæœï¼Œç”¨ç¬”ç”»ç”»å°±çŸ¥é“äº†\n\n```javascript\n/**  \n * @param {number[]} nums  \n * @param {number} k  \n * @return {void} Do not return anything, modify nums in-place instead.  \n */\n var rotate = function(nums, k) {  \n    // â‘   1. ç¿»è½¬æ•´ä¸ªæ•°ç»„  \n    // â‘   2. ç¿»è½¬å‰ k ä¸ªå…ƒç´   \n    // â‘   3. ç¿»è½¬å n-k ä¸ªå…ƒç´   \n    // â‘   1. ç¿»è½¬æ•´ä¸ªæ•°ç»„  \n    reverse(nums, 0, nums.length - 1);  \n    // â‘   2. ç¿»è½¬å‰ k ä¸ªå…ƒç´   \n    reverse(nums, 0, k % nums.length - 1);  \n    // â‘   3. ç¿»è½¬å n-k ä¸ªå…ƒç´   \n    reverse(nums, k % nums.length, nums.length - 1);  \n  \n};  \n  \nfunction reverse(nums, start, end) {  \n    while (start < end) {  \n        let temp = nums[start];  \n        nums[start] = nums[end];  \n        nums[end] = temp;  \n        start++;  \n        end--;  \n    }  \n}\n```\n\n## 4. å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦åˆ†æï¼š\n\t1. æ•´ä¸ªæ•°ç»„çš„ç¿»è½¬ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚\n\t2. å‰ k ä¸ªå…ƒç´ çš„ç¿»è½¬ï¼šO(k)\n\t3. å n-k ä¸ªå…ƒç´ çš„ç¿»è½¬ï¼šO(n-k)\n\t4. æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n) + O(k) + O(n-k) = O(2n) = O(n)\n- ç©ºé—´å¤æ‚åº¦åˆ†æï¼š \n\t- è¿™ä¸ªè§£å†³æ–¹æ¡ˆåªä½¿ç”¨äº†å¸¸æ•°çº§çš„é¢å¤–ç©ºé—´ï¼ˆtemp å˜é‡ï¼‰ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)ã€‚\n\nè¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„ä¼˜ç‚¹ï¼š\n\n1. åŸåœ°æ“ä½œï¼šä¸éœ€è¦é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œç¬¦åˆé¢˜ç›®è¦æ±‚\n2. æ—¶é—´æ•ˆç‡é«˜ï¼šåªéœ€è¦éå†æ•´ä¸ªæ•°ç»„ä¸€æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)\n3. ä»£ç ç®€æ´ï¼šå®ç°é€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤Â \n\n","f502e5dda0145ba893e47ed8c5df69da":"\n# é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯\n\n`#2024/08/25` `#leetcode`  \n\n> åŒ [12. ç®—æ³•/3. åˆ·é¢˜ç¯‡/1. LeetCode ç²¾å 75 é¢˜/8. é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯|8. é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯](/post/f502e5dda0145ba893e47ed8c5df69da.html#12-ç®—æ³•/3-åˆ·é¢˜ç¯‡/1-LeetCode-ç²¾å-75-é¢˜/8-é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯|8-é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯)\n\n","15b7b509bb525e6eb7c4e24a2643d3d2":"\n# äº¤æ›¿åˆå¹¶å­—ç¬¦ä¸²\n\n\n`#ç®—æ³•/åŒæŒ‡é’ˆ`  `#2024/07/28` `#leetcode` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›® \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/d4ea1f26f2d3ac5e04cf57f5500ed2e4.png)\n\n### é¢˜ç›®é‡ç‚¹\n\n- äº¤æ›¿åˆå¹¶\n- æœ€åçš„ç›´æ¥åˆ°æœ«å°¾å³å¯\n\n## æ€è·¯\n\n- ä¹Ÿæ˜¯`åŒæŒ‡é’ˆæŠ€å·§`\n- ä» `0` å¼€å§‹\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {string} word1\n * @param {string} word2\n * @return {string}\n */\nvar mergeAlternately = function (word1, word2) {\n  let res = \"\"; // ä¿å­˜ç»“æœ\n  const m = word1.length;\n  const n = word2.length;\n  const max = Math.max(m, n); // å–æœ€å¤§é•¿åº¦\n\n  for (let k = 0; k < max; k++) {\n    // å¦‚æœkå°äºm, åˆ™å°†word1çš„ç¬¬kä¸ªå­—ç¬¦åŠ å…¥åˆ°resä¸­\n    if (k < m) {\n      res += word1[k];\n    }\n    // å¦‚æœkå°äºn, åˆ™å°†word2çš„ç¬¬kä¸ªå­—ç¬¦åŠ å…¥åˆ°resä¸­\n    if (k < n) {\n      res += word2[k];\n    }\n  }\n\n  return res;\n};\n\n```\n\n> **æ³¨æ„ï¼šå°±æ²¡æœ‰æœ€åå­—ç¬¦ä¸²æ‹¼æ¥ç¯èŠ‚ï¼Œæ­£å¸¸éå†å°±å¥½**\n\n## å‚è€ƒ\n\n- [https://leetcode.cn/problems/merge-strings-alternately/submissions/548008565/?envType=study-plan-v2&envId=leetcode-75](https://leetcode.cn/problems/merge-strings-alternately/submissions/548008565/?envType=study-plan-v2&envId=leetcode-75)\n\n","1f0a1c02064d5934a0a796e73759b1e6":"\n# ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°\n\n\n`#leetcode`   `#2024/08/25`  `#ç®—æ³•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\nhttps://leetcode.cn/problems/first-missing-positive/\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240825101102.png)\n\n## æ€è·¯ä¸€\n\n1. **èŒƒå›´åˆ†æ**ï¼š\n\t- æœ€å°çš„ç¼ºå¤±æ­£æ•´æ•°ä¸€å®šåœ¨ `[1, n+1]` ä¹‹é—´ï¼Œå…¶ä¸­ `n` æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚\n\t- å¦‚æœæ•°ç»„åŒ…å«äº†ä» 1 åˆ° n çš„æ‰€æœ‰æ•°ï¼Œé‚£ä¹ˆç¼ºå¤±çš„æ­£æ•´æ•°å°±æ˜¯ `n+1`ã€‚\n2. **åŸåœ°ä¿®æ”¹æ•°ç»„**ï¼šæŠŠæ¯ä¸ª**å·²ç»å­˜åœ¨çš„æ•°**å˜æˆå®ƒçš„è´Ÿæ•°\n3. **æŸ¥æ‰¾ç¼ºå¤±çš„æ•°**ï¼š\n\t- åœ¨é‡æ–°æ’åˆ—æ•°ç»„åï¼Œéå†æ•°ç»„\n\t- æ‰¾åˆ°ç¬¬ä¸€ä¸ªä½ç½® `i` ä½¿å¾— `nums[i] != i + 1`ï¼Œåˆ™ `i + 1` å°±æ˜¯ç¼ºå¤±çš„æœ€å°æ­£æ•´æ•°ã€‚\n\n### ä¸¾ä¸ªä¾‹å­\n\n- åˆå§‹æ•°ç»„ï¼š`[3, 4, -1, 1]` æ•°ç»„é•¿åº¦ `n = 4`\n- é¢„å¤„ç†ï¼ˆå°†ä¸åœ¨ `[1, n]` èŒƒå›´å†…çš„æ•°æ›¿æ¢ä¸º `n+1`ï¼š\n    - `-1` è¢«æ›¿æ¢ä¸º `5` (n+1) ç»“æœï¼š`[3, 4, 5, 1]`\n- åŸåœ°ä¿®æ”¹æ•°ç»„ï¼šæŠŠæ¯ä¸ª**å·²ç»å­˜åœ¨çš„æ•°**å˜æˆå®ƒçš„è´Ÿæ•°\n\t- å·²ç»å­˜åœ¨çš„æ•°ï¼šå³ `<= n = 4` çš„æ•°\n\t- å…¶ä»–çš„æ•°ä¸å˜\n- æ‰¾åˆ°å¤§äº 0 çš„æ•°ï¼Œè¿”å›å®ƒçš„`ç´¢å¼•+1`\n\n## ä»£ç å®ç°\n\n```javascript\n/**  \n * @param {number[]} nums  \n * @return {number}  \n */  \nvar firstMissingPositive = function (nums) {  \n    const n = nums.length;  \n    // Step 1: å°†æ‰€æœ‰å°äºç­‰äº0æˆ–å¤§äºnçš„æ•°æ›¿æ¢ä¸ºn+1  \n    for (let i = 0; i < n; i++) {  \n        if (nums[i] <= 0 || nums[i] > n) {  \n            nums[i] = n + 1;  \n        }  \n    }  \n    // Step 2: ä½¿ç”¨åŸåœ°å“ˆå¸Œï¼Œå°†æ¯ä¸ªæ•°æ”¾åˆ°å¯¹åº”çš„ä½ç½®  \n    // ::::æ”¾ä»–çš„è´Ÿæ•°ï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°å‡ºç°è¿‡ï¼Œå¦‚æœå¤§äº 0 è¯´æ˜æ²¡å‡ºç°è¿‡ ::::    \n    for (let i = 0; i < n; i++) {  \n        let num = Math.abs(nums[i]);  \n        // å¦‚æœ num <= nï¼Œå°† nums[num-1] å˜ä¸ºè´Ÿæ•°  \n        // è¯´æ˜ num å‡ºç°è¿‡  \n        if (num <= n) {  \n            nums[num - 1] = -Math.abs(nums[num - 1]);  \n        }  \n        // è¿˜æ˜¯æ­£æ•°ï¼Œè¯´æ˜ num æ²¡å‡ºç°è¿‡  \n    }  \n    // Step 3: æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ­£æ•°ï¼Œå…¶ç´¢å¼• +1 å°±æ˜¯ç¼ºå¤±çš„æœ€å°æ­£æ•°  \n    for (let i = 0; i < n; i++) {  \n        if (nums[i] > 0) {  \n            return i + 1;  \n        }  \n    }  \n    // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™è¿”å›n+1  \n    return n + 1;  \n};\n```\n\n## å¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦åˆ†æï¼š\n1. ç¬¬ä¸€ä¸ªå¾ªç¯ï¼šO(n)\n    - éå†æ•´ä¸ªæ•°ç»„ä¸€æ¬¡ï¼Œå°†ä¸åœ¨ [1, n] èŒƒå›´å†…çš„æ•°æ›¿æ¢ä¸º n+1ã€‚\n2. ç¬¬äºŒä¸ªå¾ªç¯ï¼šO(n)\n    - å†æ¬¡éå†æ•´ä¸ªæ•°ç»„ï¼Œè¿›è¡ŒåŸåœ°å“ˆå¸Œæ ‡è®°ã€‚\n3. ç¬¬ä¸‰ä¸ªå¾ªç¯ï¼šO(n)\n    - æœ€åä¸€æ¬¡éå†æ•°ç»„ï¼Œå¯»æ‰¾ç¬¬ä¸€ä¸ªæ­£æ•°ã€‚\næ€»æ—¶é—´å¤æ‚åº¦ï¼šO(n) + O(n) + O(n) = `O(n)`\n\nç©ºé—´å¤æ‚åº¦åˆ†æï¼š\n- è¿™ä¸ªç®—æ³•ä½¿ç”¨äº†åŸåœ°ä¿®æ”¹çš„æŠ€å·§ï¼Œæ²¡æœ‰ä½¿ç”¨ä»»ä½•é¢å¤–çš„æ•°æ®ç»“æ„ã€‚\n- åªä½¿ç”¨äº†å‡ ä¸ªé¢å¤–çš„å˜é‡ï¼ˆå¦‚ n, i, numï¼‰ï¼Œè¿™äº›å˜é‡çš„ç©ºé—´æ˜¯å¸¸æ•°çº§çš„ã€‚\næ€»ç©ºé—´å¤æ‚åº¦ï¼š`O(1)`\n\nå¤æ‚åº¦åˆ†ææ€»ç»“ï¼š\n- æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n- ç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nè¿™ä¸ªç®—æ³•çš„ä¼˜ç‚¹åœ¨äºï¼š\n\n1. æ—¶é—´æ•ˆç‡é«˜ï¼šåªéœ€çº¿æ€§æ—¶é—´å°±èƒ½è§£å†³é—®é¢˜ã€‚\n2. ç©ºé—´æ•ˆç‡é«˜ï¼šé€šè¿‡åŸåœ°ä¿®æ”¹æ•°ç»„ï¼Œé¿å…äº†ä½¿ç”¨é¢å¤–ç©ºé—´ã€‚\n\n","03c47938e46f549f987fd1e8e329c23c":"\n# åˆ¤æ–­å­åºåˆ—\n\n\n`#2024/07/28` `#ç®—æ³•/åŒæŒ‡é’ˆ`  `#leetcode` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/100200a42cdfb5c4b386f9fa25baf3b1.png)\n\n## è§£é¢˜æ€è·¯\n\n![640.gif](https://832-1310531898.cos.ap-beijing.myqcloud.com/fd27ca36abe5b0ffbc24048d5e39f11e.gif)\n\n- ä½¿ç”¨`å¿«æ…¢æŒ‡é’ˆ`éå†\n- éå†å®Œåçœ‹`æ…¢æŒ‡é’ˆæ˜¯å¦ç­‰äºå­åºåˆ—çš„é•¿åº¦`\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {string} s\n * @param {string} t\n * @return {boolean}\n */\nvar isSubsequence = function (s, t) {\n  let slow = 0; // æ…¢æŒ‡é’ˆ\n  let fast = 0; // å¿«æŒ‡é’ˆ\n\n  // ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆï¼Œéå†å­—ç¬¦ä¸² t\n  while (fast < t.length) {\n    // å½“ s[slow] ä¸ t[fast] ç›¸ç­‰æ—¶ï¼Œæ…¢æŒ‡é’ˆå‘åç§»åŠ¨ä¸€ä½\n    if (s[slow] === t[fast]) {\n      slow++;\n    }\n    // å¿«æŒ‡é’ˆå‘åç§»åŠ¨ä¸€ä½ï¼Œæ­£å¸¸é€Ÿåº¦ç§»åŠ¨\n    fast++;\n  }\n  // å¦‚æœæ…¢æŒ‡é’ˆçš„å€¼ç­‰äº s çš„é•¿åº¦ï¼Œè¯´æ˜ s æ˜¯ t çš„å­åºåˆ—\n  return slow === s.length;\n};\n\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n## è¿›é˜¶\n\næ¯”è¾ƒå›°éš¾ï¼Œè¯¦ç»†é¢˜è§£ï¼š[äºŒåˆ†æŸ¥æ‰¾é«˜æ•ˆåˆ¤å®šå­åºåˆ—](https://labuladong.online/algo/frequency-interview/binary-search-subsequence/)\n\n## é”™è¯¯è®°å½•\n\n","17f7cf806e895e5cb22de7736161bb1f":"\n# çŸ©é˜µç½®é›¶\n\n\n`#leetcode`   `#2024/08/26`  `#ç®—æ³•`  `#ç®—æ³•/çŸ©é˜µ` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n> åŸé¢˜ï¼š https://leetcode.cn/problems/set-matrix-zeroes/\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240826073718.png)\n\né¢˜æ„å¥½ç†è§£ï¼Œè¯»ä¸€éå°±çŸ¥é“äº†\n\n## è§£é¢˜æ€è·¯\n\nä½¿ç”¨åŸçŸ©é˜µçš„ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—æ¥è®°å½•æ˜¯å¦éœ€è¦ç½®ä¸º 0ï¼Œå…·ä½“æ€è·¯å¦‚ä¸‹ï¼š\n1. **æ ‡è®°ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—**\n    - é¦–å…ˆæ£€æŸ¥ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—æ˜¯å¦æœ‰é›¶ï¼Œå¹¶ç”¨ä¸¤ä¸ªå¸ƒå°”å˜é‡Â `firstRowZero`Â å’ŒÂ `firstColZero`Â è®°å½•ä¸‹æ¥ã€‚\n2. **ä½¿ç”¨ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—ä½œä¸ºæ ‡è®°**\n    - ä»**ç¬¬äºŒè¡Œ**å’Œ**ç¬¬äºŒåˆ—**å¼€å§‹éå†çŸ©é˜µ\n        - å¦‚æœé‡åˆ°é›¶ï¼Œå°±åœ¨å¯¹åº”çš„**ç¬¬ä¸€è¡Œ**å’Œ**ç¬¬ä¸€åˆ—**çš„ä½ç½®ä¸Šæ ‡è®°ä¸ºé›¶\n3. **æ ¹æ®æ ‡è®°ç½®é›¶**\n    - å†æ¬¡éå†çŸ©é˜µï¼ˆä»ç¬¬äºŒè¡Œå’Œç¬¬äºŒåˆ—å¼€å§‹ï¼‰\n    - æ ¹æ®ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—çš„æ ‡è®°ï¼Œå¦‚æœæ˜¯ 0ï¼Œåˆ™å°†å¯¹åº”çš„å…ƒç´ ç½®é›¶\n4. **å¤„ç†ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—**\n    - æ ¹æ®Â `firstRowZero`Â å’ŒÂ `firstColZero`Â çš„å€¼ï¼Œå†³å®šæ˜¯å¦å°†ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—ç½®é›¶ã€‚\n\nè¿™ç§æ–¹æ³•é€šè¿‡åœ¨åŸçŸ©é˜µä¸­åˆ©ç”¨ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—è®°å½•çŠ¶æ€ï¼Œé¿å…äº†é¢å¤–çš„ç©ºé—´æ¶ˆè€—ï¼Œç¬¦åˆé¢˜ç›®è¦æ±‚çš„**åŸåœ°**ä¿®æ”¹ã€‚\n\n## ä»£ç å®ç°\n\n```javascript\n/**  \n * @param {number[][]} matrix  \n * @return {void} Do not return anything, modify matrix in-place instead.  \n */var setZeroes = function(matrix) {  \n    const m = matrix.length;  \n    const n = matrix[0].length;  \n    let firstRowHasZero = false;  \n    let firstColHasZero = false;  \n    /*************************************************  \n     * ::::â‘  é¦–å…ˆæ£€æŸ¥ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—æ˜¯å¦æœ‰é›¶ï¼Œ\n     * å¹¶ç”¨ä¸¤ä¸ªå¸ƒå°”å˜é‡`firstRowZero`å’Œ`firstColZero`è®°å½•ä¸‹æ¥  \n     ************************************************/  \n    // æ£€æµ‹ç¬¬ä¸€è¡Œæ˜¯å¦æœ‰ 0 ï¼Œè®°å¾— break    for (let j = 0; j < n; j++) {  \n        if (matrix[0][j] === 0) {  \n            firstRowHasZero = true;  \n            break;  \n        }  \n    }  \n    // æ£€æµ‹ç¬¬ä¸€åˆ—æ˜¯å¦æœ‰ 0 ï¼Œè®°å¾— break    for (let i = 0; i < m; i++) {  \n        if (matrix[i][0] === 0) {  \n            firstColHasZero = true;  \n            break;  \n        }  \n    }  \n    /*************************************************  \n     * :::::â‘¡ éå†é™¤ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—ä»¥å¤–çš„æ‰€æœ‰å…ƒç´ ï¼Œ\n     * å¦‚æœæœ‰é›¶åˆ™å°†å¯¹åº”çš„ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—çš„å…ƒç´ ç½®é›¶  \n     ************************************************/  \n    for (let i = 1; i < m; i++) {  \n        for (let j = 1; j < n; j++) {  \n            if (matrix[i][j] === 0) {  \n            // å°†ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—ä½œä¸ºæ ‡å¿—ä½, æ ‡è®°è¯¥è¡Œæˆ–è¯¥åˆ—æ˜¯å¦éœ€è¦æ¸…é›¶  \n            // å¦‚æœ matrix[i][j] === 0, åˆ™å°† matrix[i][0] å’Œ matrix[0][j] ç½®ä¸º 0               // å³å°†è¯¥è¡Œå’Œè¯¥åˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ç½®ä¸º 0ï¼Œæ ‡è®°è¯¥è¡Œå’Œè¯¥åˆ—éœ€è¦æ¸…é›¶  \n                matrix[i][0] = matrix[0][j] = 0;  \n            }  \n        }  \n    }  \n    /*************************************************  \n     * ::::::â‘¢ æ ¹æ®ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—çš„æ ‡å¿—ä½å¯¹çŸ©é˜µçš„å…¶ä½™å…ƒç´ è¿›è¡Œæ¸…é›¶  \n     ************************************************/  \n    // ä»ç¬¬äºŒè¡Œç¬¬äºŒåˆ—å¼€å§‹éå†ï¼Œå¦‚æœ matrix[i][0] === 0 æˆ– matrix[0][j] === 0ï¼Œ  \n    // åˆ™å°† matrix[i][j] ç½®ä¸º 0    \n    for (let i = 1; i < m; i++) {  \n        for (let j = 1; j < n; j++) {  \n            if (matrix[i][0] === 0 || matrix[0][j] === 0) {  \n                matrix[i][j] = 0;  \n            }  \n        }  \n    }  \n    /*************************************************  \n     * ::::::â‘£ æ ¹æ®ç¬¬ä¸€ä¸ªå…ƒç´ æ ‡è®°çš„ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—æ˜¯å¦éœ€è¦æ¸…é›¶  \n     ************************************************/  \n    // å¦‚æœç¬¬ä¸€è¡Œéœ€è¦æ¸…é›¶  \n    if (firstRowHasZero) {  \n        for (let j = 0; j < n; j++) {  \n            matrix[0][j] = 0;  \n        }  \n    }  \n    // å¦‚æœç¬¬ä¸€åˆ—éœ€è¦æ¸…é›¶  \n    if (firstColHasZero) {  \n        for (let i = 0; i < m; i++) {  \n            matrix[i][0] = 0;  \n        }  \n    }  \n};\n```\n\n## å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦æ˜¯ `O(m*n)`ï¼Œ\n- ç©ºé—´å¤æ‚åº¦æ˜¯ `O(1)`ï¼Œç¬¦åˆé¢˜ç›®è¦æ±‚çš„**åŸåœ°ç®—æ³•**\n\n## é—®é¢˜è®°å½•\n\n### ä½¿ç”¨åŸçŸ©é˜µçš„ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—æ¥è®°å½•çŠ¶æ€ä¸ä¼šæ±¡æŸ“åŸæœ‰æ•°æ®å—ï¼Ÿ\n\nä½¿ç”¨åŸçŸ©é˜µçš„ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—æ¥è®°å½•çŠ¶æ€ä¸ä¼šæ±¡æŸ“åŸæœ‰æ•°æ®ï¼Œå› ä¸ºï¼š\n1. **æå‰è®°å½•çŠ¶æ€**ï¼šåœ¨æ ‡è®°ä¹‹å‰ï¼Œå…ˆç”¨ä¸¤ä¸ªå¸ƒå°”å˜é‡ `firstRowZero` å’Œ `firstColZero` è®°å½•ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—æ˜¯å¦æœ‰é›¶ã€‚\n2. **ä»ç¬¬äºŒè¡Œå’Œç¬¬äºŒåˆ—å¼€å§‹æ ‡è®°**\n\t- åªä»ç¬¬äºŒè¡Œå’Œç¬¬äºŒåˆ—å¼€å§‹ä½¿ç”¨æ ‡è®°ï¼Œé¿å…å½±å“ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—çš„åŸå§‹çŠ¶æ€ã€‚\n\t- è™½ç„¶æ ‡è®°çš„æ˜¯ç¬¬ä¸€è¡Œæˆ–ç¬¬ä¸€åˆ—ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸€è¡Œæˆ–è€…è¿™ä¸€åˆ—å·²ç»æœ‰ 0ï¼Œé‚£ä¹ˆæœ€ç»ˆç¬¬ä¸€è¡Œï¼ˆæˆ–åˆ—ï¼‰æœ€ç»ˆè¿˜å¾—æ˜¯ 0\n3. **æœ€åå¤„ç†ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—**ï¼šæ ¹æ®ä¹‹å‰è®°å½•çš„å¸ƒå°”å˜é‡ï¼Œæœ€åå†å†³å®šæ˜¯å¦å°†ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—ç½®é›¶ã€‚\n\nè¿™æ ·å¯ä»¥å®‰å…¨åœ°ä½¿ç”¨ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—æ¥å­˜å‚¨æ ‡è®°ä¿¡æ¯ï¼Œè€Œä¸å½±å“æœ€ç»ˆç»“æœã€‚\n\n","ea28877c6a3c5d63b81cc22a5204f65c":"\n# åˆ æ‰ä¸€ä¸ªå…ƒç´ ä»¥åå…¨ä¸º 1 çš„æœ€é•¿å­æ•°ç»„\n\n\n`#leetcode`  `#ç®—æ³•/æ»‘åŠ¨çª—å£`  `#2024/07/28` `#ç®—æ³•/åŒæŒ‡é’ˆ`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n> é¢˜æ„å°±æ˜¯æ ‡é¢˜ï¼š`åˆ æ‰ä¸€ä¸ªå…ƒç´ ä»¥åå…¨ä¸º 1 çš„æœ€é•¿å­æ•°ç»„`\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/f25f1a142fcf530dcaf2a1695946b6da.png)\n\n>  ä¸€èˆ¬æ˜¯åˆ é™¤ 0 ï¼Œä½†æœ‰å¯èƒ½ä¹Ÿéœ€è¦åˆ é™¤  1ï¼Œæ¯”å¦‚å…¨éƒ¨ä¸º 1 çš„åœºæ™¯\n\n## è§£é¢˜æ€è·¯\n\n> **ä½¿ç”¨æ»‘åŠ¨çª—å£æŠ€æœ¯ï¼šæ»‘åŠ¨çª—å£çš„æ–¹æ³•éå¸¸é€‚åˆè§£å†³è¿™ç±»\"æœ€é•¿å­æ•°ç»„\"æˆ–\"æœ€çŸ­å­æ•°ç»„\"çš„é—®é¢˜**\n\n### é—®é¢˜åˆ†æ\n\n- æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ä¸ª`æœ€é•¿çš„å­æ•°ç»„`, è¿™ä¸ªå­æ•°ç»„æœ€å¤šåŒ…å«ä¸€ä¸ª`0`ã€‚\n- åˆ é™¤è¿™ä¸ª`0`(å¦‚æœå­˜åœ¨)åï¼Œå­æ•°ç»„åº”è¯¥å…¨éƒ¨ç”±`1`ç»„æˆã€‚\n- å¦‚æœæ•´ä¸ªæ•°ç»„éƒ½æ˜¯`1,`æˆ‘ä»¬ä»ç„¶éœ€è¦åˆ é™¤ä¸€ä¸ªå…ƒç´ ã€‚\n\n### å…·ä½“æ€è·¯\n\n- ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆ (`left` å’Œ `right`)æ¥å®šä¹‰ä¸€ä¸ªçª—å£ï¼Œè¿™ä¸ªçª—å£ä»£è¡¨æˆ‘ä»¬å½“å‰è€ƒè™‘çš„å­æ•°ç»„\n   - æ‰©å¤§çª—å£ï¼š`right++`\n   - ç¼©å°çª—å£ï¼š`left++`\n- è®¡æ•°ç­–ç•¥\n   - æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ä¸ª`æœ€é•¿çš„å­æ•°ç»„`**, è¿™ä¸ªå­æ•°ç»„**`æœ€å¤šåŒ…å«ä¸€ä¸ª0`\n   - **ä¸‹é¢å°±æ˜¯ç»´æŠ¤ 0 çš„ä¸ªæ•°ï¼š**`zeroCount`\n- `zeroCount > 1` æ—¶ï¼Œéœ€è¦ç¼©å°çª—å£ï¼Œå³ `left++ `\n\n## ä»£ç å®ç°\n```javascript\n/**\n * @param {number[]} nums\n * @return {number}\n */\nvar longestSubarray = function (nums) {\n  let left = 0; // å·¦æŒ‡é’ˆ\n  let right = 0; // å³æŒ‡é’ˆ\n  let zeroCount = 0; // 0 çš„ä¸ªæ•°\n  let res = 0; // æœ€é•¿çš„è¿ç»­çš„ 1 çš„ä¸ªæ•°\n\n  // ä½¿ç”¨å¿«æŒ‡é’ˆï¼Œéå†æ•°ç»„\n  for (; right < nums.length; right++) {\n    \n    // å¦‚æœå½“å‰å…ƒç´ æ˜¯ 0ï¼Œå°±å¢åŠ  0 çš„ä¸ªæ•°\n    if (nums[right] === 0) {\n      zeroCount++;\n    }\n\n    // å¦‚æœ 0 çš„ä¸ªæ•°å¤§äº 1ï¼Œå°±éœ€è¦ç§»åŠ¨å·¦æŒ‡é’ˆ,æ¥å‡å°‘0çš„æ•°é‡\n    // è¯´æ˜çª—å£å†… 0 çš„æ•°é‡è¶…è¿‡äº†å…è®¸çš„æœ€å¤§å€¼ï¼Œè¿™æ—¶éœ€è¦æ”¶ç¼©çª—å£\n    while (zeroCount > 1) {\n      // å¦‚æœå·¦æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ æ˜¯ 0ï¼Œå°±å‡å°‘ 0 çš„ä¸ªæ•°\n      if (nums[left] === 0) {\n        zeroCount--;\n      }\n      // å·¦æŒ‡é’ˆå³ç§»\n      left++;\n    }\n\n    // åœ¨æ¯æ¬¡è¿­ä»£ä¸­æ›´æ–°æœ€å¤§çª—å£é•¿åº¦\n    res = Math.max(res, right - left + 1);\n  }\n\n  // é¢˜ç›®è¦æ±‚è¿”å›çš„æ˜¯ 1 çš„ä¸ªæ•°ï¼Œæ‰€ä»¥éœ€è¦å‡å» 1\n  // å¦‚æœæ•´ä¸ªæ•°ç»„éƒ½æ˜¯1ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦åˆ é™¤ä¸€ä¸ªå…ƒç´ \n  return res < nums.length ? res - 1 : nums.length - 1;\n};\n\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œå› ä¸ºæˆ‘ä»¬åªéå†æ•°ç»„ä¸€æ¬¡ã€‚\n- ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)ï¼Œå› ä¸ºæˆ‘ä»¬åªä½¿ç”¨äº†å¸¸æ•°çº§çš„é¢å¤–ç©ºé—´ã€‚\n\n## é”™è¯¯è®°å½•\n\n- è¾¹ç•Œæ¡ä»¶å¤„ç†ï¼š`å¦‚æœæ•´ä¸ªæ•°ç»„éƒ½æ˜¯1ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦åˆ é™¤ä¸€ä¸ªå…ƒç´ ` \n\n","4e6b9cfc8ffb5a4aaf6fbd008c7e869d":"\n# ç››æœ€å¤šæ°´çš„å®¹å™¨\n\n\n`#leetcode`  `#ç®—æ³•/åŒæŒ‡é’ˆ`  `#2024/07/28` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/1177bd34d377d88a18b423f085b603ef.png)\n\n## è§£é¢˜æ€è·¯\n\n- å·¦å³æŒ‡é’ˆæŠ€å·§\n- ç”¨ `left` å’Œ `right` ä¸¤ä¸ªæŒ‡é’ˆä»ä¸¤ç«¯å‘ä¸­å¿ƒæ”¶ç¼©ï¼Œä¸€è¾¹æ”¶ç¼©ä¸€è¾¹è®¡ç®— `[left, right]` ä¹‹é—´çš„`çŸ©å½¢é¢ç§¯`ï¼Œå–`æœ€å¤§çš„é¢ç§¯`å€¼å³æ˜¯ç­”æ¡ˆ\n   - `çŸ©å½¢é¢ç§¯ =  left çš„é«˜åº¦ * right çš„é«˜åº¦`\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} height\n * @return {number}\n */\nvar maxArea = function (height) {\n  let left = 0; // å·¦æŒ‡é’ˆ\n  let right = height.length - 1; // å³æŒ‡é’ˆ\n  let max = 0; // æœ€å¤§é¢ç§¯\n\n  // å½“å·¦æŒ‡é’ˆå°äºå³æŒ‡é’ˆæ—¶ï¼Œæ‰§è¡Œå¾ªç¯\n  // è¿™é‡Œçš„å¾ªç¯æ¡ä»¶æ˜¯left < rightï¼Œè€Œä¸æ˜¯left <= right\n  while (left < right) {\n    // è®¡ç®—å½“å‰å·¦å³æŒ‡é’ˆå¯¹åº”çš„é¢ç§¯\n    //  [left, right] ä¹‹é—´çš„çŸ©å½¢é¢ç§¯ ä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªå…¬å¼ï¼Ÿ\n    // å› ä¸ºçŸ©å½¢çš„é¢ç§¯æ˜¯ç”±ä¸¤ä¸ªå› ç´ å†³å®šçš„ï¼šåº•è¾¹å’Œé«˜åº¦ï¼Œåº•è¾¹æ˜¯ä¸¤ä¸ªæŒ‡é’ˆä¹‹é—´çš„è·ç¦»ï¼Œé«˜åº¦æ˜¯ä¸¤ä¸ªæŒ‡é’ˆå¯¹åº”çš„å…ƒç´ ä¸­çš„è¾ƒå°å€¼\n    const area = Math.min(height[left], height[right]) * (right - left);\n    // æ›´æ–°æœ€å¤§é¢ç§¯\n    max = Math.max(max, area);\n    // å¦‚æœå·¦æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ å°äºå³æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ \n    if (height[left] < height[right]) {\n      // å·¦æŒ‡é’ˆå³ç§»\n      left++;\n    } else {\n      // å³æŒ‡é’ˆå·¦ç§»\n      right--;\n    }\n  }\n\n  return max;\n};\n\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n## é”™è¯¯è®°å½•\n\n> æ³¨æ„ä¸‹é¢çš„å…¬å¼ï¼Œåˆ«ææ··äº†\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/5015126dadf1d8fb35a2abe46218b231.png)\n\n## å‚è€ƒ\n\n- [å¦‚ä½•é«˜æ•ˆè§£å†³æ¥é›¨æ°´é—®é¢˜](https://labuladong.online/algo/frequency-interview/trapping-rain-water/#%E6%89%A9%E5%B1%95%E5%BB%B6%E4%BC%B8)\n\n","29c593f1f58f569e8c5b7adcf1ee670a":"\n# å¯»æ‰¾æ•°ç»„çš„ä¸­å¿ƒä¸‹æ ‡\n\n`#2024/07/28` `#leetcode`  `#ç®—æ³•/å‰ç¼€å’Œ`  \n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/806cae66a6a82c0cf9ac12cab22d1c66.png)\n\n## è§£é¢˜æ€è·¯\n\n- å‰ç¼€å’Œ `preSum`\n- å‡è®¾åŸæ•°ç»„ nums = [1, 7, 3, 6, 5, 6]\n   - å‰ç¼€å’Œæ•°ç»„ `prefixSum` å°±ä¼šæ˜¯ï¼š[0, 1, 8, 11, 17, 22, 28]\n      - é•¿åº¦ä¸º `length + 1 ` \n      - ç¬¬ä¸€ä¸ªå…ƒç´ ä¸º `0`ï¼Œè¡¨ç¤ºå‰ `0` ä¸ªå…ƒç´ çš„å’Œ\n      - `preSum[i]` è¡¨ç¤ºå‰ `i` ä¸ªå…ƒç´ çš„å’Œ\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} nums\n * @return {number}\n */\nvar pivotIndex = function (nums) {\n  // å‰ç¼€å’Œæ•°ç»„\n  // æ³¨æ„ï¼šå‰ç¼€å’Œæ•°ç»„çš„é•¿åº¦ä¸º nums.length + 1ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ä¸º 0ï¼Œè¡¨ç¤ºå‰ 0 ä¸ªå…ƒç´ çš„å’Œ\n  // preSum[i] è¡¨ç¤ºå‰ i ä¸ªå…ƒç´ çš„å’Œ\n  // è¿™ç§æ–¹å¼å¯ä»¥ï¼šé¿å…åˆ¤æ–­è¾¹ç•Œæ¡ä»¶\n  let preSum = new Array(nums.length + 1).fill(0);\n  // åˆå§‹åŒ–å‰ç¼€å’Œæ•°ç»„\n  for (let i = 1; i <= nums.length; i++) {\n    // å½“å‰å…ƒç´ çš„å‰ç¼€å’Œ = å‰ä¸€ä¸ªå…ƒç´ çš„å‰ç¼€å’Œ + å½“å‰å…ƒç´ \n    preSum[i] = preSum[i - 1] + nums[i - 1];\n  }\n  // æ ¹æ®å‰ç¼€å’Œåˆ¤æ–­å·¦åŠè¾¹æ•°ç»„å’Œå³åŠè¾¹æ•°ç»„çš„å…ƒç´ å’Œæ˜¯å¦ç›¸åŒ\n  for (let i = 0; i < nums.length; i++) {\n    // å½“å‰å…ƒç´ ä¹‹å‰çš„å…ƒç´ å’Œ = å½“å‰å…ƒç´ ä¹‹åçš„å…ƒç´ çš„å’Œ\n    // å½“å‰å…ƒç´ å³è¾¹çš„å…ƒç´ å’Œ = å½“å‰å…ƒç´ ä¹‹å‰çš„å…ƒç´ çš„å’Œï¼Œ\n    // æ³¨æ„â‘ ï¼šå½“å‰å…ƒç´ ä¸å‚ä¸è®¡ç®—\n    // æ³¨æ„â‘¡ï¼špreSum[nums.length] è¡¨ç¤ºæ•´ä¸ªæ•°ç»„çš„å’Œ\n    // æ³¨æ„â‘¢ï¼šå½“å‰å…ƒç´ å³è¾¹çš„å…ƒç´ å’Œ = æ•´ä¸ªæ•°ç»„çš„å’Œ - å½“å‰å…ƒç´ ä¹‹åçš„å…ƒç´ çš„å‰ç¼€å’Œ\n    if (preSum[i] === preSum[nums.length] - preSum[i + 1]) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n## é”™è¯¯è®°å½•\n\n- è€Œ`å½“å‰å…ƒç´ `ä¸å‚ä¸è®¡ç®—\n- æ³¨æ„å‰ç¼€å’Œåˆå§‹åŒ–éå†æ˜¯ä»`1` å¼€å§‹çš„\n\n","9718775c9fe851ac8f5295890be9030f":"\n# å‹ç¼©å­—ç¬¦ä¸²\n\n\n`#ç®—æ³•/åŒæŒ‡é’ˆ`  `#leetcode`  `#2024/07/28` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/b269dbb6ca9b010349e814b8bfbfb370.png)\n\n## è§£é¢˜æ€è·¯\n\n- å¿«æ…¢æŒ‡é’ˆ\n   - `write` ä»£è¡¨`åŸåœ°`å†™å…¥\n      - write éœ€è¦æ­£å¸¸å†™å…¥å­—æ¯ + å‡ºç°çš„æ¬¡æ•°\n   - `read` ä»£è¡¨å¾€åé¢`è¯»`\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {character[]} chars\n * @return {number}\n */\nvar compress = function (chars) {\n  // å¿«æ…¢æŒ‡é’ˆ,éƒ½ä»0å¼€å§‹\n  // write ä¸ºæ…¢æŒ‡é’ˆï¼Œread ä¸ºå¿«æŒ‡é’ˆ\n  let write = 0;\n  let read = 0;\n  let n = chars.length;\n  // å¿«æŒ‡é’ˆéå†æ•°ç»„\n  while (read < n) {\n    // å½“å‰å­—ç¬¦\n    let c = chars[read];\n    // è®¡æ•°å™¨ï¼Œç”¨äºè®°å½•å½“å‰å­—ç¬¦å‡ºç°çš„æ¬¡æ•°\n    let count = 0;\n    // å½“å¿«æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ ç­‰äºå¿«æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ æ—¶ï¼Œå¿«æŒ‡é’ˆå‘åç§»åŠ¨ä¸€ä½ï¼Œè®¡æ•°å™¨åŠ ä¸€\n    while (read < n && chars[read] === c) {\n      read++;\n      count++;\n    }\n    // å°†å½“å‰å­—ç¬¦åŠå…¶å‡ºç°æ¬¡æ•°å†™å…¥æ•°ç»„\n    chars[write++] = c;\n    // ä»…åœ¨å‡ºç°æ¬¡æ•°å¤§äº 1 æ—¶ï¼Œæ‰å°†æ¬¡æ•°å†™å…¥æ•°ç»„\n    if (count > 1) {\n      // String(count).split(\"\") å°†æ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå†è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„,æ¯”å¦‚ b12 -> ['b','1', '2']\n      for (let i of String(count).split(\"\")) {\n        chars[write++] = i;\n      }\n    }\n  }\n\n  return write;\n};\n\n```\n\n> - ä¸¥æ ¼è¯´è¿˜éœ€è¦æŠŠæ•°ç»„åé¢çš„å…ƒç´ å¹²æ‰\n> - `String(count).split(\"\")` ç”¨äºå¤„ç† `count = 12` è¿™ç§åœºæ™¯\n\n### å¤æ‚åº¦åˆ†æ\n\n## é”™è¯¯è®°å½•\n\n","efa9e22b08fb56c695fe238008a68ff1":"\n# å­—æ¯å¼‚ä½è¯åˆ†ç»„\n\n`#2024/07/28` `#leetcode`  `#ç®—æ³•/å“ˆå¸Œ`  \n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407281620623.png?imageSlim)\n\n## è§£é¢˜æ€è·¯\n\n- å…ˆåˆ†ç»„ï¼šæŒ‰ç…§ç”±åŒç›¸åŒå­—æ¯ç»„åˆæˆçš„å•è¯æ¥åˆ†ç»„\n   - ä½¿ç”¨ `hash` ç‰¹å®šçš„ `key å€¼` æ¥åˆ†ç»„\n- ç„¶åå†æŠŠ`åˆ†ç»„åçš„ hash` è½¬æˆ `äºŒç»´æ•°ç»„`\n\n## ä»£ç å®ç°\n```javascript\nvar groupAnagrams = function (strs) {\n  // ç¼–ç åˆ°åˆ†ç»„çš„æ˜ å°„\n  let codeToGroup = new Map();\n  for (let s of strs) {\n    // å¯¹å­—ç¬¦ä¸²è¿›è¡Œç¼–ç \n    let code = encode(s);\n    // æŠŠç¼–ç ç›¸åŒçš„å­—ç¬¦ä¸²æ”¾åœ¨ä¸€èµ·\n    if (!codeToGroup.has(code)) {\n      codeToGroup.set(code, []);\n    }\n    codeToGroup.get(code).push(s);\n  }\n\n  // è·å–ç»“æœ\n  let res = [];\n  for (let group of codeToGroup.values()) {\n    res.push(group);\n  }\n\n  return res;\n};\n\n/*\n * @description: åˆ©ç”¨æ¯ä¸ªå­—ç¬¦çš„å‡ºç°æ¬¡æ•°è¿›è¡Œç¼–ç \n * @param {string} s\n * @return {string}\n * @example 1: encode(\"abc\") => \"1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\"\n * @example 2: encode(\"abbccc\") => \"1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\"\n * @example 3: encode(\"aabbcc\") => \"2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\"\n */\nfunction encode(s) {\n  // åˆå§‹åŒ–ä¸€ä¸ªé•¿åº¦ä¸º 26 çš„æ•°ç»„ï¼Œç”¨äºè®°å½•æ¯ä¸ªå­—ç¬¦çš„å‡ºç°æ¬¡æ•°\n  let arr = new Array(26).fill(0);\n  for (let c of s) {\n    // è¿”å› c çš„ Ascii ç å€¼, å‡å» 'a' çš„ Ascii ç å€¼, å¾—åˆ° c ç›¸å¯¹äº 'a' çš„åç§»é‡\n    // å³ a -> 0, b -> 1, c -> 2, ..., z -> 25\n    let delta = c.charCodeAt() - \"a\".charCodeAt();\n    // æ›´æ–°å­—ç¬¦ c çš„å‡ºç°æ¬¡æ•°\n    arr[delta]++;\n  }\n  return arr.toString();\n}\n\n```\n\n## é”™è¯¯è®°å½•\n\n","ddf1dd5176905dbca4a7c88ec1f69539":"\n# ç›¸ç­‰è¡Œåˆ—å¯¹\n\n`#leetcode` \n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407260948859.png?imageSlim)\n\n## è§£é¢˜æ€è·¯\nÂ \n- ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºä¸€ä¸ª`å“ˆå¸Œè¡¨ï¼ˆMapï¼‰`æ¥å­˜å‚¨æ¯ä¸€è¡Œçš„ä¿¡æ¯ã€‚ \n- ç¬¬äºŒæ­¥ï¼šéå†çŸ©é˜µçš„æ¯ä¸€è¡Œ\n\t- å°†è¡Œè½¬æ¢ä¸ºä¸€ä¸ª`å”¯ä¸€çš„å­—ç¬¦ä¸²`è¡¨ç¤ºï¼ˆä¾‹å¦‚ï¼Œç”¨é€—å·è¿æ¥å…ƒç´ ï¼‰ã€‚\n\t- åœ¨å“ˆå¸Œè¡¨ä¸­è®°å½•è¿™ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºåŠå…¶å‡ºç°æ¬¡æ•°ã€‚ \n- ç¬¬ä¸‰æ­¥ï¼šéå†çŸ©é˜µçš„æ¯ä¸€åˆ—ï¼Œé‡ç‚¹é€»è¾‘éƒ½åœ¨è¿™é‡Œé¢\n\t- åŒæ ·å°†åˆ—è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¡¨ç¤ºã€‚\n\t- æ£€æŸ¥è¿™ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åœ¨å“ˆå¸Œè¡¨ä¸­å­˜åœ¨ã€‚\n\t\t- å¦‚æœå­˜åœ¨ï¼Œå°†`è®¡æ•°å™¨`å¢åŠ å“ˆå¸Œè¡¨ä¸­è®°å½•çš„å‡ºç°æ¬¡æ•°ã€‚ \n- æœ€åï¼šè¿”å›æœ€ç»ˆçš„è®¡æ•°å™¨å€¼ã€‚\n\n## ä»£ç å®ç°\n\n```javascript\n/**  \n * @param {number[][]} grid  n x n grid  \n * @return {number}  \n */  \nvar equalPairs = function (grid) {  \n    // ç»“æœ  \n    let res = 0;  \n    const len = grid.length;  \n    // å¤„ç†è¡Œ  \n    // ç”¨äºè®°å½•æ¯ä¸€è¡Œå‡ºç°çš„æ¬¡æ•°, key ä¸ºè¡Œå­—ç¬¦ä¸²ï¼Œvalue ä¸ºå‡ºç°æ¬¡æ•°  \n    const rowMap = new Map();  \n    for (let i = 0; i < len; i++) {  \n        const rowStr = grid[i].join(',');  \n        rowMap.set(rowStr, (rowMap.get(rowStr) || 0) + 1);  \n    }  \n    // å¤„ç†åˆ—ï¼Œåˆ¤æ–­æ˜¯å¦åœ¨è¡Œä¸­å‡ºç°è¿‡  \n    for (let i = 0; i < len; i++) {  \n        let cols = [];  \n        for (let j = 0; j < len; j++) {  \n            cols.push(grid[j][i]);  \n        }  \n        let colStr = cols.join(',');  \n        // åˆ¤æ–­æ˜¯å¦åœ¨è¡Œä¸­å‡ºç°è¿‡  \n        if (rowMap.has(colStr)) {  \n            // ::::è¿™é‡Œä¸èƒ½åªæ˜¯+1ï¼Œå‡ºç°å¤šå°‘æ¬¡å°±å¾—åŠ å¤šå°‘æ¬¡  \n            res += rowMap.get(colStr);  \n        }  \n    }  \n    return res;  \n};\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n^2)`\n\t- å¾ˆç®€å•ï¼Œçœ‹å¤„ç†åˆ—é‡Œé¢ï¼Œä¸¤ä¸ª for å¾ªç¯\n- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n^2)`\n\t- è™½ç„¶ `cols` çœ‹èµ·æ¥å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½ä¼šå¤„ç†  `cols.push(grid[j][i]);` æ‰€ä»¥ï¼Œå¤æ‚åº¦ä¹Ÿæ˜¯ `O(n^2)`\n\n## é”™è¯¯è®°å½•","d1c059b5f2d051dd91d3e857a455ce62":"\n# ç§»é™¤å…ƒç´ \n\n\n`#2024/07/28` `#leetcode`  `#ç®—æ³•/åŒæŒ‡é’ˆ` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407281629958.png?imageSlim)\n\n## è§£é¢˜æ€è·¯\n\n- å¿«æ…¢æŒ‡é’ˆ\n- çŸ¥é“äº† `slow`ï¼Œå°†åé¢çš„å…ƒç´ é‡ç½®ä¸º`_` (æŒ‰ç…§é¢˜è®¾è¦æ±‚)\n\n## ä»£ç å®ç°\n```javascript\n/**\n * @param {number[]} nums\n * @param {number} val\n * @return {number}\n */\nvar removeElement = function (nums, val) {\n  // å¿«æ…¢æŒ‡é’ˆ,éƒ½ä»0å¼€å§‹\n  let fast = 0;\n  let slow = 0;\n  // å¿«æŒ‡é’ˆéå†æ•°ç»„\n  while (fast < nums.length) {\n    // å½“å¿«æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ ä¸ç­‰äº val æ—¶\n    if (nums[fast] !== val) {\n      // å°†å¿«æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ èµ‹å€¼ç»™æ…¢æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ \n      nums[slow] = nums[fast];\n      slow++;\n    }\n    // å¿«æŒ‡é’ˆï¼Œæ¯éå†ä¸€ä¸ªå…ƒç´ ï¼Œå°±å‘åç§»åŠ¨ä¸€æ¬¡\n    fast++;\n  }\n  // ä¿®æ”¹ nums åé¢çš„å…ƒç´ ä¸º _\n  for (let i = slow; i < nums.length; i++) {\n    nums[i] = \"_\";\n  }\n  return slow;\n};\n\n```\n\n## é”™è¯¯è®°å½•\n\n","6e4f1a184d2750faafd287645936ce9e":"\n# ç§»åŠ¨é›¶\n\n\n`#ç®—æ³•/åŒæŒ‡é’ˆ`  `#leetcode` `#2024/07/28` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/4d1151bf396c03af984ebd8f5e3bcad9.png)\n\n## è§£é¢˜æ€è·¯\n\n> å…¶å®å°±æ˜¯ [ç§»é™¤å…ƒç´ ](https://www.yuque.com/liguwe/agorithms/wftg17qn12ytlsrc) ï¼ˆæŒ‡å®šç§»åŠ¨å“ªä¸ªå…ƒç´ ï¼‰ çš„ç‰¹æ®Šç‰ˆæœ¬ï¼Œè¿™é‡ŒæŒ‡å®šç§»åŠ¨` 0 `\n\n- åŒæŒ‡é’ˆï¼š`slow` å’Œ `fast`\n- `slow` ä¹‹åçš„å€¼æ¢æˆ `0` å³å¯\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} nums\n * @return {void} Do not return anything, modify nums in-place instead.\n */\nvar moveZeroes = function (nums) {\n  let slow = 0;\n  let fast = 0;\n  while (fast < nums.length) {\n    if (nums[fast] !== 0) {\n      nums[slow] = nums[fast];\n      slow++;\n    }\n    fast++;\n  }\n  for (let i = slow; i < nums.length; i++) {\n    nums[i] = 0;\n  }\n  return nums;\n};\n\n```\n\n## é”™è¯¯è®°å½•\n\n","a5e08db0b34e5d1bae7b90884ee39bf1":"\n# æ‹¥æœ‰æœ€å¤šç³–æœçš„å­©å­\n\n`#leetcode`  `#ç®—æ³•` `#2024/07/28` \n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/37d8e71190091812bedc616e3e431748.png)\n\n## è§£é¢˜æ€è·¯\n\n1. æ‰¾åˆ°æœ€å¤§å€¼ï¼š æ‰¾åˆ°å½“å‰ `candies` æ•°ç»„ä¸­çš„æœ€å¤§å…ƒç´ ï¼Œè¿™ä»£è¡¨å­©å­ä»¬ç›®å‰æ‹¥æœ‰çš„æœ€å¤šçš„ç³–æœæ•°é‡ã€‚\n2. è®¡ç®—æ¯ä¸ªå­©å­åŠ ä¸Šé¢å¤–ç³–æœåçš„æ•°é‡ï¼š éå†æ•°ç»„ `candies`ï¼Œå¯¹äºæ¯ä¸ªå­©å­ï¼Œè®¡ç®—å…¶æ‹¥æœ‰çš„ç³–æœåŠ ä¸Š `extraCandies` åçš„æ€»å’Œã€‚\n3. ä¸æœ€å¤§å€¼æ¯”è¾ƒï¼š æ¯”è¾ƒæ¯ä¸ªå­©å­åŠ ä¸Šé¢å¤–ç³–æœåçš„æ•°é‡æ˜¯å¦å¤§äºæˆ–ç­‰äºç¬¬ä¸€æ­¥ä¸­æ‰¾åˆ°çš„æœ€å¤§å€¼ã€‚\n4. è¿”å›ç»“æœæ•°ç»„ï¼š æ ¹æ®æ¯”è¾ƒç»“æœï¼Œç”Ÿæˆå¯¹åº”çš„å¸ƒå°”å€¼æ•°ç»„ `result`ã€‚\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} candies\n * @param {number} extraCandies\n * @return {boolean[]}\n */\nvar kidsWithCandies = function (candies, extraCandies) {\n  // â‘  æ‰¾åˆ°candiesä¸­çš„æœ€å¤§å€¼\n  const max = Math.max(...candies);\n  // â‘¡ éå†candiesæ•°ç»„ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶\n  return candies.map((candy) => candy + extraCandies >= max);\n};\n\n```\n\n","12bbe7a18e195a56a9ac0854dbe2c48f":"\n# æ‰¾å‡ºä¸¤æ•°ç»„çš„ä¸åŒ\n\n`#ç®—æ³•` `#leetcode`  `#2024/07/28` \n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/2957c151de2e1cf09ca75212d17676ae.png)\n\n## è§£é¢˜æ€è·¯\n\n1. `nums1` ä¸­æœ‰ï¼Œä½† nums2 `ä¸­æ²¡æœ‰çš„æ•°å­—`\n2. `nums2` ä¸­æœ‰ï¼Œä½† `nums1` ä¸­æ²¡æœ‰çš„æ•°å­—\n\n## ä»£ç å®ç°\n```javascript\n/**\n * @param {number[]} nums1\n * @param {number[]} nums2\n * @return {number[][]}\n */\nvar findDifference = function (nums1, nums2) {\n  const s1 = new Set(nums1);\n  const s2 = new Set(nums2);\n\n  const res1 = [...s1].filter((num) => !s2.has(num));\n  const res2 = [...s2].filter((num) => !s1.has(num));\n\n  return [res1, res2];\n};\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n## é”™è¯¯è®°å½•\n\n","5e60fed1a8db53b397b3ba78102be7ce":"\n# æ‰¾åˆ°æœ€é«˜æµ·æ‹”\n\n\n`#ç®—æ³•` `#2024/07/28` `#leetcode` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/0b67ca13731e85886bdfa6b3502dd319.png)\n\n## è§£é¢˜æ€è·¯\n\n1. åˆå§‹åŒ–ä¸€ä¸ªå˜é‡ `max` æ¥è®°å½•æœ€é«˜æµ·æ‹”ï¼Œåˆå§‹å€¼ä¸º 0ã€‚\n2. åˆå§‹åŒ–ä¸€ä¸ªå˜é‡ `current` æ¥è®°å½•å½“å‰æµ·æ‹”ï¼Œåˆå§‹å€¼ä¸º 0ã€‚\n3. éå† `gain` æ•°ç»„ï¼š\n   - å°†å½“å‰çš„é«˜åº¦å˜åŒ–åŠ åˆ° `current` ä¸Šã€‚\n   - æ¯”è¾ƒ `current` å’Œ `max`ï¼Œæ›´æ–° `max` å¦‚æœéœ€è¦ã€‚\n4. è¿”å› `max`ã€‚\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} gain\n * @return {number}\n */\nvar largestAltitude = function (gain) {\n  let max = 0; // æœ€å¤§é«˜åº¦\n  let current = 0; // å½“å‰é«˜åº¦ï¼Œå› ä¸ºè‡ªè¡Œè½¦æ‰‹ä»æµ·æ‹”ä¸º 0 çš„åœ°æ–¹å¼€å§‹éª‘è¡Œï¼Œæ‰€ä»¥å½“å‰é«˜åº¦ä¸º 0\n  for (let i = 0; i < gain.length; i++) {\n    //  gain[i] æ˜¯ç‚¹ i å’Œç‚¹ i + 1 çš„ å‡€æµ·æ‹”é«˜åº¦å·®ï¼ˆ\n    //  å½“å‰é«˜åº¦ = å½“å‰é«˜åº¦ + gain[i]\n    current += gain[i];\n    max = Math.max(max, current);\n  }\n\n  return max;\n};\n\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œå…¶ä¸­ n æ˜¯ `gain` æ•°ç»„çš„é•¿åº¦ï¼Œå› ä¸ºæˆ‘ä»¬åªéœ€è¦éå†ä¸€æ¬¡æ•°ç»„ã€‚\n- ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)ï¼Œå› ä¸ºæˆ‘ä»¬åªä½¿ç”¨äº†å¸¸æ•°çº§çš„é¢å¤–ç©ºé—´\n\n## é”™è¯¯è®°å½•\n\n- let å’Œ const ç”¨æ··äº†\n\n","dbdd7f54207454d2bc06783c5be5abb2":"\n# ç§èŠ±é—®é¢˜\n\n\n`#ç®—æ³•` `#leetcode`  `#2024/07/28` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›® \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/3f1ea7b209fa83f23540a2c340ecfa50.png)\n\n### é‡ç‚¹\n\n- è½¬æˆè§„åˆ™ï¼šå³ä¸Šå›¾ä¸­çº¢è‰²æ–‡å­—éƒ¨åˆ†\n\n## æ€è·¯\n\n1. `éå†æ•°ç»„`ï¼šä»å¤´åˆ°å°¾é `flowerbed` æ•°ç»„ã€‚\n2. `æ£€æŸ¥ä½`ï¼šå¦‚æœå½“å‰ä½ç½®æ˜¯ `0`ï¼Œå¹¶ä¸”å…¶ä¸¤ä¾§ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰ä¹Ÿæ˜¯ `0` æˆ– `1`ï¼Œåˆ™è¡¨ç¤ºè¿™é‡Œå¯ä»¥ç§èŠ±ã€‚\n3. ç§èŠ±å¹¶è°ƒæ•´`**è®¡æ•°å™¨**`ï¼šæ¯ç§ä¸€æœµï¼Œå‡å°‘ `n` çš„å€¼ã€‚å½“ `n` å‡åˆ° `0` ä»¥ä¸‹æ—¶ï¼Œè¡¨ç¤ºå¯ä»¥ç§ä¸‹ `n` æœµèŠ±ï¼Œè¿”å› `true`ã€‚\n4. `æœ€ç»ˆæ£€æŸ¥`ï¼šéå†å®Œæ•°ç»„åï¼Œæ£€æŸ¥ `n` æ˜¯å¦å°æˆ–ç­‰äº `0`ã€‚\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} flowerbed\n * @param {number} n\n * @return {boolean}\n */\nvar canPlaceFlowers = function (flowerbed, n) {\n  for (let i = 0; i < flowerbed.length; i++) {\n    // æ£€æŸ¥å½“å‰ä½ç½®åŠå·¦ã€å³ä½ç½®æ˜¯å¦å¯ä»¥ç§èŠ±ï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š\n    // æ¡ä»¶â‘ ï¼š å½“å‰å…ƒç´ ä¸º0\n    if (flowerbed[i] === 0) {\n      // æ¡ä»¶â‘¡ï¼š ç¬¬ä¸€ä¸ªå…ƒç´  æˆ–è€… å‰ä¸€ä¸ªå…ƒç´ ä¸º0æ—¶\n      if (i === 0 || flowerbed[i - 1] === 0) {\n        // æ¡ä»¶â‘¢ï¼š æœ€åä¸€ä¸ªå…ƒç´  æˆ–è€… åä¸€ä¸ªå…ƒç´ ä¸º0æ—¶\n        if (i === flowerbed.length - 1 || flowerbed[i + 1] === 0) {\n          flowerbed[i] = 1;\n          n--;\n        }\n      }\n    }\n  }\n  return n <= 0;\n};\n\n```\n\n> - ä¸Šé¢çš„å†™æ³•ï¼Œåªæ˜¯ä¸ºäº†è¡¨è¾¾é€’è¿›çš„å…³ç³»ï¼Œå…¶å®å¯ä»¥ä¸è¿™ä¹ˆå†™ï¼\n> - æ³¨æ„æ¯ä¸ªæ¡ä»¶é‡Œé¢æ˜¯`æˆ–è€…`çš„å…³ç³»\n\n## å‚è€ƒ\n\n- [https://leetcode.cn/problems/can-place-flowers/submissions/548039007/?envType=study-plan-v2&envId=leetcode-75](https://leetcode.cn/problems/can-place-flowers/submissions/548039007/?envType=study-plan-v2&envId=leetcode-75)\n\n","186bd17ad32352419334ce391da67d9d":"\n# å­—ç¬¦ä¸²çš„æœ€å¤§å…¬å› å­\n\n\n`#ç®—æ³•` `#2024/07/28` `#leetcode` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›® \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/85bd009b5d64c17b72e1ab92ba43cb31.png)\n\n### é¢˜ç›®é‡ç‚¹\n\n- æœ€å¤§å…¬å› å­\n\n## æ€è·¯\n\n1. æ£€æŸ¥  `str1 + str2` æ˜¯å¦ç­‰äº `str2 + str1`ã€‚ ä¸ç›¸ç­‰ï¼Œè¯´æ˜æ²¡æœ‰å…¬å…±å‰ç¼€å­—ç¬¦ä¸²ï¼Œç›´æ¥è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚\n2. å¦‚æœç›¸ç­‰ï¼Œæ‰¾åˆ° `str1` å’Œ `str2` é•¿åº¦çš„`æœ€å¤§å…¬çº¦æ•°`ï¼ˆGCDï¼‰ã€‚\n3. è¿”å› `str1` çš„å‰ `G` ä¸ªå­—ç¬¦ã€‚\n\n## ä»£ç å®ç°\n\n```javascript\n/\n * @param {string} str1\n * @param {string} str2\n * @return {string}\n */\nvar gcdOfStrings = function (str1, str2) {\n  // å¦‚æœstr1å’Œstr2çš„é•¿åº¦æ‹¼æ¥ä¸ç›¸ç­‰, åˆ™è¿”å›ç©ºå­—ç¬¦ä¸²\n  if (str1 + str2 !== str2 + str1) {\n    return \"\";\n  }\n  // ä»£ç èµ°åˆ°è¿™é‡Œï¼Œè¯´æ˜ str1 å’Œ str2 æ˜¯ç¬¦åˆæ¡ä»¶çš„\n  // m å’Œ n ä¸€å®šæ˜¯æœ‰æœ€å¤§å…¬çº¦æ•°çš„\n  const m = str1.length;\n  const n = str2.length;\n  const max = gcd(m, n); // æ±‚æœ€å¤§å…¬çº¦æ•°\n  return str1.substring(0, max); // è¿”å›str1çš„å‰maxä¸ªå­—ç¬¦\n};\n\n/\n * æ±‚æœ€å¤§å…¬çº¦æ•°\n * @param {number} a\n * @param {number} b\n * @return {number}\n */\nvar gcd = function (a, b) {\n  // a % bçš„ç»“æœèµ‹å€¼ç»™a, bçš„å€¼èµ‹å€¼ç»™a, ç›´åˆ°bä¸º0\n  // ä¸ºä»€ä¹ˆ b ä¸º 0 æ—¶, a å°±æ˜¯æœ€å¤§å…¬çº¦æ•°å‘¢?\n  while (b !== 0) {\n    const temp = a % b;\n    a = b;\n    b = temp;\n  }\n  return a;\n};\n\n```\n\n## å‚è€ƒ\n\n- [https://leetcode.cn/problems/greatest-common-divisor-of-strings/submissions/548029044/?envType=study-plan-v2&envId=leetcode-75](https://leetcode.cn/problems/greatest-common-divisor-of-strings/submissions/548029044/?envType=study-plan-v2&envId=leetcode-75)\n\n","0dde37e447c65f27885439825febffe3":"\n# å­æ•°ç»„æœ€å¤§å¹³å‡æ•° I\n\n\n`#leetcode` `#ç®—æ³•/æ»‘åŠ¨çª—å£` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/400755e6e2354c1f2047b7ed1977227b.png)\n\n> **æ³¨æ„ï¼šè¿”å›çš„æ˜¯æœ€å¤§å¹³å‡æ ‘**\n\n## è§£é¢˜æ€è·¯\n\n### è§£æ³•ä¸€ï¼šæ»‘åŠ¨çª—å£ï¼Œçœ‹ä¸‹é¢å‡ å¼ å›¾\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/d519707b0a58722271e07e52f00ca916.png)\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/67925ec639e4c341ddabdba40ca16863.png)\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/c0a15fa222bab11b280369e83f570392.png)\n\n### è§£æ³•äºŒï¼šå‰ç¼€å’Œ\n\n> ä¸å±•å¼€äº†\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} nums\n * @param {number} k\n * @return {number}\n */\nvar findMaxAverage = function (nums, k) {\n  // sum ç”¨äºè®°å½•æ»‘åŠ¨çª—å£ä¸­çš„å…ƒç´ ä¹‹å’Œ\n  let sum = 0;\n  // å‰ k ä¸ªå…ƒç´ ä¹‹å’Œï¼Œå³æ»‘åŠ¨çª—å£çš„åˆå§‹å€¼ï¼Œå³ã€æ»‘åŠ¨çª—å£ã€‘çš„å‰ k ä¸ªå…ƒç´ ä¹‹å’Œ\n  // åˆå§‹åŒ– sumï¼Œä»£è¡¨ã€æ»‘åŠ¨çª—å£ã€‘çš„å‰ k ä¸ªå…ƒç´ ä¹‹å’Œ\n  for (let i = 0; i < k; i++) {\n    sum += nums[i];\n  }\n\n  // max ç”¨äºè®°å½•æ»‘åŠ¨çª—å£ä¸­å…ƒç´ ä¹‹å’Œçš„æœ€å¤§å€¼\n  let max = sum;\n\n  // å¼€å§‹æ»‘åŠ¨çª—å£ï¼Œä» k å¼€å§‹ï¼Œæ¯æ¬¡ç§»åŠ¨ä¸€ä½ï¼ŒåŠ¨æ€ç»´æŠ¤ sum å’Œ max çš„å€¼\n  // éå†æ•°ç»„ï¼Œä» k å¼€å§‹\n  for (let i = k; i < nums.length; i++) {\n    // æ»‘åŠ¨çª—å£ï¼Œæ¯æ¬¡ç§»åŠ¨ä¸€ä½\n    sum = sum + nums[i] - nums[i - k];\n    // æ¯”è¾ƒ sum å’Œ max çš„å¤§å°ï¼Œå–æœ€å¤§å€¼\n    max = Math.max(max, sum);\n  }\n\n  // æœ€åè¿”å› max / kï¼Œå³æœ€å¤§å¹³å‡å€¼\n  return max / k;\n};\n\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚æˆ‘ä»¬åªéå†äº†ä¸€æ¬¡æ•°ç»„ã€‚ \n- ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº†å¸¸æ•°é¢å¤–ç©ºé—´ã€‚\n\n## é”™è¯¯è®°å½•\n\n","8b48e288ad4f54fa89d3d25c1a4665f1":"\n# æœ€å¤§è¿ç»­ 1 çš„ä¸ªæ•° III\n\n\n`#leetcode`  `#2024/07/28` `#ç®—æ³•/æ»‘åŠ¨çª—å£`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/090a868fc6988e29390058bac437720d.png)\n\n### åŸé¢˜ä¸å¥½ç†è§£ï¼Œæ¢ç§é—®æ³•\n\n> - å¦‚æœæˆ‘å¯ä»¥æ”¹å˜`æœ€å¤š k ä¸ª 0`ï¼Œé‚£ä¹ˆæˆ‘èƒ½å¾—åˆ°çš„`æœ€é•¿çš„è¿ç»­ 1 åºåˆ—`æœ‰å¤šé•¿ ï¼Ÿ \n> - çœ‹é¢˜ç›®æ˜¯ï¼šæœ€å¤§è¿ç»­ 1 çš„ä¸ªæ•°\n\n## è§£é¢˜æ€è·¯\n\n1. ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆ `left` å’Œ `right`ï¼Œåˆå§‹éƒ½æŒ‡å‘æ•°ç»„å¼€å¤´ã€‚\n   1. å‘å³ç§»åŠ¨ right æŒ‡é’ˆï¼Œ`æ‰©å¤§çª—å£`ã€‚\n   2. å¦‚æœé‡åˆ° 0ï¼Œå°±å°† k å‡ 1ã€‚\n2. å½“ k å°äº 0 æ—¶ï¼Œè¯´æ˜çª—å£å†… 0 çš„æ•°é‡è¶…è¿‡äº†å…è®¸çš„æœ€å¤§å€¼ï¼Œè¿™æ—¶éœ€è¦`æ”¶ç¼©çª—å£`ï¼š\n   - ç§»åŠ¨ left æŒ‡é’ˆ\n   - å¦‚æœ left æŒ‡é’ˆç»è¿‡çš„æ˜¯ 0ï¼Œå°±å°† k åŠ  1\n3. åœ¨`æ¯æ¬¡è¿­ä»£ä¸­`æ›´æ–°æœ€å¤§çª—å£é•¿åº¦ã€‚\n\n## ä»£ç å®ç°\n```javascript\n/**\n * @param {number[]}  nums\n * @param {number} k  0 çš„ä¸ªæ•°\n * @return {number}\n */\nvar longestOnes = function (nums, k) {\n  // å·¦æŒ‡é’ˆ\n  let left = 0;\n  // å³æŒ‡é’ˆ\n  let right = 0;\n\n  // ç»“æœï¼šæœ€é•¿çš„è¿ç»­çš„ 1 çš„ä¸ªæ•°\n  let res = 0;\n\n  // å‘å³ç§»åŠ¨ right æŒ‡é’ˆï¼Œæ‰©å¤§çª—å£\n  for (; right < nums.length; right++) {\n    // å¦‚æœé‡åˆ° 0ï¼Œå°±å°† k å‡ 1\n    // å¦‚æœå½“å‰æ•°å­—æ˜¯ 0ï¼Œå°±å‡å°‘å¯ç”¨çš„ k\n    if (nums[right] === 0) {\n      k--;\n    }\n\n    // å¦‚æœ k å°äº 0ï¼Œéœ€è¦ç§»åŠ¨å·¦æŒ‡é’ˆ\n    // è¯´æ˜çª—å£å†… 0 çš„æ•°é‡è¶…è¿‡äº†å…è®¸çš„æœ€å¤§å€¼ï¼Œè¿™æ—¶éœ€è¦æ”¶ç¼©çª—å£\n    if (k < 0) {\n      // å¦‚æœå·¦æŒ‡é’ˆæŒ‡å‘çš„æ˜¯ 0ï¼Œå¢åŠ å¯ç”¨çš„ k\n      if (nums[left] === 0) {\n        k++;\n      }\n      left++;\n    }\n\n    // åœ¨æ¯æ¬¡è¿­ä»£ä¸­æ›´æ–°æœ€å¤§çª—å£é•¿åº¦\n    res = Math.max(res, right - left + 1);\n  }\n\n  return res;\n};\n\n```\n\n> ä¸ºä»€ä¹ˆæ˜¯ `right - left + 1`ï¼Œè€Œä¸æ˜¯ `right - left` ï¼Ÿ\n> - åœ¨æ•°ç»„ä¸­ï¼Œç´¢å¼•æ˜¯ä» 0 å¼€å§‹çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ `left = 0ï¼Œright = 3`ï¼Œé‚£ä¹ˆå®é™…ä¸ŠåŒ…å«äº† 4 ä¸ªå…ƒç´ ï¼ˆ`ç´¢å¼• 0, 1, 2, 3`ï¼‰\n\n### å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚æˆ‘ä»¬åªéå†äº†ä¸€æ¬¡æ•°ç»„ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼š`O(1)`ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº†å¸¸æ•°é¢å¤–ç©ºé—´\n\n## é”™è¯¯è®°å½•\n\n","3f652e8a00ab56d2bd177724579eec79":"\n# K å’Œæ•°å¯¹çš„æœ€å¤§æ•°ç›®\n\n\n`#leetcode`  `#ç®—æ³•/å“ˆå¸Œ`  `#2024/07/28` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›®åŠç†è§£ \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/ce8d96510f9e7129cb173c644ceb5657.png)\n\n## 2. è§£é¢˜æ€è·¯\n\n- æ€è·¯ä¸€ï¼šä½¿ç”¨ hash æ­£å¸¸éå†æ€è·¯å³å¯\n   - è¾¹ç•Œæƒ…å†µå¤„ç†ï¼šå¦‚æœå­˜åœ¨ä¸¤ä¸ªç›¸åŒçš„å€¼çš„åœºæ™¯\n- æ€è·¯äºŒï¼šå…ˆæ’åºï¼Œç„¶åä½¿ç”¨åŒæŒ‡é’ˆï¼Œè¿™é‡Œæ²¡å†™ä»£ç äº†\n\n## 3. ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} nums\n * @param {number} k\n * @return {number}\n */\nvar maxOperations = function (nums, k) {\n  // ç”¨äºè®°å½•é‡å¤å…ƒç´ çš„ä¸ªæ•°\n  let map = new Map();\n  // åˆå§‹åŒ– map\n  for (const num of nums) {\n    map.set(num, (map.get(num) || 0) + 1);\n  }\n\n  // ä»£è¡¨æœ€å¤§æ“ä½œæ¬¡æ•°\n  let count = 0;\n\n  for (const num of nums) {\n    // éœ€è¦çš„å¦ä¸€ä¸ªæ•°ï¼Œå³ num + need = k\n    const need = k - num;\n    // ç¡®ä¿ num å’Œ need å­˜åœ¨çš„ä¸ªæ•°éƒ½å¤§äº 0ï¼Œæ‰èƒ½è¿›è¡Œæ“ä½œ\n    if (map.get(need) > 0 && map.get(num) > 0) {\n      // å¦‚æœ num === needï¼Œä¸” map ä¸­çš„å€¼å°äº 2ï¼Œåˆ™ä¸æ»¡è¶³æ¡ä»¶\n      if (num === need && map.get(num) < 2) continue;\n\n      // æ›´æ–° map ä¸­çš„å€¼\n      map.set(num, map.get(num) - 1);\n      map.set(need, map.get(need) - 1);\n      // æ›´æ–° count\n      count++;\n    }\n  }\n\n  return count;\n};\n\n```\n\n> 1. ä¸¤ä¸ª for å¾ªç¯ä¸ºäº†æ›´å¥½çš„ç†è§£\n\n### 3.1. å¤æ‚åº¦åˆ†æ\n\n## 4. ä»£ç å®ç°äºŒ\n\n- å…ˆæ’åºï¼Œç„¶åä½¿ç”¨åŒæŒ‡é’ˆï¼Œè¿™é‡Œæ²¡å†™ä»£ç äº†\n\n## 5. é”™è¯¯è®°å½•\n\n1. ä¸èƒ½ä½¿ç”¨ `map.has` ï¼Œä»£è¡¨æ˜¯å¦æœ‰æŸä¸ªå±æ€§å€¼\n\n","5da58c36616853c298cb1458bb9155d2":"\n# åˆ é™¤é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹\n\n\n`#åŒæŒ‡é’ˆ` `#é“¾è¡¨` `#å¿«æ…¢æŒ‡é’ˆ` `#2024/07/30` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›®åŠç†è§£ \n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407300745016.png?imageSlim)\n\n> æ³¨æ„ä¸Šé¢çš„æ ‡æ³¨çš„æ„æ€\n## 2. è§£é¢˜æ€è·¯\n\n1. **base case ç‰¹æ®Šæƒ…å†µå¤„ç†**ï¼š\n    - å¦‚æœé“¾è¡¨ä¸ºç©ºæˆ–åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬ç›´æ¥è¿”å› nullã€‚\n2. **ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆ**ï¼š\n    - åˆå§‹åŒ–ä¸‰ä¸ªæŒ‡é’ˆï¼š`slow`ã€`fast`Â å’ŒÂ `prev`ã€‚\n        - `slow`Â å’ŒÂ `fast`Â éƒ½ä»Â `head`Â å¼€å§‹ã€‚\n        - `prev`Â ç”¨æ¥è·Ÿè¸ªÂ `slow`Â çš„å‰ä¸€ä¸ªèŠ‚ç‚¹\n3. **ç§»åŠ¨æŒ‡é’ˆ**ï¼š\n    - åœ¨æ¯æ¬¡å¾ªç¯ä¸­ï¼Œ`fast`Â ç§»åŠ¨`ä¸¤æ­¥`ï¼Œ`slow`Â ç§»åŠ¨`ä¸€æ­¥`ã€‚\n    - å½“å¾ªç¯ç»“æŸæ—¶ï¼Œ`slow`Â å°†æŒ‡å‘ä¸­é—´èŠ‚ç‚¹ã€‚\n4. **åˆ é™¤ä¸­é—´èŠ‚ç‚¹**ï¼š\n    - å¾ªç¯ç»“æŸåï¼Œ`prev`Â æŒ‡å‘ä¸­é—´èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n    - æˆ‘ä»¬é€šè¿‡è®¾ç½®Â `prev.next = slow.next`Â æ¥åˆ é™¤ä¸­é—´èŠ‚ç‚¹ã€‚\n5. **è¿”å›ç»“æœ**ï¼š\n    - è¿”å›ä¿®æ”¹åçš„é“¾è¡¨å¤´éƒ¨Â `head`ã€‚\n\n## 3. ä»£ç å®ç°\n\n```javascript\n/**\n * Definition for singly-linked list.\n * function ListNode(val, next) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.next = (next===undefined ? null : next)\n * }\n */\n/**\n * @param {ListNode} head\n * @return {ListNode}\n */\nvar deleteMiddle = function (head) {\n  // 1. **base case ç‰¹æ®Šæƒ…å†µå¤„ç†**ï¼š\n  //     - å¦‚æœé“¾è¡¨ä¸ºç©ºæˆ–åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬ç›´æ¥è¿”å› nullã€‚\n  if (head === null || head.next === null) {\n    return null;\n  }\n\n  // 2. **ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆ**ï¼š\n  //     - åˆå§‹åŒ–ä¸‰ä¸ªæŒ‡é’ˆï¼š`slow`ã€`fast`Â å’ŒÂ `prev`ã€‚\n  //         - `slow`Â å’ŒÂ `fast`Â éƒ½ä»Â `head`Â å¼€å§‹ã€‚\n  //         - `prev`Â ç”¨æ¥è·Ÿè¸ªÂ `slow`Â çš„å‰ä¸€ä¸ªèŠ‚ç‚¹\n  let slow = head;\n  let fast = head;\n  let prev = null;\n\n  // 3. **ç§»åŠ¨æŒ‡é’ˆ**ï¼š\n  //     - åœ¨æ¯æ¬¡å¾ªç¯ä¸­ï¼Œ`fast`Â ç§»åŠ¨`ä¸¤æ­¥`ï¼Œ`slow`Â ç§»åŠ¨`ä¸€æ­¥`ã€‚\n  //     - å½“å¾ªç¯ç»“æŸæ—¶ï¼Œ`slow`Â å°†æŒ‡å‘ä¸­é—´èŠ‚ç‚¹ã€‚\n\n  while (fast !== null && fast.next !== null) {\n    // å¿«æŒ‡é’ˆç§»åŠ¨ä¸¤æ­¥\n    fast = fast.next.next;\n    // å…ˆè®°å½•slowçš„ä½ç½®ï¼Œä½¿ç”¨prevæŒ‡é’ˆ\n    prev = slow;\n    // æ…¢æŒ‡é’ˆç§»åŠ¨ä¸€æ­¥\n    slow = slow.next;\n  }\n\n  // 4. **åˆ é™¤ä¸­é—´èŠ‚ç‚¹**ï¼š\n  //     - å¾ªç¯ç»“æŸåï¼Œ`prev`Â æŒ‡å‘ä¸­é—´èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n  //     - æˆ‘ä»¬é€šè¿‡è®¾ç½®Â `prev.next = slow.next`Â æ¥åˆ é™¤ä¸­é—´èŠ‚ç‚¹ã€‚\n\n  prev.next = slow.next; // åˆ é™¤ä¸­é—´èŠ‚ç‚¹\n\n  // 5. **è¿”å›ç»“æœ**ï¼š\n  //     - è¿”å›ä¿®æ”¹åçš„é“¾è¡¨å¤´éƒ¨Â `head`ã€‚\n\n  return head;\n};\n\n```\n\n### 3.1. å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯é“¾è¡¨çš„é•¿åº¦ã€‚æˆ‘ä»¬åªéœ€è¦éå†é“¾è¡¨ä¸€æ¬¡ã€‚\n- ç©ºé—´å¤æ‚åº¦æ˜¯ `O(1)`ï¼Œå› ä¸ºæˆ‘ä»¬åªä½¿ç”¨äº†å›ºå®šæ•°é‡çš„é¢å¤–ç©ºé—´ï¼ˆå‡ ä¸ªæŒ‡é’ˆï¼‰ã€‚\n\n## 4. é”™è¯¯è®°å½•","547d660b7dc053ebb16493447c9e9350":"\n# ä»å­—ç¬¦ä¸²ä¸­ç§»é™¤æ˜Ÿå·\n\n\n`#leetcode` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407271718841.png?imageSlim)\n\n## è§£é¢˜æ€è·¯\n\n1.  æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª`æ ˆ`æ¥å­˜å‚¨å­—ç¬¦ã€‚\n2.  éå†è¾“å…¥å­—ç¬¦ä¸²Â `s`Â ä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼š\n    - å¦‚æœå½“å‰å­—ç¬¦`ä¸æ˜¯æ˜Ÿå·`ï¼Œæˆ‘ä»¬å°±æŠŠå®ƒ`æ¨å…¥æ ˆ`ä¸­ã€‚\n    - å¦‚æœå½“å‰å­—ç¬¦`æ˜¯æ˜Ÿå·`ï¼Œæˆ‘ä»¬å°±ä»`æ ˆé¡¶å¼¹å‡ºä¸€ä¸ªå­—ç¬¦`ï¼ˆå¦‚æœæ ˆä¸ä¸ºç©ºï¼‰ã€‚\n3. æœ€åï¼Œæ ˆä¸­å‰©ä¸‹çš„å­—ç¬¦å°±æ˜¯æˆ‘ä»¬çš„ç»“æœã€‚\n\t- æˆ‘ä»¬ä½¿ç”¨Â `join()`Â æ–¹æ³•å°†æ ˆä¸­çš„å­—ç¬¦è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {string} s\n * @return {string}\n */\nvar removeStars = function (s) {\n  // ä½¿ç”¨æ ˆ\n  let stack = [];\n  for (let i = 0; i < s.length; i++) {\n    if (s[i] === \"*\") {\n      stack.pop();\n    } else {\n      stack.push(s[i]);\n    }\n  }\n  return stack.join(\"\");\n};\n\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`ï¼Œå…¶ä¸­ n æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚\n- ç©ºé—´å¤æ‚åº¦ä¹Ÿæ˜¯ `O(n)`ï¼Œå› ä¸ºåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼ˆæ²¡æœ‰æ˜Ÿå·ï¼‰\n\n## é”™è¯¯è®°å½•\n\n","0e296e6f876d55d2b176358210346750":"\n# åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹\n\n\n`#2024/07/28` `#leetcode`  `#ç®—æ³•/åŒæŒ‡é’ˆ` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407281631265.png?imageSlim)\n\n## è§£é¢˜æ€è·¯\n\n- åŒæŒ‡é’ˆæŠ€å·§\n- åŸåœ°ä¿®æ”¹\n\n## ä»£ç å®ç°\n```javascript\n/**\n * @param {number[]} nums\n * @return {number}\n */\nvar removeDuplicates = function (nums) {\n  // å¿«æ…¢æŒ‡é’ˆ,éƒ½ä»0å¼€å§‹\n  let fast = 0;\n  let slow = 0;\n  // å¿«æŒ‡é’ˆéå†æ•°ç»„\n  while (fast < nums.length) {\n    // å½“å¿«æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ ä¸ç­‰äºæ…¢æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ æ—¶\n    if (nums[fast] !== nums[slow]) {\n      // ä¸ç›¸ç­‰æ—¶ï¼Œå…ˆç§»åŠ¨æ¨¡æ¿\n      slow++;\n      // å°†å¿«æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ èµ‹å€¼ç»™æ…¢æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ \n      nums[slow] = nums[fast];\n    }\n    // å¿«æŒ‡é’ˆï¼Œæ¯éå†ä¸€ä¸ªå…ƒç´ ï¼Œå°±å‘åç§»åŠ¨ä¸€æ¬¡\n    fast++;\n  }\n  // åˆ é™¤åé¢çš„å…ƒç´ \n  nums.splice(slow + 1);\n\n  return slow + 1;\n};\n\n```\n\n## é”™è¯¯è®°å½•\n\n","10d10687fda75de486bd0608455ce0d4":"\n# æœ€é•¿è¿ç»­åºåˆ—\n\n\n`#2024/07/28` `#leetcode` `#ç®—æ³•/å“ˆå¸Œ`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![iShot_2024-07-20_09.28.52.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407281623327.png?imageSlim)\n\n## è§£é¢˜æ€è·¯\n\n- ä½¿ç”¨ Set æ¥ï¼Œç©ºé—´å¤æ‚åº¦æ¢æ—¶é—´å¤æ‚åº¦\n   - å»é‡äº†ä¹Ÿæ²¡å…³ç³»ï¼Œå› ä¸ºè¿™é‡Œéœ€è¦æ‰¾è¿ç»­çš„ä¸ªæ•°\n\n## ä»£ç å®ç°\n```javascript\n/**\n * @param {number[]} nums\n * @return {number}\n */\nvar longestConsecutive = function (nums) {\n  // ä½¿ç”¨é›†åˆå­˜å‚¨æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œæ–¹ä¾¿æŸ¥æ‰¾ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨\n  const set = new Set(nums);\n  // ç”¨äºè®°å½•æœ€é•¿è¿ç»­åºåˆ—çš„é•¿åº¦\n  let longest = 0;\n  // éå†æ•°ç»„ä¸­çš„å…ƒç´ \n  // ç›´æ¥éå† set é›†åˆï¼Œå»é‡ä¹Ÿæ²¡å…³ç³»\n  for (const num of set) {\n    // å½“å‰å…ƒç´ çš„å‰ä¸€ä¸ªå…ƒç´ ä¸å­˜åœ¨æ—¶ï¼Œæ‰å¼€å§‹è®¡ç®—è¿ç»­åºåˆ—çš„é•¿åº¦\n    // è¿™æ ·å¯ä»¥é¿å…é‡å¤è®¡ç®—\n    if (!set.has(num - 1)) {\n      // å½“å‰å…ƒç´ \n      let currentNum = num;\n      // å½“å‰è¿ç»­åºåˆ—çš„é•¿åº¦\n      let currentStreak = 1;\n      // å½“å‰å…ƒç´ çš„åä¸€ä¸ªå…ƒç´ å­˜åœ¨æ—¶ï¼Œå°±ç»§ç»­è®¡ç®—è¿ç»­åºåˆ—çš„é•¿åº¦\n      while (set.has(currentNum + 1)) {\n        currentNum += 1;\n        currentStreak += 1;\n      }\n      // æ›´æ–°æœ€é•¿è¿ç»­åºåˆ—çš„é•¿åº¦\n      longest = Math.max(longest, currentStreak);\n    }\n  }\n  return longest;\n};\n\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼š `O(n)`\n   - éå†ï¼š`for (const num of set) { `  ï¼Œè¿™ä¸ªå¤æ‚åº¦æ˜¯ `O(n)`\n   - `while` æŸ¥æ‰¾\n      - **æ¯ä¸ªå…ƒç´ æœ€å¤šä¼šç»å†ä¸€æ¬¡æŸ¥æ‰¾å‰ä¸€ä¸ªå…ƒç´ å’Œè‹¥å¹²æ¬¡æŸ¥æ‰¾åç»­å…ƒç´ çš„æ“ä½œ**ã€‚è€ŒæŸ¥æ‰¾æ“ä½œåœ¨é›†åˆä¸­å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º `O(1)`ï¼Œå› æ­¤å¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œæ•´ä¸ªæŸ¥æ‰¾æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å¯ä»¥è§†ä¸º `O(1)`\n- ç©ºé—´å¤æ‚åº¦ï¼š O(n)\n\n## é”™è¯¯è®°å½•\n\n","4af5558d1ce75da4b6c7260097cc8876":"\n# å¥‡å¶é“¾è¡¨\n\n\n`#å•é“¾è¡¨`  `#2024/07/30`  `#å•é“¾è¡¨/åŒæŒ‡é’ˆ` `#å•é“¾è¡¨/å¿«æ…¢æŒ‡é’ˆ`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›®åŠç†è§£ \n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407300802267.png?imageSlim)\n\n## 2. è§£é¢˜æ€è·¯\n\n1. å¤„ç†ç‰¹æ®Šæƒ…å†µï¼šbase case\n    - å¦‚æœ`é“¾è¡¨ä¸ºç©º`æˆ–`åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹`ï¼Œç›´æ¥è¿”å›åŸé“¾è¡¨ã€‚\n2. åˆå§‹åŒ–æŒ‡é’ˆï¼šä¸‰ä¸ªå˜é‡\n    - oddï¼šæŒ‡å‘å¥‡æ•°ç´¢å¼•èŠ‚ç‚¹ï¼Œåˆå§‹ä¸º head\n    - evenï¼šæŒ‡å‘å¶æ•°ç´¢å¼•èŠ‚ç‚¹ï¼Œåˆå§‹ä¸º head.next\n    - evenHeadï¼šä¿å­˜å¶æ•°é“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œç”¨äºæœ€åçš„è¿æ¥\n3. éå†é“¾è¡¨ï¼Œåˆ†ç¦»å¥‡å¶èŠ‚ç‚¹\n    - å¥‡æ•°èŠ‚ç‚¹è¿æ¥åˆ°å¥‡æ•°é“¾è¡¨\n    - å¶æ•°èŠ‚ç‚¹è¿æ¥åˆ°å¶æ•°é“¾è¡¨\n4. è¿æ¥å¥‡å¶é“¾è¡¨\n    - å°†`å¥‡æ•°é“¾è¡¨çš„å°¾éƒ¨`ä¸`å¶æ•°é“¾è¡¨çš„å¤´éƒ¨`ç›¸è¿\n5. è¿”å›é‡ç»„åçš„é“¾è¡¨å¤´\n\n## 3. ä»£ç å®ç°\n\n```javascript\n/**  \n * @description è§£é¢˜æ€è·¯æ­¥éª¤ï¼š  \n * 1. å¤„ç†ç‰¹æ®Šæƒ…å†µï¼šbase case  \n *     - å¦‚æœ`é“¾è¡¨ä¸ºç©º`æˆ–`åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹`ï¼Œç›´æ¥è¿”å›åŸé“¾è¡¨ã€‚  \n * 2. åˆå§‹åŒ–æŒ‡é’ˆï¼šä¸‰ä¸ªå˜é‡  \n *     - oddï¼šæŒ‡å‘å¥‡æ•°ç´¢å¼•èŠ‚ç‚¹ï¼Œåˆå§‹ä¸º head  \n *     - evenï¼šæŒ‡å‘å¶æ•°ç´¢å¼•èŠ‚ç‚¹ï¼Œåˆå§‹ä¸º head.next  \n *     - evenHeadï¼šä¿å­˜å¶æ•°é“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œç”¨äºæœ€åçš„è¿æ¥  \n * 3. éå†é“¾è¡¨ï¼Œåˆ†ç¦»å¥‡å¶èŠ‚ç‚¹  \n *     - å¥‡æ•°èŠ‚ç‚¹è¿æ¥åˆ°å¥‡æ•°é“¾è¡¨  \n *     - å¶æ•°èŠ‚ç‚¹è¿æ¥åˆ°å¶æ•°é“¾è¡¨  \n * 4. è¿æ¥å¥‡å¶é“¾è¡¨  \n *     - å°†`å¥‡æ•°é“¾è¡¨çš„å°¾éƒ¨`ä¸`å¶æ•°é“¾è¡¨çš„å¤´éƒ¨`ç›¸è¿  \n * 5. è¿”å›é‡ç»„åçš„é“¾è¡¨å¤´  \n * */  \n  \n/**  \n * Definition for singly-linked list. * function ListNode(val, next) {  \n *     this.val = (val===undefined ? 0 : val)  \n *     this.next = (next===undefined ? null : next) * }  \n */  \n/**  \n * @param {ListNode} head  \n * @return {ListNode}  \n */  \nvar oddEvenList = function (head) {  \n  \n    // â‘  å¤„ç†ç‰¹æ®Šæƒ…å†µï¼šbase case  \n    if (head === null || head.next === null) {  \n        return head;  \n    }  \n    // â‘¡ åˆå§‹åŒ–æŒ‡é’ˆï¼šä¸‰ä¸ªå˜é‡  \n    let odd = head; // å¥‡æ•°é“¾è¡¨çš„å¤´èŠ‚ç‚¹  \n    let even = head.next; // å¶æ•°é“¾è¡¨çš„å¤´èŠ‚ç‚¹  \n    let evenHead = even;  // ä¿å­˜å¶æ•°é“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œç”¨äºæœ€åçš„è¿æ¥  \n  \n    // â‘¢ éå†é“¾è¡¨ï¼Œåˆ†ç¦»å¥‡å¶èŠ‚ç‚¹  \n    while (even !== null && even.next !== null) {  \n        // å¥‡æ•°èŠ‚ç‚¹è¿æ¥åˆ°å¥‡æ•°é“¾è¡¨  \n        // å¥‡æ•°èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ æŒ‡å‘ å¶æ•°èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆè‡ªç„¶æ˜¯ä¸‹ä¸€ä¸ªæŠ€æœ¯èŠ‚ç‚¹äº†ï¼‰  \n        odd.next = even.next; \n        odd = odd.next;       // å¥‡æ•°èŠ‚ç‚¹æŒ‡é’ˆåç§»  \n  \n        // å¶æ•°èŠ‚ç‚¹è¿æ¥åˆ°å¶æ•°é“¾è¡¨  \n        // å¶æ•°èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ æŒ‡å‘ å¥‡æ•°èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆè‡ªç„¶æ˜¯ä¸‹ä¸€ä¸ªå¶æ•°èŠ‚ç‚¹äº†ï¼‰  \n        even.next = odd.next;  \n        even = even.next;      // å¶æ•°èŠ‚ç‚¹æŒ‡é’ˆåç§»  \n    }  \n  \n    // â‘£ è¿æ¥å¥‡å¶é“¾è¡¨  \n    odd.next = evenHead; // å°†å¥‡æ•°é“¾è¡¨çš„å°¾éƒ¨ä¸å¶æ•°é“¾è¡¨çš„å¤´éƒ¨ç›¸è¿  \n  \n    // â‘¤ è¿”å›é‡ç»„åçš„é“¾è¡¨å¤´  \n    return head;  \n  \n};\n```\n\n### 3.1. å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯é“¾è¡¨çš„é•¿åº¦ï¼Œæˆ‘ä»¬åªéå†äº†ä¸€æ¬¡é“¾è¡¨ã€‚ \n- ç©ºé—´å¤æ‚åº¦ï¼š`O(1)`ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº†`å¸¸æ•°çº§`çš„é¢å¤–ç©ºé—´\n\n## 4. é”™è¯¯è®°å½•","a1aafc7da5f055f8a7c377333f1f79d6":"\n# åè½¬é“¾è¡¨\n\n\n`#leetcode`   `#2024/08/10`  `#ç®—æ³•/é“¾è¡¨`   `#ç®—æ³•/é“¾è¡¨`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240810173705.png)\n\n## è§£é¢˜æ€è·¯\n\n### æ€è·¯ä¸€ï¼šé€’å½’é­”æ³•\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240810173541.png)\n\n#### ä»£ç å®ç°\n\n```javascript\n/**\n * Definition for singly-linked list.\n * function ListNode(val, next) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.next = (next===undefined ? null : next)\n * }\n */\n/**\n * @param {ListNode} head\n * @return {ListNode}\n */\nvar reverseList = function (head) {\n  // base case 1: å¦‚æœ head ä¸ºç©ºï¼Œè¿”å› null\n  if (head === null) {\n    return null;\n  }\n  // base case 2: é“¾è¡¨åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆhead.next === nullï¼‰ï¼Œç›´æ¥è¿”å›è¿™ä¸ªèŠ‚ç‚¹ã€‚\n  // é€’å½’åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›æœ€åä¸€ä¸ªèŠ‚ç‚¹\n  if (head.next === null) {\n    return head;\n  }\n\n  let last = reverseList(head.next);\n  head.next.next = head;\n  head.next = null;\n\n  return last;\n};\n\n```\n\n> `head.next === null` æ—¶ï¼Œä»£è¡¨é“¾è¡¨åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹\n\n#### å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`\n    - å…¶ä¸­ n æ˜¯é“¾è¡¨çš„é•¿åº¦\n    - å‡½æ•°ä¼šé€’å½’ n æ¬¡ï¼Œæ¯æ¬¡é€’å½’çš„æ“ä½œæ˜¯å¸¸æ•°æ—¶é—´\n- ç©ºé—´å¤æ‚åº¦ï¼š`O(n)`\n    - é€’å½’è°ƒç”¨ä¼šä½¿ç”¨æ ˆç©ºé—´ï¼Œæœ€å¤§æ·±åº¦ä¸º n\n    - æ²¡æœ‰ä½¿ç”¨é¢å¤–çš„æ•°æ®ç»“æ„ï¼Œæ‰€æœ‰é¢å¤–ç©ºé—´éƒ½æ¥è‡ªé€’å½’è°ƒç”¨æ ˆ\n\n","11728e8782685268b813c9386c656160":"\n# é“¾è¡¨æœ€å¤§å­ªç”Ÿå’Œ\n\n\n`#leetcode`   `#2024/08/10`  `#ç®—æ³•/é“¾è¡¨`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240810174638.png)\n\n- ç†è§£\n\t- ä½ å…ˆé€‰ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å’Œæœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œè®¡ç®—å®ƒä»¬çš„å’Œã€‚\n\t- ç„¶åé€‰ç¬¬äºŒä¸ªèŠ‚ç‚¹å’Œå€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œè®¡ç®—å’Œã€‚\n\t- ä¾æ­¤ç±»æ¨ï¼Œç›´åˆ°ä½ åˆ°è¾¾é“¾è¡¨çš„ä¸­é—´ã€‚\n- ä¸¾ä¸ªä¾‹å­ï¼šå‡è®¾é“¾è¡¨æ˜¯ï¼š`[5,4,2,1]`\n    - ç¬¬ä¸€å¯¹å­ªç”ŸèŠ‚ç‚¹ï¼š5 å’Œ 1ï¼Œå’Œæ˜¯ 6\n    - ç¬¬äºŒå¯¹å­ªç”ŸèŠ‚ç‚¹ï¼š4 å’Œ 2ï¼Œå’Œæ˜¯ 6\n    - æ‰€æœ‰å­ªç”Ÿå’Œä¸­æœ€å¤§çš„æ˜¯ 6ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ 6\n\n## è§£é¢˜æ€è·¯\n\n1. **æ‰¾åˆ°é“¾è¡¨çš„ä¸­ç‚¹**ï¼š\n    - æˆ‘ä»¬å¯ä»¥ä½¿ç”¨**å¿«æ…¢æŒ‡é’ˆ**çš„æ–¹æ³•ã€‚å¿«æŒ‡é’ˆæ¯æ¬¡èµ°ä¸¤æ­¥ï¼Œæ…¢æŒ‡é’ˆæ¯æ¬¡èµ°ä¸€æ­¥\n    - å½“å¿«æŒ‡é’ˆåˆ°è¾¾é“¾è¡¨æœ«å°¾æ—¶ï¼Œæ…¢æŒ‡é’ˆä¼šåˆ°è¾¾é“¾è¡¨çš„**ä¸­ç‚¹ä½ç½®**\n        - å› æ­¤ï¼Œ**æ…¢æŒ‡é’ˆå¯ä»¥ç”¨æ¥åˆ†å‰²é“¾è¡¨**ã€‚\n2. **åè½¬é“¾è¡¨çš„ååŠéƒ¨åˆ†**ï¼šå¯å‚è€ƒ [12. ç®—æ³•/3. åˆ·é¢˜ç¯‡/1. LeetCode ç²¾å 75 é¢˜/31.  åè½¬é“¾è¡¨|31.  åè½¬é“¾è¡¨](/post/11728e8782685268b813c9386c656160.html#12-ç®—æ³•/3-åˆ·é¢˜ç¯‡/1-LeetCode-ç²¾å-75-é¢˜/31--åè½¬é“¾è¡¨|31--åè½¬é“¾è¡¨)\n    - é€šè¿‡`æ…¢æŒ‡é’ˆ`ï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°é“¾è¡¨çš„ååŠéƒ¨åˆ†\n    - åè½¬å®Œåï¼Œä¸€å®šè¦**æ–­å¼€**å‰åä¸¤éƒ¨åˆ†ï¼Œè®© `slow.next = null` å³å¯\n3. **è®¡ç®—å­ªç”Ÿå’Œå¹¶æ‰¾å‡ºæœ€å¤§å€¼**ï¼š\n    - å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆï¼š`second` å’Œ `first`\n        - ä¸€ä¸ªä»é“¾è¡¨å¤´å¼€å§‹ï¼ˆæŒ‡å‘å‰åŠéƒ¨åˆ†ï¼‰\n        - ä¸€ä¸ªä»åè½¬åçš„é“¾è¡¨å¤´å¼€å§‹ï¼ˆæŒ‡å‘æ–°çš„ååŠéƒ¨åˆ†ï¼‰ã€‚\n    - åŒæ—¶ç§»åŠ¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œè®¡ç®—ä¸¤ä¸ªå¯¹åº”èŠ‚ç‚¹çš„å’Œå¹¶æŒç»­æ›´æ–°æœ€å¤§å­ªç”Ÿå’Œã€‚\n4. **æ¢å¤é“¾è¡¨ç»“æ„ï¼ˆå¯é€‰ï¼‰**ï¼š\n    - å¦‚æœä¸éœ€è¦ä¿å­˜é“¾è¡¨çš„åŸå§‹çŠ¶æ€ï¼Œè¿™æ­¥å¯ä»¥çœç•¥ã€‚\n    - å¦åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥å†åè½¬ä¸€æ¬¡ååŠéƒ¨åˆ†çš„é“¾è¡¨ï¼Œå°†å…¶æ¢å¤ä¸ºåŸå§‹çŠ¶æ€ã€‚\n\n### ä»£ç å®ç°\n\n```javascript\n/**\n * Definition for singly-linked list.\n * function ListNode(val, next) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.next = (next===undefined ? null : next)\n * }\n */\n/**\n * @param {ListNode} head\n * @return {number}\n */\nvar pairSum = function (head) {\n  // â‘  å…ˆä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹\n  let slow = head;\n  let fast = head;\n  while (fast !== null && fast.next !== null) {\n    slow = slow.next;\n    fast = fast.next.next;\n  }\n\n  // â‘¡ åè½¬ååŠéƒ¨åˆ†é“¾è¡¨\n  let secondHalf = reverseList(slow);\n\n  // æ–­å¼€å‰åŠéƒ¨åˆ†é“¾è¡¨å’ŒååŠéƒ¨åˆ†é“¾è¡¨çš„è¿æ¥\n  slow.next = null;\n\n  // â‘¢ éå†ï¼Œæ‰¾åˆ°æœ€å¤§å€¼\n  let sum = 0;\n  let first = head;\n  let second = secondHalf;\n\n  while (first !== null && second !== null) {\n    sum = Math.max(sum, first.val + second.val);\n    first = first.next;\n    second = second.next;\n  }\n\n  return sum;\n};\n\nvar reverseList = function (head) {\n  // base case: å¦‚æœ head ä¸ºç©ºï¼Œè¿”å› null\n  if (head === null) {\n    return null;\n  }\n  // base case: å¦‚æœ head.next ä¸ºç©ºï¼Œè¿”å› head\n  // é€’å½’åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›æœ€åä¸€ä¸ªèŠ‚ç‚¹\n  if (head.next === null) {\n    return head;\n  }\n\n  let last = reverseList(head.next);\n  head.next.next = head;\n  head.next = null;\n\n  return last;\n};\n\n```\n\n> å®Œå…¨åè½¬é“¾è¡¨å¯å‚è€ƒ [12. ç®—æ³•/3. åˆ·é¢˜ç¯‡/1. LeetCode ç²¾å 75 é¢˜/31.  åè½¬é“¾è¡¨|31.  åè½¬é“¾è¡¨](/post/11728e8782685268b813c9386c656160.html#12-ç®—æ³•/3-åˆ·é¢˜ç¯‡/1-LeetCode-ç²¾å-75-é¢˜/31--åè½¬é“¾è¡¨|31--åè½¬é“¾è¡¨)\n### å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`\n\t- å…¶ä¸­ n æ˜¯é“¾è¡¨çš„é•¿åº¦\n\t- æˆ‘ä»¬éå†é“¾è¡¨æ‰¾ä¸­ç‚¹ï¼Œåè½¬ååŠéƒ¨åˆ†ï¼Œç„¶åå†æ¬¡éå†è®¡ç®—æœ€å¤§å’Œï¼Œæ¯æ­¥æ“ä½œéƒ½æ˜¯ `O(n)`ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼š`O(1)`ï¼Œåªä½¿ç”¨äº†å¸¸æ•°é¢å¤–ç©ºé—´\n\n","f743852eb1a45775a53379c4f31019d8":"\n# äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦\n\n`#ç®—æ³•/äºŒå‰æ ‘` `#2023/04/22`  `#leetcode` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›® \n\nhttps://leetcode.cn/problems/maximum-depth-of-binary-tree/\n\n## 2. æ€è·¯ 1ï¼šéå†ä¸€éäºŒå‰æ ‘çš„æ€è·¯\n\n- `éå†`ä¸€éäºŒå‰æ ‘\n\t- ç”¨ä¸€ä¸ª`å¤–éƒ¨å˜é‡ res`è®°å½•æ¯ä¸ªèŠ‚ç‚¹æ‰€åœ¨çš„æ·±åº¦\n\t- å˜é‡`depth` è®°å½•å½“å‰é€’å½’åˆ°çš„èŠ‚ç‚¹æ·±åº¦\n- æœ€åï¼Œå– `depth` å’Œ `res` çš„æœ€å¤§å€¼å°±å¯ä»¥å¾—åˆ°æœ€å¤§æ·±åº¦ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\nvar maxDepth = function(root) {\n    let res = 0;\n    // depth è®°å½•å½“å‰é€’å½’åˆ°çš„èŠ‚ç‚¹æ·±åº¦\n    let depth = 0;\n    function traverse(root) {\n        if(root === null) return;\n        depth++;\n        // åˆ°è¾¾å¶å­èŠ‚ç‚¹\n        if(root.left === null && root.right === null){\n            res = Math.max(depth, res);\n        }\n        traverse(root.left);\n        traverse(root.right);\n        depth--;\n    }\n    traverse(root);\n    return res;\n};\n```\n\n> [!warning]\n> æ³¨æ„ï¼šå‡½æ•°å‘½åå’Œæ¡†æ¶ `traverse` ï¼Œè¿™ç§è§„èŒƒçš„å¥½å¤„æ˜¯ç›´æ¥å¥—ç”¨å°±è¡Œï¼Œä¸»è¦ç²¾åŠ›æ”¾åœ¨å…·ä½“é€»è¾‘ä¸Šå°±å¥½ï¼Œæ¶å­çš„ä¸œè¥¿éƒ½æ˜¯ä¸ªäººä¹ æƒ¯ï¼Œä½†è¦ç»Ÿä¸€ï¼Œä¸ç„¶ç»™è‡ªå·±æ·»åŠ æˆæœ¬\n\n### 2.1. å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n\t- å…¶ä¸­ n æ˜¯**äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹æ•°**ã€‚\n\t- è¿™ä¸ªç®—æ³•ä¼šéå†äºŒå‰æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ä¸€æ¬¡ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼šO(h)\n\t- å…¶ä¸­ h æ˜¯**äºŒå‰æ ‘çš„é«˜åº¦**ã€‚\n\t- ç©ºé—´å¤æ‚åº¦ä¸»è¦æ¥è‡ªäº**é€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦**ã€‚\n\t- åœ¨æœ€åæƒ…å†µä¸‹ï¼ˆæ ‘å®Œå…¨ä¸å¹³è¡¡ï¼Œå‘ˆç°ä¸ºä¸€æ¡é“¾ï¼‰ï¼Œæ ‘çš„é«˜åº¦å¯èƒ½è¾¾åˆ° nï¼Œæ­¤æ—¶ç©ºé—´å¤æ‚åº¦ä¸º `O(n)`ã€‚\n\t- åœ¨æœ€å¥½æƒ…å†µä¸‹ï¼ˆå®Œå…¨å¹³è¡¡äºŒå‰æ ‘ï¼‰ï¼Œæ ‘çš„é«˜åº¦ä¸º log(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸º `O(log n)`ã€‚\n\t- å› æ­¤ï¼Œç©ºé—´å¤æ‚åº¦å¯ä»¥è¡¨ç¤ºä¸º O(h)ï¼Œå…¶ä¸­ h æ˜¯æ ‘çš„é«˜åº¦ã€‚\n\n## 3. æ€è·¯ 2ï¼šåˆ†è§£é—®é¢˜çš„æ€è·¯\n\n- å³é€šè¿‡`å­æ ‘çš„æœ€å¤§æ·±åº¦`æ¨å¯¼å‡º`åŸæ ‘çš„æ·±åº¦`\n- æ‰€ä»¥å¿…ç„¶ä¸»è¦é€»è¾‘éƒ½åœ¨ `ååºä½ç½®`ï¼Œå› ä¸º`ååºä½ç½®`èƒ½å¤Ÿå¾—åˆ°å­æ ‘çš„æ·±åº¦ã€‚\n\n```js\nvar maxDepth = function (root) {\n\t// base case\n    if (root == null) {\n        return 0;\n    }\n    // åˆ©ç”¨å®šä¹‰ï¼Œè®¡ç®—å·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦\n    var leftMax = maxDepth(root.left);\n    var rightMax = maxDepth(root.right);\n    // æ•´æ£µæ ‘çš„æœ€å¤§æ·±åº¦ç­‰äºå·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦å–æœ€å¤§å€¼ï¼Œ\n    // ç„¶åå†åŠ ä¸Šæ ¹èŠ‚ç‚¹è‡ªå·±\n    var res = Math.max(leftMax, rightMax) + 1;\n    return res;\n};\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n\t- å…¶ä¸­ n æ˜¯**äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹æ•°**ã€‚\n\t- è¿™ä¸ªç®—æ³•ä¼šè®¿é—®äºŒå‰æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ä¸€æ¬¡ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œå¸¸æ•°æ—¶é—´çš„æ“ä½œã€‚\n\t- å› æ­¤ï¼Œæ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼šO(h)\n\t- å…¶ä¸­ h æ˜¯äºŒå‰æ ‘çš„é«˜åº¦ã€‚\n\t- ç©ºé—´å¤æ‚åº¦ä¸»è¦æ¥è‡ªäºé€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦ã€‚\n\t- åœ¨æœ€åæƒ…å†µä¸‹ï¼ˆæ ‘å®Œå…¨ä¸å¹³è¡¡ï¼Œå‘ˆç°ä¸ºä¸€æ¡é“¾ï¼‰ï¼Œæ ‘çš„é«˜åº¦å¯èƒ½è¾¾åˆ° nï¼Œæ­¤æ—¶ç©ºé—´å¤æ‚åº¦ä¸º O(n)ã€‚\n\t- åœ¨æœ€å¥½æƒ…å†µä¸‹ï¼ˆå®Œå…¨å¹³è¡¡äºŒå‰æ ‘ï¼‰ï¼Œæ ‘çš„é«˜åº¦ä¸º log(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(log n)ã€‚\n\t- å› æ­¤ï¼Œç©ºé—´å¤æ‚åº¦å¯ä»¥è¡¨ç¤ºä¸º O(h)ï¼Œå…¶ä¸­ h æ˜¯æ ‘çš„é«˜åº¦ã€‚","16743cca05a85546a87e4224dedcb0d3":"\n# å¶å­ç›¸ä¼¼çš„æ ‘\n\n\n`#leetcode`   `#2024/08/11`  `#ç®—æ³•/äºŒå‰æ ‘` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240811164506.png)\n\n## 2. è§£é¢˜æ€è·¯\n\n1. åˆ†åˆ«è·å–ä¸¤æ£µæ ‘çš„**å¶å€¼åºåˆ—**\n\t- éå†ä¸€éæ ‘\n\t- å½“é‡åˆ°å¶èŠ‚ç‚¹ï¼ˆ**å·¦å³å­èŠ‚ç‚¹éƒ½ä¸ºç©º**ï¼‰æ—¶ï¼Œå°†å…¶å€¼åŠ å…¥åºåˆ—\n2. æ¯”è¾ƒä¸¤ä¸ªåºåˆ—æ˜¯å¦ç›¸åŒ\n\n## 3. ä»£ç å®ç°\n\n```javascript\n/**\n * Definition for a binary tree node.\n * function TreeNode(val, left, right) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.left = (left===undefined ? null : left)\n *     this.right = (right===undefined ? null : right)\n * }\n */\n/**\n * @param {TreeNode} root1\n * @param {TreeNode} root2\n * @return {boolean}\n */\nvar leafSimilar = function (root1, root2) {\n    // è·å–å¶å­èŠ‚ç‚¹çš„åºåˆ—\n    const getSeq = (root) => {\n        const res = [];\n        // å‰åºéå†\n        const traverse = (node) => {\n            if (!node) {\n                return;\n            }\n            if (!node.left && !node.right) {\n                res.push(node.val);\n            }\n            traverse(node.left);\n            traverse(node.right);\n        }\n        traverse(root);\n        return res;\n    }\n    const seq1 = getSeq(root1);\n    const seq2 = getSeq(root2);\n    // æ¯”è¾ƒä¸¤ä¸ªåºåˆ—æ˜¯å¦ç›¸åŒ\n    // å¦‚æœé•¿åº¦ä¸åŒï¼Œç›´æ¥è¿”å› false\n    if (seq1.length !== seq2.length) {\n        return false;\n    }\n    // é€ä¸ªæ¯”è¾ƒ, å¦‚æœæœ‰ä¸åŒçš„å…ƒç´ ï¼Œç›´æ¥è¿”å› false\n    for (let i = 0; i < seq1.length; i++) {\n        if (seq1[i] !== seq2[i]) {\n            return false;\n        }\n    }\n    // æœ€åï¼Œä¸¤ä¸ªåºåˆ—å®Œå…¨ç›¸åŒï¼Œè¿”å› true\n    return true;\n};\n```\n\n## 4. å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼š`O(n1 + n2)`\n\t- n1 å’Œ n2 åˆ†åˆ«æ˜¯ä¸¤æ£µæ ‘çš„èŠ‚ç‚¹æ•°ã€‚\n\t- `getSeq å‡½æ•°`å¯¹æ¯æ£µæ ‘è¿›è¡Œä¸€æ¬¡å®Œæ•´çš„éå†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚\n\t\t- å¯¹äºroot1 å’Œ root2ï¼Œæˆ‘ä»¬åˆ†åˆ«è°ƒç”¨ä¸€æ¬¡getSeqï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n1 + n2)`ã€‚\n\t- æœ€åçš„æ¯”è¾ƒè¿‡ç¨‹ï¼Œæœ€åæƒ…å†µä¸‹éœ€è¦æ¯”è¾ƒæ‰€æœ‰å¶å­èŠ‚ç‚¹ï¼Œä½†è¿™ä¸ªæ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ä¼šè¶…è¿‡ `O(min(n1, n2))`ã€‚\n\t- å› æ­¤ï¼Œæ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n1 + n2)ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼š`O(h1 + h2 + L)`\n\t-  h1 å’Œ h2 åˆ†åˆ«æ˜¯ä¸¤æ£µæ ‘çš„é«˜åº¦ã€‚\n\t- L æ˜¯å¶å­èŠ‚ç‚¹çš„æ•°é‡ï¼Œæœ€åæƒ…å†µä¸‹ `L = min(n1, n2)`ã€‚\n\t- é€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦æœ€å¤§ä¸ºæ ‘çš„é«˜åº¦ï¼Œå› æ­¤éœ€è¦ O(h1) å’Œ O(h2) çš„ç©ºé—´ã€‚\n\t- seq1 å’Œ seq2 æ•°ç»„å­˜å‚¨å¶å­èŠ‚ç‚¹å€¼ï¼Œå…±éœ€è¦ `O(L)` çš„ç©ºé—´ã€‚\n\t- å› æ­¤ï¼Œæ€»çš„ç©ºé—´å¤æ‚åº¦æ˜¯ `O(h1 + h2 + L)`ã€‚\n- æœ€åæƒ…å†µåˆ†æï¼š\n\t- åœ¨æœ€åæƒ…å†µä¸‹ï¼Œå½“æ ‘å®Œå…¨ä¸å¹³è¡¡ï¼ˆå¦‚é“¾çŠ¶ç»“æ„ï¼‰æ—¶ï¼Œh1 å¯èƒ½ç­‰äº n1ï¼Œh2 å¯èƒ½ç­‰äº n2ã€‚\n\t- æ­¤æ—¶ï¼Œç©ºé—´å¤æ‚åº¦å¯èƒ½é€€åŒ–ä¸º `O(n1 + n2)`ã€‚\n- å¹³å‡æƒ…å†µåˆ†æï¼š\n\t- å¯¹äºè¾ƒä¸ºå¹³è¡¡çš„æ ‘ï¼Œh1 å’Œ h2 é€šå¸¸è¿œå°äº n1 å’Œ n2ã€‚\n\t- åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç©ºé—´å¤æ‚åº¦ä¼šæ›´æ¥è¿‘ O(log(n1) + log(n2) + L)ã€‚\n\n## 5. ä¼˜åŒ–å»ºè®®\n\n- å¯ä»¥è€ƒè™‘**ä½¿ç”¨è¿­ä»£å™¨æˆ–ç”Ÿæˆå™¨**æ¥é€ä¸ªç”Ÿæˆå’Œæ¯”è¾ƒå¶å­èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯å…ˆå­˜å‚¨å®Œæ•´çš„åºåˆ—ã€‚\n\t- è¿™æ ·å¯ä»¥å°†ç©ºé—´å¤æ‚åº¦é™ä½åˆ° **O(h1 + h2)**ï¼Œä½†å¯èƒ½ä¼šç¨å¾®å¢åŠ æ—¶é—´å¤æ‚åº¦\n\n## 6. é”™è¯¯è®°å½•\n\n> [!danger]\n> æ³¨æ„æœ€åè¿”å› ture\n","26a1cc07bf755074bc6d5e67a3c94a0e":"\n# ç»Ÿè®¡äºŒå‰æ ‘ä¸­å¥½èŠ‚ç‚¹çš„æ•°ç›®\n\n\n`#leetcode`   `#2024/08/11`  `#ç®—æ³•/äºŒå‰æ ‘` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240811201951.png)\n\n### å¥½èŠ‚ç‚¹å®šä¹‰\n\nå¦‚æœä»æ ¹èŠ‚ç‚¹åˆ°è¿™ä¸ªèŠ‚ç‚¹çš„è·¯å¾„ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹å€¼éƒ½ä¸å¤§äºè¿™ä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹è¢«ç§°ä¸º\"å¥½èŠ‚ç‚¹\"ã€‚\n\nä¸¾ä¸ªä¾‹å­ï¼š\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240811202056.png)\n\nè¿™ä¸ªæ ‘çš„ç»“æ„æ˜¯ï¼š\n- æ ¹èŠ‚ç‚¹æ˜¯ 3\n- å·¦å­èŠ‚ç‚¹æ˜¯ 1\n\t- å·¦å­èŠ‚ç‚¹æ˜¯ 3\n- å³å­èŠ‚ç‚¹æ˜¯ 4\n\t- å·¦å­èŠ‚ç‚¹æ˜¯ 1\n\t- å³å­èŠ‚ç‚¹æ˜¯ 5\n\nç°åœ¨ï¼Œè®©æˆ‘ä»¬å†æ¬¡åˆ†æè¿™ä¸ªæ ‘ä¸­çš„\"å¥½èŠ‚ç‚¹\"ï¼š\n1. æ ¹èŠ‚ç‚¹ 3 æ˜¯å¥½èŠ‚ç‚¹ï¼ˆè·¯å¾„ä¸Šåªæœ‰å®ƒè‡ªå·±ï¼‰\n2. å·¦å­æ ‘çš„ 1 ä¸æ˜¯å¥½èŠ‚ç‚¹ï¼ˆå› ä¸º 3 > 1ï¼‰\n3. å·¦å­æ ‘çš„ 3 æ˜¯å¥½èŠ‚ç‚¹ï¼ˆå› ä¸º 3 >= 3ï¼‰\n4. å³å­æ ‘çš„ 4 æ˜¯å¥½èŠ‚ç‚¹ï¼ˆå› ä¸º 4 > 3ï¼‰\n5. å³å­æ ‘çš„ 1 ä¸æ˜¯å¥½èŠ‚ç‚¹ï¼ˆå› ä¸º 3 > 1 ä¸” 4 > 1ï¼‰\n6. å³å­æ ‘çš„ 5 æ˜¯å¥½èŠ‚ç‚¹ï¼ˆå› ä¸º 5 > 3 ä¸” 5 > 4ï¼‰\n\nå› æ­¤ï¼Œè¿™ä¸ªæ ‘ä¸­å…±æœ‰ 4 ä¸ªå¥½èŠ‚ç‚¹\n\n## è§£é¢˜æ€è·¯ï¼šéå†ä¸€éäºŒå‰æ ‘çš„æ€è·¯\n\n```javascript\n/**\n * Definition for a binary tree node.\n * function TreeNode(val, left, right) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.left = (left===undefined ? null : left)\n *     this.right = (right===undefined ? null : right)\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number}\n */\nvar goodNodes = function (root) {\n  // å¥½èŠ‚ç‚¹çš„æ•°é‡\n  let res = 0;\n  // é€’å½’å‡½æ•°\n  /**\n   * @param {TreeNode} node å½“å‰èŠ‚ç‚¹\n   * @param {number} max å½“å‰è·¯å¾„ä¸Šçš„æœ€å¤§å€¼, åˆå§‹å€¼ä¸ºæ ¹èŠ‚ç‚¹çš„å€¼,\n   *                     åé¢ä¼šä¸æ–­æ›´æ–°ï¼Œéœ€è¦ä¼ é€’ç»™å­èŠ‚ç‚¹\n   * */\n  function traverse(node, max) {\n    if (!node) {\n      return;\n    }\n    // å‰åºä½ç½®\n    // å…ˆåˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦æ˜¯å¥½èŠ‚ç‚¹\n    // å¦‚æœæ˜¯ï¼Œå¥½èŠ‚ç‚¹æ•°é‡åŠ  1ï¼ŒåŒæ—¶æ›´æ–° max\n    if (node.val >= max) {\n      res++;\n      max = node.val;\n    }\n    // ç»§ç»­é€’å½’å·¦å³å­æ ‘\n    traverse(node.left, max);\n    traverse(node.right, max);\n  }\n  traverse(root, root.val);\n  return res;\n};\n\n```\n\n## å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n    - è¿™é‡Œçš„ `n` æ˜¯**æ ‘ä¸­èŠ‚ç‚¹çš„æ•°é‡**ã€‚\n    - å‡½æ•° traverse ä¼šè®¿é—®æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ä¸€æ¬¡ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯çº¿æ€§çš„ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼š`O(h)`\n    - **h** æ˜¯æ ‘çš„é«˜åº¦ã€‚\n    - ç©ºé—´å¤æ‚åº¦ä¸»è¦æ¥è‡ª**é€’å½’è°ƒç”¨æ ˆ**ã€‚åœ¨æœ€åæƒ…å†µä¸‹ï¼ˆæ ‘å®Œå…¨ä¸å¹³è¡¡ï¼Œå‘ˆç°ä¸ºä¸€æ¡é“¾ï¼‰ï¼Œé«˜åº¦å¯èƒ½è¾¾åˆ° nï¼Œæ­¤æ—¶ç©ºé—´å¤æ‚åº¦ä¸º O(n)ã€‚\n    - åœ¨å¹³è¡¡æ ‘çš„æƒ…å†µä¸‹ï¼Œé«˜åº¦çº¦ä¸º `log(n)`ï¼Œç©ºé—´å¤æ‚åº¦ä¸º `O(log n)`\n\n## æ³¨æ„ç‚¹\n\n- æ›´æ–° `max` å’Œ `res` æ˜¯åœ¨å‰åºä½ç½®ä¸Š\n\n","48f1757eb0015f2bbea3baa6e468c465":"\n# è·¯å¾„æ€»å’Œ III\n\n\n`#leetcode`   `#2024/08/17` `#ç®—æ³•/äºŒå‰æ ‘` `#ç®—æ³•/å‰ç¼€å’Œ` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240817143510.png)\n\n## 2. è§£é¢˜æ€è·¯\n\n- äºŒå‰æ ‘çš„å‰åºååºéå†\n- å‰ç¼€å’ŒæŠ€å·§\n\n## 3. ä»£ç å®ç°\n\n```javascript\n\n/**\n * Definition for a binary tree node.\n * function TreeNode(val, left, right) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.left = (left===undefined ? null : left)\n *     this.right = (right===undefined ? null : right)\n * }\n */\n/**\n * @param {TreeNode} root\n * @param {number} targetSum\n * @return {number}\n */\nvar pathSum = function(root, targetSum) {\n\n    // key æ˜¯å‰ç¼€å’Œï¼Œvalue æ˜¯å‰ç¼€å’Œä¸º pathSum çš„ä¸ªæ•°\n    const preSumCount = new Map();\n    // åˆå§‹åŒ–ï¼Œå‰ç¼€å’Œä¸º 0 çš„è·¯å¾„æœ‰ä¸€æ¡\n    // ä¸ºä»€ä¹ˆè¦åˆå§‹åŒ–å‘¢ï¼Ÿ\n    // è¿™ä¸ªè®¾ç½®å¯ä»¥è¢«ç†è§£ä¸ºä»£è¡¨ä¸€ä¸ª\"ç©ºè·¯å¾„\"ï¼Œå…¶å’Œä¸º 0\n    preSumCount.set(0, 1);\n    // pathSum è®°å½•å½“å‰è·¯å¾„å’Œï¼Œå³ä»æ ¹èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„è·¯å¾„å’Œ\n    let pathSum = 0;\n    // res è®°å½•æ»¡è¶³æ¡ä»¶çš„è·¯å¾„æ¡æ•°\n    let res = 0;\n    const traverse = function(root) {\n        // é€’å½’ç»ˆæ­¢æ¡ä»¶\n        // base case\n        if (root == null) {\n            return;\n        }\n\n        /*************************************************\n         * ::::::::::::::::::::: å‰åºéå†ä½ç½® ::::::::::::::::::\n         ************************************************/\n        // å‰åºéå†ä½ç½®, è®¡ç®—è·¯å¾„å’Œ\n        pathSum += root.val;\n\n        // å…ˆçœ‹ä¸€ä¸‹è·¯å¾„å’Œä¸º pathSum - targetSum çš„è·¯å¾„æœ‰å¤šå°‘æ¡\n        // :::: pathSum - targetSum ä»£è¡¨çš„æ˜¯ä»æ ¹èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„è·¯å¾„å’Œä¸º targetSum\n        // å³æ»¡è¶³æ¡ä»¶çš„è·¯å¾„ï¼Œæ‰€ä»¥æ›´æ–° res çš„å€¼\n        res += preSumCount.get(pathSum - targetSum) || 0;\n        // è®°å½•ä»äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œè·¯å¾„å’Œä¸º pathSum çš„è·¯å¾„æ¡æ•°\n        preSumCount.set(pathSum, (preSumCount.get(pathSum) || 0) + 1);\n\n        traverse(root.left);\n        traverse(root.right);\n\n        /*************************************************\n         * ::::::::::::::: ååºéå†ä½ç½® ::::::::::::::\n         ************************************************/\n        preSumCount.set(pathSum, preSumCount.get(pathSum) - 1);\n        pathSum -= root.val;\n    }\n\n    traverse(root);\n    return res;\n};\n\n\n```\n\n## 4. å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ N æ˜¯æ ‘ä¸­çš„èŠ‚ç‚¹æ•°ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼šO(N)ï¼Œä¸»è¦ç”±é€’å½’è°ƒç”¨æ ˆå’ŒÂ `preSumCount`Â Map è´¡çŒ®ã€‚\n\n## 5. é”™è¯¯è®°å½•\n\nåˆå§‹åŒ–ç©ºè·¯å¾„çš„å¤„ç†ï¼š`preSumCount.set(0, 1);`\n\n","4b0c5cc1bb4b5b6cbd74604b99406f3a":"\n# äºŒå‰æ ‘ä¸­çš„æœ€é•¿äº¤é”™è·¯å¾„\n\n`#leetcode`   `#2024/09/04`  `#ç®—æ³•`   `#ç®—æ³•/äºŒå‰æ ‘` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n> https://leetcode.cn/problems/longest-zigzag-path-in-a-binary-tree/description\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240904081336.png)\n\n## æ€è·¯ï¼šäºŒå‰æ ‘çš„åˆ†è§£é—®é¢˜çš„è§£é¢˜æ€è·¯\n\nè¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ° **åˆ†è§£é—®é¢˜**çš„æ€ç»´ï¼Œè€Œä¸”è¦ç”¨åˆ°**ååºä½ç½®**çš„å¦™ç”¨ã€‚\n\n### é€’å½’å‡½æ•°å®šä¹‰ \n\n```javascript\n/*************************************************  \n * :::: é€’å½’å‡½æ•° getPathLen å®šä¹‰ï¼šè¾“å…¥äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å›ä¸¤ä¸ªå€¼  \n * â‘  ç¬¬ä¸€ä¸ªæ˜¯ä» root å¼€å§‹å‘å·¦èµ°çš„æœ€é•¿äº¤é”™è·¯å¾„é•¿åº¦  \n * â‘¡ ç¬¬äºŒä¸ªæ˜¯ä» root å¼€å§‹å‘å³èµ°çš„æœ€é•¿äº¤é”™è·¯å¾„é•¿åº¦  \n ************************************************/\n```\n\n### ä»£ç å®ç°\n\n```javascript\n\nvar longestZigZag = function(root) {  \n    let res = 0;  \n    /*************************************************  \n     * :::: é€’å½’å‡½æ•°å®šä¹‰ï¼šè¾“å…¥äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å›ä¸¤ä¸ªå€¼  \n     * â‘  ç¬¬ä¸€ä¸ªæ˜¯ä» root å¼€å§‹å‘å·¦èµ°çš„æœ€é•¿äº¤é”™è·¯å¾„é•¿åº¦  \n     * â‘¡ ç¬¬äºŒä¸ªæ˜¯ä» root å¼€å§‹å‘å³èµ°çš„æœ€é•¿äº¤é”™è·¯å¾„é•¿åº¦  \n     ************************************************/  \n    var getPathLen = function(root) {  \n        if (root == null) {  \n            return [-1, -1];  \n        }  \n        // ä»£è¡¨ä»å·¦å­æ ‘å¼€å§‹çš„äº¤é”™è·¯å¾„é•¿åº¦  \n        let left = getPathLen(root.left);  \n        // ä»£è¡¨ä»å³å­æ ‘å¼€å§‹çš„äº¤é”™è·¯å¾„é•¿åº¦  \n        let right = getPathLen(root.right);  \n        /*************************************************  \n         * ::::ååºä½ç½®ï¼Œæ ¹æ®å·¦å³å­æ ‘çš„äº¤é”™è·¯å¾„é•¿åº¦æ¨ç®—æ ¹èŠ‚ç‚¹çš„äº¤é”™è·¯å¾„é•¿åº¦  \n         ************************************************/  \n        let rootPathLen1 = left[1] + 1;  \n        let rootPathLen2 = right[0] + 1;  \n        // æ›´æ–°å…¨å±€æœ€å¤§å€¼  \n        res = Math.max(res, Math.max(rootPathLen1, rootPathLen2));  \n        return [rootPathLen1, rootPathLen2];  \n    }  \n    getPathLen(root);  \n    return res;  \n};\n```\n\n### æ—¶é—´å¤æ‚åº¦\n\n1. **é€’å½’éå†**ï¼š\n   - è¿™æ®µä»£ç ä½¿ç”¨é€’å½’çš„æ–¹å¼éå†æ•´æ£µäºŒå‰æ ‘ã€‚å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œ`getPathLen` å‡½æ•°ä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚\n   - å› æ­¤ï¼Œæ•´ä¸ªæ ‘çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½ä¼šè¢«è®¿é—®ä¸€æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º \\(O(N)\\)ï¼Œå…¶ä¸­ \\(N\\) æ˜¯æ ‘ä¸­èŠ‚ç‚¹çš„ä¸ªæ•°ã€‚\n2. **æ¯æ¬¡é€’å½’è°ƒç”¨çš„æ“ä½œ**ï¼š\n   - åœ¨æ¯æ¬¡é€’å½’è°ƒç”¨ä¸­ï¼Œä¸»è¦è¿›è¡Œçš„æ˜¯å¯¹å·¦å³å­æ ‘çš„é€’å½’è°ƒç”¨å’Œä¸€äº›å¸¸æ•°æ—¶é—´çš„è®¡ç®—ï¼ˆå¦‚è®¡ç®—è·¯å¾„é•¿åº¦å’Œæ›´æ–°æœ€å¤§å€¼ï¼‰ã€‚\n   - è¿™äº›æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¸¸æ•°çº§åˆ«ï¼Œå³ \\(O(1)\\)ã€‚\n\nç»¼ä¸Šæ‰€è¿°ï¼Œæ•´ä¸ªå‡½æ•°çš„æ—¶é—´å¤æ‚åº¦æ˜¯ \\(O(N)\\)ã€‚\n\n### ç©ºé—´å¤æ‚åº¦\n\n1. **é€’å½’æ ˆç©ºé—´**ï¼š\n   - ç”±äºä½¿ç”¨é€’å½’æ¥éå†æ ‘ï¼Œé€’å½’è°ƒç”¨ä¼šæ¶ˆè€—æ ˆç©ºé—´ã€‚\n   - åœ¨æœ€åæƒ…å†µä¸‹ï¼ˆä¾‹å¦‚æ ‘å‘ˆé“¾çŠ¶ï¼Œå®Œå…¨ä¸å¹³è¡¡ï¼‰ï¼Œé€’å½’è°ƒç”¨çš„æœ€å¤§æ·±åº¦ä¸º \\(N\\)ï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ä¸º \\(O(N)\\)ã€‚\n   - åœ¨å¹³å‡æƒ…å†µä¸‹ï¼Œå¯¹äºä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ï¼Œé€’å½’æ·±åº¦ä¸ºæ ‘çš„é«˜åº¦ï¼Œå³ \\(O(\\log N)\\)ã€‚\n2. **é¢å¤–ç©ºé—´**ï¼š\n   - é™¤äº†é€’å½’æ ˆç©ºé—´ï¼Œç®—æ³•ä¸­æ²¡æœ‰ä½¿ç”¨å…¶ä»–é¢å¤–çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨ä¿¡æ¯ï¼Œå› æ­¤é¢å¤–çš„ç©ºé—´å¤æ‚åº¦ä¸º \\(O(1)\\)ã€‚\n\nç»¼ä¸Šæ‰€è¿°ï¼Œæ•´ä½“çš„ç©ºé—´å¤æ‚åº¦æ˜¯ \\(O(N)\\) åœ¨æœ€åæƒ…å†µä¸‹ï¼Œæˆ–è€… \\(O(\\log N)\\) åœ¨å¹³å‡æƒ…å†µä¸‹ã€‚\n\n### å¤æ‚åº¦æ€»ç»“\n\n- **æ—¶é—´å¤æ‚åº¦**: \\(O(N)\\)\n- **ç©ºé—´å¤æ‚åº¦**: \n\t- \\(O(N)\\)ï¼ˆæœ€åæƒ…å†µï¼‰\n\t- \\(O(\\log N)\\)ï¼ˆå¹³å‡æƒ…å†µï¼‰\n\n","a37074a6675e5902b04c6ac20990ee78":"\n# äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ\n\n\n\n`#leetcode`   `#2024/09/07`  `#ç®—æ³•`   `#äºŒå‰æ ‘/å…¬å…±ç¥–å…ˆé—®é¢˜` \n\n> æ›´å¤šè§ [12. ç®—æ³•/2. ç®—æ³•ç¯‡/4. äºŒå‰æ ‘ç¯‡/1. ä¸€ä¸ªæ–¹æ³•ç§’æ€ 5 é“æœ€è¿‘å…¬å…±ç¥–å…ˆé—®é¢˜|1. ä¸€ä¸ªæ–¹æ³•ç§’æ€ 5 é“æœ€è¿‘å…¬å…±ç¥–å…ˆé—®é¢˜](/post/a37074a6675e5902b04c6ac20990ee78.html#12-ç®—æ³•/2-ç®—æ³•ç¯‡/4-äºŒå‰æ ‘ç¯‡/1-ä¸€ä¸ªæ–¹æ³•ç§’æ€-5-é“æœ€è¿‘å…¬å…±ç¥–å…ˆé—®é¢˜|1-ä¸€ä¸ªæ–¹æ³•ç§’æ€-5-é“æœ€è¿‘å…¬å…±ç¥–å…ˆé—®é¢˜) \n\n","f5e8bf7bcd9e5642a7a11cbc55f899d8":"\n# äºŒå‰æ ‘çš„å³è§†å›¾\n\n\n`#leetcode`   `#2024/09/08`  `#ç®—æ³•`  `#ç®—æ³•/äºŒå‰æ ‘`   `#BFS` `#DFS` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908083048.png)\n\n## æ€è·¯ä¸€ï¼šDFS\n\n- è¦ç‚¹ä¸€ï¼šä½¿ç”¨ DFSï¼Œæˆ‘ä»¬å¯ä»¥å…ˆè®¿é—®å³å­æ ‘ï¼Œç„¶åå·¦å­æ ‘ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ¯ä¸€å±‚æœ€å³è¾¹çš„èŠ‚ç‚¹é¦–å…ˆè¢«è®¿é—®\n- è¦ç‚¹äºŒï¼šå‰åºä½ç½® push(root.val)\n\n### ä»£ç å®ç°\n\n```javascript\n/**\n * Definition for a binary tree node.\n * function TreeNode(val, left, right) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.left = (left===undefined ? null : left)\n *     this.right = (right===undefined ? null : right)\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number[]}\n */\nvar rightSideView = function (root) {\n  const res = [];\n  if (root == null) {\n    return [];\n  }\n  traverse(root, 0, res);\n  return res;\n};\n\n/**\n * @description å®šä¹‰ï¼šä»äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ï¼ŒæŒ‰ç…§ã€Œæ ¹èŠ‚ç‚¹ã€å³å­æ ‘ã€å·¦å­æ ‘ã€çš„é¡ºåºéå†äºŒå‰æ ‘\n * @param {TreeNode} root\n * @param {number} depth\n * @param {number[]} res\n */\nvar traverse = function (root, depth, res) {\n  // é€’å½’çš„ç»ˆæ­¢æ¡ä»¶ï¼Œroot ä¸ºç©º\n  if (root == null) {\n    return;\n  }\n  //è¦ç‚¹â‘ ï¼šå‰åºéå†ä½ç½®, å…ˆè®¿é—®å½“å‰èŠ‚ç‚¹ï¼Œå†é€’å½’åœ°è®¿é—®å³å­æ ‘å’Œå·¦å­æ ‘\n  if (res.length == depth) {\n    res.push(root.val);\n  }\n  // è¦ç‚¹â‘¡ï¼šä¸€å®šè¦å…ˆé€’å½’è®¿é—®å³å­æ ‘ï¼Œå†é€’å½’è®¿é—®å·¦å­æ ‘\n  traverse(root.right, depth + 1, res);\n  traverse(root.left, depth + 1, res);\n};\n\n```\n\n## æ€è·¯äºŒï¼šBFS\n\nä½¿ç”¨ BFSï¼Œæˆ‘ä»¬å¯ä»¥**é€å±‚éå†æ ‘**ï¼Œå¹¶åœ¨**æ¯ä¸€å±‚ä¸­å–æœ€å³è¾¹çš„èŠ‚ç‚¹**\n\n### ä»£ç å®ç°\n\n```javascript hl:22\n/**\n * @param {TreeNode} root\n * @return {number[]}\n */\nvar rightSideView = function (root) {\n  const res = [];\n\n  // ä½¿ç”¨ BFS å±‚åºéå†ï¼Œæ¯å±‚æœ€åä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯å³è§†å›¾çš„èŠ‚ç‚¹\n  // 1. å®šä¹‰ä¸€ä¸ªé˜Ÿåˆ—ï¼Œç”¨äºå­˜å‚¨æ¯ä¸€å±‚çš„èŠ‚ç‚¹\n  const queue = [];\n  // 2. å°†æ ¹èŠ‚ç‚¹æ”¾å…¥é˜Ÿåˆ—ä¸­\n  queue.push(root);\n\n  // 3. å¼€å§‹ BFS éå†\n  while (queue.length) {\n    // 3.1. è·å–å½“å‰å±‚çš„èŠ‚ç‚¹ä¸ªæ•°\n    const levelSize = queue.length;\n    // 3.2. éå†å½“å‰å±‚çš„èŠ‚ç‚¹\n    for (let i = 0; i < levelSize; i++) {\n      // 3.2.1. å–å‡ºé˜Ÿå¤´å…ƒç´ \n      const node = queue.shift();\n      // 3.2.2. å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è·³è¿‡\n      if (node == null) {\n        continue;\n      }\n      // 3.2.3. å¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯å½“å‰å±‚çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†å½“å‰èŠ‚ç‚¹çš„å€¼æ”¾å…¥ç»“æœæ•°ç»„ä¸­\n      if (i == levelSize - 1) {\n        res.push(node.val);\n      }\n      // 3.2.4. æœ€åï¼Œå°†å½“å‰èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹æ”¾å…¥é˜Ÿåˆ—ä¸­\n      if (node?.left) {\n        queue.push(node.left);\n      }\n      if (node?.right) {\n        queue.push(node.right);\n      }\n    }\n  }\n\n  return res;\n};\n\n```\n\n### æ³¨æ„ç‚¹\n\n- å–é˜Ÿåˆ—å¤´ï¼š`queue.shift()`\n- æ¯æ¬¡ `push` æ—¶ï¼Œéœ€è¦åˆ¤æ–­æœ‰å€¼å† `push`\n\n## åŸé¢˜åœ°å€\n\nhttps://leetcode.cn/problems/binary-tree-right-side-view/description\n","eef163ba3e4a54cbbfe5070426d9b799":"\n# ä¸‰æ•°ä¹‹å’Œ\n\n\n`#leetcode`   `#2024/07/31`  `#åŒæŒ‡é’ˆ` `#ç®—æ³•/åŒæŒ‡é’ˆ`   `#ç®—æ³•/Nsum` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›®åŠç†è§£ \n\n![image.png600600|476](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407310756023.png?imageSlim)\n\n## 2. è§£é¢˜æ€è·¯\n\n### 2.1. å…ˆçœ‹äºŒæ•°ä¹‹å’Œ\n\næ€è·¯ï¼šå…ˆå¯¹Â `nums`Â æ’åºï¼Œç„¶åä½¿ç”¨`å·¦å³åŒæŒ‡é’ˆæŠ€å·§`ï¼Œä»ä¸¤ç«¯ç›¸å‘è€Œè¡Œå³å¯ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```javascript\nvar twoSum = function (nums, target) {  \n    // â‘  å…ˆæ’åº  \n    nums.sort((a, b) => a - b);  \n    let res = [];  \n      \n    // â‘¡ å®šä¹‰å·¦å³æŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘æ•°ç»„çš„å¤´å’Œå°¾  \n    let lo = 0, hi = nums.length - 1;  \n      \n    // â‘¢ å¾ªç¯æ¡ä»¶ï¼Œä»ä¸¤ç«¯å‘ä¸­é—´é æ‹¢  \n    while (lo < hi) {  \n        let sum = nums[lo] + nums[hi];  \n        // æ ¹æ® sum å’Œ target çš„æ¯”è¾ƒï¼Œç§»åŠ¨å·¦å³æŒ‡é’ˆ  \n        if (sum < target) {  \n            lo++;  \n        } else if (sum > target) {  \n            hi--;  \n        } else {  \n            res.push([nums[lo], nums[hi]]);  \n            lo++;  \n            hi--;  \n        }  \n    }  \n    return res;  \n};\n```\n\n`nums`Â ä¸­å¯èƒ½æœ‰å¤šå¯¹å„¿å…ƒç´ ä¹‹å’Œéƒ½ç­‰äºÂ `target`ï¼Œè¯·ä½ çš„ç®—æ³•è¿”å›æ‰€æœ‰å’Œä¸ºÂ `target`Â çš„å…ƒç´ å¯¹å„¿ï¼Œå…¶ä¸­ä¸èƒ½å‡ºç°é‡å¤ï¼Œä¸Šé¢ä»£ç æœ‰ç‚¹é—®é¢˜ï¼Œæ¯”å¦‚ï¼š\n\n![image.png600|432](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407310806671.png?imageSlim)\n\næ‰€ä»¥æˆ‘ä»¬éå†æ—¶éœ€è¦ `è·³è¿‡ç›¸åŒçš„å…ƒç´ `ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```javascript\n/**  \n * @param {number[]} nums  \n * @param {number} target  \n * @return {number[][]}  \n */  \nvar twoSumTarget = function (nums, target) {  \n    // nums æ•°ç»„å¿…é¡»æœ‰åº  \n    nums.sort((a, b) => a - b);  \n    let lo = 0, hi = nums.length - 1;  \n    let res = [];  \n    while (lo < hi) {  \n        let sum = nums[lo] + nums[hi];  \n        let left = nums[lo];  \n        let right = nums[hi];  \n        // æ ¹æ® sum å’Œ target çš„æ¯”è¾ƒï¼Œç§»åŠ¨å·¦å³æŒ‡é’ˆ  \n        if (sum < target) {  \n            // â‘  å·¦è¾¹ç¢°åˆ°ç›¸åŒçš„å…ƒç´ ï¼Œä¸€ç›´å‘å³ç§»åŠ¨ï¼Œç›´åˆ°ä¸ç›¸åŒçš„å…ƒç´ ä½ç½®  \n            while (lo < hi && nums[lo] == left) lo++;  \n        } else if (sum > target) {  \n            // â‘¡ å³è¾¹ç¢°åˆ°ç›¸åŒçš„å…ƒç´ ï¼Œä¸€ç›´å‘å·¦ç§»åŠ¨ï¼Œç›´åˆ°ä¸ç›¸åŒçš„å…ƒç´ ä½ç½®  \n            while (lo < hi && nums[hi] == right) hi--;  \n        } else {  \n            res.push([left, right]);  \n            // â‘¢ å·¦è¾¹ç¢°åˆ°ç›¸åŒçš„å…ƒç´ ï¼Œä¸€ç›´å‘å³ç§»åŠ¨ï¼Œç›´åˆ°ä¸ç›¸åŒçš„å…ƒç´ ä½ç½®  \n            while (lo < hi && nums[lo] == left) lo++;  \n            // â‘£ å³è¾¹ç¢°åˆ°ç›¸åŒçš„å…ƒç´ ï¼Œä¸€ç›´å‘å·¦ç§»åŠ¨ï¼Œç›´åˆ°ä¸ç›¸åŒçš„å…ƒç´ ä½ç½®  \n            while (lo < hi && nums[hi] == right) hi--;  \n        }  \n    }  \n    return res;  \n};\n```\n\n### 2.2. ä¸‰æ•°ä¹‹å’Œç­‰ `0`\n\n#### 2.2.1.   æ³›åŒ–ï¼š`target` ä¸ä¸º `0` å‘¢ï¼Ÿ\n\n```javascript\n/**  \n * @param {number[]} nums  \n * @return {number[][]}  \n */  \nvar threeSum = function (nums) {  \n    // æ±‚å’Œä¸º 0 çš„ä¸‰å…ƒç»„  \n    return threeSumTarget(nums, 0);  \n};\n\n/**  \n * @param {number[]} nums  \n * @param {number} target  \n * @return {number[][]}  \n */  \nvar threeSumTarget = function (nums, target) {\n\t// ....\n}\n```\n\n#### 2.2.2. `threeSumTarget` æ€è·¯\n\n-  ä» `nums` ä¸­æ‰¾  `[a,b,c] `  ä½¿å¾—  `a + b + c = target` \n\t- éå† `nums`\n\t\t-  `a = nums[i]` æ—¶\n\t\t\t- è¿™ä¸ªæ—¶å€™éœ€è¦ä» `nums` ä¸­çš„ä¸‹æ ‡ `i` å¼€å§‹æ‰¾ä¸¤æ•°ä¹‹å’Œä¸º `target - a`\n\t\t\t\t- é—®é¢˜è½¬åŒ–æˆä¸¤æ•°ä¹‹å’Œ  `threeSumTarget`\n\n#### 2.2.3. é—®é¢˜è½¬æˆä¸¤æ•°ä¹‹å’Œï¼š`threeSumTarget`\n\n```javascript\n/**  \n * @param {number[]} nums  \n * @param {number} target  \n * @param {number} start ä» start å¼€å§‹æ‰¾  \n * @return {number[][]}  \n */  \nvar twoSumTarget = function (nums, start, target) {  \n    // nums æ•°ç»„å¿…é¡»æœ‰åº  \n    nums.sort((a, b) => a - b);  \n    let lo = start;  \n    let hi = nums.length - 1;  \n    let res = [];  \n    while (lo < hi) {  \n        let sum = nums[lo] + nums[hi];  \n        let left = nums[lo];  \n        let right = nums[hi];  \n        // æ ¹æ® sum å’Œ target çš„æ¯”è¾ƒï¼Œç§»åŠ¨å·¦å³æŒ‡é’ˆ  \n        if (sum < target) {  \n            // â‘  å·¦è¾¹ç¢°åˆ°ç›¸åŒçš„å…ƒç´ ï¼Œä¸€ç›´å‘å³ç§»åŠ¨ï¼Œç›´åˆ°ä¸ç›¸åŒçš„å…ƒç´ ä½ç½®  \n            while (lo < hi && nums[lo] === left) lo++;  \n        } else if (sum > target) {  \n            // â‘¡ å³è¾¹ç¢°åˆ°ç›¸åŒçš„å…ƒç´ ï¼Œä¸€ç›´å‘å·¦ç§»åŠ¨ï¼Œç›´åˆ°ä¸ç›¸åŒçš„å…ƒç´ ä½ç½®  \n            while (lo < hi && nums[hi] === right) hi--;  \n        } else {  \n            res.push([left, right]);  \n            // â‘¢ å·¦è¾¹ç¢°åˆ°ç›¸åŒçš„å…ƒç´ ï¼Œä¸€ç›´å‘å³ç§»åŠ¨ï¼Œç›´åˆ°ä¸ç›¸åŒçš„å…ƒç´ ä½ç½®  \n            while (lo < hi && nums[lo] === left) lo++;  \n            // â‘£ å³è¾¹ç¢°åˆ°ç›¸åŒçš„å…ƒç´ ï¼Œä¸€ç›´å‘å·¦ç§»åŠ¨ï¼Œç›´åˆ°ä¸ç›¸åŒçš„å…ƒç´ ä½ç½®  \n            while (lo < hi && nums[hi] === right) hi--;  \n        }  \n    } \n    return res;  \n};\n```\n\n## 3. ä»£ç å®ç°\n\næœ€ç»ˆä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\n/**  \n * @param {number[]} nums  \n * @return {number[][]}  \n */  \nvar threeSum = function (nums) {  \n    // æ±‚å’Œä¸º 0 çš„ä¸‰å…ƒç»„  \n    return threeSumTarget(nums, 0);  \n};  \n  \n  \n/**  \n * @param {number[]} nums  \n * @param {number} target  \n * @return {number[][]}  \n */  \nvar threeSumTarget = function (nums, target) {  \n    // :::: â‘  æ•°ç»„å…ˆæ’ä¸ªåº  \n    nums.sort(function (a, b) {  \n        return a - b  \n    });  \n    var n = nums.length;  \n    var res = [];  \n  \n    // ::::â‘¢ éå†æ•°ç»„ï¼Œa + b + c = target \n    //        å…¶ä¸­ a = nums[i] ï¼Œb + c =  target - nums[i]  \n    for (var i = 0; i < n; i++) {  \n        const a = nums[i];  \n        const twoTarget = target - a;  \n        // ::::â‘¢ é€’å½’è®¡ç®— b + c = target - nums[i] çš„äºŒå…ƒç»„  \n        var twoSumArr = twoSumTarget(nums, i + 1, twoTarget);  \n  \n        // ::::â‘£ éå†äºŒå…ƒç»„ï¼Œå°† nums[i] åŠ ä¸Šå°±æ˜¯ç»“æœä¸‰å…ƒç»„  \n        // å¦‚æœå­˜åœ¨æ»¡è¶³æ¡ä»¶çš„äºŒå…ƒç»„ï¼Œå†åŠ ä¸Š nums[i] å°±æ˜¯ç»“æœä¸‰å…ƒç»„  \n        for (var j = 0; j < twoSumArr.length; j++) {  \n            var tuple = twoSumArr[j];  \n            tuple.push(nums[i]);  \n            res.push(tuple);  \n        }  \n        // ::::â‘¤ è·³è¿‡åé¢ï¼Œå‡ºç°çš„æ•°å­—é‡å¤çš„æƒ…å†µï¼Œå¦åˆ™ä¼šå‡ºç°é‡å¤ç»“æœ  \n        // è·³è¿‡ç¬¬ä¸€ä¸ªæ•°å­—é‡å¤çš„æƒ…å†µï¼Œå¦åˆ™ä¼šå‡ºç°é‡å¤ç»“æœ  \n        while (i < n - 1 && nums[i] === nums[i + 1]) i++;  \n    }  \n  \n    return res;  \n}  \n  \n/**  \n * @param {number[]} nums  \n * @param {number} target  \n * @param {number} start ä» start å¼€å§‹æ‰¾  \n * @return {number[][]}  \n */  \nvar twoSumTarget = function (nums, start, target) {  \n    // nums æ•°ç»„å¿…é¡»æœ‰åº  \n    nums.sort((a, b) => a - b);  \n    let lo = start;  \n    let hi = nums.length - 1;  \n    let res = [];  \n    while (lo < hi) {  \n        let sum = nums[lo] + nums[hi];  \n        let left = nums[lo];  \n        let right = nums[hi];  \n        // æ ¹æ® sum å’Œ target çš„æ¯”è¾ƒï¼Œç§»åŠ¨å·¦å³æŒ‡é’ˆ  \n        if (sum < target) {  \n            // â‘  å·¦è¾¹ç¢°åˆ°ç›¸åŒçš„å…ƒç´ ï¼Œä¸€ç›´å‘å³ç§»åŠ¨ï¼Œç›´åˆ°ä¸ç›¸åŒçš„å…ƒç´ ä½ç½®  \n            while (lo < hi && nums[lo] === left) lo++;  \n        } else if (sum > target) {  \n            // â‘¡ å³è¾¹ç¢°åˆ°ç›¸åŒçš„å…ƒç´ ï¼Œä¸€ç›´å‘å·¦ç§»åŠ¨ï¼Œç›´åˆ°ä¸ç›¸åŒçš„å…ƒç´ ä½ç½®  \n            while (lo < hi && nums[hi] === right) hi--;  \n        } else {  \n            res.push([left, right]);  \n            // â‘¢ å·¦è¾¹ç¢°åˆ°ç›¸åŒçš„å…ƒç´ ï¼Œä¸€ç›´å‘å³ç§»åŠ¨ï¼Œç›´åˆ°ä¸ç›¸åŒçš„å…ƒç´ ä½ç½®  \n            while (lo < hi && nums[lo] === left) lo++;  \n            // â‘£ å³è¾¹ç¢°åˆ°ç›¸åŒçš„å…ƒç´ ï¼Œä¸€ç›´å‘å·¦ç§»åŠ¨ï¼Œç›´åˆ°ä¸ç›¸åŒçš„å…ƒç´ ä½ç½®  \n            while (lo < hi && nums[hi] === right) hi--;  \n        }  \n    }  \n    return res;  \n};\n```\n\n### 3.1. å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ä¸Šï¼Œä¸º `O(n^2)`\n\t- ä¸»å‡½æ•° threeSum:\n        -  è°ƒç”¨ threeSumTargetï¼Œå¤æ‚åº¦ä¸ threeSumTarget ç›¸åŒã€‚\n    - threeSumTarget å‡½æ•°:\n        - æ’åº:  `O(n log n)`\n        - å¤–å±‚å¾ªç¯ï¼š `O(n)`\n            - æ¯æ¬¡å¾ªç¯ä¸­è°ƒç”¨ `twoSumTarget: O(n)`\n        - æ€»ä½“å¤æ‚åº¦ï¼š `O(n^2)`\n    - twoSumTarget å‡½æ•°:\n        - åŒæŒ‡é’ˆéå†: `O(n)`\n    - ç»¼åˆèµ·æ¥ï¼Œæ•´ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n^2)`ã€‚\n- ç©ºé—´å¤æ‚åº¦åœ¨æœ€åæƒ…å†µä¸‹å¯èƒ½è¾¾åˆ° `O(n^2)`ï¼Œä¸»è¦æ˜¯ç”±äºå­˜å‚¨ç»“æœæ‰€éœ€çš„ç©ºé—´\n\t- æ’åºå¯èƒ½éœ€è¦ O(log n) çš„ç©ºé—´ï¼ˆå–å†³äºæ’åºç®—æ³•ï¼‰ã€‚\n\t- ç»“æœæ•°ç»„ res çš„å¤§å°å–å†³äº==æ»¡è¶³æ¡ä»¶çš„ä¸‰å…ƒç»„æ•°é‡==ï¼Œæœ€åæƒ…å†µä¸‹å¯èƒ½æ˜¯ O(n^2)ã€‚\n\t- twoSumTarget å‡½æ•°ä¸­çš„ä¸´æ—¶ç»“æœæ•°ç»„ä¹Ÿå¯èƒ½åœ¨æœ€åæƒ…å†µä¸‹è¾¾åˆ° O(n)ã€‚\n\n","e4d3662414f75a99a2ec0718b2067a1d":"\n# åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ II\n\n\n`#ç®—æ³•/åŒæŒ‡é’ˆ`  `#2024/07/28` `#leetcode` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407281632176.png?imageSlim)\n\n## è§£é¢˜æ€è·¯\n\n- åŒæŒ‡é’ˆ\n   - `count = 0/1/2` ï¼Œè®¡ç®—é‡å¤æ¬¡æ•°\n   - è®°å¾—éœ€è¦é‡ç½®ä¸º 0  ï¼Œå½“ `nums[fast] !== nums[fast - 1]`\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} nums\n * @return {number}\n */\nvar removeDuplicates = function (nums) {\n  // å¿«æ…¢æŒ‡é’ˆ,éƒ½ä»0å¼€å§‹\n  let slow = 0;\n  let fast = 0;\n  // ç”¨äºè®°å½•é‡å¤å…ƒç´ çš„ä¸ªæ•°ï¼Œåˆå§‹å€¼ä¸º0ï¼Œæœ€å¤šåªèƒ½æœ‰ä¸¤ä¸ªé‡å¤å…ƒç´ \n  let count = 0;\n  // å¿«æŒ‡é’ˆéå†æ•°ç»„\n  while (fast < nums.length) {\n    // å½“å¿«æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ ä¸ç­‰äºæ…¢æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ æ—¶\n    if (nums[fast] !== nums[slow]) {\n      // æ…¢æŒ‡é’ˆå‘åç§»åŠ¨ä¸€ä½\n      slow++;\n      // å°†å¿«æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ èµ‹å€¼ç»™æ…¢æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ \n      nums[slow] = nums[fast];\n      // æ­¤æ—¶ï¼Œå¯¹äº nums[0..slow] æ¥è¯´ï¼Œnums[fast] é‡å¤æ¬¡æ•°å°äº 2ï¼Œä¹ŸåŠ è¿›æ¥\n    } else if (slow < fast && count < 2) {\n      // æ…¢æŒ‡é’ˆå‘åç§»åŠ¨ä¸€ä½\n      slow++;\n      // å°†å¿«æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ èµ‹å€¼ç»™æ…¢æŒ‡é’ˆå¯¹åº”çš„å…ƒç´ \n      nums[slow] = nums[fast];\n    }\n    // å¿«æŒ‡é’ˆï¼Œæ¯éå†ä¸€ä¸ªå…ƒç´ ï¼Œå°±å‘åç§»åŠ¨ä¸€æ¬¡\n    fast++;\n    // è®¡æ•°å™¨ï¼Œè®°å½•é‡å¤å…ƒç´ çš„ä¸ªæ•°\n    count++;\n    // fast é‡åˆ°æ–°çš„ä¸åŒçš„å…ƒç´ æ—¶ï¼Œé‡ç½® count\n    if (fast < nums.length && nums[fast] !== nums[fast - 1]) {\n      count = 0;\n    }\n  }\n  // åˆ é™¤åé¢çš„å…ƒç´ \n  nums.splice(slow + 1);\n  return slow + 1;\n};\n\n```\n\n> è®°å¾—æœ€ååˆ é™¤å…ƒç´ \n\n## é”™è¯¯è®°å½•\n\n","4e24bc9f14235ca3b5e3986bb5d7e66e":"\n# å°è¡Œæ˜Ÿç¢°æ’\n\n`#2024/07/28`  `#ç®—æ³•/æ ˆ`  `#leetcode` \n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407271746254.png?imageSlim)\n\n## è§£é¢˜æ€è·¯\n\n1. åˆå§‹åŒ–ä¸€ä¸ª`ç©ºæ ˆ`ï¼Œç”¨äºå­˜å‚¨å½“å‰çŠ¶æ€çš„â€œå°è¡Œæ˜Ÿâ€ã€‚\n2. éå†è¾“å…¥çš„å°è¡Œæ˜Ÿæ•°ç»„ï¼š\n    - â‘  å®šä¹‰ä¸€ä¸ªå˜é‡`destroyed` ï¼Œæ ‡è¯†å½“å‰å…ƒç´ æ˜¯å¦è¢«æ‘§æ¯\n    - â‘¡ **whileå¾ªç¯**ï¼šå¦‚æœæ ˆä¸ä¸ºç©ºï¼Œä¸”å½“å‰å…ƒç´ ä¸ºè´Ÿæ•° `å‘å·¦ç§»åŠ¨`ï¼Œä¸”æ ˆé¡¶å…ƒç´ ä¸ºæ­£æ•°ï¼Œå‘å³ç§»åŠ¨\n\t\t- å¦‚æœæ ˆé¡¶å°è¡Œæ˜Ÿæ›´å°ï¼Œåˆ™`æ ˆé¡¶å°è¡Œæ˜Ÿ`è¢«æ‘§æ¯ï¼Œ`continue`  while éå†\n\t\t- å¦‚æœæ ˆé¡¶å°è¡Œæ˜Ÿæ›´å¤§ï¼Œåˆ™`å½“å‰å°è¡Œæ˜Ÿ`è¢«æ‘§æ¯ï¼Œ`break`  while éå†\n\t\t- è‹¥ä¸¤è€…è´¨é‡ç›¸ç­‰ï¼Œåˆ™å®ƒä»¬ç›¸äº’æŠµæ¶ˆï¼Œ`éƒ½è¢«æ‘§æ¯`ï¼Œ`break` while éå†\n    - â‘¢ å¦‚æœå½“å‰å…ƒç´ `æ²¡æœ‰è¢«æ‘§æ¯`ï¼Œå…¥æ ˆ\n3. æœ€å `res`\n\n>  æ ˆé¡¶å…ƒç´ è¢«é”€æ¯ï¼Œä»£è¡¨ `å‡ºæ ˆ`\n>  å½“å‰å…ƒç´ è¢«é”€æ¯ï¼Œä»£è¡¨ `ä¸å…¥æ ˆ`\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} items\n * @return {number[]}\n */\nvar itemCollision = function (items) {\n  const stack = [];\n\n  // éå†æ•°ç»„\n  for (let item of items) {\n    // â‘  å®šä¹‰ä¸€ä¸ªå˜é‡`destroyed` ï¼Œæ ‡è¯†å½“å‰å…ƒç´ æ˜¯å¦è¢«æ‘§æ¯\n    let destroyed = false;\n\n    // å¦‚æœæ ˆä¸ä¸ºç©ºï¼Œä¸”å½“å‰å…ƒç´ ä¸ºè´Ÿæ•°ï¼Œä¸”æ ˆé¡¶å…ƒç´ ä¸ºæ­£æ•°\n    while (stack.length > 0 && item < 0 && stack[stack.length - 1] > 0) {\n      let top = stack[stack.length - 1];\n      // å¦‚æœæ ˆé¡¶å…ƒç´ çš„ç»å¯¹å€¼å°äºå½“å‰å…ƒç´ çš„ç»å¯¹å€¼ï¼Œåˆ™æ ˆé¡¶å…ƒç´ è¢«é”€æ¯\n      if (top < -item) {\n        stack.pop();\n        continue;\n      }\n      // å¦‚æœæ ˆé¡¶å…ƒç´ çš„ç»å¯¹å€¼å¤§äºå½“å‰å…ƒç´ çš„ç»å¯¹å€¼ï¼Œåˆ™å½“å‰å…ƒç´ è¢«é”€æ¯\n      else if (top > -item) {\n        destroyed = true;\n        break;\n      }\n      // å¦‚æœæ ˆé¡¶å…ƒç´ çš„ç»å¯¹å€¼ç­‰äºå½“å‰å…ƒç´ çš„ç»å¯¹å€¼ï¼Œåˆ™æ ˆé¡¶å…ƒç´ å’Œå½“å‰å…ƒç´ éƒ½è¢«é”€æ¯\n      else if (top === -item) {\n        stack.pop();\n        destroyed = true;\n        break;\n      }\n    }\n\n    // å¦‚æœå½“å‰å…ƒç´ æ²¡æœ‰è¢«é”€æ¯ï¼Œåˆ™å…¥æ ˆ\n    if (!destroyed) {\n      stack.push(item);\n    }\n  }\n\n  return stack;\n};\n\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n#### æ—¶é—´å¤æ‚åº¦\n\néå†æ•°ç»„æ˜¯Â `O(n)`ï¼Œè€Œå†…éƒ¨çš„Â `while`Â å¾ªç¯åœ¨æ•´ä¸ªç®—æ³•è¿‡ç¨‹ä¸­ä¹Ÿä¸ºÂ `O(2)`ï¼ˆæ¯ä¸ªå…ƒç´ æœ€å¤šåªä¼šè¿›å‡ºæ ˆä¸€æ¬¡ï¼‰ï¼Œæ‰€ä»¥æ•´ä½“æ—¶é—´å¤æ‚åº¦ä¸ºÂ `O(n)`\n\n#### ç©ºé—´å¤æ‚åº¦\n\n1. **æ ˆçš„ä½¿ç”¨**ï¼š\n    - ç”±äºç®—æ³•ä½¿ç”¨äº†ä¸€ä¸ªæ ˆÂ `stack`Â æ¥å­˜å‚¨æœªè¢«æ‘§æ¯çš„å…ƒç´ ã€‚\n    - æœ€åæƒ…å†µä¸‹ï¼Œæ‰€æœ‰å…ƒç´ éƒ½ä¸ä¼šç›¸äº’ç¢°æ’ï¼ˆä¾‹å¦‚ï¼Œå…¨ä¸ºæ­£æ•°æˆ–å…¨ä¸ºè´Ÿæ•°ï¼‰ï¼Œåˆ™æ ˆçš„å¤§å°ä¸ºÂ `n`ã€‚\n2. **é¢å¤–ç©ºé—´**ï¼š\n    - é™¤äº†æ ˆä¹‹å¤–ï¼Œæ²¡æœ‰ä½¿ç”¨é¢å¤–çš„æ˜¾è‘—ç©ºé—´ã€‚\n\nå› æ­¤ï¼Œç©ºé—´å¤æ‚åº¦ä¹Ÿæ˜¯Â `O(n)`ã€‚\n\n## é”™è¯¯è®°å½•\n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407280720119.png?imageSlim)\n","fb501e5156955ab48e493fa08c12e25d":"\n# æœ€å¤§å±‚å†…å…ƒç´ å’Œ\n\n\n`#leetcode`   `#2024/09/08`  `#ç®—æ³•`  `#ç®—æ³•/äºŒå‰æ ‘`  `#BFS` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n> https://leetcode.cn/problems/maximum-level-sum-of-a-binary-tree/description/\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908091200.png)\n\n## æ€è·¯ä¸€ï¼šBFS\n\n### ä»£ç å®ç°\n\n```javascript\n/**\n * Definition for a binary tree node.\n * function TreeNode(val, left, right) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.left = (left===undefined ? null : left)\n *     this.right = (right===undefined ? null : right)\n * }\n */\n/**\n * @param {TreeNode} root\n * @return {number}\n */\nvar maxLevelSum = function (root) {\n  // è¡¨ç¤ºè¿”å›çš„ç»“æœ\n  let res = 0;\n  // è¡¨ç¤ºæœ€å¤§çš„å±‚å’Œ,åˆå§‹åŒ–ä¸ºæœ€å°å®‰å…¨æ•´æ•°\n  let maxSum = Number.MIN_SAFE_INTEGER;\n  // å¹¿åº¦ä¼˜å…ˆæœç´¢\n  let queue = [];\n  queue.push(root);\n  let level = 0;\n  while (queue.length) {\n    let size = queue.length;\n    let sum = 0;\n    // éå†å½“å‰å±‚çš„èŠ‚ç‚¹ï¼Œå³ level å±‚çš„èŠ‚ç‚¹\n    for (let i = 0; i < size; i++) {\n      let node = queue.shift();\n      sum += node.val;\n      if (node.left) {\n        queue.push(node.left);\n      }\n      if (node.right) {\n        queue.push(node.right);\n      }\n    }\n    // æ¯”è¾ƒå½“å‰å±‚çš„å’Œä¸æœ€å¤§å±‚å’Œ\n    // å¦‚æœå½“å‰å±‚çš„å’Œå¤§äºæœ€å¤§å±‚å’Œï¼Œåˆ™æ›´æ–°æœ€å¤§å±‚å’Œå’Œç»“æœ\n    if (sum > maxSum) {\n      maxSum = sum;\n      res = level;\n    }\n    // å±‚æ•°åŠ ä¸€\n    level++;\n  }\n  // è¿”å›ç»“æœ\n  return res + 1;\n};\n\n```\n\n### å¤æ‚åº¦åˆ†æ\n\nè¿™æ®µä»£ç å®ç°äº†ä¸€ä¸ªå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰æ¥éå†äºŒå‰æ ‘ï¼Œå¹¶æ‰¾å‡ºå…·æœ‰æœ€å¤§å’Œçš„å±‚çº§ã€‚è®©æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹å®ƒçš„æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦ï¼š\n\næ—¶é—´å¤æ‚åº¦ï¼š`O(n)`\n- å…¶ä¸­ `n` æ˜¯äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹æ•°ã€‚\n- ä»£ç éå†äº†æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ä¸€æ¬¡ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œå¸¸æ•°æ—¶é—´çš„æ“ä½œï¼ˆåŠ å…¥é˜Ÿåˆ—ã€å‡ºé˜Ÿåˆ—ã€è®¡ç®—å’Œï¼‰ã€‚\n\nç©ºé—´å¤æ‚åº¦ï¼š`O(w)`\n- å…¶ä¸­ `w` æ˜¯æ ‘çš„æœ€å¤§å®½åº¦ï¼ˆå³ä»»æ„å±‚ä¸­çš„æœ€å¤§èŠ‚ç‚¹æ•°ï¼‰ã€‚\n- åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚ï¼Œå®Œå…¨äºŒå‰æ ‘çš„æœ€åº•å±‚ï¼‰ï¼Œé˜Ÿåˆ—å¯èƒ½éœ€è¦å­˜å‚¨æ ‘çš„æœ€å®½å±‚çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚\n- å¯¹äºä¸€ä¸ªå¹³è¡¡äºŒå‰æ ‘ï¼Œæœ€å¤§å®½åº¦é€šå¸¸åœ¨ `O(n/2)` çº§åˆ«ï¼Œä½†åœ¨æœ€åæƒ…å†µä¸‹å¯èƒ½æ¥è¿‘ `n`ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼š\n1. è™½ç„¶ä½¿ç”¨äº†ä¸€ä¸ª while å¾ªç¯å’Œä¸€ä¸ªåµŒå¥—çš„ for å¾ªç¯ï¼Œä½†æ¯ä¸ªèŠ‚ç‚¹åªè¢«å¤„ç†ä¸€æ¬¡ï¼Œå› æ­¤æ€»çš„æ—¶é—´å¤æ‚åº¦ä»ç„¶æ˜¯ O(n)ã€‚\n2. ç©ºé—´å¤æ‚åº¦ä¸»è¦ç”±é˜Ÿåˆ—å ç”¨çš„ç©ºé—´å†³å®šã€‚åœ¨ä»»ä½•æ—¶åˆ»ï¼Œé˜Ÿåˆ—ä¸­å­˜å‚¨çš„èŠ‚ç‚¹æ•°ä¸ä¼šè¶…è¿‡æ ‘çš„æœ€å¤§å®½åº¦ã€‚\n3. é™¤äº†é˜Ÿåˆ—ä¹‹å¤–ï¼Œä½¿ç”¨çš„å…¶ä»–å˜é‡ï¼ˆå¦‚ resã€maxSumã€level ç­‰ï¼‰åªå ç”¨å¸¸æ•°ç©ºé—´ï¼Œä¸å½±å“æ•´ä½“ç©ºé—´å¤æ‚åº¦ã€‚\n\næ€»çš„æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªæ—¶é—´æ•ˆç‡è¾ƒé«˜çš„è§£å†³æ–¹æ¡ˆï¼Œå…¶æ—¶é—´å¤æ‚åº¦æ˜¯çº¿æ€§çš„ï¼Œä¸æ ‘çš„èŠ‚ç‚¹æ•°æˆæ­£æ¯”ã€‚ç©ºé—´å¤æ‚åº¦åœ¨æœ€åæƒ…å†µä¸‹å¯èƒ½æ¥è¿‘çº¿æ€§ï¼Œä½†é€šå¸¸æƒ…å†µä¸‹ä¼šå°äº O(n)ã€‚\n","2ba99692d39d5826917c9e111304995b":"\n# äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢\n\n\n`#2024/09/08`  `#leetcode` \n\n> è¯¦è§ [12. ç®—æ³•/2. ç®—æ³•ç¯‡/4. äºŒå‰æ ‘ç¯‡/3. äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡äºŒï¼šBST çš„å¢åˆ æ”¹æŸ¥ï¼‰|3. äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡äºŒï¼šBST çš„å¢åˆ æ”¹æŸ¥ï¼‰](/post/2ba99692d39d5826917c9e111304995b.html#12-ç®—æ³•/2-ç®—æ³•ç¯‡/4-äºŒå‰æ ‘ç¯‡/3-äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡äºŒBST-çš„å¢åˆ æ”¹æŸ¥ï¼‰|3-äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡äºŒï¼šBST-çš„å¢åˆ æ”¹æŸ¥ï¼‰)\n\n","e8306a02939e56668f4a2ff731644bb7":"\n# åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹\n\n`#2024/09/08`  `#leetcode` \n\n> è¯¦è§ [12. ç®—æ³•/2. ç®—æ³•ç¯‡/4. äºŒå‰æ ‘ç¯‡/3. äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡äºŒï¼šBST çš„å¢åˆ æ”¹æŸ¥ï¼‰|3. äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡äºŒï¼šBST çš„å¢åˆ æ”¹æŸ¥ï¼‰](/post/e8306a02939e56668f4a2ff731644bb7.html#12-ç®—æ³•/2-ç®—æ³•ç¯‡/4-äºŒå‰æ ‘ç¯‡/3-äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡äºŒBST-çš„å¢åˆ æ”¹æŸ¥ï¼‰|3-äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡äºŒï¼šBST-çš„å¢åˆ æ”¹æŸ¥ï¼‰)\n\n","af8c8fabafb754e68e0ee1172b3d61c0":"\n# é’¥åŒ™å’Œæˆ¿é—´\n\n\n`#2024/09/11` `#å›¾` `#ç®—æ³•/å›¾` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›®åŠé¢˜æ„ \n\n> https://leetcode.cn/problems/keys-and-rooms/description/\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240911065626.png)\n\n## 2. æ€è·¯\n\n- çœ‹**ç¤ºä¾‹ 1** ï¼Œè¿™ä¸å°±æ˜¯ä¸€ä¸ªå›¾å—ï¼Œroot æ˜¯`æˆ¿é—´1` ï¼Œç„¶å`æˆ¿é—´1` é‡Œçš„`é’¥åŒ™`å†³å®šäº†æŒ‡å‘å“ªå‡ ä¸ªæˆ¿é—´\n- é¢˜è®¾ä¸­çš„ `rooms` å°±æ˜¯ä¸€ä¸ª**é‚»æ¥è¡¨è¡¨ç¤ºçš„å›¾**\n\næ‰€ä»¥ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹**å›¾çš„éå†æ¡†æ¶**\n\n```javascript\n/**\n * @description å›¾çš„éå†æ¡†æ¶\n * @param {*} rooms ä»£è¡¨æˆ¿é—´çš„äºŒç»´æ•°ç»„ï¼Œé‚»æ¥è¡¨\n * @param {*} room  ä»£è¡¨å½“å‰æˆ¿é—´çš„ç¼–å·\n * @param {*} visited  ä»£è¡¨å½“å‰æˆ¿é—´æ˜¯å¦å·²ç»è®¿é—®è¿‡\n * @returns\n */\nfunction dfs(rooms, room, visited) {\n  if (visited[room]) {\n    return;\n  }\n  // å‰åºä½ç½®ï¼Œæ ‡è®°æˆ¿é—´å·²è®¿é—®\n  visited[room] = true;\n\n  for (var nextRoom of rooms[room]) {\n    dfs(rooms, nextRoom, visited);\n  }\n}\n```\n\n## 3. æœ€ç»ˆä»£ç \n\n```javascript\n/**\n * @description å›¾çš„éå†æ¡†æ¶\n * @param {*} rooms ä»£è¡¨æˆ¿é—´çš„äºŒç»´æ•°ç»„ï¼Œé‚»æ¥è¡¨\n * @param {*} room  ä»£è¡¨å½“å‰æˆ¿é—´çš„ç¼–å·\n * @param {*} visited  ä»£è¡¨å½“å‰æˆ¿é—´æ˜¯å¦å·²ç»è®¿é—®è¿‡\n * @returns\n */\nfunction dfs(rooms, room, visited) {\n  if (visited[room]) {\n    return;\n  }\n  // å‰åºä½ç½®ï¼Œæ ‡è®°æˆ¿é—´å·²è®¿é—®\n  visited[room] = true;\n\n  for (var nextRoom of rooms[room]) {\n    dfs(rooms, nextRoom, visited);\n  }\n}\n\nfunction canVisitAllRooms(rooms) {\n  var len = rooms.length;\n  // è®°å½•æ¯ä¸ªæˆ¿é—´æ˜¯å¦å·²ç»è®¿é—®ï¼Œä½¿ç”¨æ•°ç»„æ¥è¡¨ç¤º\n  var visited = new Array(len).fill(false);\n  // æˆ¿é—´å·ä» 0 å¼€å§‹\n  var rootNum = 0;\n  // å¹¿åº¦ä¼˜å…ˆéå†ï¼Œéå†å®Œåï¼Œvisited ä¸­æ‰€æœ‰çš„å€¼éƒ½åº”è¯¥ä¸º trueï¼Œå¦åˆ™è¿”å› false\n  dfs(rooms, 0, visited);\n\n  for (var v of visited) {\n    if (!v) {\n      return false;\n    }\n  }\n  return true;\n}\n\n```\n\n\n## 4. å¤æ‚åº¦åˆ†æ\n\nè¿™ä¸ªç®—æ³•ä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰æ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥è®¿é—®æ‰€æœ‰çš„æˆ¿é—´ã€‚æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹å®ƒçš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ã€‚\n\n### 4.1. æ—¶é—´å¤æ‚åº¦\n\n1. **DFS éå†çš„å¤æ‚åº¦**ï¼š\n   - æ¯ä¸ªæˆ¿é—´åªä¼šè¢«è®¿é—®ä¸€æ¬¡ï¼Œå› ä¸ºåœ¨è®¿é—®ä¸€ä¸ªæˆ¿é—´æ—¶ï¼Œéƒ½ä¼šå°†å…¶æ ‡è®°ä¸ºå·²è®¿é—®ã€‚\n   - å¯¹äºæ¯ä¸ªæˆ¿é—´ï¼Œéå†å…¶æ‰€æœ‰é‚»æ¥æˆ¿é—´ï¼ˆå³é’¥åŒ™æ‰€æŒ‡å‘çš„æˆ¿é—´ï¼‰ã€‚\n   - å› æ­¤ï¼Œéå†çš„æ€»æ“ä½œæ•°ä¸æˆ¿é—´çš„æ€»æ•°é‡ \\( n \\) å’Œé’¥åŒ™çš„æ€»æ•°é‡ï¼ˆå³è¾¹çš„æ€»æ•° \\( E \\)ï¼‰æˆæ­£æ¯”ã€‚\n\nç»¼ä¸Šæ‰€è¿°ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º \\( O(n + E) \\)ï¼Œå…¶ä¸­ \\( n \\) æ˜¯æˆ¿é—´çš„æ•°é‡ï¼Œ\\( E \\) æ˜¯é’¥åŒ™çš„æ•°é‡ã€‚\n\n### 4.2. ç©ºé—´å¤æ‚åº¦\n\n1. **é€’å½’æ ˆç©ºé—´**ï¼š\n   - DFS ä½¿ç”¨é€’å½’å®ç°ï¼Œé€’å½’çš„æ·±åº¦æœ€åæƒ…å†µä¸‹ä¸ºæˆ¿é—´çš„æ•°é‡ \\( n \\)ï¼Œå› æ­¤é€’å½’æ ˆçš„ç©ºé—´å¤æ‚åº¦ä¸º \\( O(n) \\)ã€‚\n2. **visited æ•°ç»„**ï¼š\n   - éœ€è¦ä¸€ä¸ªå¤§å°ä¸º \\( n \\) çš„æ•°ç»„æ¥è®°å½•æ¯ä¸ªæˆ¿é—´æ˜¯å¦è¢«è®¿é—®è¿‡ï¼Œç©ºé—´å¤æ‚åº¦ä¸º \\( O(n) \\)ã€‚\n\nå› æ­¤ï¼Œæ€»çš„ç©ºé—´å¤æ‚åº¦ä¸º \\( O(n) \\)ã€‚\n\n### 4.3. æ€»ç»“\n\n- **æ—¶é—´å¤æ‚åº¦**: \\( O(n + E) \\)\n- **ç©ºé—´å¤æ‚åº¦**: \\( O(n) \\)\n\nè¿™ä¸ªç®—æ³•åœ¨å¤„ç†ç¨€ç–å›¾ï¼ˆå³é’¥åŒ™æ•°é‡è¾ƒå°‘ï¼‰æ—¶è¡¨ç°è‰¯å¥½ï¼Œå› ä¸ºæ—¶é—´å¤æ‚åº¦ä¸»è¦å—æˆ¿é—´å’Œé’¥åŒ™çš„æ•°é‡å½±å“ã€‚\n\n\n","42b33a20f6655548a6eaba60e8b57896":"\n# çœä»½æ•°é‡\n\n\n`#leetcode`   `#2024/09/12`  `#ç®—æ³•`  `#DFS` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›®åŠç†è§£ \n\n> https://leetcode.cn/problems/number-of-provinces/description \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240912044955.png)\n\n## 2. æ€è·¯ä¸€ï¼šDFS\n\n1. **åˆå§‹åŒ–**ï¼šåˆ›å»ºä¸€ä¸ªå¸ƒå°”æ•°ç»„ `visited`ï¼Œç”¨äºè®°å½•æ¯ä¸ªåŸå¸‚æ˜¯å¦å·²è¢«è®¿é—®\n2. **éå†åŸå¸‚**ï¼š \n\t- å¯¹äºæ¯ä¸ªåŸå¸‚ï¼Œå¦‚æœå®ƒæœªè¢«è®¿é—®ï¼Œåˆ™æ‰§è¡Œ DFSï¼Œ**ä»è¯¥åŸå¸‚å‡ºå‘è®¿é—®æ‰€æœ‰ä¸ä¹‹ç›¸è¿çš„åŸå¸‚**\n3. **DFS å®ç°**\n\t- **é€’å½’åœ°è®¿é—®**æ‰€æœ‰ç›´æ¥ç›¸è¿ä¸”æœªè¢«è®¿é—®çš„åŸå¸‚ï¼Œå¹¶**æ ‡è®°**ä¸ºå·²è®¿é—®ã€‚\n4. **è®¡æ•°çœä»½**\n\t- æ¯æ¬¡æ‰§è¡Œæ–°çš„ DFS æ—¶ï¼Œæ„å‘³ç€å‘ç°äº†ä¸€ä¸ªæ–°çš„çœä»½ï¼Œå¢åŠ çœä»½è®¡æ•°ã€‚\n\n### 2.1. ä»£ç å®ç°åŠåˆ†æ\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240912051336.png)\n\n### 2.2. æºç \n\n```javascript\n/**\n * @param {number[][]} isConnected\n * @return {number}\n */\nvar findCircleNum = function (isConnected) {\n  // åŸå¸‚æ•°é‡\n  let n = isConnected.length;\n  // è®°å½•åŸå¸‚æ˜¯å¦è¢«è®¿é—®,éƒ½åˆå§‹åŒ–ä¸ºæœªè®¿é—®\n  let visited = new Array(isConnected.length).fill(false);\n  // è®°å½•çœä»½æ•°é‡\n  let res = 0;\n\n  // è®¿é—®æŸä¸ªåŸå¸‚\n  function dfs(city) {\n    // æ ‡è®°åŸå¸‚å·²è®¿é—®\n    visited[city] = true;\n    // è®¿é—®æ‰€æœ‰ä¸åŸå¸‚ç›¸è¿çš„åŸå¸‚\n    for (let i = 0; i < n; i++) {\n      // å¦‚æœåŸå¸‚ i ä¸åŸå¸‚ city ç›¸è¿,å¹¶ä¸”åŸå¸‚ i æœªè¢«è®¿é—®,åˆ™è®¿é—®åŸå¸‚ i\n      if (isConnected[city][i] === 1 && !visited[i]) {\n        dfs(i);\n      }\n    }\n  }\n\n  // éå†æ‰€æœ‰åŸå¸‚\n  for (let i = 0; i < n; i++) {\n    if (!visited[i]) {\n      dfs(i);\n      res++;\n    }\n  }\n\n  // è¿”å›çœä»½æ•°é‡\n  return res;\n};\n\n```\n\n### 2.3. æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)\n\n1. å¤–å±‚å¾ªç¯éå†æ‰€æœ‰åŸå¸‚ï¼Œæœ€å¤šæ‰§è¡Œ n æ¬¡ï¼ˆn ä¸ºåŸå¸‚æ•°é‡ï¼‰ã€‚\n2. å¯¹äºæ¯ä¸ªæœªè®¿é—®çš„åŸå¸‚ï¼Œæˆ‘ä»¬è°ƒç”¨ dfs å‡½æ•°ã€‚\n3. åœ¨ dfs å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬éå†è¯¥åŸå¸‚ä¸æ‰€æœ‰å…¶ä»–åŸå¸‚çš„è¿æ¥å…³ç³»ï¼Œè¿™éœ€è¦ O(n) çš„æ—¶é—´ã€‚\n4. è™½ç„¶çœ‹èµ·æ¥æˆ‘ä»¬å¯èƒ½ä¼šå¤šæ¬¡è°ƒç”¨ dfsï¼Œä½†**ç”±äº visited æ•°ç»„çš„å­˜åœ¨ï¼Œæ¯ä¸ªåŸå¸‚å®é™…ä¸Šåªä¼šè¢«è®¿é—®ä¸€æ¬¡ã€‚**\n5. å› æ­¤ï¼Œæ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n) * O(n) = O(n^2)`ï¼Œå› ä¸ºæˆ‘ä»¬**æœ¬è´¨ä¸Š**æ˜¯==éå†äº†æ•´ä¸ª n x n çš„é‚»æ¥çŸ©é˜µ==ã€‚\n\n### 2.4. ç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\n1. visited æ•°ç»„ï¼šä½¿ç”¨äº†ä¸€ä¸ªå¤§å°ä¸º n çš„å¸ƒå°”æ•°ç»„æ¥è®°å½•æ¯ä¸ªåŸå¸‚çš„è®¿é—®çŠ¶æ€ï¼Œå ç”¨ `O(n)` çš„ç©ºé—´ã€‚\n2. é€’å½’è°ƒç”¨æ ˆï¼šåœ¨æœ€åæƒ…å†µä¸‹ï¼ˆæ‰€æœ‰åŸå¸‚å½¢æˆä¸€æ¡é“¾ï¼‰ï¼Œé€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦å¯èƒ½è¾¾åˆ° nï¼Œå ç”¨ O(n) çš„ç©ºé—´ã€‚\n3. å…¶ä»–å˜é‡ï¼ˆå¦‚ n, resï¼‰å ç”¨å¸¸æ•°ç©ºé—´ã€‚\n4. å› æ­¤ï¼Œæ€»çš„ç©ºé—´å¤æ‚åº¦æ˜¯ O(n)ã€‚\n\n### 2.5. æ€»ç»“\n\n- æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)\n- ç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\nè¿™ä¸ªå®ç°çš„æ—¶é—´å¤æ‚åº¦ä¸»è¦æ¥è‡ªäºéœ€è¦æ£€æŸ¥æ¯å¯¹åŸå¸‚ä¹‹é—´çš„è¿æ¥å…³ç³»ã€‚ç©ºé—´å¤æ‚åº¦åˆ™ä¸»è¦ç”± visited æ•°ç»„å’Œå¯èƒ½çš„é€’å½’è°ƒç”¨æ ˆæ·±åº¦å†³å®šã€‚\n\nè™½ç„¶è¿™ä¸ªè§£å†³æ–¹æ¡ˆåœ¨æ—¶é—´å¤æ‚åº¦ä¸Šä¸æ˜¯æœ€ä¼˜çš„ï¼Œä½†å®ƒç›´è§‚ä¸”æ˜“äºç†è§£ã€‚å¯¹äºä¸­å°è§„æ¨¡çš„è¾“å…¥ï¼Œè¿™ç§æ–¹æ³•é€šå¸¸è¡¨ç°è‰¯å¥½ã€‚å¦‚æœéœ€è¦å¤„ç†éå¸¸å¤§è§„æ¨¡çš„æ•°æ®ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨**å¹¶æŸ¥é›†ï¼ˆUnion-Findï¼‰**ç­‰æ›´é«˜æ•ˆçš„æ•°æ®ç»“æ„æ¥ä¼˜åŒ–æ€§èƒ½ã€‚\n\n## 3. æ€è·¯äºŒï¼šå¹¶æŸ¥é›†ï¼ˆUnion-Findï¼‰\n\nåé¢è®²ï¼Œå…ˆå¿½ç•¥\n\n","984c5a27d97d5fe9ac42c809244eeac3":"\n# é‡æ–°è§„åˆ’è·¯çº¿\n\n\n`#leetcode`   `#2024/09/13`  `#ç®—æ³•`  `#DFS` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n> https://leetcode.cn/problems/reorder-routes-to-make-all-paths-lead-to-the-city-zero/description/?envType=study-plan-v2&envId=leetcode-75\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240913064057.png)\n\n## æ€è·¯\n\n1. **å»ºå›¾**ï¼š\n\t- é¦–å…ˆï¼Œå°†ç»™å®šçš„**æœ‰å‘è¾¹æ•°ç»„**è½¬æ¢ä¸ºä¸€ä¸ª**æ— å‘å›¾ï¼ˆé‚»æ¥è¡¨ï¼‰**\n\t- åŒæ—¶ï¼Œä½¿ç”¨ä¸€ä¸ªé›†åˆæ¥**è®°å½•åŸæœ‰çš„æœ‰å‘è¾¹**ï¼Œä»¥ä¾¿åœ¨ä¹‹ååˆ¤æ–­æ˜¯å¦éœ€è¦åè½¬è¾¹çš„æ–¹å‘\n2. **æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰**\n    - ä»`èŠ‚ç‚¹ 0` å¼€å§‹è¿›è¡Œ DFS éå†ï¼Œå¯¹äºæ¯ä¸ªæœªè®¿é—®è¿‡çš„ç›¸é‚»èŠ‚ç‚¹\n        - å¦‚æœé€šè¿‡å½“å‰èŠ‚ç‚¹åˆ°è¾¾ç›¸é‚»èŠ‚ç‚¹çš„è¾¹æ˜¯åŸæœ‰çš„æœ‰å‘è¾¹ï¼Œåˆ™éœ€è¦**å¢åŠ ä¸€æ¬¡åè½¬è®¡æ•°**ã€‚\n        - ç»§ç»­é€’å½’éå†ç›¸é‚»èŠ‚ç‚¹\n3. **ç»Ÿè®¡åè½¬æ¬¡æ•°**ï¼šåœ¨ DFS çš„è¿‡ç¨‹ä¸­ï¼Œç»Ÿè®¡éœ€è¦åè½¬çš„è¾¹çš„æ•°é‡ã€‚\n\n> é¢˜è®¾ä¸­æ˜¯è¦æ±‚ï¼Œæ¯ä¸ªåŸå¸‚éƒ½èƒ½åˆ°åˆ°è¾¾ `åŸå¸‚ 0` ï¼Œæ‰€ä»¥ä» 0 å¼€å§‹æ·±åº¦éå†ï¼Œéå†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸åŒ…å«åŸå§‹æœ‰å‘è¾¹ï¼Œåˆ™å°†`è®¡æ•°å™¨ + 1`\n\n\n## ä»£ç å®ç°\n\n```javascript hl:28-31\n/**\n * @param {number} n\n * @param {number[][]} connections\n * @return {number}\n */\nvar minReorder = function (n, connections) {\n  // æ„å»ºé‚»æ¥è¡¨\n  const graph = new Array(n).fill(0).map(() => []);\n  // è®°å½•åŸå§‹è¾¹ï¼Œä½¿ç”¨ Set é¿å…é‡å¤ï¼Œkey ä¸º \"u,v\"ï¼Œè¡¨ç¤º u åˆ° v çš„æœ‰å‘è¾¹\n  const originalEdges = new Set();\n\n  // ä½¿ç”¨æœ‰å‘è¾¹æ„å»ºé‚»æ¥è¡¨ï¼ˆæ— å‘ï¼‰\n  for (const [u, v] of connections) {\n    graph[u].push(v);\n    graph[v].push(u);\n    originalEdges.add(`${u},${v}`);\n  }\n\n  // è®°å½•åå‘è¾¹çš„æ•°é‡(éœ€è¦é‡æ–°è§„åˆ’çš„è¾¹çš„æ•°é‡)\n  let reorderCount = 0;\n  // è®°å½•èŠ‚ç‚¹æ˜¯å¦è¢«è®¿é—®\n  const visited = new Array(n).fill(false);\n\n  function dfs(node) {\n    visited[node] = true;\n    for (const neighbor of graph[node]) {\n      if (!visited[neighbor]) {\n        // æ£€æŸ¥æ˜¯å¦éœ€è¦åè½¬\n        // å¦‚æœåŸå§‹è¾¹é›†åˆä¸­æœ‰ neighbor åˆ° node çš„è¾¹,åˆ™ä¸éœ€è¦åè½¬ï¼Œå³èƒ½å¤Ÿè¾¾åˆ°ä¸­å¿ƒåŸå¸‚ 0\n        // å¦åˆ™ï¼Œéœ€è¦åè½¬\n        // å³å¦‚ä¸‹ä»£ç ï¼Œnode åˆ° neighbor çš„è¾¹éœ€è¦åè½¬ï¼Œnode ä»£è¡¨ä¸­å¿ƒåŸå¸‚ 0\n        if (originalEdges.has(`${node},${neighbor}`)) {\n          reorderCount++;\n        }\n        dfs(neighbor);\n      }\n    }\n  }\n\n  // ä»èŠ‚ç‚¹ 0 å¼€å§‹ DFS\n  dfs(0);\n  return reorderCount;\n};\n\n```\n\n## å¤æ‚åº¦åˆ†æ\n\n\n\næ—¶é—´å¤æ‚åº¦ï¼šO(N + E)\n- **N æ˜¯åŸå¸‚çš„æ•°é‡ï¼ŒE æ˜¯è¿æ¥çš„æ•°é‡ã€‚**\n- æ„å»ºé‚»æ¥è¡¨å’ŒåŸå§‹è¾¹é›†åˆéœ€è¦ O(E) çš„æ—¶é—´ã€‚\n- DFS éå†æ¯ä¸ªèŠ‚ç‚¹å’Œè¾¹ä¸€æ¬¡ï¼Œæ€»å…±éœ€è¦ O(N + E) çš„æ—¶é—´ã€‚\n- å¯¹äºæ¯ä¸ªè¾¹ï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦åè½¬çš„æ“ä½œï¼ˆä½¿ç”¨ Set çš„ has æ–¹æ³•ï¼‰æ˜¯ O(1) çš„ã€‚\n\nç©ºé—´å¤æ‚åº¦ï¼šO(N + E)\n- é‚»æ¥è¡¨ graph éœ€è¦ O(N + E) çš„ç©ºé—´ã€‚\n- åŸå§‹è¾¹é›†åˆ originalEdges éœ€è¦ O(E) çš„ç©ºé—´ã€‚\n- visited æ•°ç»„éœ€è¦ O(N) çš„ç©ºé—´ã€‚\n- é€’å½’è°ƒç”¨æ ˆåœ¨æœ€åæƒ…å†µä¸‹å¯èƒ½è¾¾åˆ° O(N) çš„æ·±åº¦ã€‚\n\næ€»ç»“ï¼š\n- æ—¶é—´å¤æ‚åº¦ï¼šO(N + E)\n- ç©ºé—´å¤æ‚åº¦ï¼šO(N + E)\n\nè¿™ä¸ªç®—æ³•çš„æ•ˆç‡ç›¸å½“é«˜ï¼Œå› ä¸ºå®ƒåªéœ€è¦éå†æ¯ä¸ªèŠ‚ç‚¹å’Œè¾¹ä¸€æ¬¡ã€‚ä½¿ç”¨ Set æ¥å­˜å‚¨åŸå§‹è¾¹å¯ä»¥åœ¨ O(1) æ—¶é—´å†…æ£€æŸ¥è¾¹çš„æ–¹å‘ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¼˜åŒ–ã€‚æ•´ä½“æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œé€‚ç”¨äºå¤§è§„æ¨¡çš„è¾“å…¥æ•°æ®ã€‚\n","877c02d41b9f5467b73e927c0198c0e8":"\n# é™¤æ³•æ±‚å€¼\n\n\n`#leetcode`   `#2024/09/14`  `#ç®—æ³•`  `#ç®—æ³•/å›¾`  `#æœ‰å‘åŠ æƒå›¾` `#DFS` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240914213736.png)\n\n## 2. æ€è·¯ï¼šä½¿ç”¨ DFS\n\n1. **å›¾çš„æ„å»ºï¼ˆbuildGraph å‡½æ•°ï¼‰**:\n    - å°†æ–¹ç¨‹å¼è½¬æ¢ä¸ºä¸€ä¸ªåŠ æƒæœ‰å‘å›¾ã€‚\n    - æ¯ä¸ªå˜é‡æ˜¯å›¾ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n    - æ¯ä¸ªæ–¹ç¨‹ a/b = val åœ¨å›¾ä¸­è¡¨ç¤ºä¸ºä¸¤æ¡è¾¹ï¼ša->bï¼ˆæƒé‡ä¸ºvalï¼‰å’Œb->aï¼ˆæƒé‡ä¸º1/valï¼‰ã€‚\n    - ä½¿ç”¨**é‚»æ¥è¡¨**æ¥è¡¨ç¤ºè¿™ä¸ªå›¾ã€‚\n    - ![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240914220018.png)\n2. **ä¸»å‡½æ•°ï¼ˆcalcEquationï¼‰**:\n    - é¦–å…ˆè°ƒç”¨ buildGraph æ„å»ºå›¾ã€‚\n    - å¯¹æ¯ä¸ªæŸ¥è¯¢ (a, b)ï¼š\n        - å¦‚æœ a æˆ– b ä¸åœ¨å›¾ä¸­ï¼Œè¿”å› -1ã€‚\n        - å¦åˆ™ï¼Œè°ƒç”¨ dfs å‡½æ•°æ¥è®¡ç®—ç»“æœã€‚\n3. **æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆdfs å‡½æ•°ï¼‰**:\n    - ç”¨äºè®¡ç®—ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è·¯å¾„å€¼ï¼ˆå³é™¤æ³•ç»“æœï¼‰ã€‚\n    - åŸºæœ¬æƒ…å†µ\n        - å¦‚æœ a === bï¼Œè¿”å› 1ã€‚\n    - ä½¿ç”¨ visited é›†åˆé¿å…å¾ªç¯ã€‚\n    - é€’å½’æ¢ç´¢ a çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ã€‚\n    - å¦‚æœæ‰¾åˆ°é€šå‘ b çš„è·¯å¾„ï¼Œè¿”å›è·¯å¾„ä¸Šè¾¹æƒé‡çš„ä¹˜ç§¯ã€‚\n    - å¦‚æœæ²¡æœ‰æ‰¾åˆ°è·¯å¾„ï¼Œè¿”å› -1ã€‚\n\næµç¨‹å›¾å¦‚ä¸‹ï¼š\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Algorithm Flowchart.svg|354)\n\n## 3. ä»£ç å®ç°\n\n```javascript\n/**\n * @param {string[][]} equations\n * @param {number[]} values\n * @param {string[][]} queries\n * @return {number[]}\n */\nvar calcEquation = function (equations, values, queries) {\n  const graph = buildGraph(equations, values);\n\n  const res = [];\n\n  for (const [a, b] of queries) {\n    // å¦‚æœ a æˆ– b ä¸å­˜åœ¨ï¼Œåˆ™ a / b ä¸å­˜åœ¨,è¿”å› -1\n    if (!graph[a] || !graph[b]) {\n      res.push(-1);\n    } else {\n      // å¦åˆ™ï¼Œä½¿ç”¨æ·±åº¦éå†è®¡ç®— a / b çš„å€¼\n      res.push(dfs(a, b, graph, new Set()));\n    }\n  }\n\n  return res;\n};\n\n/**\n * @description æ„å»ºå›¾\n * @param {string[][]} equations, äºŒç»´æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º 2 çš„æ•°ç»„ï¼Œè¡¨ç¤ºæ–¹ç¨‹å¼çš„ä¸¤ä¸ªå˜é‡\n * @param {number[]} values, æ•°ç»„ï¼Œè¡¨ç¤ºæ–¹ç¨‹å¼çš„ç»“æœ\n * @return {object} å›¾ï¼Œä½¿ç”¨é‚»æ¥è¡¨è¡¨ç¤º\n */\nfunction buildGraph(equations, values) {\n  const graph = {};\n  for (let i = 0; i < equations.length; i++) {\n    const [a, b] = equations[i];\n    const val = values[i];\n\n    // a -> b\n    // a / b = val\n    // b / a = 1 / val\n    if (!graph[a]) {\n      graph[a] = [];\n    }\n    // a -> b, val ä»£è¡¨ a/b\n    graph[a].push({ node: b, val });\n\n    // b -> a\n    if (!graph[b]) {\n      graph[b] = [];\n    }\n    // b -> a, 1/val ä»£è¡¨ b/a\n    graph[b].push({ node: a, val: 1 / val });\n  }\n  return graph;\n}\n\n/**\n * @description ä½¿ç”¨æ·±åº¦éå† è®¡ç®— a / b çš„å€¼ï¼Œå¦‚æœ a / b ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› -1\n * @param {string} a\n * @param {string} b\n * @param {object} graph\n * @param {Set} visited\n * @return {number}\n */\nfunction dfs(a, b, graph, visited) {\n  // å¦‚æœ a === bï¼Œåˆ™ a / b = 1\n  if (a === b) {\n    return 1;\n  }\n\n  visited.add(a);\n\n  for (const { node, val } of graph[a]) {\n    if (visited.has(node)) {\n      continue;\n    }\n\n    const res = dfs(node, b, graph, visited);\n    if (res !== -1) {\n      return val * res;\n    }\n  }\n\n  return -1;\n}\n\n```\n\n","e388bed47b275ede90a1f96e90fdd915":"\n# è¿·å®«ä¸­ç¦»å…¥å£æœ€è¿‘çš„å‡ºå£\n\n`#leetcode`   `#2024/09/16`  `#ç®—æ³•`  `#å›¾BFS` `#ç®—æ³•/å›¾`  `#è¿·å®«é—®é¢˜`\n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240916080248.png)\n\n> [!danger]\n>  ä¸Šé¢çš„maza ä¸æ˜¯é‚»æ¥çŸ©é˜µï¼Œm éƒ½ä¸ç­‰äº nï¼Œé‚»æ¥çŸ©é˜µä¸€å®šæ˜¯ n*n\n\n\n\n## æ€è·¯\n\nè¿™ä¸ªé—®é¢˜æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯»æ‰¾**æœ€çŸ­è·¯å¾„**çš„é—®é¢˜ï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨**å¹¿åº¦ä¼˜å…ˆæœç´¢**ï¼ˆBFSï¼‰æ¥è§£å†³ã€‚BFS å¯ä»¥ä¿è¯é¦–å…ˆæ‰¾åˆ°çš„å‡ºå£å°±æ˜¯æœ€è¿‘çš„å‡ºå£ã€‚\n\n- å…³é”®ç‚¹\n\t- è¿·å®«é—®é¢˜ï¼Œå®šä¹‰4 ä¸ªæ–¹å‘ï¼Œä¸Šä¸‹å·¦å³æ‰©æ•£\n\t- åˆå§‹åŒ– `m*n` çš„ visited äºŒç»´æ•°ç»„\n\n## ä»£ç å®ç°\n\n\n```javascript hl:9,19,36,37\n/**\n * @param {character[][]} maze é‚»æ¥çŸ©é˜µ\n * @param {number[]} entrance  å‡ºå£\n * @return {number}  æœ€å°‘çš„å‡ºå£éœ€è¦èµ°å‡ æ­¥\n */\nvar nearestExit = function (maze, entrance) {\n  const m = maze.length;\n  const n = maze[0].length;\n  // ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘ [x,y]ï¼Œx å’Œ y åˆ†åˆ«è¡¨ç¤ºæ¨ªçºµåæ ‡çš„å¢é‡\n  const dirs = [\n    [0, 1], // å‘å³\n    [0, -1], // å‘å·¦\n    [1, 0], // å‘ä¸‹\n    [-1, 0], // å‘ä¸Š\n  ];\n\n  // BFS ç®—æ³•çš„é˜Ÿåˆ—å’Œ visited æ•°ç»„\n  const queue = [];\n  // åˆå§‹åŒ–ä¸€ä¸ª m * n çš„ visited äºŒç»´æ•°ç»„\n  const visited = Array.from({ length: m }, () => Array(n).fill(false));\n  // å°†å…¥å£æ”¾å…¥é˜Ÿåˆ—\n  queue.push(entrance);\n  // æ ‡è®°å…¥å£å·²è®¿é—®\n  visited[entrance[0]][entrance[1]] = true;\n  // å¯åŠ¨ BFS ç®—æ³•ä» entrance å¼€å§‹åƒå››å‘¨æ‰©æ•£\n  let step = 0;\n  while (queue.length) {\n    const sz = queue.length;\n    step++;\n    // æ‰©æ•£å½“å‰é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹\n    for (let i = 0; i < sz; i++) {\n      // å–å‡ºé˜Ÿé¦–èŠ‚ç‚¹\n      const cur = queue.shift();\n      // æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šå°è¯•å‘ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘æ‰©å±•ä¸€æ­¥\n      for (const dir of dirs) {\n        // cur[0] å’Œ cur[1] åˆ†åˆ«ä¸ºå½“å‰èŠ‚ç‚¹çš„æ¨ªçºµåæ ‡,é€šè¿‡ä¸‹é¢çš„æ–¹å¼è®¡ç®—\n        // ä¸Šä¸‹å·¦å³ç§»åŠ¨åæ–°çš„åæ ‡\n        const x = cur[0] + dir[0];\n        const y = cur[1] + dir[1];\n        // å¦‚æœæ–°åæ ‡ (x, y) è¶…å‡ºè¾¹ç•Œï¼Œæˆ–è€…é‡åˆ°å¢™å£ï¼Œæˆ–è€…å·²ç»è®¿é—®è¿‡ï¼Œéƒ½ç›´æ¥è·³è¿‡\n        if (\n          x < 0 ||\n          x >= m ||\n          y < 0 ||\n          y >= n ||\n          visited[x][y] ||\n          maze[x][y] === \"+\"\n        ) {\n          continue;\n        }\n        // å¦‚æœèµ°åˆ°è¾¹ç•Œï¼ˆå‡ºå£ï¼‰ï¼Œè¿”å›æ­¥æ•°\n        if (x === 0 || x === m - 1 || y === 0 || y === n - 1) {\n          // èµ°åˆ°è¾¹ç•Œï¼ˆå‡ºå£ï¼‰\n          return step;\n        }\n        // è®°å½•å·²è®¿é—®\n        visited[x][y] = true;\n        // å°†æ–°èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—\n        queue.push([x, y]);\n      }\n    }\n  }\n  return -1;\n};\n\n```\n\n## å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼šO(m * n) ï¼Œ\n\t- åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦è®¿é—®è¿·å®«ä¸­çš„æ¯ä¸€ä¸ªå•å…ƒæ ¼ã€‚\n\t- å¹³å‡æƒ…å†µä¸‹ï¼Œç”±äº**å¢™å£**çš„å­˜åœ¨ï¼Œå®é™…è®¿é—®çš„å•å…ƒæ ¼æ•°é‡ä¼šå°‘äº m * n\n- ç©ºé—´å¤æ‚åº¦ï¼šO(m * n)\n\t1. ä¸»è¦ç©ºé—´ä½¿ç”¨ï¼šO(m * n)\n\t    - visited æ•°ç»„ï¼šéœ€è¦ O(m * n) ç©ºé—´æ¥å­˜å‚¨æ¯ä¸ªå•å…ƒæ ¼çš„è®¿é—®çŠ¶æ€ã€‚\n\t    - é˜Ÿåˆ—ï¼šåœ¨æœ€åæƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦å­˜å‚¨æ‰€æœ‰çš„ m * n ä¸ªå•å…ƒæ ¼ã€‚\n\t2. å…¶ä»–ç©ºé—´ä½¿ç”¨ï¼š\n\t    - dirs æ•°ç»„ï¼ˆæ–¹å‘æ•°ç»„ï¼‰ï¼šå¸¸æ•°ç©ºé—´ O(1)ã€‚\n\t    - å…¶ä»–å˜é‡ï¼ˆå¦‚ step, sz ç­‰ï¼‰ï¼šå¸¸æ•°ç©ºé—´ O(1)ã€‚\n\t3. æ€»ç©ºé—´å¤æ‚åº¦ï¼šO(m * n)\n\t    - ä¸»è¦ç”± visited æ•°ç»„å’Œé˜Ÿåˆ—å†³å®šã€‚\n## é”™è¯¯è®°å½•\n\n- åˆ«ä¸€ä¸Šæ¥å°±æƒ³ç€è¿™ä¸ª maza ä¸æ˜¯é‚»æ¥çŸ©é˜µï¼Œé‚£ä¹ˆæ„å»ºä¸€ä¸ªï¼Ÿ\n\t- é‚»æ¥çŸ©é˜µä¸å¥½æï¼Œé‚£ä¹ˆç›´æ¥æ„å»ºä¸€ä¸ªé‚»æ¥è¡¨ï¼Ÿ\n- è¿™é¢˜çš„æœ¬è´¨è¿˜æ˜¯è¿·å®«é—®é¢˜ï¼Œè¿·å®«é—®é¢˜æœ‰è¿·å®«é—®é¢˜çš„å¥—è·¯\n","ec545669d5525fc0acaaa8c8250706c5":"\n# è…çƒ‚çš„æ©˜å­\n\n`#leetcode`   `#2024/09/16`  `#ç®—æ³•`  `#å›¾BFS` `#ç®—æ³•/å›¾` `#è¿·å®«é—®é¢˜` \n\n\n> å¾ˆç±»ä¼¼[47.  è¿·å®«ä¸­ç¦»å…¥å£æœ€è¿‘çš„å‡ºå£](/post/e388bed47b275ede90a1f96e90fdd915.html) ï¼Œéƒ½æ˜¯è¿·å®«é—®é¢˜ï¼ŒBFS é—®é¢˜ï¼Œä½†è¿™é¢˜çš„å…³é”®æ˜¯ï¼Œä»å“ªé‡Œå¼€å§‹æ‰©æ•£ï¼Ÿ\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240916091007.png)\n\n## æ€è·¯ä¸€\n\nå…³é”®ç‚¹ï¼š\n- å¹¶ä¸çŸ¥é“åº”è¯¥ä»å“ªé‡Œå¼€å§‹å‘å››å‘¨æ‰©æ•£ï¼Œæ‰€ä»¥\n\t- ç¬¬ä¸€æ­¥éœ€è¦æ ‡è®°çƒ‚æ©˜å­åˆ°çƒ‚æ©˜å­ğŸŠ`queue  é˜Ÿåˆ—`\n\t- ç»Ÿè®¡æ–°é²œæ©˜å­ğŸŠçš„ä¸ªæ•°\n\n\n\n## ä»£ç å®ç°\n\n\nå…³é”®ç‚¹ï¼š17/18 è¡Œ\n\n```javascript hl:17,18,59,60\n/**\n * @param {number[][]} grid\n * @return {number}\n */\nvar orangesRotting = function (grid) {\n  let m = grid.length;\n  let n = grid[0].length;\n  let dirs = [\n    [0, 1],\n    [0, -1],\n    [1, 0],\n    [-1, 0],\n  ];\n  let queue = []; // ç”¨äºå­˜æ”¾è…çƒ‚çš„æ©˜å­\n  let visited = Array.from({ length: m }, () => Array(n).fill(false));\n  let fresh = 0;\n  // åˆå§‹åŒ–, éå†ï¼Œå°†è…çƒ‚çš„æ©˜å­åŠ å…¥é˜Ÿåˆ—, å¹¶æ ‡è®°ä¸ºå·²è®¿é—®\n  // å¹¶ç»Ÿè®¡æ–°é²œæ©˜å­çš„æ•°é‡\n  for (let i = 0; i < m; i++) {\n    for (let j = 0; j < n; j++) {\n      if (grid[i][j] === 2) {\n        queue.push([i, j]);\n        visited[i][j] = true;\n      } else if (grid[i][j] === 1) {\n        fresh++;\n      }\n    }\n  }\n\n  let step = 0;\n  while (queue.length) {\n    let sz = queue.length;\n    step++;\n    for (let i = 0; i < sz; i++) {\n      //æ‹¿å‡ºä¸€ä¸ªçƒ‚æ©˜å­\n      let cur = queue.shift();\n      // å°†çƒ‚æ©˜å­çš„å››å‘¨çš„æ–°é²œæ©˜å­å˜ä¸ºçƒ‚æ©˜å­\n      for (let dir of dirs) {\n        let x = cur[0] + dir[0];\n        let y = cur[1] + dir[1];\n        // å¦‚æœæ–°åæ ‡ (x, y) è¶…å‡ºè¾¹ç•Œï¼Œæˆ–è€…é‡åˆ°å¢™å£ï¼Œæˆ–è€…å·²ç»è®¿é—®è¿‡ï¼Œéƒ½ç›´æ¥è·³è¿‡\n        if (\n          x < 0 ||\n          x >= m ||\n          y < 0 ||\n          y >= n ||\n          visited[x][y] ||\n          grid[x][y] === 0\n        ) {\n          continue;\n        }\n        visited[x][y] = true;\n        // å°†è¿™ä¸ªæ–°é²œæ©˜å­åŠ å…¥çƒ‚æ©˜å­é˜Ÿåˆ—\n        queue.push([x, y]);\n        fresh--;\n      }\n    }\n  }\n  // å¦‚æœè¿˜æœ‰æ–°é²œæ©˜å­ï¼Œè¿”å›-1\n  // å¦‚æœæ²¡æœ‰æ–°é²œæ©˜å­ï¼Œè¿”å›æ­¥æ•°\n  return fresh === 0 ? Math.max(0, step - 1) : -1;\n};\n\n```\n\n","ff7cf9f1bcb05b18a46ae85421076f31":"\n# æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ \n\n\n>  è¯¦è§ [2. å¿«é€Ÿæ’åºç®—æ³•çš„åŸç†åŠè¿ç”¨](/post/4f1cdfa1d77955d0b54e550ef8b7546c.html)\n\n\n\n\n","f1fa619d12d05152947311e9decc6be6":"\n# å¤šæ•°å…ƒç´ \n\n\n`#leetcode`   `#2024/08/05`\n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png600|504](https://832-1310531898.cos.ap-beijing.myqcloud.com/202408050622674.png?imageSlim)\n\n## è§£é¢˜æ€è·¯\n\n### è§£æ³• 1ï¼šå“ˆå¸Œ\n\nä½¿ç”¨ä¸€ä¸ª`å“ˆå¸Œè¡¨`æ¥ç»Ÿè®¡æ¯ä¸ªå…ƒç´ çš„å‡ºç°æ¬¡æ•°ï¼Œå¹¶æ‰¾åˆ°å‡ºç°æ¬¡æ•°è¶…è¿‡ `âŒŠ n/2 âŒ‹` çš„å…ƒç´ \n\n### è§£æ³• 2ï¼šæ’åº\n\nå¤šæ•°å…ƒç´ çš„å‡ºç°é¢‘ç‡è¶…è¿‡ `âŒŠ n/2 âŒ‹` ï¼Œå› æ­¤æ’åºåçš„æ•°ç»„**ä¸­é—´ä½ç½®**çš„å…ƒç´ å³ä¸ºå¤šæ•°å…ƒç´ ã€‚\n\næ‰€ä»¥æ’åºåï¼Œè¿”å› `nums[midIndex]` å³å¯\n\n### è§£æ³• 3ï¼šBoyer-MooreæŠ•ç¥¨ç®—æ³•\n\n- æ ¸å¿ƒæ€æƒ³æ˜¯\"å¯¹æŠ—\"æˆ–\"æŠµæ¶ˆ\"\n\t- æ¯ä¸ªå€™é€‰äººéƒ½æœ‰æ”¯æŒè€…ã€‚\n\t- æ”¯æŒè€…ä¹‹é—´å¯ä»¥äº’ç›¸æŠµæ¶ˆã€‚\n\t- å¦‚æœä¸€ä¸ªå€™é€‰äººçš„æ”¯æŒè€…æ•°é‡è¶…è¿‡äº†æ€»äººæ•°çš„ä¸€åŠï¼Œé‚£ä¹ˆå³ä½¿æ‰€æœ‰å…¶ä»–å€™é€‰äººçš„æ”¯æŒè€…è”åˆèµ·æ¥ï¼Œä¹Ÿæ— æ³•å®Œå…¨æŠµæ¶ˆè¿™ä¸ªå€™é€‰äººçš„æ”¯æŒè€…\n\n1. **åˆå§‹åŒ–**ï¼š\n    - è®¾ç½®Â `candidate`Â ä¸ºÂ `null`ï¼ˆè¿˜æ²¡æœ‰å€™é€‰äººï¼‰\n    - è®¾ç½®Â `count`Â ä¸º 0ï¼ˆè®¡ç¥¨å™¨ï¼‰\n2. **éå†æ•°ç»„**ï¼š å¯¹äºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼š\n    - å¦‚æœÂ `count`Â ä¸º 0ï¼š\n        - å°†å½“å‰å…ƒç´ è®¾ä¸ºæ–°çš„Â `candidate`\n        - å°†Â `count`Â è®¾ä¸º 1\n    - å¦åˆ™ï¼š\n        - å¦‚æœå½“å‰å…ƒç´ ç­‰äºÂ `candidate`ï¼Œ`count`Â åŠ  1\n        - å¦‚æœå½“å‰å…ƒç´ ä¸ç­‰äºÂ `candidate`ï¼Œ`count`Â å‡ 1\n3. **è¿”å›ç»“æœ**ï¼š éå†ç»“æŸåï¼Œ`candidate`Â å°±æ˜¯å¤šæ•°å…ƒç´ \n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} nums\n * @return {number}\n */\nvar majorityElement = function (nums) {\n    // å½“å‰éå†çš„å€™é€‰äºº, åˆå§‹åŒ–ä¸º null,\n    // åˆšå¼€å§‹ï¼Œè¿˜æ²¡éå†ä»»ä½•å…ƒç´ ï¼Œæ‰€ä»¥å€™é€‰äººæ˜¯ null\n    let target = null;\n    // è¯¥å€™é€‰äºº target çš„ç¥¨æ•°\n    let count = 0;\n\n    for (const num of nums) {\n        // å¦‚æœ count ä¸º 0 ï¼Œè¯´æ˜ä¹‹å‰çš„ç¥¨æ•°æŠµæ¶ˆå®Œäº†ï¼Œéœ€è¦é‡æ–°è®¾ç½®å€™é€‰äºº\n        if (count === 0) {\n            target = num;\n            count = 1;\n        } else {\n            // å¦‚æœå½“å‰çš„æ•°å­—å’Œå€™é€‰äººç›¸åŒï¼Œç¥¨æ•° + 1\n            if (num === target) {\n                count++;\n            } else {\n                // å¦‚æœå½“å‰çš„æ•°å­—å’Œå€™é€‰äººä¸åŒï¼Œç¥¨æ•° - 1\n                count--;\n            }\n        }\n    }\n    return target;\n};\n\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`ï¼Œåªéœ€è¦éå†æ•°ç»„ä¸€æ¬¡ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼š`O(1)`ï¼Œåªä½¿ç”¨äº†å¸¸æ•°é¢å¤–ç©ºé—´ã€‚\n\n## ç®—æ³•åº”ç”¨\n\n- åœ¨æ•°æ®æµä¸­æ‰¾åˆ°`é¢‘ç¹é¡¹`\n- ä¸€ç¾¤å¸¦æ­£ç”µçš„ç²’å­å’Œä¸€ç¾¤å¸¦è´Ÿç”µçš„ç²’å­ï¼Œåˆ¤æ–­ä»–ä»¬çš„`æ­£è´Ÿæ€§`æˆ–è€…`ä¸­æ€§`\n\n## é”™è¯¯è®°å½•","1b147710aeda57479daeb465e249f651":"\n# å­—ç¬¦ä¸²è§£ç \n\n\n`#2024/07/28` `#ç®—æ³•/æ ˆ` \n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407280730257.png?imageSlim)\n\n## è§£é¢˜æ€è·¯\n\n**æ ˆç»“æ„**å¯ä»¥å¾ˆå¥½åœ°å¤„ç†åµŒå¥—é—®é¢˜\n1. **ä½¿ç”¨ä¸¤ä¸ªæ ˆ**ï¼š\n    - ä¸€ä¸ªæ ˆå­˜å‚¨é‡å¤æ¬¡æ•°ï¼ˆæ•°å­—éƒ¨åˆ†ï¼‰ã€‚\n    - å¦ä¸€ä¸ªæ ˆå­˜å‚¨å­—ç¬¦ä¸²ï¼ˆå­—ç¬¦éƒ¨åˆ†ï¼‰ã€‚\n2. **éå†å­—ç¬¦ä¸²**ï¼š\n    - â‘  é‡åˆ°`æ•°å­—`æ—¶ï¼Œå°†å®Œæ•´çš„æ•°å­—æå–å‡ºæ¥ã€‚\n    - â‘¡ é‡åˆ°Â `[`Â æ—¶ï¼Œè¡¨ç¤ºæ¥ä¸‹æ¥ä¼šæ˜¯ä¸€ä¸ªæ–°çš„å­å­—ç¬¦ä¸²ï¼Œå‡†å¤‡å…¥æ ˆã€‚\n    - â‘¢ é‡åˆ°Â `]`Â æ—¶ï¼Œè¡¨ç¤ºå½“å‰å­å­—ç¬¦ä¸²ç»“æŸï¼Œéœ€è¦å‡ºæ ˆå¹¶è¿›è¡Œå¤„ç†é‡å¤ã€‚\n    - â‘£ é‡åˆ°`æ™®é€šå­—ç¬¦`æ—¶ï¼Œç›´æ¥ç´¯åŠ åˆ°å½“å‰çš„å­—ç¬¦ä¸²æ®µä¸­ã€‚\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {string} s\n * @return {string}\n */\nvar decodeString = function (s) {\n  // â‘  ä½¿ç”¨ä¸¤ä¸ªæ ˆï¼Œåˆ†åˆ«å­˜å‚¨å€æ•°å’Œå­—ç¬¦ä¸²\n  let countStack = [];\n  let strStack = [];\n  // ä»£è¡¨å½“å‰çš„å­—ç¬¦ä¸²\n  let currentStr = \"\";\n  //ä»£è¡¨å‡ºç°çš„æ¬¡æ•°\n  let k = 0;\n\n  // éå†å­—ç¬¦ä¸²\n  for (let i = 0; i < s.length; i++) {\n    // â‘ \n    // å¦‚æœæ˜¯æ•°å­—ï¼Œå¯èƒ½æ˜¯å¤šä½æ•°ï¼Œæ¯”å¦‚ \"12[abc]\"ï¼Œæ‰€æœ‰å¤„ç†ä¸¤æ¬¡éå†åˆ°çš„æ•°å­—ï¼Œè®¡ç®—å‡ºçœŸæ­£çš„æ•°å­—\n    // ä¾‹å¦‚ï¼šç¬¬ä¸€æ¬¡éå†åˆ°çš„æ˜¯1ï¼Œç¬¬äºŒæ¬¡éå†åˆ°çš„æ˜¯2ï¼Œé‚£ä¹ˆçœŸæ­£çš„æ•°å­—å°±æ˜¯ 1 * 10 + 2 = 12\n    if (!isNaN(s[i])) {\n      k = k * 10 + parseInt(s[i]);\n    }\n    // â‘¡ å¦‚æœæ˜¯å·¦æ‹¬å·\n    else if (s[i] === \"[\") {\n      // å°†å‡ºç°çš„æ¬¡æ•°å…¥æ ˆ\n      countStack.push(k);\n      // å­—ç¬¦ä¸²å…¥æ ˆ\n      strStack.push(currentStr);\n      // é‡ç½®å‡ºç°æ¬¡æ•°å’Œå­—ç¬¦ä¸²\n      k = 0;\n      currentStr = \"\";\n    }\n    // â‘¢ å¦‚æœæ˜¯å³æ‹¬å·\n    else if (s[i] === \"]\") {\n      // å‡ºæ ˆ\n      let count = countStack.pop();\n      // å‡ºæ ˆ\n      let str = strStack.pop();\n      // æ‹¼æ¥å­—ç¬¦ä¸²\n      currentStr = str + currentStr.repeat(count);\n    }\n    // â‘£ å¦‚æœæ˜¯å­—æ¯ï¼Œå³æ™®é€šå­—ç¬¦ï¼Œæ›´æ–°å½“å‰å­—ç¬¦ä¸²ï¼Œç”¨äºåé¢æ‹¼æ¥é€»è¾‘\n    else {\n      // æ‹¼æ¥å­—ç¬¦ä¸², ä¾‹å¦‚ \"abc\"ï¼Œ\"abc\" å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²\n      // ä¾‹å¦‚ \"12[abc]\"ï¼Œ\"abc\" å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²\n      currentStr += s[i];\n    }\n  }\n\n  return currentStr;\n};\n\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n- **æ—¶é—´å¤æ‚åº¦**ï¼š\n    - éå†å­—ç¬¦ä¸²çš„æ¬¡æ•°ä¸ºÂ `O(n)`ï¼Œæ¯ä¸ªå­—ç¬¦åœ¨æ ˆä¸­æ“ä½œçš„æ—¶é—´ä¸ºÂ `O(1)`ï¼Œæ‰€ä»¥æ€»æ—¶é—´å¤æ‚åº¦ä¸ºÂ `O(n)`ã€‚\n- **ç©ºé—´å¤æ‚åº¦**ï¼š\n    - ç©ºé—´å¤æ‚åº¦ä¸»è¦ç”±æ ˆå ç”¨ï¼Œæœ€åæƒ…å†µä¸‹éœ€è¦Â `O(n)`Â çš„ç©ºé—´ï¼Œå› ä¸ºæ‰€æœ‰å­—ç¬¦å’Œæ•°å­—å¯èƒ½éƒ½éœ€è¦å…¥æ ˆã€‚\n\n## é”™è¯¯è®°å½•","b273f1934a135ec992f1781d4494bfb7":"\n# æ¥é›¨æ°´\n\n\n`#leetcode`   `#2024/07/31`  `#ç®—æ³•/åŒæŒ‡é’ˆ` `#ç®—æ³•/å¤‡å¿˜å½•`   \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407310906405.png?imageSlim)\n\n## è§£é¢˜æ€è·¯\n\nğŸŒ§ æœ€å¤šèƒ½å¤Ÿè£…å¤šå°‘æ°´  =  æ¯ä¸ªæŸ±å­ä¸Šèƒ½å¤Ÿè£…å¤šå°‘æ°´  = `æ¯ä¸ªæŸ±å­å·¦è¾¹å’Œå³è¾¹æœ€é«˜æŸ±å­çš„æœ€çŸ®çš„é‚£ä¸ª - è¯¥æŸ±å­çš„é«˜åº¦` ï¼Œå¦‚ä¸‹ä»£ç \n\n```python\nwater[i] = min(\n    # å·¦è¾¹æœ€é«˜çš„æŸ±å­\n    max(height[0..i]),  \n    # å³è¾¹æœ€é«˜çš„æŸ±å­\n    max(height[i..end]) \n) - height[i]\n```\n\nå¦‚ä¸‹å›¾ï¼š\n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407310915725.png?imageSlim)\n\n## ä»£ç å®ç°\n\n### è§£æ³•ä¸€ï¼šæš´åŠ›éå†\n\næŒ‰ç…§ä¸Šé¢çš„æ€è·¯ï¼Œç›´æ¥==æš´åŠ›éå†==å³å¯ï¼Œå¤æ‚åº¦æ˜¯Â `O(N^2)`ï¼Œç©ºé—´å¤æ‚åº¦ `O(1)`\n\n```javascript\nvar trap = function(height) {\n    var n = height.length;\n    var res = 0;\n    for (var i = 1; i < n - 1; i++) {\n        var l_max = 0, r_max = 0;\n        // æ‰¾å³è¾¹æœ€é«˜çš„æŸ±å­\n        for (var j = i; j < n; j++)\n            r_max = Math.max(r_max, height[j]);\n        // æ‰¾å·¦è¾¹æœ€é«˜çš„æŸ±å­\n        for (var j = i; j >= 0; j--)\n            l_max = Math.max(l_max, height[j]);\n        // å¦‚æœè‡ªå·±å°±æ˜¯æœ€é«˜çš„è¯ï¼Œ\n        // l_max == r_max == height[i]\n        res += Math.min(l_max, r_max) - height[i];\n    }\n    return res;\n};\n```\n\n### è§£æ³•äºŒï¼šå¤‡å¿˜å½•ä¼˜åŒ–\n\nå¯¹äºè§£æ³•ä¸€ï¼Œå¯ä»¥ä½¿ç”¨å¤‡å¿˜å½•ä¼˜åŒ–ï¼š\n\n- å®šä¹‰ä¸¤ä¸ªæ•°ç»„Â `r_max`Â å’ŒÂ `l_max`Â å……å½“å¤‡å¿˜å½•ï¼Œé¢„å…ˆæŠŠè¿™ä¸¤ä¸ªæ•°ç»„è®¡ç®—å¥½ï¼Œé¿å…é‡å¤è®¡ç®—\n\t- `l_max[i]`Â è¡¨ç¤ºä½ç½®Â `i`Â å·¦è¾¹æœ€é«˜çš„æŸ±å­é«˜åº¦\n\t- `r_max[i]`Â è¡¨ç¤ºä½ç½®Â `i`Â å³è¾¹æœ€é«˜çš„æŸ±å­é«˜åº¦\n\n### è§£æ³•ä¸‰ï¼šåŒæŒ‡é’ˆ\n\næ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ï¼Œç©ºé—´å¤æ‚åº¦ä¸º `O(1)`\n\n```javascript\n/**  \n * @param {number[]} height  \n * @return {number}  \n */  \nvar trap = function (height) {  \n  \n    // åŒæŒ‡é’ˆ  \n    let left = 0;  \n    let right = height.length - 1;  \n  \n    // å½“å‰éå†çš„å…ƒç´ çš„ å·¦è¾¹çš„æœ€å¤§å€¼  \n    let leftMax = 0;  \n    // å½“å‰éå†çš„å…ƒç´ çš„ å³è¾¹çš„æœ€å¤§å€¼  \n    let rightMax = 0;  \n    // ç»“æœ  \n    let res = 0;  \n  \n    // éå†, åŒå‘éå†ï¼Œä»ä¸¤è¾¹å‘ä¸­é—´é æ‹¢  \n    while (left < right) {  \n        // æ›´æ–°å·¦è¾¹çš„æœ€å¤§å€¼  \n        leftMax = Math.max(leftMax, height[left]);  \n        // æ›´æ–°å³è¾¹çš„æœ€å¤§å€¼  \n        rightMax = Math.max(rightMax, height[right]);  \n  \n        // è¯´æ˜æœ€å°å€¼åœ¨å·¦è¾¹ï¼Œå½“å‰å…ƒç´ çš„æ°´é‡ = å·¦è¾¹æœ€å¤§å€¼ - å½“å‰å…ƒç´ çš„é«˜åº¦  \n        if (leftMax < rightMax) {  \n            // æ›´æ–°ç»“æœ  \n            res += leftMax - height[left];  \n            // å·¦æŒ‡é’ˆå‘å³ç§»åŠ¨  \n            left++;  \n            // è¯´æ˜æœ€å°å€¼åœ¨å³è¾¹ï¼Œå½“å‰å…ƒç´ çš„æ°´é‡ = å³è¾¹æœ€å¤§å€¼ - å½“å‰å…ƒç´ çš„é«˜åº¦  \n        } else {  \n            // æ›´æ–°ç»“æœ  \n            res += rightMax - height[right];  \n            // å³æŒ‡é’ˆå‘å·¦ç§»åŠ¨  \n            right--;  \n        }  \n    }  \n  \n    // è¿”å›ç»“æœ  \n    return res;  \n  \n};\n```\n\n","dedb8cbdabf6501bb17f31845fe21b31":"\n# è½®è½¬æ•°ç»„\n\n\n`#leetcode`   `#2024/08/05`   \n\nå¦å¤–è§ [12. ç®—æ³•/3. åˆ·é¢˜ç¯‡/2. LeetCode çƒ­é¢˜ 100 é¢˜/13. è½®è½¬æ•°ç»„|13. è½®è½¬æ•°ç»„](/post/dedb8cbdabf6501bb17f31845fe21b31.html#12-ç®—æ³•/3-åˆ·é¢˜ç¯‡/2-LeetCode-çƒ­é¢˜-100-é¢˜/13-è½®è½¬æ•°ç»„|13-è½®è½¬æ•°ç»„) \n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png600|656](https://832-1310531898.cos.ap-beijing.myqcloud.com/202408050809389.png?imageSlim)\n\n## è§£é¢˜æ€è·¯\n\n### è§£æ³•ä¸€ï¼šåˆ†å‰²æ•°ç»„ï¼Œç„¶åå†ç»„åˆæ•°ç»„\n\n```javascript\n/**  \n * @param {number[]} nums  \n * @param {number} k  \n * @return {void} Do not return anything, modify nums in-place instead.  \n *// æ•°ç»„åˆ†å‰²  \nvar rotate = function (nums, k) {  \n    const n = nums.length;  \n    // base 1: å¤„ç† k å¤§äºæ•°ç»„é•¿åº¦çš„æƒ…å†µ  \n    k %= n; \n    // base 2:  \n    // å¦‚æœ k ä¸º 0 æˆ–æ•°ç»„é•¿åº¦ä¸º 0 æˆ– 1ï¼Œæ— éœ€æ—‹è½¬  \n    if (k === 0 || n <= 1) {  \n        return;  \n    }  \n    const part1 = nums.slice(-k);  \n    const part2 = nums.slice(0, n - k);  \n    // ç›´æ¥ä¿®æ”¹ nums \n    // nums.length = 0;  \n    // nums = [...part1, ...part2];  \n    \n    // ç›´æ¥ä¿®æ”¹åŸæ•°ç»„  \n    // ä» 0 åˆ° n åˆ é™¤ n ä¸ªå…ƒç´ ï¼Œç„¶åæ’å…¥ part1 å’Œ part2  \n    nums.splice(0, n, ...part1, ...part2)  \n  \n};\n```\n\n- æ—¶é—´å¤æ‚åº¦ï¼š`O(n)` \n- ç©ºé—´å¤æ‚åº¦ï¼š`O(n)`ï¼ˆå› ä¸ºæˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªä¸´æ—¶æ•°ç»„ `part1` å’Œ `part2`ï¼‰\n\n> [!danger]\n> æ³¨æ„ä¸Šé¢çš„ä¸¤ä¸ª base æ¡ä»¶\n\n### è§£æ³•äºŒï¼šåè½¬æ³•\n\nå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°ç»„ `[1, 2, 3, 4, 5, 6, 7]`ï¼Œéœ€è¦å‘å³æ—‹è½¬ 3 æ­¥ã€‚\n\n- æ­¥éª¤ 1ï¼šåè½¬æ•´ä¸ªæ•°ç»„ `[1, 2, 3, 4, 5, 6, 7] -> [7, 6, 5, 4, 3, 2, 1]`\n\t- æƒ³è±¡ä¸€ä¸‹ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªæ•°ç»„å†™åœ¨ä¸€æ¡ç»³å­ä¸Šï¼Œç„¶åæŠŠç»³å­ç¿»è½¬è¿‡æ¥ã€‚\n- æ­¥éª¤ 2ï¼šåè½¬å‰ k ä¸ªå…ƒç´ ï¼ˆè¿™é‡Œ k = 3 ï¼‰\n\t- `[7, 6, 5, 4, 3, 2, 1] -> [5, 6, 7, 4, 3, 2, 1]`\n\t- æƒ³è±¡æˆ‘ä»¬æŠŠç»³å­çš„å‰3ä¸ªå…ƒç´ `ï¼ˆ7, 6, 5ï¼‰`å•ç‹¬æ‹¿å‡ºæ¥ç¿»è½¬ã€‚\n- æ­¥éª¤ 3ï¼šåè½¬å‰©ä½™çš„å…ƒç´  `[5, 6, 7, 4, 3, 2, 1] -> [5, 6, 7, 1, 2, 3, 4]`\n\t- æˆ‘ä»¬æŠŠå‰©ä¸‹çš„å…ƒç´ `ï¼ˆ4, 3, 2, 1ï¼‰`ä¹Ÿç¿»è½¬ä¸€ä¸‹ã€‚\n- æœ€ç»ˆç»“æœï¼š`[5, 6, 7, 1, 2, 3, 4]`\n\nè¿™å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼\n\nä¸ºä»€ä¹ˆè¿™ä¸ªæ–¹æ³•æœ‰æ•ˆï¼Ÿ\n\n1. **ç¬¬ä¸€æ¬¡**åè½¬æŠŠæ•´ä¸ªæ•°ç»„é¢ å€’ï¼Œå°†\"éœ€è¦ç§»åŠ¨åˆ°å‰é¢çš„å…ƒç´ \"æ”¾åˆ°äº†æ•°ç»„çš„å¼€å¤´ï¼Œä½†é¡ºåºæ˜¯åçš„ã€‚\n2. **ç¬¬äºŒæ¬¡**åè½¬**çº æ­£äº†**è¿™äº›å…ƒç´ çš„é¡ºåºã€‚\n3. **ç¬¬ä¸‰æ¬¡**åè½¬åˆ™**çº æ­£äº†**å…¶ä½™å…ƒç´ çš„é¡ºåºã€‚\n\nè¿™ä¸ªæ–¹æ³•çš„å·§å¦™ä¹‹å¤„åœ¨äºï¼š\n- å®ƒä¸éœ€è¦é¢å¤–çš„ç©ºé—´æ¥å­˜å‚¨å…ƒç´ ã€‚\n- æ¯ä¸ªå…ƒç´ åªè¢«ç§»åŠ¨äº†å¸¸æ•°æ¬¡ï¼Œæ‰€ä»¥æ•ˆç‡å¾ˆé«˜ã€‚\n- å®ƒå¯ä»¥å¤„ç†å„ç§ä¸åŒçš„æ—‹è½¬æ­¥æ•°ï¼ŒåŒ…æ‹¬å¤§äºæ•°ç»„é•¿åº¦çš„æƒ…å†µã€‚\n\n```javascript\n/**\n * @param {number[]} nums\n * @param {number} k\n * @return {void} Do not return anything, modify nums in-place instead.\n */\n// æ•°ç»„åˆ†å‰²\nvar rotate = function (nums, k) {\n  // base 1 : å¤„ç† k å¤§äºæ•°ç»„é•¿åº¦çš„æƒ…å†µ\n  k %= nums.length;\n\n  // base 2 : å¦‚æœ k ä¸º 0 æˆ–æ•°ç»„é•¿åº¦ä¸º 0 æˆ– 1ï¼Œæ— éœ€æ—‹è½¬\n  if (k === 0 || nums.length <= 1) {\n    return;\n  }\n\n  // ç¿»è½¬ â‘  : ç¿»è½¬æ•´ä¸ªæ•°ç»„\n  reverse(nums, 0, nums.length - 1);\n  // ç¿»è½¬ â‘¡ : ç¿»è½¬å‰ k ä¸ªå…ƒç´ \n  reverse(nums, 0, k - 1);\n  // ç¿»è½¬ â‘¢ : ç¿»è½¬å n - k ä¸ªå…ƒç´ \n  reverse(nums, k, nums.length - 1);\n};\n\n/**\n * @description ç¿»è½¬æ•°ç»„ï¼Œä» start åˆ° end\n * */\nfunction reverse(nums, start, end) {\n  while (start < end) {\n    const temp = nums[start];\n    nums[start] = nums[end];\n    nums[end] = temp;\n    start++;\n    end--;\n  }\n}\n\n```\n\n- æ—¶é—´å¤æ‚åº¦ä¸º `O(n)`\n- ç©ºé—´å¤æ‚åº¦ä¸º `O(1)`\n\t- ç›´æ¥åœ¨åŸæ•°ç»„ä¸Šæ“ä½œï¼Œä¸éœ€è¦é¢å¤–çš„ç©ºé—´ï¼ˆé™¤äº†å‡ ä¸ªä¸´æ—¶å˜é‡ï¼‰ã€‚\n\n> [!danger]\n> èƒ½å¤Ÿå¤„ç†æ‰€æœ‰è¾¹ç•Œæƒ…å†µï¼ŒåŒ…æ‹¬Â `k = 0`Â å’Œæ•°ç»„é•¿åº¦ä¸º 0 æˆ– 1 çš„æƒ…å†µ å’Œ k > æ•°ç»„é•¿åº¦çš„æƒ…å†µ\n\n### è§£æ³•ä¸‰ï¼šä½¿ç”¨é¢å¤–çš„æ•°ç»„\n\né€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„æ¥å­˜å‚¨ç»“æœï¼Œä»è€Œå®ç°æ•°ç»„çš„è½®è½¬\n\nè¿™é‡Œä¸å±•ç¤ºä»£ç äº†\n\n## é”™è¯¯è®°å½•\n\n> [!danger]\n> è§£æ³•ä¸€ä¸­ï¼šÂ åœ¨ JavaScript ä¸­ï¼Œå½“æˆ‘ä»¬å°†ä¸€ä¸ª**æ•°ç»„**ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬ä¼ é€’çš„æ˜¯**æ•°ç»„çš„å¼•ç”¨**ã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œ`nums = [...part1, ...part2]`Â è¿™è¡Œä»£ç åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æ•°ç»„å¹¶å°†Â `nums`Â å˜é‡æŒ‡å‘è¿™ä¸ªæ–°æ•°ç»„ï¼Œä½†è¿™å¹¶ä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„çš„å†…å®¹ã€‚å‡½æ•°å¤–éƒ¨çš„åŸæ•°ç»„ä¿æŒä¸å˜\n\n","5d26ce9147625daa9b9201a510658ad3":"\n# æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²\n\n\n`#leetcode`   `#2024/08/05`  `#ç®—æ³•/æ»‘åŠ¨çª—å£`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png600|536](https://832-1310531898.cos.ap-beijing.myqcloud.com/202408050719710.png?imageSlim)\n\n> [!danger]\n>  è¿”å›çš„æ˜¯æœ€é•¿å­ä¸²çš„**é•¿åº¦**ï¼Œè€Œä¸æ˜¯æœ€é•¿æ— é‡å¤å­ä¸²æœ¬èº«\n\n## è§£é¢˜æ€è·¯\n\n**æ»‘åŠ¨çª—å£æ¡†æ¶**\n\n```javascript\n// æ»‘åŠ¨çª—å£ç®—æ³•ä¼ªç æ¡†æ¶\nvar slidingWindow = function(s) {\n    // ç”¨åˆé€‚çš„æ•°æ®ç»“æ„è®°å½•çª—å£ä¸­çš„æ•°æ®ï¼Œæ ¹æ®å…·ä½“åœºæ™¯å˜é€š\n    // æ¯”å¦‚è¯´ï¼Œæˆ‘æƒ³è®°å½•çª—å£ä¸­å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå°±ç”¨ map\n    // å¦‚æœæˆ‘æƒ³è®°å½•çª—å£ä¸­çš„å…ƒç´ å’Œï¼Œå°±å¯ä»¥åªç”¨ä¸€ä¸ª int\n    var window = ...;\n\n    // å·¦å³æŒ‡é’ˆï¼Œç”¨äºç§»åŠ¨çª—å£\n    var left = 0\n    let right = 0;\n    while (right < s.length) {\n        // c æ˜¯å°†ç§»å…¥çª—å£çš„å­—ç¬¦\n        var c = s[right];\n        window.add(c);\n        // å¢å¤§çª—å£\n        right++;\n        // è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–°\n        // ...\n        // *** debug è¾“å‡ºçš„ä½ç½® ***\n        // æ³¨æ„åœ¨æœ€ç»ˆçš„è§£æ³•ä»£ç ä¸­ä¸è¦ print\n        // å› ä¸º IO æ“ä½œå¾ˆè€—æ—¶ï¼Œå¯èƒ½å¯¼è‡´è¶…æ—¶\n        console.log(left, right);\n        // *********************\n\n        // åˆ¤æ–­å·¦ä¾§çª—å£æ˜¯å¦è¦æ”¶ç¼©\n        while (window needs shrink) {\n            // d æ˜¯å°†ç§»å‡ºçª—å£çš„å­—ç¬¦\n            var d = s[left];\n            window.remove(d);\n            // ç¼©å°çª—å£\n            left++;\n            // è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–°\n            ...\n        }\n    }\n};\n\n```\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {string} s\n * @return {number}\n */\nvar lengthOfLongestSubstring = function (s) {\n  let left = 0;\n  let right = 0;\n  // æœ€é•¿å­ä¸²çš„é•¿åº¦\n  let res = 0;\n\n  // æ»‘åŠ¨çª—å£, ç”¨æ¥è®°å½•çª—å£ä¸­çš„å­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼Œkeyä¸ºå­—ç¬¦ï¼Œvalueä¸ºå­—ç¬¦å‡ºç°çš„æ¬¡æ•°\n  // å½“å­—ç¬¦å‡ºç°çš„æ¬¡æ•°å¤§äº1æ—¶ï¼Œè¯´æ˜é‡å¤äº†ï¼Œéœ€è¦æ”¶ç¼©çª—å£ï¼Œå³ left++\n  // å½“å­—ç¬¦å‡ºç°çš„æ¬¡æ•°ç­‰äº1æ—¶ï¼Œè¯´æ˜æ²¡æœ‰é‡å¤ï¼Œå¯ä»¥æ‰©å¤§çª—å£ï¼Œå³ right++\n  let win = new Map();\n\n  while (right < s.length) {\n    let c = s[right];\n    right++;\n    // è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–°, ä¾‹å¦‚å¢åŠ å­—ç¬¦çš„æ¬¡æ•°\n    win.set(c, (win.get(c) || 0) + 1);\n\n    // åˆ¤æ–­å·¦ä¾§çª—å£æ˜¯å¦éœ€è¦æ”¶ç¼©\n    // å½“å­—ç¬¦çš„æ•°é‡å¤§äº1æ—¶, è¯´æ˜é‡å¤äº†, éœ€è¦æ”¶ç¼©\n    while (win.get(c) > 1) {\n      let d = s[left];\n      left++;\n      // è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–°, ä¾‹å¦‚å‡å°‘å­—ç¬¦çš„æ¬¡æ•°\n      win.set(d, win.get(d) - 1);\n    }\n    // åœ¨è¿™é‡Œæ›´æ–°ç­”æ¡ˆ\n    res = Math.max(res, right - left);\n  }\n\n  return res;\n};\n\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`\n\t- å…¶ä¸­ `n` æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦\n\t- åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œå·¦å³æŒ‡é’ˆå„éå†æ•´ä¸ªå­—ç¬¦ä¸²ä¸€æ¬¡ã€‚\n-  ç©ºé—´å¤æ‚åº¦ï¼š`O(min(m, n))`\n\t- å…¶ä¸­ `m` æ˜¯**å­—ç¬¦é›†çš„å¤§å°**\n\t- `n` æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦\n\n","4370d3f6f1695753b9b5a253fa9e353e":"\n# æœ€è¿‘çš„è¯·æ±‚æ¬¡æ•°\n\n`#2024/07/28` `#ç®—æ³•/åˆ—é˜Ÿ` \n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407280800350.png?imageSlim)\n\n## è§£é¢˜æ€è·¯\n\nä½¿ç”¨åˆ—é˜Ÿï¼š\n1. **åˆå§‹åŒ–é˜Ÿåˆ—**ï¼š\n    - ä½¿ç”¨ä¸€ä¸ª`é˜Ÿåˆ—`æ¥å­˜å‚¨æ‰€æœ‰è¯·æ±‚çš„æ—¶é—´ã€‚\n2. **å¤„ç†æ¯ä¸ªÂ `ping(t)`Â è¯·æ±‚**ï¼š\n    - å°†æ—¶é—´Â `t`Â å…¥é˜Ÿã€‚\n    - éå†ï¼šä»é˜Ÿåˆ—çš„å‰é¢ï¼ˆå³æœ€è€çš„è¯·æ±‚ï¼‰å¼€å§‹æ£€æŸ¥ï¼Œå¦‚æœæœ‰è¯·æ±‚å·²ç»ä¸åœ¨Â `[t-3000, t]`Â è¿™ä¸ªæ—¶é—´èŒƒå›´ï¼Œç§»é™¤å®ƒä»¬ã€‚\n    - è¿”å›é˜Ÿåˆ—çš„é•¿åº¦ã€‚\n\n## ä»£ç å®ç°\n\n```javascript\nvar RecentCounter = function () {\n  // ä½¿ç”¨é˜Ÿåˆ—æ¥å­˜å‚¨pingçš„æ—¶é—´\n  this.q = [];\n};\n\n/**\n * @description:åœ¨æ—¶é—´t æ—¶ pingäº†ä¸€ä¸‹\n * @param {number} t\n * @return {number}\n */\nRecentCounter.prototype.ping = function (t) {\n  // æŠŠå½“å‰çš„ t å…¥é˜Ÿ\n  this.q.push(t);\n  // å¦‚æœé˜Ÿå¤´å°äº t - 3000ï¼Œå°±åˆ é™¤é˜Ÿå¤´ï¼Œå³åªä¿ç•™ 3000 æ¯«ç§’å†…çš„è¯·æ±‚\n  while (this.q[0] < t - 3000) {\n    // t æ˜¯é€’å¢çš„ï¼Œæ‰€ä»¥å¯ä»¥ä»é˜Ÿå¤´åˆ é™¤ 3000 æ¯«ç§’ä¹‹å‰çš„è¯·æ±‚\n    this.q.shift();\n  }\n  // è¿”å›é˜Ÿåˆ—çš„é•¿åº¦\n  return this.q.length;\n};\n\n```\n\n### å¤æ‚åº¦åˆ†æ\n\n- **æ—¶é—´å¤æ‚åº¦**ï¼š\n    - æ¯ä¸ªè¯·æ±‚æœ€å¤šåªæ‰§è¡Œä¸€æ¬¡å…¥é˜Ÿå’Œä¸€æ¬¡å‡ºé˜Ÿæ“ä½œï¼Œå› æ­¤å¯¹äºæ¯ä¸ªÂ `ping`è¯·æ±‚ï¼Œå…¶æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯Â `O(1)`ã€‚\n    - ç»¼ä¸Šï¼Œå¤„ç†Â `n`Â ä¸ªÂ `ping`Â è¯·æ±‚çš„æ€»æ—¶é—´å¤æ‚åº¦æ˜¯Â `O(n)`ã€‚\n- **ç©ºé—´å¤æ‚åº¦**ï¼š\n    - é˜Ÿåˆ—åœ¨æœ€åæƒ…å†µä¸‹éœ€è¦å­˜å‚¨æ‰€æœ‰åœ¨æ—¶é—´èŒƒå›´Â `[t-3000, t]`Â å†…çš„è¯·æ±‚ã€‚å› æ­¤ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯Â `O(n)`ï¼Œå…¶ä¸­Â `n`Â æ˜¯æœ€å¤§åŒæ—¶å­˜åœ¨çš„è¯·æ±‚æ•°ï¼ˆç†è®ºä¸Šå¯çœ‹ä¸ºæ‰€æœ‰è¯·æ±‚æ•°ï¼‰\n\n## é”™è¯¯è®°å½•\n\n> [!danger]\n>  æ¯æ¬¡å…¥é˜Ÿåï¼Œè¿˜éœ€è¦ while éå†ä¸€éä¿è¯æ¯ä¸ªå…ƒç´ éƒ½åœ¨ `3000ms` å†…","5fd9e924a4f95671b190ad034fc30f42":"\n# ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº\n\n\n`#leetcode`   `#2024/08/09`  `#ç®—æ³•/è‚¡ç¥¨` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/iShot_2024-08-09_07.54.28 1.png)\n\n> [!danger]\n> æ³¨æ„ï¼š**åªèƒ½ä¹°å–ä¸€æ¬¡**\n\n## è§£é¢˜æ€è·¯\n\n### æ€è·¯ä¸€\n\n```javascript\n/**  \n * @description è§£é¢˜æ€è·¯  \n * â‘  base case: å¦‚æœ prices ä¸ºç©ºï¼Œè¿”å› 0  \n * â‘¡ åˆå§‹åŒ–ä¹°å…¥ä»·æ ¼ buy ä¸º prices[0]ï¼Œåˆå§‹åŒ–åˆ©æ¶¦ profit ä¸º 0  \n * â‘¢ éå† prices  \n *    1ã€å¦‚æœå½“å‰ä»·æ ¼æ¯”ä¹°å…¥ä»·æ ¼ä½ï¼Œå°±æ›´æ–°ä¹°å…¥ä»·æ ¼  \n *    2ã€å¦åˆ™ï¼Œæ›´æ–°åˆ©æ¶¦  \n * â‘£ è¿”å›åˆ©æ¶¦  \n *     \n * */\n```\n\n#### ä»£ç å®ç°\n\n```javascript\nvar maxProfit = function(prices) {  \n    // base case  \n    if (prices.length === 0) {  \n        return 0;  \n    }  \n    // ä¹°å…¥ä»·æ ¼  \n    let buy = prices[0];  \n    // åˆ©æ¶¦  \n    let profit = 0;  \n    // éå†  \n    for (let i = 1; i < prices.length; i++) {  \n        // å¦‚æœå½“å‰ä»·æ ¼æ¯”ä¹°å…¥ä»·æ ¼ä½ï¼Œå°±æ›´æ–°ä¹°å…¥ä»·æ ¼  \n        if (prices[i] < buy) {  \n            buy = prices[i];  \n        } else {  \n            // å¦åˆ™ï¼Œè®¡ç®—åˆ©æ¶¦  \n            profit = Math.max(profit, prices[i] - buy);  \n        }  \n    }  \n    return profit;  \n};\n```\n\n#### å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯ä»·æ ¼æ•°ç»„çš„é•¿åº¦ï¼Œå› ä¸ºæˆ‘ä»¬åªéå†äº†æ•°ç»„ä¸€æ¬¡ã€‚\n- ç©ºé—´å¤æ‚åº¦æ˜¯ `O(1)`ï¼Œå› ä¸ºæˆ‘ä»¬åªä½¿ç”¨äº†`ä¸¤ä¸ªé¢å¤–`çš„å˜é‡ï¼Œä¸ç®¡è¾“å…¥è§„æ¨¡å¦‚ä½•ï¼Œé¢å¤–ç©ºé—´éƒ½æ˜¯å¸¸æ•°çº§çš„\n\n### æ€è·¯äºŒ\n\nä¹°å–è‚¡ç¥¨é€šç”¨æ¡†æ¶ï¼Œè§åæ–‡**è‚¡ç¥¨ç±»å‹**çš„é¢˜ç›®\n\n## é”™è¯¯è®°å½•\n\n","943f15ea863554339b819fb4c9ba9878":"\n# æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯\n\n\n`#leetcode`   `#2024/08/10`  `#ç®—æ³•/æ»‘åŠ¨çª—å£` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240810142206.png)\n\nå…³äº å¼‚ä½è¯ï¼Œå†ä¸¾å‡ ä¸ªä¾‹å­\n1. \"listen\" å’Œ \"silent\" æ˜¯å¼‚ä½è¯ã€‚ å®ƒä»¬åŒ…å«ç›¸åŒçš„å­—æ¯ï¼Œæ¯ä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•°ä¹Ÿç›¸åŒã€‚\n2. \"debit card\" å’Œ \"bad credit\" æ˜¯å¼‚ä½è¯ã€‚ å¿½ç•¥ç©ºæ ¼åï¼Œå®ƒä»¬åŒ…å«ç›¸åŒçš„å­—æ¯é›†åˆï¼Œä¸”æ¯ä¸ªå­—æ¯çš„å‡ºç°æ¬¡æ•°ç›¸åŒã€‚\n3. \"aab\" å’Œ \"baa\" æ˜¯å¼‚ä½è¯ã€‚ æ³¨æ„è¿™é‡Œ **'a' é‡å¤å‡ºç°äº†ä¸¤æ¬¡ï¼Œ'b' å‡ºç°äº†ä¸€æ¬¡**ï¼Œä¸¤ä¸ªè¯ä¸­å­—æ¯å‡ºç°çš„æ¬¡æ•°æ˜¯ç›¸åŒçš„ã€‚\n4. \"egg\" å’Œ \"geg\" æ˜¯å¼‚ä½è¯ã€‚ è¿™é‡Œ 'g' é‡å¤å‡ºç°ã€‚\n5. \"aaabbb\" å’Œ \"ababab\" æ˜¯å¼‚ä½è¯ã€‚ å°½ç®¡æ’åˆ—ä¸åŒï¼Œä½† 'a' å’Œ 'b' éƒ½å„å‡ºç°äº†ä¸‰æ¬¡ã€‚\n\n> [!danger]\n>  æ‰€ä»¥è¦éå†æ‰€ä»¥å­—æ¯ï¼Œçœ‹æ¯ä¸ªå­—æ¯å‡ºç°äº†å‡ æ¬¡\n>  \n## è§£é¢˜æ€è·¯\n\n### æ€è·¯ä¸€ï¼šæ»‘åŠ¨çª—å£\n\n```javascript\nint left = 0, right = 0;\n\nwhile (right < nums.size()) {\n    // å¢å¤§çª—å£\n    window.addLast(nums[right]);\n    right++;\n    \n    while (window needs shrink) {\n        // ç¼©å°çª—å£\n        window.removeFirst(nums[left]);\n        left++;\n    }\n}\n```\n\nä½¿ç”¨ JavaScript è¯­è¨€æè¿°\n\n```javascript\n\n// æ»‘åŠ¨çª—å£ç®—æ³•ä¼ªç æ¡†æ¶\nvar slidingWindow = function(s) {\n    // ç”¨åˆé€‚çš„æ•°æ®ç»“æ„è®°å½•çª—å£ä¸­çš„æ•°æ®ï¼Œæ ¹æ®å…·ä½“åœºæ™¯å˜é€š\n    // æ¯”å¦‚è¯´ï¼Œæˆ‘æƒ³è®°å½•çª—å£ä¸­å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå°±ç”¨ map\n    // å¦‚æœæˆ‘æƒ³è®°å½•çª—å£ä¸­çš„å…ƒç´ å’Œï¼Œå°±å¯ä»¥åªç”¨ä¸€ä¸ª int\n    var window = ...;\n\n    var left = 0, right = 0;\n    while (right < s.length) {\n        // c æ˜¯å°†ç§»å…¥çª—å£çš„å­—ç¬¦\n        var c = s[right];\n        window.add(c);\n        // å¢å¤§çª—å£\n        right++;\n        // è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–°\n        ...\n\n        // *** debug è¾“å‡ºçš„ä½ç½® ***\n        // æ³¨æ„åœ¨æœ€ç»ˆçš„è§£æ³•ä»£ç ä¸­ä¸è¦ print\n        // å› ä¸º IO æ“ä½œå¾ˆè€—æ—¶ï¼Œå¯èƒ½å¯¼è‡´è¶…æ—¶\n        console.log(\"window: [%d, %d)\\n\", left, right);\n        // *********************\n\n        // åˆ¤æ–­å·¦ä¾§çª—å£æ˜¯å¦è¦æ”¶ç¼©\n        while (window needs shrink) {\n            // d æ˜¯å°†ç§»å‡ºçª—å£çš„å­—ç¬¦\n            var d = s[left];\n            window.remove(d);\n            // ç¼©å°çª—å£\n            left++;\n            // è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–°\n            ...\n        }\n    }\n};\n```\n\n *  å…ˆå®šä¹‰ `need` å’Œ `win` ä¸¤ä¸ª Map\n\t * ç”¨äºè®°å½•ç›®æ ‡å­—ç¬¦ä¸² p ä¸­å­—ç¬¦å‡ºç°çš„æ¬¡æ•°\n\t * çª—å£ä¸­å­—ç¬¦å‡ºç°çš„æ¬¡æ•°\n * å®šä¹‰ æŒ‡é’ˆ `left = 0` å’Œ `right = 0` \n *  éå†å­—ç¬¦ä¸² sï¼Œå…ˆç§»åŠ¨å³æŒ‡é’ˆ\n\t *  å½“çª—å£ä¸­çš„å­—ç¬¦æ»¡è¶³æ¡ä»¶æ—¶ï¼Œå¼€å§‹ç§»åŠ¨å·¦æŒ‡é’ˆ\n\t *  å½“çª—å£ä¸­çš„å­—ç¬¦ä¸æ»¡è¶³æ¡ä»¶æ—¶ï¼Œç»§ç»­ç§»åŠ¨å³æŒ‡é’ˆ\n\t *  å½“çª—å£ä¸­çš„å­—ç¬¦æ»¡è¶³æ¡ä»¶æ—¶ï¼Œå¼€å§‹ç§»åŠ¨å·¦æŒ‡é’ˆ\n\t\t * æ¯æ¬¡ç§»åŠ¨éƒ½éœ€è¦æ›´æ–° `need` å’Œ `win` ä¸¤ä¸ª `map`\n\n#### ä»£ç å®ç°\n\n```javascript\n/**\n * @description: 438. æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯\n *  â‘  å…ˆå®šä¹‰ need å’Œ win ä¸¤ä¸ª Mapï¼Œç”¨äºè®°å½•ç›®æ ‡å­—ç¬¦ä¸² p ä¸­å­—ç¬¦å‡ºç°çš„æ¬¡æ•°å’Œçª—å£ä¸­å­—ç¬¦å‡ºç°çš„æ¬¡æ•°\n *  â‘¡ éå†å­—ç¬¦ä¸² sï¼Œå…ˆç§»åŠ¨å³æŒ‡é’ˆï¼Œå½“çª—å£ä¸­çš„å­—ç¬¦æ»¡è¶³æ¡ä»¶æ—¶ï¼Œå¼€å§‹ç§»åŠ¨å·¦æŒ‡é’ˆ\n *  â‘¢ å½“çª—å£ä¸­çš„å­—ç¬¦ä¸æ»¡è¶³æ¡ä»¶æ—¶ï¼Œç»§ç»­ç§»åŠ¨å³æŒ‡é’ˆ\n *  â‘£ å½“çª—å£ä¸­çš„å­—ç¬¦æ»¡è¶³æ¡ä»¶æ—¶ï¼Œå¼€å§‹ç§»åŠ¨å·¦æŒ‡é’ˆ\n * @param {string} s\n * @param {string} p\n * @return {number[]}\n */\nvar findAnagrams = function (s, p) {\n  // ç”¨äºå­˜æ”¾ç»“æœ\n  const res = [];\n\n  // è®°å½•ã€çª—å£ã€‘ä¸­çš„å­—ç¬¦å‡ºç°çš„æ¬¡æ•°\n  const win = new Map();\n  // è®°å½• p ä¸­æ‰€æœ‰å­—ç¬¦å‡ºç°çš„æ¬¡æ•°\n  const need = new Map();\n\n  // çœ‹æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°\n  for (let c of p) {\n    need.set(c, (need.get(c) || 0) + 1);\n  }\n\n  let left = 0;\n  let right = 0;\n\n  // è®°å½•çª—å£ä¸­å·²ç»åŒ¹é…çš„å­—ç¬¦ä¸ªæ•°\n  // å¦‚æœ valid å’Œ need.size çš„å¤§å°ç›¸åŒï¼Œåˆ™è¯´æ˜çª—å£å·²æ»¡è¶³æ¡ä»¶ï¼Œå·²ç»å®Œå…¨åŒ¹é…\n  let valid = 0;\n\n  // éå†å­—ç¬¦ä¸²ï¼Œå…ˆç§»åŠ¨å³æŒ‡é’ˆï¼Œå½“çª—å£å†…çš„å­—ç¬¦ç¬¦åˆè¦æ±‚æ—¶ï¼Œå†ç§»åŠ¨å·¦æŒ‡é’ˆ\n  while (right < s.length) {\n    let c = s[right];\n    right++;\n    // è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–°\n    // åˆ¤æ–­å³ä¾§çª—å£æ˜¯å¦è¦æ‰©å¤§ï¼Œneed ä¸­æ˜¯å¦æœ‰è¿™ä¸ªå­—ç¬¦, æœ‰çš„è¯å°±åŠ å…¥çª—å£\n    if (need.has(c)) {\n      // æ›´æ–°çª—å£å†…æ•°æ®ï¼Œæ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°\n      win.set(c, (win.get(c) || 0) + 1);\n      // åˆ¤æ–­çª—å£å†…çš„å­—ç¬¦å‡ºç°çš„æ¬¡æ•°æ˜¯å¦ç¬¦åˆè¦æ±‚\n      // è¿™ä¸ªæ—¶å€™ valid ç”¨æ¥è®°å½•ç¬¦åˆè¦æ±‚çš„å­—ç¬¦ä¸ªæ•°\n      if (win.get(c) === need.get(c)) {\n        valid++;\n      }\n    }\n\n    // åˆ¤æ–­å·¦ä¾§çª—å£æ˜¯å¦è¦æ”¶ç¼©\n    // å½“çª—å£å¤§å°å¤§äº p çš„é•¿åº¦æ—¶ï¼Œå°±è¦æ”¶ç¼©\n    while (right - left >= p.length) {\n      // å½“çª—å£ç¬¦åˆæ¡ä»¶æ—¶ï¼ŒæŠŠèµ·å§‹ç´¢å¼• left åŠ å…¥ç»“æœ\n      if (valid === need.size) {\n        res.push(left);\n      }\n      // d æ˜¯å°†ç§»å‡ºçª—å£çš„å­—ç¬¦\n      let d = s[left];\n      left++;\n      // å¦‚æœ d æ˜¯éœ€è¦çš„å­—ç¬¦ï¼Œè¿™ä¸ªæ—¶å€™å°±è¦æ›´æ–°çª—å£ï¼Œå› ä¸ºè¦ç§»å‡ºçª—å£äº†\n      // valid ç”¨æ¥è®°å½•ç¬¦åˆè¦æ±‚çš„å­—ç¬¦ä¸ªæ•°\n      // å¦‚æœ d çš„æ¬¡æ•°å’Œ need ä¸­çš„æ¬¡æ•°ç›¸åŒï¼Œè¯´æ˜ç¬¦åˆè¦æ±‚çš„å­—ç¬¦ä¸ªæ•°è¦å‡å°‘äº†\n      if (need.has(d)) {\n        if (win.get(d) === need.get(d)) {\n          valid--;\n        }\n        win.set(d, win.get(d) - 1);\n      }\n    }\n  }\n\n  return res;\n};\n\n```\n\n#### å¤æ‚åº¦åˆ†æ\n\nè¿™ä¸ªç®—æ³•çš„å¤æ‚åº¦åˆ†æå¦‚ä¸‹ï¼š\n\n- æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`\n\t- n æ˜¯å­—ç¬¦ä¸² s çš„é•¿åº¦ã€‚\n\t- ä¸»å¾ªç¯éå†å­—ç¬¦ä¸² s ä¸€æ¬¡ï¼Œright æŒ‡é’ˆä» 0 ç§»åŠ¨åˆ° n-1ï¼Œè¿™éœ€è¦ O(n) æ—¶é—´ã€‚\n\t\t- **å†…éƒ¨çš„ while å¾ªç¯çœ‹ä¼¼å¯èƒ½å¯¼è‡´äºŒæ¬¡å¾ªç¯**\n\t\t\t- ä½†å®é™…ä¸Š left æŒ‡é’ˆæœ€å¤šä¹Ÿåªä¼šä» 0 ç§»åŠ¨åˆ° n-1ï¼Œæ‰€ä»¥æ€»çš„ç§»åŠ¨æ¬¡æ•°ä¸ä¼šè¶…è¿‡ nã€‚\n\t\t\t- æŒ‡é’ˆÂ `left, right`Â ä¸ä¼šå›é€€ï¼ˆå®ƒä»¬çš„å€¼åªå¢ä¸å‡ï¼‰\n\t- Map çš„æ“ä½œï¼ˆget, set, hasï¼‰åœ¨å¹³å‡æƒ…å†µä¸‹æ˜¯ O(1) çš„ã€‚\n\t- å› æ­¤ï¼Œæ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚\nç©ºé—´å¤æ‚åº¦ï¼š`O(K)`\n- **K æ˜¯å­—ç¬¦é›†çš„å¤§å°**ã€‚åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œé€šå¸¸æ˜¯å›ºå®šçš„ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœåªè€ƒè™‘å°å†™å­—æ¯ï¼Œ**K = 26**ï¼‰ã€‚\n- win å’Œ need è¿™ä¸¤ä¸ª Map çš„å¤§å°ä¸ä¼šè¶…è¿‡å­—ç¬¦é›†çš„å¤§å°ã€‚\n- res æ•°ç»„çš„å¤§å°æœ€åæƒ…å†µä¸‹å¯èƒ½æ¥è¿‘ nï¼Œä½†é€šå¸¸ä¼šè¿œå°äº nã€‚\n- å…¶ä»–å˜é‡ï¼ˆleft, right, validï¼‰å ç”¨å¸¸æ•°ç©ºé—´ã€‚\n- å› æ­¤ï¼Œæ€»çš„ç©ºé—´å¤æ‚åº¦æ˜¯ O(K)ï¼Œå…¶ä¸­ K æ˜¯å¸¸æ•°ã€‚\n\n","66d2d12475fc5bd0af1911361439025b":"\n# Dota2 å‚è®®é™¢\n\n\n`#2024/07/28` `#leetcode`  `#ç®—æ³•/åˆ—é˜Ÿ` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png600](https://832-1310531898.cos.ap-beijing.myqcloud.com/202407281543283.png?imageSlim)\n\n### æ›´é€šä¿—çš„è§£é‡Š\n\nä½ å¯ä»¥æŠŠè¿™é¢˜æƒ³è±¡æˆä¸€ä¸ª`â€œæ·˜æ±°èµ›â€`çš„è¿‡ç¨‹ã€‚æ¯ä¸ªå‚è®®å‘˜åœ¨â€œå‘è¨€â€åå¯ä»¥è®©å¯¹æ–¹é˜µè¥ä¸­çš„ä¸€ä¸ªäºº`é—­å˜´`ï¼ˆæ— æ³•å†å‘è¨€ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸€ç›´æŒç»­ï¼Œç›´åˆ°æŸä¸€é˜µè¥çš„æ‰€æœ‰äººéƒ½è¢«å…³é—­ï¼Œå¦å¤–ä¸€é˜µè¥è·èƒœã€‚\n\n#### é¢˜ç›®ä¸­çš„â€œå‚è®®é™¢â€\n\n- **è¾“å…¥**ï¼šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»£è¡¨æ‰€æœ‰å‚è®®å‘˜çš„`åˆå§‹é¡ºåº`ã€‚\n- **è¾“å‡º**ï¼šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»£è¡¨`æœ€ç»ˆè·èƒœçš„é˜µè¥`ã€‚\n    **ä¸¾ä¾‹**ï¼š\n    - è¾“å…¥ï¼š`\"RDD\"`\n    - è¾“å‡ºï¼š\"D\"ï¼ˆå¤œé­‡é˜µè¥è·èƒœï¼‰\n        - å› ä¸º R å…ˆè®©\n\n## è§£é¢˜æ€è·¯\n\nä¸ºäº†ç®€åŒ–å¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨é˜Ÿåˆ—æ¥æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ï¼š\n1. **åˆå§‹åŒ–**ï¼š\n    - ç”¨`ä¸¤ä¸ªé˜Ÿåˆ—`åˆ†åˆ«å­˜å‚¨å¤©è¾‰å‚è®®å‘˜å’Œå¤œé­‡å‚è®®å‘˜çš„`ç´¢å¼•ä½ç½®`ã€‚\n2. **æ¨¡æ‹ŸæŠ•ç¥¨è¿‡ç¨‹**ï¼š\n    - æ¯”è¾ƒ`ä¸¤ä¸ªé˜Ÿåˆ—å¤´éƒ¨çš„ç´¢å¼•`ï¼ŒæŠ•ç¥¨æ¬¡åºå–å†³äºå°çš„ç´¢å¼•å€¼ã€‚\n    - è¢«â€œç¦è¨€â€çš„å‚è®®å‘˜çš„ç´¢å¼•éœ€è¦è¢«ç§»é™¤ã€‚\n    - å¹¶ä¸”è¢«ç§»åŠ¨çš„å‚è®®å‘˜è¦è¢«æ”¾åˆ°æ–°ä½ç½®ä¸Šï¼ˆå‡è®¾æŠ•ç¥¨ç»“æŸçš„å‚è®®å‘˜å¯ä»¥é‡æ–°æ’é˜Ÿï¼‰ã€‚\n3. **åˆ¤æ–­èƒœåˆ©**ï¼š\n    - `é˜Ÿåˆ—ä¸ºç©ºçš„ä¸€æ–¹`å³ä¸º`å¤±è´¥æ–¹`\n    - `ä¸€ä¸ªé˜Ÿåˆ—ä¸­çš„å‚è®®å‘˜`å³ä¸º`èƒœåˆ©æ–¹`\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {string} senate\n * @return {string}\n */\nvar predictPartyVictory = function (senate) {\n  // â‘  å®šä¹‰ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œåˆ†åˆ«å­˜å‚¨ R å’Œ D çš„ç´¢å¼•\n  const radiant = [];\n  const dire = [];\n\n  // â‘¡ éå†å­—ç¬¦ä¸²ï¼Œå°† R å’Œ D çš„ç´¢å¼•åˆ†åˆ«å…¥é˜Ÿ\n  for (let i = 0; i < senate.length; i++) {\n    if (senate[i] === \"R\") {\n      radiant.push(i);\n    } else {\n      dire.push(i);\n    }\n  }\n\n  // â‘¢ æ¨¡æ‹ŸæŠ•ç¥¨è¿‡ç¨‹\n  while (radiant.length > 0 && dire.length > 0) {\n    // åˆ†åˆ«å–å‡º R å’Œ D çš„ç´¢å¼•\n    let rIndex = radiant.shift();\n    let dIndex = dire.shift();\n\n    // æ¯”è¾ƒç´¢å¼•å†³å®šè°å…ˆæŠ•ç¥¨ï¼Œå¦‚æœradiantå…ˆæŠ•ç¥¨åˆ™direè¢«ç¦è¨€ï¼Œåä¹‹äº¦ç„¶\n    if (rIndex < dIndex) {\n      //  è¿™ä¸ª R å…¶å®å¯ä»¥ç»§ç»­å‚åŠ ï¼Œæ‰€ä»¥æŠŠä»–æ”¾åˆ°æœ€åï¼Œæ‰èƒ½å¾ªç¯å‚ä¸æŠ•ç¥¨ã€‚\n      //  æ¯ä¸ªå‚è®®å‘˜åœ¨æŠ•ç¥¨åå¹¶ä¸æ˜¯é€€å‡ºæ¸¸æˆï¼Œè€Œæ˜¯è¦å›åˆ°é˜Ÿåˆ—æœ«å°¾ï¼Œç­‰å¾…ä¸‹ä¸€è½®æŠ•ç¥¨æœºä¼š\n      //  `rIndex` æ˜¯å½“å‰å‚è®®å‘˜åœ¨åŸå§‹å­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ä½ç½®ã€‚\n      //  `rIndex + senate.length` æ˜¯ä¸ºäº†ç¡®ä¿è¿™ä¸ªå‚è®®å‘˜åœ¨ä¸‹ä¸€è½®æŠ•ç¥¨æ—¶,ä»ç„¶ä¿æŒæ­£ç¡®çš„ç›¸å¯¹é¡ºåºã€‚\n      radiant.push(rIndex + senate.length); // é‡æ–°æ’é˜Ÿï¼Œä»¥ç¡®ä¿é¡ºåºå¾ªç¯è¿›è¡Œ\n    } else {\n      dire.push(dIndex + senate.length); // é‡æ–°æ’é˜Ÿï¼Œä»¥ç¡®ä¿é¡ºåºå¾ªç¯è¿›è¡Œ\n    }\n  }\n\n  // â‘£ è¿”å›ç»“æœ: å¦‚æœ R çš„é˜Ÿåˆ—é•¿åº¦å¤§äº 0ï¼Œåˆ™è¿”å› Radiantï¼Œå¦åˆ™è¿”å› Dire\n  return radiant.length > 0 ? \"Radiant\" : \"Dire\";\n};\n\n```\n\næ¯ä¸ªå‚è®®å‘˜åœ¨æŠ•ç¥¨åå¹¶ä¸æ˜¯é€€å‡ºæ¸¸æˆï¼Œè€Œæ˜¯è¦å›åˆ°é˜Ÿåˆ—æœ«å°¾ï¼Œç­‰å¾…ä¸‹ä¸€è½®æŠ•ç¥¨æœºä¼šã€‚\n\n### ä¸ºä»€ä¹ˆè¦åŠ ä¸Š senate.length\n\nå‡è®¾æœ‰å­—ç¬¦ä¸² `\"RDDR\"`ï¼Œé•¿åº¦ä¸º `4` \n\nåˆå§‹çŠ¶æ€:\n\n```javascript\nradiant = `[0, 3]`  // Råœ¨ä½ç½®0å’Œ3\ndire = `[1, 2]`     // Dåœ¨ä½ç½®1å’Œ2\n```\n\nç¬¬ä¸€è½®æŠ•ç¥¨å:\n- `R(0)` æŠ•ç¥¨å¹¶ç¦è¨€ `D(1)`\n- æˆ‘ä»¬éœ€è¦æŠŠ `R(0)` æ”¾å›é˜Ÿåˆ—æœ«å°¾\n\t- å¦‚æœç›´æ¥ `push(0)`ï¼Œå˜æˆ `radiant = [3, 0]`\n\t- è¿™æ ·å°±æ‰“ä¹±äº†åŸæœ‰é¡ºåºã€‚æ­£ç¡®çš„åº”è¯¥æ˜¯ï¼š`radiant = [3, 4]`  å…¶ä¸­ `4 = 0 + 4(å­—ç¬¦ä¸²é•¿åº¦)` è¿™æ ·å°±ç»´æŒäº†ç›¸å¯¹é¡ºåº\n\né€šè¿‡åŠ ä¸Šå­—ç¬¦ä¸²é•¿åº¦,æˆ‘ä»¬ä¿è¯äº†:\n- æ–°åŠ å…¥çš„å…ƒç´ æ€»æ˜¯å¤§äºå½“å‰é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å…ƒç´ \n- åŒæ—¶ä¿æŒäº†å‚è®®å‘˜ä¹‹é—´çš„ç›¸å¯¹é¡ºåºä¸å˜\n\n### å¤æ‚åº¦åˆ†æ\n\n- **æ—¶é—´å¤æ‚åº¦**ï¼š\n    - åˆå§‹åŒ–é˜Ÿåˆ—éœ€è¦Â `O(n)`Â æ—¶é—´ï¼Œæ¯ä¸ªå­—ç¬¦å…¥é˜Ÿå’Œå‡ºé˜Ÿçš„æ“ä½œå‡ä¸ºÂ `O(1)`ï¼Œæ•´ä½“æ—¶é—´å¤æ‚åº¦ä¸ºÂ `O(n)`ã€‚\n- **ç©ºé—´å¤æ‚åº¦**ï¼š\n    - é˜Ÿåˆ—å­˜å‚¨æ‰€æœ‰å‚è®®å‘˜çš„ç´¢å¼•ï¼Œå› æ­¤éœ€è¦Â `O(n)`Â çš„ç©ºé—´ã€‚\n\n## é”™è¯¯è®°å½•","98cd20de6fea5e36a8f48090376074e1":"\n# å’Œä¸º K çš„å­æ•°ç»„\n\n\n`#leetcode`   `#2024/08/10`  `#ç®—æ³•/å‰ç¼€å’Œ` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240810145638.png)\n\n> [!danger]\n>  **è¿”å›çš„æ˜¯å’Œä½ k çš„å­æ•°ç»„çš„ä¸ªæ•°ï¼Œè€Œä¸æ˜¯æŸä¸ªå­æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ï¼ˆé•¿åº¦ï¼‰**\n\n## è§£é¢˜æ€è·¯\n\n### æ€è·¯ä¸€\n\nå…³é”®æ€æƒ³ï¼š\n- é€šè¿‡**å‰ç¼€å’Œ**ï¼Œæˆ‘ä»¬å°†\"å¯»æ‰¾å’Œä¸º k çš„å­æ•°ç»„\"è½¬åŒ–ä¸º\"å¯»æ‰¾ä¸¤ä¸ªå‰ç¼€å’Œä¹‹å·®ä¸º k\"ã€‚\n- ä½¿ç”¨**å“ˆå¸Œè¡¨**å­˜å‚¨å‰ç¼€å’Œçš„å‡ºç°æ¬¡æ•°ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨ O(1) æ—¶é—´å†…æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„å‰ç¼€å’Œã€‚\n\nä¸‹é¢æ˜¯è¯¦ç»†ä»‹ç»ï¼š\n\n- é€šè¿‡**å‰ç¼€å’Œ**ï¼Œæˆ‘ä»¬å°† \"**å¯»æ‰¾å’Œä¸º k çš„å­æ•°ç»„**\"  è½¬åŒ–ä¸º \"**å¯»æ‰¾ä¸¤ä¸ªå‰ç¼€å’Œä¹‹å·®ä¸º k**\"\n\t- å³ éå†ä¸€éæ•°ç»„ï¼Œè®¡ç®—å‰ç¼€å’Œçš„æ—¶å€™ï¼Œéšä¾¿çœ‹çœ‹å·²ç»éå†ç”Ÿæˆçš„å‰ç¼€å’Œä¸­ï¼Œæ˜¯å¦å­˜åœ¨ä¸¤ä¸ªå‰ç¼€å’Œä¹‹å·®ä¸º `k`\n- å¯»æ‰¾ä¸¤ä¸ªå‰ç¼€å’Œä¹‹å·®ä¸º kï¼Œä¸ºäº†æ–¹ä¾¿æŸ¥æ‰¾\n\t- ä½¿ç”¨**å“ˆå¸Œ**\n \n#### ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} nums\n * @param {number} k\n * @return {number}\n */\nvar subarraySum = function (nums, k) {\n  // å‰ç¼€å’Œ,æ³¨æ„å‰ç¼€å’Œçš„é•¿åº¦æ˜¯ nums.length + 1\n  // preSum[i] è¡¨ç¤º nums[0] åˆ° nums[i - 1] çš„å’Œ\n  const preSum = new Array(nums.length + 1).fill(0);\n  // è¿”å›å€¼\n  let res = 0;\n  // countMap å­˜å‚¨æ¯ä¸ªå‰ç¼€å’Œå‡ºç°çš„æ¬¡æ•°\n  const countMap = new Map();\n  // å‰ç¼€å’Œ çš„ç¬¬ä¸€ä¸ªå…ƒç´  0 å‡ºç°äº†ä¸€æ¬¡\n  countMap.set(0, 1);\n\n  // è¾¹éå†ï¼Œè¾¹è®¡ç®—å‰ç¼€å’Œ\n  for (let i = 1; i <= nums.length; i++) {\n    // è®¡ç®—å‰ç¼€å’Œ\n    preSum[i] = preSum[i - 1] + nums[i - 1];\n    \n    //******** ç„¶åçœ‹çœ‹ï¼šæ˜¯å¦å­˜åœ¨ä¸¤ä¸ªå‰ç¼€å’Œä¹‹å·®ä¸º k ********\n    \n    // å¦‚æœ preSum[i] - k åœ¨ countMap ä¸­\n    // è¯´æ˜å­˜åœ¨ preSum[j] = preSum[i] - k å³ nums[j] åˆ° nums[i-1] çš„å’Œä¸º k\n    const target = preSum[i] - k;\n    // å‰ç¼€å’Œä¸­æœ‰ target\n    if (countMap.has(target)) {\n      res += countMap.get(target);\n    }\n    // æ›´æ–° countMap\n    countMap.set(preSum[i], (countMap.get(preSum[i]) || 0) + 1);\n  }\n\n  return res;\n};\n\n```\n\n#### å¤æ‚åº¦åˆ†æ\n\nå½“ç„¶ï¼Œæˆ‘å¾ˆä¹æ„ä¸ºä½ åˆ†æè¿™ä¸ªç®—æ³•çš„å¤æ‚åº¦ã€‚\n\n- æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`\n\t- ä¸»å¾ªç¯ï¼š\n\t   - ç®—æ³•åªæœ‰ä¸€ä¸ªä¸»å¾ªç¯ï¼Œéå†æ•´ä¸ªæ•°ç»„ä¸€æ¬¡ã€‚\n\t   - å¾ªç¯æ¬¡æ•°ä¸º n+1ï¼ˆå…¶ä¸­ n æ˜¯æ•°ç»„ nums çš„é•¿åº¦ï¼‰ã€‚\n\t- å¾ªç¯å†…çš„æ“ä½œï¼š\n\t   - å‰ç¼€å’Œè®¡ç®—ï¼šO(1)\n\t   - å“ˆå¸Œè¡¨æŸ¥æ‰¾ï¼ˆcountMap.has å’Œ countMap.getï¼‰ï¼šå¹³å‡ O(1)\n\t   - å“ˆå¸Œè¡¨æ›´æ–°ï¼ˆcountMap.setï¼‰ï¼šå¹³å‡ O(1)\n\t- æ€»ä½“ï¼š\n\t   - ç”±äºå¾ªç¯æ‰§è¡Œ n+1 æ¬¡ï¼Œæ¯æ¬¡å¾ªç¯å†…çš„æ“ä½œéƒ½æ˜¯ O(1)ï¼Œå› æ­¤æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼š`O(n)`\n\t- å‰ç¼€å’Œæ•°ç»„ preSumï¼š\n\t   - å¤§å°ä¸º n+1ï¼Œå ç”¨ O(n) ç©ºé—´ã€‚\n\t- å“ˆå¸Œè¡¨ countMapï¼š\n\t   - åœ¨æœ€åæƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦å­˜å‚¨æ‰€æœ‰ä¸åŒçš„å‰ç¼€å’Œã€‚\n\t   - ç†è®ºä¸Šæœ€å¤šå¯èƒ½æœ‰ n+1 ä¸ªä¸åŒçš„å‰ç¼€å’Œã€‚\n\t   - å› æ­¤ï¼ŒcountMap å ç”¨ O(n) ç©ºé—´ã€‚\n\t- å…¶ä»–å˜é‡ï¼ˆres, target ç­‰ï¼‰ï¼š\n\t   - å ç”¨å¸¸æ•°ç©ºé—´ï¼ŒO(1)ã€‚\n\t- æ€»ä½“ï¼š\n\t   - ç©ºé—´å¤æ‚åº¦ä¸»è¦ç”± `preSum æ•°ç»„` å’Œ `countMap` å†³å®šï¼Œå› æ­¤ä¸º `O(n)`\n\n## é”™è¯¯è®°å½•\n\néå†æ—¶ï¼Œéœ€è¦éå† `n+1` ï¼Œå³ `i<=nums.length` ï¼Œå¦‚ä¸‹ï¼š\n\n```javascript\nfor (let i = 1; i <= nums.length; i++) {\n```\n\n","077ba6439f1e5390a25da76d7123e8ef":"\n# ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II\n\n\n`#leetcode`   `#2024/08/09`  `#ç®—æ³•/è‚¡ç¥¨`   `#ç®—æ³•/è´ªå¿ƒç®—æ³•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n### åªèƒ½ä¹°å–ä¸€æ¬¡çš„åœºæ™¯\n\nå‰æ–‡ [12. ç®—æ³•/3. åˆ·é¢˜ç¯‡/3. LeetCode ç»å…¸ 150 é¢˜/7.  ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº|7.  ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº](/post/077ba6439f1e5390a25da76d7123e8ef.html#12-ç®—æ³•/3-åˆ·é¢˜ç¯‡/3-LeetCode-ç»å…¸-150-é¢˜/7--ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº|7--ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº) æœ‰è®²åªèƒ½ä¹°å–ä¸€æ¬¡çš„åœºæ™¯ï¼Œå¦‚æœèƒ½å¤Ÿä¹°å–å¤šæ¬¡å‘¢ï¼Ÿ\n\n### èƒ½å¤Ÿä¹°å–å¤šæ¬¡çš„åœºæ™¯ï¼šæœ¬é¢˜\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240809084132.png)\n\n> ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚\n\n## è§£é¢˜æ€è·¯\n\n### æ€è·¯ä¸€ï¼šè´ªå¿ƒç®—æ³•\n\n**è´ªå¿ƒç®—æ³•** \n\n- æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š**åªè¦ä»Šå¤©çš„ä»·æ ¼æ¯”æ˜¨å¤©é«˜ï¼Œæˆ‘ä»¬å°±è¿›è¡Œä¹°å–**\n- ä»»ä½•ä¸Šæ¶¨çš„åŒºé—´åˆ†è§£æˆè‹¥å¹²ä¸ª**ç›¸é‚»ä¸¤å¤©çš„å°åŒºé—´**\n\t- `Day 1: 10 ï¼Œ Day 2: 15  ï¼Œ Day 3: 20`\n\t\t- æˆ‘ä»¬å¯ä»¥çœ‹ä½œæ˜¯ï¼š (20 - 10) = (15 - 10) + (20 - 15)\n\n#### ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} prices\n * @return {number}\n */\nvar maxProfit = function (prices) {\n  // æœ€å¤§åˆ©æ¶¦\n  let res = 0;\n\n  // éå† prices\n  for (let i = 0; i < prices.length - 1; i++) {\n    // å¦‚æœå½“å‰ä»·æ ¼æ¯”åä¸€å¤©çš„ä»·æ ¼ä½ï¼Œå°±ä¹°å…¥ï¼Œç„¶åå–å‡º\n    if (prices[i] < prices[i + 1]) {\n      res += prices[i + 1] - prices[i];\n    }\n  }\n\n  // è¿”å›æœ€å¤§åˆ©æ¶¦\n  return res;\n};\n\n```\n\n#### å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`ï¼Œå…¶ä¸­ n æ˜¯ä»·æ ¼æ•°ç»„çš„é•¿åº¦ï¼Œå› ä¸ºæˆ‘ä»¬åªéå†äº†æ•°ç»„ä¸€æ¬¡ã€‚ \n- ç©ºé—´å¤æ‚åº¦æ˜¯ `O(1)`ï¼Œå› ä¸ºæˆ‘ä»¬åªä½¿ç”¨äº†ä¸€ä¸ªé¢å¤–çš„å˜é‡æ¥å­˜å‚¨åˆ©æ¶¦ã€‚\n\n### æ€è·¯äºŒï¼šåŠ¨æ€è§„åˆ’\n\nå¯å‚è€ƒ [12. ç®—æ³•/3. åˆ·é¢˜ç¯‡/4. labuladong ç®—æ³•åˆ·é¢˜/1.  ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV|1.  ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV](/post/077ba6439f1e5390a25da76d7123e8ef.html#12-ç®—æ³•/3-åˆ·é¢˜ç¯‡/4-labuladong-ç®—æ³•åˆ·é¢˜/1--ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-IV|1--ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-IV) ï¼Œè¿™é‡Œä¸å±•å¼€ï¼Œæ­¤é¢˜è¿˜æ˜¯å»ºè®®ä½¿ç”¨è´ªå¿ƒç®—æ³•æ¯”è¾ƒåˆé€‚\n\n## é”™è¯¯è®°å½•\n\n","9a7b4275744b5fd2b39d2c9f31e67fa7":"\n# é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯\n\n`#leetcode`  `#2024/07/28`  `#ç®—æ³•/å‰ç¼€å’Œ`  `#ç®—æ³•/å‰ç¼€ç§¯` \n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n> [!danger]\n> ä¸Šé¢æˆªå›¾æœ‰é”™åˆ«å­—ï¼Œ**é™¤è‡ªå·±ä»¥å¤–çš„å…ƒç´ çš„ä¹˜ç§¯ /  è‡ªå·±**\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/065e86225fe756d152dd30d51cee831b.png)\n\n## è§£é¢˜æ€è·¯\n\n- æ„é€ ä¸€ä¸ª `prefix` æ•°ç»„è®°å½•`ã€Œå‰ç¼€ç§¯ã€`\n- å†ç”¨ä¸€ä¸ª `suffix` è®°å½• **ã€Œåç¼€ç§¯ã€**\n- `å½“å‰å…ƒç´ ä¹‹å¤–å…¶ä»–å…ƒç´ çš„ç§¯` = `å½“å‰å…ƒç´ çš„å‰ç¼€ç§¯` * `å½“å‰å…ƒç´ çš„åç¼€ç§¯`\n\n> ä¸èƒ½å…ˆæ‰€æœ‰æ•°çš„ä¹˜ç§¯ï¼ˆå‡å¦‚ä¸º` sum`ï¼‰ï¼Œç„¶åéå†æ¯ä¸ªå…ƒç´ è®¡ç®— `sum/item` ï¼Œä¸è¡Œï¼Œè§ä¸‹é¢é”™è¯¯è®°å½•\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} nums\n * @return {number[]}\n */\nvar productExceptSelf = function (nums) {\n  // å‰ç¼€ç§¯\n  const prefix = new Array(nums.length).fill(1);\n  // åç¼€ç§¯\n  const suffix = new Array(nums.length).fill(1);\n\n  // åˆå§‹åŒ–å‰ç¼€ç§¯\n  for (let i = 1; i < nums.length; i++) {\n    prefix[i] = prefix[i - 1] * nums[i - 1];\n  }\n\n  // åˆå§‹åŒ–åç¼€ç§¯\n  for (let i = nums.length - 2; i >= 0; i--) {\n    suffix[i] = suffix[i + 1] * nums[i + 1];\n  }\n\n  // ç»“æœ\n  const result = [];\n  // éå†æ•°ç»„ï¼Œè®¡ç®—ç»“æœï¼Œå³å‰ç¼€ç§¯ * åç¼€ç§¯\n  for (let i = 0; i < nums.length; i++) {\n    result.push(prefix[i] * suffix[i]);\n  }\n  return result;\n};\n\n```\n\n### ç©ºé—´å¤æ‚åº¦å†å‹ç¼©ï¼Ÿ\n\néå†çš„æ—¶å€™å†åŠ¨æ€æ›´æ–°`result` ï¼Œå¦‚ä¸‹\n\n```javascript\n/**  \n * @param {number[]} nums  \n * @return {number[]}  \n */  \nvar productExceptSelf = function (nums) {  \n  const length = nums.length;  \n  const result = new Array(length).fill(1);  \n\n  // è®¡ç®—å‰ç¼€ç§¯å¹¶å­˜å‚¨åœ¨ç»“æœæ•°ç»„ä¸­  \n  let prefixProduct = 1;  \n  for (let i = 0; i < length; i++) {  \n    result[i] = prefixProduct;  \n    prefixProduct *= nums[i];  \n  }  \n\n  // è®¡ç®—åç¼€ç§¯å¹¶æ›´æ–°ç»“æœæ•°ç»„  \n  let suffixProduct = 1;  \n  for (let i = length - 1; i >= 0; i--) {  \n    result[i] *= suffixProduct;  \n    suffixProduct *= nums[i];  \n  }  \n\n  return result;  \n};\n```\n\n## é”™è¯¯è®°å½•\n\n```javascript\n/**\n * @param {number[]} nums\n * @return {number[]}\n */\nvar productExceptSelf = function (nums) {\n  const sum = nums.reduce((acc, cur) => acc * cur, 1);\n  return nums.map((num) => sum / num);\n};\n\n```\n\n","580e7623de9a5442a3da8afda1fb36fd":"\n# æ»‘åŠ¨çª—å£æœ€å¤§å€¼\n\n\n`#leetcode`   `#2024/08/11`  `#ç®—æ³•/å•è°ƒåˆ—é˜Ÿ`   `#ç®—æ³•/æ»‘åŠ¨çª—å£` \n\n![å›¾ç‰‡&æ–‡ä»¶](./files/1.å•è°ƒåˆ—é˜Ÿç®—æ³•#4.ç¤ºä¾‹ï¼šæ»‘åŠ¨çª—å£æœ€å¤§å€¼)\n\n> è¯¦è§ [12. ç®—æ³•/2. ç®—æ³•ç¯‡/3. åŸºç¡€æ•°æ®ç»“æ„ç®—æ³•ç¯‡/1. å•è°ƒåˆ—é˜Ÿç®—æ³•|1. å•è°ƒåˆ—é˜Ÿç®—æ³•](/post/580e7623de9a5442a3da8afda1fb36fd.html#12-ç®—æ³•/2-ç®—æ³•ç¯‡/3-åŸºç¡€æ•°æ®ç»“æ„ç®—æ³•ç¯‡/1-å•è°ƒåˆ—é˜Ÿç®—æ³•|1-å•è°ƒåˆ—é˜Ÿç®—æ³•)","703bad3c55c35542968bfd315cd9b1b8":"\n# è·³è·ƒæ¸¸æˆ\n\n\n`#leetcode`   `#2024/08/16`  `#ç®—æ³•/è´ªå¿ƒç®—æ³•`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n[https://leetcode.cn/problems/jump-game/](https://leetcode.cn/problems/jump-game/)\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240816081854.png)\n\n## è§£é¢˜æ€è·¯\n\n### æ€è·¯ä¸€ï¼šè´ªå¿ƒç®—æ³•\n\n1. è´ªå¿ƒç®—æ³•ï¼š æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è´ªå¿ƒç®—æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ ¸å¿ƒæ€æƒ³æ˜¯ç»´æŠ¤ä¸€ä¸ªå˜é‡ `maxReach`ï¼Œè¡¨ç¤ºèƒ½å¤Ÿåˆ°è¾¾çš„**æœ€è¿œä½ç½®**ã€‚\n2. éå†æ•°ç»„ï¼š ä»å·¦åˆ°å³éå†æ•°ç»„ï¼Œå¯¹äºæ¯ä¸ªä½ç½®ï¼Œæˆ‘ä»¬æ›´æ–° `maxReach`ã€‚\n3. æ›´æ–° `maxReach`ï¼š å¯¹äºå½“å‰ä½ç½® iï¼Œæˆ‘ä»¬å¯ä»¥è·³åˆ°çš„æœ€è¿œä½ç½®æ˜¯ `i + nums[i]`\n\t- å› æ­¤ï¼Œ`maxReach` åº”è¯¥æ›´æ–°ä¸º `Math.max(maxReach, i + nums[i])` \n4. æ£€æŸ¥æ˜¯å¦å¯ä»¥ç»§ç»­ï¼š \n\t- å¦‚æœåœ¨æŸä¸ª`ä½ç½® i`ï¼Œ`maxReach` å°äºæˆ–ç­‰äº iï¼Œä¸” `i` è¿˜ä¸æ˜¯æœ€åä¸€ä¸ªä½ç½®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ— æ³•ç»§ç»­å‰è¿›ï¼Œè¿”å› falseã€‚\n5. åˆ°è¾¾ç»ˆç‚¹ï¼š å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿéå†å®Œæ•´ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åˆ°è¾¾æœ€åä¸€ä¸ªä½ç½®ï¼Œè¿”å› trueã€‚\n\n#### ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} nums\n * @return {boolean}\n */\nvar canJump = function (nums) {\n  // ä»£è¡¨å½“å‰èƒ½åˆ°è¾¾çš„æœ€è¿œä½ç½®\n  let maxReach = 0;\n\n  for (let i = 0; i < nums.length; i++) {\n    // å¦‚æœå½“å‰ä½ç½®å¤§äºæœ€è¿œä½ç½®ï¼Œè¯´æ˜æ— æ³•åˆ°è¾¾\n    // maxReach æ˜¯å½“å‰èƒ½åˆ°è¾¾çš„æœ€è¿œä½ç½®\n    // ä¾‹å¦‚ [3, 2, 1, 0, 4]ï¼Œå½“ i = 4 æ—¶ï¼ŒmaxReach = 3ï¼Œæ— æ³•åˆ°è¾¾\n    // ä¾‹å¦‚ [2, 3, 1, 1, 4]ï¼Œå½“ i = 4 æ—¶ï¼ŒmaxReach = 4ï¼Œå¯ä»¥åˆ°è¾¾\n    if (i > maxReach) {\n      return false;\n    }\n    // æ›´æ–°æœ€è¿œä½ç½®\n    // i + nums[i] ä»£è¡¨å½“å‰ä½ç½®èƒ½åˆ°è¾¾çš„æœ€è¿œä½ç½®,i æ˜¯å½“å‰ä½ç½®ï¼Œnums[i] æ˜¯å½“å‰ä½ç½®çš„å€¼\n    // question: ä¸ºä»€ä¹ˆè¦å–æœ€å¤§å€¼ï¼Ÿ\n    // answer: å› ä¸ºå½“å‰ä½ç½®çš„å€¼æ˜¯å½“å‰ä½ç½®èƒ½åˆ°è¾¾çš„æœ€è¿œä½ç½®ï¼Œæ‰€ä»¥è¦å–æœ€å¤§å€¼\n    maxReach = Math.max(maxReach, i + nums[i]);\n  }\n\n  // å¦‚æœæœ€è¿œä½ç½®å¤§äºç­‰äºæ•°ç»„é•¿åº¦ï¼Œè¯´æ˜å¯ä»¥åˆ°è¾¾\n  return true;\n};\n\n```\n\n#### å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œå› ä¸ºæˆ‘ä»¬åªéå†äº†ä¸€éæ•°ç»„ã€‚\n- ç©ºé—´å¤æ‚åº¦æ˜¯ `O(1)`ï¼Œå› ä¸ºæˆ‘ä»¬åªä½¿ç”¨äº†å¸¸æ•°é¢å¤–ç©ºé—´\n\n### æ€è·¯äºŒï¼šåŠ¨æ€è§„åˆ’\n\n#### ä»£ç å®ç°\n\n#### å¤æ‚åº¦åˆ†æ\n\n## é”™è¯¯è®°å½•\n","5ba4e306dfde5adcafe9768b4f8a9a35":"\n# é€’å¢çš„ä¸‰å…ƒå­åºåˆ—\n\n\n`#leetcode` `#2024/07/28`  `#ç®—æ³•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## é¢˜ç›®åŠç†è§£ \n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/13c6ebae35cee42b11c377759cf0b779.png)\n\n## è§£é¢˜æ€è·¯\n\n- ä¸¤ä¸ªå˜é‡ï¼š`ç¬¬ä¸€æœ€å¤§å€¼` å’Œ `ç¬¬äºŒæœ€å¤§å€¼`\n- éå†ï¼Œæ ¹æ®å½“å‰éå†çš„å…ƒç´ \n   - æ›´æ–°ç¬¬ä¸€æœ€å¤§å€¼\n   - æ›´æ–°ç¬¬äºŒæœ€å¤§å€¼ï¼Œä»–ä¸€å®šå°äºç¬¬ä¸€æœ€å¤§å€¼\n   - å¦åˆ™ï¼šå°äºç¬¬ä¸€æœ€å¤§å€¼ï¼Œä¹Ÿè®¸ä¸ç¬¬äºŒæœ€å¤§å€¼\n      - é‚£ä¹ˆ å½“å‰å€¼ã€ç¬¬äºŒæœ€å¤§å€¼ã€ç¬¬ä¸€æœ€å¤§å€¼ä¸å°±æ»¡è¶³é¢˜è®¾äº†å—ï¼Ÿ\n\n## ä»£ç å®ç°\n\n```javascript\n/**\n * @param {number[]} nums\n * @return {boolean}\n */\nvar increasingTriplet = function (nums) {\n  // base case\n  if (nums.length < 3) {\n    return false;\n  }\n\n  // å…ˆå®šä¹‰ä¸¤ä¸ªæœ€å¤§å€¼\n  // first ä¸ºç¬¬ä¸€ä¸ªæœ€å¤§å€¼\n  let first = Number.MAX_SAFE_INTEGER;\n  // second ä¸ºç¬¬äºŒä¸ªæœ€å¤§å€¼\n  let second = Number.MAX_SAFE_INTEGER;\n\n  // éå†æ•°ç»„\n  for (let i = 0; i < nums.length; i++) {\n    // â‘  å½“å½“å‰å…ƒç´ å°äºç¬¬ä¸€ä¸ªæœ€å¤§å€¼æ—¶ï¼Œç¡®ä¿ first æ˜¯éå†åˆ°å½“å‰å…ƒç´ ä¹‹å‰çš„æœ€å°å€¼\n    if (nums[i] <= first) {\n      // æ›´æ–°ç¬¬ä¸€ä¸ªæœ€å¤§å€¼\n      first = nums[i];\n      //â‘¡  ç”¨äºæ›´æ–°ç¬¬äºŒå°å€¼ secondï¼Œç¡®ä¿ second æ˜¯éå†åˆ°å½“å‰å…ƒç´ ä¹‹å‰çš„ç¬¬äºŒå°å€¼ï¼Œå¹¶ä¸”å¤§äº firstã€‚\n    } else if (nums[i] <= second) {\n      // å½“å½“å‰å…ƒç´ å°äºç¬¬äºŒä¸ªæœ€å¤§å€¼æ—¶\n      // æ›´æ–°ç¬¬äºŒä¸ªæœ€å¤§å€¼\n      second = nums[i];\n      //â‘¢ å¦åˆ™ï¼Œ å½“ num å¤§äº second æ—¶ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€ä¸ªé€’å¢çš„ä¸‰å…ƒç»„ï¼Œè¿”å› true\n    } else {\n      // å½“å½“å‰å…ƒç´ å¤§äºç¬¬äºŒä¸ªæœ€å¤§å€¼æ—¶\n      // è¿”å› true\n      return true;\n    }\n  }\n\n  return false;\n};\n\n```\n\n### æ³¨æ„ğŸ“¢\n\n>  å¦‚æœæ‰‹å†™ä¸å‡ºæ¥` Number.MAX_SAFE_INTEGER` å¯ä»¥å‚è€ƒä¸‹é¢å†™æ³•\n\n```javascript\nconst first =  Number.MAX_SAFE_INTEGER; \nconst first = Math.min() // è¿”å›æ— ç©·å¤§ Infinity \n\n\n// å…ˆå®šä¹‰ä¸¤ä¸ªæœ€å¤§å€¼\nlet first = 2**31 -1;\nlet second = 2**31 -1;\n```\n\n>  `const  first =  Number.MAX_SAFE_INTEGER;` \n>  `const first =  2^31 -1 ;`\n\n### å¤æ‚åº¦åˆ†æ\n\n## é”™è¯¯è®°å½•\n\n","6e1dd2716edb5d159a88ebb9c7b2931b":"\n# æœªå‘½å\n\n","df4743711d965511b921e51805fabd48":"\n# æ•°ç»„ä¸é“¾è¡¨\n\n`#2024/08/11` `#ç®—æ³•` `#æ•°æ®ç»“æ„` \n\n\n## ç›®å½•\n<!-- toc -->\n ## ç›®å½• \n\n- [1.  æ•°ç»„ï¼šPython æè¿°](/post/d64d83c1d19d542ca411b9a392b996d2.html)\n- [2. é“¾è¡¨ï¼šPython æè¿°](/post/66d4599a350d5057b13c8865c17eb473.html)\n- [3. åˆ—è¡¨ï¼šPython æè¿°](/post/c61e4462768955d18619defe15d9ba2b.html)\n- [4. æ•°ç»„é“¾è¡¨ä¸å†…å­˜ç¼“å­˜çš„å…³ç³»](/post/b355d1e3bf9c5533a96eb2dc57b01abf.html)\n\n## æ€»ç»“\n\n- æ•°ç»„å’Œé“¾è¡¨æ˜¯ä¸¤ç§åŸºæœ¬çš„æ•°æ®ç»“æ„ï¼Œåˆ†åˆ«ä»£è¡¨æ•°æ®åœ¨è®¡ç®—æœºå†…å­˜ä¸­çš„ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼šè¿ç»­ç©ºé—´å­˜å‚¨å’Œåˆ†æ•£ç©ºé—´å­˜å‚¨ã€‚ä¸¤è€…çš„ç‰¹ç‚¹å‘ˆç°å‡ºäº’è¡¥çš„ç‰¹æ€§ã€‚\n- æ•°ç»„æ”¯æŒéšæœºè®¿é—®ã€å ç”¨å†…å­˜è¾ƒå°‘ï¼›ä½†æ’å…¥å’Œåˆ é™¤å…ƒç´ æ•ˆç‡ä½ï¼Œä¸”åˆå§‹åŒ–åé•¿åº¦ä¸å¯å˜ã€‚\n- é“¾è¡¨é€šè¿‡æ›´æ”¹å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰å®ç°é«˜æ•ˆçš„èŠ‚ç‚¹æ’å…¥ä¸åˆ é™¤ï¼Œä¸”å¯ä»¥çµæ´»è°ƒæ•´é•¿åº¦ï¼›ä½†èŠ‚ç‚¹è®¿é—®æ•ˆç‡ä½ã€å ç”¨å†…å­˜è¾ƒå¤šã€‚å¸¸è§çš„é“¾è¡¨ç±»å‹åŒ…æ‹¬å•å‘é“¾è¡¨ã€ç¯å½¢é“¾è¡¨ã€åŒå‘é“¾è¡¨ã€‚\n- åˆ—è¡¨æ˜¯ä¸€ç§æ”¯æŒå¢åˆ æŸ¥æ”¹çš„å…ƒç´ æœ‰åºé›†åˆï¼Œé€šå¸¸åŸºäº**åŠ¨æ€æ•°ç»„**å®ç°ã€‚å®ƒä¿ç•™äº†æ•°ç»„çš„ä¼˜åŠ¿ï¼ŒåŒæ—¶å¯ä»¥çµæ´»è°ƒæ•´é•¿åº¦ã€‚\n- åˆ—è¡¨çš„å‡ºç°å¤§å¹…æé«˜äº†æ•°ç»„çš„å®ç”¨æ€§ï¼Œä½†å¯èƒ½å¯¼è‡´éƒ¨åˆ†å†…å­˜ç©ºé—´æµªè´¹ã€‚\n- **ç¨‹åºè¿è¡Œæ—¶ï¼Œæ•°æ®ä¸»è¦å­˜å‚¨åœ¨å†…å­˜ä¸­**ã€‚æ•°ç»„å¯æä¾›æ›´é«˜çš„å†…å­˜ç©ºé—´æ•ˆç‡ï¼Œè€Œé“¾è¡¨åˆ™åœ¨å†…å­˜ä½¿ç”¨ä¸Šæ›´åŠ çµæ´»ã€‚\n- ç¼“å­˜é€šè¿‡ç¼“å­˜è¡Œã€é¢„å–æœºåˆ¶ä»¥åŠç©ºé—´å±€éƒ¨æ€§å’Œæ—¶é—´å±€éƒ¨æ€§ç­‰æ•°æ®åŠ è½½æœºåˆ¶ï¼Œä¸º CPU æä¾›å¿«é€Ÿæ•°æ®è®¿é—®ï¼Œæ˜¾è‘—æå‡ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚\n- ç”±äºæ•°ç»„å…·æœ‰æ›´é«˜çš„ç¼“å­˜å‘½ä¸­ç‡ï¼Œå› æ­¤å®ƒé€šå¸¸æ¯”é“¾è¡¨æ›´é«˜æ•ˆã€‚åœ¨é€‰æ‹©æ•°æ®ç»“æ„æ—¶ï¼Œåº”æ ¹æ®å…·ä½“éœ€æ±‚å’Œåœºæ™¯åšå‡ºæ°å½“é€‰æ‹©ã€‚\n\n\n## æ³¨æ„ç‚¹\n\n- python ä¸­çš„æ•°å­—ä¹Ÿè¢«åŒ…è£…ä¸ºå¯¹è±¡ï¼ŒåŒ jsï¼Œæ‰€ä»¥å­˜å‚¨çš„æ˜¯ä»–çš„å¼•ç”¨\n- åˆ—è¡¨æœ«å°¾æ·»åŠ å…ƒç´ æ—¶ï¼Œå¦‚æœæ¶‰åŠåˆ°æ•°æ®æ¬è¿ï¼Œé‚£ä¹ˆå¤æ‚åº¦å°±æ˜¯ O(n) è€Œä¸æ˜¯ O(1)\n- æ•°ç»„å­˜å‚¨åœ¨**æ ˆ**ä¸Šå’Œå­˜å‚¨åœ¨**å †**ä¸Šï¼Œå¯¹æ—¶é—´æ•ˆç‡å’Œç©ºé—´æ•ˆç‡æ˜¯å¦æœ‰å½±å“ï¼Ÿ\n\t- å­˜å‚¨åœ¨æ ˆä¸Šå’Œå †ä¸Šçš„æ•°ç»„éƒ½è¢«å­˜å‚¨åœ¨è¿ç»­å†…å­˜ç©ºé—´å†…ï¼Œæ•°æ®æ“ä½œæ•ˆç‡åŸºæœ¬ä¸€è‡´ã€‚ç„¶è€Œï¼Œæ ˆå’Œå †å…·æœ‰å„è‡ªçš„ç‰¹ç‚¹ï¼Œä»è€Œå¯¼è‡´ä»¥ä¸‹ä¸åŒç‚¹ã€‚\n\t\t1. åˆ†é…å’Œé‡Šæ”¾æ•ˆç‡ï¼š\n\t\t\t1. æ ˆæ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ï¼Œåˆ†é…ç”±ç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆï¼›\n\t\t\t2. è€Œå †å†…å­˜ç›¸å¯¹æ›´å¤§ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­åŠ¨æ€åˆ†é…ï¼Œæ›´å®¹æ˜“ç¢ç‰‡åŒ–ã€‚å› æ­¤ï¼Œå †ä¸Šçš„åˆ†é…å’Œé‡Šæ”¾æ“ä½œé€šå¸¸æ¯”æ ˆä¸Šçš„æ…¢ã€‚\n\t\t2. å¤§å°é™åˆ¶ï¼šæ ˆå†…å­˜ç›¸å¯¹è¾ƒå°ï¼Œå †çš„å¤§å°ä¸€èˆ¬å—é™äºå¯ç”¨å†…å­˜ã€‚å› æ­¤å †æ›´åŠ é€‚åˆå­˜å‚¨å¤§å‹æ•°ç»„ã€‚\n\t\t3. çµæ´»æ€§ï¼šæ ˆä¸Šçš„æ•°ç»„çš„å¤§å°éœ€è¦åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œè€Œå †ä¸Šçš„æ•°ç»„çš„å¤§å°å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€ç¡®å®šã€‚\n\n## ä¸»è¦å‚è€ƒ\n\n- ã€Šhelloï¼Œç®—æ³•ã€‹\n- ã€Šlabuladong ç®—æ³•ç¬”è®°ã€‹","d64d83c1d19d542ca411b9a392b996d2":"\n# æ•°ç»„ï¼šPython æè¿°\n\n`#æ•°æ®ç»“æ„/æ•°ç»„` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åˆå§‹åŒ–æ•°ç»„ \n\n```python\n##########################################################\n### åˆå§‹åŒ–æ•°ç»„\n##########################################################\n# [0] * 5 ä»£è¡¨ç”Ÿæˆä¸€ä¸ªé•¿åº¦ä¸º 5 çš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ 0\n# list[int] ä»£è¡¨æ•°ç»„çš„å…ƒç´ ç±»å‹æ˜¯ int\narr: list[int] = [0] * 5  # [ 0, 0, 0, 0, 0 ]\n\n# åˆå§‹åŒ–æ•°ç»„\nnums: list[int] = [1, 3, 2, 5, 4]\n```\n\n## 2. é™æ€æ•°ç»„å’ŒåŠ¨æ€æ•°ç»„\n\n- é™æ€æ•°ç»„ï¼š\n\t- åœ¨åˆ›å»ºçš„æ—¶å€™å°±è¦ç¡®å®šæ•°ç»„çš„å…ƒç´ ç±»å‹å’Œå…ƒç´ æ•°é‡\n\t- åªæœ‰åœ¨ C++ã€Javaã€Golang è¿™ç±»è¯­è¨€ä¸­æ‰æä¾›äº†åˆ›å»ºé™æ€æ•°ç»„çš„æ–¹å¼ï¼Œ\n- åŠ¨æ€æ•°ç»„ï¼š\n\t- åŠ¨æ€æ•°ç»„åº•å±‚è¿˜æ˜¯é™æ€æ•°ç»„ï¼Œåªæ˜¯**è‡ªåŠ¨å¸®æˆ‘ä»¬è¿›è¡Œæ•°ç»„ç©ºé—´çš„æ‰©ç¼©å®¹**ï¼Œå¹¶æŠŠå¢åˆ æŸ¥æ”¹æ“ä½œè¿›è¡Œäº†å°è£…ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨èµ·æ¥æ›´æ–¹ä¾¿è€Œå·²\n\t\t- ä¸ºä»€ä¹ˆè¦è‡ªåŠ¨**ç¼©å®¹**\n\t\t\t- ä¸ºäº†é¿å…èµ„æºæµªè´¹ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥é€‚å½“ç¼©å°å­˜å‚¨ç©ºé—´ï¼Œè¿™å°±æ˜¯ç¼©å®¹\n\t\t- **æ‰©ç¼©å®¹çš„ç­–ç•¥**ï¼š\n\t\t\t- å½“æ•°ç»„å…ƒç´ ä¸ªæ•°è¾¾åˆ°åº•å±‚é™æ€æ•°ç»„çš„å®¹é‡ä¸Šé™æ—¶ï¼Œæ‰©å®¹ä¸ºåŸæ¥çš„ 2 å€ï¼›\n\t\t\t- å½“æ•°ç»„å…ƒç´ ä¸ªæ•°ç¼©å‡åˆ°åº•å±‚é™æ€æ•°ç»„çš„å®¹é‡çš„ 1/4 æ—¶ï¼Œç¼©å®¹ä¸ºåŸæ¥çš„ 1/2ã€‚\n\t- ç±»ä¼¼ Pythonã€JavaScript è¿™ç±»è¯­è¨€å¹¶æ²¡æœ‰æä¾›é™æ€æ•°ç»„çš„å®šä¹‰æ–¹å¼\n\n\n## 3. é™æ€æ•°ç»„çš„å¢åˆ æ”¹æŸ¥\n\næ•°æ®ç»“æ„çš„èŒè´£å°±æ˜¯**å¢åˆ æŸ¥æ”¹**ï¼Œä¸‹é¢åˆ†åˆ«å±•å¼€è¯´\n### 3.1. è®¿é—®å…ƒç´ \n\n**ç´¢å¼•æœ¬è´¨ä¸Šæ˜¯å†…å­˜åœ°å€çš„åç§»é‡**ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240919074324.png)\n\n#### 3.1.1. å¯ä»¥ä»¥ O(1) æ—¶é—´å¤æ‚åº¦è®¿é—®æ•°ç»„å…ƒç´ \n\n```python\nimport random\n\n##########################################################\n### ä»¥ O(1) æ—¶é—´å¤æ‚åº¦è®¿é—®æ•°ç»„å…ƒç´ \n##########################################################\n# ä»¥ O(1) æ—¶é—´å¤æ‚åº¦è®¿é—®æ•°ç»„å…ƒç´ \n\ndef random_access(nums: list[int]) -> int:\n    random_index: int = random.randint(0, len(nums) - 1)\n    return nums[random_index]\n\n# æµ‹è¯•\nnums = [1, 2, 3, 4, 5]\nprint(random_access(nums))  # éšæœºè¾“å‡º nums ä¸­çš„ä¸€ä¸ªå…ƒç´ \n\n```\n\n\n### 3.2. æ’å…¥å…ƒç´ \n\néœ€è¦å°†è¯¥å…ƒç´ ä¹‹åçš„æ‰€æœ‰å…ƒç´ éƒ½å‘åç§»åŠ¨ä¸€ä½ï¼Œä¹‹åå†æŠŠå…ƒç´ èµ‹å€¼ç»™è¯¥ç´¢å¼•ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240919074702.png)\n\n#### 3.2.1. ä»¥ `O(n)` æ—¶é—´å¤æ‚åº¦æ’å…¥å…ƒç´ \n\n```python\n##########################################################\n### ä»¥ O(n) æ—¶é—´å¤æ‚åº¦æ’å…¥å…ƒç´ \n##########################################################\n\n# ä»¥ O(n) æ—¶é—´å¤æ‚åº¦æ’å…¥å…ƒç´ \ndef insert(arr:list[int], num:int, index:int):\n    \"\"\"å°† num æ’å…¥åˆ° arr çš„ index ä½ç½®\"\"\"\n    # æ¯ä¸ªå…ƒç´ å‘åç§»åŠ¨ä¸€ä½\n    for i in range(len(arr)-1, index, -1):\n        arr[i] = arr[i-1]\n    # å°† num æ’å…¥åˆ° index ä½ç½®\n    arr[index] = num\n```\n#### 3.2.2. range å‡½æ•°è¯¦è§£\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240919075539.png)\n\n\n### 3.3. åˆ é™¤å…ƒç´ \n\næƒ³åˆ é™¤ç´¢å¼•Â `i`Â å¤„çš„å…ƒç´ ï¼Œåˆ™éœ€è¦æŠŠç´¢å¼•Â `i`Â ä¹‹åçš„å…ƒç´ éƒ½å‘å‰ç§»åŠ¨ä¸€ä½ï¼Œå¦‚ä¸‹å›¾\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240919075947.png)\n\n\n#### 3.3.1. ä»¥ O(n) æ—¶é—´å¤æ‚åº¦åˆ é™¤å…ƒç´ \n\n```python\n##########################################################\n### ä»¥ O(n) æ—¶é—´å¤æ‚åº¦åˆ é™¤å…ƒç´ \n##########################################################\n\ndef remove(nums:list[int],index:int):\n    # æŠŠç´¢å¼• index ä¹‹åçš„å…ƒç´ å‘å‰ç§»åŠ¨ä¸€ä¸ªä½ç½®\n    for i in range(index,len(nums)-1):\n        nums[i] = nums[i+1]\n\n```\n### 3.4. æ•°ç»„çš„æ’å…¥ä¸åˆ é™¤æ“ä½œçš„ç¼ºç‚¹\n\næ€»çš„æ¥çœ‹ï¼Œæ•°ç»„çš„æ’å…¥ä¸åˆ é™¤æ“ä½œæœ‰ä»¥ä¸‹ç¼ºç‚¹ã€‚\n- **æ—¶é—´å¤æ‚åº¦é«˜**ï¼šæ•°ç»„çš„æ’å…¥å’Œåˆ é™¤çš„å¹³å‡æ—¶é—´å¤æ‚åº¦å‡ä¸ºÂ O(n)Â ï¼Œå…¶ä¸­Â nÂ ä¸ºæ•°ç»„é•¿åº¦ã€‚\n- **ä¸¢å¤±å…ƒç´ **ï¼šç”±äº**æ•°ç»„çš„é•¿åº¦ä¸å¯å˜**ï¼Œå› æ­¤åœ¨æ’å…¥å…ƒç´ åï¼Œè¶…å‡ºæ•°ç»„é•¿åº¦èŒƒå›´çš„å…ƒç´ ä¼šä¸¢å¤±ã€‚\n- **å†…å­˜æµªè´¹**ï¼šæˆ‘ä»¬å¯ä»¥åˆå§‹åŒ–ä¸€ä¸ªæ¯”è¾ƒé•¿çš„æ•°ç»„ï¼Œåªç”¨å‰é¢ä¸€éƒ¨åˆ†ï¼Œè¿™æ ·åœ¨æ’å…¥æ•°æ®æ—¶ï¼Œä¸¢å¤±çš„æœ«å°¾å…ƒç´ éƒ½æ˜¯â€œæ— æ„ä¹‰â€çš„ï¼Œä½†è¿™æ ·åšä¼šé€ æˆéƒ¨åˆ†å†…å­˜ç©ºé—´æµªè´¹ã€‚\n\n### 3.5. éå†æ•°ç»„çš„ä¸‰ç§æ–¹å¼\n\n```python\n##########################################################\n### éå†æ•°ç»„çš„ä¸‰ç§æ–¹å¼\n##########################################################\n\ndef traverse(arr):\n    # â‘  ç›´æ¥éå†æ•°ç»„\n    for i in arr:\n        print(i)\n    # â‘¡ ä½¿ç”¨ range é€šè¿‡æ‰€ä»¥éå†æ•°ç»„\n    for i in range(len(arr)):\n        print(arr[i])\n    # â‘¢ ä½¿ç”¨ enumerate éå†æ•°ç»„\n    for i, v in enumerate(arr):\n        print(i, v)\n\n```\n\n### 3.6. æŸ¥æ‰¾å…ƒç´ \n\n```python\n##########################################################\n### æŸ¥æ‰¾å…ƒç´ ï¼Œå¤æ‚åº¦O(n)  \n##########################################################\n\ndef find(nums:list[int],target:int)->int:\n    for i in range(len(nums)):\n        if nums[i]==target:\n            return i\n    return -1\n\n```\n\n### 3.7. æ€»ç»“\n\nç»¼ä¸Šï¼Œé™æ€æ•°ç»„çš„å¢åˆ æŸ¥æ”¹æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯ï¼š\n- å¢ï¼š\n    - åœ¨æœ«å°¾è¿½åŠ å…ƒç´ ï¼š`O(1)`ã€‚\n    - åœ¨ä¸­é—´ï¼ˆéæœ«å°¾ï¼‰æ’å…¥å…ƒç´ ï¼š`O(N)`ã€‚\n- åˆ ï¼š\n    - åˆ é™¤æœ«å°¾å…ƒç´ ï¼š`O(1)`ã€‚\n    - åˆ é™¤ä¸­é—´ï¼ˆéæœ«å°¾ï¼‰å…ƒç´ ï¼š`O(N)`ã€‚\n- æŸ¥ï¼šç»™å®šæŒ‡å®šç´¢å¼•ï¼ŒæŸ¥è¯¢ç´¢å¼•å¯¹åº”çš„å…ƒç´ çš„å€¼ï¼Œæ—¶é—´å¤æ‚åº¦Â `O(1)`ã€‚\n- æ”¹ï¼šç»™å®šæŒ‡å®šç´¢å¼•ï¼Œä¿®æ”¹ç´¢å¼•å¯¹åº”çš„å…ƒç´ çš„å€¼ï¼Œæ—¶é—´å¤æ‚åº¦Â `O(1)`ã€‚\n\n## 4. æ‰©å®¹æ•°ç»„ï¼Œå¤æ‚åº¦O(n) \n\n```python\n##########################################################\n### æ‰©å®¹æ•°ç»„ï¼Œå¤æ‚åº¦O(n)                                ###\n##########################################################\n\n# å¦‚æœæ•°ç»„é•¿åº¦å°äºsizeï¼Œå°±åœ¨æ•°ç»„åé¢è¡¥0\ndef expandArray(arr, size):\n    if len(arr) < size:\n        # è¿™ä¸ªå†™æ³•ç‰›é€¼å•Š\n        arr += [0] * (size - len(arr))\n    return arr\n\n# æ‰©å®¹æ•°ç»„ï¼Œenlargeä¸ºæ‰©å®¹çš„ä¸ªæ•°\ndef expand(nums:list[int],enlarge:int) -> list[int]:\n    # åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œé•¿åº¦ä¸ºåŸæ•°ç»„é•¿åº¦åŠ ä¸Šenlarge\n    res = [0] * (len(nums) + enlarge)\n    # å°†åŸæ•°ç»„çš„å…ƒç´ å¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­\n    for i in range(len(nums)):\n        res[i] = nums[i]\n    # è¿”å›æ–°æ•°ç»„\n    return res\n```\n\nä¸ºä»€ä¹ˆè¦æ‰©å®¹ï¼šåœ¨å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œ**æ•°ç»„çš„é•¿åº¦æ˜¯ä¸å¯å˜çš„**\n\n\n## 5. æ•°ç»„çš„ä¼˜ç‚¹ä¸å±€é™æ€§\n\n\n- **ç©ºé—´æ•ˆç‡é«˜**ï¼šæ•°ç»„ä¸ºæ•°æ®åˆ†é…äº†è¿ç»­çš„å†…å­˜å—ï¼Œæ— é¡»é¢å¤–çš„ç»“æ„å¼€é”€ã€‚\n- **æ”¯æŒéšæœºè®¿é—®**ï¼šæ•°ç»„å…è®¸åœ¨Â `O(1)`Â æ—¶é—´å†…è®¿é—®ä»»ä½•å…ƒç´ ã€‚\n- **ç¼“å­˜å±€éƒ¨æ€§**ï¼šå½“è®¿é—®æ•°ç»„å…ƒç´ æ—¶ï¼Œè®¡ç®—æœºä¸ä»…ä¼šåŠ è½½å®ƒï¼Œè¿˜ä¼šç¼“å­˜å…¶å‘¨å›´çš„å…¶ä»–æ•°æ®ï¼Œä»è€Œå€ŸåŠ©é«˜é€Ÿç¼“å­˜æ¥æå‡åç»­æ“ä½œçš„æ‰§è¡Œé€Ÿåº¦ã€‚\n\nè¿ç»­ç©ºé—´å­˜å‚¨æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œå…¶å­˜åœ¨ä»¥ä¸‹å±€é™æ€§ã€‚\n\n- **æ’å…¥ä¸åˆ é™¤æ•ˆç‡ä½**ï¼šå½“æ•°ç»„ä¸­å…ƒç´ è¾ƒå¤šæ—¶ï¼Œæ’å…¥ä¸åˆ é™¤æ“ä½œéœ€è¦ç§»åŠ¨å¤§é‡çš„å…ƒç´ ã€‚\n- **é•¿åº¦ä¸å¯å˜**ï¼šæ•°ç»„åœ¨åˆå§‹åŒ–åé•¿åº¦å°±å›ºå®šäº†ï¼Œæ‰©å®¹æ•°ç»„éœ€è¦å°†æ‰€æœ‰æ•°æ®å¤åˆ¶åˆ°æ–°æ•°ç»„ï¼Œå¼€é”€å¾ˆå¤§ã€‚\n- **ç©ºé—´æµªè´¹**ï¼šå¦‚æœæ•°ç»„åˆ†é…çš„å¤§å°è¶…è¿‡å®é™…æ‰€éœ€ï¼Œé‚£ä¹ˆå¤šä½™çš„ç©ºé—´å°±è¢«æµªè´¹äº†ã€‚\n\n## 6. æ•°ç»„çš„é‡è¦æ€§\n\n- æ•°æ®ç»“æ„åº•å±‚å°±ä¸¤ä¸ªï¼Œæ•°ç»„å°±æ˜¯å…¶ä¸­ä¸€ä¸ªï¼Œä»–ä¼šç”¨æ¥å®ç°å„ç±»ä¸Šå±‚æ•°æ®ç»“æ„\n-  **æœºå™¨å­¦ä¹ **ï¼šç¥ç»ç½‘ç»œä¸­å¤§é‡ä½¿ç”¨äº†å‘é‡ã€çŸ©é˜µã€å¼ é‡ä¹‹é—´çš„çº¿æ€§ä»£æ•°è¿ç®—ï¼Œè¿™äº›æ•°æ®éƒ½æ˜¯ä»¥æ•°ç»„çš„å½¢å¼æ„å»ºçš„ã€‚æ•°ç»„æ˜¯ç¥ç»ç½‘ç»œç¼–ç¨‹ä¸­æœ€å¸¸ä½¿ç”¨çš„æ•°æ®ç»“æ„ã€‚\n\n\n\n\n","66d4599a350d5057b13c8865c17eb473":"\n# é“¾è¡¨ï¼šPython æè¿°\n\n\n`#æ•°æ®ç»“æ„/é“¾è¡¨` `#æ•°æ®ç»“æ„` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é“¾è¡¨çš„åˆ†ç±» \n\n- å•é“¾è¡¨\n- ç¯å½¢é“¾è¡¨\n- åŒå‘é“¾è¡¨\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240920060109.png)\n\n## 2. é“¾è¡¨çš„å­˜å‚¨æ˜¯åˆ†æ•£çš„\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240919215701.png)\n\nå°¾èŠ‚ç‚¹æŒ‡å‘çš„æ˜¯ç©º\n- JS ä¸­è¢«è®°ä¸º null\n- Python ä¸­åˆ†åˆ«è¢«è®°ä¸ºÂ Â `None`\n\n## 3. é“¾è¡¨çš„å¥½å¤„\n\n- ä¸éœ€è¦è€ƒè™‘æ‰©**ç¼©å®¹å’Œæ•°æ®æ¬ç§»**çš„é—®é¢˜ï¼Œç”¨çš„æ—¶å€™å°±èƒ½æ¥ä¸Šï¼Œä¸ç”¨çš„æ—¶å€™æ‹†æ‰å°±è¡Œäº†\n- æ‰€ä»¥ï¼Œæ¯”æ•°ç»„è¦èŠ‚çœå†…å­˜\n\n## 4. å•é“¾è¡¨èŠ‚ç‚¹çš„å¢åˆ æ”¹æŸ¥\n\n```python\nclass ListNode:\n    def __init__(self,val:int) -> None:\n        # èŠ‚ç‚¹å€¼\n        self.val = val\n        # listNode | Node ä»£è¡¨ self.next çš„å€¼å¯èƒ½æ˜¯ listNode | Node\n        self.next:ListNode | None = None\n```\n\n### 4.1. åˆå§‹åŒ–\n\n```python\nn0 = ListNode(0)\nn1 = ListNode(1)\nn2 = ListNode(2)\nn3 = ListNode(3)\nn4 = ListNode(4)\n\nn0.next = n1\nn1.next = n2\nn2.next = n3\nn3.next = n4\n# æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„ next æŒ‡å‘ None\nn4.next = None\n```\n\n### 4.2. å•é“¾è¡¨çš„éå†ï¼šæŸ¥æˆ–æ”¹\n\n```python\n############################################\n# å•é“¾è¡¨çš„éå†ï¼šæŸ¥æˆ–æ”¹\n############################################\np = n0\nval = 2\nwhile p is not None:\n    print(p.val)\n    if p.val == val:\n        ## ä¿®æ”¹ä¸º 20\n        p.val = 20\n    p = p.next\n```\n\n### 4.3. å•é“¾è¡¨çš„æ’å…¥\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240921062239.png)\n\n#### 4.3.1. å¤´éƒ¨æ’å…¥\n\n```python\n####### å¤´éƒ¨æ’å…¥\np = n0\nn5 = ListNode(5)\nn5.next = p\n# å˜æˆäº† n5 -> n0 -> n1 -> n2 -> n3 -> n4\n# å³ 5 -> 0 -> 1 -> 2 -> 3 -> 4\n```\n\n#### 4.3.2. å°¾éƒ¨æ’å…¥\n\n```python\n###### å°¾éƒ¨æ’å…¥\np = n0\nn5 = ListNode(5)\nwhile p.next is not None:\n    p = p.next\np.next = n5\n# å˜æˆäº† n0 -> n1 -> n2 -> n3 -> n4 -> n5\n# å³ 0 -> 1 -> 2 -> 3 -> 4 -> 5\n```\n\n#### 4.3.3. ä¸­é—´æ’å…¥\n\n```python\n###### ä¸­é—´æ’å…¥\n# éœ€è¦æ’å…¥çš„èŠ‚ç‚¹\nn5 = ListNode(5)\n# éœ€è¦æ’å…¥çš„ä½ç½®\npos = 2\n# å¤´ç»“ç‚¹\np = n0\nwhile pos > 0 and p.next is not None:\n    p = p.next\n    pos -= 1\n\n# å°† n5 çš„ next æŒ‡å‘ p çš„ next\nn5.next = p.next\n# å°† n5 æ’å…¥åˆ° p çš„åé¢\np.next = n5\n```\n### 4.4. å•é“¾è¡¨çš„åˆ é™¤\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240920053643.png)\n\n```python\n# éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹çš„å€¼\nval = 2\n# å¤´ç»“ç‚¹\np = n0\n# åˆ çš„ç¬¬ä¸€æ­¥æ˜¯æŸ¥\n# æŸ¥æ‰¾åˆ°éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹\nwhile p.next is not None:\n    # å¦‚æœä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼ç­‰äº valï¼Œå°†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹åˆ é™¤\n    if p.next.val == val:\n        p.next = p.next.next\n    else:\n        p = p.next\n```\n\n## 5. åŒå‘é“¾è¡¨èŠ‚ç‚¹çš„å¢åˆ æ”¹æˆ\n\n```python\n# åŒé“¾è¡¨èŠ‚ç‚¹\nclass Node:\n    def __init__(self, prev, val:int, next) -> None:\n        # èŠ‚ç‚¹å€¼\n        self.val = val\n        # å‰ä¸€ä¸ªèŠ‚ç‚¹\n        self.prev = prev\n        # åä¸€ä¸ªèŠ‚ç‚¹\n        self.next = next\n```\n\n### 5.1. åˆå§‹åŒ–\n\n```python\n# åˆ›å»ºåŒé“¾è¡¨\nn0 = Node(None, 0, None)\nn1 = Node(n0, 1, None)\nn2 = Node(n1, 2, None)\nn3 = Node(n2, 3, None)\n\n# è¿æ¥åŒé“¾è¡¨\n# n0 -> n1 -> n2 -> n3\nn0.next = n1\nn1.next = n2\nn2.next = n3\nn3.next = None\n# n0 <- n1 <- n2 <- n3\nn3.prev = n2\nn2.prev = n1\nn1.prev = n0\nn0.prev = None\n\n# æœ€ç»ˆ\n# Node <- n0 <-> n1 <-> n2 <-> n3 -> None\n```\n### 5.2. éå†\n\n```python\n############################################\n# åŒé“¾è¡¨çš„æŸ¥ï¼šéå†\n# ############################################\n\n# å‘åéå†\np = n0\nwhile p is not None:\n    p = p.next\n    print(p.val)\n\n# å‘å‰éå†\np = n3\nwhile p is not None:\n    p = p.prev\n    print(p.val)\n```\n\n### 5.3. æ’å…¥\n\n```python\n############################################\n# åŒé“¾è¡¨çš„æ’å…¥:æ’\n# ############################################\n\n# éœ€è¦æ’å…¥çš„èŠ‚ç‚¹\nn4 = Node(None, 4, None)\n# éœ€è¦æ’å…¥çš„ä½ç½®\npos = 2\n# å¤´ç»“ç‚¹\np = n0\n\n# æŸ¥æ‰¾åˆ°éœ€è¦æ’å…¥çš„ä½ç½®\nwhile pos > 0 and p.next is not None:\n    pos -= 1\n    p = p.next\n\n# å°† n5 çš„ prev æŒ‡å‘ p\nn4.prev = p\n# å°† n5 çš„ next æŒ‡å‘ p çš„ next\nn4.next = p.next\n```\n\n### 5.4. åˆ é™¤\n\n```python\n############################################\n# åŒé“¾è¡¨çš„åˆ é™¤\n# ############################################\n\n# éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹\ndel_node = n2\n# å°† n2 çš„å‰ä¸€ä¸ªèŠ‚ç‚¹çš„ next æŒ‡å‘ n2 çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹\ndel_node.prev.next = del_node.next\n# å°† n2 çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ prev æŒ‡å‘ n2 çš„å‰ä¸€ä¸ªèŠ‚ç‚¹\ndel_node.next.prev = del_node.prev\n```\n\n\n## 6. é“¾è¡¨çš„ä½¿ç”¨åœºæ™¯\n\n### 6.1. å•å‘é“¾è¡¨\n\nå•å‘é“¾è¡¨é€šå¸¸ç”¨äºå®ç°æ ˆã€é˜Ÿåˆ—ã€å“ˆå¸Œè¡¨å’Œå›¾ç­‰æ•°æ®ç»“æ„ã€‚\n- **æ ˆä¸é˜Ÿåˆ—**ï¼š\n\t- å½“**æ’å…¥å’Œåˆ é™¤**æ“ä½œéƒ½åœ¨é“¾è¡¨çš„ä¸€ç«¯è¿›è¡Œæ—¶ï¼Œå®ƒè¡¨ç°çš„ç‰¹æ€§ä¸ºå…ˆè¿›åå‡ºï¼Œå¯¹åº”æ ˆï¼›\n\t- å½“**æ’å…¥æ“ä½œ**åœ¨é“¾è¡¨çš„ä¸€ç«¯è¿›è¡Œï¼Œ**åˆ é™¤æ“ä½œ**åœ¨é“¾è¡¨çš„å¦ä¸€ç«¯è¿›è¡Œï¼Œå®ƒè¡¨ç°çš„ç‰¹æ€§ä¸ºå…ˆè¿›å…ˆå‡ºï¼Œå¯¹åº”é˜Ÿåˆ—ã€‚\n- **å“ˆå¸Œè¡¨**ï¼šé“¾å¼åœ°å€æ˜¯**è§£å†³å“ˆå¸Œå†²çª**çš„ä¸»æµæ–¹æ¡ˆä¹‹ä¸€ï¼Œåœ¨è¯¥æ–¹æ¡ˆä¸­ï¼Œæ‰€æœ‰å†²çªçš„å…ƒç´ éƒ½ä¼šè¢«æ”¾åˆ°ä¸€ä¸ªé“¾è¡¨ä¸­ã€‚\n- **å›¾**ï¼š**é‚»æ¥è¡¨**æ˜¯è¡¨ç¤ºå›¾çš„ä¸€ç§å¸¸ç”¨æ–¹å¼ï¼Œå…¶ä¸­å›¾çš„æ¯ä¸ªé¡¶ç‚¹éƒ½ä¸ä¸€ä¸ªé“¾è¡¨ç›¸å…³è”ï¼Œé“¾è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½ä»£è¡¨ä¸è¯¥é¡¶ç‚¹ç›¸è¿çš„å…¶ä»–é¡¶ç‚¹ã€‚\n\n### 6.2. åŒå‘é“¾è¡¨\n\nåŒå‘é“¾è¡¨å¸¸ç”¨äºéœ€è¦å¿«é€ŸæŸ¥æ‰¾å‰ä¸€ä¸ªå’Œåä¸€ä¸ªå…ƒç´ çš„åœºæ™¯ã€‚\n- **é«˜çº§æ•°æ®ç»“æ„**ï¼šæ¯”å¦‚åœ¨çº¢é»‘æ ‘ã€B æ ‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è®¿é—®èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œè¿™å¯ä»¥é€šè¿‡åœ¨èŠ‚ç‚¹ä¸­ä¿å­˜ä¸€ä¸ªæŒ‡å‘çˆ¶èŠ‚ç‚¹çš„å¼•ç”¨æ¥å®ç°ï¼Œç±»ä¼¼äºåŒå‘é“¾è¡¨ã€‚\n- **æµè§ˆå™¨å†å²**ï¼šåœ¨ç½‘é¡µæµè§ˆå™¨ä¸­ï¼Œå½“ç”¨æˆ·ç‚¹å‡»å‰è¿›æˆ–åé€€æŒ‰é’®æ—¶ï¼Œæµè§ˆå™¨éœ€è¦çŸ¥é“ç”¨æˆ·è®¿é—®è¿‡çš„å‰ä¸€ä¸ªå’Œåä¸€ä¸ªç½‘é¡µã€‚åŒå‘é“¾è¡¨çš„ç‰¹æ€§ä½¿å¾—è¿™ç§æ“ä½œå˜å¾—ç®€å•ã€‚\n- **LRU ç®—æ³•**ï¼šåœ¨ç¼“å­˜æ·˜æ±°ï¼ˆLRUï¼‰ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¿«é€Ÿæ‰¾åˆ°æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®ï¼Œä»¥åŠæ”¯æŒå¿«é€Ÿæ·»åŠ å’Œåˆ é™¤èŠ‚ç‚¹ã€‚è¿™æ—¶å€™ä½¿ç”¨åŒå‘é“¾è¡¨å°±éå¸¸åˆé€‚ã€‚\n### 6.3. ç¯å½¢é“¾è¡¨\n\nç¯å½¢é“¾è¡¨å¸¸ç”¨äºéœ€è¦å‘¨æœŸæ€§æ“ä½œçš„åœºæ™¯ï¼Œæ¯”å¦‚æ“ä½œç³»ç»Ÿçš„èµ„æºè°ƒåº¦ã€‚\n- **æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•**ï¼šåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•æ˜¯ä¸€ç§å¸¸è§çš„ CPU è°ƒåº¦ç®—æ³•ï¼Œå®ƒéœ€è¦å¯¹ä¸€ç»„è¿›ç¨‹è¿›è¡Œå¾ªç¯ã€‚æ¯ä¸ªè¿›ç¨‹è¢«èµ‹äºˆä¸€ä¸ªæ—¶é—´ç‰‡ï¼Œå½“æ—¶é—´ç‰‡ç”¨å®Œæ—¶ï¼ŒCPU å°†åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªè¿›ç¨‹ã€‚è¿™ç§å¾ªç¯æ“ä½œå¯ä»¥é€šè¿‡ç¯å½¢é“¾è¡¨æ¥å®ç°ã€‚\n- **æ•°æ®ç¼“å†²åŒº**ï¼šåœ¨æŸäº›æ•°æ®ç¼“å†²åŒºçš„å®ç°ä¸­ï¼Œä¹Ÿå¯èƒ½ä¼šä½¿ç”¨ç¯å½¢é“¾è¡¨ã€‚æ¯”å¦‚åœ¨**éŸ³é¢‘ã€è§†é¢‘æ’­æ”¾å™¨**ä¸­ï¼Œæ•°æ®æµå¯èƒ½ä¼šè¢«åˆ†æˆå¤šä¸ªç¼“å†²å—å¹¶æ”¾å…¥ä¸€ä¸ªç¯å½¢é“¾è¡¨ï¼Œä»¥ä¾¿å®ç°æ— ç¼æ’­æ”¾ã€‚\n\n\n## 7. æ•°ç»„å’Œé“¾è¡¨çš„å¯¹æ¯”\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240921062147.png)\n\n## 8. æŠ€å·§ï¼šè™šæ‹Ÿå¤´ç»“ç‚¹ & è™šæ‹Ÿå°¾èŠ‚ç‚¹\n\næˆ‘ä»¬ä¼šä½¿ç”¨ã€Œè™šæ‹Ÿå¤´ç»“ç‚¹ã€æŠ€å·§ï¼ŒæŠŠå¤´ã€å°¾ã€ä¸­éƒ¨çš„æ“ä½œç»Ÿä¸€èµ·æ¥ï¼ŒåŒæ—¶è¿˜èƒ½é¿å…å¤„ç†å¤´å°¾æŒ‡é’ˆä¸ºç©ºæƒ…å†µçš„è¾¹ç•Œæƒ…å†µ\n\n### 8.1. è™šæ‹Ÿå¤´å°¾èŠ‚ç‚¹æŠ€å·§åŸç†\n\nå®ƒçš„åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨åˆ›å»ºåŒé“¾è¡¨æ—¶å°±åˆ›å»ºä¸€ä¸ª**è™šæ‹Ÿå¤´èŠ‚ç‚¹**å’Œä¸€ä¸ª**è™šæ‹Ÿå°¾èŠ‚ç‚¹**ï¼Œæ— è®ºåŒé“¾è¡¨æ˜¯å¦ä¸ºç©ºï¼Œè¿™ä¸¤ä¸ªèŠ‚ç‚¹éƒ½å­˜åœ¨ã€‚è¿™æ ·å°±ä¸ä¼šå‡ºç°ç©ºæŒ‡é’ˆçš„é—®é¢˜ï¼Œå¯ä»¥é¿å…å¾ˆå¤šè¾¹ç•Œæƒ…å†µçš„å¤„ç†\n### 8.2. ç¤ºä¾‹ï¼šåŒé“¾è¡¨\n\nä¸¾ä¾‹æ¥è¯´ï¼Œå‡è®¾è™šæ‹Ÿå¤´å°¾èŠ‚ç‚¹åˆ†åˆ«æ˜¯Â `dummyHead`Â å’ŒÂ `dummyTail`ï¼Œé‚£ä¹ˆä¸€æ¡ç©ºçš„`åŒé“¾è¡¨`é•¿è¿™æ ·ï¼š\n\n```\ndummyHead <-> dummyTail\n```\n\nå¦‚æœä½ æ·»åŠ Â `1,2,3`Â å‡ ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆé“¾è¡¨é•¿è¿™æ ·ï¼š\n\n```\ndummyHead <-> 1 <-> 2 <-> 3 <-> dummyTail\n```\n\n**ä½ ä»¥å‰è¦æŠŠåœ¨å¤´éƒ¨æ’å…¥å…ƒç´ ã€åœ¨å°¾éƒ¨æ’å…¥å…ƒç´ å’Œåœ¨ä¸­é—´æ’å…¥å…ƒç´ å‡ ç§æƒ…å†µåˆ†å¼€è®¨è®ºï¼Œç°åœ¨æœ‰äº†å¤´å°¾è™šæ‹ŸèŠ‚ç‚¹ï¼Œæ— è®ºé“¾è¡¨æ˜¯å¦ä¸ºç©ºï¼Œéƒ½åªéœ€è¦è€ƒè™‘åœ¨ä¸­é—´æ’å…¥å…ƒç´ çš„æƒ…å†µå°±å¯ä»¥äº†ï¼Œè¿™æ ·ä»£ç ä¼šç®€æ´å¾ˆå¤š**ã€‚\n\n### 8.3. ç¤ºä¾‹ï¼šå•é“¾è¡¨\n\nä¸¾ä¾‹æ¥è¯´ï¼Œå‡è®¾è™šæ‹Ÿå¤´å°¾èŠ‚ç‚¹åˆ†åˆ«æ˜¯Â `dummyHead`Â å’ŒÂ `dummyTail`ï¼Œé‚£ä¹ˆä¸€æ¡ç©ºçš„`å•é“¾è¡¨`é•¿è¿™æ ·ï¼š\n\n```\ndummyHead -> dummyTail\n```\n\nå¦‚æœä½ æ·»åŠ Â `1,2,3`Â å‡ ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆé“¾è¡¨é•¿è¿™æ ·ï¼š\n\n```\ndummyHead -> 1 -> 2 -> 3 -> dummyTail\n```\n\n**ä½ ä»¥å‰è¦æŠŠåœ¨å¤´éƒ¨æ’å…¥å…ƒç´ ã€åœ¨å°¾éƒ¨æ’å…¥å…ƒç´ å’Œåœ¨ä¸­é—´æ’å…¥å…ƒç´ å‡ ç§æƒ…å†µåˆ†å¼€è®¨è®ºï¼Œç°åœ¨æœ‰äº†å¤´å°¾è™šæ‹ŸèŠ‚ç‚¹ï¼Œæ— è®ºé“¾è¡¨æ˜¯å¦ä¸ºç©ºï¼Œéƒ½åªéœ€è¦è€ƒè™‘åœ¨ä¸­é—´æ’å…¥å…ƒç´ çš„æƒ…å†µå°±å¯ä»¥äº†ï¼Œè¿™æ ·ä»£ç ä¼šç®€æ´å¾ˆå¤š**ã€‚\n\n> å¯¹äºå•é“¾è¡¨ï¼Œ**è™šæ‹Ÿå¤´ç»“ç‚¹**æœ‰ä¸€å®šçš„ç®€åŒ–ä½œç”¨ï¼Œä½†**è™šæ‹Ÿå°¾èŠ‚ç‚¹**æ²¡æœ‰å¤ªå¤§ä½œç”¨\n\n### 8.4. è™šæ‹Ÿå¤´å°¾èŠ‚ç‚¹çš„ç¼ºç‚¹\n\nå½“ç„¶ï¼Œè™šæ‹Ÿå¤´ç»“ç‚¹ä¼šå¤šå ç”¨ä¸€ç‚¹å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯æ¯”èµ·ç»™ä½ è§£å†³çš„éº»çƒ¦ï¼Œè¿™ç‚¹ç©ºé—´æ¶ˆè€—æ˜¯åˆ’ç®—çš„ã€‚\n\n\n","c61e4462768955d18619defe15d9ba2b":"\n# åˆ—è¡¨ï¼šPython æè¿°\n\n`#æ•°æ®ç»“æ„/åˆ—è¡¨` `#æ•°æ®ç»“æ„` \n\n\nåˆ—è¡¨ï¼ˆlistï¼‰æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ•°æ®ç»“æ„æ¦‚å¿µï¼Œå®ƒè¡¨ç¤ºå…ƒç´ çš„æœ‰åºé›†åˆï¼Œæ”¯æŒå…ƒç´ è®¿é—®ã€ä¿®æ”¹ã€æ·»åŠ ã€åˆ é™¤å’Œéå†ç­‰æ“ä½œï¼Œæ— é¡»ä½¿ç”¨è€…è€ƒè™‘å®¹é‡é™åˆ¶çš„é—®é¢˜ã€‚åˆ—è¡¨å¯ä»¥åŸºäºé“¾è¡¨æˆ–æ•°ç»„å®ç°ã€‚\n\n**è®¸å¤šç¼–ç¨‹è¯­è¨€ä¸­çš„æ ‡å‡†åº“æä¾›çš„åˆ—è¡¨æ˜¯åŸºäºåŠ¨æ€æ•°ç»„å®ç°çš„**ï¼Œä¾‹å¦‚\n- Python ä¸­çš„Â `list`Â \n- Java ä¸­çš„Â `ArrayList` \n- Js çš„ `Array` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åˆå§‹åŒ–ä¸æ›´æ–° \n\n\n```python\n##############################\n### åˆå§‹åŒ–åˆ—è¡¨\n##############################\nnum1:list[int] = [1, 2, 3, 4, 5]\n\n######### åˆ—è¡¨çš„è®¿é—®ï¼šå¤æ‚åº¦ä¸º O(1)\nprint(num1[0])  # æŸ¥\nnum1[0] = 0 # æ›´æ–°\n```\n\n## 2. åˆ—è¡¨çš„æ’å…¥ï¼šå¤æ‚åº¦ä¸º O(n)\n\n```python\n##############################\n### åˆ—è¡¨çš„æ’å…¥ï¼šå¤æ‚åº¦ä¸º O(n)\n##############################\n\n# æ¸…ç©ºåˆ—è¡¨\nnum1.clear()\n\n# å¤´éƒ¨æ’å…¥\n# insert(index, value) index ä¸ºæ’å…¥çš„ä½ç½®ï¼Œvalue ä¸ºæ’å…¥çš„å€¼\nnum1.insert(0, 1) # å¤æ‚åº¦ä¸º O(n)\n# å°¾éƒ¨æ’å…¥\nnum1.append(2) # å¤æ‚åº¦ä¸º O(1)\n# ä¸­é—´æ’å…¥\nnum1.insert(1, 3) # å¤æ‚åº¦ä¸º O(n)\n```\n\n## 3. åˆ—è¡¨çš„éå†ï¼šå¤æ‚åº¦ä¸º O(n)\n\n```python\n##############################\n### åˆ—è¡¨çš„éå†ï¼šå¤æ‚åº¦ä¸º O(n)\n##############################\n\n# æ–¹å¼ä¸€\nfor i in num1:\n    print(i)\n\n# æ–¹å¼äºŒ\nfor i in range(len(num1)):\n    print(num1[i])\n```\n\n## 4. æ‹¼æ¥åˆ—è¡¨\n\n```python\n##############################\n### æ‹¼æ¥åˆ—è¡¨\n##############################\nnum1 = [1, 2, 3, 4, 5]\nnum2 = [6, 7, 8, 9, 10]\n\n# æ–¹å¼ä¸€ï¼šä½¿ç”¨ extend æ–¹æ³•\n# ## ç¼ºç‚¹ï¼šæ”¹å˜äº†åŸå§‹çš„ num1\nnum1.extend(num2)\n\n# æ–¹å¼äºŒï¼šä½¿ç”¨ + è¿ç®—ç¬¦\n### ç¼ºç‚¹ï¼šåˆ›å»ºäº†æ–°çš„åˆ—è¡¨\nnew_list = num1 + num2\n\n# æ–¹å¼ä¸‰ï¼šä½¿ç”¨ * è¿ç®—ç¬¦å’Œåˆ—è¡¨è§£åŒ…\n### ç¼ºç‚¹ï¼šä¸é€‚ç”¨äºå¤§åˆ—è¡¨,åœ¨ Python 3.5 ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ä¸æ”¯æŒ\nnew_list = [*num1, *num2]\n\n# æ–¹å¼å››ï¼šä½¿ç”¨åˆ—è¡¨è§£æ\n### ç¼ºç‚¹ï¼šä¸é€‚ç”¨äºå¤§åˆ—è¡¨\nnew_list = [i for i in num1] + [i for i in num2]\n\nresult = [item for list in (num1, num2) for item in list]\n```\n\n### 4.1. å…³äºåˆ—è¡¨è§£æçš„è¯´æ˜\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240921070210.png)\n\n### 4.2. åˆ—è¡¨çš„åˆ é™¤\n\n```python\n##############################\n### åˆ—è¡¨çš„åˆ é™¤ï¼šå¤æ‚åº¦ä¸º O(n)\n##############################\nnum1 = [1, 2, 3, 4, 5]\n# remove æ–¹æ³•: åˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ ,å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä¼šæŠ¥é”™\n# remove(item) item ä¸ºéœ€è¦åˆ é™¤çš„å…ƒç´ \nnum1.remove(3) # åˆ é™¤ç¬¬ä¸€ä¸ª 3\n\n# pop æ–¹æ³•: åˆ é™¤æŒ‡å®šç´¢å¼•çš„å…ƒç´ ,å‚æ•°ä¸ºç´¢å¼•\nnum1.pop(1) # åˆ é™¤ç´¢å¼•ä¸º 1 çš„å…ƒç´ \n\n# clear æ–¹æ³•: æ¸…ç©ºåˆ—è¡¨\nnum1.clear()\n\n# del æ–¹æ³•: åˆ é™¤æŒ‡å®šç´¢å¼•çš„å…ƒç´ ,å‚æ•°ä¸ºç´¢å¼•\ndel num1[1] # åˆ é™¤ç´¢å¼•ä¸º 1 çš„å…ƒç´ \n# åˆ é™¤æ•´ä¸ªåˆ—è¡¨\ndel num1\n\n```\n\n## 5. åˆ—è¡¨çš„æ’åº\n\n```python\n\n##############################\n### åˆ—è¡¨çš„æ’åº\n##############################\nnum1 = [1, 3, 2, 5, 4]\nnum1.sort() # é»˜è®¤å‡åº\nnum1.sort(reverse=True) # é™åº\n```\n\n\n## 6. åˆ—è¡¨çš„å®ç°åŸç†\n\nè®¸å¤šç¼–ç¨‹è¯­è¨€å†…ç½®äº†åˆ—è¡¨ï¼Œä¾‹å¦‚ Javaã€C++ã€Python ç­‰ã€‚å®ƒä»¬çš„å®ç°æ¯”è¾ƒå¤æ‚ï¼Œå„ä¸ªå‚æ•°çš„è®¾å®šä¹Ÿéå¸¸è€ƒç©¶ï¼Œä¾‹å¦‚**åˆå§‹å®¹é‡ã€æ‰©å®¹å€æ•°**ç­‰ã€‚\n\nä¸ºäº†åŠ æ·±å¯¹åˆ—è¡¨å·¥ä½œåŸç†çš„ç†è§£ï¼Œæˆ‘ä»¬å°è¯•å®ç°ä¸€ä¸ªç®€æ˜“ç‰ˆåˆ—è¡¨ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªé‡ç‚¹è®¾è®¡ã€‚\n- **åˆå§‹å®¹é‡**ï¼šé€‰å–ä¸€ä¸ªåˆç†çš„æ•°ç»„åˆå§‹å®¹é‡ã€‚\n- **æ•°é‡è®°å½•**ï¼šå£°æ˜ä¸€ä¸ªå˜é‡Â `size`Â ï¼Œç”¨äºè®°å½•åˆ—è¡¨å½“å‰å…ƒç´ æ•°é‡ï¼Œå¹¶éšç€å…ƒç´ æ’å…¥å’Œåˆ é™¤å®æ—¶æ›´æ–°ã€‚æ ¹æ®æ­¤å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥å®šä½åˆ—è¡¨å°¾éƒ¨ï¼Œä»¥åŠåˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ã€‚\n- **æ‰©å®¹æœºåˆ¶**ï¼šè‹¥æ’å…¥å…ƒç´ æ—¶åˆ—è¡¨å®¹é‡å·²æ»¡ï¼Œåˆ™éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚å…ˆæ ¹æ®æ‰©å®¹å€æ•°åˆ›å»ºä¸€ä¸ªæ›´å¤§çš„æ•°ç»„ï¼Œå†å°†å½“å‰æ•°ç»„çš„æ‰€æœ‰å…ƒç´ ä¾æ¬¡ç§»åŠ¨è‡³æ–°æ•°ç»„ã€‚\n\t- æ¯”å¦‚è®¾ç½®`æ‰©å®¹å€æ•°` \n","0b3709933f1155b9aaf6e719e5344a9f":"\n# åè½¬å•é“¾è¡¨ï¼šåè½¬å…¨éƒ¨ã€åè½¬å‰ N ä¸ªèŠ‚ç‚¹ã€åè½¬ä¸€éƒ¨åˆ†\n\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åè½¬å•é“¾è¡¨ \n\n### 1.1. é¢˜ç›®\n\nhttps://leetcode.cn/problems/reverse-linked-list/\n\n![image.png|543](https://832-1310531898.cos.ap-beijing.myqcloud.com/a444f3cfa45e08ed2455b6d3a6ed5679.png)\n\nè¿™ä¸ªç®—æ³•å¸¸å¸¸æ‹¿æ¥æ˜¾ç¤ºé€’å½’çš„å·§å¦™å’Œä¼˜ç¾\n\nå¯¹äºé€’å½’ç®—æ³•ï¼Œ**æœ€é‡è¦çš„å°±æ˜¯æ˜ç¡®é€’å½’å‡½æ•°çš„å®šä¹‰**:  è¾“å…¥ä¸€ä¸ªèŠ‚ç‚¹Â `head`ï¼Œå°†ã€Œä»¥Â `head`Â ä¸ºèµ·ç‚¹ã€çš„é“¾è¡¨åè½¬ï¼Œå¹¶è¿”å›åè½¬ä¹‹åçš„å¤´ç»“ç‚¹ \n\n### 1.2. ä»£ç å®ç°\n\n```javascript\n/**\n * @param {ListNode} head\n * @return {ListNode}\n */\n\nvar reverseList = function(head) {\n  // â‘  base case \n  if(head === null || head.next === null){\n        return head;\n   }\n  // â‘¡ é€’å½’\n  let last = reverseList(head.next)\n  // â‘¢ ä¸Šé¢çš„é€’å½’å®Œæˆåï¼Œè¿™æ—¶å€™åªéœ€è¦ `ç¬¬äºŒä¸ªèŠ‚ç‚¹` å¤„ç†åé¢çš„èŠ‚ç‚¹æŒ‡å‘å³å¯\n  head.next.next = head;\n  head.next = null;\n  // â‘£ è¿”å› last\n  return last;\n};\n```\n\n### 1.3. åˆ†æï¼šè§ä¸‹é¢çš„æµç¨‹å›¾\n\nhttps://www.figma.com/file/9busNTH6MZx5E6ZU8Xfahx/2023.07?type=whiteboard&node-id=1-159&t=CYZxXXoabx9ztccc-4\n\n> [!info]\n> - ä¸è¦è·³è¿›é€’å½’ï¼ˆä½ çš„è„‘è¢‹èƒ½å‹å‡ ä¸ªæ ˆå‘€ï¼Ÿï¼‰\n> - ä¸è¦æƒ³ç€å½»åº•ç†è§£å®ƒï¼Œä»”ç»†çœ‹ä¸Šé¢çš„æµç¨‹å›¾å³å¯\n\n## 2. åè½¬é“¾è¡¨å‰ N ä¸ªèŠ‚ç‚¹\n\n### 2.1. è¿­ä»£è§£æ³•\n\nä¸¤æ­¥ï¼Œå¦‚ä¸‹å›¾\n\n1. å°† 1 2 3 å˜æˆ 3 2 1 å¦‚ä¸‹å›¾æ ‡æ³¨ä¸­çš„ `â‘ `\n2. å°† 1 æŒ‡å‘ 4 ï¼Œå¦‚ä¸‹å›¾ä¸­çš„ `â‘¡`\n \n![image.png|510](https://832-1310531898.cos.ap-beijing.myqcloud.com/5fb53c7d851607b64d3ad4b6ef17f25c.png)\n\n> [!danger]\n> - ä¸Šå›¾æ ‡æ³¨çš„çº¢è‰²çš„ `â‘  â‘¡` ï¼Œç„¶åæ­£å¸¸å†™é€’å½’å°±å¥½äº†\n> - æ³¨æ„ä¸¤ä¸ªå˜é‡ `curr` å’Œ `prev`ï¼Œä½ åº”è¯¥å°±èƒ½å†™å‡ºäº†\n\n```javascript\nfunction reverseN(head, n) {\n  // è¿­ä»£ï¼Œè§£æ³•ï¼Œ \n  // ç¬¬ â‘  æ­¥ï¼šæ“ä½œé“¾è¡¨çš„æŒ‡é’ˆ\n  var curr = head;\n  var prev = null;\n  for (var i = 0; i < n; i++) {\n\t// ä¸‹é¢ä¸¤è¡Œä»£ç å°±æ˜¯æ›´æ¢ä½ç½®\n    curr.next = prev; \n    prev = curr; \n    // ç„¶åï¼Œå‰è¿›\n    curr = curr.next;\n  }\n  // ç¬¬ â‘¡ æ­¥ï¼šé€’å½’å®Œåï¼Œè¿˜éœ€è¦å¤„ç†æŒ‡å‘\n  head.next = curr;\n  return prev;\n}\n\n```\n\n### 2.2. é€’å½’è§£æ³•\n\n> [!danger]\n> å†çœ‹åˆä¸å¥½ç†è§£äº†ï¼Œpass å§ï¼Œçœ‹è¿­ä»£è§£æ³•å³å¯ï¼Œæ—¶é—´æœ‰é™ï¼Œç‚¹åˆ°ä½ç½®\n\n```javascript\n\nvar successor = null; // åé©±èŠ‚ç‚¹\n\n// åè½¬ä»¥ head ä¸ºèµ·ç‚¹çš„ n ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›æ–°çš„å¤´ç»“ç‚¹\nfunction reverseN(head, n) {\n    // â‘  base case\n    // åè½¬ä¸€ä¸ªå…ƒç´ ï¼Œå°±æ˜¯å®ƒæœ¬èº«ï¼ŒåŒæ—¶è¦è®°å½•åé©±èŠ‚ç‚¹\n    if (n === 1) {\n        // è®°å½•ç¬¬ n + 1 ä¸ªèŠ‚ç‚¹\n        successor = head.next;\n        return head;\n    }\n    // â‘¡ é€’å½’\n    // ä»¥ head.next ä¸ºèµ·ç‚¹ï¼Œéœ€è¦åè½¬å‰ n - 1 ä¸ªèŠ‚ç‚¹\n    var last = reverseN(head.next, n - 1);\n\t// â‘¢ å¤„ç†é€’å½’åçš„èŠ‚ç‚¹æŒ‡å‘\n    head.next.next = head;\n    // è®©åè½¬ä¹‹åçš„ head èŠ‚ç‚¹å’Œåé¢çš„èŠ‚ç‚¹è¿èµ·æ¥\n    head.next = successor;\n    // â‘£ è¿”å› last å³å¯\n    return last;\n}\n```\n\n![image.png|480](https://832-1310531898.cos.ap-beijing.myqcloud.com/caeae889a676751bdd2c7d083c720ecd.png)\n\n## 3. åè½¬é“¾è¡¨çš„ä¸€éƒ¨åˆ†\n\nç»™ä¸€ä¸ªç´¢å¼•åŒºé—´ `[m, n]`ï¼ˆç´¢å¼•ä» `1` å¼€å§‹ï¼‰ï¼Œä»…ä»…åè½¬åŒºé—´ä¸­çš„é“¾è¡¨å…ƒç´ \n\n- å¦‚æœ `m == 1`ï¼Œå°±ç›¸å½“äºåè½¬é“¾è¡¨å¼€å¤´çš„ n ä¸ªå…ƒç´ ï¼Œè§  [#äºŒã€åè½¬é“¾è¡¨å‰ N ä¸ªèŠ‚ç‚¹](/post/0b3709933f1155b9aaf6e719e5344a9f.html#äºŒã€åè½¬é“¾è¡¨å‰-N-ä¸ªèŠ‚ç‚¹)\n- å¦‚æœ `m != 1`\n\t-  `head` çš„ç´¢å¼•è§†ä¸º `1`ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯æƒ³ä»`ç¬¬ m ä¸ªå…ƒç´ `å¼€å§‹åè½¬å¯¹å§\n\t-  `head.next` çš„ç´¢å¼•è§†ä¸º `1` å‘¢ï¼Ÿé‚£ä¹ˆç›¸å¯¹äº `head.next`ï¼Œåè½¬çš„åŒºé—´åº”è¯¥æ˜¯ä»`ç¬¬ m - 1 ä¸ªå…ƒç´ `å¼€å§‹çš„ã€‚\n\t- é‚£ä¹ˆå¯¹äº `head.next.next` å‘¢ï¼Ÿåè½¬çš„åŒºé—´åº”è¯¥æ˜¯ä»`ç¬¬ m - 2 ä¸ªå…ƒç´ `å¼€å§‹çš„\n\t- ä¾æ¬¡å¾€ä¸‹æ¨ï¼Œç›´åˆ°\n\n```javascript\nvar reverseBetween = function (head, m, n) {\n    // â‘  base case\n    if (m === 1) {\n        // åè½¬ä»¥headå¼€å¤´çš„nä¸ªèŠ‚ç‚¹\n        return reverseN(head, n);\n    }\n    // â‘¡ å°† head.next ä½œä¸ºèµ·ç‚¹ åè½¬ å‰ m-1 ä¸ªèŠ‚ç‚¹\n    head.next = reverseBetween(head.next, m - 1, n - 1);\n    return head;\n}\n```\n\n>  **è¿™ä¸ªæµç¨‹å›¾å¯ä»¥ä¸ç”¨çœ‹**ï¼Œç›´æ¥çœ‹ä¸Šé¢æ–‡æœ¬æ›´å¥½ç†è§£ ï¼Œå…·ä½“åˆ†æè¿‡ç¨‹è§ï¼š  https://www.figma.com/file/9busNTH6MZx5E6ZU8Xfahx/2023.07?type=whiteboard&node-id=25-107&t=T9anQJy5miIZYOFR-4\n\n## 4. æœ€å\n\n- ä¸è¦è·³è¿›`é€’å½’`ï¼Œ ä½ çš„è„‘è¢‹ç“œå­èƒ½æå‡ ä¸ª `é€’å½’`\n- é€’å½’æ“ä½œé“¾è¡¨å¹¶ä¸é«˜æ•ˆã€‚å’Œ`è¿­ä»£è§£æ³•`ç›¸æ¯”ï¼Œè™½ç„¶æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ `O(N)`ï¼Œä½†æ˜¯è¿­ä»£è§£æ³•çš„`ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)`ï¼Œè€Œé€’å½’è§£æ³•éœ€è¦`å †æ ˆ`ï¼Œ`ç©ºé—´å¤æ‚åº¦`æ˜¯ `O(N)`\n\n","33ab10e27f5f5bd4b71c841e0e350fcb":"\n# é“¾è¡¨çš„åŒæŒ‡é’ˆæŠ€å·§åˆé›†\n\n\n`#ç®—æ³•/é“¾è¡¨`\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## ç¬¬ 1 é¢˜ï¼šåˆå¹¶ä¸¤ä¸ªæœ‰åºå•é“¾è¡¨ \n\n> [https://leetcode.cn/problems/merge-two-sorted-lists/](https://leetcode.cn/problems/merge-two-sorted-lists/)\n\n**ä»”ç»†é‡å¤çš„** çœ‹ä¸‹é¢çš„`åŠ¨å›¾`ï¼Œæœ‰`6ä¸ª`å˜é‡\n\n- `l1` ä»£è¡¨é“¾è¡¨ `list1` \n- `p1`  æŒ‡é’ˆæŒ‡å‘ é“¾è¡¨ `list1` \n- `l2`  ä»£è¡¨é“¾è¡¨ `list2`\n- `p2` æŒ‡é’ˆæŒ‡å‘é“¾è¡¨ `list2` \n- `dummy èŠ‚ç‚¹`  , ã€Œè™šæ‹Ÿå¤´ç»“ç‚¹ã€\n- `p` æŒ‡é’ˆæŒ‡å‘ è™šæ‹Ÿå¤´ç»“ç‚¹\n\n![|536](https://832-1310531898.cos.ap-beijing.myqcloud.com/a95e9523866627037deca38bff57f245.gif)\n```javascript\n/**\n * Definition for singly-linked list.\n * function ListNode(val, next) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.next = (next===undefined ? null : next)\n * }\n */\n/**\n * @param {ListNode} list1\n * @param {ListNode} list2\n * @return {ListNode}\n */\nvar mergeTwoLists = function (list1, list2) {\n    let p1 = list1;\n    let p2 = list2;\n    let d = new ListNode(0);\n    let p = d;\n    // while (p1 && p2) {\n    // ä¸‹é¢è¿™ç§whileä¼šå¼€å¿«ä¸€äº›ï¼Œä¸æ¶‰åŠåˆ°è‡ªåŠ¨è½¬åŒ–\n    while (p1 != null && p2 != null) {\n        if (p1.val < p2.val) {\n            p.next = p1;\n            p1 = p1.next;\n        } else {\n            p.next = p2;\n            p2 = p2.next;\n        }\n        p = p.next;\n    }\n    // å‰©ä½™çš„ç›´æ¥æ”¾åœ¨å°¾éƒ¨å³å¯\n    if (p1 !== null) {\n        p.next = p1;\n    }\n    if (p2 !== null) {\n        p.next = p2;\n    }\n    return d.next;\n};\n\n```\n\nä¸Šé¢ `while æ¡ä»¶`  çš„ä¸¤ç§å†™æ³•è¿˜æ˜¯ä¼šæœ‰æ€§èƒ½å·®å¼‚çš„ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/9c4e07ba21ffab641f8328ec40605ea5.png)\n\n\n## ã€Œè™šæ‹Ÿå¤´ç»“ç‚¹ã€æŠ€å·§\n\n`dummy` èŠ‚ç‚¹ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ª`å ä½ç¬¦` ï¼Œæœ‰äº†å®ƒï¼Œæ–¹ä¾¿å¤„ç† `p` ä¸ºç©ºæŒ‡é’ˆçš„åœºæ™¯\n\nä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨è™šæ‹Ÿå¤´ç»“ç‚¹ï¼Ÿ\n\n**å½“ä½ éœ€è¦åˆ›é€ ä¸€æ¡æ–°é“¾è¡¨çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è™šæ‹Ÿå¤´ç»“ç‚¹ç®€åŒ–è¾¹ç•Œæƒ…å†µçš„å¤„ç†ã€‚**ï¼Œæ¯”å¦‚ [#ç¬¬ 1 é¢˜ï¼šåˆå¹¶ä¸¤ä¸ªæœ‰åºå•é“¾è¡¨](/post/33ab10e27f5f5bd4b71c841e0e350fcb.html#ç¬¬-1-é¢˜åˆå¹¶ä¸¤ä¸ªæœ‰åºå•é“¾è¡¨) ä¸­ æ˜¯ä¸æ˜¯éœ€è¦åˆ›å»ºä¸€ä¸ª`æ–°çš„é“¾è¡¨`\n\n> [!info]\nä»¥åè™šæ‹Ÿå¤´ç»“ç‚¹éƒ½ä½¿ç”¨ å˜é‡ `d` ä»£æ›¿ï¼Œæ–¹ä¾¿ code\n\n\n## ç¬¬ 2 é¢˜ï¼šåˆ†éš”é“¾è¡¨\n\n> [https://leetcode.cn/problems/partition-list/](https://leetcode.cn/problems/partition-list/)\n\n![|544](https://832-1310531898.cos.ap-beijing.myqcloud.com/69c926657ba9b5889d24dd3ad5c220ed.png)\n\n**åˆ†æï¼š**\nåŸé“¾è¡¨åˆ†æˆ`ä¸¤ä¸ªå°é“¾è¡¨`ï¼Œä¸€ä¸ªé“¾è¡¨ä¸­çš„å…ƒç´ å¤§å°éƒ½å°äº `x`ï¼Œå¦ä¸€ä¸ªé“¾è¡¨ä¸­çš„å…ƒç´ éƒ½å¤§äºç­‰äº `x`ï¼Œæœ€åå†æŠŠè¿™ä¸¤æ¡é“¾è¡¨æ¥åˆ°ä¸€èµ·\n\n**è¦ç‚¹åˆ†æï¼š**\n\n- ä¸¤ä¸ªè™šæ‹Ÿå¤´ç»“ç‚¹ `dummy1 å’Œ dummy2`ï¼Œåˆ†åˆ«ç”¨äºå­˜å‚¨å¤§äºå’Œå°äº  `x` çš„èŠ‚ç‚¹ï¼Œå¹¶ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆ `p1`  `p2` ï¼Œå¹¶æŒ‡å‘å®ƒå¯¹åº”çš„è™šæ‹Ÿå¤´ç»“ç‚¹\n- `p` æŒ‡å‘`åŸé“¾è¡¨` ï¼Œå¹¶ä¸”æ¯æ¬¡` while` å¾ªç¯éƒ½æ›´æ–° `p`  (ä¸€å®šè¦æ³¨æ„æ–­å¼€æ¯ä¸ªèŠ‚ç‚¹çš„ `next` æŒ‡é’ˆ)\n- æœ€åï¼Œè¿æ¥ä¸¤ä¸ª è™šæ‹Ÿå¤´ç»“ç‚¹ï¼Œè¿”å› `dummy1.next`\n\n```javascript\nvar partition = function (head, x) {\n    // å­˜æ”¾å°äº x çš„é“¾è¡¨çš„è™šæ‹Ÿå¤´ç»“ç‚¹\n    var dummy1 = new ListNode(-1);\n    // å­˜æ”¾å¤§äºç­‰äº x çš„é“¾è¡¨çš„è™šæ‹Ÿå¤´ç»“ç‚¹\n    var dummy2 = new ListNode(-1);\n    // p1, p2 æŒ‡é’ˆè´Ÿè´£ç”Ÿæˆç»“æœé“¾è¡¨\n    var p1 = dummy1, p2 = dummy2;\n    // p è´Ÿè´£éå†åŸé“¾è¡¨ï¼Œç±»ä¼¼åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨çš„é€»è¾‘\n    // è¿™é‡Œæ˜¯å°†ä¸€ä¸ªé“¾è¡¨åˆ†è§£æˆä¸¤ä¸ªé“¾è¡¨\n    var p = head;\n    while (p !== null) {\n        if (p.val >= x) {\n            p2.next = p;\n            p2 = p2.next;\n        } else {\n            p1.next = p;\n            p1 = p1.next;\n        }\n    // åŸé“¾è¡¨çš„æŒ‡é’ˆä¸æ–­å‰è¿› \n    // p = p.next;\n    ////////// ==============>\n        // æ–­å¼€åŸé“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹çš„ next æŒ‡é’ˆ\n        var temp = p.next;\n        p.next = null;\n        p = temp;\n    }\n    \n    // è¿æ¥ä¸¤ä¸ªé“¾è¡¨\n    p1.next = dummy2.next;\n    return dummy1.next;\n}\n```\n\n### è¸©è¿‡çš„å‘\n\n![|576](https://832-1310531898.cos.ap-beijing.myqcloud.com/5730a315459e150017323bbcdaddd6ab.png)\n\n#### è§£å†³æ–¹æ³• 1\n\næ–­å¼€åŸé“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹çš„ `next` æŒ‡é’ˆ ï¼Œå…·ä½“ä»£ç å¦‚ä¸Š\n\n#### è§£å†³æ–¹æ³• 2\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/a091f56e19c9fcaaac00e6e23b6af9e7.png)\n\n## ç¬¬ 3 é¢˜ï¼šåˆå¹¶ k ä¸ªæœ‰åºé“¾è¡¨@TODO\n\n[https://leetcode.cn/problems/merge-k-sorted-lists/](https://leetcode.cn/problems/merge-k-sorted-lists/)\n\n### é¢˜ç›®\n![|600](https://832-1310531898.cos.ap-beijing.myqcloud.com/086fb314d78535b9d53982f756f711be.png)\n\n### çœ‹ä»£ç \n```javascript\n/**\n * Definition for singly-linked list.\n * function ListNode(val, next) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.next = (next===undefined ? null : next)\n * }\n */\n\n/**\n * @param {ListNode[]} lists\n * @return {ListNode}\n * åˆ†æ:\n * 1ã€å…³é”®æ˜¯ ä¼˜å…ˆçº§é˜Ÿåˆ—çš„ ã€å…¥é˜Ÿå‡½æ•°ã€‘çš„å®ç°\n * 2ã€ä¼˜å…ˆçº§é˜Ÿåˆ—çš„ã€æƒé‡ã€‘å°±æ˜¯å•é“¾è¡¨NodeèŠ‚ç‚¹çš„valå€¼\n */\nvar mergeKLists = function (lists) {\n    if (lists.length === 0) {\n        return null\n    }\n    // è™šæ‹Ÿå¤´ç»“ç‚¹\n    let dummy = new ListNode(-1);\n    // æŒ‡é’ˆæŒ‡å‘ è™šæ‹Ÿå¤´ç»“ç‚¹ , ç”¨äºç§»åŠ¨\n    let p = dummy;\n    // ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œå€¼æœ€å°çš„å…ˆå…¥é˜Ÿï¼Œå³ä¼˜å…ˆçº§æœ€é«˜\n    let q = [];\n    // ä¼˜å…ˆé˜Ÿåˆ—çš„ã€å…¥é˜Ÿå‡½æ•°ã€‘ï¼Œå€¼æœ€å°çš„å…ˆå…¥é˜Ÿåˆ—\n    let enqueue = (node) => {\n        if (q.length === 0) {\n            q.push(node);\n        } else {\n            // æ˜¯å¦æ’å…¥äº†\n            let added = false;\n            for (let i = 0; i < q.length; i++) {\n                if (node.val < q[i].val) {\n                    q.splice(i, 0, node)\n                    added = true;\n                    break;\n                }\n            }\n            // æ²¡æ‰¾åˆ°åˆé€‚çš„æ’å…¥ä½ç½®ï¼Œåˆ™æ·»åŠ åˆ°æœ«å°¾\n            if (!added) {\n                q.push(node);\n            }\n        }\n    }\n    // éå†lists , å…¥é˜Ÿé“¾è¡¨æ•°ç»„çš„æ¯ä¸ªå…ƒç´ \n    for (let i = 0; i < lists.length; i++) {\n        if (lists[i] !== null) {\n            enqueue(lists[i])\n        }\n    }\n    // ä¼˜å…ˆçº§é˜Ÿåˆ—æœ‰å€¼ï¼Œåˆ™ç»§ç»­éå†\n    while (q.length !== 0) {\n        // å–å‡º ä¼˜å…ˆçº§é˜Ÿåˆ—é‡Œçš„ç¬¬ä¸€ä¸ª\n        let node = q.shift();\n        // pæŒ‡é’ˆæŒ‡å‘ æŠŠå–å‡ºçš„èŠ‚ç‚¹\n        p.next = node;\n        // æ£€æµ‹node.next å¦åˆ™ï¼Œé‡æ–°å…¥é˜Ÿ\n        if (node.next !== null) {\n            // ::::å…³é”®\n            enqueue(node.next);\n        }\n        // p æŒ‡é’ˆä¸æ–­å‰è¿›\n        p = p.next;\n    }\n    return dummy.next;\n};\n\n```\n\n### æ—¶é—´å¤æ‚åº¦åˆ†æ\n\n> [!todo]\n å¤æ‚åº¦ï¼Œæ²¡å¼„æ˜ç™½ï¼Œå†ç ”ç©¶ï¼\n\nåˆ†æï¼š`q` ä»£è¡¨ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œå‡è®¾æ‰€æœ‰èŠ‚ç‚¹éƒ½ä¼šå…¥é˜Ÿï¼Œæ‰€ä»¥ q çš„é•¿åº¦ä¸ºä¸Šé™ä¸º `N`\nè¿™ä¸ªç®—æ³•å¤æ‚åº¦ï¼Œæ²¡å¼„æ˜ç™½ï¼Ÿ å› ä¸ºå¹¶ä¸æ˜¯è‡ªå·±å®ç°äº†\n> ç®—æ³•æ•´ä½“çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(Nlogk)`\n> - å…¶ä¸­ `k` æ˜¯ **é“¾è¡¨çš„æ¡æ•°**ï¼Œå³æœ‰å‡ ä¸ªé“¾è¡¨ï¼Œå³ æè®¾ä¸­ï¼Œ`lists` çš„é•¿åº¦\n> - `N` æ˜¯ **è¿™äº›é“¾è¡¨çš„èŠ‚ç‚¹æ€»æ•°**ã€‚\n\n> [!question]\nè¿™ä¸ªé¢˜ï¼Œå¹¶æ²¡æœ‰åŒæŒ‡é’ˆï¼Œå°±æ˜¯å•æŒ‡é’ˆ\n\n\n## ç¬¬ 4 é¢˜ï¼šåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹\n\n[https://leetcode.cn/problems/remove-nth-node-from-end-of-list/](https://leetcode.cn/problems/remove-nth-node-from-end-of-list/)\n\n### å…ˆæ‰¾åˆ°å•é“¾è¡¨çš„å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/ac036e825212ca37f1a513d5e8b41e08.png)\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\n/**\n * @param {ListNode} head\n * @param {number} n\n * @return {ListNode}\n */\nvar removeNthFromEnd = function (head, n) {\n    // ä½¿ç”¨äº†è™šæ‹Ÿå¤´ç»“ç‚¹çš„æŠ€å·§ï¼Œä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢å‡ºç°ç©ºæŒ‡é’ˆçš„æƒ…å†µï¼Œè§å¤‡æ³¨\n    let dummy = new ListNode(-1);\n    // ç¬¬ä¸€æ­¥ï¼Œä½¿ç”¨åŒæŒ‡é’ˆ å…ˆæ‰¾åˆ° å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹\n    let p1 = head;\n    let p2 = dummy;\n    p2.next = head;\n    // p1 å…ˆèµ° n æ­¥\n    for (let i = 0; i < n; i++) {\n        p1 = p1.next;\n    }\n    // p1 å’Œ p2 åŒæ—¶èµ° k æ­¥\n    while (p1 != null) {\n        p2 = p2.next;\n        p1 = p1.next;\n    }\n    // è¿™ä¸ªæ—¶å€™æ‰¾åˆ°äº†\n    \n    // åˆ æ‰å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹\n    p2.next = p2.next.next;\n    return dummy.next;\n};\n\n```\n\n>  ä½¿ç”¨äº†`è™šæ‹Ÿå¤´ç»“ç‚¹`çš„æŠ€å·§ï¼Œä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢å‡ºç°ç©ºæŒ‡é’ˆçš„æƒ…å†µï¼Œæ¯”å¦‚è¯´é“¾è¡¨æ€»å…±æœ‰ 5 ä¸ªèŠ‚ç‚¹ï¼Œé¢˜ç›®å°±è®©ä½ åˆ é™¤å€’æ•°ç¬¬ 5 ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£æŒ‰ç…§ç®—æ³•é€»è¾‘ï¼Œåº”è¯¥é¦–å…ˆæ‰¾åˆ°å€’æ•°ç¬¬ 6 ä¸ªèŠ‚ç‚¹ã€‚ä½†ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å‰é¢å·²ç»æ²¡æœ‰èŠ‚ç‚¹äº†ï¼Œè¿™å°±ä¼šå‡ºé”™ã€‚\n\n\n## ç¬¬ 5 é¢˜ï¼šå•é“¾è¡¨çš„ä¸­ç‚¹\n\n> [https://leetcode.cn/problems/middle-of-the-linked-list/](https://leetcode.cn/problems/middle-of-the-linked-list/)\n\n\n\n![|600](https://832-1310531898.cos.ap-beijing.myqcloud.com/a1643b47243c1d93a8beb6c2d8c4f8c6.png)\n\n\n### ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆ\n\n```javascript\n/**\n * @param {ListNode} head\n * @return {ListNode}\n */\nvar middleNode = function (head) {\n    let slow = head;\n    let fast = head;\n\n    // éœ€è¦åˆ¤æ–­fast.next.next æ˜¯å¦å­˜åœ¨\n    while (fast !== null && fast.next !== null) {\n        slow = slow.next;\n        fast = fast.next.next;\n    }\n    return slow;\n};\n```\n\n>  \n>  æ³¨ï¼šéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœé“¾è¡¨é•¿åº¦ä¸º`å¶æ•°`ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸­ç‚¹æœ‰ä¸¤ä¸ªçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿™ä¸ªè§£æ³•è¿”å›çš„èŠ‚ç‚¹æ˜¯`é åçš„é‚£ä¸ªèŠ‚ç‚¹`ã€‚\n\n\n## ç¬¬ 6 é¢˜ï¼šåˆ¤æ–­é“¾è¡¨æ˜¯å¦åŒ…å«ç¯\n\næ¯å½“`æ…¢æŒ‡é’ˆ slow` å‰è¿›ä¸€æ­¥ï¼Œ`å¿«æŒ‡é’ˆ fast` å°±å‰è¿›ä¸¤æ­¥ã€‚\n\n- å¦‚æœ `fast` æœ€ç»ˆé‡åˆ°ç©ºæŒ‡é’ˆï¼Œè¯´æ˜é“¾è¡¨ä¸­æ²¡æœ‰ç¯ï¼›\n- å¦‚æœ `fast` æœ€ç»ˆå’Œ slow `ç›¸é‡`ï¼Œé‚£è‚¯å®šæ˜¯ `fast` è¶…è¿‡äº† `slow` ä¸€åœˆï¼Œè¯´æ˜é“¾è¡¨ä¸­å«æœ‰ç¯ã€‚\n\nä»£ç å¦‚ä¸‹ï¼š\n```javascript\nfunction hasCycle(head) {\n    // å¿«æ…¢æŒ‡é’ˆåˆå§‹åŒ–æŒ‡å‘ head\n    var slow = head, fast = head;\n    // å¿«æŒ‡é’ˆèµ°åˆ°æœ«å°¾æ—¶åœæ­¢\n    while (fast != null && fast.next != null) {\n        // æ…¢æŒ‡é’ˆèµ°ä¸€æ­¥ï¼Œå¿«æŒ‡é’ˆèµ°ä¸¤æ­¥\n        slow = slow.next;\n        fast = fast.next.next;\n        // å¿«æ…¢æŒ‡é’ˆç›¸é‡ï¼Œè¯´æ˜å«æœ‰ç¯\n        if (slow == fast) {\n            return true;\n        }\n    }\n    // ä¸åŒ…å«ç¯\n    return false;\n}\n```\n\n> [!NOTE]\nç–‘é—®â“\nä¸ä¼šæ­»å¾ªç¯å˜›ï¼Ÿæ¯”å¦‚è¿™æ˜¯ä¸€ä¸ªå¾ªç¯åˆ—è¡¨ â†’ æœ€ç»ˆæ˜¯ä¼šç›¸é‡çš„ï¼Œå¦‚ä½•ç›¸é‡ï¼Ÿ ç†è§£æˆå­¦æ ¡æ“åœº 400m åœºåœ°è·‘æ­¥ï¼Œä¸€ä¸ªè·‘çš„å¿«ï¼Œä¸€ä¸ªè·‘å¾—æ…¢ã€‚**æ‰€ä»¥ï¼Œæœ€ç»ˆè¿˜æ˜¯ä¼šè¿½ä¸Šçš„** \n\n\n\n## ç¬¬ 7 é¢˜ï¼šç¯å½¢é“¾è¡¨ II\n\n> [https://leetcode.cn/problems/linked-list-cycle-ii/](https://leetcode.cn/problems/linked-list-cycle-ii/)\n\nå¦‚æœå·²ç»å·²çŸ¥ é“¾è¡¨ä¸­å«æœ‰ç¯ï¼Œå¦‚ä½•è®¡ç®—è¿™ä¸ª`ç¯çš„èµ·ç‚¹`ï¼Ÿ\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/bf3e2cd2adc9587dc1358f50421a5867.png)\n\n### å…ˆè¯´ç»“è®º\n\nå½“`å¿«æ…¢æŒ‡é’ˆ`ç›¸é‡æ—¶ï¼Œè®©å…¶ä¸­ä»»ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘`å¤´èŠ‚ç‚¹`ï¼Œç„¶åè®©å®ƒä¿©ä»¥`ç›¸åŒé€Ÿåº¦`å‰è¿›ï¼Œ`å†æ¬¡ç›¸é‡æ—¶`æ‰€åœ¨çš„èŠ‚ç‚¹ä½ç½®å°±æ˜¯ç¯å¼€å§‹çš„ä½ç½®\n\n### ç»“è®ºçš„æ¨å¯¼è¿‡ç¨‹\n\nå‡è®¾**å¿«æ…¢æŒ‡é’ˆç›¸é‡**æ—¶ï¼Œæ…¢æŒ‡é’ˆ `slow` èµ°äº† `k` æ­¥ï¼Œé‚£ä¹ˆå¿«æŒ‡é’ˆ `fast` ä¸€å®šèµ°äº† `2k` æ­¥ï¼Œä¸” ==K ä¸€å®šæ˜¯ç¯é•¿åº¦çš„æ•´æ•°å€==ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![|576](https://832-1310531898.cos.ap-beijing.myqcloud.com/05a057ac16843558f9b5679574a82bfb.png)\n\nå†å‡è®¾ç›¸é‡ç‚¹è·ç¯çš„èµ·ç‚¹çš„è·ç¦»ä¸º `m` ï¼Œ é‚£ä¹ˆç»“åˆä¸Šå›¾çš„ `slow` æŒ‡é’ˆï¼Œç¯çš„èµ·ç‚¹è·`å¤´ç»“ç‚¹ head` çš„è·ç¦»ä¸º `k - m`ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä» `head` å‰è¿› `k - m` æ­¥å°±èƒ½åˆ° è¾¾`ç¯èµ·ç‚¹`ã€‚\nå·§çš„æ˜¯ï¼Œå¦‚æœä»`ç›¸é‡ç‚¹`ç»§ç»­å‰è¿› `k - m` æ­¥ï¼Œä¹Ÿæ°å¥½åˆ°è¾¾`ç¯èµ·ç‚¹`ã€‚å› ä¸ºç»“åˆä¸Šå›¾çš„ fast æŒ‡é’ˆï¼Œä»ç›¸é‡ç‚¹å¼€å§‹èµ°kæ­¥å¯ä»¥è½¬å›åˆ°ç›¸é‡ç‚¹ï¼Œé‚£èµ° k - m æ­¥è‚¯å®šå°±èµ°åˆ°ç¯èµ·ç‚¹äº†\næ‰€ä»¥ï¼Œåªè¦æˆ‘ä»¬æŠŠå¿«æ…¢æŒ‡é’ˆä¸­çš„ä»»ä¸€ä¸ªé‡æ–°æŒ‡å‘ `head`ï¼Œç„¶åä¸¤ä¸ªæŒ‡é’ˆ**åŒé€Ÿå‰è¿›**ï¼Œ`k - m` æ­¥åä¸€å®šä¼šç›¸é‡ï¼Œç›¸é‡ä¹‹å¤„å°±æ˜¯ç¯çš„èµ·ç‚¹äº†ã€‚\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/7b7ad20123d2f237f850b1e6d6593fdb.png)\n\n### ä»£ç \n```javascript\nvar detectCycle = function (head) {\n    var fast, slow;\n    fast = slow = head;\n    //// ::::ç¬¬ä¸€æ­¥ï¼š ç›¸é‡æ—¶ï¼Œå³ç›¸é‡ç‚¹ï¼Œ\n    while (fast != null && fast.next != null) {\n        fast = fast.next.next;\n        slow = slow.next;\n        if (fast === slow) break;\n    }\n    // ä¸Šé¢çš„ä»£ç ç±»ä¼¼ hasCycle å‡½æ•°\n    if (fast == null || fast.next == null) {\n        // fast é‡åˆ°ç©ºæŒ‡é’ˆè¯´æ˜æ²¡æœ‰ç¯\n        return null;\n    }\n    // ::::ç¬¬äºŒæ­¥ï¼šåœ¨ç›¸é‡ç‚¹ï¼Œé‡æ–°åŒé€Ÿåº¦å‰è¿›\n    \n    // é‡æ–°æŒ‡å‘å¤´ç»“ç‚¹\n    slow = head;\n    // å¿«æ…¢æŒ‡é’ˆåŒæ­¥å‰è¿›ï¼Œç›¸äº¤ç‚¹å°±æ˜¯ç¯èµ·ç‚¹\n    while (slow !== fast) {\n        fast = fast.next;\n        slow = slow.next;\n    }\n    return slow;\n};\n```\n\n## ç¬¬ 8 é¢˜ï¼šä¸¤ä¸ªé“¾è¡¨æ˜¯å¦ç›¸äº¤\n\n> [https://leetcode.cn/problems/intersection-of-two-linked-lists/](https://leetcode.cn/problems/intersection-of-two-linked-lists/)\n\n\nå¦‚ä¸‹é¢ï¼Œç›¸äº¤ï¼Œæ‰€ä»¥è¿”å› `c1`\n![|560](https://832-1310531898.cos.ap-beijing.myqcloud.com/def94355a4edce1c7384c0730bbb2a6a.png)\nåˆå¦‚ä¸‹é¢ï¼Œè¿”å›ï¼Œ`8`\n![|560](https://832-1310531898.cos.ap-beijing.myqcloud.com/fdee7a7947e38677438607d6ee9de92f.png)\n\n### æ€è·¯ 1\n\né€šè¿‡ `hash` æ¥åˆ¤æ–­å‡ºç°è¿‡çš„æ¬¡æ•°ï¼Œå¦‚æœå‡ºç°è¿‡ä¸¤æ¬¡ï¼Œåˆ™è¯´æ˜ç›¸äº¤äº†ï¼Œä½†ç©ºé—´å¤æ‚åº¦ç•¥é«˜ï¼Œéœ€è¦é¢å¤–çš„ç©ºé—´ã€‚å³ç©ºé—´å¤æ‚åº¦ä¸º `O(m+n)`\n\n### æ€è·¯ 2\n\nå…³é”®ç‚¹åœ¨äºï¼Œæ‹¼æ¥ï¼Œå“ªä¸ªå…ˆéå†å®Œï¼ŒæŒ‡é’ˆæŒ‡å‘å¦å¤–ä¸€ä¸ª\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/beaa1e2785882f802f7c0c94903ebaf2.png)\n\nç©ºé—´å¤æ‚åº¦ä¸º `O(1)`ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º `O(N)`\n\n### ä»£ç \n```javascript\nvar getIntersectionNode = function (headA, headB) {\n    // éƒ½æŒ‡å‘å„è‡ªçš„å¤´ç»“ç‚¹\n    let p1 = headA;\n    let p2 = headB;\n    while (p1 !== p2) {\n        if (p1 === null) {\n            p1 = headB;\n        } else {\n            p1 = p1.next;\n        }\n        if (p2 === null) {\n            p2 = headA;\n        } else {\n            p2 = p2.next;\n        }\n    }\n    return p1;\n};\n\n```\n\n### ç–‘é—®\n\né‚£ä½ å¯èƒ½ä¼šé—®ï¼Œå¦‚æœè¯´**ä¸¤ä¸ªé“¾è¡¨æ²¡æœ‰ç›¸äº¤ç‚¹**ï¼Œæ˜¯å¦èƒ½å¤Ÿæ­£ç¡®çš„è¿”å› `null` å‘¢ï¼Ÿ\nè¿™ä¸ªé€»è¾‘å¯ä»¥è¦†ç›–è¿™ç§æƒ…å†µçš„ï¼Œç›¸å½“äº c1 èŠ‚ç‚¹æ˜¯  `nullç©ºæŒ‡é’ˆ`ï¼Œå¯ä»¥æ­£ç¡®è¿”å› null\n\n\n","b355d1e3bf9c5533a96eb2dc57b01abf":"\n# æ•°ç»„é“¾è¡¨ä¸å†…å­˜ç¼“å­˜çš„å…³ç³»\n\n`#æ•°æ®ç»“æ„` `#æ“ä½œç³»ç»Ÿ` \n\n\n## ç›®å½•\n<!-- toc -->\n ## æ•°æ®ç»“æ„ä¸ç‰©ç†ç»“æ„ \n\n- æ•°ç»„ï¼šä»£è¡¨`è¿ç»­å­˜å‚¨`çš„ç‰©ç†ç»“æ„\n- é“¾è¡¨ï¼šä»£è¡¨`åˆ†æ•£å­˜å‚¨`çš„ç‰©ç†ç»“æ„\n\n**ç‰©ç†ç»“æ„åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå†³å®šäº†ç¨‹åºå¯¹å†…å­˜å’Œç¼“å­˜çš„ä½¿ç”¨æ•ˆç‡**ï¼Œè¿›è€Œå½±å“ç®—æ³•ç¨‹åºçš„æ•´ä½“æ€§èƒ½\n\n## è®¡ç®—æœºå­˜å‚¨è®¾å¤‡\n\n- **ç¡¬ç›˜**ç”¨äºé•¿æœŸå­˜å‚¨å¤§é‡æ•°æ®\n- **å†…å­˜**ç”¨äºä¸´æ—¶å­˜å‚¨ç¨‹åºè¿è¡Œä¸­æ­£åœ¨å¤„ç†çš„æ•°æ®\n- è€Œ**ç¼“å­˜**åˆ™ç”¨äºå­˜å‚¨ç»å¸¸è®¿é—®çš„æ•°æ®å’ŒæŒ‡ä»¤\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240921073610.png)\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240921073632.png)\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240921073754.png)\n\n## æ•°æ®ç»“æ„ä¸å†…å­˜çš„å…³ç³»\n\næ•°ç»„å’Œé“¾è¡¨åœ¨å†…å­˜åˆ©ç”¨æ–¹é¢å„æœ‰ä¼˜ç¼ºç‚¹\n- æ•°ç»„ç©ºé—´åˆ©ç”¨ç‡é«˜ä½†æ‰©å®¹æˆæœ¬å¤§\n\t- ä¼˜ç‚¹\n\t\t- æ•°ç»„å­˜å‚¨æ˜¯æ•´å—çš„ï¼Œæ‰€ä»¥ä¸å®¹æ˜“å¯¼è‡´å†…å­˜ç¢ç‰‡åŒ–\n\t- ç¼ºç‚¹\n\t\t- å¯èƒ½å¯¼è‡´å†…å­˜æµªè´¹\n\t\t- æ‰©å®¹æˆæœ¬é«˜\n- é“¾è¡¨çµæ´»æ€§å¼ºä½†æ˜“å¯¼è‡´å†…å­˜ç¢ç‰‡åŒ–\n\t- é“¾è¡¨ä»¥â€œèŠ‚ç‚¹â€ä¸ºå•ä½è¿›è¡ŒåŠ¨æ€å†…å­˜åˆ†é…å’Œå›æ”¶\n\t- ä½†åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œ**éšç€åå¤ç”³è¯·ä¸é‡Šæ”¾å†…å­˜ï¼Œç©ºé—²å†…å­˜çš„ç¢ç‰‡åŒ–ç¨‹åº¦ä¼šè¶Šæ¥è¶Šé«˜**\n\n\n## æ•°æ®ç»“æ„ä¸ç¼“å­˜æ•ˆç‡\n\nå½“ CPU å°è¯•è®¿é—®çš„æ•°æ®ä¸åœ¨ç¼“å­˜ä¸­æ—¶ï¼Œå°±ä¼šå‘ç”Ÿ**ç¼“å­˜æœªå‘½ä¸­**ï¼ˆcache missï¼‰ï¼Œæ­¤æ—¶ CPU ä¸å¾—ä¸ä»é€Ÿåº¦è¾ƒæ…¢çš„å†…å­˜ä¸­åŠ è½½æ‰€éœ€æ•°æ®\n\næ‰€ä»¥ï¼Œ**â€œç¼“å­˜æœªå‘½ä¸­â€è¶Šå°‘ï¼ŒCPU è¯»å†™æ•°æ®çš„æ•ˆç‡å°±è¶Šé«˜**ï¼Œç¨‹åºæ€§èƒ½ä¹Ÿå°±è¶Šå¥½ï¼›\n\n\nä¸ºäº†å°½å¯èƒ½è¾¾åˆ°æ›´é«˜çš„æ•ˆç‡ï¼Œç¼“å­˜ä¼šé‡‡å–ä»¥ä¸‹æ•°æ®**åŠ è½½æœºåˆ¶**ã€‚\n- **ç¼“å­˜è¡Œ**ï¼šç¼“å­˜ä¸æ˜¯å•ä¸ªå­—èŠ‚åœ°å­˜å‚¨ä¸åŠ è½½æ•°æ®ï¼Œè€Œæ˜¯**ä»¥ç¼“å­˜è¡Œä¸ºå•ä½**ã€‚ç›¸æ¯”äºå•ä¸ªå­—èŠ‚çš„ä¼ è¾“ï¼Œç¼“å­˜è¡Œçš„ä¼ è¾“å½¢å¼æ›´åŠ é«˜æ•ˆã€‚\n- **é¢„å–æœºåˆ¶**ï¼šå¤„ç†å™¨ä¼šå°è¯•é¢„æµ‹æ•°æ®è®¿é—®æ¨¡å¼ï¼ˆä¾‹å¦‚é¡ºåºè®¿é—®ã€å›ºå®šæ­¥é•¿è·³è·ƒè®¿é—®ç­‰ï¼‰ï¼Œå¹¶æ ¹æ®ç‰¹å®šæ¨¡å¼å°†æ•°æ®åŠ è½½è‡³ç¼“å­˜ä¹‹ä¸­ï¼Œä»è€Œæå‡å‘½ä¸­ç‡ã€‚\n- **ç©ºé—´å±€éƒ¨æ€§**ï¼šå¦‚æœä¸€ä¸ªæ•°æ®è¢«è®¿é—®ï¼Œé‚£ä¹ˆ**å®ƒé™„è¿‘çš„æ•°æ®å¯èƒ½è¿‘æœŸä¹Ÿä¼šè¢«è®¿é—®**ã€‚å› æ­¤ï¼Œç¼“å­˜åœ¨åŠ è½½æŸä¸€æ•°æ®æ—¶ï¼Œä¹Ÿä¼šåŠ è½½å…¶é™„è¿‘çš„æ•°æ®ï¼Œä»¥æé«˜å‘½ä¸­ç‡ã€‚\n- **æ—¶é—´å±€éƒ¨æ€§**ï¼šå¦‚æœä¸€ä¸ªæ•°æ®è¢«è®¿é—®ï¼Œé‚£ä¹ˆ**å®ƒåœ¨ä¸ä¹…çš„å°†æ¥å¾ˆå¯èƒ½å†æ¬¡è¢«è®¿é—®**ã€‚ç¼“å­˜åˆ©ç”¨è¿™ä¸€åŸç†ï¼Œé€šè¿‡ä¿ç•™æœ€è¿‘è®¿é—®è¿‡çš„æ•°æ®æ¥æé«˜å‘½ä¸­ç‡\n\n**æ•°ç»„å’Œé“¾è¡¨å¯¹ç¼“å­˜çš„åˆ©ç”¨æ•ˆç‡æ˜¯ä¸åŒçš„**ï¼Œä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ã€‚\n- **å ç”¨ç©ºé—´**ï¼šé“¾è¡¨å…ƒç´ æ¯”æ•°ç»„å…ƒç´ å ç”¨ç©ºé—´æ›´å¤šï¼Œå¯¼è‡´ç¼“å­˜ä¸­å®¹çº³çš„æœ‰æ•ˆæ•°æ®é‡æ›´å°‘ã€‚\n- **ç¼“å­˜è¡Œ**ï¼šé“¾è¡¨æ•°æ®åˆ†æ•£åœ¨å†…å­˜å„å¤„ï¼Œè€Œç¼“å­˜æ˜¯â€œ**æŒ‰è¡Œ**åŠ è½½â€çš„ï¼Œå› æ­¤åŠ è½½åˆ°æ— æ•ˆæ•°æ®çš„æ¯”ä¾‹æ›´é«˜ã€‚\n- **é¢„å–æœºåˆ¶**ï¼šæ•°ç»„æ¯”é“¾è¡¨çš„æ•°æ®è®¿é—®æ¨¡å¼æ›´å…·â€œå¯é¢„æµ‹æ€§â€ï¼Œå³ç³»ç»Ÿæ›´å®¹æ˜“çŒœå‡ºå³å°†è¢«åŠ è½½çš„æ•°æ®ã€‚\n- **ç©ºé—´å±€éƒ¨æ€§**ï¼šæ•°ç»„è¢«å­˜å‚¨åœ¨é›†ä¸­çš„å†…å­˜ç©ºé—´ä¸­ï¼Œå› æ­¤è¢«åŠ è½½æ•°æ®é™„è¿‘çš„æ•°æ®æ›´æœ‰å¯èƒ½å³å°†è¢«è®¿é—®ã€‚\n\n### ç»“è®º\n\næ€»ä½“è€Œè¨€ï¼Œ**æ•°ç»„å…·æœ‰æ›´é«˜çš„ç¼“å­˜å‘½ä¸­ç‡ï¼Œå› æ­¤å®ƒåœ¨æ“ä½œæ•ˆç‡ä¸Šé€šå¸¸ä¼˜äºé“¾è¡¨** \n","14c2c57868e25214afc9c2147322197b":"\n# æ ˆä¸åˆ—é˜Ÿ\n\n`#2024/08/11` `#ç®—æ³•` `#æ•°æ®ç»“æ„` \n\n\n## ç›®å½•\n<!-- toc -->\n ## æ“ä½œå—é™çš„æ•°æ®ç»“æ„ï¼šæ ˆå’Œåˆ—é˜Ÿ \n\n- **é˜Ÿåˆ—**åªèƒ½åœ¨ä¸€ç«¯æ’å…¥å…ƒç´ ï¼Œå¦ä¸€ç«¯åˆ é™¤å…ƒç´ \n- **æ ˆ**åªèƒ½åœ¨æŸä¸€ç«¯æ’å…¥å’Œåˆ é™¤å…ƒç´ \n- **åŒå‘é˜Ÿåˆ—**å…¼å…·**æ ˆä¸é˜Ÿåˆ—**çš„é€»è¾‘\n\n\n## å…¶ä»–æ³¨æ„ç‚¹\n\n- æµè§ˆå™¨çš„å‰è¿›åé€€åŠŸèƒ½æœ¬è´¨ä¸Šæ˜¯â€œæ ˆâ€çš„ä½“ç°\n\n## ç›®å½•\n\n- [1. æ ˆï¼šPython æè¿°](/post/6b2f2fb1ab285b3984eb9eb2a59e3351.html)\n- [2. åˆ—é˜Ÿï¼šPython æè¿°](/post/2e148dda03e1586281a84187ee7dc854.html)\n- [3. åŒå‘é˜Ÿåˆ—ï¼šPython æè¿°](/post/b090cf49997852d2bbc3c1e906a69cdc.html)","6b2f2fb1ab285b3984eb9eb2a59e3351":"\n# æ ˆï¼šPython æè¿°\n\n`#æ•°æ®ç»“æ„/æ ˆ`  `#æ ˆ`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ ˆçš„å®šä¹‰ \n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240921080651.png)\n\n## 2. æ ˆçš„å¸¸ç”¨æ“ä½œ\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240921081602.png)\n\n## 3. åŸºäºæ•°ç»„çš„å®ç°\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240921081139.png)\n\n```python\nclass ArrayStack:\n    \"\"\"æ„é€ æ–¹æ³•ï¼šåˆå§‹åŒ–ä¸€ä¸ªç©ºæ ˆ\"\"\"\n    def __init__(self):\n        self.data = []\n    \"\"\"è¿”å›æ ˆçš„å¤§å°\"\"\"\n    def size(self):\n        return len(self.data)\n    \"\"\"åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º\"\"\"\n    def isEmpty(self):\n        return len(self.data) == 0\n    \"\"\"å°† item å‹å…¥æ ˆä¸­\"\"\"\n    def push(self, item):\n        self.data.append(item)\n    \"\"\"å°†æ ˆé¡¶å…ƒç´ å¼¹å‡º\"\"\"\n    def pop(self):\n        if self.isEmpty():\n            raise Exception(\"stack is empty\")\n        return self.data.pop()\n    \"\"\"è¿”å›æ ˆé¡¶å…ƒç´ \"\"\"\n    def peek(self):\n        if self.isEmpty():\n            raise Exception(\"stack is empty\")\n        return self.data[-1]\n```\n\n## 4. åŸºäºé“¾è¡¨çš„å®ç°\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240921081205.png)\n\n> [!danger]\n> å…³é”®æ˜¯è¦å…³æ³¨ä¸Šå›¾ï¼Œå…¶å®å°±æ˜¯ä¸€æ¡å•é“¾è¡¨ 5â†’2â†’3â†’1â†’null ï¼Œç„¶åå…¥æ ˆå‡ºæ ˆéƒ½å‚è€ƒå•é“¾è¡¨æ¥æ“ä½œå³å¯\n\n```python\n\"\"\"èŠ‚ç‚¹ç±»: ç”¨äºæ„é€ é“¾è¡¨èŠ‚ç‚¹\"\"\"\nclass ListNode:\n    def __init__(self,val:int) -> None:\n        # èŠ‚ç‚¹å€¼\n        self.val = val\n        # listNode | Node ä»£è¡¨ self.next çš„å€¼å¯èƒ½æ˜¯ listNode | Node\n        self.next:ListNode | None = None\n\nclass LinkedStack:\n    \"\"\"æ„é€ æ–¹æ³•ï¼šåˆå§‹åŒ–ä¸€ä¸ªç©ºæ ˆ\"\"\"\n    def __init__(self):\n        # æ ˆé¡¶å…ƒç´ \n        self.head:ListNode | None = None\n        self.sz = 0\n\n    \"\"\"è¿”å›æ ˆçš„å¤§å°\"\"\"\n    def size(self):\n        return self.sz\n\n    \"\"\"åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º\"\"\"\n    def isEmpty(self):\n        return self.sz == 0\n\n    \"\"\"å°† item å‹å…¥æ ˆä¸­\"\"\"\n    def push(self, val):\n        node = ListNode(val)\n        # å°†æ–°èŠ‚ç‚¹çš„ next æŒ‡å‘åŸæ¥çš„æ ˆé¡¶å…ƒç´ \n        node.next = self.head\n        # æ›´æ–°æ ˆé¡¶å…ƒç´ \n        # å°† head æŒ‡å‘æ–°èŠ‚ç‚¹\n        self.head = node\n        self.sz += 1\n\n    \"\"\"å°†æ ˆé¡¶å…ƒç´ å¼¹å‡º\"\"\"\n    def pop(self):\n        if self.isEmpty():\n            raise Exception(\"stack is empty\")\n        # ä¸´æ—¶ä¿å­˜æ ˆé¡¶å…ƒç´ \n        item = self.head\n        # å°† head æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ \n        # åˆ é™¤æ ˆé¡¶å…ƒç´ ï¼Œç›´æ¥å°† head æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ å³å¯\n        if self.head is not None:\n            self.head = self.head.next\n        self.sz -= 1\n        return item\n\n    \"\"\"è¿”å›æ ˆé¡¶å…ƒç´ \"\"\"\n    def peek(self):\n        if self.isEmpty():\n            raise Exception(\"stack is empty\")\n        if self.head is not None:\n            return self.head\n\n```\n\n## 5. ä¸¤ç§å®ç°çš„å¯¹æ¯”\n\n- æ—¶é—´\n\t- åŸºäºæ•°ç»„å®ç°çš„æ ˆåœ¨è§¦å‘æ‰©å®¹æ—¶æ•ˆç‡ä¼šé™ä½ï¼Œä½†ç”±äºæ‰©å®¹æ˜¯ä½é¢‘æ“ä½œï¼Œå› æ­¤å¹³å‡æ•ˆç‡æ›´é«˜ã€‚\n\t- åŸºäºé“¾è¡¨å®ç°çš„æ ˆå¯ä»¥æä¾›æ›´åŠ ç¨³å®šçš„æ•ˆç‡è¡¨ç°\n- ç©ºé—´\n\t- æ•°ç»„éœ€è¦å¯èƒ½ä¼šé€ æˆä¸€ç‚¹çš„ç©ºé—´æµªè´¹\n\t- é“¾è¡¨èŠ‚ç‚¹éœ€è¦é¢å¤–å­˜å‚¨æŒ‡é’ˆï¼Œ**å› æ­¤é“¾è¡¨èŠ‚ç‚¹å ç”¨çš„ç©ºé—´ç›¸å¯¹è¾ƒå¤§**\n\n## 6. æ ˆçš„åº”ç”¨\n\n- æµè§ˆå™¨ä¸­çš„åé€€ä¸å‰è¿›\n- è½¯ä»¶ä¸­çš„æ’¤é”€ä¸åæ’¤é”€\n- ç¨‹åºå†…å­˜ç®¡ç†ã€‚æ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œç³»ç»Ÿéƒ½ä¼šåœ¨æ ˆé¡¶æ·»åŠ ä¸€ä¸ª**æ ˆå¸§**ï¼Œç”¨äºè®°å½•å‡½æ•°çš„**ä¸Šä¸‹æ–‡ä¿¡æ¯**ã€‚åœ¨é€’å½’å‡½æ•°ä¸­ï¼Œå‘ä¸‹é€’æ¨é˜¶æ®µä¼šä¸æ–­æ‰§è¡Œå…¥æ ˆæ“ä½œï¼Œè€Œå‘ä¸Šå›æº¯é˜¶æ®µåˆ™ä¼šä¸æ–­æ‰§è¡Œå‡ºæ ˆæ“ä½œ\n","2e148dda03e1586281a84187ee7dc854":"\n# åˆ—é˜Ÿï¼šPython æè¿°\n\n`#åˆ—é˜Ÿ` `#ç®—æ³•/åˆ—é˜Ÿ` `#æ•°æ®ç»“æ„/åˆ—é˜Ÿ`  `#ç¯å½¢æ•°ç»„`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å®šä¹‰ \n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922084616.png)\n\n## 2. åˆ—é˜Ÿçš„å¸¸ç”¨æ“ä½œ\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922084657.png)\n\n> JavaScript çš„**å…¥é˜Ÿ**æ“ä½œæ˜¯æ˜¯ `push`  ï¼Œ**å‡ºé˜Ÿ**æ“ä½œæ˜¯ `shift`\n\n## 3. åŸºäºé“¾è¡¨çš„å®ç°\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922090013.png)\n\nå…¥é˜Ÿ \n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922090023.png)\n\nå‡ºé˜Ÿ\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922090053.png)\n\n### 3.1. å®Œå…¨å®ç°\n```python\n\"\"\"èŠ‚ç‚¹ç±»: ç”¨äºæ„é€ é“¾è¡¨èŠ‚ç‚¹\"\"\"\nclass ListNode:\n    def __init__(self,val:int) -> None:\n        # èŠ‚ç‚¹å€¼\n        self.val = val\n        # listNode | Node ä»£è¡¨ self.next çš„å€¼å¯èƒ½æ˜¯ listNode | Node\n        self.next:ListNode | None = None\n\n# åŸºäºé“¾è¡¨çš„é˜Ÿåˆ—\nclass linkedQueue:\n    def __init__(self):\n        # é˜Ÿåˆ—çš„å¤´\n        self.head = None\n        # é˜Ÿåˆ—çš„å¤§å°\n        self.sz = 1\n\n    # è¿”å›é˜Ÿåˆ—çš„å¤§å°\n    def size(self):\n        return self.sz\n\n    # åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º\n    def isEmpty(self):\n        return self.sz == 0\n\n    # å…¥é˜Ÿ\n    def enqueue(self, val):\n        # åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹\n        node = ListNode(val)\n        # å¦‚æœé˜Ÿåˆ—ä¸ºç©º\n        if self.head is None:\n            self.head = node\n        # å¦‚æœé˜Ÿåˆ—ä¸ä¸ºç©º\n        else:\n            # å°†æ–°èŠ‚ç‚¹æ’å…¥åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨ ã€åº•éƒ¨ã€‘\n            p = self.head\n            while p.next is not None:\n                p = p.next\n            p.next = node\n        self.sz += 1\n\n    # å‡ºé˜Ÿ\n    def dequeue(self):\n        if self.isEmpty():\n            raise Exception(\"queue is empty\")\n        # ä¿å­˜é˜Ÿå¤´å…ƒç´ \n        item = self.head\n        # åˆ é™¤é˜Ÿå¤´å…ƒç´ \n        # ç›´æ¥å°† head æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ å³å¯\n        # ä½†æ˜¯è¦æ³¨æ„ï¼Œå¦‚æœ head æ˜¯ Noneï¼Œå°±ä¸éœ€è¦å†æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ äº†\n        # å› ä¸º head æ˜¯ None è¯´æ˜é˜Ÿåˆ—ä¸ºç©ºï¼Œæ²¡æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ äº†\n        # æ‰€ä»¥è¿™é‡Œéœ€è¦åˆ¤æ–­ä¸€ä¸‹ head æ˜¯å¦æ˜¯ None\n        if self.head is not None:\n            self.head = self.head.next\n        self.sz -= 1\n        return item\n\n    # è¿”å›é˜Ÿå¤´å…ƒç´ \n    def peek(self):\n        if self.isEmpty():\n            raise Exception(\"queue is empty\")\n        return self.head\n```\n\n### 3.2. åŸºäº deque çš„å®ç°\n\n```python\nfrom collections import deque\n\n# ç”¨é“¾è¡¨ä½œä¸ºåº•å±‚æ•°æ®ç»“æ„å®ç°é˜Ÿåˆ—\n# Python çš„ deque å°±æ˜¯åŒé“¾è¡¨\nclass MyLinkedQueue:\n    def __init__(self):\n        self.list = deque()\n\n    # å‘é˜Ÿå°¾æ’å…¥å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)\n    def enqueue(self, e):\n        self.list.append(e)\n\n    # ä»é˜Ÿå¤´åˆ é™¤å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)\n    def dequeue(self):\n        # ä½¿ç”¨åŒç«¯é˜Ÿåˆ—çš„ popleft æ–¹æ³•\n        # å³ä»é˜Ÿå¤´åˆ é™¤å…ƒç´ \n        # popleft ä»£è¡¨ä»å·¦è¾¹åˆ é™¤å…ƒç´ \n        return self.list.popleft()\n\n    # æŸ¥çœ‹é˜Ÿå¤´å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)\n    def peek(self):\n        return self.list[0]\n\n    # è¿”å›é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)\n    def size(self):\n        return len(self.list)\n\n```\n\n## 4. åŸºäºæ•°ç»„çš„å®ç°\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922092307.png)\n\n### 4.1. å…ˆçœ‹ä¸‹ç¯å½¢æ•°ç»„æŠ€å·§\n\n> [!danger]\n> ç¯å½¢æ•°ç»„æŠ€å·§åˆ©ç”¨æ±‚æ¨¡ï¼ˆä½™æ•°ï¼‰è¿ç®—ï¼Œå°†æ™®é€šæ•°ç»„å˜æˆé€»è¾‘ä¸Šçš„ç¯å½¢æ•°ç»„ï¼Œå¯ä»¥è®©æˆ‘ä»¬**ç”¨Â `O(1)`Â çš„æ—¶é—´åœ¨æ•°ç»„å¤´éƒ¨å¢åˆ å…ƒç´ **\n\nå…ˆçœ‹ä¸ªç¤ºä¾‹ï¼ŒæŠŠæ•°ç»„å¾ªç¯æ‰“å°\n\n```python\narr = [1, 2, 3, 4, 5]\n\n# å¾ªç¯æ‰“å°åˆ—è¡¨ï¼Œå½“æ‰“å°å®Œæˆåï¼Œç»§ç»­æ‰“å°åˆ—è¡¨ï¼Œä¸€ç›´å¾ªç¯\ni = 0\nwhile i < len(arr):\n    print(arr[i])\n    # å½“ i ç­‰äºåˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå°† i è®¾ç½®ä¸º 0\n    # æ±‚æ¨¡è¿ç®— %ï¼Œä¹Ÿå°±æ˜¯æ±‚ä½™æ•°\n    # å½“ i åˆ°è¾¾æ•°ç»„æœ«å°¾å…ƒç´ æ—¶ï¼Œi + 1 å’Œ arr.length å–ä½™æ•°åˆä¼šå˜æˆ 0ï¼Œå³ä¼šå›åˆ°æ•°ç»„å¤´éƒ¨\n    # è¿™æ ·å°±åœ¨é€»è¾‘ä¸Šå½¢æˆäº†ä¸€ä¸ªç¯å½¢æ•°ç»„ï¼Œæ°¸è¿œéå†ä¸å®Œ\n    i = (i + 1) % len(arr)\n\n```\n\n#### 4.1.1. æ¯”è¾ƒå¤æ‚çš„ç‰ˆæœ¬ï¼šè€ƒè™‘æ‰©å®¹ç­‰\n\n> [!danger]\n> çŸ¥é“å°±è¡Œï¼Œæ²¡å¿…è¦ï¼ŒPython å†…ç½®çš„å¾ˆå¤šå†…å®¹è¶³å¤Ÿç”¨äº†ï¼Œä¸éœ€è¦å®ç°\n\n>  `[start, end)` æ³¨æ„åŒºé—´\n```python\nclass CycleArray:\n    def __init__(self, size: int) -> None:\n        # æ•°ç»„å®¹é‡\n        self.capacity = size\n        # æ•°ç»„,åˆå§‹åŒ–ä¸º None\n        self.arr = [None] * size\n        # start æŒ‡é’ˆ æŒ‡å‘ç¬¬ä¸€ä¸ªæœ‰æ•ˆå…ƒç´ çš„ç´¢å¼•\n        self.start = 0\n        # end æŒ‡é’ˆ æŒ‡å‘æœ€åä¸€ä¸ªæœ‰æ•ˆå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®ç´¢å¼•\n        self.end = 0\n        self.count = 0\n\n    def resize(self, newSize):\n        # åˆ›å»ºæ–°æ•°ç»„\n        new_arr = [None] * newSize\n        # å°†åŸæ•°ç»„çš„å…ƒç´ å¤åˆ¶åˆ°æ–°æ•°ç»„\n        for i in range(self.count):\n            new_arr[i] = self.arr[(self.start + i) % self.capacity]\n        # æ›´æ–°æ•°ç»„\n        self.arr = new_arr\n        # æ›´æ–° start æŒ‡é’ˆ\n        self.start = 0\n        # æ›´æ–° end æŒ‡é’ˆ\n        self.end = self.count\n        # æ›´æ–°å®¹é‡\n        self.capacity = newSize\n\n    # åœ¨é˜Ÿå¤´æ·»åŠ å…ƒç´ \n    def add_first(self, val):\n        # å¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œæ‰©å®¹ 2 å€\n        if self.is_full():\n            self.resize(self.capacity * 2)\n        # å› ä¸º start æ˜¯é—­åŒºé—´ï¼Œæ‰€ä»¥å…ˆå·¦ç§»ï¼Œå†èµ‹å€¼\n        self.start = (self.start - 1 + self.capacity) % self.capacity\n        self.arr[self.start] = val\n        self.count += 1\n    # åˆ é™¤é˜Ÿå¤´å…ƒç´ \n    def remove_first(self):\n        if self.is_empty():\n            raise Exception(\"Array is empty\")\n        self.arr[self.start] = None\n        self.start = (self.start + 1) % self.capacity\n        self.count -= 1\n        if self.count > 0 and self.count == self.capacity // 4:\n            self.resize(self.capacity // 2)\n\n    def add_last(self, val):\n        if self.is_full():\n            self.resize(self.capacity * 2)\n        self.arr[self.end] = val\n        self.end = (self.end + 1) % self.capacity\n        self.count += 1\n\n    def remove_last(self):\n        if self.is_empty():\n            raise Exception(\"Array is empty\")\n        self.end = (self.end - 1 + self.capacity) % self.capacity\n        self.arr[self.end] = None\n        self.count -= 1\n        if self.count > 0 and self.count == self.capacity // 4:\n            self.resize(self.capacity // 2)\n\n    def get_first(self):\n        if self.is_empty():\n            raise Exception(\"Array is empty\")\n        return self.arr[self.start]\n\n    def get_last(self):\n        if self.is_empty():\n            raise Exception(\"Array is empty\")\n        return self.arr[(self.end - 1 + self.capacity) % self.capacity]\n\n    def is_full(self):\n        return self.count == self.capacity\n\n    def size(self):\n        return self.count\n\n    def is_empty(self):\n        return self.count == 0\n\n```\n\n#### 4.1.2. ä½¿ç”¨ dequeï¼šæœ€å¥½çš„æ–¹å¼\n\n```python\nfrom collections import deque\n\n# åˆ›å»ºä¸€ä¸ªæœ€å¤§é•¿åº¦ä¸º 5 çš„ç¯å½¢æ•°ç»„\ncircular_array = deque(maxlen=5)\n\n# æ·»åŠ å…ƒç´ \nfor i in range(7):\n    circular_array.append(i)\n    print(f\"After appending {i}: {list(circular_array)}\")\n    \n# è¾“å‡ºï¼š\n# After appending 0: [0]\n# After appending 1: [0, 1]\n# After appending 2: [0, 1, 2]\n# After appending 3: [0, 1, 2, 3]\n# After appending 4: [0, 1, 2, 3, 4]\n# After appending 5: [1, 2, 3, 4, 5]\n# After appending 6: [2, 3, 4, 5, 6]\n    \n# ä»å·¦ä¾§æ·»åŠ å…ƒç´ \ncircular_array.appendleft(10)\nprint(f\"After appendleft 10: {list(circular_array)}\")\n# è¾“å‡ºï¼šAfter appendleft 10: [10, 2, 3, 4, 5]\n```\n\n### 4.2. ä½¿ç”¨ deque å®ç°åˆ—é˜Ÿï¼šæœ€ä½³æ–¹æ¡ˆ\n\n```python\nfrom collections import deque\n\n# ç”¨deque æ¥å®ç°é˜Ÿåˆ—\nclass MyQueue:\n    def __init__(self):\n        self.list = deque()\n\n    # å‘é˜Ÿå°¾æ’å…¥å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)\n    def enqueue(self, e):\n        self.list.append(e)\n\n    # ä»é˜Ÿå¤´åˆ é™¤å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)\n    def dequeue(self):\n        return self.list.popleft()\n\n    # æŸ¥çœ‹é˜Ÿå¤´å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)\n    def peek(self):\n        return self.list[0]\n\n    # è¿”å›é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)\n    def size(self):\n        return len(self.list)\n\n```\n\n## 5. å†çœ‹ä¸‹ç¯å½¢æ•°ç»„\n\n### 5.1. å®ç°æ–¹å¼\n\n1. å¯¹äºå¤§å¤šæ•°æƒ…å†µï¼Œ`collections.deque`Â æ˜¯æœ€ä½³é€‰æ‹©ï¼Œå› ä¸ºå®ƒæ˜¯ Python æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œæ€§èƒ½å¥½ï¼Œä½¿ç”¨ç®€å•ã€‚\n2. å¦‚æœä½ éœ€è¦æ›´å¤šçš„æ§åˆ¶æˆ–è€…æƒ³è¦ç†è§£ç¯å½¢æ•°ç»„çš„å·¥ä½œåŸç†ï¼Œå¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªç®€å•çš„ç‰ˆæœ¬ã€‚\n3. å¯¹äºç‰¹æ®Šéœ€æ±‚ï¼Œæ¯”å¦‚éœ€è¦è¿›è¡Œå¤§é‡æ•°å€¼è®¡ç®—ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ **NumPy**ã€‚\n4. å¦‚æœéœ€è¦æ›´ä¸“é—¨çš„**ç¯å½¢ç¼“å†²åŒº**å®ç°ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å¦‚ **CircularBuffer**ã€‚\n\n### 5.2. ä½¿ç”¨åœºæ™¯\n\n1. ç¼“å†²åŒºç®¡ç†\n    - éŸ³é¢‘å’Œè§†é¢‘æµå¤„ç†ï¼šåœ¨å¤„ç†è¿ç»­çš„éŸ³é¢‘æˆ–è§†é¢‘æ•°æ®æ—¶ï¼Œç¯å½¢ç¼“å†²åŒºå¯ä»¥ç”¨æ¥å­˜å‚¨æœ€è¿‘çš„ä¸€æ®µæ•°æ®ï¼Œä¾¿äº**å›æ”¾æˆ–å¤„ç†**ã€‚\n    - ç½‘ç»œæ•°æ®åŒ…å¤„ç†ï¼šç½‘ç»œè®¾å¤‡å¯ä»¥ä½¿ç”¨**ç¯å½¢ç¼“å†²åŒº**æ¥ä¸´æ—¶å­˜å‚¨æ¥æ”¶åˆ°çš„æ•°æ®åŒ…ï¼Œç­‰å¾…å¤„ç†ã€‚\n2. ä»»åŠ¡è°ƒåº¦\n    - æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹è°ƒåº¦ï¼š**æ“ä½œç³»ç»Ÿå¯ä»¥ä½¿ç”¨ç¯å½¢æ•°ç»„æ¥å®ç°è½®è½¬è°ƒåº¦ç®—æ³•**ï¼Œå¾ªç¯åˆ†é…CPUæ—¶é—´ç»™ä¸åŒçš„è¿›ç¨‹ã€‚\n    - **å®šæ—¶ä»»åŠ¡**ç®¡ç†ï¼šåœ¨éœ€è¦å‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡çš„ç³»ç»Ÿä¸­ï¼Œç¯å½¢æ•°ç»„å¯ä»¥ç”¨æ¥ç®¡ç†è¿™äº›ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºã€‚\n3. æ•°æ®æµå¤„ç†\n    - æ»‘åŠ¨çª—å£ç®—æ³•ï¼šåœ¨å¤„ç†æ—¶é—´åºåˆ—æ•°æ®æ—¶ï¼Œç¯å½¢æ•°ç»„å¯ä»¥é«˜æ•ˆåœ°å®ç°æ»‘åŠ¨çª—å£ï¼Œç”¨äºè®¡ç®—ç§»åŠ¨å¹³å‡ç­‰æŒ‡æ ‡ã€‚\n    - å®æ—¶æ•°æ®åˆ†æï¼šä¿å­˜**æœ€è¿‘Nä¸ªæ•°æ®ç‚¹**è¿›è¡Œå®æ—¶åˆ†æå’Œç»Ÿè®¡ã€‚\n4. æ¸¸æˆå¼€å‘\n    - å›æ”¾åŠŸèƒ½ï¼šåœ¨æ¸¸æˆä¸­å®ç°æœ€è¿‘Nç§’çš„å³æ—¶å›æ”¾åŠŸèƒ½ã€‚\n    - å¾ªç¯åœ°å›¾ï¼šä¸€äº›2Dæ¸¸æˆä¸­çš„æ— é™å¾ªç¯åœ°å›¾å¯ä»¥ç”¨ç¯å½¢æ•°ç»„æ¥å®ç°ã€‚\n5. å†…å­˜ç®¡ç†\n    - å†…å­˜åˆ†é…å™¨ï¼šæŸäº›å†…å­˜åˆ†é…ç®—æ³•ä½¿ç”¨ç¯å½¢æ•°ç»„æ¥ç®¡ç†å†…å­˜å—ã€‚\n6. é€šä¿¡ç³»ç»Ÿ\n    - æ¶ˆæ¯é˜Ÿåˆ—ï¼šåœ¨ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ä¸­ï¼Œç¯å½¢ç¼“å†²åŒºå¯ä»¥ç”¨ä½œæ¶ˆæ¯é˜Ÿåˆ—ã€‚\n7. å†å²è®°å½•ç®¡ç†\n    - å‘½ä»¤å†å²ï¼šä¿å­˜ç”¨æˆ·æœ€è¿‘æ‰§è¡Œçš„Nä¸ªå‘½ä»¤ï¼Œä»¥ä¾¿å¿«é€Ÿè®¿é—®ã€‚\n    - æµè§ˆå™¨å†å²ï¼šç®¡ç†æµè§ˆå™¨çš„å‰è¿›/åé€€åŠŸèƒ½ã€‚\n8. æ•°æ®å‹ç¼©\n    - LZ77ç­‰å‹ç¼©ç®—æ³•ï¼šåœ¨æŸäº›æ•°æ®å‹ç¼©ç®—æ³•ä¸­ï¼Œç¯å½¢ç¼“å†²åŒºç”¨äºå­˜å‚¨æœ€è¿‘å¤„ç†è¿‡çš„æ•°æ®ã€‚\n9. å®æ—¶ç³»ç»Ÿ\n    - ä¼ æ„Ÿå™¨æ•°æ®å¤„ç†ï¼šåœ¨å®æ—¶ç³»ç»Ÿä¸­ï¼Œç¯å½¢ç¼“å†²åŒºå¯ä»¥ç”¨äºå­˜å‚¨å’Œå¤„ç†æ¥è‡ªä¼ æ„Ÿå™¨çš„è¿ç»­æ•°æ®æµã€‚\n10. æ•°æ®åº“ç³»ç»Ÿ\n    - æ—¥å¿—ç®¡ç†ï¼šæŸäº›æ•°æ®åº“ç³»ç»Ÿä½¿ç”¨ç¯å½¢ç¼“å†²åŒºæ¥ç®¡ç†äº‹åŠ¡æ—¥å¿—ã€‚\n\n## 6. åˆ—é˜Ÿçš„ä½¿ç”¨åœºæ™¯\n\n- ä»»ä½•éœ€è¦å®ç°â€œå…ˆæ¥ååˆ°â€åŠŸèƒ½çš„åœºæ™¯ï¼Œä¾‹å¦‚æ‰“å°æœºçš„ä»»åŠ¡é˜Ÿåˆ—ã€é¤å…çš„å‡ºé¤é˜Ÿåˆ—ç­‰ï¼Œé˜Ÿåˆ—åœ¨è¿™äº›åœºæ™¯ä¸­å¯ä»¥æœ‰æ•ˆåœ°ç»´æŠ¤å¤„ç†é¡ºåºã€‚\n- åˆæ¯”å¦‚è´­ç‰©è€…ä¸‹å•åï¼Œè®¢å•å°†åŠ å…¥é˜Ÿåˆ—ä¸­ï¼Œç³»ç»Ÿéšåä¼šæ ¹æ®é¡ºåºå¤„ç†é˜Ÿåˆ—ä¸­çš„è®¢å•\n","b090cf49997852d2bbc3c1e906a69cdc":"\n# åŒå‘é˜Ÿåˆ—ï¼šPython æè¿°\n\n`#åŒå‘é˜Ÿåˆ—` `#åˆ—é˜Ÿ` `#æ•°æ®ç»“æ„` \n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å®šä¹‰ \n\nåŒå‘é˜Ÿåˆ—å…¼å…·**æ ˆä¸é˜Ÿåˆ—**çš„é€»è¾‘\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922112356.png)\n\nå…¶å®å°±ç›¸å¯¹äº JS ä¸­çš„ Array çš„å‡ ä¸ªæ–¹æ³•\n- å¯¹é¦–å…¥é˜Ÿï¼šunshift\n- é˜Ÿé¦–å‡ºé˜Ÿï¼šshift\n- é˜Ÿå°¾å…¥é˜Ÿï¼špush\n- é˜Ÿå°¾å‡ºé˜Ÿï¼špop() \n\n## 2. åŸºäºåŒå‘é“¾è¡¨çš„å®ç°\n\n**åŒå‘é“¾è¡¨** å¾ˆé€‚åˆä½œä¸ºåŒå‘é˜Ÿåˆ—çš„åº•å±‚æ•°æ®ç»“æ„ï¼Œå¦‚ä¸‹å›¾\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922114233.png)\n\nå…·ä½“å®ç°ä¸å±•å¼€äº†\n\n## 3. åŸºäºæ•°ç»„çš„å®ç°\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922114337.png)\n\næ³¨æ„éœ€è¦ç»´æŠ¤ä¸¤ä¸ªå˜é‡ï¼š`front` å’Œ `rear`\n\nå…·ä½“å®ç°ä¸å±•å¼€äº†\n\n## 4. æ ‡å‡†åº“ dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰\n\n\n> [!danger]\n> æ˜¯çš„ï¼Œå®ƒå°±æ˜¯ç±»ä¼¼äºçš„ JavaScript çš„ Arrayï¼Œå«æ³•ä¸ä¸€æ ·è€Œå·²\n\n- deque æ˜¯ \"double-ended queue\" çš„ç¼©å†™\n- deque æ˜¯ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—ï¼Œå…è®¸ä½ åœ¨é˜Ÿåˆ—çš„ä¸¤ç«¯é«˜æ•ˆåœ°è¿›è¡Œæ·»åŠ å’Œåˆ é™¤æ“ä½œã€‚å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶ä¸”åœ¨ä¸¤ç«¯çš„æ“ä½œæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(1)\n\n```python\nfrom collections import deque\n\n# deque çš„å¸¸ç”¨æ–¹æ³•\n\n# append(e)ï¼šå‘é˜Ÿå°¾æ’å…¥å…ƒç´  e\n\n# appendleft(e)ï¼šå‘é˜Ÿå¤´æ’å…¥å…ƒç´  e\n\n# pop()ï¼šä»é˜Ÿå°¾åˆ é™¤å…ƒç´ \n\n# popleft()ï¼šä»é˜Ÿå¤´åˆ é™¤å…ƒç´ \n\n# extend(iterable)ï¼šæ‰©å±•é˜Ÿåˆ—ï¼Œä»é˜Ÿå°¾æ’å…¥å…ƒç´ \n#   iterable ä¸ºå¯è¿­ä»£å¯¹è±¡ï¼Œå¦‚åˆ—è¡¨ã€å…ƒç»„ã€é›†åˆç­‰\n\n# extendleft(iterable)ï¼šæ‰©å±•é˜Ÿåˆ—ï¼Œä»é˜Ÿå¤´æ’å…¥å…ƒç´ \n#   iterable ä¸ºå¯è¿­ä»£å¯¹è±¡ï¼Œå¦‚åˆ—è¡¨ã€å…ƒç»„ã€é›†åˆç­‰\n\n# rotate(n)ï¼šå°†é˜Ÿåˆ—æ—‹è½¬ n æ­¥\n#  n > 0 æ—¶ï¼Œé˜Ÿåˆ—çš„æœ€å³è¾¹çš„ n ä¸ªå…ƒç´ ä¼šè¢«ç§»åŠ¨åˆ°æœ€å·¦è¾¹\n#  n < 0 æ—¶ï¼Œé˜Ÿåˆ—çš„æœ€å·¦è¾¹çš„ n ä¸ªå…ƒç´ ä¼šè¢«ç§»åŠ¨åˆ°æœ€å³è¾¹\n\n# reverse()ï¼šåè½¬é˜Ÿåˆ—\n\n# clear()ï¼šæ¸…ç©ºé˜Ÿåˆ—\n\n# count(e)ï¼šç»Ÿè®¡é˜Ÿåˆ—ä¸­å…ƒç´  e çš„ä¸ªæ•°\n\n# remove(e)ï¼šåˆ é™¤é˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªå‡ºç°çš„å…ƒç´  e\n\n# index(e)ï¼šè¿”å›é˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªå‡ºç°çš„å…ƒç´  e çš„ç´¢å¼•\n\n# insert(i, e)ï¼šåœ¨ç´¢å¼• i å¤„æ’å…¥å…ƒç´  e\n\n# copy()ï¼šå¤åˆ¶é˜Ÿåˆ—\n\n# maxlenï¼šé˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ï¼Œå¦‚æœä¸º None åˆ™è¡¨ç¤ºé˜Ÿåˆ—é•¿åº¦æ— é™åˆ¶\n#   maxlen åªèƒ½åœ¨åˆ›å»º deque å¯¹è±¡æ—¶æŒ‡å®šï¼Œä¸èƒ½é€šè¿‡æ–¹æ³•ä¿®æ”¹\n#   å¦‚æœé˜Ÿåˆ—é•¿åº¦è¶…è¿‡ maxlenï¼Œåˆ™ä¼šä»å¦ä¸€ç«¯åˆ é™¤å…ƒç´ \n\n```\n\n## 5. åŒå‘åˆ—é˜Ÿçš„ä½œç”¨\n\n\næˆ‘ä»¬çŸ¥é“ï¼Œè½¯ä»¶çš„â€œæ’¤é”€â€åŠŸèƒ½é€šå¸¸ä½¿ç”¨æ ˆæ¥å®ç°ï¼šç³»ç»Ÿå°†æ¯æ¬¡æ›´æ”¹æ“ä½œÂ `push`Â åˆ°æ ˆä¸­ï¼Œç„¶åé€šè¿‡Â `pop`Â å®ç°æ’¤é”€ã€‚ç„¶è€Œï¼Œè€ƒè™‘åˆ°ç³»ç»Ÿèµ„æºçš„é™åˆ¶ï¼Œè½¯ä»¶é€šå¸¸ä¼šé™åˆ¶æ’¤é”€çš„æ­¥æ•°ï¼ˆä¾‹å¦‚ä»…å…è®¸ä¿å­˜Â 50Â æ­¥ï¼‰ã€‚å½“æ ˆçš„é•¿åº¦è¶…è¿‡Â 50Â æ—¶ï¼Œè½¯ä»¶éœ€è¦åœ¨æ ˆåº•ï¼ˆé˜Ÿé¦–ï¼‰æ‰§è¡Œåˆ é™¤æ“ä½œã€‚**ä½†æ ˆæ— æ³•å®ç°è¯¥åŠŸèƒ½ï¼Œæ­¤æ—¶å°±éœ€è¦ä½¿ç”¨åŒå‘é˜Ÿåˆ—æ¥æ›¿ä»£æ ˆ**ã€‚è¯·æ³¨æ„ï¼Œâ€œæ’¤é”€â€çš„æ ¸å¿ƒé€»è¾‘ä»ç„¶éµå¾ªæ ˆçš„å…ˆå…¥åå‡ºåŸåˆ™ï¼Œåªæ˜¯åŒå‘é˜Ÿåˆ—èƒ½å¤Ÿæ›´åŠ çµæ´»åœ°å®ç°ä¸€äº›é¢å¤–é€»è¾‘ã€‚\n","9bd905d134c354a981178fbf43a7dded":"\n# å“ˆå¸Œè¡¨\n\n`#2024/08/11` `#ç®—æ³•` `#æ•°æ®ç»“æ„` \n\n\n## ç›®å½•\n<!-- toc -->\n ## ç›®å½• \n\n- å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰ï¼šä½¿ç”¨å“ˆå¸Œå‡½æ•°å°†é”®æ˜ å°„åˆ°å­˜å‚¨æ¡¶çš„ä½ç½®ï¼Œå®ç°å¿«é€ŸæŸ¥æ‰¾ã€‚\n\t- è¯¦è§ [1. å“ˆå¸Œè¡¨æ¦‚è¿°](/post/47f89cecb07d560192fb851f1b254511.html)\n- å“ˆå¸Œé›†åˆï¼ˆHash Setï¼‰ï¼šä¸€ç§å»é‡é›†åˆï¼Œé€šå¸¸ä½¿ç”¨å“ˆå¸Œè¡¨å®ç°ã€‚\n\t- [2. å“ˆå¸Œé›†åˆ](/post/4999144f3c4f5be79b89b48fb9f596af.html)\n\n## æœ¬ç« å†…å®¹å°èŠ‚\n\n- è¾“å…¥Â `key`Â ï¼Œå“ˆå¸Œè¡¨èƒ½å¤Ÿåœ¨Â O(1)Â æ—¶é—´å†…æŸ¥è¯¢åˆ°Â `value`Â ï¼Œæ•ˆç‡éå¸¸é«˜ã€‚\n- **å¸¸è§çš„å“ˆå¸Œè¡¨æ“ä½œ**åŒ…æ‹¬æŸ¥è¯¢ã€æ·»åŠ é”®å€¼å¯¹ã€åˆ é™¤é”®å€¼å¯¹å’Œéå†å“ˆå¸Œè¡¨ç­‰ã€‚\n- å“ˆå¸Œå‡½æ•°å°†Â `key`Â æ˜ å°„ä¸ºæ•°ç»„ç´¢å¼•ï¼Œä»è€Œè®¿é—®å¯¹åº”æ¡¶å¹¶è·å–Â `value`Â ã€‚\n- ä¸¤ä¸ªä¸åŒçš„Â `key`Â å¯èƒ½åœ¨ç»è¿‡å“ˆå¸Œå‡½æ•°åå¾—åˆ°ç›¸åŒçš„æ•°ç»„ç´¢å¼•ï¼Œå¯¼è‡´æŸ¥è¯¢ç»“æœå‡ºé”™ï¼Œè¿™ç§ç°è±¡è¢«ç§°ä¸º**å“ˆå¸Œå†²çª**ã€‚\n- å“ˆå¸Œè¡¨å®¹é‡è¶Šå¤§ï¼Œå“ˆå¸Œå†²çªçš„æ¦‚ç‡å°±è¶Šä½ã€‚å› æ­¤å¯ä»¥é€šè¿‡æ‰©å®¹å“ˆå¸Œè¡¨æ¥ç¼“è§£å“ˆå¸Œå†²çªã€‚ä¸æ•°ç»„æ‰©å®¹ç±»ä¼¼ï¼Œå“ˆå¸Œè¡¨æ‰©å®¹æ“ä½œçš„å¼€é”€å¾ˆå¤§ã€‚\n- **è´Ÿè½½å› å­**å®šä¹‰ä¸ºå“ˆå¸Œè¡¨ä¸­å…ƒç´ æ•°é‡é™¤ä»¥æ¡¶æ•°é‡ï¼Œåæ˜ äº†å“ˆå¸Œå†²çªçš„ä¸¥é‡ç¨‹åº¦ï¼Œå¸¸ç”¨ä½œè§¦å‘å“ˆå¸Œè¡¨æ‰©å®¹çš„æ¡ä»¶ã€‚\n- **é“¾å¼åœ°å€**é€šè¿‡å°†å•ä¸ªå…ƒç´ è½¬åŒ–ä¸ºé“¾è¡¨ï¼Œå°†æ‰€æœ‰å†²çªå…ƒç´ å­˜å‚¨åœ¨åŒä¸€ä¸ªé“¾è¡¨ä¸­ã€‚ç„¶è€Œï¼Œé“¾è¡¨è¿‡é•¿ä¼šé™ä½æŸ¥è¯¢æ•ˆç‡ï¼Œå¯ä»¥é€šè¿‡è¿›ä¸€æ­¥å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘æ¥æé«˜æ•ˆç‡ã€‚\n- **å¼€æ”¾å¯»å€**é€šè¿‡å¤šæ¬¡æ¢æµ‹æ¥å¤„ç†å“ˆå¸Œå†²çªã€‚**çº¿æ€§æ¢æµ‹**ä½¿ç”¨å›ºå®šæ­¥é•¿ï¼Œç¼ºç‚¹æ˜¯ä¸èƒ½åˆ é™¤å…ƒç´ ï¼Œä¸”å®¹æ˜“äº§ç”Ÿèšé›†ã€‚å¤šæ¬¡å“ˆå¸Œä½¿ç”¨å¤šä¸ªå“ˆå¸Œå‡½æ•°è¿›è¡Œæ¢æµ‹ï¼Œç›¸è¾ƒçº¿æ€§æ¢æµ‹æ›´ä¸æ˜“äº§ç”Ÿèšé›†ï¼Œä½†å¤šä¸ªå“ˆå¸Œå‡½æ•°å¢åŠ äº†è®¡ç®—é‡ã€‚\n- ä¸åŒç¼–ç¨‹è¯­è¨€é‡‡å–äº†ä¸åŒçš„å“ˆå¸Œè¡¨å®ç°ã€‚\n\t- ä¾‹å¦‚ï¼ŒJava çš„Â `HashMap`Â ä½¿ç”¨é“¾å¼åœ°å€\n\t- è€Œ Python çš„Â `Dict`Â é‡‡ç”¨å¼€æ”¾å¯»å€ã€‚\n- åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å“ˆå¸Œç®—æ³•å…·æœ‰ç¡®å®šæ€§ã€é«˜æ•ˆç‡å’Œå‡åŒ€åˆ†å¸ƒçš„ç‰¹ç‚¹ã€‚\n- åœ¨å¯†ç å­¦ä¸­ï¼Œå“ˆå¸Œç®—æ³•è¿˜åº”è¯¥å…·å¤‡æŠ—ç¢°æ’æ€§å’Œé›ªå´©æ•ˆåº”ã€‚\n- å“ˆå¸Œç®—æ³•é€šå¸¸é‡‡ç”¨å¤§è´¨æ•°ä½œä¸ºæ¨¡æ•°ï¼Œä»¥æœ€å¤§åŒ–åœ°ä¿è¯å“ˆå¸Œå€¼å‡åŒ€åˆ†å¸ƒï¼Œå‡å°‘å“ˆå¸Œå†²çªã€‚\n- å¸¸è§çš„å“ˆå¸Œç®—æ³•åŒ…æ‹¬ MD5ã€SHA-1ã€SHA-2 å’Œ SHA-3 ç­‰ã€‚MD5 å¸¸ç”¨äºæ ¡éªŒæ–‡ä»¶å®Œæ•´æ€§ï¼ŒSHA-2 å¸¸ç”¨äºå®‰å…¨åº”ç”¨ä¸åè®®ã€‚\n- ç¼–ç¨‹è¯­è¨€é€šå¸¸ä¼šä¸ºæ•°æ®ç±»å‹æä¾›å†…ç½®å“ˆå¸Œç®—æ³•ï¼Œç”¨äºè®¡ç®—å“ˆå¸Œè¡¨ä¸­çš„æ¡¶ç´¢å¼•ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸å¯å˜å¯¹è±¡æ˜¯å¯å“ˆå¸Œçš„ã€‚","47f89cecb07d560192fb851f1b254511":"\n# å“ˆå¸Œè¡¨æ¦‚è¿°\n\n`#å“ˆå¸Œè¡¨` `#hash` `#æ•°æ®ç»“æ„`  `#2024/09/22` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å“ˆå¸Œè¡¨çš„ä»·å€¼ \n\nçœ‹ä¸‹å›¾æ•°ç»„ã€é“¾è¡¨ã€åŠå“ˆå¸Œçš„å¢åˆ æ”¹æˆçš„å¤æ‚åº¦å°±çŸ¥é“å…¶ä»·å€¼äº† \n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922161703.png)\n## 2. å“ˆå¸Œè¡¨å’Œ Mapï¼ˆé”®å€¼æ˜ å°„ï¼‰çš„å…³ç³»ï¼Ÿ\n\n- å“ˆå¸Œè¡¨æ˜¯ä¸€ç§å…·ä½“çš„**æ•°æ®ç»“æ„**\n\t- å®ƒä½¿ç”¨å“ˆå¸Œå‡½æ•°å°†é”®æ˜ å°„åˆ°å­˜å‚¨æ¡¶æˆ–æ§½ä¸­ï¼Œä»è€Œå®ç°é«˜æ•ˆçš„æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œã€‚\n\t- æ˜¯è®¸å¤šé«˜çº§ç¼–ç¨‹è¯­è¨€ä¸­ Map æˆ–å­—å…¸å®ç°çš„åº•å±‚æ•°æ®ç»“æ„\n\t- å“ˆå¸Œè¡¨æ˜¯ä¸€ä¸ªå…·ä½“çš„**æ•°æ®ç»“æ„**ï¼Œæè¿°äº†å¦‚ä½•ç»„ç»‡æ•°æ®ã€‚\n- Map æ˜¯ä¸€ä¸ªæŠ½è±¡æ•°æ®ç±»å‹\n\t- Map æ˜¯ä¸€ä¸ª**æŠ½è±¡æ•°æ®ç±»å‹**ï¼Œå®ƒå®šä¹‰äº†ä¸€ç§å­˜å‚¨é”®å€¼å¯¹å¹¶å…è®¸é€šè¿‡é”®å¿«é€ŸæŸ¥æ‰¾å€¼çš„ç»“æ„\n\t- å®ƒå®šä¹‰äº†è¡Œä¸ºä½†ä¸æŒ‡å®šå®ç°\n- å“ˆå¸Œè¡¨æ˜¯å®ç° Map çš„ä¸€ç§å¸¸è§ä¸”é«˜æ•ˆçš„æ–¹å¼ï¼Œä½†ä¸æ˜¯å”¯ä¸€çš„æ–¹å¼\n- åœ¨è®¸å¤šç¼–ç¨‹è¯­è¨€ä¸­ï¼Œé»˜è®¤çš„ Map æˆ–å­—å…¸å®ç°é€šå¸¸åŸºäºå“ˆå¸Œè¡¨\n\t- Python ä¸­ `dict`Â ç±»å‹æ˜¯ Map çš„ä¸€ç§å®ç°ï¼Œå†…éƒ¨ä½¿ç”¨**å“ˆå¸Œè¡¨**\n\n```python\n# åˆ›å»ºä¸€ä¸ªå­—å…¸ï¼ˆMapï¼‰\nmy_dict = {\"apple\": 1, \"banana\": 2, \"orange\": 3}\n\n# æ’å…¥æ–°çš„é”®å€¼å¯¹\nmy_dict[\"grape\"] = 4\n\n# æŸ¥æ‰¾å€¼\nprint(my_dict[\"banana\"])  # è¾“å‡ºï¼š2\n\n# åˆ é™¤é”®å€¼å¯¹\ndel my_dict[\"orange\"]\n\n# éå†é”®å€¼å¯¹\n# items() æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å­—å…¸é¡¹çš„åˆ—è¡¨\n# ç±»ä¼¼äº JavaScript ä¸­çš„ Object.entries()\nfor key, value in my_dict.items():\n    print(f\"{key}: {value}\")\n\n# æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨\nif \"apple\" in my_dict:\n    print(\"Apple is in the dictionary\")\n```\n\n## 3. å“ˆå¸Œè¡¨çš„ä¸‰ç§æ–¹å¼éå†æ–¹å¼\n\n```python\n# éå†å“ˆå¸Œè¡¨\n# éå†é”®å€¼å¯¹ key->value\nfor key, value in hmap.items():\n    print(key, \"->\", value)\n# å•ç‹¬éå†é”® key\nfor key in hmap.keys():\n    print(key)\n# å•ç‹¬éå†å€¼ value\nfor value in hmap.values():\n    print(value)\n```\n\n## 4. å“ˆå¸Œè¡¨çš„åŸºæœ¬åŸç†\n\nåº•å±‚æ˜¯æ•°ç»„ï¼Œå­˜åœ¨æ•°ç»„çš„å“ªä¸ªç´¢å¼•å–å†³äº`hash(key)`\n- å“ˆå¸Œè¡¨å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªåŠ å¼ºç‰ˆçš„æ•°ç»„\n- æ•°ç»„å¯ä»¥é€šè¿‡ç´¢å¼•ï¼ˆéè´Ÿæ•´æ•°ï¼‰åœ¨Â `O(1)`Â çš„æ—¶é—´å¤æ‚åº¦å†…æŸ¥æ‰¾åˆ°å¯¹åº”å…ƒç´ ã€‚\n- å“ˆå¸Œè¡¨æ˜¯ç±»ä¼¼çš„ï¼Œå¯ä»¥é€šè¿‡Â `key`Â åœ¨Â `O(1)`Â çš„æ—¶é—´å¤æ‚åº¦å†…æŸ¥æ‰¾åˆ°è¿™ä¸ªÂ `key`Â å¯¹åº”çš„Â `value`ã€‚`key`Â çš„ç±»å‹å¯ä»¥æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²ç­‰å¤šç§ç±»å‹ã€‚\n\nçœ‹ä¸‹ä¼ªç \n\n```python\n# å“ˆå¸Œè¡¨ä¼ªç é€»è¾‘\nclass MyHashMap:\n\n    def __init__(self):\n        self.table = [None] * 1000\n\n    # å¢/æ”¹ï¼Œå¤æ‚åº¦ O(1)\n    def put(self, key, value):\n        index = self.hash(key)\n        self.table[index] = value\n\n    # æŸ¥ï¼Œå¤æ‚åº¦ O(1)\n    def get(self, key):\n        index = self.hash(key)\n        return self.table[index]\n\n    # åˆ ï¼Œå¤æ‚åº¦ O(1)\n    def remove(self, key):\n        index = self.hash(key)\n        self.table[index] = None\n\n    # å“ˆå¸Œå‡½æ•°ï¼ŒæŠŠ key è½¬åŒ–æˆ table ä¸­çš„åˆæ³•ç´¢å¼•\n    # æ—¶é—´å¤æ‚åº¦å¿…é¡»æ˜¯ O(1)ï¼Œæ‰èƒ½ä¿è¯ä¸Šè¿°æ–¹æ³•çš„å¤æ‚åº¦éƒ½æ˜¯ O(1)\n    def hash(self, key):\n        # ...\n        return hash(key) % len(self.table)\n\n```\n\n## 5. å“ˆå¸Œå‡½æ•°ï¼ˆå“ˆå¸Œç®—æ³•ï¼‰\n\n**å“ˆå¸Œå‡½æ•°**çš„ä½œç”¨æ˜¯æŠŠ`ä»»æ„é•¿åº¦çš„è¾“å…¥ï¼ˆkeyï¼‰`è½¬åŒ–æˆ`å›ºå®šé•¿åº¦çš„è¾“å‡ºï¼ˆç´¢å¼•ï¼‰`\n- key çš„é•¿åº¦ä»»æ„\n- ç´¢å¼•éœ€è¦åˆæ³•ï¼Œæ¯”å¦‚åœ¨æ•°ç»„é•¿åº¦èŒƒå›´å†…\n\n### 5.1. æœ€ç®€å•çš„å“ˆå¸Œç®—æ³•\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922160729.png)\n\n### 5.2. å¸¸è§çš„å“ˆå¸Œç®—æ³•\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922160829.png)\n\n## 6. ç›å€¼çš„ä¸»è¦ä½œç”¨\n\n1. é˜²å¾¡å½©è™¹è¡¨æ”»å‡»\n\t- å½©è™¹è¡¨æ˜¯ä¸€ç§é¢„è®¡ç®—çš„å“ˆå¸Œå€¼è¡¨ï¼Œç”¨äºåŠ é€Ÿå¯†ç ç ´è§£è¿‡ç¨‹ã€‚é€šè¿‡ä¸ºæ¯ä¸ªå¯†ç æ·»åŠ å”¯ä¸€çš„ç›å€¼ï¼Œå¯ä»¥ä½¿é¢„è®¡ç®—çš„å½©è™¹è¡¨å˜å¾—æ— æ•ˆï¼Œå› ä¸ºæ”»å‡»è€…éœ€è¦ä¸ºæ¯ä¸ªå¯èƒ½çš„ç›å€¼åˆ›å»ºä¸€ä¸ªæ–°çš„å½©è™¹è¡¨ï¼Œè¿™åœ¨è®¡ç®—ä¸Šæ˜¯ä¸å¯è¡Œçš„ã€‚\n2. é˜²æ­¢ç›¸åŒå¯†ç äº§ç”Ÿç›¸åŒçš„å“ˆå¸Œå€¼\n\t- **å¦‚æœä¸¤ä¸ªç”¨æˆ·ä½¿ç”¨ç›¸åŒçš„å¯†ç **ï¼Œæ²¡æœ‰ç›å€¼çš„æƒ…å†µä¸‹ï¼Œå®ƒä»¬çš„å“ˆå¸Œå€¼å°†ä¼šç›¸åŒã€‚ä½¿ç”¨ç›å€¼å¯ä»¥ç¡®ä¿å³ä½¿å¯†ç ç›¸åŒï¼Œæœ€ç»ˆçš„å“ˆå¸Œå€¼ä¹Ÿä¼šä¸åŒï¼Œå¢åŠ äº†å®‰å…¨æ€§ã€‚\n3. å¢åŠ å¯†ç çš„å¤æ‚æ€§\n\t- ç›å€¼å¢åŠ äº†åŸå§‹å¯†ç çš„é•¿åº¦å’Œå¤æ‚æ€§ï¼Œä½¿å¾—æš´åŠ›ç ´è§£å’Œå­—å…¸æ”»å‡»å˜å¾—æ›´åŠ å›°éš¾ã€‚\n4. ç¼“è§£å¯†ç é‡ç”¨çš„é£é™©\n\t- å¦‚æœç”¨æˆ·åœ¨å¤šä¸ªç³»ç»Ÿä¸­ä½¿ç”¨ç›¸åŒçš„å¯†ç ï¼Œç›å€¼å¯ä»¥ç¡®ä¿å³ä½¿ä¸€ä¸ªç³»ç»Ÿè¢«æ”»ç ´ï¼Œå…¶ä»–ç³»ç»Ÿçš„å¯†ç å“ˆå¸Œä¹Ÿä¸ä¼šç«‹å³å—åˆ°å¨èƒã€‚\n\næ¯”å¦‚ **å› ä¸º Python è§£é‡Šå™¨åœ¨æ¯æ¬¡å¯åŠ¨æ—¶ï¼Œéƒ½ä¼šä¸ºå­—ç¬¦ä¸²å“ˆå¸Œå‡½æ•°åŠ å…¥ä¸€ä¸ªéšæœºçš„ç›ï¼ˆsaltï¼‰å€¼**ã€‚è¿™ç§åšæ³•å¯ä»¥æœ‰æ•ˆé˜²æ­¢ HashDoS æ”»å‡»ï¼Œæå‡å“ˆå¸Œç®—æ³•çš„å®‰å…¨æ€§\n\n## 7. å“ˆå¸Œå†²çª\n\nå“ˆå¸Œå†²çªæ˜¯ä¸€å®šä¼šå‡ºç°çš„ï¼Œå› ä¸ºè¿™ä¸ªÂ `hash`Â å‡½æ•°ç›¸å½“äºï¼šæ˜¯æŠŠä¸€ä¸ª**æ— ç©·å¤§**çš„ç©ºé—´æ˜ å°„åˆ°äº†ä¸€ä¸ª**æœ‰é™çš„**ç´¢å¼•ç©ºé—´ï¼Œæ‰€ä»¥å¿…ç„¶ä¼šæœ‰ä¸åŒçš„Â `key`Â æ˜ å°„åˆ°åŒä¸€ä¸ªç´¢å¼•ä¸Š\n\nå°±å¥½æ¯”ä¸‰ç»´ç‰©ä½“æ˜ å°„åˆ°äºŒç»´å½±å­ä¸€æ ·ï¼Œè¿™ç§æœ‰æŸå‹ç¼©å¿…ç„¶ä¼šå‡ºç°ä¿¡æ¯ä¸¢å¤±ï¼Œæœ‰æŸä¿¡æ¯æœ¬å°±æ— æ³•å’ŒåŸä¿¡æ¯ä¸€ä¸€å¯¹åº”\n\n### 7.1. è§£å†³å“ˆå¸Œå†²çªçš„ä¸¤ç§æ–¹å¼ï¼šæ‹‰é“¾æ³•å’Œçº¿æ€§æ¢æŸ¥æ³•\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922152659.png)\n\n- æ‹‰é“¾æ³•ç›¸å½“äºæ˜¯å“ˆå¸Œè¡¨çš„åº•å±‚æ•°ç»„å¹¶ä¸ç›´æ¥å­˜å‚¨Â `value`Â ç±»å‹ï¼Œè€Œæ˜¯å­˜å‚¨ä¸€ä¸ªé“¾è¡¨ï¼Œå½“æœ‰å¤šä¸ªä¸åŒçš„Â `key`Â æ˜ å°„åˆ°äº†åŒä¸€ä¸ªç´¢å¼•ä¸Šï¼Œè¿™äº›Â `key -> value`Â å¯¹å„¿å°±å­˜å‚¨åœ¨è¿™ä¸ªé“¾è¡¨ä¸­ï¼Œè¿™æ ·å°±èƒ½è§£å†³å“ˆå¸Œå†²çªçš„é—®é¢˜ã€‚\n- è€Œçº¿æ€§æ¢æŸ¥æ³•çš„æ€è·¯æ˜¯ï¼Œä¸€ä¸ªÂ `key`Â å‘ç°ç®—å‡ºæ¥çš„Â `index`Â å€¼å·²ç»è¢«åˆ«çš„Â `key`Â å äº†ï¼Œé‚£ä¹ˆå®ƒå°±å»Â `index + 1`Â çš„ä½ç½®çœ‹çœ‹ï¼Œå¦‚æœè¿˜æ˜¯è¢«å äº†ï¼Œå°±ç»§ç»­å¾€åæ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªç©ºçš„ä½ç½®ä¸ºæ­¢\n\n### 7.2. æ‹‰é“¾æ³•ï¼šé“¾å¼åœ°å€\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922160159.png)\n\nå…·ä½“äº‹é¡¹æ–¹å¼ä¸å±•å¼€äº†\n### 7.3. çº¿æ€§æ¢æµ‹æ³•\n\n- çº¿æ€§æ¢æµ‹\n- å¹³æ–¹æ¢æµ‹\n- å¤šæ¬¡å“ˆå¸Œ\n\nå…·ä½“å®ç°æ–¹å¼ä¸å±•å¼€äº†\n\n## 8. è´Ÿè½½å› å­\n\nè´Ÿè½½å› å­æ˜¯åº¦é‡ä¸€ä¸ªå“ˆå¸Œè¡¨è£…æ»¡çš„ç¨‹åº¦æŒ‡æ ‡ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè´Ÿè½½å› å­è¶Šå¤§ï¼Œè¯´æ˜å“ˆå¸Œè¡¨é‡Œé¢å­˜å‚¨çš„Â `key-value`Â å¯¹è¶Šå¤šï¼Œå“ˆå¸Œå†²çªçš„æ¦‚ç‡å°±è¶Šå¤§ï¼Œå“ˆå¸Œè¡¨çš„æ“ä½œæ€§èƒ½å°±è¶Šå·®\n\nå½“å“ˆå¸Œè¡¨å†…å…ƒç´ è¾¾åˆ°è´Ÿè½½å› å­æ—¶ï¼Œå“ˆå¸Œè¡¨å°±ä¼šæ‰©å®¹ã€‚\n\n## 9. å“ˆå¸Œè¡¨çš„å¢åˆ æŸ¥æ”¹æ•ˆç‡ä¸€å®šæ˜¯Â `O(1)`Â å—ï¼Ÿ\n\nä¸ä¸€å®šï¼Œåªæœ‰å“ˆå¸Œå‡½æ•°çš„å¤æ‚åº¦æ˜¯Â `O(1)`ï¼Œä¸”åˆç†è§£å†³å“ˆå¸Œå†²çªçš„é—®é¢˜ï¼Œæ‰èƒ½ä¿è¯å¢åˆ æŸ¥æ”¹çš„å¤æ‚åº¦æ˜¯Â `O(1)`ï¼Œä¸ç„¶å¯èƒ½ä¼šé€€åŒ–ä¸º `O(n)`\n\n","4999144f3c4f5be79b89b48fb9f596af":"\n# å“ˆå¸Œé›†åˆ\n\n`#å“ˆå¸Œé›†åˆ` `#set` `#æ•°æ®ç»“æ„` \n\n**å“ˆå¸Œè¡¨çš„é”®ï¼Œå…¶å®å°±æ˜¯å“ˆå¸Œé›†åˆ**\n\nå“ˆå¸Œé›†åˆçš„ä¸»è¦ä½¿ç”¨åœºæ™¯æ˜¯ã€Œ**å»é‡**ã€ï¼Œå› ä¸ºå®ƒçš„ç‰¹æ€§æ˜¯ï¼š**ä¸ä¼šå‡ºç°é‡å¤å…ƒç´ ï¼Œå¯ä»¥åœ¨Â `O(1)`Â çš„æ—¶é—´å¢åˆ å…ƒç´ ï¼Œå¯ä»¥åœ¨Â `O(1)`Â çš„æ—¶é—´åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨**\n\n\n```python\n\n# å®ç°\u001bHashSet\nclass Hashset:\n    def __init__(self):\n        self.hashset = []\n\n    def add(self, key):\n        if key not in self.hashset:\n            self.hashset.append(key)\n\n    def remove(self, key):\n        if key in self.hashset:\n            self.hashset.remove(key)\n\n    def contains(self, key):\n        return key in self.hashset\n\n    def __str__(self):\n        return str(self.hashset)\n\n```","fd5ad4e4e11253078b5e94afecff4672":"\n#  0. å‰è¨€\n\n`#äºŒå‰æ ‘`  `#äºŒå‰æ ‘/å‰è¨€`  \n\nåŒ…æ‹¬\n\n- æ‰€æœ‰äºŒå‰æ ‘\n- äºŒå‰æœç´¢æ ‘\n- å¤šå‰æ ‘\n- äºŒå‰æ ‘çš„éå†\n- äºŒå‰æ ‘çš„æ·±åº¦\n","91a3a0af8968555c922316c1697a4df0":"\n# æ ‘çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µ\n\n\n`#ç®—æ³•/äºŒå‰æ ‘` `#ç®—æ³•/æ ‘`  `#ç®—æ³•/æ•°æ®ç»“æ„` `#2023/04/18`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. äºŒå‰æ ‘ã€æ»¡äºŒå‰æ ‘ã€å®Œå…¨äºŒå‰æ ‘ \n\nè¿™é‡Œç€é‡è¯´ä¸‹`å®Œå…¨äºŒå‰æ ‘`ï¼š\n\n- å¶å­èŠ‚ç‚¹éƒ½åœ¨ `æœ€åº•ä¸‹ä¸¤å±‚`\n- æœ€åä¸€å±‚å¶å­èŠ‚éƒ½é `å·¦æ’åˆ—`\n- å¹¶ä¸”`é™¤äº†æœ€åä¸€å±‚`ï¼Œå…¶ä»–å±‚çš„èŠ‚ç‚¹ä¸ªæ•°éƒ½è¦è¾¾åˆ°æœ€å¤§\n\n![|592](https://832-1310531898.cos.ap-beijing.myqcloud.com/9a9462b0ae355f83607ec904d5df7553.png)\n![|568](https://832-1310531898.cos.ap-beijing.myqcloud.com/05dd6048d8688e6a58ef6e8518485942.png)\n\n## 2. å †ã€å¤§é¡¶å †ã€å°é¡¶å †\n\n### 2.1. å †çš„åŸºæœ¬æ¦‚å¿µ\n\n- `å †`æ˜¯ä¸€ä¸ª`å®Œå…¨äºŒå‰æ ‘`ã€‚\n- `å †`ä¸­ `æ¯ä¸ªèŠ‚ç‚¹`çš„å€¼éƒ½ `å¤§äºç­‰äºï¼ˆæˆ–è€…å°äºç­‰äºï¼‰`å…¶`å·¦å³å­èŠ‚ç‚¹`çš„å€¼\n   - å¤§çš„å†ä¸Šé¢ï¼Œ`å¤§é¡¶å †`\n   - å°çš„å†ä¸Šé¢ï¼Œ`å°é¡¶å †`\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/c75df744c97e5b34e295bbd2eacaf267.png)\n\n### 2.2. å †çš„ä»·å€¼\n\n#### 2.2.1. **å¤§é¡¶å †**çš„ä»·å€¼\n\n- ä¼˜å…ˆé˜Ÿåˆ—\n- é«˜æ•ˆæ’åº\n- é«˜æ•ˆçš„åŠ¨æ€ä¸­ä½æ•°\n\n#### 2.2.2. **å°é¡¶å †**çš„ä»·å€¼\nä¸»è¦ä»·å€¼å’Œåº”ç”¨ï¼š\n\n- ä¼˜å…ˆé˜Ÿåˆ—ï¼šå°é¡¶å †ä¹Ÿå¸¸ç”¨äºå®ç°ä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ”¯æŒå¿«é€Ÿè·å–å’Œåˆ é™¤æœ€å°å…ƒç´ ã€‚\n- å›¾ç®—æ³•ï¼šåœ¨å›¾ç®—æ³•ä¸­ï¼Œå°é¡¶å †ç”¨äºå®ç° Dijkstra æœ€çŸ­è·¯å¾„ç®—æ³•å’Œ Prim æœ€å°ç”Ÿæˆæ ‘ç®—æ³•ï¼Œä»¥å¿«é€Ÿæ‰¾åˆ°æƒé‡æœ€å°çš„è¾¹æˆ–è·¯å¾„ã€‚\n- åˆå¹¶æœ‰åºåˆ—è¡¨ï¼šå°é¡¶å †å¯ä»¥é«˜æ•ˆåœ°åˆå¹¶å¤šä¸ªæœ‰åºåˆ—è¡¨ï¼Œä¾‹å¦‚ç”¨äºå¤–éƒ¨æ’åºæˆ–å½’å¹¶æ’åº\n\n##### 2.2.2.1. å †çš„æ€»ä½“ä»·å€¼\n\n- **é«˜æ•ˆçš„æ’å…¥å’Œåˆ é™¤æ“ä½œ**ï¼šå †æ”¯æŒ `O(log n)` çš„æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œä½¿å…¶åœ¨éœ€è¦é¢‘ç¹è°ƒæ•´å…ƒç´ é¡ºåºçš„åœºæ™¯ä¸­éå¸¸é«˜æ•ˆã€‚\n- **å†…å­˜åˆ©ç”¨ç‡é«˜**ï¼šå †æ˜¯ä¸€ç§åŸºäºæ•°ç»„å®ç°çš„æ•°æ®ç»“æ„ï¼Œå†…å­˜åˆ©ç”¨ç‡é«˜ï¼Œä¸éœ€è¦é¢å¤–çš„æŒ‡é’ˆæˆ–é“¾æ¥ã€‚\n- å¹¿æ³›åº”ç”¨ï¼šå †åœ¨å„ç§ç®—æ³•å’Œç³»ç»Ÿä¸­æœ‰å¹¿æ³›åº”ç”¨ï¼ŒåŒ…æ‹¬è°ƒåº¦ç³»ç»Ÿã€å†…å­˜ç®¡ç†ã€å›¾ç®—æ³•ã€å®æ—¶æ•°æ®å¤„ç†ç­‰ã€‚\n\næ€»ä¹‹ï¼Œå †ç»“æ„å› å…¶é«˜æ•ˆçš„æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œï¼Œåœ¨è®¸å¤šéœ€è¦ç»´æŠ¤åŠ¨æ€æœ‰åºé›†åˆçš„åœºæ™¯ä¸­å…·æœ‰é‡è¦ä»·å€¼ã€‚\n\n### 2.3. å®ç°ä¸€ä¸ª`å°é¡¶å †`\n\nä½¿ç”¨`æ•°ç»„`æ¥å­˜å‚¨ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n- å…³é”®æ˜¯ `this.head = []`  æ¥å­˜å‚¨\n\n```javascript\nfunction swap(array, a, b) {\n    [array[a], array[b]] = [array[b], array[a]];\n}\n\nclass MinHeap {\n    constructor() {\n        // ä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨\n        this.heap = [];\n    }\n\n    // å·¦å­©å­çš„ç´¢å¼•\n    getLeftIndex(index) {\n        return (2 * index) + 1;\n    }\n\n    // å³å­©å­çš„ç´¢å¼•\n    getRightIndex(index) {\n        return (2 * index) + 2;\n    }\n\n    // çˆ¶èŠ‚ç‚¹çš„ç´¢å¼•\n    getParentIndex(index) {\n        if (index === 0) {\n            return 0;\n        }\n        return Math.floor((index - 1) / 2);\n    }\n\n    // è¿”å›ä¸ªæ•°\n    size() {\n        return this.heap.length;\n    }\n\n    isEmpty() {\n        return this.size() <= 0;\n    }\n\n    clear() {\n        this.heap = [];\n    }\n    // ::::å°é¡¶å †ï¼Œæœ€å°çš„è‚¯å®šåœ¨æœ€ä¸Šé¢\n    findMinimum() {\n        return this.isEmpty() ? null : this.heap[0];\n    }\n\n    // æ’å…¥ä¸€ä¸ªå€¼ï¼Œæ’å…¥çš„å…ƒç´ æ·»åŠ åˆ°å †åº•çš„æœ€åï¼Œç„¶åè®©å…¶ä¸Šæµ®åˆ°æ­£ç¡®ä½ç½®ï¼ˆå¦‚æœå¤§é¡¶çš„è¯ï¼‰\n    insert(value) {\n        if (value != null) {\n            const index = this.heap.length;\n            // å…ˆæ”¾åœ¨æœ€åä¸€ä½\n            this.heap.push(value);\n            // çˆ¶èŠ‚ç‚¹å‘ä¸Šç§»åŠ¨ï¼Œç›´åˆ°çˆ¶èŠ‚ç‚¹å°äºæ’å…¥çš„å€¼\n            this.siftUp(index);\n            return true;\n        }\n        return false;\n    }\n\n    // ä¸‹æ²‰ï¼Œå †åŒ–ï¼Œé€’å½’\n    siftDown(index) {\n        // æ’å…¥çš„å…ƒç´ çš„ä½ç½®\n        let element = index;\n        const left = this.getLeftIndex(index);\n        const right = this.getRightIndex(index);\n        const size = this.size();\n\n        if (left < size  // base åˆ¤æ–­\n            && this.heap[element] > this.heap[left] \n            // å¦‚æœè¯¥å…ƒç´ å¤§äºå®ƒçš„å·¦å­èŠ‚ç‚¹ï¼Œåˆ™ä¸‹æ²‰\n        ) {\n            element = left;\n        }\n\n        if (right < size // baseåˆ¤æ–­\n            && this.heap[element] > this.heap[left]  \n            // å¦‚æœè¯¥å…ƒç´ å¤§äºå®ƒçš„å³å­èŠ‚ç‚¹ï¼Œåˆ™ä¸‹æ²‰\n        ) {\n            element = right;\n        }\n\n        // å¦‚æœelement æœ€å å’Œä¼ å…¥çš„indexä¸ä¸€æ ·äº†ï¼Œè¯´æ˜éœ€è¦äº¤æ¢æ•°æ®ï¼Œç„¶åç»§ç»­ä¸‹æ²‰é€’å½’\n        if (index !== element) {\n            swap(this.heap, index, element);\n            this.siftDown(element);\n        }\n\n    }\n\n    // å‘ä¸Šç§»åŠ¨ï¼Œç›´åˆ°çˆ¶èŠ‚ç‚¹çš„å€¼å°äºæ’å…¥çš„å€¼\n    siftUp(index) {\n        let parent = this.getParentIndex(index);\n        while (\n            index > 0 // base åˆ¤æ–­\n            && this.heap[parent] > this.heap[index]) // çˆ¶èŠ‚ç‚¹çš„å…ƒç´ å¤§äºå­å…ƒç´ çš„æ—¶å€™ï¼Œæ‰éœ€è¦ç§»åŠ¨\n        {\n            swap(this.heap, parent, index);\n            index = parent;\n            parent = this.getParentIndex(index);\n        }\n    }\n\n    // delete min å †é¡¶å…ƒç´ ï¼ˆæœ€å°å€¼ï¼‰å’Œ å †åº•å…ƒç´  å¯¹è°ƒ\n    // 1ã€åˆ é™¤åˆ é™¤å †é¡¶å…ƒç´ \n    // 2ã€è®©å †åº•å…ƒç´ æ²‰åˆ°æ­£ç¡®ä½ç½®\n    deleteMin() {\n        if (this.isEmpty()) {\n            return null;\n        }\n        if (this.size() === 1) {\n            return this.heap.shift();\n        }\n        const removedValue = this.heap[0]; // å †é¡¶å…ƒç´ \n        const lastElement = this.heap.pop();  // ç§»é™¤å †åº•å…ƒç´ \n        this.heap[0] = lastElement; // å°† å †é¡¶å…ƒç´  èµ‹å€¼ä¸º å †åº•å…ƒç´ \n        // ä»å †é¡¶å¼€å§‹ä¸‹æ²‰\n        this.siftDown(0);\n        return removedValue;\n    }\n\n    getAsArray() {\n        return this.heap;\n    }\n}\n\nlet arr = [5, 3, 7, 9, 0, 0, -1, -2, 7, -8];\n\nlet heapObj = new MinHeap();\narr.forEach((item) => {\n    heapObj.insert(item)\n})\nconsole.log(heapObj);\nconsole.log('************************')\n\nconsole.log(heapObj.findMinimum());\n\n// MinHeap { heap: [\n//     -8, -2, 0, 3, -1,\n//      7,  0, 9, 7,  5\n//   ] }\n// ************************\n// -8\n\n```\n\n## 3. ç–‘é—®ï¼šæ•°æ®ç»“æ„ä¸­çš„`å †æ ˆ` ä¸ å†…å­˜ä¸­çš„`å †æ ˆ` çš„åŒºåˆ«ï¼Ÿ\n\n![|568](https://832-1310531898.cos.ap-beijing.myqcloud.com/1b4993fbc44e95f344a1f3bd840babd4.png)\n![|568](https://832-1310531898.cos.ap-beijing.myqcloud.com/86921645374e40f809a54fb522b7f5f1.png)\n\nå †å†…å­˜ï¼ˆHeap Memoryï¼‰å’Œæ ˆå†…å­˜ï¼ˆStack Memoryï¼‰æ˜¯è®¡ç®—æœºå†…å­˜ç®¡ç†ä¸­ä¸¤ç§ä¸åŒçš„å†…å­˜åˆ†é…åŒºåŸŸã€‚å®ƒä»¬åœ¨ç”¨é€”ã€ç®¡ç†æ–¹å¼ã€ç”Ÿå‘½å‘¨æœŸå’Œæ€§èƒ½ä¸Šæœ‰æ˜¾è‘—åŒºåˆ«ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼š\n\n### 3.1. ç”¨é€”\n\n- **å †å†…å­˜**\n   - ç”¨äºåŠ¨æ€åˆ†é…å†…å­˜ï¼Œé€šå¸¸ç”±ç¨‹åºè¿è¡Œæ—¶åˆ†é…å’Œé‡Šæ”¾ã€‚\n   - é€‚ç”¨äºéœ€è¦åœ¨è¿è¡Œæ—¶å†³å®šå¤§å°å’Œç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡å’Œæ•°æ®ç»“æ„ï¼Œä¾‹å¦‚åŠ¨æ€æ•°ç»„ã€é“¾è¡¨ç­‰ã€‚\n- **æ ˆå†…å­˜**\n   - ç”¨äºé™æ€åˆ†é…å†…å­˜ï¼Œä¸»è¦ç”¨äºå‡½æ•°è°ƒç”¨ã€å±€éƒ¨å˜é‡å’Œå‡½æ•°å‚æ•°ã€‚\n   - é€‚ç”¨äºç”Ÿå‘½å‘¨æœŸæ˜ç¡®ä¸”è¾ƒçŸ­çš„å˜é‡ï¼Œä¾‹å¦‚å±€éƒ¨å˜é‡å’Œå‡½æ•°å‚æ•°ã€‚\n\n### 3.2. ç®¡ç†æ–¹å¼\n\n- **å †å†…å­˜**ï¼š\n   - å†…å­˜ç®¡ç†è¾ƒå¤æ‚ï¼Œå®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼å’Œç¢ç‰‡åŒ–é—®é¢˜ã€‚\n   - ç”±ç¨‹åºå‘˜æ˜¾å¼åˆ†é…ï¼ˆå¦‚ `malloc` åœ¨ C/C++ ä¸­ï¼Œ`new` åœ¨ C++/Java ä¸­ï¼‰å’Œé‡Šæ”¾ï¼ˆå¦‚ `free` åœ¨ C/C++ ä¸­ï¼Œåƒåœ¾å›æ”¶åœ¨ Java ä¸­ï¼‰ã€‚\n- **æ ˆå†…å­˜**ï¼š\n   - å†…å­˜ç®¡ç†ç®€å•ï¼Œä¸ä¼šå‡ºç°å†…å­˜æ³„æ¼é—®é¢˜ï¼Œä½†æ ˆç©ºé—´æœ‰é™ï¼Œä¸èƒ½ç”¨äºå¤§å¯¹è±¡æˆ–é•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡ã€‚\n   - ç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç®¡ç†ï¼Œå†…å­˜åˆ†é…å’Œé‡Šæ”¾åœ¨å‡½æ•°è°ƒç”¨å’Œè¿”å›æ—¶è‡ªåŠ¨è¿›è¡Œã€‚\n\n### 3.3. ç”Ÿå‘½å‘¨æœŸ\n\n- **å †å†…å­˜**ï¼š\n   - å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç”±ç¨‹åºå‘˜æ§åˆ¶ï¼Œå¯ä»¥åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­**åŠ¨æ€åˆ†é…å’Œé‡Šæ”¾**ã€‚\n   - å¯¹è±¡åœ¨ä¸å†ä½¿ç”¨åéœ€è¦æ˜¾å¼é‡Šæ”¾ï¼Œå¦åˆ™ä¼šå¯¼è‡´**å†…å­˜æ³„æ¼**ã€‚\n- **æ ˆå†…å­˜**\n   - å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç”±å‡½æ•°è°ƒç”¨æ ˆå†³å®šï¼Œå½“å‡½æ•°è¿”å›æ—¶ï¼Œæ ˆä¸Šçš„æ‰€æœ‰**å±€éƒ¨å˜é‡è‡ªåŠ¨é”€æ¯**ã€‚\n   - ç”Ÿå‘½å‘¨æœŸçŸ­æš‚ä¸”æ˜ç¡®ï¼Œä¸éœ€è¦æ˜¾å¼é‡Šæ”¾ã€‚\n\n### 3.4. æ€§èƒ½\n\n- **å †å†…å­˜**ï¼š\n   - åŠ¨æ€åˆ†é…å’Œé‡Šæ”¾å†…å­˜çš„å¼€é”€è¾ƒå¤§ï¼Œå› ä¸ºéœ€è¦æŸ¥æ‰¾åˆé€‚çš„å†…å­˜å—ï¼Œå¹¶å¤„ç†ç¢ç‰‡åŒ–é—®é¢˜ã€‚\n   - å¸¸è§äºéœ€è¦çµæ´»ç®¡ç†å†…å­˜çš„å¤§å‹å¤æ‚åº”ç”¨ä¸­ã€‚\n- **æ ˆå†…å­˜**ï¼š\n   - æ›´é€‚åˆå°å‹ã€çŸ­ç”Ÿå‘½å‘¨æœŸçš„æ•°æ®ï¼Œå…·æœ‰æ›´é«˜çš„è®¿é—®é€Ÿåº¦ã€‚\n   - å†…å­˜åˆ†é…å’Œé‡Šæ”¾é€Ÿåº¦å¿«ï¼Œä»…é€šè¿‡ç§»åŠ¨æ ˆæŒ‡é’ˆå³å¯å®Œæˆã€‚\n\n### 3.5. æ€»ç»“\n\n- **å †å†…å­˜**ï¼šé€‚ç”¨äºåŠ¨æ€åˆ†é…çš„å¯¹è±¡ï¼Œç”Ÿå‘½å‘¨æœŸç”±ç¨‹åºå‘˜æ§åˆ¶ï¼Œç®¡ç†å¤æ‚ä½†çµæ´»ã€‚\n- **æ ˆå†…å­˜**ï¼šé€‚ç”¨äºå±€éƒ¨å˜é‡å’Œå‡½æ•°è°ƒç”¨ï¼Œç”Ÿå‘½å‘¨æœŸçŸ­æš‚ä¸”ç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç®¡ç†ï¼Œæ€§èƒ½é«˜ä½†ç©ºé—´æœ‰é™ã€‚\n\nç†è§£å †å’Œæ ˆçš„åŒºåˆ«å¯¹äºé«˜æ•ˆç¼–å†™å’Œè°ƒè¯•ä»£ç è‡³å…³é‡è¦ï¼Œå°¤å…¶æ˜¯æ¶‰åŠåˆ°å†…å­˜ç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–æ—¶ã€‚\n\n## 4. æŸ¥æ‰¾äºŒå‰æ ‘ï¼ˆäºŒå‰æœç´¢æ ‘ï¼‰\n\n- ä¸€ç§ç‰¹æ®Šçš„äºŒå‰æ ‘ï¼Œ`è¾ƒå°`çš„å€¼ä¿å­˜åœ¨`å·¦èŠ‚ç‚¹`ä¸­ï¼Œ`è¾ƒå¤§`çš„å€¼ä¿å­˜åœ¨`å³èŠ‚ç‚¹`ä¸­\n   - `æ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘`éƒ½æ¯”`æ ¹èŠ‚ç‚¹çš„å€¼`å°ï¼Œ`å³å­æ ‘çš„å€¼`éƒ½æ¯”`æ ¹èŠ‚ç‚¹çš„å€¼`å¤§ã€‚\n   - `äºŒå‰æŸ¥æ‰¾æ ‘`æ˜¯ä¸€ç§`æœ‰åºçš„æ ‘`ï¼Œæ‰€ä»¥æ”¯æŒ`å¿«é€ŸæŸ¥æ‰¾ã€å¿«é€Ÿæ’å…¥ã€åˆ é™¤`ä¸€ä¸ªæ•°æ®\n\n![|576](https://832-1310531898.cos.ap-beijing.myqcloud.com/26939446c9517db965095fb586848172.png)\n\n## 5. å¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘\näºŒå‰æ ‘ä¸­`ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘`çš„`é«˜åº¦ç›¸å·®ä¸èƒ½å¤§äº 1`\n![|560](https://832-1310531898.cos.ap-beijing.myqcloud.com/42e64492eba910a231f01894b3811630.png)\n![|552](https://832-1310531898.cos.ap-beijing.myqcloud.com/2130d9f3b6d123735105cd614780218d.png)\n\n## 6. äºŒå‰æ ‘çš„å­˜å‚¨æ–¹å¼\n\n### 6.1. é“¾å¼å­˜å‚¨ - å¯¹è±¡\n![|560](https://832-1310531898.cos.ap-beijing.myqcloud.com/1f57396c6c7d0ec0908c8fd1d70696d0.png)\n\n### 6.2. é¡ºåºå­˜å‚¨ - æ•°ç»„\n`å®Œå…¨äºŒå‰æ ‘`ç”¨`æ•°ç»„`æ¥å­˜å‚¨æ˜¯æœ€çœå†…å­˜çš„æ–¹å¼\n![|568](https://832-1310531898.cos.ap-beijing.myqcloud.com/e29fe4038c62a7dc643d94fc78940983.png)\néå®Œå…¨äºŒå‰æ ‘åˆ™ä¼šæµªè´¹ç©ºé—´ï¼Œå¦‚ä¸‹å›¾ï¼š\n![|560](https://832-1310531898.cos.ap-beijing.myqcloud.com/cf10cd1cdb8a374b53403b941b9b9e96.png)\n\n## 7. æ•°æ®ç»“æ„è®¾è®¡ - å®ç°ä¸€ä¸ª`äºŒå‰æœç´¢æ ‘`\n\n### 7.1. æ’å…¥èŠ‚ç‚¹\nçœ‹ä¸‹é¢ä¸€å¼ å›¾ï¼Œåœ¨ä¸‹å›¾çš„æ ‘ä¸­æ’å…¥å¥å€¼ä¸º `6` çš„èŠ‚ç‚¹ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š\n![|391](https://832-1310531898.cos.ap-beijing.myqcloud.com/8963bb8f3b7b3a6a1fa71319e058bde3.png)\n\n### 7.2. ç§»é™¤èŠ‚ç‚¹\nå…³é”®çœ‹ä¸‹åˆ é™¤æœ‰`ä¸¤ä¸ªå­èŠ‚ç‚¹`çš„èŠ‚ç‚¹ï¼š\n1ã€ã€è¯¥èŠ‚ç‚¹ä¸å³å­æ ‘ä¸­æœ€å°å€¼ä½ç½®ç½®æ¢ã€‘æ‰¾åˆ°å°†å³ä¾§å­æ ‘ä¸­çš„æœ€å°å€¼ï¼Œæ›¿æ¢åˆ°è¦åˆ é™¤çš„ä½ç½®\n2ã€ ç„¶å é€’å½’ ä» ä»å³ä¾§å­æ ‘ä¸­ç§»é™¤æœ€å°èŠ‚ç‚¹\nå¦‚ä¸‹å›¾ï¼š\n![|495](https://832-1310531898.cos.ap-beijing.myqcloud.com/ef6da5215ad8e2ff32b2ea49faaa631f.png)\n![|568](https://832-1310531898.cos.ap-beijing.myqcloud.com/ac3f6d93656aceb38de5dfe7f1e81277.png)\n\n### 7.3. ä»£ç éƒ¨åˆ†\n```javascript\n// nodeèŠ‚ç‚¹ç±»\nclass Node {\n    constructor(key) {\n        this.key = key;\n        this.left = null;\n        this.right = null;\n    }\n    toString() {\n        return `${this.key}`;\n    }\n}\n\nexport default class BinarySearchTree {\n\n    constructor() {\n        this.root = null;\n    }\n\n    // å‘æ ‘ä¸­æ’å…¥ä¸€ä¸ªæ–°çš„é”®ã€‚\n    insert(key) {\n        // special case: first key\n        if (this.root == null) {\n            this.root = new Node(key);\n        } else {\n            // ä»rootå¼€å§‹éå†æŸ¥æ‰¾åˆé€‚çš„ä½ç½®æ’å…¥\n            this.insertNode(this.root, key);\n        }\n    }\n\n    // éå†æ ‘ï¼Œå°†æ’å…¥èŠ‚ç‚¹çš„é”®å€¼ä¸éå†åˆ°çš„èŠ‚ç‚¹é”®å€¼æ¯”è¾ƒï¼Œå¦‚æœå‰è€…å¤§äºåè€…ï¼Œç»§ç»­é€’å½’éå†å³å­èŠ‚ç‚¹ï¼Œ\n    // åä¹‹ï¼Œç»§ç»­éå†å·¦å­èŠ‚ç‚¹ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªç©ºçš„èŠ‚ç‚¹ï¼Œåœ¨è¯¥ä½ç½®æ’å…¥ã€‚\n    insertNode(node, key) {\n        // å¦‚æœæ’å…¥èŠ‚ç‚¹çš„é”®å€¼å°äºå½“å‰èŠ‚ç‚¹çš„é”®å€¼ï¼Œåˆ™éœ€è¦æ’å…¥å·¦è¾¹\n        if (key < node.key) {\n            // å·¦èŠ‚ç‚¹æ²¡æœ‰å€¼ï¼Œåˆ™ç›´æ¥æ’å…¥\n            if (node.left == null) {\n                node.left = new Node(key);\n            } else {\n                this.insertNode(node.left, key);\n            }\n            // å¦åˆ™éœ€è¦æ’å…¥å³è¾¹\n        } else {\n            if (node.right == null) {\n                node.right = new Node(key);\n            } else {\n                this.insertNode(node.right, key);\n            }\n        }\n    }\n    getRoot() {\n        return this.root;\n    }\n    inOrderTraverse(callback) {\n        this.inOrderTraverseNode(this.root, callback);\n    }\n    inOrderTraverseNode(node, callback) {\n        if (node != null) {\n            this.inOrderTraverseNode(node.left, callback);\n            callback(node.key);\n            this.inOrderTraverseNode(node.right, callback);\n        }\n    }\n\n    preOrderTraverse(callback) {\n        this.preOrderTraverseNode(this.root, callback);\n    }\n\n    preOrderTraverseNode(node, callback) {\n        if (node != null) {\n            callback(node.key);\n            this.preOrderTraverseNode(node.left, callback);\n            this.preOrderTraverseNode(node.right, callback);\n        }\n    }\n\n    postOrderTraverse(callback) {\n        this.postOrderTraverseNode(this.root, callback);\n    }\n\n    postOrderTraverseNode(node, callback) {\n        if (node != null) {\n            this.postOrderTraverseNode(node.left, callback);\n            this.postOrderTraverseNode(node.right, callback);\n            callback(node.key);\n        }\n    }\n\n    search(key) {\n        return this.searchNode(this.root, key);\n    }\n\n    // æœç´¢ç‰¹å®šå€¼çš„å¤„ç†ä¸æ’å…¥å€¼çš„å¤„ç†ç±»ä¼¼ã€‚éå†æ ‘ï¼Œ\n    // å°†è¦æœç´¢çš„å€¼ä¸éå†åˆ°çš„èŠ‚ç‚¹æ¯”è¾ƒï¼Œå¦‚æœå‰è€…å¤§äºåè€…ï¼Œ\n    // åˆ™é€’å½’éå†å³ä¾§å­èŠ‚ç‚¹ï¼Œåä¹‹ï¼Œåˆ™é€’å½’éå†å·¦ä¾§å­èŠ‚ç‚¹ã€‚\n    searchNode(node, key) {\n        if (node == null) {\n            return false;\n        }\n        // å¦‚æœè¦æŸ¥æ‰¾çš„å€¼å°äºè¯¥èŠ‚ç‚¹ï¼Œç»§ç»­é€’å½’éå†å…¶å·¦ä¾§èŠ‚ç‚¹\n        if (key < node.key) {\n            return this.searchNode(node.left, key);\n        }\n        // å¦‚æœè¦æŸ¥æ‰¾çš„å€¼å¤§äºè¯¥èŠ‚ç‚¹ï¼Œç»§ç»­é€’å½’éå†å…¶å³ä¾§èŠ‚ç‚¹\n        if (key > node.key) {\n            return this.searchNode(node.right, key);\n        }\n        return true;\n    }\n\n    min() {\n        return this.minNode(this.root);\n    }\n\n    // åœ¨äºŒå‰æœç´¢æ ‘é‡Œï¼Œä¸ç®¡æ˜¯æ•´ä¸ªæ ‘è¿˜æ˜¯å…¶å­æ ‘ï¼Œæœ€å°å€¼ä¸€å®šåœ¨æ ‘æœ€å·¦ä¾§çš„æœ€åº•å±‚ã€‚\n    // å› æ­¤ç»™å®šä¸€é¢—æ ‘æˆ–å…¶å­æ ‘ï¼Œåªéœ€è¦ä¸€ç›´å‘å·¦èŠ‚ç‚¹éå†åˆ°åº•å°±è¡Œäº†ã€‚\n    minNode(node) {\n        let current = node;\n        while (current != null && current.left != null) {\n            current = current.left;\n        }\n        return current;\n    }\n\n    max() {\n        return this.maxNode(this.root);\n    }\n\n    // æœç´¢æœ€å¤§å€¼ä¸æœç´¢æœ€å°å€¼ç±»ä¼¼ï¼Œåªæ˜¯æ²¿ç€æ ‘çš„å³ä¾§éå†ã€‚\n    maxNode(node) {\n        let current = node;\n        while (current != null && current.right != null) {\n            current = current.right;\n        }\n        return current;\n    }\n\n    // ç§»é™¤èŠ‚ç‚¹ï¼Œé¦–å…ˆè¦åœ¨æ ‘ä¸­æŸ¥æ‰¾åˆ°è¦ç§»é™¤çš„èŠ‚ç‚¹ï¼Œå†åˆ¤æ–­è¯¥èŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹ã€æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹æˆ–è€…æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œæœ€ååˆ†åˆ«å¤„ç†ã€‚\n    remove(key) {\n        // åŒæ ·ä»rootå¼€å§‹éå†æŸ¥æ‰¾\n        this.root = this.removeNode(this.root, key);\n    }\n\n    removeNode(node, key) {\n        // å¦‚æœ node ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›\n        if (node == null) {\n            return null;\n        }\n        // æ‰¾åˆ°è¦åˆ é™¤çš„node\n        node = this.searchNode(node, key)\n\n        // ç¬¬ä¸€ç§æƒ…å†µï¼Œè¯¥èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹\n        if (node.left == null && node.right == null) {\n            node = null;\n            return node;\n        }\n        // ç¬¬äºŒç§æƒ…å†µï¼Œè¯¥èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹\n        if (node.left == null) {\n            // å°†å³å­èŠ‚ç‚¹æ›¿æ¢è‡ªå·±\n            node = node.right;\n            return node;\n        }\n        if (node.right == null) {\n            // å°†å·¦å­èŠ‚ç‚¹æ›¿æ¢è‡ªå·±\n            node = node.left;\n            return node;\n        }\n        // ç¬¬ä¸‰ç§æƒ…å†µï¼Œæœ‰æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹\n        // 1ã€æ‰¾åˆ°å°†å³ä¾§å­æ ‘ä¸­çš„æœ€å°å€¼ï¼Œæ›¿æ¢åˆ°è¦åˆ é™¤çš„ä½ç½®\n        // 2ã€ä»å³ä¾§å­æ ‘ä¸­ç§»é™¤æœ€å°èŠ‚ç‚¹\n        const aux = this.minNode(node.right);\n        node.key = aux.key;\n        node.right = this.removeNode(node.right, aux.key);\n        return node;\n    }\n}\n\n```\n\n","f4571bccb6165932a501e4d651e48308":"\n# ä¸€ä¸ªæ–¹æ³•ç§’æ€ 5 é“æœ€è¿‘å…¬å…±ç¥–å…ˆé—®é¢˜\n\n`#2024/09/07`  `#leetcode`  `#äºŒå‰æ ‘`  `#äºŒå‰æ ‘/å…¬å…±ç¥–å…ˆé—®é¢˜`\n\n\n## ç›®å½•\n<!-- toc -->\n ## ä»äºŒå‰æ ‘ä¸­å¯»æ‰¾ä¸€ä¸ªå…ƒç´  \n\n### åŸºæœ¬å†™æ³•ï¼šå®Œæ•´æœç´¢\n\n```javascript\n/**\n * @description ä»äºŒå‰æ ‘ä¸­å¯»æ‰¾ä¸€ä¸ªå…ƒç´ \n * @param {TreeNode} root\n * @param {number} val\n */\nvar find = function (root, val) {\n  if (root == null) {\n    return null;\n  }\n  if (root.val == val) {\n    return root;\n  }\n  let left = find(root.left, val);\n  let right = find(root.right, val);\n  return left || right;\n};\n\n```\n\n### ä¼˜åŒ–ï¼š å¦‚æœå·²ç»åœ¨å·¦å­æ ‘æ‰¾åˆ°äº†ï¼Œå°±ä¸éœ€è¦å†å»å³å­æ ‘æ‰¾äº†\n\n```javascript\n/**\n * ä¼˜åŒ–ï¼š å¦‚æœå·²ç»åœ¨å·¦å­æ ‘æ‰¾åˆ°äº†ï¼Œå°±ä¸éœ€è¦å†å»å³å­æ ‘æ‰¾äº†\n * @description ä»äºŒå‰æ ‘ä¸­å¯»æ‰¾ä¸€ä¸ªå…ƒç´ \n * @param {TreeNode} root\n * @param {number} val\n */\nvar find1 = function (root, val) {\n  if (root == null) {\n    return null;\n  }\n  if (root.val == val) {\n    return root;\n  }\n  let left = find1(root.left, val);\n  if (left) {\n    return left;\n  }\n  let right = find1(root.right, val);\n  if (right) {\n    return right;\n  }\n};\n```\n\n### äºŒå‰æ ‘ä¸­å¯»æ‰¾å€¼ä¸º val1 æˆ– val2 çš„èŠ‚ç‚¹\n\n```javascript\n/**\n * @description å®šä¹‰ï¼šåœ¨ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘ä¸­å¯»æ‰¾å€¼ä¸º val1 æˆ– val2 çš„èŠ‚ç‚¹\n */\n/**\n * @description å®šä¹‰ï¼šåœ¨ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘ä¸­å¯»æ‰¾å€¼ä¸º val1 æˆ– val2 çš„èŠ‚ç‚¹\n */\nvar find2 = function (root, val1, val2) {\n  if (root == null) {\n    return null;\n  }\n  if (root.val == val1 || root.val == val2) {\n    return root;\n  }\n  let left = find2(root.left, val1, val2);\n  let right = find2(root.right, val1, val2);\n\n  return left || right;\n};\n```\n\n##  äºŒå‰æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ\n\n### é¢˜æ„è¦ç‚¹\n\n- è¿™æ˜¯ä¸€é¢— **ä¸å«é‡å¤å€¼**çš„äºŒå‰æ ‘\n- æ‰¾ **ä¸¤ä¸ªèŠ‚ç‚¹** çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ\n- ç»™ç‚¹çš„èŠ‚ç‚¹**ä¸€å®šå­˜åœ¨äº**äºŒå‰æ ‘ä¸­\n\n### æ€è·¯\n\nåªè¦åœ¨ä¸Šæ–‡ [#äºŒå‰æ ‘ä¸­å¯»æ‰¾å€¼ä¸º val1 æˆ– val2 çš„èŠ‚ç‚¹](/post/f4571bccb6165932a501e4d651e48308.html#äºŒå‰æ ‘ä¸­å¯»æ‰¾å€¼ä¸º-val1-æˆ–-val2-çš„èŠ‚ç‚¹) ä¸­ä¿®æ”¹**ååºä½ç½®**çš„éƒ¨åˆ†ä»£ç å³å¯å®ç°\n\n> https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree/description/\n\n### ä¸¤ç§æƒ…å†µ\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907095203.png)\n\n### ä»£ç  \n\n```javascript\nvar lowestCommonAncestor = function (root, p, q) {\n  return find(root, p.val, q.val);\n};\n\nvar find = function (root, val1, val2) {\n  if (root == null) {\n    return null;\n  }\n  if (root.val == val1 || root.val == val2) {\n    return root;\n  }\n  let left = find(root.left, val1, val2);\n  let right = find(root.right, val1, val2);\n  // ååºä½ç½®ï¼š\n  // å¦‚æœå·¦å³å­æ ‘éƒ½æ‰¾åˆ°äº†ï¼Œè¯´æ˜å½“å‰èŠ‚ç‚¹å°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆ\n  if (left && right) {\n    return root;\n  }\n  // å¦‚æœå·¦å­æ ‘æ‰¾åˆ°äº†ï¼Œå³å­æ ‘æ²¡æ‰¾åˆ°ï¼Œè¯´æ˜æœ€è¿‘å…¬å…±ç¥–å…ˆåœ¨å·¦å­æ ‘\n  // å¦‚æœå³å­æ ‘æ‰¾åˆ°äº†ï¼Œå·¦å­æ ‘æ²¡æ‰¾åˆ°ï¼Œè¯´æ˜æœ€è¿‘å…¬å…±ç¥–å…ˆåœ¨å³å­æ ‘\n  // å¦‚æœå·¦å³å­æ ‘éƒ½æ²¡æ‰¾åˆ°ï¼Œè¯´æ˜æœ€è¿‘å…¬å…±ç¥–å…ˆä¸å­˜åœ¨\n  // å› ä¸ºé¢˜è®¾è¯´äº† p å’Œ q ä¸€å®šå­˜åœ¨äºäºŒå‰æ ‘ä¸­ï¼Œæ‰€ä»¥è¿™é‡Œä¸ç”¨è€ƒè™‘ä¸¤ä¸ªéƒ½æ²¡æ‰¾åˆ°çš„æƒ…å†µ\n  return left || right;\n};\n\n```\n\n## äºŒå‰æ ‘ä¸­å¤šä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ\n\n### é¢˜æ„è¦ç‚¹\n\n- è¿™æ˜¯ä¸€é¢— **ä¸å«é‡å¤å€¼**çš„äºŒå‰æ ‘\n- æ‰¾ **å¤šä¸ªèŠ‚ç‚¹** çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907095756.png)\n\n### ä»£ç \n\n```javascript\nvar lowestCommonAncestor = function (root, nodes) {\n  // å°†åˆ—è¡¨è½¬åŒ–æˆå“ˆå¸Œé›†åˆï¼Œä¾¿äºåˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨\n  let values = new Set();\n  for (let node of nodes) {\n    values.add(node.val);\n  }\n\n  return find(root, values);\n};\n\nvar find = function (root, values) {\n  if (root == null) {\n    return null;\n  }\n  // ä½¿ç”¨å“ˆå¸Œé›†åˆåˆ¤æ–­å½“å‰èŠ‚ç‚¹å­˜åœ¨äº values ä¸­\n  if (values.has(root.val)) {\n    return root;\n  }\n  let left = find(root.left, values);\n  let right = find(root.right, values);\n\n  // ååºä½ç½®ï¼š\n  // å¦‚æœå·¦å³å­æ ‘éƒ½æ‰¾åˆ°äº†ï¼Œè¯´æ˜å½“å‰èŠ‚ç‚¹å°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆ\n  if (left && right) {\n    return root;\n  }\n  // å¦‚æœå·¦å­æ ‘æ‰¾åˆ°äº†ï¼Œå³å­æ ‘æ²¡æ‰¾åˆ°ï¼Œè¯´æ˜æœ€è¿‘å…¬å…±ç¥–å…ˆåœ¨å·¦å­æ ‘\n  // å¦‚æœå³å­æ ‘æ‰¾åˆ°äº†ï¼Œå·¦å­æ ‘æ²¡æ‰¾åˆ°ï¼Œè¯´æ˜æœ€è¿‘å…¬å…±ç¥–å…ˆåœ¨å³å­æ ‘\n  // å¦‚æœå·¦å³å­æ ‘éƒ½æ²¡æ‰¾åˆ°ï¼Œè¯´æ˜æœ€è¿‘å…¬å…±ç¥–å…ˆä¸å­˜åœ¨\n  // å› ä¸ºé¢˜è®¾è¯´äº† p å’Œ q ä¸€å®šå­˜åœ¨äºäºŒå‰æ ‘ä¸­ï¼Œæ‰€ä»¥è¿™é‡Œä¸ç”¨è€ƒè™‘ä¸¤ä¸ªéƒ½æ²¡æ‰¾åˆ°çš„æƒ…å†µ\n  return left || right;\n};\n```\n\n## äºŒå‰æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ\n\n> åŒ [#äºŒå‰æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](/post/f4571bccb6165932a501e4d651e48308.html#äºŒå‰æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ) ï¼Œä½†ä¸¤ä¸ªèŠ‚ç‚¹ä¸ä¸€å®šåœ¨äºŒå‰æ ‘ä¸­ \n\n### é¢˜æ„è¦ç‚¹\n\n- è¿™æ˜¯ä¸€é¢— **ä¸å«é‡å¤å€¼**çš„äºŒå‰æ ‘\n- æ‰¾ **ä¸¤ä¸ªèŠ‚ç‚¹** çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ\n- ç»™ç‚¹çš„èŠ‚ç‚¹**ä¸ä¸€å®šå­˜åœ¨**äºäºŒå‰æ ‘ä¸­\n\n### æ€è·¯\n\n`p`Â å’ŒÂ `q`Â ä¸ä¸€å®šå­˜åœ¨äºæ ‘ä¸­ï¼Œæ‰€ä»¥ä½ ä¸èƒ½é‡åˆ°ä¸€ä¸ªç›®æ ‡å€¼å°±ç›´æ¥è¿”å›ï¼Œè€Œåº”è¯¥å¯¹äºŒå‰æ ‘è¿›è¡Œ**å®Œå…¨æœç´¢**ï¼ˆéå†æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ï¼Œå¦‚æœå‘ç°Â `p`Â æˆ–Â `q`Â ä¸å­˜åœ¨äºæ ‘ä¸­ï¼Œé‚£ä¹ˆæ˜¯ä¸å­˜åœ¨Â `LCA`Â çš„\n\n### ä»£ç \n\n```javascript\nfunction lowestCommonAncestor(root, p, q) {\n  return find(root, p.val, q.val);\n}\n\nfunction find(root, val1, val2) {\n  if (root == null) {\n    return null;\n  }\n\n  // ä¸èƒ½æ‰¾åˆ°å°±è¿”å› root,å› ä¸ºæè®¾ä¸­è¯´ p å’Œ q ä¸ä¸€å®šå­˜åœ¨äºäºŒå‰æ ‘ä¸­\n  // if (root.val == val1 || root.val == val2) {\n  //   return root;\n  // }\n\n  let left = find(root.left, val1, val2);\n  let right = find(root.right, val1, val2);\n\n  // ååºä½ç½®ï¼š\n  // å¦‚æœå·¦å³å­æ ‘éƒ½æ‰¾åˆ°äº†ï¼Œè¯´æ˜å½“å‰èŠ‚ç‚¹å°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆ\n  if (left && right) {\n    return root;\n  }\n  // å¦‚æœå·¦å­æ ‘æ‰¾åˆ°äº†ï¼Œå³å­æ ‘æ²¡æ‰¾åˆ°ï¼Œè¯´æ˜æœ€è¿‘å…¬å…±ç¥–å…ˆåœ¨å·¦å­æ ‘\n  if (left && !right) {\n    return left;\n  }\n  // å¦‚æœå³å­æ ‘æ‰¾åˆ°äº†ï¼Œå·¦å­æ ‘æ²¡æ‰¾åˆ°ï¼Œè¯´æ˜æœ€è¿‘å…¬å…±ç¥–å…ˆåœ¨å³å­æ ‘\n  if (!left && right) {\n    return right;\n  }\n\n  return left || right || null;\n}\n\n```\n\n## äºŒå‰æ ‘æœç´¢æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907102039.png)\n\n### é¢˜æ„è¦ç‚¹\n\n- è¿™æ˜¯ä¸€é¢— **ä¸å«é‡å¤å€¼**çš„äºŒå‰**æœç´¢æ ‘**\n- æ‰¾ **ä¸¤ä¸ªèŠ‚ç‚¹** çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ\n- ç»™ç‚¹çš„èŠ‚ç‚¹**ä¸€å®šå­˜åœ¨**äºäºŒå‰æ ‘ä¸­\n\n### ä»£ç \n\n```javascript\n// äºŒå‰æ ‘æœç´¢æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ\nvar lowestCommonAncestor = function (root, p, q) {\n  // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œè¯´æ˜æ²¡æœ‰æœ€è¿‘å…¬å…±ç¥–å…ˆ\n  if (root == null) {\n    return null;\n  }\n\n  // å¦‚æœ p å’Œ q éƒ½å°äºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œè¯´æ˜æœ€è¿‘å…¬å…±ç¥–å…ˆåœ¨å·¦å­æ ‘\n  if (root.val > p.val && root.val > q.val) {\n    return lowestCommonAncestor(root.left, p, q);\n  }\n\n  // å¦‚æœ p å’Œ q éƒ½å¤§äºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œè¯´æ˜æœ€è¿‘å…¬å…±ç¥–å…ˆåœ¨å³å­æ ‘\n  if (root.val < p.val && root.val < q.val) {\n    return lowestCommonAncestor(root.right, p, q);\n  }\n\n  // å¦‚æœ p å’Œ q ä¸€ä¸ªå¤§äºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œä¸€ä¸ªå°äºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œè¯´æ˜å½“å‰èŠ‚ç‚¹å°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆ\n  return root;\n};\n\n```\n\n## äºŒå‰æ ‘çš„æœ€å¤§å…¬å…±ç¥–å…ˆå˜ç§\n\nè¾“å…¥çš„äºŒå‰æ ‘èŠ‚ç‚¹æ¯”è¾ƒç‰¹æ®Šï¼ŒåŒ…å«æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„æŒ‡é’ˆ `parent`\n\n```javascript\nvar Node = {\n    val: 0,\n    left: null,\n    right: null,\n    parent: null\n};\n\n// ç”±äºèŠ‚ç‚¹ä¸­åŒ…å«çˆ¶èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œæ‰€ä»¥äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹å°±æ²¡å¿…è¦è¾“å…¥äº†\n// å‡½æ•°ç­¾åå¦‚ä¸‹\nvar lowestCommonAncestor = function(p, q) {}\n\n```\n\n**è¿™é“é¢˜å…¶å®ä¸æ˜¯å…¬å…±ç¥–å…ˆçš„é—®é¢˜ï¼Œè€Œæ˜¯å•é“¾è¡¨ç›¸äº¤çš„é—®é¢˜**ï¼Œä½ æŠŠÂ `parent`Â æŒ‡é’ˆæƒ³è±¡æˆå•é“¾è¡¨çš„Â `next`Â æŒ‡é’ˆï¼Œé¢˜ç›®å°±å˜æˆäº†ï¼š\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907103749.png)\n\nå¦‚ä¸‹å›¾ï¼š\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240907104537.png)\n### ä»£ç \n\n```javascript\nvar Node = {\n  val: 0,\n  left: null,\n  right: null,\n  parent: null,\n};\n\n// äºŒå‰æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ\nvar lowestCommonAncestor = function (p, q) {\n  // åˆ†åˆ«è®°å½• p å’Œ q çš„çˆ¶èŠ‚ç‚¹ï¼Œç”¨äºç§»åŠ¨ p å’Œ q åˆ°æ ¹èŠ‚ç‚¹\n  let p1 = p;\n  let p2 = q;\n\n  while (p1 != p2) {\n    // å¦‚æœ p1 ä¸ºç©ºï¼Œç§»åŠ¨åˆ° q çš„çˆ¶èŠ‚ç‚¹\n    // å¦‚æœ p1 ä¸ä¸ºç©ºï¼Œå‘æ ¹èŠ‚ç‚¹æ–¹å‘ç§»åŠ¨ï¼Œå³æŒ‡é’ˆå‘æŒ‡å‘ p1 çš„çˆ¶èŠ‚ç‚¹\n    if (p1 === null) {\n      p1 = q;\n    } else {\n      p1 = p1.parent;\n    }\n\n    // å¦‚æœ p2 ä¸ºç©ºï¼Œç§»åŠ¨åˆ° p çš„çˆ¶èŠ‚ç‚¹\n    // å¦‚æœ p2 ä¸ä¸ºç©ºï¼Œå‘æ ¹èŠ‚ç‚¹æ–¹å‘ç§»åŠ¨ï¼ŒæŒ‡é’ˆå‘æŒ‡å‘ p2 çš„çˆ¶èŠ‚ç‚¹\n    if (p2 === null) {\n      p2 = p;\n    } else {\n      p2 = p2.parent;\n    }\n  }\n};\n\n```\n## å‚è€ƒ\n\nhttps://labuladong.online/algo/practice-in-action/lowest-common-ancestor-summary/\n\n## åŸé¢˜\n\n| Leetcode                                                                                                                             | åŠ›æ‰£                                                                                                                  |     |\n| ------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------- | --- |\n| [1644. Lowest Common Ancestor of a Binary Tree II](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree-ii/)ğŸ”’      | [1644. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ II](https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree-ii/)ğŸ”’                   | ğŸŸ   |\n| [1650. Lowest Common Ancestor of a Binary Tree III](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree-iii/)ğŸ”’    | [1650. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ III](https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree-iii/)ğŸ”’                 | ğŸŸ   |\n| [1676. Lowest Common Ancestor of a Binary Tree IV](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree-iv/)ğŸ”’      | [1676. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ IV](https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree-iv/)ğŸ”’                   | ğŸŸ   |\n| [235. Lowest Common Ancestor of a Binary Search Tree](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-search-tree/) | [235. äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-search-tree/)                   | ğŸŸ   |\n| [236. Lowest Common Ancestor of a Binary Tree](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/)               | [236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree/)                            | ğŸŸ   |\n| -                                                                                                                                    | [å‰‘æŒ‡ Offer 68 - I. äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://leetcode.cn/problems/er-cha-sou-suo-shu-de-zui-jin-gong-gong-zu-xian-lcof/) | ğŸŸ¢  |\n| -                                                                                                                                    | [å‰‘æŒ‡ Offer 68 - II. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://leetcode.cn/problems/er-cha-shu-de-zui-jin-gong-gong-zu-xian-lcof/)          |     |\n","fe15cfe30b265dc18faf363a44f944dd":"\n# äºŒå‰æ ‘åŸºæœ¬æ¦‚å¿µï¼šPython æè¿°\n\n`#äºŒå‰æ ‘`  `#æ•°æ®ç»“æ„` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å®šä¹‰ \n\n```python\n# äºŒå‰æ ‘çš„èŠ‚ç‚¹å®šä¹‰\nclass TreeNode:\n    def __init__(self, val: int):\n        self.val = x\n        self.left = None\n        self.right = None\n\n# ä½ å¯ä»¥è¿™æ ·æ„å»ºä¸€æ£µäºŒå‰æ ‘ï¼š\nroot = TreeNode(1)\nroot.left = TreeNode(2)\nroot.right = TreeNode(3)\nroot.left.left = TreeNode(4)\nroot.right.left = TreeNode(5)\nroot.right.right = TreeNode(6)\n\n# æ„å»ºå‡ºæ¥çš„äºŒå‰æ ‘æ˜¯è¿™æ ·çš„ï¼š\n#     1\n#    / \\\n#   2   3\n#  /   / \\\n# 4   5   6\n```\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922163210.png)\n## 2. å¸¸è§æœ¯è¯­\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922163226.png)\n\n## 3. å®Œç¾äºŒå‰æ ‘ï¼šæ»¡äºŒå‰æ ‘\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922163758.png)\n\n## 4. å®Œå…¨äºŒå‰æ ‘ï¼šåªæœ‰æœ€åº•å±‚æ²¡è¢«å¡«æ»¡\n\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922163825.png)\n\nè¿™é‡Œç€é‡è¯´ä¸‹`å®Œå…¨äºŒå‰æ ‘`ï¼š\n- å¶å­èŠ‚ç‚¹éƒ½åœ¨ `æœ€åº•ä¸‹ä¸¤å±‚`\n- æœ€åä¸€å±‚å¶å­èŠ‚éƒ½é `å·¦æ’åˆ—`\n- å¹¶ä¸”`é™¤äº†æœ€åä¸€å±‚`ï¼Œå…¶ä»–å±‚çš„èŠ‚ç‚¹ä¸ªæ•°éƒ½è¦è¾¾åˆ°æœ€å¤§\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/9a9462b0ae355f83607ec904d5df7553.png)\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/05dd6048d8688e6a58ef6e8518485942.png)\n\n\n## 5. å®Œæ»¡äºŒå‰æ ‘\n\nå®Œæ»¡äºŒå‰æ ‘ï¼ˆfull binary treeï¼‰é™¤äº†å¶èŠ‚ç‚¹ä¹‹å¤–ï¼Œå…¶ä½™æ‰€æœ‰èŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922164014.png)\n\n## 6. å¹³è¡¡äºŒå‰æ ‘\n\nå¹³è¡¡äºŒå‰æ ‘ï¼ˆbalanced binary treeï¼‰ä¸­ä»»æ„èŠ‚ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘çš„é«˜åº¦ä¹‹å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡ 1\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922164058.png)\n\n\näºŒå‰æ ‘ä¸­`ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘`çš„`é«˜åº¦ç›¸å·®ä¸èƒ½å¤§äº 1`\n\n![|568](https://832-1310531898.cos.ap-beijing.myqcloud.com/42e64492eba910a231f01894b3811630.png)\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/2130d9f3b6d123735105cd614780218d.png)\n\n## 7. äºŒå‰æ ‘çš„é€€åŒ– â†’ å•é“¾è¡¨\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922164118.png)\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922164214.png)\n\n\n\n\n","8b375e37b5b654c48fdd006d0e0b42cd":"\n# äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡ä¸€ï¼šäºŒå‰æ ‘çš„ç‰¹æ€§ï¼‰\n\n\n`#BST` `#leetcode`  `#äºŒå‰æ ‘/äºŒå‰æœç´¢æ ‘`   `#2024/09/08`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. äºŒå‰æœç´¢æ ‘çš„ç‰¹æ€§ \n\n- å·¦å°å³å¤§\n\t- å› ä¸ºè¿™ä¸ªç‰¹æ€§ï¼Œå®ƒå¯ä»¥æä¾› `logN` çº§åˆ«çš„å¢åˆ æŸ¥æ”¹æ•ˆç‡\n\t- ç›´æ¥åŸºäº BST çš„æ•°æ®ç»“æ„æœ‰ AVL æ ‘ï¼Œçº¢é»‘æ ‘ç­‰\n- å®ƒçš„æ¯ä¸ªå­èŠ‚ç‚¹çš„å·¦ä¾§å­æ ‘å’Œå³ä¾§å­æ ‘**éƒ½æ˜¯ BST**\n- BST çš„**ä¸­åº**éå†ç»“æœæ˜¯**å‡åº**çš„\n\n## 2. äºŒå‰æœç´¢æ ‘ä¸­ç¬¬Kå°çš„å…ƒç´ \n\n### 2.1. é¢˜æ„\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908112644.png)\n\n### 2.2. ä»£ç å®ç°\n\n```javascript\nvar kthSmallest = function (root, k) {\n  let res = 0;\n  function traverse(node) {\n    if (!node) return;\n\n    traverse(node.left);\n    /*********************************\n     ********** ä¸­åºä½ç½® **************\n     **********************************/\n    k--;\n    // k === 0 æ—¶ï¼Œè¡¨ç¤ºå·²ç»æ‰¾åˆ°ç¬¬ k å°çš„å…ƒç´ \n    if (k === 0) {\n      res = node.val;\n      return;\n    }\n    traverse(node.right);\n  }\n\n  traverse(root);\n\n  return res;\n};\n```\n\n### 2.3. å¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼š\n1. æœ€ä½³æƒ…å†µï¼š`O(k)`\n   - å¦‚æœç¬¬ k å°çš„å…ƒç´ åœ¨æ ‘çš„å·¦ä¾§è¾ƒæµ…çš„ä½ç½®ï¼Œæˆ‘ä»¬å¯èƒ½åªéœ€è¦è®¿é—® k ä¸ªèŠ‚ç‚¹å°±èƒ½æ‰¾åˆ°å®ƒã€‚\n2. æœ€åæƒ…å†µï¼š`O(n)`\n   - å¦‚æœ k ç­‰äºèŠ‚ç‚¹æ€»æ•°ï¼Œæˆ–è€…ç¬¬ k å°çš„å…ƒç´ åœ¨æ ‘çš„å³ä¾§è¾ƒæ·±çš„ä½ç½®ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦éå†æ•´æ£µæ ‘ã€‚\n   - n æ˜¯æ ‘ä¸­èŠ‚ç‚¹çš„æ€»æ•°ã€‚\n3. å¹³å‡æƒ…å†µï¼š`O(n)`\n   - åœ¨å¹³å‡æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦éå†å¤§éƒ¨åˆ†èŠ‚ç‚¹æ‰èƒ½æ‰¾åˆ°ç¬¬ k å°çš„å…ƒç´ ã€‚\n\nç©ºé—´å¤æ‚åº¦ï¼š`O(h)`ï¼Œå…¶ä¸­ h æ˜¯**æ ‘çš„é«˜åº¦**\n1. ä¸»è¦çš„ç©ºé—´æ¶ˆè€—æ¥è‡ªäºé€’å½’è°ƒç”¨æ ˆã€‚\n2. åœ¨æœ€åæƒ…å†µä¸‹ï¼ˆæ ‘å®Œå…¨ä¸å¹³è¡¡ï¼Œå‘ˆç°ä¸ºä¸€æ¡é“¾ï¼‰ï¼Œé«˜åº¦ h å¯èƒ½ç­‰äºèŠ‚ç‚¹æ•° nï¼Œæ­¤æ—¶ç©ºé—´å¤æ‚åº¦ä¸º O(n)ã€‚\n3. åœ¨æœ€ä½³æƒ…å†µä¸‹ï¼ˆå®Œå…¨å¹³è¡¡äºŒå‰æ ‘ï¼‰ï¼Œé«˜åº¦ h çº¦ç­‰äº log(n)ï¼Œæ­¤æ—¶ç©ºé—´å¤æ‚åº¦ä¸º `O(log n)`ã€‚\n\né¢å¤–è¯´æ˜ï¼š\n- è¿™ä¸ªè§£æ³•æ²¡æœ‰ä½¿ç”¨ä»»ä½•é¢å¤–çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨èŠ‚ç‚¹ï¼Œè¿™æœ‰åŠ©äºä¿æŒè¾ƒä½çš„ç©ºé—´å¤æ‚åº¦ã€‚\n- è™½ç„¶æˆ‘ä»¬å®šä¹‰äº†å‡ ä¸ªå˜é‡ï¼ˆcount, resultï¼‰ï¼Œä½†å®ƒä»¬å ç”¨çš„ç©ºé—´æ˜¯å¸¸æ•°çº§çš„ï¼Œä¸éšè¾“å…¥è§„æ¨¡å˜åŒ–ï¼Œå› æ­¤åœ¨åˆ†æç©ºé—´å¤æ‚åº¦æ—¶å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚\n\næ€»ç»“ï¼š\n- æ—¶é—´å¤æ‚åº¦ï¼š\n\t- æœ€ä½³ `O(k)`\n\t- æœ€åå’Œå¹³å‡ `O(n)`\n- ç©ºé—´å¤æ‚åº¦ï¼š`O(h)`ï¼Œå…¶ä¸­ h æ˜¯æ ‘çš„é«˜åº¦ï¼Œæœ€åæƒ…å†µä¸‹å¯èƒ½è¾¾åˆ° `O(n)`\n\nè¿™ä¸ªè§£æ³•åœ¨æ—¶é—´å’Œç©ºé—´æ•ˆç‡ä¸Šéƒ½æ˜¯ç›¸å½“ä¸é”™çš„ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œå®ƒçš„æ€§èƒ½è¡¨ç°ä¼šæ›´å¥½ã€‚\n\n### 2.4. ä¼˜åŒ–ï¼šä¸­åºéå† + æ•°ç»„ç¼“å­˜\n\nè¿™ç§æ–¹æ³•é€‚ç”¨äºæ ‘ä¸ç»å¸¸å˜åŠ¨ï¼Œä½†é¢‘ç¹æŸ¥è¯¢ä¸åŒ k å€¼çš„æƒ…å†µ\n\n## 3. æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘\n\n### 3.1. é¢˜ç›®\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908115150.png)\n\n```javascript\n/**\n * @description äºŒå‰æœç´¢æ ‘è½¬ç´¯åŠ æ ‘\n * @param {TreeNode} root\n * @return {TreeNode}\n */\nvar convertBST = function (root) {\n  var sum = 0;\n\n  var traverse = function (root) {\n    if (root == null) {\n      return;\n    }\n    // éœ€è¦ååºä¸­åºéå†\n    // å…ˆè¿›å…¥å³å­æ ‘ï¼Œå†è®¿é—®æ ¹èŠ‚ç‚¹ï¼Œæœ€åå·¦å­æ ‘\n    // æ‰€ä»¥ä¸­åºéå†çš„é€†åºæ˜¯ï¼šå³ -> æ ¹ -> å·¦\n    // è®¡ç®—ç´¯åŠ å’Œæ—¶ï¼Œéœ€è¦å…ˆéå†å³å­æ ‘ï¼Œå†ç´¯åŠ æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œæœ€åéå†å·¦å­æ ‘\n    traverse(root.right);\n    /*****************\n     * ä¸­åºéå†ä½ç½®\n     ****************/\n    // ç»´æŠ¤ç´¯åŠ å’Œ\n    sum += root.val;\n    // å°† BST è½¬åŒ–æˆç´¯åŠ æ ‘\n    root.val = sum;\n    traverse(root.left);\n  };\n\n  traverse(root);\n\n  // è¿”å›æ ¹èŠ‚ç‚¹\n  return root;\n};\n```\n\n### 3.2. æ³¨æ„ç‚¹\n\n- éœ€è¦å…ˆéå†**å³èŠ‚ç‚¹**   ï¼Œ è¿™æ ·åœ¨ä¸­åºä½ç½®çš„ä»£ç å°±æ˜¯ **å³ â†’ æ ¹èŠ‚ç‚¹** â†’  å·¦\n\t- `sum = æ‰€æœ‰å³èŠ‚ç‚¹ + æ ¹èŠ‚ç‚¹çš„å€¼`\n\n## 4. å‚è€ƒ\n\nhttps://labuladong.online/algo/data-structure/bst-part1/\n\n## 5. ç›¸å…³é¢˜ç›®\n\n| LeetCode                                                                                                              | åŠ›æ‰£                                                                                        | éš¾åº¦  |\n| --------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------- | --- |\n| [1038. Binary Search Tree to Greater Sum Tree](https://leetcode.com/problems/binary-search-tree-to-greater-sum-tree/) | [1038. ä»äºŒå‰æœç´¢æ ‘åˆ°æ›´å¤§å’Œæ ‘](https://leetcode.cn/problems/binary-search-tree-to-greater-sum-tree/) | ğŸŸ   |\n| [230. Kth Smallest Element in a BST](https://leetcode.com/problems/kth-smallest-element-in-a-bst/)                    | [230. äºŒå‰æœç´¢æ ‘ä¸­ç¬¬Kå°çš„å…ƒç´ ](https://leetcode.cn/problems/kth-smallest-element-in-a-bst/)          | ğŸŸ   |\n| [538. Convert BST to Greater Tree](https://leetcode.com/problems/convert-bst-to-greater-tree/)                        | [538. æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘](https://leetcode.cn/problems/convert-bst-to-greater-tree/)            | ğŸŸ   |\n| -                                                                                                                     | [å‰‘æŒ‡ Offer II 054. æ‰€æœ‰å¤§äºç­‰äºèŠ‚ç‚¹çš„å€¼ä¹‹å’Œ](https://leetcode.cn/problems/w6cpku/)                     | ğŸŸ   |\n\n","26f88a46f44b52b1a2db6d11657901c9":"\n# äºŒå‰æ ‘çš„å­˜å‚¨æ–¹å¼\n\n\n`#äºŒå‰æ ‘`  `#æ•°æ®ç»“æ„` \n\n\nä¸¤ç§å­˜å‚¨æ–¹å¼\n- é“¾å¼å­˜å‚¨\n- æ•°ç»„å­˜å‚¨\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é“¾å¼å­˜å‚¨ - å¯¹è±¡ \n\n![|512](https://832-1310531898.cos.ap-beijing.myqcloud.com/1f57396c6c7d0ec0908c8fd1d70696d0.png)\n\n## 2. é¡ºåºå­˜å‚¨ - æ•°ç»„\n\n### 2.1. å®Œç¾äºŒå‰æ ‘çš„æ•°ç»„è¡¨ç¤º\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922165414.png)\n\n### 2.2. æ•°ç»„å¯å”¯ä¸€çš„è¡¨ç¤ºäºŒå‰æ ‘\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922165450.png)\n\n### 2.3. å®Œå…¨äºŒå‰æ ‘ï¼šæ•°ç»„æ²¡æœ‰ç©ºä½\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922165531.png)\n### 2.4. æ˜¯å¦çœå†…å­˜\n\n`å®Œå…¨äºŒå‰æ ‘`ç”¨`æ•°ç»„`æ¥å­˜å‚¨æ˜¯æœ€çœå†…å­˜çš„æ–¹å¼\n\n![|544](https://832-1310531898.cos.ap-beijing.myqcloud.com/e29fe4038c62a7dc643d94fc78940983.png)\n\néå®Œå…¨äºŒå‰æ ‘åˆ™ä¼šæµªè´¹ç©ºé—´ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![|576](https://832-1310531898.cos.ap-beijing.myqcloud.com/cf10cd1cdb8a374b53403b941b9b9e96.png)\n\n### 2.5. ä¼˜åŠ£åŠ¿åˆ†æ\n\näºŒå‰æ ‘çš„æ•°ç»„è¡¨ç¤ºä¸»è¦æœ‰ä»¥ä¸‹ä¼˜ç‚¹\n- æ•°ç»„å­˜å‚¨åœ¨è¿ç»­çš„å†…å­˜ç©ºé—´ä¸­ï¼Œå¯¹ç¼“å­˜å‹å¥½ï¼Œè®¿é—®ä¸éå†é€Ÿåº¦è¾ƒå¿«ã€‚\n- ä¸éœ€è¦å­˜å‚¨æŒ‡é’ˆï¼Œæ¯”è¾ƒèŠ‚çœç©ºé—´ã€‚\n- å…è®¸éšæœºè®¿é—®èŠ‚ç‚¹ã€‚\nç„¶è€Œï¼Œæ•°ç»„è¡¨ç¤ºä¹Ÿå­˜åœ¨ä¸€äº›å±€é™æ€§\n- æ•°ç»„å­˜å‚¨éœ€è¦è¿ç»­å†…å­˜ç©ºé—´ï¼Œå› æ­¤ä¸é€‚åˆå­˜å‚¨æ•°æ®é‡è¿‡å¤§çš„æ ‘ã€‚\n- å¢åˆ èŠ‚ç‚¹éœ€è¦é€šè¿‡æ•°ç»„æ’å…¥ä¸åˆ é™¤æ“ä½œå®ç°ï¼Œæ•ˆç‡è¾ƒä½ã€‚\n- å½“äºŒå‰æ ‘ä¸­å­˜åœ¨å¤§é‡Â `None`Â æ—¶ï¼Œæ•°ç»„ä¸­åŒ…å«çš„èŠ‚ç‚¹æ•°æ®æ¯”é‡è¾ƒä½ï¼Œç©ºé—´åˆ©ç”¨ç‡è¾ƒä½\n","4ac3c6aa01ad5cfc8723fd87ee46e2fe":"\n# äºŒå‰æ ‘ç®—æ³•æ¦‚è¿°\n\n\n`#ç®—æ³•/äºŒå‰æ ‘` `#2023/04/22`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ€»ç»“ \n\n- äºŒå‰æ ‘çš„**é‡è¦æ€§**ï¼šåªè¦æ¶‰åŠåˆ°`é€’å½’`ï¼Œå°±æ˜¯äºŒå‰æ ‘é—®é¢˜\n- ç†è§£äºŒå‰æ ‘çš„å‰åä¸­åºéå†\n- äºŒå‰æ ‘çš„ä¸¤ç§è§£æ³•\n- ç¤ºä¾‹ï¼šäºŒå‰æ ‘çš„`æœ€å¤§æ·±åº¦`\n- ç¤ºä¾‹ï¼šæ±‚è§£äºŒå‰æ ‘çš„`ç›´å¾„` \n- å±‚æ¬¡éå†ï¼šå…¶å®å°±æ˜¯ BFS \n\n## 2. äºŒå‰æ ‘çš„é‡è¦æ€§\n\n`äºŒå‰æ ‘æ¨¡å‹`å‡ ä¹æ˜¯æ‰€æœ‰é«˜çº§ç®—æ³•çš„åŸºç¡€ï¼Œæ¢å¥è¯æ¥è¯´ï¼Œ`é€’å½’`æœ‰å¤šé‡è¦ï¼Œé‚£ä¹ˆäºŒå‰æ ‘å°±æœ‰å¤šé‡è¦ \n\n> [!info]\n> è‡ªå·±æƒ³æƒ³ `é€’å½’` æœ‰å¤šé‡è¦\n\n**ç”šè‡³å¯ä»¥è¯´ï¼Œåªè¦æ¶‰åŠ `é€’å½’`ï¼Œéƒ½å¯ä»¥æŠ½è±¡æˆ`äºŒå‰æ ‘`çš„é—®é¢˜ã€‚**\n\n## 3. çœŸæ­£ç†è§£äºŒå‰æ ‘çš„`å‰åä¸­éå†`\n\n### 3.1. æ•™ç§‘ä¹¦ä¸­çš„äºŒå‰æ ‘éå†\n\n- å‰åºéå†ï¼ˆ`æ ¹ => å·¦ => å³`ï¼‰\n\t- å¯¹äºæ ‘ä¸­çš„`ä»»æ„èŠ‚ç‚¹`æ¥è¯´ï¼Œå…ˆè®¿é—®è¿™ä¸ª`èŠ‚ç‚¹æœ¬èº«`ï¼Œç„¶åå†è®¿é—®å®ƒçš„`å·¦å­æ ‘`ï¼Œæœ€åè®¿é—®å®ƒçš„`å³å­æ ‘`\n\t- **åœºæ™¯ï¼š** è¾“å‡ºæŸä¸ªæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶åç§°(å¯ä»¥æœ‰å­æ–‡ä»¶å¤¹) \n- ä¸­åºéå†ï¼ˆ`å·¦ => æ ¹ => å³`ï¼‰\n\t- å¯¹äºæ ‘ä¸­çš„`ä»»æ„èŠ‚ç‚¹æ¥`è¯´ï¼Œå…ˆè®¿é—®å®ƒçš„`å·¦å­æ ‘`ï¼Œç„¶åå†è®¿é—®`å®ƒçš„æœ¬èº«`ï¼Œæœ€åè®¿é—®å®ƒçš„`å³å­æ ‘`\n\t- **åº”ç”¨ï¼š**  æ¯”å¦‚å¯¹ äºŒå‰æœç´¢æ ‘è¿›è¡Œæ’åº\n- ååºéå†ï¼ˆ`å·¦ => å³ => æ ¹`ï¼‰\n\t- å¯¹äºæ ‘ä¸­çš„`ä»»æ„èŠ‚ç‚¹`æ¥è¯´ï¼Œå…ˆè®¿é—®å®ƒçš„`å·¦å­æ ‘`ï¼Œç„¶åå†è®¿é—®å®ƒçš„`å³å­æ ‘`ï¼Œæœ€åè®¿é—®`å®ƒæœ¬èº«`\n\t- **åº”ç”¨ï¼š** éœ€è¦æ ¹æ® `å·¦å³å­æ ‘çš„ä¿¡æ¯` å»æ‰§è¡Œæ“ä½œï¼Œæ¯”å¦‚åˆ é™¤èŠ‚ç‚¹ï¼Œåˆæ¯”å¦‚`ç»Ÿè®¡æŸä¸ªæ–‡ä»¶å¤¹çš„å¤§å°` ï¼Œä½ å°±å¾—çŸ¥é“å®ƒä¸‹é¢æ‰€æœ‰æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹çš„å¤§å°ã€‚\n\næ¯”å¦‚`å‰åéå†`çš„ä»£ç å¦‚ä¸‹ï¼š\n\n![image.png|525](https://832-1310531898.cos.ap-beijing.myqcloud.com/86f2e58a772430f68b6f6b94b4c2da40.png)\n\n#### 3.1.1. äºŒå‰æ ‘éå†æ¡†æ¶ï¼šå…³æ³¨ä¸‰ä¸ªä½ç½®å³å¯\n\n```javascript\nfunction traverse(root) {\n    if (root == null) {\n        return;\n    }\n    /*************************************************\n     * ::::å‰åºä½ç½®::::\n     ************************************************/\n    traverse(root.left);\n    /*************************************************\n     * ::::ä¸­åºä½ç½®::::\n     ************************************************/\n    traverse(root.right);\n    /*************************************************\n     * ::::ååºä½ç½®::::\n     ************************************************/\n}\n```\n\né‚£ä¹ˆï¼Œä½ çœŸæ­£ç†è§£äº†å‰åä¸­éå†äº†å—ï¼Ÿæ¯”å¦‚ï¼Œ`å¿«é€Ÿæ’åº`å°±æ˜¯ä¸ª`äºŒå‰æ ‘çš„å‰åºéå†`ï¼Œ`å½’å¹¶æ’åº`å°±æ˜¯ä¸ª`äºŒå‰æ ‘çš„ååºéå†` ï¼Œä½ `å¦‚ä½•ç†è§£`ï¼Ÿ\n\n### 3.2. `å¿«é€Ÿæ’åº`å°±æ˜¯äºŒå‰æ ‘çš„`å‰åºéå†`\n\nä»£ç æ¡†æ¶ï¼š\n\n```javascript\nvar sort = function (nums, lo, hi) {\n    /*************************************************\n     * ::::å‰åºä½ç½®::::\n     ************************************************/\n    // é€šè¿‡äº¤æ¢å…ƒç´ æ„å»ºåˆ†ç•Œç‚¹ p\n    var p = partition(nums, lo, hi);\n\n    sort(nums, lo, p - 1);\n    sort(nums, p + 1, hi);\n};\n```\n\n### 3.3. `å½’å¹¶æ’åº` å°±æ˜¯äºŒå‰æ ‘çš„`ååºéå†`\n\nä»£ç æ¡†æ¶ï¼š\n\n```javascript\n// å®šä¹‰ï¼šæ’åº nums[lo..hi]\nfunction sort(nums, lo, hi) {\n  if (lo == hi) {\n    return;\n  }\n  \n  var mid = Math.floor((lo + hi) / 2);\n  // é€’å½’1:  åˆ©ç”¨å®šä¹‰ï¼Œæ’åº nums[lo..mid]\n  sort(nums, lo, mid);\n  // é€’å½’2:  åˆ©ç”¨å®šä¹‰ï¼Œæ’åº nums[mid+1..hi]\n  sort(nums, mid + 1, hi);\n\n  /****** ååºä½ç½® ******/\n  // åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œ\n  merge(nums, lo, mid, hi);\n\n}\nfunction merge(nums, lo, mid, hi);\n```\n\n### 3.4. è¯´å›éå†æ¡†æ¶ï¼šå‰ä¸­åºç©¶ç«Ÿä»£è¡¨ä»€ä¹ˆï¼Ÿ\n\n```javascript\nvar traverse = function(root) {\n    if (root === null) {\n        return;\n    }\n    // å‰åºä½ç½®\n    traverse(root.left);\n    // ä¸­åºä½ç½®\n    traverse(root.right);\n    // ååºä½ç½®\n}\n```\n\nä»¥ä¸Šéå†æ¡†æ¶ï¼Œåªæ˜¯ä¸€ä¸ªèƒ½å¤Ÿ`éå†äºŒå‰æ ‘æ‰€æœ‰èŠ‚ç‚¹`çš„ä¸€ä¸ª`å‡½æ•° traverse` è€Œå·²ï¼Œå’Œ éå†`æ•°ç»„`ã€`é“¾è¡¨`æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚å¦‚ä¸‹ï¼š\n\n```javascript\n\n// è¿­ä»£éå†ï¼šforå¾ªç¯ éå†æ•°ç»„\nvar traverse = function(arr){\n    for (var i=0; i<arr.length; i++) {\n        // Code block to be executed\n    }\n}\n// é€’å½’éå†ï¼š éå†æ•°ç»„\nvar traverse = function(arr, i){\n    if (i == arr.length) {\n        return;\n    }\n    // å‰åºä½ç½®\n    traverse(arr, i + 1);\n    // ååºä½ç½®\n}\n// è¿­ä»£éå†ï¼šforå¾ªç¯ éå†é“¾è¡¨\nvar traverse = function(head){\n    for (var p = head; p != null; p = p.next) {\n        // Code block to be executed\n    }\n}\n//  é€’å½’éå†ï¼š éå†é“¾è¡¨\nvar traverse = function(head){\n    if (head == null) {\n        return;\n    }\n    // å‰åºä½ç½®\n    traverse(head.next);\n    // ååºä½ç½®\n}\n```\n\næ‰€ä»¥ï¼Œæœ‰ä»¥ä¸‹ç»“è®ºï¼š\n\n1. éå†æœ‰ä¸¤ç§æ–¹å¼ï¼š `è¿­ä»£éå†` å’Œ `é€’å½’éå†`\n2. `äºŒå‰æ ‘`è¿™ç§ç»“æ„æ— éå°±æ˜¯`äºŒå‰é“¾è¡¨`ï¼Œæ²¡æ³•é€šè¿‡`è¿­ä»£éå†`\n3. `é€’å½’éå†`ï¼Œæœ‰`å‰åº` å’Œ `ååº`ä¸¤ä¸ªä½ç½®\n\t1. å‰åºä½ç½®æ˜¯`åˆšè¿›å…¥`èŠ‚ç‚¹æ—¶\n\t2. ååºåˆ™æ˜¯`å³å°†ç¦»å¼€`èŠ‚ç‚¹æ—¶\n\nä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ª`å•é“¾è¡¨`çš„éå†æµç¨‹ï¼Œ`ç»¿è‰²`ä»£è¡¨è¿›å…¥èŠ‚ç‚¹ï¼Œå³`å‰åº`ä½ç½®ï¼Œ`çº¢è‰²`ä»£è¡¨ `ååº` ä½ç½®ã€‚\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/b17bfdd9f0325628f085313c91a60ee3.png)\n\n æ‰€ä»¥ï¼Œå¦‚æœæƒ³è¦ `å€’åº` æ‰“å°å•é“¾è¡¨ï¼Œåˆ©ç”¨é€’å½’éå†å•é“¾è¡¨ï¼Œå¹¶åœ¨åç»­ä½ç½®`log`å³å¯ï¼Œå…¶æœ¬è´¨æ˜¯åˆ©ç”¨é€’å½’çš„`å †æ ˆ`èƒ½åŠ›ã€‚å¦‚ä¸‹ä»£ç ï¼š\n\n```javascript\n/* é€’å½’éå†å•é“¾è¡¨ï¼Œå€’åºæ‰“å°é“¾è¡¨å…ƒç´  */\nvar traverse = function(head) {\n    if (head === null) {\n        return;\n    }\n    // å‰åºä½ç½®ä»€ä¹ˆä¹Ÿä¸ç”¨åš\n    traverse(head.next);\n    // ååºä½ç½® æ‰“å°\n    console.log(head.val);\n}\n```\n\näºŒå‰æ ‘ç›¸æ¯”è¾ƒäºå•é“¾è¡¨ï¼Œå¤šäº†ä¸€ä¸ª `ä¸­åºä½ç½®`ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![image.png|569](https://832-1310531898.cos.ap-beijing.myqcloud.com/539bc2cd300873898adcd8866b2afc86.png)\n\n#### 3.4.1. æ€»ç»“ï¼š`å‰ä¸­ååºéå†äºŒå‰æ ‘`çš„`çœŸæ­£åŒºåˆ«`æ˜¯ä»€ä¹ˆï¼Ÿ\n\n1ã€`å‰åºä½ç½®çš„ä»£ç ` åœ¨`åˆšåˆšè¿›å…¥`ä¸€ä¸ªäºŒå‰æ ‘èŠ‚ç‚¹çš„æ—¶å€™æ‰§è¡Œï¼›\n2ã€`ååºä½ç½®çš„ä»£ç ` åœ¨`å°†è¦ç¦»å¼€` ä¸€ä¸ªäºŒå‰æ ‘èŠ‚ç‚¹çš„æ—¶å€™æ‰§è¡Œï¼›\n3ã€`ä¸­åºä½ç½®çš„ä»£ç ` åœ¨ ä¸€ä¸ªäºŒå‰æ ‘èŠ‚ç‚¹`å·¦å­æ ‘`éƒ½éå†å®Œï¼Œ`å³å°†å¼€å§‹`éå†`å…¶å³å­æ ‘çš„æ—¶å€™`æ‰§è¡Œã€‚å¦‚ä¸‹å›¾ï¼š\n\n![image.png|540](https://832-1310531898.cos.ap-beijing.myqcloud.com/7a56cfda23861272bbd42db7b62424c5.png)\n\né€šè¿‡ä¸Šå›¾å¯ä»¥å‘ç°ï¼Œéå†`äºŒå‰æ ‘`çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰`ã€Œå”¯ä¸€ã€`å±äºè‡ªå·±çš„`å‰ä¸­ååºä½ç½®`ã€‚è€Œ`å¤šå‰æ ‘`ï¼Œæ²¡æœ‰`å”¯ä¸€çš„ä¸­åºéå†ä½ç½®`ï¼Œæ‰€ä»¥ä¸å­˜åœ¨`å¤šå‰æ ‘ä¸­åºéå†`ï¼ˆå¤šå‰æ ‘èŠ‚ç‚¹å¯èƒ½æœ‰å¾ˆå¤šå­èŠ‚ç‚¹ï¼Œä¼šå¤šæ¬¡åˆ‡æ¢å­æ ‘å»éå†ï¼‰\n\næœ€åï¼Œ **äºŒå‰æ ‘çš„æ‰€æœ‰é—®é¢˜**ï¼Œå°±æ˜¯è®©ä½ åœ¨`å‰ä¸­ååºä½ç½®`æ³¨å…¥å·§å¦™çš„ä»£ç é€»è¾‘ï¼Œå»è¾¾åˆ°è‡ªå·±çš„ç›®çš„ï¼Œä½ åªéœ€è¦å•ç‹¬æ€è€ƒ`æ¯ä¸€ä¸ªèŠ‚ç‚¹åº”è¯¥åšä»€ä¹ˆ`ï¼Œå…¶ä»–çš„ä¸ç”¨ä½ ç®¡ï¼ŒæŠ›ç»™äºŒå‰æ ‘éå†æ¡†æ¶ï¼Œ`é€’å½’`ä¼šåœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šåšç›¸åŒçš„æ“ä½œ\n\n> [!info]\n> è¿™å°±æ˜¯**é€’å½’çš„æ„ä¹‰**ï¼Œ**ä»£ç æ¡†æ¶å¥½äº†åï¼Œé€’å½’ä¼šå¸®ä½ åšï¼Œä½ çš„å°è„‘è¢‹ç“œå­åˆ«å°è¯•å»ç†è§£é€’å½’**ï¼Œé‚£æ˜¯è®¡ç®—æœºçš„ä¸œè¥¿ï¼Œä½ æä¸è¿‡ä»–ã€‚\n\n## 4. äºŒå‰æ ‘çš„`ä¸¤ç§è§£é¢˜æ€è·¯`\n\n1. `éå†ä¸€éäºŒå‰æ ‘`å¾—å‡ºç­”æ¡ˆ\n2. é€šè¿‡`åˆ†è§£é—®é¢˜`è®¡ç®—å‡ºç­”æ¡ˆ\n \nè¿™ä¸¤ç±»æ€è·¯åˆ†åˆ«å¯¹åº”ç€ `å›æº¯ç®—æ³•æ ¸å¿ƒæ¡†æ¶` å’Œ `åŠ¨æ€è§„åˆ’æ ¸å¿ƒæ¡†æ¶`ã€‚çœ‹å¦‚ä¸‹è§£é‡Šï¼š\n\n- äºŒå‰æ ‘ä¸­ç”¨`éå†æ€è·¯`è§£é¢˜æ—¶å‡½æ•°ç­¾åä¸€èˆ¬æ˜¯ `void traverse(...)`ï¼Œæ²¡æœ‰`è¿”å›å€¼`ï¼Œé `æ›´æ–°å¤–éƒ¨å˜é‡`æ¥è®¡ç®—ç»“æœï¼›\n\t- è€Œ`å›æº¯ç®—æ³•æ ¸å¿ƒæ¡†æ¶` ä¸­ç»™å‡ºçš„å‡½æ•°ç­¾åä¸€èˆ¬ä¹Ÿæ˜¯ `æ²¡æœ‰è¿”å›å€¼çš„ void backtrack(...)`\n- `åˆ†è§£é—®é¢˜æ€è·¯`è§£é¢˜æ—¶`å‡½æ•°å`æ ¹æ®è¯¥å‡½æ•°å…·ä½“åŠŸèƒ½è€Œå®š\n\t- è€Œä¸”ä¸€èˆ¬ä¼š`æœ‰è¿”å›å€¼`ï¼Œè¿”å›å€¼æ˜¯`å­é—®é¢˜çš„è®¡ç®—ç»“æœ`ï¼› \n\t- è€Œ **åŠ¨æ€è§„åˆ’**æ ¸å¿ƒæ¡†æ¶ä¸­ç»™å‡ºçš„å‡½æ•°ç­¾åæ˜¯`å¸¦æœ‰è¿”å›å€¼çš„ dp å‡½æ•°`\n\n## 5. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦\n\n- https://leetcode.cn/problems/maximum-depth-of-binary-tree/\n\n### 5.1. æ€è·¯ 1ï¼šéå†ä¸€éäºŒå‰æ ‘çš„æ€è·¯\n\nå³ `éå†`ä¸€éäºŒå‰æ ‘\n\n- ç”¨ä¸€ä¸ª`å¤–éƒ¨å˜é‡ res`è®°å½•æ¯ä¸ªèŠ‚ç‚¹æ‰€åœ¨çš„æ·±åº¦\n- å˜é‡`depth` è®°å½•å½“å‰é€’å½’åˆ°çš„èŠ‚ç‚¹æ·±åº¦\n\næœ€åï¼Œå– `depth` å’Œ `res` çš„æœ€å¤§å€¼å°±å¯ä»¥å¾—åˆ°æœ€å¤§æ·±åº¦ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\nvar maxDepth = function(root) {\n    let res = 0;\n    // depth è®°å½•å½“å‰é€’å½’åˆ°çš„èŠ‚ç‚¹æ·±åº¦\n    let depth = 0;\n    function traverse(root) {\n        if(root === null) return;\n        depth++;\n        // åˆ°è¾¾å¶å­èŠ‚ç‚¹\n        if(root.left === null && root.right === null){\n            res = Math.max(depth, res);\n        }\n        traverse(root.left);\n        traverse(root.right);\n        depth--;\n    }\n    traverse(root);\n    return res;\n};\n```\n\n> [!info]\n> æ³¨æ„ï¼šå‡½æ•°å‘½åå’Œæ¡†æ¶ `traverse` ï¼Œè¿™ç§è§„èŒƒçš„å¥½å¤„æ˜¯ç›´æ¥å¥—ç”¨å°±è¡Œï¼Œä¸»è¦ç²¾åŠ›æ”¾åœ¨å…·ä½“é€»è¾‘ä¸Šå°±å¥½ï¼Œæ¶å­çš„ä¸œè¥¿éƒ½æ˜¯ä¸ªäººä¹ æƒ¯ï¼Œä½†è¦ç»Ÿä¸€ï¼Œä¸ç„¶ç»™è‡ªå·±æ·»åŠ æˆæœ¬\n\n### 5.2. æ€è·¯ 2ï¼šåˆ†è§£é—®é¢˜çš„æ€è·¯\n\nå³é€šè¿‡`å­æ ‘çš„æœ€å¤§æ·±åº¦`æ¨å¯¼å‡º`åŸæ ‘çš„æ·±åº¦`ï¼Œæ‰€ä»¥å¿…ç„¶ä¸»è¦é€»è¾‘éƒ½åœ¨ `ååºä½ç½®`ï¼Œå› ä¸º`ååºä½ç½®`èƒ½å¤Ÿå¾—åˆ°å­æ ‘çš„æ·±åº¦ã€‚\n\n```javascript\nvar maxDepth = function (root) {\n    if (root == null) {\n        return 0;\n    }\n    // åˆ©ç”¨å®šä¹‰ï¼Œè®¡ç®—å·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦\n    var leftMax = maxDepth(root.left);\n    var rightMax = maxDepth(root.right);\n    // æ•´æ£µæ ‘çš„æœ€å¤§æ·±åº¦ç­‰äºå·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦å–æœ€å¤§å€¼ï¼Œ\n    // ç„¶åå†åŠ ä¸Šæ ¹èŠ‚ç‚¹è‡ªå·±\n    var res = Math.max(leftMax, rightMax) + 1;\n    return res;\n};\n\n```\n\n## 6. é—®ï¼šå¦‚ä½•é€šè¿‡`å‰åºéå†`æ‰“å°æ˜¯æ‰€æœ‰èŠ‚ç‚¹\n\n>  https://leetcode.cn/problems/binary-tree-preorder-traversal/\n\nåŒæ ·éœ€è¦å€ŸåŠ©å¤–éƒ¨å˜é‡ `res`ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```javascript\nvar res = [];\n\n// è¿”å›å‰åºéå†ç»“æœ\nfunction preorderTraverse(root) {\n  traverse(root);\n  return res;\n}\n\n// äºŒå‰æ ‘éå†å‡½æ•°\nfunction traverse(root) {\n  if (root === null) {\n    return;\n  }\n  // å‰åºä½ç½®\n  res.push(root.val);\n  traverse(root.left);\n  traverse(root.right);\n}\n```\n\n> ä¸­åº å’Œ ååº åŒç†ã€‚ä¸Šé¢ä»£ç çš„ä½ç½®å˜ä¸€å˜å³å¯\n\n## 7. ååºä½ç½® ä¸ å‰åºä½ç½® çœŸæ­£åŒºåˆ«ï¼Ÿ\n\nä½ç½®å¾ˆé‡è¦ï¼Œæ¯”å¦‚ä½ å¦‚ä½•ç†è§£\n- `å‰åºä½ç½®`çš„ä»£ç æ‰§è¡Œæ˜¯`è‡ªé¡¶å‘ä¸‹`çš„ï¼Œ\n- è€Œ`ååºä½ç½®`çš„ä»£ç æ‰§è¡Œæ˜¯`è‡ªåº•å‘ä¸Š`ï¼Œçœ‹ä¸‹å›¾ï¼š\n\n![image.png|416](https://832-1310531898.cos.ap-beijing.myqcloud.com/fb34de01e266744af7e0fe797fab28d0.png)\n\næ„å‘³ç€\n- `å‰åºä½ç½®çš„ä»£ç `åªèƒ½ä»å‡½æ•°å‚æ•°ä¸­è·å–`çˆ¶èŠ‚ç‚¹ä¼ é€’æ¥çš„æ•°æ®`ï¼Œ\n- è€Œ`ååºä½ç½®çš„ä»£ç `ä¸ä»…å¯ä»¥è·å–`å‚æ•°æ•°æ®`ï¼Œè¿˜å¯ä»¥è·å–åˆ°`å­æ ‘é€šè¿‡å‡½æ•°è¿”å›å€¼ä¼ é€’å›æ¥çš„æ•°æ®`\n\nçœ‹ä¸¤ä¸ªä¾‹å­ï¼š\n\n### 7.1. å¦‚ä½•æ‰“å°å‡ºæ¯ä¸€ä¸ªèŠ‚ç‚¹æ‰€åœ¨çš„`å±‚æ•°` ï¼Ÿ \n\n> [!tip]\n> \nä½œä¸ºå‚æ•°å¾€ä¸‹ä¼ é€’å³å¯\n\nä¸€ä¸ªèŠ‚ç‚¹åœ¨ç¬¬å‡ å±‚ï¼Œä½ ä»æ ¹èŠ‚ç‚¹éå†è¿‡æ¥çš„è¿‡ç¨‹å°±èƒ½ `é¡ºå¸¦è®°å½•`ï¼Œç”¨é€’å½’å‡½æ•°çš„`å‚æ•°`å°±èƒ½ä¼ é€’ä¸‹å»ï¼Œæ‰€ä»¥æ”¾åœ¨`å‰åºä½ç½®å’Œåç»­ä½ç½®`éƒ½è¡Œï¼Œå› ä¸ºéƒ½å¯ä»¥é€šè¿‡é€’å½’å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ã€‚\n\n```javascript\n/**\n * @param {TreeNode} root\n * @param level å½“å‰èŠ‚ç‚¹æ‰€åœ¨çš„å±‚æ•°\n * */\nfunction traverse(root, level) {\n    if (root == null) {\n        return;\n    }\n    console.log(`èŠ‚ç‚¹ ${root} åœ¨ç¬¬ ${level} å±‚`);\n    // å‰åºä½ç½®\n    traverse(root.left, level + 1);\n    traverse(root.right, level + 1);\n}\n\ntraverse(root, 1);\n```\n\n### 7.2. å¦‚ä½•æ‰“å°å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„`å·¦å³å­æ ‘`å„æœ‰å¤šå°‘èŠ‚ç‚¹ï¼Ÿ\n\nè€Œä»¥ä¸€ä¸ªèŠ‚ç‚¹ä¸ºæ ¹çš„æ•´æ£µå­æ ‘æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Œä½ éœ€è¦`éå†å®Œå­æ ‘ä¹‹å`æ‰èƒ½æ•°æ¸…æ¥šï¼Œç„¶åé€šè¿‡`é€’å½’å‡½æ•°çš„è¿”å›å€¼`æ‹¿åˆ°ç­”æ¡ˆã€‚æ‰€ä»¥å¿…ç„¶éœ€è¦æ”¾åœ¨ `ååºä½ç½®`\n\n```javascript\nvar count = function(root) {\n    if (root === null) {\n        return 0;\n    }\n    var leftCount = count(root.left);\n    var rightCount = count(root.right);\n    // ååºä½ç½®\n    console.log(\"èŠ‚ç‚¹ \" + root + \" çš„å·¦å­æ ‘æœ‰ \" + leftCount + \" ä¸ªèŠ‚ç‚¹ï¼Œå³å­æ ‘æœ‰ \" + rightCount + \" ä¸ªèŠ‚ç‚¹\");\n\n    return leftCount + rightCount + 1;\n}\n```\n\n> [!info]\n> ä¸€æ—¦ä½ å‘ç°é¢˜ç›®å’Œ **å­æ ‘æœ‰å…³**ï¼Œé‚£å¤§æ¦‚ç‡è¦ç»™å‡½æ•°è®¾ç½®åˆç†çš„å®šä¹‰å’Œè¿”å›å€¼ï¼Œåœ¨`ååºä½ç½®`å†™ä»£ç äº†ã€‚\n\n## 8. äºŒå‰æ ‘çš„ç›´å¾„\n\n> https://leetcode.cn/problems/diameter-of-binary-tree/\n\n![image.png](https://832-1310531898.cos.ap-beijing.myqcloud.com/0679936de5cd6009728269dde4e770b4.png)\n\n### 8.1. `ç›´å¾„` ä¸ `æœ€é•¿ç›´å¾„` å®šä¹‰\n\n1. **æ‰¾åˆ°æœ€é•¿è·¯å¾„**ï¼šä»äºŒå‰æ ‘ä¸­çš„`ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹`å‡ºå‘ï¼Œæ‰¾åˆ°è¿æ¥åˆ°`å¦ä¸€ä¸ªèŠ‚ç‚¹`çš„æœ€é•¿è·¯å¾„ã€‚è¿™ä¸ªè·¯å¾„å¯èƒ½ä¼šç»è¿‡å¤šä¸ªèŠ‚ç‚¹å’Œè¾¹ã€‚\n2. **è·¯å¾„çš„é•¿åº¦**ï¼šæœ€é•¿è·¯å¾„ä¸Šçš„`è¾¹çš„æ•°é‡`å°±æ˜¯äºŒå‰æ ‘çš„`æœ€å¤§ç›´å¾„`ã€‚æ³¨æ„ï¼Œè¿™ä¸ªè·¯å¾„ä¸ä¸€å®šéœ€è¦ç»è¿‡æ ¹èŠ‚ç‚¹ \n\nè§£å†³è¿™é¢˜çš„å…³é”®åœ¨äºï¼Œ`ã€Œç›´å¾„ã€é•¿åº¦`ï¼Œå°±æ˜¯`ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦ä¹‹å’Œ`ã€‚\n\n> [!warning]\n> **ä»”ç»†è¯»è¿™å¥è¯ï¼šæ¯ä¸€æ¡äºŒå‰æ ‘çš„ã€Œç›´å¾„ã€é•¿åº¦ï¼Œå°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦ä¹‹å’Œï¼Œç„¶åå°±åº”è¯¥æœ‰è§£é¢˜æ€è·¯äº†**\n\n**æ‰€ä»¥ï¼šç®—å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„ç›´å¾„ï¼Œç„¶åå†æ±‚ç›´å¾„çš„æœ€å¤§å€¼å³å¯ã€‚**\n\næ‰€ä»¥ï¼Œç°åœ¨è®©æˆ‘æ±‚æ•´æ£µæ ‘ä¸­çš„`æœ€é•¿ã€Œç›´å¾„ã€`ï¼Œé‚£ç›´æˆªäº†å½“çš„æ€è·¯å°±æ˜¯éå†æ•´æ£µæ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œç„¶åé€šè¿‡æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„`æœ€å¤§æ·±åº¦`ç®—å‡º`æ¯ä¸ªèŠ‚ç‚¹çš„ã€Œç›´å¾„ã€`ï¼Œæœ€åæŠŠæ‰€æœ‰ã€Œç›´å¾„ã€æ±‚ä¸ªæœ€å¤§å€¼å³å¯\n\n### 8.2. ä¸å¥½çš„è§£æ³•ï¼Œå¤æ‚åº¦è¾ƒé«˜ï¼ŒåŒé‡é€’å½’ï¼Œ`O(N^2)` \n\n>  ==å¯ä»¥å…ˆä¸ç”¨çœ‹äº†ï¼Œè¿™ç§è§£æ³•==\n\n```javascript\nvar diameterOfBinaryTree = function (root) {\n    var maxDiameter = 0;\n    // éå†äºŒå‰æ ‘\n    var traverse = function (node) {\n        if (node == null) {\n            return 0;\n        }\n        // ::::åŒé‡é€’å½’ï¼Œå¤æ‚åº¦æ¯”è¾ƒé«˜\n        // å¯¹æ¯ä¸ªèŠ‚ç‚¹è®¡ç®—ç›´å¾„\n        var leftMax = maxDepth(node.left);\n        var rightMax = maxDepth(node.right);\n        var myDiameter = leftMax + rightMax;\n        // æ›´æ–°å…¨å±€æœ€å¤§ç›´å¾„\n        maxDiameter = Math.max(maxDiameter, myDiameter);\n        // é€’å½’éå†å·¦å­æ ‘\n        traverse(node.left);\n        // é€’å½’éå†å³å­æ ‘\n        traverse(node.right);\n    }\n    // è®¡ç®—äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦\n    var maxDepth = function (node) {\n        if (node == null) {\n            return 0;\n        }\n        // è®¡ç®—å·¦å³å­æ ‘æœ€å¤§æ·±åº¦\n        var leftMax = maxDepth(node.left);\n        var rightMax = maxDepth(node.right);\n        return 1 + Math.max(leftMax, rightMax);\n    }\n    // å¯¹æ¯ä¸ªèŠ‚ç‚¹è®¡ç®—ç›´å¾„ï¼Œæ±‚æœ€å¤§ç›´å¾„\n    traverse(root);\n    return maxDiameter;\n}\n```\n\n### 8.3. å¥½çš„è§£æ³•ï¼šå¤æ‚åº¦ `O(N)` \n\n```javascript\nvar diameterOfBinaryTree = function(root) {\n    let maxDiameter = 0;\n    /**\n     * é€’å½’è·å–æ·±åº¦\n     * @param {TreeNode} root \n     * @return {number}\n     */\n    const maxDepth = function(root) {\n        if (root === null) {\n            return 0;\n        }\n        let leftMax = maxDepth(root.left);\n        let rightMax = maxDepth(root.right);\n        // ååºä½ç½®ï¼Œé¡ºä¾¿è®¡ç®—æœ€å¤§ç›´å¾„\n        let myDiameter = leftMax + rightMax;\n        maxDiameter = Math.max(maxDiameter, myDiameter);\n        return 1 + Math.max(leftMax, rightMax);\n    }\n    maxDepth(root);\n    return maxDiameter;\n};\n```\n\n## 9. å±‚æ¬¡éå†\n\n![image.png|426](https://832-1310531898.cos.ap-beijing.myqcloud.com/da632e5316aad761378cbb7739a2428b.png)\n\nå¦‚ä¸‹å›¾ï¼š\n![image.png|576](https://832-1310531898.cos.ap-beijing.myqcloud.com/cb8b8145875d9afaae76a48fbd8e348d.png)\n\n### 9.1. è§£æ³• 1ï¼šå‰åºéå†çš„æ€è·¯\n\n```javascript\nvar levelTraverse = function(root) {\n    const res = [];\n    traverse(root, 0);\n    return res;\n    \n    // éå†äºŒå‰æ ‘çš„æ¯ä¸€å±‚ï¼Œå°†æ¯å±‚ç»“ç‚¹çš„å€¼å­˜å‚¨åˆ° res ä¸­\n    function traverse(root, depth) {\n        if (!root) {\n            return;\n        }\n        // å½“å‰å±‚æ•°è¿˜æœªè¢«å­˜å‚¨è¿‡ï¼Œåˆ™åˆå§‹åŒ–å¯¹åº”å±‚çš„æ•°ç»„\n        if (res.length <= depth) {\n            res.push([]);\n        }\n        // å°†èŠ‚ç‚¹å€¼å­˜å‚¨åˆ°å¯¹åº”çš„å±‚æ•°ä¸­\n        res[depth].push(root.val);\n        // é€’å½’éå†å·¦å³å­èŠ‚ç‚¹\n        traverse(root.left, depth + 1);\n        traverse(root.right, depth + 1);\n    }\n};\n\n// å…¶å®ä¸­åºå’Œå‰åºéƒ½è¡Œ\nvar levelOrder = function(root) {\n    const result = [];\n    const traverse = (node, layer) => {\n        if(node === null){\n            return;\n        }  \n        traverse(node.left, layer + 1);\n        /********** ä¸­åºä½ç½® start ********** */ \n        if(result[layer]){\n            result[layer].push(node.val)\n        }else{\n            result[layer] = [node.val]\n        }\n        /************ ä¸­åºä½ç½® end ********** */ \n        traverse(node.right, layer + 1);\n    }\n    traverse(root, 0);\n    return result;\n};\n```\n\nè¯¥è§£æ³•ï¼Œæœ¬è´¨è¿˜æ˜¯`äºŒå‰æ ‘çš„å‰åºéå†`ï¼Œæˆ–è€…è¯´ `DFS` çš„æ€è·¯ï¼Œè€Œ`ä¸æ˜¯å±‚åºéå†ï¼ˆæˆ– BFS æ€è·¯ï¼‰`ï¼Œ å› ä¸ºè¿™ä¸ªè§£æ³•æ˜¯ä¾èµ–`å‰åºéå†è‡ªé¡¶å‘ä¸‹ã€è‡ªå·¦å‘å³`çš„é¡ºåºç‰¹ç‚¹å¾—åˆ°äº†æ­£ç¡®çš„ç»“æœã€‚\n\næŠ½è±¡ç‚¹è¯´ï¼Œè¿™ä¸ªè§£æ³•æ›´åƒæ˜¯`ä»å·¦åˆ°å³çš„ã€Œåˆ—åºéå†ã€`ï¼Œè€Œä¸æ˜¯`è‡ªé¡¶å‘ä¸‹çš„ã€Œå±‚åºéå†ã€`\n\n### 9.2. é‚£ä¹ˆï¼Œå±‚åºéå†ï¼ˆæˆ– BFS æ€è·¯ï¼‰çš„è§£æ³•å‘¢ï¼Ÿ\n\n`BFS ç®—æ³•æ¡†æ¶` å°±æ˜¯ä»`äºŒå‰æ ‘çš„å±‚åºéå†`æ‰©å±•å‡ºæ¥çš„\n\n## 10. æœ€åï¼Œå†æ€»ç»“äºŒå‰çš„è§£é¢˜æ€è·¯\n\nç»¼ä¸Šï¼Œé‡åˆ°ä¸€é“äºŒå‰æ ‘çš„é¢˜ç›®æ—¶çš„é€šç”¨æ€è€ƒè¿‡ç¨‹æ˜¯ï¼š\n\n1ã€**æ˜¯å¦å¯ä»¥é€šè¿‡ `éå†ä¸€é` äºŒå‰æ ‘å¾—åˆ°ç­”æ¡ˆï¼Ÿå¦‚æœå¯ä»¥ï¼Œç”¨ä¸€ä¸ª `traverse` å‡½æ•°é…åˆå¤–éƒ¨å˜é‡æ¥å®ç°ã€‚è¿™å«ã€`ã€Œéå†ã€çš„æ€è·¯`ã€‘ã€‚**\n\n2ã€æ˜¯å¦å¯ä»¥å®šä¹‰ä¸€ä¸ª `é€’å½’å‡½æ•°`ï¼Œé€šè¿‡ `å­é—®é¢˜ï¼ˆå­æ ‘ï¼‰`çš„ç­”æ¡ˆæ¨å¯¼å‡ºåŸé—®é¢˜çš„ç­”æ¡ˆï¼Ÿå¦‚æœå¯ä»¥ï¼Œå†™å‡ºè¿™ä¸ªé€’å½’å‡½æ•°çš„å®šä¹‰ï¼Œå¹¶å……åˆ†åˆ©ç”¨è¿™ä¸ª`å‡½æ•°çš„è¿”å›å€¼`ã€‚  ã€`åˆ†è§£é—®é¢˜çš„æ€è·¯`ã€‘\n\n3ã€æ— è®ºä½¿ç”¨å“ªä¸€ç§æ€ç»´æ¨¡å¼ï¼Œä½ éƒ½è¦æ˜ç™½äºŒå‰æ ‘çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦åšä»€ä¹ˆï¼Œéœ€è¦åœ¨ä»€ä¹ˆæ—¶å€™ï¼ˆå‰ä¸­ååºï¼‰åšã€‚`é€’å½’å‡½æ•°` ä¼šå¸®ä½ åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šæ‰§è¡Œç›¸åŒçš„æ“ä½œï¼Œ`ä½ çš„å°è„‘è¢‹ç“œå­ä¸ç”¨å»å°è¯•ç†è§£é€’å½’ï¼Ÿ`\n\n","dd3fca242c3452a3b2a352b3e40d134a":"\n# md\n\n","0d8525db1b34523dbef066903f9eb652":"\n# äºŒå‰æ ‘çš„éå†ï¼ˆPython æè¿°ï¼‰\n\n`#äºŒå‰æ ‘` `#éå†`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å±‚æ¬¡éå† \n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922184805.png)\n\n```python\n# äºŒå‰æ ‘çš„å±‚æ¬¡éå†\n\nfrom collections import deque\n\nclass TreeNode:\n    def __init__(self, val):\n        self.val = val\n        self.left:TreeNode | None = None\n        self.right:TreeNode | None = None\n\ndef level_order(root: TreeNode | None) -> list[int]:\n    \"\"\"å±‚åºéå†\"\"\"\n    # base case\n    if root is None:\n        return []\n    # åˆå§‹åŒ–é˜Ÿåˆ—ï¼ŒåŠ å…¥æ ¹èŠ‚ç‚¹\n    queue: deque[TreeNode] = deque()\n    queue.append(root)\n    # åˆå§‹åŒ–ä¸€ä¸ªåˆ—è¡¨ï¼Œç”¨äºä¿å­˜éå†åºåˆ—\n    res = []\n    while queue:\n        node: TreeNode = queue.popleft()  # é˜Ÿåˆ—å‡ºé˜Ÿ\n        res.append(node.val)  # ä¿å­˜èŠ‚ç‚¹å€¼\n        if node.left is not None:\n            queue.append(node.left)  # å·¦å­èŠ‚ç‚¹å…¥é˜Ÿ\n        if node.right is not None:\n            queue.append(node.right)  # å³å­èŠ‚ç‚¹å…¥é˜Ÿ\n    return res\n```\n\n## 2. å‰åä¸­åºéå†\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922184904.png)\n\n```python\n# äºŒå‰æ ‘çš„å±‚æ¬¡éå†\nfrom collections import deque\n\nclass TreeNode:\n    def __init__(self, val):\n        self.val = val\n        self.left:TreeNode | None = None\n        self.right:TreeNode | None = None\n\ndef pre_order(root: TreeNode | None) -> list[int]:\n    \"\"\"å‰åºéå†\"\"\"\n    if root is None:\n        return []\n    res = []\n    res.append(root.val)\n    # ä»¥ä¸Šæ˜¯å‰åºéå†çš„ä½ç½®\n    res.extend(pre_order(root.left))\n    res.extend(pre_order(root.right))\n    return res\n\ndef in_order(root: TreeNode | None) -> list[int]:\n    \"\"\"ä¸­åºéå†\"\"\"\n    if root is None:\n        return []\n    res = []\n    res.extend(in_order(root.left))\n    res.append(root.val)\n    res.extend(in_order(root.right))\n    return res\n\ndef post_order(root: TreeNode | None) -> list[int]:\n    \"\"\"ååºéå†\"\"\"\n    if root is None:\n        return []\n    res = []\n    res.extend(post_order(root.left))\n    res.extend(post_order(root.right))\n    res.append(root.val)\n    return res\n```\n\n\n## 3. é™„ï¼šPython ä¸­ dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰çš„ `extend()` å’Œ `append()`  çš„åŒºåˆ«\n\nPython ä¸­ dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰çš„ `extend()` å’Œ `append()` æ–¹æ³•è™½ç„¶éƒ½ç”¨äºæ·»åŠ å…ƒç´ ï¼Œä½†å®ƒä»¬åœ¨ä½¿ç”¨æ–¹å¼å’Œæ•ˆæœä¸Šæœ‰ä¸€äº›é‡è¦çš„åŒºåˆ«ã€‚è®©æˆ‘ä»¬è¯¦ç»†æ¯”è¾ƒè¿™ä¸¤ä¸ªæ–¹æ³•ï¼š\n\n### 3.1. å®šä¹‰\n\n1. append() æ–¹æ³•\n\t- ä½œç”¨ï¼šåœ¨ deque çš„å³ç«¯ï¼ˆæœ«å°¾ï¼‰æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚\n\t- å‚æ•°ï¼šæ¥å—ä¸€ä¸ªå•ä¸€å…ƒç´ ä½œä¸ºå‚æ•°ã€‚\n\t- æ—¶é—´å¤æ‚åº¦ï¼šO(1)ï¼Œå¸¸æ•°æ—¶é—´æ“ä½œã€‚\n2. extend() æ–¹æ³•\n\t- ä½œç”¨ï¼šåœ¨ deque çš„å³ç«¯ï¼ˆæœ«å°¾ï¼‰æ·»åŠ å¤šä¸ªå…ƒç´ ã€‚\n\t- å‚æ•°ï¼šæ¥å—ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚**åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²**ç­‰ï¼‰ä½œä¸ºå‚æ•°ã€‚\n\t- æ—¶é—´å¤æ‚åº¦ï¼šO(k)ï¼Œå…¶ä¸­ k æ˜¯è¢«æ·»åŠ çš„å…ƒç´ æ•°é‡ã€‚\n\nè®©æˆ‘ä»¬é€šè¿‡ä¸€äº›ç¤ºä¾‹æ¥è¯´æ˜å®ƒä»¬çš„åŒºåˆ«ï¼š\n\n```python\nfrom collections import deque\n\n# åˆ›å»ºä¸€ä¸ª deque\nd = deque([1, 2, 3])\n\n# ä½¿ç”¨ append()\nd.append(4)\nprint(d)  # è¾“å‡º: deque([1, 2, 3, 4])\n\n# ä½¿ç”¨ extend()\nd.extend([5, 6, 7])\nprint(d)  # è¾“å‡º: deque([1, 2, 3, 4, 5, 6, 7])\n\n# append() æ·»åŠ ä¸€ä¸ªåˆ—è¡¨ä½œä¸ºå•ä¸€å…ƒç´ \nd.append([8, 9])\nprint(d)  # è¾“å‡º: deque([1, 2, 3, 4, 5, 6, 7, [8, 9]])\n\n# extend() ä½¿ç”¨å­—ç¬¦ä¸²\nd.extend(\"abc\")\nprint(d)  # è¾“å‡º: deque([1, 2, 3, 4, 5, 6, 7, [8, 9], 'a', 'b', 'c'])\n```\n\n### 3.2. ä¸»è¦åŒºåˆ«\n\n1. æ·»åŠ çš„å…ƒç´ æ•°é‡ï¼š\n\t- `append()` æ¯æ¬¡åªæ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚\n\t- `extend()` å¯ä»¥ä¸€æ¬¡æ·»åŠ å¤šä¸ªå…ƒç´ ã€‚\n2. å‚æ•°ç±»å‹ï¼š\n\t- `append()` å°†å…¶å‚æ•°ä½œä¸ºå•ä¸€å…ƒç´ æ·»åŠ ï¼Œå³ä½¿è¯¥å‚æ•°æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ã€‚\n\t- `extend()` æ¥å—ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå¹¶å°†å…¶ä¸­çš„æ¯ä¸ªå…ƒç´ å•ç‹¬æ·»åŠ åˆ° deque ä¸­ã€‚\n3. å¤„ç†å¯è¿­ä»£å¯¹è±¡ï¼š\n\t- å¦‚æœä½ ç”¨ `extend()` æ·»åŠ ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ ä¼šè¢«å•ç‹¬æ·»åŠ ã€‚\n\t- å¦‚æœä½ ç”¨ `append()` æ·»åŠ ä¸€ä¸ªåˆ—è¡¨ï¼Œæ•´ä¸ªåˆ—è¡¨ä¼šä½œä¸ºä¸€ä¸ªå…ƒç´ è¢«æ·»åŠ ã€‚\n4. **å­—ç¬¦ä¸²**å¤„ç†ï¼š\n\t- `extend()` ä¼šå°†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦ä½œä¸ºå•ç‹¬çš„å…ƒç´ æ·»åŠ ã€‚\n\t- `append()` ä¼šå°†æ•´ä¸ªå­—ç¬¦ä¸²ä½œä¸ºä¸€ä¸ªå…ƒç´ æ·»åŠ ã€‚\n5. æ€§èƒ½è€ƒè™‘ï¼š\n\t- å¯¹äºæ·»åŠ å¤šä¸ªå…ƒç´ ï¼Œ`extend()` é€šå¸¸æ›´é«˜æ•ˆï¼Œå› ä¸ºå®ƒé¿å…äº†å¤šæ¬¡è°ƒç”¨ `append()`ã€‚\n\t- å¯¹äºæ·»åŠ å•ä¸ªå…ƒç´ ï¼Œ`append()` é€šå¸¸æ›´é«˜æ•ˆã€‚\n6. å·¦ä¾§æ“ä½œï¼š\n\t- æ³¨æ„ï¼Œ`extendleft()` ä¼šåè½¬æ·»åŠ çš„å…ƒç´ é¡ºåºã€‚\n\t- deque è¿˜æä¾›äº† `appendleft()` å’Œ `extendleft()` æ–¹æ³•ï¼Œå®ƒä»¬åœ¨å·¦ä¾§ï¼ˆå¼€å¤´ï¼‰æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚\n\nç¤ºä¾‹ï¼š\n\n```python\nd = deque([1, 2, 3])\nd.appendleft(0)\nprint(d)  # è¾“å‡º: deque([0, 1, 2, 3])\n\nd.extendleft([4, 5, 6])\nprint(d)  # è¾“å‡º: deque([6, 5, 4, 0, 1, 2, 3])\n```\n\næ€»ç»“ï¼š\n- ä½¿ç”¨ `append()` å½“ä½ æƒ³æ·»åŠ å•ä¸ªå…ƒç´ æ—¶ã€‚\n- ä½¿ç”¨ `extend()` å½“ä½ æƒ³æ·»åŠ å¤šä¸ªå…ƒç´ ï¼Œæˆ–è€…å¤„ç†å¯è¿­ä»£å¯¹è±¡ä¸­çš„æ¯ä¸ªå…ƒç´ æ—¶ã€‚\n- ç†è§£è¿™ä¸¤ä¸ªæ–¹æ³•çš„åŒºåˆ«å¯ä»¥å¸®åŠ©ä½ æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ dequeï¼Œå¹¶åœ¨é€‚å½“çš„åœºæ™¯é€‰æ‹©æ­£ç¡®çš„æ–¹æ³•ã€‚\n","eb2a51163c135d64bfeb5db226109f57":"\n# äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡äºŒï¼šBST çš„å¢åˆ æ”¹æŸ¥ï¼‰\n\n\n`#BST` `#leetcode`  `#äºŒå‰æ ‘/äºŒå‰æœç´¢æ ‘`   `#2024/09/08` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ä»£ç æ¨¡æ¿ \n\n```javascript\nvar BST = function (root, target) {\n  if (root.val === target) {\n    // æ‰¾åˆ°ç›®æ ‡ï¼Œåšç‚¹ä»€ä¹ˆ\n  }\n  if (root.val < target) {\n    BST(root.right, target);\n  }\n  if (root.val > target) {\n    BST(root.left, target);\n  }\n};\n\n```\n\n## 2. åˆ¤æ–­ BST çš„åˆæ³•æ€§\n\n- å¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹Â `root`ï¼Œä»£ç å€¼æ£€æŸ¥äº†å®ƒçš„å·¦å³å­©å­èŠ‚ç‚¹æ˜¯å¦ç¬¦åˆå·¦å°å³å¤§çš„åŸåˆ™\n- æœ€é‡è¦çš„æ˜¯ï¼Œè¿˜éœ€è¦æ£€æŸ¥ **`root`Â çš„æ•´ä¸ªå·¦å­æ ‘éƒ½è¦å°äºÂ `root.val`ï¼Œæ•´ä¸ªå³å­æ ‘éƒ½è¦å¤§äºÂ `root.val`**\n\nå¦åˆ™è§„é¿ä¸‹é¢çš„æƒ…å†µï¼š\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908120714.png)\n\næ‰€ä»¥ï¼Œéœ€è¦éœ€è¦åœ¨é€’å½’å‡½æ•°ä¸­**ä¼ å€¼** ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š\n\n```javascript hl:18\nvar isValidBST = function (root) {\n  return _isValidBST(root, Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\n};\n\n/**\n * @description åˆ¤æ–­ä¸€æ£µæ ‘æ˜¯å¦æ˜¯äºŒå‰æœç´¢æ ‘\n * @param {TreeNode} root äºŒå‰æ ‘æ ¹èŠ‚ç‚¹\n * @param {number} min ä»£è¡¨ root.val çš„ä¸‹ç•Œ\n * @param {number} max ä»£è¡¨ root.val çš„ä¸Šç•Œ\n * @return {boolean} æ˜¯å¦æ˜¯äºŒå‰æœç´¢æ ‘\n */\nvar _isValidBST = function (root, min, max) {\n  // base case: root ä¸º null æ—¶ï¼Œæ˜¯äºŒå‰æœç´¢æ ‘\n  if (root === null) {\n    return true;\n  }\n  // è‹¥ root.val ä¸ç¬¦åˆ min < root.val < maxï¼Œè¯´æ˜ä¸æ˜¯äºŒå‰æœç´¢æ ‘\n  if (root.val <= min || root.val >= max) {\n    return false;\n  }\n\n  // é€’å½’åˆ¤æ–­å·¦å³å­æ ‘æ˜¯å¦æ˜¯äºŒå‰æœç´¢æ ‘\n  // å·¦å­æ ‘çš„æœ€å¤§å€¼ä¸º root.val, æœ€å°å€¼ä¸º min\n  let left = _isValidBST(root.left, min, root.val);\n  // å³å­æ ‘çš„æœ€å°å€¼ä¸º root.val, æœ€å¤§å€¼ä¸º max\n  let right = _isValidBST(root.right, root.val, max);\n\n  return left && right;\n};\n\n```\n\n### 2.1. æ³¨æ„ç‚¹\n\nä¸Šé¢ä»£ç çš„ 18 è¡Œä¸­ï¼Œéœ€è¦æ³¨æ„ä½¿ç”¨ `>=`ï¼Œè¿˜æœ‰ä¸€äº›æ³¨æ„ç‚¹å¦‚ä¸‹å›¾ï¼š\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908122150.png)\n\n## 3. åœ¨ BST ä¸­æœç´¢ä¸€ä¸ªèŠ‚ç‚¹ \n\n### 3.1. éå†ä¸€éæ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹\n\n```javascript\nvar searchBST = function (root, target) {\n  if (root === null) {\n    return null;\n  }\n  // base case: root ä¸º null æ—¶ï¼Œè¿”å› null\n  if (root.val === target) {\n    return root;\n  }\n  // å·¦å­æ ‘ä¸­æœç´¢\n  let left = searchBST(root.left, target);\n  if (left) {\n    return left;\n  }\n  // å³å­æ ‘ä¸­æœç´¢\n  let right = searchBST(root.right, target);\n  if (right) {\n    return right;\n  }\n  // æ²¡æœ‰æ‰¾åˆ°ç›®æ ‡å€¼\n  return null;\n};\n\n```\n\n### 3.2. åˆ©ç”¨ BST çš„å·¦å°å³å¤§çš„ç‰¹æ€§\n\n```javascript\nvar searchBST = function (root, target) {\n  if (root === null) {\n    return null;\n  }\n\n  // base case: root ä¸º null æ—¶ï¼Œè¿”å› null\n  if (root.val === target) {\n    return root;\n  }\n\n  // å¦‚æœç›®æ ‡å€¼å°äºå½“å‰èŠ‚ç‚¹å€¼ï¼Œæœç´¢å·¦å­æ ‘\n  if (target < root.val) {\n    return searchBST(root.left, target);\n  }\n  // å¦‚æœç›®æ ‡å€¼å¤§äºå½“å‰èŠ‚ç‚¹å€¼ï¼Œæœç´¢å³å­æ ‘\n  if (target > root.val) {\n    return searchBST(root.right, target);\n  }\n\n  return null;\n};\n\n```\n\n## 4. åœ¨ BST ä¸­æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹ \n\n> æˆ‘ä»¬å‡å®š **é»˜è®¤ä¸ä¼šå‘ BST ä¸­æ’å…¥å·²å­˜åœ¨çš„å€¼**\n\n```javascript\nfunction insertIntoBST(root, val) {\n  //å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œå€¼ä¸º val\n  if (!root) {\n    return new TreeNode(val);\n  }\n  //å¦‚æœ val å¤§äºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œé€’å½’æ’å…¥åˆ°å³å­æ ‘\n  if (root.val < val) {\n    root.right = insertIntoBST(root.right, val);\n  }\n  //å¦‚æœ val å°äºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œé€’å½’æ’å…¥åˆ°å·¦å­æ ‘\n  if (root.val > val) {\n    root.left = insertIntoBST(root.left, val);\n  }\n  // æœ€åï¼Œè¿”å›æ ¹èŠ‚ç‚¹\n  return root;\n}\n\n```\n\n### 4.1. æ³¨æ„ç‚¹\n\n- ä¸€æ—¦æ¶‰åŠ**æ”¹**ï¼Œå°±**ç±»ä¼¼äºŒå‰æ ‘çš„æ„é€ é—®é¢˜**ï¼Œå‡½æ•°è¦è¿”å›Â `TreeNode`Â ç±»å‹\n- å¹¶ä¸”è¦å¯¹é€’å½’è°ƒç”¨çš„**è¿”å›å€¼**è¿›è¡Œ**æ¥æ”¶**\n\n## 5. åœ¨ BST ä¸­åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ \n\n- å…ˆã€Œæ‰¾ã€è¯¥èŠ‚ç‚¹\n- å†ã€Œæ”¹ã€è¯¥èŠ‚ç‚¹\n\n### 5.1. å…ˆå†™å‡ºä»£ç æ¨¡æ¿\n\n```javascript hl:3\nvar deleteNode = function(root, key) {\n    if (root.val === key) {\n        // æ‰¾åˆ°å•¦ï¼Œ è¿›è¡Œåˆ é™¤\n    } else if (root.val > key) {\n        // å»å·¦å­æ ‘æ‰¾\n        root.left = deleteNode(root.left, key);\n    } else if (root.val < key) {\n        // å»å³å­æ ‘æ‰¾\n        root.right = deleteNode(root.right, key);\n    }\n    return root;\n}\n```\n\n### 5.2. æ‰¾åˆ°äº†ï¼Œæœ‰ä¸‰ç§æƒ…å†µ\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908125438.png)\n\n### 5.3. ä»£ç å®ç°\n\n```javascript\nvar deleteNode = function (root, key) {\n  // base case\n  if (!root) {\n    return null;\n  }\n  if (root.val === key) {\n    // æƒ…å†µ 1ï¼šæ²¡æœ‰å­èŠ‚ç‚¹, ç›´æ¥åˆ é™¤\n    //  åˆ é™¤çš„æ–¹å¼æ˜¯ï¼šç›´æ¥è¿”å› null\n    if (!root.left && !root.right) {\n      return null;\n    }\n\n    // æƒ…å†µ 2ï¼šåªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹\n    // åˆ é™¤çš„æ–¹å¼æ˜¯ï¼šè¿”å›éç©ºçš„å­èŠ‚ç‚¹\n    // å¦‚æœå³å­èŠ‚ç‚¹å­˜åœ¨ï¼Œè¿”å›å³å­èŠ‚ç‚¹\n    // åˆ é™¤çš„æ–¹å¼æ˜¯ï¼šè¿”å›å³å­èŠ‚ç‚¹\n    if (!root.left && root.right) {\n      return root.right;\n    }\n    // å¦‚æœå·¦å­èŠ‚ç‚¹å­˜åœ¨ï¼Œè¿”å›å·¦å­èŠ‚ç‚¹\n    // åˆ é™¤çš„æ–¹å¼æ˜¯ï¼šè¿”å›å·¦å­èŠ‚ç‚¹\n    if (!root.right && root.left) {\n      return root.left;\n    }\n\n    // æƒ…å†µ 3ï¼šæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹\n    // åˆ é™¤çš„æ–¹å¼æ˜¯ï¼šâ‘  æ‰¾åˆ°å³å­æ ‘ä¸­çš„æœ€å°èŠ‚ç‚¹ï¼Œæ›¿æ¢å½“å‰èŠ‚ç‚¹ æˆ–è€… â‘¡ æ‰¾åˆ°å·¦å­æ ‘ä¸­çš„æœ€å¤§èŠ‚ç‚¹ï¼Œæ›¿æ¢å½“å‰èŠ‚ç‚¹\n    // æˆ‘ä»¬è¿™é‡Œé€‰æ‹© â‘ \n    // æ‰¾åˆ°å³å­æ ‘ä¸­çš„æœ€å°èŠ‚ç‚¹, æ›¿æ¢å½“å‰èŠ‚ç‚¹, ç„¶ååˆ é™¤å³å­æ ‘ä¸­çš„æœ€å°èŠ‚ç‚¹\n    // â‘  - 1:æ‰¾åˆ°å³å­æ ‘ä¸­çš„æœ€å°èŠ‚ç‚¹\n    let minNode = getMin(root.right);\n    // â‘  - 2:æ›¿æ¢å½“å‰èŠ‚ç‚¹\n    root.val = minNode.val;\n    // â‘  - 3:ç„¶ååˆ é™¤å³å­æ ‘ä¸­çš„æœ€å°èŠ‚ç‚¹,è¿”å›å€¼å¿…é¡»ä½¿ç”¨ root.right æ¥ä½\n    root.right = deleteNode(root.right, minNode.val);\n  } else if (root.val > key) {\n    // å»å·¦å­æ ‘æ‰¾\n    root.left = deleteNode(root.left, key);\n  } else if (root.val < key) {\n    // å»å³å­æ ‘æ‰¾\n    root.right = deleteNode(root.right, key);\n  }\n  return root;\n};\n\n// è·å¾— BST ä¸­æœ€å°çš„èŠ‚ç‚¹ã€‚\nvar getMin = function (node) {\n  // BST æœ€å·¦è¾¹çš„å°±æ˜¯æœ€å°çš„\n  while (node.left != null) {\n    node = node.left;\n  }\n  return node;\n};\n\n```\n\n## 6. æœ€åæ³¨æ„ ğŸ“¢\n\nä»…å¯¹äºè¿™é“ç®—æ³•é¢˜æ¥è¯´æ˜¯å¯ä»¥çš„ï¼Œä½†è¿™æ ·æ“ä½œå¹¶ä¸å®Œç¾ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šé€šè¿‡ä¿®æ”¹èŠ‚ç‚¹å†…éƒ¨çš„å€¼æ¥äº¤æ¢èŠ‚ç‚¹ã€‚å› ä¸ºåœ¨å®é™…åº”ç”¨ä¸­ï¼ŒBST èŠ‚ç‚¹å†…éƒ¨çš„æ•°æ®åŸŸæ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ï¼Œå¯ä»¥éå¸¸å¤æ‚ï¼Œè€Œ BST ä½œä¸ºæ•°æ®ç»“æ„ï¼ˆä¸€ä¸ªå·¥å…·äººï¼‰ï¼Œå…¶æ“ä½œåº”è¯¥å’Œå†…éƒ¨å­˜å‚¨çš„æ•°æ®åŸŸè§£è€¦ï¼Œæ‰€ä»¥æˆ‘ä»¬æ›´å€¾å‘äºä½¿ç”¨æŒ‡é’ˆæ“ä½œæ¥äº¤æ¢èŠ‚ç‚¹ï¼Œæ ¹æœ¬æ²¡å¿…è¦å…³å¿ƒå†…éƒ¨æ•°æ®ã€‚\n\n1. å¦‚æœå½“å‰èŠ‚ç‚¹ä¼šå¯¹ä¸‹é¢çš„å­èŠ‚ç‚¹æœ‰æ•´ä½“å½±å“ï¼Œå¯ä»¥é€šè¿‡å€ŸåŠ©**å‡½æ•°ä¼ å‚**\n2. é€’å½’**ä¿®æ”¹**æ•°æ®ç»“æ„æ—¶\n\t- **ä¸€å®šè¦å¯¹é€’å½’è°ƒç”¨çš„è¿”å›å€¼è¿›è¡Œæ¥æ”¶**\n\t- å¹¶**è¿”å›**ä¿®æ”¹åçš„èŠ‚ç‚¹\n3.  BST ä½œä¸ºæ•°æ®ç»“æ„ï¼ˆä¸€ä¸ªå·¥å…·äººï¼‰ï¼ŒåŒé€’å½’ï¼Œæ²¡å¿…è¦å…³å¿ƒé‡Œé¢ï¼Œåªéœ€è¦åœ¨æ¯ä¸ªèŠ‚ç‚¹åšç›´æ¥åº”è¯¥åšçš„äº‹æƒ…å³å¯ï¼Œé€’å½’ä¼šå¸®ä½ å®Œæˆ\n\n## 7. å‚è€ƒ\n\nhttps://labuladong.online/algo/data-structure/bst-part2/\n\n## 8. ç›¸å…³é¢˜ç›®\n\n|LeetCode|åŠ›æ‰£|éš¾åº¦|\n|---|---|---|\n|[450. Delete Node in a BST](https://leetcode.com/problems/delete-node-in-a-bst/)|[450. åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹](https://leetcode.cn/problems/delete-node-in-a-bst/)|ğŸŸ |\n|[700. Search in a Binary Search Tree](https://leetcode.com/problems/search-in-a-binary-search-tree/)|[700. äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢](https://leetcode.cn/problems/search-in-a-binary-search-tree/)|ğŸŸ¢|\n|[701. Insert into a Binary Search Tree](https://leetcode.com/problems/insert-into-a-binary-search-tree/)|[701. äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œ](https://leetcode.cn/problems/insert-into-a-binary-search-tree/)|ğŸŸ |\n|[98. Validate Binary Search Tree](https://leetcode.com/problems/validate-binary-search-tree/)|[98. éªŒè¯äºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/validate-binary-search-tree/)|ğŸŸ |\n","31a97da95819505698744295d29ad425":"\n# äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡ä¸‰ï¼šBST çš„æ„é€ ï¼‰\n\n`#BST` `#leetcode`  `#äºŒå‰æ ‘/äºŒå‰æœç´¢æ ‘`   `#2024/09/08` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. `n`Â ä¸ªèŠ‚ç‚¹èƒ½ç»„æˆå¤šå°‘ä¸ª BST ï¼Ÿ \n\n### 1.1. é¢˜ç›®\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908135259.png)\n\næ¯”å¦‚ï¼Œ`n = 3` æ—¶ï¼Œæœ‰ 5 ç§ BSTï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908135507.png)\n\n### 1.2. è§£é¢˜æ€è·¯\n\nåˆæ¯”å¦‚ï¼Œ`n = 5` æ—¶ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨Â `{1,2,3,4,5}`Â è¿™äº›æ•°å­—å»æ„é€  BSTã€‚\n\n-  **æ ¹èŠ‚ç‚¹**æ€»å…±æœ‰æœ‰ `5 ç§`æƒ…å†µï¼Œå› ä¸ºæ¯ä¸ªæ•°å­—éƒ½å¯ä»¥ä½œä¸º**æ ¹èŠ‚ç‚¹**ã€‚\n\t- Â `3`Â ä½œä¸ºæ ¹èŠ‚ç‚¹æ—¶\n\t\t- å·¦å­æ ‘èŠ‚ç‚¹å°±æ˜¯Â `{1,2}`Â çš„ç»„åˆ\n\t\t- å³å­æ ‘å°±æ˜¯Â `{4,5}`Â çš„ç»„åˆ\n\t\t- ç„¶å å·¦å­æ ‘çš„ç»„åˆæ•°å’Œå³å­æ ‘çš„ç»„åˆæ•°**ä¹˜ç§¯**å°±æ˜¯Â `3`Â ä½œä¸ºæ ¹èŠ‚ç‚¹æ—¶çš„ BST ä¸ªæ•°ã€‚\n\nåŸºæœ¬é€»è¾‘å†™å¥½ï¼Œç„¶åå†™ä¸ªé€’å½’ï¼Œäº¤ç»™é€’å½’å°±è¡Œ\n\n### 1.3. ä»£ç \n\n```javascript\n/**\n * @param {number} n\n * @return {number}\n */\nvar numTrees = function (n) {\n  return count(1, n);\n};\n\n/**\n * @description [low,high] èŒƒå›´å†…æ„å»ºäºŒå‰æœç´¢æ ‘çš„æ•°é‡\n */\nfunction count(lo, hi) {\n  // base case\n  // æ˜¾ç„¶å½“ lo > hi é—­åŒºé—´ [lo, hi] è‚¯å®šæ˜¯ä¸ªç©ºåŒºé—´ï¼Œä¹Ÿå°±å¯¹åº”ç€ç©ºèŠ‚ç‚¹ null\n  // è™½ç„¶æ˜¯ç©ºèŠ‚ç‚¹ï¼Œä½†æ˜¯ä¹Ÿæ˜¯ä¸€ç§æƒ…å†µï¼Œæ‰€ä»¥è¦è¿”å› 1 è€Œä¸èƒ½è¿”å› 0\n  if (lo > hi) {\n    return 1;\n  }\n\n  let res = 0;\n\n  for (let i = lo; i <= hi; i++) {\n    /// ä»¥ root.val = i æ—¶çš„æ ¹èŠ‚ç‚¹ï¼Œå·¦å­æ ‘çš„æ•°é‡\n    // ä¸ºä»€ä¹ˆæ˜¯ i - 1 è€Œä¸æ˜¯ iï¼Ÿ\n    // å› ä¸º i ä»£è¡¨çš„æ˜¯æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œæ‰€ä»¥å·¦å­æ ‘çš„èŒƒå›´æ˜¯ [lo, i - 1]\n    let left = count(lo, i - 1);\n    /// ä»¥ root.val = i æ—¶çš„æ ¹èŠ‚ç‚¹ï¼Œå³å­æ ‘çš„æ•°é‡\n    // ä¸ºä»€ä¹ˆ i + 1 è€Œä¸æ˜¯ iï¼Ÿ\n    // å› ä¸º i ä»£è¡¨çš„æ˜¯æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œæ‰€ä»¥å³å­æ ‘çš„èŒƒå›´æ˜¯ [i + 1, hi]\n    let right = count(i + 1, hi);\n\n    // ä»¥ i ä¸ºæ ¹èŠ‚ç‚¹æ—¶ï¼Œå·¦å³å­æ ‘çš„ç»„åˆæ•°é‡çš„ä¹˜ç§¯\n    // å°±æ˜¯ä»¥ i ä¸ºæ ¹èŠ‚ç‚¹æ—¶ï¼ŒBST çš„æ•°é‡\n    // ä¸ºä»€ä¹ˆè¦ä¹˜ç§¯ï¼Ÿ\n    // å› ä¸ºå¯¹äºæ¯ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå·¦å³å­æ ‘çš„ç»„åˆæ•°é‡æ˜¯ç‹¬ç«‹çš„\n    // æ¯”å¦‚è¯´ï¼Œå·¦å­æ ‘æœ‰ 3 ç§ç»„åˆï¼Œå³å­æ ‘æœ‰ 5 ç§ç»„åˆ\n    // é‚£ä¹ˆä»¥å½“å‰æ ¹èŠ‚ç‚¹æ„å»ºçš„ BST å°±æœ‰ 3 * 5 = 15 ç§ç»„åˆ\n    res += left * right;\n  }\n\n  return res;\n}\n\n```\n\n> leetcodeä¸Šè¶…æ—¶äº†\n\n### 1.4. ä¼˜åŒ–ï¼šä½¿ç”¨å¤‡å¿˜å½•\n\n```javascript hl:2,14\nvar numTrees = function (n) {\n  // meme[i][j] ä»£è¡¨ i åˆ° j çš„äºŒå‰æœç´¢æ ‘çš„ä¸ªæ•°\n  const memo = [];\n  for (let i = 0; i < n + 1; i++) {\n    memo[i] = [];\n    for (let j = 0; j < n + 1; j++) {\n      memo[i][j] = 0;\n    }\n  }\n  function count(lo, hi) {\n    if (lo > hi) {\n      return 1;\n    }\n    // å…ˆæŸ¥æ‰¾å¤‡å¿˜å½•\n    if (memo[lo][hi] !== 0) {\n      return memo[lo][hi];\n    }\n    let res = 0;\n    for (let i = lo; i <= hi; i++) {\n      let left = count(lo, i - 1);\n      let right = count(i + 1, hi);\n      res += left * right;\n    }\n    return res;\n  }\n\n  return count(1, n);\n};\n\n```\n\n> leetcodeä¸Šè¿˜æ˜¯è¶…æ—¶äº†\n\n### 1.5. åŠ¨æ€è§„åˆ’è§£æ³• \n\n```javascript hl:14\nvar numTrees = function (n) {\n  const dp = new Array(n + 1).fill(0);\n  // dp[i] ä»£è¡¨ i ä¸ªèŠ‚ç‚¹çš„ BST ä¸ªæ•°\n  // dp[0] = 1, dp[1] = 1 ä»£è¡¨ç©ºæ ‘å’Œä¸€ä¸ªèŠ‚ç‚¹çš„ BST ä¸ªæ•°éƒ½æ˜¯ 1\n  dp[0] = 1;\n  dp[1] = 1;\n\n  // ä» 2 å¼€å§‹è®¡ç®—\n  for (let i = 2; i <= n; i++) {\n    for (let j = 1; j <= i; j++) {\n      // j ä»£è¡¨æ ¹èŠ‚ç‚¹çš„å€¼\n      // å·¦å­æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°ä¸º j - 1, å³å­æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°ä¸º i - j ?\n      // why? çœ‹åé¢æœ‰æˆªå›¾è§£é‡Š\n      // å·¦å­æ ‘çš„ BST ä¸ªæ•°ä¸º dp[j - 1], å³å­æ ‘çš„ BST ä¸ªæ•°ä¸º dp[i - j]\n      // ä»¥ j ä¸ºæ ¹èŠ‚ç‚¹çš„ BST ä¸ªæ•°ä¸º dp[j - 1] * dp[i - j]\n      dp[i] += dp[j - 1] * dp[i - j];\n    }\n  }\n  return dp[n];\n};\n\n```\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240908163823.png)\n\n> èƒ½æ­£å¸¸é€šè¿‡ leetcode\n\n## 2. `n`Â ä¸ªèŠ‚ç‚¹èƒ½ç»„æˆçš„æ‰€æœ‰ BST \n\n```javascript\n/**\n * Definition for a binary tree node.\n * function TreeNode(val, left, right) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.left = (left===undefined ? null : left)\n *     this.right = (right===undefined ? null : right)\n * }\n */\n/**\n * @param {number} n\n * @return {TreeNode[]}\n */\nvar generateTrees = function (n) {\n  if (n === 0) {\n    return [];\n  }\n  return build(1, n);\n};\n\n/**\n *@description ç”Ÿæˆ[lo,hi]åŒºé—´çš„æ‰€æœ‰äºŒå‰æœç´¢æ ‘\n *@param {*} lo\n *@param {*} hi\n */\nfunction build(lo, hi) {\n  let res = [];\n  // é€’å½’çš„å‡ºå£,ç©ºèŠ‚ç‚¹\n  // lo > hi ä»£è¡¨ç©ºèŠ‚ç‚¹,å³æ²¡æœ‰èŠ‚ç‚¹çš„äºŒå‰æ ‘\n  // ä¸ºä»€ä¹ˆæ˜¯ null è€Œä¸æ˜¯ [] ?\n  // å› ä¸º null ä»£è¡¨ç©ºèŠ‚ç‚¹, [] ä»£è¡¨ç©ºæ•°ç»„, ä»£è¡¨æœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„äºŒå‰æ ‘\n  if (lo > hi) {\n    res.push(null);\n    return res;\n  }\n  // ç©·ä¸¾ root èŠ‚ç‚¹çš„æ‰€æœ‰å¯èƒ½\n  for (let i = lo; i <= hi; i++) {\n    // é€’å½’æ„é€ å‡ºå·¦å³å­æ ‘çš„æ‰€æœ‰æœ‰æ•ˆ BST=>é€’å½’æ„é€ å·¦å³å­æ ‘\n    let left = build(lo, i - 1);\n    let right = build(i + 1, hi);\n    // ç»™ root èŠ‚ç‚¹ç©·ä¸¾æ‰€æœ‰å·¦å³å­æ ‘çš„ç»„åˆ\n    for (let leftNode of left) {\n      for (let rightNode of right) {\n        let root = new TreeNode(i);\n        root.left = leftNode;\n        root.right = rightNode;\n        res.push(root);\n      }\n    }\n  }\n\n  return res;\n}\n\n```\n\n## 3. ç›¸å…³é¢˜ç›®\n\n| LeetCode                                                                                          | åŠ›æ‰£                                                                             | éš¾åº¦  |\n| ------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------ | --- |\n| [95. Unique Binary Search Trees II](https://leetcode.com/problems/unique-binary-search-trees-ii/) | [95. ä¸åŒçš„äºŒå‰æœç´¢æ ‘ II](https://leetcode.cn/problems/unique-binary-search-trees-ii/) | ğŸŸ   |\n| [96. Unique Binary Search Trees](https://leetcode.com/problems/unique-binary-search-trees/)       | [96. ä¸åŒçš„äºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/unique-binary-search-trees/)       | ğŸŸ   |\n\n## 4. å‚è€ƒ\n\nhttps://labuladong.online/algo/data-structure/bst-part3/\n","aa1e137fc7775c0aa856c608355f2fcd":"\n# å¤šå‰æ ‘çš„éå†ï¼šPython æè¿°\n\n`#å¤šå‰æ ‘` `#æ•°æ®ç»“æ„` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å¤šå‰æ ‘çš„å±‚æ¬¡éå† \n\n```python\nfrom collections import deque\n\n# äºŒå‰æ ‘çš„èŠ‚ç‚¹\nclass TreeNode:\n    def __init__(self, val):\n        self.val = val\n        self.left:TreeNode | None = None\n        self.right:TreeNode | None = None\n\n# å¤šå‰æ ‘çš„èŠ‚ç‚¹\nclass Node:\n    def __init__(self, val):\n        self.val = val\n        # å­©å­èŠ‚ç‚¹\n        self.children = []\n\n# å¤šå‰æ ‘çš„å±‚æ¬¡éå†\ndef level_order(root:Node):\n    if root is None:\n        return []\n    # ç”¨é˜Ÿåˆ—ä¿å­˜èŠ‚ç‚¹\n    queue = deque()\n    # ç»“æœ\n    res = []\n    # æ ¹èŠ‚ç‚¹å…¥é˜Ÿ\n    queue.append(root)\n    # éå†\n    while queue:\n        # å½“å‰å±‚çš„èŠ‚ç‚¹\n        level = []\n        # å½“å‰å±‚çš„èŠ‚ç‚¹ä¸ªæ•°\n        size = len(queue)\n        # éå†å½“å‰å±‚çš„èŠ‚ç‚¹\n        for i in range(size):\n            # å‡ºé˜Ÿ\n            node = queue.popleft()\n            # èŠ‚ç‚¹å€¼åŠ å…¥å½“å‰å±‚\n            level.append(node.val)\n            # å­©å­èŠ‚ç‚¹å…¥é˜Ÿ\n            for child in node.children:\n                queue.append(child)\n        # å½“å‰å±‚åŠ å…¥ç»“æœ\n        res.append(level)\n    return res\n\n```\n\n\n## 2. å¤šå‰æ ‘çš„ä¸­åºéå†\n\nå¾ˆæ˜æ˜¾ï¼Œæ²¡æœ‰ä¸­åº\n\n## 3. å¤šå‰æ ‘çš„å‰åºå’Œååºéå†\n\n```python\nfrom collections import deque\n\n# äºŒå‰æ ‘çš„èŠ‚ç‚¹\nclass TreeNode:\n    def __init__(self, val):\n        self.val = val\n        self.left:TreeNode | None = None\n        self.right:TreeNode | None = None\n\n# å¤šå‰æ ‘çš„èŠ‚ç‚¹\nclass Node:\n    def __init__(self, val):\n        self.val = val\n        # å­©å­èŠ‚ç‚¹\n        self.children = []\n\n# å¤šå‰æ ‘çš„å‰åºå’Œåç»­éå†\n\n# å‰åºéå†\ndef preorder(root:Node):\n    if root is None:\n        return\n    print(root.val)\n    for child in root.children:\n        preorder(child)\n\n# ååºéå†\ndef postorder(root:Node):\n    if root is None:\n        return\n    ###### å‰åºä½ç½®  #####\n    for child in root.children:\n        postorder(child)\n    ##### ååºä½ç½®  #####\n    print(root.val)\n\n```","053994e32b075cb3b23b2a61f000c1a5":"\n# äºŒå‰æœç´¢æ ‘ï¼ˆç¯‡å››ï¼šBST çš„ååºä½ç½®ï¼‰\n\n`#BST` `#leetcode`  `#äºŒå‰æ ‘/äºŒå‰æœç´¢æ ‘`   `#2024/09/10` \n\n---\n\næœ¬æ–‡ä¼šè®²è§£ä»¥ä¸‹é¢˜ç›®ï¼š\n\n| LeetCode                                                                                              | åŠ›æ‰£                                                                                 | éš¾åº¦  |\n| ----------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------- | --- |\n| [1373. Maximum Sum BST in Binary Tree](https://leetcode.com/problems/maximum-sum-bst-in-binary-tree/) | [1373. äºŒå‰æœç´¢å­æ ‘çš„æœ€å¤§é”®å€¼å’Œ](https://leetcode.cn/problems/maximum-sum-bst-in-binary-tree/) | ğŸ”´  |\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é¦–å…ˆï¼Œååºæœ‰ä»€ä¹ˆç‰¹æ®Šä¹‹å¤„ï¼Ÿ \n\n- **å‰åº**ä½ç½®çš„ä»£ç åªèƒ½ä»**å‡½æ•°å‚æ•°**ä¸­è·å–çˆ¶èŠ‚ç‚¹ä¼ é€’æ¥çš„æ•°æ®\n- è€Œ**ååº**ä½ç½®çš„ä»£ç **ä¸ä»…**å¯ä»¥è·å–å‚æ•°æ•°æ®ï¼Œ**è¿˜**å¯ä»¥æ‹¿åˆ°**å­æ ‘é€šè¿‡å‡½æ•°è¿”å›çš„å€¼**\n\t- ååºä½ç½®çš„ä»£ç ï¼Œæœ‰æ—¶å€™å¯ä»¥å¤§å¹…æå‡ç®—æ³•æ•ˆç‡ï¼Œæ¯”å¦‚æœ¬æ–‡éœ€è¦è®²è§£çš„é¢˜ç›®\n\n> æ¢å¥è¯è¯´ï¼Œä¸€æ—¦ä½ å‘ç°**é¢˜ç›®å’Œå­æ ‘æœ‰å…³**ï¼Œé‚£å¤§æ¦‚ç‡è¦ç»™å‡½æ•°è®¾ç½®åˆç†çš„å®šä¹‰å’Œè¿”å›å€¼ï¼Œåœ¨ååºä½ç½®å†™ä»£ç äº†ã€‚\n\n## 2. é¢˜ç›®åˆ†æ\n\né¢˜ç›®ä¼šç»™ä½ è¾“å…¥ä¸€æ£µäºŒå‰æ ‘ï¼Œè¯·ä½ æ‰¾åˆ°**èŠ‚ç‚¹ä¹‹å’Œæœ€å¤§çš„**é‚£æ£µäºŒå‰æœç´¢æ ‘ï¼Œå¹¶è¿”å›å®ƒçš„èŠ‚ç‚¹å€¼ä¹‹å’Œã€‚\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240910082418.png)\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240910082555.png)\n\n## 3. æ€è·¯\n\näºŒå‰æ ‘ç›¸å…³é¢˜ç›®æœ€æ ¸å¿ƒçš„æ€è·¯æ˜¯**æ˜ç¡®å½“å‰èŠ‚ç‚¹éœ€è¦åšçš„äº‹æƒ…æ˜¯ä»€ä¹ˆ**\n- â‘   å·¦å³å­æ ‘æ˜¯å¦æ˜¯ BST\n- â‘¡  å·¦å­æ ‘çš„æœ€å¤§å€¼ `leftMax` å’Œå³å­æ ‘çš„æœ€å°å€¼ `rightMin`ï¼Œä¸ºäº† â‘¢ çš„åˆ¤æ–­\n- â‘¢  å·¦å³å­æ ‘çš„èŠ‚ç‚¹å€¼ä¹‹å’Œ `rootSum`ï¼Œ ä¸ºäº†åˆ¤æ–­ `å·¦å³å­æ ‘+è¯¥èŠ‚ç‚¹` æ˜¯å¦æ˜¯ BST\n\n## 4. åŸºæœ¬æ¡†æ¶\n\n```javascript\nvar maxSumBST = function () {\n  // å…¨å±€å˜é‡ï¼Œè®°å½• BST æœ€å¤§èŠ‚ç‚¹ä¹‹å’Œ\n  var maxSum = 0;\n\n  // éå†äºŒå‰æ ‘\n  var traverse = function (root) {\n    if (root === null) {\n      return;\n    }\n    // ******* å‰åºéå†ä½ç½® *******\n    // â‘  åˆ¤æ–­å·¦å³å­æ ‘æ˜¯ä¸æ˜¯ BST äºŒå‰æœç´¢æ ‘\n    if (isBST(root.left) && isBST(root.right)) {\n      // â‘¡ è®¡ç®—å·¦å­æ ‘çš„æœ€å¤§å€¼å’Œå³å­æ ‘çš„æœ€å°å€¼\n      var leftMax = findMax(root.left);\n      var rightMin = findMin(root.right);\n      // â‘¢ åˆ¤æ–­ä»¥ root èŠ‚ç‚¹ä¸ºæ ¹çš„æ ‘æ˜¯ä¸æ˜¯ BST\n      if (root.val > leftMax && root.val < rightMin) {\n        // å¦‚æœæ¡ä»¶éƒ½ç¬¦åˆï¼Œè®¡ç®—å½“å‰ BST çš„èŠ‚ç‚¹ä¹‹å’Œ\n        var leftSum = findSum(root.left);\n        var rightSum = findSum(root.right);\n        var rootSum = leftSum + rightSum + root.val;\n        // è®¡ç®— BST èŠ‚ç‚¹çš„æœ€å¤§å’Œ\n        maxSum = Math.max(maxSum, rootSum);\n      }\n    }\n    // **************************\n\n    // äºŒå‰æ ‘éå†æ¡†æ¶ï¼Œéå†å­æ ‘èŠ‚ç‚¹\n    traverse(root.left);\n    traverse(root.right);\n  };\n\n  traverse(root);\n  return maxSum;\n};\n\n// è®¡ç®—ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘çš„æœ€å¤§å€¼\nvar findMax = function (root) {};\n\n// è®¡ç®—ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘çš„æœ€å°å€¼\nvar findMin = function (root) {};\n\n// è®¡ç®—ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘çš„èŠ‚ç‚¹å’Œ\nvar findSum = function (root) {};\n\n// åˆ¤æ–­ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘æ˜¯å¦æ˜¯ BST\nvar isBST = function (root) {};\n\n```\n\n### 4.1. é—®é¢˜\n\nè¿™å‡ ä¸ªè¾…åŠ©å‡½æ•°éƒ½æ˜¯é€’å½’å‡½æ•°ï¼Œé€’å½’é‡Œå¥—é€’å½’ï¼Œå¤æ‚åº¦æé«˜ï¼Œ`O(N^2)`\n\n## 5. ä¼˜åŒ–\n\nå‰åºæ”¹æˆååºï¼Œååºéå†çš„æ—¶å€™ï¼Œè®©Â `traverse`Â å‡½æ•°æŠŠè¾…åŠ©å‡½æ•°åšçš„äº‹æƒ…é¡ºä¾¿åšæ‰\n\n```javascript\nvar maxSumBST = function (root) {\n  // è®°å½• BST æœ€å¤§èŠ‚ç‚¹ä¹‹å’Œ\n  var maxSum = 0;\n\n  // è®¡ç®—ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘çš„æœ€å¤§å€¼ã€æœ€å°å€¼ã€èŠ‚ç‚¹å’Œ\n  /**\n   * @description è®¡ç®—ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘çš„ [æœ€å¤§å€¼ã€æœ€å°å€¼ã€èŠ‚ç‚¹å’Œ]\n   * @param {TreeNode} root\n   * @return {Array} \n   * [æ˜¯å¦ BSTï¼ˆ0 ä¸æ˜¯ï¼Œ1 æ˜¯ï¼‰, æ‰€æœ‰èŠ‚ç‚¹ä¸­çš„æœ€å°å€¼, æ‰€æœ‰èŠ‚ç‚¹ä¸­çš„æœ€å¤§å€¼, æ‰€æœ‰èŠ‚ç‚¹å€¼ä¹‹å’Œ]\n   */\n  var findMaxMinSum = function (root) {\n    // base case\n    if (root === null) {\n      return [1, Number.MAX_SAFE_INTEGER, Number.MIN_SAFE_INTEGER, 0];\n    }\n\n    // é€’å½’è®¡ç®—å·¦å³å­æ ‘\n    var left = findMaxMinSum(root.left);\n    var right = findMaxMinSum(root.right);\n\n    // ******* ååºéå†ä½ç½® *******\n    // é€šè¿‡ left å’Œ right æ¨å¯¼è¿”å›å€¼\n    // å¹¶ä¸”æ­£ç¡®æ›´æ–° maxSum å˜é‡\n    var res = [0, 0, 0, 0];\n    // è‹¥å·¦å³å­æ ‘éƒ½æ˜¯ BSTï¼Œä¸” root å¤§äºå·¦å­æ ‘çš„æœ€å¤§å€¼ï¼Œå°äºå³å­æ ‘çš„æœ€å°å€¼\n    // åˆ™ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘æ˜¯ BST, æ›´æ–° res\n    if (\n      left[0] === 1 &&\n      right[0] === 1 &&\n      root.val > left[2] &&\n      root.val < right[1]\n    ) {\n      // ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘æ˜¯ BST\n      res[0] = 1;\n      // è®¡ç®—ä»¥ root ä¸ºæ ¹çš„è¿™æ£µ BST çš„æœ€å°å€¼\n      res[1] = Math.min(left[1], root.val);\n      // è®¡ç®—ä»¥ root ä¸ºæ ¹çš„è¿™æ£µ BST çš„æœ€å¤§å€¼\n      res[2] = Math.max(right[2], root.val);\n      // è®¡ç®—ä»¥ root ä¸ºæ ¹çš„è¿™æ£µ BST æ‰€æœ‰èŠ‚ç‚¹ä¹‹å’Œ\n      res[3] = left[3] + right[3] + root.val;\n      // æ›´æ–°å…¨å±€å˜é‡\n      maxSum = Math.max(maxSum, res[3]);\n      // å¦åˆ™ï¼Œä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘ä¸æ˜¯ BST\n    } else {\n      // ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘ä¸æ˜¯ BST\n      res[0] = 0;\n      // å…¶ä»–çš„å€¼éƒ½æ²¡å¿…è¦è®¡ç®—äº†ï¼Œå› ä¸ºç”¨ä¸åˆ°\n    }\n    return res;\n  };\n\n  findMaxMinSum(root);\n  return maxSum;\n};\n\n```\n\n### 5.1. å¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦åªæœ‰ `O(N)`\n\n## 6. æœ€å\n\nä¸ºä»€ä¹ˆè¿™é“é¢˜ç”¨**ååºéå†**æœ‰å¥‡æ•ˆå‘¢ï¼Œå› ä¸º**æˆ‘ä»¬éœ€è¦çš„è¿™äº›å˜é‡å…¨éƒ½å¯ä»¥é€šè¿‡å­é—®é¢˜çš„ç»“æœæ¨åˆ°å‡ºæ¥**ï¼Œé€‚åˆç”¨**åˆ†è§£é—®é¢˜çš„æ€è·¯**æ±‚è§£ã€‚æ¯”å¦‚\n- è®¡ç®—ä»¥Â `root`Â ä¸ºæ ¹çš„äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¹‹å’Œï¼Œæ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡å·¦å³å­æ ‘çš„å’ŒåŠ ä¸ŠÂ `root.val`Â è®¡ç®—å‡ºæ¥ï¼Ÿ\n- è®¡ç®—ä»¥Â `root`Â ä¸ºæ ¹çš„äºŒå‰æ ‘çš„æœ€å¤§å€¼/æœ€å°å€¼ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡å·¦å³å­æ ‘çš„æœ€å¤§å€¼/æœ€å°å€¼å’ŒÂ `root.val`Â æ¯”è¾ƒå‡ºæ¥ï¼Ÿ\n- åˆ¤æ–­ä»¥Â `root`Â ä¸ºæ ¹çš„äºŒå‰æ ‘æ˜¯ä¸æ˜¯ BSTï¼Œæ˜¯ä¸æ˜¯å¾—å…ˆåˆ¤æ–­å·¦å³å­æ ‘æ˜¯ä¸æ˜¯ BSTï¼Ÿæ˜¯ä¸æ˜¯è¿˜å¾—çœ‹çœ‹å·¦å³å­æ ‘çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Ÿ\n\n## 7. å‚è€ƒ\n\nhttps://labuladong.online/algo/data-structure/bst-part4/\n\n","cb71d2c9053a5f01aaf6d221d514f397":"\n# äºŒå‰æœç´¢æ ‘ï¼šPython æè¿°\n\n`#BST` `#æ•°æ®ç»“æ„` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰ \n\n- ä¸€ç§ç‰¹æ®Šçš„äºŒå‰æ ‘ï¼Œ`è¾ƒå°`çš„å€¼ä¿å­˜åœ¨`å·¦èŠ‚ç‚¹`ä¸­ï¼Œ`è¾ƒå¤§`çš„å€¼ä¿å­˜åœ¨`å³èŠ‚ç‚¹`ä¸­\n   - `æ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘`éƒ½æ¯”`æ ¹èŠ‚ç‚¹çš„å€¼`å°ï¼Œ`å³å­æ ‘çš„å€¼`éƒ½æ¯”`æ ¹èŠ‚ç‚¹çš„å€¼`å¤§ã€‚\n   - `äºŒå‰æŸ¥æ‰¾æ ‘`æ˜¯ä¸€ç§`æœ‰åºçš„æ ‘`ï¼Œæ‰€ä»¥æ”¯æŒ`å¿«é€ŸæŸ¥æ‰¾ã€å¿«é€Ÿæ’å…¥ã€åˆ é™¤`ä¸€ä¸ªæ•°æ®\n\n![](https://832-1310531898.cos.ap-beijing.myqcloud.com/26939446c9517db965095fb586848172.png)\n\n## 2. äºŒå‰æ ‘æ•ˆç‡ï¼šéƒ½æ˜¯ O(n)\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922204133.png)\n## 3. äºŒå‰æ ‘çš„æŸ¥æ‰¾ï¼šå¤æ‚åº¦ O(logn)\n\n```python\n# BSTçš„æœç´¢\nclass TreeNode:\n    def __init__(self, val):\n        self.val = val\n        self.left:TreeNode | None = None\n        self.right:TreeNode | None = None\n\n# BSTçš„æœç´¢\ndef search(root:TreeNode, val:int) -> TreeNode | None:\n    # å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œè¿”å›ç©º\n    if root is None:\n        return None\n    # å¦‚æœæ ¹èŠ‚ç‚¹çš„å€¼ç­‰äº valï¼Œè¿”å›æ ¹èŠ‚ç‚¹\n    if root.val == val:\n        return root\n    # å¦‚æœæ ¹èŠ‚ç‚¹çš„å€¼å¤§äº valï¼Œé€’å½’æœç´¢å·¦å­æ ‘\n    if root.val > val:\n        if root.left is None:\n            return None\n        return search(root.left, val)\n    # å¦‚æœæ ¹èŠ‚ç‚¹çš„å€¼å°äº valï¼Œé€’å½’æœç´¢å³å­æ ‘\n    if root.val < val:\n        if root.right is None:\n            return None\n        return search(root.right, val)\n\n```\n\n## 4. BST çš„éå†ï¼šä¸­åºéå†å‡åº\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922194611.png)\n\n## 5. æ’å…¥èŠ‚ç‚¹ï¼šå¤æ‚åº¦ O(logn)\n\n> [!danger]\n> äºŒå‰æœç´¢æ ‘**ä¸å…è®¸å­˜åœ¨é‡å¤èŠ‚ç‚¹**ï¼Œå¦åˆ™å°†è¿åå…¶å®šä¹‰\n> \n> å› ä¸ºBSTçš„ç‰¹æ€§ï¼Œæ‰€ä»¥æ’å…¥çš„èŠ‚ç‚¹**è‚¯å®šä¼šåˆ°å¶å­ç»“ç‚¹**\n\n1. **æŸ¥æ‰¾æ’å…¥ä½ç½®**\n\t- ä¸æŸ¥æ‰¾æ“ä½œç›¸ä¼¼ï¼Œä»æ ¹èŠ‚ç‚¹å‡ºå‘ï¼Œæ ¹æ®å½“å‰èŠ‚ç‚¹å€¼å’ŒÂ `num`Â çš„å¤§å°å…³ç³»å¾ªç¯å‘ä¸‹æœç´¢ï¼Œç›´åˆ°è¶Šè¿‡å¶èŠ‚ç‚¹ï¼ˆéå†è‡³Â `None`Â ï¼‰æ—¶è·³å‡ºå¾ªç¯ã€‚\n2. **åœ¨è¯¥ä½ç½®æ’å…¥èŠ‚ç‚¹**\n\t- åˆå§‹åŒ–èŠ‚ç‚¹Â `num`Â ï¼Œå°†è¯¥èŠ‚ç‚¹ç½®äºÂ `None`Â çš„ä½ç½®\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922195422.png)\n\næˆ–è€…çœ‹ä¸‹é¢ä¸€å¼ å›¾ï¼Œåœ¨ä¸‹å›¾çš„æ ‘ä¸­æ’å…¥å¥å€¼ä¸º `6` çš„èŠ‚ç‚¹ï¼Œä¸€å®šæ˜¯å¶å­èŠ‚ç‚¹å¯¹å§\n\n![|399](https://832-1310531898.cos.ap-beijing.myqcloud.com/8963bb8f3b7b3a6a1fa71319e058bde3.png)\n\nä»£ç ï¼š\n\n```python\n# TreeNode ç±»å‹çš„å®šä¹‰\nclass TreeNode:\n    def __init__(self, val):\n        self.val = val\n        self.left:TreeNode | None = None\n        self.right:TreeNode | None = None\n\n# BSTçš„æ’å…¥ï¼Œå¤æ‚åº¦ O(logn)\ndef insert(root:TreeNode, val:int) -> TreeNode:\n    # å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œè¿”å›ä¸€ä¸ªæ–°èŠ‚ç‚¹\n    if root is None:\n        return TreeNode(val)\n\n    # å¦‚æœæ ¹èŠ‚ç‚¹çš„å€¼å¤§äº valï¼Œé€’å½’æ’å…¥å·¦å­æ ‘\n    if root.val > val:\n        if root.left is None:\n            root.left = TreeNode(val)\n        root.left = insert(root.left, val)\n\n    # å¦‚æœæ ¹èŠ‚ç‚¹çš„å€¼å°äº valï¼Œé€’å½’æ’å…¥å³å­æ ‘\n    if root.val < val:\n        if root.right is None:\n            root.right = TreeNode(val)\n        root.right = insert(root.right, val)\n\nreturn root\n```\n\n## 6. ç§»é™¤èŠ‚ç‚¹\n\n### 6.1. ç¬¬ä¸€ç§æƒ…å†µï¼šå¶å­ç»“ç‚¹\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922200912.png)\n\n### 6.2. ç¬¬äºŒç§æƒ…å†µï¼šæœ‰ä¸€ä¸ªèŠ‚ç‚¹\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922201130.png)\n\n### 6.3. ç¬¬ä¸‰ç§æƒ…å†µï¼š`ä¸¤ä¸ªå­èŠ‚ç‚¹`çš„èŠ‚ç‚¹\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922203639.png)\n\n1. æ‰¾åˆ° `4`\n2. æ‰¾åˆ° `4` çš„**å³è¾¹**æœ€å°çš„èŠ‚ç‚¹ `5`\n3. æŠŠ `4 çš„ä½ç½®`æ›¿æ¢æˆ `5`\n4. é€’å½’ä»ä»**å³ä¾§å­æ ‘**ä¸­ç§»é™¤**æœ€å°èŠ‚ç‚¹**\n\t- è¿™ä¸ªæœ€å°å€¼ä¸€å®šæ˜¯ 5ï¼Œå¹¶ä¸”æ˜¯æ»¡è¶³**ç¬¬ä¸€ç§æƒ…å†µï¼šæ˜¯å¶å­ç»“ç‚¹**\n\n### 6.4. æœ€ç»ˆä»£ç \n\n```python\n# TreeNode ç±»å‹çš„å®šä¹‰\nclass TreeNode:\n    def __init__(self, val):\n        self.val = val\n        self.left:TreeNode | None = None\n        self.right:TreeNode | None = None\n\n# BSTçš„åˆ é™¤\ndef deleteNode(root:TreeNode, key:int) -> TreeNode | None:\n\n    # å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›\n    if root is None:\n        return None\n\n    # å¦‚æœæ ¹èŠ‚ç‚¹çš„å€¼ç­‰äº key\n    if root.val == key:\n\n        \"\"\"ç¬¬ä¸€ç§æƒ…å†µï¼šå¶å­ç»“ç‚¹ç›´æ¥åˆ é™¤\"\"\"\n        # å¦‚æœå·¦å³å­©å­éƒ½ä¸ºç©ºï¼Œç›´æ¥åˆ é™¤\n        if root.left is None and root.right is None:\n            return None\n\n        \"\"\"ç¬¬äºŒç§æƒ…å†µï¼šå·¦å­©å­æˆ–è€…å³å­©å­ä¸ºç©º\"\"\"\n        # å¦‚æœå·¦å­©å­ä¸ºç©ºï¼Œè¿”å›å³å­©å­\n        if root.left is None:\n            return root.right\n        # å¦‚æœå³å­©å­ä¸ºç©ºï¼Œè¿”å›å·¦å­©å­\n        if root.right is None:\n            return root.left\n\n        \"\"\"èµ°åˆ°è¿™é‡Œè¯´æ˜æ˜¯ç¬¬ä¸‰ç§æƒ…å†µï¼šå·¦å³å­©å­éƒ½ä¸ä¸ºç©º\"\"\"\n        # å¦‚æœå·¦å³å­©å­éƒ½ä¸ä¸ºç©º\n        # æ‰¾åˆ°å³å­æ ‘çš„æœ€å°å€¼\n        minNode = getMin(root.right)\n        # å°† root çš„å€¼æ›¿æ¢ä¸º minNode çš„å€¼\n        root.val = minNode.val\n        # åˆ é™¤ minNode\n        root.right = deleteNode(root.right, minNode.val)\n    \n    # å¦‚æœæ ¹èŠ‚ç‚¹çš„å€¼å°äº key\n    elif root.val < key:\n        if root.right is None:\n            return root\n        # é€’å½’åˆ é™¤å³å­æ ‘\n        root.right = deleteNode(root.right, key)\n    # å¦‚æœæ ¹èŠ‚ç‚¹çš„å€¼å¤§äº key\n    else:\n        if root.left is None:\n            return root\n        # é€’å½’åˆ é™¤å·¦å­æ ‘\n        root.left = deleteNode(root.left, key)\n\n    # è¿”å›æ ¹èŠ‚ç‚¹\n    return root\n\n# æ‰¾åˆ°æœ€å°å€¼\ndef getMin(node:TreeNode) -> TreeNode:\n    # æ‰¾åˆ°æœ€å·¦è¾¹çš„èŠ‚ç‚¹ï¼Œå› ä¸ºæœ€å·¦è¾¹çš„èŠ‚ç‚¹æ˜¯æœ€å°çš„\n    while node.left is not None:\n        node = node.left\n    return node\n\n```\n\n## 7. BST çš„ä½¿ç”¨åœºæ™¯\n\n- ç”¨ä½œç³»ç»Ÿä¸­çš„**å¤šçº§ç´¢å¼•**ï¼Œå®ç°é«˜æ•ˆçš„æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤æ“ä½œã€‚\n- ä½œä¸º**æŸäº›æœç´¢ç®—æ³•**çš„åº•å±‚æ•°æ®ç»“æ„ã€‚\n- ç”¨äºå­˜å‚¨æ•°æ®æµï¼Œä»¥ä¿æŒå…¶æœ‰åºçŠ¶æ€ã€‚\n","e9414ccd39835cd392e4ef5d7e6696e6":"\n# ç¿»è½¬äºŒå‰æ ‘çš„ä¸¤ç§è§£é¢˜æ€è·¯\n\n\n`#ç®—æ³•/äºŒå‰æ ‘` `#2023/12/23` \n\n\n## ç›®å½•\n<!-- toc -->\n ## äºŒå‰æ ‘çš„è§£é¢˜æ€»çº² - ä¸¤ç§æ€è·¯ \n\näºŒå‰æ ‘è§£é¢˜çš„æ€ç»´æ¨¡å¼åˆ†ä¸¤ç±»ï¼š\n\n1ã€æ˜¯å¦å¯ä»¥é€šè¿‡**éå†ä¸€éäºŒå‰æ ‘**å¾—åˆ°ç­”æ¡ˆï¼Ÿå¦‚æœå¯ä»¥ï¼Œç”¨ä¸€ä¸ª `traverse` å‡½æ•°é…åˆå¤–éƒ¨å˜é‡æ¥å®ç°ï¼Œè¿™å« **ã€Œéå†ã€çš„æ€ç»´æ¨¡å¼**ã€‚\n\n2ã€æ˜¯å¦å¯ä»¥å®šä¹‰ä¸€ä¸ª`é€’å½’å‡½æ•°`ï¼Œ**é€šè¿‡å­é—®é¢˜ï¼ˆå­æ ‘ï¼‰çš„ç­”æ¡ˆæ¨å¯¼å‡ºåŸé—®é¢˜çš„ç­”æ¡ˆ**ï¼Ÿå¦‚æœå¯ä»¥ï¼Œå†™å‡ºè¿™ä¸ªé€’å½’å‡½æ•°çš„å®šä¹‰ï¼Œå¹¶å……åˆ†åˆ©ç”¨è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ï¼Œè¿™å« **ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´æ¨¡å¼**ã€‚\n\næ— è®ºä½¿ç”¨å“ªç§æ€ç»´æ¨¡å¼ï¼Œä½ éƒ½éœ€è¦æ€è€ƒï¼š\n\n**å¦‚æœå•ç‹¬æŠ½å‡ºä¸€ä¸ªäºŒå‰æ ‘èŠ‚ç‚¹ï¼Œå®ƒéœ€è¦åšä»€ä¹ˆäº‹æƒ…ï¼Ÿéœ€è¦åœ¨ä»€ä¹ˆæ—¶å€™ï¼ˆå‰/ä¸­/ååºä½ç½®ï¼‰åšï¼Ÿ** å…¶ä»–çš„èŠ‚ç‚¹ä¸ç”¨ä½ æ“å¿ƒï¼Œé€’å½’å‡½æ•°ä¼šå¸®ä½ åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šæ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚\n\n## ç¿»è½¬äºŒå‰æ ‘\n\n> [https://leetcode.cn/problems/invert-binary-tree/](https://leetcode.cn/problems/invert-binary-tree/)\n\n### éå†çš„æ€è·¯\n\nå³ï¼Œå†™ä¸€ä¸ªé€’å½’å‡½æ•°`traverse` ï¼Œç„¶åé…åˆå¤–éƒ¨å˜é‡ `tmp` ï¼Œé€‰æ‹©åœ¨æ˜¯åœ¨ å‰ã€åã€è¿˜æ˜¯ä¸­åºä½ç½®åšï¼Œå³å¯\n\n```javascript\nvar invertTree = function(root) {\n    var traverse = function(root) {\n        if (root === null) {\n            return;\n        }\n        /**** å‰åºä½ç½® ****/\n        // æ¯ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦åšçš„äº‹å°±æ˜¯äº¤æ¢å®ƒçš„å·¦å³å­èŠ‚ç‚¹\n        var tmp = root.left;\n        root.left = root.right;\n        root.right = tmp;\n        // éå†æ¡†æ¶ï¼Œå»éå†å·¦å³å­æ ‘çš„èŠ‚ç‚¹\n        traverse(root.left);\n        traverse(root.right);\n    }\n    // éå†äºŒå‰æ ‘ï¼Œäº¤æ¢æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹\n    traverse(root);\n    return root;\n};\n\n```\n\n`ååºä½ç½®`ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œ ä½†ä¸èƒ½æ˜¯ `ä¸­åºä½ç½®`ï¼Œéœ€è¦åšäº›ä¿®æ”¹ï¼Œå¦‚ä¸‹ï¼š\n\n```javascript\nvar invertTree = function (root) {\n    const traverse = function (root) {\n        if (root === null) {\n            return;\n        }\n        \n        traverse(root.left);\n        \n        // ä¸­åºä½ç½®\n        let tmp = root.left;\n        root.left = root.right;\n        \n        traverse(root.right);\n        \n        root.right = tmp;\n    };\n\n    // éå†äºŒå‰æ ‘ï¼Œäº¤æ¢æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹\n    traverse(root);\n    return root;\n};\n\n```\n\n### åˆ†è§£é—®é¢˜çš„æ€è·¯\n\nå³ï¼Œå†™ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œç„¶åè¿™ä¸ªé€’å½’å‡½æ•°ï¼Œä¼šå¸®ä½ åœ¨æ¯ä¸ªèŠ‚ç‚¹åšåŒæ ·çš„äº‹æƒ…ã€‚\n\n```javascript\n// å®šä¹‰ï¼šå°†ä»¥ root ä¸ºæ ¹çš„è¿™æ£µäºŒå‰æ ‘ç¿»è½¬ï¼Œè¿”å›ç¿»è½¬åçš„äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹\nvar invertTree = function (root) {\n    if (root === null) {\n        return null;\n    }\n    // åˆ©ç”¨å‡½æ•°å®šä¹‰ï¼Œå…ˆç¿»è½¬å·¦å³å­æ ‘\n    // ::::ç¿»è½¬å·¦å­æ ‘\n    var left = invertTree(root.left);\n    // ::::ç¿»è½¬å³å­æ ‘\n    var right = invertTree(root.right);\n\n    // ç„¶åäº¤æ¢å·¦å³å­èŠ‚ç‚¹\n    root.left = right;\n    root.right = left;\n\n    // å’Œå®šä¹‰é€»è¾‘è‡ªæ°ï¼šä»¥ root ä¸ºæ ¹çš„è¿™æ£µäºŒå‰æ ‘å·²ç»è¢«ç¿»è½¬ï¼Œè¿”å› root\n    return root;\n}\n```\n\n","f628388168c55c868bebd8bfe346a9a3":"\n# AVL æ ‘å’Œçº¢é»‘æ ‘\n\n`#æ ‘` `#æ•°æ®ç»“æ„` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. AVL æ ‘ \n \n### 1.1. å®šä¹‰\n \n- æ—¢æ˜¯äºŒå‰æœç´¢æ ‘ï¼Œä¹Ÿæ˜¯å¹³è¡¡äºŒå‰æ ‘\n- å¯¹æ¯ä¸ªèŠ‚ç‚¹ï¼Œå…¶å·¦å³å­æ ‘çš„é«˜åº¦å·®ä¸è¶…è¿‡ 1\n- ä½¿ç”¨é«˜åº¦æˆ–å¹³è¡¡å› å­æ¥ç»´æŒå¹³è¡¡\n\n### 1.2. ä½¿ç”¨åœºæ™¯\n\n- ç»„ç»‡å’Œå­˜å‚¨å¤§å‹æ•°æ®ï¼Œé€‚ç”¨äº**é«˜é¢‘æŸ¥æ‰¾ã€ä½é¢‘å¢åˆ **çš„åœºæ™¯\n- ç”¨äºæ„å»ºæ•°æ®åº“ä¸­çš„**ç´¢å¼•**ç³»ç»Ÿ\n- æ–‡ä»¶ç³»ç»Ÿ\n- é€‚ç”¨äºè¯»æ“ä½œï¼ˆæŸ¥æ‰¾ï¼‰é¢‘ç¹çš„åœºæ™¯\n\t- å¯¹æŸ¥è¯¢æ€§èƒ½è¦æ±‚æé«˜çš„æƒ…å†µ\n\t- æ•°æ®åº“ç´¢å¼•\n\t- éœ€è¦ä¿è¯æœ€åæƒ…å†µä¸‹æ€§èƒ½çš„åº”ç”¨\n- æŸäº›æ•°**æ®åº“ç³»ç»Ÿçš„ç´¢å¼•**å®ç°\n- éœ€è¦**é¢‘ç¹æŸ¥æ‰¾ä½†è¾ƒå°‘æ’å…¥/åˆ é™¤çš„å†…å­˜æ•°æ®é›†**\n\n## 2. çº¢é»‘æ ‘\n\n### 2.1. å®šä¹‰\n\n- ä¹Ÿæ˜¯ä¸€ç§è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘\n- æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰é¢œè‰²å±æ€§ï¼Œè¦ä¹ˆçº¢è‰²è¦ä¹ˆé»‘è‰²\n- é€šè¿‡èŠ‚ç‚¹é¢œè‰²å’Œä¸€ç³»åˆ—è§„åˆ™æ¥ä¿æŒå¹³è¡¡ï¼š\n    1. æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²\n    2. æ‰€æœ‰å¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²\n    3. çº¢è‰²èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²\n    4. ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹\n\n### 2.2. ä½¿ç”¨åœºæ™¯\n\n- é€‚ç”¨äºè¯»å†™æ“ä½œï¼ˆæŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤ï¼‰éƒ½**è¾ƒä¸ºé¢‘ç¹**çš„åœºæ™¯\n- å¯¹æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ€§èƒ½è¦æ±‚è¾ƒé«˜\n- éœ€è¦åœ¨æ€§èƒ½å’Œå†…å­˜ä½¿ç”¨ä¹‹é—´å–å¾—å¹³è¡¡çš„æƒ…å†µ\n\nå…·ä½“åº”ç”¨ä¾‹å­ï¼š\n- Java ä¸­çš„ TreeMap å’Œ TreeSet\n- C++ STL ä¸­çš„ map å’Œ set\n- Linux å†…æ ¸ä¸­çš„å®Œå…¨å…¬å¹³è°ƒåº¦å™¨ï¼ˆCFSï¼‰\n- å„ç§ä¸­ç­‰è§„æ¨¡çš„æ•°æ®é›†åˆç®¡ç†\n\n## 3. æ€»ç»“\n\næ€»çš„æ¥è¯´\n- å¦‚æœä½ çš„åº”ç”¨æ›´æ³¨é‡æŸ¥è¯¢é€Ÿåº¦ä¸”æ’å…¥/åˆ é™¤æ“ä½œç›¸å¯¹è¾ƒå°‘ï¼Œå¯ä»¥é€‰æ‹© **AVL æ ‘**ã€‚\n- å¦‚æœä½ éœ€è¦å¤„ç†é¢‘ç¹çš„æ’å…¥å’Œåˆ é™¤æ“ä½œï¼ŒåŒæ—¶è¿˜è¦ä¿æŒä¸é”™çš„æŸ¥è¯¢æ€§èƒ½ï¼Œé‚£ä¹ˆ**çº¢é»‘æ ‘**å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚\n- AVLæ ‘æä¾›äº†æ›´ä¸¥æ ¼çš„å¹³è¡¡ï¼Œé€‚åˆè¯»æ“ä½œé¢‘ç¹çš„åœºæ™¯ã€‚\n- çº¢é»‘æ ‘æä¾›äº†æ›´å¥½çš„å†™æ“ä½œæ€§èƒ½ï¼Œé€‚åˆè¯»å†™éƒ½å¾ˆé¢‘ç¹çš„åœºæ™¯ã€‚\n- åœ¨å®é™…åº”ç”¨ä¸­ï¼Œçº¢é»‘æ ‘å› å…¶åœ¨æ’å…¥å’Œåˆ é™¤æ“ä½œä¸Šçš„æ•ˆç‡ä¼˜åŠ¿ï¼Œä»¥åŠå†…å­˜å ç”¨è¾ƒå°çš„ç‰¹ç‚¹ï¼Œå¾€å¾€è¢«æ›´å¹¿æ³›åœ°ä½¿ç”¨ã€‚","6d0b6434aa0753d0a7e2f3e21f52c4d5":"\n# å †\n\n`#äºŒå‰æ ‘å †`\n\n- å †æ˜¯ä¸€æ£µå®Œå…¨äºŒå‰æ ‘ï¼Œæ ¹æ®æˆç«‹æ¡ä»¶å¯åˆ†ä¸ºå¤§é¡¶å †å’Œå°é¡¶å †\n\t- å¤§é¡¶å †çš„å †é¡¶å…ƒç´ æ˜¯æœ€å¤§çš„ã€‚\n\t- å°é¡¶å †çš„å †é¡¶å…ƒç´ æ˜¯æœ€å°çš„ã€‚\n- **ä¼˜å…ˆé˜Ÿåˆ—**çš„å®šä¹‰æ˜¯å…·æœ‰å‡ºé˜Ÿä¼˜å…ˆçº§çš„é˜Ÿåˆ—ï¼Œé€šå¸¸ä½¿ç”¨å †æ¥å®ç°ã€‚\n- å †çš„å¸¸ç”¨æ“ä½œåŠå…¶å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦åŒ…æ‹¬ï¼š\n\t- å…ƒç´ å…¥å †Â O(logâ¡n)\n\t- å †é¡¶å…ƒç´ å‡ºå †Â O(logâ¡n)Â \n\t- è®¿é—®å †é¡¶å…ƒç´ Â O(1)Â ç­‰\n- å®Œå…¨äºŒå‰æ ‘éå¸¸é€‚åˆç”¨æ•°ç»„è¡¨ç¤ºï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸ä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨å †ã€‚\n- **å †åŒ–**æ“ä½œç”¨äºç»´æŠ¤å †çš„æ€§è´¨ï¼Œåœ¨å…¥å †å’Œå‡ºå †æ“ä½œä¸­éƒ½ä¼šç”¨åˆ°ã€‚\n- è¾“å…¥Â nÂ ä¸ªå…ƒç´ å¹¶å»ºå †çš„æ—¶é—´å¤æ‚åº¦å¯ä»¥ä¼˜åŒ–è‡³Â O(n)Â ï¼Œéå¸¸é«˜æ•ˆã€‚\n- **Top-k** æ˜¯ä¸€ä¸ªç»å…¸ç®—æ³•é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨å †æ•°æ®ç»“æ„é«˜æ•ˆè§£å†³ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºÂ `O(nlogâ¡k)`Â ã€‚\n\n\næ•°æ®ç»“æ„çš„â€œå †â€ä¸å†…å­˜ç®¡ç†çš„â€œå †â€æ˜¯åŒä¸€ä¸ªæ¦‚å¿µå—\n- ä¸¤è€…ä¸æ˜¯åŒä¸€ä¸ªæ¦‚å¿µï¼Œåªæ˜¯ç¢°å·§éƒ½å«â€œå †â€ã€‚","70d073a14810524b8e2c7a1849917b08":"\n# äºŒå‰å †\n\n`#æ•°æ®ç»“æ„/äºŒå‰å †`   `#å †` `#äºŒå‰å †` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å †ã€å¤§é¡¶å †ã€å°é¡¶å †çš„å®šä¹‰ \n\n\n`å †`æ˜¯ä¸€ä¸ª`å®Œå…¨äºŒå‰æ ‘`ï¼Œæ˜¯ä¸€ç§èƒ½å¤Ÿ**åŠ¨æ€æ’åº**çš„æ•°æ®ç»“æ„\n- `å †`ä¸­ `æ¯ä¸ªèŠ‚ç‚¹`çš„å€¼éƒ½ `å¤§äºç­‰äºï¼ˆæˆ–è€…å°äºç­‰äºï¼‰`å…¶`å·¦å³å­èŠ‚ç‚¹`çš„å€¼\n   - å¤§çš„å†ä¸Šé¢ï¼Œ`å¤§é¡¶å †`ï¼Œæ‰€ä»¥å †é¡¶è‚¯å®šæ˜¯æœ€å¤§å€¼\n   - å°çš„å†ä¸Šé¢ï¼Œ`å°é¡¶å †`ï¼Œæ‰€ä»¥å †é¡¶è‚¯å®šæ˜¯æœ€å°å€¼\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922210638.png)\n\n![|528](https://832-1310531898.cos.ap-beijing.myqcloud.com/c75df744c97e5b34e295bbd2eacaf267.png)\n\n\n\n## 2. å †çš„å­˜å‚¨ç»“æ„è¡¨ç¤º\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922210739.png)\n\n## 3. å †çš„å„ä¸ªæ“ä½œçš„å¤æ‚åº¦\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240922211213.png)\n\n## 4. å †çš„åº”ç”¨åœºæ™¯ï¼ˆæˆ–ä»·å€¼ï¼‰\n\n- å †æ’åº\n- **å¤§é¡¶å †**çš„ä»·å€¼\n\t- ä¼˜å…ˆé˜Ÿåˆ—\n\t- é«˜æ•ˆæ’åº\n\t- é«˜æ•ˆçš„åŠ¨æ€ä¸­ä½æ•°\n- **å°é¡¶å †**çš„ä»·å€¼\n\t- ä¼˜å…ˆé˜Ÿåˆ—ï¼šå°é¡¶å †ä¹Ÿå¸¸ç”¨äºå®ç°ä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ”¯æŒå¿«é€Ÿè·å–å’Œåˆ é™¤æœ€å°å…ƒç´ ã€‚\n\t- å›¾ç®—æ³•ï¼šåœ¨å›¾ç®—æ³•ä¸­ï¼Œå°é¡¶å †ç”¨äºå®ç° Dijkstra æœ€çŸ­è·¯å¾„ç®—æ³•å’Œ Prim æœ€å°ç”Ÿæˆæ ‘ç®—æ³•ï¼Œä»¥å¿«é€Ÿæ‰¾åˆ°æƒé‡æœ€å°çš„è¾¹æˆ–è·¯å¾„ã€‚\n\t- åˆå¹¶æœ‰åºåˆ—è¡¨ï¼šå°é¡¶å †å¯ä»¥é«˜æ•ˆåœ°åˆå¹¶å¤šä¸ªæœ‰åºåˆ—è¡¨ï¼Œä¾‹å¦‚ç”¨äºå¤–éƒ¨æ’åºæˆ–å½’å¹¶æ’åº\n- å †çš„æ€»ä½“ä»·å€¼\n\t- **é«˜æ•ˆçš„æ’å…¥å’Œåˆ é™¤æ“ä½œ**ï¼šå †æ”¯æŒ `O(log n)` çš„æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œä½¿å…¶åœ¨éœ€è¦é¢‘ç¹è°ƒæ•´å…ƒç´ é¡ºåºçš„åœºæ™¯ä¸­éå¸¸é«˜æ•ˆã€‚\n\t- **å†…å­˜åˆ©ç”¨ç‡é«˜**ï¼šå †æ˜¯ä¸€ç§åŸºäºæ•°ç»„å®ç°çš„æ•°æ®ç»“æ„ï¼Œå†…å­˜åˆ©ç”¨ç‡é«˜ï¼Œä¸éœ€è¦é¢å¤–çš„æŒ‡é’ˆæˆ–é“¾æ¥ã€‚\n\t- å¹¿æ³›åº”ç”¨ï¼šå †åœ¨å„ç§ç®—æ³•å’Œç³»ç»Ÿä¸­æœ‰å¹¿æ³›åº”ç”¨ï¼ŒåŒ…æ‹¬è°ƒåº¦ç³»ç»Ÿã€å†…å­˜ç®¡ç†ã€å›¾ç®—æ³•ã€å®æ—¶æ•°æ®å¤„ç†ç­‰ã€‚\n\næ€»ä¹‹ï¼Œå †ç»“æ„å› å…¶é«˜æ•ˆçš„æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œï¼Œåœ¨è®¸å¤šéœ€è¦ç»´æŠ¤åŠ¨æ€æœ‰åºé›†åˆçš„åœºæ™¯ä¸­å…·æœ‰é‡è¦ä»·å€¼ã€‚\n\n\n## 5. ä»£ä»·\n\nè‡ªåŠ¨æ’åºæ˜¯æœ‰ä»£ä»·çš„ï¼Œæ³¨æ„ä¼˜å…ˆçº§é˜Ÿåˆ— API çš„æ—¶é—´å¤æ‚åº¦ï¼Œ**å¢åˆ å…ƒç´ çš„å¤æ‚åº¦æ˜¯Â `O(logN)`ï¼Œå…¶ä¸­Â `N`Â æ˜¯å½“å‰äºŒå‰å †ä¸­çš„å…ƒç´ ä¸ªæ•°**\n\n\n## 6. Python ä¸­çš„æ ‡å‡†åº“ heapq\n\n `heapq` æ¨¡å—ä¸­æä¾›ã€‚`heapq` æ¨¡å—å®ç°äº†æœ€å°å †ï¼ˆmin heapï¼‰ç®—æ³•ï¼Œä½†é€šè¿‡ä¸€äº›æŠ€å·§ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°æœ€å¤§å †ï¼ˆmax heapï¼‰ã€‚\n\nä»¥ä¸‹æ˜¯å…³äº Python çš„ `heapq` æ¨¡å—çš„ä¸€äº›å…³é”®ä¿¡æ¯ï¼š\n\n### 6.1. å¯¼å…¥æ–¹å¼\n\n```python\nimport heapq\n```\n\n### 6.2. ä¸»è¦å‡½æ•°\n\n- `heapq.heapify(list)`: å°†åˆ—è¡¨è½¬æ¢ä¸ºå †\n- `heapq.heappush(heap, item)`: å°†å…ƒç´ æ·»åŠ åˆ°å †ä¸­\n- `heapq.heappop(heap)`: å¼¹å‡ºå¹¶è¿”å›å †ä¸­æœ€å°çš„å…ƒç´ \n- `heapq.heappushpop(heap, item)`: å°†  item æ”¾å…¥å †ä¸­ï¼Œç„¶åå¼¹å‡ºå¹¶è¿”å›å †ä¸­æœ€å°çš„å…ƒç´ \n- `heapq.heapreplace(heap, item)`: å¼¹å‡ºå¹¶è¿”å›å †ä¸­æœ€å°çš„å…ƒç´ ï¼Œç„¶åå°† item æ”¾å…¥å †ä¸­\n- `heapq.nlargest(n, iterable, key=None)`: è¿”å› iterable ä¸­ n ä¸ªæœ€å¤§çš„å…ƒç´ \n- `heapq.nsmallest(n, iterable, key=None)`: è¿”å› iterable ä¸­ n ä¸ªæœ€å°çš„å…ƒç´ \n\n### 6.3. ä½¿ç”¨ç¤ºä¾‹\n\n```python\nimport heapq\n\n# åˆ›å»ºä¸€ä¸ªå †\nheap = []\nheapq.heappush(heap, 4)\nheapq.heappush(heap, 1)\nheapq.heappush(heap, 7)\nheapq.heappush(heap, 3)\n\nprint(heap)  # è¾“å‡ºï¼š[1, 3, 7, 4]\n\n# å¼¹å‡ºæœ€å°å…ƒç´ \nsmallest = heapq.heappop(heap)\nprint(smallest)  # è¾“å‡ºï¼š1\nprint(heap)  # è¾“å‡ºï¼š[3, 4, 7]\n\n# å°†åˆ—è¡¨è½¬æ¢ä¸ºå †\nlist = [4, 6, 8, 1, 2, 9]\nheapq.heapify(list)\nprint(list)  # è¾“å‡ºï¼š[1, 2, 8, 4, 6, 9]\n\n# è·å–æœ€å¤§çš„3ä¸ªå…ƒç´ \nprint(heapq.nlargest(3, list))  # è¾“å‡ºï¼š[9, 8, 6]\n\n# è·å–æœ€å°çš„3ä¸ªå…ƒç´ \nprint(heapq.nsmallest(3, list))  # è¾“å‡ºï¼š[1, 2, 4]\n```\n\n### 6.4. ä½¿ç”¨ heapq å®ç°æœ€å¤§å †\n\nç”±äº `heapq` é»˜è®¤å®ç°çš„æ˜¯æœ€å°å †ï¼Œå¦‚æœéœ€è¦æœ€å¤§å †ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥å®ç°\n\n```python\nimport heapq\n\n# ä½¿ç”¨ heapq å®ç°æœ€å¤§å †\nclass MaxHeap:\n    def __init__(self):\n        self.heap = []\n\n    def push(self, val):\n        heapq.heappush(self.heap, -val)\n\n    def pop(self):\n        # heapq é»˜è®¤å®ç°çš„æ˜¯æœ€å°å †ï¼Œæ‰€ä»¥å–ç›¸åæ•°\n        return -heapq.heappop(self.heap)\n\n    def peek(self):\n        # ä¸‰å…ƒè¡¨è¾¾å¼ï¼Œå¦‚æœ heap ä¸ä¸ºç©ºï¼Œè¿”å› heap[0]ï¼Œå¦åˆ™è¿”å› None\n        # æ ¼å¼ä¸ºï¼švalue_if_true if condition else value_if_false\n        # æ ¼å¼ä¸ºï¼šä¸ºçœŸæ—¶çš„è¿”å›å€¼ if åˆ¤å®šæ¡ä»¶ else ä¸ºå‡æ—¶çš„è¿”å›å€¼\n        # return -self.heap[0] if self.heap else None\n        if self.heap:\n            return -self.heap[0]\n        else:\n            return None\n\n    def size(self):\n        return len(self.heap)\n\n# ä½¿ç”¨ç¤ºä¾‹\nmax_heap = MaxHeap()\nmax_heap.push(3)\nmax_heap.push(1)\nmax_heap.push(4)\nmax_heap.push(2)\n\nprint(max_heap.pop())  # è¾“å‡º: 4\nprint(max_heap.pop())  # è¾“å‡º: 3\nprint(max_heap.peek())  # è¾“å‡º: 2\n\n```\n\n\n## 7. å®ç°ä¸€ä¸ªå°é¡¶å †ï¼šJavaScript æè¿°\n\nä½¿ç”¨`æ•°ç»„`æ¥å­˜å‚¨ï¼Œå› ä¸ºäºŒå‰å †æ˜¯ä¸ª**å®Œå…¨äºŒå‰æ ‘**ï¼Œå¦‚ä¸‹tuï¼š\n\n![å›¾ç‰‡](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240917145626.png)\n\n> [!danger]\n> æ³¨æ„ä¸‹é¢ä»£ç çš„é«˜äº®éƒ¨åˆ†\n\n```javascript hl:108-110\nfunction swap(array, a, b) {\n  [array[a], array[b]] = [array[b], array[a]];\n}\n\nclass MinHeap {\n  constructor() {\n    // ä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨\n    this.heap = [];\n  }\n\n  // è·å–å·¦å­©å­çš„ç´¢å¼•\n  getLeftIndex(index) {\n    return 2 * index + 1;\n  }\n\n  // è·å–å³å­©å­çš„ç´¢å¼•\n  getRightIndex(index) {\n    return 2 * index + 2;\n  }\n\n  // çˆ¶èŠ‚ç‚¹çš„ç´¢å¼•\n  getParentIndex(index) {\n    if (index === 0) {\n      return 0;\n    }\n    return Math.floor((index - 1) / 2);\n  }\n\n  // è¿”å›ä¸ªæ•°\n  size() {\n    return this.heap.length;\n  }\n\n  isEmpty() {\n    return this.size() <= 0;\n  }\n\n  clear() {\n    this.heap = [];\n  }\n\n  // ::::å°é¡¶å †ï¼Œæœ€å°çš„è‚¯å®šåœ¨æœ€ä¸Šé¢\n  findMinimum() {\n    return this.isEmpty() ? null : this.heap[0];\n  }\n\n  // æ’å…¥ä¸€ä¸ªå€¼ï¼Œæ’å…¥çš„å…ƒç´ æ·»åŠ åˆ°å †åº•çš„æœ€åï¼Œç„¶åè®©å…¶ä¸Šæµ®åˆ°æ­£ç¡®ä½ç½®ï¼ˆå¦‚æœå¤§é¡¶çš„è¯ï¼‰\n  insert(value) {\n    if (value != null) {\n      const index = this.heap.length;\n      // å…ˆæ”¾åœ¨æœ€åä¸€ä½\n      this.heap.push(value);\n      // å‘ä¸Šç§»åŠ¨ï¼Œç›´åˆ°çˆ¶èŠ‚ç‚¹å°äºæ’å…¥çš„å€¼\n      this.shiftUp(index);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @description ä¸‹æ²‰ï¼Œå †åŒ–ï¼Œé€’å½’\n   * @param {number} index, æ’å…¥çš„å…ƒç´ çš„ä½ç½®, è¿™ä¸ªä½ç½®æ˜¯æŒ‡ æ•°ç»„çš„ç´¢å¼•\n   */\n  shiftDown(index) {\n    // æ’å…¥çš„å…ƒç´ çš„ä½ç½®\n    let pos = index;\n    const left = this.getLeftIndex(index);\n    const right = this.getRightIndex(index);\n    const size = this.size();\n\n    if (\n      left < size && // å¦‚æœå·¦å­èŠ‚ç‚¹å°äºæ•°ç»„çš„é•¿åº¦ï¼Œè¯´æ˜æœ‰å·¦å­èŠ‚ç‚¹\n      this.heap[pos] > this.heap[left] // å¦‚æœè¯¥å…ƒç´ å¤§äºå®ƒçš„å·¦å­èŠ‚ç‚¹ï¼Œåˆ™ä¸‹æ²‰ï¼Œå³ pos = left\n    ) {\n      pos = left;\n    }\n\n    if (\n      right < size && // å¦‚æœå³å­èŠ‚ç‚¹å°äºæ•°ç»„çš„é•¿åº¦ï¼Œè¯´æ˜æœ‰å³å­èŠ‚ç‚¹\n      this.heap[pos] > this.heap[right] // å¦‚æœè¯¥å…ƒç´ å¤§äºå®ƒçš„å³å­èŠ‚ç‚¹ï¼Œåˆ™ä¸‹æ²‰\n    ) {\n      pos = right;\n    }\n\n    // å¦‚æœ pos æœ€å å’Œä¼ å…¥çš„indexä¸ä¸€æ ·äº†ï¼Œè¯´æ˜éœ€è¦äº¤æ¢æ•°æ®ï¼Œç„¶åç»§ç»­ä¸‹æ²‰é€’å½’\n    if (index !== pos) {\n      swap(this.heap, index, pos);\n      this.shiftDown(pos);\n    }\n  }\n\n  /**\n   * @description ä¸Šæµ®ï¼Œå †åŒ–ï¼Œé€’å½’:å‘ä¸Šç§»åŠ¨ï¼Œç›´åˆ°çˆ¶èŠ‚ç‚¹çš„å€¼å°äºæ’å…¥çš„å€¼\n   * @param {number} index, æ’å…¥çš„å…ƒç´ çš„ä½ç½®, è¿™ä¸ªä½ç½®æ˜¯æŒ‡ æ•°ç»„çš„ç´¢å¼•\n   */\n  shiftUp(index) {\n    let parentIndex = this.getParentIndex(index);\n    while (\n      index > 0 && // indexå¿…é¡»å¤§äº0ï¼Œå› ä¸ºæ ¹èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯è‡ªå·±\n      this.heap[parentIndex] > this.heap[index] // çˆ¶èŠ‚ç‚¹çš„å…ƒç´ å¤§äºå­å…ƒç´ çš„æ—¶å€™ï¼Œæ‰éœ€è¦ç§»åŠ¨\n    ) {\n      swap(this.heap, parentIndex, index);\n\n      // äº¤æ¢åï¼Œç»§ç»­å‘ä¸Šç§»åŠ¨\n      index = parentIndex;\n      parentIndex = this.getParentIndex(index);\n\n      // ä»¥ä¸‹æ˜¯é”™è¯¯çš„å†™æ³• éœ€è¦æ³¨æ„ï¼Œå› ä¸ºè¿™æ˜¯åœ¨ while å¾ªç¯ä¸­ï¼Œæ‰€ä»¥ä¸éœ€è¦é€’å½’,è¢«é€’å½’å½±å“äº†\n      // è¿™æ˜¯ while å¾ªç¯ï¼Œä¸æ˜¯é€’å½’\n      // è¿™æ˜¯ while å¾ªç¯ï¼Œä¸æ˜¯é€’å½’\n      // // äº¤æ¢åï¼Œç»§ç»­å‘ä¸Šç§»åŠ¨ï¼Œä¼ å…¥çš„indexå˜æˆäº†çˆ¶èŠ‚ç‚¹çš„ç´¢å¼•\n      // this.getParentIndex(parentIndex);\n    }\n  }\n\n  // delete min å †é¡¶å…ƒç´ ï¼ˆæœ€å°å€¼ï¼‰å’Œ å †åº•å…ƒç´  å¯¹è°ƒ\n  // 1ã€åˆ é™¤åˆ é™¤å †é¡¶å…ƒç´ \n  // 2ã€è®©å †åº•å…ƒç´ æ›¿æ¢åˆ°å †é¡¶\n  // 3ã€ç„¶åä»å †é¡¶å¼€å§‹ä¸‹æ²‰\n  deleteMin() {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.size() === 1) {\n      return this.heap.shift();\n    }\n    const removedValue = this.heap[0]; // å †é¡¶å…ƒç´ \n    const lastElement = this.heap.pop(); // ç§»é™¤å †åº•å…ƒç´ \n    this.heap[0] = lastElement; // å°† å †é¡¶å…ƒç´  èµ‹å€¼ä¸º å †åº•å…ƒç´ \n    // ä»å †é¡¶å¼€å§‹ä¸‹æ²‰\n    this.shiftDown(0);\n    return removedValue;\n  }\n\n  getAsArray() {\n    return this.heap;\n  }\n}\n\nlet arr = [5, 3, 7, 9, 0, 0, -1, -2, 7, -8];\n\nlet heapObj = new MinHeap();\narr.forEach((item) => {\n  heapObj.insert(item);\n});\nconsole.log(heapObj);\nconsole.log(\"************************\");\n\nconsole.log(heapObj.findMinimum());\n```\n\n## å †çš„ä½¿ç”¨åœºæ™¯\n\n\n- **ä¼˜å…ˆé˜Ÿåˆ—**ï¼šå †é€šå¸¸ä½œä¸ºå®ç°ä¼˜å…ˆé˜Ÿåˆ—çš„é¦–é€‰æ•°æ®ç»“æ„ï¼Œå…¶å…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œçš„æ—¶é—´å¤æ‚åº¦å‡ä¸ºÂ O(logâ¡n)Â ï¼Œè€Œå»ºå †æ“ä½œä¸ºÂ O(n)Â ï¼Œè¿™äº›æ“ä½œéƒ½éå¸¸é«˜æ•ˆã€‚\n- **å †æ’åº**ï¼šç»™å®šä¸€ç»„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒä»¬å»ºç«‹ä¸€ä¸ªå †ï¼Œç„¶åä¸æ–­åœ°æ‰§è¡Œå…ƒç´ å‡ºå †æ“ä½œï¼Œä»è€Œå¾—åˆ°æœ‰åºæ•°æ®ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ä¸€ç§æ›´ä¼˜é›…çš„æ–¹å¼å®ç°å †æ’åºï¼Œè¯¦è§â€œå †æ’åºâ€ç« èŠ‚ã€‚\n- **è·å–æœ€å¤§çš„Â kÂ ä¸ªå…ƒç´ **ï¼šè¿™æ˜¯ä¸€ä¸ªç»å…¸çš„ç®—æ³•é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ç§å…¸å‹åº”ç”¨ï¼Œä¾‹å¦‚é€‰æ‹©çƒ­åº¦å‰ 10 çš„æ–°é—»ä½œä¸ºå¾®åšçƒ­æœï¼Œé€‰å–é”€é‡å‰ 10 çš„å•†å“ç­‰ã€‚\n","cda22c42983f592faeb6078edcbb5d10":"\n# ä¼˜å…ˆçº§é˜Ÿåˆ—åŠ TopKé—®é¢˜\n\n`#ä¼˜å…ˆçº§é˜Ÿåˆ—`  `#æ•°æ®ç»“æ„` \n\n\n\n## ç›®å½•\n<!-- toc -->\n ## æ€»ç»“ \n\n- ä¸ºäº†ä¸€å®šèƒ½æŠŠå†™å‡ºæ¥ï¼Œè¯·ç”¨ [#2.2.3. ä½¿ç”¨ JavaScript æè¿°ï¼šç›´æ¥ä½¿ç”¨ sort æ–¹æ³•](/post/cda22c42983f592faeb6078edcbb5d10.html#223-ä½¿ç”¨-JavaScript-æè¿°ç›´æ¥ä½¿ç”¨-sort-æ–¹æ³•)\n\n## 1. ä¼˜å…ˆçº§é˜Ÿåˆ—\n\nä¼˜å…ˆçº§é˜Ÿåˆ—æ˜¯ä¸€ç§ç‰¹æ®Šçš„é˜Ÿåˆ—æ•°æ®ç»“æ„ï¼Œä¸¾ä¸ªä¾‹å­ï¼š\n\næƒ³è±¡ä¸€ä¸‹ä½ æ­£åœ¨ä¸€å®¶ç¹å¿™çš„æ€¥è¯Šå®¤å·¥ä½œã€‚åœ¨è¿™é‡Œï¼Œç—…äººä¸æ˜¯æŒ‰ç…§å…ˆæ¥ååˆ°çš„é¡ºåºå°±è¯Šï¼Œè€Œæ˜¯æ ¹æ®ä»–ä»¬ç—…æƒ…çš„`ä¸¥é‡ç¨‹åº¦ï¼ˆä¼˜å…ˆçº§ï¼‰`æ¥å†³å®šè°å…ˆæ¥å—æ²»ç–—ã€‚è¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¼˜å…ˆçº§é˜Ÿåˆ—çš„ä¾‹å­ã€‚\n\nè®©æˆ‘ä»¬è¯¦ç»†æè¿°è¿™ä¸ªåœºæ™¯ï¼š\n1. **å…¥é˜Ÿï¼ˆEnqueueï¼‰**ï¼š å½“ç—…äººåˆ°è¾¾æ€¥è¯Šå®¤æ—¶ï¼ŒæŠ¤å£«ä¼šè¯„ä¼°ä»–ä»¬çš„æƒ…å†µå¹¶åˆ†é…ä¸€ä¸ªç´§æ€¥ç¨‹åº¦ç­‰çº§ï¼ˆæ¯”å¦‚1-5ï¼Œ1æœ€ç´§æ€¥ï¼Œ5æœ€ä¸ç´§æ€¥ï¼‰ã€‚è¿™ç›¸å½“äºå°†ä¸€ä¸ªå…ƒç´ æ’å…¥ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚\n2. **å‡ºé˜Ÿï¼ˆDequeueï¼‰**ï¼š åŒ»ç”Ÿreadyæ—¶ï¼Œä¼šå«ä¸‹ä¸€ä¸ªç—…äººã€‚ä½†ä¸æ˜¯å«æœ€æ—©åˆ°çš„ï¼Œè€Œæ˜¯å«å½“å‰ç­‰å¾…ä¸­æœ€ç´§æ€¥çš„ç—…äººã€‚è¿™å°±åƒä»ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­å–å‡ºæœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ ã€‚\n3. **åŠ¨æ€è°ƒæ•´**ï¼š å¦‚æœä¸€ä¸ªç—…äººçš„æƒ…å†µçªç„¶æ¶åŒ–ï¼ŒæŠ¤å£«å¯èƒ½ä¼šæé«˜ä»–çš„ç´§æ€¥ç¨‹åº¦ã€‚è¿™ç›¸å½“äºåœ¨ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­æ›´æ–°ä¸€ä¸ªå…ƒç´ çš„ä¼˜å…ˆçº§ã€‚\n4. **å¤šä¸ªç›¸åŒä¼˜å…ˆçº§**ï¼š å¦‚æœæœ‰å¤šä¸ªç—…äººçš„ç´§æ€¥ç¨‹åº¦ç›¸åŒï¼Œé€šå¸¸ä¼šæŒ‰ç…§ä»–ä»¬åˆ°è¾¾çš„é¡ºåºå¤„ç†ã€‚è¿™å°±æ˜¯ä¼˜å…ˆçº§é˜Ÿåˆ—å¤„ç†ç›¸åŒä¼˜å…ˆçº§å…ƒç´ çš„æ–¹å¼ã€‚\n\n### 1.1. ä¼˜å…ˆçº§é˜Ÿåˆ—çš„ä½œç”¨\n\n1. ä»»åŠ¡è°ƒåº¦ï¼šåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—ç”¨äºç®¡ç†è¿›ç¨‹æˆ–çº¿ç¨‹çš„æ‰§è¡Œé¡ºåºï¼Œç¡®ä¿é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡å…ˆæ‰§è¡Œã€‚\n2. äº‹ä»¶é©±åŠ¨ç¼–ç¨‹ï¼šåœ¨äº‹ä»¶å¤„ç†ç³»ç»Ÿä¸­ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—å¯ä»¥ç”¨æ¥ç®¡ç†äº‹ä»¶çš„å¤„ç†é¡ºåºï¼Œç¡®ä¿é‡è¦äº‹ä»¶å¾—åˆ°åŠæ—¶å¤„ç†ã€‚\n3. å›¾ç®—æ³•ï¼šåœ¨è¯¸å¦‚Dijkstraæœ€çŸ­è·¯å¾„ç®—æ³•ã€Primæœ€å°ç”Ÿæˆæ ‘ç®—æ³•ç­‰å›¾ç®—æ³•ä¸­ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—ç”¨äºé«˜æ•ˆåœ°é€‰æ‹©ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„èŠ‚ç‚¹ã€‚\n4. æ•°æ®å‹ç¼©ï¼šåœ¨Huffmanç¼–ç ç­‰æ•°æ®å‹ç¼©ç®—æ³•ä¸­ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—ç”¨äºæ„å»ºHuffmanæ ‘ã€‚\n5. æ¨¡æ‹Ÿç³»ç»Ÿï¼šåœ¨ç¦»æ•£äº‹ä»¶æ¨¡æ‹Ÿä¸­ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—ç”¨äºç®¡ç†äº‹ä»¶çš„å‘ç”Ÿé¡ºåºã€‚\n6. ç½‘ç»œæµé‡æ§åˆ¶ï¼šåœ¨ç½‘ç»œä¼ è¾“ä¸­ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—å¯ä»¥ç”¨æ¥ç®¡ç†æ•°æ®åŒ…çš„å‘é€é¡ºåºï¼Œç¡®ä¿é‡è¦æ•°æ®åŒ…ä¼˜å…ˆä¼ è¾“ã€‚\n\n## 2. å®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—çš„æ–¹æ³•\n\nä¼˜å…ˆçº§é˜Ÿåˆ—é€šå¸¸æœ‰ä¸¤ç§ä¸»è¦çš„å®ç°æ–¹å¼ï¼š\n\n### 2.1. åŸºäºå †ï¼ˆHeapï¼‰çš„å®ç°\n\nè¿™æ˜¯æœ€å¸¸ç”¨å’Œæœ€é«˜æ•ˆçš„å®ç°æ–¹å¼ã€‚é€šå¸¸ä½¿ç”¨äºŒå‰å †ï¼ˆBinary Heapï¼‰æ¥å®ç°ã€‚\n\n   ```python\nimport heapq\n\nclass PriorityQueue:\n   def __init__(self):\n\t   self._queue = []\n\t   self._index = 0\n\n   def push(self, item, priority):\n\t   heapq.heappush(self._queue, (-priority, self._index, item))\n\t   self._index += 1\n\n   def pop(self):\n\t   return heapq.heappop(self._queue)[-1]\n   ```\n\nè¿™ä¸ªå®ç°åˆ©ç”¨äº†Pythonçš„heapqæ¨¡å—ï¼Œå®ƒæä¾›äº†å †é˜Ÿåˆ—ç®—æ³•çš„å®ç°ã€‚æˆ‘ä»¬ä½¿ç”¨è´Ÿçš„ä¼˜å…ˆçº§å€¼æ˜¯å› ä¸ºheapqå®ç°çš„æ˜¯æœ€å°å †ï¼Œè€Œæˆ‘ä»¬é€šå¸¸éœ€è¦æœ€å¤§ä¼˜å…ˆçº§å…ˆå‡ºé˜Ÿã€‚\n\n### 2.2. åŸºäºæœ‰åºæ•°ç»„çš„å®ç°\n\n#### 2.2.1. ä½¿ç”¨ python æè¿°\n\nè¿™ç§æ–¹æ³•åœ¨æ’å…¥æ—¶ä¿æŒå…ƒç´ æœ‰åºï¼Œå‡ºé˜Ÿæ—¶ç›´æ¥å–ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚\n\n   ```python\n# ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼šåŸºäºæœ‰åºåˆ—è¡¨çš„å®ç°\nclass PriorityQueue:\n    def __init__(self):\n        # ç”¨äºå­˜å‚¨å…ƒç´ çš„åˆ—è¡¨\n        self.queue = []\n\n    # åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º\n    def isEmpty(self):\n        return len(self.queue) == 0\n\n    # æ’å…¥å…ƒç´ ,éœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œæ’å…¥ä»¥åæŒ‰ç…§ä¼˜å…ˆçº§æ’åº\n    #   item: å¾…æ’å…¥çš„å…ƒç´ \n    #   priority: ä¼˜å…ˆçº§\n    def push(self, item, priority):\n        self.queue.append((item, priority))\n        self.queue.sort(key=lambda x: x[1])\n\n    # ç§»é™¤å…ƒç´ ï¼Œè¿”å›ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ï¼Œå³è¿”å›åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ \n    def pop(self):\n        # å‚æ•° 0 è¡¨ç¤ºç§»é™¤å¹¶è¿”å›åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ \n        return self.queue.pop(0)\n\n   ```\n\nè¿™ç§å®ç°æ–¹æ³•ç®€å•ç›´è§‚ï¼Œä½†åœ¨å¤§è§„æ¨¡æ•°æ®æ—¶æ•ˆç‡è¾ƒä½ï¼Œå› ä¸ºæ¯æ¬¡æ’å…¥éƒ½éœ€è¦é‡æ–°æ’åº\n\n#### 2.2.2. ä½¿ç”¨ JavaScript æè¿°ï¼šéå†æŸ¥æ‰¾æ’å…¥åˆé€‚çš„ä½ç½®\n\n```js hl:16\n// ä¼˜å…ˆçº§é˜Ÿåˆ—å®ç°ï¼šä½¿ç”¨æœ‰åºæ•°ç»„å®ç°\n\nclass PriorityQueue {\n  constructor() {\n    this.queue = [];\n  }\n\n  enqueue(element) {\n    // å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œç›´æ¥æ’å…¥\n    if (this.isEmpty()) {\n      this.queue.push(element);\n      // å¦‚æœé˜Ÿåˆ—ä¸ä¸ºç©ºï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§æ’å…¥\n    } else {\n      // æ ‡è¯†æ˜¯å¦æ’å…¥è¿‡äº†\n      let added = false;\n      // éå†ï¼Œæ‰¾åˆ°åˆé€‚çš„ä½ç½®æ’å…¥\n      for (let i = 0; i < this.queue.length; i++) {\n        if (element.priority < this.queue[i].priority) {\n          this.queue.splice(i, 0, element);\n          added = true;\n          break;\n        }\n      }\n      // å¦‚æœæ²¡æœ‰æ’å…¥è¿‡ï¼Œè¯´æ˜ä¼˜å…ˆçº§æœ€ä½ï¼Œç›´æ¥æ’å…¥åˆ°é˜Ÿå°¾\n      if (!added) {\n        this.queue.push(element);\n      }\n    }\n  }\n\n  dequeue() {\n    return this.queue.shift();\n  }\n\n  front() {\n    return this.queue[0];\n  }\n\n  isEmpty() {\n    return this.queue.length === 0;\n  }\n\n  size() {\n    return this.queue.length;\n  }\n}\n\n```\n\n#### 2.2.3. ä½¿ç”¨ JavaScript æè¿°ï¼šç›´æ¥ä½¿ç”¨ sort æ–¹æ³•\n\n```javascript hl:11\n// ä¼˜å…ˆçº§é˜Ÿåˆ—å®ç°ï¼šç›´æ¥ä½¿ç”¨ sort æ–¹æ³•\n\nclass PriorityQueue {\n  constructor() {\n    this.queue = [];\n  }\n\n  // å…¥ä¼˜\n  enqueue(element) {\n    this.queue.push(element);\n    // æœ€ç®€å•çš„å®ç°æ–¹å¼ï¼Œæ¯æ¬¡æ’å…¥å…ƒç´ åï¼Œéƒ½å¯¹é˜Ÿåˆ—è¿›è¡Œæ’åº\n    this.queue.sort((a, b) => {\n      return a.priority - b.priority;\n    });\n  }\n\n  // å‡ºé˜Ÿ\n  dequeue() {\n    return this.queue.shift();\n  }\n\n  // è¿”å›é˜Ÿé¦–å…ƒç´ \n  front() {\n    return this.queue[0];\n  }\n\n  // æ˜¯å¦ä¸ºç©º\n  isEmpty() {\n    return this.queue.length === 0;\n  }\n\n  // é˜Ÿåˆ—å¤§å°\n  size() {\n    return this.queue.length;\n  }\n}\n\n```\n\n\n### 2.3. å¦‚ä½•é€‰æ‹©å®ç°æ–¹å¼\n\né€‰æ‹©å“ªç§å®ç°æ–¹æ³•å–å†³äºå…·ä½“çš„åº”ç”¨åœºæ™¯ï¼š\n\n- å¦‚æœéœ€è¦**é¢‘ç¹åœ°æ’å…¥å’Œåˆ é™¤å…ƒç´ **ï¼Œå¹¶ä¸”æ•°æ®é‡è¾ƒå¤§ï¼Œé‚£ä¹ˆåŸºäºå †çš„å®ç°æ›´ä¸ºåˆé€‚ï¼Œå› ä¸ºå®ƒçš„æ—¶é—´å¤æ‚åº¦ä¸º`O(log n)`ã€‚\n- å¦‚æœæ•°æ®é‡è¾ƒå°ï¼Œæˆ–è€…æ’å…¥æ“ä½œä¸é¢‘ç¹ï¼Œè€ŒæŸ¥æ‰¾æ“ä½œè¾ƒå¤šï¼Œé‚£ä¹ˆåŸºäºæœ‰åºæ•°ç»„çš„å®ç°å¯èƒ½æ›´ç®€å•ä¸”è¶³å¤Ÿé«˜æ•ˆã€‚\n\n## 3. Tok-K é—®é¢˜\n\n### 3.1. æ–¹æ³•ä¸€ï¼šæ’åº\n\n```python\n\n# top-k é—®é¢˜ï¼šä½¿ç”¨æ’åºç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(nlogn)\ndef topk(arr, k):\n    arr.sort(reverse=True)\n    return arr[:k]\n\n```\n\n### 3.2. æ–¹æ³•äºŒï¼šä½¿ç”¨å †æ•°æ®ç»“æ„ï¼ˆheapqï¼‰\n\nç›´æ¥ä½¿ç”¨ `heapq.nlargest`\n\n```python\n# tok-k é—®é¢˜ï¼šä½¿ç”¨å †æ’åºç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(nlogk)\n# ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼šåŸºäºå †çš„å®ç°\n\nimport heapq\n\ndef topk2(arr, k):\n    return heapq.nlargest(k, arr)\n\n```\n\nä½¿ç”¨å †çš„ç‰¹æ€§ï¼Œç»´æŠ¤ topk çš„å †\n\n```python\nimport heapq\n\ndef top_k_heap(nums: list[int], k: int) -> list[int]:\n    \"\"\"åŸºäºå †æŸ¥æ‰¾æ•°ç»„ä¸­æœ€å¤§çš„ k ä¸ªå…ƒç´ \"\"\"\n    # åˆå§‹åŒ–å°é¡¶å †\n    heap = []\n    # å°†æ•°ç»„çš„å‰ k ä¸ªå…ƒç´ å…¥å †\n    for i in range(k):\n        heapq.heappush(heap, nums[i])\n    # ä»ç¬¬ k+1 ä¸ªå…ƒç´ å¼€å§‹ï¼Œä¿æŒå †çš„é•¿åº¦ä¸º k\n    for i in range(k, len(nums)):\n        # è‹¥å½“å‰å…ƒç´ å¤§äºå †é¡¶å…ƒç´ ï¼Œåˆ™å°†å †é¡¶å…ƒç´ å‡ºå †ã€å½“å‰å…ƒç´ å…¥å †\n        if nums[i] > heap[0]:\n            heapq.heappop(heap)\n            heapq.heappush(heap, nums[i])\n    return heap\n```","0302e0a977705c9a9b616657b8063252":"\n# æ•°æ®ç»“æ„ä¸­çš„å †å’Œå†…å­˜ä¸­çš„å †çš„åŒºåˆ«\n\n`#2024/09/18` `#å †` `#å †å†…å­˜` `#äºŒå‰å †` \n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ•°æ®ç»“æ„ä¸­çš„å † \n\n- **å®šä¹‰**ï¼šä¸€ç§ç‰¹æ®Šçš„æ ‘å½¢æ•°æ®ç»“æ„ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ã€‚\n- **ç±»å‹**ï¼š\n    - æœ€å¤§å †ï¼šçˆ¶èŠ‚ç‚¹æ€»æ˜¯å¤§äºæˆ–ç­‰äºå…¶å­èŠ‚ç‚¹\n    - æœ€å°å †ï¼šçˆ¶èŠ‚ç‚¹æ€»æ˜¯å°äºæˆ–ç­‰äºå…¶å­èŠ‚ç‚¹\n- **ä¸»è¦æ“ä½œ**ï¼š\n    - æ’å…¥å…ƒç´ \n    - åˆ é™¤æœ€å¤§/æœ€å°å…ƒç´ \n    - è·å–æœ€å¤§/æœ€å°å…ƒç´ \n- **åº”ç”¨**ï¼š\n    - ä¼˜å…ˆé˜Ÿåˆ—\n    - å †æ’åº\n    - å›¾ç®—æ³•ï¼ˆå¦‚Dijkstraç®—æ³•ï¼‰\n- **ç‰¹ç‚¹**ï¼š\n    - ç»“æ„æ€§ï¼šå®Œå…¨äºŒå‰æ ‘\n    - æœ‰åºæ€§ï¼šèŠ‚ç‚¹ä¹‹é—´æœ‰ç‰¹å®šçš„å¤§å°å…³ç³»\n\n## 2. å†…å­˜ä¸­çš„å †\n\n- **å®šä¹‰**ï¼šè®¡ç®—æœºå†…å­˜ä¸­çš„ä¸€å—åŠ¨æ€åˆ†é…çš„åŒºåŸŸã€‚\n- **ç”¨é€”**ï¼šå­˜å‚¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€åˆ†é…çš„æ•°æ®ã€‚\n- **ç‰¹ç‚¹**ï¼š\n    - å¤§å°å¯å˜\n    - ç”Ÿå‘½å‘¨æœŸä¸å›ºå®š\n    - éœ€è¦æ‰‹åŠ¨ç®¡ç†ï¼ˆåœ¨æŸäº›è¯­è¨€ä¸­ï¼‰\n- **å¸¸è§ç”¨é€”**ï¼š\n    - å­˜å‚¨å¯¹è±¡\n    - åŠ¨æ€æ•°ç»„\n    - å¤§å‹æ•°æ®ç»“æ„\n- **å¯¹æ¯”æ ˆ**ï¼š\n    - æ ˆï¼šè‡ªåŠ¨åˆ†é…å’Œé‡Šæ”¾ï¼Œå­˜å‚¨å±€éƒ¨å˜é‡å’Œå‡½æ•°è°ƒç”¨ä¿¡æ¯\n    - å †ï¼šæ‰‹åŠ¨åˆ†é…å’Œé‡Šæ”¾ï¼ˆåœ¨æŸäº›è¯­è¨€ä¸­ï¼‰ï¼Œå­˜å‚¨åŠ¨æ€æ•°æ®\n\n## 3. ä¸ºä»€ä¹ˆéƒ½å«\"å †\"ï¼Ÿ\n\n1. **å†å²åŸå› **ï¼š\n    - æ•°æ®ç»“æ„çš„å †ï¼š\n        - è¿™ä¸ªåç§°æ¥æºäºå †çš„å½¢çŠ¶å’Œç‰¹æ€§ï¼Œç±»ä¼¼äºä¸€å †ä¸œè¥¿å †ç§¯åœ¨ä¸€èµ·ï¼Œé¡¶éƒ¨æ˜¯æœ€å¤§æˆ–æœ€å°çš„å…ƒç´ ã€‚\n    - å†…å­˜å †ï¼š\n        - æ—©æœŸè®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œæœªä½¿ç”¨çš„å†…å­˜è¢«è§†ä¸ºä¸€å †å¯ç”¨èµ„æºï¼Œç¨‹åºå¯ä»¥ä»è¿™ä¸ª\"å †\"ä¸­ç”³è¯·å†…å­˜ã€‚\n2. **æ¦‚å¿µç›¸ä¼¼æ€§**ï¼š\n    - ä¸¤è€…éƒ½æ¶‰åŠåˆ°ä¸€ç§\"å †ç§¯\"æˆ–\"èšé›†\"çš„æ¦‚å¿µã€‚\n    - æ•°æ®ç»“æ„çš„å †æ˜¯å…ƒç´ çš„é€»è¾‘å †ç§¯ã€‚\n    - å†…å­˜å †æ˜¯è®¡ç®—æœºå†…å­˜ä¸­çš„ä¸€å—åŒºåŸŸï¼Œå¯ä»¥è¢«è§†ä¸ºèµ„æºçš„å †ç§¯ã€‚\n3. **çµæ´»æ€§å’ŒåŠ¨æ€æ€§**ï¼š\n    - æ•°æ®ç»“æ„çš„å †å…è®¸åŠ¨æ€åœ°æ·»åŠ å’Œåˆ é™¤å…ƒç´ ã€‚\n    - å†…å­˜å †å…è®¸åŠ¨æ€åœ°åˆ†é…å’Œé‡Šæ”¾å†…å­˜ã€‚\n4. **è¯­è¨€çš„å†å²å‘å±•**ï¼š\n    - åœ¨è®¡ç®—æœºç§‘å­¦å‘å±•çš„æ—©æœŸï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µå¯èƒ½æ²¡æœ‰è¢«æ¸…æ™°åœ°åŒºåˆ†ï¼Œå¯¼è‡´ä½¿ç”¨äº†ç›¸åŒçš„æœ¯è¯­ã€‚\n5. **ç¿»è¯‘çš„å½±å“**ï¼š\n    - åœ¨ä¸åŒè¯­è¨€ä¸­ï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µå¯èƒ½æœ‰ä¸åŒçš„åç§°ï¼Œä½†åœ¨è‹±è¯­ä¸­æ°å¥½éƒ½ç”¨äº†\"heap\"è¿™ä¸ªè¯ã€‚\n\nè™½ç„¶åç§°ç›¸åŒï¼Œä½†è¿™ä¸¤ç§\"å †\"åœ¨æ¦‚å¿µå’Œç”¨é€”ä¸Šæœ‰å¾ˆå¤§çš„ä¸åŒã€‚æ•°æ®ç»“æ„çš„å †æ˜¯ä¸€ç§æŠ½è±¡çš„æ•°æ®ç»„ç»‡æ–¹å¼ï¼Œè€Œå†…å­˜å †æ˜¯è®¡ç®—æœºå†…å­˜ç®¡ç†çš„ä¸€éƒ¨åˆ†ã€‚ç†è§£å®ƒä»¬çš„åŒºåˆ«å¯¹äºæ·±å…¥å­¦ä¹ è®¡ç®—æœºç§‘å­¦å’Œç¼–ç¨‹éå¸¸é‡è¦ã€‚\n\n\n## 4. å…¶ä»–è¯´æ˜\n\n![|512](https://832-1310531898.cos.ap-beijing.myqcloud.com/86921645374e40f809a54fb522b7f5f1.png)\n\n\n\n","0d52eb9c7a155308a47b8bc69d3c8384":"\n# å †å†…å­˜å’Œæ ˆå†…å­˜çš„åŒºåˆ«\n\n\n`#å †å†…å­˜` `#æ ˆå†…å­˜` \n\nå †å†…å­˜ å’Œ å †å†…å­˜ï¼ˆHeap Memoryï¼‰å’Œæ ˆå†…å­˜ï¼ˆStack Memoryï¼‰æ˜¯è®¡ç®—æœºå†…å­˜ç®¡ç†ä¸­ä¸¤ç§ä¸åŒçš„å†…å­˜åˆ†é…åŒºåŸŸã€‚\n\n![|560](https://832-1310531898.cos.ap-beijing.myqcloud.com/1b4993fbc44e95f344a1f3bd840babd4.png)\n\n\nå®ƒä»¬åœ¨ç”¨é€”ã€ç®¡ç†æ–¹å¼ã€ç”Ÿå‘½å‘¨æœŸå’Œæ€§èƒ½ä¸Šæœ‰æ˜¾è‘—åŒºåˆ«ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼š\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. ç”¨é€” \n\n-  **å †å†…å­˜**\n   - ç”¨äºåŠ¨æ€åˆ†é…å†…å­˜ï¼Œé€šå¸¸ç”±ç¨‹åºè¿è¡Œæ—¶åˆ†é…å’Œé‡Šæ”¾ã€‚\n   - é€‚ç”¨äºéœ€è¦åœ¨è¿è¡Œæ—¶å†³å®šå¤§å°å’Œç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡å’Œæ•°æ®ç»“æ„ï¼Œä¾‹å¦‚åŠ¨æ€æ•°ç»„ã€é“¾è¡¨ç­‰ã€‚\n- **æ ˆå†…å­˜**\n   - ç”¨äºé™æ€åˆ†é…å†…å­˜ï¼Œä¸»è¦ç”¨äºå‡½æ•°è°ƒç”¨ã€å±€éƒ¨å˜é‡å’Œå‡½æ•°å‚æ•°ã€‚\n   - é€‚ç”¨äºç”Ÿå‘½å‘¨æœŸæ˜ç¡®ä¸”è¾ƒçŸ­çš„å˜é‡ï¼Œä¾‹å¦‚å±€éƒ¨å˜é‡å’Œå‡½æ•°å‚æ•°ã€‚\n\n## 2. ç®¡ç†æ–¹å¼\n\n- **å †å†…å­˜**ï¼š\n   - å†…å­˜ç®¡ç†è¾ƒå¤æ‚ï¼Œå®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼å’Œç¢ç‰‡åŒ–é—®é¢˜ã€‚\n   - ç”±ç¨‹åºå‘˜æ˜¾å¼åˆ†é…ï¼ˆå¦‚ `malloc` åœ¨ C/C++ ä¸­ï¼Œ`new` åœ¨ C++/Java ä¸­ï¼‰å’Œé‡Šæ”¾ï¼ˆå¦‚ `free` åœ¨ C/C++ ä¸­ï¼Œåƒåœ¾å›æ”¶åœ¨ Java ä¸­ï¼‰ã€‚\n- **æ ˆå†…å­˜**ï¼š\n   - å†…å­˜ç®¡ç†ç®€å•ï¼Œä¸ä¼šå‡ºç°å†…å­˜æ³„æ¼é—®é¢˜ï¼Œä½†æ ˆç©ºé—´æœ‰é™ï¼Œä¸èƒ½ç”¨äºå¤§å¯¹è±¡æˆ–é•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡ã€‚\n   - ç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç®¡ç†ï¼Œå†…å­˜åˆ†é…å’Œé‡Šæ”¾åœ¨å‡½æ•°è°ƒç”¨å’Œè¿”å›æ—¶è‡ªåŠ¨è¿›è¡Œã€‚\n\n## 3. ç”Ÿå‘½å‘¨æœŸ\n\n- **å †å†…å­˜**ï¼š\n   - å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç”±ç¨‹åºå‘˜æ§åˆ¶ï¼Œå¯ä»¥åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­**åŠ¨æ€åˆ†é…å’Œé‡Šæ”¾**ã€‚\n   - å¯¹è±¡åœ¨ä¸å†ä½¿ç”¨åéœ€è¦æ˜¾å¼é‡Šæ”¾ï¼Œå¦åˆ™ä¼šå¯¼è‡´**å†…å­˜æ³„æ¼**ã€‚\n- **æ ˆå†…å­˜**\n   - å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç”±å‡½æ•°è°ƒç”¨æ ˆå†³å®šï¼Œå½“å‡½æ•°è¿”å›æ—¶ï¼Œæ ˆä¸Šçš„æ‰€æœ‰**å±€éƒ¨å˜é‡è‡ªåŠ¨é”€æ¯**ã€‚\n   - ç”Ÿå‘½å‘¨æœŸçŸ­æš‚ä¸”æ˜ç¡®ï¼Œä¸éœ€è¦æ˜¾å¼é‡Šæ”¾ã€‚\n\n## 4. æ€§èƒ½\n\n- **å †å†…å­˜**ï¼š\n   - åŠ¨æ€åˆ†é…å’Œé‡Šæ”¾å†…å­˜çš„å¼€é”€è¾ƒå¤§ï¼Œå› ä¸ºéœ€è¦æŸ¥æ‰¾åˆé€‚çš„å†…å­˜å—ï¼Œå¹¶å¤„ç†ç¢ç‰‡åŒ–é—®é¢˜ã€‚\n   - å¸¸è§äºéœ€è¦çµæ´»ç®¡ç†å†…å­˜çš„å¤§å‹å¤æ‚åº”ç”¨ä¸­ã€‚\n- **æ ˆå†…å­˜**ï¼š\n   - æ›´é€‚åˆå°å‹ã€çŸ­ç”Ÿå‘½å‘¨æœŸçš„æ•°æ®ï¼Œå…·æœ‰æ›´é«˜çš„è®¿é—®é€Ÿåº¦ã€‚\n   - å†…å­˜åˆ†é…å’Œé‡Šæ”¾é€Ÿåº¦å¿«ï¼Œä»…é€šè¿‡ç§»åŠ¨æ ˆæŒ‡é’ˆå³å¯å®Œæˆã€‚\n\n## 5. æ€»ç»“\n\n- **å †å†…å­˜**ï¼šé€‚ç”¨äºåŠ¨æ€åˆ†é…çš„å¯¹è±¡ï¼Œç”Ÿå‘½å‘¨æœŸç”±ç¨‹åºå‘˜æ§åˆ¶ï¼Œç®¡ç†å¤æ‚ä½†çµæ´»ã€‚\n- **æ ˆå†…å­˜**ï¼šé€‚ç”¨äºå±€éƒ¨å˜é‡å’Œå‡½æ•°è°ƒç”¨ï¼Œç”Ÿå‘½å‘¨æœŸçŸ­æš‚ä¸”ç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç®¡ç†ï¼Œæ€§èƒ½é«˜ä½†ç©ºé—´æœ‰é™ã€‚\n\nç†è§£å †å’Œæ ˆçš„åŒºåˆ«å¯¹äºé«˜æ•ˆç¼–å†™å’Œè°ƒè¯•ä»£ç è‡³å…³é‡è¦ï¼Œå°¤å…¶æ˜¯æ¶‰åŠåˆ°å†…å­˜ç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–æ—¶ã€‚","70318b59291c5c7a9753ec880c8b32ad":"\n# äºŒå‰å †ä¸ä¼˜å…ˆçº§é˜Ÿåˆ—çš„å…³ç³»\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. äºŒå‰å †çš„æ¦‚å¿µ \n\n`äºŒå‰å †`åœ¨é€»è¾‘ä¸Šå…¶å®æ˜¯ä¸€ç§ç‰¹æ®Šçš„**äºŒå‰æ ‘ï¼ˆå®Œå…¨äºŒå‰æ ‘ï¼‰**ï¼Œåªä¸è¿‡å­˜å‚¨åœ¨`æ•°ç»„`é‡Œã€‚\n- ä¸€èˆ¬çš„é“¾è¡¨äºŒå‰æ ‘ï¼Œæˆ‘ä»¬æ“ä½œèŠ‚ç‚¹çš„`æŒ‡é’ˆ`\n- è€Œåœ¨æ•°ç»„é‡Œï¼Œæˆ‘ä»¬æŠŠ`æ•°ç»„ç´¢å¼•`ä½œä¸ºæŒ‡é’ˆ\n\nå³ï¼š`é“¾å¼å­˜å‚¨-é“¾è¡¨` å’Œ `é¡ºåºå­˜å‚¨-æ•°ç»„` ï¼Œå¦‚ä¸‹\n\n### 1.1. äºŒå‰å †çš„å­˜å‚¨ç¤ºæ„å›¾\n\n![image.png|645](https://832-1310531898.cos.ap-beijing.myqcloud.com/9e5d6abf73768f9a07bf376447096361.png)\n\n### 1.2. ä»¥å°é¡¶å †ä¸ºä¾‹\n\n 1ã€è¿™ç§`äºŒå‰æ ‘`æ•°æ®ç»“æ„é€šè¿‡ `æ•°ç»„` çš„æ–¹å¼å­˜å‚¨\n2ã€éœ€è¦ç»´æŠ¤æ¯ä¸ªèŠ‚ç‚¹çš„å…³ç³»ï¼Œå³å¤§äºæˆ–è€…å°äºå®ƒçš„ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œæ‰€ä»¥æœ‰`ä¸Šæµ®`å’Œ`ä¸‹æ²‰` ä¸¤ä¸ªæ“ä½œ\n3ã€å…³äºå¾ªç¯ï¼Œä½¿ç”¨ while æˆ–è€… é€’å½’ï¼Œæ¯”å¦‚ä¸€ç›´`ä¸‹æ²‰`åˆ°å…·ä½“ä»€ä¹ˆæ¡ä»¶ï¼Œå³é€’å½’ã€‚\n\n## 2. äºŒå‰å †ä¸ä¼˜å…ˆçº§é˜Ÿåˆ—çš„å…³ç³»\n\n**ä¼˜å…ˆçº§é˜Ÿåˆ—**è¿™ç§æ•°æ®ç»“æ„ï¼Œåœ¨`æ’å…¥æˆ–è€…åˆ é™¤`å…ƒç´ çš„æ—¶å€™ï¼Œå…ƒç´ ä¼š`è‡ªåŠ¨æ’åº`ï¼Œè¿™åº•å±‚çš„åŸç†å°±æ˜¯`äºŒå‰å †`çš„æ“ä½œï¼Œ==å°±æ˜¯è¿™å…³ç³»è€Œå·²ã€‚== \n\nä½†çœŸæ­£åœ¨ä¸€äº›ç®—æ³•é¢˜é‡Œï¼Œä¸å¯èƒ½å•ç‹¬è¿˜åœ¨å®ç°ä¸€ä¸ªäºŒå‰å †çš„æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥å¾€å¾€åªæ˜¯å®ç°éƒ¨åˆ†é€»è¾‘ï¼Œç”šè‡³éƒ½ä¸é‡‡ç”¨è¿™ç§å †æ•°æ®ç»“æ„ï¼Œå®Œå…¨ç‹¬ç«‹å®ç°ã€‚å¦‚ åˆå¹¶ K ä¸ªæœ‰åºé“¾è¡¨ ä¸­çš„ **ä¼˜å…ˆçº§å…¥é˜Ÿå‡½æ•°**ï¼Œå…¶å®å’Œ`äºŒå‰å †`æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚\n\n```javascript\n// ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œå€¼æœ€å°çš„å…ˆå…¥é˜Ÿï¼Œå³ä¼˜å…ˆçº§æœ€é«˜\nlet q = [];\n// ä¼˜å…ˆé˜Ÿåˆ—çš„ã€å…¥é˜Ÿå‡½æ•°ã€‘ï¼Œå€¼æœ€å°çš„å…ˆå…¥é˜Ÿåˆ—\nlet enqueue = (node) => {\n\tif (q.length === 0) {\n\t\tq.push(node);\n\t} else {\n\t\t// æ˜¯å¦æ’å…¥äº†\n\t\tlet added = false;\n\t\tfor (let i = 0; i < q.length; i++) {\n\t\t\tif (node.val < q[i].val) {\n\t\t\t\tq.splice(i, 0, node)\n\t\t\t\tadded = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t// æ²¡æ‰¾åˆ°åˆé€‚çš„æ’å…¥ä½ç½®ï¼Œåˆ™æ·»åŠ åˆ°æœ«å°¾\n\t\tif (!added) {\n\t\t\tq.push(node);\n\t\t}\n\t}\n}\n```\n\n> å½“ç„¶ï¼Œè¿˜æ˜¯å› ä¸º `JavaScript` æ²¡æœ‰å¯¹åº”çš„å…¬å…±æ•°æ®ç»“æ„åº“ã€‚å¯¹åº” Java å°±æœ‰ `PriorityQueue`\n\n## 3. æ€»ç»“\n\n- `äºŒå‰å †`å°±æ˜¯ä¸€ç§ `å®Œå…¨äºŒå‰æ ‘`ï¼Œæ‰€ä»¥é€‚åˆå­˜å‚¨åœ¨`æ•°ç»„`ä¸­ï¼Œè€Œä¸”äºŒå‰å †æ‹¥æœ‰ä¸€äº›ç‰¹æ®Šæ€§è´¨ã€‚\n- äºŒå‰å †çš„æ“ä½œå¾ˆç®€å•ï¼Œä¸»è¦å°±æ˜¯ `ä¸Šæµ®å’Œä¸‹æ²‰`ï¼Œæ¥ç»´æŠ¤å †çš„æ€§è´¨ï¼ˆ`å †æœ‰åº`ï¼‰\n- **ä¼˜å…ˆçº§é˜Ÿåˆ—**æ˜¯åŸºäº`äºŒå‰å †`å®ç°çš„ï¼Œä¸»è¦æ“ä½œæ˜¯`æ’å…¥å’Œåˆ é™¤`ã€‚\n\t- æ’å…¥æ˜¯**å…ˆæ’åˆ°æœ€å**ï¼Œç„¶å**ä¸Šæµ®åˆ°æ­£ç¡®ä½ç½®**\n\t- åˆ é™¤æ˜¯ **è°ƒæ¢ä½ç½®åå†åˆ é™¤**ï¼Œç„¶å**ä¸‹æ²‰**åˆ°æ­£ç¡®ä½ç½®\n","db9d964fab6053aa9852716aad3eec48":"\n# å›¾ç»“æ„ç¯‡\n\n\n`#2024/08/11` `#ç®—æ³•` `#æ•°æ®ç»“æ„` \n\n","1264de7ecdfb5513a750e7879af106ff":"\n# å›¾çš„åŸºæœ¬æ¦‚å¿µ\n\n`#å›¾` `#æ•°æ®ç»“æ„/å›¾`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. é“¾è¡¨ã€æ ‘ã€å›¾ä¹‹é—´çš„å…³ç³» \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240918222145.png)\n\nä¸‰ç§å…³ç³»\n- çº¿æ€§å…³ç³»ï¼šé“¾è¡¨\n- åˆ†æ²»å…³ç³»ï¼šäºŒå‰æ ‘\n- ç½‘ç»œå…³ç³»ï¼šå›¾\n\n## 2. æœ‰å‘å›¾å’Œæ— å‘å›¾\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240918222229.png)\n\n## 3. è¿é€šå›¾å’Œéè¿é€šå›¾\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240918222332.png)\n\n## 4. æœ‰æƒå›¾å’Œæ— æƒå›¾\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240918222352.png)\n\n## 5. å›¾çš„è¡¨ç¤ºï¼š é‚»æ¥çŸ©é˜µ\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240918222447.png)\n\n## 6. å›¾çš„è¡¨ç¤ºï¼š é‚»æ¥è¡¨\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240918222518.png)\n\n## 7. å›¾çš„ä½¿ç”¨åœºæ™¯\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240923061833.png)\n","35d0db45e9795e11a5e99a3b161dd68c":"\n# å›¾çš„å®ç°ï¼šJavaScript æè¿°\n\n`#2024/09/15` `#ç®—æ³•` `#ç®—æ³•/å›¾` \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. åŸºæœ¬æ¦‚å¿µ  \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240915080005.png)\n\n> ä¸Šå›¾ä¸­ï¼Œæ¦‚æ‹¬äº†å›¾æœ€åŸºæœ¬çš„æ¦‚å¿µ\n\n## 2. å›¾ä¸æ ‘çš„åŒºåˆ«\n\n- åœ¨**æ ‘ç»“æ„**ä¸­ï¼Œåªå…è®¸çˆ¶èŠ‚ç‚¹æŒ‡å‘å­èŠ‚ç‚¹ï¼Œä¸å­˜åœ¨å­èŠ‚ç‚¹æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„æƒ…å†µï¼Œå­èŠ‚ç‚¹ä¹‹é—´ä¹Ÿä¸ä¼šäº’ç›¸é“¾æ¥ï¼›\n- è€Œ**å›¾**ä¸­æ²¡æœ‰é‚£ä¹ˆå¤šé™åˆ¶ï¼ŒèŠ‚ç‚¹ä¹‹é—´å¯ä»¥**ç›¸äº’æŒ‡å‘**ï¼Œå½¢æˆå¤æ‚çš„ç½‘ç»œç»“æ„ã€‚\n\n## 3. å›¾çš„è¡¨ç¤ºæ–¹å¼ï¼šé‚»æ¥è¡¨ +  é‚»æ¥çŸ©é˜µ\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240915081034.png)\n\n### 3.1. èŠ‚ç‚¹ç±»å‹ä¸æ˜¯ numberï¼Œè€Œæ˜¯å…¶ä»–å¤æ‚ç±»å‹æ€ä¹ˆåŠï¼Ÿ\n\nå¾ˆç®€å•ï¼Œä½¿ç”¨å“ˆå¸Œ\n- id åš key \n- value ä¸ºå…¶ä»–å¤æ‚æ•°æ®ç»“æ„\n\n### 3.2. ä¸¤ç§å­˜å‚¨æ–¹å¼çš„åŒºåˆ«\n\n#### 3.2.1. å¤æ‚åº¦ä¸åŒ\n\nå¯¹äºä¸€å¹…æœ‰Â `V`Â ä¸ªèŠ‚ç‚¹ï¼Œ`E`Â æ¡è¾¹çš„å›¾\n- é‚»æ¥è¡¨çš„ç©ºé—´å¤æ‚åº¦æ˜¯Â `O(V + E)`\n- é‚»æ¥çŸ©é˜µçš„ç©ºé—´å¤æ‚åº¦æ˜¯Â `O(V^2)`ã€‚\n\næ‰€ä»¥å¦‚æœä¸€å¹…å›¾çš„Â `E`Â è¿œå°äºÂ `V^2`ï¼ˆ**ç¨€ç–å›¾**ï¼‰ï¼Œé‚£ä¹ˆé‚»æ¥è¡¨ä¼šæ¯”é‚»æ¥çŸ©é˜µèŠ‚çœç©ºé—´ï¼Œåä¹‹ï¼Œå¦‚æœÂ `E`Â æ¥è¿‘Â `V^2`ï¼ˆç¨ å¯†å›¾ï¼‰ï¼ŒäºŒè€…å°±å·®ä¸å¤šäº†ã€‚\n\n#### 3.2.2. é‚»æ¥çŸ©é˜µæ˜¯**æ•°å­¦çš„çŸ©é˜µ** \n\né‚»æ¥çŸ©é˜µçš„æœ€å¤§ä¼˜åŠ¿åœ¨äºï¼Œ**çŸ©é˜µæ˜¯ä¸€ä¸ªå¼ºæœ‰åŠ›çš„æ•°å­¦å·¥å…·**ï¼Œå›¾çš„ä¸€äº›éšæ™¦æ€§è´¨å¯ä»¥å€ŸåŠ©ç²¾å¦™çš„çŸ©é˜µè¿ç®—å±•ç°å‡ºæ¥ã€‚\n\n## 4. æœ‰å‘åŠ æƒå›¾\n\n- å¦‚æœæ˜¯é‚»æ¥è¡¨è¡¨ç¤º\n\t- ä¸ä»…ä»…å­˜å‚¨æŸä¸ªèŠ‚ç‚¹Â `x`Â çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹\n\t- è¿˜å­˜å‚¨Â `x`Â åˆ°æ¯ä¸ªé‚»å±…çš„æƒé‡\n- å¦‚æœæ˜¯é‚»æ¥çŸ©é˜µï¼Œ`matrix[x][y]`Â ä¸å†æ˜¯å¸ƒå°”å€¼ï¼Œè€Œæ˜¯ä¸€ä¸ª int å€¼\n\t- 0 è¡¨ç¤ºæ²¡æœ‰è¿æ¥\n\t- å…¶ä»–å€¼ï¼ˆé 0ï¼‰è¡¨ç¤ºæƒé‡\n\n```javascript\n// é‚»æ¥è¡¨\n// graph[x] å­˜å‚¨ x çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ä»¥åŠå¯¹åº”çš„æƒé‡\nfunction Edge(to, weight) {\n    this.to = to;\n    this.weight = weight;\n}\n// æ³¨æ„ Edge\nvar graph: Edge[][] = [];\n\n// é‚»æ¥çŸ©é˜µ\n// matrix[x][y] è®°å½• x æŒ‡å‘ y çš„è¾¹çš„æƒé‡ï¼Œ0 è¡¨ç¤ºä¸ç›¸é‚»\nvar matrix: number[][] = [];\n```\n\n## 5. æ— å‘å›¾\n\næ‰€è°“**æ— å‘**ï¼Œå³**åŒå‘**ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240915082052.png)\n\n- é‚»æ¥çŸ©é˜µè¡¨ç¤ºæ— å‘å›¾ï¼šå¦‚æœè¿æ¥æ— å‘å›¾ä¸­çš„èŠ‚ç‚¹Â `x`Â å’ŒÂ `y`ï¼ŒæŠŠÂ `matrix[x][y]`Â å’ŒÂ `matrix[y][x]`Â éƒ½å˜æˆÂ `true`Â ä¸å°±è¡Œäº†ï¼›\n- é‚»æ¥è¡¨è¡¨ç¤ºæ— å‘å›¾ï¼š\n\t- åœ¨Â `x`Â çš„é‚»å±…åˆ—è¡¨é‡Œæ·»åŠ Â `y`\n\t- åŒæ—¶åœ¨Â `y`Â çš„é‚»å±…åˆ—è¡¨é‡Œæ·»åŠ Â `x`\n\n## 6. å›¾ Graph ç±»å®šä¹‰\n\n### 6.1. Graph æ¡†æ¶\n\n```javascript\nclass Graph {\n  /**\n   * @description æ·»åŠ ä¸€æ¡è¾¹\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   * @param {number} weight æƒé‡\n   */\n  addEdge(from, to, weight) {}\n\n  /**\n   * @description ç§»é™¤ä¸€æ¡è¾¹\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  removeEdge(from, to) {}\n\n  /**\n   * @description åˆ¤æ–­æ˜¯å¦æœ‰æŸæ¡è¾¹,å³æ˜¯å¦æœ‰ä» from åˆ° to çš„è¾¹\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  hasEdge(from, to) {}\n\n  /**\n   * @description è·å–æŸæ¡è¾¹çš„æƒé‡\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  weight(from, to) {}\n\n  /**\n   * @description è·å–æŸä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹å’Œå¯¹åº”æƒé‡\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  neighbors(v) {}\n\n  // è¿”å›èŠ‚ç‚¹æ€»æ•°\n  size() {}\n}\n\n```\n\n### 6.2. æœ‰å‘åŠ æƒå›¾ï¼ˆé‚»æ¥è¡¨å®ç°ï¼‰\n\n```javascript\n// æœ‰å‘åŠ æƒå›¾ï¼ˆé‚»æ¥è¡¨å®ç°ï¼‰\nclass Graph {\n  // å­˜å‚¨ç›¸é‚»èŠ‚ç‚¹åŠè¾¹çš„æƒé‡\n  // n ä¸ºèŠ‚ç‚¹æ•°é‡\n  constructor(n) {\n    this.graph = Array.from({ length: n }, () => []);\n  }\n\n  /**\n   * @description æ·»åŠ ä¸€æ¡è¾¹\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   * @param {number} weight æƒé‡\n   */\n  addEdge(from, to, weight) {\n    this.graph[from].push({ node: to, weight });\n  }\n\n  /**\n   * @description ç§»é™¤ä¸€æ¡è¾¹\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  removeEdge(from, to) {\n    this.graph[from] = this.graph[from].filter((edge) => edge.node !== to);\n  }\n\n  /**\n   * @description åˆ¤æ–­æ˜¯å¦æœ‰æŸæ¡è¾¹,å³æ˜¯å¦æœ‰ä» from åˆ° to çš„è¾¹\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  hasEdge(from, to) {\n    return this.graph[from].some((edge) => edge.node === to);\n  }\n\n  /**\n   * @description è·å–æŸæ¡è¾¹çš„æƒé‡\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  weight(from, to) {\n    return this.graph[from].find((edge) => edge.node === to)?.weight;\n  }\n\n  /**\n   * @description è·å–æŸä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹å’Œå¯¹åº”æƒé‡\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  neighbors(v) {\n    return this.graph[v];\n  }\n\n  // è¿”å›èŠ‚ç‚¹æ€»æ•°\n  size() {\n    return this.graph.length;\n  }\n}\n\n```\n\n### 6.3. æœ‰å‘åŠ æƒå›¾ï¼ˆé‚»æ¥çŸ©é˜µå®ç°ï¼‰\n\n```javascript\n// æœ‰å‘åŠ æƒå›¾ï¼ˆé‚»æ¥çŸ©é˜µå®ç°ï¼‰\nclass Graph {\n  // n ä¸ºèŠ‚ç‚¹æ•°é‡\n  constructor(n) {\n    // init matrix\n    this.matrix = Array.from({ length: n }, () =>\n      Array.from({ length: n }, () => 0),\n    );\n  }\n\n  /**\n   * @description æ·»åŠ ä¸€æ¡è¾¹\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   * @param {number} weight æƒé‡\n   */\n  addEdge(from, to, weight) {\n    this.matrix[from][to] = weight;\n  }\n\n  /**\n   * @description ç§»é™¤ä¸€æ¡è¾¹\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  removeEdge(from, to) {\n    this.matrix[from][to] = 0;\n  }\n\n  /**\n   * @description åˆ¤æ–­æ˜¯å¦æœ‰æŸæ¡è¾¹,å³æ˜¯å¦æœ‰ä» from åˆ° to çš„è¾¹\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  hasEdge(from, to) {\n    return this.matrix[from][to] > 0;\n  }\n\n  /**\n   * @description è·å–æŸæ¡è¾¹çš„æƒé‡\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  weight(from, to) {\n    return this.matrix[from][to];\n  }\n\n  /**\n   * @description è·å–æŸä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹å’Œå¯¹åº”æƒé‡\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  neighbors(v) {\n    const res = [];\n    for (let i = 0; i < this.matrix[v].length; i++) {\n      if (this.matrix[v][i] > 0) {\n        res.push({ node: i, weight: this.matrix[v][i] });\n      }\n    }\n    return res;\n  }\n\n  // è¿”å›èŠ‚ç‚¹æ€»æ•°\n  size() {\n    return this.matrix.length;\n  }\n}\n\n```\n\n### 6.4. æ— å‘åŠ æƒå›¾ï¼ˆé‚»æ¥è¡¨å®ç°ï¼‰\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240923063420.png)\n\nåŸºäº [#æœ‰å‘åŠ æƒå›¾ï¼ˆé‚»æ¥è¡¨å®ç°ï¼‰](/post/35d0db45e9795e11a5e99a3b161dd68c.html#æœ‰å‘åŠ æƒå›¾ï¼ˆé‚»æ¥è¡¨å®ç°ï¼‰) åªéœ€è¦æ·»åŠ ä»¥ä¸‹ä¸¤è¡Œä»£ç å³å¯\n\n```javascript hl:17,27\n// æ— å‘åŠ æƒå›¾ï¼ˆé‚»æ¥è¡¨å®ç°ï¼‰\nclass Graph {\n  // å­˜å‚¨ç›¸é‚»èŠ‚ç‚¹åŠè¾¹çš„æƒé‡\n  // n ä¸ºèŠ‚ç‚¹æ•°é‡\n  constructor(n) {\n    this.graph = Array.from({ length: n }, () => []);\n  }\n\n  /**\n   * @description æ·»åŠ ä¸€æ¡è¾¹\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   * @param {number} weight æƒé‡\n   */\n  addEdge(from, to, weight) {\n    this.graph[from].push({ node: to, weight });\n    this.graph[to].push({ node: from, weight });\n  }\n\n  /**\n   * @description ç§»é™¤ä¸€æ¡è¾¹\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  removeEdge(from, to) {\n    this.graph[from] = this.graph[from].filter((edge) => edge.node !== to);\n    this.graph[to] = this.graph[to].filter((edge) => edge.node !== from);\n  }\n\n  /**\n   * @description åˆ¤æ–­æ˜¯å¦æœ‰æŸæ¡è¾¹,å³æ˜¯å¦æœ‰ä» from åˆ° to çš„è¾¹\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  hasEdge(from, to) {\n    return this.graph[from].some((edge) => edge.node === to);\n  }\n\n  /**\n   * @description è·å–æŸæ¡è¾¹çš„æƒé‡\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  weight(from, to) {\n    return this.graph[from].find((edge) => edge.node === to)?.weight;\n  }\n\n  /**\n   * @description è·å–æŸä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹å’Œå¯¹åº”æƒé‡\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  neighbors(v) {\n    return this.graph[v];\n  }\n\n  // è¿”å›èŠ‚ç‚¹æ€»æ•°\n  size() {\n    return this.graph.length;\n  }\n}\n\n```\n\n### 6.5. æ— å‘åŠ æƒå›¾ï¼ˆé‚»æ¥çŸ©é˜µå®ç°ï¼‰\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240923063024.png)\n\nåœ¨ [#6.3. æœ‰å‘åŠ æƒå›¾ï¼ˆé‚»æ¥çŸ©é˜µå®ç°ï¼‰](/post/35d0db45e9795e11a5e99a3b161dd68c.html#63-æœ‰å‘åŠ æƒå›¾ï¼ˆé‚»æ¥çŸ©é˜µå®ç°ï¼‰)ä¸­æ·»åŠ ä¸¤è¡Œä»£ç å³å¯ï¼Œå¦‚ä¸‹ï¼š\n\n```javascript hl:19,29\n// æ— å‘åŠ æƒå›¾ï¼ˆé‚»æ¥çŸ©é˜µå®ç°ï¼‰\nclass Graph {\n  // n ä¸ºèŠ‚ç‚¹æ•°é‡\n  constructor(n) {\n    // init matrix\n    this.matrix = Array.from({ length: n }, () =>\n      Array.from({ length: n }, () => 0),\n    );\n  }\n\n  /**\n   * @description æ·»åŠ ä¸€æ¡è¾¹\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   * @param {number} weight æƒé‡\n   */\n  addEdge(from, to, weight) {\n    this.matrix[from][to] = weight;\n    this.matrix[to][from] = weight;\n  }\n\n  /**\n   * @description ç§»é™¤ä¸€æ¡è¾¹\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  removeEdge(from, to) {\n    this.matrix[from][to] = 0;\n    this.matrix[to][from] = 0;\n  }\n\n  /**\n   * @description åˆ¤æ–­æ˜¯å¦æœ‰æŸæ¡è¾¹,å³æ˜¯å¦æœ‰ä» from åˆ° to çš„è¾¹\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  hasEdge(from, to) {\n    return this.matrix[from][to] > 0;\n  }\n\n  /**\n   * @description è·å–æŸæ¡è¾¹çš„æƒé‡\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  weight(from, to) {\n    return this.matrix[from][to];\n  }\n\n  /**\n   * @description è·å–æŸä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹å’Œå¯¹åº”æƒé‡\n   * @param {string} from èµ·å§‹èŠ‚ç‚¹\n   * @param {string} to ç›®æ ‡èŠ‚ç‚¹\n   */\n  neighbors(v) {\n    const res = [];\n    for (let i = 0; i < this.matrix[v].length; i++) {\n      if (this.matrix[v][i] > 0) {\n        res.push({ node: i, weight: this.matrix[v][i] });\n      }\n    }\n    return res;\n  }\n\n  // è¿”å›èŠ‚ç‚¹æ€»æ•°\n  size() {\n    return this.matrix.length;\n  }\n}\n\n```\n\n## 7. å‚è€ƒ\n\n- https://labuladong.online/algo/data-structure-basic/graph-basic/\n- https://labuladong.online/algo/data-structure-basic/graph-traverse-basic/\n\n","33128d40026658129416f6541f206235":"\n# å›¾çš„ä¸¤ç§éå†æ–¹å¼ï¼šDFS å’Œ BFS\n\n`#2024/09/15` `#ç®—æ³•` `#ç®—æ³•/å›¾`  `#å›¾DFS` `#å›¾BFS`  \n\n---\n\nå›¾çš„éå†å°±æ˜¯Â [å¤šå‰æ ‘éå†](https://labuladong.online/algo/data-structure-basic/n-ary-tree-traverse-basic/)Â çš„å»¶ä¼¸ã€‚ä¸»è¦çš„éå†æ–¹å¼è¿˜æ˜¯æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰å’Œå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œæ ‘ç»“æ„ä¸­ä¸å­˜åœ¨ç¯ï¼Œè€Œå›¾ç»“æ„ä¸­å¯èƒ½å­˜åœ¨ç¯ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ ‡è®°éå†è¿‡çš„èŠ‚ç‚¹ï¼Œé¿å…éå†å‡½æ•°åœ¨ç¯ä¸­æ­»å¾ªç¯ã€‚\n\nå…·ä½“æ¥è¯´ï¼Œéå†å›¾çš„æ‰€æœ‰ã€ŒèŠ‚ç‚¹ã€æ—¶ï¼Œéœ€è¦Â `visited`Â æ•°ç»„åœ¨å‰åºä½ç½®æ ‡è®°èŠ‚ç‚¹ï¼›\n\nå¦‚æœé¢˜ç›®è¯´è¿™å¹…å›¾ä¸å­˜åœ¨ç¯ï¼Œé‚£ä¹ˆå›¾çš„éå†å°±å®Œå…¨ç­‰åŒäºå¤šå‰æ ‘çš„éå†ã€‚\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ€»ç»“ \n\n- **å›¾**çš„éå†è¿˜æ˜¯**å¤šå‰æ ‘**çš„å»¶ä¼¸ï¼Œåªä¸è¿‡å¤šäº†ä¸€ä¸ª Â `visited`Â æ•°ç»„\n- éå†å›¾çš„æ‰€æœ‰ã€Œè·¯å¾„ã€æ—¶ï¼Œéœ€è¦Â `onPath`Â æ•°ç»„åœ¨**å‰åºä½ç½®**æ ‡è®°èŠ‚ç‚¹ï¼Œåœ¨**ååºä½ç½®**æ’¤é”€æ ‡è®°\n\n## 2. DFS éå†\n\n### 2.1. DFS éå†å›¾çš„æ‰€æœ‰èŠ‚ç‚¹ï¼šä½¿ç”¨ visited\n\nå¯¹æ¯”å¤šå‰æ ‘çš„éå†ï¼Œå¾ˆå¿«èƒ½ç†è§£ï¼Œå¦‚ä¸‹\n\n#### 2.1.1. å¤šå‰æ ‘ä¸å›¾çš„ DFS éå†åŒºåˆ«\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240915191951.png)\n\n#### 2.1.2. å¤æ‚åº¦åˆ†æ\n\nä¸ºä»€ä¹ˆå›¾çš„æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰éå†çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(E + V)`ï¼Œ å…¶ä¸­ `E` æ˜¯è¾¹çš„æ•°é‡ï¼Œ`V` æ˜¯é¡¶ç‚¹çš„æ•°é‡ã€‚\n\n1. éå†æ‰€æœ‰é¡¶ç‚¹ï¼šO(V)\n\t- åœ¨DFSä¸­ï¼Œæˆ‘ä»¬éœ€è¦è®¿é—®æ¯ä¸ªé¡¶ç‚¹è‡³å°‘ä¸€æ¬¡ã€‚\n2. æ¢ç´¢æ‰€æœ‰è¾¹ï¼šO(E)\n\t- å¯¹äºæ¯ä¸ªé¡¶ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦æ¢ç´¢ä¸ä¹‹ç›¸è¿çš„æ‰€æœ‰è¾¹ã€‚\n\t- åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ¯æ¡è¾¹æœ€å¤šè¢«è€ƒè™‘ä¸¤æ¬¡ï¼ˆå¯¹äºæ— å‘å›¾ï¼‰æˆ–ä¸€æ¬¡ï¼ˆå¯¹äºæœ‰å‘å›¾ï¼‰\n\t- å› æ­¤ï¼Œæ¢ç´¢æ‰€æœ‰è¾¹éœ€è¦ `O(E)` çš„æ—¶é—´ã€‚\n3. åˆå¹¶å¤æ‚åº¦\n\t- å°†è¿™ä¸¤éƒ¨åˆ†ç»„åˆèµ·æ¥ï¼Œæˆ‘ä»¬å¾—åˆ°æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(V + E)`ã€‚\n4. å¯¹äº**é‚»æ¥è¡¨**è¡¨ç¤ºçš„å›¾\n   - è®¿é—®æ¯ä¸ªé¡¶ç‚¹ï¼šO(V)\n   - å¯¹äºæ¯ä¸ªé¡¶ç‚¹ï¼Œæˆ‘ä»¬éå†å…¶é‚»æ¥åˆ—è¡¨ã€‚æ‰€æœ‰é‚»æ¥åˆ—è¡¨çš„æ€»é•¿åº¦ç­‰äºè¾¹çš„æ•°é‡ï¼ˆå¯¹äºæ— å‘å›¾æ˜¯`2E`ï¼Œå¯¹äºæœ‰å‘å›¾æ˜¯`E`ï¼‰ã€‚å› æ­¤ï¼Œéå†æ‰€æœ‰é‚»æ¥åˆ—è¡¨çš„æ€»æ—¶é—´æ˜¯ `O(E)`ã€‚\n- å¯¹äº**é‚»æ¥çŸ©é˜µ**è¡¨ç¤ºçš„å›¾\n   - è®¿é—®æ¯ä¸ªé¡¶ç‚¹ï¼šO(V)\n   - å¯¹äºæ¯ä¸ªé¡¶ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥å®ƒä¸æ‰€æœ‰å…¶ä»–é¡¶ç‚¹æ˜¯å¦ç›¸è¿ï¼Œè¿™éœ€è¦ O(V) æ—¶é—´ã€‚\n   - æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ **O(V^2)**ï¼Œä½†æ˜¯æˆ‘ä»¬é€šå¸¸è¡¨ç¤ºä¸º **O(V + E)**ï¼Œå› ä¸ºåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼ˆå®Œå…¨å›¾ï¼‰ï¼ŒE = V^2ã€‚\n\n#### 2.1.3. ä¸ºä»€ä¹ˆä¸æ˜¯ `O(V * E)`ï¼Ÿ\n\næ‚¨å¯èƒ½ä¼šæƒ³ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯ O(V * E)ï¼Œå› ä¸ºæˆ‘ä»¬ä¼¼ä¹å¯¹æ¯ä¸ªé¡¶ç‚¹éƒ½è¦æ£€æŸ¥æ‰€æœ‰è¾¹ã€‚å®é™…ä¸Šï¼ŒDFS ä¸ä¼šå¯¹æ¯ä¸ªé¡¶ç‚¹éƒ½æ£€æŸ¥æ‰€æœ‰è¾¹ã€‚æ¯æ¡è¾¹åªä¼šè¢«æ£€æŸ¥æœ‰é™æ¬¡ï¼ˆé€šå¸¸æ˜¯ä¸€æ¬¡æˆ–ä¸¤æ¬¡ï¼‰ï¼Œè€Œä¸æ˜¯ V æ¬¡ã€‚\n\n> å› ä¸ºæœ‰ `visited æ•°ç»„`\n\n#### 2.1.4. å¤šå‰æ ‘çš„å¤æ‚åº¦ä¸ºä»€ä¹ˆæ˜¯ `O(N)`ï¼Œä¸ç®—è¾¹çš„æ•°é‡ï¼Ÿ\n\n- å…¶å®äºŒå‰æ ‘/å¤šå‰æ ‘çš„éå†å‡½æ•°ï¼Œä¹Ÿè¦ç®—ä¸Šè¾¹çš„æ•°é‡ï¼Œåªä¸è¿‡å¯¹äºæ ‘ç»“æ„æ¥è¯´ï¼Œè¾¹çš„æ•°é‡å’ŒèŠ‚ç‚¹çš„æ•°é‡æ˜¯è¿‘ä¼¼ç›¸ç­‰çš„ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯Â `O(N + N) = O(N)`ã€‚\n\n### 2.2. éå†æ‰€æœ‰çš„è·¯å¾„ï¼šä½¿ç”¨ onPath\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240915202726.png)\n\n---\n\n\n```js hl:15,16,24,33\n/**\n * @description éå†å›¾çš„æ‰€æœ‰è·¯å¾„\n * @param {*} graph å›¾ç»“æ„ï¼Œä½¿ç”¨é‚»æ¥è¡¨å®ç°\n * @param {*} src èµ·å§‹èŠ‚ç‚¹ï¼Œå³éå†çš„èµ·ç‚¹\n * @param {*} dest ç›®æ ‡èŠ‚ç‚¹ï¼Œå³éå†çš„ç»ˆç‚¹\n * @returns æ‰“å°æ‰€æœ‰çš„è·¯å¾„\n */\nfunction traverseAllPath(graph, src, dest) {\n  // onPath æ•°ç»„ç”¨äºè®°å½•æ­£åœ¨éå†çš„èŠ‚ç‚¹æ˜¯å¦å·²ç»åœ¨è·¯å¾„ä¸Šï¼Œé¿å…æˆç¯\n  var onPath = new Array(graph.size()).fill(false);\n  // path æ•°ç»„ç”¨äºè®°å½•éå†æ‰€æœ‰çš„è·¯å¾„\n  var path = [];\n  var traverse = function (graph, src, dest) {\n    // base caseï¼š\n    // src < 0 è¯´æ˜èŠ‚ç‚¹ç¼–å·ä¸åˆæ³•\n    // src >= graph.size() è¯´æ˜èŠ‚ç‚¹ç¼–å·ä¸åˆæ³•\n    if (src < 0 || src >= graph.size()) {\n      return;\n    }\n    // é˜²æ­¢æ­»å¾ªç¯ï¼ˆæˆç¯ï¼‰ï¼Œè¯´æ˜å½“å‰èŠ‚ç‚¹å·²ç»åœ¨è·¯å¾„ä¸Š\n    if (onPath[src]) {\n      return;\n    }\n    // å‰åºä½ç½®:æ›´æ–°onpath å’Œ src\n    onPath[src] = true;\n    path.push(src);\n    if (src === dest) {\n      console.log(\"find path: \" + path);\n    }\n    for (var e of graph.neighbors(src)) {\n      traverse(graph, e.to, dest);\n    }\n    // ååºä½ç½®:å›æº¯\n    path.pop();\n    onPath[src] = false;\n  };\n\n  traverse(graph, src, dest);\n\n  return path;\n}\n```\n\n### 2.3. å‰ªæï¼šåŒæ—¶åˆ©ç”¨Â `visited`Â å’ŒÂ `onPath`Â \n\nåé¢æœ‰ä¹ é¢˜éœ€è¦åŒæ—¶åˆ©ç”¨Â `visited`Â å’ŒÂ `onPath`Â æ•°ç»„æ¥è¿›è¡Œ**å‰ªæ**ä¼˜åŒ–å¤æ‚åº¦\n\n## 3. BFS éå†\n\n- BFS ç®—æ³•ä¸€èˆ¬åªç”¨æ¥å¯»æ‰¾é‚£æ¡**æœ€çŸ­è·¯å¾„**ï¼Œä¸ä¼šç”¨æ¥æ±‚**æ‰€æœ‰è·¯å¾„**\n- Â BFS ç®—æ³•ä¸€å±‚ä¸€å±‚å‘å››å‘¨æ‰©æ•£çš„é€»è¾‘ï¼Œç¬¬ä¸€æ¬¡é‡åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œå¿…ç„¶å°±æ˜¯**æœ€çŸ­è·¯å¾„**\n\n### 3.1. å¤šå‰æ ‘çš„å±‚æ¬¡éå†ä¸å›¾çš„ BFS éå†å¯¹æ¯”ï¼šä¸è®°å½•æ­¥æ•°\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240915203402.png)\n\n### 3.2. å¤šå‰æ ‘çš„å±‚æ¬¡éå†ä¸å›¾çš„ BFS éå†å¯¹æ¯”ï¼šè®°å½•æ­¥æ•°\n\n> ä¸‹é¢çš„å›¾æ˜¯**æ— æƒå›¾**\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240915204210.png)\n\n### 3.3. å¤šå‰æ ‘çš„å±‚æ¬¡éå†ä¸æœ‰å‘å›¾çš„ BFS éå†å¯¹æ¯”ï¼šè®°å½•æ­¥æ•°\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240915205022.png)\n\n## 4. å‚è€ƒ\n\nhttps://labuladong.online/algo/data-structure-basic/graph-traverse-basic/\n","bb6527e3f4ba56038950a5293e1d92ba":"\n# å‰è¨€\n\n`#ç®—æ³•` `#ç®—æ³•/æ•°æ®ç»“æ„ç®—æ³•`  `#2024/08/11`\n\nåŸºç¡€æ•°æ®ç»“æ„ç›¸å…³çš„ç®—æ³•ï¼ŒåŒ…æ‹¬ä»¥ä¸‹æ•°æ®\n\n- æ•°ç»„\n- é“¾è¡¨\n\t- å•é“¾è¡¨\n\t- åŒå‘é“¾è¡¨\n- é˜Ÿåˆ—\n\t- å•è°ƒé˜Ÿåˆ—\n- æ ˆ\n\t- å•è°ƒæ ˆ\n\n","e855797abd84512faeb527138cd8c735":"\n# å•è°ƒåˆ—é˜Ÿç®—æ³•\n\n\n`#leetcode`  `#2024/08/11`  `#ç®—æ³•/å•è°ƒåˆ—é˜Ÿ`  `#ç®—æ³•/æ•°æ®ç»“æ„ç®—æ³•`   \n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å®šä¹‰ \n\n**é˜Ÿåˆ—**ä¸­çš„å…ƒç´ å…¨éƒ½æ˜¯**å•è°ƒé€’å¢ï¼ˆæˆ–é€’å‡ï¼‰çš„** \n\n## 2. ç”¨é€”\n\n- å®ƒå¯ä»¥å¿«é€Ÿ**ç¡®å®šæ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§æˆ–æœ€å°å€¼**\n\t- **å•è°ƒé˜Ÿåˆ—**ç»“åˆ**æ»‘åŠ¨çª—å£æ–¹æ³•**å¯ä»¥åœ¨`O(1)`æ—¶é—´å†…è®¡ç®—å½“å‰çª—å£ä¸­çš„**æœ€å¤§å€¼æˆ–æœ€å°å€¼**\n\t- åŒæ—¶ä¿æŒé˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºçš„ç‰¹æ€§\n\n## 3. å•è°ƒé€’å‡é˜Ÿåˆ—çš„å®ç°\n\nå…ˆçœ‹çœ‹ **æ™®é€šçš„é˜Ÿåˆ—çš„æ ‡å‡† API**\n\n```javascript\n// æ™®é€šçš„é˜Ÿåˆ—çš„æ ‡å‡† API\nclass Queue {\n  // enqueue æ“ä½œï¼Œåœ¨é˜Ÿå°¾åŠ å…¥å…ƒç´  n\n  push(n) {}\n\n  // dequeue æ“ä½œï¼Œåˆ é™¤é˜Ÿå¤´å…ƒç´ \n  pop() {}\n}\n```\n\n**å•è°ƒé€’å‡é˜Ÿåˆ—çš„æ ‡å‡† API**\n\n```javascript \n// å•è°ƒé€’å‡é˜Ÿåˆ—çš„æ ‡å‡† API\nclass MonotonicQueue {\n  // åœ¨é˜Ÿå°¾æ·»åŠ å…ƒç´  n\n  push(n) {}\n\n  // è¿”å›é˜Ÿå¤´å…ƒç´ \n  max() {}\n\n  // åˆ é™¤é˜Ÿå¤´å…ƒç´ \n  pop() {}\n}\n```\n\nä¸‹é¢æ˜¯**å…·ä½“å®ç°**\n\n```javascript  hl:14,32,26\n// å•è°ƒé€’å¢é˜Ÿåˆ—çš„æ ‡å‡† API\nclass MonotonicQueue {\n  constructor() {\n    // ç»´æŠ¤å…¶ä¸­çš„å…ƒç´ è‡ªå°¾éƒ¨åˆ°å¤´éƒ¨å•è°ƒé€’å¢\n    this.maxq = [];\n  }\n\n  // åœ¨é˜Ÿå°¾æ·»åŠ å…ƒç´  item\n  // åœ¨å°¾éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´  itemï¼Œç»´æŠ¤ maxq çš„å•è°ƒæ€§è´¨\n  // å°†å‰é¢å°äºè‡ªå·±çš„å…ƒç´ éƒ½åˆ \n  push(item) {\n    // å°†å‰é¢å°äºè‡ªå·±çš„å…ƒç´ éƒ½åˆ é™¤\n    while (this.maxq.length > 0 && this.maxq[this.maxq.length - 1] < item) {\n      // åˆ é™¤æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ \n      this.maxq.pop();\n    }\n    this.maxq.push(item);\n  }\n\n  // è¿”å›é˜Ÿå¤´å…ƒç´ , å³ maxq é˜Ÿé¦–å…ƒç´ \n  // é˜Ÿå¤´çš„å…ƒç´ è‚¯å®šæ˜¯æœ€å¤§çš„\n  max() {\n    return this.maxq[0];\n  }\n\n  // åˆ é™¤é˜Ÿå¤´å…ƒç´ ,\n  pop(item) {\n    // å¦‚æœè¦åˆ é™¤çš„å…ƒç´ æ˜¯é˜Ÿå¤´å…ƒç´ ï¼Œå°±åˆ é™¤\n    // å¦åˆ™ä¸åšä»»ä½•æ“ä½œ\n    // æƒ³åˆ é™¤çš„é˜Ÿå¤´å…ƒç´  item å¯èƒ½å·²ç»è¢«ã€Œå‹æ‰ã€äº†\n    if (this.maxq[0] === item) {\n      // åˆ é™¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ \n      this.maxq.shift();\n    }\n  }\n}\n```\n\n### 3.1. push(item) çš„é€»è¾‘\n\nå…³äº `push(item)` çš„é€»è¾‘ï¼Œå¯ä»¥å‚è€ƒä¸‹å›¾\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240811093920.png)\n\n> [!danger]\n>  ä¼šæœ‰ç–‘é—®â“ï¼Œéƒ½ `pop` åˆ é™¤äº†ï¼Œé‚£å²‚ä¸æ˜¯é˜Ÿåˆ—é‡Œæ²¡å€¼äº†ï¼Œä¸æ˜¯å› ä¸ºæ¯æ¬¡éƒ½ä¼š push ï¼Œé•¿åº¦éƒ½ä¼š`+1` ï¼Œå³ä½¿æŠŠå‰é¢çš„å…ƒç´ éƒ½å¹²æ‰äº†ï¼Œé•¿åº¦è¿˜æ˜¯æŒç»­å¢åŠ \n\n### 3.2. pop(item) çš„é€»è¾‘\n\nåˆ é™¤é˜Ÿé¦–ï¼Œéœ€è¦ä¼ ä¸€ä¸ªå‚æ•°ï¼Œå¦‚æœå®ƒæ˜¯é˜Ÿé¦–å…ƒç´ æ‰éœ€è¦åˆ é™¤\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240811095429.png)\n\n## 4. ç¤ºä¾‹ï¼šæ»‘åŠ¨çª—å£æœ€å¤§å€¼\n\n### 4.1. é¢˜ç›®\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240811080541.png)\n\n### 4.2. ä½¿ç”¨å•è°ƒåˆ—é˜Ÿæ¥è§£\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240811101243.png)\n\n- è§£é¢˜æ€è·¯\n\t- â‘  åˆå§‹åŒ–ä¸€ä¸ªå•è°ƒé˜Ÿåˆ—ï¼Œç”¨äºç»´æŠ¤**ç§»åŠ¨çª—å£**\n\t- â‘¡ éå†æ•°ç»„\n\t\t- å…ˆå¡«æ»¡çª—å£ï¼Œæ¯æ¬¡ `push` æ—¶ï¼Œwindow éƒ½ä¼šç»´æŠ¤ä¸€ä¸ªå•è°ƒé€’å‡é˜Ÿåˆ—\n\t\t- å¡«æ»¡äº†ï¼Œæ¯æ¬¡å…ˆåç§»åŠ¨ä¸€æ¬¡ï¼Œéœ€è¦åšä»¥ä¸‹äº‹æƒ…\n\t\t\t- window.push(item)\n\t\t\t- res.push(window.max())\n\t\t\t- åˆ é™¤å¯¹é¦–å…ƒç´ ï¼Œå› ä¸º**éœ€è¦ä¿è¯ window çš„é•¿åº¦ä¸º k**\n\n```javascript hl:55,42\n// å•è°ƒé€’å¢é˜Ÿåˆ—çš„æ ‡å‡† API\nclass MonotonicQueue {\n  constructor() {\n    // ç»´æŠ¤å…¶ä¸­çš„å…ƒç´ è‡ªå°¾éƒ¨åˆ°å¤´éƒ¨å•è°ƒé€’å¢\n    this.maxq = [];\n  }\n\n  // åœ¨é˜Ÿå°¾æ·»åŠ å…ƒç´  item\n  // åœ¨å°¾éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´  itemï¼Œç»´æŠ¤ maxq çš„å•è°ƒæ€§è´¨\n  // å°†å‰é¢å°äºè‡ªå·±çš„å…ƒç´ éƒ½åˆ \n  push(item) {\n    // å°†å‰é¢å°äºè‡ªå·±çš„å…ƒç´ éƒ½åˆ é™¤\n    while (this.maxq.length > 0 && this.maxq[this.maxq.length - 1] < item) {\n      this.maxq.pop();\n    }\n    this.maxq.push(item);\n  }\n\n  // è¿”å›é˜Ÿå¤´å…ƒç´ , å³ maxq é˜Ÿé¦–å…ƒç´ \n  // é˜Ÿå¤´çš„å…ƒç´ è‚¯å®šæ˜¯æœ€å¤§çš„\n  max() {\n    return this.maxq[0];\n  }\n\n  // åˆ é™¤é˜Ÿå¤´å…ƒç´ \n  pop(item) {\n    // å¦‚æœè¦åˆ é™¤çš„å…ƒç´ æ˜¯é˜Ÿå¤´å…ƒç´ ï¼Œå°±åˆ é™¤\n    // å¦åˆ™ä¸åšä»»ä½•æ“ä½œ\n    // æƒ³åˆ é™¤çš„é˜Ÿå¤´å…ƒç´  item å¯èƒ½å·²ç»è¢«ã€Œå‹æ‰ã€äº†\n    if (this.maxq[0] === item) {\n      this.maxq.shift();\n    }\n  }\n}\n\n/**\n * @param {number[]} nums\n * @param {number} k\n * @return {number[]}\n */\nvar maxSlidingWindow = function (nums, k) {\n  // â‘  åˆå§‹åŒ–ä¸€ä¸ªå•è°ƒé˜Ÿåˆ—ï¼Œç”¨æ¥ç»´æŠ¤çª—å£çš„æœ€å¤§å€¼\n  // å˜é‡ window æ˜¯ä¸€ä¸ª MonotonicQueue ç±»å‹çš„å®ä¾‹\n  let window = new MonotonicQueue();\n\n  let res = [];\n\n  // éå† nums\n  for (let i = 0; i < nums.length; i++) {\n    // â‘   å¦‚æœ i < k - 1ï¼Œå…ˆå¡«æ»¡çª—å£çš„å‰ k - 1\n    if (i < k - 1) {\n      window.push(nums[i]);\n    } else {\n      // â‘¡  çª—å£å‘å‰æ»‘åŠ¨ï¼ŒåŠ å…¥æœ€åä¸€ä¸ªå…ƒç´ \n      // æ¯æ¬¡ pushæ—¶ï¼Œwindow éƒ½ä¼šç»´æŠ¤ä¸€ä¸ªå•è°ƒé€’å‡é˜Ÿåˆ—\n      window.push(nums[i]);\n      // è®°å½•å½“å‰çª—å£çš„æœ€å¤§å€¼\n      res.push(window.max());\n      // çª—å£å‘å‰æ»‘åŠ¨ï¼Œåˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ \n      window.pop(nums[i - k + 1]);\n    }\n  }\n\n  return res;\n};\n\n```\n\n### 4.3. å¤æ‚åº¦åˆ†æ\n\n- æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n   - ä¸»å¾ªç¯éå†æ•´ä¸ªæ•°ç»„ numsï¼Œè¿™éœ€è¦ `O(n)` æ—¶é—´ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚\n      - åœ¨å¾ªç¯ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š\n         - push(): è™½ç„¶è¿™ä¸ªæ“ä½œåŒ…å«ä¸€ä¸ª**whileå¾ªç¯**ï¼Œçœ‹èµ·æ¥å¯èƒ½æ˜¯`O(n)`\n            -  ä½†æ˜¯æ¯ä¸ªå…ƒç´ æœ€å¤šè¢« push å’Œ pop ä¸€æ¬¡ã€‚\n            -  æ‰€ä»¥æ•´ä¸ªæ•°ç»„ï¼Œpushæ“ ä½œçš„å‡æ‘Šæ—¶é—´å¤æ‚åº¦æ˜¯`O(1)` \n         - max(): è¿™æ˜¯ä¸€ä¸ª`O(1)`æ“ä½œï¼Œå› ä¸ºå®ƒåªæ˜¯è¿”å›é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚\n         - pop(): è¿™ä¹Ÿæ˜¯ä¸€ä¸ª`O(1)`æ“ä½œï¼Œå› ä¸ºå®ƒåªæ˜¯æ£€æŸ¥å¹¶å¯èƒ½åˆ é™¤é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚\n   - ç»¼ä¸Šæ‰€è¿°ï¼Œå°½ç®¡æœ‰åµŒå¥—çš„å¾ªç¯ï¼Œä½†æ˜¯ç”±äº**æ¯ä¸ªå…ƒç´ æœ€å¤šè¢«å¤„ç†ä¸¤æ¬¡ï¼ˆä¸€æ¬¡å…¥é˜Ÿï¼Œä¸€æ¬¡å‡ºé˜Ÿï¼‰**ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n)\n- ç©ºé—´å¤æ‚åº¦ï¼šO(k)\n\t- MonotonicQueue ä¸­çš„ **maxq æ•°ç»„åœ¨æœ€åæƒ…å†µä¸‹å¯èƒ½ä¼šå­˜å‚¨ k ä¸ªå…ƒç´ **ï¼Œå…¶ä¸­ k æ˜¯æ»‘åŠ¨çª—å£çš„å¤§å°ã€‚\n\t- ç»“æœ`æ•°ç»„ res` çš„å¤§å°ä¸º `n - k + 1`ï¼Œä½†è¿™æ˜¯å¿…è¦çš„è¾“å‡ºç©ºé—´ï¼Œé€šå¸¸ä¸è®¡å…¥ç©ºé—´å¤æ‚åº¦ã€‚\n\n","8f3bed1943305501b0046167a880b138":"\n# å¸¸æ•°æ—¶é—´åˆ é™¤ã€æŸ¥æ‰¾æ•°ç»„ä¸­çš„ä»»æ„å…ƒç´ \n\n\n`#ç®—æ³•` `#2024/08/19`  `#ç®—æ³•/æ•°ç»„`  `#ç®—æ³•/å“ˆå¸Œ`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## æ€»ç»“ \n\nå¦‚ä½•ç»“åˆå“ˆå¸Œè¡¨å’Œæ•°ç»„ï¼Œä½¿å¾—æ•°ç»„çš„åˆ é™¤æ“ä½œæ—¶é—´å¤æ‚åº¦ä¹Ÿå˜æˆ `O(1)` ï¼Œ\n\n1. å¦‚æœæƒ³é«˜æ•ˆåœ°ï¼Œç­‰æ¦‚ç‡åœ°éšæœºè·å–å…ƒç´ ï¼Œå°±è¦ä½¿ç”¨æ•°ç»„ä½œä¸ºåº•å±‚å®¹å™¨ã€‚\n2. å¦‚æœè¦ä¿æŒæ•°ç»„å…ƒç´ çš„**ç´§å‡‘æ€§**ï¼Œå¯ä»¥æŠŠå¾…åˆ é™¤å…ƒç´ æ¢åˆ°æœ€åï¼Œç„¶åÂ `pop`Â æ‰æœ«å°¾çš„å…ƒç´ ï¼Œè¿™æ ·æ—¶é—´å¤æ‚åº¦å°±æ˜¯ `O(1)` äº†ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬éœ€è¦**é¢å¤–çš„å“ˆå¸Œè¡¨**è®°å½•å€¼åˆ°ç´¢å¼•çš„æ˜ å°„ã€‚\n3. å¯¹äºç¬¬äºŒé¢˜ï¼Œæ•°ç»„ä¸­å«æœ‰ã€Œç©ºæ´ã€ï¼ˆé»‘åå•æ•°å­—ï¼‰ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨å“ˆå¸Œè¡¨å·§å¦™å¤„ç†**å“ˆå¸Œæ˜ å°„å…³ç³»**ï¼Œè®©æ•°ç»„åœ¨**é€»è¾‘ä¸Šæ˜¯ç´§å‡‘çš„**ï¼Œæ–¹ä¾¿éšæœºå–å…ƒç´ ã€‚\n\nä¸‹é¢å°†ä»ä¸¤ä¸ª leetcode ç¤ºä¾‹æ¥è¯´æ˜\n\n## ç¤ºä¾‹ä¸€ï¼šO(1) æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ \n### é¢˜ç›®\n\n> [https://leetcode.cn/problems/insert-delete-getrandom-o1/description](https://leetcode.cn/problems/insert-delete-getrandom-o1/description)\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240819072521.png)\n\n> æ³¨æ„ï¼šè¿™æ˜¯ä¸€ä¸ª**é›†åˆ**\n\n### åˆ†æï¼šä¸¤ä¸ªéš¾ç‚¹\n\n**1ã€æ’å…¥ï¼Œåˆ é™¤ï¼Œè·å–éšæœºå…ƒç´ è¿™ä¸‰ä¸ªæ“ä½œçš„æ—¶é—´å¤æ‚åº¦å¿…é¡»éƒ½æ˜¯ O(1)**ã€‚\n\n**2ã€`getRandom`Â æ–¹æ³•è¿”å›çš„å…ƒç´ å¿…é¡»ç­‰æ¦‚ç‡è¿”å›éšæœºå…ƒç´ **ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœé›†åˆé‡Œé¢æœ‰Â `n`Â ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ è¢«è¿”å›çš„æ¦‚ç‡å¿…é¡»æ˜¯Â `1/n`ã€‚\n\n### è§£å†³æ€è·¯\n\nå¦‚æœæˆ‘ä»¬æƒ³åœ¨ `O(1)` çš„æ—¶é—´åˆ é™¤æ•°ç»„ä¸­çš„æŸä¸€ä¸ªå…ƒç´ Â `val`\n- å¯ä»¥å…ˆæŠŠè¿™ä¸ªå…ƒç´ äº¤æ¢åˆ°æ•°ç»„çš„å°¾éƒ¨\n\t- æ‰€éœ€è¦éœ€è¦ä½¿ç”¨å“ˆå¸Œè¡¨Â `valToIndex`Â å­˜å‚¨æ¯ä¸ªå€¼å¯¹åº”çš„ç´¢å¼•\n- ç„¶åå†Â `pop`Â æ‰\n\n- â‘  å®šä¹‰ä¸¤ä¸ª**å±æ€§**ï¼š\n\t- ä½¿ç”¨æ•°ç»„Â `nums`Â å­˜å‚¨æ‰€æœ‰å…ƒç´ \n\t- ä½¿ç”¨å“ˆå¸Œè¡¨Â `valToIndex`Â å­˜å‚¨æ¯ä¸ªå€¼å¯¹åº”çš„ç´¢å¼•\n- â‘¡ å®šä¹‰æ–¹æ³•ï¼šrandom è¿”å› 0 - length ä¹‹é—´çš„éšæœºæ•°\n- â‘¢ insert(val)\n\t- æ ¹æ®å“ˆå¸Œè¡¨åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ’å…¥çš„å…ƒç´  `val`\n\t\t- å­˜åœ¨ï¼Œç›´æ¥è¿”å› `false`\n\t\t- ä¸å­˜åœ¨\n\t\t\t- `nums.push`\n\t\t\t- æ›´æ–° `valToIndex`\n\t\t\t- è¿”å› `true`\n- â‘£ remove(val)\n\t- å¦‚æœ val ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› false\n\t\t- å­˜åœ¨\n\t\t\t- æ ¹æ® `valToIndex` æ‹¿åˆ°å½“å‰å…ƒç´ æ‰€åœ¨çš„ `index`\n\t\t\t- æŠŠæœ€åä¸€ä¸ªå…ƒç´ æ”¾åˆ° index\n\t\t\t- nums.pop\n\t\t\t- delete `valToIndex[val]`\n\t\t\t- è¿”å› true\n- â‘¤ getRandom()\n\n### ä»£ç \n\n```javascript\nvar RandomizedSet = function () {\n  // å­˜å‚¨æ‰€æœ‰çš„å…ƒç´ ,ä½¿ç”¨æ•°ç»„æ¥æ¨¡æ‹Ÿé›†åˆ\n  this.nums = [];\n  // key æ˜¯ valï¼Œvalue æ˜¯ val åœ¨ nums æ•°ç»„ä¸­çš„ç´¢å¼•\n  this.valToIndex = {};\n\n  this.random = function () {\n    return Math.floor(Math.random() * this.nums.length);\n  };\n};\n\n/**\n * @param {number} val\n * @return {boolean}\n */\nRandomizedSet.prototype.insert = function (val) {\n  // å¦‚æœ val å·²ç»å­˜åœ¨ï¼Œåˆ™è¿”å› false\n  if (this.valToIndex.hasOwnProperty(val)) {\n    return false;\n  }\n  // å¦åˆ™ï¼Œå°† val æ”¾å…¥ nums æ•°ç»„ä¸­\n  this.nums.push(val);\n  // å¹¶ä¸”æ›´æ–° valToIndex å¯¹è±¡\n  this.valToIndex[val] = this.nums.length - 1;\n  return true;\n};\n\n/**\n * @param {number} val\n * @return {boolean}\n */\nRandomizedSet.prototype.remove = function (val) {\n  // å¦‚æœ val ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› false\n  if (!this.valToIndex.hasOwnProperty(val)) {\n    return false;\n  }\n  // å¦åˆ™ï¼Œå°† val ä» nums æ•°ç»„ä¸­åˆ é™¤\n  // â‘  è·å– val åœ¨ nums æ•°ç»„ä¸­çš„ç´¢å¼•\n  let index = this.valToIndex[val];\n  // â‘¡ å°† nums æ•°ç»„ä¸­æœ€åä¸€ä¸ªå…ƒç´ æ”¾åˆ° index ä½ç½®\n  this.nums[index] = this.nums[this.nums.length - 1];\n  // â‘¢ æ›´æ–° valToIndex å¯¹è±¡\n  this.valToIndex[this.nums[index]] = index;\n  // â‘£ åˆ é™¤ nums æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ \n  this.nums.pop();\n  // â‘¤ å†åˆ é™¤ valToIndex å¯¹è±¡ä¸­çš„ val\n  delete this.valToIndex[val];\n  return true;\n};\n\n/**\n * @return {number}\n */\nRandomizedSet.prototype.getRandom = function () {\n  return this.nums[this.random()];\n};\n\n/**\n * Your RandomizedSet object will be instantiated and called as such:\n * var obj = new RandomizedSet()\n * var param_1 = obj.insert(val)\n * var param_2 = obj.remove(val)\n * var param_3 = obj.getRandom()\n */\n\n```\n\n### æ³¨æ„ç‚¹\n\n- æ‰‹å†™éšæœºæ•°\n- è®°å¾—æ›´æ–° `valToIndex`\n\n## ç¤ºä¾‹äºŒï¼š[é»‘åå•ä¸­çš„éšæœºæ•°](https://leetcode.cn/problems/random-pick-with-blacklist)\n\n### é¢˜ç›®\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240819080004.png)\n\n### é¢˜æ„è§£è¯»\n\n- ç»™ä½ è¾“å…¥ä¸€ä¸ªæ­£æ•´æ•°Â `N`ï¼Œä»£è¡¨å·¦é—­å³å¼€åŒºé—´Â `[0,N)`\n- å†ç»™ä½ è¾“å…¥ä¸€ä¸ª**é»‘åå•æ•°ç»„**Â `blacklist`ï¼Œä¸”Â `blacklist`Â ä¸­çš„æ•°å­—éƒ½æ˜¯åŒºé—´Â `[0,N)`Â ä¸­çš„æ•°å­—\n- è¦æ±‚ï¼šåœ¨åŒºé—´Â `[0,N)`Â ä¸­ã€Œç­‰æ¦‚ç‡éšæœºã€è¿”å›ä¸€ä¸ªã€Œä¸åœ¨Â `blacklist`Â ä¸­ã€çš„æ•´æ•°\n\n```javascript\n// æ„é€ å‡½æ•°ï¼Œè¾“å…¥å‚æ•°\nvar Solution = function(N, blacklist) {\n    this.N = N;\n    this.blacklist = blacklist;\n};\n\n// åœ¨åŒºé—´ [0,N) ä¸­ç­‰æ¦‚ç‡éšæœºé€‰å–ä¸€ä¸ªå…ƒç´ å¹¶è¿”å›\n// è¿™ä¸ªå…ƒç´ ä¸èƒ½æ˜¯ blacklist ä¸­çš„å…ƒç´ \nSolution.prototype.pick = function() {\n\n};\n```\n\n> [!danger]\n> `pick æ–¹æ³•`åº”è¯¥å°½é‡å°‘è°ƒç”¨**éšæœºæ•°ç”Ÿæˆå‡½æ•°**\n\n### è§£é¢˜æ€è·¯\n\n- æˆ‘ä»¬å¯ä»¥å°†åŒºé—´Â `[0,N)`Â çœ‹åšä¸€ä¸ª**æ•°ç»„**\n- ç„¶åå°†Â `blacklist`Â ä¸­çš„å…ƒç´ ç§»åˆ°**æ•°ç»„çš„æœ€æœ«å°¾**\n\t- åŒæ—¶ç”¨ä¸€ä¸ª**å“ˆå¸Œè¡¨ mapping**è¿›è¡Œæ˜ å°„ï¼Œå€ŸåŠ©å“ˆå¸Œè¡¨æ“ä½œæ¥æ¨¡æ‹Ÿ**æŠŠé»‘åå•æ•°å­—ç§»åˆ°æ•°ç»„æœ«å°¾**çš„æ•ˆæœ\n\t\t- `key` ä¸º é»‘åå•ä¸­çš„ä¸€ä¸ªå…ƒç´ \n\t\t- `value` ä¸º é»‘åå•å…ƒç´ åœ¨åŒºé—´Â `[0,N)`çš„ç´¢å¼•\n\n#### åœºæ™¯ä¸€ï¼šé»‘åå•éƒ½åœ¨å·¦è¾¹\n\nåˆ†å‰²çº¿ï¼š`sz = N - blanklist.length = 3`\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240819230918.png)\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240819222609.png)\n\n- â‘  ä»å°¾éƒ¨å¼€å§‹è®¡æ•°\n- â‘¡ éå†é»‘åå•æ•°ç»„\n- â‘¢ ä¸¤ä¸ªæ“ä½œ\n\t- æ›´æ–°å“ˆå¸Œè¡¨\n\t\t- key ä¸º é»‘åå•çš„ item\n\t\t- value ä¸º å°¾éƒ¨ç´¢å¼•\n\t- è®¡æ•° `last--`\n\n- æœ€ç»ˆ  mapping ï¼Œå¦‚ä¸‹å›¾\n\t-  0  -> 4\n\t-  1  -> 3 \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240819230529.png)\n\næ‰€ä»¥è¿™æ—¶å€™å°±ç›¸ç­‰äºä»`sz`çš„å·¦è¾¹ï¼Œå–éšæœºå€¼ï¼Œå³ `random( 0, 1,  2)`\n- ä¸º 0 æ—¶ï¼Œè¿”å› 4 ï¼Œä¸è¿”å› 0 ï¼Œå› ä¸º 0 -> 4\n- ä¸º 1 æ—¶ï¼Œè¿”å› 3 ï¼Œä¸è¿”å› 1 ï¼Œå› ä¸º  1 -> 3\n- ä¸º 2 æ—¶ï¼Œè¿”å› 2 \n\nä»£ç å¦‚ä¸‹ï¼š\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240819231025.png)\n\n#### åœºæ™¯äºŒï¼šé»‘åå•åœ¨ `sz` ä¸¤è¾¹éƒ½æœ‰\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240819231103.png)\n\nå¦‚ä¸‹ä»£ç ï¼š\n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240819225628.png)\n\n- ä¸Šé¢ä»£ç è§£é‡Šå¦‚ä¸‹ï¼š\n\t- â‘   å¦‚æœÂ `blacklist`Â ä¸­çš„é»‘åå•æ•°å­—æœ¬èº«å°±å­˜åœ¨åŒºé—´Â `[sz, N)`Â ä¸­ï¼Œé‚£ä¹ˆå°±æ²¡å¿…è¦åœ¨Â `mapping`Â ä¸­å»ºç«‹æ˜ å°„\n\t\t- æ¯”å¦‚ä¸Šå›¾ä¸­ï¼Œ`4` å°±æ²¡å¿…è¦å»ºç«‹ç´¢å¼•\n\t- â‘¡  åœ¨å¯¹Â `mapping[b]`Â èµ‹å€¼æ—¶ï¼Œè¦ä¿è¯Â `last`Â ä¸€å®šä¸åœ¨Â `blacklist`Â ä¸­\n\t\t- æ¯”å¦‚ä¸Šé¢ï¼Œ`4` åœ¨é»‘åå•ä¸­ï¼Œlast--ï¼Œè¿™æ—¶å€™ b ä¸º 1 ï¼Œ  last ä¸º 3\n\t\t\t- æ‰€æœ‰ 1 -> 3 \n\n![cos-blog-832-34-20241012](https://blog-1310531898.cos.ap-beijing.myqcloud.com/832-34-20241012/Pasted%20image%2020240819231952.png)\n\n- æœ€ç»ˆï¼Œå¦‚ä¸Šå›¾ï¼Œmapping ä¸º\n\t-  1 ->  3\n\næ‰€ä»¥è¿™æ—¶å€™å°±ç›¸ç­‰äºä»`sz`çš„å·¦è¾¹ï¼Œå–éšæœºå€¼ï¼Œå³ `random( 0, 1,  2)`\n- ä¸º 0 æ—¶ï¼Œè¿”å› 0\n- **ä¸º 1 æ—¶ï¼Œè¿”å›  3** ï¼Œä¸è¿”å› 1ï¼Œå› ä¸º 1 -> 3\n- ä¸º 2 æ—¶ï¼Œè¿”å› 2 \n\n### æœ€ç»ˆä»£ç \n\n```javascript\n/**  \n * @description é»‘åå•ä¸­çš„éšæœºæ•°  \n * @param {number} n  \n * @param {number[]} blacklist  \n */  \nvar Solution = function (N, blacklist) {  \n    // æœ€ç»ˆæ•°ç»„ä¸­çš„å…ƒç´ ä¸ªæ•°  \n    this.sz = N - blacklist.length;  \n    // é»‘åå•ä¸­çš„ç´¢å¼•  \n    this.blackIndexMap = new Map();  \n    // è½¬åŒ–æˆé›†åˆï¼Œæ–¹ä¾¿å¿«é€ŸæŸ¥è¯¢  \n    let blackSet = new Set(blacklist);  \n    // æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•  \n    let last = N - 1;  \n    // å°†é»‘åå•ä¸­çš„ç´¢å¼•æ¢åˆ°æœ€åå»  \n    for (let b of blacklist) {  \n        // åœºæ™¯ â‘ ï¼šå¦‚æœ b å·²ç»åœ¨åŒºé—´ [sz, N) ä¸­ï¼Œåˆ™ç›´æ¥è·³è¿‡  \n        if(b >= this.sz) {  \n            continue;  \n        }  \n        // è·³è¿‡æ‰€æœ‰é»‘åå•ä¸­çš„æ•°å­—  \n        // while (blacklist.includes(last)) {  \n        while (blackSet.has(last)) {  \n            last--;  \n        }  \n        this.blackIndexMap.set(b, last);  \n        last--;  \n    }  \n};  \n  \n// åæ–‡å®ç°  \nSolution.prototype.pick = function () {  \n    let index = Math.floor(Math.random() * this.sz);  \n    // å¦‚æœ index åœ¨é»‘åå•ä¸­ï¼Œåˆ™è¿”å›é»‘åå•ä¸­çš„ç´¢å¼•  \n    if (this.blackIndexMap.has(index)) {  \n        return this.blackIndexMap.get(index);  \n    }  \n    // å¦‚æœ index ä¸åœ¨é»‘åå•ä¸­ï¼Œåˆ™ç›´æ¥è¿”å›  \n    return index;  \n};\n```\n\n## å‚è€ƒ\n\n- https://labuladong.online/algo/data-structure/random-set/\n\n","3fe52ed11ea25fbba9dfbb12183fa3d4":"\n# å‰è¨€\n\n","77eba07adaf65fb6b1e6fe5751891b8c":"\n# å›æº¯ç®—æ³•ä¸DFSç®—æ³•çš„åŒºåˆ«ï¼Ÿ\n\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. æ ‘æä¸èŠ‚ç‚¹çš„åŒºåˆ« \n\nå…¶å®`å›æº¯ç®—æ³•`å’Œæˆ‘ä»¬å¸¸è¯´çš„ `DFS ç®—æ³•`éå¸¸ç±»ä¼¼ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç§**æš´åŠ›ç©·ä¸¾ç®—æ³•**ã€‚`å›æº¯ç®—æ³•` å’Œ `DFS` ç®—æ³•çš„ç»†å¾®å·®åˆ«æ˜¯ï¼š\n- `å›æº¯ç®—æ³•`æ˜¯åœ¨`éå†ã€Œæ ‘æã€` ï¼Œåœ¨äº`è·¯å¾„`\n- `DFS ç®—æ³•`æ˜¯åœ¨`éå†ã€ŒèŠ‚ç‚¹ã€`\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241113.png)\n\n## 2. ç®—æ³•æ¡†æ¶åŒºåˆ«\n\n- åšé€‰æ‹©å’Œæ’¤é”€é€‰æ‹©æ˜¯å¦åœ¨ for å¾ªç¯é‡Œé¢\n\n```javascript hl:1,15\n// å›æº¯ç®—æ³•æ¡†æ¶æ¨¡æ¿\nfunction backtrack(...) {\n    if (åˆ°è¾¾å¶å­èŠ‚ç‚¹) {\n        return;\n    }\n    for (int i = 0; i < n; i++;) {\n        // åšé€‰æ‹©\n        ...\n        backtrack(...)\n        // æ’¤é”€é€‰æ‹©\n        ...\n    }\n}\n\n// DFS ç®—æ³•æ¡†æ¶æ¨¡æ¿\nfunction dfs(...) {\n    if (åˆ°è¾¾å¶å­èŠ‚ç‚¹) {\n        return;\n    }\n    // åšé€‰æ‹©\n    ...\n    for (int i = 0; i < n; i++) {\n        dfs(...)\n    }\n    // æ’¤é”€é€‰æ‹©\n    ...\n}\n\n```\n\n## 3. backtrackã€dfsã€traverse ä¸è¦æœ‰è¿”å›å€¼\n\n- å¯¹äºÂ `backtrack/dfs/traverse`Â å‡½æ•°ï¼Œå°±ä½œä¸ºå•çº¯çš„éå†å‡½æ•°ï¼Œè¯·ä¸è¦ç»™å®ƒä»¬å¸¦è¿”å›å€¼\n\t- å› ä¸ºè¿™æ˜¯`éå†çš„æ€è·¯`ï¼Œè€Œ`åˆ†è§£é—®é¢˜çš„æ€è·¯`ï¼Œåˆ™ä¸€å®šä¼šæœ‰è¿”å›å€¼\n- å¦‚æœéœ€è¦å…¶ä»–å˜é‡ï¼Œè¯·ä½¿ç”¨**å¤–éƒ¨å˜é‡**\n\n## 4. base case å†™åœ¨å“ªå„¿ï¼Ÿ\n\n> è¿™ä¹ˆå†™ï¼Œå¥½ç†è§£äº›\n\n```javascript hl:2,14\nvoid traverse(TreeNode root) {\n    // base case\n    if (root == null) {\n        return;\n    }\n    // å‰åºä½ç½®\n    traverse(root.left);\n    // ä¸­åºä½ç½®\n    traverse(root.right);\n    // ååºä½ç½®\n}\n\nvoid backtrack(...) {\n    // base case\n    if (åˆ°è¾¾å¶å­èŠ‚ç‚¹) {\n        return;\n    }\n\n    for (int i = 0, i < n; i++) {\n        // å‰ªæé€»è¾‘\n        if (ç¬¬ i ä¸ªé€‰æ‹©ä¸æ»¡è¶³æ¡ä»¶) {\n            continue;\n        }\n\n        // åšé€‰æ‹©\n        ...\n\n        backtrack(...)\n\n        // æ’¤é”€é€‰æ‹©\n        ...\n    }\n}\n\n```\n\n## 5. å‰ªæé€»è¾‘å†™åœ¨å“ªå„¿ï¼Ÿ\n\n> è¿™ä¹ˆå†™ï¼Œå¥½ç†è§£äº›\n\n```javascript hl:8\nvoid backtrack(...) {\n    // base case\n    if (åˆ°è¾¾å¶å­èŠ‚ç‚¹) {\n        return;\n    }\n\n    for (int i = 0, i < n; i++) {\n        // å‰ªæé€»è¾‘\n        if (ç¬¬ i ä¸ªé€‰æ‹©ä¸æ»¡è¶³æ¡ä»¶) {\n            continue;\n        }\n\n        // åšé€‰æ‹©\n        ...\n\n        backtrack(...)\n\n        // æ’¤é”€é€‰æ‹©\n        ...\n    }\n}\n```\n\n","534a72e8beb258cabb6bc97d3666a82b":"\n# å›æº¯ç®—æ³•è§£é¢˜æ¡†æ¶\n\n\n`#2023/05/18`  `#ç®—æ³•/å›æº¯`  `#ç®—æ³•/DFS`\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. å›æº¯ç®—æ³•æ¡†æ¶ \n\nç«™åœ¨**å›æº¯æ ‘**çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œä½ åªéœ€è¦æ€è€ƒ 3 ç‚¹\n- è·¯å¾„ï¼šä¹Ÿå°±æ˜¯å·²ç»åšå‡ºçš„é€‰æ‹©ã€‚\n- é€‰æ‹©åˆ—è¡¨ï¼šä¹Ÿå°±æ˜¯ä½ å½“å‰å¯ä»¥åšçš„é€‰æ‹©ã€‚\n- ç»“æŸæ¡ä»¶ï¼šä¹Ÿå°±æ˜¯åˆ°è¾¾å†³ç­–æ ‘åº•å±‚ï¼Œæ— æ³•å†åšé€‰æ‹©çš„æ¡ä»¶ã€‚\n\n```javascript\nconst result = [];\n\nfunction backtrack('è·¯å¾„', 'é€‰æ‹©åˆ—è¡¨') {\n    if ('æ»¡è¶³ç»“æŸæ¡ä»¶') {\n        result.add('è·¯å¾„');\n        return;\n    }\n    for (let 'é€‰æ‹©' of 'é€‰æ‹©åˆ—è¡¨') {\n        // åšé€‰æ‹©;\n        backtrack('è·¯å¾„', 'é€‰æ‹©åˆ—è¡¨');\n        // æ’¤é”€é€‰æ‹©;\n    }\n}\n```\n\nå…¶æ ¸å¿ƒå°±æ˜¯ `for å¾ªç¯é‡Œé¢çš„é€’å½’`\n- åœ¨`é€’å½’`è°ƒç”¨ä¹‹`å‰` `ã€Œåšé€‰æ‹©ã€`\n- åœ¨`é€’å½’`è°ƒç”¨ä¹‹`å`  `ã€Œæ’¤é”€é€‰æ‹©ã€`\n\nå…³äºè¿™ä¸ªæ¡†æ¶çš„åŸç†è§£é‡Šï¼Ÿ è§ä¸‹é¢`å…¨æ’åˆ—`çš„åˆ†æï¼Œä½ å°±æ˜ç™½äº†\n\n## 2. å…¨æ’åˆ—\n\n> [https://leetcode.cn/problems/permutations/](https://leetcode.cn/problems/permutations/)\n\n![|600](https://832-1310531898.cos.ap-beijing.myqcloud.com/36a9a199ce4568829f9d53d3803740f6.png)\n\nå…¶å®ï¼Œå°±æ˜¯ä¸€ä¸ªæ’åˆ—ç»„åˆçš„æ•°å­¦é¢˜ï¼Œæˆ‘ä»¬ä¹ŸçŸ¥é“ `n` ä¸ªä¸é‡å¤çš„æ•°ï¼Œå…¨æ’åˆ—å…±æœ‰ `n!` ä¸ª ï¼Œæ¯”æ–¹è¯´ç»™ä¸‰ä¸ªæ•° `[1,2,3]` ï¼Œæˆ‘ä»¬æ¥ç”»ä¸€ç”»è¿™é¢—`å†³ç­–æ ‘` ï¼Œå¦‚ä¸‹ï¼š\n\n![|672](https://832-1310531898.cos.ap-beijing.myqcloud.com/963fbd4e9e78cccbc6de0f776253f338.png)\n\n- â‘  ä¸­çš„ `[2]` ä»£è¡¨ `è·¯å¾„` ï¼Œè®°å½•ä½ `å·²ç»åšè¿‡çš„é€‰æ‹©`\n- â‘¡ ä¸­çš„ `[1,3]`ä»£è¡¨ `é€‰æ‹©åˆ—è¡¨` ï¼Œ è¡¨ç¤ºä½ å½“å‰å¯ä»¥åšå‡ºçš„é€‰æ‹©\n- â‘¢ ä¸­çš„ï¼Œä»£è¡¨ä½ ç«™åœ¨ è¿™ä¸ª`çº¢è‰²çš„èŠ‚ç‚¹`ä¸Šï¼Œåšå†³ç­–ï¼Œæœ‰ä¸¤å±‚æ„æ€\n\t- å·²ç»åšäº†ï¼šä½ å·²ç»é€‰æ‹© 2\n\t- å‡†å¤‡åšï¼šç„¶åå†å†³å®šé€‰æ‹©è°ï¼Ÿ\n- â‘£ ä»£è¡¨å˜ `ã€Œç»“æŸæ¡ä»¶ã€`å°±æ˜¯éå†åˆ°æ ‘çš„`åº•å±‚å¶å­èŠ‚ç‚¹`ï¼Œè¿™é‡Œä¹Ÿå°±æ˜¯`é€‰æ‹©åˆ—è¡¨ä¸ºç©º`çš„æ—¶å€™ã€‚\n\n![|1376](https://832-1310531898.cos.ap-beijing.myqcloud.com/d9fe71a7f197df686b6b165d40bf26d9.png)\n\n### 2.1. è§£æ³•ä¸€ï¼šä½¿ç”¨ ` Array.includes` æ¥åˆ¤æ–­æ˜¯å¦é€‰ä¸­è¿‡äº†\n\n```javascript hl:17,14,5\nvar permute = function (nums) {\n    const len = nums.length;\n    const res = []; // ç»“æœé›†\n    /**\n     * @param {Array} track å·²ç»é€‰æ‹©çš„åˆ—è¡¨\n     * */\n    function backtrack(track) {\n        // é€’å½’ç»ˆæ­¢æ¡ä»¶\n        if (track.length === len) {\n            return res.push(track)\n        }\n        for (let i = 0; i < len; i++) {\n            // å·²ç»é€‰æ‹©è¿‡çš„æ•°å­—ä¸èƒ½å†åšé€‰æ‹©\n            if (!track.includes(nums[i])) {\n                // åšé€‰æ‹©\n                track.push(nums[i]);\n                backtrack([...track]); // ä¸€å®šè¦ [...track] å¦åˆ™ä¼šæŠ¥é”™\n                // æ’¤é”€é€‰æ‹©\n                track.pop()\n            }\n        }\n    }\n    backtrack([])\n    return res\n};\n\nconsole.log(permute([1, 2, 3]));\nconsole.log(permute([1, 2, 3, 4]));\n```\n\n### 2.2. è§£æ³•äºŒï¼šä½¿ç”¨ `used` æ ‡è¯†é€‰æ‹©è¿‡çš„èŠ‚ç‚¹\n\n```javascript hl:4,17,23,15\nvar permute = function (nums) {\n    const len = nums.length;\n    const res = []; // ç»“æœé›†\n    const used = new Array(nums.length).fill(false); \n    /**\n     * @param {Array} track å·²ç»é€‰æ‹©çš„åˆ—è¡¨\n     * */\n    function backtrack(track) {\n        // é€’å½’ç»ˆæ­¢æ¡ä»¶\n        if (track.length === len) {\n            return res.push(track)\n        }\n        for (let i = 0; i < len; i++) {\n            // å·²ç»é€‰æ‹©è¿‡çš„æ•°å­—ä¸èƒ½å†åšé€‰æ‹©\n            if(used[i]) continue;\n            \n            // åšé€‰æ‹©\n            track.push(nums[i]);\n            used[i] = true;\n            \n            backtrack([...track]);\n            \n            // æ’¤é”€é€‰æ‹©\n            track.pop();\n            used[i] = false;\n        }\n    }\n    backtrack([]);\n    return res\n};\n\nconsole.log(permute([1, 2, 3]));\nconsole.log(permute([1, 2, 3, 4]));\n\n```\n\n### 2.3. å˜ä½“ï¼šè¾“å‡º`å…ƒç´ ä¸ªæ•°`ä¸º `k` çš„æ‰€æœ‰æ’åˆ—ï¼Ÿ\n\nåªéœ€è¦ï¼Œä¿®æ”¹ä¸‹é¢çš„ **base case** å³å¯ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```javascript hl:7\nvar permute = function (nums,k) { // æ³¨æ„è¿™é‡Œä¼ å…¥äº†å‚æ•° k\n    const len = nums.length;\n    const res = []; // ç»“æœé›†\n    const options = []; // é€‰æ‹©åˆ—è¡¨\n    function backtrack(options) {\n        // ::::base case é€‰æ‹©å®Œäº†\n        if (options.length === k) {\n            res.push(options)\n            return;\n        }\n        for (let i = 0; i < len; i++) {\n            // å·²ç»é€‰æ‹©è¿‡çš„æ•°å­—ä¸èƒ½å†åšé€‰æ‹©\n            if (!options.includes(nums[i])) {\n                // åšé€‰æ‹©\n                options.push(nums[i]);\n                backtrack([...options]);\n                // æ’¤é”€é€‰æ‹©\n                options.pop()\n            }\n        }\n    }\n    backtrack(options)\n    return res\n};\n\nconsole.log(permute([1, 2, 3], 3));\nconsole.log(permute([1, 2, 3], 2));\n\n```\n\n## 3. SKU æ’åˆ—\n\n```javascript hl:20\nlet names = [\"iPhone X\", \"iPhone XS\"]\nlet colors = [\"é»‘è‰²\", \"ç™½è‰²\"]\nlet storages = [\"64g\", \"256g\"]\nlet skus = {names,colors,storages};\n\n// [\n//     [\"iPhone X\", \"é»‘è‰²\", \"64g\"],\n//     [\"iPhone X\", \"é»‘è‰²\", \"256g\"],\n//     [\"iPhone X\", \"ç™½è‰²\", \"64g\"],\n//     [\"iPhone X\", \"ç™½è‰²\", \"256g\"],\n//     [\"iPhone XS\", \"é»‘è‰²\", \"64g\"],\n//     [\"iPhone XS\", \"é»‘è‰²\", \"256g\"],\n//     [\"iPhone XS\", \"ç™½è‰²\", \"64g\"],\n//     [\"iPhone XS\", \"ç™½è‰²\", \"256g\"],\n// ]\n\nlet combine = function (...skus) {\n    let res = [];\n    const backtrack = (opts, selectedArr, index) => {\n        // å–ä¸‹ä¸€ä¸ª sku\n        let options = opts[index];\n        if (selectedArr.length === 3) {\n            res.push([...selectedArr]);\n            return;\n        }\n\n\t\t// æ ¹æ®å½“å‰ sku çš„å¯é€‰é¡¹è¿›è¡Œéå†\n        for (let i = 0; i < options.length; i++) {\n            // é€‰æ‹©\n            selectedArr.push(options[i]);\n            \n            // ::::å…³é”®ï¼Œé€‰æ‹©ä¸‹ä¸€ä¸ªäº§å“ç±»å‹ï¼Œå³ä¸‹ä¸€ä¸ªæ•°ç»„\n            \n            backtrack(skus, selectedArr, index + 1);\n            \n            // å–æ¶ˆé€‰æ‹©\n            selectedArr.pop();\n        }\n    }\n    backtrack(skus, [], 0)\n    return res\n}\n\nconsole.log(combine(names, colors, storages));\n\n```\n\n> **å…³é”®ç‚¹**ï¼Œé€’å½’å‡½æ•° `backtrack` çš„å…¥å‚ä¸Šï¼Œå³ `opts, selectedArr, index` è¿™ä¸‰ä¸ªå‚æ•°ä¸Šã€‚\n\n## 4. N çš‡å\n\n> [https://leetcode.cn/problems/n-queens/](https://leetcode.cn/problems/n-queens/)\n\næ¯”å¦‚ï¼Œ `N = 4`ï¼Œé‚£ä¹ˆä½ å°±è¦åœ¨ `4x4` çš„æ£‹ç›˜ä¸Šæ”¾ç½® `4 ä¸ªçš‡å`ï¼Œè¿”å›ä»¥ä¸‹ç»“æœï¼ˆç”¨ `.` ä»£è¡¨ç©º`æ£‹ç›˜`ï¼Œ`Q` ä»£è¡¨`çš‡å`ï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![|584](https://832-1310531898.cos.ap-beijing.myqcloud.com/e7bebf8d2009d6d55a08ae6b0f3017ba.png)\n\nçš‡åå¯ä»¥æ”»å‡»`åŒä¸€è¡Œ`ã€`åŒä¸€åˆ—`ã€`å·¦ä¸Šå·¦ä¸‹` `å³ä¸Šå³ä¸‹`  å››ä¸ªæ–¹å‘çš„ä»»æ„å•ä½ã€‚\n\n### 4.1. é™„ï¼š`åˆå§‹åŒ–`ä¸€ä¸ª `m*n` çš„`äºŒç»´æ•°ç»„`  æœ€ç®€ä¾¿çš„æ–¹å¼\n\n![|664](https://832-1310531898.cos.ap-beijing.myqcloud.com/2b7dcf309d5613314eb9e25201c05ef4.png)\n\n```javascript\n/**\n * å¦‚ä½•åˆå§‹åŒ–ä¸€ä¸ªäºŒç»´æ•°ç»„\n * */\nfunction initArr(m, n) {\n    // :::: ä»å¯è¿­ä»£æˆ–ç±»æ•°ç»„å¯¹è±¡åˆ›å»ºä¸€ä¸ªæ–°çš„æµ…æ‹·è´çš„æ•°ç»„å®ä¾‹\n    return Array.from({length: m}, (item,index) => Array(n).fill('.'));\n}\n\nconsole.log(initArr(3, 4));\nconsole.log(initArr(4, 4));\nconsole.log(initArr(4, 3));\n```\n\n### 4.2. ä»£ç å®ç°\n\n```javascript\n/**\n * https://leetcode.cn/problems/n-queens/\n * */\nlet solveNQueens = function (n) {\n    let res = [];\n    let board = Array.from({length: n}, () => Array(n).fill('.'));\n    /**\n     * @param board æ£‹ç›˜äºŒç»´æ•°ç»„\n     * @param row å½“å‰ç¬¬å‡ è¡Œ\n     * */\n    let backtrack = function (board, row) {\n        // :::: æ»¡è¶³ç»“æŸæ¡ä»¶, å³å·²ç»æ”¾ç½®äº† n ä¸ªçš‡å\n        if (row === board.length) {\n            // çœ‹é¢˜è®¾ï¼Œéœ€è¦è¾“å‡ºè¿™æ ·çš„æ ¼å¼\n            const item = board.map((row) => row.join(''));\n            res.push(item);\n            return;\n        }\n        // :::: ä»é€‰æ‹©åˆ—è¡¨ä¸­é€‰æ‹©,è¿™é‡Œçš„é€‰æ‹©åˆ—è¡¨æ˜¯ã€äºŒç»´æ•°ç»„çš„ç¬¬ row è¡Œã€‘\n        // æ¢å¥è¯æ¥è¯´ï¼Œä» ç¬¬rowè¡Œ  ä¸­å»é€‰æ‹© æŸä¸€åˆ—\n        let currentRow = board[row].length;\n        for (let col = 0; col < currentRow; col++) {\n            if (!isValid(board, row, col)) {\n                continue;\n            }\n            // :::: åšé€‰æ‹©\n            board[row][col] = 'Q';\n            backtrack(board, row + 1);\n            // :::: æ’¤é”€é€‰æ‹©\n            board[row][col] = '.';\n        }\n    }; \n    let isValid = function (board, row, col) {\n        let totalRow = board.length;\n        // æ£€æŸ¥ ã€å½“å‰åˆ—ã€‘ æ˜¯å¦æœ‰çš‡åäº’ç›¸å†²çª\n        // æ‰€ä»¥ åˆ—æ•°colä¸å˜ï¼Œè¡Œæ•°å˜åŒ–\n        for (let i = 0; i < row; i++) {\n            if (board[i][col] === 'Q') {\n                return false;\n            }\n        }\n        // æ£€æŸ¥ã€å³ä¸Šæ–¹ã€‘æ˜¯å¦æœ‰çš‡åäº’ç›¸å†²çª\n        for (let i = row - 1, j = col + 1; i >= 0 && j < totalRow; i--, j++) {\n            if (board[i][j] === 'Q') {\n                return false;\n            }\n        }\n        // æ£€æŸ¥ã€å·¦ä¸Šæ–¹ã€‘ æ˜¯å¦æœ‰çš‡åäº’ç›¸å†²çª\n        for (let i = row - 1, j = col - 1; i >= 0 && j >= 0; i--, j--) {\n            if (board[i][j] === 'Q') {\n                return false;\n            }\n        }\n        return true;\n    };\n    backtrack(board, 0);\n    return res;\n};\n\n\n```\n\nå…³äºï¼Œ`isValid` çš„é€»è¾‘ï¼Œåˆ†æå¯è§ `fj` \n\n[https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=161-198&t=Cw0r27yobQ8yinDi-4](https://www.figma.com/file/hT9k2YbVvV1UIITtUmbJ0C/2023.05.LOG?type=whiteboard&node-id=161-198&t=Cw0r27yobQ8yinDi-4)\n\n![|984](https://832-1310531898.cos.ap-beijing.myqcloud.com/f6c1b65af55a9c2696bbd59b30dc6ff2.png)\n\nå›æº¯ç®—æ³•ä¸­ï¼Œå¦‚æœ**åªéœ€è¦ä¸€ä¸ªç»“æœå³å¯**ï¼Œå¦‚ä¸Šé¢˜ä¸­ï¼Œåªéœ€è¦ä¸€ä¸ªç¬¦åˆè§„èŒƒçš„ N çš‡åå¸ƒå±€ï¼Œå¤–éƒ¨å˜é‡æ ‡è¯†æ˜¯å¦æ‰¾åˆ°ï¼Œæ‰¾åˆ°ç›´æ¥ `return` å³å¯ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```javascript hl:6\n// å‡½æ•°æ‰¾åˆ°ä¸€ä¸ªç­”æ¡ˆåå°±è¿”å› true\nvar found = false;\n\nfunction backtrack(board, row) {\n    // å·²ç»æ‰¾åˆ°ä¸€ä¸ªç­”æ¡ˆäº†ï¼Œä¸ç”¨å†æ‰¾äº†\n    if (found) {\n        return;\n    }\n    // è§¦å‘ç»“æŸæ¡ä»¶\n    if (row === board.length) {\n        res.push(board);\n        // æ‰¾åˆ°äº†ç¬¬ä¸€ä¸ªç­”æ¡ˆ\n        found = true;\n        return;\n    }\n    ...\n}\n```\n\n## 5. N çš‡å II\n\n>[https://leetcode.cn/problems/n-queens-ii/](https://leetcode.cn/problems/n-queens-ii/)\n\næŠŠ ä¸Šé¢˜ æ”¹æˆè¿”å› ä¸ªæ•° è€Œå·²ï¼Œå…¶ä»–éƒ½ä¸éœ€è¦å˜ï¼ŒæŠŠ `res = 0`  å³å¯ï¼Œå› ä¸º `res=[]` è‚¯å®šæ›´å å†…å­˜ã€‚ä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\n\nlet totalNQueens = function (n) {\n    let res = 0;\n    let board = Array.from({length: n}, () => Array(n).fill('.'));\n    /**\n     * @param board æ£‹ç›˜äºŒç»´æ•°ç»„\n     * @param row å½“å‰ç¬¬å‡ è¡Œ\n     * */\n    let backtrack = function (board, row) {\n        // :::: æ»¡è¶³ç»“æŸæ¡ä»¶, å³å·²ç»æ”¾ç½®äº† n ä¸ªçš‡å\n        if (row === board.length) {\n            res++;\n            return;\n        }\n        // :::: ä»é€‰æ‹©åˆ—è¡¨ä¸­é€‰æ‹©,è¿™é‡Œçš„é€‰æ‹©åˆ—è¡¨æ˜¯ã€äºŒç»´æ•°ç»„çš„ç¬¬ row è¡Œã€‘\n        // æ¢å¥è¯æ¥è¯´ï¼Œä» ç¬¬rowè¡Œ  ä¸­å»é€‰æ‹© æŸä¸€åˆ—\n        let currentRowLen = board[row].length;\n        for (let col = 0; col < currentRowLen; col++) {\n            if (!isValid(board, row, col)) {\n                continue;\n            }\n            // :::: åšé€‰æ‹©\n            board[row][col] = 'Q';\n            backtrack(board, row + 1);\n            // :::: æ’¤é”€é€‰æ‹©\n            board[row][col] = '.';\n        }\n    };\n\n    let isValid = function (board, row, col) {\n        let totalRow = board.length;\n        // æ£€æŸ¥ ã€ä¸Šæ–¹ã€‘ æ˜¯å¦æœ‰çš‡åäº’ç›¸å†²çª\n        // æ‰€ä»¥ åˆ—æ•°colä¸å˜ï¼Œè¡Œæ•°å˜åŒ–\n        for (let i = 0; i < row; i++) {\n            if (board[i][col] === 'Q') {\n                return false;\n            }\n        }\n        // æ£€æŸ¥ã€å³ä¸Šæ–¹ã€‘æ˜¯å¦æœ‰çš‡åäº’ç›¸å†²çª\n        for (let i = row - 1, j = col + 1; i >= 0 && j < totalRow; i--, j++) {\n            if (board[i][j] === 'Q') {\n                return false;\n            }\n        }\n        // æ£€æŸ¥ã€å·¦ä¸Šæ–¹ã€‘ æ˜¯å¦æœ‰çš‡åäº’ç›¸å†²çª\n        for (let i = row - 1, j = col - 1; i >= 0 && j >= 0; i--, j--) {\n            if (board[i][j] === 'Q') {\n                return false;\n            }\n        }\n        return true;\n    };\n    backtrack(board, 0);\n    return res;\n};\n\n\n```\n\n### 5.1. å¤æ‚åº¦åˆ†æ\n\nå½“ N = 8 æ—¶ï¼Œå°±æ˜¯`å…«çš‡åé—®é¢˜`ï¼Œæ•°å­¦å¤§ä½¬`é«˜æ–¯ç©·å°½ä¸€ç”Ÿ`éƒ½æ²¡æœ‰æ•°æ¸…æ¥šå…«çš‡åé—®é¢˜åˆ°åº•æœ‰å‡ ç§å¯èƒ½çš„æ”¾ç½®æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ç®—æ³•åªéœ€è¦ä¸€ç§’å°±å¯ä»¥ç®—å‡ºæ¥æ‰€æœ‰å¯èƒ½çš„ç»“æœã€‚\n==æ‰€ä»¥ï¼Œè®¡ç®—æœºçœŸçš„å¾ˆå¼ºå¤§==\n\nN è¡Œæ£‹ç›˜ä¸­ï¼Œç¬¬ä¸€è¡Œæœ‰ `N` ä¸ªä½ç½®å¯èƒ½å¯ä»¥æ”¾çš‡åï¼Œç¬¬äºŒè¡Œæœ‰ `N - 1` ä¸ªä½ç½®ï¼Œç¬¬ä¸‰è¡Œæœ‰ `N - 2` ä¸ªä½ç½®ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå†å åŠ æ¯æ¬¡æ”¾çš‡åä¹‹å‰ `isValid` å‡½æ•°æ‰€éœ€çš„ `O(N)` å¤æ‚åº¦ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸Šç•Œæ˜¯ `O(N! * N)`  ã€‚\n\n","9377287f741452e0b39de42818f0d837":"\n# å›æº¯ç®—æ³•è§£å†³æ’åˆ—ã€ç»„åˆã€å­é›†é—®é¢˜\n\n\n`#å›æº¯ç®—æ³•` \n\n\n## ç›®å½•\n<!-- toc -->\n ## å­é›†ï¼šå…ƒç´ ä¸é‡å¤ä¸å¯å¤é€‰ \n\n[https://leetcode.cn/problems/subsets/](https://leetcode.cn/problems/subsets/)\n![|568](https://832-1310531898.cos.ap-beijing.myqcloud.com/e5977d58a644022f4079de04183590fb.png)\n\n- å…ƒç´ äº’ä¸ç›¸åŒ\n- å­é›†ä¸å¯é‡å¤ï¼š\n\t- æˆ‘ä»¬é€šè¿‡ä¿è¯å…ƒç´ ä¹‹é—´çš„`ç›¸å¯¹é¡ºåº`ä¸å˜æ¥é˜²æ­¢å‡ºç°é‡å¤çš„å­é›†\n\n![|624](https://832-1310531898.cos.ap-beijing.myqcloud.com/72a8bcd2508fda6eaa0e6a7ee541627f.png)\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```javascript hl:18\n/**\n * @param {number[]} nums\n * @return {number[][]}\n */\nvar subsets = function (nums) {\n    // ç”¨äºå­˜å‚¨ç»“æœ\n    const res = [];\n    // ç”¨äºè®°å½•å›æº¯è·¯å¾„\n    const track = [];\n    /**\n     * å›æº¯ç®—æ³•çš„æ ¸å¿ƒå‡½æ•°ï¼Œç”¨äºéå†å­é›†é—®é¢˜çš„å›æº¯æ ‘\n     * @param {number} start - æ§åˆ¶æ ‘æçš„éå†ï¼Œé¿å…äº§ç”Ÿé‡å¤å­é›†\n     */\n    const backtrack = (start) => {\n        // å‰åºéå†ä½ç½®ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ˜¯ä¸€ä¸ªå­é›†\n        res.push([...track]); // è¿™é‡Œéœ€è¦æµ…æ‹·è´æ‰è¡Œ\n        // ::::å…¶å®è¿™é‡Œå¯ä»¥ä¸ç”¨åˆ¤æ–­ï¼Œå› ä¸ºforå¾ªç¯çš„æ¡ä»¶å·²ç»é™åˆ¶äº†içš„å–å€¼èŒƒå›´\n        // ::::è¿™é‡ŒåŠ ä¸Šæ˜¯ä¸ºäº†æ–¹ä¾¿ç†è§£ ã€å›æº¯ç®—æ³•çš„æ¡†æ¶ã€‘\n        if (start === nums.length) return;\n        // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶\n        for (let i = start; i < nums.length; i++) {\n            // åšé€‰æ‹©\n            track.push(nums[i]);\n            // å›æº¯éå†ä¸‹ä¸€å±‚èŠ‚ç‚¹\n            backtrack(i + 1);\n            // æ’¤é”€é€‰æ‹©\n            track.pop();\n        }\n    };\n    backtrack(0);\n    return res;\n};\n\nconsole.log(subsets([1, 2, 3]));\nconsole.log(subsets([1, 2, 3, 4]));\n\n```\n\n##  ç»„åˆï¼šå…ƒç´ ä¸é‡å¤ä¸å¯å¤é€‰\n\n> [https://leetcode.cn/problems/combinations/](https://leetcode.cn/problems/combinations/)\n\n\n![|776](https://832-1310531898.cos.ap-beijing.myqcloud.com/71bd4336ce8d521d370e45ea68e5e3ad.png)\n\nç»™ä½ è¾“å…¥ä¸€ä¸ªæ•°ç»„ `nums = [1,2..,n]` å’Œä¸€ä¸ªæ­£æ•´æ•° `k`ï¼Œè¯·ä½ ç”Ÿæˆæ‰€æœ‰`å¤§å°ä¸º k çš„å­é›†` ï¼Œæ˜¯ä¸æ˜¯å°±æ˜¯ä¸Šä¸€é¢˜çš„ä¸€ç§ç‰¹æ®Šåœºæ™¯è€Œå·²ã€‚æ‰€ä»¥ä¸¤ç§æ€è·¯ï¼š\n\n### æ€è·¯ 1ï¼š\n\nå¤ç”¨å­é›†çš„ä»£ç ï¼Œæœ€ç»ˆè¿”å›ç»“æœ `å†è¿‡æ»¤é•¿åº¦=k` çš„å­é›†ä¸å°±è¡Œäº†å˜›ï¼Ÿ\n\n### æ€è·¯ 2ï¼š\n\nä¿®æ”¹ `base case` ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\n/**\n * @param {number} n \n * @param {number} k \n * @return {number[][]} \n */\nvar combine = function(n, k) {\n    const res = [];\n    const track = [];\n    // ä¸»å‡½æ•°\n    function backtrack(start, n, k) {\n        // base case\n        if (k === track.length) {\n            // éå†åˆ°äº†ç¬¬ k å±‚ï¼Œæ”¶é›†å½“å‰èŠ‚ç‚¹çš„å€¼\n            res.push([...track]);\n            return;\n        }\n        // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶\n        for (let i = start; i <= n; i++) {\n            // é€‰æ‹©\n            track.push(i);\n            // é€šè¿‡ start å‚æ•°æ§åˆ¶æ ‘æçš„éå†ï¼Œé¿å…äº§ç”Ÿé‡å¤çš„å­é›†\n            backtrack(i + 1, n, k);\n            // æ’¤é”€é€‰æ‹©\n            track.pop();\n        }\n    }\n    backtrack(1, n, k);\n    return res;\n};\n```\n\n\n## å­é›† II ï¼šå…ƒç´ é‡å¤ä¸å¯å¤é€‰\n\n> [https://leetcode.cn/problems/subsets-ii/](https://leetcode.cn/problems/subsets-ii/)\n\n![|680](https://832-1310531898.cos.ap-beijing.myqcloud.com/a730e5dae027ee1623d8d8863d6618d4.png)\n\nç›¸è¾ƒäº`å­é›†`ä¸»è¦åŒºåˆ«åœ¨äºï¼š\n- å¯èƒ½æœ‰é‡å¤å…ƒç´ \n- ä½†å­é›†ä¸­ä¸èƒ½å«æœ‰é‡å¤å…ƒç´ \n\næ‰€ä»¥ï¼Œ`å…ˆæ’åº`ï¼Œè®©ç›¸åŒçš„å…ƒç´ é åœ¨ä¸€èµ·ï¼Œå¦‚æœå‘ç° `nums[i] == nums[i-1]`ï¼Œåˆ™è·³è¿‡ï¼Œæ‰€ä»¥ç®€å•æ”¹ä¸‹ å­é›† çš„ä»£ç ï¼Œå³å¯ï¼Œå¦‚ä¸‹ï¼š\n\n```javascript\nvar subsetsWithDup = function(nums) {\n    // å®šä¹‰ç»“æœæ•°ç»„å’Œå›æº¯æ—¶çš„è·¯å¾„æ•°ç»„\n    let res = [];\n    let track = [];\n    // æ’åºï¼Œä»¥ä¾¿äºå‰ªæç®—æ³•çš„å®ç°\n    nums.sort((a, b) => a - b);\n    // å›æº¯ç®—æ³•\n    const backtrack = (nums, start) => {\n        // å‰åºä½ç½®ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ˜¯ä¸€ä¸ªå­é›†\n        res.push([...track]);\n        // éå†å­é›†æ ‘æ\n        for (let i = start; i < nums.length; i++) {\n            // å‰ªæé€»è¾‘ï¼Œå€¼ç›¸åŒçš„ç›¸é‚»æ ‘æï¼Œåªéå†ç¬¬ä¸€æ¡\n            if (i > start && nums[i] === nums[i - 1]) {\n                continue;\n            }\n            // é€‰æ‹©å½“å‰å…ƒç´ ï¼ŒåŠ å…¥è·¯å¾„æ•°ç»„\n            track.push(nums[i]);\n            // å‘å­èŠ‚ç‚¹é€’å½’\n            backtrack(nums, i + 1);\n            // å›æº¯ï¼Œæ’¤é”€é€‰æ‹©\n            track.pop();\n        }\n    }\n    backtrack(nums, 0);\n    return res;\n};\n\n```\n\n## ç»„åˆæ€»å’Œ II ï¼šå…ƒç´ å¯é‡ä¸å¯å¤é€‰\n\n![|712](https://832-1310531898.cos.ap-beijing.myqcloud.com/dc788f87448a26142ca7354275ef6bbc.png)\n\n- å³ï¼Œæ¢ç§æ€è·¯ç†è§£é¢˜è§£ï¼šä»ä¸€ä¸ªç­ä¸­ï¼Œæ‰¾åˆ°ä½“é‡å’Œä¸º `1000kg` çš„åŒå­¦å»ï¼Œåˆ’èˆ¹ï¼Œå› ä¸ºèˆ¹æœ€å¤§è½½é‡ä¸º `1000 kg`\n\n```javascript\n/**\n * @param {number[]} candidates\n * @param {number} target\n * @return {number[][]}\n */\nvar combinationSum2 = function (candidates, target) {\n    let res = [];\n    let track = [];\n    let trackSum = 0;\n    let sortedCandidates = candidates.sort((a, b) => a - b); // æ’åº\n    // å›æº¯å‡½æ•°\n    const backtrack = (nums, start, target) => {\n        // è¾¾åˆ°ç›®æ ‡å’Œï¼Œæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ç»„åˆï¼Œè®°å½•ç»“æœ\n        if (trackSum === target) {\n            res.push([...track]);\n            return;\n        }\n        // å…ˆå‰ªæï¼Œè¶…è¿‡ç›®æ ‡å’Œï¼Œç›´æ¥ç»“æŸ\n        if (trackSum > target) {\n            return;\n        }\n        // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶\n        for (let i = start; i < nums.length; i++) {\n            // å‰ªæé€»è¾‘ï¼Œå€¼ç›¸åŒçš„æ ‘æï¼Œåªéå†ç¬¬ä¸€æ¡\n            if (i > start && nums[i] === nums[i - 1]) {\n                continue;\n            }\n            // åšé€‰æ‹©\n            track.push(nums[i]);\n            trackSum += nums[i];\n            // é€’å½’éå†ä¸‹ä¸€å±‚å›æº¯æ ‘\n            backtrack(nums, i + 1, target);\n            // æ’¤é”€é€‰æ‹©\n            track.pop();\n            trackSum -= nums[i];\n        }\n    }\n    backtrack(sortedCandidates, 0, target);\n    return res;\n};\n\n```\n\n> [!question]\nå¾ˆæ—©å¾ˆæ—©ä»¥å‰åˆ·è¿‡è¿™é¢˜ï¼Œé‚£æ—¶å€™è¿˜ä¸çŸ¥é“è¿™å« **å›æº¯ç®—æ³•**ï¼Œæå‡ºæ¥äº†è¿˜æ²¾æ²¾è‡ªå–œï¼Ÿ\n\n\n## å…¨æ’åˆ— II ï¼šå…ƒç´ å¯é‡å¤ä¸å¯å¤é€‰\n\n![|640](https://832-1310531898.cos.ap-beijing.myqcloud.com/43085e68d81e39ff3a9327d52b86c16b.png)\næ”¹é¢˜çš„å¯é€‰æ•°ç»„å¯èƒ½`æœ‰é‡å¤`ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å‰é¢æåˆ°çš„ `æ²¡æœ‰é‡å¤å…ƒç´ çš„åœºæ™¯` \n\nå…ˆçœ‹èƒ½å¦é€šè¿‡  `includes` ä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\nvar permute = function (nums) {\n    const len = nums.length;\n    const res = []; // ç»“æœé›†\n    const options = []; // é€‰æ‹©åˆ—è¡¨\n    function backtrack(options) {\n        // é€’å½’ç»ˆæ­¢æ¡ä»¶\n        if (options.length === len) {\n            return res.push(options)\n        }\n        for (let i = 0; i < len; i++) {\n            // å·²ç»é€‰æ‹©è¿‡çš„æ•°å­—ä¸èƒ½å†åšé€‰æ‹©\n            if (!options.includes(nums[i])) {\n                // åšé€‰æ‹©\n                options.push(nums[i]);\n                backtrack([...options]);\n                // æ’¤é”€é€‰æ‹©\n                options.pop()\n            }\n        }\n    }\n    backtrack(options)\n    return res\n};\n```\nèƒ½å¦é€šè¿‡ä¸Šé¢çš„ `includes` æ–¹æ³•æ¥åˆ¤æ–­ï¼Œå‰ªæå‘¢ï¼Œç­”æ¡ˆæ˜¯å¾ˆéº»çƒ¦ï¼Œå› ä¸º `includes` åªæ˜¯æ ‡è¯†æ•°ç»„æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ ï¼Œå…ƒç´ é‡å¤æ—¶å°±ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥è¿˜æ˜¯ä½¿ç”¨ `used æ•°ç»„`å˜é‡æ¥æ ‡è¯†æ˜¯å¦è¢«é€‰ä¸­äº†ï¼Œå³å‚è€ƒ å®ç°ï¼šä»£ç å¦‚ä¸‹\n\n```javascript\nvar permute = function (nums) {\n    const len = nums.length;\n    const res = []; // ç»“æœé›†\n    const used = new Array(nums.length).fill(false); // é€‰æ‹©åˆ—è¡¨\n\n    /**\n     * @param {Array} track å·²ç»é€‰æ‹©çš„åˆ—è¡¨\n     * */\n    function backtrack(track) {\n        // é€’å½’ç»ˆæ­¢æ¡ä»¶\n        if (track.length === len) {\n            return res.push(track)\n        }\n        for (let i = 0; i < len; i++) {\n            // å·²ç»é€‰æ‹©è¿‡çš„æ•°å­—ä¸èƒ½å†åšé€‰æ‹©\n            if(used[i]) continue;\n            // åšé€‰æ‹©\n            track.push(nums[i]);\n            used[i] = true;\n            backtrack([...track]);\n            // æ’¤é”€é€‰æ‹©\n            track.pop();\n            used[i] = false;\n        }\n    }\n    backtrack([]);\n    return res\n};\n\nconsole.log(permute([1, 2, 3]));\nconsole.log(permute([1, 2, 3, 4]));\n```\n\nè¿™é‡Œéœ€è¦`å‰ªæ` , ä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\n/**\n * @param {number[]} nums\n * @return {number[][]}\n */\nvar permuteUnique = function (nums) {\n    const len = nums.length;\n    const res = []; // ç»“æœé›†\n    const track = []; // é€‰æ‹©åˆ—è¡¨\n    const used = new Array(len).fill(false); // è®°å½•å…ƒç´ æ˜¯å¦ä½¿ç”¨è¿‡\n    // ::::æ’åºï¼Œè®©ç›¸åŒçš„å…ƒç´ é åœ¨ä¸€èµ·,ä»¥ä¾¿äºå‰ªæç®—æ³•çš„å®ç°\n    nums.sort((a, b) => a - b);\n    \n    function backtrack(track) {\n        // é€’å½’ç»ˆæ­¢æ¡ä»¶\n        if (track.length === len) {\n            return res.push([...track]);\n        }\n        for (let i = 0; i < len; i++) {\n            // :::: å·²ç»é€‰æ‹©è¿‡çš„æ•°å­—ä¸èƒ½å†åšé€‰æ‹©\n            if (used[i]) {\n                continue;\n            }\n            // :::: ä¸¤ä¸ªå…ƒç´ ç›¸é‚»ï¼Œå¹¶ä¸”è¿˜æœªé€‰æ‹©å‰ä¸€ä¸ªå…ƒç´ \n            if (i > 0 && nums[i-1] === nums[i] && !used[i-1]) {\n                // å¦‚æœå‰é¢çš„ç›¸é‚»ç›¸ç­‰å…ƒç´ æ²¡æœ‰ç”¨è¿‡ï¼Œåˆ™è·³è¿‡\n                continue;\n            }\n            // åšé€‰æ‹©\n            track.push(nums[i]);\n            used[i] = true;\n            backtrack([...track]);\n            // æ’¤é”€é€‰æ‹©\n            track.pop();\n            used[i] = false;\n        }\n    }\n    // ä¼ å…¥ç©ºæ•°ç»„ï¼Œä»£è¡¨é€‰æ‹©åˆ—è¡¨\n    backtrack(track)\n    return res\n};\n\nconsole.log(permuteUnique([1, 1, 2]));\nconsole.log(permuteUnique([1, 3, 2]));\n\n```\n\n**åˆ†æï¼š**\n\nå½“å‡ºç°é‡å¤å…ƒç´ æ—¶ï¼Œæ¯”å¦‚è¾“å…¥  `nums = [1,2,2',2'']`ï¼Œ`2'` åªæœ‰åœ¨ `2` å·²ç»è¢«ä½¿ç”¨çš„æƒ…å†µä¸‹æ‰ä¼šè¢«é€‰æ‹©ï¼ŒåŒç†ï¼Œ`2''` åªæœ‰åœ¨ `2'` å·²ç»è¢«ä½¿ç”¨çš„æƒ…å†µä¸‹æ‰ä¼šè¢«é€‰æ‹©ï¼Œè¿™å°± `ä¿è¯äº†ç›¸åŒå…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®ä¿è¯å›ºå®š`ã€‚\n\n> [!tip]\nå¦å¤–ä½ ä¼šå‘ç°ï¼Œ**åªè¦æ¶‰åŠåˆ°é‡å¤**ï¼Œå°±å¾—`å¯¹å¯é€‰åˆ—è¡¨æ’åº`\n\n\n\n","a60ffd2d44315435a651fa189ac23080":"\n# å›æº¯ç®—æ³•ç©·ä¸¾çš„ä¸¤ç§è§†è§’ï¼ˆçƒç›’æ¨¡å‹ï¼‰\n\n\n`#å›æº¯ç®—æ³•` \n\n\n> æ­£å¸¸ä½¿ç”¨å›æº¯ç®—æ³•çš„æ¡†æ¶`backtrack` å°±èƒ½è§£å†³ï¼Œä½†è¿˜æœ‰é€šè¿‡Â `swap`Â å…ƒç´ å®ç°å…¨æ’åˆ—ï¼Œè¿™æ˜¯çƒç›’æ¨¡å‹çš„å¦ä¸€ä¸ªæ€è·¯ï¼ŒçŸ¥é“å³å¯ï¼Œä¸å±•å¼€äº†ï¼\n\n- å›æº¯ç®—æ³•ç©·ä¸¾çš„æœ¬è´¨æ€ç»´æ¨¡å¼æ˜¯ã€Œçƒç›’æ¨¡å‹ã€ï¼Œä¸€åˆ‡å›æº¯ç®—æ³•ï¼Œçš†ä»æ­¤å‡ºï¼Œåˆ«æ— äºŒæ³•ã€‚\n- çƒç›’æ¨¡å‹ï¼Œå¿…ç„¶æœ‰ä¸¤ç§ç©·ä¸¾è§†è§’ï¼Œåˆ†åˆ«ä¸ºã€Œçƒã€çš„è§†è§’ç©·ä¸¾å’Œã€Œç›’ã€çš„è§†è§’ç©·ä¸¾ï¼Œå¯¹åº”çš„ï¼Œå°±æ˜¯ä¸¤ç§ä¸åŒçš„ä»£ç å†™æ³•ã€‚\n- ä»ç†è®ºä¸Šåˆ†æï¼Œä¸¤ç§ç©·ä¸¾è§†è§’æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯æ¶‰åŠåˆ°å…·ä½“çš„ä»£ç å®ç°ï¼Œä¸¤ç§å†™æ³•çš„å¤æ‚åº¦å¯èƒ½æœ‰ä¼˜åŠ£ä¹‹åˆ†ã€‚ä½ éœ€è¦é€‰æ‹©æ•ˆç‡æ›´é«˜çš„å†™æ³•ã€‚\n\n","a1bb2e19c47d51c1be81aaa40394c34d":"\n# ä½¿ç”¨ DFS è§£å†³å²›å±¿é—®é¢˜\n\n`#ç®—æ³•/DFS` \n\nå²›å±¿ç³»åˆ—é¢˜ç›®çš„æ ¸å¿ƒè€ƒç‚¹å°±æ˜¯ï¼šç”¨ DFS/BFS ç®—æ³•éå†äºŒç»´æ•°ç»„ï¼Œæœ¬æ–‡éƒ½ä½¿ç”¨ DFS ç®—æ³•\n\n\n## ç›®å½•\n<!-- toc -->\n ## 1. äºŒç»´çŸ©é˜µéå†æ¡†æ¶ \n\näºŒç»´çŸ©é˜µå°±å¯ä»¥æŠ½è±¡æˆä¸€å¹…`ç½‘çŠ¶çš„ã€Œå›¾ã€ç»“æ„`\n\n```javascript hl:7,12\n// äºŒç»´çŸ©é˜µéå†æ¡†æ¶\nvar dfs = function (grid, i, j, visited) {\n  var m = grid.length,\n    n = grid[0].length;\n\n  if (i < 0 || j < 0 || i >= m || j >= n) {\n    // è¶…å‡ºç´¢å¼•è¾¹ç•Œ\n    return;\n  }\n\n  if (visited[i][j]) {\n    // å·²éå†è¿‡ (i, j)\n    return;\n  }\n\n  // è¿›å…¥å½“å‰èŠ‚ç‚¹ (i, j)\n  visited[i][j] = true;\n\n  // è¿›å…¥ç›¸é‚»èŠ‚ç‚¹ï¼ˆå››å‰æ ‘ï¼‰\n  // ä¸Š\n  dfs(grid, i - 1, j, visited);\n  // ä¸‹\n  dfs(grid, i + 1, j, visited);\n  // å·¦\n  dfs(grid, i, j - 1, visited);\n  // å³\n  dfs(grid, i, j + 1, visited);\n};\n\n```\n\n\n## 2. å²›å±¿æ•°é‡\n\n>  ç¬¬ 200 é¢˜ã€Œ[å²›å±¿æ•°é‡](https://leetcode.cn/problems/number-of-islands)ã€\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241113-3.png)\n\nå¦‚ä¸Šå›¾ï¼Œ`0` ä»£è¡¨`æµ·æ°´`ï¼Œ`1` ä»£è¡¨`é™†åœ°`ï¼Œè¿”å›ç‹¬ç«‹å²›å±¿çš„æ•°é‡ä¸º `4`\n\næ€è·¯ï¼š\n- ä½¿ç”¨ä¸Šé¢çš„éå†æ¡†æ¶ï¼Œåªè¦å‘ç°ä¸€ä¸ªé™†åœ°ï¼Œå°±æŠŠå®ƒå‘¨è¾¹çš„é™†åœ°éƒ½å˜æˆæµ·æ°´\n- è¿™æ ·ä¸»è¦æ˜¯ä¸ºäº†çœäº‹ï¼Œé¿å…ç»´æŠ¤Â `visited`Â æ•°ç»„\n\t- å› ä¸ºÂ `dfs`Â å‡½æ•°éå†åˆ°å€¼ä¸ºÂ `0`Â çš„ä½ç½®ä¼šç›´æ¥è¿”å›ï¼Œæ‰€ä»¥åªè¦æŠŠç»è¿‡çš„ä½ç½®éƒ½è®¾ç½®ä¸ºÂ `0`ï¼Œå°±å¯ä»¥èµ·åˆ°ä¸èµ°å›å¤´è·¯çš„ä½œç”¨\n\n\n```javascript\nvar numIslands = function (grid) {\n  let res = 0;\n  let m = grid.length,\n    n = grid[0].length;\n  // éå† grid\n  for (let i = 0; i < m; i++) {\n    for (let j = 0; j < n; j++) {\n      if (grid[i][j] === \"1\") {\n        // æ¯å‘ç°ä¸€ä¸ªå²›å±¿ï¼Œå²›å±¿æ•°é‡åŠ ä¸€\n        res++;\n        // ç„¶åä½¿ç”¨ DFS å°†å²›å±¿æ·¹äº†\n        dfs(grid, i, j);\n      }\n    }\n  }\n  return res;\n};\n\n// ä» (i, j) å¼€å§‹ï¼Œå°†ä¸ä¹‹ç›¸é‚»çš„é™†åœ°éƒ½å˜æˆæµ·æ°´\nvar dfs = function (grid, i, j) {\n  let m = grid.length,\n    n = grid[0].length;\n  if (i < 0 || j < 0 || i >= m || j >= n) {\n    // è¶…å‡ºç´¢å¼•è¾¹ç•Œ\n    return;\n  }\n  if (grid[i][j] === \"0\") {\n    // å·²ç»æ˜¯æµ·æ°´äº†\n    return;\n  }\n  // å°† (i, j) å˜æˆæµ·æ°´\n  grid[i][j] = \"0\";\n  // æ·¹æ²¡ä¸Šä¸‹å·¦å³çš„é™†åœ°\n  dfs(grid, i + 1, j);\n  dfs(grid, i, j + 1);\n  dfs(grid, i - 1, j);\n  dfs(grid, i, j - 1);\n};\n\n```\n\n\n## 3. å°é—­å²›å±¿çš„æ•°é‡\n\n> åŠ›æ‰£ç¬¬ 1254 é¢˜ã€Œ[ç»Ÿè®¡å°é—­å²›å±¿çš„æ•°ç›®](https://leetcode.cn/problems/number-of-closed-islands)ã€\n\n### 3.1. è¦ç‚¹\n\n- `1` ä»£è¡¨é™†åœ°ï¼Œ`0` ä»£è¡¨`æµ·æ°´`\n- æ‰€è°“ã€Œå°é—­å²›å±¿ã€å°±æ˜¯ä¸Šä¸‹å·¦å³å…¨éƒ¨è¢«Â `1`Â åŒ…å›´çš„Â `0`ï¼Œä¹Ÿå°±æ˜¯è¯´`é è¾¹çš„é™†åœ°ä¸ç®—ä½œã€Œå°é—­å²›å±¿ã€`\n\nå³`åŠå²›`ä¸ç®—ï¼Œ`å…¨å²›`æ‰ç®—\n\n### 3.2. æ€è·¯\n\n- å…ˆæŠŠé è¾¹çš„éƒ½æ·¹æ‰\n\t- æŠŠé ä¸Šè¾¹çš„å²›å±¿æ·¹æ‰\n\t- æŠŠé ä¸‹è¾¹çš„å²›å±¿æ·¹æ‰\n\t- æŠŠé å·¦è¾¹çš„å²›å±¿æ·¹æ‰\n\t- æŠŠé å³è¾¹çš„å²›å±¿æ·¹æ‰\n- ç„¶åå†éå†ï¼Œæ€è·¯å°±å’Œä¸Šé¢˜ä¸€æ ·äº†\n\t- ä» `(i, j)` å¼€å§‹ï¼Œå°†ä¸ä¹‹ç›¸é‚»çš„é™†åœ°éƒ½å˜æˆæµ·æ°´\n\n### 3.3. ä»£ç \n\n```javascript hl:6,12,8,14\nvar closedIsland = function (grid) {\n  var m = grid.length,\n    n = grid[0].length;\n  // ä¸»å‡½æ•°ï¼šè®¡ç®—å°é—­å²›å±¿çš„æ•°é‡\n  for (let j = 0; j < n; j++) {\n    // æŠŠé ä¸Šè¾¹çš„å²›å±¿æ·¹æ‰\n    dfs(grid, 0, j);\n    // æŠŠé ä¸‹è¾¹çš„å²›å±¿æ·¹æ‰\n    dfs(grid, m - 1, j);\n  }\n  for (let i = 0; i < m; i++) {\n    // æŠŠé å·¦è¾¹çš„å²›å±¿æ·¹æ‰\n    dfs(grid, i, 0);\n    // æŠŠé å³è¾¹çš„å²›å±¿æ·¹æ‰\n    dfs(grid, i, n - 1);\n  }\n  // éå† gridï¼Œå‰©ä¸‹çš„å²›å±¿éƒ½æ˜¯å°é—­å²›å±¿\n  let res = 0;\n  for (let i = 0; i < m; i++) {\n    for (let j = 0; j < n; j++) {\n      if (grid[i][j] == 0) {\n        res++;\n        dfs(grid, i, j);\n      }\n    }\n  }\n  return res;\n\n  // ä» (i, j) å¼€å§‹ï¼Œå°†ä¸ä¹‹ç›¸é‚»çš„é™†åœ°éƒ½å˜æˆæµ·æ°´\n  function dfs(grid, i, j) {\n    let m = grid.length,\n      n = grid[0].length;\n    if (i < 0 || j < 0 || i >= m || j >= n) {\n      return;\n    }\n    if (grid[i][j] == 1) {\n      // å·²ç»æ˜¯æµ·æ°´äº†\n      return;\n    }\n    // å°† (i, j) å˜æˆæµ·æ°´\n    grid[i][j] = 1;\n    // æ·¹æ²¡ä¸Šä¸‹å·¦å³çš„é™†åœ°\n    dfs(grid, i + 1, j);\n    dfs(grid, i, j + 1);\n    dfs(grid, i - 1, j);\n    dfs(grid, i, j - 1);\n  }\n};\n\n```\n\n## 4. å²›å±¿çš„æœ€å¤§é¢ç§¯\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241113-5.png)\n\n\nåªä¸è¿‡Â `dfs`Â å‡½æ•°æ·¹æ²¡å²›å±¿çš„åŒæ—¶ï¼Œè¿˜åº”è¯¥æƒ³åŠæ³•`è®°å½•`è¿™ä¸ªå²›å±¿çš„é¢ç§¯ã€‚\n\n```javascript\nvar maxAreaOfIsland = function (grid) {\n  // è®°å½•å²›å±¿çš„æœ€å¤§é¢ç§¯\n  let res = 0;\n  let m = grid.length,\n    n = grid[0].length;\n  for (let i = 0; i < m; i++) {\n    for (let j = 0; j < n; j++) {\n      if (grid[i][j] == 1) {\n        // æ·¹æ²¡å²›å±¿ï¼Œå¹¶æ›´æ–°æœ€å¤§å²›å±¿é¢ç§¯\n        res = Math.max(res, dfs(grid, i, j));\n      }\n    }\n  }\n  return res;\n\n  // æ·¹æ²¡ä¸ (i, j) ç›¸é‚»çš„é™†åœ°ï¼Œå¹¶è¿”å›æ·¹æ²¡çš„é™†åœ°é¢ç§¯\n  function dfs(grid, i, j) {\n    let m = grid.length,\n      n = grid[0].length;\n    if (i < 0 || j < 0 || i >= m || j >= n) {\n      // è¶…å‡ºç´¢å¼•è¾¹ç•Œ\n      return 0;\n    }\n    if (grid[i][j] == 0) {\n      // å·²ç»æ˜¯æµ·æ°´äº†\n      return 0;\n    }\n    // å°† (i, j) å˜æˆæµ·æ°´\n    grid[i][j] = 0;\n\n    return (\n      dfs(grid, i + 1, j) +\n      dfs(grid, i, j + 1) +\n      dfs(grid, i - 1, j) +\n      dfs(grid, i, j - 1) +\n      1\n    );\n  }\n};\n\n```\n\n","4c7646d8079d58199c74d527e55281c7":"\n# å›æº¯ç®—æ³•è§£æ•°ç‹¬\n\n\n> åŠ›æ‰£ç¬¬ 37 é¢˜ã€Œ[è§£æ•°ç‹¬](https://leetcode.cn/problems/sudoku-solver)ã€\n\n\n## ç›®å½•\n<!-- toc -->\n ## æ•°ç‹¬å®šä¹‰ \n\nä¸‹é¢å‡ ç§æƒ…å†µéƒ½ä¸èƒ½æœ‰ç›¸åŒçš„æ•°å­—å‡ºç°ï¼š\n- æ¯è¡Œ\n- æ¯åˆ—\n- `æ¯ä¸€ä¸ª 3Ã—3` çš„å°æ–¹æ ¼\n\n","dfae8436adba5d2fa96e1415d7d9da63":"\n# å›æº¯ç®—æ³•è§£æ‹¬å·ç”Ÿæˆ\n\n`#å›æº¯ç®—æ³•` \n\n> åŠ›æ‰£ç¬¬ 22 é¢˜ã€Œ[æ‹¬å·ç”Ÿæˆ](https://leetcode.cn/problems/generate-parentheses)ã€\n\n\nè¾“å…¥æ˜¯ä¸€ä¸ªæ­£æ•´æ•°Â `n`ï¼Œè¾“å‡ºæ˜¯Â `n`Â å¯¹å„¿æ‹¬å·çš„**æ‰€æœ‰åˆæ³•ç»„åˆ**\n- `n` ä»£è¡¨ `æ‹¬å·çš„å¯¹æ•°`\n\næ¯”å¦‚è¯´ï¼Œè¾“å…¥Â `n=3`ï¼Œè¾“å‡ºä¸ºå¦‚ä¸‹ 5 ä¸ªå­—ç¬¦ä¸²ï¼š\n\n```bash\n\"((()))\",\n\"(()())\",\n\"(())()\",\n\"()(())\",\n\"()()()\"\n```\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\nvar generateParenthesis = function (n) {\n  let track = \"\";\n  let res = [];\n\n  const backtrack = (left, right) => {\n    // è‹¥å·¦æ‹¬å·å‰©ä¸‹çš„å¤šï¼Œè¯´æ˜ä¸åˆæ³•\n    if (right < left) return;\n    // æ•°é‡å°äº 0 è‚¯å®šæ˜¯ä¸åˆæ³•çš„\n    if (left < 0 || right < 0) return;\n    // å½“æ‰€æœ‰æ‹¬å·éƒ½æ°å¥½ç”¨å®Œæ—¶ï¼Œå¾—åˆ°ä¸€ä¸ªåˆæ³•çš„æ‹¬å·ç»„åˆ\n    if (left === 0 && right === 0) {\n      res.push(track);\n      return;\n    }\n\n    // åšé€‰æ‹©ï¼Œå°è¯•æ”¾ä¸€ä¸ªå·¦æ‹¬å·\n    track += \"(\";\n    backtrack(left - 1, right);\n    // æ’¤é”€é€‰æ‹©\n    track = track.slice(0, -1);\n\n    // åšé€‰æ‹©ï¼Œå°è¯•æ”¾ä¸€ä¸ªå³æ‹¬å·\n    track += \")\";\n    backtrack(left, right - 1);\n    // æ’¤é”€é€‰æ‹©\n    track = track.slice(0, -1);\n  };\n\n  backtrack(n, n);\n  return res;\n};\n\n```","ddd959c12e7154aa9a8a042591523204":"\n# å›æº¯ç®—æ³•è§£æ‹¬å·ç”Ÿæˆ\n\n\n![å›¾ç‰‡&æ–‡ä»¶](./files/20241113-6.png)\n\n","b049496c4d0f5c1cb601a8e8daaeb19c":"\n# å…³äº\n\n`#åè®°`  `#ååº`   `#about`  \n\n\n## ç›®å½•\n<!-- toc -->\n ## è”ç³»æˆ‘ \n\n- ä¸ªäººé‚®ç®±ï¼š liguwe@qq.com\n- ä¸ªäººå¾®ä¿¡ï¼šliguwe (è¯·å¤‡æ³¨ï¼š`832`)\n- ä¸ªäººç«™ç‚¹ï¼š [ä¸ªäººç«™ç‚¹](https://liguwe.site)\n- Githubï¼š[Github](http://github.com/liguwe)\n\n## é—®é¢˜åé¦ˆ\n\nå¦‚æœæ‚¨å‘ç°äº†é”™è¯¯ï¼Œæ‚¨å¯é€šè¿‡ä»¥ä¸‹é€”å¾„æ¥åé¦ˆç»™æˆ‘ï¼š\n\n- **åé¦ˆæ–¹å¼**ï¼š[Github New Issues](https://github.com/liguwe/liguwe.github.io/issues/new)\n\n> æ¬¢è¿ä»»ä½•å½¢å¼çš„æ”¹è¿›æ„è§å’Œå»ºè®®ï¼Œå¤šå¤šæŒ‡æ•™ï¼Œè°¢è°¢ï¼\n\n## è‡´è°¢\n\n- æ„Ÿè°¢ [mdbook](https://rust-lang.github.io/mdBook/) æä¾›çš„ç”µå­ä¹¦ç”Ÿæˆå·¥å…·\n- æ„Ÿè°¢ [Github](https://github.com/) æä¾›çš„ä»£ç æ‰˜ç®¡æœåŠ¡åŠé™æ€é¡µé¢æœåŠ¡\n"}